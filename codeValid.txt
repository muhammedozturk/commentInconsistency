x

public int hashCode(){
  return value.hashCode();
}

public void onStart(){
}

@Override protected void propertyChange(PropertyChangeEvent evt){
  if (SeaGlassLookAndFeel.shouldUpdateStyle(evt)) {
    updateStyle((JTextComponent)evt.getSource());
  }
  super.propertyChange(evt);
}

@NotNull public PsiQuery filter(@NotNull final Class<? extends PsiNamedElement> clazz,@NotNull final String name){
  final Set<PsiElement> result=new HashSet<PsiElement>(Arrays.asList(myPsiElements));
  for (  final PsiElement element : myPsiElements) {
    final PsiNamedElement namedElement=PyUtil.as(element,clazz);
    if ((namedElement == null) || (!name.equals(namedElement.getName()))) {
      result.remove(element);
    }
  }
  return new PsiQuery(result.toArray(new PsiElement[result.size()]));
}

protected void writeQualifiedName(String nsAlias,String name) throws IOException {
  if (nsAlias != null && nsAlias.length() > 0) {
    writer.write(nsAlias);
    writer.write(':');
  }
  writer.write(name);
}

public TextEditor deleteAll(String pattern){
  return replaceAll(pattern,"");
}

public synchronized GcmHelper addRegistrationCallback(@NonNull Context context,@NonNull GcmRegistrationListener registrationListener,boolean sticky){
  if (null == registrationCallbacks) {
    registrationCallbacks=new ConcurrentLinkedQueue<>();
  }
  registrationCallbacks.add(registrationListener);
  if (sticky && !TextUtils.isEmpty(this.pushToken)) {
    registrationListener.onTokenAvailable(context,pushToken,false);
  }
  return this;
}

@Override public void acceptTrainingSet(TrainingSetEvent e){
  Instances trainingSet=e.getTrainingSet();
  DataSetEvent dse=new DataSetEvent(this,trainingSet);
  acceptDataSet(dse);
}

<T>List<T> onFind(Class<T> modelClass,String[] columns,String[] conditions,String orderBy,String limit,boolean isEager){
  BaseUtility.checkConditionsCorrect(conditions);
  List<T> dataList=query(modelClass,columns,getWhereClause(conditions),getWhereArgs(conditions),null,null,orderBy,limit,getForeignKeyAssociations(modelClass.getName(),isEager));
  return dataList;
}

private boolean isAgentEmpty(Agent agent){
  if (agent != null) {
    String first=agent.getFirstName();
    String last=agent.getLastName();
    String email=agent.getEmail();
    String home=agent.getHomepage();
    String org=agent.getOrganisation();
    String phone=agent.getPhone();
    String position=agent.getPosition();
    String city=null;
    String street=null;
    String country=null;
    String code=null;
    String province=null;
    Address address=agent.getAddress();
    if (address != null) {
      city=address.getCity();
      street=address.getAddress();
      country=address.getCountry();
      code=address.getPostalCode();
      province=address.getProvince();
    }
    String directory=null;
    String identifier=null;
    List<UserId> userIds=agent.getUserIds();
    if (!userIds.isEmpty()) {
      UserId userId=userIds.get(0);
      directory=userId.getDirectory();
      identifier=userId.getIdentifier();
    }
    return (Strings.isNullOrEmpty(city) && Strings.isNullOrEmpty(street) && Strings.isNullOrEmpty(country)&& Strings.isNullOrEmpty(code)&& Strings.isNullOrEmpty(province)&& Strings.isNullOrEmpty(first)&& Strings.isNullOrEmpty(last)&& Strings.isNullOrEmpty(email)&& Strings.isNullOrEmpty(home)&& Strings.isNullOrEmpty(org)&& Strings.isNullOrEmpty(phone)&& Strings.isNullOrEmpty(position)&& Strings.isNullOrEmpty(directory)&& Strings.isNullOrEmpty(identifier));
  }
  return true;
}

public static byte[] calendarToRawBytes(Calendar timestamp,boolean honorDeviceTimeOffset){
  if (honorDeviceTimeOffset) {
    int offsetInHours=MiBandCoordinator.getDeviceTimeOffsetHours();
    if (offsetInHours != 0) {
      timestamp.add(Calendar.HOUR_OF_DAY,offsetInHours);
    }
  }
  byte[] year=fromUint16(timestamp.get(Calendar.YEAR));
  return new byte[]{year[0],year[1],fromUint8(timestamp.get(Calendar.MONTH) + 1),fromUint8(timestamp.get(Calendar.DATE)),fromUint8(timestamp.get(Calendar.HOUR_OF_DAY)),fromUint8(timestamp.get(Calendar.MINUTE)),fromUint8(timestamp.get(Calendar.SECOND)),dayOfWeekToRawBytes(timestamp),0};
}

private static void decodeBase256Segment(BitSource bits,StringBuilder result,Collection<byte[]> byteSegments) throws FormatException {
  int codewordPosition=1 + bits.getByteOffset();
  int d1=unrandomize255State(bits.readBits(8),codewordPosition++);
  int count;
  if (d1 == 0) {
    count=bits.available() / 8;
  }
 else   if (d1 < 250) {
    count=d1;
  }
 else {
    count=250 * (d1 - 249) + unrandomize255State(bits.readBits(8),codewordPosition++);
  }
  if (count < 0) {
    throw FormatException.getFormatInstance();
  }
  byte[] bytes=new byte[count];
  for (int i=0; i < count; i++) {
    if (bits.available() < 8) {
      throw FormatException.getFormatInstance();
    }
    bytes[i]=(byte)unrandomize255State(bits.readBits(8),codewordPosition++);
  }
  byteSegments.add(bytes);
  try {
    result.append(new String(bytes,"ISO8859_1"));
  }
 catch (  UnsupportedEncodingException uee) {
    throw new IllegalStateException("Platform does not support required encoding: " + uee);
  }
}

protected void initBPOrderDetails(int C_BPartner_ID,boolean forInvoice){
  log.config("C_BPartner_ID=" + C_BPartner_ID);
  KeyNamePair pp=new KeyNamePair(0,"");
  orderField.removeActionListener(this);
  orderField.removeAllItems();
  orderField.addItem(pp);
  ArrayList<KeyNamePair> list=loadOrderData(C_BPartner_ID,forInvoice,sameWarehouseCb.isSelected());
  for (  KeyNamePair knp : list)   orderField.addItem(knp);
  orderField.setSelectedIndex(0);
  orderField.addActionListener(this);
  initBPDetails(C_BPartner_ID);
}

public ModpackInitializationPanel(WizardController controller,Map wizardData,Vector<String> versions,String selVersion){
  initComponents();
  this.controller=controller;
  this.wizardData=wizardData;
  wizardData.put(KEY_GAME_VERSION,versions);
  wizardData.put("selVersion",selVersion);
  wizardData.put(KEY_INCLUDING_LAUNCHER,false);
  configureComboContents();
  checkProblem();
}

public synchronized void remove(int index){
  super.remove(index);
  double removedValue=mValue.remove(index);
  if (removedValue == mMinValue || removedValue == mMaxValue) {
    initRange();
  }
}

private boolean coordIsCalendarCell(float y){
  return y > cellHeight;
}

protected void sprint(double doubleField){
  sprint(String.valueOf(doubleField));
}

private int attributeMap(String name){
  Integer num=map.get(name);
  if (num == null) {
    return 0;
  }
  return num.intValue();
}

private void groupPlayerStandingCSV(){
  for (  PlayerQB p : teamQBs) {
    if (p.year == 0)     teamRSs.add(p);
 else     if (p.year == 1)     teamFRs.add(p);
 else     if (p.year == 2)     teamSOs.add(p);
 else     if (p.year == 3)     teamJRs.add(p);
 else     if (p.year == 4)     teamSRs.add(p);
  }
  for (  PlayerRB p : teamRBs) {
    if (p.year == 0)     teamRSs.add(p);
 else     if (p.year == 1)     teamFRs.add(p);
 else     if (p.year == 2)     teamSOs.add(p);
 else     if (p.year == 3)     teamJRs.add(p);
 else     if (p.year == 4)     teamSRs.add(p);
  }
  for (  PlayerWR p : teamWRs) {
    if (p.year == 0)     teamRSs.add(p);
 else     if (p.year == 1)     teamFRs.add(p);
 else     if (p.year == 2)     teamSOs.add(p);
 else     if (p.year == 3)     teamJRs.add(p);
 else     if (p.year == 4)     teamSRs.add(p);
  }
  for (  PlayerK p : teamKs) {
    if (p.year == 0)     teamRSs.add(p);
 else     if (p.year == 1)     teamFRs.add(p);
 else     if (p.year == 2)     teamSOs.add(p);
 else     if (p.year == 3)     teamJRs.add(p);
 else     if (p.year == 4)     teamSRs.add(p);
  }
  for (  PlayerOL p : teamOLs) {
    if (p.year == 0)     teamRSs.add(p);
 else     if (p.year == 1)     teamFRs.add(p);
 else     if (p.year == 2)     teamSOs.add(p);
 else     if (p.year == 3)     teamJRs.add(p);
 else     if (p.year == 4)     teamSRs.add(p);
  }
  for (  PlayerS p : teamSs) {
    if (p.year == 0)     teamRSs.add(p);
 else     if (p.year == 1)     teamFRs.add(p);
 else     if (p.year == 2)     teamSOs.add(p);
 else     if (p.year == 3)     teamJRs.add(p);
 else     if (p.year == 4)     teamSRs.add(p);
  }
  for (  PlayerCB p : teamCBs) {
    if (p.year == 0)     teamRSs.add(p);
 else     if (p.year == 1)     teamFRs.add(p);
 else     if (p.year == 2)     teamSOs.add(p);
 else     if (p.year == 3)     teamJRs.add(p);
 else     if (p.year == 4)     teamSRs.add(p);
  }
  for (  PlayerF7 p : teamF7s) {
    if (p.year == 0)     teamRSs.add(p);
 else     if (p.year == 1)     teamFRs.add(p);
 else     if (p.year == 2)     teamSOs.add(p);
 else     if (p.year == 3)     teamJRs.add(p);
 else     if (p.year == 4)     teamSRs.add(p);
  }
}

public String list() throws IOException, TomcatManagerException {
  return invoke("/list",null,null);
}

public AttributeFiller(AttributesImpl attributes,PO poToAutoFill){
  attributes.clear();
  atts=attributes;
  po=poToAutoFill;
}

public static final void toByteArray(ByteArrayOutputStream output,String str){
  if (str == null) {
    return;
  }
  output.write(34);
  int max=str.length();
  for (int i=0; i < max; i++) {
    int b=str.charAt(i);
    if ((b >= 32) && (b <= 126)) {
switch (b) {
case 34:
case 92:
        output.write(92);
      break;
  }
  output.write(b);
}
 else {
  output.write(92);
switch (b) {
case 8:
    output.write(98);
  break;
case 9:
output.write(116);
break;
case 10:
output.write(110);
break;
case 12:
output.write(102);
break;
case 13:
output.write(114);
break;
default :
output.write(117);
int b3=b >> 4;
int b4=b & 0xf;
if (b4 < 10) b4+=48;
 else b4+=87;
int b2=b3 >> 4;
b3&=0xf;
if (b3 < 10) b3+=48;
 else b3+=87;
int b1=b2 >> 4;
b2&=0xf;
if (b2 < 10) b2+=48;
 else b2+=87;
if (b1 < 10) b1+=48;
 else b1+=87;
output.write(b1);
output.write(b2);
output.write(b3);
output.write(b4);
break;
}
}
}
output.write(34);
}

@RequestMapping(value={"/",""},method=RequestMethod.PUT) @ResponseBody public RestWrapper insert(@ModelAttribute("file") @Valid File file,BindingResult bindingResult,Principal principal){
  RestWrapper restWrapper=null;
  if (bindingResult.hasErrors()) {
    BindingResultError bindingResultError=new BindingResultError();
    return bindingResultError.errorMessage(bindingResult);
  }
  try {
    file.setCreationTS(DateConverter.stringToDate(file.getTableCreationTS()));
    fileDAO.insert(file);
    restWrapper=new RestWrapper(file,RestWrapper.OK);
    LOGGER.info("Record with ID:" + file.getBatchId() + " inserted in File by User:"+ principal.getName()+ file);
  }
 catch (  MetadataException e) {
    LOGGER.error(e);
    restWrapper=new RestWrapper(e.getMessage(),RestWrapper.ERROR);
  }
  return restWrapper;
}

private void enableUpdates(){
  if (lmgr != null) {
    try {
      lmgr.addGpsStatusListener(this);
      lmgr.requestLocationUpdates(LocationManager.GPS_PROVIDER,gpsLoggingInterval,0,this);
    }
 catch (    SecurityException e) {
      Log.e(TAG,"You denied GPS permission, so this app won't work");
    }
  }
}

private void addInteger(){
  int oldPos=pos - 1;
  String literal=scanInteger();
  final String substring;
  final int radix;
  if (literal.startsWith("0x") || literal.startsWith("0X")) {
    radix=16;
    substring=literal.substring(2);
  }
 else   if (literal.startsWith("0") && literal.length() > 1) {
    radix=8;
    substring=literal.substring(1);
  }
 else {
    radix=10;
    substring=literal;
  }
  int value=0;
  try {
    value=Integer.parseInt(substring,radix);
  }
 catch (  NumberFormatException e) {
    error("invalid base-" + radix + " integer constant: "+ literal);
  }
  addToken(TokenKind.INT,oldPos,pos,value);
}

public void removeMouseListener(GlobalMouseListener listener){
  listeners.remove(listener);
}

public XMLDocument(double version,boolean standalone){
  prolog=new Vector<Object>(2);
  StringBuffer versionStr=new StringBuffer();
  versionStr.append("<?xml version=\"");
  versionStr.append(version);
  versionStr.append("\" standalone=\"");
  if (standalone)   versionStr.append("yes\"?>");
 else   versionStr.append("no\"?>\n");
  this.versionDecl=versionStr.toString();
}

public ObjectName createDistributionLocator(String host,int port,String workingDirectory,String productDirectory,String remoteCommand) throws MalformedObjectNameException {
  try {
    DistributionLocatorJmxImpl locator=(DistributionLocatorJmxImpl)addDistributionLocator();
    DistributionLocatorConfig config=locator.getConfig();
    config.setHost(host);
    config.setPort(port);
    config.setWorkingDirectory(workingDirectory);
    config.setProductDirectory(productDirectory);
    config.setRemoteCommand(remoteCommand);
    return new ObjectName(locator.getMBeanName());
  }
 catch (  RuntimeException e) {
    logger.warn(e.getMessage(),e);
    throw e;
  }
catch (  VirtualMachineError err) {
    SystemFailure.initiateFailure(err);
    throw err;
  }
catch (  Error e) {
    SystemFailure.checkFailure();
    logger.error(e.getMessage(),e);
    throw e;
  }
}

void applyCenterPanel(GrassMarlin ui){
  if (treeViewComponent != null) {
    centerPanelComponent.add(treeViewComponent,SplitPane.Position.CENTER);
  }
  centerPanelComponent.add(graphComponent,SplitPane.Position.RIGHT);
  centerPanelComponent.add(logComponent,SplitPane.Position.LEFT_BOTTOM);
  Border b=BorderFactory.createMatteBorder(1,0,1,1,Color.GRAY);
  Border b2=BorderFactory.createMatteBorder(1,1,1,1,Color.GRAY);
  treeViewComponent.setBorder(b2);
  graphComponent.setBorder(b);
  logComponent.setBorder(b2);
  centerPanelComponent.setInitialSize(x,y);
  Dimension d=new Dimension(5,5);
  ui.add(new Filler(d,d,d),BorderLayout.WEST);
  ui.add(new Filler(d,d,d),BorderLayout.EAST);
  ui.add(centerPanelComponent,BorderLayout.CENTER);
}

private boolean isAbstract(String source){
  int nonterminalCount=0;
  for (  String t : source.split("\\s+")) {
    if (!t.matches(NT_REGEX))     return false;
    nonterminalCount++;
  }
  return nonterminalCount != 0;
}

public static String URIforPortablePath(String path){
  if (path.startsWith(FileUtil.PREFERENCES)) {
    return path.replaceFirst(FileUtil.PREFERENCES,"/prefs/");
  }
 else   if (path.startsWith(FileUtil.PROGRAM)) {
    return path.replaceFirst(FileUtil.PROGRAM,"/dist/");
  }
 else {
    return null;
  }
}

public int hashCode(){
  return Float.floatToIntBits(value);
}

public static void log(Throwable error,String message,Object... args){
  if (loggingEnabled) {
    Log.d(TAG,args.length == 0 ? message : String.format(message,args),error);
  }
}

public void addExtensionNamespace(String uri,ExtensionHandler extNS){
  m_extensionFunctionNamespaces.put(uri,extNS);
}

private void generateTypeParameterInfos(BinaryMember parent,char[] signature,HashMap newElements,ArrayList typeParameterHandles){
  if (signature == null)   return;
  char[][] typeParameterSignatures=Signature.getTypeParameters(signature);
  for (int i=0, typeParameterCount=typeParameterSignatures.length; i < typeParameterCount; i++) {
    char[] typeParameterSignature=typeParameterSignatures[i];
    char[] typeParameterName=Signature.getTypeVariable(typeParameterSignature);
    CharOperation.replace(typeParameterSignature,'/','.');
    char[][] typeParameterBoundSignatures=Signature.getTypeParameterBounds(typeParameterSignature);
    int boundLength=typeParameterBoundSignatures.length;
    char[][] typeParameterBounds=new char[boundLength][];
    for (int j=0; j < boundLength; j++) {
      typeParameterBounds[j]=Signature.toCharArray(typeParameterBoundSignatures[j]);
    }
    TypeParameter typeParameter=new TypeParameter(parent,parent.manager,new String(typeParameterName));
    TypeParameterElementInfo info=new TypeParameterElementInfo();
    info.bounds=typeParameterBounds;
    info.boundsSignatures=typeParameterBoundSignatures;
    typeParameterHandles.add(typeParameter);
    while (newElements.containsKey(typeParameter))     typeParameter.occurrenceCount++;
    newElements.put(typeParameter,info);
  }
}

public final void testNextBytesbyteArray02(){
  byte[] myBytes;
  byte[] myBytes1;
  byte[] myBytes2;
  for (int i=1; i < LENGTH; i+=INCR) {
    myBytes=new byte[i];
    for (int j=1; j < i; j++) {
      myBytes[j]=(byte)(j & 0xFF);
    }
    sr.setSeed(myBytes);
    sr2.setSeed(myBytes);
    for (int k=1; k < LENGTH; k+=INCR) {
      myBytes1=new byte[k];
      myBytes2=new byte[k];
      sr.nextBytes(myBytes1);
      sr2.nextBytes(myBytes2);
      for (int l=0; l < k; l++) {
        assertFalse("unexpected: myBytes1[l] != myBytes2[l]  :: l==" + l + " k="+ k+ " i="+ i+ " myBytes1[l]="+ myBytes1[l]+ " myBytes2[l]="+ myBytes2[l],myBytes1[l] != myBytes2[l]);
      }
    }
  }
  for (int n=1; n < LENGTH; n+=INCR) {
    int n1=10;
    int n2=20;
    int n3=100;
    byte[][] bytes1=new byte[10][n1];
    byte[][] bytes2=new byte[5][n2];
    for (int k=0; k < bytes1.length; k++) {
      sr.nextBytes(bytes1[k]);
    }
    for (int k=0; k < bytes2.length; k++) {
      sr2.nextBytes(bytes2[k]);
    }
    for (int k=0; k < n3; k++) {
      int i1=k / n1;
      int i2=k % n1;
      int i3=k / n2;
      int i4=k % n2;
      assertTrue("non-equality: i1=" + i1 + " i2="+ i2+ " i3="+ i3+ " i4="+ i4,bytes1[i1][i2] == bytes2[i3][i4]);
    }
  }
}

private void signalNotEmpty(){
  final ReentrantLock takeLock=this.takeLock;
  takeLock.lock();
  try {
    notEmpty.signal();
  }
  finally {
    takeLock.unlock();
  }
}

public RoutingInfo(Object o){
  this.text=o.toString();
}

private List<View> addView(View view,List<View> cache){
  if (cache == null) {
    cache=new LinkedList<View>();
  }
  cache.add(view);
  return cache;
}

public static CertChainKeyPair generateSigned(String fqdn,X509Certificate issuerCertificate,PrivateKey issuerPrivateKey){
  try {
    return generateCertificateAndSign(fqdn,issuerCertificate,issuerPrivateKey,getServerExtensions(issuerCertificate));
  }
 catch (  CertificateException|OperatorCreationException|NoSuchAlgorithmException|IOException e) {
    throw new RuntimeException(String.format("Failed to generate server certificate, reason: %s",e.getMessage()),e);
  }
}

private void startAnimation(){
  ValueAnimator animator=ValueAnimator.ofFloat(1.0f);
  ArrayList<NameValuesHolder> nameValueList=(ArrayList<NameValuesHolder>)mPendingAnimations.clone();
  mPendingAnimations.clear();
  int propertyMask=0;
  int propertyCount=nameValueList.size();
  for (int i=0; i < propertyCount; ++i) {
    NameValuesHolder nameValuesHolder=nameValueList.get(i);
    propertyMask|=nameValuesHolder.mNameConstant;
  }
  mAnimatorMap.put(animator,new PropertyBundle(propertyMask,nameValueList));
  animator.addUpdateListener(mAnimatorEventListener);
  animator.addListener(mAnimatorEventListener);
  if (mStartDelaySet) {
    animator.setStartDelay(mStartDelay);
  }
  if (mDurationSet) {
    animator.setDuration(mDuration);
  }
  if (mInterpolatorSet) {
    animator.setInterpolator(mInterpolator);
  }
  animator.start();
}

public void addRequest(Request request){
  requestSet.add(request);
}

public static double logpmf(double x,int n,double p){
  if (x < 0 || x > n) {
    return Double.NEGATIVE_INFINITY;
  }
  if (p <= 0.) {
    return x == 0 ? 0. : Double.NEGATIVE_INFINITY;
  }
  if (p >= 1.) {
    return x == n ? 0. : Double.NEGATIVE_INFINITY;
  }
  final double q=1 - p;
  if (x == 0) {
    if (p < .1) {
      return -devianceTerm(n,n * q) - n * p;
    }
 else {
      return n * Math.log(q);
    }
  }
  if (x == n) {
    if (p > .9) {
      return -devianceTerm(n,n * p) - n * q;
    }
 else {
      return n * Math.log(p);
    }
  }
  final double lc=stirlingError(n) - stirlingError(x) - stirlingError(n - x)- devianceTerm(x,n * p)- devianceTerm(n - x,n * q);
  final double f=(MathUtil.TWOPI * x * (n - x)) / n;
  return lc - .5 * Math.log(f);
}

private void byte2hex(byte b,StringBuffer buf){
  char[] hexChars={'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
  int high=((b & 0xf0) >> 4);
  int low=(b & 0x0f);
  buf.append(hexChars[high]);
  buf.append(hexChars[low]);
}

public static List<GeoTimeSerie> timesplit(GeoTimeSerie gts,long quietperiod,int minvalues,String labelname){
  List<GeoTimeSerie> series=new ArrayList<GeoTimeSerie>();
  if (0 == gts.values || gts.hasLabel(labelname)) {
    series.add(gts.clone());
    return series;
  }
  sort(gts,false);
  long lasttick=gts.ticks[0];
  int idx=0;
  int gtsid=1;
  GeoTimeSerie serie=new GeoTimeSerie(gts.lastbucket,gts.bucketcount,gts.bucketspan,4);
  serie.setName(gts.getName());
  Map<String,String> labels=new HashMap<String,String>();
  labels.putAll(gts.getLabels());
  labels.put(labelname,Integer.toString(gtsid));
  serie.setLabels(labels);
  while (idx < gts.values) {
    if (gts.ticks[idx] - lasttick >= quietperiod) {
      if (serie.values > 0 && serie.values >= minvalues) {
        series.add(serie);
      }
      serie=new GeoTimeSerie(gts.lastbucket,gts.bucketcount,gts.bucketspan,4);
      serie.setName(gts.getName());
      labels=new HashMap<String,String>();
      labels.putAll(gts.getLabels());
      gtsid++;
      labels.put(labelname,Integer.toString(gtsid));
      serie.setLabels(labels);
    }
    Object value=GTSHelper.valueAtIndex(gts,idx);
    GTSHelper.setValue(serie,gts.ticks[idx],null != gts.locations ? gts.locations[idx] : GeoTimeSerie.NO_LOCATION,null != gts.elevations ? gts.elevations[idx] : GeoTimeSerie.NO_ELEVATION,value,false);
    lasttick=gts.ticks[idx];
    idx++;
  }
  if (serie.values > 0 && serie.values >= minvalues) {
    series.add(serie);
  }
  return series;
}

protected void checkSignature(byte[] buf){
  if (!Arrays.equals(buf,PngHelperInternal.getPngIdSignature()))   throw new PngjInputException("Bad PNG signature");
}

private void twoWayMergeInternal(final ReservoirLongsSketch sketchIn,final boolean isModifiable){
  if (sketchIn.getN() <= sketchIn.getK()) {
    twoWayMergeInternalStandard(sketchIn);
  }
 else   if (gadget_.getN() < gadget_.getK()) {
    final ReservoirLongsSketch tmpSketch=gadget_;
    gadget_=(isModifiable ? sketchIn : sketchIn.copy());
    twoWayMergeInternalStandard(tmpSketch);
  }
 else   if (sketchIn.getImplicitSampleWeight() < gadget_.getN() / ((double)(gadget_.getK() - 1))) {
    twoWayMergeInternalWeighted(sketchIn);
  }
 else {
    final ReservoirLongsSketch tmpSketch=gadget_;
    gadget_=(isModifiable ? sketchIn : sketchIn.copy());
    twoWayMergeInternalWeighted(tmpSketch);
  }
}

final public void print(Object v){
  Writer out=this.out;
  if (out == null)   return;
  try {
    if (v == null)     out.write(_nullChars,0,_nullChars.length);
 else {
      String s=v.toString();
      out.write(s,0,s.length());
    }
  }
 catch (  IOException e) {
    log.log(Level.FINE,e.toString(),e);
  }
}

public void subscribeTo(final K key,final Subscriber<V> subscriber,final Executor subscribeOn){
  CompletableFuture.runAsync(null,subscribeOn);
}

public static boolean copyStream(InputStream is,OutputStream os,CopyListener listener,int bufferSize) throws IOException {
  int current=0;
  int total=is.available();
  if (total <= 0) {
    total=DEFAULT_IMAGE_TOTAL_SIZE;
  }
  final byte[] bytes=new byte[bufferSize];
  int count;
  if (shouldStopLoading(listener,current,total))   return false;
  while ((count=is.read(bytes,0,bufferSize)) != -1) {
    os.write(bytes,0,count);
    current+=count;
    if (shouldStopLoading(listener,current,total))     return false;
  }
  os.flush();
  return true;
}

private void refreshBuffer() throws IOException {
  if (output == null) {
    throw new OutOfSpaceException();
  }
  output.write(buffer,0,position);
  position=0;
}

public String damageBayDoor(){
  String bayType="none";
  Vector<Bay> potential;
  potential=new Vector<Bay>();
  Enumeration<Transporter> iter=transports.elements();
  while (iter.hasMoreElements()) {
    Transporter next=iter.nextElement();
    if (next instanceof Bay) {
      Bay nextBay=(Bay)next;
      if (nextBay.getDoors() > 0) {
        potential.add(nextBay);
      }
    }
  }
  if (potential.size() > 0) {
    Bay chosenBay=potential.elementAt(Compute.randomInt(potential.size()));
    chosenBay.destroyDoor();
    chosenBay.resetDoors();
    chosenBay.setDoors(chosenBay.getDoors() - 1);
    bayType=chosenBay.getType();
  }
  return bayType;
}

public void updateEnabledState(){
  boolean b=(getSimulationThread() == null);
  boolean prep=b && controller != null && controller.isPrepared();
  clearButton.setEnabled(b);
  prepareButton.setEnabled(b);
  runButton.setEnabled(prep);
  if (b)   pauseButton.setSelected(false);
  pauseButton.setEnabled(!b);
  stepButton.setEnabled(prep);
  cancelButton.setEnabled(!b);
  for (  JComboBox<Object> combo : selectors.combos)   combo.setEnabled(b);
}

private void prepareVolumeData() throws Exception {
  prepareVPlexVolumeData();
  prepareRPVolumeData();
}

private static int determineIconIdByMimeTypeList(List<String> mimetypes){
  if (mimetypes == null || mimetypes.size() < 1) {
    return R.drawable.file;
  }
 else {
    for (    String mimetype : mimetypes) {
      Integer iconId=MIMETYPE_TO_ICON_MAPPING.get(mimetype);
      if (iconId != null) {
        return iconId;
      }
    }
    for (    String mimetype : mimetypes) {
      String mainMimetypePart=mimetype.split("/")[0];
      Integer iconId=MAINMIMETYPE_TO_ICON_MAPPING.get(mainMimetypePart);
      if (iconId != null) {
        return iconId;
      }
    }
  }
  return R.drawable.file;
}

public SmsMmsMessage(Context _context,long _messageId,long _threadId,long _timestamp,String _messageBody,int _unreadCount,int _messageType){
  context=_context;
  messageId=_messageId;
  threadId=_threadId;
  timestamp=_timestamp;
  messageBody=_messageBody;
  unreadCount=_unreadCount;
  messageType=_messageType;
  fromAddress=SmsPopupUtils.getMmsAddress(context,messageId);
  fromEmailGateway=false;
  contactName=PhoneNumberUtils.formatNumber(fromAddress);
  ContactIdentification contactIdentify=SmsPopupUtils.getPersonIdFromPhoneNumber(context,fromAddress);
  if (contactIdentify == null) {
    contactIdentify=SmsPopupUtils.getPersonIdFromEmail(context,fromAddress);
    if (contactIdentify != null) {
      fromEmailGateway=true;
    }
  }
  if (contactIdentify != null) {
    contactId=contactIdentify.contactId;
    contactLookupKey=contactIdentify.contactLookup;
    contactName=contactIdentify.contactName;
  }
}

public void attributeAsClass(){
  DataSortedTableModel model;
  if (m_CurrentCol == -1) {
    return;
  }
  model=(DataSortedTableModel)m_TableData.getModel();
  if (model.getAttributeAt(m_CurrentCol) == null) {
    return;
  }
  setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
  model.attributeAsClassAt(m_CurrentCol);
  setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
}

public void addListener(RefreshListener listener){
  if (listener == null) {
    throw new NullPointerException("Listener must not be null");
  }
  refreshListeners.add(listener);
}

public final void doExport(final String trackName,final File target,int verbosity) throws IOException {
  Log.i(TAG,"Exporting gpx file" + target.getAbsolutePath());
  mDbHelper=new DatabaseHelper(mContext.getApplicationContext());
  final BufferedWriter bw=new BufferedWriter(new FileWriter(target));
  bw.write(XML_HEADER);
  bw.write(TAG_GPX);
  if (verbosity == VERBOSITY_TRACK_AND_WAYPOINTS || verbosity == VERBOSITY_WAYPOINTS_ONLY || verbosity == VERBOSITY_ALL) {
    writeWaypoints(bw);
  }
  if (verbosity == VERBOSITY_TRACK_AND_WAYPOINTS || verbosity == VERBOSITY_ALL) {
    writeTrackpoints(trackName,bw);
  }
  bw.flush();
  if (verbosity == VERBOSITY_ALL) {
    writeWifis(bw);
    bw.flush();
    writeCells(bw);
    bw.flush();
  }
  bw.write(TAG_GPX_CLOSE);
  bw.close();
  mDbHelper.close();
  Log.i(TAG,"Finished building gpx file");
}

public List<V> valuesInSelection(RichEditText editor,int spanType){
  List<V> result=new ArrayList<V>();
  Selection expandedSelection=getExpandedSelection(editor,spanType);
  if (expandedSelection != null) {
    for (    Span<V> span : getSpans(editor.getText(),expandedSelection)) {
      result.add(span.getValue());
    }
  }
  return result;
}

private boolean isGTEDelta(double value){
  return Math.abs(value) - Math.abs(mDelta) > -1.0e-5;
}

public static String rowToString(JSONArray ja){
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < ja.length(); i+=1) {
    if (i > 0) {
      sb.append(',');
    }
    Object object=ja.opt(i);
    if (object != null) {
      String string=object.toString();
      if (string.length() > 0 && (string.indexOf(',') >= 0 || string.indexOf('\n') >= 0 || string.indexOf('\r') >= 0 || string.indexOf(0) >= 0 || string.charAt(0) == '"')) {
        sb.append('"');
        int length=string.length();
        for (int j=0; j < length; j+=1) {
          char c=string.charAt(j);
          if (c >= ' ' && c != '"') {
            sb.append(c);
          }
        }
        sb.append('"');
      }
 else {
        sb.append(string);
      }
    }
  }
  sb.append('\n');
  return sb.toString();
}

private void maybeSampleSyncParams(){
  long playbackPositionUs=audioTrackUtil.getPlaybackHeadPositionUs();
  if (playbackPositionUs == 0) {
    return;
  }
  if (log.allowVerbose()) {
    log.v("playbackPositionUs = " + playbackPositionUs);
  }
  long systemClockUs=System.nanoTime() / 1000;
  if (systemClockUs - lastPlayheadSampleTimeUs >= MIN_PLAYHEAD_OFFSET_SAMPLE_INTERVAL_US) {
    playheadOffsets[nextPlayheadOffsetIndex]=playbackPositionUs - systemClockUs;
    nextPlayheadOffsetIndex=(nextPlayheadOffsetIndex + 1) % MAX_PLAYHEAD_OFFSET_COUNT;
    if (playheadOffsetCount < MAX_PLAYHEAD_OFFSET_COUNT) {
      playheadOffsetCount++;
    }
    lastPlayheadSampleTimeUs=systemClockUs;
    smoothedPlayheadOffsetUs=0;
    for (int i=0; i < playheadOffsetCount; i++) {
      smoothedPlayheadOffsetUs+=playheadOffsets[i] / playheadOffsetCount;
    }
  }
  if (needsPassthroughWorkarounds()) {
    return;
  }
  if (systemClockUs - lastTimestampSampleTimeUs >= MIN_TIMESTAMP_SAMPLE_INTERVAL_US) {
    audioTimestampSet=audioTrackUtil.updateTimestamp();
    if (audioTimestampSet) {
      long audioTimestampUs=audioTrackUtil.getTimestampNanoTime() / 1000;
      if (log.allowVerbose()) {
        log.v("audioTimestampUs = " + audioTimestampUs);
      }
      long audioTimestampFramePosition=audioTrackUtil.getTimestampFramePosition();
      if (audioTimestampUs < resumeSystemTimeUs) {
        audioTimestampSet=false;
        log.w("The timestamp corresponds to a time before the track was most recently resumed: " + audioTimestampUs + ", "+ resumeSystemTimeUs);
      }
 else       if (Math.abs(audioTimestampUs - systemClockUs) > MAX_AUDIO_TIMESTAMP_OFFSET_US) {
        String message="Spurious audio timestamp (system clock mismatch): " + audioTimestampFramePosition + ", "+ audioTimestampUs+ ", "+ systemClockUs+ ", "+ playbackPositionUs;
        if (failOnSpuriousAudioTimestamp) {
          throw new InvalidAudioTrackTimestampException(message);
        }
        log.w(message);
        audioTimestampSet=false;
      }
 else       if (Math.abs(framesToDurationUs(audioTimestampFramePosition) - playbackPositionUs) > MAX_AUDIO_TIMESTAMP_OFFSET_US) {
        String message="Spurious audio timestamp (frame position mismatch): " + audioTimestampFramePosition + ", "+ audioTimestampUs+ ", "+ systemClockUs+ ", "+ playbackPositionUs;
        if (failOnSpuriousAudioTimestamp) {
          throw new InvalidAudioTrackTimestampException(message);
        }
        log.w(message);
        audioTimestampSet=false;
      }
    }
    if (isLatencyQuirkEnabled) {
      latencyUs=AmazonQuirks.getAudioHWLatency();
    }
 else     if (getLatencyMethod != null && !passthrough) {
      try {
        latencyUs=(Integer)getLatencyMethod.invoke(audioTrack,(Object[])null) * 1000L - bufferSizeUs;
        latencyUs=Math.max(latencyUs,0);
        if (latencyUs > MAX_LATENCY_US) {
          log.w("Ignoring impossibly large audio latency: " + latencyUs);
          latencyUs=0;
        }
      }
 catch (      Exception e) {
        getLatencyMethod=null;
      }
    }
    lastTimestampSampleTimeUs=systemClockUs;
  }
}

@Override public boolean contains(Object object){
  if (object == null) {
    return false;
  }
  for (int i=0; i < size; i++) {
    if (object.equals(elements[i])) {
      return true;
    }
  }
  return false;
}

public void close() throws IOException {
  writer.close();
}

public static void substituteProperties(Node node,Properties properties){
  Node child;
  Node next=node.getFirstChild();
  while ((child=next) != null) {
    next=child.getNextSibling();
    if (child.getNodeType() == Node.TEXT_NODE) {
      child.setNodeValue(PropertiesUtil.substituteProperty(child.getNodeValue(),properties));
    }
 else     if (child.getNodeType() == Node.ELEMENT_NODE) {
      NamedNodeMap attributes=child.getAttributes();
      for (int i=0; i < attributes.getLength(); i++) {
        Node attribute=attributes.item(i);
        attribute.setNodeValue(PropertiesUtil.substituteProperty(attribute.getNodeValue(),properties));
      }
      substituteProperties(child,properties);
    }
  }
}

@SuppressWarnings("unchecked") public PseudoFunctionSelector(String functionName,String expression){
  super(Type.PSEUDO_FUNCTION);
  this.pseudoFunction=(PseudoFunction<E>)lookupPseudoFunction(functionName.trim());
  this.expression=expression;
  this.parsedExpression=pseudoFunction.parseExpression(expression);
}

public static String fixQueryMistakes(String q){
  q=q.replaceAll("hashtag:","#");
  q=q.replaceAll(" AND "," ");
  return q;
}

public byte[] readBytes() throws IOException {
  if (!parseTag())   throw new BurlapProtocolException("expected <base64>");
  String tag=sbuf.toString();
  if (tag.equals("null")) {
    expectEndTag("null");
    return null;
  }
 else   if (tag.equals("base64")) {
    sbuf.setLength(0);
    byte[] value=parseBytes();
    expectEndTag("base64");
    return value;
  }
 else   throw expectBeginTag("base64",tag);
}

public synchronized Utterance pend(){
  Utterance utterance=null;
  while (list.size() == 0) {
    try {
      wait();
    }
 catch (    InterruptedException ie) {
      return null;
    }
  }
  utterance=(Utterance)list.removeFirst();
  notify();
  return utterance;
}

public void testLongValuePos(){
  String a="123809648392384754573567356745735.63567890295784902768787678287E+21";
  BigDecimal aNumber=new BigDecimal(a);
  long result=1246043477766677607L;
  assertTrue("incorrect value",aNumber.longValue() == result);
}

public static EvaluationResult findOrCreate(ResultHierarchy hierarchy,Result parent,String name,String shortname){
  ArrayList<EvaluationResult> ers=ResultUtil.filterResults(hierarchy,parent,EvaluationResult.class);
  EvaluationResult ev=null;
  for (  EvaluationResult e : ers) {
    if (shortname.equals(e.getShortName())) {
      ev=e;
      break;
    }
  }
  if (ev == null) {
    ev=new EvaluationResult(name,shortname);
    hierarchy.add(parent,ev);
  }
  return ev;
}

public static boolean isRunningJavaWebStart(){
  boolean hasJNLP=false;
  try {
    Class.forName("javax.jnlp.ServiceManager");
    hasJNLP=true;
  }
 catch (  ClassNotFoundException ex) {
    hasJNLP=false;
  }
  return hasJNLP;
}

public boolean isConnected(){
  return connected.get();
}

private void tryScheduleAction(Runnable action){
  try {
    scheduler.submit(action);
  }
 catch (  RejectedExecutionException e) {
  }
}

private static double scoreSequence(List<LatLong> pts){
  LatLong prev=pts.get(pts.size() - 1);
  LatLong prevprev=pts.get(pts.size() - 2);
  double prevAngle=Math.atan2(prev.lat - prevprev.lat,prev.lng - prevprev.lng);
  double score=0;
  for (  LatLong pt : pts) {
    double angle=Math.atan2(pt.lat - prev.lat,pt.lng - prev.lng);
    double diff=prevAngle - angle;
    if (diff > Math.PI)     diff-=Math.PI * 2;
 else     if (diff < -Math.PI)     diff+=Math.PI * 2;
    if (diff < 0)     score+=10;
 else     score+=diff;
    prev=pt;
    prevAngle=angle;
  }
  return score;
}

public void addWebAppDebugModelListener(IWebAppDebugModelListener listener){
synchronized (privateInstanceLock) {
    webAppDebugModelListeners.add(listener);
  }
}

public void resetPolicy(){
  mPreferences.putString(PREF_LAST_RESPONSE,Integer.toString(Policy.RETRY));
  setRetryUntil(DEFAULT_RETRY_UNTIL);
  setMaxRetries(DEFAULT_MAX_RETRIES);
  setRetryCount(Long.parseLong(DEFAULT_RETRY_COUNT));
  setValidityTimestamp(DEFAULT_VALIDITY_TIMESTAMP);
  mPreferences.commit();
}

public void simulateMethod(SootMethod method,ReferenceVariable thisVar,ReferenceVariable returnVar,ReferenceVariable params[]){
  String subSignature=method.getSubSignature();
  if (subSignature.equals("java.lang.Class[] getClassContext()")) {
    java_lang_SecurityManager_getClassContext(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.ClassLoader currentClassLoader0()")) {
    java_lang_SecurityManager_currentClassLoader0(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.Class currentLoadedClass0()")) {
    java_lang_SecurityManager_currentLoadedClass0(method,thisVar,returnVar,params);
    return;
  }
 else {
    defaultMethod(method,thisVar,returnVar,params);
    return;
  }
}

public static boolean isFileExists(final String path){
  if (TextUtils.isEmpty(path)) {
    Log.e(FileUtils.class,"isFileExists(): Null or Empty parameter given");
    return false;
  }
  final File fileToCheck=new File(path);
  return fileToCheck.exists() && !fileToCheck.isDirectory();
}

private List<Reference> createSignatureReferences(XMLSignatureFactory xmlSigFactory,List<String> referenceIdList) throws NoSuchAlgorithmException, InvalidAlgorithmParameterException {
  List<Reference> result=new ArrayList<Reference>();
  for (  String refId : referenceIdList) {
    if (refId == null) {
      continue;
    }
    Reference ref=xmlSigFactory.newReference("#" + refId,xmlSigFactory.newDigestMethod(DigestMethod.SHA512,null),Collections.singletonList(xmlSigFactory.newCanonicalizationMethod(CanonicalizationMethod.EXCLUSIVE,(C14NMethodParameterSpec)null)),null,null);
    result.add(ref);
  }
  return Collections.unmodifiableList(result);
}

public boolean removeNetworkConnection(NetworkConnection networkConnection){
  return networkConnections.remove(networkConnection);
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> result=new Vector<Option>();
  result.addElement(new Option("\tSets the attribute index\n" + "\t(default last).","C",1,"-C <col>"));
  result.addElement(new Option("\tComma-separated list of labels to add.\n" + "\t(default: none)","L",1,"-L <label1,label2,...>"));
  result.addElement(new Option("\tTurns on the sorting of the labels.","S",0,"-S"));
  return result.elements();
}

protected Object convertArray(Object value){
  return value;
}

public static String encodeString(String s){
  return new String(encode(s.getBytes()));
}

GridLuceneFile(GridLuceneDirectory dir){
  this.dir=dir;
  filesCnt.incrementAndGet();
}

public void addAttributes(Attributes atts) throws SAXException {
  int nAtts=atts.getLength();
  for (int i=0; i < nAtts; i++) {
    String uri=atts.getURI(i);
    if (null == uri)     uri="";
    addAttributeAlways(uri,atts.getLocalName(i),atts.getQName(i),atts.getType(i),atts.getValue(i),false);
  }
}

public synchronized void addPanListener(PanListener listener){
  mPanListeners.add(listener);
}

public synchronized long lastOnlineAgo(){
  return (System.currentTimeMillis() - lastOnline) / 1000;
}

public double distance_weighted(PlaPointFloat p_other,double p_horizontal_weight,double p_vertical_weight){
  double delta_x=v_x - p_other.v_x;
  double delta_y=v_y - p_other.v_y;
  delta_x*=p_horizontal_weight;
  delta_y*=p_vertical_weight;
  double result=Math.sqrt(delta_x * delta_x + delta_y * delta_y);
  return result;
}

public NameSpace swap(NameSpace newTop){
  NameSpace oldTop=(NameSpace)(stack.elementAt(0));
  stack.setElementAt(newTop,0);
  return oldTop;
}

public static List<String> classesPath() throws FileNotFoundException, LoadingFileException {
  List<File> files=getJavaFiles();
  List<String> paths=new ArrayList<String>();
  for (  File file : files)   paths.add(file.getPath());
  return paths;
}

public static Number sub(Number a,Number b){
  if (isFloatingPoint(a) || isFloatingPoint(b)) {
    return a.doubleValue() - b.doubleValue();
  }
 else {
    return a.longValue() - b.longValue();
  }
}

public static Stream<String> wordsOf(String text){
  requireNonNull(text);
  return WORDS.splitAsStream(text);
}

public static DeleteParticipant[] loadDeleteParticipants(RefactoringStatus status,RefactoringProcessor processor,Object element,DeleteArguments arguments,IParticipantDescriptorFilter filter,String[] affectedNatures,SharableParticipants shared){
  RefactoringParticipant[] participants=fgDeleteInstance.getParticipants(status,processor,element,arguments,filter,affectedNatures,shared);
  DeleteParticipant[] result=new DeleteParticipant[participants.length];
  System.arraycopy(participants,0,result,0,participants.length);
  return result;
}

public PutResult(String successCount,String failCount,List<String> errorMessages){
  _successCount=successCount;
  _failCount=failCount;
  _errorMessages=new ArrayList<>();
  if (errorMessages != null) {
    _errorMessages.addAll(errorMessages);
  }
}

@Override public int hashCode(){
  int myPosition=position;
  int hash=0;
  while (myPosition < limit) {
    hash=hash + get(myPosition++);
  }
  return hash;
}

public void print(CharSequence text) throws IOException {
  int size=text.length();
  int pos=0;
  for (int i=0; i < size; i++) {
    if (text.charAt(i) == '\n') {
      write(text.subSequence(pos,size),i - pos + 1);
      pos=i + 1;
      atStartOfLine=true;
    }
  }
  write(text.subSequence(pos,size),size - pos);
}

public void closeRunningApp(String deviceID,String app_package) throws InterruptedException, IOException {
  cmd.runCommand("adb -s " + deviceID + " shell am force-stop "+ app_package);
}

@AndroidOnly("The RI doesn't throw the IllegalStateException.") public void test_unwrap_05(){
  String host="new host";
  int port=8080;
  ByteBuffer[] bbA={ByteBuffer.allocate(100),ByteBuffer.allocate(10),ByteBuffer.allocate(100)};
  ByteBuffer bb=ByteBuffer.allocate(10);
  SSLEngine sse=getEngine(host,port);
  try {
    sse.unwrap(bb,bbA,0,bbA.length);
    fail("IllegalStateException wasn't thrown");
  }
 catch (  IllegalStateException iobe) {
  }
catch (  Exception e) {
    fail(e + " was thrown instead of IllegalStateException");
  }
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String childData;
  doc=(Document)load("staff",true);
  elementList=doc.getElementsByTagName("address");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
  child.replaceData(5,5,"South");
  childData=child.getData();
  assertEquals("characterdataReplaceDataMiddleAssert","1230 South Ave. Dallas, Texas 98551",childData);
}

public boolean filteroutInvalidation(T tag,TagQualityStatus statusToAdd,String statusDescription,Timestamp timestamp){
  return filterout(tag,tag.getValue(),tag.getValueDescription(),statusToAdd,statusDescription,timestamp);
}

public void bindY(DoubleProperty yProperty){
  minYWorld.bind(yProperty.add(getMinY()));
  maxYWorld.bind(minYWorld.add(getHeight()));
}

private void copyFieldAttributes(){
  if ((loadFields == null) || fields == null) {
    return;
  }
  for (int i=0; i < loadFields.length; i++) {
    ObjectStreamField loadField=loadFields[i];
    String name=loadField.getName();
    for (int j=0; j < fields.length; j++) {
      ObjectStreamField field=fields[j];
      if (name.equals(field.getName())) {
        loadField.setUnshared(field.isUnshared());
        loadField.setOffset(field.getOffset());
        break;
      }
    }
  }
}

public static Uri.Builder appendId(Uri.Builder builder,long id){
  return builder.appendEncodedPath(String.valueOf(id));
}

private static void beginStartingService(Context context,Intent intent){
synchronized (sStartingServiceSync) {
    if (sStartingService == null) {
      PowerManager pm=(PowerManager)context.getSystemService(Context.POWER_SERVICE);
      sStartingService=pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,"StartingDockService");
    }
    sStartingService.acquire();
    if (context.startService(intent) == null) {
      Log.e(TAG,"Can't start DockService");
    }
  }
}

private Rect calcBounds(int index,Paint paint){
  Rect bounds=new Rect();
  CharSequence title=getTitle(index);
  bounds.right=(int)paint.measureText(title,0,title.length());
  bounds.bottom=(int)(paint.descent() - paint.ascent());
  return bounds;
}

public static double stddev(double[] a){
  return Math.sqrt(var(a));
}

public SimpleArgumentsBundle(@NonNull Map<String,String> arguments,@NonNull DisplayMetrics metrics){
  mArguments=arguments;
  mMetrics=metrics;
}

public static String collapseWhitespace(String str){
  return collapse(str,WHITE_SPACES," ");
}

private void adjustASIAndCollectFollowElements(CustomInternalN4JSParser previousParser,boolean strict,Set<FollowElement> result){
  ObservableXtextTokenStream tokens=(ObservableXtextTokenStream)previousParser.getTokenStream();
  int lastTokenIndex=tokens.size() - 1;
  if (lastTokenIndex >= 0) {
    CommonToken lastToken=(CommonToken)tokens.LT(-1);
    @SuppressWarnings("unchecked") List<Token> tokenList=tokens.getTokens();
    if (lastToken == null) {
      return;
    }
    if (shouldSkipASI(lastToken)) {
      if (maySkipASI(lastToken,tokens)) {
        tokenList.remove(lastTokenIndex);
        result.addAll(resetAndGetFollowElements(tokens,strict));
        removePostfixOperator(result);
      }
    }
 else     if (shouldAddSyntheticSemicolon(previousParser,lastTokenIndex,lastToken)) {
      CommonToken token=new CommonToken(semi);
      tokenList.add(token);
      result.addAll(resetAndGetFollowElements(tokens,strict));
      removePostfixOperator(result);
    }
  }
}

public LinkedList<Patch> patch_make(String text1,String text2){
  if (text1 == null || text2 == null) {
    throw new IllegalArgumentException("Null inputs. (patch_make)");
  }
  LinkedList<Diff> diffs=diff_main(text1,text2,true);
  if (diffs.size() > 2) {
    diff_cleanupSemantic(diffs);
    diff_cleanupEfficiency(diffs);
  }
  return patch_make(text1,diffs);
}

public void testBasicsV6() throws Exception {
  Directory dir=newDirectory();
  RandomIndexWriter writer=new RandomIndexWriter(random(),dir);
  Document document=new Document();
  InetAddress address=InetAddress.getByName("fec0::f66d");
  document.add(new InetAddressPoint("field",address));
  writer.addDocument(document);
  IndexReader reader=writer.getReader();
  IndexSearcher searcher=newSearcher(reader);
  assertEquals(1,searcher.count(InetAddressPoint.newExactQuery("field",address)));
  assertEquals(1,searcher.count(InetAddressPoint.newPrefixQuery("field",address,64)));
  assertEquals(1,searcher.count(InetAddressPoint.newRangeQuery("field",InetAddress.getByName("fec0::f66c"),InetAddress.getByName("fec0::f66e"))));
  reader.close();
  writer.close();
  dir.close();
}

private boolean isMinorVersionUpgrade(String currentVersion,String targetVersion){
  String currentDbSchemaVersion=VdcUtil.getDbSchemaVersion(currentVersion);
  if (currentDbSchemaVersion == null) {
    return false;
  }
  return currentDbSchemaVersion.equals(VdcUtil.getDbSchemaVersion(targetVersion));
}

public static final void exception(Throwable e){
  logExpensive(Level.SEVERE,e.getMessage(),e);
}

private static DefaultAlignment valueOf(String str,boolean isHorizontal){
  if (str.equals("f") || str.equals("fill")) {
    return FILL_ALIGN;
  }
 else   if (str.equals("c") || str.equals("center")) {
    return CENTER_ALIGN;
  }
 else   if (isHorizontal) {
    if (str.equals("r") || str.equals("right")) {
      return RIGHT_ALIGN;
    }
 else     if (str.equals("l") || str.equals("left")) {
      return LEFT_ALIGN;
    }
 else {
      return null;
    }
  }
 else   if (str.equals("t") || str.equals("top")) {
    return TOP_ALIGN;
  }
 else   if (str.equals("b") || str.equals("bottom")) {
    return BOTTOM_ALIGN;
  }
 else {
    return null;
  }
}

public void combineSets(HashMap<String,Set<String>> containerAffinities,OperatorPair pair){
  Set<String> set1=containerAffinities.get(pair.first);
  Set<String> set2=containerAffinities.get(pair.second);
  set1.addAll(set2);
  containerAffinities.put(pair.first,set1);
  containerAffinities.put(pair.second,set1);
}

protected void firePropertyChange(String propertyName,Object oldValue,Object newValue){
  propertyChangeSupport.firePropertyChange(propertyName,oldValue,newValue);
}

@Override public boolean isBusy(){
  return (m_splitThread != null);
}

public static <E>boolean isNotEmpty(CharSequence c){
  return ((c != null) && (c.length() > 0));
}

@Override public boolean eIsSet(int featureID){
switch (featureID) {
case EipPackage.COMPOSITE_PROCESSOR__NAME:
    return NAME_EDEFAULT == null ? name != null : !NAME_EDEFAULT.equals(name);
case EipPackage.COMPOSITE_PROCESSOR__TO_CHANNELS:
  return toChannels != null && !toChannels.isEmpty();
case EipPackage.COMPOSITE_PROCESSOR__FROM_CHANNELS:
return fromChannels != null && !fromChannels.isEmpty();
case EipPackage.COMPOSITE_PROCESSOR__OWNED_ENDPOINTS:
return ownedEndpoints != null && !ownedEndpoints.isEmpty();
}
return super.eIsSet(featureID);
}

private void addInfoButton(JPanel panel,Object o,String clientProp){
  JButton hButton;
  hButton=new JButton(o.toString());
  hButton.putClientProperty(clientProp,o);
  hButton.addActionListener(this);
  hButton.setFont(font);
  hButton.setMargin(new Insets(0,0,0,0));
  hButton.setBackground(LOG_BUTTON_BG);
  panel.add(hButton);
}

public void removeNetworkListener(NetworkListener networkListener){
  networkListeners.remove(networkListener);
}

public static String chomp(String s){
  if (s.endsWith("\r\n"))   return s.substring(0,s.length() - 2);
  if (s.endsWith("\r") || s.endsWith("\n"))   return s.substring(0,s.length() - 1);
  return s;
}

private void validateSurrogateSettings(){
  faultySurrogatesRadioButton.setEnabled(false);
  discardSurrogatesArticleRadioButton.setEnabled(false);
  replaceSurrogatesRadioButton.setEnabled(false);
  discardSurrogatesRevisionRadioButton.setSelected(true);
}

static DiskId createDiskId(long maxOplogSize,boolean isPersistenceType,boolean needsLinkedList){
  long bytes=maxOplogSize * 1024 * 1024;
  if (bytes > Integer.MAX_VALUE) {
    if (isPersistenceType) {
      if (needsLinkedList) {
        return new PersistenceWithLongOffset();
      }
 else {
        return new PersistenceWithLongOffsetNoLL();
      }
    }
 else {
      if (needsLinkedList) {
        return new OverflowOnlyWithLongOffset();
      }
 else {
        return new OverflowOnlyWithLongOffsetNoLL();
      }
    }
  }
 else {
    if (isPersistenceType) {
      if (needsLinkedList) {
        return new PersistenceWithIntOffset();
      }
 else {
        return new PersistenceWithIntOffsetNoLL();
      }
    }
 else {
      if (needsLinkedList) {
        return new OverflowOnlyWithIntOffset();
      }
 else {
        return new OverflowOnlyWithIntOffsetNoLL();
      }
    }
  }
}

public void startElement(String namespaceURI,String localName,String name,Attributes atts) throws org.xml.sax.SAXException {
  ElemContext elemContext=m_elemContext;
  if (elemContext.m_startTagOpen) {
    closeStartTag();
    elemContext.m_startTagOpen=false;
  }
 else   if (m_cdataTagOpen) {
    closeCDATA();
    m_cdataTagOpen=false;
  }
 else   if (m_needToCallStartDocument) {
    startDocumentInternal();
    m_needToCallStartDocument=false;
  }
  if (m_needToOutputDocTypeDecl) {
    String n=name;
    if (n == null || n.length() == 0) {
      n=localName;
    }
    outputDocTypeDecl(n);
  }
  if (null != namespaceURI && namespaceURI.length() > 0) {
    super.startElement(namespaceURI,localName,name,atts);
    return;
  }
  try {
    ElemDesc elemDesc=getElemDesc2(name);
    int elemFlags=elemDesc.getFlags();
    if (m_doIndent) {
      boolean isBlockElement=(elemFlags & ElemDesc.BLOCK) != 0;
      if (m_ispreserve)       m_ispreserve=false;
 else       if ((null != elemContext.m_elementName) && (!m_inBlockElem || isBlockElement)) {
        m_startNewLine=true;
        indent();
      }
      m_inBlockElem=!isBlockElement;
    }
    if (atts != null)     addAttributes(atts);
    m_isprevtext=false;
    final java.io.Writer writer=m_writer;
    writer.write('<');
    writer.write(name);
    if (m_tracer != null)     firePseudoAttributes();
    if ((elemFlags & ElemDesc.EMPTY) != 0) {
      m_elemContext=elemContext.push();
      m_elemContext.m_elementName=name;
      m_elemContext.m_elementDesc=elemDesc;
      return;
    }
 else {
      elemContext=elemContext.push(namespaceURI,localName,name);
      m_elemContext=elemContext;
      elemContext.m_elementDesc=elemDesc;
      elemContext.m_isRaw=(elemFlags & ElemDesc.RAW) != 0;
    }
    if ((elemFlags & ElemDesc.HEADELEM) != 0) {
      closeStartTag();
      elemContext.m_startTagOpen=false;
      if (!m_omitMetaTag) {
        if (m_doIndent)         indent();
        writer.write("<META http-equiv=\"Content-Type\" content=\"text/html; charset=");
        String encoding=getEncoding();
        String encode=Encodings.getMimeEncoding(encoding);
        writer.write(encode);
        writer.write("\">");
      }
    }
  }
 catch (  IOException e) {
    throw new SAXException(e);
  }
}

public static long sizeOf(Class clazz){
  long maxSize=headerSize(clazz);
  while (clazz != Object.class) {
    for (    Field f : clazz.getDeclaredFields()) {
      if ((f.getModifiers() & Modifier.STATIC) == 0) {
        long offset=unsafe.objectFieldOffset(f);
        if (offset > maxSize) {
          maxSize=offset + 1;
        }
      }
    }
    clazz=clazz.getSuperclass();
  }
  return roundUpTo8(maxSize);
}

public void addHandler(String columnName,SQLDataHandler handler){
  if (m_overrides == null)   m_overrides=new HashMap(3);
  m_overrides.put(columnName,handler);
}

public void addNearEvicted(KeyCacheObject key){
  if (nearEvicted == null)   nearEvicted=new ArrayList<>();
  nearEvicted.add(key);
}

public Word(String word,String displayAs,String... soundsLike){
  this();
  this.word=word;
  this.displayAs=displayAs;
  this.soundsLike=Arrays.asList(soundsLike);
}

public EnumeratedDistribution(final List<Pair<T,Double>> pmf) throws MathIllegalArgumentException {
  singletons=new ArrayList<>(pmf.size());
  final double[] probs=new double[pmf.size()];
  for (int i=0; i < pmf.size(); i++) {
    final Pair<T,Double> sample=pmf.get(i);
    singletons.add(sample.getKey());
    final double p=sample.getValue();
    probs[i]=p;
  }
  probabilities=checkAndNormalize(probs);
  cumulativeProbabilities=new double[probabilities.length];
  double sum=0;
  for (int i=0; i < probabilities.length; i++) {
    sum+=probabilities[i];
    cumulativeProbabilities[i]=sum;
  }
}

@Override public Calendar next(){
  if (spot.equals(endFinal)) {
    throw new NoSuchElementException();
  }
  spot.add(Calendar.DATE,1);
  return (Calendar)spot.clone();
}

public void pauseWork(){
  mExitTasksEarly=false;
  setPause(true);
  if (DEBUG) {
    Log.d(Log_TAG,String.format("work_status: pauseWork %s",this));
  }
}

public static List<ErrorLogger.ErrorObject> isVirtualTrackInCPLConformed(PayloadRecord cplPayloadRecord,VirtualTrack virtualTrack,List<PayloadRecord> essencesHeaderPartitionPayloads) throws IOException {
  List<VirtualTrack> virtualTracks=new ArrayList<>();
  IMFErrorLogger imfErrorLogger=new IMFErrorLoggerImpl();
  virtualTracks.add(virtualTrack);
  imfErrorLogger.addAllErrors(checkVirtualTrackAndEssencesHeaderPartitionPayloadRecords(virtualTracks,essencesHeaderPartitionPayloads));
  if (imfErrorLogger.hasFatalErrors()) {
    return imfErrorLogger.getErrors();
  }
  imfErrorLogger.addAllErrors(conformVirtualTracksInCPL(cplPayloadRecord,essencesHeaderPartitionPayloads,false));
  return imfErrorLogger.getErrors();
}

public byte receiveOneByte(){
  Log.d(TAG,"receiveOneByte() entrance");
  try {
    acquireLock();
    mServerSocket.receive(mReceivePacket);
    Log.d(TAG,"receive: " + (0 + mReceivePacket.getData()[0]));
    return mReceivePacket.getData()[0];
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  return Byte.MIN_VALUE;
}

public static String encode(byte[] input){
  if (input.length == 0) {
    return "";
  }
  int zeros=0;
  while (zeros < input.length && input[zeros] == 0) {
    ++zeros;
  }
  input=Arrays.copyOf(input,input.length);
  char[] encoded=new char[input.length * 2];
  int outputStart=encoded.length;
  for (int inputStart=zeros; inputStart < input.length; ) {
    encoded[--outputStart]=ALPHABET[divmod(input,inputStart,256,58)];
    if (input[inputStart] == 0) {
      ++inputStart;
    }
  }
  while (outputStart < encoded.length && encoded[outputStart] == ENCODED_ZERO) {
    ++outputStart;
  }
  while (--zeros >= 0) {
    encoded[--outputStart]=ENCODED_ZERO;
  }
  return new String(encoded,outputStart,encoded.length - outputStart);
}

public static int[] cells(int[] start,int[] end){
  Arrays.sort(start);
  Arrays.sort(end);
  int overlap=0;
  int gaps=0;
  for (int i=0, j=0; j < end.length; ) {
    if (i < start.length && start[i] < end[j]) {
      overlap++;
      i++;
    }
 else {
      j++;
      overlap--;
    }
    if (overlap == 0) {
      gaps++;
    }
  }
  int[] cells=new int[gaps * 2];
  overlap=0;
  gaps=0;
  int previousOverlap=0;
  for (int i=0, j=0; j < end.length; ) {
    if (i < start.length && start[i] < end[j]) {
      overlap++;
      if (previousOverlap == 0) {
        cells[gaps++]=start[i];
      }
      i++;
    }
 else {
      overlap--;
      if (overlap == 0) {
        cells[gaps++]=end[j];
      }
      j++;
    }
    previousOverlap=overlap;
  }
  return cells;
}

@Override public InStore openRead(long address,int size){
  if (fileSize() < address + size) {
    throw new IllegalStateException(L.l("{0} read open for length {1}:{2} but file length {3}",this,address,size,fileSize()));
  }
  if (_isClosed.get()) {
    throw new IllegalStateException(L.l("{0} is closed.",this));
  }
  if (_fileSize < address + size) {
    throw new IllegalStateException(L.l("Open read of large file {0}:{1}",Long.toHexString(address),size));
  }
  try {
    streamOpen(address,size);
    return openReadImpl(address,size);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}

List<Address> geoDecode(String searchedLocation){
  try {
    Geocoder geo=new Geocoder(sContext,Locale.getDefault());
    List<Address> addresses=geo.getFromLocationName(searchedLocation,10);
    if (addresses != null && addresses.size() > 0) {
      return addresses;
    }
  }
 catch (  Exception ex) {
  }
  return null;
}

private boolean isIdentifierStartChar(int position){
  if (_len >= 0 && position >= _len) {
    return false;
  }
  char ch=_working[position];
  return Character.isUnicodeIdentifierStart(ch);
}

public void destroy(){
  fallbackStorage.clear();
  FileUtils.deleteQuietly(fallbackStorageFile);
}

public static SelectClause create(String... propertyNames){
  List<SelectClauseElement> selectList=new ArrayList<SelectClauseElement>();
  for (  String name : propertyNames) {
    selectList.add(new SelectClauseExpression(new PropertyValueExpression(name)));
  }
  return new SelectClause(StreamSelector.ISTREAM_ONLY,selectList);
}

ConfigurationError(String msg,Exception x){
  super(msg);
  this.exception=x;
}

public static String makeMarginTransform(double owidth,double oheight,double iwidth,double iheight,double lmargin,double tmargin,double rmargin,double bmargin){
  double swidth=iwidth + lmargin + rmargin;
  double sheight=iheight + tmargin + bmargin;
  double scale=Math.max(swidth / owidth,sheight / oheight);
  double offx=(scale * owidth - swidth) * .5 + lmargin;
  double offy=(scale * oheight - sheight) * .5 + tmargin;
  return "scale(" + fmt(1 / scale) + ") translate("+ fmt(offx)+ " "+ fmt(offy)+ ")";
}

public static boolean isAttachment(String contentDisposition){
  return contentDisposition != null && contentDisposition.regionMatches(true,0,"attachment",0,10);
}

private JMenu createInsertMenu(){
  JMenu insertMenu=new JMenu("Insert");
  insertMenu.add(actionManager.getNewNetworkAction());
  JMenu newGaugeSubMenu=new JMenu("New Plot");
  for (  Action action : actionManager.getPlotActions()) {
    newGaugeSubMenu.add(action);
  }
  insertMenu.add(newGaugeSubMenu);
  JMenu newWorldSubMenu=new JMenu("New World");
  for (  Action action : actionManager.getNewWorldActions()) {
    newWorldSubMenu.add(action);
  }
  insertMenu.add(newWorldSubMenu);
  insertMenu.addSeparator();
  insertMenu.add(actionManager.getNewDocViewerAction());
  insertMenu.add(actionManager.getNewConsoleAction());
  return insertMenu;
}

public static Vector<String> findPackages(){
  Vector<String> result;
  Enumeration<String> packages;
  initCache();
  result=new Vector<String>();
  packages=m_ClassCache.packages();
  while (packages.hasMoreElements()) {
    result.add(packages.nextElement());
  }
  Collections.sort(result,new StringCompare());
  return result;
}

public static String convertSystemNameToAlternate(String systemName){
  if (!validSystemNameFormat(systemName,systemName.charAt(1),"A")) {
    return "";
  }
  String altName="";
  altName=systemName;
  return altName;
}

private void initializeUserDirectives(){
  userDirectives=new ArrayList<>();
  IEclipsePreferences preferences=VelocityCorePlugin.getPreferences();
  String directives=preferences.get(IPreferencesConstants.VELOCITY_USER_DIRECTIVES,"");
  StringTokenizer st=new StringTokenizer(directives,",\n\r");
  while (st.hasMoreElements()) {
    String directive=(String)st.nextElement();
    String name=directive.substring(0,directive.indexOf(' '));
    int type=(directive.endsWith("[Block]") ? Directive.BLOCK : Directive.LINE);
    userDirectives.add('#' + name);
    addDirective(new VelocityDirective(name,type));
  }
}

private synchronized void storeTimestampAndSetStatus(Timestamper.TimestampSucceeded message,TimestampRecord timestampRecord) throws Exception {
  try {
    persistTimestampRecord(message,timestampRecord);
    setTimestampSucceeded();
  }
 catch (  Exception e) {
    log.error("Failed to save time-stamp record to database",e);
    setTimestampFailedRegardlessOfQueue(new DateTime());
    throw e;
  }
}

public static Character[] valuesOf(char[] array){
  Character[] dest=new Character[array.length];
  for (int i=0; i < array.length; i++) {
    dest[i]=Character.valueOf(array[i]);
  }
  return dest;
}

public void mark(int readlimit){
  stream.mark(readlimit);
  if (markSupported()) {
    markpos=framePos;
    markPushBackLen=pushBackLen;
    if (markPushBackLen > 0) {
      if (markPushBackBuffer == null) {
        markPushBackBuffer=new byte[frameSize];
      }
      System.arraycopy(pushBackBuffer,0,markPushBackBuffer,0,markPushBackLen);
    }
  }
}

public void testCreatingLauncherWithJetty1(){
  SwtBotProjectCreation.createMavenGwtProjectIsCreated1(bot,PROJECT_NAME,PACKAGE_NAME);
  SwtBotProjectDebug.launchGWTDevModeWithJettyThenTerminateIt(bot,PROJECT_NAME);
  String persistedArgs=SwtBotProjectDebug.getTheProgramArgsTextBox(bot);
  assertTrue(persistedArgs.contains("com.example.project.Project"));
}

@KnownFailure("If no schema is associated: returns empty string where actually null be returned?. Ticket 98") public void test_getTablesLjava_lang_StringLjava_lang_StringLjava_lang_String$Ljava_lang_String() throws SQLException {
  String[] tablesName={VIEW_NAME,DatabaseCreator.TEST_TABLE1,DatabaseCreator.TEST_TABLE3};
  String[] tablesType={"TABLE","VIEW"};
  Arrays.sort(tablesName);
  Arrays.sort(tablesType);
  ResultSet rs=meta.getTables(null,null,null,null);
  while (rs.next()) {
    assertTrue("Wrong table name",Arrays.binarySearch(tablesName,rs.getString("TABLE_NAME")) > -1);
    assertNull("Wrong table schema: " + rs.getString("TABLE_SCHEM"),rs.getString("TABLE_SCHEM"));
    assertTrue("Wrong table type",Arrays.binarySearch(tablesType,rs.getString("TABLE_TYPE")) > -1);
    assertEquals("Wrong parameter REMARKS","",rs.getString("REMARKS"));
  }
  rs.close();
  rs=meta.getTables(conn.getCatalog(),null,null,new String[]{"SYSTEM TABLE","LOCAL TEMPORARY"});
  assertFalse("Some tables exist",rs.next());
  rs.close();
  rs=meta.getTables(conn.getCatalog(),null,null,new String[]{"VIEW","LOCAL TEMPORARY"});
  assertTrue("No tables exist",rs.next());
  assertEquals("Wrong table name",VIEW_NAME,rs.getString("TABLE_NAME"));
  assertNull("Wrong table schema: " + rs.getString("TABLE_SCHEM"),rs.getString("TABLE_SCHEM"));
  assertEquals("Wrong table type","VIEW",rs.getString("TABLE_TYPE"));
  assertEquals("Wrong parameter REMARKS","",rs.getString("REMARKS"));
  assertFalse("Wrong size of result set",rs.next());
  assertFalse("Some tables exist",rs.next());
  rs.close();
  rs=meta.getTables(null,null,"%",null);
  while (rs.next()) {
    assertTrue("Wrong table name",Arrays.binarySearch(tablesName,rs.getString("TABLE_NAME")) > -1);
    assertNull("Wrong table schema ",rs.getString("TABLE_SCHEM"));
    assertTrue("Wrong table type",Arrays.binarySearch(tablesType,rs.getString("TABLE_TYPE")) > -1);
    assertEquals("Wrong parameter REMARKS","",rs.getString("REMARKS"));
  }
  rs.close();
  conn.close();
  try {
    meta.getTables(null,null,null,null);
    fail("SQLException not thrown");
  }
 catch (  SQLException e) {
  }
}

public static boolean needsDefaultFormatter(ValueFormatter formatter){
  if (formatter == null)   return true;
  if (formatter instanceof DefaultValueFormatter)   return true;
  return false;
}

public boolean putGrammar(SchemaGrammar grammar,boolean deep,boolean ignoreConflict){
  if (!ignoreConflict) {
    return putGrammar(grammar,deep);
  }
  SchemaGrammar sg=getGrammar(grammar.fTargetNamespace);
  if (sg == null) {
    putGrammar(grammar);
  }
  if (!deep) {
    return true;
  }
  Vector currGrammars=grammar.getImportedGrammars();
  if (currGrammars == null) {
    return true;
  }
  Vector grammars=((Vector)currGrammars.clone());
  SchemaGrammar sg1, sg2;
  Vector gs;
  for (int i=0; i < grammars.size(); i++) {
    sg1=(SchemaGrammar)grammars.elementAt(i);
    sg2=getGrammar(sg1.fTargetNamespace);
    if (sg2 == null) {
      gs=sg1.getImportedGrammars();
      if (gs == null)       continue;
      for (int j=gs.size() - 1; j >= 0; j--) {
        sg2=(SchemaGrammar)gs.elementAt(j);
        if (!grammars.contains(sg2))         grammars.addElement(sg2);
      }
    }
 else {
      grammars.remove(sg1);
    }
  }
  for (int i=grammars.size() - 1; i >= 0; i--) {
    putGrammar((SchemaGrammar)grammars.elementAt(i));
  }
  return true;
}

public List<N> nodes(@Nullable Object key,int cnt){
  return nodes(key,cnt,null,null);
}

public boolean isExistsKey(Connection connection,Object[] keys){
  StringBuilder builder=new StringBuilder();
  builder.append("select 1 from ");
  builder.append(tableName);
  builder.append(" where ");
  String delimiter="";
  for (  String keyField : keyFieldNames) {
    builder.append(delimiter);
    builder.append(keyField);
    builder.append("=?");
    delimiter=" and ";
  }
  String query=builder.toString();
  PreparedStatement statement=null;
  try {
    if ((ExecutionPathDebugLog.isDebugEnabled) && (log.isDebugEnabled())) {
      log.debug("Executing query '" + query + "' for keys '"+ print(keys)+ "'");
    }
    statement=connection.prepareStatement(query);
    for (int i=0; i < keys.length; i++) {
      statement.setObject(i + 1,keys[i]);
    }
    ResultSet rs=statement.executeQuery();
    if (!rs.next()) {
      return false;
    }
    return true;
  }
 catch (  SQLException ex) {
    String message="Failed to invoke : " + query + " :"+ ex.getMessage();
    log.error(message,ex);
    storeExceptionHandler.handle(message,ex);
    throw new StoreExceptionDBRel(message,ex);
  }
 finally {
    try {
      if (statement != null)       statement.close();
    }
 catch (    SQLException e) {
    }
  }
}

public static <T>T implement(Class<T> type,Object object){
  if (type.isInstance(object)) {
    return type.cast(object);
  }
  return type.cast(Proxy.newProxyInstance(type.getClassLoader(),new Class[]{type},new DuckType(object)));
}

public boolean isIvrVsan(int vsanId){
  boolean inRange=vsans.contains(vsanId);
  if (!inRange) {
    for (    IntRange range : getVsansRanges()) {
      inRange=range.containsInteger(vsanId);
      if (inRange) {
        break;
      }
    }
  }
  return inRange;
}

private void addBOMLines(MProduct product,BigDecimal qty){
  MPPProductBOM bom=MPPProductBOM.getDefault(product,null);
  MPPProductBOMLine[] bomLines=bom.getLines(true);
  for (int i=0; i < bomLines.length; i++)   addBOMLine(bomLines[i],qty);
  log.fine("#" + bomLines.length);
}

private QueryExp buildOptionalQueryExp(final String[] attributes,final Object[] values){
  QueryExp queryExp=null;
  for (int i=0; i < attributes.length; i++) {
    if (values[i] instanceof Boolean) {
      if (queryExp == null) {
        queryExp=Query.eq(Query.attr(attributes[i]),Query.value(((Boolean)values[i])));
      }
 else {
        queryExp=Query.and(queryExp,Query.eq(Query.attr(attributes[i]),Query.value(((Boolean)values[i]))));
      }
    }
 else     if (values[i] instanceof Number) {
      if (queryExp == null) {
        queryExp=Query.eq(Query.attr(attributes[i]),Query.value((Number)values[i]));
      }
 else {
        queryExp=Query.and(queryExp,Query.eq(Query.attr(attributes[i]),Query.value((Number)values[i])));
      }
    }
 else     if (values[i] instanceof String) {
      if (queryExp == null) {
        queryExp=Query.eq(Query.attr(attributes[i]),Query.value((String)values[i]));
      }
 else {
        queryExp=Query.and(queryExp,Query.eq(Query.attr(attributes[i]),Query.value((String)values[i])));
      }
    }
  }
  return queryExp;
}

@Override public Foo fetchByUuid_C_Last(String uuid,long companyId,OrderByComparator<Foo> orderByComparator){
  int count=countByUuid_C(uuid,companyId);
  if (count == 0) {
    return null;
  }
  List<Foo> list=findByUuid_C(uuid,companyId,count - 1,count,orderByComparator);
  if (!list.isEmpty()) {
    return list.get(0);
  }
  return null;
}

public final boolean at(String str,CharSequence csq){
  int i=index;
  int length=csq.length();
  for (int j=0; j < str.length(); ) {
    if ((i >= length) || (str.charAt(j++) != csq.charAt(i++)))     return false;
  }
  return true;
}

public static int findLastOf(String container,String charSeq,int begin){
  for (int i=begin; i < container.length() && i >= 0; --i) {
    if (charSeq.contains("" + container.charAt(i)))     return i;
  }
  return -1;
}

private static CookieOrigin adjustEffectiveHost(final CookieOrigin origin){
  String host=origin.getHost();
  boolean isLocalHost=true;
  for (int i=0; i < host.length(); i++) {
    char ch=host.charAt(i);
    if (ch == '.' || ch == ':') {
      isLocalHost=false;
      break;
    }
  }
  if (isLocalHost) {
    host+=".local";
    return new CookieOrigin(host,origin.getPort(),origin.getPath(),origin.isSecure());
  }
 else {
    return origin;
  }
}

protected final void finalize(){
}

public boolean addBound(TypeBound bound){
  if (bound.isTrivial()) {
    return false;
  }
  final boolean wasAdded=internal_addBound(bound);
  if (DEBUG) {
    final String suffix=wasAdded ? "  (ADDED)" : "  (not added; already present)";
    log(">>> ADD bound: " + bound + suffix);
  }
  return wasAdded;
}

public boolean remove(SimEvent event){
  return sortedSet.remove(event);
}

public static final void printThreadCpuTime(final Thread thread){
  if (tbe.isThreadCpuTimeEnabled()) {
    log.info("Thread performance: Thread=" + thread.getName() + "  cpu-time="+ getThreadCpuTime(thread)+ "sec");
  }
}

public static Version fromBits(int major,int minor,int bugfix){
  return new Version(major,minor,bugfix);
}

private static IMultiPoint[] randomPoints(int n,int d,int scale){
  IMultiPoint points[]=new IMultiPoint[n];
  for (int i=0; i < n; i++) {
    StringBuilder sb=new StringBuilder();
    for (int j=0; j < d; j++) {
      sb.append(rGen.nextDouble() * scale);
      if (j < d - 1) {
        sb.append(",");
      }
    }
    points[i]=new Hyperpoint(sb.toString());
  }
  return points;
}

public static String bytesToString(int[] b){
  if (b.length < 4) {
    return "0.0.0.0";
  }
  return String.format("%d.%d.%d.%d",b[0],b[1],b[2],b[3]);
}

private String convertToIsoDateTime(String humanReadableDateTime) throws ParseException {
  DateFormat dfInitial=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
  Date initialDateTime=dfInitial.parse(humanReadableDateTime);
  DateFormat df=new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.S'Z'");
  return df.format(initialDateTime);
}

private static boolean classNamesEqual(String name1,String name2){
  name1=name1.substring(name1.lastIndexOf('.') + 1);
  name2=name2.substring(name2.lastIndexOf('.') + 1);
  return name1.equals(name2);
}

public boolean optBoolean(int index){
  return optBoolean(index,false);
}

public CommandBuilder withLongSwitchIfPresent(Map<String,Object> properties,String... keys){
  withLongSwitchIfPresent(properties,UnaryOperator.identity(),keys);
  return this;
}

private static boolean hasSpecializedHandlerIntents(Context context,Intent intent){
  try {
    PackageManager pm=context.getPackageManager();
    List<ResolveInfo> handlers=pm.queryIntentActivities(intent,PackageManager.GET_RESOLVED_FILTER);
    if (handlers == null || handlers.size() == 0) {
      return false;
    }
    for (    ResolveInfo resolveInfo : handlers) {
      IntentFilter filter=resolveInfo.filter;
      if (filter == null)       continue;
      if (filter.countDataAuthorities() == 0 || filter.countDataPaths() == 0)       continue;
      if (resolveInfo.activityInfo == null)       continue;
      return true;
    }
  }
 catch (  RuntimeException e) {
    Log.e(TAG,"Runtime exception while getting specialized handlers");
  }
  return false;
}

private void onCollectionClicked(Long collectionId){
  Intent intent=new Intent(this,ProductListActivity.class);
  if (collectionId != null) {
    intent.putExtra(ProductListActivity.EXTRA_COLLECTION_ID,collectionId);
  }
  startActivity(intent);
}

public void addFrequency(Frequency frequency){
  frequencies.add(frequency);
}

public boolean isItemStackRegisteredForName(ItemStack stack,String oreName){
  final int[] oreIDs=OreDictionary.getOreIDs(stack);
  for (  final int oreID : oreIDs) {
    if (oreName.equals(OreDictionary.getOreName(oreID))) {
      return true;
    }
  }
  return false;
}

private static @Nonnull URL[] createClassloaderUrls(@Nonnull URL url) throws PluginException {
  List<URL> urls=new ArrayList<URL>();
  urls.add(url);
  Manifest mf=null;
  File f=new File(url.getPath());
  if (!f.isDirectory()) {
    JarInputStream jis=null;
    try {
      jis=new JarInputStream(url.openStream());
      mf=jis.getManifest();
    }
 catch (    IOException ioe) {
      throw new PluginException("Failed loading manifest for plugin jar: " + url,ioe);
    }
 finally {
      IO.close(jis);
    }
  }
 else {
    File manifest=guessManifest(f);
    if (manifest != null) {
      FileInputStream is=null;
      try {
        is=new FileInputStream(manifest);
        mf=new Manifest(is);
      }
 catch (      IOException e) {
        throw new PluginException("Failed loading manifest for plugin jar: " + url,e);
      }
 finally {
        IO.close(is);
      }
    }
  }
  if (mf != null) {
    try {
      addClassPathFromManifest(url,urls,mf);
    }
 catch (    MalformedURLException e) {
      throw new PluginException("Failed loading manifest for plugin jar: " + url,e);
    }
  }
  return urls.toArray(new URL[urls.size()]);
}

@Override public void write(String str,int st,int end) throws IOException {
  out.write(str,st,end);
}

public boolean isAwake(){
  return isAwake;
}

private static void transferStreams(InputStream source,OutputStream destination){
  byte[] buffer=new byte[8096];
  try {
    while (true) {
      int bytesRead=-1;
      try {
        bytesRead=source.read(buffer);
      }
 catch (      IOException e) {
        return;
      }
      if (bytesRead == -1)       break;
      try {
        destination.write(buffer,0,bytesRead);
      }
 catch (      IOException e) {
        return;
      }
    }
  }
  finally {
    try {
      source.close();
    }
 catch (    IOException e) {
    }
 finally {
      try {
        destination.close();
      }
 catch (      IOException e) {
      }
    }
  }
}

public static void gc(){
  if (startedGc) {
    forceGc=true;
    gcShouldLoop=true;
  }
  startGCThread();
synchronized (LOCK) {
    LOCK.notify();
  }
  try {
    Thread.sleep(2);
  }
 catch (  InterruptedException er) {
  }
}

private ArrayList<E> toArrayList(){
  ArrayList<E> list=new ArrayList<E>();
  for (Node<E> p=first(); p != null; p=succ(p)) {
    E item=p.item;
    if (item != null)     list.add(item);
  }
  return list;
}

public static BlobEntry isBlobEntryForStoring(String repositoryLocation,String mimeType){
  RepositoryLocation location;
  try {
    location=new RepositoryLocation(repositoryLocation);
    Entry entry=location.locateEntry();
    if (entry instanceof BlobEntry) {
      BlobEntry blobEntry=(BlobEntry)entry;
      if (mimeType.equals(blobEntry.getMimeType())) {
        return blobEntry;
      }
 else {
        SwingTools.showSimpleErrorMessage("entry_must_be_blob",blobEntry.getName());
        return null;
      }
    }
 else     if (entry == null) {
      return createBlobEntry(repositoryLocation);
    }
 else {
      SwingTools.showSimpleErrorMessage("entry_must_be_blob",entry.getName());
    }
  }
 catch (  RepositoryException e) {
    SwingTools.showSimpleErrorMessage("cannot_access_repository",e);
  }
catch (  MalformedRepositoryLocationException e) {
    SwingTools.showSimpleErrorMessage("cannot_access_repository",e);
  }
  return null;
}

@RequestMapping(value={"/",""},method=RequestMethod.PUT) @ResponseBody public RestWrapper insert(@ModelAttribute("batch") @Valid Batch batch,BindingResult bindingResult,Principal principal){
  RestWrapper restWrapper=null;
  if (bindingResult.hasErrors()) {
    BindingResultError bindingResultError=new BindingResultError();
    return bindingResultError.errorMessage(bindingResult);
  }
  try {
    com.wipro.ats.bdre.md.dao.jpa.Batch jpaBatch=new com.wipro.ats.bdre.md.dao.jpa.Batch();
    jpaBatch.setBatchType(batch.getBatchType());
    InstanceExec instanceExec=new InstanceExec();
    if (batch.getSourceInstanceExecId() != null) {
      instanceExec.setInstanceExecId(batch.getSourceInstanceExecId());
      jpaBatch.setInstanceExec(instanceExec);
    }
    Long autoGenBatchId=batchDAO.insert(jpaBatch);
    batch.setBatchId(autoGenBatchId);
    restWrapper=new RestWrapper(batch,RestWrapper.OK);
    LOGGER.info(RECORDWITHID + batch.getBatchId() + " inserted in Batch by User:"+ principal.getName()+ batch);
  }
 catch (  MetadataException e) {
    LOGGER.error(e);
    restWrapper=new RestWrapper(e.getMessage(),RestWrapper.ERROR);
  }
  return restWrapper;
}

private void onClickGalleryImage(final RecentMedia aMediaItem){
  if (null != mCamera) {
    mCamera.stopPreview();
  }
  mSelectedGalleryItemsList.add(aMediaItem);
  if ((null != aMediaItem.mThumbnail) && !mIsAvatarMode) {
    updateUiConfiguration(UI_SHOW_TAKEN_IMAGE,IMAGE_ORIGIN_GALLERY);
    mImagePreviewImageView.setImageBitmap(aMediaItem.mThumbnail);
    VectorApp.setSavedCameraImagePreview(aMediaItem.mThumbnail);
  }
 else   if (null != aMediaItem.mFileUri) {
    displayImagePreview(null,null,aMediaItem.mFileUri,IMAGE_ORIGIN_GALLERY);
  }
 else {
    Log.e(LOG_TAG,"## onClickGalleryImage(): no image to display");
  }
  mImagePreviewImageView.setTag(aMediaItem.mFileUri);
}

public static double pareto(double alpha){
  if (!(alpha > 0.0))   throw new IllegalArgumentException("Shape parameter alpha must be positive");
  return Math.pow(1 - uniform(),-1.0 / alpha) - 1.0;
}

public void disconnectFromBroker(final MqttAsyncConnection connection){
  try {
    connection.disconnect(new MqttDisconnectionResultHandler());
  }
 catch (  SpyException e) {
    Platform.runLater(new MqttEventHandler(new MqttDisconnectionAttemptFailureEvent(connection,e)));
    logger.error(e.getMessage(),e);
  }
}

public Object[] copyAll(){
  return Arrays.copyOf(args,args.length);
}

public void start(){
  LOG.info("Starting NutchServer on port: {} with logging level: {} ...",port,logLevel);
  try {
    component.start();
  }
 catch (  Exception e) {
    throw new IllegalStateException("Cannot start server!",e);
  }
  LOG.info("Started NutchServer on port {}",port);
  running=true;
  started=System.currentTimeMillis();
}

public FSAccountFedInfo readAccountFedInfo(String userID,String providerID) throws FSAccountMgmtException {
  return readAccountFedInfo(userID,providerID,null);
}

public Response(String status,String mimeType,String txt){
  this.status=status;
  this.mimeType=mimeType;
  try {
    this.data=new ByteArrayInputStream(txt.getBytes("UTF-8"));
  }
 catch (  java.io.UnsupportedEncodingException uee) {
    uee.printStackTrace();
  }
}

@Parallel @Realtime(limit=LINEAR) public E reduce(BinaryOperator<E> operator){
  Iterator<E> itr=iterator();
  if (!itr.hasNext())   return null;
  E accumulator=itr.next();
  while (itr.hasNext())   accumulator=operator.apply(accumulator,itr.next());
  return accumulator;
}

public void saveHistory(String filename) throws Exception {
  FileOutputStream fos=new FileOutputStream(filename);
  ObjectOutputStream oos=new ObjectOutputStream(fos);
  oos.writeObject(getHistory());
  oos.close();
}

private void checkSize(final int i){
  if (i >= max_size) {
    final int old_size=max_size;
    max_size+=increment_size;
    if (max_size <= i) {
      max_size=i + increment_size + 2;
    }
    final double[] temp=items;
    items=new double[max_size];
    System.arraycopy(temp,0,items,0,old_size);
    increment_size=incrementSize(increment_size);
  }
}

public double nextGaussian(){
  return random.nextGaussian();
}

private void readFromProperties(final Properties props,final boolean defaultMinimized,final int defaultX,final int defaultY,final boolean defaultVisible){
  minimized=Boolean.parseBoolean(props.getProperty("window." + name + ".minimized",Boolean.toString(defaultMinimized)));
  visible=Boolean.parseBoolean(props.getProperty("window." + name + ".visible",Boolean.toString(defaultVisible)));
  x=Integer.parseInt(props.getProperty("window." + name + ".x",Integer.toString(defaultX)));
  y=Integer.parseInt(props.getProperty("window." + name + ".y",Integer.toString(defaultY)));
}

public boolean sendEMailAttachments(int AD_User_ID,String subject,String message,Collection<File> attachments,boolean html){
  MUser to=MUser.get(getCtx(),AD_User_ID);
  String toEMail=to.getEMail();
  if (toEMail == null || toEMail.length() == 0) {
    log.warning("No EMail for recipient: " + to);
    return false;
  }
  EMail email=createEMail(null,to,subject,message,html);
  if (email == null)   return false;
  email.addAttachments(attachments);
  try {
    return sendEmailNow(null,to,email);
  }
 catch (  Exception ex) {
    log.severe(getName() + " - " + ex.getLocalizedMessage());
    return false;
  }
}

private void addUnitTaxCalculationInfoClone(final TaxCalculationInfo taxCalInfo,final TaxCalculationInfo clone){
  final List<UnitTaxCalculationInfo> units=new ArrayList<UnitTaxCalculationInfo>();
  final List<UnitTaxCalculationInfo> unitsByDate=new ArrayList<UnitTaxCalculationInfo>();
  for (  final UnitTaxCalculationInfo unitInfo : taxCalInfo.getUnitTaxCalculationInfos()) {
    final UnitTaxCalculationInfo newUnitInfo=getUnitTaxCalculationInfoClone(unitInfo);
    unitsByDate.add(newUnitInfo);
  }
  clone.setUnitTaxCalculationInfo(units);
}

public SocketWrapper accept() throws IOException {
  for (; ; ) {
    try {
      Socket sock=serverSocket.accept();
      return new SocketWrapper(sock);
    }
 catch (    SocketTimeoutException e) {
    }
catch (    IOException e) {
      if (done) {
        throw new SocketTerminationException("Server socket has been terminated",e);
      }
 else {
        throw e;
      }
    }
  }
}

private String replaceDotInMustacheKeys(final List<String> mustacheKeys,final String pluginCall){
  String fixedPluginCall=pluginCall;
  for (  String mustacheKey : mustacheKeys) {
    if (mustacheKey.contains(".")) {
      fixedPluginCall=fixedPluginCall.replace("{{" + mustacheKey + "}}","{{" + mustacheKey.replace('.','#') + "}}");
    }
  }
  return fixedPluginCall;
}

protected synchronized Instance processBuffers(){
  if (m_firstBuffer != null && m_secondBuffer != null && m_firstBuffer.size() > 0 && m_secondBuffer.size() > 0) {
    if (m_stopRequested.get()) {
      return null;
    }
    InstanceHolder firstH=m_firstBuffer.peek();
    InstanceHolder secondH=m_secondBuffer.peek();
    Instance first=firstH.m_instance;
    Instance second=secondH.m_instance;
    int cmp=compare(first,second,firstH,secondH);
    if (cmp == 0) {
      Instance newInst=generateMergedInstance(m_firstBuffer.remove(),m_secondBuffer.remove());
      return newInst;
    }
 else     if (cmp < 0) {
      do {
        m_firstBuffer.remove();
        if (m_firstBuffer.size() > 0) {
          firstH=m_firstBuffer.peek();
          first=firstH.m_instance;
          cmp=compare(first,second,firstH,secondH);
        }
      }
 while (cmp < 0 && m_firstBuffer.size() > 0);
    }
 else {
      do {
        m_secondBuffer.remove();
        if (m_secondBuffer.size() > 0) {
          secondH=m_secondBuffer.peek();
          second=secondH.m_instance;
          cmp=compare(first,second,firstH,secondH);
        }
      }
 while (cmp > 0 && m_secondBuffer.size() > 0);
    }
  }
  return null;
}

public boolean isThemeConstant(String constantName,boolean def){
  String c=getThemeConstant(constantName,null);
  if (c == null) {
    return def;
  }
  return c.equalsIgnoreCase("true") || c.equals("1");
}

public void testDelete4() throws SQLException {
  DatabaseCreator.fillFKCascadeTable(conn);
  statement.execute("DELETE FROM " + DatabaseCreator.PARENT_TABLE + " WHERE id = 3;");
}

public void unmap(int addr,int len){
  for (int i=0; i < len; i+=PAGE_SIZE) {
    int pte=getPTE(addr + i);
    if (getPage(pte) != null) {
      readableMemory[pte]=null;
      writableMemory[pte]=null;
      executableMemory[pte]=null;
    }
 else {
      throw new Error("Unmapping memory that's not mapped addr=0x" + Integer.toHexString(addr) + " len="+ len);
    }
  }
}

private synchronized void saveToSettings(){
  List<List> entriesToSave=new ArrayList<>();
  for (  StatusHistoryEntry entry : entries.values()) {
    entriesToSave.add(entryToList(entry));
  }
  settings.putList("statusPresets",entriesToSave);
}

protected void initFinished(){
}

protected void addToMaintenanceQueue(NodePortTuple npt){
  if (maintenanceQueue.contains(npt) == false)   maintenanceQueue.add(npt);
}

public MovieScraperMetadataPanel(MovieScraperMetadataConfig config){
  this.config=config;
  initComponents();
}

public int size(){
  return seq.size();
}

public static void assertPropsPerRow(Iterator<EventBean> iterator,SafeIterator<EventBean> safeIterator,String[] propertyNames,Object[][] expected){
  assertPropsPerRow(EPAssertionUtil.iteratorToArray(iterator),propertyNames,expected);
  assertPropsPerRow(EPAssertionUtil.iteratorToArray(safeIterator),propertyNames,expected);
  safeIterator.close();
}

public boolean isLeaf(){
  return children == null || children.isEmpty();
}

public void testGet() throws Exception {
  IgniteCache<Long,Long> cache=populate();
  for (long i=from; i < to; i++) {
    Long val=cache.get(i);
    assertNotNull(val);
    assertEquals(i,val.longValue());
  }
  assertEquals(0,swappedCnt.get());
  assertEquals(0,offheapedCnt.get());
  assertEquals(to - from,unswapedCnt.get() + onheapedCnt.get());
  checkEntries(cache);
  assertEquals(to - from,unswapedCnt.get() + onheapedCnt.get());
}

public int read() throws IOException {
  if (hasNextChar) {
    hasNextChar=false;
    write(nextChar);
    return nextChar;
  }
  if (previousLine != lexer.getLine()) {
    numUnicodeEscapesFoundOnCurrentLine=0;
    previousLine=lexer.getLine();
  }
  int c=reader.read();
  if (c != '\\') {
    write(c);
    return c;
  }
  c=reader.read();
  if (c != 'u') {
    hasNextChar=true;
    nextChar=c;
    write('\\');
    return '\\';
  }
  int numberOfUChars=0;
  do {
    numberOfUChars++;
    c=reader.read();
  }
 while (c == 'u');
  checkHexDigit(c);
  StringBuilder charNum=new StringBuilder();
  charNum.append((char)c);
  for (int i=0; i < 3; i++) {
    c=reader.read();
    checkHexDigit(c);
    charNum.append((char)c);
  }
  int rv=Integer.parseInt(charNum.toString(),16);
  write(rv);
  numUnicodeEscapesFound+=4 + numberOfUChars;
  numUnicodeEscapesFoundOnCurrentLine+=4 + numberOfUChars;
  return rv;
}

public boolean isEmpty(){
  if (!built)   return itemBoundables.isEmpty();
  return root.isEmpty();
}

protected AbstractWriter(Writer w,Document doc,int pos,int len){
  this.doc=doc;
  it=new ElementIterator(doc.getDefaultRootElement());
  out=w;
  startOffset=pos;
  endOffset=pos + len;
  Object docNewline=doc.getProperty(DefaultEditorKit.EndOfLineStringProperty);
  if (docNewline instanceof String) {
    setLineSeparator((String)docNewline);
  }
 else {
    String newline=null;
    try {
      newline=System.getProperty("line.separator");
    }
 catch (    SecurityException se) {
    }
    if (newline == null) {
      newline="\n";
    }
    setLineSeparator(newline);
  }
  canWrapLines=true;
}

protected void adjustPositionY(int velocityY){
  if (reverseLayout)   velocityY*=-1;
  int childCount=getChildCount();
  if (childCount > 0) {
    int curPosition=ViewUtils.getCenterYChildPosition(this);
    int childHeight=getHeight() - getPaddingTop() - getPaddingBottom();
    int flingCount=getFlingCount(velocityY,childHeight);
    int targetPosition=curPosition + flingCount;
    if (mSinglePageFling) {
      flingCount=Math.max(-1,Math.min(1,flingCount));
      targetPosition=flingCount == 0 ? curPosition : mPositionOnTouchDown + flingCount;
    }
    targetPosition=Math.max(targetPosition,0);
    targetPosition=Math.min(targetPosition,getItemCount() - 1);
    if (targetPosition == curPosition && (!mSinglePageFling || mPositionOnTouchDown == curPosition)) {
      View centerYChild=ViewUtils.getCenterYChild(this);
      if (centerYChild != null) {
        if (mTouchSpan > centerYChild.getHeight() * mTriggerOffset && targetPosition != 0) {
          if (!reverseLayout)           targetPosition--;
 else           targetPosition++;
        }
 else         if (mTouchSpan < centerYChild.getHeight() * -mTriggerOffset && targetPosition != getItemCount() - 1) {
          if (!reverseLayout)           targetPosition++;
 else           targetPosition--;
        }
      }
    }
    if (DEBUG) {
      Log.d("@","mTouchSpan:" + mTouchSpan);
      Log.d("@","adjustPositionY:" + targetPosition);
    }
    smoothScrollToPosition(safeTargetPosition(targetPosition,getItemCount()));
  }
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

@Override public Node importTo(Document hostDocument){
  ValidateUtil.validateNotNull(hostDocument,"Host document");
  Element clonedTokenElement=(Element)hostDocument.importNode(_parsedToken.getDocumentElement(),true);
  markAssertionIdAttribute(clonedTokenElement);
  return clonedTokenElement;
}

public static Matrix random(int m,int n){
  Matrix A=new Matrix(m,n);
  double[][] X=A.getArray();
  for (int i=0; i < m; i++) {
    for (int j=0; j < n; j++) {
      X[i][j]=Math.random();
    }
  }
  return A;
}

public void addPriorityUnit(String id){
  if (!StringUtil.isPositiveInteger(id)) {
    return;
  }
  addPriorityUnit(Integer.parseInt(id));
}

private void calcIntervalDis(){
  if (mMarkTextPaint == null) {
    return;
  }
  String defaultText="888888";
  Rect temp=new Rect();
  int max=0;
  if (mItems != null && mItems.size() > 0) {
    for (    String i : mItems) {
      mMarkTextPaint.getTextBounds(i,0,i.length(),temp);
      if (temp.width() > max) {
        max=temp.width();
      }
    }
  }
 else {
    mMarkTextPaint.getTextBounds(defaultText,0,defaultText.length(),temp);
    max=temp.width();
  }
  if (!TextUtils.isEmpty(mAdditionCenterMark)) {
    mMarkTextPaint.setTextSize(mNormalTextSize);
    mMarkTextPaint.getTextBounds(mAdditionCenterMark,0,mAdditionCenterMark.length(),temp);
    mAdditionCenterMarkWidth=temp.width();
    max+=temp.width();
  }
  mIntervalDis=max * mIntervalFactor;
}

public boolean isUseSoftkeys(){
  return useSoftkeys;
}

public void testDivisionKnuthFirstDigitsEqual(){
  byte aBytes[]={2,-3,-4,-5,-1,-5,-4,-3,-2,-1,0,1,2,3,4,5};
  byte bBytes[]={2,-3,-4,-5,-1,-1,-1,-1};
  int aSign=-1;
  int bSign=-1;
  byte rBytes[]={0,-1,-1,-1,-1,-2,-88,-60,41};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.divide(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public void connectionClosed(ConnectionEvent event){
  if (isActive) {
    ManagedConnection conn=(ManagedConnection)event.getSource();
    TransactionManagerImpl transManager=TransactionManagerImpl.getTransactionManager();
    try {
      Transaction txn=transManager.getTransaction();
      if (txn == null) {
        mannPoolCache.returnPooledConnectionToPool(conn);
      }
    }
 catch (    Exception se) {
      String exception="FacetsJCAConnectionManagerImpl::connectionClosed: Exception occured due to " + se.getMessage();
      if (logger.isDebugEnabled()) {
        logger.debug(exception,se);
      }
    }
  }
}

public MetadataBlockHeader(boolean isLastBlock,BlockType blockType,int dataLength){
  ByteBuffer rawdata=ByteBuffer.allocate(HEADER_LENGTH);
  this.blockType=blockType;
  this.isLastBlock=isLastBlock;
  this.dataLength=dataLength;
  byte type;
  if (isLastBlock) {
    type=(byte)(0x80 | blockType.getId());
  }
 else {
    type=(byte)blockType.getId();
  }
  rawdata.put(type);
  rawdata.put((byte)((dataLength & 0xFF0000) >>> 16));
  rawdata.put((byte)((dataLength & 0xFF00) >>> 8));
  rawdata.put((byte)(dataLength & 0xFF));
  bytes=new byte[HEADER_LENGTH];
  for (int i=0; i < HEADER_LENGTH; i++) {
    bytes[i]=rawdata.get(i);
  }
}

private void checkFileToRun() throws ExitCodeException {
  if (runThisFile == null || !runThisFile.exists()) {
    throw new ExitCodeException(EXITCODE_MODULE_TO_RUN_NOT_FOUND);
  }
}

public void addLastItem(M model){
  addItem(mDatas.size(),model);
}

@ManagedOperation(description="Notifies all Tag cache listeners (status confirmation). Refresh supervision status after this call!") public void notifyAllTagCacheListeners(){
  LOGGER.info("Recovery task: notifying all tag listeners.");
  for (  Long key : controlTagCache.getKeys()) {
    controlTagCache.acquireWriteLockOnKey(key);
    try {
      ControlTag controlTag=controlTagCache.getCopy(key);
      long eventTime=System.currentTimeMillis();
      controlTagCache.notifyListenerStatusConfirmation(controlTag,eventTime);
    }
  finally {
      controlTagCache.releaseWriteLockOnKey(key);
    }
  }
  for (  Long key : dataTagCache.getKeys()) {
    dataTagCache.acquireWriteLockOnKey(key);
    try {
      DataTag dataTag=dataTagCache.getCopy(key);
      long eventTime=System.currentTimeMillis();
      dataTagCache.notifyListenerStatusConfirmation(dataTag,eventTime);
    }
  finally {
      dataTagCache.releaseWriteLockOnKey(key);
    }
  }
  LOGGER.info("Recovery task: finished notifying all tag listeners.");
}

public static long[] breakdown(long t,@NonNull TimeUnit unit,boolean roundMillis){
  long days=unit.toDays(t);
  long hours=unit.toHours(t) % 24;
  long minutes=unit.toMinutes(t) % 60;
  long seconds=unit.toSeconds(t) % 60;
  long msecs=unit.toMillis(t) % 1000;
  if (roundMillis) {
    if (msecs >= 500) {
      seconds++;
      msecs=0;
      if (seconds == 60) {
        minutes++;
        seconds=0;
        if (minutes == 60) {
          hours++;
          minutes=0;
          if (hours == 24) {
            days++;
            hours=0;
          }
        }
      }
    }
  }
  return new long[]{days,hours,minutes,seconds,msecs};
}

private int socksGetServerPort(){
  InetSocketAddress addr=(InetSocketAddress)proxy.address();
  return addr.getPort();
}

public static <T>ReactiveSeq<T> fromList(final List<T> list){
  Objects.requireNonNull(list);
  final ReversingListSpliterator array=new ReversingListSpliterator<T>(list,false);
  return StreamUtils.reactiveSeq(StreamSupport.stream(array,false),Optional.ofNullable(array));
}

private boolean processKeyUp(int keyCode){
  if (keyCode == KeyEvent.KEYCODE_DEL) {
    if (mInKbMode) {
      if (!mTypedTimes.isEmpty()) {
        int deleted=deleteLastTypedKey();
        String deletedKeyStr;
        if (deleted == getAmOrPmKeyCode(AM)) {
          deletedKeyStr=mAmText;
        }
 else         if (deleted == getAmOrPmKeyCode(PM)) {
          deletedKeyStr=mPmText;
        }
 else {
          deletedKeyStr=String.format("%d",getValFromKeyCode(deleted));
        }
        ViewCompatUtils.announceForAccessibility(mDelegator,String.format(mDeletedKeyFormat,deletedKeyStr));
        updateDisplay(true);
      }
    }
  }
 else   if (keyCode == KeyEvent.KEYCODE_0 || keyCode == KeyEvent.KEYCODE_1 || keyCode == KeyEvent.KEYCODE_2 || keyCode == KeyEvent.KEYCODE_3 || keyCode == KeyEvent.KEYCODE_4 || keyCode == KeyEvent.KEYCODE_5 || keyCode == KeyEvent.KEYCODE_6 || keyCode == KeyEvent.KEYCODE_7 || keyCode == KeyEvent.KEYCODE_8 || keyCode == KeyEvent.KEYCODE_9 || (!mIs24HourView && (keyCode == getAmOrPmKeyCode(AM) || keyCode == getAmOrPmKeyCode(PM)))) {
    if (!mInKbMode) {
      if (mRadialTimePickerView == null) {
        Log.e(TAG,"Unable to initiate keyboard mode, TimePicker was null.");
        return true;
      }
      mTypedTimes.clear();
      tryStartingKbMode(keyCode);
      return true;
    }
    if (addKeyIfLegal(keyCode)) {
      updateDisplay(false);
    }
    return true;
  }
  return false;
}

public synchronized OMGraphicList prepare(){
  OMGraphicList list=new OMGraphicList();
  Projection proj=getProjection();
  if (proj == null) {
    return list;
  }
  Point2D upperLeft=proj.getUpperLeft();
  Point2D lowerRight=proj.getLowerRight();
  if (upperLeft.getX() > lowerRight.getX()) {
    getPoints(new DataBounds(upperLeft,new Point2D.Double(180,lowerRight.getY())),list,proj);
    getPoints(new DataBounds(new Point2D.Double(-180,upperLeft.getY()),lowerRight),list,proj);
  }
 else {
    getPoints(new DataBounds(upperLeft,lowerRight),list,proj);
  }
  OMText statement=new OMText(10,proj.getHeight() - 10,getName() + " displaying " + list.size()+ "/"+ dataSource.size()+ " points",OMText.JUSTIFY_LEFT);
  statement.setFillPaint(Color.gray);
  statement.generate(proj);
  list.add(0,statement);
  return list;
}

public X509Name(Vector oids,Vector values){
  this(oids,values,new X509DefaultEntryConverter());
}

void nextLine(){
  try {
    nextLine=currentEpisode.readLine();
    while (nextLine.equals("#"))     nextLine=currentEpisode.readLine();
  }
 catch (  IOException|NullPointerException e) {
    nextLine=null;
  }
}

public Jobs subset(String[] jobIds){
  final List<Job> subsetResult=new ArrayList<Job>();
  for (  String jobId : jobIds) {
    Job job=jobMap.get(jobId);
    if (job.isAnalysis()) {
      subsetResult.add(job);
    }
  }
  return new Jobs(subsetResult);
}

public void addPropertyChangeListener(PropertyChangeListener listener){
  List<PropertyChangeListener> l=Arrays.asList(listenerList.getListeners(PropertyChangeListener.class));
  if (!l.contains(listener)) {
    listenerList.add(PropertyChangeListener.class,listener);
  }
}

public static byte[] fromHexString(String text){
  text=text.trim();
  if (text.length() % 2 != 0)   text="0" + text;
  int resLen=text.length() / 2;
  int loNibble, hiNibble;
  byte[] res=new byte[resLen];
  for (int i=0; i < resLen; i++) {
    int j=i << 1;
    hiNibble=charToNibble(text.charAt(j));
    loNibble=charToNibble(text.charAt(j + 1));
    if (loNibble == -1 || hiNibble == -1)     return null;
    res[i]=(byte)(hiNibble << 4 | loNibble);
  }
  return res;
}

protected static double variance(double[] s,double[] sS,double[] sumOfWeights){
  double var=0;
  for (int i=0; i < s.length; i++) {
    if (sumOfWeights[i] > 0) {
      var+=singleVariance(s[i],sS[i],sumOfWeights[i]);
    }
  }
  return var;
}

public void write(CharSequence csq) throws IOException {
  final int length=csq.length();
  for (int i=0; i < length; ) {
    char c=csq.charAt(i++);
    if (c < 0x80) {
      _bytes[_index]=(byte)c;
      if (++_index >= _bytes.length) {
        flushBuffer();
      }
    }
 else {
      write(c);
    }
  }
}

public static boolean canResize(List constraints){
  for (Iterator iter=constraints.iterator(); iter.hasNext(); ) {
    DockConstraint dc=(DockConstraint)iter.next();
    if (!dc.canResize())     return false;
  }
  return true;
}

@Override public boolean connectionAllowed(EventSetDescriptor esd){
  return connectionAllowed(esd.getName());
}

String readNumber(String source,int ofs,String token,boolean adjacent){
  if (adjacent) {
    return source.substring(ofs,ofs + token.length());
  }
  int len=source.length();
  for (int i=ofs; i < len; i++) {
    char ch=source.charAt(i);
    if (isNumeric(ch) == false) {
      if (i == 0) {
        return null;
      }
      return source.substring(ofs,i);
    }
  }
  return source.substring(ofs);
}

private Vec feedForward(Vec input){
  Vec x=input;
  for (int i=0; i < Ws.size(); i++) {
    Matrix W_i=Ws.get(i);
    Vec b_i=bs.get(i);
    Vec a_i=W_i.multiply(x);
    a_i.mutableAdd(b_i);
    a_i.applyFunction(f);
    x=a_i;
  }
  return x;
}

private boolean split_wtrace_other(BrdTracep found_trace,Collection<BrdTracep> split_pieces,ArrayList<PlaLineInt> intersecting_lines,AwtreeFindEntry found_entry){
  if (found_trace == this)   return false;
  boolean have_trace_split=false;
  for (  PlaLineInt inter_line : intersecting_lines) {
    if (have_trace_split)     break;
    int line_no=found_entry.shape_index_in_object + 1;
    ArrayList<BrdTracep> curr_split_pieces=found_trace.split_with_end_line(line_no,inter_line);
    if (curr_split_pieces.size() < 1)     continue;
    have_trace_split=true;
    split_pieces.addAll(curr_split_pieces);
  }
  if (!have_trace_split)   split_pieces.add(found_trace);
  return have_trace_split;
}

private void printSolution(Solution solution){
  if (includeVariables) {
    for (int i=0; i < solution.getNumberOfVariables(); i++) {
      if (i > 0) {
        writer.print(' ');
      }
      writer.print(encode(solution.getVariable(i)));
    }
  }
  for (int i=0; i < solution.getNumberOfObjectives(); i++) {
    if ((i > 0) || (includeVariables && (solution.getNumberOfVariables() > 0))) {
      writer.print(' ');
    }
    writer.print(solution.getObjective(i));
  }
  writer.println();
}

public void readNBT(NBTTagCompound nbt){
  if (nbt.hasKey("decayLevel",99)) {
    this.decayLevel=nbt.getInteger("decayLevel");
    this.decaySaturationLevel=nbt.getFloat("decaySaturationLevel");
    this.decayAccelerationLevel=nbt.getFloat("decayExhaustionLevel");
  }
}

public void copyTo(PositionTextureVertex[] verts,TexturedQuad[] quad){
  TexturedPolygon[] poly=new TexturedPolygon[quad.length];
  for (int idx=0; idx < quad.length; idx++) {
    poly[idx]=new TexturedPolygon((PositionTextureVertex[])quad[idx].vertexPositions);
  }
  copyTo(verts,poly);
}

public synchronized void deleteObserver(Observer observer){
  observers.remove(observer);
}

public AccountAttribute asAccountAttribute(Account account){
  if (account == null) {
    return null;
  }
  AccountAttribute who=new AccountAttribute();
  who.name=account.getFullName();
  who.email=account.getPreferredEmail();
  who.username=account.getUserName();
  return who;
}

public void delete(TemplatePersistenceData data){
  if (data.isUserAdded())   fTemplates.remove(data);
 else   data.setDeleted(true);
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(4);
  newVector.addElement(new Option("\tSpecify the number of instances to\n" + "\tsample when estimating attributes.\n" + "\tIf not specified, then all instances\n"+ "\twill be used.","M",1,"-M <num instances>"));
  newVector.addElement(new Option("\tSeed for randomly sampling instances.\n" + "\t(Default = 1)","D",1,"-D <seed>"));
  newVector.addElement(new Option("\tNumber of nearest neighbours (k) used\n" + "\tto estimate attribute relevances\n" + "\t(Default = 10).","K",1,"-K <number of neighbours>"));
  newVector.addElement(new Option("\tWeight nearest neighbours by distance","W",0,"-W"));
  newVector.addElement(new Option("\tSpecify sigma value (used in an exp\n" + "\tfunction to control how quickly\n" + "\tweights for more distant instances\n"+ "\tdecrease. Use in conjunction with -W.\n"+ "\tSensible value=1/5 to 1/10 of the\n"+ "\tnumber of nearest neighbours.\n"+ "\t(Default = 2)","A",1,"-A <num>"));
  return newVector.elements();
}

public String consumeWord(){
  int start=pos;
  while (matchesWord())   pos++;
  return queue.substring(start,pos);
}

public static void printInlining(final ResolvedJavaMethod method,final int bci,final int inliningDepth,final boolean success,final String msg,final Object... args){
  if (HotSpotPrintInlining.getValue()) {
    StringBuilder sb=new StringBuilder();
    sb.append("        ");
    sb.append("     ");
    sb.append(String.format("%c%c%c%c%c ",' ',method.isSynchronized() ? 's' : ' ',' ',' ',method.isNative() ? 'n' : ' '));
    sb.append("     ");
    sb.append("    ");
    for (int i=0; i < inliningDepth; i++) {
      sb.append("  ");
    }
    sb.append(String.format("@ %d  %s   %s%s",bci,methodName(method),success ? "" : "not inlining ",String.format(msg,args)));
    TTY.println(sb.toString());
  }
}

public static double calculatePValue(double t,int v){
  return 2 * (1 - StudentsTDistribution.cdf(Math.abs(t),v));
}

public static void appendChild(Node parent,Node child){
  Document ownerDoc=getOwnerDocument(parent);
  if (child.getOwnerDocument() != ownerDoc) {
    parent.appendChild(ownerDoc.importNode(child,true));
  }
 else {
    parent.appendChild(child);
  }
}

protected void deleteSessionVariables(String sessionId,String... varNames){
  if (sessionId.equals("")) {
    return;
  }
  Key key=keyFactory.newKey(sessionId);
  Transaction transaction=datastore.newTransaction();
  try {
    Entity stateEntity=transaction.get(key);
    Entity.Builder builder=Entity.builder(stateEntity);
    StringBuilder delNames=new StringBuilder();
    for (    String varName : varNames) {
      delNames.append(varName + " ");
      builder=builder.remove(varName);
    }
    datastore.update(builder.build());
  }
 catch (  NullPointerException e) {
  }
 finally {
    if (transaction.active()) {
      transaction.rollback();
    }
  }
}

@SuppressLint("NewApi") private void pruneScrapViews(){
  final int maxViews=mActiveViews.length;
  final int viewTypeCount=mViewTypeCount;
  final ArrayList<View>[] scrapViews=mScrapViews;
  for (int i=0; i < viewTypeCount; ++i) {
    final ArrayList<View> scrapPile=scrapViews[i];
    int size=scrapPile.size();
    final int extras=size - maxViews;
    size--;
    for (int j=0; j < extras; j++) {
      removeDetachedView(scrapPile.remove(size--),false);
    }
  }
  if (mTransientStateViews != null) {
    for (int i=0; i < mTransientStateViews.size(); i++) {
      final View v=mTransientStateViews.valueAt(i);
      if (!v.hasTransientState()) {
        mTransientStateViews.removeAt(i);
        i--;
      }
    }
  }
}

private void updateWorkAmount(double workTime){
  if (workTime <= 0) {
    currentWorkAmount*=2;
  }
 else {
    totalTimeTaken+=workTime;
    completedWorkAmount+=currentWorkAmount;
    currentWorkAmount=(int)Math.ceil(targetExecutionMs * completedWorkAmount / totalTimeTaken);
  }
}

public static boolean isLafAqua(){
  ensureValidCache();
  if (cachedIsLafAqua == null) {
    cachedIsLafAqua=Boolean.valueOf(computeIsLafAqua());
  }
  return cachedIsLafAqua.booleanValue();
}

public void moveRandomly(){
  setRandomPathFrom(getX(),getY(),getMovementRange() / 2);
}

public void plnI(Object o) throws IOException {
  p(o.toString());
  pln();
  pI();
}

@Override public void writeEntityToNBT(NBTTagCompound par1NBTTagCompound){
  par1NBTTagCompound.setShort("xTile",(short)this.xTile);
  par1NBTTagCompound.setShort("yTile",(short)this.yTile);
  par1NBTTagCompound.setShort("zTile",(short)this.zTile);
  par1NBTTagCompound.setInteger("inTile",Block.getIdFromBlock(this.inTile));
  par1NBTTagCompound.setByte("inData",(byte)this.inData);
  par1NBTTagCompound.setByte("shake",(byte)this.arrowShake);
  par1NBTTagCompound.setByte("inGround",(byte)(this.inGround ? 1 : 0));
  par1NBTTagCompound.setBoolean("isExplosive",this.isExplosive);
}

@Override public StringBuffer format(final double value,final StringBuffer buffer,final FieldPosition position){
  return format(Double.valueOf(value),buffer,position);
}

private Object translateStreamToInputStream(InputStream str,DataFlavor flavor,long format,Transferable localeTransferable) throws IOException {
  if (isFlavorCharsetTextType(flavor) && isTextFormat(format)) {
    str=new ReencodingInputStream(str,format,DataTransferer.getTextCharset(flavor),localeTransferable);
  }
  return constructFlavoredObject(str,flavor,InputStream.class);
}

public void dispose() throws IabAsyncInProgressException {
synchronized (mAsyncInProgressLock) {
    if (mAsyncInProgress) {
      throw new IabAsyncInProgressException("Can't dispose because an async operation " + "(" + mAsyncOperation + ") is in progress.");
    }
  }
  logDebug("Disposing.");
  mSetupDone=false;
  if (mServiceConn != null) {
    logDebug("Unbinding from service.");
    if (mContext != null)     mContext.unbindService(mServiceConn);
  }
  mDisposed=true;
  mContext=null;
  mServiceConn=null;
  mService=null;
  mPurchaseListener=null;
}

private boolean isIPTResourceFolder(File dir){
  if (dir.exists() && dir.isDirectory()) {
    File persistenceFile=new File(dir,PERSISTENCE_FILE);
    File emlFile=new File(dir,DataDir.EML_XML_FILENAME);
    return persistenceFile.isFile() && emlFile.isFile();
  }
  return false;
}

public Set<String> addSpriteFrames(String plist,CCTexture2D texture){
  HashMap<String,Object> dict=PlistParser.parse(plist);
  return addSpriteFrames(dict,texture);
}

public void addAnnotation(final Annotation annotation){
  annotationList.add(annotation);
  annotation.setxyGraph(xyGraph);
  add(annotation);
  revalidate();
  changeSupport.firePropertyChange("annotationList",null,annotation);
}

public static void createOverviews(ASDocConfiguration config) throws CompilerException {
  String templatesPath=config.getTemplatesPath();
  String ditaPath=config.getOutput() + "tempdita" + File.separator;
  BufferedWriter writer=null;
  Reader reader=null;
  try {
    writer=new BufferedWriter(new FileWriter(ditaPath + "overviews.xml"));
    if (config.getPackageDescriptionFile() != null) {
      reader=new BufferedReader(new FileReader(config.getPackageDescriptionFile()));
    }
 else {
      reader=new BufferedReader(new FileReader(templatesPath + "Overviews_Base.xml"));
    }
    OverviewsHandler h=new OverviewsHandler(writer,config);
    InputSource source=new InputSource(reader);
    SAXParserFactory factory=SAXParserFactory.newInstance();
    SAXParser parser=factory.newSAXParser();
    parser.parse(source,h);
  }
 catch (  Exception e) {
    if (Trace.error)     e.printStackTrace();
    CompilerMessage c=new CouldNotCreate("overviews.xml",e.getMessage());
    ThreadLocalToolkit.log(c);
    throw c;
  }
 finally {
    if (writer != null) {
      try {
        writer.close();
      }
 catch (      IOException ioe) {
      }
    }
    if (reader != null) {
      try {
        reader.close();
      }
 catch (      IOException ioe) {
      }
    }
  }
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public CreateNewNoteIntentBuilder addTags(@Nullable ArrayList<String> tags){
  ArrayList<String> list=mArgs.getStringArrayList(EvernoteIntent.EXTRA_TAG_NAME_LIST);
  if (list == null) {
    list=tags;
  }
 else   if (tags != null) {
    list.addAll(tags);
  }
  return setTags(list);
}

private RemoteOperationResult refreshSharesForFolder(OwnCloudClient client){
  RemoteOperationResult result=null;
  GetRemoteSharesForFileOperation operation=new GetRemoteSharesForFileOperation(mLocalFolder.getRemotePath(),true,true);
  result=operation.execute(client);
  if (result.isSuccess()) {
    ArrayList<OCShare> shares=new ArrayList<OCShare>();
    for (    Object obj : result.getData()) {
      shares.add((OCShare)obj);
    }
    mStorageManager.saveSharesInFolder(shares,mLocalFolder);
  }
  return result;
}

public double dist(Math_Vector other){
  double distX=this.x - other.x;
  double distY=this.y - other.y;
  return Math.sqrt(distX * distX + distY * distY);
}

public static String parseString(String value){
  if ((value.startsWith("\"")) && (value.endsWith("\"")) || (value.startsWith("'")) && (value.endsWith("'"))) {
    if (value.length() > 1) {
      if (value.indexOf('\\') != -1) {
        return unescape(value.substring(1,value.length() - 1));
      }
      return value.substring(1,value.length() - 1);
    }
  }
  throw new IllegalArgumentException("String value of '" + value + "' cannot be parsed");
}

private void defineDesktopPanes(UIDefaults d){
  d.put("seaGlassDesktopPane",new ColorUIResource(0x556ba6));
  String c=PAINTER_PREFIX + "DesktopPanePainter";
  String p="DesktopPane";
  d.put(p + "[Enabled].backgroundPainter",new LazyPainter(c,DesktopPanePainter.Which.BACKGROUND_ENABLED));
  p="DesktopIcon";
  c=PAINTER_PREFIX + "DesktopIconPainter";
  d.put(p + ".contentMargins",new InsetsUIResource(0,6,5,4));
  d.put(p + "[Enabled].backgroundPainter",new LazyPainter(c,DesktopIconPainter.Which.BACKGROUND_ENABLED));
}

private void fitImageToView(){
  Drawable drawable=getDrawable();
  if (drawable == null || drawable.getIntrinsicWidth() == 0 || drawable.getIntrinsicHeight() == 0) {
    return;
  }
  if (matrix == null || prevMatrix == null) {
    return;
  }
  int drawableWidth=drawable.getIntrinsicWidth();
  int drawableHeight=drawable.getIntrinsicHeight();
  float scaleX=(float)viewWidth / drawableWidth;
  float scaleY=(float)viewHeight / drawableHeight;
switch (mScaleType) {
case CENTER:
    scaleX=scaleY=1;
  break;
case CENTER_CROP:
scaleX=scaleY=Math.max(scaleX,scaleY);
break;
case CENTER_INSIDE:
scaleX=scaleY=Math.min(1,Math.min(scaleX,scaleY));
case FIT_CENTER:
scaleX=scaleY=Math.min(scaleX,scaleY);
break;
case FIT_XY:
break;
default :
throw new UnsupportedOperationException("TouchImageView does not support FIT_START or FIT_END");
}
float redundantXSpace=viewWidth - (scaleX * drawableWidth);
float redundantYSpace=viewHeight - (scaleY * drawableHeight);
matchViewWidth=viewWidth - redundantXSpace;
matchViewHeight=viewHeight - redundantYSpace;
if (!isZoomed() && !imageRenderedAtLeastOnce) {
matrix.setScale(scaleX,scaleY);
matrix.postTranslate(redundantXSpace / 2,redundantYSpace / 2);
normalizedScale=1;
}
 else {
if (prevMatchViewWidth == 0 || prevMatchViewHeight == 0) {
savePreviousImageValues();
}
prevMatrix.getValues(m);
m[Matrix.MSCALE_X]=matchViewWidth / drawableWidth * normalizedScale;
m[Matrix.MSCALE_Y]=matchViewHeight / drawableHeight * normalizedScale;
float transX=m[Matrix.MTRANS_X];
float transY=m[Matrix.MTRANS_Y];
float prevActualWidth=prevMatchViewWidth * normalizedScale;
float actualWidth=getImageWidth();
translateMatrixAfterRotate(Matrix.MTRANS_X,transX,prevActualWidth,actualWidth,prevViewWidth,viewWidth,drawableWidth);
float prevActualHeight=prevMatchViewHeight * normalizedScale;
float actualHeight=getImageHeight();
translateMatrixAfterRotate(Matrix.MTRANS_Y,transY,prevActualHeight,actualHeight,prevViewHeight,viewHeight,drawableHeight);
matrix.setValues(m);
}
fixTrans();
setImageMatrix(matrix);
}

ObjectAnimator animateBoundScroll(){
  float curScroll=getStackScroll();
  float newScroll=getBoundedStackScroll(curScroll);
  if (Float.compare(newScroll,curScroll) != 0) {
    animateScroll(curScroll,newScroll,null);
  }
  return mScrollAnimator;
}

public IntArray resize(IntArray array,long size){
  if (array instanceof BigIntArray) {
    return resizeInPlace((BigIntArray)array,size);
  }
 else {
    AbstractArray arr=(AbstractArray)array;
    final IntArray newArray=newIntArray(size,arr.clearOnResize);
    for (long i=0, end=Math.min(size,array.size()); i < end; ++i) {
      newArray.set(i,array.get(i));
    }
    array.close();
    return newArray;
  }
}

public DERUTCTime(Date time){
  SimpleDateFormat dateF=new SimpleDateFormat("yyMMddHHmmss'Z'");
  dateF.setTimeZone(new SimpleTimeZone(0,"Z"));
  this.time=Strings.toByteArray(dateF.format(time));
}

public static double pdf(double x,double mu,double beta){
  final double z=(x - mu) / beta;
  if (x == Double.NEGATIVE_INFINITY) {
    return 0.;
  }
  return Math.exp(-z - Math.exp(-z)) / beta;
}

private static byte[] copy_buffer(byte[] buffer,int sOffset,int len){
  byte[] newData=new byte[len];
  System.arraycopy(buffer,sOffset,newData,0,len);
  return newData;
}

public SharedFsCheckpointSpi(){
  dirPaths.offer(DFLT_DIR_PATH);
}

private void configure() throws NullLocationException, FormatterInitException {
  String Interval=lmanager.getProperty(LogConstants.LOGSIGN_PERIODINSECONDS);
  if ((Interval == null) || (Interval.length() == 0)) {
    signInterval=LogConstants.LOGSIGN_PERIODINSECONDS_DEFAULT * 1000;
  }
 else {
    signInterval=Long.parseLong(Interval) * 1000;
  }
  String strMaxFileSize=lmanager.getProperty(LogConstants.MAX_FILE_SIZE);
  if ((strMaxFileSize == null) || (strMaxFileSize.length() == 0)) {
    maxFileSize=0;
  }
 else {
    maxFileSize=Integer.parseInt(strMaxFileSize);
  }
  location=lmanager.getProperty(LogConstants.LOG_PROP_PREFIX + "." + logName+ ".location");
  if (location == null) {
    location=lmanager.getProperty(LogConstants.LOG_LOCATION);
  }
  if ((location == null) || (location.length() == 0)) {
    throw new NullLocationException("Location Not Specified");
  }
  if (!location.endsWith(File.separator)) {
    location+=File.separator;
  }
  String filesPerKeyStoreString=lmanager.getProperty(LogConstants.FILES_PER_KEYSTORE);
  if ((filesPerKeyStoreString == null) || (filesPerKeyStoreString.length() == 0)) {
    if (Debug.warningEnabled()) {
      Debug.warning(logName + ":Archiver: could not get the files " + "per keystore str setting it to 1");
    }
    filesPerKeyStoreString="5";
  }
  filesPerKeyStore=Integer.parseInt(filesPerKeyStoreString);
  if (Debug.messageEnabled()) {
    Debug.message(logName + ":Files per Key Store = " + filesPerKeyStoreString);
  }
  String archiverClassString=lmanager.getProperty(LogConstants.ARCHIVER);
  if ((archiverClassString == null) || (archiverClassString.length() == 0)) {
    throw new NullLocationException("Archvier class not specified");
  }
  archiverClass=archiverClassString;
}

public void pull(final PullParams params,final ProgressMonitor progressMonitor) throws IOException {
  pull(params,progressMonitor,dockerDaemonUri);
}

public static InputStream streamFromString(String location) throws IOException {
  InputStream is=null;
  URL url=urlFromString(location,null,false);
  if (url != null) {
    is=url.openStream();
  }
 else {
    File f=new File(location);
    if (f.exists())     is=new FileInputStream(f);
  }
  if (is == null) {
    return null;
  }
 else   if (isGZipFile(location)) {
    return new GZIPInputStream(is);
  }
 else {
    return is;
  }
}

public void addUpdateListener(AnimatorUpdateListener listener){
  if (mUpdateListeners == null) {
    mUpdateListeners=new ArrayList<AnimatorUpdateListener>();
  }
  mUpdateListeners.add(listener);
}

public void handleRequest(RequestContext rc) throws CLIException {
  super.handleRequest(rc);
  SSOToken adminSSOToken=getAdminSSOToken();
  IOutput outputWriter=getOutputWriter();
  String realm=getStringOptionValue(IArgument.REALM_NAME);
  String idName=getStringOptionValue(ARGUMENT_ID_NAME);
  String type=getStringOptionValue(ARGUMENT_ID_TYPE);
  IdType idType=convert2IdType(type);
  String[] params={realm,type,idName};
  try {
    AMIdentityRepository amir=new AMIdentityRepository(adminSSOToken,realm);
    Set set=amir.getAllowedIdOperations(idType);
    if (!set.contains(IdOperation.SERVICE)) {
      throw new CLIException(MessageFormat.format(getResourceString("realm-does-not-support-service"),(Object[])params),ExitCodes.REQUEST_CANNOT_BE_PROCESSED);
    }
    writeLog(LogWriter.LOG_ACCESS,Level.INFO,"ATTEMPT_GET_ASSIGNABLE_SERVICES",params);
    AMIdentity amid=new AMIdentity(adminSSOToken,idName,idType,realm,null);
    Set services=amid.getAssignableServices();
    if (idType.equals(IdType.USER)) {
      services.remove(Constants.SVC_NAME_USER);
      services.remove(Constants.SVC_NAME_AUTH_CONFIG);
      services.remove(Constants.SVC_NAME_SAML);
    }
    if ((services != null) && !services.isEmpty()) {
      String msg=getResourceString("assignable-service-result");
      String[] arg={""};
      for (Iterator i=services.iterator(); i.hasNext(); ) {
        arg[0]=(String)i.next();
        outputWriter.printlnMessage(MessageFormat.format(msg,(Object[])arg));
      }
    }
 else {
      outputWriter.printlnMessage(getResourceString("no-service-assignable"));
    }
    writeLog(LogWriter.LOG_ACCESS,Level.INFO,"SUCCEED_GET_ASSIGNABLE_SERVICES",params);
  }
 catch (  IdRepoException e) {
    String[] args={realm,type,idName,e.getMessage()};
    debugError("GetAssignableServices.handleRequest",e);
    writeLog(LogWriter.LOG_ERROR,Level.INFO,"FAILED_GET_ASSIGNABLE_SERVICES",args);
    throw new CLIException(e,ExitCodes.REQUEST_CANNOT_BE_PROCESSED);
  }
catch (  SSOException e) {
    String[] args={realm,type,idName,e.getMessage()};
    debugError("GetAssignableServices.handleRequest",e);
    writeLog(LogWriter.LOG_ERROR,Level.INFO,"FAILED_GET_ASSIGNABLE_SERVICES",args);
    throw new CLIException(e,ExitCodes.REQUEST_CANNOT_BE_PROCESSED);
  }
}

public boolean isAlive(){
  if (hasSentData) {
    if (System.currentTimeMillis() - lastSendTime < TIMEOUT)     return true;
    return hasReceivedData && lastReceiveTime > lastSendTime;
  }
  return true;
}

private void removeSelectedItems(List items){
  for (Iterator iter=items.iterator(); iter.hasNext(); ) {
    Object item=iter.next();
    removeHistoryItem(item);
  }
  refreshWithLastSelection=false;
  contentProvider.refresh();
}

public static <K,V>Map<K,V> of(K k1,V v1,K k2,V v2,K k3,V v3,K k4,V v4){
  Map map=of();
  map.put(k1,v1);
  map.put(k2,v2);
  map.put(k3,v3);
  map.put(k4,v4);
  return map;
}

public static void disableConnectionReuseIfNecessary(){
  if (Build.VERSION.SDK_INT < Build.VERSION_CODES.FROYO) {
    System.setProperty("http.keepAlive","false");
  }
}

public static long sizeOf(Struct sct){
  Iterator<Entry<Key,Object>> it=sct.entryIterator();
  Entry<Key,Object> e;
  long size=0;
  while (it.hasNext()) {
    e=it.next();
    size+=SizeOf.size(e.getKey());
    size+=SizeOf.size(e.getValue());
  }
  return size;
}

@Override public boolean isEnabled(){
  if ((attributeSelectionPanel != null) && !isValueOnly()) {
    return attributeSelectionPanel.isEnabled();
  }
 else {
    if (table != null) {
      return table.isEnabled();
    }
  }
  return false;
}

public static Header[] parseHeaders(final SessionInputBuffer inbuffer,int maxHeaderCount,int maxLineLen,LineParser parser) throws HttpException, IOException {
  if (inbuffer == null) {
    throw new IllegalArgumentException("Session input buffer may not be null");
  }
  if (parser == null)   parser=BasicLineParser.DEFAULT;
  ArrayList headerLines=new ArrayList();
  CharArrayBuffer current=null;
  CharArrayBuffer previous=null;
  for (; ; ) {
    if (current == null) {
      current=new CharArrayBuffer(64);
    }
 else {
      current.clear();
    }
    int l=inbuffer.readLine(current);
    if (l == -1 || current.length() < 1) {
      break;
    }
    if ((current.charAt(0) == ' ' || current.charAt(0) == '\t') && previous != null) {
      int i=0;
      while (i < current.length()) {
        char ch=current.charAt(i);
        if (ch != ' ' && ch != '\t') {
          break;
        }
        i++;
      }
      if (maxLineLen > 0 && previous.length() + 1 + current.length() - i > maxLineLen) {
        throw new IOException("Maximum line length limit exceeded");
      }
      previous.append(' ');
      previous.append(current,i,current.length() - i);
    }
 else {
      headerLines.add(current);
      previous=current;
      current=null;
    }
    if (maxHeaderCount > 0 && headerLines.size() >= maxHeaderCount) {
      throw new IOException("Maximum header count exceeded");
    }
  }
  Header[] headers=new Header[headerLines.size()];
  for (int i=0; i < headerLines.size(); i++) {
    CharArrayBuffer buffer=(CharArrayBuffer)headerLines.get(i);
    try {
      headers[i]=parser.parseHeader(buffer);
    }
 catch (    ParseException ex) {
      throw new ProtocolException(ex.getMessage());
    }
  }
  return headers;
}

@Override public boolean isFactoryForType(Object type){
  return supportedTypes.contains(type) || super.isFactoryForType(type);
}

public void readContent(byte[] dst,int offset,int length){
  System.arraycopy(content,0,dst,offset,length);
}

public static void putObjectField(Object obj,long fieldOff,Object val){
  UNSAFE.putObject(obj,fieldOff,val);
}

public void onConfigurationChanged(){
  int curFirst=pager.getCurrentScreen() * PAGE_SIZE;
  calPageSize();
  int newPage=curFirst / PAGE_SIZE;
  removeViewAt(1);
  afterPlatformListGot();
  pager.setCurrentScreen(newPage);
}

public List<FunctionDesc> listAllFunctions(){
  List<FunctionDesc> functions=new ArrayList<FunctionDesc>();
  for (  MeasureDesc m : measures) {
    functions.add(m.getFunction());
  }
  return functions;
}

public boolean hasExplicitField(String fieldName){
  if (fields.containsKey(fieldName)) {
    return true;
  }
  for (  DynamicField df : dynamicFields) {
    if (fieldName.equals(df.getRegex()))     return true;
  }
  return false;
}

private static boolean instanceOfAny(Object o,Collection<Class> classes){
  for (  Class c : classes) {
    if (c.isInstance(o))     return true;
  }
  return false;
}

public static IProposalComputer newSetterAttributeProposalComputer(ContentAssistRequest contentAssistRequest,IJavaProject javaProject){
  IDOMNode node=(IDOMNode)contentAssistRequest.getNode();
  if (node.getNodeType() != IDOMNode.ELEMENT_NODE) {
    return null;
  }
  String widgetTypeName=UiBinderXmlModelUtilities.computeQualifiedWidgetTypeName(node);
  if (widgetTypeName == null) {
    return null;
  }
  String matchString=contentAssistRequest.getMatchString();
  return new SetterAttributeProposalComputer(node,widgetTypeName,javaProject,matchString,contentAssistRequest.getReplacementBeginPosition(),matchString.length());
}

public void omitAll(){
  if (writeChunk != null)   bytesWritten+=writeChunk.position();
  bytesRead=bytesWritten;
  list.clear();
  writeChunk=null;
  readChunk=null;
}

Job loadPreview(FutureCallback<Pair<OmniBuildEnvironment,OmniGradleBuild>> resultHandler,List<ProgressListener> listeners);

private void refresh(ILaunchConfiguration configuration){
  setLaunchConfiguration(configuration);
  try {
    fModel=createClasspathModel(configuration);
  }
 catch (  Exception e) {
    message=e.getMessage();
    setErrorMessage(e.getMessage());
  }
  fClasspathViewer.setLaunchConfiguration(configuration);
  fClasspathViewer.setInput(fModel);
  setDirty(false);
}

public void computePackageFragmentRoots(IClasspathEntry[] resolvedClasspath,ObjectVector accumulatedRoots,HashSet rootIDs,IClasspathEntry referringEntry,boolean retrieveExportedRoots,Map rootToResolvedEntries) throws JavaModelException {
  if (referringEntry == null) {
    rootIDs.add(rootID());
  }
  for (int i=0, length=resolvedClasspath.length; i < length; i++) {
    computePackageFragmentRoots(resolvedClasspath[i],accumulatedRoots,rootIDs,referringEntry,retrieveExportedRoots,rootToResolvedEntries);
  }
}

private void init(){
  setTitle("New SOM Group");
  somPanel=new SOMPropertiesPanel(networkPanel,SOMPropsPanelType.CREATE_GROUP);
  tabLogic.add(somPanel);
  layoutPanel=new MainLayoutPanel(false,this);
  layoutPanel.setCurrentLayout(SOMGroup.DEFAULT_LAYOUT);
  tabLayout.add(layoutPanel);
  tabbedPane.addTab("Logic",tabLogic);
  tabbedPane.addTab("Layout",layoutPanel);
  setContentPane(tabbedPane);
  Action helpAction=new ShowHelpAction(somPanel.getHelpPath());
  addButton(new JButton(helpAction));
}

private String diff_linesToCharsMunge(String text,List<String> lineArray,Map<String,Integer> lineHash){
  int lineStart=0;
  int lineEnd=-1;
  String line;
  StringBuilder chars=new StringBuilder();
  while (lineEnd < text.length() - 1) {
    lineEnd=text.indexOf('\n',lineStart);
    if (lineEnd == -1) {
      lineEnd=text.length() - 1;
    }
    line=text.substring(lineStart,lineEnd + 1);
    lineStart=lineEnd + 1;
    if (lineHash.containsKey(line)) {
      chars.append(String.valueOf((char)(int)lineHash.get(line)));
    }
 else {
      lineArray.add(line);
      lineHash.put(line,lineArray.size() - 1);
      chars.append(String.valueOf((char)(lineArray.size() - 1)));
    }
  }
  return chars.toString();
}

public void remove(Video video){
  videoList.remove(video);
  notifyDataSetChanged();
}

public boolean canInvert(){
  return true;
}

public void addAllSearchables(ArrayList<? extends SearchResult> searchable){
  searchables.addAll(searchable);
}

public static String toString(final Iterable<?> iterable){
  if (iterable instanceof Collection) {
    return iterable.toString();
  }
 else {
    final StringBuilder builder=new StringBuilder();
    boolean firstValue=true;
    builder.append('[');
    for (    final Object value : iterable) {
      if (!firstValue) {
        builder.append(", ");
      }
      builder.append(value);
      firstValue=false;
    }
    builder.append(']');
    return builder.toString();
  }
}

public static int parseInt(String text){
  return parseInt(text,0);
}

@Override public void endDocument(Augmentations augs) throws XNIException {
  try {
    if (fDocumentHandler != null) {
      fDocumentHandler.endDocument();
    }
    if (fContentHandler != null) {
      fContentHandler.endDocument();
    }
  }
 catch (  SAXException e) {
    throw new XNIException(e);
  }
}

public String execCommand(String command){
  StringBuilder buf=new StringBuilder();
  sendWaitFor(command,defaultTimeout,prompts,buf);
  log.debug(buf.toString());
  return cleanOutput(buf);
}

private void ClientThreadRun() throws IOException {
  SocketChannel channel=null;
  try {
    log.debug("Attempting connection to {}:{} with {} pending messages",hostname,port,pending.size());
    channel=SocketChannel.open(new InetSocketAddress(hostname,port));
    channel.configureBlocking(false);
    ClientThreadMainLoop(channel);
  }
  finally {
    if (channel != null) {
      channel.close();
    }
    if (current != null) {
      pending.offerFirst(current);
      current=null;
    }
  }
}

@Override public PathImpl schemeWalk(String userPath,Map<String,Object> newAttributes,String uri,int offset){
  int length=uri.length();
  if (length < 2 + offset || uri.charAt(offset) != '/' || uri.charAt(1 + offset) != '/')   throw new RuntimeException("bad scheme");
  CharBuffer buf=new CharBuffer();
  int i=2 + offset;
  int ch=0;
  boolean isIpv6=false;
  for (; (i < length && (ch=uri.charAt(i)) != '/' && ch != '?' && !(ch == ':' && !isIpv6)); i++) {
    if (ch == '[')     isIpv6=true;
 else     if (ch == ']')     isIpv6=false;
    buf.append((char)ch);
  }
  String host=buf.toString();
  if (host.length() == 0)   throw new RuntimeException("bad host");
  int port=0;
  if (ch == ':') {
    for (i++; i < length && (ch=uri.charAt(i)) >= '0' && ch <= '9'; i++) {
      port=10 * port + uri.charAt(i) - '0';
    }
  }
  return create(this,userPath,newAttributes,host,port);
}

@RequestMapping(value="/SAML2/SSO") public void ssoDefaultTenantBindingError(Locale locale,HttpServletResponse response) throws IOException {
  logger.info("SSO binding error! The client locale is " + locale.toString() + ", DEFAULT tenant");
  sendError(locale,response,"Binding");
}

@After public void tearDown(){
  webClient.closeAllWindows();
}

@Override public void onCanStartVideoServiceChanged(boolean canStartVideoService){
  Log.i("SkypeCallFragment","onCanStartVideoServiceChanged " + String.valueOf(canStartVideoService));
  if (canStartVideoService == true) {
    mConversationHelper.startOutgoingVideo();
    mConversationHelper.startIncomingVideo();
  }
}

public Manifest(InputStream is) throws IOException {
  while (is.available() != 0) {
    MessageHeader m=new MessageHeader(is);
    entries.addElement(m);
  }
}

@Override public Object readReply(Class expectedClass) throws Throwable {
  int tag=read();
  if (tag == 'R')   return readObject(expectedClass);
 else   if (tag == 'F') {
    HashMap map=(HashMap)readObject(HashMap.class);
    throw prepareFault(map);
  }
 else {
    StringBuilder sb=new StringBuilder();
    sb.append((char)tag);
    try {
      int ch;
      while ((ch=read()) >= 0) {
        sb.append((char)ch);
      }
    }
 catch (    IOException e) {
      log.log(Level.FINE,e.toString(),e);
    }
    throw error("expected hessian reply at " + codeName(tag) + "\n"+ sb);
  }
}

public void removeClickingListener(OnWheelClickedListener listener){
  clickingListeners.remove(listener);
}

public static String unexpandLine(CharSequence self,int tabStop){
  StringBuilder builder=new StringBuilder(self.toString());
  int index=0;
  while (index + tabStop < builder.length()) {
    String piece=builder.substring(index,index + tabStop);
    int count=0;
    while ((count < tabStop) && (Character.isWhitespace(piece.charAt(tabStop - (count + 1)))))     count++;
    if (count > 0) {
      piece=piece.substring(0,tabStop - count) + '\t';
      builder.replace(index,index + tabStop,piece);
      index=index + tabStop - (count - 1);
    }
 else     index=index + tabStop;
  }
  return builder.toString();
}

private void uninstall(String rowType){
  if (extensionsByRowtype.containsKey(rowType)) {
    extensionsByRowtype.remove(rowType);
    File f=getExtensionFile(rowType);
    if (f.exists()) {
      FileUtils.deleteQuietly(f);
    }
 else {
      log.warn("Extension doesnt exist locally, cant delete " + rowType);
    }
  }
 else {
    log.warn("Extension not installed locally, cant delete " + rowType);
  }
}

public void addPropertyChangeListener(String propertyName,PropertyChangeListener in_pcl){
  pcSupport.addPropertyChangeListener(propertyName,in_pcl);
}

static final int tableSizeFor(int cap){
  int n=cap - 1;
  n|=n >>> 1;
  n|=n >>> 2;
  n|=n >>> 4;
  n|=n >>> 8;
  n|=n >>> 16;
  return (n < 0) ? 1 : (n >= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;
}

@Override public boolean connectionAllowed(String eventName){
  if (!eventName.equals("instance") && !eventName.equals("dataSet") && !eventName.equals("trainingSet")&& !eventName.equals("testSet")) {
    return false;
  }
  if (m_listenee != null) {
    return false;
  }
  return true;
}

protected void generateOMGraphic(OMGraphic g){
  if (g != null && g.getNeedToRegenerate()) {
    Projection proj=getProjection();
    if (proj != null) {
      g.generate(proj);
    }
 else     if (DEBUG) {
      Debug.output("OMDrawingTool: graphic needs generation: " + g.getNeedToRegenerate());
    }
  }
}

public void insertVariable(){
  ScriptStep variableStep=ScriptStepFactory.createVariable(getVariableKey(),getVariableValue());
  steps.add(getInsertIndex(),variableStep);
  variableKey="";
  variableValue="";
  reindexScriptSteps();
}

protected boolean[] canHandleZeroTraining(boolean nominalPredictor,boolean numericPredictor,boolean stringPredictor,boolean datePredictor,boolean relationalPredictor,boolean multiInstance,int classType){
  print("handle zero training instances");
  printAttributeSummary(nominalPredictor,numericPredictor,stringPredictor,datePredictor,relationalPredictor,multiInstance,classType);
  print("...");
  ArrayList<String> accepts=new ArrayList<String>();
  accepts.add("train");
  accepts.add("value");
  int numTrain=0, numTest=getNumInstances(), numClasses=2, missingLevel=0;
  boolean predictorMissing=false, classMissing=false;
  return runBasicTest(nominalPredictor,numericPredictor,stringPredictor,datePredictor,relationalPredictor,multiInstance,classType,missingLevel,predictorMissing,classMissing,numTrain,numTest,numClasses,accepts);
}

public static byte[] long2buff(long n){
  byte[] bs;
  bs=new byte[8];
  bs[0]=(byte)((n >> 56) & 0xFF);
  bs[1]=(byte)((n >> 48) & 0xFF);
  bs[2]=(byte)((n >> 40) & 0xFF);
  bs[3]=(byte)((n >> 32) & 0xFF);
  bs[4]=(byte)((n >> 24) & 0xFF);
  bs[5]=(byte)((n >> 16) & 0xFF);
  bs[6]=(byte)((n >> 8) & 0xFF);
  bs[7]=(byte)(n & 0xFF);
  return bs;
}

final boolean tryWriteLock(){
  Thread current=Thread.currentThread();
  int c=getState();
  if (c != 0) {
    int w=exclusiveCount(c);
    if (w == 0 || current != getExclusiveOwnerThread())     return false;
    if (w == MAX_COUNT)     throw new Error("Maximum lock count exceeded");
  }
  if (!compareAndSetState(c,c + 1))   return false;
  setExclusiveOwnerThread(current);
  return true;
}

public IoServiceListenerSupport(IoService service){
  if (service == null) {
    throw new IllegalArgumentException("service");
  }
  this.service=service;
}

private void cancelEventLeaseDo(long eventID,Uuid leaseID) throws UnknownLeaseException {
  long now=System.currentTimeMillis();
  EventReg reg=(EventReg)eventByID.get(new Long(eventID));
  if (reg == null || reg.leaseExpiration <= now)   throw new UnknownLeaseException();
  deleteEvent(reg);
  if (reg.leaseExpiration == minEventExpiration)   concurrentObj.waiterNotify(eventNotifier);
}

public static boolean isValidGDay(String value){
  String regex="---\\d\\d(Z|(\\+|-)\\d\\d:\\d\\d)?";
  if (value.matches(regex)) {
    return isValidCalendarValue(value);
  }
 else {
    return false;
  }
}

protected void paint3DRectLighting(Graphics2D g2,int x,int y,int width,int height){
  g2.setColor(Color.white);
  g2.drawLine(x + 1,y + 1,x + 1,y + height - 1);
  g2.drawLine(x + 1,y + 1,x + width - 1,y + 1);
  g2.setColor(Color.gray);
  g2.drawLine(x + 1,y + height - 1,x + width - 1,y + height - 1);
  g2.drawLine(x + width - 1,y + 1,x + width - 1,y + height - 1);
  g2.setColor(Color.darkGray);
  g2.drawLine(x,y + height,x + width,y + height);
  g2.drawLine(x + width,y,x + width,y + height);
}

private void parseAttributes(TypedArray a){
  barWidth=(int)a.getDimension(R.styleable.ProgressWheel_pwBarWidth,barWidth);
  rimWidth=(int)a.getDimension(R.styleable.ProgressWheel_pwRimWidth,rimWidth);
  spinSpeed=(int)a.getDimension(R.styleable.ProgressWheel_pwSpinSpeed,spinSpeed);
  barLength=(int)a.getDimension(R.styleable.ProgressWheel_pwBarLength,barLength);
  delayMillis=a.getInteger(R.styleable.ProgressWheel_pwDelayMillis,delayMillis);
  if (delayMillis < 0) {
    delayMillis=10;
  }
  if (a.hasValue(R.styleable.ProgressWheel_pwText)) {
    setText(a.getString(R.styleable.ProgressWheel_pwText));
  }
  barColor=a.getColor(R.styleable.ProgressWheel_pwBarColor,barColor);
  textColor=a.getColor(R.styleable.ProgressWheel_pwTextColor,textColor);
  rimColor=a.getColor(R.styleable.ProgressWheel_pwRimColor,rimColor);
  circleColor=a.getColor(R.styleable.ProgressWheel_pwCircleColor,circleColor);
  contourColor=a.getColor(R.styleable.ProgressWheel_pwContourColor,contourColor);
  textSize=(int)a.getDimension(R.styleable.ProgressWheel_pwTextSize,textSize);
  contourSize=a.getDimension(R.styleable.ProgressWheel_pwContourSize,contourSize);
  a.recycle();
}

@Deprecated public MediaFile(File f,MediaFileType type){
  this(f.toPath(),type);
}

public CommandLine clear(){
  line.clear();
  return this;
}

public static String grepMinusV(String val,String pattern){
  return grepInner(val,pattern,true);
}

public DropDownPopupButtonBuilder add(Action action){
  popupMenu.add(action);
  return this;
}

@SuppressLint("NewApi") private void attachImageFrommGallery(){
  Bundle conData=new Bundle();
  Intent intent=new Intent();
  if ((mSelectedGalleryItemsList.size() == 1) || (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN_MR2)) {
    intent.setData(mSelectedGalleryItemsList.get(0).mFileUri);
  }
 else   if (mSelectedGalleryItemsList.size() > 0) {
    ClipData.Item firstUri=new ClipData.Item(null,null,null,mSelectedGalleryItemsList.get(0).mFileUri);
    String[] mimeType={"*/*"};
    ClipData clipData=new ClipData("",mimeType,firstUri);
    for (int index=1; index < mSelectedGalleryItemsList.size(); index++) {
      ClipData.Item item=new ClipData.Item(null,null,null,mSelectedGalleryItemsList.get(index).mFileUri);
      clipData.addItem(item);
    }
    intent.setClipData(clipData);
  }
 else {
    Uri uriSavedFromLifeCycle=(Uri)mImagePreviewImageView.getTag();
    if (null != uriSavedFromLifeCycle) {
      intent.setData(uriSavedFromLifeCycle);
    }
  }
  intent.putExtras(conData);
  setResult(RESULT_OK,intent);
  VectorApp.setSavedCameraImagePreview(null);
  finish();
}

public static void mkdirs(File directory) throws CreateDirectoryException {
  if (directory.exists()) {
    if (directory.isDirectory()) {
      return;
    }
    if (!directory.delete()) {
      throw new CreateDirectoryException(directory.getAbsolutePath(),new FileDeleteException(directory.getAbsolutePath()));
    }
  }
  if (!directory.mkdirs() && !directory.isDirectory()) {
    throw new CreateDirectoryException(directory.getAbsolutePath());
  }
}

public boolean hasDependency(Capability c){
  if (doNotCheckCapabilities()) {
    return false;
  }
  return m_Dependencies.contains(c);
}

private static int prefixLen(String o1,String o2){
  final int l1=o1.length(), l2=o2.length(), l=l1 < l2 ? l1 : l2;
  int prefix=0;
  while (prefix < l && (o1.charAt(prefix) == o2.charAt(prefix))) {
    prefix++;
  }
  return prefix;
}

@Override public void writeExternal(ObjectOutput out) throws IOException {
  super.writeExternal(out);
  out.writeDouble(parentDistance);
}

static int shouldNativelyFocusHeavyweight(Component heavyweight,Component descendant,boolean temporary,boolean focusedWindowChangeAllowed,long time,CausedFocusEvent.Cause cause){
  if (log.isLoggable(PlatformLogger.Level.FINE)) {
    if (heavyweight == null) {
      log.fine("Assertion (heavyweight != null) failed");
    }
    if (time == 0) {
      log.fine("Assertion (time != 0) failed");
    }
  }
  if (descendant == null) {
    descendant=heavyweight;
  }
  KeyboardFocusManager manager=getCurrentKeyboardFocusManager(SunToolkit.targetToAppContext(descendant));
  KeyboardFocusManager thisManager=getCurrentKeyboardFocusManager();
  Component currentFocusOwner=thisManager.getGlobalFocusOwner();
  Component nativeFocusOwner=thisManager.getNativeFocusOwner();
  Window nativeFocusedWindow=thisManager.getNativeFocusedWindow();
  if (focusLog.isLoggable(PlatformLogger.Level.FINER)) {
    focusLog.finer("SNFH for {0} in {1}",String.valueOf(descendant),String.valueOf(heavyweight));
  }
  if (focusLog.isLoggable(PlatformLogger.Level.FINEST)) {
    focusLog.finest("0. Current focus owner {0}",String.valueOf(currentFocusOwner));
    focusLog.finest("0. Native focus owner {0}",String.valueOf(nativeFocusOwner));
    focusLog.finest("0. Native focused window {0}",String.valueOf(nativeFocusedWindow));
  }
synchronized (heavyweightRequests) {
    HeavyweightFocusRequest hwFocusRequest=getLastHWRequest();
    if (focusLog.isLoggable(PlatformLogger.Level.FINEST)) {
      focusLog.finest("Request {0}",String.valueOf(hwFocusRequest));
    }
    if (hwFocusRequest == null && heavyweight == nativeFocusOwner && heavyweight.getContainingWindow() == nativeFocusedWindow) {
      if (descendant == currentFocusOwner) {
        if (focusLog.isLoggable(PlatformLogger.Level.FINEST))         focusLog.finest("1. SNFH_FAILURE for {0}",String.valueOf(descendant));
        return SNFH_FAILURE;
      }
      manager.enqueueKeyEvents(time,descendant);
      hwFocusRequest=new HeavyweightFocusRequest(heavyweight,descendant,temporary,cause);
      heavyweightRequests.add(hwFocusRequest);
      if (currentFocusOwner != null) {
        FocusEvent currentFocusOwnerEvent=new CausedFocusEvent(currentFocusOwner,FocusEvent.FOCUS_LOST,temporary,descendant,cause);
        SunToolkit.postEvent(currentFocusOwner.appContext,currentFocusOwnerEvent);
      }
      FocusEvent newFocusOwnerEvent=new CausedFocusEvent(descendant,FocusEvent.FOCUS_GAINED,temporary,currentFocusOwner,cause);
      SunToolkit.postEvent(descendant.appContext,newFocusOwnerEvent);
      if (focusLog.isLoggable(PlatformLogger.Level.FINEST))       focusLog.finest("2. SNFH_HANDLED for {0}",String.valueOf(descendant));
      return SNFH_SUCCESS_HANDLED;
    }
 else     if (hwFocusRequest != null && hwFocusRequest.heavyweight == heavyweight) {
      if (hwFocusRequest.addLightweightRequest(descendant,temporary,cause)) {
        manager.enqueueKeyEvents(time,descendant);
      }
      if (focusLog.isLoggable(PlatformLogger.Level.FINEST)) {
        focusLog.finest("3. SNFH_HANDLED for lightweight" + descendant + " in "+ heavyweight);
      }
      return SNFH_SUCCESS_HANDLED;
    }
 else {
      if (!focusedWindowChangeAllowed) {
        if (hwFocusRequest == HeavyweightFocusRequest.CLEAR_GLOBAL_FOCUS_OWNER) {
          int size=heavyweightRequests.size();
          hwFocusRequest=(HeavyweightFocusRequest)((size >= 2) ? heavyweightRequests.get(size - 2) : null);
        }
        if (focusedWindowChanged(heavyweight,(hwFocusRequest != null) ? hwFocusRequest.heavyweight : nativeFocusedWindow)) {
          if (focusLog.isLoggable(PlatformLogger.Level.FINEST)) {
            focusLog.finest("4. SNFH_FAILURE for " + descendant);
          }
          return SNFH_FAILURE;
        }
      }
      manager.enqueueKeyEvents(time,descendant);
      heavyweightRequests.add(new HeavyweightFocusRequest(heavyweight,descendant,temporary,cause));
      if (focusLog.isLoggable(PlatformLogger.Level.FINEST)) {
        focusLog.finest("5. SNFH_PROCEED for " + descendant);
      }
      return SNFH_SUCCESS_PROCEED;
    }
  }
}

public NamedThreadFactory(final String poolID){
  id=poolID;
}

public void moveLocationUp(RouteLocation rl){
  int sequenceId=rl.getSequenceId();
  if (sequenceId - 1 <= 0) {
    rl.setSequenceId(_sequenceNum + 1);
    resequenceIds();
  }
 else {
    RouteLocation replaceRl=getItemBySequenceId(sequenceId - 1);
    if (replaceRl != null) {
      replaceRl.setSequenceId(sequenceId);
      rl.setSequenceId(sequenceId - 1);
    }
 else {
      resequenceIds();
    }
  }
  setDirtyAndFirePropertyChange(LISTCHANGE_CHANGED_PROPERTY,null,Integer.toString(sequenceId));
}

protected Attribute generateAttribute(int index,int attType,String namePrefix) throws Exception {
  Attribute result;
  String name;
  int valIndex;
  int nomCount;
  String prefix;
  result=null;
  if (index == CLASS_IS_LAST) {
    valIndex=0;
    name="Class";
    prefix="class";
    nomCount=getNumClasses();
  }
 else {
    valIndex=index;
    nomCount=getNumNominalValues();
    prefix="att" + (valIndex + 1) + "val";
switch (attType) {
case Attribute.NOMINAL:
      name="Nominal" + (valIndex + 1);
    break;
case Attribute.NUMERIC:
  name="Numeric" + (valIndex + 1);
break;
case Attribute.STRING:
name="String" + (valIndex + 1);
break;
case Attribute.DATE:
name="Date" + (valIndex + 1);
break;
case Attribute.RELATIONAL:
name="Relational" + (valIndex + 1);
break;
default :
throw new IllegalArgumentException("Attribute type '" + attType + "' unknown!");
}
}
switch (attType) {
case Attribute.NOMINAL:
ArrayList<String> nomStrings=new ArrayList<String>(valIndex + 1);
for (int j=0; j < nomCount; j++) {
nomStrings.add(prefix + (j + 1));
}
result=new Attribute(namePrefix + name,nomStrings);
break;
case Attribute.NUMERIC:
result=new Attribute(namePrefix + name);
break;
case Attribute.STRING:
result=new Attribute(namePrefix + name,(ArrayList<String>)null);
break;
case Attribute.DATE:
result=new Attribute(namePrefix + name,"yyyy-mm-dd");
break;
case Attribute.RELATIONAL:
Instances rel;
if (index == CLASS_IS_LAST) {
rel=getRelationalClassFormat();
}
 else {
rel=getRelationalFormat(index);
}
if (rel == null) {
TestInstances dataset=new TestInstances();
dataset.setNumNominal(getNumRelationalNominal());
dataset.setNumNominalValues(getNumRelationalNominalValues());
dataset.setNumNumeric(getNumRelationalNumeric());
dataset.setNumString(getNumRelationalString());
dataset.setNumDate(getNumRelationalDate());
dataset.setNumInstances(0);
dataset.setClassType(Attribute.NOMINAL);
rel=new Instances(dataset.generate());
if (!getNoClass()) {
int clsIndex=rel.classIndex();
rel.setClassIndex(-1);
rel.deleteAttributeAt(clsIndex);
}
}
result=new Attribute(namePrefix + name,rel);
break;
default :
throw new IllegalArgumentException("Attribute type '" + attType + "' unknown!");
}
return result;
}

public static String printCanopyAssignments(Instances dataPoints,List<long[]> canopyAssignments){
  StringBuilder temp=new StringBuilder();
  for (int i=0; i < dataPoints.size(); i++) {
    temp.append("Cluster " + i + ": ");
    temp.append(dataPoints.instance(i));
    if (canopyAssignments != null && canopyAssignments.size() == dataPoints.size()) {
      long[] assignments=canopyAssignments.get(i);
      temp.append(printSingleAssignment(assignments));
    }
    temp.append("\n");
  }
  return temp.toString();
}

public static void registerDefaultPrefixes() throws XMLSecurityException {
  setDefaultPrefix("http://www.w3.org/2000/09/xmldsig#","ds");
  setDefaultPrefix("http://www.w3.org/2001/04/xmlenc#","xenc");
  setDefaultPrefix("http://www.w3.org/2009/xmlenc11#","xenc11");
  setDefaultPrefix("http://www.xmlsecurity.org/experimental#","experimental");
  setDefaultPrefix("http://www.w3.org/2002/04/xmldsig-filter2","dsig-xpath-old");
  setDefaultPrefix("http://www.w3.org/2002/06/xmldsig-filter2","dsig-xpath");
  setDefaultPrefix("http://www.w3.org/2001/10/xml-exc-c14n#","ec");
  setDefaultPrefix("http://www.nue.et-inf.uni-siegen.de/~geuer-pollmann/#xpathFilter","xx");
}

protected void initBPOrderDetails(int C_BPartner_ID,boolean forInvoice){
  log.config("C_BPartner_ID=" + C_BPartner_ID);
  KeyNamePair pp=new KeyNamePair(0,"");
  orderField.removeActionListener(this);
  orderField.removeAllItems();
  orderField.addItem(pp);
  ArrayList<KeyNamePair> list=loadOrderData(C_BPartner_ID,forInvoice,false);
  for (  KeyNamePair knp : list)   orderField.addItem(knp);
  orderField.setSelectedIndex(0);
  orderField.addActionListener(this);
  dialog.pack();
  initBPDetails(C_BPartner_ID);
}

private void writeToc(ByteBuffer dataFileBuffer,TocType tocType,int entryCount,int firstEntryOffset){
  dataFileBuffer.putInt(tocType.identifier);
  dataFileBuffer.putInt(entryCount);
  dataFileBuffer.putLong(firstEntryOffset);
}

public void startPart(String contentType,String[] headers) throws IOException {
  writeCurrentBoundary();
  if (contentType != null) {
    writeString(MimeUtils.HEADER_CONTENT_TYPE + ": " + contentType);
    out.write(CRLF);
  }
  for (int i=0; headers != null && i < headers.length; i++) {
    writeString(headers[i]);
    out.write(CRLF);
  }
  out.write(CRLF);
}

public EmbeddedMetaService() throws IOException, ExecutionException {
  this(System.getenv(JOLIE_HOME_ENV));
}

public int showDialog(){
  m_Result=CANCEL_OPTION;
  int[] origSelected=m_List.getSelectedIndices();
  setVisible(true);
  if (m_Result == CANCEL_OPTION) {
    m_List.setSelectedIndices(origSelected);
  }
  return m_Result;
}

public final void addAlarmValues(final List<AlarmValueImpl> alarmValues){
  if (alarmValues != null) {
    for (    AlarmValueImpl alarmValue : alarmValues) {
      if (alarmValue != null) {
        addAlarmValue(alarmValue);
      }
    }
  }
}

public String product(Properties ctx,int WindowNo,GridTab mTab,GridField mField,Object value){
  Integer M_Product_ID=(Integer)value;
  if (M_Product_ID == null || M_Product_ID.intValue() == 0)   return "";
  if (Env.getContextAsInt(ctx,WindowNo,Env.TAB_INFO,"M_Product_ID") == M_Product_ID.intValue() && Env.getContextAsInt(ctx,WindowNo,Env.TAB_INFO,"M_AttributeSetInstance_ID") != 0)   mTab.setValue("M_AttributeSetInstance_ID",Env.getContextAsInt(ctx,WindowNo,Env.TAB_INFO,"M_AttributeSetInstance_ID"));
 else   mTab.setValue("M_AttributeSetInstance_ID",null);
  checkQtyAvailable(ctx,mTab,WindowNo,M_Product_ID,null);
  return "";
}

protected void processpacket(SimEvent ev){
  CloudSim.cancelAll(getId(),new PredicateType(CloudSimTags.Network_Event_UP));
  schedule(getId(),switching_delay,CloudSimTags.Network_Event_UP);
  pktlist.add((NetworkPacket)ev.getData());
}

public void addChild(Controller controller){
  if (children == null)   children=new ArrayList<Controller>();
  children.add(controller);
  controller.parent=this;
}

protected boolean checkTurnoutsInSection(Section s,int seqNum,Section nextSection,ActiveTrain at,LayoutEditor le,Section prevSection){
  return turnoutUtil(s,seqNum,nextSection,at,le,false,false,prevSection);
}

private Point2D calculateLabelAnchorPoint(ItemLabelAnchor anchor,Rectangle2D bar,PlotOrientation orientation){
  Point2D result=null;
  double offset=getItemLabelAnchorOffset();
  double x0=bar.getX() - offset;
  double x1=bar.getX();
  double x2=bar.getX() + offset;
  double x3=bar.getCenterX();
  double x4=bar.getMaxX() - offset;
  double x5=bar.getMaxX();
  double x6=bar.getMaxX() + offset;
  double y0=bar.getMaxY() + offset;
  double y1=bar.getMaxY();
  double y2=bar.getMaxY() - offset;
  double y3=bar.getCenterY();
  double y4=bar.getMinY() + offset;
  double y5=bar.getMinY();
  double y6=bar.getMinY() - offset;
  if (anchor == ItemLabelAnchor.CENTER) {
    result=new Point2D.Double(x3,y3);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE1) {
    result=new Point2D.Double(x4,y4);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE2) {
    result=new Point2D.Double(x4,y4);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE3) {
    result=new Point2D.Double(x4,y3);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE4) {
    result=new Point2D.Double(x4,y2);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE5) {
    result=new Point2D.Double(x4,y2);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE6) {
    result=new Point2D.Double(x3,y2);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE7) {
    result=new Point2D.Double(x2,y2);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE8) {
    result=new Point2D.Double(x2,y2);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE9) {
    result=new Point2D.Double(x2,y3);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE10) {
    result=new Point2D.Double(x2,y4);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE11) {
    result=new Point2D.Double(x2,y4);
  }
 else   if (anchor == ItemLabelAnchor.INSIDE12) {
    result=new Point2D.Double(x3,y4);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE1) {
    result=new Point2D.Double(x5,y6);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE2) {
    result=new Point2D.Double(x6,y5);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE3) {
    result=new Point2D.Double(x6,y3);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE4) {
    result=new Point2D.Double(x6,y1);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE5) {
    result=new Point2D.Double(x5,y0);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE6) {
    result=new Point2D.Double(x3,y0);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE7) {
    result=new Point2D.Double(x1,y0);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE8) {
    result=new Point2D.Double(x0,y1);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE9) {
    result=new Point2D.Double(x0,y3);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE10) {
    result=new Point2D.Double(x0,y5);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE11) {
    result=new Point2D.Double(x1,y6);
  }
 else   if (anchor == ItemLabelAnchor.OUTSIDE12) {
    result=new Point2D.Double(x3,y6);
  }
  return result;
}

public static String readFully(Reader reader) throws IOException {
  try {
    StringWriter writer=new StringWriter();
    char[] buffer=new char[1024];
    int count;
    while ((count=reader.read(buffer)) != -1) {
      writer.write(buffer,0,count);
    }
    return writer.toString();
  }
  finally {
    reader.close();
  }
}

protected String instanceToMatlab(Instance inst){
  StringBuffer result;
  int i;
  result=new StringBuffer();
  for (i=0; i < inst.numAttributes(); i++) {
    if (i > 0) {
      result.append((m_UseTabs ? "\t" : " "));
    }
    result.append(m_Format.format(inst.value(i)));
  }
  return result.toString();
}

private static double distance(Problem problem,Solution a,Solution b,double power){
  double distance=0.0;
  for (int i=0; i < problem.getNumberOfObjectives(); i++) {
    distance+=Math.pow(Math.abs(a.getObjective(i) - b.getObjective(i)),power);
  }
  return Math.pow(distance,1.0 / power);
}

private List<TokenType> extractStringLiteralDelimitingTokens(String[] tokens){
  List<TokenType> delimitingTokens=new ArrayList<TokenType>();
  for (  String token : tokens) {
    String cleanToken=cleanToken(token);
    boolean handled=false;
    if (alternateQuote == null) {
      String alternateQuoteFromToken=extractAlternateOpenQuote(cleanToken);
      if (alternateQuoteFromToken != null) {
        String closeQuote=computeAlternateCloseQuote(alternateQuoteFromToken);
        if (cleanToken.length() >= (alternateQuoteFromToken.length() + closeQuote.length()) && cleanToken.startsWith(alternateQuoteFromToken) && cleanToken.endsWith(closeQuote)) {
          continue;
        }
        alternateQuote=closeQuote;
        delimitingTokens.add(TokenType.ALTERNATE_QUOTE);
        continue;
      }
    }
    if ((alternateQuote != null) && cleanToken.endsWith(alternateQuote)) {
      alternateQuote=null;
      delimitingTokens.add(TokenType.ALTERNATE_QUOTE);
      continue;
    }
    if ((cleanToken.length() >= 2) && cleanToken.startsWith("'") && cleanToken.endsWith("'")) {
      continue;
    }
    if ((cleanToken.length() >= 4) && cleanToken.startsWith("/*") && cleanToken.endsWith("*/")) {
      continue;
    }
    if (isSingleLineComment(cleanToken)) {
      delimitingTokens.add(TokenType.SINGLE_LINE_COMMENT);
      handled=true;
    }
    if (cleanToken.startsWith("/*")) {
      delimitingTokens.add(TokenType.MULTI_LINE_COMMENT);
      handled=true;
    }
 else     if (cleanToken.startsWith("'")) {
      delimitingTokens.add(TokenType.QUOTE);
      handled=true;
    }
    if (!cleanToken.startsWith("/*") && cleanToken.endsWith("*/")) {
      delimitingTokens.add(TokenType.MULTI_LINE_COMMENT);
      handled=true;
    }
 else     if (!cleanToken.startsWith("'") && cleanToken.endsWith("'")) {
      delimitingTokens.add(TokenType.QUOTE);
      handled=true;
    }
    if (!handled) {
      delimitingTokens.add(TokenType.OTHER);
    }
  }
  return delimitingTokens;
}

private void printRainbowUser(User user,String userName,boolean action,SpecialColor type,String id){
  SimpleAttributeSet userStyle=new SimpleAttributeSet(styles.nick());
  userStyle.addAttribute(Attribute.IS_USER_MESSAGE,true);
  userStyle.addAttribute(Attribute.USER,user);
  if (id != null) {
    userStyle.addAttribute(Attribute.ID,id);
  }
  int length=userName.length();
  if (action) {
    print("* ",styles.nick());
  }
  for (int i=0; i < length; i++) {
    Color c;
    if (type == SpecialColor.RAINBOW) {
      c=makeRainbowColor(i,length);
    }
 else {
      c=makeGoldColor(i,length);
    }
    StyleConstants.setForeground(userStyle,c);
    print(userName.substring(i,i + 1),userStyle);
  }
}

public void notifyAddressThrottleFound(DccThrottle t){
  if (log.isDebugEnabled()) {
    log.debug("Throttle found");
  }
  mThrottle=t;
  setEnabled(true);
  mThrottle.addPropertyChangeListener(this);
  setFnButtons();
}

public static void matrixMultWDivMM(MatrixBlock mW,MatrixBlock mU,MatrixBlock mV,MatrixBlock mX,MatrixBlock ret,WDivMMType wt,int k) throws DMLRuntimeException {
  if (mW.isEmptyBlock(false) || (wt.isLeft() && mU.isEmptyBlock(false)) || (wt.isRight() && mV.isEmptyBlock(false))|| (wt.isBasic() && mW.isEmptyBlock(false))) {
    ret.examSparsity();
    return;
  }
  ret.sparse=wt.isBasic() ? mW.sparse : false;
  ret.allocateDenseOrSparseBlock();
  if (!ret.isThreadSafe()) {
    matrixMultWDivMM(mW,mU,mV,mX,ret,wt);
    return;
  }
  try {
    ExecutorService pool=Executors.newFixedThreadPool(k);
    ArrayList<MatrixMultWDivTask> tasks=new ArrayList<MatrixMultWDivTask>();
    if (wt.isLeft()) {
      int blklen=(int)(Math.ceil((double)mW.clen / k));
      for (int j=0; j < k & j * blklen < mW.clen; j++)       tasks.add(new MatrixMultWDivTask(mW,mU,mV,mX,ret,wt,0,mW.rlen,j * blklen,Math.min((j + 1) * blklen,mW.clen)));
    }
 else {
      int blklen=(int)(Math.ceil((double)mW.rlen / k));
      for (int i=0; i < k & i * blklen < mW.rlen; i++)       tasks.add(new MatrixMultWDivTask(mW,mU,mV,mX,ret,wt,i * blklen,Math.min((i + 1) * blklen,mW.rlen),0,mW.clen));
    }
    List<Future<Long>> taskret=pool.invokeAll(tasks);
    pool.shutdown();
    ret.nonZeros=0;
    for (    Future<Long> task : taskret)     ret.nonZeros+=task.get();
  }
 catch (  Exception e) {
    throw new DMLRuntimeException(e);
  }
  ret.examSparsity();
}

public boolean verify() throws MissingResourceFailureException, XMLSecurityException {
  return super.verifyReferences(false);
}

public OpenIdPrompt(String prompt){
  originalValue=prompt;
  if (isEmpty(prompt)) {
    prompts=Collections.emptySet();
  }
 else {
    prompts=stringToSet(prompt.toLowerCase());
  }
}

private static boolean calculateIsFailure(){
  int randomValue=random.nextInt(100) + 1;
  return randomValue <= ERROR_PCT;
}

private int checkUserLink(SpannableStringBuilder out,String in,int start){
  int pos=start + 3;
  StringBuilder temp=new StringBuilder();
  String targetString=in.substring(pos,Math.min(in.length(),pos + 20));
  for (int i=0; i < targetString.length(); i++) {
    char c=targetString.charAt(i);
    if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c >= '0' && c <= '9')|| c == '_') {
      temp.append(c);
    }
 else {
      break;
    }
  }
  String username=temp.toString();
  if (username.length() < 3 || username.equalsIgnoreCase("null")) {
    return -1;
  }
  out.append(username);
  return pos + username.length() - 1;
}

public void clear(){
  mArrayList.clear();
}

public void test_commonTest_01(){
  SSLContextSpiImpl ssl=new SSLContextSpiImpl();
  try {
    SSLSessionContext slsc=ssl.engineGetClientSessionContext();
    fail("RuntimeException wasn't thrown");
  }
 catch (  RuntimeException re) {
    String str=re.getMessage();
    if (!str.equals("Not initialiazed"))     fail("Incorrect exception message: " + str);
  }
catch (  Exception e) {
    fail("Incorrect exception " + e + " was thrown");
  }
  try {
    SSLSessionContext slsc=ssl.engineGetServerSessionContext();
    fail("RuntimeException wasn't thrown");
  }
 catch (  RuntimeException re) {
    String str=re.getMessage();
    if (!str.equals("Not initialiazed"))     fail("Incorrect exception message: " + str);
  }
catch (  Exception e) {
    fail("Incorrect exception " + e + " was thrown");
  }
  try {
    SSLServerSocketFactory sssf=ssl.engineGetServerSocketFactory();
    fail("RuntimeException wasn't thrown");
  }
 catch (  RuntimeException re) {
    String str=re.getMessage();
    if (!str.equals("Not initialiazed"))     fail("Incorrect exception message: " + str);
  }
catch (  Exception e) {
    fail("Incorrect exception " + e + " was thrown");
  }
  try {
    SSLSocketFactory ssf=ssl.engineGetSocketFactory();
    fail("RuntimeException wasn't thrown");
  }
 catch (  RuntimeException re) {
    String str=re.getMessage();
    if (!str.equals("Not initialiazed"))     fail("Incorrect exception message: " + str);
  }
catch (  Exception e) {
    fail("Incorrect exception " + e + " was thrown");
  }
}

public static ClassDescriptor createClassDescriptorFromResourceName(String resourceName){
  if (!isClassResource(resourceName)) {
    throw new IllegalArgumentException("Resource " + resourceName + " is not a class");
  }
  return createClassDescriptor(resourceName.substring(0,resourceName.length() - 6));
}

public static void show(final Window parent,final String content){
  final CLogFileDialog dialog=new CLogFileDialog(parent,content);
  GuiHelper.centerChildToParent(parent,dialog,true);
  dialog.setVisible(true);
}

protected void endNode(Node node) throws org.xml.sax.SAXException {
switch (node.getNodeType()) {
case Node.DOCUMENT_NODE:
    break;
case Node.DOCUMENT_TYPE_NODE:
  serializeDocType((DocumentType)node,false);
break;
case Node.ELEMENT_NODE:
serializeElement((Element)node,false);
break;
case Node.CDATA_SECTION_NODE:
break;
case Node.ENTITY_REFERENCE_NODE:
serializeEntityReference((EntityReference)node,false);
break;
default :
}
}

public CreateWindowClause addView(String namespace,String name){
  views.add(View.create(namespace,name));
  return this;
}

public int size(){
  return set.size();
}

public void associateConnection(Object connection) throws ResourceException {
  if (!connectionSharing)   disassociateConnections();
  try {
    final FBConnection abstractConnection=(FBConnection)connection;
    abstractConnection.setManagedConnection(this);
    connectionHandles.add(abstractConnection);
  }
 catch (  ClassCastException cce) {
    throw new FBResourceException("invalid connection supplied to associateConnection.",cce);
  }
}

ChronoLocalDateTime<D> toLocalDateTime();

private void save(){
  try {
    FileUtils.write(new File(jarName + "-Scan.html"),text);
  }
 catch (  IOException e) {
    JOptionPane.showMessageDialog(null,e.getMessage(),"Error saving file!",JOptionPane.ERROR_MESSAGE);
  }
}

private static void assertNotEmpty(String message,String string){
  assertNotNull(message,string);
  assertFalse(message,string.equals(""));
}

private void generateEntityConfig(ManagedEntityConfig config) throws SAXException {
  String host=config.getHost();
  if (host != null) {
    handler.startElement("",HOST,HOST,EMPTY);
    handler.characters(host.toCharArray(),0,host.length());
    handler.endElement("",HOST,HOST);
  }
  String remoteCommand=config.getRemoteCommand();
  if (remoteCommand != null) {
    handler.startElement("",REMOTE_COMMAND,REMOTE_COMMAND,EMPTY);
    handler.characters(remoteCommand.toCharArray(),0,remoteCommand.length());
    handler.endElement("",REMOTE_COMMAND,REMOTE_COMMAND);
  }
  String workingDirectory=config.getWorkingDirectory();
  if (workingDirectory != null) {
    handler.startElement("",WORKING_DIRECTORY,WORKING_DIRECTORY,EMPTY);
    handler.characters(workingDirectory.toCharArray(),0,workingDirectory.length());
    handler.endElement("",WORKING_DIRECTORY,WORKING_DIRECTORY);
  }
  String productDirectory=config.getProductDirectory();
  if (productDirectory != null) {
    handler.startElement("",PRODUCT_DIRECTORY,PRODUCT_DIRECTORY,EMPTY);
    handler.characters(productDirectory.toCharArray(),0,productDirectory.length());
    handler.endElement("",PRODUCT_DIRECTORY,PRODUCT_DIRECTORY);
  }
}

public void hiliteLabel(Node v,NodeData data){
  NodeView nv=viewer.getNV(v);
  if (nv.getLocation() == null)   return;
  Point apt=nv.getLabelPosition(viewer.trans);
  if (apt == null)   return;
  gc.setColor(ProgramProperties.SELECTION_COLOR_ADDITIONAL_TEXT);
  if (!nv.getLabelVisible() && nv.getLabel() != null) {
    gc.setFont(nv.getFont());
    gc.drawString(nv.getLabel(),apt.x,apt.y);
  }
  if (data.getSummarized().length > 1 || (data.getSummarized().length == 1 && data.getSummarized()[0] > 0)) {
    gc.setFont(selectionFont);
    StringBuilder buf=new StringBuilder();
    if (data.getCountAssigned() > 0) {
      buf.append("Ass=");
      for (      int value : data.getAssigned()) {
        buf.append(String.format("%,d  ",value));
      }
      gc.drawString(buf.toString(),apt.x,apt.y+=14);
    }
    buf=new StringBuilder();
    buf.append("Sum=");
    for (    int value : data.getSummarized()) {
      buf.append(String.format("%,d  ",value));
    }
    gc.drawString(buf.toString(),apt.x,apt.y+=12);
  }
  if (data.getUpPValue() != -1) {
    gc.drawString("UPv=" + (float)data.getUpPValue(),apt.x,apt.y+=12);
  }
  if (data.getDownPValue() != -1) {
    gc.drawString("DPv=" + (float)data.getDownPValue(),apt.x,apt.y+=12);
  }
}

public void appendLine(CharSequence line){
  lines.add(line);
}

public void flagActionItems(){
  if (!mIsActionItemsStale) {
    return;
  }
  boolean flagged=false;
  for (  WeakReference<MenuPresenter> ref : mPresenters) {
    final MenuPresenter presenter=ref.get();
    if (presenter == null) {
      mPresenters.remove(ref);
    }
 else {
      flagged|=presenter.flagActionItems();
    }
  }
  if (flagged) {
    mActionItems.clear();
    mNonActionItems.clear();
    ArrayList<MenuItemImpl> visibleItems=getVisibleItems();
    final int itemsSize=visibleItems.size();
    for (int i=0; i < itemsSize; i++) {
      MenuItemImpl item=visibleItems.get(i);
      if (item.isActionButton()) {
        mActionItems.add(item);
      }
 else {
        mNonActionItems.add(item);
      }
    }
  }
 else {
    mActionItems.clear();
    mNonActionItems.clear();
    mNonActionItems.addAll(getVisibleItems());
  }
  mIsActionItemsStale=false;
}

public static void registerNewAggregationFunction(String name,Class<? extends AggregationFunction> clazz,AggregationFunctionMetaDataProvider metaDataProvider){
  AGGREATION_FUNCTIONS.put(name,clazz);
  AGGREGATION_FUNCTIONS_META_DATA_PROVIDER.put(name,metaDataProvider);
}

private byte[] buildFileAuthTag() throws FileEncryptionException {
  SecretKey key=backEncRandomAccessFile.shareKey;
  if (key == null || key.getEncoded().length == 0) {
    throw new FileEncryptionException("Invalid file encryption key in encrypting random access file!");
  }
 else {
    authTagHMac.reset();
    KeyParameter keyParameter=new KeyParameter(key.getEncoded());
    authTagHMac.init(keyParameter);
  }
  if (atagList.size() == 0) {
    throw new FileEncryptionException("No chunk authentication tags have been set yet!");
  }
 else {
    for (int i=0; i < atagList.size(); i++) {
      byte[] curChunkTag=atagList.get(i);
      if ((curChunkTag == null) || (curChunkTag.length != CHUNK_AUTH_TAG_LENGTH)) {
        throw new FileEncryptionException("Invalid chunk authentication tag in auth tag table at offset: " + i);
      }
 else {
        authTagHMac.update(curChunkTag,0,CHUNK_AUTH_TAG_LENGTH);
      }
    }
    byte[] tmp=new byte[AUTH_TAG_SIZE];
    authTagHMac.doFinal(tmp,0);
    return tmp;
  }
}

public int hashCode(){
  return name.hashCode();
}

public void updateData(MapElement mapElement){
  nameLabel.setText(mapElement.getName());
  pinnedCheckBox.setSelected(mapElement.isPinned());
}

public int doFinal(byte[] out,int outOff) throws DataLengthException, IllegalStateException, InvalidCipherTextException {
  try {
    int resultLen=0;
    if (outOff + bufOff > out.length) {
      throw new OutputLengthException("output buffer too short for doFinal()");
    }
    if (bufOff != 0) {
      if (!partialBlockOkay) {
        throw new DataLengthException("data not block size aligned");
      }
      cipher.processBlock(buf,0,buf,0);
      resultLen=bufOff;
      bufOff=0;
      System.arraycopy(buf,0,out,outOff,resultLen);
    }
    return resultLen;
  }
  finally {
    reset();
  }
}

public PriorityQueue(int initialCapacity,Comparator<? super E> comparator){
  if (initialCapacity < 1) {
    throw new IllegalArgumentException();
  }
  elements=newElementArray(initialCapacity);
  this.comparator=comparator;
}

public void readData(DataInput input) throws IOException {
  readReference=input.readUnsignedShort();
  readCount=input.readUnsignedShort();
  writeReference=input.readUnsignedShort();
  writeCount=input.readUnsignedShort();
  int byteCount=input.readUnsignedByte();
  if (nonWordDataHandler == null) {
    byte buffer[]=new byte[byteCount];
    input.readFully(buffer,0,byteCount);
    int offset=0;
    registers=new Register[writeCount];
    for (int register=0; register < writeCount; register++) {
      registers[register]=new SimpleRegister(buffer[offset],buffer[offset + 1]);
      offset+=2;
    }
  }
 else {
    nonWordDataHandler.readData(input,writeReference,writeCount);
  }
}

private boolean isTouchInsideList(MotionEvent ev){
  float x=ev.getX() - mListView.getX();
  float y=ev.getY() - mListView.getY();
  if (x < 0 || x > mListView.getWidth() || y < 0 || y > mListView.getHeight()) {
    return false;
  }
  return true;
}

public static final void centerChildToParent(final Component parent,final Component child,final boolean bStayOnScreen){
  int x=(parent.getX() + (parent.getWidth() / 2)) - (child.getWidth() / 2);
  int y=(parent.getY() + (parent.getHeight() / 2)) - (child.getHeight() / 2);
  if (bStayOnScreen) {
    final Toolkit tk=Toolkit.getDefaultToolkit();
    final Dimension ss=new Dimension(tk.getScreenSize());
    if ((x + child.getWidth()) > ss.getWidth()) {
      x=(int)(ss.getWidth() - child.getWidth());
    }
    if ((y + child.getHeight()) > ss.getHeight()) {
      y=(int)(ss.getHeight() - child.getHeight());
    }
    if (x < 0) {
      x=0;
    }
    if (y < 0) {
      y=0;
    }
  }
  child.setLocation(x,y);
}

public boolean isConnecting(){
  return start != null && preview != null && preview.isVisible();
}

public ProtectedProperties(Properties props){
  Enumeration<?> propEnum=props.propertyNames();
  while (propEnum.hasMoreElements()) {
    String propName=(String)propEnum.nextElement();
    String propValue=props.getProperty(propName);
    super.setProperty(propName,propValue);
  }
  closed=true;
}

public boolean isEmpty(){
  return itemList.isEmpty();
}

private static void fixNumericByteOrder(byte[] bytes){
  for (int i=0; i < bytes.length; i+=4) {
    ByteUtil.swap4Bytes(bytes,i);
  }
}

public synchronized boolean hasScope(){
  return !scopeStack.isEmpty();
}

private boolean checkAttributeChanged(String existing,String current){
  if (existing == null && current == null) {
    return false;
  }
  if ((existing == null) ^ (current == null)) {
    return true;
  }
  return (!existing.equalsIgnoreCase(current));
}

public boolean isEmpty(){
  return count() == 0;
}

@Override public void addTableModelListener(TableModelListener l){
  m_Listeners.add(l);
}

private static URL[] pathToURLs(String path) throws MalformedURLException {
synchronized (pathToURLsCache) {
    Object[] v=pathToURLsCache.get(path);
    if (v != null) {
      return ((URL[])v[0]);
    }
  }
  StringTokenizer st=new StringTokenizer(path);
  URL[] urls=new URL[st.countTokens()];
  for (int i=0; st.hasMoreTokens(); i++) {
    urls[i]=new URL(st.nextToken());
  }
synchronized (pathToURLsCache) {
    pathToURLsCache.put(path,new Object[]{urls,new SoftReference<String>(path)});
  }
  return urls;
}

boolean performWork(TaskManager.Task who,Object param) throws JobException {
  Integer tmp=null;
synchronized (tasks) {
    tmp=(Integer)tasks.get(who);
  }
  if (tmp == null)   throw new UnknownTaskException();
  int rank=tmp.intValue();
synchronized (attempts) {
    attempts[rank]++;
  }
  Object result=doWork(who,param);
  if (result == null)   return false;
  try {
    reportDone(who,result);
  }
 catch (  UnknownTaskException e) {
  }
catch (  PartialResultException e) {
  }
catch (  JobException e) {
  }
  return true;
}

public List<Order> loadAllDeepFromCursor(Cursor cursor){
  int count=cursor.getCount();
  List<Order> list=new ArrayList<Order>(count);
  if (cursor.moveToFirst()) {
    if (identityScope != null) {
      identityScope.lock();
      identityScope.reserveRoom(count);
    }
    try {
      do {
        list.add(loadCurrentDeep(cursor,false));
      }
 while (cursor.moveToNext());
    }
  finally {
      if (identityScope != null) {
        identityScope.unlock();
      }
    }
  }
  return list;
}

public static boolean isValidAuthType(String authType){
  log.debug("isValidAuthType");
  if (authType != null) {
    if (!authType.isEmpty()) {
      if (authType.equalsIgnoreCase(LdapAuthBase.LDAP_AUTH_TYPE_SIMPLE))       return true;
      if (authType.equalsIgnoreCase(LdapAuthBase.LDAP_AUTH_TYPE_NONE))       return true;
    }
  }
  return false;
}

public int size(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    return count;
  }
  finally {
    lock.unlock();
  }
}

@After public void tearDown(){
  webClient.closeAllWindows();
}

public AnnotationMember(String name,Object val,Class type,Method m){
  this(name,val);
  definingMethod=m;
  if (type == int.class) {
    elementType=Integer.class;
  }
 else   if (type == boolean.class) {
    elementType=Boolean.class;
  }
 else   if (type == char.class) {
    elementType=Character.class;
  }
 else   if (type == float.class) {
    elementType=Float.class;
  }
 else   if (type == double.class) {
    elementType=Double.class;
  }
 else   if (type == long.class) {
    elementType=Long.class;
  }
 else   if (type == short.class) {
    elementType=Short.class;
  }
 else   if (type == byte.class) {
    elementType=Byte.class;
  }
 else {
    elementType=type;
  }
}

public void unregisterPreferenceChangeListener(PreferenceChangeListener preferenceChangeListener){
  mListeners.remove(preferenceChangeListener);
}

public static String join(String separator,List<?> elements){
  if (elements == null || elements.size() == 0) {
    return "";
  }
  StringBuffer sb=new StringBuffer(elements.size() * 3);
  int i=0;
  for (  Object elem : elements) {
    if (i++ > 0) {
      sb.append(separator);
    }
    sb.append(format(elem));
  }
  return sb.toString();
}

public boolean removeTrace(final Trace trace){
  boolean result=traceList.remove(trace);
  if (result) {
    remove(trace);
    revalidate();
  }
  return result;
}

private void updateRandomValues(){
  for (int i=0; i < mBlockNumber; i++) {
    for (int j=0; j < DEFAULT_NUMBER_RANDOM_VALUES; j++) {
      mBlockValues[i][j]=mRandom.nextFloat();
      if (mBlockValues[i][j] < 0.1) {
        mBlockValues[i][j]=0.1f;
      }
    }
  }
}

protected ASN1Set(ASN1Encodable obj){
  set.addElement(obj);
}

static private String BYTE_Min_Minus(){
  long tempValue=Byte.MIN_VALUE - 1;
  return String.valueOf(tempValue);
}

public DoubleAccumulator(DoubleBinaryOperator accumulatorFunction,double identity){
  this.function=accumulatorFunction;
  base=this.identity=Double.doubleToRawLongBits(identity);
}

public static void bitmapToMat(Bitmap bmp,Mat mat,boolean unPremultiplyAlpha){
  if (bmp == null)   throw new java.lang.IllegalArgumentException("bmp == null");
  if (mat == null)   throw new java.lang.IllegalArgumentException("mat == null");
  nBitmapToMat2(bmp,mat.nativeObj,unPremultiplyAlpha);
}

public static void sendMail(Context mContext,String mailID){
  Uri uri=Uri.parse("mailto:" + mailID);
  Intent intent=new Intent(Intent.ACTION_SENDTO,uri);
  mContext.startActivity(intent);
}

public void push(@NotNull StatusNotification notification){
  stack.push(notification);
}

public void onPaintActions(ViewTransform transform,Graphics2D g){
  if (!mIsSelected) {
    return;
  }
  if (mColorSet == null) {
    return;
  }
  if (mWidget.getVisibility() == ConstraintWidget.GONE) {
    return;
  }
  if (!mShowResizeHandles) {
    return;
  }
  if (!mShowActions) {
    return;
  }
  if (mWidgetActions.size() == 0) {
    return;
  }
  int l=transform.getSwingFX(mWidget.getDrawX());
  int t=transform.getSwingFY(mWidget.getDrawY());
  int h=transform.getSwingDimension(mWidget.getHeight());
  int x=l;
  int y=t + h + ConnectionDraw.CONNECTION_ANCHOR_SIZE+ 4;
  g.setColor(mColorSet.getSelectedFrames());
  for (  WidgetAction action : mWidgetActions) {
    action.update();
    if (!action.isVisible()) {
      continue;
    }
    action.onPaint(transform,g,x,y);
    x+=ACTION_SIZE + ConnectionDraw.CONNECTION_ANCHOR_SIZE;
  }
}

@Override public Lookup createGlobalContext(){
  if (proxyLookup == null) {
    logger.config("Creating a proxy for Utilities.actionsGlobalContext()");
    projectLookup=new AbstractLookup(content);
    proxyLookup=new ProxyLookup(globalContextLookup,projectLookup);
  }
  return proxyLookup;
}

public void write(byte[] bytes) throws IOException {
  flushBits();
  if (bytes != null && bytes.length > 0) {
    out.write(bytes);
    bytesWritten+=bytes.length;
  }
}

public static MutableList<String> chunk(String string,int size){
  if (size <= 0) {
    throw new IllegalArgumentException("Size for groups must be positive but was: " + size);
  }
  int length=string.length();
  if (length == 0) {
    return FastList.newList();
  }
  MutableList<String> result=FastList.newList((length + size - 1) / size);
  int startOffset=0;
  while (startOffset < length) {
    result.add(string.substring(startOffset,Math.min(startOffset + size,length)));
    startOffset+=size;
  }
  return result;
}

public void removeIm(ImEntity im){
  ims.remove(im);
}

public LanguageSetting(Option opt){
  elem=null;
  name=opt.getLanguage();
  String[] suffixArray=opt.getSuffixes();
  StringBuffer strbuf=new StringBuffer();
  for (int i=0; i < suffixArray.length; i++) {
    strbuf.append(suffixArray[i]);
    if (i != suffixArray.length - 1)     strbuf.append(',');
  }
  this.suffixes=strbuf.toString();
  minMatchLen=opt.getMinimumMatchLength();
  clusterType=opt.getClustertype();
  readSubdirs=opt.isReadSubdirs();
  storeMatches=opt.getStoreMatches();
}

private double calcUtil4Performing(final double typDuration,final double actualDuration){
  return 10 * marginalUtilPerformingSec + marginalUtilPerformingSec * typDuration * Math.log(actualDuration / typDuration);
}

public void clearAllCache(){
  clearMemoryCache();
  clearStorageCache();
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(3);
  newVector.addElement(new Option("\tSets the attribute index\n" + "\t(default: last)","C",1,"-C <col>"));
  newVector.addElement(new Option("\tSets the label of the newly merged classes\n" + "\t(default: 'merged')","L",1,"-L <label>"));
  newVector.addElement(new Option("\tSets the merge range. 'first and 'last' are accepted as well.'\n" + "\tE.g.: first-5,7,9,20-last\n" + "\t(default: 1,2)","R",1,"-R <range>"));
  return newVector.elements();
}

public void addNotify(){
  super.addNotify();
  if (textArea != null) {
    l.install(textArea);
  }
  updateCellWidths();
  updateCellHeights();
}

@Description(summary="Build a snapshot H2 jar and upload to local Maven 2 repo.") public void mavenInstallLocal(){
  jarMVStore();
  String pom=new String(readFile(new File("src/installer/pom-mvstore-template.xml")));
  pom=replaceAll(pom,"@version@","1.0-SNAPSHOT");
  writeFile(new File("bin/pom.xml"),pom.getBytes());
  execScript("mvn",args("install:install-file","-Dversion=1.0-SNAPSHOT","-Dfile=bin/h2-mvstore" + getJarSuffix(),"-Dpackaging=jar","-DpomFile=bin/pom.xml","-DartifactId=h2-mvstore","-DgroupId=com.h2database"));
  jar();
  pom=new String(readFile(new File("src/installer/pom-template.xml")));
  pom=replaceAll(pom,"@version@","1.0-SNAPSHOT");
  writeFile(new File("bin/pom.xml"),pom.getBytes());
  execScript("mvn",args("install:install-file","-Dversion=1.0-SNAPSHOT","-Dfile=bin/h2" + getJarSuffix(),"-Dpackaging=jar","-DpomFile=bin/pom.xml","-DartifactId=h2","-DgroupId=com.h2database"));
}

public static boolean isDtoGetter(Method method){
  if (method.isAnnotationPresent(DelegateTo.class)) {
    return false;
  }
  if (method.getParameterTypes().length > 0) {
    return false;
  }
  String methodName=method.getName();
  return methodName.startsWith("get") || (methodName.startsWith("is") && ((method.getReturnType() == Boolean.class || method.getReturnType() == boolean.class)));
}

protected List<VideoDTO> extractVideosFromCursor(Cursor cursor,int offset,int limit){
  List<VideoDTO> videos=new ArrayList<>();
  int count=0;
  int begin=offset > 0 ? offset : 0;
  if (cursor.moveToPosition(begin)) {
    do {
      VideoDTO video=extractOneVideoFromCursor(cursor);
      videos.add(video);
      count++;
      if (limit > 0 && count > limit) {
        break;
      }
    }
 while (cursor.moveToNext());
  }
  cursor.close();
  return videos;
}

private static void computeNextCCWEdges(Node node,long label){
  DirectedEdgeStar deStar=node.getOutEdges();
  PolygonizeDirectedEdge firstOutDE=null;
  PolygonizeDirectedEdge prevInDE=null;
  List edges=deStar.getEdges();
  for (int i=edges.size() - 1; i >= 0; i--) {
    PolygonizeDirectedEdge de=(PolygonizeDirectedEdge)edges.get(i);
    PolygonizeDirectedEdge sym=(PolygonizeDirectedEdge)de.getSym();
    PolygonizeDirectedEdge outDE=null;
    if (de.getLabel() == label)     outDE=de;
    PolygonizeDirectedEdge inDE=null;
    if (sym.getLabel() == label)     inDE=sym;
    if (outDE == null && inDE == null)     continue;
    if (inDE != null) {
      prevInDE=inDE;
    }
    if (outDE != null) {
      if (prevInDE != null) {
        prevInDE.setNext(outDE);
        prevInDE=null;
      }
      if (firstOutDE == null)       firstOutDE=outDE;
    }
  }
  if (prevInDE != null) {
    Assert.isTrue(firstOutDE != null);
    prevInDE.setNext(firstOutDE);
  }
}

@Override public boolean equals(Object other){
  if (other instanceof IntArrayWrapper) {
    return Arrays.equals(data,((IntArrayWrapper)other).data);
  }
  return false;
}

public static DateTime toDateSimple(String str,TimeZone timeZone) throws PageException {
  DateTime dt=toDateSimple(str,CONVERTING_TYPE_OFFSET,true,timeZone,null);
  if (dt == null)   throw new ExpressionException("can't cast [" + str + "] to date value");
  return dt;
}

public boolean contains(Song s){
  return mSongs.contains(s);
}

private float clampMag(float value,float absMin,float absMax){
  final float absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

private boolean zzRefill() throws java.io.IOException {
  if (zzStartRead > 0) {
    zzEndRead+=zzFinalHighSurrogate;
    zzFinalHighSurrogate=0;
    System.arraycopy(zzBuffer,zzStartRead,zzBuffer,0,zzEndRead - zzStartRead);
    zzEndRead-=zzStartRead;
    zzCurrentPos-=zzStartRead;
    zzMarkedPos-=zzStartRead;
    zzStartRead=0;
  }
  if (zzCurrentPos >= zzBuffer.length - zzFinalHighSurrogate) {
    char newBuffer[]=new char[zzBuffer.length * 2];
    System.arraycopy(zzBuffer,0,newBuffer,0,zzBuffer.length);
    zzBuffer=newBuffer;
    zzEndRead+=zzFinalHighSurrogate;
    zzFinalHighSurrogate=0;
  }
  int requested=zzBuffer.length - zzEndRead;
  int numRead=zzReader.read(zzBuffer,zzEndRead,requested);
  if (numRead == 0) {
    throw new java.io.IOException("Reader returned 0 characters. See JFlex examples for workaround.");
  }
  if (numRead > 0) {
    zzEndRead+=numRead;
    if (numRead == requested) {
      if (Character.isHighSurrogate(zzBuffer[zzEndRead - 1])) {
        --zzEndRead;
        zzFinalHighSurrogate=1;
      }
    }
    return false;
  }
  return true;
}

public int addPadding(byte[] in,int inOff){
  byte code=(byte)(in.length - inOff);
  while (inOff < in.length - 1) {
    if (random == null) {
      in[inOff]=0;
    }
 else {
      in[inOff]=(byte)random.nextInt();
    }
    inOff++;
  }
  in[inOff]=code;
  return code;
}

public static Long makeLong(String s){
  if (WWUtil.isEmpty(s)) {
    return null;
  }
  try {
    return Long.valueOf(s);
  }
 catch (  NumberFormatException e) {
    return null;
  }
}

private void verifyBlockSnapshotMigration() throws Exception {
  log.info("Verifying BlockSnapshot migration.");
  Iterator<BlockSnapshot> blockSnapshotItr=_dbClient.queryIterativeObjects(BlockSnapshot.class,blockSnapshotURIs);
  List<BlockObject> blockObjects=new ArrayList<BlockObject>();
  while (blockSnapshotItr.hasNext()) {
    blockObjects.add(blockSnapshotItr.next());
  }
  verifyBlockObjects(blockObjects);
}

public static String edgeTypeToString(@Type int edgeType){
switch (edgeType) {
case FALL_THROUGH_EDGE:
    return "FALL_THROUGH";
case IFCMP_EDGE:
  return "IFCMP";
case SWITCH_EDGE:
return "SWITCH";
case SWITCH_DEFAULT_EDGE:
return "SWITCH_DEFAULT";
case JSR_EDGE:
return "JSR";
case RET_EDGE:
return "RET";
case GOTO_EDGE:
return "GOTO";
case RETURN_EDGE:
return "RETURN";
case UNHANDLED_EXCEPTION_EDGE:
return "UNHANDLED_EXCEPTION";
case HANDLED_EXCEPTION_EDGE:
return "HANDLED_EXCEPTION";
case START_EDGE:
return "START";
case BACKEDGE_TARGET_EDGE:
return "BACKEDGE_TARGET_EDGE";
case BACKEDGE_SOURCE_EDGE:
return "BACKEDGE_SOURCE_EDGE";
case EXIT_EDGE:
return "EXIT_EDGE";
}
throw new IllegalStateException("unknown edge type: " + edgeType);
}

boolean checkGroups(PhoneNumberUtil util,PhoneNumber number,StringBuilder normalizedCandidate,String[] expectedNumberGroups);

private int insertUnassignedGroup() throws SQLException {
  PreparedStatement groupStatement;
  final int ruleid=insertUnassignedRule();
  final int evaluationOrder=getNumOfGroups() + 1;
  String unassignedGroupSqlStatement="INSERT INTO " + GROUPS_TABLE + " (GROUP_NAME, "+ "GROUP_TYPE, DATA_TYPE, RULE_INTERNAL_ID, EVALUATION_ORDER) "+ "VALUES ('%s', %d, %d, %d, %d)";
  unassignedGroupSqlStatement=String.format(unassignedGroupSqlStatement,UNASSIGNED_GROUP,UNASSIGNED_GROUP_TYPE,UNASSIGNED_DATA_TYPE,ruleid,evaluationOrder);
  groupStatement=prepareStatement(unassignedGroupSqlStatement,new String[]{"GROUP_INTERNAL_ID"});
  groupStatement.execute();
  return getInternalId(groupStatement);
}

public Builder deleteExtensionField(String urn,String fieldName){
  deleteFields.add(urn + "." + fieldName);
  return this;
}

public void sendDirect(byte[] sqlBytes,int offset,int sqlLength,byte commandType) throws IOException, QueryException {
  if (isClosed())   throw new IOException("Stream has already closed");
  int seqNo=0;
  setCompressSeqNo(0);
  if (sqlLength + (useCompression ? 5 : 1) > getMaxAllowedPacket()) {
    throw new QueryException("Could not send query: query size " + (sqlLength + (useCompression ? 5 : 1)) + " is >= to max_allowed_packet ("+ maxAllowedPacket+ ")",-1,INTERRUPTED_EXCEPTION);
  }
  if (!isUseCompression()) {
    if (sqlLength + 1 <= maxPacketSize) {
      byte[] packetBuffer=new byte[sqlLength + 5];
      packetBuffer[0]=(byte)((sqlLength + 1) & 0xff);
      packetBuffer[1]=(byte)((sqlLength + 1) >>> 8);
      packetBuffer[2]=(byte)((sqlLength + 1) >>> 16);
      packetBuffer[3]=(byte)seqNo++;
      packetBuffer[4]=commandType;
      System.arraycopy(sqlBytes,offset,packetBuffer,5,sqlLength);
      if (logger.isTraceEnabled()) {
        logger.trace("send packet seq:" + seqNo + " length:"+ (sqlLength + 1)+ " data:"+ Utils.hexdump(packetBuffer,maxQuerySizeToLog,4,sqlLength + 1));
      }
      outputStream.write(packetBuffer);
    }
 else {
      byte[] packetBuffer=new byte[maxPacketSize + 4];
      packetBuffer[0]=(byte)(maxPacketSize & 0xff);
      packetBuffer[1]=(byte)(maxPacketSize >>> 8);
      packetBuffer[2]=(byte)(maxPacketSize >>> 16);
      packetBuffer[3]=(byte)seqNo++;
      packetBuffer[4]=commandType;
      System.arraycopy(sqlBytes,offset,packetBuffer,5,maxPacketSize - 1);
      int lengthAlreadySend=maxPacketSize - 1;
      if (logger.isTraceEnabled()) {
        logger.trace("send packet seq:" + seqNo + " length:"+ maxPacketSize+ " data:"+ Utils.hexdump(packetBuffer,maxQuerySizeToLog,4,maxPacketSize));
      }
      outputStream.write(packetBuffer);
      int length;
      while ((length=sqlLength - lengthAlreadySend) > 0) {
        if (length > maxPacketSize) {
          packetBuffer[0]=(byte)(maxPacketSize & 0xff);
          packetBuffer[1]=(byte)(maxPacketSize >>> 8);
          packetBuffer[2]=(byte)(maxPacketSize >>> 16);
          packetBuffer[3]=(byte)seqNo++;
          System.arraycopy(sqlBytes,offset + lengthAlreadySend,packetBuffer,4,maxPacketSize);
          if (logger.isTraceEnabled()) {
            logger.trace("send packet seq:" + seqNo + " length:"+ maxPacketSize+ " data:"+ Utils.hexdump(packetBuffer,maxQuerySizeToLog,4,maxPacketSize));
          }
          outputStream.write(packetBuffer);
          lengthAlreadySend+=maxPacketSize;
        }
 else {
          packetBuffer[0]=(byte)(length & 0xff);
          packetBuffer[1]=(byte)(length >>> 8);
          packetBuffer[2]=(byte)(length >>> 16);
          packetBuffer[3]=(byte)seqNo++;
          System.arraycopy(sqlBytes,offset + lengthAlreadySend,packetBuffer,4,length);
          if (logger.isTraceEnabled()) {
            logger.trace("send packet seq:" + seqNo + " length:"+ length+ " data:"+ Utils.hexdump(packetBuffer,maxQuerySizeToLog,4,length));
          }
          outputStream.write(packetBuffer,0,length + 4);
          break;
        }
      }
    }
  }
 else {
    if (sqlLength < maxPacketSize) {
      byte[] packetBuffer=new byte[sqlLength + 5];
      packetBuffer[0]=(byte)((sqlLength + 1) & 0xff);
      packetBuffer[1]=(byte)((sqlLength + 1) >>> 8);
      packetBuffer[2]=(byte)((sqlLength + 1) >>> 16);
      packetBuffer[3]=(byte)0;
      packetBuffer[4]=commandType;
      System.arraycopy(sqlBytes,offset,packetBuffer,5,sqlLength);
      compressedAndSend(sqlLength + 5,packetBuffer,true);
    }
 else {
      final int expectedPacketSize=sqlLength + 1 + 4 * (((sqlLength + 1) / maxPacketSize) + 1);
      byte[] packetBuffer=new byte[expectedPacketSize];
      packetBuffer[0]=(byte)(maxPacketSize & 0xff);
      packetBuffer[1]=(byte)(maxPacketSize >>> 8);
      packetBuffer[2]=(byte)(maxPacketSize >>> 16);
      packetBuffer[3]=(byte)seqNo++;
      packetBuffer[4]=commandType;
      System.arraycopy(sqlBytes,offset,packetBuffer,5,maxPacketSize - 1);
      int sqlBytesPosition=maxPacketSize - 1;
      int positionDest=maxPacketSize + 4;
      int length;
      while ((length=sqlLength - sqlBytesPosition) > 0) {
        if (length > maxPacketSize) {
          packetBuffer[positionDest++]=(byte)(maxPacketSize & 0xff);
          packetBuffer[positionDest++]=(byte)(maxPacketSize >>> 8);
          packetBuffer[positionDest++]=(byte)(maxPacketSize >>> 16);
          packetBuffer[positionDest++]=(byte)seqNo++;
          System.arraycopy(sqlBytes,offset + sqlBytesPosition,packetBuffer,positionDest,maxPacketSize);
          sqlBytesPosition+=maxPacketSize;
          positionDest+=maxPacketSize;
        }
 else {
          packetBuffer[positionDest++]=(byte)(length & 0xff);
          packetBuffer[positionDest++]=(byte)(length >>> 8);
          packetBuffer[positionDest++]=(byte)(length >>> 16);
          packetBuffer[positionDest++]=(byte)seqNo++;
          System.arraycopy(sqlBytes,offset + sqlBytesPosition,packetBuffer,positionDest,length);
          break;
        }
      }
      compressedAndSend(expectedPacketSize,packetBuffer,true);
    }
  }
}

@SuppressWarnings("unchecked") private List<List<GroupAttribute>> searchAuthProvider(Filter queryBuilder,String[] returnAttributes,final long countLimit,AttributesMapper mapper,ValidationFailureReason[] failureReason) throws SizeLimitExceededException {
  SearchControls groupSearchControls=new SearchControls(SearchControls.SUBTREE_SCOPE,countLimit,_searchControls.getTimeLimit(),returnAttributes,_searchControls.getReturningObjFlag(),_searchControls.getDerefLinkFlag());
  List<List<GroupAttribute>> queryGroupResults=null;
  queryGroupResults=safeLdapSearch(_baseDN,queryBuilder.encode(),groupSearchControls,mapper,failureReason);
  return queryGroupResults;
}

protected void export(OMGraphicList list,List<Object> masterRecord,boolean writeFiles){
  badGraphics=0;
  if (list == null) {
    return;
  }
 else   if (list instanceof EsriGraphicList) {
    export((EsriGraphicList)list);
    return;
  }
  int dbfIndex=0;
  for (  OMGraphic dtlGraphic : list) {
    List<Object> record=masterRecord;
    Integer recIndex=(Integer)dtlGraphic.getAttribute(SHAPE_INDEX_ATTRIBUTE);
    if (recIndex == null) {
      recIndex=dbfIndex;
    }
    if (record == null) {
      record=getMasterDBFRecord(recIndex);
    }
    dbfIndex++;
    if (dtlGraphic instanceof OMGraphicList) {
      if (DEBUG)       logger.fine("ESE: handling OMGraphicList");
      export((OMGraphicList)dtlGraphic,record,false);
      continue;
    }
    if (dtlGraphic.getRenderType() != RENDERTYPE_LATLON) {
      badGraphics++;
      continue;
    }
    if (dtlGraphic instanceof OMAreaList) {
      if (DEBUG) {
        logger.fine("ESE: handling OMAreaList");
      }
      addAreaList((OMAreaList)dtlGraphic,record);
    }
    if (dtlGraphic instanceof OMPoly) {
      OMPoly omPoly=(OMPoly)dtlGraphic;
      if (isPolygon(omPoly)) {
        if (DEBUG)         logger.fine("ESE: handling OMPoly polygon");
        addPolygon(dtlGraphic,record);
      }
 else {
        if (DEBUG)         logger.fine("ESE: handling OMPoly line");
        addLine(dtlGraphic,record);
      }
    }
 else     if (dtlGraphic instanceof OMRect) {
      if (DEBUG)       logger.fine("ESE: handling OMRect");
      addPolygon((OMGraphic)EsriPolygonList.convert((OMRect)dtlGraphic),record);
    }
 else     if (dtlGraphic instanceof OMCircle) {
      if (DEBUG)       logger.fine("ESE: handling OMCircle");
      addPolygon((OMGraphic)EsriPolygonList.convert((OMCircle)dtlGraphic,projection),record);
    }
 else     if (dtlGraphic instanceof OMRangeRings) {
      if (DEBUG)       logger.fine("ESE: handling OMRangeRings");
      export(EsriPolygonList.convert((OMRangeRings)dtlGraphic,projection),record,false);
    }
 else     if (dtlGraphic instanceof OMLine) {
      if (DEBUG)       logger.fine("ESE: handling OMLine");
      addLine((OMGraphic)EsriPolylineList.convert((OMLine)dtlGraphic),record);
    }
 else     if (dtlGraphic instanceof OMPoint) {
      if (DEBUG)       logger.fine("ESE: handling OMPoint");
      addPoint(dtlGraphic,record);
    }
  }
  if (badGraphics > 0) {
    DrawingToolRenderException.notifyUserOfNonLatLonGraphics(badGraphics);
  }
  if (!writeFiles) {
    return;
  }
  boolean needConfirmation=false;
  if (filePath == null) {
    filePath=getFilePathFromUser();
    if (filePath == null) {
      return;
    }
    needConfirmation=true;
  }
  if (DEBUG)   logger.fine("ESE: writing files...");
  boolean needTypeSuffix=false;
  if (polyList != null) {
    eseInterfaces.add(new ESEInterface(polyList,filePath,null));
    needTypeSuffix=true;
  }
  if (lineList != null) {
    eseInterfaces.add(new ESEInterface(lineList,filePath,(needTypeSuffix ? LineSuffix : null)));
    needTypeSuffix=true;
  }
  if (pointList != null) {
    eseInterfaces.add(new ESEInterface(pointList,filePath,(needTypeSuffix ? PointSuffix : null)));
  }
  if (needConfirmation) {
    showGUI();
  }
 else {
    writeFiles();
  }
}

public Depend(PathImpl source,long lastModified,long length){
  _source=source;
  _lastModified=lastModified;
  _length=length;
}

public boolean hasTaskOfTypeInProgress(@NotNull ExternalSystemTaskType type,@NotNull Project project){
  String projectId=ExternalSystemTaskId.getProjectId(project);
  for (  ExternalSystemTaskId id : myTasksInProgress.keySet()) {
    if (type.equals(id.getType()) && projectId.equals(id.getIdeProjectId())) {
      return true;
    }
  }
  return false;
}

public final void removeChangeListener(ChangeListener listener){
  listeners.remove(listener);
}

public static boolean containsIgnoreCase(String str,String query){
  if (str != null && query != null) {
    int limit=str.length() - query.length() + 1;
    for (int i=0; i < limit; i++) {
      if (matchesIgnoreCase(str,query,i)) {
        return true;
      }
    }
  }
  return false;
}

public String toMatrixString() throws Exception {
  return toMatrixString("=== Confusion Matrix ===\n");
}

public QuadEdge connect(QuadEdge a,QuadEdge b){
  QuadEdge q=QuadEdge.connect(a,b);
  quadEdges.add(q);
  return q;
}

public Test findTest(List<String> suiteNames,String testClassName,String testName,boolean insertIfMissing){
  if (suiteNames.size() <= 0) {
    TestCase testCase=getTestCase(testClassName);
    return testCase.findTest(testName,insertIfMissing);
  }
 else {
    String rootName=suiteNames.remove(0);
    TestSuite suite=getTestSuite(rootName);
    return suite.findTest(suiteNames,testClassName,testName,insertIfMissing);
  }
}

public Job configure(boolean isSecured,String metaStoreUris,String principal,String redisHost,int redisPort,String password,int redisDb,String inputDatabase,String inputTable,String inputFilter,String keyName,String valueName,String keyPrefix,int numReducer,boolean replace,boolean pipeline,boolean flush,int commitSize,String[] anonFields,String exportSalt) throws Exception {
  this.isSecured=isSecured;
  this.metaStoreUris=metaStoreUris;
  this.principal=principal;
  this.redisHost=redisHost;
  this.redisPort=redisPort;
  this.password=password;
  this.redisDb=redisDb;
  this.inputDatabase=inputDatabase;
  this.inputTable=inputTable;
  this.inputFilter=inputFilter;
  this.keyName=keyName;
  this.keyPrefix=keyPrefix;
  this.valueName=valueName;
  this.numReducer=numReducer;
  this.replace=replace;
  this.pipeline=pipeline;
  this.flush=flush;
  this.commitSize=commitSize;
  this.anonFields=anonFields.clone();
  this.exportSalt=exportSalt;
  return configure();
}

public static double log2(double a){
  return Math.log(a) / log2;
}

public void addSuggestions(final @NonNull SuggestionsResult result,final @NonNull String bucket,final @NonNull TokenSource source){
  QueryToken query=result.getQueryToken();
synchronized (mLock) {
    mResultMap.put(bucket,result);
    Set<String> waitingForBuckets=mWaitingForResults.get(query);
    if (waitingForBuckets != null) {
      waitingForBuckets.remove(bucket);
      if (waitingForBuckets.size() == 0) {
        mWaitingForResults.remove(query);
      }
    }
  }
  String currentTokenString=source.getCurrentTokenString();
synchronized (mLock) {
    mSuggestions.clear();
    List<Suggestible> suggestions=mSuggestionsListBuilder.buildSuggestions(mResultMap,currentTokenString);
    if (suggestions.size() > 0) {
      mSuggestions.addAll(suggestions);
      mSuggestionsVisibilityManager.displaySuggestions(true);
    }
 else {
      hideSuggestionsIfNecessary(result.getQueryToken(),source);
    }
  }
  notifyDataSetChanged();
}

public static <ET extends Enum<ET>>EnumResolver<ET> constructFor(Class<ET> enumCls,AnnotationIntrospector ai){
  ET[] enumValues=enumCls.getEnumConstants();
  if (enumValues == null) {
    throw new IllegalArgumentException("No enum constants for class " + enumCls.getName());
  }
  HashMap<String,ET> map=new HashMap<String,ET>();
  for (  ET e : enumValues) {
    map.put(ai.findEnumValue(e),e);
  }
  return new EnumResolver<ET>(enumCls,enumValues,map);
}

protected void encodeLineSuffix(OutputStream aStream) throws IOException {
  pStream.println();
}

public static boolean replace(RTextArea textArea,String toFind,String replaceWith,boolean forward,boolean matchCase,boolean wholeWord,boolean regex) throws PatternSyntaxException {
  textArea.beginAtomicEdit();
  try {
    if (regex) {
      return regexReplace(textArea,toFind,replaceWith,forward,matchCase,wholeWord);
    }
    makeMarkAndDotEqual(textArea,forward);
    if (find(textArea,toFind,forward,matchCase,wholeWord,false)) {
      textArea.replaceSelection(replaceWith);
      return true;
    }
  }
  finally {
    textArea.endAtomicEdit();
  }
  return false;
}

public void preSingleSignOnRequest(String hostedEntityID,String idpEntityID,String realm,HttpServletRequest request,HttpServletResponse response,AuthnRequest authnRequest) throws SAML2Exception {
  return;
}

void submit(ProcessAndDisplayImageTask task){
  initExecutorsIfNeed();
  taskExecutorForCachedImages.execute(task);
}

public static ImageIcon createIcon(BasicStroke stroke,int width,int height,boolean horizontalOrientation){
  BufferedImage bigImage=new BufferedImage(width,height,BufferedImage.TYPE_INT_ARGB);
  Graphics2D g=(Graphics2D)bigImage.getGraphics();
  g.setBackground(OMColor.clear);
  g.setPaint(OMColor.clear);
  g.fillRect(0,0,width,height);
  g.setPaint(Color.black);
  g.setStroke(stroke);
  if (horizontalOrientation) {
    g.drawLine(0,height / 2,width,height / 2);
  }
 else {
    g.drawLine(width / 2,0,width / 2,height);
  }
  return new ImageIcon(bigImage);
}

public static final <T extends EObject>List<T> collectNodesWithinSameThisEnvironment(EObject root,Class<T> cls){
  final List<T> result=new ArrayList<>();
  final TreeIterator<EObject> iter=root.eAllContents();
  while (iter.hasNext()) {
    final EObject obj=iter.next();
    if (cls.isAssignableFrom(obj.getClass())) {
      @SuppressWarnings("unchecked") final T objCasted=(T)obj;
      result.add(objCasted);
    }
    if (obj instanceof ThisArgProvider) {
      iter.prune();
    }
  }
  return result;
}

protected abstract List<SingleVariableDeclaration> adjustDstParams(MethodDeclaration method);

public String fullSource(){
  if (fullSource == null) {
    fullSource=addSentenceMarkers(source());
  }
  return fullSource;
}

private void updateDetailData(){
  final long start=mLeftPosition;
  final long end=mRightPosition;
  final long now=mCurrentTime;
  final Context context=getContext();
  NetworkStatsHistory.Entry originalEntry=mOriginalNetworkStatsHistory.getValues(start,end,now,null);
  final long originalTotalBytes=originalEntry.rxBytes;
  mOriginalTotalPhrase=Formatter.formatFileSize(context,originalTotalBytes);
  NetworkStatsHistory.Entry compressedEntry=mReceivedNetworkStatsHistory.getValues(start,end,now,null);
  final long compressedTotalBytes=compressedEntry.rxBytes;
  mReceivedTotalPhrase=Formatter.formatFileSize(context,compressedTotalBytes);
  float percentage=0.0f;
  if (originalTotalBytes > 0L && originalTotalBytes > compressedTotalBytes) {
    percentage=(originalTotalBytes - compressedTotalBytes) / (float)originalTotalBytes;
  }
  mPercentReductionPhrase=String.format("%.0f%%",100.0 * percentage);
  mStartDatePhrase=formatDate(context,start);
  mEndDatePhrase=formatDate(context,end);
}

public PunctuationTrie<T> lookup(CharSequence s){
  PunctuationTrie<T> t=this;
  for (int i=0, n=s.length(); i < n; ++i) {
    t=t.lookup(s.charAt(i));
    if (null == t) {
      break;
    }
  }
  return t;
}

private static File constructFilePaths(String file1,String file2){
  File newPath;
  if (file2.startsWith(file1)) {
    newPath=new File(file2);
  }
 else {
    newPath=new File(file1 + "/" + file2);
  }
  return newPath;
}

public String resolveTemplate(ITemplateType templateType,Map<String,String> replacements) throws IOException {
  Path path=getTemplatePath(templateType);
  String template=new String(Files.readAllBytes(path),StandardCharsets.UTF_8);
  return insertProperties(template,replacements);
}

public void execute(){
  try {
    prep.execute();
  }
 catch (  SQLException e) {
    throw convert(e);
  }
}

public void clear(){
  oredCriteria.clear();
  orderByClause=null;
  distinct=false;
}

private static byte[] unwrapCalculatedValue(byte[] data){
  if (data.length < CALC_DATA_OFFSET) {
    return data;
  }
  ByteBuffer buffer=PageChannel.wrap(data);
  buffer.position(CALC_DATA_LEN_OFFSET);
  int dataLen=buffer.getInt();
  byte[] newData=new byte[Math.min(buffer.remaining(),dataLen)];
  buffer.get(newData);
  return newData;
}

public synchronized TypeInstance createInstance(final String name,final String comment,final BaseType baseType,final Section section,final long sectionOffset) throws CouldntSaveDataException, CouldntLoadDataException {
  Preconditions.checkNotNull(name,"Error: name argument can not be null");
  Preconditions.checkArgument(comment == null || !comment.isEmpty(),"Error: comment can either be null or a non empty string");
  Preconditions.checkNotNull(baseType,"Error: baseType argument can not be null");
  Preconditions.checkNotNull(section,"Error: section argument can not be null");
  Preconditions.checkArgument(sectionOffset >= 0,"Error: section offset must be greater or equal to zero");
  Preconditions.checkArgument(!instancesByAddress.containsKey(new TypeInstanceAddress(section.getStartAddress(),sectionOffset)));
  final TypeInstance instance=backend.createTypeInstance(name,comment,baseType,section,sectionOffset);
  instancesByAddress.put(instance.getAddress(),instance);
  instances.add(instance);
  notifyInstanceAdded(instance);
  return instance;
}

void showInputBox(String message,Consumer<String> resultCallback){
  showInputBox(message,null,resultCallback);
}

public void add(Field field){
  mFields.add(field);
}

public static long measureTime(Callable<Object> c,int threadCnt) throws Exception {
  A.ensure(threadCnt >= 1,"threadCnt should be >= 1");
  long start=System.currentTimeMillis();
  if (threadCnt == 1)   c.call();
 else   GridTestUtils.runMultiThreaded(c,threadCnt,"test-worker");
  return System.currentTimeMillis() - start;
}

@Override public boolean isClosed(){
  return _isClosed.get();
}

protected StatementListNode generateDestructorBody(Context context,StatementListNode statementList){
  Model model=(Model)value;
  Set<String> ids=new LinkedHashSet<String>();
  if (model.isDeclared())   ids.add(model.getId());
  collectDeclarations(model.getSubInitializerIterator(),ids);
  NodeFactory nodeFactory=context.getNodeFactory();
  StatementListNode result=statementList;
  StatementListNode functionStatementList=null;
  for (  String id : ids) {
    LiteralNullNode literalNull=nodeFactory.literalNull();
    IdentifierNode identifier=nodeFactory.identifier(id);
    Node expressionStatement=nodeFactory.assignmentExpression(identifier,ASSIGN_TOKEN,literalNull);
    functionStatementList=nodeFactory.statementList(functionStatementList,expressionStatement);
  }
  FunctionSignatureNode functionSignature=nodeFactory.functionSignature(null,null);
  functionSignature.void_anno=true;
  IdentifierNode functionIdentifier=nodeFactory.identifier(model.getDefinitionName() + "_r");
  FunctionCommonNode functionCommon=nodeFactory.functionCommon(context,functionIdentifier,functionSignature,functionStatementList);
  functionCommon.setUserDefinedBody(true);
  AttributeListNode attributeList=AbstractSyntaxTreeUtil.generatePrivateAttribute(nodeFactory);
  FunctionNameNode functionName=nodeFactory.functionName(Tokens.EMPTY_TOKEN,functionIdentifier);
  FunctionDefinitionNode functionDefinition=nodeFactory.functionDefinition(context,attributeList,functionName,functionCommon);
  result=nodeFactory.statementList(result,functionDefinition);
  return result;
}

protected synchronized void expire() throws IllegalMonitorStateException {
  if (owner == Thread.currentThread()) {
    expired=true;
  }
 else {
    throw new IllegalMonitorStateException("The calling thread is not the owner of the lock!");
  }
}

private StringBuffer prepareOptimizedInsertStatement(OneRowChange oneRowChange){
  StringBuffer stmt;
  stmt=new StringBuffer();
  stmt.append("INSERT INTO ");
  stmt.append(conn.getDatabaseObjectName(oneRowChange.getSchemaName()) + "." + conn.getDatabaseObjectName(oneRowChange.getTableName()));
  stmt.append(" ( ");
  printColumnSpec(stmt,oneRowChange.getColumnSpec(),null,null,PrintMode.NAMES_ONLY,", ");
  stmt.append(") VALUES (");
  boolean firstRow=true;
  for (  ArrayList<ColumnVal> oneRowValues : oneRowChange.getColumnValues()) {
    if (firstRow) {
      firstRow=false;
    }
 else     stmt.append(", (");
    printColumnSpec(stmt,oneRowChange.getColumnSpec(),null,oneRowValues,PrintMode.PLACE_HOLDER," , ");
    stmt.append(")");
  }
  return stmt;
}

private boolean extractorQueueEmpty() throws InterruptedException {
  if (extractor.hasMoreEvents())   return false;
 else   if (blockCommitIntervalMillis <= 0)   return true;
 else {
    long nextCommitMillis=lastCommitMillis + blockCommitIntervalMillis;
    long sleepMillis=nextCommitMillis - System.currentTimeMillis();
    while (sleepMillis > 0) {
      Thread.sleep(1);
      if (extractor.hasMoreEvents())       return false;
      sleepMillis=nextCommitMillis - System.currentTimeMillis();
    }
    return true;
  }
}

public static void verify(final ClassReader cr,final boolean dump,final PrintWriter pw){
  verify(cr,null,dump,pw);
}

public FileAsyncHttpResponseHandler(Context context){
  super();
  this.file=getTemporaryFile(context);
  this.append=false;
  this.renameIfExists=false;
}

public static boolean isWindowOpaque(Window window){
  if (window == null) {
    throw new NullPointerException("The window argument should not be null.");
  }
  return window.isOpaque();
}

public static byte[] encode(byte[] data,int off,int length){
  int len=(length + 2) / 3 * 4;
  ByteArrayOutputStream bOut=new ByteArrayOutputStream(len);
  try {
    encoder.encode(data,off,length,bOut);
  }
 catch (  Exception e) {
    throw new EncoderException("exception encoding base64 string: " + e.getMessage(),e);
  }
  return bOut.toByteArray();
}

public double entropyNMIMin(){
  return (entropyMutualInformation() / Math.min(entropyFirst(),entropySecond()));
}

public static void unregister(CloseWatcher w){
  w.closeable=null;
  refs.remove(w);
}

protected final void refreshLoadingViewsSize(){
  final int maximumPullScroll=(int)(getMaximumPullScroll() * 1.2f);
  int pLeft=getPaddingLeft();
  int pTop=getPaddingTop();
  int pRight=getPaddingRight();
  int pBottom=getPaddingBottom();
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    if (mMode.showHeaderLoadingLayout()) {
      mHeaderLayout.setWidth(maximumPullScroll);
      pLeft=-maximumPullScroll;
    }
 else {
      pLeft=0;
    }
  if (mMode.showFooterLoadingLayout()) {
    mFooterLayout.setWidth(maximumPullScroll);
    pRight=-maximumPullScroll;
  }
 else {
    pRight=0;
  }
break;
case VERTICAL:
if (mMode.showHeaderLoadingLayout()) {
mHeaderLayout.setHeight(maximumPullScroll);
pTop=-maximumPullScroll;
}
 else {
pTop=0;
}
if (mMode.showFooterLoadingLayout()) {
mFooterLayout.setHeight(maximumPullScroll);
pBottom=-maximumPullScroll;
}
 else {
pBottom=0;
}
break;
}
if (DEBUG) {
Log.d(LOG_TAG,String.format("Setting Padding. L: %d, T: %d, R: %d, B: %d",pLeft,pTop,pRight,pBottom));
}
setPadding(pLeft,pTop,pRight,pBottom);
}

static LabelNode[] clone(final List<LabelNode> labels,final Map<LabelNode,LabelNode> map){
  LabelNode[] clones=new LabelNode[labels.size()];
  for (int i=0; i < clones.length; ++i) {
    clones[i]=map.get(labels.get(i));
  }
  return clones;
}

@Override public JettySolrRunner createJetty(File solrHome,String dataDir,String shardList,String solrConfigOverride,String schemaOverride) throws Exception {
  return createProxiedJetty(solrHome,dataDir,shardList,solrConfigOverride,schemaOverride);
}

public synchronized void addBatchClassifierListener(BatchClassifierListener cl){
  m_batchClassifierListeners.addElement(cl);
}

private boolean matchAndwriteOneAuditLog(BufferedWriter writer,AuditLog auditlog,String keyword) throws MarshallingExcetion {
  try {
    AuditLogUtils.resetDesc(auditlog,resb);
    if (AuditLogUtils.isKeywordContained(auditlog,keyword)) {
      if (_count.getAndIncrement() > 0) {
        while (!_firstWritten.get()) {
          try {
            Thread.sleep(1);
          }
 catch (          InterruptedException e) {
            _logger.warn("Sleep interrupted");
          }
        }
        writer.write("," + _mapper.writeValueAsString(auditlog));
      }
 else {
        writer.write(_mapper.writeValueAsString(auditlog));
        _firstWritten.set(true);
      }
      return true;
    }
    _logger.debug("{} filter out by description keyword {}",auditlog.getDescription(),keyword);
    return false;
  }
 catch (  JsonGenerationException e) {
    throw new MarshallingExcetion("JSON Generation Error",e);
  }
catch (  JsonMappingException e) {
    throw new MarshallingExcetion("JSON Mapping Error",e);
  }
catch (  IOException e) {
    throw new MarshallingExcetion("JSON streaming failed: ",e);
  }
}

String toString(boolean includePrivateCredentials){
  String s=ResourcesMgr.getString("Subject.");
  String suffix="";
synchronized (principals) {
    Iterator<Principal> pI=principals.iterator();
    while (pI.hasNext()) {
      Principal p=pI.next();
      suffix=suffix + ResourcesMgr.getString(".Principal.") + p.toString()+ ResourcesMgr.getString("NEWLINE");
    }
  }
synchronized (pubCredentials) {
    Iterator<Object> pI=pubCredentials.iterator();
    while (pI.hasNext()) {
      Object o=pI.next();
      suffix=suffix + ResourcesMgr.getString(".Public.Credential.") + o.toString()+ ResourcesMgr.getString("NEWLINE");
    }
  }
  if (includePrivateCredentials) {
synchronized (privCredentials) {
      Iterator<Object> pI=privCredentials.iterator();
      while (pI.hasNext()) {
        try {
          Object o=pI.next();
          suffix+=ResourcesMgr.getString(".Private.Credential.") + o.toString() + ResourcesMgr.getString("NEWLINE");
        }
 catch (        SecurityException se) {
          suffix+=ResourcesMgr.getString(".Private.Credential.inaccessible.");
          break;
        }
      }
    }
  }
  return s + suffix;
}

private void decodeTonesPhase(int chNum,boolean bandHasTones[]){
  WavesData dst[]=ctx.channels[chNum].tonesInfo;
  for (int sb=0; sb < ctx.wavesInfo.numToneBands; sb++) {
    if (!bandHasTones[sb]) {
      continue;
    }
    int wparam=dst[sb].startIndex;
    for (int i=0; i < dst[sb].numWavs; i++) {
      ctx.wavesInfo.waves[wparam + i].phaseIndex=br.read(5);
    }
  }
}

public int encode(byte[] data,int off,int length,OutputStream out) throws IOException {
  for (int i=off; i < (off + length); i++) {
    int v=data[i] & 0xff;
    out.write(encodingTable[(v >>> 4)]);
    out.write(encodingTable[v & 0xf]);
  }
  return length * 2;
}

public void clear(){
synchronized (mLock) {
    mGraphics.clear();
  }
  postInvalidate();
}

public static String removeAll(String str,String[] patterns){
  for (  String pattern : patterns)   str=str.replace(pattern,"");
  return str;
}

public void addSeriesRenderer(SimpleSeriesRenderer renderer){
  mRenderers.add(renderer);
}

public static void ccDrawCircle(GL10 gl,CGPoint center,float r,float a,int segments,boolean drawLineToCenter){
  FloatBuffer vertices=getVertices(2 * (segments + 2));
  int additionalSegment=1;
  if (drawLineToCenter)   additionalSegment++;
  final float coef=2.0f * (float)Math.PI / segments;
  for (int i=0; i <= segments; i++) {
    float rads=i * coef;
    float j=(float)(r * Math.cos(rads + a) + center.x);
    float k=(float)(r * Math.sin(rads + a) + center.y);
    vertices.put(j);
    vertices.put(k);
  }
  vertices.put(center.x);
  vertices.put(center.y);
  vertices.position(0);
  gl.glDisable(GL_TEXTURE_2D);
  gl.glDisableClientState(GL_TEXTURE_COORD_ARRAY);
  gl.glDisableClientState(GL_COLOR_ARRAY);
  gl.glVertexPointer(2,GL_FLOAT,0,vertices);
  gl.glDrawArrays(GL_LINE_STRIP,0,segments + additionalSegment);
  gl.glEnableClientState(GL_COLOR_ARRAY);
  gl.glEnableClientState(GL_TEXTURE_COORD_ARRAY);
  gl.glEnable(GL_TEXTURE_2D);
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>();
  newVector.addElement(new Option("\tOutput additional statistics.","additional-stats",0,"-additional-stats"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

@Override public boolean isParent(File folder,File file){
  return folder.equals(file.getParentFile());
}

@Override public void print(char c) throws IOException {
  boolean isWS=Character.isWhitespace(c);
  if (isWS) {
    if (isFirstChar)     return;
    if (c == CHAR_RETURN)     return;
    if (sb.length() > 0) {
      printBuffer();
      lastChar=(c == CHAR_NL) ? CHAR_NL : c;
      super.print(lastChar);
      return;
    }
  }
  isFirstChar=false;
  if (c == CHAR_GT && sb.length() > 0)   printBuffer();
  if (isWS || !addToBuffer(c)) {
    if (depthSum == 0) {
      if (isWS) {
        if (lastChar == CHAR_NL)         return;
        if (c != CHAR_NL) {
          if (Character.isWhitespace(lastChar))           return;
        }
      }
    }
    lastChar=c;
    super.print(c);
  }
}

public static TokenEndpointAuthMethod fromString(String type){
  if (type != null) {
    for (    TokenEndpointAuthMethod authMethod : TokenEndpointAuthMethod.values()) {
      if (type.equalsIgnoreCase(authMethod.type)) {
        return authMethod;
      }
    }
  }
  return null;
}

public void put(E e) throws InterruptedException {
  if (e == null)   throw new NullPointerException();
  int c=-1;
  final ReentrantLock putLock=this.putLock;
  final AtomicInteger count=this.count;
  putLock.lockInterruptibly();
  try {
    while (count.get() >= capacity) {
      notFull.await();
    }
    enqueue(e);
    c=count.getAndIncrement();
    if (c + 1 < capacity)     notFull.signal();
  }
  finally {
    putLock.unlock();
  }
  if (c == 0)   signalNotEmpty();
}

private boolean compare(List<String> remoteModules,List<String> expectedModules){
  Collections.sort(remoteModules);
  Collections.sort(expectedModules);
  return remoteModules.equals(expectedModules);
}

private void encodeSize(ByteBuffer headerBuffer,int size){
  headerBuffer.put((byte)((size & 0x00FF0000) >> 16));
  headerBuffer.put((byte)((size & 0x0000FF00) >> 8));
  headerBuffer.put((byte)(size & 0x000000FF));
  logger.fine("Frame Size Is Actual:" + size + ":Encoded bin:"+ Integer.toBinaryString(size)+ ":Encoded Hex"+ Integer.toHexString(size));
}

protected LinkedList<Diff> diff_bisect(String text1,String text2,long deadline){
  int text1_length=text1.length();
  int text2_length=text2.length();
  int max_d=(text1_length + text2_length + 1) / 2;
  int v_offset=max_d;
  int v_length=2 * max_d;
  int[] v1=new int[v_length];
  int[] v2=new int[v_length];
  for (int x=0; x < v_length; x++) {
    v1[x]=-1;
    v2[x]=-1;
  }
  v1[v_offset + 1]=0;
  v2[v_offset + 1]=0;
  int delta=text1_length - text2_length;
  boolean front=(delta % 2 != 0);
  int k1start=0;
  int k1end=0;
  int k2start=0;
  int k2end=0;
  for (int d=0; d < max_d; d++) {
    if (System.currentTimeMillis() > deadline) {
      break;
    }
    for (int k1=-d + k1start; k1 <= d - k1end; k1+=2) {
      int k1_offset=v_offset + k1;
      int x1;
      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {
        x1=v1[k1_offset + 1];
      }
 else {
        x1=v1[k1_offset - 1] + 1;
      }
      int y1=x1 - k1;
      while (x1 < text1_length && y1 < text2_length && text1.charAt(x1) == text2.charAt(y1)) {
        x1++;
        y1++;
      }
      v1[k1_offset]=x1;
      if (x1 > text1_length) {
        k1end+=2;
      }
 else       if (y1 > text2_length) {
        k1start+=2;
      }
 else       if (front) {
        int k2_offset=v_offset + delta - k1;
        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {
          int x2=text1_length - v2[k2_offset];
          if (x1 >= x2) {
            return diff_bisectSplit(text1,text2,x1,y1,deadline);
          }
        }
      }
    }
    for (int k2=-d + k2start; k2 <= d - k2end; k2+=2) {
      int k2_offset=v_offset + k2;
      int x2;
      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {
        x2=v2[k2_offset + 1];
      }
 else {
        x2=v2[k2_offset - 1] + 1;
      }
      int y2=x2 - k2;
      while (x2 < text1_length && y2 < text2_length && text1.charAt(text1_length - x2 - 1) == text2.charAt(text2_length - y2 - 1)) {
        x2++;
        y2++;
      }
      v2[k2_offset]=x2;
      if (x2 > text1_length) {
        k2end+=2;
      }
 else       if (y2 > text2_length) {
        k2start+=2;
      }
 else       if (!front) {
        int k1_offset=v_offset + delta - k2;
        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {
          int x1=v1[k1_offset];
          int y1=v_offset + x1 - k1_offset;
          x2=text1_length - x2;
          if (x1 >= x2) {
            return diff_bisectSplit(text1,text2,x1,y1,deadline);
          }
        }
      }
    }
  }
  LinkedList<Diff> diffs=new LinkedList<Diff>();
  diffs.add(new Diff(Operation.DELETE,text1));
  diffs.add(new Diff(Operation.INSERT,text2));
  return diffs;
}

public boolean thisIsYou(Object n){
  return id.equals(n);
}

private int syncContactNames(Context context){
  final ContentResolver contentResolver=context.getContentResolver();
  final Cursor cursor=contentResolver.query(ContactNotifications.CONTENT_URI,null,null,null,null);
  if (cursor == null) {
    return 0;
  }
  if (cursor.getCount() == 0) {
    return 0;
  }
  int count=0;
  int updatedCount=0;
  String id;
  String contactName;
  String contactLookup;
  String contactId;
  while (cursor.moveToNext()) {
    count++;
    id=cursor.getString(cursor.getColumnIndexOrThrow(ContactNotifications._ID));
    contactName=cursor.getString(cursor.getColumnIndexOrThrow(ContactNotifications.CONTACT_NAME));
    contactId=cursor.getString(cursor.getColumnIndexOrThrow(ContactNotifications.CONTACT_ID));
    contactLookup=cursor.getString(cursor.getColumnIndexOrThrow(ContactNotifications.CONTACT_LOOKUPKEY));
    ContactIdentification contactInfo=SmsPopupUtils.getPersonNameByLookup(context,contactLookup,contactId);
    if (contactInfo != null) {
      boolean runUpdate=false;
      ContentValues vals=new ContentValues();
      if (contactName == null || !contactName.equals(contactInfo.contactName)) {
        vals.put(ContactNotifications.CONTACT_NAME,contactInfo.contactName);
        runUpdate=true;
      }
      if (contactId == null || !contactId.equals(contactInfo.contactId)) {
        vals.put(ContactNotifications.CONTACT_ID,contactInfo.contactId);
        runUpdate=true;
      }
      if (contactLookup == null || !contactLookup.equals(contactInfo.contactLookup)) {
        vals.put(ContactNotifications.CONTACT_LOOKUPKEY,contactInfo.contactLookup);
        runUpdate=true;
      }
      if (runUpdate && 1 == contentResolver.update(ContactNotifications.buildContactUri(id),vals,null,null)) {
        updatedCount++;
      }
    }
  }
  if (cursor != null) {
    cursor.close();
  }
  if (BuildConfig.DEBUG)   Log.v("Sync Contacts: " + updatedCount + " / "+ count);
  return updatedCount;
}

@Override public synchronized void clear(){
  File[] files=mRootDirectory.listFiles();
  if (files != null) {
    for (    File file : files) {
      file.delete();
    }
  }
  mEntries.clear();
  mTotalSize=0;
  VolleyLog.d("Cache cleared.");
}

@Override protected void deviceFrameRect(int x,int y,int width,int height,Color color){
  AffineTransform deviceTransform=getTransform();
  int transformType=deviceTransform.getType();
  boolean usePath=((transformType & (AffineTransform.TYPE_GENERAL_ROTATION | AffineTransform.TYPE_GENERAL_TRANSFORM)) != 0);
  if (usePath) {
    draw(new Rectangle2D.Float(x,y,width,height));
    return;
  }
  Stroke stroke=getStroke();
  if (stroke instanceof BasicStroke) {
    BasicStroke lineStroke=(BasicStroke)stroke;
    int endCap=lineStroke.getEndCap();
    int lineJoin=lineStroke.getLineJoin();
    if ((endCap == BasicStroke.CAP_SQUARE) && (lineJoin == BasicStroke.JOIN_MITER) && (lineStroke.getMiterLimit() == 10.0f)) {
      float lineWidth=lineStroke.getLineWidth();
      Point2D.Float penSize=new Point2D.Float(lineWidth,lineWidth);
      deviceTransform.deltaTransform(penSize,penSize);
      float deviceLineWidth=Math.min(Math.abs(penSize.x),Math.abs(penSize.y));
      Point2D.Float ul_pos=new Point2D.Float(x,y);
      deviceTransform.transform(ul_pos,ul_pos);
      Point2D.Float lr_pos=new Point2D.Float(x + width,y + height);
      deviceTransform.transform(lr_pos,lr_pos);
      float w=(float)(lr_pos.getX() - ul_pos.getX());
      float h=(float)(lr_pos.getY() - ul_pos.getY());
      WPrinterJob wPrinterJob=(WPrinterJob)getPrinterJob();
      if (wPrinterJob.selectStylePen(endCap,lineJoin,deviceLineWidth,color) == true) {
        wPrinterJob.frameRect((float)ul_pos.getX(),(float)ul_pos.getY(),w,h);
      }
 else {
        double lowerRes=Math.min(wPrinterJob.getXRes(),wPrinterJob.getYRes());
        if ((deviceLineWidth / lowerRes) < MAX_THINLINE_INCHES) {
          wPrinterJob.selectPen(deviceLineWidth,color);
          wPrinterJob.frameRect((float)ul_pos.getX(),(float)ul_pos.getY(),w,h);
        }
 else {
          draw(new Rectangle2D.Float(x,y,width,height));
        }
      }
    }
 else {
      draw(new Rectangle2D.Float(x,y,width,height));
    }
  }
}

public void resetWorkspace(){
  mBlockFactory.clearPriorBlockReferences();
  mRootBlocks.clear();
  mStats.clear();
  mDeletedBlocks.clear();
}

private void parseElement(Element element) throws SAML2Exception {
  AssertionFactory assertionFactory=AssertionFactory.getInstance();
  ProtocolFactory protoFactory=ProtocolFactory.getInstance();
  requestId=element.getAttribute(SAML2Constants.ID);
  validateID(requestId);
  version=element.getAttribute(SAML2Constants.VERSION);
  validateVersion(version);
  String issueInstantStr=element.getAttribute(SAML2Constants.ISSUE_INSTANT);
  validateIssueInstant(issueInstantStr);
  destinationURI=element.getAttribute(SAML2Constants.DESTINATION);
  consent=element.getAttribute(SAML2Constants.CONSENT);
  String notOnOrAfterStr=element.getAttribute(SAML2Constants.NOTONORAFTER);
  validateNotOnOrAfterStr(notOnOrAfterStr);
  reason=element.getAttribute(SAML2Constants.REASON);
  String sessionIndexStr=null;
  NodeList nList=element.getChildNodes();
  if ((nList != null) && (nList.getLength() > 0)) {
    for (int i=0; i < nList.getLength(); i++) {
      Node childNode=nList.item(i);
      String cName=childNode.getLocalName();
      if (cName != null) {
        if (cName.equals(SAML2Constants.ISSUER)) {
          nameID=assertionFactory.createIssuer((Element)childNode);
        }
 else         if (cName.equals(SAML2Constants.SIGNATURE)) {
          signatureString=XMLUtils.print((Element)childNode);
          isSigned=true;
        }
 else         if (cName.equals(SAML2Constants.EXTENSIONS)) {
          extensions=protoFactory.createExtensions((Element)childNode);
        }
 else         if (cName.equals(SAML2Constants.BASEID)) {
          baseId=assertionFactory.createBaseID((Element)childNode);
        }
 else         if (cName.equals(SAML2Constants.NAMEID)) {
          nameId=assertionFactory.createNameID((Element)childNode);
        }
 else         if (cName.equals(SAML2Constants.ENCRYPTEDID)) {
          encryptedId=assertionFactory.createEncryptedID((Element)childNode);
        }
 else         if (cName.equals(SAML2Constants.SESSION_INDEX)) {
          if ((sessionIndexList == null) || (sessionIndexList.isEmpty())) {
            sessionIndexList=new ArrayList();
          }
          sessionIndexStr=XMLUtils.getElementString((Element)childNode);
          sessionIndexList.add(sessionIndexStr);
        }
      }
    }
    validateBaseIDorNameIDorEncryptedID();
    if ((sessionIndexList != null) && (!sessionIndexList.isEmpty())) {
      sessionIndexList=Collections.unmodifiableList(sessionIndexList);
    }
  }
}

protected void onComplete(){
}

public static BigDecimal paidToDate(int p_C_Invoice_ID,int p_C_Currency_ID,int p_MultiplierAP,Timestamp DateAcct) throws SQLException {
  if (p_C_Invoice_ID == 0 || p_C_Currency_ID == 0)   return null;
  BigDecimal MultiplierAP=new BigDecimal((double)p_MultiplierAP);
  if (p_MultiplierAP == 0)   MultiplierAP=Adempiere.ONE;
  int C_ConversionType_ID=0;
  BigDecimal paymentAmt=allocatedAmtToDate(p_C_Invoice_ID,p_C_Currency_ID,C_ConversionType_ID,MultiplierAP,DateAcct);
  return Currency.round(paymentAmt,p_C_Currency_ID,null);
}

private int[] toIntArray(){
  int length=encoding.length;
  int[] result=new int[20];
  int which=0;
  int fromPos=0;
  for (int i=0; i < length; i++) {
    if ((encoding[i] & 0x80) == 0) {
      if (i - fromPos + 1 > 4) {
        BigInteger big=new BigInteger(pack(encoding,fromPos,i - fromPos + 1,7,8));
        if (fromPos == 0) {
          result[which++]=2;
          BigInteger second=big.subtract(BigInteger.valueOf(80));
          if (second.compareTo(BigInteger.valueOf(Integer.MAX_VALUE)) == 1) {
            return null;
          }
 else {
            result[which++]=second.intValue();
          }
        }
 else {
          if (big.compareTo(BigInteger.valueOf(Integer.MAX_VALUE)) == 1) {
            return null;
          }
 else {
            result[which++]=big.intValue();
          }
        }
      }
 else {
        int retval=0;
        for (int j=fromPos; j <= i; j++) {
          retval<<=7;
          byte tmp=encoding[j];
          retval|=(tmp & 0x07f);
        }
        if (fromPos == 0) {
          if (retval < 80) {
            result[which++]=retval / 40;
            result[which++]=retval % 40;
          }
 else {
            result[which++]=2;
            result[which++]=retval - 80;
          }
        }
 else {
          result[which++]=retval;
        }
      }
      fromPos=i + 1;
    }
    if (which >= result.length) {
      result=Arrays.copyOf(result,which + 10);
    }
  }
  return Arrays.copyOf(result,which);
}

public static List<Window> windows(InputStream words,TokenizerFactory tokenizerFactory,int windowSize){
  Tokenizer tokenizer=tokenizerFactory.create(words);
  List<String> list=new ArrayList<>();
  while (tokenizer.hasMoreTokens())   list.add(tokenizer.nextToken());
  if (list.isEmpty())   throw new IllegalStateException("No tokens found for windows");
  return windows(list,windowSize);
}

public static double[] pageRank(MatrixInterface preparedMatrix,int maxIteration){
  double[] init=new double[preparedMatrix.getRowsCount()];
  for (int i=0; i != init.length; i++)   init[i]=1.0;
  return pageRank(preparedMatrix,maxIteration,DEFAULT_D,init);
}

public boolean hasMIMEType(String mimeType){
  if (mimeType == null)   return false;
  String type=mimeType;
  if (mimeType.indexOf(';') > 0) {
    type=mimeType.substring(0,mimeType.indexOf(';'));
  }
  for (  String mt : this.mimeTypes) {
    if (mt.equalsIgnoreCase(mimeType)) {
      return true;
    }
    if (mimeType != type && mt.equalsIgnoreCase(type)) {
      return true;
    }
  }
  return false;
}

private int measureShort(int measureSpec){
  int result;
  int specMode=MeasureSpec.getMode(measureSpec);
  int specSize=MeasureSpec.getSize(measureSpec);
  if (specMode == MeasureSpec.EXACTLY) {
    result=specSize;
  }
 else {
    result=(int)(2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
    if (specMode == MeasureSpec.AT_MOST) {
      result=Math.min(result,specSize);
    }
  }
  return result;
}

private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException {
  s.defaultReadObject();
  key=key.clone();
}

void unexecuteNSDecls(TransformerImpl transformer) throws TransformerException {
  unexecuteNSDecls(transformer,null);
}

public boolean add(ProtocolMessage pm){
  return protocolMessages.add(pm);
}

public void randomInit(){
  do {
    m_bits=new boolean[m_nNodes * m_nNodes];
    for (int i=0; i < m_nNodes; i++) {
      int iPos;
      do {
        iPos=m_random.nextInt(m_nNodes * m_nNodes);
      }
 while (isSquare(iPos));
      m_bits[iPos]=true;
    }
  }
 while (hasCycles());
  calcGlobalScore();
}

public static int safeParseInt(String s){
  return safeParseInt(s,-1);
}

protected boolean hasReceiversFor(DistributedMember endPoint){
synchronized (this.receivers) {
    for (Iterator it=receivers.iterator(); it.hasNext(); ) {
      Connection con=(Connection)it.next();
      if (endPoint.equals(con.getRemoteAddress())) {
        return true;
      }
    }
  }
  return false;
}

protected void decodeBitmapData(final GifFrame frame,byte[] dstPixels){
  if (frame != null) {
    rawData.position(frame.bufferFrameStart);
  }
  final int nullCode=-1;
  final int npix=(frame == null) ? width * height : frame.iw * frame.ih;
  int available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, count, i, datum, data_size, first, top, bi, pi;
  if (dstPixels == null || dstPixels.length < npix) {
    dstPixels=new byte[npix];
  }
  if (prefix == null) {
    prefix=new short[MAX_STACK_SIZE];
  }
  if (suffix == null) {
    suffix=new byte[MAX_STACK_SIZE];
  }
  if (pixelStack == null) {
    pixelStack=new byte[MAX_STACK_SIZE + 1];
  }
  data_size=read();
  clear=1 << data_size;
  end_of_information=clear + 1;
  available=clear + 2;
  old_code=nullCode;
  code_size=data_size + 1;
  code_mask=(1 << code_size) - 1;
  for (code=0; code < clear; code++) {
    prefix[code]=0;
    suffix[code]=(byte)code;
  }
  datum=bits=count=first=top=pi=bi=0;
  for (i=0; i < npix; ) {
    if (top == 0) {
      if (bits < code_size) {
        if (count == 0) {
          count=readBlock();
          if (count <= 0) {
            break;
          }
          bi=0;
        }
        datum+=((block[bi]) & 0xff) << bits;
        bits+=8;
        bi++;
        count--;
        continue;
      }
      code=datum & code_mask;
      datum>>=code_size;
      bits-=code_size;
      if ((code > available) || (code == end_of_information)) {
        break;
      }
      if (code == clear) {
        code_size=data_size + 1;
        code_mask=(1 << code_size) - 1;
        available=clear + 2;
        old_code=nullCode;
        continue;
      }
      if (old_code == nullCode) {
        pixelStack[top++]=suffix[code];
        old_code=code;
        first=code;
        continue;
      }
      in_code=code;
      if (code == available) {
        pixelStack[top++]=(byte)first;
        code=old_code;
      }
      while (code > clear) {
        pixelStack[top++]=suffix[code];
        code=prefix[code];
      }
      first=(suffix[code]) & 0xff;
      if (available >= MAX_STACK_SIZE) {
        break;
      }
      pixelStack[top++]=(byte)first;
      prefix[available]=(short)old_code;
      suffix[available]=(byte)first;
      available++;
      if (((available & code_mask) == 0) && (available < MAX_STACK_SIZE)) {
        code_size++;
        code_mask+=available;
      }
      old_code=in_code;
    }
    top--;
    dstPixels[pi++]=pixelStack[top];
    i++;
  }
  for (i=pi; i < npix; i++) {
    dstPixels[i]=0;
  }
}

public void addRangeRestriction(String ColumnName,Object Code,Object Code_to,String InfoName,String InfoDisplay,String InfoDisplay_to){
  Restriction r=new Restriction(ColumnName,Code,Code_to,InfoName,InfoDisplay,InfoDisplay_to,true,0);
  m_list.add(r);
}

@SuppressWarnings("unchecked") E transfer(E e,boolean timed,long nanos){
  QNode s=null;
  boolean isData=(e != null);
  for (; ; ) {
    QNode t=tail;
    QNode h=head;
    if (t == null || h == null)     continue;
    if (h == t || t.isData == isData) {
      QNode tn=t.next;
      if (t != tail)       continue;
      if (tn != null) {
        advanceTail(t,tn);
        continue;
      }
      if (timed && nanos <= 0)       return null;
      if (s == null)       s=new QNode(e,isData);
      if (!t.casNext(null,s))       continue;
      advanceTail(t,s);
      Object x=awaitFulfill(s,e,timed,nanos);
      if (x == s) {
        clean(t,s);
        return null;
      }
      if (!s.isOffList()) {
        advanceHead(t,s);
        if (x != null)         s.item=s;
        s.waiter=null;
      }
      return (x != null) ? (E)x : e;
    }
 else {
      QNode m=h.next;
      if (t != tail || m == null || h != head)       continue;
      Object x=m.item;
      if (isData == (x != null) || x == m || !m.casItem(x,e)) {
        advanceHead(h,m);
        continue;
      }
      advanceHead(h,m);
      LockSupport.unpark(m.waiter);
      return (x != null) ? (E)x : e;
    }
  }
}

protected void indexPoints(InputStream is,long ptr,OutputStream os){
  boolean moreRecords=true;
  byte rHdr[]=new byte[SHAPE_RECORD_HEADER_LENGTH];
  byte outBuf[]=new byte[SPATIAL_INDEX_RECORD_LENGTH];
  int result;
  int nRecords=0;
  int recLengthWords, recLengthBytes;
  long recOffset;
  int shapeType;
  int recBufSize=20;
  byte recBuf[]=new byte[recBufSize];
  double x=0;
  double y=0;
  try {
    while (moreRecords) {
      result=is.read(rHdr,0,SHAPE_RECORD_HEADER_LENGTH);
      if (result < 0) {
        moreRecords=false;
        if (logger.isLoggable(Level.FINE)) {
          logger.fine("Found " + nRecords + " records");
          logger.fine("recBufSize = " + recBufSize);
        }
      }
 else {
        nRecords++;
        recOffset=ptr;
        readBEInt(rHdr,0);
        recLengthWords=readBEInt(rHdr,4);
        recLengthBytes=recLengthWords * 2;
        if (recLengthBytes > recBufSize) {
          if (logger.isLoggable(Level.FINE)) {
            logger.fine("Shapefile SpatialIndex increasing recBufSize to " + recLengthBytes);
          }
          recBufSize=recLengthBytes;
          recBuf=new byte[recBufSize];
        }
        result=is.read(recBuf,0,recLengthBytes);
        shapeType=readLEInt(recBuf,0);
        if (shapeType != SHAPE_TYPE_NULL) {
          x=readLEDouble(recBuf,4);
          y=readLEDouble(recBuf,12);
        }
        ptr+=recLengthBytes + 8;
        writeBEInt(outBuf,0,(int)(recOffset / 2));
        writeBEInt(outBuf,4,recLengthWords);
        writeLEDouble(outBuf,8,x);
        writeLEDouble(outBuf,16,y);
        writeLEDouble(outBuf,24,x);
        writeLEDouble(outBuf,32,y);
        os.write(outBuf,0,SPATIAL_INDEX_RECORD_LENGTH);
      }
    }
  }
 catch (  java.io.IOException e) {
    e.printStackTrace();
  }
 finally {
    try {
      is.close();
    }
 catch (    java.io.IOException e) {
    }
  }
}

public static String unsignedToString(final int value){
  if (value >= 0) {
    return Integer.toString(value);
  }
 else {
    return Long.toString(value & 0x00000000FFFFFFFFL);
  }
}

public static List<File> findAll(File baseFile,String regex){
  ArrayList<File> found=new ArrayList<File>();
  findAll(baseFile,regex,found);
  return found;
}

public void appendCSSDefinition(StringBuilder buf){
  buf.append("\n.");
  buf.append(name);
  buf.append('{');
  for (  Pair<String,String> pair : statements) {
    buf.append(pair.getFirst());
    buf.append(':');
    buf.append(pair.getSecond());
    buf.append(";\n");
  }
  buf.append("}\n");
}

@Override public boolean eIsSet(int featureID){
switch (featureID) {
case DatatypePackage.CONSTRAINT__TYPE:
    return type != TYPE_EDEFAULT;
case DatatypePackage.CONSTRAINT__CONSTRAINT_VALUES:
  return CONSTRAINT_VALUES_EDEFAULT == null ? constraintValues != null : !CONSTRAINT_VALUES_EDEFAULT.equals(constraintValues);
}
return super.eIsSet(featureID);
}

protected Object cloneObject(Object obj){
  if (obj == null) {
    return null;
  }
  if (obj instanceof String || obj instanceof Boolean || obj instanceof Byte|| obj instanceof Short|| obj instanceof Character|| obj instanceof Integer|| obj instanceof Long|| obj instanceof Float|| obj instanceof Double) {
    return obj;
  }
  if (obj instanceof byte[]) {
    byte[] body=(byte[])obj;
    byte[] data=new byte[body.length];
    System.arraycopy(body,0,data,0,body.length);
    return data;
  }
  return SerializationHelper.deepClone(obj);
}

private void assertWriteVarint(byte[] data,long value) throws Exception {
  if ((value >>> 32) == 0) {
    ByteArrayOutputStream rawOutput=new ByteArrayOutputStream();
    CodedOutputStream output=CodedOutputStream.newInstance(rawOutput);
    output.writeRawVarint32((int)value);
    output.flush();
    assertEqualBytes(data,rawOutput.toByteArray());
    assertEquals(data.length,CodedOutputStream.computeRawVarint32Size((int)value));
  }
{
    ByteArrayOutputStream rawOutput=new ByteArrayOutputStream();
    CodedOutputStream output=CodedOutputStream.newInstance(rawOutput);
    output.writeRawVarint64(value);
    output.flush();
    assertEqualBytes(data,rawOutput.toByteArray());
    assertEquals(data.length,CodedOutputStream.computeRawVarint64Size(value));
  }
  for (int blockSize=1; blockSize <= 16; blockSize*=2) {
    if ((value >>> 32) == 0) {
      ByteArrayOutputStream rawOutput=new ByteArrayOutputStream();
      CodedOutputStream output=CodedOutputStream.newInstance(rawOutput,blockSize);
      output.writeRawVarint32((int)value);
      output.flush();
      assertEqualBytes(data,rawOutput.toByteArray());
    }
{
      ByteArrayOutputStream rawOutput=new ByteArrayOutputStream();
      CodedOutputStream output=CodedOutputStream.newInstance(rawOutput,blockSize);
      output.writeRawVarint64(value);
      output.flush();
      assertEqualBytes(data,rawOutput.toByteArray());
    }
  }
}

public void attach(ActionObserver observer){
  observer.makeOneTimeUse();
  lock.lock();
  try {
    onceUsedObservers.add(observer);
  }
  finally {
    lock.unlock();
  }
}

private void signCertificateChain(){
  List<Certificate> cc=new ArrayList<>();
  cc.add(signCert);
  List<Certificate> oc=new ArrayList<>(certs);
  for (int k=0; k < oc.size(); ++k) {
    if (signCert.equals(oc.get(k))) {
      oc.remove(k);
      --k;
    }
  }
  boolean found=true;
  while (found) {
    X509Certificate v=(X509Certificate)cc.get(cc.size() - 1);
    found=false;
    for (int k=0; k < oc.size(); ++k) {
      X509Certificate issuer=(X509Certificate)oc.get(k);
      try {
        v.verify(issuer.getPublicKey(),provider);
        found=true;
        cc.add(oc.get(k));
        oc.remove(k);
        break;
      }
 catch (      Exception ignored) {
      }
    }
  }
  signCerts=cc;
}

public static String meterToString(OFInstructionMeter inst,Logger log){
  return Long.toString(inst.getMeterId());
}

public String charset(){
  return parameter(HEADER_CONTENT_TYPE,PARAM_CHARSET);
}

public Dimension minimumLayoutSize(Container parent){
  Dimension rd, mbd;
  Insets i=getInsets();
  if (contentPane != null) {
    rd=contentPane.getMinimumSize();
  }
 else {
    rd=parent.getSize();
  }
  if (menuBar != null && menuBar.isVisible()) {
    mbd=menuBar.getMinimumSize();
  }
 else {
    mbd=new Dimension(0,0);
  }
  return new Dimension(Math.max(rd.width,mbd.width) + i.left + i.right,rd.height + mbd.height + i.top+ i.bottom);
}

@Override public void add(int location,E object){
  insertElementAt(object,location);
}

public static boolean checkIfCanUse(String className){
  if (MockList.shouldBeMocked(className)) {
    return false;
  }
  for (  String s : classExceptions) {
    if (className.startsWith(s)) {
      return false;
    }
  }
  return true;
}

private static void applyOverrides(){
  InputStream stream=getContentTypesPropertiesStream();
  if (stream == null) {
    return;
  }
  try {
    try {
      Properties overrides=new Properties();
      overrides.load(stream);
      for (      Map.Entry<Object,Object> entry : overrides.entrySet()) {
        String extension=(String)entry.getKey();
        String mimeType=(String)entry.getValue();
        add(mimeType,extension);
      }
    }
  finally {
      stream.close();
    }
  }
 catch (  IOException ignored) {
  }
}

@Override public void run(){
  amIActive=true;
  String inputHeader=null;
  String outputHeader=null;
  int row, col;
  float progress=0;
  double maxPatchValue=0;
  int x, y;
  boolean blnFoundNeighbour;
  boolean blnIncludeDiagNeighbour=false;
  boolean blnTreatZerosAsBackground=false;
  int i;
  if (args.length <= 0) {
    showFeedback("Plugin parameters have not been set.");
    return;
  }
  for (i=0; i < args.length; i++) {
    if (i == 0) {
      inputHeader=args[i];
    }
 else     if (i == 1) {
      outputHeader=args[i];
    }
 else     if (i == 2) {
      blnIncludeDiagNeighbour=Boolean.parseBoolean(args[i]);
      if (!blnIncludeDiagNeighbour) {
        dX=new int[]{0,1,0,-1};
        dY=new int[]{-1,0,1,0};
      }
    }
 else     if (i == 3) {
      blnTreatZerosAsBackground=Boolean.parseBoolean(args[i]);
    }
  }
  if ((inputHeader == null) || (outputHeader == null)) {
    showFeedback("One or more of the input parameters have not been set properly.");
    return;
  }
  try {
    numScanCells=dY.length;
    image=new WhiteboxRaster(inputHeader,"r");
    int rows=image.getNumberRows();
    int cols=image.getNumberColumns();
    noData=image.getNoDataValue();
    double initialValue=-1;
    output=new WhiteboxRaster(outputHeader,"rw",inputHeader,WhiteboxRaster.DataType.FLOAT,initialValue);
    output.setDataScale(WhiteboxRaster.DataScale.CATEGORICAL);
    output.setPreferredPalette("qual.pal");
    if (blnTreatZerosAsBackground) {
      for (row=0; row < rows; row++) {
        for (col=0; col < cols; col++) {
          if (image.getValue(row,col) == 0) {
            output.setValue(row,col,0);
          }
        }
        if (cancelOp) {
          cancelOperation();
          return;
        }
        progress=(float)(100f * row / (rows - 1));
        updateProgress((int)progress);
      }
      if (output.getValue(0,0) == -1) {
        output.setValue(0,0,1);
      }
    }
 else {
      output.setValue(0,0,0);
    }
    double patchValue=0;
    double neighbourPatchValue=0;
    double newPatchValue=0;
    double imageValue=0;
    int loopNum=1;
    updateProgress("Loop " + loopNum + ":",0);
    for (row=0; row < rows; row++) {
      for (col=0; col < cols; col++) {
        imageValue=image.getValue(row,col);
        if (imageValue != noData) {
          patchValue=output.getValue(row,col);
          if (patchValue == initialValue) {
            blnFoundNeighbour=false;
            for (i=0; i < numScanCells; i++) {
              x=col + dX[i];
              y=row + dY[i];
              neighbourPatchValue=output.getValue(y,x);
              if (neighbourPatchValue != initialValue && image.getValue(y,x) == imageValue) {
                output.setValue(row,col,neighbourPatchValue);
                newPatchValue=neighbourPatchValue;
                blnFoundNeighbour=true;
                break;
              }
            }
            if (!blnFoundNeighbour) {
              maxPatchValue++;
              newPatchValue=maxPatchValue;
              output.setValue(row,col,newPatchValue);
            }
            depth=0;
            ScanConnectedCells(row,col,imageValue,initialValue,newPatchValue);
          }
        }
 else {
          output.setValue(row,col,noData);
        }
      }
      if (cancelOp) {
        cancelOperation();
        return;
      }
      progress=(float)(100f * row / (rows - 1));
      updateProgress((int)progress);
    }
    boolean somethingDone;
    double[] reclass=new double[(int)maxPatchValue + 1];
    do {
      loopNum++;
      updateProgress("Loop " + loopNum + ":",0);
      somethingDone=false;
      for (row=0; row < rows; row++) {
        for (col=0; col < cols; col++) {
          imageValue=image.getValue(row,col);
          if (imageValue != noData) {
            patchValue=output.getValue(row,col);
            for (i=0; i < numScanCells; i++) {
              x=col + dX[i];
              y=row + dY[i];
              neighbourPatchValue=output.getValue(y,x);
              if (neighbourPatchValue != patchValue && image.getValue(y,x) == imageValue) {
                somethingDone=true;
                if (patchValue < neighbourPatchValue) {
                  reclass[(int)neighbourPatchValue]=-1;
                  output.setValue(y,x,patchValue);
                  ScanConnectedCells(y,x,imageValue,neighbourPatchValue,patchValue);
                }
 else {
                  reclass[(int)patchValue]=-1;
                  output.setValue(row,col,neighbourPatchValue);
                  ScanConnectedCells(row,col,imageValue,patchValue,neighbourPatchValue);
                  patchValue=neighbourPatchValue;
                }
              }
            }
          }
        }
        if (cancelOp) {
          cancelOperation();
          return;
        }
        progress=(float)(100f * row / (rows - 1));
        updateProgress((int)progress);
      }
    }
 while (somethingDone);
    i=0;
    for (int a=0; a < maxPatchValue + 1; a++) {
      if (reclass[a] != -1) {
        reclass[a]=i;
        i++;
      }
    }
    loopNum++;
    updateProgress("Loop " + loopNum + ":",0);
    for (row=0; row < rows; row++) {
      for (col=0; col < cols; col++) {
        patchValue=output.getValue(row,col);
        if (patchValue != noData) {
          output.setValue(row,col,reclass[(int)patchValue]);
        }
      }
      if (cancelOp) {
        cancelOperation();
        return;
      }
      progress=(float)(100f * row / (rows - 1));
      updateProgress((int)progress);
    }
    output.addMetadataEntry("Created by the " + getDescriptiveName() + " tool.");
    output.addMetadataEntry("Created on " + new Date());
    image.close();
    output.close();
    returnData(outputHeader);
  }
 catch (  OutOfMemoryError oe) {
    myHost.showFeedback("An out-of-memory error has occurred during operation.");
  }
catch (  Exception e) {
    myHost.showFeedback("An error has occurred during operation. See log file for details.");
    myHost.logException("Error in " + getDescriptiveName(),e);
  }
 finally {
    updateProgress("Progress: ",0);
    amIActive=false;
    myHost.pluginComplete();
  }
}

public static int readAll(InputStream i,byte b[]) throws IOException {
  int len=b.length;
  int n=0;
  while (n < len) {
    int count=i.read(b,n,len - n);
    if (count < 0) {
      return n;
    }
    n+=count;
  }
  return n;
}

public void switchToSimple(Experiment exp){
  if (exp == null) {
    exp=m_advancedPanel.getExperiment();
  }
  if (exp != null && !m_simplePanel.setExperiment(exp)) {
    m_AdvancedSetupRBut.setSelected(true);
    switchToAdvanced(exp);
  }
 else {
    remove(m_advancedPanel);
    m_advancedPanel.removeNotesFrame();
    add(m_simplePanel,BorderLayout.CENTER);
    validate();
    repaint();
  }
}

public static CacheSpan createCacheEntry(File file){
  Matcher matcher=CACHE_FILE_PATTERN_V2.matcher(file.getName());
  if (!matcher.matches()) {
    return null;
  }
  String key=Util.unescapeFileName(matcher.group(1));
  return key == null ? null : createCacheEntry(key,Long.parseLong(matcher.group(2)),Long.parseLong(matcher.group(4)),file);
}

public boolean isComponentPartOfCurrentMenu(Component c){
  if (selection.size() > 0) {
    MenuElement me=selection.elementAt(0);
    return isComponentPartOfCurrentMenu(me,c);
  }
 else   return false;
}

public static int hsba(float h,float s,float b,float a){
  return setAlpha(Color.HSBtoRGB(h,s,b),(int)(a * 255 + 0.5) & 0xFF);
}

LambdaFormBuffer replaceFunctions(NamedFunction[] oldFns,NamedFunction[] newFns,Object... forArguments){
  assert (inTrans());
  if (oldFns.length == 0)   return this;
  for (int i=arity; i < length; i++) {
    Name n=names[i];
    int nfi=indexOf(n.function,oldFns);
    if (nfi >= 0 && Arrays.equals(n.arguments,forArguments)) {
      changeName(i,new Name(newFns[nfi],n.arguments));
    }
  }
  return this;
}

@Override public ClientSocket openIfLive(){
  if (_state.isClosed()) {
    return null;
  }
  ClientSocket stream=openRecycle();
  if (stream != null)   return stream;
  long now=CurrentTime.currentTime();
  if (isFailed(now))   return null;
 else   if (_state == State.FAIL && _startingCount.get() > 0) {
    return null;
  }
  return connect();
}

public void commit(){
  info("COMMITting Solr index changes to " + solrUrl + "..");
  doGet(appendParam(solrUrl.toString(),"commit=true"));
}

public abstract void filesDropped(java.io.File[] files);

protected void waitForThreadToEnterWaitState(Thread thread,long timeoutMillis){
  long startTime=0L;
  for (; ; ) {
    Thread.State s=thread.getState();
    if (s == Thread.State.BLOCKED || s == Thread.State.WAITING || s == Thread.State.TIMED_WAITING)     return;
 else     if (s == Thread.State.TERMINATED)     fail("Unexpected thread termination");
 else     if (startTime == 0L)     startTime=System.nanoTime();
 else     if (millisElapsedSince(startTime) > timeoutMillis) {
      threadAssertTrue(thread.isAlive());
      return;
    }
    Thread.yield();
  }
}

public void forceRewriteExif(String filename,Collection<ExifTag> tags) throws FileNotFoundException, IOException {
  if (!rewriteExif(filename,tags)) {
    ExifData tempData=mData;
    mData=new ExifData(DEFAULT_BYTE_ORDER);
    FileInputStream is=null;
    ByteArrayOutputStream bytes=null;
    try {
      is=new FileInputStream(filename);
      bytes=new ByteArrayOutputStream();
      doExifStreamIO(is,bytes);
      byte[] imageBytes=bytes.toByteArray();
      readExif(imageBytes);
      setTags(tags);
      writeExif(imageBytes,filename);
    }
 catch (    IOException e) {
      closeSilently(is);
      throw e;
    }
 finally {
      is.close();
      mData=tempData;
    }
  }
}

public static LatLng translatePoint(LatLng point,double distance,double bearing){
  distance=distance / 1000d;
  double lat=Math.toRadians(point.latitude);
  double lng=Math.toRadians(point.longitude);
  bearing=Math.toRadians(bearing);
  double Lat2=Math.asin((Math.sin(lat) * Math.cos(distance / EARTH)) + (Math.cos(lat) * Math.sin(distance / EARTH) * Math.cos(bearing)));
  double Long2=lng + Math.atan2(Math.sin(bearing) * Math.sin(distance / EARTH) * Math.cos(lat),Math.cos(distance / EARTH) - (Math.sin(lat) * Math.sin(Lat2)));
  Lat2=Math.toDegrees(Lat2);
  Long2=Math.toDegrees(Long2);
  return new LatLng(Lat2,Long2);
}

public boolean init(){
  log.config("");
  MClient client=MClient.get(Env.getCtx());
  String ASPFilter="";
  if (client.isUseASP())   ASPFilter="   AND (   p.AD_Process_Para_ID IN ( " + "              SELECT pp.AD_Process_Para_ID " + "                FROM ASP_Process_Para pp, ASP_Process p, ASP_Level l, ASP_ClientLevel cl "+ "               WHERE p.ASP_Level_ID = l.ASP_Level_ID "+ "                 AND cl.AD_Client_ID = " + client.getAD_Client_ID() + "                 AND cl.ASP_Level_ID = l.ASP_Level_ID "+ "                 AND pp.ASP_Process_ID = p.ASP_Process_ID "+ "                 AND pp.IsActive = 'Y' "+ "                 AND p.IsActive = 'Y' "+ "                 AND l.IsActive = 'Y' "+ "                 AND cl.IsActive = 'Y' "+ "                 AND pp.ASP_Status = 'S') "+ "        OR p.AD_Process_Para_ID IN ( "+ "              SELECT AD_Process_Para_ID "+ "                FROM ASP_ClientException ce "+ "               WHERE ce.AD_Client_ID = "+ client.getAD_Client_ID()+ "                 AND ce.IsActive = 'Y' "+ "                 AND ce.AD_Process_Para_ID IS NOT NULL "+ "                 AND ce.AD_Tab_ID IS NULL "+ "                 AND ce.AD_Field_ID IS NULL "+ "                 AND ce.ASP_Status = 'S') "+ "       ) "+ "   AND p.AD_Process_Para_ID NOT IN ( "+ "          SELECT AD_Process_Para_ID "+ "            FROM ASP_ClientException ce "+ "           WHERE ce.AD_Client_ID = "+ client.getAD_Client_ID()+ "             AND ce.IsActive = 'Y' "+ "             AND ce.AD_Process_Para_ID IS NOT NULL "+ "             AND ce.AD_Tab_ID IS NULL "+ "             AND ce.AD_Field_ID IS NULL "+ "             AND ce.ASP_Status = 'H')";
  String sql=null;
  if (Env.isBaseLanguage(Env.getCtx(),"AD_Process_Para"))   sql="SELECT p.Name, p.Description, p.Help, " + "p.AD_Reference_ID, p.AD_Process_Para_ID, " + "p.FieldLength, p.IsMandatory, p.IsRange, p.ColumnName, "+ "p.DefaultValue, p.DefaultValue2, p.VFormat, p.ValueMin, p.ValueMax, "+ "p.SeqNo, p.AD_Reference_Value_ID, vr.Code AS ValidationCode, "+ "p.ReadOnlyLogic, p.DisplayLogic "+ "FROM AD_Process_Para p"+ " LEFT OUTER JOIN AD_Val_Rule vr ON (p.AD_Val_Rule_ID=vr.AD_Val_Rule_ID) "+ "WHERE p.AD_Process_ID=?"+ " AND p.IsActive='Y' " + ASPFilter + " ORDER BY SeqNo";
 else   sql="SELECT t.Name, t.Description, t.Help, " + "p.AD_Reference_ID, p.AD_Process_Para_ID, " + "p.FieldLength, p.IsMandatory, p.IsRange, p.ColumnName, "+ "p.DefaultValue, p.DefaultValue2, p.VFormat, p.ValueMin, p.ValueMax, "+ "p.SeqNo, p.AD_Reference_Value_ID, vr.Code AS ValidationCode, "+ "p.ReadOnlyLogic, p.DisplayLogic "+ "FROM AD_Process_Para p"+ " INNER JOIN AD_Process_Para_Trl t ON (p.AD_Process_Para_ID=t.AD_Process_Para_ID)"+ " LEFT OUTER JOIN AD_Val_Rule vr ON (p.AD_Val_Rule_ID=vr.AD_Val_Rule_ID) "+ "WHERE p.AD_Process_ID=?"+ " AND t.AD_Language='" + Env.getAD_Language(Env.getCtx()) + "'"+ " AND p.IsActive='Y' "+ ASPFilter+ " ORDER BY SeqNo";
  boolean hasFields=false;
  Rows rows=new Rows();
  try {
    PreparedStatement pstmt=DB.prepareStatement(sql,null);
    pstmt.setInt(1,m_processInfo.getAD_Process_ID());
    ResultSet rs=pstmt.executeQuery();
    int field=0;
    Row row=null;
    while (rs.next()) {
      hasFields=true;
      field++;
      if (field % 2 == 0 && mode == BROWSER_MODE) {
        row=createField(rs,rows,row);
      }
 else {
        row=createField(rs,rows,null);
      }
    }
    rs.close();
    pstmt.close();
  }
 catch (  SQLException e) {
    log.log(Level.SEVERE,sql,e);
  }
  if (m_mFields.size() != m_mFields2.size() || m_mFields.size() != m_wEditors.size() || m_mFields2.size() != m_wEditors2.size())   log.log(Level.SEVERE,"View & Model vector size is different");
  if (hasFields) {
    centerPanel.appendChild(rows);
    dynamicDisplay();
  }
 else   dispose();
  return hasFields;
}

public static String detectPropertiesPath(){
  String override=System.getProperty("sslPropertiesFile");
  if (override != null) {
    return override;
  }
  String jarPath=detectJarPath();
  String propFile=Constants.PROPS_FILE + ".properties";
  return fixWhitespaces(getParentDirectory(jarPath) + File.separator + propFile);
}

static int formatFloat(final char[] out,float val,int digits){
  boolean negative=false;
  if (val == 0) {
    out[0]='0';
    return 1;
  }
  if (val < 0) {
    negative=true;
    val=-val;
  }
  if (digits >= POW10.length) {
    digits=POW10.length - 1;
  }
  val*=POW10[digits];
  long lval=Math.round(val);
  int index=out.length - 1;
  int charCount=0;
  while (lval != 0 || charCount < (digits + 1)) {
    int digit=(int)(lval % 10);
    lval=lval / 10;
    out[index--]=(char)(digit + '0');
    charCount++;
    if (charCount == digits) {
      out[index--]='.';
      charCount++;
    }
  }
  if (negative) {
    out[index]='-';
    charCount++;
  }
  return charCount;
}

public void acceptPackage(char[] packageName){
}

public void resume(){
  mPaused=false;
  mLastFrameTime=System.currentTimeMillis();
  invalidate();
}

public GaussianDensityFunction(Double mean,Double variance){
  this.mean=new double[]{mean};
  this.variance=new double[]{variance};
  stdDev=new double[]{Math.sqrt(variance)};
  if (variance < 0) {
    log.warning("variance should not be negative, but is : " + variance);
  }
}

int encryptFinal(byte[] in,int inOfs,int len,byte[] out,int outOfs) throws IllegalBlockSizeException, ShortBufferException {
  if (out.length - outOfs < (len + tagLenBytes)) {
    throw new ShortBufferException("Output buffer too small");
  }
  processAAD();
  if (len > 0) {
    doLastBlock(in,inOfs,len,out,outOfs,true);
  }
  byte[] lengthBlock=getLengthBlock(sizeOfAAD * 8,processed * 8);
  ghashAllToS.update(lengthBlock);
  byte[] s=ghashAllToS.digest();
  byte[] sOut=new byte[s.length];
  GCTR gctrForSToTag=new GCTR(embeddedCipher,this.preCounterBlock);
  gctrForSToTag.doFinal(s,0,s.length,sOut,0);
  System.arraycopy(sOut,0,out,(outOfs + len),tagLenBytes);
  return (len + tagLenBytes);
}

private float interpolate(){
  long currTime=System.currentTimeMillis();
  float elapsed=(currTime - startTime) / ZOOM_TIME;
  elapsed=Math.min(1f,elapsed);
  return interpolator.getInterpolation(elapsed);
}

public static String componentToImageColName(String component){
  if (component.equals(MixnMatchColumns.KEY_HOMESCREEN)) {
    return ThemesColumns.HOMESCREEN_URI;
  }
 else   if (component.equals(MixnMatchColumns.KEY_LOCKSCREEN)) {
    return ThemesColumns.LOCKSCREEN_URI;
  }
 else   if (component.equals(MixnMatchColumns.KEY_BOOT_ANIM)) {
    return ThemesColumns.BOOT_ANIM_URI;
  }
 else   if (component.equals(MixnMatchColumns.KEY_FONT)) {
    return ThemesColumns.FONT_URI;
  }
 else   if (component.equals(MixnMatchColumns.KEY_ICONS)) {
    return ThemesColumns.ICON_URI;
  }
 else   if (component.equals(MixnMatchColumns.KEY_STATUS_BAR)) {
    return ThemesColumns.STATUSBAR_URI;
  }
 else   if (component.equals(MixnMatchColumns.KEY_NOTIFICATIONS)) {
    throw new IllegalArgumentException("Notifications mixnmatch component does not have a related column");
  }
 else   if (component.equals(MixnMatchColumns.KEY_RINGTONE)) {
    throw new IllegalArgumentException("Ringtone mixnmatch component does not have a related column");
  }
 else   if (component.equals(MixnMatchColumns.KEY_OVERLAYS)) {
    return ThemesColumns.OVERLAYS_URI;
  }
 else   if (component.equals(MixnMatchColumns.KEY_ALARM)) {
    throw new IllegalArgumentException("Alarm mixnmatch component does not have a related column");
  }
 else   if (component.equals(MixnMatchColumns.KEY_NAVIGATION_BAR)) {
    throw new IllegalArgumentException("Navigation bar mixnmatch component does not have a related column");
  }
 else   if (component.equals(MixnMatchColumns.KEY_LIVE_LOCK_SCREEN)) {
    throw new IllegalArgumentException("Live lock screen mixnmatch component does not have a related column");
  }
  return null;
}

public boolean isAbstract(){
  return Modifier.isAbstract(_method.getModifiers());
}

public void nodeClicked(RequestInvocationEvent event,int nodeID){
  boolean forwardTo=false;
  String strNodeId=Integer.toString(nodeID);
  if (strNodeId.length() > 2) {
    String prefix=strNodeId.substring(0,2);
    if (prefix.equals(AMAdminConstants.TAB_AGENT_PREFIX)) {
      setPageSessionAttribute(getTrackingTabIDName(),Integer.toString(nodeID));
      AMViewConfig amconfig=AMViewConfig.getInstance();
      List list=amconfig.getSupportedAgentTypes(getModel());
      strNodeId=strNodeId.substring(2);
      int idx=Integer.parseInt(strNodeId);
      if (idx < list.size()) {
        setPageSessionAttribute(PG_SESSION_AGENT_TYPE,(String)list.get(idx));
        AMPostViewBean vb=(AMPostViewBean)getViewBean(AMPostViewBean.class);
        passPgSessionMap(vb);
        vb.setTargetViewBeanURL("../agentconfig/Agents");
        vb.forwardTo(getRequestContext());
        forwardTo=true;
      }
    }
  }
  if (!forwardTo) {
    try {
      AMViewBeanBase vb=getTabNodeAssociatedViewBean("realms",nodeID);
      String tmp=(String)getPageSessionAttribute(AMAdminConstants.PREVIOUS_REALM);
      vb.setPageSessionAttribute(AMAdminConstants.PREVIOUS_REALM,tmp);
      tmp=(String)getPageSessionAttribute(AMAdminConstants.CURRENT_REALM);
      vb.setPageSessionAttribute(AMAdminConstants.CURRENT_REALM,tmp);
      tmp=(String)getPageSessionAttribute(AMAdminConstants.PREVIOUS_TAB_ID);
      vb.setPageSessionAttribute(AMAdminConstants.PREVIOUS_TAB_ID,tmp);
      unlockPageTrailForSwapping();
      passPgSessionMap(vb);
      vb.forwardTo(getRequestContext());
    }
 catch (    AMConsoleException e) {
      debug.error("AgentViewBean.nodeClicked",e);
      forwardTo();
    }
  }
}

private static void parseCopyFields(ParseContext context,FieldMapper fieldMapper,List<String> copyToFields) throws IOException {
  if (!context.isWithinCopyTo() && copyToFields.isEmpty() == false) {
    context=context.createCopyToContext();
    for (    String field : copyToFields) {
      ParseContext.Document targetDoc=null;
      for (ParseContext.Document doc=context.doc(); doc != null; doc=doc.getParent()) {
        if (field.startsWith(doc.getPrefix())) {
          targetDoc=doc;
          break;
        }
      }
      assert targetDoc != null;
      final ParseContext copyToContext;
      if (targetDoc == context.doc()) {
        copyToContext=context;
      }
 else {
        copyToContext=context.switchDoc(targetDoc);
      }
      parseCopy(field,copyToContext);
    }
  }
}

protected File createObbFile(String name,int rawResId){
  File outFile=null;
  try {
    final File filesDir=mContext.getFilesDir();
    outFile=new File(filesDir,name);
    copyRawToFile(rawResId,outFile);
  }
 catch (  NotFoundException e) {
    if (outFile != null) {
      outFile.delete();
    }
  }
  return outFile;
}

public PlaySoundEntity(String sound,int radius,int volume){
  this.sounds=sound.split(", *");
  this.radius=radius;
  this.volume=volume;
}

public Repository(String domain){
  this(domain,true);
}

private void updateView(int viewPosition){
  notifyItemChanged(viewPosition);
}

public static String optimize(String... args){
  return simpleTag("optimize",args);
}

protected boolean isValidServer(final String server){
  boolean isValid=checkServerPrefixes(server);
  if (isValid) {
    if (server.startsWith("http")) {
      isValid=canConnect(server);
    }
 else     if (server.startsWith("file:")) {
      isValid=isDirectory(server);
    }
  }
  return isValid;
}

public ConcurrentHashMap(Map<? extends K,? extends V> m){
  this(Math.max((int)(m.size() / DEFAULT_LOAD_FACTOR) + 1,DEFAULT_INITIAL_CAPACITY),DEFAULT_LOAD_FACTOR,DEFAULT_CONCURRENCY_LEVEL);
  putAll(m);
}

public MapMaker expiration(long duration,TimeUnit unit){
  if (expirationNanos != 0) {
    throw new IllegalStateException("expiration time of " + expirationNanos + " ns was already set");
  }
  if (duration <= 0) {
    throw new IllegalArgumentException("invalid duration: " + duration);
  }
  this.expirationNanos=unit.toNanos(duration);
  useCustomMap=true;
  return this;
}

void initFromNode(final Node fromNode,final double startTime,final PseudoRemovePriorityQueue<Node> pendingNodes){
  DijkstraNodeData data=getData(fromNode);
  visitNode(fromNode,data,pendingNodes,startTime,0,null);
}

public Collection<HTMLToken> tokenizeHTML(){
  List<HTMLToken> tokens=new ArrayList<HTMLToken>();
  String nestedTags=nestedTagsRegex(6);
  Pattern p=Pattern.compile("" + "(?s:<!(--.*?--\\s*)+>)" + "|"+ "(?s:<\\?.*?\\?>)"+ "|" + nestedTags + "",Pattern.CASE_INSENSITIVE);
  Matcher m=p.matcher(text);
  int lastPos=0;
  while (m.find()) {
    if (lastPos < m.start()) {
      tokens.add(HTMLToken.text(text.substring(lastPos,m.start())));
    }
    tokens.add(HTMLToken.tag(text.substring(m.start(),m.end())));
    lastPos=m.end();
  }
  if (lastPos < text.length()) {
    tokens.add(HTMLToken.text(text.substring(lastPos,text.length())));
  }
  return tokens;
}

public int decryptBlock(byte[] in,int inOff,byte[] out,int outOff) throws DataLengthException, IllegalStateException {
  if ((inOff + blockSize) > in.length) {
    throw new DataLengthException("input buffer too short");
  }
  if ((outOff + blockSize) > out.length) {
    throw new DataLengthException("output buffer too short");
  }
  cipher.processBlock(cfbV,0,cfbOutV,0);
  System.arraycopy(cfbV,blockSize,cfbV,0,cfbV.length - blockSize);
  System.arraycopy(in,inOff,cfbV,cfbV.length - blockSize,blockSize);
  for (int i=0; i < blockSize; i++) {
    out[outOff + i]=(byte)(cfbOutV[i] ^ in[inOff + i]);
  }
  return blockSize;
}

private String computeMd5Hash(String buffer){
  MessageDigest md;
  try {
    md=MessageDigest.getInstance("MD5");
    return bytesToHex(md.digest(buffer.getBytes("UTF-8")));
  }
 catch (  NoSuchAlgorithmException ignore) {
  }
catch (  UnsupportedEncodingException e) {
  }
  return "";
}

public static void checkArgument(boolean expression,@Nullable Object errorMessage){
  if (!expression) {
    throw new IllegalArgumentException(String.valueOf(errorMessage));
  }
}

public void run() throws IOException, InterruptedException {
  for (int i=0; i < connCnt; i++)   exec.submit(new ClientThread());
  Thread.sleep(5 * 60 * 1000);
  exec.shutdownNow();
}

public static String pluralize(String word){
  if (word == null) {
    throw new IllegalArgumentException();
  }
  final String lowerCaseWord=word.toLowerCase();
  if (endsWithAny(lowerCaseWord,"s","sh","o")) {
    return word + "es";
  }
  if (lowerCaseWord.endsWith("y") && !lowerCaseWord.endsWith("ay") || endsWithAny(lowerCaseWord,"ey","oy","uy")) {
    return word.substring(0,word.length() - 1) + "ies";
  }
 else {
    return word + "s";
  }
}

protected void onNetworkTypeChange(NetworkInfo oldNetwork,NetworkInfo newNetwork) throws RouterException {
  log.info(String.format("Network type changed %s => %s",oldNetwork == null ? "" : oldNetwork.getTypeName(),newNetwork == null ? "NONE" : newNetwork.getTypeName()));
  if (disable()) {
    log.info(String.format("Disabled router on network type change (old network: %s)",oldNetwork == null ? "NONE" : oldNetwork.getTypeName()));
  }
  networkInfo=newNetwork;
  if (enable()) {
    log.info(String.format("Enabled router on network type change (new network: %s)",newNetwork == null ? "NONE" : newNetwork.getTypeName()));
  }
}

private LinkedHashMap<Term,Integer> repeatingTerms(){
  LinkedHashMap<Term,Integer> tord=new LinkedHashMap<>();
  HashMap<Term,Integer> tcnt=new HashMap<>();
  for (  PhrasePositions pp : phrasePositions) {
    for (    Term t : pp.terms) {
      Integer cnt0=tcnt.get(t);
      Integer cnt=cnt0 == null ? new Integer(1) : new Integer(1 + cnt0.intValue());
      tcnt.put(t,cnt);
      if (cnt == 2) {
        tord.put(t,tord.size());
      }
    }
  }
  return tord;
}

public List<InetAddress> discoverHosts(int udpPort,int timeoutMillis){
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  DatagramSocket socket=null;
  try {
    socket=new DatagramSocket();
    broadcast(udpPort,socket);
    socket.setSoTimeout(timeoutMillis);
    while (true) {
      DatagramPacket packet=new DatagramPacket(new byte[0],0);
      try {
        socket.receive(packet);
      }
 catch (      SocketTimeoutException ex) {
        if (INFO)         info("kryonet","Host discovery timed out.");
        return hosts;
      }
      if (INFO)       info("kryonet","Discovered server: " + packet.getAddress());
      hosts.add(packet.getAddress());
    }
  }
 catch (  IOException ex) {
    if (ERROR)     error("kryonet","Host discovery failed.",ex);
    return hosts;
  }
 finally {
    if (socket != null)     socket.close();
  }
}

protected void reloadClusterConfiguration(){
synchronized (this.cluster) {
    loadClusterConfiguration();
  }
}

public double expectedUtility(NondominatedPopulation population){
  double sum=0.0;
  for (int i=0; i < weights.length; i++) {
    double max=Double.NEGATIVE_INFINITY;
    for (    Solution solution : population) {
      max=Math.max(max,utilityFunction.computeUtility(solution,weights[i]));
    }
    sum+=max;
  }
  return sum / weights.length;
}

public void count(HashMap<String,TreeMap<String,Integer>> table,String suffix,String tag){
  TreeMap<String,Integer> counts=table.get(suffix);
  if (counts == null) {
    counts=new TreeMap<String,Integer>();
    table.put(suffix,counts);
  }
  Integer count=counts.get(tag);
  if (count == null)   count=0;
  counts.put(tag,count + 1);
}

public void addInputMode(String mode,String[][] inputChars){
  modesMap.put(mode,inputChars);
}

public static void sleep(int msec) throws InterruptedException {
  Thread.sleep(msec);
}

public static java.util.Date toDate(String monthStr,String dayStr,String yearStr,String hourStr,String minuteStr,String secondStr){
  int month, day, year, hour, minute, second;
  try {
    month=Integer.parseInt(monthStr);
    day=Integer.parseInt(dayStr);
    year=Integer.parseInt(yearStr);
    hour=Integer.parseInt(hourStr);
    minute=Integer.parseInt(minuteStr);
    second=Integer.parseInt(secondStr);
  }
 catch (  Exception e) {
    return null;
  }
  return toDate(month,day,year,hour,minute,second);
}

public void propertyChange(PropertyChangeEvent pce){
  if (pce.getPropertyName() == OMDrawingTool.LoadersProperty) {
    Object obj=pce.getNewValue();
    if (obj instanceof Vector) {
      Vector<EditToolLoader> loaders=(Vector<EditToolLoader>)obj;
      setLoaders(loaders.iterator());
      resetGUI();
    }
  }
}

public void removeAppOffer(Offer offer){
  int indexToRemove=getIndex(offer);
  if (indexToRemove != -1) {
    appOffers.remove(indexToRemove);
    notifyDataSetChanged();
  }
}

public Data transform(Data data,XMLCryptoContext xc) throws TransformException {
  return spi.transform(data,xc);
}

public static int compare(Comparable c1,Comparable c2,boolean nullGreater){
  if (c1 == c2) {
    return 0;
  }
 else   if (c1 == null) {
    return (nullGreater ? 1 : -1);
  }
 else   if (c2 == null) {
    return (nullGreater ? -1 : 1);
  }
  return c1.compareTo(c2);
}

public static double quantile(double val,double mu,double sigma,double xi){
  if (val < 0.0 || val > 1.0) {
    return Double.NaN;
  }
  if (xi == 0.) {
    return mu - sigma * Math.log(1 - val);
  }
  return mu - sigma / xi * (1 - Math.pow(1 - val,-xi));
}

OathDeviceSettings createDeviceProfile(int minSharedSecretLength){
  Reject.ifFalse(minSharedSecretLength >= 0,"minSharedSecretLength must not be negative");
  int sharedSecretByteLength=Math.max(MIN_SHARED_SECRET_BYTE_LENGTH,(int)Math.ceil(minSharedSecretLength / 2d));
  byte[] secretBytes=new byte[sharedSecretByteLength];
  secureRandom.nextBytes(secretBytes);
  String sharedSecret=DatatypeConverter.printHexBinary(secretBytes);
  return new OathDeviceSettings(sharedSecret,DEVICE_NAME,INITIAL_LAST_LOGIN_TIME,INITIAL_COUNTER_VALUE);
}

public final void deleteSelectedObjects(){
  Component[] components=getComponents();
  List<DisplayNode> graphNodes=new ArrayList<>();
  List<IDisplayEdge> graphEdges=new ArrayList<>();
  for (  Component comp : components) {
    if (comp instanceof DisplayNode) {
      if (!isDeleteVariablesAllowed()) {
        continue;
      }
      DisplayNode node=(DisplayNode)comp;
      if (node.isSelected()) {
        graphNodes.add(node);
      }
    }
 else     if (comp instanceof IDisplayEdge) {
      IDisplayEdge edge=(IDisplayEdge)comp;
      if (edge.isSelected()) {
        graphEdges.add(edge);
      }
    }
  }
  for (  DisplayNode graphNode : graphNodes) {
    removeNode(graphNode);
  }
  for (  IDisplayEdge displayEdge : graphEdges) {
    try {
      removeEdge(displayEdge);
      resetEdgeOffsets(displayEdge);
    }
 catch (    Exception e) {
      if (isNodeEdgeErrorsReported()) {
        JOptionPane.showMessageDialog(JOptionUtils.centeringComp(),e.getMessage());
      }
    }
  }
}

protected final void initStatistics(String who,String[] headerLines) throws AdeException {
  setStatsFilePath();
  if (statsFilePath == null) {
    throw new AdeInternalException("No Statistics File path was specified");
  }
  appendStatString(SPACER);
  appendStatString(String.format("[%s] %s start (approximate)",currentTimeStamp(),who));
  appendStatString(SPACER);
  for (int i=0; i < headerLines.length; i++) {
    appendStatString(headerLines[i]);
  }
  appendStatString(SPACER);
}

public static Map<String,Object> dayEndCapacityAvailable(GenericValue techDataCalendarWeek,int dayEnd){
  Map<String,Object> result=FastMap.newInstance();
  int moveDay=0;
  Double capacity=null;
  Time startTime=null;
  while (capacity == null || capacity.doubleValue() == 0) {
switch (dayEnd) {
case Calendar.MONDAY:
      capacity=techDataCalendarWeek.getDouble("mondayCapacity");
    startTime=techDataCalendarWeek.getTime("mondayStartTime");
  break;
case Calendar.TUESDAY:
capacity=techDataCalendarWeek.getDouble("tuesdayCapacity");
startTime=techDataCalendarWeek.getTime("tuesdayStartTime");
break;
case Calendar.WEDNESDAY:
capacity=techDataCalendarWeek.getDouble("wednesdayCapacity");
startTime=techDataCalendarWeek.getTime("wednesdayStartTime");
break;
case Calendar.THURSDAY:
capacity=techDataCalendarWeek.getDouble("thursdayCapacity");
startTime=techDataCalendarWeek.getTime("thursdayStartTime");
break;
case Calendar.FRIDAY:
capacity=techDataCalendarWeek.getDouble("fridayCapacity");
startTime=techDataCalendarWeek.getTime("fridayStartTime");
break;
case Calendar.SATURDAY:
capacity=techDataCalendarWeek.getDouble("saturdayCapacity");
startTime=techDataCalendarWeek.getTime("saturdayStartTime");
break;
case Calendar.SUNDAY:
capacity=techDataCalendarWeek.getDouble("sundayCapacity");
startTime=techDataCalendarWeek.getTime("sundayStartTime");
break;
}
if (capacity == null || capacity.doubleValue() == 0) {
moveDay-=1;
dayEnd=(dayEnd == 1) ? 7 : dayEnd - 1;
}
}
result.put("capacity",capacity);
result.put("startTime",startTime);
result.put("moveDay",Integer.valueOf(moveDay));
return result;
}

protected void addClassPath(String classpath){
  if (classpath == null)   return;
  String sep=classpath.indexOf(";") == -1 ? ":" : ";";
  String[] parseCp=classpath.split(sep);
  for (  String cpEntry : parseCp) {
    addEntry(cpEntry);
  }
}

@Inject EntryUploaderImpl(EntryInserter entryInserter,EntryProvider entryProvider,EntryUpdater entryUpdater){
  this.entryInserter=checkNotNull(entryInserter);
  this.entryProvider=checkNotNull(entryProvider);
  this.entryUpdater=checkNotNull(entryUpdater);
}

protected void add(long bytesIn,long bytesOut){
  totalBytesIn.addAndGet(bytesIn);
  totalBytesOut.addAndGet(bytesOut);
}

public static double vectorDistance(double[] vec1,double[] vec2,double power,double oneOverPower){
  double result=0;
  if (power == 0) {
    for (int i=0; i < vec1.length; i++) {
      result+=vec1[i] - vec2[i] == 0 ? 0 : 1;
    }
  }
 else   if (power == 1.0) {
    for (int i=0; i < vec1.length; i++) {
      result+=Math.abs(vec1[i] - vec2[i]);
    }
  }
 else   if (power == 2.0) {
    result=Math.sqrt(distSquaredCartesian(vec1,vec2));
  }
 else   if (power == Integer.MAX_VALUE || Double.isInfinite(power)) {
    for (int i=0; i < vec1.length; i++) {
      result=Math.max(result,Math.max(vec1[i],vec2[i]));
    }
  }
 else {
    for (int i=0; i < vec1.length; i++) {
      result+=Math.pow(vec1[i] - vec2[i],power);
    }
    result=Math.pow(result,oneOverPower);
  }
  return result;
}

public static float[] randomVector(int aSize,long seed){
  Random rand=new Random(seed);
  float[] unk=new float[aSize];
  for (int i=0; i < unk.length; i++) {
    unk[i]=(rand.nextFloat() - 0.5f) / aSize;
  }
  return unk;
}

public boolean wasRaw(){
  return wasRaw;
}

public Table findTable(String catalogName,String schemaName,String tableName,boolean caseSensitive){
  String cacheKey=catalogName + "." + schemaName+ "."+ tableName+ "."+ caseSensitive;
  Integer tableIndex=tableIndexCache.get(cacheKey);
  if (tableIndex != null) {
    if (tableIndex < getTableCount()) {
      Table table=getTable(tableIndex);
      if (doesMatch(table,catalogName,schemaName,tableName,caseSensitive)) {
        return table;
      }
    }
  }
  Table[] tables=getTables();
  for (int i=0; i < tables.length; i++) {
    Table table=tables[i];
    if (doesMatch(table,catalogName,schemaName,tableName,caseSensitive)) {
      tableIndexCache.put(cacheKey,i);
      return table;
    }
  }
  return null;
}

public void testDomainMatchesOnLocalAddresses(){
  assertFalse(HttpCookie.domainMatches("localhost","localhost"));
  assertFalse(HttpCookie.domainMatches("b","b"));
}

public void flush(){
  writeDataBlock();
}

protected CRFPCoverageBox[] vectorToCRFPCoverageBoxes(Vector vector){
  int size=vector.size();
  CRFPCoverageBox[] rets=new CRFPCoverageBox[size];
  for (int i=0; i < size; i++) {
    RpfCoverageBox box=(RpfCoverageBox)vector.elementAt(i);
    if (box != null) {
      rets[i]=new CRFPCoverageBox((float)box.nw_lat,(float)box.nw_lon,(float)box.se_lat,(float)box.se_lon,box.subframeLatInterval,box.subframeLonInterval,box.chartCode,(short)box.zone,new XYPoint((short)box.startIndexes.x,(short)box.startIndexes.y),new XYPoint((short)box.endIndexes.x,(short)box.endIndexes.y),(short)box.tocNumber,(short)box.entryNumber,box.scale,box.percentCoverage);
    }
  }
  return rets;
}

public void notifyListenersOfInitialization(){
  if (initialized) {
    for (    ActionListener l : listeners) {
      l.actionPerformed(new ActionEvent(this,ActionEvent.ACTION_PERFORMED,"rugInitialized"));
    }
  }
}

public void checkPassword(String password) throws BadRequestException {
  if (password == null) {
    throw new BadRequestException("Password required");
  }
  if (password.length() < 8) {
    throw new BadRequestException("Password should contain at least 8 characters");
  }
  int numOfLetters=0;
  int numOfDigits=0;
  for (  char passwordChar : password.toCharArray()) {
    if (Character.isDigit(passwordChar)) {
      numOfDigits++;
    }
 else     if (Character.isLetter(passwordChar)) {
      numOfLetters++;
    }
  }
  if (numOfDigits == 0 || numOfLetters == 0) {
    throw new BadRequestException("Password should contain letters and digits");
  }
}

final Node<K,V> find(int h,Object k){
  if (k != null) {
    for (Node<K,V> e=first; e != null; ) {
      int s;
      K ek;
      if (((s=lockState) & (WAITER | WRITER)) != 0) {
        if (e.hash == h && ((ek=e.key) == k || (ek != null && k.equals(ek))))         return e;
        e=e.next;
      }
 else       if (U.compareAndSwapInt(this,LOCKSTATE,s,s + READER)) {
        TreeNode<K,V> r, p;
        try {
          p=((r=root) == null ? null : r.findTreeNode(h,k,null));
        }
  finally {
          Thread w;
          if (U.getAndAddInt(this,LOCKSTATE,-READER) == (READER | WAITER) && (w=waiter) != null)           LockSupport.unpark(w);
        }
        return p;
      }
    }
  }
  return null;
}

@SuppressWarnings("rawtypes") private void collectAllRegionsDetails(SystemMemberCacheJmxImpl cache,RegionSubRegionSnapshot regionSnapshot,Map<String,Map<String,?>> regionsInfo,Map<String,ObjectName> existingRegionMbeans) throws AdminException, OperationsException, MBeanException, ReflectionException {
  String fullPath=regionSnapshot.getFullPath();
  if (!fullPath.equals(PLACE_HOLDER_ROOT_REGION)) {
    fullPath=fullPath.substring(PLACE_HOLDER_ROOT_REGION.length() - 1);
    String name=regionSnapshot.getName();
    Integer entryCount=Integer.valueOf(regionSnapshot.getEntryCount());
    Map<String,Object> details=new TreeMap<String,Object>();
    details.put(REGION_NAME,name);
    details.put(REGION_PATH,fullPath);
    details.put(REGION_ENTRYCOUNT,entryCount);
    ObjectName regionObjectName=existingRegionMbeans.get(fullPath);
    if (regionObjectName == null) {
      regionObjectName=cache.manageRegion(fullPath);
    }
    Object attribute=getAttribute(regionObjectName,"scope",NOT_AVAILABLE);
    attribute=attribute != null ? attribute.toString() : attribute;
    details.put(REGION_SCOPE,attribute);
    attribute=getAttribute(regionObjectName,"dataPolicy",NOT_AVAILABLE);
    attribute=attribute != null ? attribute.toString() : attribute;
    details.put(REGION_DATAPOLICY,attribute);
    SubscriptionAttributes interestPolicyAttr=(SubscriptionAttributes)getAttribute(regionObjectName,"subscriptionAttributes",null);
    String interestPolicyStr=NOT_AVAILABLE;
    if (interestPolicyAttr != null) {
      InterestPolicy interestPolicy=interestPolicyAttr.getInterestPolicy();
      if (interestPolicy != null) {
        interestPolicyStr=interestPolicy.toString();
      }
    }
    details.put(REGION_INTERESTPOLICY,interestPolicyStr);
    attribute=getAttribute(regionObjectName,"diskWriteAttributes",NOT_AVAILABLE);
    attribute=attribute != null ? attribute.toString() : attribute;
    details.put(REGION_DISKATTRS,attribute);
    regionsInfo.put(fullPath,details);
  }
  Set subRegionSnapshots=regionSnapshot.getSubRegionSnapshots();
  for (Iterator iterator=subRegionSnapshots.iterator(); iterator.hasNext(); ) {
    RegionSubRegionSnapshot subRegion=(RegionSubRegionSnapshot)iterator.next();
    collectAllRegionsDetails(cache,subRegion,regionsInfo,existingRegionMbeans);
  }
}

public synchronized boolean removeSuspendedResponse(WorkerCategory category,Response response){
  Deque<Response> deque=workersByCategory.get(category);
  if (deque == null) {
    return false;
  }
  if (deque.remove(response)) {
    nWaitingConsumers-=1;
    LOG.debug("Removed closed connection from queue.");
    return true;
  }
  return false;
}

public static Number sin(Number a){
  return Math.sin(a.doubleValue());
}

private TypedClassOperation instantiateOperationTypes(TypedClassOperation operation){
  List<TypeVariable> typeParameters=operation.getTypeParameters();
  if (typeParameters.isEmpty()) {
    return operation;
  }
  Substitution<ReferenceType> substitution=selectSubstitution(typeParameters);
  if (substitution == null) {
    return null;
  }
  return operation.apply(substitution);
}

default T fold(final T identity,final BinaryOperator<T> accumulator){
  final Optional<T> opt=toOptional();
  if (opt.isPresent())   return accumulator.apply(identity,get());
  return identity;
}

protected void load(String filename,Properties p) throws FileNotFoundException {
  File file=new File(filename);
  if (!file.exists())   throw new FileNotFoundException(filename);
  classifier=new CRFClassifier<CoreLabel>(p);
  try {
    classifier.loadClassifier(file,p);
  }
 catch (  ClassCastException e) {
    e.printStackTrace();
  }
catch (  IOException e) {
    e.printStackTrace();
  }
catch (  ClassNotFoundException e) {
    e.printStackTrace();
  }
}

public String resolveFont(java.awt.Font font){
  String ret="-*";
  ret=ret.concat("-" + font.getName());
  if (font.isBold())   ret=ret.concat("-bold");
 else   ret=ret.concat("-normal");
  if (font.isItalic())   ret=ret.concat("-i");
 else   ret=ret.concat("-o");
  ret=ret.concat("-normal");
  ret=ret.concat("--" + font.getSize());
  ret=ret.concat("-*");
  ret=ret.concat("-*");
  ret=ret.concat("-*");
  ret=ret.concat("-*");
  ret=ret.concat("-*");
  ret=ret.concat("-*");
  return ret;
}

public void addLineContent(final ZyLineContent line){
  Preconditions.checkNotNull(line,"Internal Error: Line content can't be null");
  m_content.add(line);
}

public static boolean excludeByPackage(String pkg,List<String> excludePkg){
  for (  String ep : excludePkg) {
    if (pkg.matches(ep)) {
      return true;
    }
  }
  return false;
}

public RegionVersionHolder(long ver){
  this.version=ver;
}

public static void writeFully(FileChannel file,long pos,ByteBuffer src){
  try {
    int off=0;
    do {
      int len=file.write(src,pos + off);
      off+=len;
    }
 while (src.remaining() > 0);
  }
 catch (  IOException e) {
    throw newIllegalStateException(ERROR_WRITING_FAILED,"Writing to {0} failed; length {1} at {2}",file,src.remaining(),pos,e);
  }
}

public void updateRequestTimeout(TimeSpan span) throws SecurityException, ApplicationException {
  checkWriteAccess();
  boolean hasAccess=ConfigWebUtil.hasAccess(config,SecurityManager.TYPE_SETTING);
  if (!hasAccess)   throw new SecurityException("no access to update scope setting");
  Element scope=_getRootElement("scope");
  Element application=_getRootElement("application");
  if (span != null) {
    if (span.getMillis() <= 0)     throw new ApplicationException("value must be a positive number");
    application.setAttribute("requesttimeout",span.getDay() + "," + span.getHour()+ ","+ span.getMinute()+ ","+ span.getSecond());
  }
 else   application.removeAttribute("requesttimeout");
  if (scope.hasAttribute("requesttimeout"))   scope.removeAttribute("requesttimeout");
}

@Override protected boolean calcProblem(){
  String type=getTagWithKey(Tags.KEY_TYPE);
  if (type == null || type.equals("")) {
    return true;
  }
  return super.calcProblem();
}

public int readByte() throws IOException {
  ++length;
  return in.read() & 0xff;
}

public void updateShapeShadowsToCurrentTime(boolean updateMinutes,boolean updateHours,int currentMinute,int currentHour){
  if (updateMinutes) {
    int tens=(int)Math.floor(currentMinute / 10.0f);
    int units=(int)Math.floor(currentMinute % 10.0f);
    if (minutesTens.getCurrentValue() != tens) {
      String mt=String.format("%d",tens);
      mt=mt.concat(".json");
      Log.d(TAG,"MINUTE TENS STRING: " + mt);
      minutesTens.parseJSON(mt);
    }
    if (minutesUnits.getCurrentValue() != units) {
      String mu=String.format("%d",units);
      mu=mu.concat(".json");
      Log.d(TAG,"MINUTE UNITS STRING: " + mu);
      minutesUnits.parseJSON(mu);
    }
  }
  if (updateHours) {
    int tens=(int)Math.floor(currentHour / 10.0f);
    int units=(int)Math.floor(currentHour % 10.0f);
    if (hoursTens.getCurrentValue() != tens) {
      String ht=String.format("%d",tens);
      ht=ht.concat(".json");
      Log.d(TAG,"HOURS TENS STRING: " + ht);
      hoursTens.parseJSON(ht);
    }
    if (hoursUnits.getCurrentValue() != units) {
      String hu=String.format("%d",units);
      hu=hu.concat(".json");
      Log.d(TAG,"HOURS UNITS STRING: " + hu);
      hoursUnits.parseJSON(hu);
    }
  }
}

public Set<RawProtein<SuperFamilyHmmer3RawMatch>> parse(InputStream is) throws IOException {
  Map<String,RawProtein<SuperFamilyHmmer3RawMatch>> data=new HashMap<String,RawProtein<SuperFamilyHmmer3RawMatch>>();
  BufferedReader reader=null;
  try {
    reader=new BufferedReader(new InputStreamReader(is));
    String line;
    while ((line=reader.readLine()) != null) {
      Set<SuperFamilyHmmer3RawMatch> rawMatches=parseLine(line);
      SuperFamilyHmmer3RawMatch rawMatch;
      for (      SuperFamilyHmmer3RawMatch rawMatche : rawMatches) {
        rawMatch=rawMatche;
        String sequenceId=rawMatch.getSequenceIdentifier();
        if (data.containsKey(sequenceId)) {
          RawProtein<SuperFamilyHmmer3RawMatch> rawProtein=data.get(sequenceId);
          rawProtein.addMatch(rawMatch);
        }
 else {
          RawProtein<SuperFamilyHmmer3RawMatch> rawProtein=new RawProtein<SuperFamilyHmmer3RawMatch>(sequenceId);
          rawProtein.addMatch(rawMatch);
          data.put(sequenceId,rawProtein);
        }
      }
    }
  }
  finally {
    if (reader != null) {
      reader.close();
    }
  }
  return new HashSet<RawProtein<SuperFamilyHmmer3RawMatch>>(data.values());
}

public UnionPathIterator(Compiler compiler,int opPos) throws javax.xml.transform.TransformerException {
  super();
  opPos=OpMap.getFirstChildPos(opPos);
  loadLocationPaths(compiler,opPos,0);
}

public String relationName(){
  return m_RelationName;
}

private void writeAttribute(java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (namespace.equals("")) {
    xmlWriter.writeAttribute(attName,attValue);
  }
 else {
    registerPrefix(xmlWriter,namespace);
    xmlWriter.writeAttribute(namespace,attName,attValue);
  }
}

@RequestMapping(value="/account/change_password",method=RequestMethod.POST,produces=MediaType.TEXT_PLAIN_VALUE) @Timed public ResponseEntity<?> changePassword(@RequestBody String password){
  if (!checkPasswordLength(password)) {
    return new ResponseEntity<>("Incorrect password",HttpStatus.BAD_REQUEST);
  }
  userService.changePassword(password);
  return new ResponseEntity<>(HttpStatus.OK);
}

public void testBadSegment() throws IOException {
  Directory dir=newDirectory();
  IndexWriter iw=new IndexWriter(dir,newIndexWriterConfig(new MockAnalyzer(random())));
  Document document=new Document();
  FieldType customType=new FieldType(TextField.TYPE_NOT_STORED);
  customType.setStoreTermVectors(true);
  document.add(newField("tvtest","",customType));
  iw.addDocument(document);
  iw.close();
  dir.close();
}

public static int size(String str){
  if (str == null)   return 0;
  int length=str.length();
  int size=length;
  try {
    size=str.getBytes("UTF-8").length;
  }
 catch (  UnsupportedEncodingException e) {
    log.log(Level.SEVERE,str,e);
  }
  return size;
}

protected void synchWithTarget() throws MonitorException {
  long timeLimit=System.currentTimeMillis() + syncWaitMs;
  log("synchWithTarget: " + lvmid + " ");
  while (!prologue.isAccessible()) {
    log(".");
    try {
      Thread.sleep(20);
    }
 catch (    InterruptedException e) {
    }
    if (System.currentTimeMillis() > timeLimit) {
      logln("failed: " + lvmid);
      throw new MonitorException("Could not synchronize with target");
    }
  }
  logln("success: " + lvmid);
}

public static CharSequence time(Context context,EasyCursor c){
  long now=System.currentTimeMillis();
  long when=c.getLong(Reviews.WRITTEN_ON);
  return now - when > MINUTE_IN_MILLIS ? DateUtils.getRelativeTimeSpanString(when,now,0,FORMAT_ABBREV_ALL) : context.getString(R.string.recent_time);
}

private double screenToNormalized(float screenCoord){
  int width=getWidth();
  if (width <= 2 * padding) {
    return 0d;
  }
 else {
    double result=(screenCoord - padding) / (width - 2 * padding);
    return Math.min(1d,Math.max(0d,result));
  }
}

public long roundTripTime() throws InterruptedException {
  latch.await();
  return received - sent;
}

static private String userIdFromRange(String[] values,boolean include){
  int minId=Integer.parseInt(values[3]);
  int maxId=Integer.parseInt(values[4]);
  String exclusions=values.length > 5 ? values[5] : null;
  Stack<Integer> stack=getStack(minId,maxId,exclusions,include);
  if (stack.size() > 0) {
    return Integer.toString(stack.pop());
  }
  throw new IllegalArgumentException("Exhausted random User Ids. Range not large enough for the number of calls.");
}

public void testCase4(){
  byte aBytes[]={3,4,5,6,7,8,9};
  byte bBytes[]={1,2,3,4,5,6,7};
  byte rBytes[]={-3,-3,-3,-3,-3,-3,-2};
  int aSign=-1;
  int bSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.add(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

public static String stringDefaultValue(String bytes){
  try {
    return new String(bytes.getBytes("ISO-8859-1"),"UTF-8");
  }
 catch (  UnsupportedEncodingException e) {
    throw new IllegalStateException("Java VM does not support a standard character set.",e);
  }
}

public void actualizaCampo(int tipoFicha,ValorCampoGenericoVO campo){
  ValorCampoGenericoVO campoAnterior=retrieve(tipoFicha,campo.getTipo(),campo.getIdObjeto(),campo.getIdCampo(),campo.getOrden(),campo.getTipoElemento());
  if (campoAnterior == null)   insert(tipoFicha,campo);
 else   update(tipoFicha,campo,campoAnterior.getValorInfo());
}

public static int length(RegExp re){
  RegExp2 r;
switch (re.type) {
case sym.BAR:
{
      r=(RegExp2)re;
      int l1=length(r.r1);
      if (l1 < 0)       return -1;
      int l2=length(r.r2);
      if (l1 == l2)       return l1;
 else       return -1;
    }
case sym.CONCAT:
{
    r=(RegExp2)re;
    int l1=length(r.r1);
    if (l1 < 0)     return -1;
    int l2=length(r.r2);
    if (l2 < 0)     return -1;
    return l1 + l2;
  }
case sym.STAR:
case sym.PLUS:
case sym.QUESTION:
return -1;
case sym.CCLASS:
case sym.CCLASSNOT:
case sym.CHAR:
case sym.CHAR_I:
return 1;
case sym.STRING:
case sym.STRING_I:
{
String content=(String)((RegExp1)re).content;
return content.length();
}
case sym.TILDE:
case sym.BANG:
return -1;
case sym.MACROUSE:
return length(macros.getDefinition((String)((RegExp1)re).content));
}
throw new Error("Unkown expression type " + re.type + " in "+ re);
}

public static TimeZone randomTimeZone(Random random){
  String tzIds[]=TimeZone.getAvailableIDs();
  return TimeZone.getTimeZone(tzIds[random.nextInt(tzIds.length)]);
}

public static String arrayToList(String[] array,String delimiter){
  if (ArrayUtil.isEmpty(array))   return "";
  StringBuilder sb=new StringBuilder(array[0]);
  if (delimiter.length() == 1) {
    char c=delimiter.charAt(0);
    for (int i=1; i < array.length; i++) {
      sb.append(c);
      sb.append(array[i]);
    }
  }
 else {
    for (int i=1; i < array.length; i++) {
      sb.append(delimiter);
      sb.append(array[i]);
    }
  }
  return sb.toString();
}

@Override public boolean addAll(Collection<? extends E> c){
  Iterator<? extends E> i=c.iterator();
  boolean changed=false;
  while (i.hasNext()) {
    boolean ret=add(i.next());
    if (!changed) {
      changed=ret;
    }
  }
  return changed;
}

public void reset(){
  mCodes.clear();
  mIsFirstCharCapitalized=false;
  mPreferredWord=null;
  mTypedWord.setLength(0);
  mCapsCount=0;
}

private String extractPath(final String uri){
  return DefaultWildcardStreamLocator.stripQueryPath(uri.replace(PREFIX,StringUtils.EMPTY));
}

public void addClassesToCheck(File basedir,String... relativeNames) throws IOException {
  addClassesToCheck(basedir,Arrays.asList(relativeNames));
}

public static Short toShort(String str) throws PageException {
  return Short.valueOf(toShortValue(str));
}

public void testReadXmlLangNewStyle() throws Exception {
  Properties result=xmlToProperties("-");
  assertNotNull(result);
  assertTrue(!result.isEmpty());
  assertEquals(1,result.size());
  assertEquals("Key Value",result.getProperty("PropertyKey"));
}

public boolean hasPermission(Security security,GenericValue userLogin){
  return OrderReadHelper.hasPermission(security,userLogin,orderHeader);
}

protected boolean filterFiles(List<File> files){
  if (task.getNoMtimeCheck() || isOutputRepositoryURL()) {
    return false;
  }
  Iterator<File> iter=files.iterator();
  while (iter.hasNext()) {
    File file=iter.next();
    Module module=inferModule(file);
    if (module == null) {
      task.log("Unable to determine module of " + file,Project.MSG_VERBOSE);
      continue;
    }
    if (module.getVersion() == null) {
      task.log("Unable to determine version (and hence timestamp) of " + module.getName(),Project.MSG_VERBOSE);
      continue;
    }
    long oldest=getArtifactFileTime(module,file);
    if (oldest == Long.MAX_VALUE) {
      File outModuleDir=getArtifactDir(module);
      oldest=oldestOutputArtifact(Long.MAX_VALUE,outModuleDir);
      task.log("Oldest file for " + module + " "+ new Date(oldest),Project.MSG_DEBUG);
    }
 else {
      task.log("Artifact file associated with " + file + " for "+ module+ " "+ new Date(oldest),Project.MSG_DEBUG);
    }
    long newestFile=file.lastModified();
    task.log("File " + file + " last modified "+ new Date(newestFile),Project.MSG_DEBUG);
    if (newestFile != Long.MIN_VALUE && oldest != Long.MAX_VALUE && newestFile < oldest) {
      task.log("No need to compile " + file + ", it's up to date");
      iter.remove();
    }
  }
  return files.size() == 0;
}

public void flush(){
  outputStream.flush();
}

public int createMeasures(MSLAGoal goal){
  String sql="SELECT M_InOut_ID, io.MovementDate-o.DatePromised," + " io.MovementDate, o.DatePromised, o.DocumentNo " + "FROM M_InOut io"+ " INNER JOIN C_Order o ON (io.C_Order_ID=o.C_Order_ID) "+ "WHERE io.C_BPartner_ID=?"+ " AND NOT EXISTS "+ "(SELECT * FROM PA_SLA_Measure m "+ "WHERE m.PA_SLA_Goal_ID=?"+ " AND m.AD_Table_ID=" + MInOut.Table_ID + " AND m.Record_ID=io.M_InOut_ID)";
  int counter=0;
  PreparedStatement pstmt=null;
  ResultSet rs=null;
  try {
    pstmt=DB.prepareStatement(sql,null);
    pstmt.setInt(1,goal.getC_BPartner_ID());
    pstmt.setInt(2,goal.getPA_SLA_Goal_ID());
    rs=pstmt.executeQuery();
    while (rs.next()) {
      int M_InOut_ID=rs.getInt(1);
      BigDecimal MeasureActual=rs.getBigDecimal(2);
      Timestamp MovementDate=rs.getTimestamp(3);
      String Description=rs.getString(5) + ": " + rs.getTimestamp(4);
      if (goal.isDateValid(MovementDate)) {
        MSLAMeasure measure=new MSLAMeasure(goal,MovementDate,MeasureActual,Description);
        measure.setLink(MInOut.Table_ID,M_InOut_ID);
        if (measure.save())         counter++;
      }
    }
  }
 catch (  Exception e) {
    log.log(Level.SEVERE,"createMeasures",e);
  }
 finally {
    DB.close(rs,pstmt);
    rs=null;
    pstmt=null;
  }
  return counter;
}

public E removeAt(int index){
  final Object old=mArray[index];
  if (mSize <= 1) {
    if (DEBUG)     Log.d(TAG,"remove: shrink from " + mHashes.length + " to 0");
    freeArrays(mHashes,mArray,mSize);
    mHashes=SupportContainerInternals.EMPTY_INTS;
    mArray=SupportContainerInternals.EMPTY_OBJECTS;
    mSize=0;
  }
 else {
    if (mHashes.length > (BASE_SIZE * 2) && mSize < mHashes.length / 3) {
      final int n=mSize > (BASE_SIZE * 2) ? (mSize + (mSize >> 1)) : (BASE_SIZE * 2);
      if (DEBUG)       Log.d(TAG,"remove: shrink from " + mHashes.length + " to "+ n);
      final int[] ohashes=mHashes;
      final Object[] oarray=mArray;
      allocArrays(n);
      mSize--;
      if (index > 0) {
        if (DEBUG)         Log.d(TAG,"remove: copy from 0-" + index + " to 0");
        System.arraycopy(ohashes,0,mHashes,0,index);
        System.arraycopy(oarray,0,mArray,0,index);
      }
      if (index < mSize) {
        if (DEBUG)         Log.d(TAG,"remove: copy from " + (index + 1) + "-"+ mSize+ " to "+ index);
        System.arraycopy(ohashes,index + 1,mHashes,index,mSize - index);
        System.arraycopy(oarray,index + 1,mArray,index,mSize - index);
      }
    }
 else {
      mSize--;
      if (index < mSize) {
        if (DEBUG)         Log.d(TAG,"remove: move " + (index + 1) + "-"+ mSize+ " to "+ index);
        System.arraycopy(mHashes,index + 1,mHashes,index,mSize - index);
        System.arraycopy(mArray,index + 1,mArray,index,mSize - index);
      }
      mArray[mSize]=null;
    }
  }
  return (E)old;
}

@Override public String resolveVideoUrl(@Nullable final Video video,Step step){
  if (video == null)   return null;
  String localPath=databaseFacade.getPathToVideoIfExist(video);
  if (localPath != null && checkExistingOnDisk(localPath,step)) {
    return localPath;
  }
 else {
    List<VideoUrl> urlList=video.getUrls();
    if (urlList == null || urlList.size() == 0)     return null;
    return resolveFromWeb(urlList);
  }
}

protected Object lookupService() throws Exception {
  Object service=null;
  ServiceTemplate templ;
  if (template == null) {
    Class<?>[] types=(serviceClass == null ? null : new Class[]{serviceClass});
    Entry[] entry=(serviceName == null ? null : new Entry[]{new Name(serviceName)});
    templ=new ServiceTemplate(null,types,entry);
  }
 else {
    templ=template;
  }
  LookupLocator[] lookupLocators=null;
  if (locators != null) {
    lookupLocators=new LookupLocator[locators.length];
    for (int i=0; i < locators.length; i++) {
      String locator=locators[i];
      if (!locator.startsWith("jini://")) {
        locator="jini://" + locator;
      }
      lookupLocators[i]=new LookupLocator(locator);
    }
  }
  ServiceDiscoveryManager serviceDiscovery=null;
  try {
    serviceDiscovery=SharedDiscoveryManagement.getBackwardsServiceDiscoveryManager(groups,lookupLocators,null);
    ServiceItem returnObject=serviceDiscovery.lookup(templ,null,timeout);
    if (returnObject != null) {
      service=returnObject.service;
    }
  }
  finally {
    if (serviceDiscovery != null) {
      try {
        serviceDiscovery.terminate();
      }
 catch (      Exception e) {
        logger.warn("Failed to terminate service discovery, ignoring",e);
      }
    }
  }
  return service;
}

public static boolean equals(final Object obj1,final Object obj2){
  return (obj1 != null && obj1.equals(obj2));
}

public void testMergeSameFilterWithInitParamInTwoDocuments() throws Exception {
  String srcXml="<web-app>" + "  <filter>" + "    <filter-name>f1</filter-name>"+ "    <filter-class>fclass1</filter-class>"+ "    <init-param>"+ "      <param-name>fparamName</param-name>"+ "      <param-value>fparamValue</param-value>"+ "    </init-param>"+ "  </filter>"+ "  <filter-mapping>"+ "    <filter-name>f1</filter-name>"+ "    <url-pattern>/f1mapping1</url-pattern>"+ "  </filter-mapping>"+ "</web-app>";
  WebXml srcWebXml=WebXmlIo.parseWebXml(new ByteArrayInputStream(srcXml.getBytes("UTF-8")),null);
  String mergeXml="<web-app>" + "  <filter>" + "    <filter-name>f1</filter-name>"+ "    <filter-class>fclass1</filter-class>"+ "    <init-param>"+ "      <param-name>fparamName</param-name>"+ "      <param-value>fparamValue</param-value>"+ "    </init-param>"+ "  </filter>"+ "  <filter-mapping>"+ "    <filter-name>f1</filter-name>"+ "    <url-pattern>/f1mapping1</url-pattern>"+ "  </filter-mapping>"+ "</web-app>";
  WebXml mergeWebXml=WebXmlIo.parseWebXml(new ByteArrayInputStream(mergeXml.getBytes("UTF-8")),null);
  WebXmlMerger merger=new WebXmlMerger(srcWebXml);
  merger.mergeFilters(mergeWebXml);
  assertTrue(WebXmlUtils.hasFilter(srcWebXml,"f1"));
  List<String> filterInitParamNames=WebXmlUtils.getFilterInitParamNames(srcWebXml,"f1");
  assertTrue(filterInitParamNames.size() == 1);
  assertEquals("fparamName",filterInitParamNames.get(0));
  List<String> filterMappings=WebXmlUtils.getFilterMappings(srcWebXml,"f1");
  assertEquals(1,filterMappings.size());
  assertEquals("/f1mapping1",filterMappings.get(0));
}

public WebappTemplateLoader(ServletContext servletContext,String subdirPath){
  if (servletContext == null) {
    throw new IllegalArgumentException("servletContext == null");
  }
  if (subdirPath == null) {
    throw new IllegalArgumentException("path == null");
  }
  subdirPath=subdirPath.replace('\\','/');
  if (!subdirPath.endsWith("/")) {
    subdirPath+="/";
  }
  if (!subdirPath.startsWith("/")) {
    subdirPath="/" + subdirPath;
  }
  this.subdirPath=subdirPath;
  this.servletContext=servletContext;
}

@SuppressWarnings({"unchecked"}) public static <T>T[] insert(T[] dest,T src,int offset,Class componentType){
  T[] temp=(T[])Array.newInstance(componentType,dest.length + 1);
  System.arraycopy(dest,0,temp,0,offset);
  temp[offset]=src;
  System.arraycopy(dest,offset,temp,offset + 1,dest.length - offset);
  return temp;
}

@Override public void flush() throws IOException {
  writer.write(buffer,0,fill);
  fill=0;
}

public MetricInstance withDependencyMetricNames(List<String> dependencyMetricNames){
  return new MetricInstance(metricName,maker,dependencyMetricNames.toArray(new String[dependencyMetricNames.size()]));
}

public static IStatus validateMethodName(String name){
  return validateMethodName(name,CompilerOptions.VERSION_1_3,CompilerOptions.VERSION_1_3);
}

@SuppressWarnings("deprecation") void notifyAlarmClock(TimerAlarmClockNotification notification){
  TimerNotification timerNotification=null;
  Date timerDate=null;
  TimerAlarmClock alarmClock=(TimerAlarmClock)notification.getSource();
synchronized (Timer.this) {
    for (    Object[] obj : timerTable.values()) {
      if (obj[ALARM_CLOCK_INDEX] == alarmClock) {
        timerNotification=(TimerNotification)obj[TIMER_NOTIF_INDEX];
        timerDate=(Date)obj[TIMER_DATE_INDEX];
        break;
      }
    }
  }
  sendNotification(timerDate,timerNotification);
  updateTimerTable(timerNotification.getNotificationID());
}

public ProfilerEntity start(){
  start_time=System.nanoTime();
  return this;
}

public static <E extends Enum<E>>EnumSet<E> of(E e1,E e2,E e3){
  EnumSet<E> set=of(e1,e2);
  set.add(e3);
  return set;
}

public PickRequest withCameraPicsDirectory(@Nullable final File pDirFile){
  this.mCustomCameraPicsDirPath=pDirFile == null ? null : pDirFile.getAbsolutePath();
  return this;
}

public void prepareForNextRun(){
  for (int i=0; i < 5; i++) {
    System.gc();
    try {
      Thread.sleep(20);
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
  }
}

public boolean writeHeader(OutputStream os){
  try {
    writeInt(os,CACHE_MAGIC);
    writeString(os,key);
    writeString(os,etag == null ? "" : etag);
    writeLong(os,serverDate);
    writeLong(os,lastModified);
    writeLong(os,ttl);
    writeLong(os,softTtl);
    writeStringStringMap(responseHeaders,os);
    os.flush();
    return true;
  }
 catch (  IOException e) {
    VolleyLog.d("%s",e.toString());
    return false;
  }
}

public void add(Chip chip){
  if (!mChipList.contains(chip) || mToleratingDuplicate) {
    mChipList.add(chip);
    notifyUpdate();
  }
}

private boolean checkTripZoneConsistency(){
  log.info("Checking that zones and trips are consistent.");
  HashSet<String> missingZones=new HashSet<String>();
  for (  Trip T : trips.values()) {
    BasicLocation zo=zones.getLocation(Id.create(T.zone_o,Zone.class));
    BasicLocation zd=zones.getLocation(Id.create(T.zone_d,Zone.class));
    if (zo == null) {
      missingZones.add(T.zone_o);
    }
    if (zd == null) {
      missingZones.add(T.zone_d);
    }
  }
  if (missingZones.size() > 0) {
    String msg=missingZones.size() + " zones are missing! Full list below: ";
    for (    String s : missingZones)     msg+="\n\tZone \"" + s.toString() + "\"";
    log.error(msg);
    return false;
  }
 else   log.info("All zones OK!");
  return true;
}

private int insertIndexForLayer(Component comp,int layer,int position){
  int i, count, curLayer;
  int layerStart=-1;
  int layerEnd=-1;
  int componentCount=getComponentCount();
  ArrayList<Component> compList=new ArrayList<Component>(componentCount);
  for (int index=0; index < componentCount; index++) {
    if (getComponent(index) != comp) {
      compList.add(getComponent(index));
    }
  }
  count=compList.size();
  for (i=0; i < count; i++) {
    curLayer=getLayer(compList.get(i));
    if (layerStart == -1 && curLayer == layer) {
      layerStart=i;
    }
    if (curLayer < layer) {
      if (i == 0) {
        layerStart=0;
        layerEnd=0;
      }
 else {
        layerEnd=i;
      }
      break;
    }
  }
  if (layerStart == -1 && layerEnd == -1)   return count;
  if (layerStart != -1 && layerEnd == -1)   layerEnd=count;
  if (layerEnd != -1 && layerStart == -1)   layerStart=layerEnd;
  if (position == -1)   return layerEnd;
  if (position > -1 && layerStart + position <= layerEnd)   return layerStart + position;
  return layerEnd;
}

public void testTimedInvokeAll2() throws InterruptedException {
  ExecutorService e=new ForkJoinPool(1);
  PoolCleaner cleaner=null;
  try {
    cleaner=cleaner(e);
    List<Future<String>> r=e.invokeAll(new ArrayList<Callable<String>>(),MEDIUM_DELAY_MS,MILLISECONDS);
    assertTrue(r.isEmpty());
  }
  finally {
    if (cleaner != null) {
      cleaner.close();
    }
  }
}

public static WaitDialog showDialog(WaitDialog.Runnable runnable,String message,Container container,int width,int height){
  WaitDialog newDialog=null;
  if (container instanceof JDialog) {
    newDialog=new WaitDialog((JDialog)container);
  }
 else   if (container instanceof JFrame) {
    newDialog=new WaitDialog((JFrame)container);
  }
 else {
    newDialog=new WaitDialog((JDialog)null);
    newDialog.setLocationRelativeTo(container);
  }
  newDialog.buildDialog(width,height);
  runnable.setDialog(newDialog);
  newDialog.container=container;
  newDialog.runnable=runnable;
  newDialog.setMessage(message);
  Thread processThread=new ProcessThread(newDialog);
  processThread.start();
  while (!newDialog.isVisible()) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException ie) {
    }
  }
  return newDialog;
}

public void testFlipBitPositiveOutside2(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int number=191;
  byte rBytes[]={0,-128,0,0,0,0,0,0,0,0,0,0,1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.flipBit(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public synchronized void write(byte b[],int off,int len) throws IOException {
  if (len <= 0)   return;
  int freeSpace=buffer.length - pos;
  if (len <= freeSpace) {
    System.arraycopy(b,off,buffer,pos,len);
    pos+=len;
    return;
  }
  flush();
  int local_requested;
  while (true) {
synchronized (lock) {
      while ((local_requested=requested) < 1 && !disconnected) {
        try {
          lock.wait();
        }
 catch (        InterruptedException e) {
        }
      }
      if (disconnected)       throw new IOException("Connection closed");
    }
    if (local_requested < len) {
      manager.sendTransmit(info,b,off,local_requested);
      off+=local_requested;
      len-=local_requested;
synchronized (lock) {
        requested-=local_requested;
      }
    }
 else {
      manager.sendTransmit(info,b,off,len);
synchronized (lock) {
        requested-=len;
      }
      break;
    }
  }
}

protected Alarm(){
  this("alarm");
}

public void removeMouseMode(MapMouseMode med){
  boolean needToAdjustActiveMode=false;
  if (med == null) {
    return;
  }
  if (med.equals(activeMouseMode)) {
    needToAdjustActiveMode=true;
    setInactive(med);
  }
  for (  MapMouseMode checkMM : mouseModes) {
    if (med.equals(checkMM)) {
      med.removeAllMapMouseListeners();
    }
 else     if (needToAdjustActiveMode) {
      setActive(checkMM);
      needToAdjustActiveMode=false;
    }
  }
  mouseModes.remove(med);
  firePropertyChange(MouseModesProperty,null,mouseModes);
}

@Override public boolean hasDispatchFunction(){
  return false;
}

public void addMap(Map<K,V> map,K min,K max){
  if (min != null && max != null && keyType.compare(min,max) > 0) {
    DataUtils.newIllegalArgumentException("Invalid range: {0} .. {1}",min,max);
  }
  int len=shards.length + 1;
  Shard<K,V>[] newShards=Arrays.copyOf(shards,len);
  Shard<K,V> newShard=new Shard<K,V>();
  newShard.map=map;
  newShard.minIncluding=min;
  newShard.maxExcluding=max;
  newShards[len - 1]=newShard;
  shards=newShards;
}

private void retryFailedInterfaces(){
  for (Iterator i=failedInterfaces.iterator(); i.hasNext(); ) {
    NetworkInterface nic=(NetworkInterface)i.next();
    try {
      if (nic != null) {
        socket.setNetworkInterface(nic);
      }
      socket.joinGroup(requestAddr);
      i.remove();
      Level l=multicastInterfacesSpecified ? Level.INFO : Level.FINE;
      if (logger.isLoggable(l)) {
        if (nic != null) {
          logger.log(l,"enabled {0}",new Object[]{nic});
        }
 else {
          logger.log(l,"enabled default interface");
        }
      }
    }
 catch (    IOException e) {
    }
  }
}

public void writeHeader() throws IOException {
  FLVHeader flvHeader=new FLVHeader();
  flvHeader.setFlagAudio(true);
  flvHeader.setFlagVideo(true);
  ByteBuffer header=ByteBuffer.allocate(HEADER_LENGTH + 4);
  flvHeader.write(header);
  file.setLength(HEADER_LENGTH + 4);
  if (header.hasArray()) {
    log.debug("Header bytebuffer has a backing array");
    file.write(header.array());
  }
 else {
    log.debug("Header bytebuffer does not have a backing array");
    byte[] tmp=new byte[HEADER_LENGTH + 4];
    header.get(tmp);
    file.write(tmp);
  }
  bytesWritten=file.length();
  header.clear();
}

public static Future<?> submit(Runnable task){
  return THREAD_POOL.submit(task);
}

public boolean addOverlay(Overlay overlay,KmlDocument kmlDoc){
  if (overlay == null)   return false;
  KmlFeature kmlItem;
  if (overlay instanceof GroundOverlay) {
    kmlItem=new KmlGroundOverlay((GroundOverlay)overlay);
  }
 else   if (overlay instanceof FolderOverlay) {
    kmlItem=new KmlFolder((FolderOverlay)overlay,kmlDoc);
  }
 else   if (overlay instanceof MarkerClusterer) {
    kmlItem=new KmlFolder((MarkerClusterer)overlay,kmlDoc);
  }
 else   if (overlay instanceof Marker) {
    Marker marker=(Marker)overlay;
    kmlItem=new KmlPlacemark(marker);
  }
 else   if (overlay instanceof Polygon) {
    Polygon polygon=(Polygon)overlay;
    kmlItem=new KmlPlacemark(polygon,kmlDoc);
  }
 else   if (overlay instanceof Polyline) {
    Polyline polyline=(Polyline)overlay;
    kmlItem=new KmlPlacemark(polyline,kmlDoc);
  }
 else {
    return false;
  }
  mItems.add(kmlItem);
  return true;
}

private <T extends SBResource>T lookForResource(SBResourceType type,Class<T> clazz){
  List<T> resources=lookForResources(type,clazz);
  return resources != null && resources.size() > 0 ? resources.get(0) : null;
}

private Object produceEvent() throws InvocationTargetException {
  if (!valid) {
    throw new IllegalStateException(toString() + " has been invalidated and can no longer produce events.");
  }
  try {
    return method.invoke(target);
  }
 catch (  IllegalAccessException e) {
    throw new AssertionError(e);
  }
catch (  InvocationTargetException e) {
    if (e.getCause() instanceof Error) {
      throw (Error)e.getCause();
    }
    throw e;
  }
}

private List<Float> createDashArray(String dashString){
  String[] dashes=dashString.split(" ");
  List<Float> floatDashArray=new ArrayList<Float>();
  for (  String dashValue : dashes) {
    try {
      floatDashArray.add(Float.parseFloat(dashValue));
    }
 catch (    NumberFormatException e) {
      return null;
    }
  }
  return floatDashArray;
}

public void cleanPatchByVersion(String versionName){
  if (patchDirectory == null || versionName == null) {
    return;
  }
  String path=patchDirectory.getAbsolutePath() + "/" + versionName;
  SharePatchFileUtil.deleteDir(path);
}

public static boolean isValidJavaClassName(String input){
  if (!StringUtils.hasText(input)) {
    return false;
  }
  if (!Character.isJavaIdentifierStart(input.charAt(0))) {
    return false;
  }
  if (input.length() > 1) {
    for (int i=1; i < input.length(); i++) {
      if (!Character.isJavaIdentifierPart(input.charAt(i))) {
        return false;
      }
    }
  }
  return true;
}

public void test_create_empty(){
  final String id="test";
  final Map<String,Object> metadata=new HashMap<String,Object>();
  metadata.put(FileMetadataSchema.ID,id);
  metadata.put("foo","bar");
  final int version=repo.create(metadata);
  metadata.put(FileMetadataSchema.VERSION,Integer.valueOf(version));
  assertEquals("version",0,version);
  RepositoryDocumentImpl doc=(RepositoryDocumentImpl)repo.read(id);
  assertTrue("exists",doc.exists());
  assertEquals("version",version,doc.getVersion());
  assertNotSame("versionCreateTime",0L,doc.getVersionCreateTime());
  assertEquals("earliestVersionCreateTime",doc.getVersionCreateTime(),doc.getEarliestVersionCreateTime());
  assertEquals("metadataUpdateTime",doc.getVersionCreateTime(),doc.getMetadataUpdateTime());
  Map<String,Object> actual=doc.asMap();
  assertEquals("id",id,actual.get(FileMetadataSchema.ID));
  assertEquals("version",version,actual.get(FileMetadataSchema.VERSION));
  assertEquals("user property","bar",actual.get("foo"));
  assertEquals("size",metadata.size(),actual.size());
}

public static String rename(String desc,String oldname,String newname){
  if (desc.indexOf(oldname) < 0)   return desc;
  StringBuffer newdesc=new StringBuffer();
  int head=0;
  int i=0;
  for (; ; ) {
    int j=desc.indexOf('L',i);
    if (j < 0)     break;
 else     if (desc.startsWith(oldname,j + 1) && desc.charAt(j + oldname.length() + 1) == ';') {
      newdesc.append(desc.substring(head,j));
      newdesc.append('L');
      newdesc.append(newname);
      newdesc.append(';');
      head=i=j + oldname.length() + 2;
    }
 else {
      i=desc.indexOf(';',j) + 1;
      if (i < 1)       break;
    }
  }
  if (head == 0)   return desc;
 else {
    int len=desc.length();
    if (head < len)     newdesc.append(desc.substring(head,len));
    return newdesc.toString();
  }
}

public void sort(int attIndex){
  double[] vals=new double[numInstances()];
  Instance[] backup=new Instance[vals.length];
  for (int i=0; i < vals.length; i++) {
    Instance inst=instance(i);
    backup[i]=inst;
    double val=inst.value(attIndex);
    if (Utils.isMissingValue(val)) {
      vals[i]=Double.MAX_VALUE;
    }
 else {
      vals[i]=val;
    }
  }
  int[] sortOrder=Utils.sortWithNoMissingValues(vals);
  for (int i=0; i < vals.length; i++) {
    m_Instances.set(i,backup[sortOrder[i]]);
  }
}

private static byte CallByteMethodV(JNIEnvironment env,int objJREF,int methodID,Address argAddress) throws Exception {
  if (traceJNI)   VM.sysWrite("JNI called: CallByteMethodV  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    Object obj=env.getJNIRef(objJREF);
    Object returnObj=JNIHelpers.invokeWithVarArg(obj,methodID,argAddress,TypeReference.Byte,false);
    return Reflection.unwrapByte(returnObj);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
    return 0;
  }
}

public boolean adjustEntry(E entry){
  final SpatialDirectoryEntry se=(SpatialDirectoryEntry)entry;
  final ModifiableHyperBoundingBox mbr=computeMBR();
  boolean changed=false;
  if (se.hasMBR()) {
    final int dim=se.getDimensionality();
    for (int i=0; i < dim; i++) {
      if (Math.abs(se.getMin(i) - mbr.getMin(i)) > Float.MIN_NORMAL) {
        changed=true;
        break;
      }
      if (Math.abs(se.getMax(i) - mbr.getMax(i)) > Float.MIN_NORMAL) {
        changed=true;
        break;
      }
    }
  }
 else {
    changed=true;
  }
  if (changed) {
    se.setMBR(mbr);
  }
  return changed;
}

private void traceObject(ObjectReference object,boolean root){
  if (VERBOSE) {
    Trace.trace(Item.SANITY,"tracing object %s",ObjectModel.getString(object));
  }
  if (object.isNull())   return;
  boolean marked=blackSet.contains(object);
  if (!marked) {
    blackSet.add(object);
    markStack.add(object);
  }
  visitor.visitObject(object,root,marked);
}

private static int compare(int fromIndex,CharSequence left,CharSequence right){
  if (left == null)   return -1;
  if (right == null)   return 1;
  for (int i=fromIndex, n=MathLib.min(left.length(),right.length()); i < n; i++) {
    char c1=Character.toUpperCase(left.charAt(i));
    char c2=Character.toUpperCase(right.charAt(i));
    if (c1 != c2)     return c1 - c2;
  }
  return left.length() - right.length();
}

public boolean restoreAccessibilityFocus(CalendarDay day){
  if ((day.year != mYear) || (day.month != mMonth) || (day.day > mNumCells)) {
    return false;
  }
  mTouchHelper.setFocusedVirtualView(day.day);
  return true;
}

public DriverTask createVolumeClone(List<VolumeClone> clones){
  LOG.info("Creating volume clone");
  DellSCDriverTask task=new DellSCDriverTask("createVolumeClone");
  StringBuilder errBuffer=new StringBuilder();
  int createCount=0;
  for (  VolumeClone clone : clones) {
    try {
      StorageCenterAPI api=connectionManager.getConnection(clone.getStorageSystemId());
      ScReplay replay=null;
      api.checkAndInitVolume(clone.getParentId());
      if (clone.getSourceType() == SourceType.SNAPSHOT) {
        replay=api.getReplay(clone.getParentId());
      }
 else {
        replay=api.createReplay(clone.getParentId(),5);
      }
      ScVolume scVol=api.createViewVolume(clone.getDisplayName(),replay.instanceId);
      clone.setProvisionedCapacity(SizeUtil.sizeStrToBytes(scVol.configuredSize));
      clone.setAllocatedCapacity(0L);
      clone.setWwn(scVol.deviceId);
      clone.setNativeId(scVol.instanceId);
      clone.setDeviceLabel(scVol.name);
      clone.setAccessStatus(AccessStatus.READ_WRITE);
      clone.setReplicationState(ReplicationState.SYNCHRONIZED);
      createCount++;
    }
 catch (    DellSCDriverException|StorageCenterAPIException dex) {
      String error=String.format("Error creating clone of volume %s: %s",clone.getParentId(),dex);
      errBuffer.append(String.format("%s%n",error));
    }
  }
  task.setMessage(errBuffer.toString());
  if (createCount == clones.size()) {
    task.setStatus(TaskStatus.READY);
  }
 else   if (createCount == 0) {
    task.setStatus(TaskStatus.FAILED);
  }
 else {
    task.setStatus(TaskStatus.PARTIALLY_FAILED);
  }
  return task;
}

@Override public int hashCode(){
  if (hash == 0) {
    int result=17;
    result=37 * result + range.hashCode();
    long bitsWeight=Double.doubleToLongBits(weight);
    result=37 * result + (int)(bitsWeight ^ (bitsWeight >>> 32));
    hash=result;
  }
  return hash;
}

@Override public void onClick(View v){
  int position=Math.min((Integer)v.getTag(),mItemList.size() - 1);
  mSelectedTracker=mItemList.get(position);
  mToggleConfigHandler.showForSelectedToggle();
  mToggleConfigHandler.showAtLocation(v);
  mToggleConfigHandler.setArrowPosition(v);
}

private int readFromDataSource(byte[] target,int offset,int length,int bytesAlreadyRead,boolean allowEndOfInput) throws InterruptedException, IOException {
  if (Thread.interrupted()) {
    throw new InterruptedException();
  }
  int bytesRead=dataSource.read(target,offset + bytesAlreadyRead,length - bytesAlreadyRead);
  if (bytesRead == C.RESULT_END_OF_INPUT) {
    if (bytesAlreadyRead == 0 && allowEndOfInput) {
      return C.RESULT_END_OF_INPUT;
    }
    throw new EOFException();
  }
  return bytesAlreadyRead + bytesRead;
}

public Explanation explain(int doc,Explanation freq) throws IOException {
  return Explanation.match(score(doc,freq.getValue()),"score(doc=" + doc + ",freq="+ freq.getValue()+ "), with freq of:",Collections.singleton(freq));
}

public static Stack<String> splitParts(String name){
  while (name.startsWith("."))   name=name.substring(1);
  Stack<String> parts=new Stack<>();
  int last=0;
  int pos=0;
  String part;
  while (true) {
    pos=last;
    while (true) {
      pos=name.indexOf('.',pos);
      if (pos < 0)       break;
      if (name.charAt(pos - 1) == '\\')       ++pos;
 else       break;
    }
    if (pos < 0)     break;
    part=name.substring(last,pos);
    if (!part.endsWith("]"))     part+="[0]";
    parts.add(part);
    last=pos + 1;
  }
  part=name.substring(last);
  if (!part.endsWith("]"))   part+="[0]";
  parts.add(part);
  return parts;
}

public Set<SootMethod> collectSourceMethods(){
  Set<SootMethod> result=new HashSet<SootMethod>();
  for (  SourceCallChainInfo cci : entry_points) {
    collectSourceMethods(cci,result);
  }
  return result;
}

public void testPrecisionAndScale() throws Exception {
  testPrecisionForType("TINYINT",8,-1,false);
  testPrecisionForType("TINYINT",8,-1,true);
  testPrecisionForType("SMALLINT",8,-1,false);
  testPrecisionForType("SMALLINT",8,-1,true);
  testPrecisionForType("MEDIUMINT",8,-1,false);
  testPrecisionForType("MEDIUMINT",8,-1,true);
  testPrecisionForType("INT",8,-1,false);
  testPrecisionForType("INT",8,-1,true);
  testPrecisionForType("BIGINT",8,-1,false);
  testPrecisionForType("BIGINT",8,-1,true);
  testPrecisionForType("FLOAT",8,4,false);
  testPrecisionForType("FLOAT",8,4,true);
  testPrecisionForType("DOUBLE",8,4,false);
  testPrecisionForType("DOUBLE",8,4,true);
  testPrecisionForType("DECIMAL",8,4,false);
  testPrecisionForType("DECIMAL",8,4,true);
  testPrecisionForType("DECIMAL",9,0,false);
  testPrecisionForType("DECIMAL",9,0,true);
}

public void register(NamedBean s){
  String systemName=s.getSystemName();
  _tsys.put(systemName,s);
  String userName=s.getUserName();
  if (userName != null) {
    _tuser.put(userName,s);
  }
  firePropertyChange("length",null,Integer.valueOf(_tsys.size()));
  s.addPropertyChangeListener(this,"","Manager");
}

protected void expandFor(int i1,int i2,double d){
  if (i1 >= sizes.size()) {
    int oldSize=sizes.size(), capacity=vector.length;
    sizes.set(i1,0);
    if (capacity < sizes.size()) {
      while (capacity < sizes.size())       capacity*=2;
      double[][] t=new double[capacity][];
      System.arraycopy(vector,0,t,0,oldSize);
      vector=t;
    }
    for (int i=oldSize; i < sizes.size(); ++i)     vector[i]=new double[defaultCapacity2];
  }
  if (i2 < sizes.get(i1))   return;
  int oldSize=sizes.get(i1), capacity=vector[i1].length;
  sizes.set(i1,i2 + 1);
  if (capacity >= sizes.get(i1))   return;
  while (capacity < sizes.get(i1))   capacity*=2;
  double[] t=new double[capacity];
  System.arraycopy(vector[i1],0,t,0,oldSize);
  if (d != 0)   Arrays.fill(t,oldSize,sizes.get(i1),d);
  vector[i1]=t;
}

public V put(final K k,final V v){
  final WeakReference<V> ref=newWeakRef(k,v,referenceQueue);
  final WeakReference<V> oldRef=map.put(k,ref);
  final V oldVal=oldRef == null ? null : oldRef.get();
  if (queue.add(v) && DEBUG) {
    log.debug("put: key=" + k + ", val="+ v);
  }
  didUpdate(k,ref,oldRef);
  return oldVal;
}

static void delay(long millis) throws InterruptedException {
  long nanos=millis * (1000 * 1000);
  final long wakeupTime=System.nanoTime() + nanos;
  do {
    if (millis > 0L)     Thread.sleep(millis);
 else     Thread.yield();
    nanos=wakeupTime - System.nanoTime();
    millis=nanos / (1000 * 1000);
  }
 while (nanos >= 0L);
}

public static <V>boolean addListNotNullValue(List<V> sourceList,V value){
  return (sourceList != null && value != null) ? sourceList.add(value) : false;
}

public void delete(int key){
  int i=ContainerHelpers.binarySearch(mKeys,mSize,key);
  if (i >= 0) {
    System.arraycopy(mKeys,i + 1,mKeys,i,mSize - (i + 1));
    System.arraycopy(mValues,i + 1,mValues,i,mSize - (i + 1));
    mSize--;
  }
}

public static void keepAlive(final boolean keepAlive){
  setProperty("http.keepAlive",Boolean.toString(keepAlive));
}

public PageObjectContext peek(){
  return deque.peek();
}

protected void writeNamespace(String prefix,String uri) throws IOException {
  if ((prefix != null) && (prefix.length() > 0)) {
    writer.write(" xmlns:");
    writer.write(prefix);
    writer.write("=\"");
  }
 else {
    writer.write(" xmlns=\"");
  }
  writer.write(uri);
  writer.write("\"");
}

public static void waitSomeTime(int seconds){
  try {
    Thread.sleep(seconds * 1000);
  }
 catch (  InterruptedException e) {
  }
}

public void encode(String value,ByteBuffer buffer) throws BufferOverflowException {
  if (value == null) {
    buffer.put((byte)(0x80));
    return;
  }
  int charCount=value.length();
  if (charCount == 0) {
    buffer.put((byte)(1 | 0x80));
    return;
  }
  int position=buffer.position();
  boolean ascii=true;
  if (charCount > 1) {
    for (int i=0; i < charCount; i++) {
      int c=value.charAt(i);
      if (c > 127) {
        ascii=false;
        break;
      }
      buffer.put((byte)c);
    }
  }
 else {
    ascii=false;
  }
  if (ascii) {
    position=buffer.position();
    buffer.put(position - 1,(byte)(buffer.get(position - 1) | 0x80));
  }
 else {
    buffer.position(position);
    writeLength(charCount + 1,buffer);
    int charIndex=0;
    for (; charIndex < charCount; charIndex++) {
      int c=value.charAt(charIndex);
      if (c > 127)       break;
      buffer.put((byte)c);
    }
    writeUTF8String(value,charCount,charIndex,buffer);
  }
}

public void testBug71672Statement(int testStep,Connection testConn,String query,int expectedUpdateCount,int[] expectedKeys) throws SQLException {
  Statement testStmt=testConn.createStatement();
  if (expectedUpdateCount < 0) {
    assertFalse(testStep + ". Stmt.execute() result",testStmt.execute(query,Statement.RETURN_GENERATED_KEYS));
  }
 else {
    assertEquals(testStep + ". Stmt.executeUpdate() result",expectedUpdateCount,testStmt.executeUpdate(query,Statement.RETURN_GENERATED_KEYS));
  }
  ResultSet testRS=testStmt.getGeneratedKeys();
  for (  int k : expectedKeys) {
    assertTrue(testStep + ". Row expected in generated keys ResultSet",testRS.next());
    assertEquals(testStep + ". Wrong generated key",k,testRS.getInt(1));
  }
  assertFalse(testStep + ". No more rows expected in generated keys ResultSet",testRS.next());
  testRS.close();
  testStmt.close();
}

public static PathImpl lookup(String url){
  PathImpl pwd=getPwd();
  if (!url.startsWith("/")) {
    return pwd.lookup(url,null);
  }
 else {
    return PWD.lookup(url,null);
  }
}

public static XMLGregorianCalendar now(){
  return getXMLGregorianCalendarValue(null);
}

protected void addScalarDimension(int i){
  for (  Dimension dimension : dimensionList) {
    if (dimension.getDimension() == i) {
      return;
    }
  }
  dimensionList.add(new Dimension(i));
}

public void initialize(){
  TextureState ts=new TextureState();
  ts.setEnabled(false);
  setRenderState(ts);
  for (int i=0; i < lineSetList.size(); ++i) {
    LineSetState state=lineSetList.get(i);
    addLineSet(state,false);
  }
  zBufferState=new ZBufferState();
  zBufferState.setFunction(ZBufferState.TestFunction.LessThanOrEqualTo);
  zBufferState.setEnabled(true);
  setRenderState(zBufferState);
}

protected boolean regExpRegionMatches(String text,int tStart,String p,int pStart,int plen){
  while (plen-- > 0) {
    char tchar=text.charAt(tStart++);
    char pchar=p.charAt(pStart++);
    if (!this.fIgnoreWildCards) {
      if (pchar == fSingleWildCard) {
        continue;
      }
    }
    if (pchar == tchar) {
      continue;
    }
    if (this.fIgnoreCase) {
      if (Character.toUpperCase(tchar) == Character.toUpperCase(pchar)) {
        continue;
      }
      if (Character.toLowerCase(tchar) == Character.toLowerCase(pchar)) {
        continue;
      }
    }
    return false;
  }
  return true;
}

public static void initKeys(KeyStore keystore,Properties props){
  if (props.containsKey(Configuration.WEBCALL_KAFKA_AES)) {
    byte[] key=keystore.decodeKey(props.getProperty(Configuration.WEBCALL_KAFKA_AES));
    Preconditions.checkArgument((16 == key.length || 24 == key.length || 32 == key.length),Configuration.WEBCALL_KAFKA_AES + " MUST be 128, 192 or 256 bits long.");
    keystore.setKey(KeyStore.AES_KAFKA_WEBCALL,key);
    aesKey=key;
  }
  if (props.containsKey(Configuration.WEBCALL_KAFKA_MAC)) {
    byte[] key=keystore.decodeKey(props.getProperty(Configuration.WEBCALL_KAFKA_MAC));
    Preconditions.checkArgument((16 == key.length),Configuration.WEBCALL_KAFKA_MAC + " MUST be 128 bits long.");
    keystore.setKey(KeyStore.SIPHASH_KAFKA_WEBCALL,key);
    siphashKey=key;
  }
}

public static boolean isEmpty(StringBuilder str){
  return isNull(str) || str.length() <= 0;
}

public static Gas register(Gas gas){
  if (gas == null) {
    return null;
  }
  registeredGasses.add(gas);
  return getGas(gas.getName());
}

@Override public boolean lock(){
  try {
    lockPath=zk.create(this.lockTypeFolder + CarbonCommonConstants.FILE_SEPARATOR + lockName,null,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL_SEQUENTIAL);
    List<String> nodes=zk.getChildren(this.lockTypeFolder,null);
    Collections.sort(nodes);
    if (lockPath.endsWith(nodes.get(0))) {
      return true;
    }
 else {
      zk.delete(lockPath,-1);
      return false;
    }
  }
 catch (  KeeperException|InterruptedException e) {
    LOGGER.error(e,e.getMessage());
    return false;
  }
}

@Override protected void keyTyped(char par1,int par2){
  tokenBox.textboxKeyTyped(par1,par2);
  if (par2 == 28 || par2 == 156)   actionPerformed((GuiButton)buttonList.get(0));
}

private static Boolean isAlphanumeric(final String label){
  boolean status=false;
  if (StringUtils.isNotEmpty(label)) {
    Matcher matcher=patternAlphanumeric.matcher(label);
    status=matcher.matches();
  }
  return status;
}

final static String trimURISubstring(URL src,String sub){
  final String s=src.toExternalForm();
  final int endIndex=s.lastIndexOf(sub);
  final String t=s.substring(0,endIndex);
  return t;
}

@Override public String globalInfo(){
  return "Outputs the received results in arff format to " + "a Writer. All results must be received before the instances can be " + "written out.";
}

public static void silentCloseInputStream(InputStream is){
  try {
    if (is != null) {
      is.close();
    }
  }
 catch (  IOException e) {
    Log.w(LOG_TAG,"Cannot close input stream",e);
  }
}

public boolean removeRow(int row){
  if (m_rows.isValidRow(row)) {
    fireTableEvent(row,row,TableModelEvent.ALL_COLUMNS,TableModelEvent.DELETE);
    m_tuples.invalidate(row);
    m_rows.releaseRow(row);
    for (Iterator cols=getColumns(); cols.hasNext(); ) {
      Column c=(Column)cols.next();
      c.revertToDefault(row);
    }
    return true;
  }
  return false;
}

void addFillComponents(Container panel,int[] cols,int[] rows){
  Dimension filler=new Dimension(10,10);
  boolean filled_cell_11=false;
  CellConstraints cc=new CellConstraints();
  if (cols.length > 0 && rows.length > 0) {
    if (cols[0] == 1 && rows[0] == 1) {
      panel.add(Box.createRigidArea(filler),cc.xy(1,1));
      filled_cell_11=true;
    }
  }
  for (int index=0; index < cols.length; index++) {
    if (cols[index] == 1 && filled_cell_11) {
      continue;
    }
    panel.add(Box.createRigidArea(filler),cc.xy(cols[index],1));
  }
  for (int index=0; index < rows.length; index++) {
    if (rows[index] == 1 && filled_cell_11) {
      continue;
    }
    panel.add(Box.createRigidArea(filler),cc.xy(1,rows[index]));
  }
}

private boolean isParsableToDouble(String i){
  return i.matches("\\d+\\.\\d+");
}

protected String[] initPathsFromProperties(String rawPaths){
  String[] retPaths=null;
  if (rawPaths != null) {
    try {
      StringTokenizer token=new StringTokenizer(rawPaths,File.pathSeparator);
      int numPaths=token.countTokens();
      retPaths=new String[numPaths];
      for (int i=0; i < numPaths; i++) {
        retPaths[i]=token.nextToken();
      }
      return retPaths;
    }
 catch (    java.util.NoSuchElementException e) {
      e.printStackTrace();
    }
  }
  return retPaths;
}

private float colorToAngle(int color){
  float[] colors=new float[3];
  Color.colorToHSV(color,colors);
  return (float)Math.toRadians(-colors[0]);
}

private void registerDefaultValidatorIds(Application application,LinkedHashSet<String> defaultValidatorIds){
  if (defaultValidatorIds == null) {
    defaultValidatorIds=new LinkedHashSet<>();
    if (isBeanValidatorAvailable()) {
      WebConfiguration webConfig=WebConfiguration.getInstance();
      if (!webConfig.isOptionEnabled(WebConfiguration.BooleanWebContextInitParameter.DisableDefaultBeanValidator)) {
        defaultValidatorIds.add(BeanValidator.VALIDATOR_ID);
      }
    }
  }
  for (  String validatorId : defaultValidatorIds) {
    if (LOGGER.isLoggable(Level.FINE)) {
      LOGGER.log(Level.FINE,MessageFormat.format("Calling Application.addDefaultValidatorId({0})",validatorId));
    }
    application.addDefaultValidatorId(validatorId);
  }
}

protected void initializeLocation(V v,Point2D coord){
  Point point=locations.get(v);
  coord.setLocation(point.x,point.y);
}

public static Date parseDate(String dateStr){
  String formatString="";
  if (dateStr.length() == 16)   dateStr=dateStr.substring(0,14);
  if (dateStr.length() == 15)   formatString="yyyyMMdd'T'hhmmss";
  if (dateStr.length() == 8)   formatString="yyyyMMdd";
  SimpleDateFormat formatter=new SimpleDateFormat(formatString);
  ParsePosition pos=new ParsePosition(0);
  return formatter.parse(dateStr,pos);
}

@SuppressWarnings("unused") private void doUnload(MarkedProject markedProject,N4ProgressStateRecorder rec) throws N4JSCompileErrorException {
  if (createDebugOutput) {
    println("# unloading " + markedProject.project);
  }
  rec.markStartUnloading(markedProject);
  for (  Resource res : markedProject.resources) {
    rec.markUnloadingOf(res);
    res.unload();
  }
  rec.markFinishedUnloading(markedProject);
}

public void parseLib(Map<String,Object> dataModel,String fullText) throws ParseException {
  Matcher m;
  fullText=tmplHelper.normalizeText(fullText);
  m=commentPat.matcher(fullText);
  if (!m.find()) {
    throw new ParseException("Missing file top comment");
  }
  String introText=tmplHelper.stripCommentLeadingAsterix(tmplHelper.cleanTextValue(m.group(1)));
  dataModel.put("introText",introText);
  Matcher introm=tmplHelper.getFirstLineMatcher(introText);
  if (introm.matches()) {
    dataModel.put("pageTitle",tmplHelper.cleanTextValue(introm.group(1)));
    dataModel.put("pageDesc",tmplHelper.cleanTextValue(introm.group(2)));
  }
  String currentSectionName="default";
  Map<String,Object> sectionInfo=makeObjectMap();
  sectionInfo.put("name",currentSectionName);
  sectionInfo.put("title",null);
  sectionInfo.put("type","default");
  sectionInfo.put("comment","");
  Map<String,Map<String,Object>> sectionEntryMap=makeDataMap();
  sectionInfo.put("entryMap",sectionEntryMap);
  Map<String,Map<String,Object>> entryMap=makeDataMap();
  Map<String,Map<String,Object>> sectionMap=makeDataMap();
  sectionMap.put("default",sectionInfo);
  while (m.find()) {
    String comment=tmplHelper.cleanTextValue(m.group(1));
    Matcher subm;
    subm=sectionPat.matcher(comment);
    if (subm.matches()) {
      currentSectionName=tmplHelper.cleanTextValue(subm.group(1));
      sectionInfo=makeObjectMap();
      sectionInfo.put("name",currentSectionName);
      sectionInfo.put("title",currentSectionName);
      sectionInfo.put("type","sub");
      sectionInfo.put("comment",tmplHelper.cleanTextValue(tmplHelper.stripCommentLeadingAsterix(subm.group(2))));
      sectionEntryMap=makeDataMap();
      sectionInfo.put("entryMap",sectionEntryMap);
      sectionMap.put(currentSectionName,sectionInfo);
    }
 else {
      subm=entryPat.matcher(comment);
      if (subm.matches()) {
        String entryTitle=tmplHelper.cleanTextValue(subm.group(1));
        String entryBody=tmplHelper.cleanTextValue(subm.group(2));
        String postEntryText=fullText.substring(m.end());
        try {
          Map<String,Object> entryInfo=parseEntry(entryTitle,entryBody,postEntryText);
          entryInfo.put("sectionName",currentSectionName);
          String entryName=(String)entryInfo.get("name");
          if (entryName == null || entryName.isEmpty()) {
            throw new ParseException("Could not determine a formal name for the entry (function, macro or variable name)");
          }
          if (entryMap.containsKey(entryName)) {
            throw new ParseException("Duplicate entry: " + entryName);
          }
          entryMap.put(entryName,entryInfo);
          sectionEntryMap.put(entryName,entryInfo);
        }
 catch (        ParseException e) {
          throw new ParseException("Error parsing entry '" + entryTitle + "': "+ e.getMessage(),e);
        }
      }
 else {
        ;
      }
    }
  }
  msgHandler.logInfo(" - entries: " + entryMap.size() + ", sections: "+ sectionMap.size());
  dataModel.put("sectionMap",sectionMap);
  dataModel.put("entryMap",entryMap);
}

public void writeFile(ArrayList<DccLocoAddress> consistList,String fileName) throws IOException {
  Element root=new Element("consist-roster-config");
  Document doc=newDocument(root,dtdLocation + "consist-roster-config.dtd");
  Map<String,String> m=new HashMap<String,String>();
  m.put("type","text/xsl");
  m.put("href",xsltLocation + "consistRoster.xsl");
  ProcessingInstruction p=new ProcessingInstruction("xml-stylesheet",m);
  doc.addContent(0,p);
  Element roster=new Element("roster");
  for (int i=0; i < consistList.size(); i++) {
    Consist newConsist=consistMan.getConsist(consistList.get(i));
    roster.addContent(consistToXml(newConsist));
  }
  root.addContent(roster);
  try {
    if (!checkFile(fileName)) {
      File file=new File(fileName);
      File parentDir=file.getParentFile();
      if (!parentDir.exists()) {
        if (!parentDir.mkdir()) {
          throw (new IOException());
        }
      }
      if (!file.createNewFile()) {
        throw (new IOException());
      }
    }
    writeXML(findFile(fileName),doc);
  }
 catch (  IOException ioe) {
    log.error("IO Exception " + ioe);
    throw (ioe);
  }
}

public void train(Reader aReader) throws IOException {
  BufferedReader in=new BufferedReader(aReader);
  String line=in.readLine();
  while (line != null) {
    Matcher m=WORD_PATTERN.matcher(line.toLowerCase());
    while (m.find()) {
      String word=m.group();
      AtomicInteger count=nWords.get(word);
      if (count == null) {
        count=new AtomicInteger(0);
        nWords.put(word,count);
      }
      count.incrementAndGet();
    }
    line=in.readLine();
  }
}

private void startClient(){
  if (flumeClient != null && !flumeClient.isActive()) {
    flumeClient.close();
    flumeClient=null;
  }
  if (flumeClient == null) {
    try {
      flumeClient=RpcClientFactory.getDefaultInstance(flumeHostName,flumePort,maxSpanBatchSize);
    }
 catch (    FlumeException e) {
      LOG.warn("Failed to create Flume RPC Client. " + e.getMessage());
    }
  }
}

public void vspan(long start,long end,Paint color,String legend){
  LegendText legendText=new LegendText(color,legend);
  comments.add(legendText);
  plotElements.add(new VSpan(start,end,color,legendText));
}

public void onDraw(Canvas canvas,int centerX,int centerY){
  if (!mVisible) {
    return;
  }
  mArcBounds=new RectF(centerX - mProgressRadius,centerY - mProgressRadius,centerX + mProgressRadius,centerY + mProgressRadius);
  canvas.drawCircle(centerX,centerY,mProgressRadius,mProgressBasePaint);
  canvas.drawArc(mArcBounds,-90,mProgressAngleDegrees,false,mProgressPaint);
  if (mProgressAngleDegrees == 360 && System.currentTimeMillis() > mTimeToHide) {
    mVisible=false;
    if (mVisibilityListener != null) {
      mVisibilityListener.onHidden();
    }
  }
}

private void removeItemAtInt(int index,boolean updateChildrenOnMenuViews){
  if ((index < 0) || (index >= mItems.size()))   return;
  mItems.remove(index);
  if (updateChildrenOnMenuViews)   onItemsChanged(true);
}

public static byte[] decode(String s){
  return decode(s.toCharArray());
}

public boolean check(){
  return (m_File != null) && (m_Handler != null) && m_File.exists();
}

public static List<Long> zScoreTest(GeoTimeSerie gts,boolean useMedian,double d) throws WarpScriptException {
  doubleCheck(gts);
  List<Long> anomalous_ticks=new ArrayList<Long>();
  double[] musigma=madsigma(gts,useMedian);
  double m=musigma[0];
  double std=musigma[1];
  if (0.0D == std) {
    return anomalous_ticks;
  }
  for (int i=0; i < gts.values; i++) {
    double z=(gts.doubleValues[i] - m) / std;
    if (Math.abs(z) >= d) {
      anomalous_ticks.add(gts.ticks[i]);
    }
  }
  return anomalous_ticks;
}

private void append(PrintWriter pw,final String k,final String v){
  if (v != null) {
    pw.println(k + ": " + v);
  }
}

default B withDefault(String key,Object value){
  return withDefault(key,value != null ? value.toString() : null);
}

public void testMultiplyDiffScalePosNeg(){
  String a="1231212478987482988429808779810457634781384756794987";
  int aScale=10;
  String b="747233429293018787918347987234564568";
  int bScale=-10;
  String c="920003122862175749786430095741145455670101391569026662845893091880727173060570190220616";
  int cScale=0;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  BigDecimal result=aNumber.multiply(bNumber);
  assertEquals("incorrect value",c,result.toString());
  assertEquals("incorrect scale",cScale,result.scale());
}

private void skipWhitespace(){
  matcher.usePattern(WHITESPACE);
  if (matcher.lookingAt()) {
    matcher.region(matcher.end(),matcher.regionEnd());
  }
}

protected void createDynamicStyleForComponents(final TextField tagName,final TextArea tagDesc,final String taregtTagColor){
  tagName.removeStyleName(SPUIDefinitions.TAG_NAME);
  tagDesc.removeStyleName(SPUIDefinitions.TAG_DESC);
  getTargetDynamicStyles(taregtTagColor);
  tagName.addStyleName(TAG_NAME_DYNAMIC_STYLE);
  tagDesc.addStyleName(TAG_DESC_DYNAMIC_STYLE);
}

public void calculate_scores(){
  score=0;
  if (contents.length == 0) {
    API api=API.v();
    Set<InfoKind> source=api.getSourceInfoKinds(method);
    Set<InfoKind> sink=api.getSinkInfoKinds(method);
    if (is_system(method)) {
      if (api.isSafeMethod(method))       score=0;
 else       if (api.isSpecMethod(method))       score=5;
 else       if (api.isBannedMethod(method))       score=6;
      if (!source.isEmpty())       score+=1;
 else       if (!sink.isEmpty())       score+=2;
    }
    return;
  }
  for (  CallChainInfo cci : contents) {
    cci.calculate_scores();
    calls+=cci.calls;
    syscalls+=cci.syscalls;
    if (cci.score > score)     score=cci.score;
  }
}

public <T>JsonArray<T> createListDtoFromJson(String json,Class<T> dtoInterface){
  final DtoProvider<T> dtoProvider=getDtoProvider(dtoInterface);
  final List<JsonElement> list=gson.fromJson(json,listTypeCache.getUnchecked(JsonElement.class));
  final List<T> result=new ArrayList<>(list.size());
  for (  JsonElement e : list) {
    result.add(dtoProvider.fromJson(e));
  }
  return new JsonArrayImpl<>(result);
}

public void startConsumption(MultiThreadedBatchProcessor<T,TL> processor);

public static long longForQuery(SQLiteDatabase db,String query,String[] selectionArgs){
  SQLiteStatement prog=db.compileStatement(query);
  try {
    return longForQuery(prog,selectionArgs);
  }
  finally {
    prog.close();
  }
}

public void testOneOne(){
  String numA="1";
  String numB="1";
  String res="0";
  BigInteger aNumber=new BigInteger(numA);
  BigInteger bNumber=new BigInteger(numB);
  BigInteger result=aNumber.xor(bNumber);
  assertTrue(res.equals(result.toString()));
}

public String toString(){
  String s="CertificatePolicySet:[\n" + ids.toString() + "]\n";
  return (s);
}

@Override public void remove(String... identifiers){
  whitelist.removeAll(Arrays.asList(identifiers));
}

public static byte[] checkTlsPreMasterSecretKey(int clientVersion,int serverVersion,SecureRandom random,byte[] encoded,boolean isFailOver){
  if (random == null) {
    random=JCAUtil.getSecureRandom();
  }
  byte[] replacer=new byte[48];
  random.nextBytes(replacer);
  if (!isFailOver && (encoded != null)) {
    if (encoded.length != 48) {
      return replacer;
    }
    int encodedVersion=((encoded[0] & 0xFF) << 8) | (encoded[1] & 0xFF);
    if (clientVersion != encodedVersion) {
      if (clientVersion > 0x0301 || serverVersion != encodedVersion) {
        encoded=replacer;
      }
    }
    return encoded;
  }
  return replacer;
}

public Commafier(final String initial){
  m_separator=DEFAULT_SEPARATOR;
  sb.append(initial);
}

public void write(File file) throws IOException {
  PrintWriter pw=new PrintWriter(new OutputStreamWriter(new FileOutputStream(file),"UTF-8"),true);
  if (fromDir != null) {
    pw.println("FROM: " + fromDir + "*"+ fromExt);
  }
  String str=null;
  for (int i=0; i < bList.size(); i++) {
    str=(String)(bList.elementAt(i));
    pw.println(str);
  }
}

private void log(IStatus status){
  ResourcesPlugin.log(status);
}

static private StringBuilder replace(StringBuilder input,java.util.regex.Pattern pattern,String replacement){
  java.util.regex.Matcher m=pattern.matcher(input);
  while (m.find()) {
    if (isEscapedChar(input.toString(),m.start())) {
      continue;
    }
    input.replace(m.start(),m.end(),replacement);
    m.reset(input);
  }
  return input;
}

public static MultisigAggregateModificationTransaction createMultisigModification(){
  return new MultisigAggregateModificationTransaction(TimeInstant.ZERO,Utils.generateRandomAccount(),Collections.singletonList(new MultisigCosignatoryModification(MultisigModificationType.AddCosignatory,Utils.generateRandomAccount())));
}

public static boolean isJarCacheEnabledDefault(){
  return _isJarCacheEnabled;
}

public void test_write_flush_update(){
  final Journal store=(Journal)getStore();
  try {
    RWStrategy bufferStrategy=(RWStrategy)store.getBufferStrategy();
    final int nbytes=60;
    byte[] a=new byte[nbytes];
    r.nextBytes(a);
    final long addr=bufferStrategy.write(ByteBuffer.wrap(a));
    assertEquals(nbytes,store.getByteCount(addr));
    store.commit();
{
      final ByteBuffer b=bufferStrategy.read(addr);
      assertNotNull(b);
      for (int i=20; i < 40; i++) {
        assertEquals("data differs at offset=" + i,a[i],b.get(i));
      }
    }
  }
  finally {
    store.destroy();
  }
}

public static void copy(long[] src,int srcOffset,long[] dst,int dstOffset,int len){
  int srcLimit=srcOffset + len;
  while (srcOffset < srcLimit) {
    int srcIdx=srcOffset & 63;
    int dstIdx=dstOffset & 63;
    int srcRemainder=64 - srcIdx;
    int dstRemainder=64 - dstIdx;
    int chunkLen=Math.min(srcRemainder,dstRemainder);
    long mask=maskBelow(chunkLen) << srcIdx;
    dst[dstOffset >> 6]|=((src[srcOffset >> 6] & mask) >>> srcIdx) << dstOffset;
    srcOffset+=chunkLen;
    dstOffset+=chunkLen;
  }
}

public static int SAVED_XERROR_HANDLER(long display,XErrorEvent error){
  if (saved_error_handler != 0) {
  }
  if (log.isLoggable(PlatformLogger.Level.FINE)) {
    log.fine("Unhandled XErrorEvent: " + "id=" + error.get_resourceid() + ", "+ "serial="+ error.get_serial()+ ", "+ "ec="+ error.get_error_code()+ ", "+ "rc="+ error.get_request_code()+ ", "+ "mc="+ error.get_minor_code());
  }
  return 0;
}

protected int inBorder(int x,int y){
  Border b=getBorder();
  if (b == null) {
    return UNDEF;
  }
  Insets i=b.getBorderInsets(this);
  if (x <= i.left) {
    return DOCK_WEST;
  }
  if (x >= getWidth() - i.right) {
    return DOCK_EAST;
  }
  if (y <= i.top) {
    return DOCK_NORTH;
  }
  if (y >= getHeight() - i.bottom) {
    return DOCK_SOUTH;
  }
  return UNDEF;
}

public WallForce(float gravConst,float x1,float y1,float x2,float y2){
  params=new float[]{gravConst};
  minValues=new float[]{DEFAULT_MIN_GRAV_CONSTANT};
  maxValues=new float[]{DEFAULT_MAX_GRAV_CONSTANT};
  this.x1=x1;
  this.y1=y1;
  this.x2=x2;
  this.y2=y2;
  dx=x2 - x1;
  dy=y2 - y1;
  float r=(float)Math.sqrt(dx * dx + dy * dy);
  if (dx != 0.0)   dx/=r;
  if (dy != 0.0)   dy/=r;
}

public static void writeLn(final OutputStream out) throws IOException {
  out.write(LS_BYTES);
}

public static boolean isSystemApplication(Context context){
  if (context == null) {
    return false;
  }
  return isSystemApplication(context,context.getPackageName());
}

public void testPosZero(){
  String numA="27384627835298756289327365";
  String numB="0";
  String res="27384627835298756289327365";
  BigInteger aNumber=new BigInteger(numA);
  BigInteger bNumber=new BigInteger(numB);
  BigInteger result=aNumber.xor(bNumber);
  assertTrue(res.equals(result.toString()));
}

private static void initializeReleasePlatform(){
  String platformProperty=readConfigProperty(PLATFORM_PROPERTIES,PLATFORM_PROPERTY_KEY);
  if (platformProperty == null) {
    logInfo("Release platform not defined.");
  }
 else {
    currentPlatform=Platform.valueOf(platformProperty.toUpperCase(Locale.UK));
    logInfo("Release platform: " + currentPlatform);
  }
}

public static boolean isEmpty(CharSequence str){
  if (str == null || str.length() == 0) {
    return true;
  }
 else {
    return false;
  }
}

@Override public FSDataInputStream open(Path path,int bufferSize) throws IOException {
  String table=getTableName(_rootPath,path);
  String split=getSplitName(_rootPath,path);
  split=splitNameWithoutGzipExtension(split);
  return new FSDataInputStream(new EmoSplitInputStream(table,split));
}

public void simulateMethod(SootMethod method,ReferenceVariable thisVar,ReferenceVariable returnVar,ReferenceVariable params[]){
  String subSignature=method.getSubSignature();
  if (subSignature.equals("java.lang.Class defineClass0(java.lang.String,byte[],int,int,java.lang.security.ProtectionDomain)")) {
    java_lang_ClassLoader_defineClass0(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.Class findBootstrapClass(java.lang.String)")) {
    java_lang_ClassLoader_findBootstrapClass(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.Class findLoadedClass(java.lang.String)")) {
    java_lang_ClassLoader_findLoadedClass(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.ClassLoader getCallerClassLoader()")) {
    java_lang_ClassLoader_getCallerClassLoader(method,thisVar,returnVar,params);
    return;
  }
 else {
    defaultMethod(method,thisVar,returnVar,params);
    return;
  }
}

public static final String extractIplIdentityHostFrimwareRev(LocoNetMessage m){
  StringBuilder s=new StringBuilder();
  s.append(Integer.toString((m.getElement(8) & 0x78) >> 3));
  s.append(".");
  s.append(Integer.toString((m.getElement(8) & 0x07)));
  return s.toString();
}

private void grow(){
  if (keys == null || nkeys >= keys.length) {
    String[] nk=new String[nkeys + 4];
    String[] nv=new String[nkeys + 4];
    if (keys != null)     System.arraycopy(keys,0,nk,0,nkeys);
    if (values != null)     System.arraycopy(values,0,nv,0,nkeys);
    keys=nk;
    values=nv;
  }
}

private List<T> filter(final Collection<T> collection){
  final List<T> nullFreeList=new ArrayList<T>();
  if (collection != null) {
    for (    final T item : collection) {
      if (item != null) {
        nullFreeList.add(item);
      }
    }
  }
  return nullFreeList;
}

public boolean isSystemClass(SootClass clz){
  return allSystemClasses.contains(clz);
}

private byte[] tryDecodeHostToIp(String host){
  if (host.startsWith("[") && host.endsWith("]")) {
    return tryDecodeHostToIPv6(host);
  }
  return tryDecodeHostToIPv4(host);
}

private void updateBaseMatrix(Drawable d){
  ImageView imageView=getImageView();
  if (null == imageView || null == d) {
    return;
  }
  final float viewWidth=getImageViewWidth(imageView);
  final float viewHeight=getImageViewHeight(imageView);
  final int drawableWidth=d.getIntrinsicWidth();
  final int drawableHeight=d.getIntrinsicHeight();
  mBaseMatrix.reset();
  final float widthScale=viewWidth / drawableWidth;
  final float heightScale=viewHeight / drawableHeight;
  if (mScaleType == ScaleType.CENTER) {
    mBaseMatrix.postTranslate((viewWidth - drawableWidth) / 2F,(viewHeight - drawableHeight) / 2F);
  }
 else   if (mScaleType == ScaleType.CENTER_CROP) {
    float scale=Math.max(widthScale,heightScale);
    mBaseMatrix.postScale(scale,scale);
    mBaseMatrix.postTranslate((viewWidth - drawableWidth * scale) / 2F,(viewHeight - drawableHeight * scale) / 2F);
  }
 else   if (mScaleType == ScaleType.CENTER_INSIDE) {
    float scale=Math.min(1.0f,Math.min(widthScale,heightScale));
    mBaseMatrix.postScale(scale,scale);
    mBaseMatrix.postTranslate((viewWidth - drawableWidth * scale) / 2F,(viewHeight - drawableHeight * scale) / 2F);
  }
 else {
    RectF mTempSrc=new RectF(0,0,drawableWidth,drawableHeight);
    RectF mTempDst=new RectF(0,0,viewWidth,viewHeight);
switch (mScaleType) {
case FIT_CENTER:
      mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.CENTER);
    break;
case FIT_START:
  mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.START);
break;
case FIT_END:
mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.END);
break;
case FIT_XY:
mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.FILL);
break;
default :
break;
}
}
resetMatrix();
}

public List<Node> listAvailableNodes(Class<?> type){
  List<Node> result=new ArrayList<Node>();
  for (  Node node : availableNodes) {
    if (type.isAssignableFrom(node.getReturnType())) {
      result.add(node);
    }
  }
  return result;
}

private <T extends Draft3Resource>T lookForResource(Draft3ResourceType type,Class<T> clazz){
  List<T> resources=lookForResources(type,clazz);
  return resources != null && resources.size() > 0 ? resources.get(0) : null;
}

public static String readFileToString(File file) throws IOException {
  return readFileToString(file,Charset.defaultCharset());
}

private boolean isLocked(Order order){
  lock.lock();
  try {
    return activeOrders.contains(order.getId());
  }
  finally {
    lock.unlock();
  }
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

private static byte[] longToByteArray(long l){
  byte[] retVal=new byte[8];
  for (int i=0; i < 8; i++) {
    retVal[i]=(byte)l;
    l>>=8;
  }
  return retVal;
}

public EncoderTestSuiteBuilder encode(final String expected,final String input){
  return encode("input: " + input,expected,input);
}

public static boolean isFileTypeSupported(int fileType){
  List providers=getMidiFileWriters();
  for (int i=0; i < providers.size(); i++) {
    MidiFileWriter writer=(MidiFileWriter)providers.get(i);
    if (writer.isFileTypeSupported(fileType)) {
      return true;
    }
  }
  return false;
}

public void addMutedUsername(final String username){
  addMutedUsername(username,null);
}

public void overrideCurrentTime(long time){
  startTime=System.currentTimeMillis();
  currentTime=0;
  storedTime=time;
}

public static String sc(Double score){
  String score_str=String.format("%-5.4f",score);
  return score_str;
}

public static boolean validateBindAddress(String bindAddress){
  if (bindAddress == null || bindAddress.length() == 0)   return true;
  if (InetAddressUtil.validateHost(bindAddress) == null)   return false;
  return true;
}

protected void fail(String string){
  lastPrint=0;
  if (string.length() > 100) {
    char[] data=string.toCharArray();
    for (int i=0; i < data.length; i++) {
      char c=data[i];
      if (c >= 128 || c < 32) {
        data[i]=(char)('a' + (c & 15));
        string=null;
      }
    }
    if (string == null) {
      string=new String(data);
    }
  }
  println(string);
  throw new AssertionError(string);
}

public TypecheckResult interpretResults(TestConfiguration config,CompilationResult compilationResult){
  List<TestDiagnostic> expectedDiagnostics=readDiagnostics(config,compilationResult);
  return TypecheckResult.fromCompilationResults(config,compilationResult,expectedDiagnostics);
}

public boolean isTrustedXACMLProvider(String realm,String entityId,String trustedEntityId,String role) throws SAML2MetaException {
  boolean result=false;
  if (role != null) {
    if (role.equals(SAML2Constants.PDP_ROLE)) {
      XACMLPDPConfigElement pdpConfig=getPolicyDecisionPointConfig(realm,entityId);
      if (pdpConfig != null) {
        result=isSameCircleOfTrust(pdpConfig,realm,trustedEntityId);
      }
    }
 else     if (role.equals(SAML2Constants.PEP_ROLE)) {
      XACMLAuthzDecisionQueryConfigElement pepConfig=getPolicyEnforcementPointConfig(realm,entityId);
      result=isSameCircleOfTrust(pepConfig,realm,trustedEntityId);
    }
  }
  return result;
}

private PropertyEditor loadPropertyEditor(Class clz){
  PropertyEditor editor=null;
  try {
    editor=(PropertyEditor)clz.newInstance();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  return editor;
}

public Distribution(Instances source,ClassifierSplitModel modelToUse) throws Exception {
  int index;
  Instance instance;
  double[] weights;
  m_perClassPerBag=new double[modelToUse.numSubsets()][0];
  m_perBag=new double[modelToUse.numSubsets()];
  totaL=0;
  m_perClass=new double[source.numClasses()];
  for (int i=0; i < modelToUse.numSubsets(); i++) {
    m_perClassPerBag[i]=new double[source.numClasses()];
  }
  Enumeration<Instance> enu=source.enumerateInstances();
  while (enu.hasMoreElements()) {
    instance=enu.nextElement();
    index=modelToUse.whichSubset(instance);
    if (index != -1) {
      add(index,instance);
    }
 else {
      weights=modelToUse.weights(instance);
      addWeights(instance,weights);
    }
  }
}

public void writingRequestHeaders(){
  if (sentRequestMillis != -1)   throw new IllegalStateException();
  sentRequestMillis=System.currentTimeMillis();
}

public List<DexlibAbstractInstruction> instructionsAfter(DexlibAbstractInstruction instruction){
  int i=instructions.indexOf(instruction);
  if (i == -1)   throw new IllegalArgumentException("Instruction" + instruction + "not part of this body.");
  return instructions.subList(i + 1,instructions.size());
}

private Alignment fineTuneAlignment(final Alignment firstCompute,final int xframe,final int yframe,final Point frameLocation,final Point componentLocation,final int compWidth,final int compHeight){
switch (firstCompute) {
case TOPLEFT:
case TOPRIGHT:
    if (componentLocation.x - frameLocation.x + compWidth / 2 > xframe / 2) {
      return Alignment.TOPRIGHT;
    }
 else {
      return Alignment.TOPLEFT;
    }
case LEFTBOTTOM:
case LEFTTOP:
  if (componentLocation.y - frameLocation.y + compHeight / 2 > yframe / 2) {
    return Alignment.LEFTBOTTOM;
  }
 else {
    return Alignment.LEFTTOP;
  }
case RIGHTBOTTOM:
case RIGHTTOP:
if (componentLocation.y - frameLocation.y + compHeight / 2 > yframe / 2) {
  return Alignment.RIGHTBOTTOM;
}
 else {
  return Alignment.RIGHTTOP;
}
case BOTTOMLEFT:
case BOTTOMRIGHT:
if (componentLocation.x - frameLocation.x + compWidth / 2 > xframe / 2) {
return Alignment.BOTTOMRIGHT;
}
 else {
return Alignment.BOTTOMLEFT;
}
default :
if (realAlignment == Alignment.INNERLEFT || realAlignment == Alignment.INNERRIGHT) {
return realAlignment;
}
if (componentLocation.x - frameLocation.x > xframe + frameLocation.x - (compWidth + componentLocation.x)) {
return Alignment.INNERRIGHT;
}
 else {
return Alignment.INNERLEFT;
}
}
}

public boolean isEmpty(){
  return shapes == null ? true : shapes.isEmpty();
}

public static boolean isNetworkAvailable(Context context){
  ConnectivityManager cm=(ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
  NetworkInfo netInfo=cm.getActiveNetworkInfo();
  return netInfo != null && netInfo.isConnectedOrConnecting();
}

public void resetData(){
  data.clear();
  dataNames.clear();
  dataSet.resetData(dataNames,data,bins);
}

@Override public URI uploadPackage(){
  boolean fileExists=new File(topologyPackageLocation).isFile();
  if (!fileExists) {
    LOG.info("Topology file " + topologyPackageLocation + " does not exist.");
    return null;
  }
  Path filePath=Paths.get(destTopologyFile);
  File parentDirectory=filePath.getParent().toFile();
  assert parentDirectory != null;
  if (!parentDirectory.exists()) {
    LOG.fine("The working directory does not exist; creating it.");
    if (!parentDirectory.mkdirs()) {
      LOG.severe("Failed to create directory: " + parentDirectory.getPath());
      return null;
    }
  }
  fileExists=new File(filePath.toString()).isFile();
  if (fileExists) {
    LOG.fine("Target topology file " + filePath.toString() + " exists, overwriting...");
  }
  LOG.fine("Copying topology " + topologyPackageLocation + " package to target working directory "+ filePath.toString());
  Path source=Paths.get(topologyPackageLocation);
  try {
    CopyOption[] options=new CopyOption[]{StandardCopyOption.REPLACE_EXISTING};
    Files.copy(source,filePath,options);
  }
 catch (  IOException ex) {
    LOG.info("Unable to copy: " + source.toString() + " "+ ex);
    return null;
  }
  return getUri(destTopologyFile);
}

public static String stripEscape(String pattern){
  if (pattern == null)   return null;
  StringBuilder stripped=new StringBuilder(pattern.length());
  for (int pos=0; pos < pattern.length(); pos++) {
    char ch=pattern.charAt(pos);
    if (ch != '\\') {
      stripped.append(ch);
    }
 else     if (pos < pattern.length() - 1 && pattern.charAt(pos + 1) == '\\') {
      stripped.append('\\');
      pos+=1;
    }
  }
  return stripped.toString();
}

public long guest_time(){
  return Long.parseLong(fields[42]);
}

public void auditOperation(String operation,List<? extends TaggedLogAPIEntity> entities,List<String> encodedRowKeys,EntityDefinition entityDefinition){
  if (isAuditingRequired(entityDefinition.getService())) {
    List<GenericAuditEntity> auditEntities=buildAuditEntities(operation,entities,encodedRowKeys,entityDefinition);
    if (null != auditEntities && 0 != auditEntities.size()) {
      auditSupport.fireAudit(entityDefinition.getService(),auditEntities);
    }
  }
}

public Collection<HTMLToken> tokenizeHTML(){
  List<HTMLToken> tokens=new ArrayList<HTMLToken>();
  String nestedTags=nestedTagsRegex(6);
  Pattern p=Pattern.compile("" + "(?s:<!(--.*?--\\s*)+>)" + "|"+ "(?s:<\\?.*?\\?>)"+ "|" + nestedTags + "",Pattern.CASE_INSENSITIVE);
  Matcher m=p.matcher(text);
  int lastPos=0;
  while (m.find()) {
    if (lastPos < m.start()) {
      tokens.add(HTMLToken.text(text.substring(lastPos,m.start())));
    }
    tokens.add(HTMLToken.tag(text.substring(m.start(),m.end())));
    lastPos=m.end();
  }
  if (lastPos < text.length()) {
    tokens.add(HTMLToken.text(text.substring(lastPos,text.length())));
  }
  return tokens;
}

public void register(String pattern,String result){
  Assert.isTrue(matchers.size() == results.size());
  pattern=pattern.trim();
  if (pattern.length() == 0) {
    return;
  }
  matchers.add(new StringMatcher(pattern,false,false));
  results.add(result);
}

@Override public boolean onItemUse(ItemStack par1ItemStack,EntityPlayer par2EntityPlayer,World par3World,int x,int y,int z,int par7,float par8,float par9,float par10){
  if (!par3World.isRemote) {
    TileEntity tileEntity=par3World.getTileEntity(x,y,z);
    if (tileEntity != null) {
      if (tileEntity instanceof TileLauncherPrefab) {
        TileLauncherPrefab missileLauncher=(TileLauncherPrefab)tileEntity;
        if (missileLauncher.getFrequency() > 0) {
          setFrequency(missileLauncher.getFrequency(),par1ItemStack);
          par2EntityPlayer.addChatMessage(new ChatComponentText(Reference.CHAT_DESC + EnumColor.GREY + " "+ LangUtils.localize("message.designator.setFreq")+ " "+ EnumColor.DARK_GREY+ getFrequency(par1ItemStack)));
        }
 else {
          par2EntityPlayer.addChatMessage(new ChatComponentText(Reference.CHAT_DESC + EnumColor.GREY + " "+ LangUtils.localize("message.designator.failFreq")));
        }
      }
    }
  }
  return false;
}

public static PublicKey generatePublicKey(String encodedPublicKey){
  try {
    byte[] decodedKey=Base64.decode(encodedPublicKey);
    KeyFactory keyFactory=KeyFactory.getInstance(KEY_FACTORY_ALGORITHM);
    return keyFactory.generatePublic(new X509EncodedKeySpec(decodedKey));
  }
 catch (  NoSuchAlgorithmException e) {
    throw new RuntimeException(e);
  }
catch (  InvalidKeySpecException e) {
    Log.e(TAG,"Invalid key specification.");
    throw new IllegalArgumentException(e);
  }
catch (  Base64DecoderException e) {
    Log.e(TAG,"Base64 decoding failed.");
    throw new IllegalArgumentException(e);
  }
}

SSLSession toSession(byte[] data,String host,int port){
  ByteArrayInputStream bais=new ByteArrayInputStream(data);
  DataInputStream dais=new DataInputStream(bais);
  try {
    int type=dais.readInt();
    if (type != OPEN_SSL) {
      log(new AssertionError("Unexpected type ID: " + type));
      return null;
    }
    int length=dais.readInt();
    byte[] sessionData=new byte[length];
    dais.readFully(sessionData);
    int count=dais.readInt();
    X509Certificate[] certs=new X509Certificate[count];
    for (int i=0; i < count; i++) {
      length=dais.readInt();
      byte[] certData=new byte[length];
      dais.readFully(certData);
      certs[i]=OpenSSLX509Certificate.fromX509Der(certData);
    }
    return new OpenSSLSessionImpl(sessionData,host,port,certs,this);
  }
 catch (  IOException e) {
    log(e);
    return null;
  }
}

private static String parseDERString(byte[] alterNameValue) throws Throwable {
  try {
    ASN1StreamParser p=new ASN1StreamParser(alterNameValue);
    ASN1Encodable d=p.readObject();
    ASN1Primitive der=d.toASN1Primitive();
    return getStringFromObject(der);
  }
 catch (  Throwable e) {
    logger.error("Unable to extract User Principal Name: " + e.getMessage());
    throw e;
  }
}

public AtlasMessagesAdapter addCellFactories(AtlasCellFactory... cellFactories){
  for (  AtlasCellFactory CellFactory : cellFactories) {
    CellFactory.setStyle(mMessageStyle);
    mCellFactories.add(CellFactory);
    mViewTypeCount++;
    CellType me=new CellType(true,CellFactory);
    mCellTypesByViewType.put(mViewTypeCount,me);
    mMyViewTypesByCell.put(CellFactory,mViewTypeCount);
    mViewTypeCount++;
    CellType notMe=new CellType(false,CellFactory);
    mCellTypesByViewType.put(mViewTypeCount,notMe);
    mTheirViewTypesByCell.put(CellFactory,mViewTypeCount);
  }
  return this;
}

protected String consumeBOM(InputStream stream,String encoding) throws IOException {
  byte[] b=new byte[3];
  int count=0;
  stream.mark(3);
  if (encoding.equals("UTF-8")) {
    count=stream.read(b,0,3);
    if (count == 3) {
      final int b0=b[0] & 0xFF;
      final int b1=b[1] & 0xFF;
      final int b2=b[2] & 0xFF;
      if (b0 != 0xEF || b1 != 0xBB || b2 != 0xBF) {
        stream.reset();
      }
    }
 else {
      stream.reset();
    }
  }
 else   if (encoding.startsWith("UTF-16")) {
    count=stream.read(b,0,2);
    if (count == 2) {
      final int b0=b[0] & 0xFF;
      final int b1=b[1] & 0xFF;
      if (b0 == 0xFE && b1 == 0xFF) {
        return "UTF-16BE";
      }
 else       if (b0 == 0xFF && b1 == 0xFE) {
        return "UTF-16LE";
      }
    }
    stream.reset();
  }
  return encoding;
}

public static int createWithIdGeneration(Connection connection,String rawSqlQuery,Object... parameters) throws SQLException {
  PreparedStatement stmt=null;
  ResultSet rs=null;
  try {
    stmt=connection.prepareStatement(rawSqlQuery,Statement.RETURN_GENERATED_KEYS);
    for (int index=0; index < parameters.length; index++) {
      JdbcUtils.bindParameter(stmt,index + 1,parameters[index]);
    }
    stmt.executeUpdate();
    rs=stmt.getGeneratedKeys();
    rs.next();
    return rs.getInt(1);
  }
  finally {
    JdbcUtils.closeResultSet(rs);
    JdbcUtils.closeStatement(stmt);
  }
}

public boolean writeHeader(OutputStream os){
  try {
    writeInt(os,CACHE_MAGIC);
    writeString(os,key);
    writeString(os,etag == null ? "" : etag);
    writeLong(os,serverDate);
    writeLong(os,lastModified);
    writeLong(os,ttl);
    writeLong(os,softTtl);
    writeStringStringMap(responseHeaders,os);
    os.flush();
    return true;
  }
 catch (  IOException e) {
    VolleyLog.d("%s",e.toString());
    return false;
  }
}

public static int andNot(int a[],int lena,int b[],int lenb,int[] target){
  if (lena == 0)   return 0;
  if (lenb == 0) {
    System.arraycopy(a,0,target,0,lena);
    return lena;
  }
  if ((lenb >> 3) >= lena) {
    return andNotBinarySearch(a,lena,b,lenb,target);
  }
  int count=0;
  int i=0, j=0;
  int doca=a[i], docb=b[j];
  for (; ; ) {
    if (doca > docb) {
      if (++j >= lenb)       break;
      docb=b[j];
    }
 else     if (doca < docb) {
      target[count++]=doca;
      if (++i >= lena)       break;
      doca=a[i];
    }
 else {
      if (++i >= lena)       break;
      doca=a[i];
      if (++j >= lenb)       break;
      docb=b[j];
    }
  }
  int leftover=lena - i;
  if (leftover > 0) {
    System.arraycopy(a,i,target,count,leftover);
    count+=leftover;
  }
  return count;
}

public boolean remove(HttpConnection connection){
  TimeValues times=connectionToTimes.remove(connection);
  if (times == null) {
    log.warn("Removing a connection that never existed!");
    return true;
  }
 else {
    return System.currentTimeMillis() <= times.timeExpires;
  }
}

void createButtons(){
  if (scrollForwardButton != null) {
    tabPane.remove(scrollForwardButton);
    scrollForwardButton.removeActionListener(this);
    tabPane.remove(scrollBackwardButton);
    scrollBackwardButton.removeActionListener(this);
  }
  int tabPlacement=tabPane.getTabPlacement();
  int width=UIManager.getInt("ScrollBar.width");
  if (tabPlacement == TOP || tabPlacement == BOTTOM) {
    scrollForwardButton=new ArrowButton(EAST,width);
    scrollBackwardButton=new ArrowButton(WEST,width);
  }
 else {
    scrollForwardButton=new ArrowButton(SOUTH,width);
    scrollBackwardButton=new ArrowButton(NORTH,width);
  }
  scrollForwardButton.addActionListener(this);
  scrollBackwardButton.addActionListener(this);
  tabPane.add(scrollForwardButton);
  tabPane.add(scrollBackwardButton);
}

public void or(Criteria criteria){
  oredCriteria.add(criteria);
}

private boolean checkTouchSlop(View child,float dx,float dy){
  if (child == null) {
    return false;
  }
  final boolean checkHorizontal=mCallback.getViewHorizontalDragRange(child) > 0;
  final boolean checkVertical=mCallback.getViewVerticalDragRange(child) > 0;
  if (checkHorizontal && checkVertical) {
    return dx * dx + dy * dy > mTouchSlop * mTouchSlop;
  }
 else   if (checkHorizontal) {
    return Math.abs(dx) > mTouchSlop;
  }
 else   if (checkVertical) {
    return Math.abs(dy) > mTouchSlop;
  }
  return false;
}

public static String rmSlashFromUrl(final String url){
  return url.endsWith("/") ? url.substring(0,url.length() - 1) : url;
}

protected void updateChartLayout(){
  chartContainer.removeAll();
  List<String> selectedMetrics=getSelectedMetrics();
  if (selectedMetrics.size() > 0) {
    if (selectedMetrics.size() <= 1) {
      chartContainer.setLayout(new GridLayout(1,1));
    }
 else     if (selectedMetrics.size() <= 2) {
      chartContainer.setLayout(new GridLayout(2,1));
    }
 else     if (selectedMetrics.size() <= 4) {
      chartContainer.setLayout(new GridLayout(2,2));
    }
 else     if (selectedMetrics.size() <= 6) {
      chartContainer.setLayout(new GridLayout(3,2));
    }
 else {
      chartContainer.setLayout(new GridLayout((int)Math.ceil(selectedMetrics.size() / 3.0),3));
    }
    GridLayout layout=(GridLayout)chartContainer.getLayout();
    int spaces=layout.getRows() * layout.getColumns();
    for (int i=0; i < Math.max(spaces,selectedMetrics.size()); i++) {
      if (i < selectedMetrics.size()) {
        chartContainer.add(createChart(selectedMetrics.get(i)));
      }
 else {
        chartContainer.add(new EmptyPlot(this));
      }
    }
  }
  chartContainer.revalidate();
}

public String host(Properties props){
  return props.getProperty(HOST_PROPERTY_KEY,"localhost");
}

void cancel(){
  setVisible(false);
}

@Override public MemChunkHolder<VolatileMemAllocator> createChunk(long size,boolean autoreclaim){
  MemChunkHolder<VolatileMemAllocator> ret=null;
  Long addr=m_vmasvc.allocate(m_nid,size,true);
  if (0 == addr && m_activegc) {
    m_chunkcollector.waitReclaimCoolDown(m_gctimeout);
    addr=m_vmasvc.allocate(m_nid,size,true);
  }
  if (0 != addr) {
    ret=new MemChunkHolder<VolatileMemAllocator>(this,addr,size);
    ret.setCollector(m_chunkcollector);
    if (autoreclaim) {
      m_chunkcollector.register(ret);
    }
  }
  return ret;
}

public void waitForInvocation(long msecWait,int numberOfNewEvents){
  long startTime=System.currentTimeMillis();
  while (true) {
    if ((System.currentTimeMillis() - startTime) > msecWait) {
      throw new RuntimeException("No events or less then the number of expected events received, expected " + numberOfNewEvents + " received "+ getNewDataListFlattened().length);
    }
    EventBean[] events=getNewDataListFlattened();
    if (events.length >= numberOfNewEvents) {
      return;
    }
    try {
      Thread.sleep(50);
    }
 catch (    InterruptedException e) {
      return;
    }
  }
}

private String versionName(String prefix,int ver){
  return fName(prefix) + String.valueOf(ver);
}

private void requestPermissionIfNeeded(){
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
    int hasEnableCoarseLocationPerm=checkSelfPermission(Manifest.permission.ACCESS_COARSE_LOCATION);
    int hasEnableFineLocationPerm=checkSelfPermission(Manifest.permission.ACCESS_FINE_LOCATION);
    int hasEnableExternalWritePerm=checkSelfPermission(Manifest.permission.WRITE_EXTERNAL_STORAGE);
    List<String> permissionToRequest=new ArrayList<>();
    if (hasEnableCoarseLocationPerm == PackageManager.PERMISSION_DENIED) {
      permissionToRequest.add(Manifest.permission.ACCESS_COARSE_LOCATION);
    }
    if (hasEnableFineLocationPerm == PackageManager.PERMISSION_DENIED) {
      permissionToRequest.add(Manifest.permission.ACCESS_FINE_LOCATION);
    }
    if (hasEnableExternalWritePerm == PackageManager.PERMISSION_DENIED) {
      permissionToRequest.add(Manifest.permission.WRITE_EXTERNAL_STORAGE);
    }
    if (!permissionToRequest.isEmpty()) {
      requestPermissions(permissionToRequest.toArray(new String[permissionToRequest.size()]),ALLOW_PERMISSIONS);
    }
 else {
      initEvent();
    }
  }
}

public ExtractMethodRefactoring(ICompilationUnit unit,int selectionStart,int selectionLength){
  fCUnit=unit;
  fRoot=null;
  fMethodName="extracted";
  fSelectionStart=selectionStart;
  fSelectionLength=selectionLength;
  fVisibility=-1;
}

@Override public boolean done(){
  if (stoppingIncrements && incrementsLeft == 0)   return true;
 else   return false;
}

public void parse() throws java.lang.Exception {
  int act;
  symbol lhs_sym;
  short handle_size, lhs_sym_num;
  production_tab=production_table();
  action_tab=action_table();
  reduce_tab=reduce_table();
  init_actions();
  user_init();
  cur_token=scan();
  stack.push(new symbol(0,start_state()));
  tos=0;
  for (_done_parsing=false; !_done_parsing; ) {
    act=get_action(((symbol)stack.peek()).parse_state,cur_token.sym);
    if (act > 0) {
      cur_token.parse_state=act - 1;
      stack.push(cur_token);
      tos++;
      cur_token=scan();
    }
 else     if (act < 0) {
      lhs_sym=do_action((-act) - 1,this,stack,tos);
      lhs_sym_num=production_tab[(-act) - 1][0];
      handle_size=production_tab[(-act) - 1][1];
      for (int i=0; i < handle_size; i++) {
        stack.pop();
        tos--;
      }
      act=get_reduce(((symbol)stack.peek()).parse_state,lhs_sym_num);
      lhs_sym.parse_state=act;
      stack.push(lhs_sym);
      tos++;
    }
 else     if (act == 0) {
      syntax_error(cur_token);
      if (!error_recovery(false)) {
        unrecovered_syntax_error(cur_token);
        done_parsing();
      }
    }
  }
}

private static void writeSet1(final BTree btree){
  log.info("");
  for (int i=0; i < 1000; i++) {
    btree.insert(i,i);
  }
}

private byte[] createSegmentTable(int setupHeaderLength,List<OggPageHeader.PacketStartAndLength> extraPackets){
  ByteArrayOutputStream resultBaos=new ByteArrayOutputStream();
  byte[] restShouldBe;
  byte[] nextPacket;
  restShouldBe=createSegments(setupHeaderLength,true);
  try {
    resultBaos.write(restShouldBe);
    if (extraPackets.size() > 0) {
      for (      OggPageHeader.PacketStartAndLength packet : extraPackets) {
        nextPacket=createSegments(packet.getLength(),false);
        resultBaos.write(nextPacket);
      }
    }
  }
 catch (  IOException ioe) {
    throw new RuntimeException("Unable to create segment table:" + ioe.getMessage());
  }
  return resultBaos.toByteArray();
}

public static int indexOfIgnoreCase(String src,String sub,int startIndex,int endIndex){
  if (startIndex < 0) {
    startIndex=0;
  }
  int srclen=src.length();
  if (endIndex > srclen) {
    endIndex=srclen;
  }
  int sublen=sub.length();
  if (sublen == 0) {
    return startIndex > srclen ? srclen : startIndex;
  }
  sub=sub.toLowerCase();
  int total=endIndex - sublen + 1;
  char c=sub.charAt(0);
  mainloop:   for (int i=startIndex; i < total; i++) {
    if (Character.toLowerCase(src.charAt(i)) != c) {
      continue;
    }
    int j=1;
    int k=i + 1;
    while (j < sublen) {
      char source=Character.toLowerCase(src.charAt(k));
      if (sub.charAt(j) != source) {
        continue mainloop;
      }
      j++;
      k++;
    }
    return i;
  }
  return -1;
}

private void addPolygonRing(LinearRing lr,int cwLeft,int cwRight){
  if (lr.isEmpty())   return;
  Coordinate[] coord=CoordinateArrays.removeRepeatedPoints(lr.getCoordinates());
  if (coord.length < 4) {
    hasTooFewPoints=true;
    invalidPoint=coord[0];
    return;
  }
  int left=cwLeft;
  int right=cwRight;
  if (CGAlgorithms.isCCW(coord)) {
    left=cwRight;
    right=cwLeft;
  }
  Edge e=new Edge(coord,new Label(argIndex,Location.BOUNDARY,left,right));
  lineEdgeMap.put(lr,e);
  insertEdge(e);
  insertPoint(argIndex,coord[0],Location.BOUNDARY);
}

public boolean acceptsLoadName(String load){
  if (_loadOption.equals(ALL_LOADS)) {
    return true;
  }
  if (_loadOption.equals(INCLUDE_LOADS)) {
    return _loadList.contains(load);
  }
  return !_loadList.contains(load);
}

public static void expandLetters(String letters,WordRelation wordRelation){
  letters=letters.toLowerCase();
  char c;
  for (int i=0; i < letters.length(); i++) {
    c=letters.charAt(i);
    if (isDigit(c)) {
      wordRelation.addWord(digit2num[c - '0']);
    }
 else     if (letters.equals("a")) {
      wordRelation.addWord("_a");
    }
 else {
      wordRelation.addWord(String.valueOf(c));
    }
  }
}

public static void writeStringToFile(File file,String data,Charset encoding,boolean append) throws IOException {
  OutputStream out=null;
  try {
    out=openOutputStream(file,append);
    IOUtils.write(data,out,encoding);
    out.close();
  }
  finally {
    IOUtils.closeQuietly(out);
  }
}

@Deprecated public static void subtract(String name,double amount) throws UserDoesNotExistException, NoLoanPermittedException {
  try {
    substract(name,BigDecimal.valueOf(amount));
  }
 catch (  ArithmeticException e) {
    logger.log(Level.WARNING,"Failed to substract " + amount + " of balance of "+ name+ ": "+ e.getMessage(),e);
  }
}

public MnemonicCode(InputStream wordstream,String wordListDigest) throws IOException, IllegalArgumentException {
  BufferedReader br=new BufferedReader(new InputStreamReader(wordstream,"UTF-8"));
  wordList=new ArrayList<String>(2048);
  String word;
  while ((word=br.readLine()) != null)   wordList.add(word);
  br.close();
  initializeFromWords(wordList,wordListDigest);
}

public QKDialog addMenuItem(String title,long id){
  mMenuItems.add(title);
  mMenuItemIds.add(id);
  return this;
}

public AnchorPane createFingerPrintPanel(ArrayList<FpPanel> fingerprintPanelList){
  return createFingerPrintPanel(fingerprintPanelList,null);
}

private static boolean isMemoryAccess(final String value){
  return value.equals("[");
}

public void addAttribute(AttributeInfo info){
  AttributeInfo.remove(attributes,info.getName());
  attributes.add(info);
}

private static boolean verifyStringParam(String str,int maxLength,String acceptableCharacters){
  return !(str == null || str.length() == 0 || str.length() > maxLength || !Pattern.matches(acceptableCharacters,str));
}

private int calculateDragSensitivity(){
  int range=MAX_DRAG_SENSITIVITY - MIN_DRAG_SENSITIVITY;
  return Math.round((1 - getDragSensitivity()) * range + MIN_DRAG_SENSITIVITY);
}

public static String lowerFirstChar(String string){
  if (string == null)   return null;
  if (string.length() <= 1)   return string.toLowerCase();
  StringBuilder sb=new StringBuilder(string);
  sb.setCharAt(0,Character.toLowerCase(sb.charAt(0)));
  return sb.toString();
}

public void forEachBlockPosMutableTopDown(Predicate<BlockPos> func){
  BlockPos.MutableBlockPos blockPos=new BlockPos.MutableBlockPos();
  int baseX=getMinBlockX();
  int baseZ=getMinBlockZ();
  int blockYMax=getMaxBlockY();
  for (int x=0; x < 16; x++) {
    for (int z=0; z < 16; z++) {
      blockPos.setPos(baseX + x,blockYMax,baseZ + z);
      for (int y=15; y >= 0; y--) {
        boolean cont=func.test(blockPos);
        blockPos.move(EnumFacing.DOWN);
        if (!cont) {
          break;
        }
      }
    }
  }
}

public String visit(Type t,Locale locale){
  return t.accept(this,locale);
}

public static final void writeMapXml(Map val,XmlSerializer out,WriteMapCallback callback) throws XmlPullParserException, java.io.IOException {
  if (val == null) {
    return;
  }
  Set s=val.entrySet();
  Iterator i=s.iterator();
  while (i.hasNext()) {
    Map.Entry e=(Map.Entry)i.next();
    writeValueXml(e.getValue(),(String)e.getKey(),out,callback);
  }
}

public static void dropTable(String table,Connection connection){
  table=table.replace(";","");
  StringBuilder dropTableQuery=new StringBuilder();
  dropTableQuery.append("DROP TABLE ");
  dropTableQuery.append(table);
  LOG.info("Drop Table: ");
  LOG.info(dropTableQuery);
  executeStatementIfExists(dropTableQuery.toString(),connection);
}

private int freeSpace(){
  return buffer.capacity() - buffer.limit() + buffer.position();
}

@Override public List<Node> generate(int popSize){
  List<Node> population=new ArrayList<>();
  for (int i=0; i < popSize; ) {
    Node candidate=grow(1);
    if (candidate.isValid()) {
      population.add(candidate);
      i++;
    }
  }
  return population;
}

public synchronized void notifyBeforeUse(CompositeTransaction ct) throws InvalidSessionHandleStateException {
  if (closed)   throw new InvalidSessionHandleStateException("The underlying XA session is closed");
  try {
    TransactionContext suspended=null;
    if (ct != null) {
      Iterator<TransactionContext> it=allContexts.iterator();
      while (it.hasNext() && suspended == null) {
        TransactionContext b=(TransactionContext)it.next();
        if (b.isSuspendedInTransaction(ct)) {
          suspended=b;
        }
      }
    }
    if (suspended != null) {
      if (LOGGER.isDebugEnabled())       LOGGER.logDebug(this + ": resuming suspended XA context for transaction " + ct.getTid());
      currentContext=suspended;
      currentContext.transactionResumed();
    }
 else {
      try {
        if (LOGGER.isTraceEnabled())         LOGGER.logTrace(this + ": checking XA context for transaction " + ct);
        currentContext.checkEnlistBeforeUse(ct);
      }
 catch (      UnexpectedTransactionContextException txBoundaryPassed) {
        if (LOGGER.isDebugEnabled())         LOGGER.logDebug(this + ": suspending existing XA context and creating a new one for transaction " + ct);
        currentContext.transactionSuspended();
        currentContext=new TransactionContext(resource,xaResource);
        allContexts.add(currentContext);
        try {
          currentContext.checkEnlistBeforeUse(ct);
        }
 catch (        UnexpectedTransactionContextException e) {
          String msg="Unexpected error in session handle";
          LOGGER.logError(msg,e);
          throw new InvalidSessionHandleStateException(msg);
        }
      }
    }
  }
 catch (  InvalidSessionHandleStateException e) {
    notifySessionErrorOccurred();
    throw e;
  }
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public void onActivityResult(int requestCode,int resultCode,Intent data){
  if (mInitializationComplete) {
    mActivityDelegate.onActivityResultWithNative(requestCode,resultCode,data);
  }
 else {
    if (mPendingActivityResults == null) {
      mPendingActivityResults=new ArrayList<ActivityResult>(1);
    }
    mPendingActivityResults.add(new ActivityResult(requestCode,resultCode,data));
  }
}

public void deleteSelection(ArrayList<Integer> nodes){
  for (int i=0; i < nodes.size(); i++) {
    for (int j=i + 1; j < nodes.size(); j++) {
      if (nodes.get(i) > nodes.get(j)) {
        int h=nodes.get(i);
        nodes.set(i,nodes.get(j));
        nodes.set(j,h);
      }
    }
  }
  if (m_bNeedsUndoAction) {
    addUndoAction(new DeleteSelectionAction(nodes));
  }
  boolean bNeedsUndoAction=m_bNeedsUndoAction;
  m_bNeedsUndoAction=false;
  try {
    for (int iNode=nodes.size() - 1; iNode >= 0; iNode--) {
      deleteNode(nodes.get(iNode));
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  m_bNeedsUndoAction=bNeedsUndoAction;
}

protected void onCached(){
  if (LogConfiguration.loggingIsEnabled()) {
    logger.log(Level.INFO,"Resources cached.");
  }
  uiHandler.hideMessage();
  updating=false;
  fireApplicationCacheEvent(CacheEvent.onCached);
}

public static void showString(String title,String content,Dimension dimension){
  JTextArea area=new JTextArea(content);
  area.setEditable(false);
  JScrollPane scroll=new JScrollPane(area);
  scroll.setPreferredSize(dimension);
  JOptionPane.showMessageDialog(null,scroll,title,JOptionPane.INFORMATION_MESSAGE);
}

private void markCGForDeletion(BlockConsistencyGroup consistencyGroup){
  if (!consistencyGroup.getInactive()) {
    consistencyGroup.setStorageController(null);
    consistencyGroup.setInactive(true);
    _dbClient.updateObject(consistencyGroup);
  }
}

public LongBuffer put(long[] src,int srcOffset,int longCount){
  JTranscArrays.checkOffsetAndCount(src.length,srcOffset,longCount);
  if (longCount > remaining()) {
    throw new BufferOverflowException();
  }
  for (int i=srcOffset; i < srcOffset + longCount; ++i) {
    put(src[i]);
  }
  return this;
}

public void playTogether(Collection<Animator> items){
  if (items != null && items.size() > 0) {
    mNeedsSort=true;
    Builder builder=null;
    for (    Animator anim : items) {
      if (builder == null) {
        builder=play(anim);
      }
 else {
        builder.with(anim);
      }
    }
  }
}

private MessageContext createMessageContext(AxisEngine engine,HttpServletRequest req,HttpServletResponse res,Component component){
  MessageContext msgContext=new MessageContext(engine);
  String requestPath=getRequestPath(req);
  if (isDebug) {
    log.debug("MessageContext:" + msgContext);
    log.debug("HEADER_CONTENT_TYPE:" + req.getHeader(HTTPConstants.HEADER_CONTENT_TYPE));
    log.debug("HEADER_CONTENT_LOCATION:" + req.getHeader(HTTPConstants.HEADER_CONTENT_LOCATION));
    log.debug("Constants.MC_HOME_DIR:" + String.valueOf(homeDir));
    log.debug("Constants.MC_RELATIVE_PATH:" + requestPath);
    log.debug("HTTPConstants.MC_HTTP_SERVLETLOCATION:" + String.valueOf(webInfPath));
    log.debug("HTTPConstants.MC_HTTP_SERVLETPATHINFO:" + req.getPathInfo());
    log.debug("HTTPConstants.HEADER_AUTHORIZATION:" + req.getHeader(HTTPConstants.HEADER_AUTHORIZATION));
    log.debug("Constants.MC_REMOTE_ADDR:" + req.getRemoteAddr());
    log.debug("configPath:" + String.valueOf(webInfPath));
  }
  msgContext.setTransportName("http");
  msgContext.setProperty(Constants.MC_HOME_DIR,homeDir);
  msgContext.setProperty(Constants.MC_RELATIVE_PATH,requestPath);
  msgContext.setProperty(HTTPConstants.MC_HTTP_SERVLET,this);
  msgContext.setProperty(HTTPConstants.MC_HTTP_SERVLETREQUEST,req);
  msgContext.setProperty(HTTPConstants.MC_HTTP_SERVLETRESPONSE,res);
  msgContext.setProperty(HTTPConstants.MC_HTTP_SERVLETLOCATION,webInfPath);
  msgContext.setProperty(HTTPConstants.MC_HTTP_SERVLETPATHINFO,req.getPathInfo());
  msgContext.setProperty(HTTPConstants.HEADER_AUTHORIZATION,req.getHeader(HTTPConstants.HEADER_AUTHORIZATION));
  msgContext.setProperty(lucee.runtime.net.rpc.server.Constants.COMPONENT,component);
  msgContext.setProperty(Constants.MC_REMOTE_ADDR,req.getRemoteAddr());
  ServletEndpointContextImpl sec=new ServletEndpointContextImpl();
  msgContext.setProperty(Constants.MC_SERVLET_ENDPOINT_CONTEXT,sec);
  String realpath=context.getRealPath(requestPath);
  if (realpath != null) {
    msgContext.setProperty(Constants.MC_REALPATH,realpath);
  }
  msgContext.setProperty(Constants.MC_CONFIGPATH,webInfPath);
  return msgContext;
}

@Override public void invokeCommand(int argLength,String[] args,String command){
  Pattern regex=null;
  if (args.length == 1) {
    regex=Pattern.compile(args[0]);
  }
 else   if (args.length != 0) {
    throw new UsageException("help [command]");
  }
  for (  AbstractCommand cmd : CommandBus.commands)   tryRegex(regex,cmd);
  for (  FuzzyCommand cmd : CommandBus.parsers)   tryRegex(regex,cmd);
}

public static Builder newBuilder(){
  return new Builder();
}

protected int parseAndAddNode(XmlResourceParser parser,HashMap<String,TagParser> tagParserMap,ArrayList<Long> screenIds) throws XmlPullParserException, IOException {
  if (TAG_INCLUDE.equals(parser.getName())) {
    final int resId=getAttributeResourceValue(parser,ATTR_WORKSPACE,0);
    if (resId != 0) {
      return parseLayout(resId,screenIds);
    }
 else {
      return 0;
    }
  }
  mValues.clear();
  parseContainerAndScreen(parser,mTemp);
  final long container=mTemp[0];
  final long screenId=mTemp[1];
  mValues.put(LauncherSettings.Favorites.CONTAINER,container);
  mValues.put(LauncherSettings.Favorites.SCREEN,screenId);
  mValues.put(LauncherSettings.Favorites.CELLX,convertToDistanceFromEnd(getAttributeValue(parser,ATTR_X),mColumnCount));
  mValues.put(LauncherSettings.Favorites.CELLY,convertToDistanceFromEnd(getAttributeValue(parser,ATTR_Y),mRowCount));
  TagParser tagParser=tagParserMap.get(parser.getName());
  if (tagParser == null) {
    if (LOGD)     Log.d(TAG,"Ignoring unknown element tag: " + parser.getName());
    return 0;
  }
  long newElementId=tagParser.parseAndAdd(parser);
  if (newElementId >= 0) {
    if (!screenIds.contains(screenId) && container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {
      screenIds.add(screenId);
    }
    return 1;
  }
  return 0;
}

public WordEntry addNewWord(final String str){
  final String key=trimWord(str);
  WordEntry entry=words.get(key);
  if (entry == null) {
    entry=new WordEntry();
    entry.setType(new ExpressionType(""));
    entry.setNormalized(key);
    words.put(key,entry);
  }
 else {
    logger.warn("word already known: " + str + " -> "+ entry.getNormalized());
  }
  return entry;
}

@Override public int insert(String elem){
  int firstIndex=(int)(elem.charAt(0) - 'a');
  int middleIndex=(int)(elem.charAt(-1 + elem.length() / 2) - 'a');
  int lastIndex=(int)(elem.charAt(elem.length() - 2) - 'a');
  storage[firstIndex * 400 + middleIndex * 20 + lastIndex]=elem;
  return 1;
}

@Override protected void onMeasure(int widthMeasureSpec,int heightMeasureSpec){
  mWidth=MeasureSpec.getSize(widthMeasureSpec);
  mHeight=MeasureSpec.getSize(heightMeasureSpec);
  int minSide=Math.min(mWidth,mHeight);
  mWidth=minSide;
  mHeight=minSide;
  mCurrentProgressPosition=calculateCurrentPositionFromCurrentSeconds(mCurrentSeconds);
  objectAnimatorProgress.setFloatValues(mCurrentProgressPosition / mWidth,1.0f);
  objectAnimatorProgress.setDuration((mMaxSeconds - mCurrentSeconds) * 1000);
  if (mBitmapCoverImage != null)   scaleCoverBitmap(mBitmapCoverImage);
  rectFEmptyProgress.set(0,mHeight - mProgressHeight,mWidth,mHeight);
  mDrawableBottomShadow.setBounds(0,(10 * mHeight) / 12,mWidth,mHeight);
  if (startRequested) {
    startRequested=false;
    start();
  }
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
}

protected List<Command> handleCommands(ServerConnector serverConnector,List<Command> commands){
  List<Command> results=new ArrayList<Command>();
  for (  Command command : commands) {
    if (LOG.isLoggable(Level.FINEST)) {
      LOG.finest("processing " + command);
    }
    results.addAll(serverConnector.receive(command));
  }
  return results;
}

public static void UF5(double[] x,double[] f,int nx){
  int count1=0;
  int count2=0;
  double sum1=0.0;
  double sum2=0.0;
  double yj;
  double hj;
  double N=10.0;
  double E=0.1;
  for (int j=2; j <= nx; j++) {
    yj=x[j - 1] - Math.sin(6.0 * PI * x[0] + j * PI / nx);
    hj=2.0 * yj * yj - Math.cos(4.0 * PI * yj) + 1.0;
    if (j % 2 == 0) {
      sum2+=hj;
      count2++;
    }
 else {
      sum1+=hj;
      count1++;
    }
  }
  hj=(0.5 / N + E) * Math.abs(Math.sin(2.0 * N * PI* x[0]));
  f[0]=x[0] + hj + 2.0 * sum1 / (double)count1;
  f[1]=1.0 - x[0] + hj + 2.0 * sum2 / (double)count2;
}

private View fillUp(int pos,int nextBottom){
  if (DEBUG)   Log.i(TAG,"fillLeft() pos: " + pos + " nextBottom: "+ nextBottom+ M_FIRST_POSITION+ mFirstPosition);
  View selectedView=null;
  final int end=mListPadding.top;
  while (nextBottom > end && pos >= 0) {
    View temp=makeRow(pos,nextBottom,false);
    if (temp != null) {
      selectedView=temp;
    }
    nextBottom=mReferenceView.getTop() - mVerticalSpacing;
    mFirstPosition=pos;
    pos-=mNumColumns;
  }
  if (mStackFromBottom) {
    mFirstPosition=Math.max(0,pos + 1);
  }
  return selectedView;
}

private List<ValidationError> validate(){
  List<ValidationError> errors=Lists.newArrayList();
  Module module=getModule();
  errors.addAll(BlazeAndroidRunConfigurationValidationUtil.validateModule(module));
  AndroidFacet facet=null;
  if (module != null) {
    facet=AndroidFacet.getInstance(module);
    errors.addAll(BlazeAndroidRunConfigurationValidationUtil.validateFacet(facet,module));
  }
  errors.addAll(configState.validate(facet));
  errors.addAll(BlazeAndroidRunConfigurationValidationUtil.validateLabel(getLabel(),configuration.getProject(),Kind.ANDROID_BINARY));
  return errors;
}

public void removeChildJob(Job childJob){
  if (!childJobs.contains(childJob)) {
    throw new RuntimeException("Tried to remove job " + childJob + " when it wasn't a child");
  }
  boolean removed=childJobs.remove(childJob);
  if (!removed) {
    throw new RuntimeException("Shouldn't happen!");
  }
}

private PointF isFlingingToDelete(DragSource source){
  if (mFlingToDeleteDropTarget == null)   return null;
  if (!source.supportsFlingToDelete())   return null;
  ViewConfiguration config=ViewConfiguration.get(mLauncher);
  mVelocityTracker.computeCurrentVelocity(1000,config.getScaledMaximumFlingVelocity());
  if (mVelocityTracker.getYVelocity() < mFlingToDeleteThresholdVelocity) {
    PointF vel=new PointF(mVelocityTracker.getXVelocity(),mVelocityTracker.getYVelocity());
    PointF upVec=new PointF(0f,-1f);
    float theta=(float)Math.acos(((vel.x * upVec.x) + (vel.y * upVec.y)) / (vel.length() * upVec.length()));
    if (theta <= Math.toRadians(MAX_FLING_DEGREES)) {
      return vel;
    }
  }
  return null;
}

private int clampMag(int value,int absMin,int absMax){
  final int absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  doc=(Document)load("hc_staff",true);
  elementList=doc.getElementsByTagName("acronym");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
{
    boolean success=false;
    try {
      child.deleteData(40,3);
    }
 catch (    DOMException ex) {
      success=(ex.code == DOMException.INDEX_SIZE_ERR);
    }
    assertTrue("throw_INDEX_SIZE_ERR",success);
  }
}

public static void runScript(final File file,final List<Pair<String,Object>> bindings) throws ScriptException, IOException {
  final ScriptEngine engine=manager.getEngineByExtension(FileUtils.getFileExtension(file));
  Preconditions.checkNotNull(engine,"Error: Script %s has an unknown extension.",file.getAbsolutePath());
  final String script=FileUtils.readTextfile(file);
  runScript(engine,script,bindings);
}

public void addUGraphic(UGraphic ug){
  graphics.addElement(ug);
}

public void apply() throws IllegalStateException {
  try {
    System.setSecurityManager(this);
  }
 catch (  SecurityException e) {
    logger.error("Cannot instantiate mock security manager",e);
    throw new IllegalStateException(e);
  }
}

public static Rule createAGetPostRule(String ruleName,String ruleUrl) throws PolicyException {
  Map<String,Set<String>> actionValues=new HashMap<String,Set<String>>();
  Set<String> set=new HashSet<String>();
  set.add(ALLOW_DECISION);
  actionValues.put(GET_ACTION,set);
  set=new HashSet<String>();
  set.add(ALLOW_DECISION);
  actionValues.put(POST_ACTION,set);
  return new Rule(ruleName,IPLANETAMWEBAGENTSERVICE,ruleUrl,actionValues);
}

public FastArrayList(Collection<? extends E> c){
  elementData=c.toArray();
  size=elementData.length;
  if (elementData.getClass() != Object[].class)   elementData=Arrays.copyOf(elementData,size,Object[].class);
}

void createSceneVao(){
  int vao=glGenVertexArrays();
  int vbo=glGenBuffers();
  glBindVertexArray(vao);
  glBindBuffer(GL_ARRAY_BUFFER,vbo);
  long bufferSize=4 * (3 + 3) * mesh.numVertices;
  long normalsOffset=4L * 3 * mesh.numVertices;
  glBufferData(GL_ARRAY_BUFFER,bufferSize,GL_STATIC_DRAW);
  glBufferSubData(GL_ARRAY_BUFFER,0L,mesh.positions);
  glBufferSubData(GL_ARRAY_BUFFER,normalsOffset,mesh.normals);
  glEnableVertexAttribArray(0);
  glVertexAttribPointer(0,3,GL_FLOAT,false,0,0L);
  glEnableVertexAttribArray(1);
  glVertexAttribPointer(1,3,GL_FLOAT,false,0,normalsOffset);
  glBindBuffer(GL_ARRAY_BUFFER,0);
  glBindVertexArray(0);
  this.vaoScene=vao;
}

public List<?> endBatch(){
  List<?> result=null;
  if (operationsBatch.size() > 0) {
    result=doFlush();
  }
  useBatch=false;
  operationsBatch=null;
  return result;
}

private int calculateLayoutWidth(int widthSize,int mode){
  initResourcesIfNecessary();
  itemsLayout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
  itemsLayout.measure(MeasureSpec.makeMeasureSpec(widthSize,MeasureSpec.UNSPECIFIED),MeasureSpec.makeMeasureSpec(0,MeasureSpec.UNSPECIFIED));
  int width=itemsLayout.getMeasuredWidth();
  if (mode == MeasureSpec.EXACTLY) {
    width=widthSize;
  }
 else {
    width+=2 * PADDING;
    width=Math.max(width,getSuggestedMinimumWidth());
    if (mode == MeasureSpec.AT_MOST && widthSize < width) {
      width=widthSize;
    }
  }
  itemsLayout.measure(MeasureSpec.makeMeasureSpec(width - 2 * PADDING,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(0,MeasureSpec.UNSPECIFIED));
  return width;
}

public static Collection removeInnerClassNames(Collection col){
  List list=new ArrayList();
  list.addAll(col);
  Iterator it=list.iterator();
  while (it.hasNext()) {
    String name=(String)it.next();
    if (name.indexOf("$") != -1)     it.remove();
  }
  return list;
}

public TrieNode find(String word){
  return (word.length() < 1 ? null : find(word,root,0));
}

private void testOrderedIndexes() throws SQLException {
  deleteDb("optimizations");
  Connection conn=getConnection("optimizations");
  Statement stat=conn.createStatement();
  stat.execute("CREATE TABLE my_table(K1 INT, K2 INT, " + "VAL VARCHAR, PRIMARY KEY(K1, K2))");
  stat.execute("CREATE INDEX my_index ON my_table(K1, VAL)");
  ResultSet rs=stat.executeQuery("EXPLAIN PLAN FOR SELECT * FROM my_table WHERE K1=7 " + "ORDER BY K1, VAL");
  rs.next();
  assertContains(rs.getString(1),"/* PUBLIC.MY_INDEX: K1 = 7 */");
  stat.execute("DROP TABLE my_table");
  stat.execute("CREATE TABLE my_table(K1 INT, K2 INT, VAL VARCHAR)");
  stat.execute("CREATE INDEX my_index1 ON my_table(K1, K2)");
  stat.execute("CREATE INDEX my_index2 ON my_table(K1, K2, VAL)");
  rs=stat.executeQuery("EXPLAIN PLAN FOR SELECT * FROM my_table WHERE K1=7 " + "ORDER BY K1, K2, VAL");
  rs.next();
  assertContains(rs.getString(1),"/* PUBLIC.MY_INDEX2: K1 = 7 */");
  conn.close();
}

public String encode(ByteBuffer aBuffer){
  byte[] buf=getBytes(aBuffer);
  return encode(buf);
}

public static int clearListInfo(Delegator delegator,String shoppingListId) throws GenericEntityException {
  delegator.removeByAnd("ShoppingListItemSurvey",UtilMisc.toMap("shoppingListId",shoppingListId));
  return delegator.removeByAnd("ShoppingListItem",UtilMisc.toMap("shoppingListId",shoppingListId));
}

private synchronized void handleWatchdog(){
  final int exitCode;
  if (watchdog == null)   return;
  if (watchdogTimeout == 0)   return;
  if (!isRunning()) {
    exitCode=OnCommandResultListener.SHELL_DIED;
    Debug.log(String.format("[%s%%] SHELL_DIED",shell.toUpperCase(Locale.ENGLISH)));
  }
 else   if (watchdogCount++ < watchdogTimeout) {
    return;
  }
 else {
    exitCode=OnCommandResultListener.WATCHDOG_EXIT;
    Debug.log(String.format("[%s%%] WATCHDOG_EXIT",shell.toUpperCase(Locale.ENGLISH)));
  }
  if (handler != null) {
    postCallback(command,exitCode,buffer);
  }
  command=null;
  buffer=null;
  idle=true;
  watchdog.shutdown();
  watchdog=null;
  kill();
}

public synchronized boolean hasService(Class serviceClass){
  if (serviceClass == null)   throw new NullPointerException("serviceClass");
synchronized (BeanContext.globalHierarchyLock) {
    if (services.containsKey(serviceClass))     return true;
    BeanContextServices bcs=null;
    try {
      bcs=(BeanContextServices)getBeanContext();
    }
 catch (    ClassCastException cce) {
      return false;
    }
    return bcs == null ? false : bcs.hasService(serviceClass);
  }
}

public boolean isPingDisabled(){
  return (null != healthcheck && !healthcheck.exists());
}

public static String format(Integer i){
  if (i == null)   return null;
  return i.toString();
}

public FilenameUtils(){
  super();
}

public void dumpNodes(Path webGraphDb,DumpType type,long topN,Path output,boolean asEff,NameType nameType,AggrType aggrType,boolean asSequenceFile) throws Exception {
  SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
  long start=System.currentTimeMillis();
  LOG.info("NodeDumper: starting at " + sdf.format(start));
  Path nodeDb=new Path(webGraphDb,WebGraph.NODE_DIR);
  Configuration conf=getConf();
  JobConf dumper=new NutchJob(conf);
  dumper.setJobName("NodeDumper: " + webGraphDb);
  FileInputFormat.addInputPath(dumper,nodeDb);
  dumper.setInputFormat(SequenceFileInputFormat.class);
  if (nameType == null) {
    dumper.setMapperClass(Sorter.class);
    dumper.setReducerClass(Sorter.class);
    dumper.setMapOutputKeyClass(FloatWritable.class);
    dumper.setMapOutputValueClass(Text.class);
  }
 else {
    dumper.setMapperClass(Dumper.class);
    dumper.setReducerClass(Dumper.class);
    dumper.setMapOutputKeyClass(Text.class);
    dumper.setMapOutputValueClass(FloatWritable.class);
  }
  dumper.setOutputKeyClass(Text.class);
  dumper.setOutputValueClass(FloatWritable.class);
  FileOutputFormat.setOutputPath(dumper,output);
  if (asSequenceFile) {
    dumper.setOutputFormat(SequenceFileOutputFormat.class);
  }
 else {
    dumper.setOutputFormat(TextOutputFormat.class);
  }
  dumper.setNumReduceTasks(1);
  dumper.setBoolean("inlinks",type == DumpType.INLINKS);
  dumper.setBoolean("outlinks",type == DumpType.OUTLINKS);
  dumper.setBoolean("scores",type == DumpType.SCORES);
  dumper.setBoolean("host",nameType == NameType.HOST);
  dumper.setBoolean("domain",nameType == NameType.DOMAIN);
  dumper.setBoolean("sum",aggrType == AggrType.SUM);
  dumper.setBoolean("max",aggrType == AggrType.MAX);
  dumper.setLong("topn",topN);
  if (asEff) {
    dumper.set("mapred.textoutputformat.separator","=");
  }
  try {
    LOG.info("NodeDumper: running");
    JobClient.runJob(dumper);
  }
 catch (  IOException e) {
    LOG.error(StringUtils.stringifyException(e));
    throw e;
  }
  long end=System.currentTimeMillis();
  LOG.info("NodeDumper: finished at " + sdf.format(end) + ", elapsed: "+ TimingUtil.elapsedTime(start,end));
}

public static String convertMethodSignature(String className,String methodName,String methodSig,String pkgName){
  StringBuilder args=new StringBuilder();
  SignatureConverter converter=new SignatureConverter(methodSig);
  converter.skip();
  args.append('(');
  while (converter.getFirst() != ')') {
    if (args.length() > 1) {
      args.append(", ");
    }
    args.append(shorten(pkgName,converter.parseNext()));
  }
  converter.skip();
  args.append(')');
  StringBuilder result=new StringBuilder();
  result.append(className);
  result.append('.');
  result.append(methodName);
  result.append(args.toString());
  return result.toString();
}

protected void Predicate() throws javax.xml.transform.TransformerException {
  if (tokenIs('[')) {
    nextToken();
    PredicateExpr();
    consumeExpected(']');
  }
}

private void newUnitReceived(GridUriDeploymentUnitDescriptor newDesc,Collection<Class<?>> clss){
  assert newDesc != null;
  assert newDesc.getType() == GridUriDeploymentUnitDescriptor.Type.FILE;
  if (clss != null && !clss.isEmpty()) {
    try {
      addResources(newDesc.getClassLoader(),newDesc,clss.toArray(new Class<?>[clss.size()]));
    }
 catch (    IgniteSpiException e) {
      U.warn(log,"Failed to register GAR class loader [newDesc=" + newDesc + ", msg="+ e.getMessage()+ ']');
    }
  }
  Collection<ClassLoader> rmvClsLdrs=new ArrayList<>();
synchronized (mux) {
    if (checkMd5 && unitDeployed(newDesc.getMd5())) {
      if (log.isInfoEnabled())       LT.info(log,"Skipping new deployment unit because of md5 match " + "[uri='" + U.hidePassword(newDesc.getUri()) + "', file="+ (newDesc.getFile() == null ? "N/A" : newDesc.getFile())+ ']');
      return;
    }
    boolean isAdded=false;
    boolean ignoreNewUnit=false;
    for (ListIterator<GridUriDeploymentUnitDescriptor> iter=unitLoaders.listIterator(); iter.hasNext(); ) {
      GridUriDeploymentUnitDescriptor desc=iter.next();
      assert !newDesc.getClassLoader().equals(desc.getClassLoader()) : "URI scanners always create new class loader for every GAR file: " + newDesc;
      if (desc.getType() == GridUriDeploymentUnitDescriptor.Type.FILE && newDesc.getUri().equals(desc.getUri()) && !newDesc.getFile().equals(desc.getFile())) {
        iter.remove();
        rmvClsLdrs.add(desc.getClassLoader());
        if (!iter.hasNext())         break;
        continue;
      }
      if (!isAdded) {
        if (unitComp.compare(newDesc,desc) <= 0) {
          if (checkUnitCollision(desc,newDesc)) {
            iter.remove();
            iter.add(newDesc);
            rmvClsLdrs.add(desc.getClassLoader());
          }
 else {
            iter.set(newDesc);
            iter.add(desc);
          }
          isAdded=true;
        }
 else         if (checkUnitCollision(newDesc,desc)) {
          ignoreNewUnit=true;
          break;
        }
      }
 else       if (checkUnitCollision(newDesc,desc)) {
        iter.remove();
        rmvClsLdrs.add(desc.getClassLoader());
      }
    }
    if (!ignoreNewUnit) {
      if (!isAdded)       unitLoaders.add(newDesc);
      if (log.isDebugEnabled())       LT.info(log,"Class loader (re)registered [clsLdr=" + newDesc.getClassLoader() + ", tstamp="+ newDesc.getTimestamp()+ ", uri='"+ U.hidePassword(newDesc.getUri())+ "', file="+ (newDesc.getFile() == null ? "N/A" : newDesc.getFile())+ ']');
    }
  }
  for (  ClassLoader cldLdr : rmvClsLdrs)   onUnitReleased(cldLdr);
}

public static String canonicalID(String id){
  if (id == null)   return "";
  int st=0;
  int len=id.length();
  boolean substr=false;
  int c;
  while (st < len && ((c=id.charAt(st)) == '<' || c <= ' ')) {
    st++;
    substr=true;
  }
  while (st < len && ((c=id.charAt(len - 1)) == '>' || c <= ' ')) {
    len--;
    substr=true;
  }
  return substr ? id.substring(st,len) : id;
}

private static void encodeBinary(byte[] bytes,int startpos,int count,int startmode,StringBuilder sb){
  if (count == 1 && startmode == TEXT_COMPACTION) {
    sb.append((char)SHIFT_TO_BYTE);
  }
 else {
    boolean sixpack=((count % 6) == 0);
    if (sixpack) {
      sb.append((char)LATCH_TO_BYTE);
    }
 else {
      sb.append((char)LATCH_TO_BYTE_PADDED);
    }
  }
  int idx=startpos;
  if (count >= 6) {
    char[] chars=new char[5];
    while ((startpos + count - idx) >= 6) {
      long t=0;
      for (int i=0; i < 6; i++) {
        t<<=8;
        t+=bytes[idx + i] & 0xff;
      }
      for (int i=0; i < 5; i++) {
        chars[i]=(char)(t % 900);
        t/=900;
      }
      for (int i=chars.length - 1; i >= 0; i--) {
        sb.append(chars[i]);
      }
      idx+=6;
    }
  }
  for (int i=idx; i < startpos + count; i++) {
    int ch=bytes[i] & 0xff;
    sb.append((char)ch);
  }
}

@Override public void step(MessageLogger logger){
  try {
    addAgent();
    env.step();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}

private static boolean isNonLeft(int i0,int i1,int i2,int i3,double[] pts){
  double l1, l2, l4, l5, l6, angle1, angle2, angle;
  l1=Math.sqrt(Math.pow(pts[i2 + 1] - pts[i1 + 1],2) + Math.pow(pts[i2] - pts[i1],2));
  l2=Math.sqrt(Math.pow(pts[i3 + 1] - pts[i2 + 1],2) + Math.pow(pts[i3] - pts[i2],2));
  l4=Math.sqrt(Math.pow(pts[i3 + 1] - pts[i0 + 1],2) + Math.pow(pts[i3] - pts[i0],2));
  l5=Math.sqrt(Math.pow(pts[i1 + 1] - pts[i0 + 1],2) + Math.pow(pts[i1] - pts[i0],2));
  l6=Math.sqrt(Math.pow(pts[i2 + 1] - pts[i0 + 1],2) + Math.pow(pts[i2] - pts[i0],2));
  angle1=Math.acos(((l2 * l2) + (l6 * l6) - (l4 * l4)) / (2 * l2 * l6));
  angle2=Math.acos(((l6 * l6) + (l1 * l1) - (l5 * l5)) / (2 * l6 * l1));
  angle=(Math.PI - angle1) - angle2;
  if (angle <= 0.0) {
    return (true);
  }
 else {
    return (false);
  }
}

protected void copy2DArray(int from[][],int to[][]){
  for (int i=0; i < from.length; i++) {
    to[i]=new int[from[i].length];
    System.arraycopy(from[i],0,to[i],0,from[i].length);
  }
}

public static <K,V>Map<K,V> of(K k1,V v1,K k2,V v2,K k3,V v3){
  Map map=of();
  map.put(k1,v1);
  map.put(k2,v2);
  map.put(k3,v3);
  return map;
}

public boolean fill(Reader reader,int pos) throws IOException {
  int res=reader.read(fBuf);
  if (res == -1) {
    fOffset=pos;
    fLength=0;
    return true;
  }
  int charsRead=res;
  while (charsRead < BUFFER_SIZE) {
    res=reader.read(fBuf,charsRead,BUFFER_SIZE - charsRead);
    if (res == -1) {
      fOffset=pos;
      fLength=charsRead;
      return true;
    }
    charsRead+=res;
  }
  fOffset=pos;
  fLength=BUFFER_SIZE;
  return false;
}

public void drawInRect(GL10 gl,CGRect rect){
  gl.glEnable(GL_TEXTURE_2D);
  loadTexture(gl);
  float vertices[]={rect.origin.x,rect.origin.y,rect.origin.x + rect.size.width,rect.origin.y,rect.origin.x,rect.origin.y + rect.size.height,rect.origin.x + rect.size.width,rect.origin.y + rect.size.height};
  mVertices.put(vertices);
  mVertices.position(0);
  float coordinates[]={0.0f,_maxT,_maxS,_maxT,0.0f,0.0f,_maxS,0.0f};
  mCoordinates.put(coordinates);
  mCoordinates.position(0);
  gl.glEnableClientState(GL_VERTEX_ARRAY);
  gl.glEnableClientState(GL_TEXTURE_COORD_ARRAY);
  gl.glBindTexture(GL_TEXTURE_2D,_name);
  gl.glTexParameterx(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_REPEAT);
  gl.glTexParameterx(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_REPEAT);
  gl.glVertexPointer(2,GL_FLOAT,0,mVertices);
  gl.glTexCoordPointer(2,GL_FLOAT,0,mCoordinates);
  gl.glDrawArrays(GL_TRIANGLE_STRIP,0,4);
  gl.glDisableClientState(GL_VERTEX_ARRAY);
  gl.glDisableClientState(GL_TEXTURE_COORD_ARRAY);
  gl.glDisable(GL_TEXTURE_2D);
}

synchronized void executed(RTEditText editor,Operation op){
  Stack<Operation> undoStack=getUndoStack(editor);
  Stack<Operation> redoStack=getRedoStack(editor);
  while (!undoStack.empty() && op.canMerge(undoStack.peek())) {
    Operation previousOp=undoStack.pop();
    op.merge(previousOp);
  }
  push(op,undoStack);
  redoStack.clear();
}

public void removeSwipeListener(SwipeListener listener){
  if (mListeners == null) {
    return;
  }
  mListeners.remove(listener);
}

public static boolean isOssBuild(){
  boolean isOssBuild=false;
  String buildType=System.getProperty("buildType");
  if (StringUtils.isNotBlank(buildType) && buildType.equalsIgnoreCase("oss")) {
    isOssBuild=true;
  }
  return isOssBuild;
}

public void invokeHookBoltExecute(Tuple tuple,long executeLatencyNs){
  if (taskHooks.size() != 0) {
    BoltExecuteInfo executeInfo=new BoltExecuteInfo(tuple,getThisTaskId(),executeLatencyNs / Constants.MILLISECONDS_TO_NANOSECONDS);
    for (    ITaskHook taskHook : taskHooks) {
      taskHook.boltExecute(executeInfo);
    }
  }
}

private void validateIamRoles(List<IamRole> iamRoles){
  Assert.notNull(iamRoles,"At least 1 IAM roles must be specified");
  Assert.isTrue(iamRoles.size() > 0,"At least 1 IAM roles must be specified");
  for (  IamRole iamRole : iamRoles) {
    Assert.notNull(iamRole,"IAM role must be specified");
    Assert.hasText(iamRole.getIamRoleName(),"IAM role name must be specified");
  }
}

public static Intent buildStartInBackgroundIntent(File script){
  final ComponentName componentName=Constants.SL4A_SERVICE_LAUNCHER_COMPONENT_NAME;
  Intent intent=new Intent();
  intent.setComponent(componentName);
  intent.setAction(Constants.ACTION_LAUNCH_BACKGROUND_SCRIPT);
  intent.putExtra(Constants.EXTRA_SCRIPT_PATH,script.getAbsolutePath());
  return intent;
}

public static java.lang.String valueOf(java.lang.Object obj){
  return obj == null ? "null" : obj.toString();
}

@SuppressWarnings({"rawtypes","unchecked"}) public SpanMultiTermQueryWrapper(Q query){
  this.query=Objects.requireNonNull(query);
  this.rewriteMethod=selectRewriteMethod(query);
}

public void writeMapEnd() throws IOException {
  os.write('z');
}

public Shape createArrowUp(final double x,final double y,final double w,final double h){
  path.reset();
  path.moveTo(x,y + h);
  path.lineTo(x + w / 2,y);
  path.lineTo(x + w,y + h);
  path.closePath();
  return path;
}

protected void fireValueChanged(){
  ChangeEvent evt=new ChangeEvent(this);
  for (  ChangeListener listener : listenerList.getListeners(ChangeListener.class)) {
    listener.stateChanged(evt);
  }
}

public static void streamContentToBrowser(HttpServletResponse response,InputStream in,int length,String contentType,String fileName) throws IOException {
  setResponseBrowserProxyNoCache(response);
  response.setContentLength(length);
  if (contentType != null) {
    response.setContentType(contentType);
  }
  if (fileName != null) {
    response.setHeader("Content-Disposition","attachment;filename=" + fileName);
  }
  OutputStream out=response.getOutputStream();
  try {
    streamContent(out,in,length);
  }
 catch (  IOException e) {
    out.close();
    throw e;
  }
  out.flush();
  out.close();
}

public static ByteBuffer encode(String string) throws CharacterCodingException {
  return encode(string,true);
}

public void disableRealtimeStepsNotify(){
  checkConnection();
  final List<BLEAction> list=new ArrayList<>();
  list.add(new WriteAction(Profile.UUID_CHAR_CONTROL_POINT,Protocol.DISABLE_REALTIME_STEPS_NOTIFY));
  queue(list);
}

private static void stableStringSort(String[] arr,String[] src,String[] dst,int start,int end,int chId){
  int length=end - start;
  if (length < SIMPLE_LENGTH) {
    if (src == arr) {
      for (int i=start + 1; i < end; i++) {
        String current=arr[i];
        String prev=arr[i - 1];
        if (current.compareTo(prev) < 0) {
          int j=i;
          do {
            arr[j--]=prev;
          }
 while (j > start && current.compareTo(prev=arr[j - 1]) < 0);
          arr[j]=current;
        }
      }
    }
 else {
      int actualEnd=end - 1;
      dst[start]=src[actualEnd--];
      for (int i=start + 1; i < end; i++, actualEnd--) {
        String current=src[actualEnd];
        String prev;
        int j=i;
        while (j > start && current.compareTo(prev=dst[j - 1]) < 0) {
          dst[j--]=prev;
        }
        dst[j]=current;
      }
    }
    return;
  }
  int s;
  int mid=start + length / 2;
  int lo=start;
  int hi=end - 1;
  if (length > 40) {
    s=length / 8;
    lo=medChar(lo,lo + s,lo + s * 2,src,chId);
    mid=medChar(mid - s,mid,mid + s,src,chId);
    hi=medChar(hi,hi - s,hi - s * 2,src,chId);
  }
  mid=medChar(lo,mid,hi,src,chId);
  int midVal=charAt(src[mid],chId);
  int a, b, c;
  a=b=start;
  c=end - 1;
  int cmp;
  for (int i=start; i < end; i++) {
    String el=src[i];
    cmp=charAt(el,chId) - midVal;
    if (cmp < 0) {
      src[a]=el;
      a++;
    }
 else     if (cmp > 0) {
      dst[c]=el;
      c--;
    }
 else {
      dst[b]=el;
      b++;
    }
  }
  s=b - start;
  if (s > 0) {
    if (arr == src) {
      System.arraycopy(dst,start,arr,a,s);
    }
 else {
      copySwap(dst,start,arr,a,s);
    }
    if (b >= end && midVal == -1) {
      return;
    }
    stableStringSort(arr,arr,arr == dst ? src : dst,a,a + s,chId + 1);
  }
  s=a - start;
  if (s > 0) {
    stableStringSort(arr,src,dst,start,a,chId);
  }
  c++;
  s=end - c;
  if (s > 0) {
    stableStringSort(arr,dst,src,c,end,chId);
  }
}

private static Class<?>[] types(Object... values){
  if (values == null) {
    return new Class[0];
  }
  Class<?>[] result=new Class[values.length];
  for (int i=0; i < values.length; i++) {
    Object value=values[i];
    result[i]=value == null ? NULL.class : value.getClass();
  }
  return result;
}

public static void unRegisterTileCodec(int comp){
  XTIFFTileCodec cod=getTileCodec(comp);
  tileCodecs.remove(cod);
}

public static void escape(StrBuilder toAppend,String text,boolean escapeQuote,boolean escapeApos){
  if (text == null) {
    return;
  }
  for (int i=0; i < text.length(); i++) {
    char ch=text.charAt(i);
switch (ch) {
case '<':
      toAppend.append("&lt;");
    break;
case '>':
  toAppend.append("&gt;");
break;
case '&':
toAppend.append("&amp;");
break;
case '"':
toAppend.append(escapeQuote ? "&quot;" : ch);
break;
case '\'':
toAppend.append(escapeApos ? "&apos;" : ch);
break;
default :
toAppend.append(ch);
break;
}
}
}

public void destroy(){
  mListeners.clear();
  mSpringSystem.deregisterSpring(this);
}

@Override public synchronized void removeInstanceListener(InstanceListener tsl){
  m_instanceListeners.removeElement(tsl);
}

private String readUntil(char[] delimiter,boolean returnText) throws IOException, XmlPullParserException {
  int start=position;
  StringBuilder result=null;
  if (returnText && text != null) {
    result=new StringBuilder();
    result.append(text);
  }
  search:   while (true) {
    if (position + delimiter.length > limit) {
      if (start < position && returnText) {
        if (result == null) {
          result=new StringBuilder();
        }
        result.append(buffer,start,position - start);
      }
      if (!fillBuffer(delimiter.length)) {
        checkRelaxed(UNEXPECTED_EOF);
        type=COMMENT;
        return null;
      }
      start=position;
    }
    for (int i=0; i < delimiter.length; i++) {
      if (buffer[position + i] != delimiter[i]) {
        position++;
        continue search;
      }
    }
    break;
  }
  int end=position;
  position+=delimiter.length;
  if (!returnText) {
    return null;
  }
 else   if (result == null) {
    return stringPool.get(buffer,start,end - start);
  }
 else {
    result.append(buffer,start,end - start);
    return result.toString();
  }
}

private void toggleFavorite(){
  for (  String game : list.getSelectedValuesList()) {
    if (favorites.contains(game)) {
      favorites.remove(game);
    }
 else {
      favorites.add(game);
    }
  }
  saveFavorites();
  update();
}

private void createPartitionRegion(List vmList,int startIndexForRegion,int endIndexForRegion,int localMaxMemory,int redundancy,boolean firstCreationFlag,boolean multipleVMFlag){
  Iterator nodeIterator=vmList.iterator();
  while (nodeIterator.hasNext()) {
    VM vm=(VM)nodeIterator.next();
    vm.invoke(createMultiplePartitionRegion(prPrefix,startIndexForRegion,endIndexForRegion,redundancy,localMaxMemory,firstCreationFlag,multipleVMFlag));
  }
}

public int write(byte[] destMac,byte[] packet,int offset,int byteCount){
  if (destMac == null) {
    throw new NullPointerException("destMac == null");
  }
  if (packet == null) {
    throw new NullPointerException("packet == null");
  }
  Arrays.checkOffsetAndCount(packet.length,offset,byteCount);
  if (destMac.length != 6) {
    throw new IllegalArgumentException("MAC length must be 6: " + destMac.length);
  }
  return sendPacket(fd,mInterfaceName,mProtocolType,destMac,packet,offset,byteCount);
}

public boolean hasExtensionsWithDeps(){
  return !extensionsWithDeps.isEmpty();
}

public synchronized void addSeries(XYSeries series){
  mSeries.add(series);
}

private int[] calculateTaskCountPerContainer(int taskCount,int prevContainerCount,int currentContainerCount){
  int[] newTaskCountPerContainer=new int[Math.max(currentContainerCount,prevContainerCount)];
  Arrays.fill(newTaskCountPerContainer,0);
  for (int i=0; i < currentContainerCount; i++) {
    newTaskCountPerContainer[i]=taskCount / currentContainerCount;
    if (taskCount % currentContainerCount > i) {
      newTaskCountPerContainer[i]++;
    }
  }
  return newTaskCountPerContainer;
}

@Override public void actionPerform(Component component){
  if (!isEnabled()) {
    return;
  }
  if (beforeActionPerformedHandler != null) {
    if (!beforeActionPerformedHandler.beforeActionPerformed())     return;
  }
  Set selected=target.getSelected();
  if (!selected.isEmpty()) {
    if (confirm) {
      confirmAndRemove(selected);
    }
 else {
      remove(selected);
    }
  }
}

public void testCompareToPosPos2(){
  byte aBytes[]={10,20,30,40,50,60,70,10,20,30};
  byte bBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  int aSign=1;
  int bSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  assertEquals(-1,aNumber.compareTo(bNumber));
}

static public void generateSeed(byte[] result){
  instance.getSeedBytes(result);
}

private double hammingDistanceNumberVector(NumberVector o1,NumberVector o2){
  final int d1=o1.getDimensionality(), d2=o2.getDimensionality();
  int differences=0;
  int d=0;
  for (; d < d1 && d < d2; d++) {
    double v1=o1.doubleValue(d), v2=o2.doubleValue(d);
    if (v1 != v1 || v2 != v2) {
      continue;
    }
    if (v1 != v2) {
      ++differences;
    }
  }
  for (; d < d1; d++) {
    double v1=o1.doubleValue(d);
    if (v1 != 0. && v1 == v1) {
      ++differences;
    }
  }
  for (; d < d2; d++) {
    double v2=o2.doubleValue(d);
    if (v2 != 0. && v2 == v2) {
      ++differences;
    }
  }
  return differences;
}

public static Kernel createKernel(int kernelType){
switch (kernelType) {
case KERNEL_RADIAL:
    return new KernelRadial();
case KERNEL_POLYNOMIAL:
  return new KernelPolynomial();
case KERNEL_NEURAL:
return new KernelNeural();
default :
return new KernelDot();
}
}

protected void checkForPendingTasks(Collection<URI> tenants,Collection<? extends DataObject> dataObjects){
  for (  URI tenant : tenants) {
    checkForPendingTasks(tenant,dataObjects);
  }
}

@org.junit.Test public void verifyGetFloatResponse() throws Exception {
  Map<String,String> queryParams=new HashMap<String,String>();
  String str=client.invokeAPI("/mockResponses/primitiveFloatResponse","GET",queryParams,null,new HashMap<String,String>(),null,"application/json",null,new String[0]);
  assertEquals(str,String.valueOf(ExampleBuilder.SAMPLE_FLOAT_PROPERTY_VALUE));
}

public void writeOperationsCarFile(){
  makeBackupFile(defaultOperationsFilename());
  try {
    if (!checkFile(defaultOperationsFilename())) {
      java.io.File file=new java.io.File(defaultOperationsFilename());
      java.io.File parentDir=file.getParentFile();
      if (!parentDir.exists()) {
        if (!parentDir.mkdir()) {
          log.error("Directory wasn't created");
        }
      }
      if (file.createNewFile()) {
        log.debug("File created");
      }
    }
    writeFile(defaultOperationsFilename());
  }
 catch (  Exception e) {
    log.error("Exception while writing the new CSV operations file, may not be complete: " + e);
  }
}

private synchronized void rebuildJournal() throws IOException {
  if (journalWriter != null) {
    journalWriter.close();
  }
  Writer writer=new BufferedWriter(new FileWriter(journalFileTmp),IO_BUFFER_SIZE);
  writer.write(MAGIC);
  writer.write("\n");
  writer.write(VERSION_1);
  writer.write("\n");
  writer.write(Integer.toString(appVersion));
  writer.write("\n");
  writer.write(Integer.toString(valueCount));
  writer.write("\n");
  writer.write("\n");
  for (  Entry entry : lruEntries.values()) {
    if (entry.currentEditor != null) {
      writer.write(DIRTY + ' ' + entry.key+ '\n');
    }
 else {
      writer.write(CLEAN + ' ' + entry.key+ entry.getLengths()+ '\n');
    }
  }
  writer.close();
  journalFileTmp.renameTo(journalFile);
  journalWriter=new BufferedWriter(new FileWriter(journalFile,true),IO_BUFFER_SIZE);
}

public static double median(final double[] values){
  final int len=values.length;
  final double[] sortedValues=Arrays.copyOf(values,len);
  Arrays.sort(sortedValues);
  if (len % 2 == 0) {
    return ((double)sortedValues[len / 2] + (double)sortedValues[len / 2 - 1]) / 2;
  }
 else {
    return (double)sortedValues[len / 2];
  }
}

private List<BlockInfo> fillSegmentIdToTableInfoMap(List<TableBlockInfo> tableBlockInfos,AbsoluteTableIdentifier absoluteTableIdentifier){
  Map<String,List<BlockInfo>> map=segmentIdToBlockListMap.get(absoluteTableIdentifier);
  if (null == map) {
    map=new ConcurrentHashMap<String,List<BlockInfo>>();
    segmentIdToBlockListMap.put(absoluteTableIdentifier,map);
  }
  BlockInfo temp=null;
  List<BlockInfo> blockInfosNeedToLoad=new ArrayList<>();
  for (  TableBlockInfo info : tableBlockInfos) {
    List<BlockInfo> tempTableBlockInfos=map.get(info.getSegmentId());
    if (null == tempTableBlockInfos) {
      tempTableBlockInfos=new ArrayList<>();
      map.put(info.getSegmentId(),tempTableBlockInfos);
    }
    temp=new BlockInfo(info);
    if (!tempTableBlockInfos.contains(temp)) {
      tempTableBlockInfos.add(temp);
    }
    blockInfosNeedToLoad.add(temp);
  }
  return blockInfosNeedToLoad;
}

public CharBuffer put(String str,int start,int end){
  if (isReadOnly()) {
    throw new ReadOnlyBufferException();
  }
  if (start < 0 || end < start || end > str.length()) {
    throw new IndexOutOfBoundsException("str.length()=" + str.length() + ", start="+ start+ ", end="+ end);
  }
  if (end - start > remaining()) {
    throw new BufferOverflowException();
  }
  for (int i=start; i < end; i++) {
    put(str.charAt(i));
  }
  return this;
}

public List<OfferRecommendation> evaluate(List<Offer> offers){
  List<OfferRecommendation> recommendations=new ArrayList<OfferRecommendation>();
  int offerResourceCount=0;
  for (  Offer offer : offers) {
    offerResourceCount+=offer.getResourcesCount();
    for (    Resource toDestroy : selectUnexpectedResources(expectedPersistentVolumeIds,getPersistentVolumesById(offer))) {
      recommendations.add(new DestroyOfferRecommendation(offer,toDestroy));
    }
  }
  int destroyRecommendationCount=recommendations.size();
  for (  Offer offer : offers) {
    for (    Resource toUnreserve : selectUnexpectedResources(expectedReservedResourceIds,getReservedResourcesById(offer))) {
      recommendations.add(new UnreserveOfferRecommendation(offer,toUnreserve));
    }
  }
  logger.info("{} offers with {} resources => {} destroy and {} unreserve operations",offers.size(),offerResourceCount,destroyRecommendationCount,recommendations.size() - destroyRecommendationCount);
  return recommendations;
}

@Override public int update(ByteBuffer inBuffer,ByteBuffer outBuffer) throws ShortBufferException {
  return cipher.update(inBuffer,outBuffer);
}

boolean displayContextAssump(NodeRepresentation rep,int i){
  return rep.isCreated || ((!state.splitChosen()) && showContextValue);
}

private void unregisterMBeans(){
  List<ObjectName> unregistered=new ArrayList<ObjectName>();
  for (  ObjectName name : mbeans) {
    try {
      mbeanserver.unregisterMBean(name);
      unregistered.add(name);
    }
 catch (    JMException e) {
    }
  }
  mbeans.removeAll(unregistered);
}

public static void main(String[] argv) throws IOException, SAXException {
  Scanner s=new HTMLScanner();
  Reader r=new InputStreamReader(System.in,"UTF-8");
  Writer w=new OutputStreamWriter(System.out,"UTF-8");
  PYXWriter pw=new PYXWriter(w);
  s.scan(r,pw);
  w.close();
}

private void createAmpResultStreamMethod(JavaClass jClass,Method method,int resultOffset){
  String methodName=method.getName();
  Class<?>[] parameterTypes=method.getParameterTypes();
  Annotation[][] parameterAnns=method.getParameterAnnotations();
  addMethod(method);
  CodeWriterAttribute code=createMethodHeader(jClass,method);
  code.setMaxLocals(1 + 2 * parameterTypes.length);
  code.setMaxStack(10 + 2 * parameterTypes.length);
  code.pushObjectVar(0);
  code.getField(jClass.getThisClass(),"_messageFactory",MessageFactoryAmp.class);
  int argLen=parameterTypes.length - 1;
  code.pushObjectVar(getLength(parameterTypes,resultOffset) + 1);
  long timeout=_defaultTimeout;
  code.pushConstant(timeout);
  code.pushObjectVar(0);
  code.getField(jClass.getThisClass(),"_serviceRef",ServiceRefAmp.class);
  code.pushObjectVar(0);
  code.getField(jClass.getThisClass(),fieldName(method),MethodAmp.class);
  partitionMethod(code,parameterTypes,parameterAnns);
  pushParameters(code,parameterTypes,parameterAnns,1,0,argLen + 1,resultOffset);
  code.invokeInterface(MessageFactoryAmp.class,"streamResult",void.class,ResultStream.class,long.class,ServiceRefAmp.class,MethodAmp.class,Object[].class);
  code.addReturn();
  code.close();
}

private static synchronized void endTransaction(Connection C,boolean successful) throws AdeException {
  logger.trace("endTransaction() -->entry");
  try {
    if (successful) {
      C.commit();
    }
 else {
      C.rollback();
    }
    C.setAutoCommit(true);
  }
 catch (  Throwable t) {
    surfaceThrowable("endTransaction() invoked Connection method",t);
    throw adeExceptionOf(t);
  }
  logger.trace("endTransaction() <-- exit");
}

public double[] estimateL2DistanceSquared(Datum queryDatum){
  RealVector vector=queryDatum.metrics();
  double[] estimates=new double[2];
  for (int i=0; i < k; i++) {
    double deltaLo=vector.getEntry(i) - this.boundaries[i][0];
    double deltaHi=this.boundaries[i][1] - vector.getEntry(i);
    double sqDeltaLo=deltaLo * deltaLo;
    double sqDeltaHi=deltaHi * deltaHi;
    if (deltaLo < 0 || deltaHi < 0) {
      if (sqDeltaHi < sqDeltaLo) {
        estimates[0]+=sqDeltaHi;
        estimates[1]+=sqDeltaLo;
      }
 else {
        estimates[0]+=sqDeltaLo;
        estimates[1]+=sqDeltaHi;
      }
    }
 else {
      estimates[1]+=Math.max(sqDeltaHi,sqDeltaLo);
    }
  }
  return estimates;
}

private void deserializeClass(File file) throws RuntimeException {
  try {
    FileInputStream in=new FileInputStream(file);
    ObjectInputStream objIn=new ObjectInputStream(in);
    Object o=objIn.readObject();
    in.close();
  }
 catch (  ClassNotFoundException e) {
    throw new RuntimeException("There is no class in the model API " + "to deserialize the object in " + file + ". Perhaps the "+ "class was renamed, moved to another package, or removed. "+ "In any case, please put it back where it was.",e);
  }
catch (  IOException e) {
    throw new RuntimeException("There was an I/O error associated with " + "the process of deserializing the file " + file + ".",e);
  }
}

public boolean calculateTaxTotal(){
  log.fine("");
  DB.executeUpdateEx("DELETE C_InvoiceTax WHERE C_Invoice_ID=" + getC_Invoice_ID(),get_TrxName());
  m_taxes=null;
  BigDecimal totalLines=Env.ZERO;
  ArrayList<Integer> taxList=new ArrayList<Integer>();
  MInvoiceLine[] lines=getLines(false);
  for (int i=0; i < lines.length; i++) {
    MInvoiceLine line=lines[i];
    if (!taxList.contains(line.getC_Tax_ID())) {
      MInvoiceTax iTax=MInvoiceTax.get(line,getPrecision(),false,get_TrxName());
      if (iTax != null) {
        iTax.setIsTaxIncluded(isTaxIncluded());
        if (!iTax.calculateTaxFromLines())         return false;
        iTax.saveEx();
        taxList.add(line.getC_Tax_ID());
      }
    }
    totalLines=totalLines.add(line.getLineNetAmt());
  }
  BigDecimal grandTotal=totalLines;
  MInvoiceTax[] taxes=getTaxes(true);
  for (int i=0; i < taxes.length; i++) {
    MInvoiceTax iTax=taxes[i];
    MTax tax=iTax.getTax();
    if (tax.isSummary()) {
      MTax[] cTaxes=tax.getChildTaxes(false);
      for (int j=0; j < cTaxes.length; j++) {
        MTax cTax=cTaxes[j];
        BigDecimal taxAmt=cTax.calculateTax(iTax.getTaxBaseAmt(),isTaxIncluded(),getPrecision());
        MInvoiceTax newITax=new MInvoiceTax(getCtx(),0,get_TrxName());
        newITax.setClientOrg(this);
        newITax.setC_Invoice_ID(getC_Invoice_ID());
        newITax.setC_Tax_ID(cTax.getC_Tax_ID());
        newITax.setPrecision(getPrecision());
        newITax.setIsTaxIncluded(isTaxIncluded());
        newITax.setTaxBaseAmt(iTax.getTaxBaseAmt());
        newITax.setTaxAmt(taxAmt);
        newITax.saveEx(get_TrxName());
        if (!isTaxIncluded())         grandTotal=grandTotal.add(taxAmt);
      }
      iTax.deleteEx(true,get_TrxName());
    }
 else {
      if (!isTaxIncluded())       grandTotal=grandTotal.add(iTax.getTaxAmt());
    }
  }
  setTotalLines(totalLines);
  setGrandTotal(grandTotal);
  return true;
}

private boolean canOpen(){
  for (  final INaviProject project : m_projects) {
    if (project.isLoaded()) {
      return false;
    }
  }
  return true;
}

public static Array listWithQuotesToArray(String list,String delimiter,String quotes){
  if (list.length() == 0)   return new ArrayImpl();
  int len=list.length();
  int last=0;
  char[] del=delimiter.toCharArray();
  char[] quo=quotes.toCharArray();
  char c;
  char inside=0;
  ArrayImpl array=new ArrayImpl();
  try {
    for (int i=0; i < len; i++) {
      c=list.charAt(i);
      for (int y=0; y < quo.length; y++) {
        if (c == quo[y]) {
          if (c == inside)           inside=0;
 else           if (inside == 0)           inside=c;
          continue;
        }
      }
      for (int y=0; y < del.length; y++) {
        if (inside == 0 && c == del[y]) {
          array._append(list.substring(last,i));
          last=i + 1;
          break;
        }
      }
    }
    if (last <= len)     array.append(list.substring(last));
  }
 catch (  ExpressionException e) {
  }
  return array;
}

public MLOutput execute(String dmlScriptFilePath,ArrayList<String> argsName,ArrayList<String> argsValues,String configFilePath) throws IOException, DMLException, ParseException {
  HashMap<String,String> newNamedArgs=new HashMap<String,String>();
  if (argsName.size() != argsValues.size()) {
    throw new DMLException("size of argsName " + argsName.size() + " is diff than "+ " size of argsValues");
  }
  for (int i=0; i < argsName.size(); i++) {
    String k=argsName.get(i);
    String v=argsValues.get(i);
    newNamedArgs.put(k,v);
  }
  return execute(dmlScriptFilePath,newNamedArgs,configFilePath);
}

public boolean isInMemoryDb(){
  return path.equalsIgnoreCase(MEMORY_DB_PATH);
}

private static boolean testSpecificValue(double x,double y,double expectedValue,double interpValue){
  logger.info("At coordinate (" + x + ", "+ y+ ") the expected value is "+ expectedValue+ "; the interpolated value is "+ interpValue+ ".");
  boolean specificValueInterpUseful=true;
  if (interpValue > expectedValue + 1 || interpValue < expectedValue - 1)   specificValueInterpUseful=false;
  return specificValueInterpUseful;
}

public InputSource resolveEntity(String publicId,String systemId) throws SAXException, IOException {
  hasDTD=false;
  String dtd=UtilProperties.getSplitPropertyValue(UtilURL.fromResource("localdtds.properties"),publicId);
  if (UtilValidate.isNotEmpty(dtd)) {
    if (Debug.verboseOn())     Debug.logVerbose("[UtilXml.LocalResolver.resolveEntity] resolving DTD with publicId [" + publicId + "], systemId ["+ systemId+ "] and the dtd file is ["+ dtd+ "]",module);
    try {
      URL dtdURL=UtilURL.fromResource(dtd);
      if (dtdURL == null) {
        throw new GeneralException("Local DTD not found - " + dtd);
      }
      InputStream dtdStream=dtdURL.openStream();
      InputSource inputSource=new InputSource(dtdStream);
      inputSource.setPublicId(publicId);
      hasDTD=true;
      if (Debug.verboseOn())       Debug.logVerbose("[UtilXml.LocalResolver.resolveEntity] got LOCAL DTD input source with publicId [" + publicId + "] and the dtd file is ["+ dtd+ "]",module);
      return inputSource;
    }
 catch (    Exception e) {
      Debug.logWarning(e,module);
    }
  }
 else {
    int lastSlash=systemId.lastIndexOf("/");
    String filename=null;
    if (lastSlash == -1) {
      filename=systemId;
    }
 else {
      filename=systemId.substring(lastSlash + 1);
    }
    URL resourceUrl=UtilURL.fromResource(filename);
    if (resourceUrl != null) {
      InputStream resStream=resourceUrl.openStream();
      InputSource inputSource=new InputSource(resStream);
      if (UtilValidate.isNotEmpty(publicId)) {
        inputSource.setPublicId(publicId);
      }
      hasDTD=true;
      if (Debug.verboseOn())       Debug.logVerbose("[UtilXml.LocalResolver.resolveEntity] got LOCAL DTD/Schema input source with publicId [" + publicId + "] and the file/resource is ["+ filename+ "]",module);
      return inputSource;
    }
 else {
      Debug.logWarning("[UtilXml.LocalResolver.resolveEntity] could not find LOCAL DTD/Schema with publicId [" + publicId + "] and the file/resource is ["+ filename+ "]",module);
      return null;
    }
  }
  return defaultResolver.resolveEntity(publicId,systemId);
}

@Override public String leaveDTD(){
  if (_writer == _dtdWriter) {
    _line.append(_text);
    _text=new StringBuffer(20);
    flushLine(false);
    _writer=_docWriter;
    return _dtdWriter.toString();
  }
  return null;
}

private static ClassNode loadClass(String name,Config config) throws Exception {
  String filePath=config.getClassDumpPath() + name.replace('.','/') + ".class";
  ClassReader reader=new ClassReader(new FileInputStream(filePath));
  ClassNode node=new ClassNode();
  reader.accept(node,ClassReader.EXPAND_FRAMES);
  return node;
}

public void write(char[] cbuf,int off,int len) throws IOException {
  internalOut.write(cbuf,off,len);
}

public void add(final String clazz,final String subclazz,final boolean blocked){
  entries.add(new Entry(clazz,subclazz,blocked));
}

private synchronized void bufferChange() throws ReadFailedException {
  ByteBuffer current=super.getByteBuffer();
  if (null != current) {
    current.clear();
    emptyBuffers.add(current);
  }
  int tries=0;
  while (true) {
    try {
      ByteBuffer buffer=fullBuffers.poll(100,TimeUnit.MILLISECONDS);
      if (null != buffer) {
        super.setByteBuffer(buffer);
        break;
      }
 else {
        tries++;
        if (readFailed || (tries > MAX_BUFFER_POOL_TRIES)) {
          throw new ReadFailedException("Time-out trying to get the full byte buffer to read from.");
        }
      }
    }
 catch (    InterruptedException e) {
      Thread.interrupted();
    }
  }
}

protected synchronized Class loadClass(String name,boolean resolve) throws ClassNotFoundException {
  Class c=findLoadedClass(name);
  if (c == null)   c=findClass(name);
  if (c == null)   throw new ClassNotFoundException(name);
  if (resolve)   resolveClass(c);
  return c;
}

@SuppressWarnings({"unchecked","rawtypes"}) public static Comparable<?> max(Comparable<?>[] ar){
  Comparable ret=ar[0];
  for (int i=1; i < ar.length; i++) {
    if (ret.compareTo(ar[i]) < 0) {
      ret=ar[i];
    }
  }
  return ret;
}

private void initBPRMADetails(int C_BPartner_ID){
  rmaField.removeActionListener(this);
  rmaField.removeAllItems();
  KeyNamePair pp=new KeyNamePair(0,"");
  rmaField.addItem(pp);
  ArrayList<KeyNamePair> list=loadRMAData(C_BPartner_ID);
  for (  KeyNamePair knp : list)   rmaField.addItem(knp);
  rmaField.setSelectedIndex(0);
  rmaField.addActionListener(this);
}

protected void resetOptions(){
  m_maxStale=5;
  m_searchDirection=SELECTION_FORWARD;
  m_starting=null;
  m_startRange=new Range();
  m_classIndex=-1;
  m_totalEvals=0;
  m_cacheSize=1;
  m_debug=false;
}

@Override protected void tearDown() throws Exception {
  try {
    takeScreenShot();
  }
 catch (  Throwable throwable) {
    throwable.printStackTrace();
  }
  super.tearDown();
}

public synchronized void clear(){
  mCategories.clear();
  mValues.clear();
}

private boolean itera_connect(PlaPointInt p_from_point,PlaPointInt p_to_point){
  ArrayList<PlaPointInt> corners=angled_connection(p_from_point,p_to_point);
  boolean connection_succeeded=true;
  for (int index=1; index < corners.size(); ++index) {
    PlaPointInt from_corner=corners.get(index - 1);
    PlaPointInt to_corner=corners.get(index);
    TimeLimit time_limit=new TimeLimit(s_CHECK_FORCED_TRACE_TIME_MAX);
    while (!from_corner.equals(to_corner)) {
      PlaPointInt curr_ok_point=r_board.insert_trace(from_corner,to_corner,pen_half_width_arr[layer_active_no],layer_active_no,net_nos,clearance_class,max_shove_trace_recursion_depth,max_shove_via_recursion_depth,max_spring_over_recursion_depth,itera_settings.trace_pullt_min_move,!is_stitch_mode,time_limit);
      if (curr_ok_point == null) {
        r_board.undo(null);
        return true;
      }
      if (curr_ok_point.equals(from_corner) && itera_settings.is_automatic_neckdown()) {
        curr_ok_point=try_neckdown_at_end(from_corner,to_corner);
      }
      if (curr_ok_point.equals(from_corner)) {
        prev_corner=from_corner;
        connection_succeeded=false;
        break;
      }
      from_corner=curr_ok_point;
    }
  }
  return connection_succeeded;
}

private Node<K,V> findPredecessorOfLast(){
  for (; ; ) {
    Index<K,V> q=head;
    for (; ; ) {
      Index<K,V> d, r;
      if ((r=q.right) != null) {
        if (r.indexesDeletedNode()) {
          q.unlink(r);
          break;
        }
        if (r.node.next != null) {
          q=r;
          continue;
        }
      }
      if ((d=q.down) != null)       q=d;
 else       return q.node;
    }
  }
}

public boolean query(int objectToQuery,long[][] hashFunctions){
  for (  long[] h : hashFunctions) {
    int i=hash(h,(long)objectToQuery);
    if (!bitSet.get(i))     return false;
  }
  return true;
}

public void clear(){
synchronized (mLock) {
    mGraphics.clear();
  }
  postInvalidate();
}

@SafeVarargs public static <V>Set<V> createSet(V... values){
  Set<V> set=new LinkedHashSet<V>();
  for (  V v : values) {
    set.add(v);
  }
  return set;
}

@Override void doConstrainedOutsideScores(Grammar grammar,boolean viterbi,boolean logScores){
  short[] numSubStatesArray=grammar.numSubStates;
  double initVal=(logScores) ? Double.NEGATIVE_INFINITY : 0.0;
  for (int diff=length; diff >= 1; diff--) {
    for (int start=0; start + diff <= length; start++) {
      int end=start + diff;
      double[][] scoresAfterUnaries=new double[numStates][];
      boolean somethingChanged=false;
      for (int cState=0; cState < numStates; cState++) {
        if (diff > 1 && !grammar.isGrammarTag[cState])         continue;
        if (!allowedStates[start][end][cState]) {
          continue;
        }
        UnaryRule[] rules=null;
        if (viterbi)         rules=grammar.getClosedViterbiUnaryRulesByChild(cState);
 else         rules=grammar.getClosedSumUnaryRulesByChild(cState);
        final int nChildStates=numSubStatesArray[cState];
        final int numRules=rules.length;
        for (int r=0; r < numRules; r++) {
          UnaryRule ur=rules[r];
          int pState=ur.parentState;
          if ((pState == cState))           continue;
          if (!allowedStates[start][end][pState]) {
            continue;
          }
          double[][] scores=ur.getScores2();
          final int nParentStates=numSubStatesArray[pState];
          for (int cp=0; cp < nChildStates; cp++) {
            if (scores[cp] == null)             continue;
            if (!allowedSubStates[start][end][cState][cp])             continue;
            for (int np=0; np < nParentStates; np++) {
              double pS=scores[cp][np];
              if (pS == initVal)               continue;
              double oS=oScore[start][end][pState][np];
              if (oS == initVal)               continue;
              double thisRound=(logScores) ? oS + pS : oS * pS;
              if (scoresAfterUnaries[cState] == null) {
                scoresAfterUnaries[cState]=new double[numSubStatesArray[cState]];
                if (viterbi)                 Arrays.fill(scoresAfterUnaries[cState],initVal);
              }
              if (viterbi)               scoresAfterUnaries[cState][cp]=Math.max(thisRound,scoresAfterUnaries[cState][cp]);
 else               scoresAfterUnaries[cState][cp]+=thisRound;
              somethingChanged=true;
            }
          }
        }
      }
      if (somethingChanged) {
        for (int cState=0; cState < numStates; cState++) {
          double[] thisCell=scoresAfterUnaries[cState];
          if (thisCell == null)           continue;
          for (int cp=0; cp < numSubStatesArray[cState]; cp++) {
            if (thisCell[cp] > initVal) {
              if (viterbi)               oScore[start][end][cState][cp]=Math.max(oScore[start][end][cState][cp],thisCell[cp]);
 else               oScore[start][end][cState][cp]+=thisCell[cp];
            }
          }
        }
      }
      for (int pState=0; pState < numSubStatesArray.length; pState++) {
        if (!allowedStates[start][end][pState]) {
          continue;
        }
        final int nParentChildStates=numSubStatesArray[pState];
        BinaryRule[] rules=grammar.splitRulesWithP(pState);
        final int numRules=rules.length;
        for (int r=0; r < numRules; r++) {
          BinaryRule br=rules[r];
          int lState=br.leftChildState;
          int min1=narrowRExtent[start][lState];
          if (end < min1) {
            continue;
          }
          int rState=br.rightChildState;
          int max1=narrowLExtent[end][rState];
          if (max1 < min1) {
            continue;
          }
          int min=min1;
          int max=max1;
          if (max - min > 2) {
            int min2=wideLExtent[end][rState];
            min=(min1 > min2 ? min1 : min2);
            if (max1 < min) {
              continue;
            }
            int max2=wideRExtent[start][lState];
            max=(max1 < max2 ? max1 : max2);
            if (max < min) {
              continue;
            }
          }
          double[][][] scores=br.getScores2();
          final int nLeftChildStates=numSubStatesArray[lState];
          final int nRightChildStates=numSubStatesArray[rState];
          for (int split=min; split <= max; split++) {
            if (!allowedStates[start][split][lState])             continue;
            if (!allowedStates[split][end][rState])             continue;
            double[] rightScores=new double[nRightChildStates];
            if (viterbi)             Arrays.fill(rightScores,initVal);
            Arrays.fill(scoresToAdd,initVal);
            somethingChanged=false;
            for (int lp=0; lp < nLeftChildStates; lp++) {
              double lS=iScore[start][split][lState][lp];
              if (lS == initVal) {
                continue;
              }
              for (int rp=0; rp < nRightChildStates; rp++) {
                if (scores[lp][rp] == null)                 continue;
                double rS=iScore[split][end][rState][rp];
                if (rS == initVal) {
                  continue;
                }
                for (int np=0; np < nParentChildStates; np++) {
                  double pS=scores[lp][rp][np];
                  if (pS == initVal)                   continue;
                  double oS=oScore[start][end][pState][np];
                  if (oS == initVal)                   continue;
                  double thisRoundL=(logScores) ? pS + rS + oS : pS * rS * oS;
                  double thisRoundR=(logScores) ? pS + lS + oS : pS * lS * oS;
                  if (viterbi) {
                    scoresToAdd[lp]=Math.max(thisRoundL,scoresToAdd[lp]);
                    rightScores[rp]=Math.max(thisRoundR,rightScores[rp]);
                  }
 else {
                    scoresToAdd[lp]+=thisRoundL;
                    rightScores[rp]+=thisRoundR;
                  }
                  somethingChanged=true;
                }
              }
            }
            if (!somethingChanged)             continue;
            for (int cp=0; cp < nLeftChildStates; cp++) {
              if (scoresToAdd[cp] > initVal) {
                if (viterbi)                 oScore[start][split][lState][cp]=Math.max(oScore[start][split][lState][cp],scoresToAdd[cp]);
 else                 oScore[start][split][lState][cp]+=scoresToAdd[cp];
              }
            }
            for (int cp=0; cp < nRightChildStates; cp++) {
              if (rightScores[cp] > initVal) {
                if (viterbi)                 oScore[split][end][rState][cp]=Math.max(oScore[split][end][rState][cp],rightScores[cp]);
 else                 oScore[split][end][rState][cp]+=rightScores[cp];
              }
            }
          }
        }
      }
    }
  }
}

public void stop(){
  timeMonIndex=0;
  setException();
  Iterator iter=iter();
  while (iter.hasNext()) {
    HttpMonItem monItem=(HttpMonItem)iter.next();
    monItem.stop(this);
  }
  if (stackTrace != null)   changeDetails();
}

public void calcMinTick(){
  if (minData == 0.0)   minTick=0;
 else   minTick=Math.floor(minData / majorTick) * majorTick;
}

public static void switchTiming(String nextPhase){
  stopMostRecentTimer();
  startTiming(nextPhase);
}

public byte[] encode(){
  char type=getAttributeType();
  if (!isTypeValid(type))   throw new IllegalStateException(((int)type) + "is not a valid address attribute!");
  byte binValue[]=new byte[HEADER_LENGTH + getDataLength()];
  binValue[0]=(byte)(type >> 8);
  binValue[1]=(byte)(type & 0x00FF);
  binValue[2]=(byte)(getDataLength() >> 8);
  binValue[3]=(byte)(getDataLength() & 0x00FF);
  binValue[4]=0x00;
  binValue[5]=getFamily();
  binValue[6]=(byte)(getPort() >> 8);
  binValue[7]=(byte)(getPort() & 0x00FF);
  if (getFamily() == ADDRESS_FAMILY_IPV6) {
    System.arraycopy(getAddressBytes(),0,binValue,8,16);
  }
 else {
    System.arraycopy(getAddressBytes(),0,binValue,8,4);
  }
  return binValue;
}

private void doDeleteEntry(String alias) throws Exception {
  if (keyStore.containsAlias(alias) == false) {
    MessageFormat form=new MessageFormat(rb.getString("Alias.alias.does.not.exist"));
    Object[] source={alias};
    throw new Exception(form.format(source));
  }
  keyStore.deleteEntry(alias);
}

protected Integer mapThrowableFlat(Throwable throwable){
  Class<? extends Throwable> throwableClass=throwable.getClass();
  Integer resId=throwableToMsgIdMap.get(throwableClass);
  if (resId == null) {
    Class<? extends Throwable> closestClass=null;
    Set<Entry<Class<? extends Throwable>,Integer>> mappings=throwableToMsgIdMap.entrySet();
    for (    Entry<Class<? extends Throwable>,Integer> mapping : mappings) {
      Class<? extends Throwable> candidate=mapping.getKey();
      if (candidate.isAssignableFrom(throwableClass)) {
        if (closestClass == null || closestClass.isAssignableFrom(candidate)) {
          closestClass=candidate;
          resId=mapping.getValue();
        }
      }
    }
  }
  return resId;
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>();
  newVector.add(new Option("\tDistance function to use.\n" + "\t(default: weka.core.EuclideanDistance)","A",1,"-A <classname and options>"));
  newVector.add(new Option("\tCalculate performance statistics.","P",0,"-P"));
  return newVector.elements();
}

public void assertColumnType(ResultSet rs) throws SQLException {
  ResultSetMetaData md=rs.getMetaData();
  int sqlType=md.getColumnType(mdi.getPosition());
  assertTrue(String.format("Unexpected SQL Type %d for column %s",sqlType,mdi),isAllowedSqlType(sqlType));
}

private void validateDnsNames(Set dnsNameSet) throws PolicyException {
  Iterator dnsNames=dnsNameSet.iterator();
  while (dnsNames.hasNext()) {
    String dnsName=(String)dnsNames.next();
    validateDnsName(dnsName);
    dnsList.add(dnsName.toLowerCase());
  }
}

public static boolean isMopMethod(String methodName){
  return (methodName.startsWith("this$") || methodName.startsWith("super$")) && !methodName.contains("$dist$");
}

protected void init(){
  GraphicsConfigTemplate3D template=new GraphicsConfigTemplate3D();
  GraphicsEnvironment env=GraphicsEnvironment.getLocalGraphicsEnvironment();
  GraphicsDevice device=env.getDefaultScreenDevice();
  GraphicsConfiguration config=device.getBestConfiguration(template);
  canvas=new Canvas3D(config);
  canvas.setSize(new Dimension(DEFAULT_DIMENSION,DEFAULT_DIMENSION));
  objRootBG=new BranchGroup();
  objRootBG.setCapability(Group.ALLOW_CHILDREN_EXTEND);
  constructWorld(objRootBG);
}

private <Delegated>PresenterBinder<? super Delegated> findPresenterBinderForClass(Class<Delegated> clazz) throws IllegalAccessException, InstantiationException {
  PresenterBinder<? super Delegated> presenterBinder;
  String clsName=clazz.getName();
  String className=clsName + PRESENTER_BINDER_SUFFIX;
  try {
    Class<?> presenterBinderClass=Class.forName(className);
    presenterBinder=(PresenterBinder<? super Delegated>)presenterBinderClass.newInstance();
  }
 catch (  ClassNotFoundException e) {
    return null;
  }
  return presenterBinder;
}

@Override final Node<K,V> find(int h,Object k){
  if (k != null) {
    for (Node<K,V> e=first; e != null; ) {
      int s;
      if (((s=lockState) & (WAITER | WRITER)) != 0) {
        if (e.hash == h && isEqual((K)k,e.key,myHashingStrategy)) {
          return e;
        }
        e=e.next;
      }
 else       if (U.compareAndSwapInt(this,LOCKSTATE,s,s + READER)) {
        TreeNode<K,V> r, p;
        try {
          p=((r=root) == null ? null : r.findTreeNode(h,k,null));
        }
  finally {
          int ls;
          do {
          }
 while (!U.compareAndSwapInt(this,LOCKSTATE,ls=lockState,ls - READER));
          Thread w;
          if (ls == (READER | WAITER) && (w=waiter) != null) {
            LockSupport.unpark(w);
          }
        }
        return p;
      }
    }
  }
  return null;
}

public void square(double x,double y,double r){
  if (r < 0)   throw new IllegalArgumentException("square side length can't be negative");
  double xs=scaleX(x);
  double ys=scaleY(y);
  double ws=factorX(2 * r);
  double hs=factorY(2 * r);
  if (ws <= 1 && hs <= 1)   pixel(x,y);
 else   offscreen.draw(new Rectangle2D.Double(xs - ws / 2,ys - hs / 2,ws,hs));
  draw();
}

private float clampMag(float value,float absMin,float absMax){
  final float absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

private int lowerHeightMap(int x,int y,int z){
  for (--y; y >= 0; --y) {
    if (getType(x,z,y) != 0) {
      break;
    }
  }
  return y + 1;
}

public String toString(){
  StringBuffer result=new StringBuffer("{ ");
  for (int i=0; i < intervalls.size(); i++)   result.append(intervalls.elementAt(i));
  result.append(" }");
  return result.toString();
}

public void remove(@NotNull StatusNotification notification){
  stack.remove(notification);
  onClose(notification);
}

private JobDefinitionEntity createOrUpdateJobDefinitionEntity(JobDefinitionEntity jobDefinitionEntity,NamespaceEntity namespaceEntity,String jobName,String description,String activitiId,List<Parameter> parameters,S3PropertiesLocation s3PropertiesLocation){
  JobDefinitionEntity jobDefinitionEntityLocal=jobDefinitionEntity;
  if (jobDefinitionEntityLocal == null) {
    jobDefinitionEntityLocal=new JobDefinitionEntity();
  }
  jobDefinitionEntityLocal.setName(jobName);
  jobDefinitionEntityLocal.setNamespace(namespaceEntity);
  jobDefinitionEntityLocal.setDescription(description);
  jobDefinitionEntityLocal.setActivitiId(activitiId);
  String bucketName=null;
  String key=null;
  if (s3PropertiesLocation != null) {
    bucketName=s3PropertiesLocation.getBucketName();
    key=s3PropertiesLocation.getKey();
  }
  jobDefinitionEntityLocal.setS3BucketName(bucketName);
  jobDefinitionEntityLocal.setS3ObjectKey(key);
  List<JobDefinitionParameterEntity> parameterEntities=new ArrayList<>();
  if (!CollectionUtils.isEmpty(parameters)) {
    for (    Parameter parameter : parameters) {
      JobDefinitionParameterEntity parameterEntity=new JobDefinitionParameterEntity();
      parameterEntities.add(parameterEntity);
      parameterEntity.setName(parameter.getName());
      parameterEntity.setValue(parameter.getValue());
    }
  }
  jobDefinitionEntityLocal.setParameters(parameterEntities);
  return jobDefinitionEntityLocal;
}

public void find(int index,float weightLoss,float moveCost,ArrayList<DbEntry> itemsPlaced){
  if ((weightLoss >= lowestWeightLoss) || ((weightLoss == lowestWeightLoss) && (moveCost >= lowestMoveCost))) {
    return;
  }
 else   if (index >= itemsToPlace.size()) {
    lowestWeightLoss=weightLoss;
    lowestMoveCost=moveCost;
    finalPlacedItems=deepCopy(itemsPlaced);
    return;
  }
  DbEntry me=itemsToPlace.get(index);
  int myX=me.cellX;
  int myY=me.cellY;
  ArrayList<DbEntry> itemsIncludingMe=new ArrayList<>(itemsPlaced.size() + 1);
  itemsIncludingMe.addAll(itemsPlaced);
  itemsIncludingMe.add(me);
  if (me.spanX > 1 || me.spanY > 1) {
    int myW=me.spanX;
    int myH=me.spanY;
    for (int y=0; y < mTrgY; y++) {
      for (int x=0; x < mTrgX; x++) {
        float newMoveCost=moveCost;
        if (x != myX) {
          me.cellX=x;
          newMoveCost++;
        }
        if (y != myY) {
          me.cellY=y;
          newMoveCost++;
        }
        if (ignoreMove) {
          newMoveCost=moveCost;
        }
        if (isVacant(occupied,x,y,myW,myH)) {
          markCells(occupied,me,true);
          find(index + 1,weightLoss,newMoveCost,itemsIncludingMe);
          markCells(occupied,me,false);
        }
        if (myW > me.minSpanX && isVacant(occupied,x,y,myW - 1,myH)) {
          me.spanX--;
          markCells(occupied,me,true);
          find(index + 1,weightLoss,newMoveCost + 1,itemsIncludingMe);
          markCells(occupied,me,false);
          me.spanX++;
        }
        if (myH > me.minSpanY && isVacant(occupied,x,y,myW,myH - 1)) {
          me.spanY--;
          markCells(occupied,me,true);
          find(index + 1,weightLoss,newMoveCost + 1,itemsIncludingMe);
          markCells(occupied,me,false);
          me.spanY++;
        }
        if (myH > me.minSpanY && myW > me.minSpanX && isVacant(occupied,x,y,myW - 1,myH - 1)) {
          me.spanX--;
          me.spanY--;
          markCells(occupied,me,true);
          find(index + 1,weightLoss,newMoveCost + 2,itemsIncludingMe);
          markCells(occupied,me,false);
          me.spanX++;
          me.spanY++;
        }
        me.cellX=myX;
        me.cellY=myY;
      }
    }
    find(index + 1,weightLoss + me.weight,moveCost,itemsPlaced);
  }
 else {
    int newDistance=Integer.MAX_VALUE;
    int newX=Integer.MAX_VALUE, newY=Integer.MAX_VALUE;
    for (int y=0; y < mTrgY; y++) {
      for (int x=0; x < mTrgX; x++) {
        if (!occupied[x][y]) {
          int dist=ignoreMove ? 0 : ((me.cellX - x) * (me.cellX - x) + (me.cellY - y) * (me.cellY - y));
          if (dist < newDistance) {
            newX=x;
            newY=y;
            newDistance=dist;
          }
        }
      }
    }
    if (newX < mTrgX && newY < mTrgY) {
      float newMoveCost=moveCost;
      if (newX != myX) {
        me.cellX=newX;
        newMoveCost++;
      }
      if (newY != myY) {
        me.cellY=newY;
        newMoveCost++;
      }
      if (ignoreMove) {
        newMoveCost=moveCost;
      }
      markCells(occupied,me,true);
      find(index + 1,weightLoss,newMoveCost,itemsIncludingMe);
      markCells(occupied,me,false);
      me.cellX=myX;
      me.cellY=myY;
      if (index + 1 < itemsToPlace.size() && itemsToPlace.get(index + 1).weight >= me.weight && !ignoreMove) {
        find(index + 1,weightLoss + me.weight,moveCost,itemsPlaced);
      }
    }
 else {
      for (int i=index + 1; i < itemsToPlace.size(); i++) {
        weightLoss+=itemsToPlace.get(i).weight;
      }
      find(itemsToPlace.size(),weightLoss + me.weight,moveCost,itemsPlaced);
    }
  }
}

@RequestMapping(value={"/",""},method=RequestMethod.PUT) @ResponseBody public RestWrapper insert(@ModelAttribute("users") @Valid Users users,BindingResult bindingResult,Principal principal){
  RestWrapper restWrapper=null;
  if (bindingResult.hasErrors()) {
    BindingResultError bindingResultError=new BindingResultError();
    return bindingResultError.errorMessage(bindingResult);
  }
  try {
    String hashedPassword=DigestUtils.sha1Hex(users.getPassword());
    com.wipro.ats.bdre.md.dao.jpa.Users jpaUsers=new com.wipro.ats.bdre.md.dao.jpa.Users();
    jpaUsers.setPassword(hashedPassword);
    jpaUsers.setUsername(users.getUsername());
    jpaUsers.setEnabled((users.getEnabled() == 1) ? true : false);
    usersDAO.insert(jpaUsers);
    restWrapper=new RestWrapper(users,RestWrapper.OK);
    LOGGER.info("Record with ID:" + users.getUsername() + " inserted in Users by User:"+ principal.getName()+ users);
  }
 catch (  Exception e) {
    LOGGER.error(e);
    restWrapper=new RestWrapper(e.getMessage(),RestWrapper.ERROR);
  }
  return restWrapper;
}

public static String cappedInt(final long val){
  if (val >= Integer.MAX_VALUE) {
    return OVER;
  }
 else   if (val <= Integer.MIN_VALUE) {
    return UNDER;
  }
  return Long.toString(val);
}

private void createFromAssets(String myDBName,File dbfile,InputStream assetFileInputStream){
  OutputStream out=null;
  try {
    String dbPath=dbfile.getAbsolutePath();
    dbPath=dbPath.substring(0,dbPath.lastIndexOf("/") + 1);
    File dbPathFile=new File(dbPath);
    if (!dbPathFile.exists())     dbPathFile.mkdirs();
    File newDbFile=new File(dbPath + myDBName);
    out=new FileOutputStream(newDbFile);
    byte[] buf=new byte[1024];
    int len;
    while ((len=assetFileInputStream.read(buf)) > 0)     out.write(buf,0,len);
    Log.v("info","Copied pre-populated DB content to: " + newDbFile.getAbsolutePath());
  }
 catch (  IOException ex) {
    Log.v("createFromAssets","No pre-populated DB found, error=" + ex.getMessage());
  }
 finally {
    if (out != null) {
      try {
        out.close();
      }
 catch (      IOException ignored) {
      }
    }
  }
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return PERSON_PROPERTY;
case 2:
  return PAGE_PROPERTY;
case 3:
return EQUIV;
case 4:
return PAGE_VIEW;
default :
return null;
}
}

protected String internalPut(String key,String newValue){
synchronized (childAndPropertyLock) {
    String oldValue=properties.get(key);
    if (oldValue != null && oldValue.equals(newValue))     return oldValue;
    properties=properties.put(key,newValue);
    return oldValue;
  }
}

public Polyline(PlaPointInt p_from_corner,PlaPointInt p_to_corner){
  if (p_from_corner.equals(p_to_corner))   throw new IllegalArgumentException(classname + "C must contain at least 2 different points");
  lines_list=new ArrayList<PlaLineInt>(3);
  PlaDirection dir=new PlaDirection(p_from_corner,p_to_corner);
  lines_list.add(new PlaLineInt(p_from_corner,dir.rotate_45_deg(2)));
  lines_list.add(new PlaLineInt(p_from_corner,p_to_corner));
  lines_list.add(new PlaLineInt(p_to_corner,dir.rotate_45_deg(2)));
  corners_allocate(corner_count());
  precalculated_corners[0]=p_from_corner;
  precalculated_corners[1]=p_to_corner;
}

protected boolean isOnSameScreenAsChildren(){
  return true;
}

public static String formatPrice(Double price){
  if (price == null)   return "";
  return formatPrice(price.doubleValue());
}

static void checkLogDir(){
  if (System.getProperty("solr.log.dir") == null) {
    log.error("Missing Java Option solr.log.dir. Logging may be missing or incomplete.");
  }
}

private static boolean isMoreAbove(String src,int index){
  int ch;
  int cc;
  int len=src.length();
  for (int i=index + Character.charCount(src.codePointAt(index)); i < len; i+=Character.charCount(ch)) {
    ch=src.codePointAt(i);
    cc=Normalizer.getCombiningClass(ch);
    if (cc == COMBINING_CLASS_ABOVE) {
      return true;
    }
 else     if (cc == 0) {
      return false;
    }
  }
  return false;
}

public void restoreKey(String key){
  if (!key.equalsIgnoreCase("test_mode_opened")) {
    String originalKey=key.substring(keyTestMode.length());
    Object value=get(key);
    put(originalKey,value);
    clear(key);
  }
}

public boolean hasUnsupportedCriticalExtension(){
  Set extns=getCriticalExtensionOIDs();
  if (extns == null) {
    return false;
  }
  extns.remove(RFC3280CertPathUtilities.ISSUING_DISTRIBUTION_POINT);
  extns.remove(RFC3280CertPathUtilities.DELTA_CRL_INDICATOR);
  return !extns.isEmpty();
}

public static void writeInt(DataOutput out,int v) throws IOException {
  out.writeByte(0xff & v);
  out.writeByte(0xff & (v >>> 8));
  out.writeByte(0xff & (v >>> 16));
  out.writeByte(0xff & (v >>> 24));
}

public static Comparable[] sortCopy(Comparable[] objects){
  int len=objects.length;
  Comparable[] copy=new Comparable[len];
  System.arraycopy(objects,0,copy,0,len);
  sort(copy);
  return copy;
}

private Utf8Constant parseUtf8Constant(int index) throws IOException {
  int length=readShort();
  StringBuilder cb=new StringBuilder();
  for (int i=0; i < length; i++) {
    int ch=read();
    if (ch < 0x80) {
      cb.append((char)ch);
    }
 else     if ((ch & 0xe0) == 0xc0) {
      int ch2=read();
      i++;
      cb.append((char)(((ch & 0x1f) << 6) + (ch2 & 0x3f)));
    }
 else {
      int ch2=read();
      int ch3=read();
      i+=2;
      cb.append((char)(((ch & 0xf) << 12) + ((ch2 & 0x3f) << 6) + ((ch3 & 0x3f))));
    }
  }
  return new Utf8Constant(_class.getConstantPool(),index,cb.toString());
}

@Override public boolean markNextSequence() throws IOException {
  if (mSeqSize < mLimit && mPointerSize + mPointerEntrySize <= mLimit) {
    mPointers.writeByte((int)mChecksumSeq.getValue());
    mChecksumSeq.reset();
    if (mChecksumQual != null) {
      mPointers.writeByte((int)mChecksumQual.getValue());
      mChecksumQual.reset();
    }
    mPointers.writeInt((int)mSeqSize);
    mPointerSize+=mPointerEntrySize;
    return true;
  }
  return false;
}

public final double sampleActiveCount(){
  return _activeCount.get();
}

private void preprocessData(Map<Integer,Map<Integer,List<Integer>>> knotenVonSpurNachSpurMapping,Map<Integer,Map<Integer,String>> knotenSpurLinkMapping){
  preprocessKnotenSpurLinkMapping(knotenSpurLinkMapping);
  cleanKnotenVonSpurNachSpurMapping(knotenVonSpurNachSpurMapping,knotenSpurLinkMapping);
  mergeLanesOnSameLink(knotenVonSpurNachSpurMapping,knotenSpurLinkMapping);
}

@Override public boolean mutate(TestCase test,TestFactory factory){
  if (Randomness.nextDouble() >= Properties.P_CHANGE_PARAMETER)   return false;
  if (!isStatic()) {
    VariableReference source=getSource();
    List<VariableReference> objects=test.getObjects(source.getType(),getPosition());
    objects.remove(source);
    if (!objects.isEmpty()) {
      setSource(Randomness.choice(objects));
      return true;
    }
  }
  return false;
}

@Override protected void drawXLabels(List<Double> xLabels,Double[] xTextLabelLocations,Canvas canvas,Paint paint,int left,int top,int bottom,double xPixelsPerUnit,double minX,double maxX){
  int length=xLabels.size();
  if (length > 0) {
    boolean showLabels=mRenderer.isShowLabels();
    boolean showGridY=mRenderer.isShowGridY();
    boolean showTickMarks=mRenderer.isShowTickMarks();
    DateFormat format=getDateFormat(xLabels.get(0),xLabels.get(length - 1));
    for (int i=0; i < length; i++) {
      long label=Math.round(xLabels.get(i));
      float xLabel=(float)(left + xPixelsPerUnit * (label - minX));
      if (showLabels) {
        paint.setColor(mRenderer.getXLabelsColor());
        if (showTickMarks) {
          canvas.drawLine(xLabel,bottom,xLabel,bottom + mRenderer.getLabelsTextSize() / 3,paint);
        }
        drawText(canvas,format.format(new Date(label)),xLabel,bottom + mRenderer.getLabelsTextSize() * 4 / 3 + mRenderer.getXLabelsPadding(),paint,mRenderer.getXLabelsAngle());
      }
      if (showGridY) {
        paint.setColor(mRenderer.getGridColor(0));
        canvas.drawLine(xLabel,bottom,xLabel,top,paint);
      }
    }
  }
  drawXTextLabels(xTextLabelLocations,canvas,paint,true,left,top,bottom,xPixelsPerUnit,minX,maxX);
}

public XPath(String exprString,SourceLocator locator,PrefixResolver prefixResolver,int type) throws javax.xml.transform.TransformerException {
  this(exprString,locator,prefixResolver,type,null);
}

private void addMenuItem(JPopupMenu menu,String title,MWFNode node,int AD_WF_NodeTo_ID){
  WFPopupItem item=new WFPopupItem(title,node,AD_WF_NodeTo_ID);
  menu.add(item);
  item.addActionListener(this);
}

public synchronized long allocate(int length){
  int blocks=getBlockCount(length);
  BlockRange x=null;
  for (  BlockRange b : freeSpace) {
    if (b.blocks >= blocks) {
      x=b;
      break;
    }
  }
  long pos=getPos(x.start);
  if (x.blocks == blocks) {
    freeSpace.remove(x);
  }
 else {
    x.start+=blocks;
    x.blocks-=blocks;
  }
  return pos;
}

public JenkinsHttpClient(URI uri,String username,String password){
  this(uri);
  if (isNotBlank(username)) {
    CredentialsProvider provider=client.getCredentialsProvider();
    AuthScope scope=new AuthScope(uri.getHost(),uri.getPort(),AuthScope.ANY_REALM);
    UsernamePasswordCredentials credentials=new UsernamePasswordCredentials(username,password);
    provider.setCredentials(scope,credentials);
    localContext=new BasicHttpContext();
    localContext.setAttribute("preemptive-auth",new BasicScheme());
    client.addRequestInterceptor(new PreemptiveAuth(),0);
  }
}

public static Set combineOCs(Set one,Set two){
  if (one == null || one.isEmpty()) {
    return two;
  }
  if (two == null || two.isEmpty()) {
    return one;
  }
  Set resultSet=new HashSet();
  Iterator itr1=one.iterator();
  while (itr1.hasNext()) {
    String value1=(String)itr1.next();
    resultSet.add(value1.toLowerCase());
  }
  Iterator itr2=two.iterator();
  while (itr2.hasNext()) {
    String value2=(String)itr2.next();
    resultSet.add(value2.toLowerCase());
  }
  return resultSet;
}

private String wrap(String str){
  StringBuilder buf=new StringBuilder(str);
  int len=lineLength;
  while (len < buf.length()) {
    int idx=buf.lastIndexOf(" ",len);
    if (idx != -1) {
      buf.replace(idx,idx + 1,breaker);
      len=idx + breaker.length() + lineLength;
    }
 else {
      buf.insert(len,breaker);
      len+=breaker.length() + lineLength;
    }
  }
  buf.insert(0,"<html>");
  return buf.toString();
}

public EchoStateNetwork commitChanges(){
  Network net=networkPanel.getNetwork();
  Integer numIns=Utils.parseInteger(tfInputLayerPop);
  if (numIns == null) {
    throw new IllegalArgumentException("Non-Number input population.");
  }
  NeuronGroup inputLayer=new NeuronGroup(net,numIns);
  if (inputLayer.size() > inputLayer.getGridThreshold()) {
    inputLayer.setLayout(new org.simbrain.network.layouts.GridLayout());
  }
  inputLayer.applyLayout();
  NeuronGroup reservoirLayer=reservoirPanel.createLayerFromData();
  if (reservoirLayer.size() > reservoirLayer.getGridThreshold()) {
    reservoirLayer.setLayout(new org.simbrain.network.layouts.GridLayout());
  }
  reservoirLayer.applyLayout();
  SynapseGroup resSynapses=resToResPanel.createSynapseGroup(reservoirLayer,reservoirLayer);
  resSynapses.setLabel("Res \u2192 Res");
  NeuronGroup outputLayer=outputPanel.createLayerFromData();
  outputLayer.applyLayout();
  if (outputLayer.size() > outputLayer.getGridThreshold()) {
    outputLayer.setLayout(new org.simbrain.network.layouts.GridLayout());
  }
  EchoStateNetwork esn=new EchoStateNetwork(net,networkPanel.getLastClickedPosition());
  esn.setBackWeights(allowOutToRes.isSelected());
  esn.setDirectInOutWeights(directInputToOutput.isSelected());
  esn.setRecurrentOutWeights(allowRecurrentOutputs.isSelected());
  esn.setTimeType((TimeType)cbTimeType.getSelectedItem());
  double maxEig=Utils.doubleParsable(spectralRadius);
  if (Double.isNaN(maxEig)) {
    throw new IllegalArgumentException("Non-Number spectral radius.");
  }
  esn.initializeInputLayer(inputLayer);
  esn.initializeReservoir(reservoirLayer,resSynapses,maxEig);
  esn.initializeOutput(outputLayer);
  SynapseGroup itr=inToResPanel.createSynapseGroup(inputLayer,reservoirLayer);
  itr.setLabel("In \u2192 Res");
  esn.addSynapseGroup(itr);
  SynapseGroup rto=SynapseGroup.createSynapseGroup(reservoirLayer,outputLayer,0.5);
  rto.setLabel("Res \u2192 Out");
  esn.addSynapseGroup(rto);
  if (allowRecurrentOutputs.isSelected()) {
    SynapseGroup oto=SynapseGroup.createSynapseGroup(outputLayer,outputLayer,0.5);
    oto.setLabel("Out \u2192 Out");
    esn.addSynapseGroup(oto);
  }
  if (allowOutToRes.isSelected()) {
    SynapseGroup otr=outToResPanel.createSynapseGroup(outputLayer,reservoirLayer);
    otr.setLabel("Out \u2192 Res.");
    esn.addSynapseGroup(otr);
  }
  if (directInputToOutput.isSelected()) {
    SynapseGroup ito=SynapseGroup.createSynapseGroup(inputLayer,outputLayer,0.5);
    ito.setLabel("In \u2192 Out");
    esn.addSynapseGroup(ito);
  }
  esn.positionLayers();
  return esn;
}

public static double pdf(double x,double shape,double scale){
  if (x < 0)   return 0;
  if (x == 0) {
    if (shape == 1.0)     return 1.0 / scale;
 else     return 0.0;
  }
  if (shape == 0.0)   return 1.0 / x;
  if (shape == -0.5) {
    return Math.sqrt(x);
  }
  final double xs=x / scale;
  if (shape == 1.0) {
    return Math.exp(-xs) / scale;
  }
  final double a=Math.exp((shape - 1.0) * Math.log(xs) - xs - GammaFunction.lnGamma(shape));
  return a / scale;
}

public void flush(){
synchronized (list) {
    int n=0;
    long m=0L;
    for (    T b : list) {
      if (halt)       throw new RuntimeException(firstCause.get());
      final int size=b.size();
      final long counter=b.flush();
      m+=counter;
      if (DEBUG)       log.debug("Flushed buffer: size=" + size + ", counter="+ counter);
    }
    if (INFO)     log.info("Flushed " + n + " unsynchronized buffers totalling "+ m+ " elements");
  }
}

private void writeAttribute(java.lang.String prefix,java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (xmlWriter.getPrefix(namespace) == null) {
    xmlWriter.writeNamespace(prefix,namespace);
    xmlWriter.setPrefix(prefix,namespace);
  }
  xmlWriter.writeAttribute(namespace,attName,attValue);
}

public void logInfo(String message){
  logger.info(logPrefix + message);
}

private boolean matchAddress(final byte[] remoteMask){
  if (ruleType == RuleType.ALLWILDCARD) {
    return true;
  }
  if (prefixMask == null) {
    return false;
  }
  if (remoteMask.length != prefixMask.length) {
    return false;
  }
  for (int i=0; i < prefixMask.length; i++) {
    if (!wildCard.get(i) && (ruleMask[i] & prefixMask[i]) != (remoteMask[i] & prefixMask[i])) {
      return false;
    }
  }
  return true;
}

public static String sign(String signingString,PrivateKey privateKey) throws InvalidKeyException, SignatureException {
  byte[] bytes=signingString.getBytes(StandardCharsets.UTF_8);
  Signature sig;
  try {
    sig=Signature.getInstance(SHA256_WITH_RSA);
  }
 catch (  NoSuchAlgorithmException e) {
    throw new IllegalArgumentException("An error occurred while getting the signature algorithm",e);
  }
  sig.initSign(privateKey);
  sig.update(bytes);
  return Hex.encodeHexString(sig.sign());
}

public Object invoke(Method method,Object target,ExtensionContext extensionContext,ExtensionRegistry extensionRegistry){
  @SuppressWarnings("unchecked") Optional<Object> optionalTarget=(target instanceof Optional ? (Optional<Object>)target : Optional.ofNullable(target));
  return ReflectionUtils.invokeMethod(method,target,resolveParameters(method,optionalTarget,extensionContext,extensionRegistry));
}

private static native void initIDs();

RegisteredProject putProject(ProjectConfig config,FolderEntry folder,boolean updated,boolean detected) throws ServerException, ConflictException, NotFoundException {
  final RegisteredProject project=new RegisteredProject(folder,config,updated,detected,this.projectTypeRegistry);
  projects.put(project.getPath(),project);
  return project;
}

protected void tearDown(){
  try {
    ds.close();
    sds.close();
  }
 catch (  Exception e) {
  }
}

@Override public void removeListener(final IZyNodeRealizerListener<?> listener){
  m_listeners.removeListener(listener);
}

protected void assertResultRowCount(int expected,ResultSet rs) throws SQLException {
  int i=0;
  while (rs.next()) {
    i++;
  }
  assertEquals(expected,i);
}

private boolean isModelUseful(ContingencyMatrix cm){
  for (int row=0; row < cm.getNumberOfPredictions(); row++) {
    for (int col=0; col < cm.getNumberOfClasses(); col++) {
      if (Math.abs(cm.getLift(row,col) - 1) > MIN_ADVANTAGE) {
        return true;
      }
    }
  }
  return false;
}

public void scan(ClassNode cn){
  List<ThreatResult> threats=new ArrayList<ThreatResult>();
  for (  ClassHandler classHandler : classHandlers) {
    ThreatResult result=classHandler.scanClass(cn);
    if (result != null) {
      threats.add(result);
    }
  }
  for (  MethodNode mn : cn.methods) {
    for (    MethodHandler methodHandler : methodHandlers) {
      ThreatResult result=methodHandler.scanMethod(mn);
      if (result != null) {
        threats.add(result);
      }
    }
  }
  if (threats.size() > 0) {
    threatsByClass.put(cn.name,threats);
  }
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getFooterSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if (mState == State.PULL_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

public void reset(){
  mChannelNumber=0;
  mActiveCalls.clear();
  mESNs.clear();
  mNeighborIDs.clear();
  mReceiveFrequencies.clear();
  mSiteIDs.clear();
  mTalkgroups.clear();
  mTransmitFrequencies.clear();
  mUniqueIDs.clear();
  resetState();
}

public static String newickNoLengths(Tree tree){
  StringBuffer buffer=new StringBuffer();
  newick(tree,tree.getRoot(),true,BranchLengthType.NO_BRANCH_LENGTHS,null,null,null,null,buffer);
  buffer.append(";");
  return buffer.toString();
}

@Override public String toString(){
  return (String.valueOf(getType()) + ":" + getKey()+ "="+ getValue());
}

@POST @Path("/key") @Produces({MediaType.APPLICATION_XML,MediaType.APPLICATION_JSON}) @Consumes({MediaType.APPLICATION_XML,MediaType.APPLICATION_JSON}) @CheckPermission(roles={Role.SECURITY_ADMIN,Role.RESTRICTED_SECURITY_ADMIN},blockProxies=true) public String rotateIPsecKey(){
  ipsecMgr.verifyIPsecOpAllowable();
  String version=ipsecMgr.rotateKey();
  auditMgr.recordAuditLog(null,null,IPSEC_SERVICE_TYPE,OperationTypeEnum.UPDATE_SYSTEM_PROPERTY,System.currentTimeMillis(),AuditLogManager.AUDITLOG_SUCCESS,null,"config_version=" + version);
  return version;
}

public int append(char chunk[]) throws GuacamoleException {
  return append(chunk,0,chunk.length);
}

public byte[] reset(byte[] data){
  byte[] bytes=null;
  if ((data[1] & 0xFF) < 128) {
    bytes=new byte[data[1] + 2];
    System.arraycopy(data,0,bytes,0,data[1] + 2);
  }
 else {
    if ((data[1] & 0xFF) > 128) {
      int len=data[1] & (byte)0x7F;
      int result=0;
      for (int i=0; i < len; i++) {
        result|=(data[i + 2] & 0xFF) << (8 * (len - i - 1));
      }
      bytes=new byte[result + len + 2];
      System.arraycopy(data,0,bytes,0,result + len + 2);
    }
  }
  return bytes;
}

public VectorClock(){
  this(new ArrayList<ClockEntry>(0),System.currentTimeMillis());
}

public Analyzer add(String name,NondominatedPopulation result){
  List<NondominatedPopulation> list=data.get(name);
  if (list == null) {
    list=new ArrayList<NondominatedPopulation>();
    data.put(name,list);
  }
  list.add(result);
  return this;
}

public static void assertEquals(String msg,double[] expected,double[] observed,double tolerance){
  StringBuilder out=new StringBuilder(msg);
  if (expected.length != observed.length) {
    out.append("\n Arrays not same length. \n");
    out.append("expected has length ");
    out.append(expected.length);
    out.append(" observed length = ");
    out.append(observed.length);
    Assert.fail(out.toString());
  }
  boolean failure=false;
  for (int i=0; i < expected.length; i++) {
    if (!Precision.equalsIncludingNaN(expected[i],observed[i],tolerance)) {
      failure=true;
      out.append("\n Elements at index ");
      out.append(i);
      out.append(" differ. ");
      out.append(" expected = ");
      out.append(expected[i]);
      out.append(" observed = ");
      out.append(observed[i]);
    }
  }
  if (failure) {
    Assert.fail(out.toString());
  }
}

public void initializeAtomsForFinite(List<Datum> data,String filename,Random random){
  beta=new double[K];
  dof=new double[K];
  omega=new ArrayList<>(K);
  if (filename != null) {
    try {
      loc=BatchMixtureModel.initializeClustersFromFile(filename,K);
      if (loc.size() < K) {
        loc=BatchMixtureModel.gonzalezInitializeMixtureCenters(loc,data,K,random);
      }
    }
 catch (    FileNotFoundException e) {
      e.printStackTrace();
      loc=BatchMixtureModel.gonzalezInitializeMixtureCenters(data,K,random);
    }
  }
 else {
    loc=BatchMixtureModel.gonzalezInitializeMixtureCenters(data,K,random);
  }
  log.debug("initialized cluster centers as: {}",loc);
  for (int k=0; k < this.K; k++) {
    beta[k]=baseBeta;
    dof[k]=baseNu;
    omega.add(baseOmega);
  }
}

@Override public void onInit(List<? extends IndexCommit> commits) throws IOException {
  if (commits.isEmpty()) {
    return;
  }
  log.info("SolrDeletionPolicy.onInit: commits: {}",new CommitsLoggingInfo(commits));
  log.debug("SolrDeletionPolicy.onInit: commits: {}",new CommitsLoggingDebug(commits));
  updateCommits(commits);
}

public boolean isLoading(){
  return state.equals(LOADING);
}

CharSequence convert(Object value,String key);

@Override public final void sample(){
synchronized (_lock) {
    long count=_count.get();
    long lastCount=_lastAvgCount;
    _lastAvgCount=count;
    long sum=_sum.get();
    double lastSum=_lastAvgSum;
    _lastAvgSum=sum;
    if (count == lastCount)     _value=0;
 else     _value=_scale * (sum - lastSum) / (double)(count - lastCount);
  }
}

public boolean login() throws LoginException {
  try {
    loadPasswordFile();
  }
 catch (  IOException ioe) {
    LoginException le=new LoginException("Error: unable to load the password file: " + passwordFileDisplayName);
    throw EnvHelp.initCause(le,ioe);
  }
  if (userCredentials == null) {
    throw new LoginException("Error: unable to locate the users' credentials.");
  }
  if (logger.debugOn()) {
    logger.debug("login","Using password file: " + passwordFileDisplayName);
  }
  if (tryFirstPass) {
    try {
      attemptAuthentication(true);
      succeeded=true;
      if (logger.debugOn()) {
        logger.debug("login","Authentication using cached password has succeeded");
      }
      return true;
    }
 catch (    LoginException le) {
      cleanState();
      logger.debug("login","Authentication using cached password has failed");
    }
  }
 else   if (useFirstPass) {
    try {
      attemptAuthentication(true);
      succeeded=true;
      if (logger.debugOn()) {
        logger.debug("login","Authentication using cached password has succeeded");
      }
      return true;
    }
 catch (    LoginException le) {
      cleanState();
      logger.debug("login","Authentication using cached password has failed");
      throw le;
    }
  }
  if (logger.debugOn()) {
    logger.debug("login","Acquiring password");
  }
  try {
    attemptAuthentication(false);
    succeeded=true;
    if (logger.debugOn()) {
      logger.debug("login","Authentication has succeeded");
    }
    return true;
  }
 catch (  LoginException le) {
    cleanState();
    logger.debug("login","Authentication has failed");
    throw le;
  }
}

public Builder updateExtension(Extension extension){
  extensions.add(extension);
  return this;
}

public void processUtterance(Utterance utterance) throws ProcessException {
  if (utterance.getRelation(Relation.SEGMENT) == null) {
    throw new IllegalStateException("DiphoneUnitSelector: Segment relation does not exist");
  }
  utterance.setObject(SampleInfo.UTT_NAME,diphoneDatabase.getSampleInfo());
  createUnitRelation(utterance);
}

public static int copy(InputStream in,OutputStream out) throws IOException {
  Assert.notNull(in,"No InputStream specified");
  Assert.notNull(out,"No OutputStream specified");
  try {
    return StreamUtils.copy(in,out);
  }
  finally {
    try {
      in.close();
    }
 catch (    IOException ex) {
    }
    try {
      out.close();
    }
 catch (    IOException ex) {
    }
  }
}

private String convertToAttributeName(String localName){
  return localName.replace('_',' ');
}

public ExpandedStatementBuilder reference(String property,Object value){
  checkCanChange();
  extraInfo.add(new ReferenceInfo(property,value));
  return this;
}

@TargetApi(Build.VERSION_CODES.HONEYCOMB) protected void swipeView(View child,float deltaX,float deltaY){
  if (isFixedView(child)) {
    deltaX=deltaX / 4;
  }
  float deltaXAbs=Math.abs(deltaX);
  float fractionCovered=deltaXAbs / (float)child.getWidth();
  child.setTranslationX(deltaX);
  child.setAlpha(1.f - fractionCovered);
  if (deltaX > 0)   child.setRotationY(-15.f * fractionCovered);
 else   child.setRotationY(15.f * fractionCovered);
}

private void verifyIsRoot(){
  if (hierarchyElements.size() != 0) {
    throw new IllegalStateException("This is not the root. Can " + "only call addCounter() on the root node. Current node: " + hierarchy);
  }
}

@Override public int size(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    return count;
  }
  finally {
    lock.unlock();
  }
}

private void verifyWithSeparateSigningKey(X509Certificate cert,PublicKey prevKey,boolean signFlag,Set<X509Certificate> stackedCerts) throws CertPathValidatorException {
  String msg="revocation status";
  if (debug != null) {
    debug.println("RevocationChecker.verifyWithSeparateSigningKey()" + " ---checking " + msg + "...");
  }
  if ((stackedCerts != null) && stackedCerts.contains(cert)) {
    if (debug != null) {
      debug.println("RevocationChecker.verifyWithSeparateSigningKey()" + " circular dependency");
    }
    throw new CertPathValidatorException("Could not determine revocation status",null,null,-1,BasicReason.UNDETERMINED_REVOCATION_STATUS);
  }
  if (!signFlag) {
    buildToNewKey(cert,null,stackedCerts);
  }
 else {
    buildToNewKey(cert,prevKey,stackedCerts);
  }
}

public boolean isRunning(){
  return this.running;
}

private boolean mapPatternElemPos(int nesting,boolean isStart,boolean isAttrName){
  if (0 == nesting) {
    if (m_patternMapSize >= m_patternMap.length) {
      int patternMap[]=m_patternMap;
      int len=m_patternMap.length;
      m_patternMap=new int[m_patternMapSize + 100];
      System.arraycopy(patternMap,0,m_patternMap,0,len);
    }
    if (!isStart) {
      m_patternMap[m_patternMapSize - 1]-=TARGETEXTRA;
    }
    m_patternMap[m_patternMapSize]=(m_compiler.getTokenQueueSize() - (isAttrName ? 1 : 0)) + TARGETEXTRA;
    m_patternMapSize++;
    isStart=false;
  }
  return isStart;
}

public boolean addOperationAtFirst(Operation operation){
  if (isRunning) {
    if (operationHandlerThreadHandler == null)     return false;
    return operationHandlerThreadHandler.postAtFrontOfQueue(new AndroidOperation(this,operation));
  }
 else {
    return operationQueue.add(new AndroidOperation(this,operation,AndroidOperation.Type.ATFIRST,null,0));
  }
}

public void testShiftLeft1(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int number=0;
  byte rBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.shiftLeft(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public static String toUnitbytes(long bytes){
  if (bytes < 0) {
    return "? " + GENERAL_UNIT_KILOBYTES;
  }
  long unitValue;
  String unitName;
  if (bytes < 0xA00000) {
    unitValue=0x400;
    unitName=GENERAL_UNIT_KILOBYTES;
  }
 else   if (bytes < 0x280000000L) {
    unitValue=0x100000;
    unitName=GENERAL_UNIT_MEGABYTES;
  }
 else   if (bytes < 0xA0000000000L) {
    unitValue=0x40000000;
    unitName=GENERAL_UNIT_GIGABYTES;
  }
 else {
    unitValue=0x10000000000L;
    unitName=GENERAL_UNIT_TERABYTES;
  }
  NumberFormat numberFormat;
  if ((double)bytes * 100 / unitValue < 99995)   numberFormat=NUMBER_FORMAT1;
 else   numberFormat=NUMBER_FORMAT0;
  try {
    return numberFormat.format((double)bytes / unitValue) + " " + unitName;
  }
 catch (  ArithmeticException ae) {
    return "0 " + unitName;
  }
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> result=new Vector<Option>();
  result.addElement(new Option("\tSpecifies list of columns to base outlier/extreme value detection\n" + "\ton. If an instance is considered in at least one of those\n" + "\tattributes an outlier/extreme value, it is tagged accordingly.\n"+ " 'first' and 'last' are valid indexes.\n"+ "\t(default none)","R",1,"-R <col1,col2-col4,...>"));
  result.addElement(new Option("\tThe factor for outlier detection.\n" + "\t(default: 3)","O",1,"-O <num>"));
  result.addElement(new Option("\tThe factor for extreme values detection.\n" + "\t(default: 2*Outlier Factor)","E",1,"-E <num>"));
  result.addElement(new Option("\tTags extreme values also as outliers.\n" + "\t(default: off)","E-as-O",0,"-E-as-O"));
  result.addElement(new Option("\tGenerates Outlier/ExtremeValue pair for each numeric attribute in\n" + "\tthe range, not just a single indicator pair for all the attributes.\n" + "\t(default: off)","P",0,"-P"));
  result.addElement(new Option("\tGenerates an additional attribute 'Offset' per Outlier/ExtremeValue\n" + "\tpair that contains the multiplier that the value is off the median.\n" + "\t   value = median + 'multiplier' * IQR\n"+ "Note: implicitely sets '-P'."+ "\t(default: off)","M",0,"-M"));
  result.addAll(Collections.list(super.listOptions()));
  return result.elements();
}

public static String changePassword(Connection conn,String userName,String password) throws Exception {
  PreparedStatement prep=conn.prepareStatement("UPDATE USERS SET PASSWORD=? WHERE NAME=?");
  prep.setString(1,password);
  prep.setString(2,userName);
  prep.executeUpdate();
  return password;
}

public Object remove(Object key){
  processQueue();
  return map.remove(Key.create(key,null));
}

protected Rectangle computePopupBounds(int px,int py,int pw,int ph){
  Toolkit toolkit=Toolkit.getDefaultToolkit();
  Rectangle screenBounds;
  GraphicsConfiguration gc=comboBox.getGraphicsConfiguration();
  Point p=new Point();
  SwingUtilities.convertPointFromScreen(p,comboBox);
  if (gc != null) {
    Insets screenInsets=toolkit.getScreenInsets(gc);
    screenBounds=gc.getBounds();
    screenBounds.width-=(screenInsets.left + screenInsets.right);
    screenBounds.height-=(screenInsets.top + screenInsets.bottom);
    screenBounds.x+=(p.x + screenInsets.left);
    screenBounds.y+=(p.y + screenInsets.top);
  }
 else {
    screenBounds=new Rectangle(p,toolkit.getScreenSize());
  }
  Rectangle rect=new Rectangle(px,py,pw,ph);
  if (py + ph > screenBounds.y + screenBounds.height && ph < screenBounds.height) {
    rect.y=-rect.height;
  }
  return rect;
}

public static Intent buildBackgroundShortcutIntent(File script,Parcelable iconResource){
  Intent intent=new Intent();
  intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT,buildStartInBackgroundIntent(script));
  intent.putExtra(Intent.EXTRA_SHORTCUT_NAME,script.getName());
  intent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,iconResource);
  return intent;
}

public static boolean isShown(final Actor actor){
  return actor != null && actor.getStage() != null;
}

public static void addListener(final DiagnosticListener listener){
  if (listener != null) {
    LISTENERS.add(listener);
  }
}

public void shuffleTrainingSet(){
  utils.shuffleList(TrainingFiles);
}

public NTLMAuthentication(boolean isProxy,URL url,PasswordAuthentication pw){
  super(isProxy ? PROXY_AUTHENTICATION : SERVER_AUTHENTICATION,AuthScheme.NTLM,url,"");
  init(pw);
}

public MessageChannel createMessageChannel(SIPRequest request,MessageProcessor mp,Hop nextHop) throws IOException {
  Host targetHost=new Host();
  targetHost.setHostname(nextHop.getHost());
  HostPort targetHostPort=new HostPort();
  targetHostPort.setHost(targetHost);
  targetHostPort.setPort(nextHop.getPort());
  MessageChannel returnChannel=mp.createMessageChannel(targetHostPort);
  return returnChannel;
}

public static byte[] generateMac(byte[] byteCipherText,SecretKey integrityKey) throws NoSuchAlgorithmException, InvalidKeyException {
  Mac sha256_HMAC=Mac.getInstance(HMAC_ALGORITHM);
  sha256_HMAC.init(integrityKey);
  return sha256_HMAC.doFinal(byteCipherText);
}

public void populateEditText(String query){
  String text=query.trim();
  setSearchString(text,true);
  dispatchStateChange(SearchViewState.SEARCH);
}

public static byte[] concat(byte[] b1,byte[] b2){
  byte[] out=new byte[b1.length + b2.length];
  System.arraycopy(b1,0,out,0,b1.length);
  System.arraycopy(b2,0,out,b1.length,b2.length);
  return out;
}

private void clipViewOnTheRight(Rect curViewBound,float curViewWidth,int right){
  curViewBound.right=(int)(right - mClipPadding);
  curViewBound.left=(int)(curViewBound.right - curViewWidth);
}

public static void putFloat(String property,float val){
  SIMBRAIN_PREFERENCES.putFloat(property,val);
}

public int hashCode(){
  return Arrays.hashCode(this.uid);
}

private void advanceRunState(int targetState){
  for (; ; ) {
    int c=ctl.get();
    if (runStateAtLeast(c,targetState) || ctl.compareAndSet(c,ctlOf(targetState,workerCountOf(c))))     break;
  }
}

public static final double[] copy(final double[] v){
  return Arrays.copyOf(v,v.length);
}

public void addAction(String action){
  Object[] args=new String[1];
  SimpleDateFormat sdf=new SimpleDateFormat(context.getString(R.string.dateFormat));
  args[0]=sdf.format(new Date());
  String timestamp=context.getString(R.string.timestamp,args);
  history.add(action + timestamp);
  notifyListeners(new PropertyChangeEvent(this,ActivityConstants.historyProperty,null,null));
}

private FilterOperationCodes(){
}

@Override public String toString(){
  StringBuffer text=new StringBuffer();
  if (m_trainInstances == null) {
    text.append("\tSymmetrical Uncertainty evaluator has not been built");
  }
 else {
    text.append("\tSymmetrical Uncertainty Ranking Filter");
    if (!m_missing_merge) {
      text.append("\n\tMissing values treated as seperate");
    }
  }
  text.append("\n");
  return text.toString();
}

public CharSequence subSequence(int start,int end){
  return substring(start,end);
}

private CreationTemplate toCreationTemplate(AttrSet t){
  Attr nameAttr=t.getAttribute(TEMPLATE_NAME);
  String name=null;
  if (nameAttr != null) {
    name=nameAttr.getValue();
  }
  Attr namingAttr=t.getAttribute(TEMPLATE_NAMINGATTRIBUTE);
  String namingAttribute=null;
  if (namingAttr != null) {
    namingAttribute=namingAttr.getValue();
  }
  Attr classAttr=t.getAttribute(TEMPLATE_JAVACLASS);
  String[] classNames=null;
  if (classAttr != null) {
    classNames=classAttr.getStringValues();
  }
  AttrSet required=decodeAttr(t.getAttribute(TEMPLATE_REQUIRED),"=");
  AttrSet optional=decodeAttr(t.getAttribute(TEMPLATE_OPTIONAL),"=");
  AttrSet validated=decodeAttr(t.getAttribute(TEMPLATE_VALIDATED),"=");
  CreationTemplate template=new CreationTemplate();
  ArrayList classes=new ArrayList();
  try {
    if (classNames != null) {
      for (int i=0; i < classNames.length; i++) {
        Class cls=Class.forName(classNames[i]);
        classes.add(cls);
      }
    }
    template=new CreationTemplate(name,required,optional,classes);
  }
 catch (  ClassNotFoundException e) {
    template=new CreationTemplate(name,required,optional);
  }
  if (validated != null) {
    template.setValidation(validated);
  }
  if (namingAttribute != null) {
    template.setNamingAttribute(namingAttribute);
  }
  return template;
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public void placeItem(ItemStack stack,BlockPos pos,World world,boolean centreItem){
  double offset=(centreItem) ? 0.5D : 0.0D;
  EntityItem entityitem=new EntityItem(world,(double)pos.getX() + offset,(double)pos.getY() + offset,(double)pos.getZ() + offset,stack);
  entityitem.motionX=0;
  entityitem.motionY=0;
  entityitem.motionZ=0;
  entityitem.setDefaultPickupDelay();
  world.spawnEntityInWorld(entityitem);
}

private E unlinkFirst(){
  Node<E> f=first;
  if (f == null)   return null;
  Node<E> n=f.next;
  E item=f.item;
  f.item=null;
  f.next=f;
  first=n;
  if (n == null)   last=null;
 else   n.prev=null;
  --count;
  notFull.signal();
  return item;
}

private <M extends ConfigurationClient,P>ManagedObject<M> createNewManagedObject(ManagedObjectDefinition<M,?> d,ManagedObjectPath<M,?> p,PropertyDefinition<P> namingPropertyDefinition,String name,Collection<PropertyException> exceptions){
  PropertySet childProperties=new PropertySet();
  for (  PropertyDefinition<?> pd : d.getAllPropertyDefinitions()) {
    try {
      createProperty(childProperties,p,pd);
    }
 catch (    PropertyException e) {
      if (exceptions != null) {
        exceptions.add(e);
      }
    }
  }
  if (namingPropertyDefinition != null) {
    P value=namingPropertyDefinition.decodeValue(name);
    childProperties.setPropertyValues(namingPropertyDefinition,Collections.singleton(value));
  }
  return newInstance(d,p,childProperties,false,namingPropertyDefinition);
}

public abstract void initializeConstraints(Step step,Settings settings);

public void testEmptyCommits() throws Exception {
  clearIndexWithReplication();
  index(masterClient,"id","1","name","empty1");
  emptyUpdate(masterClient,"commit","true");
  pullFromMasterToSlave();
  rQuery(1,"name:empty1",slaveClient);
  assertVersions(masterClient,slaveClient);
  emptyUpdate(masterClient,"commit","true");
  pullFromMasterToSlave();
  index(masterClient,"id","2","name","empty2");
  emptyUpdate(masterClient,"commit","true");
  pullFromMasterToSlave();
  rQuery(1,"name:empty2",slaveClient);
  assertVersions(masterClient,slaveClient);
  index(masterClient,"id","3","name","empty3");
  emptyUpdate(masterClient,"commit","true","openSearcher","false");
  pullFromMasterToSlave();
  rQuery(0,"name:empty3",masterClient);
  rQuery(1,"name:empty3",slaveClient);
  index(masterClient,"id","4","name","empty4");
  emptyUpdate(masterClient,"commit","true");
  pullFromMasterToSlave();
  String q="name:(empty1 empty2 empty3 empty4)";
  rQuery(4,q,masterClient);
  rQuery(4,q,slaveClient);
  assertVersions(masterClient,slaveClient);
}

private byte[] decrypt(byte[] d,int start,int end,int key,int skip){
  if (end - start - skip < 0) {
    skip=0;
  }
  byte[] o=new byte[end - start - skip];
  int r=key;
  int ipos;
  int c1=52845;
  int c2=22719;
  for (ipos=start; ipos < end; ipos++) {
    int c=d[ipos] & 0xff;
    int p=(c ^ (r >> 8)) & 0xff;
    r=((c + r) * c1 + c2) & 0xffff;
    if (ipos - start - skip >= 0) {
      o[ipos - start - skip]=(byte)p;
    }
  }
  return o;
}

public static void appendInstruction(OFFlowMod.Builder fmb,OFInstruction inst){
  List<OFInstruction> newIl=new ArrayList<OFInstruction>();
  List<OFInstruction> oldIl=fmb.getInstructions();
  if (oldIl != null) {
    newIl.addAll(fmb.getInstructions());
  }
  for (  OFInstruction i : newIl) {
    if (i.getType() == inst.getType()) {
      newIl.remove(i);
    }
  }
  newIl.add(inst);
  fmb.setInstructions(newIl);
}

@Override public final void insertAll(DBIDs ids){
  if (ids.isEmpty() || (ids.size() == 1)) {
    return;
  }
  if (canBulkLoad()) {
    List<RdKNNEntry> leafs=new ArrayList<>(ids.size());
    for (DBIDIter iter=ids.iter(); iter.valid(); iter.advance()) {
      leafs.add(createNewLeafEntry(DBIDUtil.deref(iter)));
    }
    bulkLoad(leafs);
  }
 else {
    for (DBIDIter iter=ids.iter(); iter.valid(); iter.advance()) {
      insert(iter);
    }
  }
  doExtraIntegrityChecks();
}

public void testCase14(){
  byte rBytes[]={1};
  BigInteger aNumber=BigInteger.ONE;
  BigInteger bNumber=BigInteger.ONE;
  BigInteger result=aNumber.divide(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public abstract int compare(String source,String target);

public static byte[] asUnsignedByteArray(BigInteger value){
  byte[] bytes=value.toByteArray();
  if (bytes[0] == 0) {
    byte[] tmp=new byte[bytes.length - 1];
    System.arraycopy(bytes,1,tmp,0,tmp.length);
    return tmp;
  }
  return bytes;
}

public static boolean isSupplemental(int c){
  return (c >= 0x10000 && c <= 0x10FFFF);
}

private final String _decodeShortUnicodeName(int len) throws IOException {
  int outPtr=0;
  char[] outBuf=_textBuffer.emptyAndGetCurrentSegment();
  int inPtr=_inputPtr;
  _inputPtr+=len;
  final int[] codes=SmileConstants.sUtf8UnitLengths;
  final byte[] inBuf=_inputBuffer;
  for (int end=inPtr + len; inPtr < end; ) {
    int i=inBuf[inPtr++] & 0xFF;
    int code=codes[i];
    if (code != 0) {
switch (code) {
case 1:
        i=((i & 0x1F) << 6) | (inBuf[inPtr++] & 0x3F);
      break;
case 2:
    i=((i & 0x0F) << 12) | ((inBuf[inPtr++] & 0x3F) << 6) | (inBuf[inPtr++] & 0x3F);
  break;
case 3:
i=((i & 0x07) << 18) | ((inBuf[inPtr++] & 0x3F) << 12) | ((inBuf[inPtr++] & 0x3F) << 6)| (inBuf[inPtr++] & 0x3F);
i-=0x10000;
outBuf[outPtr++]=(char)(0xD800 | (i >> 10));
i=0xDC00 | (i & 0x3FF);
break;
default :
_reportError("Invalid byte " + Integer.toHexString(i) + " in short Unicode text block");
}
}
outBuf[outPtr++]=(char)i;
}
return _textBuffer.setCurrentAndReturn(outPtr);
}

public void saveDeviceProfile(@Nonnull String user,@Nonnull String realm,@Nonnull PushDeviceSettings deviceSettings) throws AuthLoginException {
  Reject.ifNull(user,realm,deviceSettings);
  try {
    devicesDao.saveDeviceProfiles(user,realm,jsonUtils.toJsonValues(Collections.singletonList(deviceSettings)));
  }
 catch (  IOException e) {
    debug.error("Pusher.createDeviceProfile(): Unable to save device profile for user {} in realm {}",user,realm,e);
    throw new AuthLoginException(e);
  }
}

public RankingImageListProvider inDays(int days){
  mTime=Integer.toString(days) + "d";
  return this;
}

public void removeUpdateListener(AnimatorUpdateListener listener){
  if (mUpdateListeners == null) {
    return;
  }
  mUpdateListeners.remove(listener);
  if (mUpdateListeners.size() == 0) {
    mUpdateListeners=null;
  }
}

public final void dbUnavailable(final boolean alarmUp,final String exceptionMsg,final String dbInfo){
  if (alarmUp == FallbackAlarmsInterface.ACTIVATED) {
    ArrayList recipients=new ArrayList();
    MailDetailsBean mailDetails=new MailDetailsBean();
    mailDetails.setSender("mruizgar@cern.ch");
    recipients.add("mruizgar@cern.ch");
    mailDetails.setToRecipients(recipients);
    mailDetails.setSubject("DB Unavailable");
    mailDetails.setMessage("The DB connection to " + dbInfo + "could not be established due to: "+ exceptionMsg);
    mailDetails.setServer("cernmx.cern.ch");
    SMTPMailSender mailSender=new SMTPMailSender();
    try {
      mailSender.sendMail(mailDetails);
    }
 catch (    MailSenderException e) {
      LOG.debug(e.getMessage());
    }
  }
}

public static String tidyString(String string){
  if (string.matches(".*?\\.$")) {
    return string;
  }
 else {
    return string.replaceAll("(\\p{Punct}+\\z)|(\\A\\p{Punct}+)","");
  }
}

public Select<T> sortDesc(String... columns){
  for (  String column : columns) {
    mSortingOrderList.add(column + " DESC");
  }
  return this;
}

public String toString(){
  StringBuilder result=new StringBuilder();
  result.append('@');
  result.append(klazz.getName());
  result.append('(');
  for (int i=0; i < elements.length; ++i) {
    if (i != 0) {
      result.append(", ");
    }
    result.append(elements[i]);
  }
  result.append(')');
  return result.toString();
}

public void testUlpNeg(){
  String a="-3736186567876876578956958765675671119238118911893939591735";
  int aScale=45;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal result=aNumber.ulp();
  String res="1E-45";
  int resScale=45;
  assertEquals("incorrect value",res,result.toString());
  assertEquals("incorrect scale",resScale,result.scale());
}

public LogRecord(Level level,String msg){
  level.getClass();
  this.level=level;
  message=msg;
  sequenceNumber=globalSequenceNumber.getAndIncrement();
  threadID=defaultThreadID();
  millis=System.currentTimeMillis();
  needToInferCaller=true;
}

public Matrix correlation(){
  final Matrix corr=covariance();
  final Array v=corr.diagonal();
  for (int i=0; i < dimension_; i++) {
    for (int j=0; j < dimension_; j++) {
      if (i == j) {
        if (v.$[v._(i)] == 0.0) {
          corr.$[corr._(i,j)]=1.0;
        }
 else {
          corr.$[corr._(i,j)]*=1.0 / Math.sqrt(v.$[v._(i)] * v.$[v._(j)]);
        }
      }
 else {
        if (v.$[v._(i)] == 0.0 && v.$[v._(j)] == 0) {
          corr.$[corr._(i,j)]=1.0;
        }
 else         if (v.$[v._(i)] == 0.0 || v.$[v._(j)] == 0.0) {
          corr.$[corr._(i,j)]=0.0;
        }
 else {
          corr.$[corr._(i,j)]*=1.0 / Math.sqrt(v.$[v._(i)] * v.$[v._(j)]);
        }
      }
    }
  }
  return corr;
}

@NotNull public static SaveDirectory from(File file) throws FileNotFoundException {
  File currentFile=file;
  SaveDirectory result=null;
  if (currentFile == null) {
  }
 else {
    result=createValidSaveDirectory(currentFile);
    currentFile=currentFile.getParentFile();
    if (result != null) {
      return result;
    }
 else     if (currentFile == null) {
    }
 else {
      result=createValidSaveDirectory(currentFile);
      currentFile=currentFile.getParentFile();
      if (result != null) {
        return result;
      }
 else {
      }
    }
  }
  throw new FileNotFoundException("unable to load save directory: " + file);
}

public Serializer serializer(){
  return serializer;
}

private void addIncludedResources(JsonApiDocument jsonApiDocument,PersistentResource rec,List<String> requestedRelationPaths){
  requestedRelationPaths.forEach(null);
}

protected VideoDTO extractOneVideoFromCursor(Cursor cursor){
  if (videoIdCol == -1) {
    videoIdCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media._ID);
    videoTitleCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.TITLE);
    videoDisplayNameCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DISPLAY_NAME);
    videoDescriptionCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DESCRIPTION);
    videoBucketIdCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.BUCKET_ID);
    videoBucketDisplayNameCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.BUCKET_DISPLAY_NAME);
    videoDataCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
    videoMimeCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.MIME_TYPE);
    videoResolutionCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.RESOLUTION);
    videoSizeCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.SIZE);
    videoDateAddedCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATE_ADDED);
    videoDateTakenCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATE_TAKEN);
    videoDateModifyCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATE_MODIFIED);
    videoLatitudeCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.LATITUDE);
    videoLongitudeCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.LONGITUDE);
    videoAlbumCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.ALBUM);
    videoArtistCol=cursor.getColumnIndexOrThrow(MediaStore.Video.Media.ARTIST);
  }
  VideoDTO video=new VideoDTO();
  video.setId(cursor.getLong(videoIdCol));
  video.setTitle(cursor.getString(videoTitleCol));
  video.setDisplayName(cursor.getString(videoDisplayNameCol));
  video.setDescription(cursor.getString(videoDescriptionCol));
  video.setBucketId(cursor.getString(videoBucketIdCol));
  video.setBucketDisplayName(cursor.getString(videoBucketDisplayNameCol));
  video.setUri(cursor.getString(videoDataCol));
  video.setMimeType(cursor.getString(videoMimeCol));
  video.setSize(cursor.getLong(videoSizeCol));
  video.setAddedDate(new Date(cursor.getLong(videoDateAddedCol)));
  video.setTakenDate(new Date(cursor.getLong(videoDateTakenCol)));
  video.setModifyDate(new Date(cursor.getLong(videoDateModifyCol)));
  video.setLatitude(cursor.getDouble(videoLatitudeCol));
  video.setLongitude(cursor.getDouble(videoLongitudeCol));
  video.setAlbum(cursor.getString(videoAlbumCol));
  video.setArtist(cursor.getString(videoArtistCol));
  String resolution=cursor.getString(videoResolutionCol);
  if (resolution != null) {
    try {
      String[] res=resolution.split("x");
      int width=Integer.parseInt(res[0]);
      int height=Integer.parseInt(res[1]);
      video.setWidth(width);
      video.setHeight(height);
    }
 catch (    Exception e) {
      Log.w(TAG,String.format("Failed to parse resolution of video(id=%d, title=%s, displayName=%s)",video.getId(),video.getTitle(),video.getDisplayName()),e);
    }
  }
  return video;
}

private void shiftSegments(int fromIdx,int offset){
  for (  Element element : elements) {
    if (element.end.left > fromIdx) {
      shiftSegment(element.start,fromIdx,offset);
      shiftSegment(element.end,fromIdx,offset);
      if (element.text != null) {
        for (        Segment textSegment : element.text) {
          shiftSegment(textSegment,fromIdx,offset);
        }
      }
    }
  }
}

public RefUpdate.Result modifyFile(ChangeEdit edit,String file,RawInput content) throws AuthException, InvalidChangeOperationException, IOException {
  return modify(TreeOperation.CHANGE_ENTRY,edit,file,null,content);
}

private void startDocument(final boolean multiObjectMode) throws SAXException {
  if (depth == 0) {
    contentHandler.startDocument();
    if (multiObjectMode) {
      depth++;
    }
  }
}

public void flush() throws IOException {
  writer.flush();
}

private static ArrayList<GridCollisionJobContextWrapper> slice(Collection<CollisionJobContext> src,int num){
  ArrayList<GridCollisionJobContextWrapper> slice=new ArrayList<>();
  Iterator<CollisionJobContext> iter=src.iterator();
  for (int i=0; i < num && iter.hasNext(); i++)   slice.add(new GridCollisionJobContextWrapper(iter.next(),i));
  return slice;
}

protected void calculateFormatter(float min,float max){
  float reference=0f;
  if (mData == null || mData.getXValCount() < 2) {
    reference=Math.max(Math.abs(min),Math.abs(max));
  }
 else {
    reference=Math.abs(max - min);
  }
  int digits=Utils.getDecimals(reference);
  mDefaultFormatter=new DefaultValueFormatter(digits);
}

public Request add(Request request){
  request.setRequestQueue(this);
synchronized (mCurrentRequests) {
    mCurrentRequests.add(request);
  }
  request.setSequence(getSequenceNumber());
  request.addMarker("add-to-queue");
  if (!request.shouldCache()) {
    mNetworkQueue.add(request);
    return request;
  }
synchronized (mWaitingRequests) {
    String cacheKey=request.getCacheKey();
    if (mWaitingRequests.containsKey(cacheKey)) {
      Queue<Request> stagedRequests=mWaitingRequests.get(cacheKey);
      if (stagedRequests == null) {
        stagedRequests=new LinkedList<Request>();
      }
      stagedRequests.add(request);
      mWaitingRequests.put(cacheKey,stagedRequests);
      if (VolleyLog.DEBUG) {
        VolleyLog.v("Request for cacheKey=%s is in flight, putting on hold.",cacheKey);
      }
    }
 else {
      mWaitingRequests.put(cacheKey,null);
      mCacheQueue.add(request);
    }
    return request;
  }
}

public String lookup(String data){
  Iterator<String> it=map.getPrefixedBy(data);
  if (!it.hasNext())   return null;
  return it.next();
}

public static Object loadModule(String homedir,ScriptEngine engine,String name) throws FileNotFoundException, ScriptException {
  HashMap<String,File> mp=(HashMap<String,File>)engine.get("__MODULES");
  Object ret=load(mp.get(name),engine);
  return ret;
}

@Override public void modifyVariableId(String nodeId,String newId){
  Map<Assignment,UtilityEstimate> utilities2=new HashMap<Assignment,UtilityEstimate>();
  for (  Assignment a : table.keySet()) {
    Assignment b=new Assignment();
    for (    String var : a.getVariables()) {
      String newVar=(var.equals(nodeId)) ? newId : var;
      b.addPair(newVar,a.getValue(var));
    }
    utilities2.put(b,table.get(a));
  }
  table=utilities2;
}

public static long[] truncateI(long[] v,int len){
  final int zap=(v.length * Long.SIZE) - len;
  final int zapWords=(zap >>> LONG_LOG2_SIZE);
  final int zapbits=zap & LONG_LOG2_MASK;
  Arrays.fill(v,v.length - zapWords,v.length,0);
  if (zapbits > 0) {
    v[v.length - zapWords - 1]&=(LONG_ALL_BITS >>> zapbits);
  }
  return v;
}

public void test_noResourcesDoesNotWait_predeclareLocks_synchronousQueue() throws Exception {
  final Properties properties=new Properties();
  final int ntasks=1000;
  final int corePoolSize=5;
  final int maxPoolSize=ntasks;
  properties.setProperty(TestOptions.SYNCHRONOUS_QUEUE,"true");
  properties.setProperty(TestOptions.CORE_POOL_SIZE,"" + corePoolSize);
  properties.setProperty(TestOptions.MAX_POOL_SIZE,"" + maxPoolSize);
  properties.setProperty(TestOptions.NTASKS,"" + ntasks);
  properties.setProperty(TestOptions.NRESOURCES,"10");
  properties.setProperty(TestOptions.MIN_LOCKS,"0");
  properties.setProperty(TestOptions.MAX_LOCKS,"0");
  properties.setProperty(TestOptions.PREDECLARE_LOCKS,"true");
  properties.setProperty(TestOptions.SORT_LOCK_REQUESTS,"true");
  final Result result=doComparisonTest(properties);
  assertEquals("nsuccess",ntasks,Integer.parseInt(result.get("nsuccess")));
  final int maxrunning=Integer.parseInt(result.get("maxrunning"));
  assertTrue("maxrunning=" + maxrunning,corePoolSize <= maxrunning);
}

private void positionAtCentralDirectory() throws IOException {
  boolean found=false;
  long off=archive.length() - MIN_EOCD_SIZE;
  if (off >= 0) {
    archive.seek(off);
    byte[] sig=JBZipOutputStream.EOCD_SIG;
    int curr=archive.read();
    while (curr != -1) {
      if (curr == sig[POS_0]) {
        curr=archive.read();
        if (curr == sig[POS_1]) {
          curr=archive.read();
          if (curr == sig[POS_2]) {
            curr=archive.read();
            if (curr == sig[POS_3]) {
              found=true;
              break;
            }
          }
        }
      }
      archive.seek(--off);
      curr=archive.read();
    }
  }
  if (!found) {
    throw new ZipException("archive is not a ZIP archive");
  }
  archive.seek(off + CFD_LOCATOR_OFFSET);
  byte[] cfdOffset=new byte[WORD];
  archive.readFully(cfdOffset);
  currentcfdfoffset=ZipLong.getValue(cfdOffset);
  archive.seek(currentcfdfoffset);
}

public List query(double x1,double x2){
  return super.query(new Interval(Math.min(x1,x2),Math.max(x1,x2)));
}

public static boolean isNull(Object object){
  return object != null && object == NULL_CACHE.get(object.getClass());
}

public static void createDestinationFolder(String path){
  File fpath=new File(path);
  fpath.mkdirs();
}

public void removeAll(){
  log.debug("Idle connections count = " + connectionToAdded.size());
  connectionToAdded.clear();
}

public float readFloat() throws IOException {
  return primitiveTypes.readFloat();
}

public synchronized static int insertLuaState(LuaState L){
  int i;
  for (i=0; i < states.size(); i++) {
    LuaState state=(LuaState)states.get(i);
    if (state != null) {
      if (state.getCPtrPeer() == L.getCPtrPeer())       return i;
    }
  }
  i=getNextStateIndex();
  states.set(i,L);
  return i;
}

public PhoneNumberValidator(@NonNull final CharSequence errorMessage){
  super(errorMessage,REGEX);
}

@Override public int hashCode(){
  return fullyQualifiedName.hashCode();
}

public static void putString2bytes(byte[] destbytes,String srcString,int destOffset,int srcOffset,int count){
  for (int i=0; i < count; i++) {
    destbytes[count + i]=srcString.getBytes()[i];
  }
}

public Point2D convertWindowToReference(Point2D apt){
  if (scrollBackReferenceRect == null)   return null;
 else   return new Point2D.Double((apt.getX() - scrollBackReferenceRect.getX()) / scrollBackReferenceRect.getWidth(),(apt.getY() - scrollBackReferenceRect.getY()) / scrollBackReferenceRect.getHeight());
}

public void clear(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    for (    TenantQueue q : qs.values()) {
      q.clear();
    }
  }
  finally {
    lock.unlock();
  }
}

public void printUsage(PrintWriter pw,int width,String cmdLineSyntax){
  int argPos=cmdLineSyntax.indexOf(' ') + 1;
  printWrapped(pw,width,defaultSyntaxPrefix.length() + argPos,defaultSyntaxPrefix + cmdLineSyntax);
}

public boolean hasNameValue(String name){
  return nameValueMap.containsKey(name.toLowerCase());
}

private void addNewLine(){
  if (addLineDialog == null) {
    addLineDialog=new AddParallelLineDialog();
  }
  addLineDialog.setChartEngine(engine);
  addLineDialog.showDialog();
  if (horizontalLineRadiobutton.isSelected()) {
    setHorizontalLineSelected();
  }
 else   if (verticalLineRadiobutton.isSelected()) {
    setVerticalLineSelected();
  }
}

public final static <T>CompletableFuture<List<T>> streamToCompletableFuture(final Stream<T> stream){
  return CompletableFuture.completedFuture(stream.collect(CyclopsCollectors.toListX()));
}

@SuppressWarnings("unchecked") public static boolean isGzipSupported(final HttpServletRequest request){
  if (request != null) {
    final Enumeration<String> headerNames=request.getHeaderNames();
    if (headerNames != null) {
      while (headerNames.hasMoreElements()) {
        final String headerName=headerNames.nextElement();
        final Matcher m=PATTERN_ACCEPT_ENCODING.matcher(headerName);
        if (m.find()) {
          final String headerValue=request.getHeader(headerName);
          final Matcher mValue=PATTERN_GZIP.matcher(headerValue);
          return mValue.find();
        }
      }
    }
  }
  return false;
}

private boolean isLanguageAllowed(String languageKey){
  if (allowedLanguages == null)   return true;
  return allowedLanguages.contains(languageKey);
}

public List<Boundary> populateWard(final Long zoneId){
  List<Boundary> wardList=new LinkedList<Boundary>();
  try {
    wardList=boundaryService.getChildBoundariesByBoundaryId(zoneId);
  }
 catch (  final Exception e) {
    LOGGER.error("Error while loading warda - wards." + e.getMessage());
    throw new ApplicationRuntimeException("Unable to load ward information",e);
  }
  return wardList;
}

static Object newInstance(String className,ClassLoader cl,boolean doFallback) throws ConfigurationError {
  try {
    Class providerClass=findProviderClass(className,cl,doFallback);
    Object instance=providerClass.newInstance();
    debugPrintln("created new instance of " + providerClass + " using ClassLoader: "+ cl);
    return instance;
  }
 catch (  ClassNotFoundException x) {
    throw new ConfigurationError("Provider " + className + " not found",x);
  }
catch (  Exception x) {
    throw new ConfigurationError("Provider " + className + " could not be instantiated: "+ x,x);
  }
}

public void handleRequest(List arguments){
  try {
    InstallLogger migrateLog=new InstallLogger(STR_MIGRATE);
    MultipleMigrateDriver driver=new MultipleMigrateDriver();
    if (arguments.isEmpty()) {
      Debug.log("MigrateHandler: invoked with 0 arguments.");
      driver.migrate(migrateLog);
    }
 else     if (arguments.size() == 2) {
      Debug.log("MigrateHandler: invoked with 1 or more arguments.");
      driver.migrate(migrateLog);
    }
  }
 catch (  InstallAbortException ia) {
    Debug.log("MigrateHandler: User Requested Abort ",ia);
    Console.printlnRawText(ia.getMessage());
  }
catch (  InstallException ex) {
    Debug.log("MigrateHandler: Failed to process migrate request ",ex);
    printConsoleMessage(LOC_HR_ERR_MIGRATE,new Object[]{ex.getMessage()});
  }
}

@Override public String toString(){
  StringBuffer result=new StringBuffer();
  for (int i=0; i < data.length; i++) {
    result.append((i == 0 ? "" : ",") + data[i]);
  }
  return result.toString();
}

public static SynchronizerStatus makeRunningStatus(){
  return new SynchronizerStatus(Status.RUNNING,new Date(),null);
}

public static Iterable<File> applyCwd(File cwd,Iterable<File> files){
  if (files != null) {
    List<File> result=new ArrayList<File>();
    for (    File f : files) {
      result.add(applyCwd(cwd,f));
    }
    return result;
  }
 else {
    return null;
  }
}

private void close(boolean force){
  if (closeGuard.compareAndSet(false,true))   hadoop.close(force);
}

MutableBigInteger divideKnuth(MutableBigInteger b,MutableBigInteger quotient,boolean needRemainder){
  if (b.intLen == 0)   throw new ArithmeticException("BigInteger divide by zero");
  if (intLen == 0) {
    quotient.intLen=quotient.offset=0;
    return needRemainder ? new MutableBigInteger() : null;
  }
  int cmp=compare(b);
  if (cmp < 0) {
    quotient.intLen=quotient.offset=0;
    return needRemainder ? new MutableBigInteger(this) : null;
  }
  if (cmp == 0) {
    quotient.value[0]=quotient.intLen=1;
    quotient.offset=0;
    return needRemainder ? new MutableBigInteger() : null;
  }
  quotient.clear();
  if (b.intLen == 1) {
    int r=divideOneWord(b.value[b.offset],quotient);
    if (needRemainder) {
      if (r == 0)       return new MutableBigInteger();
      return new MutableBigInteger(r);
    }
 else {
      return null;
    }
  }
  if (intLen >= KNUTH_POW2_THRESH_LEN) {
    int trailingZeroBits=Math.min(getLowestSetBit(),b.getLowestSetBit());
    if (trailingZeroBits >= KNUTH_POW2_THRESH_ZEROS * 32) {
      MutableBigInteger a=new MutableBigInteger(this);
      b=new MutableBigInteger(b);
      a.rightShift(trailingZeroBits);
      b.rightShift(trailingZeroBits);
      MutableBigInteger r=a.divideKnuth(b,quotient);
      r.leftShift(trailingZeroBits);
      return r;
    }
  }
  return divideMagnitude(b,quotient,needRemainder);
}

public static Cache.Entry makeRandomCacheEntry(byte[] data,boolean isExpired,boolean needsRefresh){
  Random random=new Random();
  Cache.Entry entry=new Cache.Entry();
  if (data != null) {
    entry.data=data;
  }
 else {
    entry.data=new byte[random.nextInt(1024)];
  }
  entry.etag=String.valueOf(random.nextLong());
  entry.lastModified=random.nextLong();
  entry.ttl=isExpired ? 0 : Long.MAX_VALUE;
  entry.softTtl=needsRefresh ? 0 : Long.MAX_VALUE;
  return entry;
}

@SuppressWarnings("unchecked") public void insert(int id,Comparable<E> priority){
  int i;
  i=++_n;
  ElementH p=new ElementH();
  while (i > 1) {
    int pIdx=i / 2;
    ElementH eIdx=(ElementH)_elements[pIdx];
    p.id=eIdx.id;
    p.priority=eIdx.priority;
    if (priority.compareTo((E)p.priority) > 0) {
      break;
    }
    ElementH ei=(ElementH)_elements[i];
    ei.id=p.id;
    ei.priority=p.priority;
    _pos[p.id]=i;
    i=pIdx;
  }
  ElementH ei=(ElementH)_elements[i];
  ei.id=id;
  ei.priority=priority;
  _pos[id]=i;
}

ExternalProblem(Socket socket) throws IOException {
  this(socket.getInputStream(),socket.getOutputStream());
}

private static void stopGC(){
  gcShouldLoop=false;
synchronized (LOCK) {
    LOCK.notify();
  }
}

public final void insertElementAt(int value,int at){
  if ((m_firstFree + 1) >= m_mapSize) {
    m_mapSize+=m_blocksize;
    int newMap[]=new int[m_mapSize];
    System.arraycopy(m_map,0,newMap,0,m_firstFree + 1);
    m_map=newMap;
  }
  if (at <= (m_firstFree - 1)) {
    System.arraycopy(m_map,at,m_map,at + 1,m_firstFree - at);
  }
  m_map[at]=value;
  m_firstFree++;
}

public static @Nullable RequestBody createGzip(final MediaType mediaType,final String body){
  ByteArrayOutputStream gzipByteArrayOutputStream=new ByteArrayOutputStream();
  try {
    OutputStream gzipOutputStream=new GZIPOutputStream(gzipByteArrayOutputStream);
    gzipOutputStream.write(body.getBytes());
    gzipOutputStream.close();
  }
 catch (  IOException e) {
    return null;
  }
  return RequestBody.create(mediaType,gzipByteArrayOutputStream.toByteArray());
}

private void processTSBK(TSBKMessage tsbk){
  broadcast(new DecoderStateEvent(this,Event.CONTINUATION,State.CONTROL));
  if (tsbk.getVendor() == Vendor.STANDARD) {
switch (tsbk.getOpcode()) {
case ADJACENT_STATUS_BROADCAST:
      if (tsbk instanceof AdjacentStatusBroadcast) {
        IAdjacentSite ias=(IAdjacentSite)tsbk;
        mNeighborMap.put(ias.getUniqueID(),ias);
        updateSystem(ias.getSystemID());
      }
    break;
case ACKNOWLEDGE_RESPONSE:
  processTSBKResponse(tsbk);
break;
case AUTHENTICATION_COMMAND:
processTSBKCommand(tsbk);
break;
case CALL_ALERT:
processTSBKPage(tsbk);
break;
case DENY_RESPONSE:
processTSBKResponse(tsbk);
break;
case EXTENDED_FUNCTION_COMMAND:
processTSBKCommand(tsbk);
break;
case GROUP_AFFILIATION_QUERY:
processTSBKQuery(tsbk);
break;
case GROUP_AFFILIATION_RESPONSE:
processTSBKResponse(tsbk);
break;
case GROUP_DATA_CHANNEL_ANNOUNCEMENT:
case GROUP_DATA_CHANNEL_ANNOUNCEMENT_EXPLICIT:
processTSBKDataChannelAnnouncement(tsbk);
break;
case GROUP_DATA_CHANNEL_GRANT:
case GROUP_VOICE_CHANNEL_GRANT:
case GROUP_VOICE_CHANNEL_GRANT_UPDATE:
case GROUP_VOICE_CHANNEL_GRANT_UPDATE_EXPLICIT:
case INDIVIDUAL_DATA_CHANNEL_GRANT:
case TELEPHONE_INTERCONNECT_VOICE_CHANNEL_GRANT:
case TELEPHONE_INTERCONNECT_VOICE_CHANNEL_GRANT_UPDATE:
case UNIT_TO_UNIT_VOICE_CHANNEL_GRANT:
case UNIT_TO_UNIT_VOICE_CHANNEL_GRANT_UPDATE:
processTSBKChannelGrant(tsbk);
break;
case IDENTIFIER_UPDATE_NON_VUHF:
case IDENTIFIER_UPDATE_VHF_UHF_BANDS:
IdentifierUpdate iu=(IdentifierUpdate)tsbk;
if (!mBands.containsKey(iu.getIdentifier())) {
mBands.put(iu.getIdentifier(),iu);
}
break;
case LOCATION_REGISTRATION_RESPONSE:
case UNIT_DEREGISTRATION_ACKNOWLEDGE:
processTSBKResponse(tsbk);
break;
case MESSAGE_UPDATE:
processTSBKMessage(tsbk);
break;
case NETWORK_STATUS_BROADCAST:
mNetworkStatus=(module.decode.p25.message.tsbk.osp.control.NetworkStatusBroadcast)tsbk;
break;
case PROTECTION_PARAMETER_UPDATE:
processTSBKResponse(tsbk);
break;
case QUEUED_RESPONSE:
processTSBKResponse(tsbk);
break;
case RADIO_UNIT_MONITOR_COMMAND:
processTSBKCommand(tsbk);
break;
case RFSS_STATUS_BROADCAST:
processTSBKRFSSStatus((RFSSStatusBroadcast)tsbk);
break;
case ROAMING_ADDRESS_COMMAND:
processTSBKCommand(tsbk);
break;
case SECONDARY_CONTROL_CHANNEL_BROADCAST:
module.decode.p25.message.tsbk.osp.control.SecondaryControlChannelBroadcast sccb=(module.decode.p25.message.tsbk.osp.control.SecondaryControlChannelBroadcast)tsbk;
if (sccb.getDownlinkFrequency1() > 0) {
mSecondaryControlChannels.add(sccb);
}
break;
case SNDCP_DATA_CHANNEL_ANNOUNCEMENT_EXPLICIT:
mSNDCPDataChannel=(SNDCPDataChannelAnnouncementExplicit)tsbk;
break;
case SNDCP_DATA_CHANNEL_GRANT:
processTSBKChannelGrant(tsbk);
break;
case STATUS_QUERY:
processTSBKQuery(tsbk);
break;
case STATUS_UPDATE:
processTSBKResponse(tsbk);
break;
case TELEPHONE_INTERCONNECT_ANSWER_REQUEST:
case UNIT_TO_UNIT_ANSWER_REQUEST:
processTSBKPage(tsbk);
break;
case UNIT_REGISTRATION_COMMAND:
processTSBKCommand(tsbk);
break;
case UNIT_REGISTRATION_RESPONSE:
processTSBKResponse(tsbk);
break;
default :
break;
}
}
 else if (tsbk.getVendor() == Vendor.MOTOROLA) {
processMotorolaTSBK((MotorolaTSBKMessage)tsbk);
}
}

public XintroActivityBuilder removeFragment(int fragmentPos){
  introFragmentModelList.remove(fragmentPos);
  return this;
}

public boolean update(){
  return update;
}

public TreeViewerBuilder(Composite parent,int style){
  mappings=Collections.emptyMap();
  checkable=(style & SWT.CHECK) == SWT.CHECK;
  if (checkable) {
    viewer=new CheckboxTreeViewer(parent,style);
  }
 else {
    viewer=new TreeViewer(parent,style);
  }
  ColumnViewerToolTipSupport.enableFor(viewer,ToolTip.NO_RECREATE);
}

@Override public void write(byte[] buffer,int offset,int count) throws IOException {
synchronized (intThread) {
    int avail=(wroteIndex - dataEndIndex + data.length) % data.length;
    if (avail == 0)     avail=data.length;
    if (avail < count) {
      throw new IOException("Buffer overrun, have " + avail + " bytes available and want to write "+ count);
    }
    if (count > data.length - dataEndIndex) {
      int firstPart=data.length - dataEndIndex;
      int secondPart=count - firstPart;
      System.arraycopy(buffer,offset,data,dataEndIndex,firstPart);
      System.arraycopy(buffer,offset + firstPart,data,0,secondPart);
      dataEndIndex=secondPart;
    }
 else {
      System.arraycopy(buffer,offset,data,dataEndIndex,count);
      dataEndIndex+=count;
    }
    intThread.notify();
  }
}

public void pause(){
  pauseLock.lock();
  try {
    paused=true;
  }
  finally {
    pauseLock.unlock();
  }
}

public void addToConsolitatedMsg(final String message){
  if (consolidatedMessage != null && consolidatedMessage.length() > 0) {
    consolidatedMessage=consolidatedMessage + "<br>";
  }
  consolidatedMessage=consolidatedMessage + message;
}

private static byte[] readClass(final InputStream is,boolean close) throws IOException {
  if (is == null) {
    throw new IOException("Class not found");
  }
  try {
    byte[] b=new byte[is.available()];
    int len=0;
    while (true) {
      int n=is.read(b,len,b.length - len);
      if (n == -1) {
        if (len < b.length) {
          byte[] c=new byte[len];
          System.arraycopy(b,0,c,0,len);
          b=c;
        }
        return b;
      }
      len+=n;
      if (len == b.length) {
        int last=is.read();
        if (last < 0) {
          return b;
        }
        byte[] c=new byte[b.length + 1000];
        System.arraycopy(b,0,c,0,len);
        c[len++]=(byte)last;
        b=c;
      }
    }
  }
  finally {
    if (close) {
      is.close();
    }
  }
}

public void sort(final Comparator<? super T> comparator){
synchronized (mLock) {
    Collections.sort(mList,comparator);
  }
  notifyDataSetChanged();
}

public String cropKeepFinalCharacter(String string,char finalChar){
  String cropped=crop(string);
  if ((null == string) || string.equals(cropped)) {
    return string;
  }
  if (cropped.length() == 0) {
    return cropped;
  }
  return cropped + finalChar;
}

public static boolean isDerivedAdjective(final String word){
  if (word.length() > 4) {
    if (word.endsWith("al") || word.endsWith("ic"))     return true;
    if (word.endsWith("ed"))     return true;
  }
  return false;
}

String renameFile(String inputFilename){
  for (  Pattern searchExp : regexMappings.keySet()) {
    Matcher matcher=searchExp.matcher(inputFilename);
    if (matcher.find()) {
      String renamed=matcher.replaceFirst(regexMappings.get(searchExp));
      return FILE_SEP_CHAR_MATCHER.trimLeadingFrom(renamed);
    }
  }
  throw new MoeProblem("Cannot find a rename mapping that covers file %s. " + "Every file needs an applicable renaming rule.",inputFilename);
}

private static int validateAdbServerPort(@NonNull String adbServerPort) throws IllegalArgumentException {
  try {
    int port=Integer.decode(adbServerPort);
    if (port <= 0 || port >= 65535) {
      throw new IllegalArgumentException("Should be > 0 and < 65535");
    }
    return port;
  }
 catch (  NumberFormatException e) {
    throw new IllegalArgumentException("Not a valid port number");
  }
}

public static String formatElapsed(Timestamp start){
  if (start == null)   return "NoStartTime";
  long startTime=start.getTime();
  long endTime=System.currentTimeMillis();
  return formatElapsed(endTime - startTime);
}

@Override public void stop(){
  for (  Thread thread : threads) {
    thread.interrupt();
  }
  try {
    for (    Thread thread : threads) {
      thread.join();
    }
  }
 catch (  InterruptedException e) {
  }
}

private boolean verifyPublishedDualInetAddress(String nodeId){
  DualInetAddress dualAddress=null;
  Configuration config=queryConfiguration(Constants.NODE_DUALINETADDR_CONFIG,nodeId);
  if (config != null) {
    dualAddress=parseInetAddressConfig(config);
  }
  if ((dualAddress != null) && dualAddress.equals(inetAddressLookupMap.getDualInetAddress())) {
    return true;
  }
  return false;
}

public void testRecursiveChains() throws Throwable {
  for (  ExecutionMode m : ExecutionMode.values())   for (  boolean addDeadEnds : new boolean[]{true,false}) {
    final int val=42;
    final int n=expensiveTests ? 1_000 : 2;
    CompletableFuture<Integer> head=new CompletableFuture<>();
    CompletableFuture<Integer> tail=head;
    for (int i=0; i < n; i++) {
      if (addDeadEnds)       m.thenApply(tail,null);
      tail=m.thenApply(tail,null);
      if (addDeadEnds)       m.applyToEither(tail,tail,null);
      tail=m.applyToEither(tail,tail,null);
      if (addDeadEnds)       m.thenCombine(tail,tail,null);
      tail=m.thenCombine(tail,tail,null);
    }
    head.complete(val);
    assertEquals(val + 3 * n,(int)tail.join());
  }
}

public boolean responseIsString(String oid){
  return stringResponses.contains(oid);
}

private static int type(final ClassWriter cw,final String desc){
  String t;
  int index=desc.charAt(0) == '(' ? desc.indexOf(')') + 1 : 0;
switch (desc.charAt(index)) {
case 'V':
    return 0;
case 'Z':
case 'C':
case 'B':
case 'S':
case 'I':
  return INTEGER;
case 'F':
return FLOAT;
case 'J':
return LONG;
case 'D':
return DOUBLE;
case 'L':
t=desc.substring(index + 1,desc.length() - 1);
return OBJECT | cw.addType(t);
default :
int data;
int dims=index + 1;
while (desc.charAt(dims) == '[') {
++dims;
}
switch (desc.charAt(dims)) {
case 'Z':
data=BOOLEAN;
break;
case 'C':
data=CHAR;
break;
case 'B':
data=BYTE;
break;
case 'S':
data=SHORT;
break;
case 'I':
data=INTEGER;
break;
case 'F':
data=FLOAT;
break;
case 'J':
data=LONG;
break;
case 'D':
data=DOUBLE;
break;
default :
t=desc.substring(dims + 1,desc.length() - 1);
data=OBJECT | cw.addType(t);
}
return (dims - index) << 28 | data;
}
}

public void logFine(String message){
  logger.fine(logPrefix + message);
}

public static Optional<String> createInputDialog(final Window owner,final String title,final String label){
  final TextInputDialog dialog=new TextInputDialog();
  dialog.setTitle(title);
  dialog.setHeaderText(null);
  dialog.setContentText(label);
  dialog.initOwner(owner);
  return dialog.showAndWait();
}

public static void closeOutputStream(OutputStream stream,String tag){
  if (stream != null) {
    try {
      stream.close();
    }
 catch (    IOException e) {
      Log.e(tag,"Exception occured when closing ByteArrayOutputStream." + e);
    }
  }
}

private static String encode(final String text) throws UnsupportedEncodingException {
  return URLEncoder.encode(text,"UTF-8");
}

public static String convertToRGB(int color){
  String red=Integer.toHexString(Color.red(color));
  String green=Integer.toHexString(Color.green(color));
  String blue=Integer.toHexString(Color.blue(color));
  if (red.length() == 1) {
    red="0" + red;
  }
  if (green.length() == 1) {
    green="0" + green;
  }
  if (blue.length() == 1) {
    blue="0" + blue;
  }
  return "#" + red + green+ blue;
}

private static final void appendEncodedByte(StringBuffer buffer,byte value,byte[] state){
  if (state[0] != 0) {
    char c=(char)((state[1] << 8) | (((int)value) & 0xFF));
    buffer.append(c);
    state[0]=0;
  }
 else {
    state[0]=1;
    state[1]=value;
  }
}

public SidedPlane(double pX,double pY,double pZ,Vector v,double D){
  super(v,D);
  sigNum=Math.signum(evaluate(pX,pY,pZ));
  if (sigNum == 0.0)   throw new IllegalArgumentException("Cannot determine sidedness because check point is on plane.");
}

public String buildUnionQuery(String[] subQueries,String sortOrder,String limit){
  StringBuilder query=new StringBuilder(128);
  int subQueryCount=subQueries.length;
  String unionOperator=mDistinct ? " UNION " : " UNION ALL ";
  for (int i=0; i < subQueryCount; i++) {
    if (i > 0) {
      query.append(unionOperator);
    }
    query.append(subQueries[i]);
  }
  appendClause(query," ORDER BY ",sortOrder);
  appendClause(query," LIMIT ",limit);
  return query.toString();
}

@Override public String toString(){
  StringBuffer sb=new StringBuffer();
  sb.append(clientId);
  sb.append("\n ");
switch (status) {
case CONNECTED:
    sb.append(context.getString(R.string.connectedto));
  break;
case DISCONNECTED:
sb.append(context.getString(R.string.disconnected));
break;
case NONE:
sb.append(context.getString(R.string.no_status));
break;
case CONNECTING:
sb.append(context.getString(R.string.connecting));
break;
case DISCONNECTING:
sb.append(context.getString(R.string.disconnecting));
break;
case ERROR:
sb.append(context.getString(R.string.connectionError));
}
sb.append(" ");
sb.append(host);
return sb.toString();
}

void registerCallback(BluetoothCallback callback){
synchronized (mCallbacks) {
    mCallbacks.add(callback);
  }
}

private void validateTableMetaDataNoRow(String tableNamePattern,String[] types) throws Exception {
  try (ResultSet tables=dbmd.getTables(null,null,tableNamePattern,types)){
    assertFalse(String.format("Expected empty result set for requesting %s with types %s",tableNamePattern,Arrays.toString(types)),tables.next());
  }
 }

void checkClassBounds(DiagnosticPosition pos,Type type){
  checkClassBounds(pos,new HashMap<TypeSymbol,Type>(),type);
}

private static String parseToken(String pattern,int[] indexRef){
  StringBuffer buf=new StringBuffer();
  int i=indexRef[0];
  int length=pattern.length();
  char c=pattern.charAt(i);
  if (c >= 'A' && c <= 'Z' || c >= 'a' && c <= 'z') {
    buf.append(c);
    while (i + 1 < length) {
      char peek=pattern.charAt(i + 1);
      if (peek == c) {
        buf.append(c);
        i++;
      }
 else {
        break;
      }
    }
  }
 else {
    buf.append('\'');
    boolean inLiteral=false;
    for (; i < length; i++) {
      c=pattern.charAt(i);
      if (c == '\'') {
        if (i + 1 < length && pattern.charAt(i + 1) == '\'') {
          i++;
          buf.append(c);
        }
 else {
          inLiteral=!inLiteral;
        }
      }
 else       if (!inLiteral && (c >= 'A' && c <= 'Z' || c >= 'a' && c <= 'z')) {
        i--;
        break;
      }
 else {
        buf.append(c);
      }
    }
  }
  indexRef[0]=i;
  return buf.toString();
}

public int alloc(final RWStore store,final int size,final IAllocationContext context){
  try {
    if (size <= 0)     throw new IllegalArgumentException("Allocate requires positive size, got: " + size);
    if (size > m_size)     throw new IllegalArgumentException("FixedAllocator with slots of " + m_size + " bytes requested allocation for "+ size+ " bytes");
    if (m_freeBits == 0) {
      throw new IllegalStateException("Request to allocate from " + m_size + "byte slot FixedAllocator with zero bits free - should not be on the Free List");
    }
    int addr=-1;
    if (m_size <= m_store.cSmallSlot) {
      return allocFromIndex(size);
    }
    final Iterator<AllocBlock> iter=m_allocBlocks.iterator();
    int count=-1;
    while (addr == -1 && iter.hasNext()) {
      count++;
      final AllocBlock block=iter.next();
      checkBlock(block);
      addr=block.alloc(m_size);
    }
    if (addr != -1) {
      addr+=3;
      if (--m_freeBits == 0) {
        if (s_islogTrace)         log.trace("Remove from free list");
        removeFromFreeList();
        if (m_freeList.size() > 0) {
          if (s_islogDebug) {
            final FixedAllocator nxt=(FixedAllocator)m_freeList.get(0);
            log.debug("Freelist head: " + nxt.getSummaryStats());
          }
        }
      }
      addr+=(count * 32 * m_bitSize);
      final int value=-((m_index << RWStore.OFFSET_BITS) + addr);
      if (m_statsBucket != null) {
        m_statsBucket.allocate(size);
      }
      return value;
    }
 else {
      StringBuilder sb=new StringBuilder();
      sb.append("FixedAllocator returning null address, with freeBits: " + m_freeBits + "\n");
      for (      AllocBlock ab : m_allocBlocks) {
        sb.append(ab.show() + "\n");
      }
      log.error(sb);
      return 0;
    }
  }
  finally {
    if (s_islogDebug)     checkBits();
  }
}

public static NativePage createNativePageForURL(String url,NativePage candidatePage,Tab tab,TabModelSelector tabModelSelector,Activity activity){
  return createNativePageForURL(url,candidatePage,tab,tabModelSelector,activity,tab.isIncognito());
}

@Override public void nodeDown(long eventUID,String nodeID){
  try {
    lock.lock();
    untriedConnectors.putAll(triedConnectors);
    triedConnectors.clear();
    if (untriedConnectors.size() > 0) {
      condition.signal();
    }
  }
  finally {
    lock.unlock();
  }
}

public static synchronized Collection<String> allLocalMACs(){
  List<String> macs=new ArrayList<>(3);
  try {
    Enumeration<NetworkInterface> itfs=NetworkInterface.getNetworkInterfaces();
    if (itfs != null) {
      for (      NetworkInterface itf : asIterable(itfs)) {
        byte[] hwAddr=itf.getHardwareAddress();
        if (hwAddr != null && hwAddr.length > 0) {
          String mac=byteArray2HexString(hwAddr);
          if (!macs.contains(mac))           macs.add(mac);
        }
      }
    }
  }
 catch (  SocketException ignore) {
    return Collections.emptyList();
  }
  Collections.sort(macs);
  return macs;
}

public void removeCartItem(int index,boolean triggerExternalOps,LocalDispatcher dispatcher) throws CartItemModifyException {
  if (isReadOnlyCart()) {
    throw new CartItemModifyException("Cart items cannot be changed");
  }
  if (index < 0)   return;
  if (cartLines.size() <= index)   return;
  ShoppingCartItem item=cartLines.remove(index);
  item.setQuantity(BigDecimal.ZERO,dispatcher,this,triggerExternalOps,true,false,true);
}

private final void accessCheck(T obj){
  if (!cclass.isInstance(obj))   throw accessCheckException(obj);
}

protected void markFirstTime(Element elem){
  String elemName=elem.getName();
  if (elemName.equals("html")) {
    seenHtml=true;
  }
 else   if (elemName.equals("head")) {
    seenHead=true;
  }
 else   if (elemName.equals("body")) {
    if (buf.length == 1) {
      char[] newBuf=new char[256];
      newBuf[0]=buf[0];
      buf=newBuf;
    }
    seenBody=true;
  }
}

public static String timeToString(long period){
  period/=10;
  final long milsecs=period % 100;
  period/=100;
  final long secs=period % 60;
  period/=60;
  final long mins=period % 60;
  period/=60;
  final long hours=period;
  return String.format("%02d:%02d:%02d.%02d",hours,mins,secs,milsecs);
}

protected static boolean isUserDefinedProperty(String propName){
  return !standardPropNames.contains(propName);
}

private boolean conditionM0(String value,int index){
  if (charAt(value,index + 1) == 'M') {
    return true;
  }
  return contains(value,index - 1,3,"UMB") && ((index + 1) == value.length() - 1 || contains(value,index + 2,2,"ER"));
}

private void writeAttribute(java.lang.String prefix,java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (xmlWriter.getPrefix(namespace) == null) {
    xmlWriter.writeNamespace(prefix,namespace);
    xmlWriter.setPrefix(prefix,namespace);
  }
  xmlWriter.writeAttribute(namespace,attName,attValue);
}

@Reference(authors="F. J. Rohlf",title="Methods of comparing classifications",booktitle="Annual Review of Ecology and Systematics",url="http://dx.doi.org/10.1146/annurev.es.05.110174.000533") public double computeTau(long c,long d,double m,long wd,long bd){
  double tie=(wd * (wd - 1) + bd * (bd - 1)) >>> 1;
  return (c - d) / Math.sqrt((m - tie) * m);
}

private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
  in.defaultReadObject();
  serviceID=new ServiceID(in);
}

public void removeSwipeListener(SwipeListener listener){
  if (mListeners == null) {
    return;
  }
  mListeners.remove(listener);
}

private void generateCreateEvents(List<IgfsPath> createdPaths,boolean file){
  if (evts.isRecordable(EventType.EVT_IGFS_DIR_CREATED)) {
    for (int i=0; i < createdPaths.size() - 1; i++)     IgfsUtils.sendEvents(igfsCtx.kernalContext(),createdPaths.get(i),EventType.EVT_IGFS_DIR_CREATED);
  }
  IgfsPath leafPath=createdPaths.get(createdPaths.size() - 1);
  if (file) {
    IgfsUtils.sendEvents(igfsCtx.kernalContext(),leafPath,EventType.EVT_IGFS_FILE_CREATED);
    IgfsUtils.sendEvents(igfsCtx.kernalContext(),leafPath,EventType.EVT_IGFS_FILE_OPENED_WRITE);
  }
 else   IgfsUtils.sendEvents(igfsCtx.kernalContext(),leafPath,EventType.EVT_IGFS_DIR_CREATED);
}

public OptInTemplateClassResolver(Set allowedClasses,List trustedTemplates){
  this.allowedClasses=allowedClasses != null ? allowedClasses : Collections.EMPTY_SET;
  if (trustedTemplates != null) {
    trustedTemplateNames=new HashSet();
    trustedTemplatePrefixes=new ArrayList();
    Iterator it=trustedTemplates.iterator();
    while (it.hasNext()) {
      String li=(String)it.next();
      if (li.startsWith("/"))       li=li.substring(1);
      if (li.endsWith("*")) {
        trustedTemplatePrefixes.add(li.substring(0,li.length() - 1));
      }
 else {
        trustedTemplateNames.add(li);
      }
    }
  }
 else {
    trustedTemplateNames=Collections.EMPTY_SET;
    trustedTemplatePrefixes=Collections.EMPTY_LIST;
  }
}

protected void asyncOpRelease(){
  if (asyncOpsSem != null)   asyncOpsSem.release();
}

public static boolean validSystemNameConfig(String systemName,char type){
  if (!validSystemNameFormat(systemName,type)) {
    return false;
  }
  return true;
}

public void removeAll(){
  if (mRecords.size() >= 0) {
    mRecords.clear();
    mCurrentPosition=-1;
    notifyObservers();
  }
}

public synchronized boolean startReindexer(String name,boolean force) throws ReindexerAlreadyRunningException {
  OnlineReindexer<?,?,?> reindexer=reindexers.get(name);
  validateReindexerNotRunning(reindexer);
  if (force || !isCurrentIndexVersionLatest(name,reindexer)) {
    reindexer.start();
    return true;
  }
  return false;
}

@Override public void printStackTrace(){
  super.printStackTrace();
  if (nested != null)   nested.printStackTrace();
}

private static void updateLastModified(File destDir,String warFilePath){
  File warFile=new File(warFilePath);
  destDir.setLastModified(warFile.lastModified());
}

public void addChild(BaseAssemblyNode childNode){
  childNode.parentNode=this;
  childNodes.add(childNode);
}

protected void notifyHistoryChangedListeners(){
  Iterator<HistoryChangedListener> iter;
  HistoryChangedListener l;
  iter=m_HistoryChangedListeners.iterator();
  while (iter.hasNext()) {
    l=iter.next();
    l.historyChanged(new HistoryChangedEvent(this,HISTORY_NAME,getHistory()));
  }
}

private void signalNotFull(){
  final ReentrantLock putLock=this.putLock;
  putLock.lock();
  try {
    notFull.signal();
  }
  finally {
    putLock.unlock();
  }
}

@RequiresPermission(Manifest.permission.CAMERA) public CameraSource start() throws IOException {
synchronized (mCameraLock) {
    if (mCamera != null) {
      return this;
    }
    mCamera=createCamera();
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
      mDummySurfaceTexture=new SurfaceTexture(DUMMY_TEXTURE_NAME);
      mCamera.setPreviewTexture(mDummySurfaceTexture);
    }
 else {
      mDummySurfaceView=new SurfaceView(mContext);
      mCamera.setPreviewDisplay(mDummySurfaceView.getHolder());
    }
    mCamera.startPreview();
    mProcessingThread=new Thread(mFrameProcessor);
    mFrameProcessor.setActive(true);
    mProcessingThread.start();
  }
  return this;
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

private TextView findTextViewByTagId(final String tagId){
  for (  final TextView view : mTagViewMap.values()) {
    final Tag tag=(Tag)view.getTag();
    if (tagId.equals(tag.id)) {
      return view;
    }
  }
  return null;
}

public Space prune(Space prefix) throws ScopeException {
  Space x=this;
  ArrayList<Space> stack=new ArrayList<>();
  while (x != null && !x.equals(prefix)) {
    stack.add(0,x);
    x=x.getParent();
  }
  if (x == null) {
    throw new ScopeException("cannot prune distinct spaces");
  }
 else {
    Space result=new Space(universe,x.getDomain());
    for (    Space space : stack) {
      result=result.S(space.getRelation());
    }
    return result;
  }
}

default void infof(String format,Object... args){
  info(String.format(format,args));
}

public static int darker(int color,float factor){
  int a=Color.alpha(color);
  int r=Color.red(color);
  int g=Color.green(color);
  int b=Color.blue(color);
  return Color.argb(a,Math.max((int)(r * factor),0),Math.max((int)(g * factor),0),Math.max((int)(b * factor),0));
}

public <FV>FV extractRawJavaFieldValue(Object object) throws SQLException {
  Object val;
  if (fieldGetMethod == null) {
    try {
      val=field.get(object);
    }
 catch (    Exception e) {
      throw SqlExceptionUtil.create("Could not get field value for " + this,e);
    }
  }
 else {
    try {
      val=fieldGetMethod.invoke(object);
    }
 catch (    Exception e) {
      throw SqlExceptionUtil.create("Could not call " + fieldGetMethod + " for "+ this,e);
    }
  }
  @SuppressWarnings("unchecked") FV converted=(FV)val;
  return converted;
}

public static void writeFile(File file,byte[] data){
  try {
    RandomAccessFile ra=new RandomAccessFile(file,"rw");
    ra.write(data);
    ra.setLength(data.length);
    ra.close();
  }
 catch (  IOException e) {
    throw new RuntimeException("Error writing to file " + file,e);
  }
}

public static double[] thresholdStringToArray(String top,int L){
  if (top.startsWith("[")) {
    return MLUtils.toDoubleArray(top);
  }
 else {
    double t[]=new double[L];
    Arrays.fill(t,Double.parseDouble(top));
    return t;
  }
}

@Override public String[] determineColumnConstraints(ResultProducer rp) throws Exception {
  return null;
}

abstract Set<String> initConfigNames();

public static int eval(String url,String text) throws IOException {
  String returnValue=null;
  if (url.startsWith("http:")) {
    returnValue=doHttp(url,text);
  }
 else   if (url.startsWith("bsh:")) {
    returnValue=doBsh(url,text);
  }
 else   throw new IOException("Unrecognized URL type." + "Scheme must be http:// or bsh://");
  try {
    return Integer.parseInt(returnValue);
  }
 catch (  Exception e) {
    return 0;
  }
}

public DSAPrivateKey(byte[] encoded) throws InvalidKeyException {
  clearOldKey();
  decode(encoded);
}

public static String readFully(Reader reader) throws IOException {
  try {
    StringWriter writer=new StringWriter();
    char[] buffer=new char[1024];
    int count;
    while ((count=reader.read(buffer)) != -1) {
      writer.write(buffer,0,count);
    }
    return writer.toString();
  }
  finally {
    reader.close();
  }
}

private void sendBroadcastNewOperation(Target target,RemoteOperation operation){
  Intent intent=new Intent(ACTION_OPERATION_ADDED);
  if (target.mAccount != null) {
    intent.putExtra(EXTRA_ACCOUNT,target.mAccount);
  }
 else {
    intent.putExtra(EXTRA_SERVER_URL,target.mServerUrl);
  }
  sendStickyBroadcast(intent);
}

int successful(){
  return success.get();
}

public void monitor(String key){
  Timer t=new Timer(true);
  t.schedule(new WatchableRegistration(key),10 * 1000,10 * 1000);
}

private synchronized void rebuildJournal() throws IOException {
  if (journalWriter != null) {
    journalWriter.close();
  }
  Writer writer=new BufferedWriter(new FileWriter(journalFileTmp),IO_BUFFER_SIZE);
  writer.write(MAGIC);
  writer.write("\n");
  writer.write(VERSION_1);
  writer.write("\n");
  writer.write(Integer.toString(appVersion));
  writer.write("\n");
  writer.write(Integer.toString(valueCount));
  writer.write("\n");
  writer.write("\n");
  for (  Entry entry : lruEntries.values()) {
    if (entry.currentEditor != null) {
      writer.write(DIRTY + ' ' + entry.key+ '\n');
    }
 else {
      writer.write(CLEAN + ' ' + entry.key+ entry.getLengths()+ '\n');
    }
  }
  writer.close();
  journalFileTmp.renameTo(journalFile);
  journalWriter=new BufferedWriter(new FileWriter(journalFile,true),IO_BUFFER_SIZE);
}

protected int checkRiskAttribute(){
  int retVal=0;
  if (debug.messageEnabled()) {
    debug.message("{}.checkRiskAttribute",ADAPTIVE);
  }
  if (riskAttributeName != null && riskAttributeValue != null) {
    Set<String> riskAttributeValues=null;
    riskAttributeValues=getIdentityAttributeSet(riskAttributeName);
    if (riskAttributeValues != null) {
      for (      String riskAttr : riskAttributeValues) {
        if (riskAttributeValue.equalsIgnoreCase(riskAttr)) {
          if (debug.messageEnabled()) {
            debug.message("{}.checkRiskAttribute: Found Match",ADAPTIVE);
          }
          retVal=riskAttributeScore;
          break;
        }
      }
    }
  }
  if (!riskAttributeInvert) {
    retVal=riskAttributeScore - retVal;
  }
  return retVal;
}

public static MethExecutorResult executeInstance(String receiver,String selector,Class[] types,Object[] args){
  try {
    Class receiverClass=Class.forName(receiver);
    Constructor init=receiverClass.getDeclaredConstructor(new Class[0]);
    init.setAccessible(true);
    Object target=init.newInstance(new Object[0]);
    Object res=null;
    try {
      Method theMethod=getMethod(receiverClass,selector,types);
      res=theMethod.invoke(target,args);
      return new MethExecutorResult(res);
    }
 catch (    InvocationTargetException invTargEx) {
      Throwable targEx=invTargEx.getTargetException();
      if (targEx == null) {
        return new MethExecutorResult(res);
      }
 else {
        return new MethExecutorResult(targEx);
      }
    }
  }
 catch (  VirtualMachineError e) {
    SystemFailure.initiateFailure(e);
    throw e;
  }
catch (  Throwable t) {
    return new MethExecutorResult(t);
  }
}

private void writeObject(ObjectOutputStream stream) throws IOException {
  stream.defaultWriteObject();
  marshalAttributes(attrs,stream);
}

@Override synchronized public void write(byte b[],int off,int len) throws IOException {
  if (b == null) {
    throw new NullPointerException();
  }
 else   if (off < 0 || len < 0 || len > b.length - off) {
    throw new IndexOutOfBoundsException();
  }
 else   if (len == 0) {
    return;
  }
  c.checkWrite();
  boolean isFirstRecordOfThePayload=true;
  try {
    do {
      boolean holdRecord=false;
      int howmuch;
      if (isFirstRecordOfThePayload && c.needToSplitPayload()) {
        howmuch=Math.min(0x01,r.availableDataBytes());
        if ((len != 1) && (howmuch == 1)) {
          holdRecord=true;
        }
      }
 else {
        howmuch=Math.min(len,r.availableDataBytes());
      }
      if (isFirstRecordOfThePayload && howmuch != 0) {
        isFirstRecordOfThePayload=false;
      }
      if (howmuch > 0) {
        r.write(b,off,howmuch);
        off+=howmuch;
        len-=howmuch;
      }
      c.writeRecord(r,holdRecord);
      c.checkWrite();
    }
 while (len > 0);
  }
 catch (  Exception e) {
    c.handleException(e);
  }
}

public boolean onInterceptTouchEvent(MotionEvent ev){
  @SuppressWarnings("all") final boolean debug=false;
  if (debug) {
    Log.d(Launcher.TAG,"DragController.onInterceptTouchEvent " + ev + " mDragging="+ mDragging);
  }
  acquireVelocityTrackerAndAddMovement(ev);
  final int action=ev.getAction();
  final int[] dragLayerPos=getClampedDragLayerPos(ev.getX(),ev.getY());
  final int dragLayerX=dragLayerPos[0];
  final int dragLayerY=dragLayerPos[1];
switch (action) {
case MotionEvent.ACTION_MOVE:
    break;
case MotionEvent.ACTION_DOWN:
  mMotionDownX=dragLayerX;
mMotionDownY=dragLayerY;
mLastDropTarget=null;
break;
case MotionEvent.ACTION_UP:
mLastTouchUpTime=System.currentTimeMillis();
if (mDragging) {
PointF vec=isFlingingToDelete(mDragObject.dragSource);
if (!DeleteDropTarget.willAcceptDrop(mDragObject.dragInfo)) {
vec=null;
}
if (vec != null) {
dropOnFlingToDeleteTarget(dragLayerX,dragLayerY,vec);
}
 else {
drop(dragLayerX,dragLayerY);
}
}
endDrag();
break;
case MotionEvent.ACTION_CANCEL:
cancelDrag();
break;
}
return mDragging;
}

public void test_concurrentKBCreateAndDiscovery() throws Exception {
  final String namespace=getName();
  final Properties properties=getProperties();
  Journal jnl=null;
  try {
    jnl=new Journal(properties);
    doConcurrentCreateAndDiscoveryTest(jnl,namespace);
  }
  finally {
    if (jnl != null)     jnl.destroy();
  }
}

private void resetDatabase(TungstenProperties serviceProps,Map<String,String> progress) throws InterruptedException {
  DataSourceAdministrator admin=null;
  String serviceName=serviceProps.getString(ReplicatorConf.SERVICE_NAME);
  try {
    admin=new DataSourceAdministrator(serviceProps);
    admin.prepare();
    progress.put("clear data source catalogs",serviceName);
    boolean cleared=admin.resetAll();
    if (cleared) {
      logger.info("Data source catalog information cleared");
    }
 else {
      logger.info("Unable to clear data source information: service=" + serviceName);
    }
  }
 catch (  ReplicatorException e) {
    logger.error(String.format("Error while clearing data source information %s: %s",serviceName,e.getMessage()),e);
  }
 finally {
    if (admin != null) {
      admin.release();
    }
  }
}

public static final void writeValueXml(Object v,String name,XmlSerializer out) throws XmlPullParserException, IOException {
  String typeStr;
  if (v == null) {
    out.startTag(null,"null");
    if (name != null) {
      out.attribute(null,"name",name);
    }
    out.endTag(null,"null");
    return;
  }
 else   if (v instanceof String) {
    out.startTag(null,"string");
    if (name != null) {
      out.attribute(null,"name",name);
    }
    out.text(v.toString());
    out.endTag(null,"string");
    return;
  }
 else   if (v instanceof Integer) {
    typeStr="int";
  }
 else   if (v instanceof Long) {
    typeStr="long";
  }
 else   if (v instanceof Float) {
    typeStr="float";
  }
 else   if (v instanceof Double) {
    typeStr="double";
  }
 else   if (v instanceof Boolean) {
    typeStr="boolean";
  }
 else   if (v instanceof byte[]) {
    writeByteArrayXml((byte[])v,name,out);
    return;
  }
 else   if (v instanceof int[]) {
    writeIntArrayXml((int[])v,name,out);
    return;
  }
 else   if (v instanceof Map) {
    writeMapXml((Map)v,name,out);
    return;
  }
 else   if (v instanceof List) {
    writeListXml((List)v,name,out);
    return;
  }
 else   if (v instanceof CharSequence) {
    out.startTag(null,"string");
    if (name != null) {
      out.attribute(null,"name",name);
    }
    out.text(v.toString());
    out.endTag(null,"string");
    return;
  }
 else {
    throw new RuntimeException("writeValueXml: unable to write value " + v);
  }
  out.startTag(null,typeStr);
  if (name != null) {
    out.attribute(null,"name",name);
  }
  out.attribute(null,"value",v.toString());
  out.endTag(null,typeStr);
}

private void initializeIdealPoint(){
  idealPoint=new double[problem.getNumberOfObjectives()];
  Arrays.fill(idealPoint,Double.POSITIVE_INFINITY);
}

private long startWait(){
  return System.nanoTime();
}

public static String[] readFontNames(final FontData fontData){
  final String[] fontNames=new String[1];
  fontNames[0]=null;
  final BufferedReader br=new BufferedReader(new StringReader(new String(fontData.getBytes(0,fontData.length()))));
  String line=null;
  while (true) {
    try {
      line=br.readLine();
    }
 catch (    final IOException e) {
      LogWriter.writeLog("Exception: " + e.getMessage());
    }
    if (line == null) {
      break;
    }
    if (line.startsWith("/FontName")) {
      final int nameStart=line.indexOf('/',9);
      if (nameStart != -1) {
        final int nameEnd=line.indexOf(' ',nameStart);
        if (nameEnd != -1) {
          final String name=line.substring(nameStart + 1,nameEnd);
          fontNames[0]=name.toLowerCase();
          break;
        }
      }
    }
  }
  if (br != null) {
    try {
      br.close();
    }
 catch (    final Exception e) {
      LogWriter.writeLog("Exception " + e + " closing stream");
    }
  }
  if (fontData != null) {
    fontData.close();
  }
  return fontNames;
}

private void writeUnitsOfIndentation(int i) throws IOException {
  for (; i > 0; i--) {
    writer.write(INDENTATION_UNIT);
  }
}

private PatternParser() throws HyphenationException {
  token=new StringBuilder();
  parser=createParser();
  parser.setContentHandler(this);
  parser.setErrorHandler(this);
  hyphenChar='-';
}

public static int capBetween(int min,int number,int max){
  assertTrue(min <= max);
  return Math.min(max,Math.max(min,number));
}

public boolean hasExtensions(){
  return extensions != null;
}

public void munge(String entityId,Collection<Statement> statements,Collection<String> existingValues,Collection<String> existingRefs,Change sourceChange){
  if (statements.isEmpty()) {
    return;
  }
  MungeOperation op=new MungeOperation(entityId,statements,existingValues,existingRefs);
  if (sourceChange != null) {
    op.importFromChange(sourceChange);
  }
  op.munge();
  existingValues.removeAll(op.extraValidSubjects);
  existingRefs.removeAll(op.extraValidSubjects);
  return;
}

public void showPropertyDialog(){
  if (m_Editor.getValue() != null) {
    if (m_PD == null) {
      int x=getLocationOnScreen().x;
      int y=getLocationOnScreen().y;
      if (PropertyDialog.getParentDialog(this) != null)       m_PD=new PropertyDialog(PropertyDialog.getParentDialog(this),m_Editor,x,y);
 else       m_PD=new PropertyDialog(PropertyDialog.getParentFrame(this),m_Editor,x,y);
      m_PD.setVisible(true);
    }
 else {
      m_PD.setVisible(true);
    }
    m_Editor.setValue(m_Editor.getValue());
  }
}

public Lucene60Codec(Mode mode){
  super("Lucene60");
  this.storedFieldsFormat=new Lucene50StoredFieldsFormat(Objects.requireNonNull(mode));
}

public void delete() throws IOException {
  close();
  Util.deleteContents(directory);
}

public synchronized void remove(String name){
  for (int i=0; i < modifications.size(); i++) {
    Modification mod=modifications.get(i);
    Attribute attr=mod.getAttribute();
    if (name.equalsIgnoreCase(attr.getAttributeDescriptionAsString())) {
      modifications.remove(i);
      return;
    }
  }
}

void addFillComponents(Container panel,int[] cols,int[] rows){
  Dimension filler=new Dimension(10,10);
  boolean filled_cell_11=false;
  CellConstraints cc=new CellConstraints();
  if (cols.length > 0 && rows.length > 0) {
    if (cols[0] == 1 && rows[0] == 1) {
      panel.add(Box.createRigidArea(filler),cc.xy(1,1));
      filled_cell_11=true;
    }
  }
  for (int index=0; index < cols.length; index++) {
    if (cols[index] == 1 && filled_cell_11) {
      continue;
    }
    panel.add(Box.createRigidArea(filler),cc.xy(cols[index],1));
  }
  for (int index=0; index < rows.length; index++) {
    if (rows[index] == 1 && filled_cell_11) {
      continue;
    }
    panel.add(Box.createRigidArea(filler),cc.xy(1,rows[index]));
  }
}

private boolean quietSleep(long ms){
  try {
    Thread.sleep(ms);
  }
 catch (  InterruptedException e) {
    return true;
  }
  return false;
}

public void pushFrame(LocalVariableMap vars,DMLProgramCounter pc){
  callStack.push(new DMLFrame(vars,pc));
}

public boolean isLandingPage(URL url){
  if (url.getQuery() != null) {
    return false;
  }
 else {
    return landingPageSuffix(url) != "";
  }
}

protected void layoutGraphicModifiers(DrawContext dc,AVList modifiers,OrderedSymbol osym){
}

public static synchronized void progress(final String message){
  sLastProgress=message;
  final PrintStream prog=getProgressStream();
  if (prog != null) {
    prog.println(now() + message);
    prog.flush();
    if (prog.checkError()) {
      sProgressStream=null;
    }
  }
}

private static boolean match(CharSequence string,CharSequence pattern,int sNdx,int pNdx){
  int pLen=pattern.length();
  if (pLen == 1) {
    if (pattern.charAt(0) == '*') {
      return true;
    }
  }
  int sLen=string.length();
  boolean nextIsNotWildcard=false;
  while (true) {
    if ((sNdx >= sLen) == true) {
      while ((pNdx < pLen) && (pattern.charAt(pNdx) == '*')) {
        pNdx++;
      }
      return pNdx >= pLen;
    }
    if (pNdx >= pLen) {
      return false;
    }
    char p=pattern.charAt(pNdx);
    if (nextIsNotWildcard == false) {
      if (p == '\\') {
        pNdx++;
        nextIsNotWildcard=true;
        continue;
      }
      if (p == '?') {
        sNdx++;
        pNdx++;
        continue;
      }
      if (p == '*') {
        char pNext=0;
        if (pNdx + 1 < pLen) {
          pNext=pattern.charAt(pNdx + 1);
        }
        if (pNext == '*') {
          pNdx++;
          continue;
        }
        int i;
        pNdx++;
        for (i=string.length(); i >= sNdx; i--) {
          if (match(string,pattern,i,pNdx) == true) {
            return true;
          }
        }
        return false;
      }
    }
 else {
      nextIsNotWildcard=false;
    }
    if (p != string.charAt(sNdx)) {
      return false;
    }
    sNdx++;
    pNdx++;
  }
}

public String nextCDATA() throws JSONException {
  char c;
  int i;
  StringBuffer sb=new StringBuffer();
  for (; ; ) {
    c=next();
    if (end()) {
      throw syntaxError("Unclosed CDATA");
    }
    sb.append(c);
    i=sb.length() - 3;
    if (i >= 0 && sb.charAt(i) == ']' && sb.charAt(i + 1) == ']' && sb.charAt(i + 2) == '>') {
      sb.setLength(i);
      return sb.toString();
    }
  }
}

public void addGrammarFile(String fileName){
  grammarFiles.add(fileName);
}

private Workflow.Method rollbackDeleteMirrorDeviceMethod(URI vplexURI,URI vplexMirrorURI){
  return new Workflow.Method(RB_DELETE_MIRROR_DEVICE_METHOD_NAME,vplexURI,vplexMirrorURI);
}

private String findCipherAndStrength(byte[] supportedCiphers,String[] tokens){
  byte s;
  for (int i=0; i < strength.length; i++) {
    if ((s=strength[i]) != 0) {
      for (int j=0; j < supportedCiphers.length; j++) {
        if (s == supportedCiphers[j] && (specifiedCipher == null || specifiedCipher.equals(tokens[j]))) {
switch (s) {
case HIGH_STRENGTH:
            negotiatedStrength="high";
          break;
case MEDIUM_STRENGTH:
        negotiatedStrength="medium";
      break;
case LOW_STRENGTH:
    negotiatedStrength="low";
  break;
}
return tokens[j];
}
}
}
}
return null;
}

public static String[] split(String line,String delim){
  List list=new ArrayList();
  StringTokenizer t=new StringTokenizer(line,delim);
  while (t.hasMoreTokens()) {
    list.add(t.nextToken());
  }
  return (String[])list.toArray(new String[list.size()]);
}

public static String slurpFile(File file) throws IOException {
  Reader r=new FileReader(file);
  return slurpReader(r);
}

@NotNull public List<PlayerNbt> createSingleplayerPlayerNbts(){
  Log.i("using player from level.dat");
  return Arrays.asList(createLevelDatPlayerNbt());
}

@Override public String toString(){
  StringBuilder result=new StringBuilder(limit - position);
  for (int i=position; i < limit; i++) {
    result.append(get(i));
  }
  return result.toString();
}

public void testEqualsUnequal1(){
  String a="92948782094488478231212478987482988429808779810457634781384756794987";
  int aScale=-24;
  String b="7472334223847623782375469293018787918347987234564568";
  int bScale=13;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  assertFalse(aNumber.equals(bNumber));
}

public void testCase8(){
  byte aBytes[]={1,2,3,4,5,6,7,1,2,3};
  byte bBytes[]={10,20,30,40,50,60,70,10,20,30};
  int aSign=-1;
  int bSign=1;
  byte rBytes[]={-12,-23,-34,-45,-56,-67,-78,-12,-23,-33};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.subtract(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals(-1,result.signum());
}

public GetFormKeyCmd(String processDefinitionId,String taskDefinitionKey){
  setProcessDefinitionId(processDefinitionId);
  if (taskDefinitionKey == null || taskDefinitionKey.length() < 1) {
    throw new ActivitiIllegalArgumentException("The task definition key is mandatory, but '" + taskDefinitionKey + "' has been provided.");
  }
  this.taskDefinitionKey=taskDefinitionKey;
}

protected abstract StorageLevel storageLevel();

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

private void statInit(){
  lDocumentNo.setLabelFor(fDocumentNo);
  fDocumentNo.setBackground(AdempierePLAF.getInfoBackground());
  fDocumentNo.addActionListener(this);
  fcheckReceipt.setSelected(true);
  fcheckReceipt.setActionCommand("OnlyReceipt");
  fcheckReceipt.addActionListener(this);
  fcheckPayment.setSelected(false);
  fcheckPayment.setActionCommand("OnlyPayment");
  fcheckPayment.addActionListener(this);
  fBankAccount_ID=new VLookup("C_BankAccount_ID",false,false,true,MLookupFactory.get(Env.getCtx(),p_WindowNo,0,MColumn.getColumn_ID(MPayment.Table_Name,MPayment.COLUMNNAME_C_BankAccount_ID),DisplayType.TableDir));
  lBankAccount_ID.setLabelFor(fBankAccount_ID);
  fBankAccount_ID.setBackground(AdempierePLAF.getInfoBackground());
  fBankAccount_ID.addActionListener(this);
  fBPartner_ID=new VLookup("C_BPartner_ID",false,false,true,MLookupFactory.get(Env.getCtx(),p_WindowNo,0,MColumn.getColumn_ID(MPayment.Table_Name,MPayment.COLUMNNAME_C_BPartner_ID),DisplayType.Search));
  lBPartner_ID.setLabelFor(fBPartner_ID);
  fBPartner_ID.setBackground(AdempierePLAF.getInfoBackground());
  fBPartner_ID.addActionListener(this);
  lDateFrom.setLabelFor(fDateFrom);
  fDateFrom.setBackground(AdempierePLAF.getInfoBackground());
  fDateFrom.setToolTipText(Msg.translate(Env.getCtx(),"DateFrom"));
  fDateFrom.addActionListener(this);
  lDateTo.setLabelFor(fDateTo);
  fDateTo.setBackground(AdempierePLAF.getInfoBackground());
  fDateTo.setToolTipText(Msg.translate(Env.getCtx(),"DateTo"));
  fDateTo.addActionListener(this);
  lAmtFrom.setLabelFor(fAmtFrom);
  fAmtFrom.setBackground(AdempierePLAF.getInfoBackground());
  fAmtFrom.setToolTipText(Msg.translate(Env.getCtx(),"AmtFrom"));
  fAmtFrom.setBorder(fDateFrom.getBorder());
  fAmtFrom.addActionListener(this);
  lAmtTo.setLabelFor(fAmtTo);
  fAmtTo.setBackground(AdempierePLAF.getInfoBackground());
  fAmtTo.setToolTipText(Msg.translate(Env.getCtx(),"AmtTo"));
  fAmtTo.setBorder(fDateFrom.getBorder());
  fAmtTo.addActionListener(this);
  CPanel amtPanel=new CPanel();
  CPanel datePanel=new CPanel();
  amtPanel.setLayout(new ALayout(0,0,true));
  amtPanel.add(fAmtFrom,new ALayoutConstraint(0,0));
  amtPanel.add(lAmtTo,null);
  amtPanel.add(fAmtTo,null);
  datePanel.setLayout(new ALayout(0,0,true));
  datePanel.add(fDateFrom,new ALayoutConstraint(0,0));
  datePanel.add(lDateTo,null);
  datePanel.add(fDateTo,null);
  p_criteriaGrid.add(lDocumentNo,new ALayoutConstraint(0,0));
  p_criteriaGrid.add(fDocumentNo,null);
  p_criteriaGrid.add(lBPartner_ID,null);
  p_criteriaGrid.add(fBPartner_ID,null);
  p_criteriaGrid.add(fcheckReceipt,new ALayoutConstraint(0,5));
  p_criteriaGrid.add(lBankAccount_ID,new ALayoutConstraint(1,0));
  p_criteriaGrid.add(fBankAccount_ID);
  p_criteriaGrid.add(lDateFrom,null);
  p_criteriaGrid.add(datePanel,null);
  p_criteriaGrid.add(fcheckPayment,new ALayoutConstraint(1,5));
  p_criteriaGrid.add(lAmtFrom,new ALayoutConstraint(2,2));
  p_criteriaGrid.add(amtPanel,null);
}

@Override public Graphics create(){
  if (DEBUG) {
    m_printstream.println("%create");
  }
  PostscriptGraphics psg=new PostscriptGraphics(this);
  return (psg);
}

private void parseActions(){
  StringTokenizer st=new StringTokenizer(actions," ,",true);
  boolean comma=false;
  while (st.hasMoreTokens()) {
    String act=st.nextToken();
    if (act.equals(" ")) {
      continue;
    }
 else     if (comma) {
      if (!act.equals(",")) {
        comma=false;
        break;
      }
    }
 else     if (act.equalsIgnoreCase("connect")) {
      mask|=CONNECT;
    }
 else     if (act.equalsIgnoreCase("accept")) {
      mask|=ACCEPT;
    }
 else     if (act.equalsIgnoreCase("delegate")) {
      mask|=DELEGATE;
    }
 else     if (act.equalsIgnoreCase("listen")) {
      mask|=LISTEN;
    }
 else {
      break;
    }
    comma=!comma;
  }
  if (!comma) {
    throw new IllegalArgumentException("invalid actions");
  }
}

byte[] toBytes(SSLSession session){
  if (!(session instanceof OpenSSLSessionImpl)) {
    return null;
  }
  OpenSSLSessionImpl sslSession=(OpenSSLSessionImpl)session;
  try {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    DataOutputStream daos=new DataOutputStream(baos);
    daos.writeInt(OPEN_SSL);
    byte[] data=sslSession.getEncoded();
    daos.writeInt(data.length);
    daos.write(data);
    Certificate[] certs=session.getPeerCertificates();
    daos.writeInt(certs.length);
    for (    Certificate cert : certs) {
      data=cert.getEncoded();
      daos.writeInt(data.length);
      daos.write(data);
    }
    return baos.toByteArray();
  }
 catch (  IOException e) {
    log(e);
    return null;
  }
catch (  CertificateEncodingException e) {
    log(e);
    return null;
  }
}

private static void decodeTextCompaction(int[] textCompactionData,int[] byteCompactionData,int length,StringBuilder result){
  Mode subMode=Mode.ALPHA;
  Mode priorToShiftMode=Mode.ALPHA;
  int i=0;
  while (i < length) {
    int subModeCh=textCompactionData[i];
    char ch=0;
switch (subMode) {
case ALPHA:
      if (subModeCh < 26) {
        ch=(char)('A' + subModeCh);
      }
 else {
        if (subModeCh == 26) {
          ch=' ';
        }
 else         if (subModeCh == LL) {
          subMode=Mode.LOWER;
        }
 else         if (subModeCh == ML) {
          subMode=Mode.MIXED;
        }
 else         if (subModeCh == PS) {
          priorToShiftMode=subMode;
          subMode=Mode.PUNCT_SHIFT;
        }
 else         if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
          result.append((char)byteCompactionData[i]);
        }
 else         if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
          subMode=Mode.ALPHA;
        }
      }
    break;
case LOWER:
  if (subModeCh < 26) {
    ch=(char)('a' + subModeCh);
  }
 else {
    if (subModeCh == 26) {
      ch=' ';
    }
 else     if (subModeCh == AS) {
      priorToShiftMode=subMode;
      subMode=Mode.ALPHA_SHIFT;
    }
 else     if (subModeCh == ML) {
      subMode=Mode.MIXED;
    }
 else     if (subModeCh == PS) {
      priorToShiftMode=subMode;
      subMode=Mode.PUNCT_SHIFT;
    }
 else     if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
      result.append((char)byteCompactionData[i]);
    }
 else     if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
      subMode=Mode.ALPHA;
    }
  }
break;
case MIXED:
if (subModeCh < PL) {
ch=MIXED_CHARS[subModeCh];
}
 else {
if (subModeCh == PL) {
  subMode=Mode.PUNCT;
}
 else if (subModeCh == 26) {
  ch=' ';
}
 else if (subModeCh == LL) {
  subMode=Mode.LOWER;
}
 else if (subModeCh == AL) {
  subMode=Mode.ALPHA;
}
 else if (subModeCh == PS) {
  priorToShiftMode=subMode;
  subMode=Mode.PUNCT_SHIFT;
}
 else if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
  result.append((char)byteCompactionData[i]);
}
 else if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
  subMode=Mode.ALPHA;
}
}
break;
case PUNCT:
if (subModeCh < PAL) {
ch=PUNCT_CHARS[subModeCh];
}
 else {
if (subModeCh == PAL) {
subMode=Mode.ALPHA;
}
 else if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
result.append((char)byteCompactionData[i]);
}
 else if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
subMode=Mode.ALPHA;
}
}
break;
case ALPHA_SHIFT:
subMode=priorToShiftMode;
if (subModeCh < 26) {
ch=(char)('A' + subModeCh);
}
 else {
if (subModeCh == 26) {
ch=' ';
}
 else if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
subMode=Mode.ALPHA;
}
}
break;
case PUNCT_SHIFT:
subMode=priorToShiftMode;
if (subModeCh < PAL) {
ch=PUNCT_CHARS[subModeCh];
}
 else {
if (subModeCh == PAL) {
subMode=Mode.ALPHA;
}
 else if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
result.append((char)byteCompactionData[i]);
}
 else if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
subMode=Mode.ALPHA;
}
}
break;
}
if (ch != 0) {
result.append(ch);
}
i++;
}
}

public static boolean isValidName(String name){
  if (name == null) {
    return false;
  }
  return name.length() > 3;
}

protected void addCounters(BasicCounters<MutableLong> target,BasicCounters<MutableLong> source){
  for (  Enum<ReaderCounterKeys> key : ReaderCounterKeys.values()) {
    MutableLong tcounter=target.getCounter(key);
    if (tcounter == null) {
      tcounter=new MutableLong();
      target.setCounter(key,tcounter);
    }
    MutableLong scounter=source.getCounter(key);
    if (scounter != null) {
      tcounter.add(scounter.longValue());
    }
  }
}

private void addCard(SharedPreferences sharedPreferences,String key){
  String json=sharedPreferences.getString(key,null);
  if (json != null) {
    try {
      JSONObject jsonData=new JSONObject(json);
      if (jsonData.has(IMAGE_KEY)) {
        String image=jsonData.getString(IMAGE_KEY);
        List<ITopic> cards=getSourceTopicModel();
switch (key) {
case POOL_KEY:
          cards.add(0,Cards.pool(image,getActivity()));
        removeDuplicates(POOL_KEY,cards);
      break;
case VIDEO_KEY:
switch (jsonData.getString(ID_KEY)) {
case POOL_CAMERA_ID:
      mGreatShotUrl=jsonData.getString(URL_KEY);
    mElv.setOnGroupClickListener(greatShotListener);
  cards.add(0,Cards.poolVideo(mGreatShotUrl,getActivity()));
removeDuplicates(VIDEO_KEY,cards);
break;
}
break;
case FOOD_KEY:
cards.add(0,Cards.food(image,getActivity()));
removeDuplicates(FOOD_KEY,cards);
break;
case PRINTER_3D_KEY:
cards.add(0,Cards.printer3d(image,getActivity()));
removeDuplicates(PRINTER_3D_KEY,cards);
break;
}
}
 else if (jsonData.has(MESSAGE_KEY)) {
String message=jsonData.getString(MESSAGE_KEY);
List<ITopic> cards=getSourceTopicModel();
cards.add(0,Cards.test(message,getActivity()));
}
UI.execute(null);
}
 catch (JSONException e) {
e.printStackTrace();
}
}
}

public static List<LoggedMqttMessage> parseMessageLog(final List<String> messages,final ProgressUpdater progress,final long current,final long max) throws SpyException {
  try {
    final long startTime=TimeUtils.getMonotonicTime();
    final int items=messages.size();
    final long chunkSize=items / 10;
    final MqttMessageLogParser parser=new MqttMessageLogParser();
    final List<LoggedMqttMessage> list=new ArrayList<LoggedMqttMessage>();
    long item=0;
    long reportAt=1;
    for (int i=0; i < items; i++) {
      final String message=messages.get(i);
      if (progress != null) {
        if (progress.isCancelled()) {
          logger.info("Task cancelled!");
          return null;
        }
        item++;
        if (item % 1000 == 0) {
          progress.update(current + item,max);
        }
      }
      if ((i > 0) && (i == (chunkSize * reportAt))) {
        final long currentTime=TimeUtils.getMonotonicTime();
        final long timeTaken=currentTime - startTime;
        final long totalTimeExpected=timeTaken * items / i;
        if (timeTaken > 1000) {
          logger.info("Processed {}%, estimated time left = {}s",reportAt * 10,(totalTimeExpected - timeTaken) / 1000);
        }
        reportAt++;
      }
      try {
        list.add(parser.parse(message));
      }
 catch (      XMLException e) {
        logger.error("Can't process message " + message,e);
      }
    }
    logger.info("Message audit log - parsed {} XML messages",list.size());
    return list;
  }
 catch (  XMLException e) {
    throw new SpyException("Can't parse the message audit log file",e);
  }
}

private void recomputeSeperation(double[][] means,double[] sep){
  final int k=means.length;
  assert (sep.length == k);
  boolean issquared=(distanceFunction instanceof SquaredEuclideanDistanceFunction);
  Arrays.fill(sep,Double.POSITIVE_INFINITY);
  for (int i=1; i < k; i++) {
    DoubleVector m1=DoubleVector.wrap(means[i]);
    for (int j=0; j < i; j++) {
      double d=distanceFunction.distance(m1,DoubleVector.wrap(means[j]));
      sep[i]=(d < sep[i]) ? d : sep[i];
      sep[j]=(d < sep[j]) ? d : sep[j];
    }
  }
  for (int i=0; i < k; i++) {
    sep[i]=issquared ? Math.sqrt(sep[i]) : sep[i];
    sep[i]*=.5;
  }
}

private int transition(int state,int symbol){
  for (int i=state; i < transitions.length; i++) {
    if ((transitions[i] % vocabularySize) == symbol) {
      return (transitions[i] / vocabularySize);
    }
  }
  return -1;
}

public synchronized CeylonConfig merge(CeylonConfig other){
  for (  String key : other.getOptionNames(null)) {
    String[] values=other.getOptionValues(key);
    setOptionValues(key,values);
  }
  return this;
}

public static synchronized String rot13(String input){
  StringBuffer output=new StringBuffer();
  if (input != null) {
    for (int i=0; i < input.length(); i++) {
      char inChar=input.charAt(i);
      if ((inChar >= 'A') & (inChar <= 'Z')) {
        inChar+=13;
        if (inChar > 'Z') {
          inChar-=26;
        }
      }
      if ((inChar >= 'a') & (inChar <= 'z')) {
        inChar+=13;
        if (inChar > 'z') {
          inChar-=26;
        }
      }
      output.append(inChar);
    }
  }
  return output.toString();
}

private long monthRange(){
  ValueRange startRange=chrono.range(MONTH_OF_YEAR);
  if (startRange.isFixed() && startRange.isIntValue()) {
    return startRange.getMaximum() - startRange.getMinimum() + 1;
  }
  return -1;
}

public void animate(MarkerWithPosition marker,LatLng from,LatLng to){
  lock.lock();
  mAnimationTasks.add(new AnimationTask(marker,from,to));
  lock.unlock();
}

@Override public int compareTo(ComponentDescription o){
  int myPos=0;
  int oPos=0;
  if (this instanceof LanguageComponentDescription) {
    myPos=5;
  }
 else   if (this instanceof VoiceComponentDescription) {
    myPos=10;
  }
  if (o instanceof LanguageComponentDescription) {
    oPos=5;
  }
 else   if (o instanceof VoiceComponentDescription) {
    oPos=10;
  }
  if (oPos - myPos != 0) {
    return (oPos - myPos);
  }
  return name.compareTo(o.name);
}

public boolean[] testToString(){
  return super.testToString();
}

public static byte[] escapeEasternUnicodeByteStream(byte[] origBytes,String origString){
  if (origBytes == null) {
    return null;
  }
  if (origBytes.length == 0) {
    return new byte[0];
  }
  int bytesLen=origBytes.length;
  int bufIndex=0;
  int strIndex=0;
  ByteArrayOutputStream bytesOut=new ByteArrayOutputStream(bytesLen);
  while (true) {
    if (origString.charAt(strIndex) == '\\') {
      bytesOut.write(origBytes[bufIndex++]);
    }
 else {
      int loByte=origBytes[bufIndex];
      if (loByte < 0) {
        loByte+=256;
      }
      bytesOut.write(loByte);
      if (loByte >= 0x80) {
        if (bufIndex < (bytesLen - 1)) {
          int hiByte=origBytes[bufIndex + 1];
          if (hiByte < 0) {
            hiByte+=256;
          }
          bytesOut.write(hiByte);
          bufIndex++;
          if (hiByte == 0x5C) {
            bytesOut.write(hiByte);
          }
        }
      }
 else       if (loByte == 0x5c) {
        if (bufIndex < (bytesLen - 1)) {
          int hiByte=origBytes[bufIndex + 1];
          if (hiByte < 0) {
            hiByte+=256;
          }
          if (hiByte == 0x62) {
            bytesOut.write(0x5c);
            bytesOut.write(0x62);
            bufIndex++;
          }
        }
      }
      bufIndex++;
    }
    if (bufIndex >= bytesLen) {
      break;
    }
    strIndex++;
  }
  return bytesOut.toByteArray();
}

private static StringBuilder dump(StringBuilder _lbuffer,long value){
  for (int j=0; j < 8; j++) {
    _lbuffer.append(CHARS[(int)(value >> SHIFTS[j]) & 15]);
  }
  return _lbuffer;
}

@Override protected void onMeasure(int widthMeasureSpec,int heightMeasureSpec){
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
  int sizeWidth=MeasureSpec.getSize(widthMeasureSpec) - getPaddingLeft() - getPaddingRight();
  int sizeHeight=MeasureSpec.getSize(heightMeasureSpec);
  int modeWidth=MeasureSpec.getMode(widthMeasureSpec);
  int modeHeight=MeasureSpec.getMode(heightMeasureSpec);
  int width=0;
  int height=getPaddingTop() + getPaddingBottom();
  int lineWidth=0;
  int lineHeight=0;
  int childCount=getChildCount();
  for (int i=0; i < childCount; i++) {
    View child=getChildAt(i);
    boolean lastChild=i == childCount - 1;
    if (child.getVisibility() == View.GONE) {
      if (lastChild) {
        width=Math.max(width,lineWidth);
        height+=lineHeight;
      }
      continue;
    }
    measureChildWithMargins(child,widthMeasureSpec,lineWidth,heightMeasureSpec,height);
    LayoutParams lp=(LayoutParams)child.getLayoutParams();
    int childWidthMode=MeasureSpec.AT_MOST;
    int childWidthSize=sizeWidth;
    int childHeightMode=MeasureSpec.AT_MOST;
    int childHeightSize=sizeHeight;
    if (lp.width == LayoutParams.MATCH_PARENT) {
      childWidthMode=MeasureSpec.EXACTLY;
      childWidthSize-=lp.leftMargin + lp.rightMargin;
    }
 else     if (lp.width >= 0) {
      childWidthMode=MeasureSpec.EXACTLY;
      childWidthSize=lp.width;
    }
    if (lp.height >= 0) {
      childHeightMode=MeasureSpec.EXACTLY;
      childHeightSize=lp.height;
    }
 else     if (modeHeight == MeasureSpec.UNSPECIFIED) {
      childHeightMode=MeasureSpec.UNSPECIFIED;
      childHeightSize=0;
    }
    child.measure(MeasureSpec.makeMeasureSpec(childWidthSize,childWidthMode),MeasureSpec.makeMeasureSpec(childHeightSize,childHeightMode));
    int childWidth=child.getMeasuredWidth() + lp.leftMargin + lp.rightMargin;
    if (lineWidth + childWidth > sizeWidth) {
      width=Math.max(width,lineWidth);
      lineWidth=childWidth;
      height+=lineHeight;
      lineHeight=child.getMeasuredHeight() + lp.topMargin + lp.bottomMargin;
    }
 else {
      lineWidth+=childWidth;
      lineHeight=Math.max(lineHeight,child.getMeasuredHeight() + lp.topMargin + lp.bottomMargin);
    }
    if (lastChild) {
      width=Math.max(width,lineWidth);
      height+=lineHeight;
    }
  }
  width+=getPaddingLeft() + getPaddingRight();
  setMeasuredDimension((modeWidth == MeasureSpec.EXACTLY) ? sizeWidth : width,(modeHeight == MeasureSpec.EXACTLY) ? sizeHeight : height);
}

public UnionMemberDescriptionWithError(IEObjectDescription delegate,ComposedTypeRef composedTypeRef,IScope[] subScopes,boolean writeAccess){
  super(delegate);
  this.composedTypeRef=composedTypeRef;
  this.subScopes=subScopes;
  max=subScopes.length;
  this.writeAccess=writeAccess;
}

private void readObject(ObjectInputStream oos) throws IOException, ClassNotFoundException {
  iInstant=(DateMidnight)oos.readObject();
  DateTimeFieldType type=(DateTimeFieldType)oos.readObject();
  iField=type.getField(iInstant.getChronology());
}

public void generateLootChest(World world,Random random,BlockPos pos,int min,int max,IBlockState state,ResourceLocation lootTable){
  world.setBlockState(pos,state,3);
  TileEntityChest chest=(TileEntityChest)world.getTileEntity(pos);
  if (chest != null)   chest.setLootTable(lootTable,random.nextLong());
}

private void drawAutoHit(Graphics g,Coords hex){
  int baseX=(hex.getX() * (hexSide[zoom] + hexSideBySin30[zoom])) + leftMargin + hexSide[zoom];
  int baseY=(((2 * hex.getY()) + 1 + (hex.getX() % 2)) * hexSideByCos30[zoom]) + topMargin;
  Color alt=g.getColor();
  g.setColor(Color.RED);
  g.drawOval(baseX - (unitSize - 1),baseY - (unitSize - 1),(2 * unitSize) - 2,(2 * unitSize) - 2);
  g.drawLine(baseX - unitSize - 1,baseY,(baseX - unitSize) + 3,baseY);
  g.drawLine(baseX + unitSize + 1,baseY,(baseX + unitSize) - 3,baseY);
  g.drawLine(baseX,baseY - unitSize - 1,baseX,(baseY - unitSize) + 3);
  g.drawLine(baseX,baseY + unitSize + 1,baseX,(baseY + unitSize) - 3);
  g.setColor(alt);
}

public void remove() throws RecurrenceRuleException {
  try {
    rule.remove();
  }
 catch (  GenericEntityException e) {
    throw new RecurrenceRuleException(e.getMessage(),e);
  }
}

private boolean shouldBeEscaped(char c){
  return c < ' ' || (c >= '\u0080' && c < '\u00a0') || (c >= '\u2000' && c < '\u2100');
}

public CEventTableMenu(final JTable table,final List<ITraceEvent> traces){
  addOpenFunction(SwingUtilities.getWindowAncestor(table),traces);
  add(new JMenuItem(CActionProxy.proxy(new CSearchTableAction(SwingUtilities.getWindowAncestor(table),table))));
  add(new CopySelectionAction(table));
}

@Override public int available() throws IOException {
  return (outBytes_.length + inputStream_.available());
}

public boolean checkError(){
  return pw.checkError();
}

public Criteria createCriteria(){
  Criteria criteria=createCriteriaInternal();
  if (oredCriteria.size() == 0) {
    oredCriteria.add(criteria);
  }
  return criteria;
}

public void addBugPattern(BugPattern bugPattern){
  bugPatterns.add(bugPattern);
}

public SpiderGitParser(SpiderParam params){
  super();
  this.params=params;
}

public void onRetry(int retryNo){
  Log.d(LOG_TAG,String.format("Request retry no. %d",retryNo));
}

protected void analyzeDtoSetterMethod(Method method,MethodModel methodModel){
  methodModel.setSetter(true);
  Type fieldType=method.getGenericParameterTypes()[0];
  String fieldName=getSetterFieldName(method);
  fieldAttributes.put(fieldName,fieldType);
  methodModel.setFieldName(fieldName);
  methodModel.setFieldType(convertType(fieldType));
}

public static String loadLastColor(Context context){
  try {
    SharedPreferences sharedPreferences=context.getSharedPreferences("colpick",Context.MODE_PRIVATE);
    String s=sharedPreferences.getString(SP_KEY_LAST_COLOR,null);
    Color.parseColor(s);
    return s;
  }
 catch (  Exception e) {
    e.printStackTrace();
    return null;
  }
}

public BevelBorder(int bevelType,Color highlight,Color shadow){
  this(bevelType,highlight.brighter(),highlight,shadow,shadow.brighter());
}

protected final void refreshSessionLayer(final Location location){
  if (!mRefreshSessionPending && isVisible()) {
    Log.d(TAG,"Updating session layer");
    mRefreshSessionPending=true;
    triggerSessionObjectsUpdate(null);
    sessionObjectsRefreshTime=System.currentTimeMillis();
    sessionObjectsRefreshedAt=location;
  }
 else   if (!isVisible()) {
    Log.v(TAG,"Not visible, skipping refresh");
  }
 else {
    Log.v(TAG,"Session layer is refreshing. Skipping refresh..");
  }
}

public static int mDateGap(String dayName){
  Log.d("dayname",dayName);
  if (dayName.equals("mon")) {
    return 1;
  }
 else   if (dayName.equals("tue")) {
    return 2;
  }
 else   if (dayName.equals("wed")) {
    return 3;
  }
 else   if (dayName.equals("thu")) {
    return 4;
  }
 else   if (dayName.equals("fri")) {
    return 5;
  }
 else   if (dayName.equals("sat")) {
    return 6;
  }
 else {
    return 0;
  }
}

public static String removeAdditionalParty(HttpServletRequest request,HttpServletResponse response){
  ShoppingCart cart=getCartObject(request);
  String partyId=request.getParameter("additionalPartyId");
  String roleTypeId[]=request.getParameterValues("additionalRoleTypeId");
  List<String> eventList=new LinkedList<String>();
  Locale locale=UtilHttp.getLocale(request);
  int i;
  if (UtilValidate.isEmpty(partyId) || roleTypeId.length < 1) {
    request.setAttribute("_ERROR_MESSAGE_",UtilProperties.getMessage(resource_error,"OrderPartyIdAndOrRoleTypeIdNotDefined",locale));
    return "error";
  }
  if (request.getAttribute("_EVENT_MESSAGE_LIST_") != null) {
    List<String> msg=UtilGenerics.checkList(request.getAttribute("_EVENT_MESSAGE_LIST_"));
    eventList.addAll(msg);
  }
  for (i=0; i < roleTypeId.length; i++) {
    try {
      cart.removeAdditionalPartyRole(partyId,roleTypeId[i]);
    }
 catch (    Exception e) {
      Debug.logInfo(e.getLocalizedMessage(),module);
      eventList.add(e.getLocalizedMessage());
    }
  }
  request.removeAttribute("_EVENT_MESSAGE_LIST_");
  request.setAttribute("_EVENT_MESSAGE_LIST_",eventList);
  return "success";
}

public Map<String,String[]> crop(final Map<String,String[]> original){
  Map<String,String[]> result=new HashMap<String,String[]>(original.size());
  for (  Map.Entry<String,String[]> entry : original.entrySet()) {
    String key=entry.getKey();
    if (null == key) {
      continue;
    }
    String[] value=entry.getValue();
    String[] convertedValue;
    if (null == value) {
      convertedValue=new String[1];
      convertedValue[0]="<notset>";
    }
 else {
      boolean croppingWasNeeded=false;
      convertedValue=value;
      for (int i=0, l=value.length; i < l; i++) {
        String curValue=value[i];
        String croppingResult=crop(curValue);
        if ((curValue != croppingResult) & !croppingWasNeeded) {
          croppingWasNeeded=true;
          convertedValue=new String[value.length];
          System.arraycopy(value,0,convertedValue,0,i);
          convertedValue[i]=croppingResult;
        }
        if (croppingWasNeeded) {
          convertedValue[i]=croppingResult;
        }
      }
    }
    result.put(key,convertedValue);
  }
  return result;
}

@Override int lookForSelectablePosition(int position,boolean lookDown){
  final ListAdapter adapter=mAdapter;
  if (adapter == null || isInTouchMode()) {
    return INVALID_POSITION;
  }
  final int count=adapter.getCount();
  if (!mAreAllItemsSelectable) {
    if (lookDown) {
      position=Math.max(0,position);
      while (position < count && !adapter.isEnabled(position)) {
        position++;
      }
    }
 else {
      position=Math.min(position,count - 1);
      while (position >= 0 && !adapter.isEnabled(position)) {
        position--;
      }
    }
    if (position < 0 || position >= count) {
      return INVALID_POSITION;
    }
    return position;
  }
 else {
    if (position < 0 || position >= count) {
      return INVALID_POSITION;
    }
    return position;
  }
}

@Override public void deleteBCVHelperVolume(StorageSystem storageSystem,Volume volume) throws Exception {
  _log.info(String.format("Start executing BCV helper volume from array: %s, for volume: %s",storageSystem.getId(),volume.getId()));
  try {
    String deviceName=volume.getNativeId();
    String deviceNameWithoutLeadingZeros=deviceName.replaceAll("^0*","");
    String query=String.format("SELECT CIM_StorageVolume.%s, CIM_StorageVolume.%s  FROM CIM_StorageVolume where CIM_StorageVolume.%s ='SMI_BCV_META_%s'",SmisConstants.CP_ELEMENT_NAME,SmisConstants.CP_DEVICE_ID,SmisConstants.CP_ELEMENT_NAME,deviceNameWithoutLeadingZeros);
    String queryLanguage="CQL";
    List<CIMInstance> bcvVolumeInstanceList=_helper.executeQuery(storageSystem,query,queryLanguage);
    if (bcvVolumeInstanceList == null || bcvVolumeInstanceList.isEmpty()) {
      query=String.format("SELECT CIM_StorageVolume.%s, CIM_StorageVolume.%s FROM CIM_StorageVolume where CIM_StorageVolume.%s ='SMI_BCV_META_%s'",SmisConstants.CP_ELEMENT_NAME,SmisConstants.CP_DEVICE_ID,SmisConstants.CP_ELEMENT_NAME,deviceName);
      bcvVolumeInstanceList=_helper.executeQuery(storageSystem,query,queryLanguage);
    }
    String elementName=null;
    String nativeId=null;
    CIMInstance bcvVolumeInstance=null;
    if (bcvVolumeInstanceList != null && !bcvVolumeInstanceList.isEmpty()) {
      bcvVolumeInstance=bcvVolumeInstanceList.get(0);
      elementName=CIMPropertyFactory.getPropertyValue(bcvVolumeInstance,SmisConstants.CP_ELEMENT_NAME);
      nativeId=CIMPropertyFactory.getPropertyValue(bcvVolumeInstance,SmisConstants.CP_DEVICE_ID);
      _log.info(String.format("Found BCV helper volume: %s, nativeId: %s",elementName,nativeId));
    }
 else {
      _log.warn(String.format("Could not find BCV helper volume for volume: %s, nativeId: %s",volume.getId(),volume.getNativeId()));
      return;
    }
    _log.info(String.format("Executing delete of BCV helper volume: " + nativeId));
    String[] nativeIds=new String[]{nativeId};
    CIMObjectPath configSvcPath=_cimPath.getConfigSvcPath(storageSystem);
    CIMArgument[] inArgs=_helper.getDeleteVolumesInputArguments(storageSystem,nativeIds);
    CIMArgument[] outArgs=new CIMArgument[5];
    String returnElementsMethod;
    if (storageSystem.getUsingSmis80()) {
      returnElementsMethod=SmisConstants.RETURN_ELEMENTS_TO_STORAGE_POOL;
    }
 else {
      returnElementsMethod=SmisConstants.EMC_RETURN_TO_STORAGE_POOL;
    }
    _helper.invokeMethodSynchronously(storageSystem,configSvcPath,returnElementsMethod,inArgs,outArgs,null);
    _log.info(String.format("Deleted BCV helper volume: " + nativeId));
  }
 catch (  Exception ex) {
    _log.error(String.format("Failed to delete BCV helper volume from array: %s, for volume: %s",storageSystem.getId(),volume.getId()));
  }
}

public void populateBottomTabItems(@NonNull BottomTabsBuilder builder){
  if (mContainer.getChildCount() >= MIN_BOTTOM_NAVIGATION_ITEMS) {
    checkBottomItemGuidelines(mContainer.getChildCount());
  }
  List<BottomNavigationItem> build=builder.build();
  for (int i=0; i < build.size(); i++) {
    BottomNavigationItem item=build.get(i);
    item.setPosition(i);
    addBottomNavigationItem(item);
  }
  updateBottomNavViews();
  selectTabView();
}

public final int skipBytes(int count) throws java.io.IOException {
  int skipped=0;
  long skip;
  while (skipped < count && (skip=in.skip(count - skipped)) != 0) {
    skipped+=skip;
  }
  return skipped;
}

public GeneralAndersonDarlingTest(List<Double> data,RealDistribution dist){
  if (dist == null) {
    throw new NullPointerException();
  }
  this.dist=dist;
  Collections.sort(data);
  this.data=data;
  runTest();
}

private final void insert(Object text){
  buf.insert(buf.length() - 1," ");
  buf.insert(buf.length() - 1,text);
}

public static void splitTextures(File destination,File texturePack,double scale,boolean alphas,ProgressCallback progress) throws Exception {
  if (destination == null)   throw new IllegalArgumentException("destination cannot be null");
  Log.info("Exporting textures to \"" + destination + "\"");
  if (!destination.exists() || !destination.isDirectory()) {
    if (destination.exists())     throw new RuntimeException("Cannot create texture directory! File is in the way!");
    if (!destination.mkdir())     throw new RuntimeException("Cannot create texture directory!");
  }
  getTextures(texturePack,scale,progress,alphas,false,destination);
}

public void testBuilder_RootOnConstruct_MultipleAppends(){
  SQLException root=new SQLException();
  List<SQLException> additionalExceptions=new ArrayList<SQLException>();
  for (int count=1; count <= 3; count++) {
    additionalExceptions.add(new SQLException(Integer.toString(count)));
  }
  SQLExceptionChainBuilder<SQLException> builder=new SQLExceptionChainBuilder<SQLException>(root);
  for (  SQLException ex : additionalExceptions) {
    builder.append(ex);
  }
  assertTrue("SQLExceptionChainBuilder has a exception",builder.hasException());
  SQLException resultException=builder.getException();
  assertSame("Expected root exception to be identical to returned exception",root,resultException);
  checkExceptionChain(resultException,additionalExceptions);
}

protected synchronized String nextCnxKey(){
  if (connectionsCounter == Integer.MAX_VALUE)   connectionsCounter=0;
  connectionsCounter++;
  int randLong=random.nextInt(Integer.MAX_VALUE);
  return connectionsCounter + (randLong + "_" + ID_SUFFIX);
}

public static boolean copyFileSafe(final Path srcFile,final Path destFile) throws IOException {
  return copyFileSafe(srcFile,destFile,false);
}

public static boolean isHeader(Header header){
  String xten=header.getStringValue(XTENSION);
  if (xten == null) {
    return false;
  }
  xten=xten.trim();
  return xten.equals(XTENSION_BINTABLE) || xten.equals("A3DTABLE");
}

final void putFloat(int offset,float value){
  unsafe.putFloat(offset + address,value);
}

public void doctypeDecl(String rootElement,String publicId,String systemId,Augmentations augs) throws XNIException {
  fInDTD=true;
  try {
    if (fLexicalHandler != null) {
      fLexicalHandler.startDTD(rootElement,publicId,systemId);
    }
  }
 catch (  SAXException e) {
    throw new XNIException(e);
  }
  if (fDeclHandler != null) {
    fDeclaredAttrs=new SymbolHash();
  }
}

@VisibleForTesting static OMAEntry parseOMAEntry(String entry){
  int index=entry.indexOf(",");
  long downloadId=Long.parseLong(entry.substring(0,index));
  return new OMAEntry(downloadId,entry.substring(index + 1));
}

public void parse() throws IOException {
  long length=0;
  try {
    length=file.length();
  }
 catch (  IOException e) {
    throw new IOException("Wrong size");
  }
  try {
    parse("",length);
  }
 catch (  IOException e) {
    throw new IOException("Parse error: malformed mp4 file");
  }
}

public void test_SelectUnionItself() throws SQLException {
  String sql="SELECT b.cnum, b.cname" + " FROM " + DatabaseCreator.CUSTOMERS_TABLE + " a, "+ DatabaseCreator.CUSTOMERS_TABLE+ " b"+ " WHERE a.snum = 1002"+ " AND b.city = a.city";
  ResultSet result=statement.executeQuery(sql);
  HashMap<Integer,String> value=new HashMap<Integer,String>();
  value.put(2003,"Liu");
  value.put(2004,"Grass");
  value.put(2008,"Cisneros");
  while (result.next()) {
    int key=result.getInt("cnum");
    String val=result.getString("cname");
    assertTrue("wrong value of cnum field",value.containsKey(key));
    assertEquals("wrong value of cname field",value.get(key),val);
    value.remove(key);
  }
  assertTrue("expected rows number doesn't equal actual rows number",value.isEmpty());
  result.close();
}

public ReflectiveProperty(Class<T> propertyHolder,Class<V> valueType,String name){
  super(valueType,name);
  char firstLetter=Character.toUpperCase(name.charAt(0));
  String theRest=name.substring(1);
  String capitalizedName=firstLetter + theRest;
  String getterName=PREFIX_GET + capitalizedName;
  try {
    mGetter=propertyHolder.getMethod(getterName,(Class<?>[])null);
  }
 catch (  NoSuchMethodException e) {
    try {
      mGetter=propertyHolder.getDeclaredMethod(getterName,(Class<?>[])null);
      mGetter.setAccessible(true);
    }
 catch (    NoSuchMethodException e2) {
      getterName=PREFIX_IS + capitalizedName;
      try {
        mGetter=propertyHolder.getMethod(getterName,(Class<?>[])null);
      }
 catch (      NoSuchMethodException e3) {
        try {
          mGetter=propertyHolder.getDeclaredMethod(getterName,(Class<?>[])null);
          mGetter.setAccessible(true);
        }
 catch (        NoSuchMethodException e4) {
          try {
            mField=propertyHolder.getField(name);
            Class fieldType=mField.getType();
            if (!typesMatch(valueType,fieldType)) {
              throw new NoSuchPropertyException("Underlying type (" + fieldType + ") "+ "does not match Property type ("+ valueType+ ")");
            }
            return;
          }
 catch (          NoSuchFieldException e5) {
            throw new NoSuchPropertyException("No accessor method or field found for" + " property with name " + name);
          }
        }
      }
    }
  }
  Class getterType=mGetter.getReturnType();
  if (!typesMatch(valueType,getterType)) {
    throw new NoSuchPropertyException("Underlying type (" + getterType + ") "+ "does not match Property type ("+ valueType+ ")");
  }
  String setterName=PREFIX_SET + capitalizedName;
  try {
    mSetter=propertyHolder.getDeclaredMethod(setterName,getterType);
    mSetter.setAccessible(true);
  }
 catch (  NoSuchMethodException ignored) {
  }
}

public CFunctionTypePanel(final ListenerProvider<IFilterDialogListener> listeners){
  super(new BorderLayout());
  m_listeners=listeners;
  final JPanel innerPanel=new JPanel(new GridLayout(5,1));
  innerPanel.add(buildRow("Normal functions",m_normalFunctionCheckbox));
  innerPanel.add(buildRow("Imported functions",m_importedFunctionCheckbox));
  innerPanel.add(buildRow("Library functions",m_libraryFunctionCheckbox));
  innerPanel.add(buildRow("Thunk functions",m_thunkFunctionCheckbox));
  innerPanel.add(buildRow("Thunk adjustor functions",m_adjustorFunctionCheckbox));
  add(innerPanel,BorderLayout.NORTH);
  setBorder(new TitledBorder("Function type"));
}

public DragContext(Node draggable){
  this.node=draggable;
  this.goToForegroundOnContact=true;
  this.touchId=NULL_ID;
  this.activated=false;
  this.dragLimits=new BoundingBox(0,0,Integer.MAX_VALUE,Integer.MAX_VALUE);
  this.dragThreshold=10.0;
  this.dragStarted=false;
  this.relocateThreshold=1.0;
  this.dragInitAction=null;
  this.dragFinishAction=null;
  touchHandler=null;
  mouseHandler=null;
  draggable.addEventHandler(TouchEvent.ANY,touchHandler);
  draggable.addEventHandler(MouseEvent.ANY,mouseHandler);
}

protected X509Certificate[] openCertificate(File certificateFile){
  try {
    FileInputStream is=new FileInputStream(certificateFile);
    return openCertificate(is,certificateFile.getName());
  }
 catch (  FileNotFoundException ex) {
    JOptionPane.showMessageDialog(frame,MessageFormat.format(res.getString("KeyStoreExplorerAction.NoReadFile.message"),certificateFile),res.getString("KeyStoreExplorerAction.OpenCertificate.Title"),JOptionPane.WARNING_MESSAGE);
    return null;
  }
}

public ShapeTileSimplex(PlaLineIntAlist p_line_alist){
  lines_list=new ArrayList<PlaLineInt>(p_line_alist.size());
  for (  PlaLineInt a_line : p_line_alist)   lines_list.add(a_line);
  Collections.sort(lines_list);
}

public ProperFractionFormat(NumberFormat format){
  this(format,(NumberFormat)format.clone(),(NumberFormat)format.clone());
}

private File createCaptureFile(int encodingType){
  return createCaptureFile(encodingType,"");
}

public double[][] extractMainSetJacobian(final ODEState state){
  final double[] p=state.getSecondaryState(index);
  final double[][] dYdY0=new double[jode.getDimension()][jode.getDimension()];
  int j=0;
  for (int i=0; i < jode.getDimension(); i++) {
    System.arraycopy(p,j,dYdY0[i],0,jode.getDimension());
    j+=jode.getDimension();
  }
  return dYdY0;
}

public static String byteToHexString(byte[] byteArray){
  StringBuilder builder=new StringBuilder();
  for (int i=0; i < byteArray.length; i++) {
    int byteCode=byteArray[i] & 0xFF;
    if (byteCode < 0x10) {
      builder.append(0);
    }
    builder.append(Integer.toHexString(byteCode));
  }
  return builder.toString();
}

public static void assertNotEqual(Object expected,Object actual){
  if (verbose) {
    log("assertNotEqual(" + expected + ", "+ actual+ ")");
  }
  TestUtils.assertBool(!expected.equals(actual));
}

private boolean isEmpty(String value){
  return value.length() == 0;
}

private void disposeCodec(IoSession session){
  disposeEncoder(session);
  disposeDecoder(session);
  disposeDecoderOut(session);
}

public static ObjectStreamClass lookupAny(Class<?> cl){
  return lookupStreamClass(cl);
}

public static void main(String[] args){
  try {
    int serverPort=Integer.parseInt(System.getProperty("net.floodlightcontroller.packetstreamer.port","9090"));
    TTransport transport;
    transport=new TFramedTransport(new TSocket("localhost",serverPort));
    transport.open();
    TProtocol protocol=new TBinaryProtocol(transport);
    PacketStreamer.Client client=new PacketStreamer.Client(protocol);
    sendPackets(client,(short)2,OFMessageType.PACKET_IN,true);
    log.debug("Terminate session1");
    client.terminateSession("session1");
    transport.close();
  }
 catch (  TException x) {
    x.printStackTrace();
  }
}

public ConfigurationParser(boolean verify,ClassLoader loader) throws ParserConfigurationException {
  factory=DocumentBuilderFactory.newInstance();
  factory.setValidating(verify);
  factory.setNamespaceAware(true);
  factory.setExpandEntityReferences(true);
  factory.setCoalescing(true);
  builder=factory.newDocumentBuilder();
  if (verify)   builder.setErrorHandler(new XMLErrorHandler());
  if (loader == null)   throw new NullPointerException("loader is null");
}

TestEnvironment(SystemTestEnvironment systemTestEnvironment,Path workingDir,Path sourceDir,Path classDir,Path jacocoDir){
  this.systemTestEnvironment=systemTestEnvironment;
  this.workingDir=workingDir;
  this.sourceDir=sourceDir;
  this.classDir=classDir;
  this.jacocoDir=jacocoDir;
  this.testClassPath=systemTestEnvironment.classpath + ":" + classDir.toString();
}

public Application createJmxApplicationInteractive(String connectionString,String displayName,EnvironmentProvider provider,boolean persistent){
  return createJmxApplicationInteractive(connectionString,displayName,provider,persistent,false);
}

public static synchronized void removeProvider(int providerNumber){
  Provider p=providers.remove(providerNumber - 1);
  providersNames.remove(p.getName());
  setNeedRefresh();
}

public Object referenceInsert(String reference,Object value){
  String s=null;
  if (value != null) {
    s=REFERENCE_VALUE;
  }
 else {
    if (reference.equals("$floobie")) {
      s=NO_REFERENCE_VALUE;
    }
  }
  return s;
}

public GraphicComponent(GraphicAttribute graphic,Decoration decorator,int[] charsLtoV,byte[] levels,int start,int limit,AffineTransform baseTx){
  if (limit <= start) {
    throw new IllegalArgumentException("0 or negative length in GraphicComponent");
  }
  this.graphic=graphic;
  this.graphicAdvance=graphic.getAdvance();
  this.decorator=decorator;
  this.cm=createCoreMetrics(graphic);
  this.baseTx=baseTx;
  initLocalOrdering(charsLtoV,levels,start,limit);
}

public static boolean hasValidUserInContext(SecurityContext securityContext){
  if ((securityContext != null) && (securityContext.getUserPrincipal() instanceof StorageOSUser)) {
    return true;
  }
 else {
    return false;
  }
}

private void handleEndOfStream(State state,InnerState innerState) throws StopRequest {
  mInfo.mCurrentBytes=innerState.mBytesSoFar;
  mDB.updateDownload(mInfo);
  boolean lengthMismatched=(innerState.mHeaderContentLength != null) && (innerState.mBytesSoFar != Integer.parseInt(innerState.mHeaderContentLength));
  if (lengthMismatched) {
    if (cannotResume(innerState)) {
      throw new StopRequest(DownloaderService.STATUS_CANNOT_RESUME,"mismatched content length");
    }
 else {
      throw new StopRequest(getFinalStatusForHttpError(state),"closed socket before end of file");
    }
  }
}

public void add(String keyword,byte id){
  int key=getStringMapKey(keyword);
  map[key]=new Keyword(keyword.toCharArray(),id,map[key]);
}

public String toString(){
  return m_Formatter.format(getStamp());
}

private String secondsToTime(int seconds){
  String time="";
  String minutesText=String.valueOf(seconds / 60);
  if (minutesText.length() == 1)   minutesText="0" + minutesText;
  String secondsText=String.valueOf(seconds % 60);
  if (secondsText.length() == 1)   secondsText="0" + secondsText;
  time=minutesText + ":" + secondsText;
  return time;
}

private void processNewPort(DatapathId sw,OFPort p){
  if (isLinkDiscoverySuppressed(sw,p)) {
    return;
  }
  IOFSwitch iofSwitch=switchService.getSwitch(sw);
  if (iofSwitch == null) {
    return;
  }
  NodePortTuple npt=new NodePortTuple(sw,p);
  discover(sw,p);
  addToQuarantineQueue(npt);
}

public AmqpReceiver(AmqpSession session,String address,String receiverId){
  if (address != null && address.isEmpty()) {
    throw new IllegalArgumentException("Address cannot be empty.");
  }
  this.userSpecifiedSource=null;
  this.session=session;
  this.address=address;
  this.receiverId=receiverId;
}

private void notifyServiceMap(Object eventSource,long eventID,long seqNo,ServiceID sid,ServiceItem item,int transition){
  if (eventSource == null)   return;
synchronized (serviceIdMap) {
    ProxyReg reg=null;
    EventReg eReg=null;
    Set set=eventRegMap.entrySet();
    Iterator iter=set.iterator();
    while (iter.hasNext()) {
      Map.Entry e=(Map.Entry)iter.next();
      eReg=(EventReg)e.getValue();
      if (eventSource.equals(eReg.source) && (eventID == eReg.eventID)) {
        reg=(ProxyReg)e.getKey();
        break;
      }
    }
    if (reg == null)     return;
    long prevSeqNo=eReg.seqNo;
    eReg.seqNo=seqNo;
    CacheTask t;
    if (seqNo == (prevSeqNo + 1)) {
      t=new NotifyEventTask(lookupCacheClassLoader,reg,sid,item,transition,taskSeqN++);
    }
 else {
      t=new LookupTask(lookupCacheClassLoader,reg,taskSeqN++);
      if (logger.isLoggable(Levels.HANDLED)) {
        String msg="notifyServiceMap - GAP in event sequence " + "[serviceRegistrar={0}], " + "[serviceItem={1}, "+ "serviceID={2}], "+ "[eventSource={3}, "+ "eventID={4,number,#}, "+ "oldSeqN={5,number,#}, "+ "newSeqN={6,number,#}]";
        Object[] params=new Object[]{reg == null ? null : reg.proxy,item.service,sid,eventSource,new Long(eventID),new Long(prevSeqNo),new Long(seqNo)};
        logger.log(Levels.HANDLED,msg,params);
      }
    }
    cacheTaskMgr.add(t);
  }
}

@KnownFailure("Not supported ops applied: test fails on arguments: '', '', '%', '%' ") public void test_getColumnsTableWithNoCatalogSchema() throws SQLException {
  try {
    ResultSet noSchemaTable=meta.getColumns("","",DatabaseCreator.TEST_TABLE1,"fkey");
    assertNotNull(noSchemaTable);
    noSchemaTable.last();
    int size=noSchemaTable.getRow();
    assertEquals("Does not support empty string as input parameter or Wildcard %",1,size);
  }
 catch (  SQLException e) {
    fail("Unexpected exception: " + e.getMessage());
  }
  try {
    ResultSet noSchemaTable=meta.getColumns("","",DatabaseCreator.TEST_TABLE1,"%");
    assertNotNull(noSchemaTable);
    noSchemaTable.last();
    int size=noSchemaTable.getRow();
    assertEquals("Does not support empty string as input parameter or Wildcard %",5,size);
  }
 catch (  SQLException e) {
    fail("Unexpected exception: " + e.getMessage());
  }
  try {
    ResultSet noSchemaTable=meta.getColumns("","","%","%");
    assertNotNull(noSchemaTable);
    noSchemaTable.last();
    int size=noSchemaTable.getRow();
    assertEquals("Does not support double Wildcard '%' as input",6,size);
  }
 catch (  SQLException e) {
    fail("Unexpected exception: " + e.getMessage());
  }
  conn.close();
  try {
    meta.getColumns(null,null,DatabaseCreator.TEST_TABLE1,"%");
    fail("SQLException not thrown");
  }
 catch (  SQLException e) {
  }
}

public static byte readByte(){
  return scanner.nextByte();
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 0:
    return SUCCESS;
default :
  return null;
}
}

public static void d(String tag,String msg,Object... args){
  if (sLevel > LEVEL_DEBUG) {
    return;
  }
  if (args.length > 0) {
    msg=String.format(msg,args);
  }
  Log.d(tag,msg);
}

public void clearValueLocal(String columnHeader){
  values.remove(columnHeader.toLowerCase());
}

public List closeBucketAdvisors(){
  List primariesHeld=Collections.EMPTY_LIST;
  if (this.buckets != null) {
    for (int i=0; i < this.buckets.length; i++) {
      ProxyBucketRegion pbr=this.buckets[i];
      if (pbr.isPrimary()) {
        if (primariesHeld == Collections.EMPTY_LIST) {
          primariesHeld=new ArrayList();
        }
        primariesHeld.add(Integer.valueOf(i));
      }
      pbr.close();
    }
  }
  return primariesHeld;
}

public boolean isMacMuted(final String mac){
  final long muteTill=getMacUnmuteTime(mac);
  return muteTill > System.currentTimeMillis();
}

public abstract void insertSpillBefore(Instruction s,Register r,byte type,int location);

static public Test suite(){
  return ProxySuiteHelper.suiteWhenStandalone(TestSparqlUpdate.class,"test.*",new LinkedHashSet<BufferMode>(Arrays.asList(new BufferMode[]{BufferMode.Transient,BufferMode.DiskWORM,BufferMode.MemStore,BufferMode.DiskRW})),TestMode.quads);
}

private synchronized void cleanupIsComplexTypeAttribute(){
  firstAttribute=null;
  remainingAttributes.clear();
  isComplexTypeAttribute=false;
}

public static String leftTrim(final String value){
  validate(value,NULL_STRING_PREDICATE,NULL_STRING_MSG_SUPPLIER);
  return value.replaceAll("^\\s+","");
}

public float polarAngle(){
  return (float)Math.toDegrees(angle());
}

public String checkParamsNonNegative(){
  String ret="";
  if (param1 < 0) {
    ret=ret.concat(pdf.getParam1Name() + " is negative. \n");
  }
  if (param2 < 0) {
    ret=ret.concat(pdf.getParam2Name() + " is negative. \n");
  }
  if (upperBound < 0) {
    ret=ret.concat("Upper boundary is negative. \n");
  }
  if (lowerBound < 0) {
    ret=ret.concat("Lower boundary is negative. \n");
  }
  return ret;
}

public static boolean validate(String str,String regEx,Debug tmpDebug){
  debug=tmpDebug;
  if (str == null || str.length() == 0) {
    debug.message("Source string is null or empty");
    return false;
  }
  char[] value=str.toCharArray();
  int count=value.length;
  Set hSet=new HashSet();
  StringTokenizer st=new StringTokenizer(regEx,SEPERATOR);
  while (st.hasMoreTokens()) {
    hSet.add(st.nextToken());
  }
  Iterator itr=hSet.iterator();
  while (itr.hasNext()) {
    String obj=(String)itr.next();
    if (process(value,obj,0,count) > -1) {
      debug.message("detected invalid chars ...");
      return false;
    }
  }
  return true;
}

public static float turbulence2(float x,float y,float octaves){
  float t=0.0f;
  for (float f=1.0f; f <= octaves; f*=2)   t+=Math.abs(noise2(f * x,f * y)) / f;
  return t;
}

public void addMapObject(InternalMapObject mapObject){
  mapObjects.add(mapObject);
}

public List<MockResponse> enqueue(String... paths){
  if (paths == null) {
    return null;
  }
  List<MockResponse> mockResponseList=new ArrayList<>();
  for (  String path : paths) {
    Fixture fixture=Fixture.parseFrom(path,parser);
    MockResponse mockResponse=new MockResponse();
    if (fixture.statusCode != 0) {
      mockResponse.setResponseCode(fixture.statusCode);
    }
    if (fixture.body != null) {
      mockResponse.setBody(fixture.body);
    }
    if (fixture.delay != 0) {
      mockWebServer.setDispatcher(new DelayedDispatcher(fixture.delay,TimeUnit.MILLISECONDS));
    }
    if (fixture.headers != null) {
      for (      String header : fixture.headers) {
        mockResponse.addHeader(header);
      }
    }
    mockWebServer.enqueue(mockResponse);
    mockResponseList.add(mockResponse);
  }
  return mockResponseList;
}

@Override public void endOfStream() throws AdeException {
  double minProb=1;
  if (m_totalIntervalCount == 0) {
    m_totalIntervalCount=1;
  }
  for (  Entry<String,BernoulliScore.MsgData> entry : m_msgData.entrySet()) {
    final FullBernoulliMsgData data=(FullBernoulliMsgData)entry.getValue();
    data.m_prob=((double)data.m_count + 0.5) / (m_totalIntervalCount + 1.0);
    if (data.m_prob < 0 || data.m_prob >= 1.0) {
      logger.info(entry.getKey() + ":  bad m_prob: " + data.m_prob+ "="+ data.m_count+ "+0.5 / "+ m_totalIntervalCount+ "+1");
    }
    if (data.m_prob < minProb) {
      minProb=data.m_prob;
    }
    data.m_outOfClusterProb=((double)data.m_outOfClusterCount + 0.5) / (m_totalIntervalCount + 1.0);
    if (data.m_outOfClusterCount < minProb && data.m_outOfClusterCount > 0.0) {
      minProb=data.m_outOfClusterCount;
    }
  }
  for (  BernoulliScore.MsgData dataSuper : m_msgData.values()) {
    final FullBernoulliMsgData data=(FullBernoulliMsgData)dataSuper;
    final double probability=data.m_prob;
    data.m_score=-Math.log(probability);
    if (data.m_score > 1) {
      data.m_score=1;
    }
    final double outOfContextProbability=data.m_outOfClusterProb;
    data.m_outOfContextScore=-Math.log(outOfContextProbability);
    if (data.m_outOfContextScore > 1) {
      data.m_outOfContextScore=1;
    }
  }
  m_trained=true;
}

public boolean hasNextKeyTyped(){
synchronized (keyLock) {
    return !keysTyped.isEmpty();
  }
}

public void addOperator(Variation operator){
  operators.add(operator);
}

public R paramsToMultipartEntity(boolean isrepeatable){
  try {
    mHttpEntity=createMultipartEntity(isrepeatable);
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  return (R)this;
}

private static int parseInt(String value,int beginIndex,int endIndex) throws NumberFormatException {
  if (beginIndex < 0 || endIndex > value.length() || beginIndex > endIndex) {
    throw new NumberFormatException(value);
  }
  int i=beginIndex;
  int result=0;
  int digit;
  if (i < endIndex) {
    digit=Character.digit(value.charAt(i++),10);
    if (digit < 0) {
      throw new NumberFormatException("Invalid number: " + value.substring(beginIndex,endIndex));
    }
    result=-digit;
  }
  while (i < endIndex) {
    digit=Character.digit(value.charAt(i++),10);
    if (digit < 0) {
      throw new NumberFormatException("Invalid number: " + value.substring(beginIndex,endIndex));
    }
    result*=10;
    result-=digit;
  }
  return -result;
}

public boolean isAlertDefinitionCreated(StatAlertDefinition alertDefinition){
synchronized (ALERT_DEFINITIONS) {
    return ALERT_DEFINITIONS.containsKey(Integer.valueOf(alertDefinition.getId()));
  }
}

public static double logpoissonPDFm1(double x_plus_1,double lambda){
  if (Double.isInfinite(lambda)) {
    return Double.NEGATIVE_INFINITY;
  }
  if (x_plus_1 > 1) {
    return rawLogProbability(x_plus_1 - 1,lambda);
  }
  if (lambda > Math.abs(x_plus_1 - 1) * MathUtil.LOG2 * Double.MAX_EXPONENT / 1e-14) {
    return -lambda - GammaDistribution.logGamma(x_plus_1);
  }
 else {
    return rawLogProbability(x_plus_1,lambda) + Math.log(x_plus_1 / lambda);
  }
}

public void checkAndNotify(){
  for (  FileAlterationListener listener : listeners) {
    listener.onStart(this);
  }
  File rootFile=rootEntry.getFile();
  if (rootFile.exists()) {
    checkAndNotify(rootEntry,rootEntry.getChildren(),listFiles(rootFile));
  }
 else   if (rootEntry.isExists()) {
    checkAndNotify(rootEntry,rootEntry.getChildren(),FileUtils.EMPTY_FILE_ARRAY);
  }
 else {
  }
  for (  FileAlterationListener listener : listeners) {
    listener.onStop(this);
  }
}

private double allowableError(int rank){
  int size=samples.size();
  final double error=calculateError(rank,size);
  final double minError=size + 1;
  if (error < minError) {
    return error;
  }
  return minError;
}

public RetryPolicy withMaxDuration(long maxDuration,TimeUnit timeUnit){
  Assert.notNull(timeUnit,"timeUnit");
  Assert.state(timeUnit.toNanos(maxDuration) > delay.toNanos(),"maxDuration must be greater than the delay");
  this.maxDuration=new Duration(maxDuration,timeUnit);
  return this;
}

private int measureShort(int measureSpec){
  int result;
  int specMode=MeasureSpec.getMode(measureSpec);
  int specSize=MeasureSpec.getSize(measureSpec);
  if (specMode == MeasureSpec.EXACTLY) {
    result=specSize;
  }
 else {
    result=(int)(2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
    if (specMode == MeasureSpec.AT_MOST) {
      result=Math.min(result,specSize);
    }
  }
  return result;
}

private static final void cleanupNamespaceNodes(ZooKeeper zkc,String root,String selfBrokerUrl) throws Exception {
  for (  String node : zkc.getChildren(root,false)) {
    String currentPath=root + "/" + node;
    List<String> children=zkc.getChildren(currentPath,false);
    if (children.size() == 0) {
      cleanupSingleNamespaceNode(zkc,currentPath,selfBrokerUrl);
    }
 else {
      cleanupNamespaceNodes(zkc,currentPath,selfBrokerUrl);
    }
  }
}

String validateLogixReference(String name){
  Logix l=null;
  if (name != null) {
    if (name.length() > 0) {
      l=_logixManager.getByUserName(name);
      if (l != null) {
        return name;
      }
    }
    l=_logixManager.getBySystemName(name);
  }
  if (l == null) {
    messageInvalidActionItemName(name,"Logix");
    return null;
  }
  return name;
}

protected void clearMenuSelection(){
  popupMenuGroup.clearSelection();
  updateSelectionStatus();
}

public double distance(LatLng ll){
  double er=6366.707;
  double latFrom=Math.toRadians(getLat());
  double latTo=Math.toRadians(ll.getLat());
  double lngFrom=Math.toRadians(getLng());
  double lngTo=Math.toRadians(ll.getLng());
  double d=Math.acos(Math.sin(latFrom) * Math.sin(latTo) + Math.cos(latFrom) * Math.cos(latTo) * Math.cos(lngTo - lngFrom)) * er;
  return d;
}

@Override public Integer[] applyControlsToImpact(int riskType,CnATreeElement asset,Integer impactC,Integer impactI,Integer impactA){
  if (riskType == RISK_PRE_CONTROLS) {
    return null;
  }
  asset=Retriever.checkRetrieveLinks(asset,true);
  Map<CnATreeElement,CnALink> linkedElements=CnALink.getLinkedElements(asset,Control.TYPE_ID);
  Integer impactC0=Integer.valueOf(impactC.intValue());
  Integer impactI0=Integer.valueOf(impactI.intValue());
  Integer impactA0=Integer.valueOf(impactA.intValue());
switch (riskType) {
case RISK_WITH_IMPLEMENTED_CONTROLS:
    for (    CnATreeElement control : linkedElements.keySet()) {
      control=Retriever.checkRetrieveElement(control);
      if (Control.isImplemented(control.getEntity())) {
        impactC0-=control.getNumericProperty(IRiskAnalysisService.PROP_CONTROL_EFFECT_C);
        impactI0-=control.getNumericProperty(IRiskAnalysisService.PROP_CONTROL_EFFECT_I);
        impactA0-=control.getNumericProperty(IRiskAnalysisService.PROP_CONTROL_EFFECT_A);
      }
    }
  break;
case RISK_WITH_ALL_CONTROLS:
for (CnATreeElement control : linkedElements.keySet()) {
  control=Retriever.checkRetrieveElement(control);
  impactC0-=control.getNumericProperty(IRiskAnalysisService.PROP_CONTROL_EFFECT_C);
  impactI0-=control.getNumericProperty(IRiskAnalysisService.PROP_CONTROL_EFFECT_I);
  impactA0-=control.getNumericProperty(IRiskAnalysisService.PROP_CONTROL_EFFECT_A);
}
break;
case RISK_WITHOUT_NA_CONTROLS:
for (CnATreeElement control : linkedElements.keySet()) {
control=Retriever.checkRetrieveElement(control);
if (Control.isPlanned(control.getEntity())) {
impactC0-=control.getNumericProperty(IRiskAnalysisService.PROP_CONTROL_EFFECT_C);
impactI0-=control.getNumericProperty(IRiskAnalysisService.PROP_CONTROL_EFFECT_I);
impactA0-=control.getNumericProperty(IRiskAnalysisService.PROP_CONTROL_EFFECT_A);
}
}
break;
default :
break;
}
impactC0=(impactC0.intValue() < 0) ? Integer.valueOf(0) : impactC0;
impactI0=(impactI0.intValue() < 0) ? Integer.valueOf(0) : impactI0;
impactA0=(impactA0.intValue() < 0) ? Integer.valueOf(0) : impactA0;
return new Integer[]{impactC0,impactI0,impactA0};
}

public static String encode(String encode){
  StringBuilder str=new StringBuilder(encode);
  String key;
  int i=0;
  while (i < str.length()) {
    key=findValue(str.charAt(i));
    if (key != null) {
      str.replace(i,i + 1,key);
      i+=key.length();
    }
 else {
      i++;
    }
  }
  return str.toString();
}

protected static Boolean tryToLock(String serviceName){
  DistributedLockService service=DistributedLockService.getServiceNamed(serviceName);
  boolean locked=service.lock("obj",1000,-1);
  if (locked) {
    service.unlock("obj");
  }
  return Boolean.valueOf(locked);
}

public int hashCode(){
  LatLonPoint llp=getLocation();
  int hc1=Float.floatToIntBits(llp.getLatitude());
  int hc2=Float.floatToIntBits(llp.getLongitude());
  return hc1 ^ (hc2 << 5) ^ (hc2 >>> 27);
}

private XPathFactory loadFromServicesFile(String uri,String resourceName,InputStream in){
  if (debug)   debugPrintln("Reading " + resourceName);
  BufferedReader rd;
  try {
    rd=new BufferedReader(new InputStreamReader(in,"UTF-8"),DEFAULT_LINE_LENGTH);
  }
 catch (  java.io.UnsupportedEncodingException e) {
    rd=new BufferedReader(new InputStreamReader(in),DEFAULT_LINE_LENGTH);
  }
  String factoryClassName;
  XPathFactory resultFactory=null;
  while (true) {
    try {
      factoryClassName=rd.readLine();
    }
 catch (    IOException x) {
      break;
    }
    if (factoryClassName != null) {
      int hashIndex=factoryClassName.indexOf('#');
      if (hashIndex != -1) {
        factoryClassName=factoryClassName.substring(0,hashIndex);
      }
      factoryClassName=factoryClassName.trim();
      if (factoryClassName.length() == 0) {
        continue;
      }
      try {
        XPathFactory foundFactory=createInstance(factoryClassName);
        if (foundFactory.isObjectModelSupported(uri)) {
          resultFactory=foundFactory;
          break;
        }
      }
 catch (      Exception ignored) {
      }
    }
 else {
      break;
    }
  }
  IoUtils.closeQuietly(rd);
  return resultFactory;
}

private synchronized void _stop(){
  while (m_activities.size() > 0) {
    Activity a=(Activity)m_activities.get(m_activities.size() - 1);
    a.cancel();
  }
  _setRunning(false);
  notify();
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String childData;
  int childLength;
  java.util.List result=new java.util.ArrayList();
  doc=(Document)load("hc_staff",true);
  elementList=doc.getElementsByTagName("acronym");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
  child.deleteData(30,5);
  childData=child.getData();
  assertEquals("data","1230 North Ave. Dallas, Texas ",childData);
  childLength=(int)child.getLength();
  assertEquals("length",30,childLength);
}

public RhythmGroup makeGroup(String title){
  final RhythmGroup group=new RhythmGroup();
  group.mTitle=title;
  group.mIndex=mRhythmGroups.size();
  group.mControl=this;
  mRhythmGroups.add(group);
  if (mCurrentNotificationGroupIndex == NOTIFICATION_NO_GROUPS) {
    mCurrentNotificationGroupIndex=0;
    requestNotificationUpdate();
  }
  return group;
}

public CharSequence subSequence(int start,int end){
  return substring(start,end);
}

public void testMultiplyMathContextDiffScalePosNeg(){
  String a="987667796597975765768768767866756808779810457634781384756794987";
  int aScale=100;
  String b="747233429293018787918347987234564568";
  int bScale=-70;
  String c="7.3801839465418518653942222612429081498248509257207477E+68";
  int cScale=-16;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  MathContext mc=new MathContext(53,RoundingMode.HALF_UP);
  BigDecimal result=aNumber.multiply(bNumber,mc);
  assertEquals("incorrect value",c,result.toString());
  assertEquals("incorrect scale",cScale,result.scale());
}

public void writeTo(final OutputStream out) throws IOException {
  for (  final Block block : blocks) {
    out.write(block.data,0,block.limit);
  }
}

public void testMergeOneServletIntoDocumentWithSameServletAndParam() throws Exception {
  String srcXml="<web-app>" + "  <servlet>" + "    <servlet-name>s1</servlet-name>"+ "    <servlet-class>sclass1</servlet-class>"+ "  </servlet>"+ "</web-app>";
  WebXml srcWebXml=WebXmlIo.parseWebXml(new ByteArrayInputStream(srcXml.getBytes("UTF-8")),null);
  String mergeXml="<web-app>" + "  <servlet>" + "    <servlet-name>s1</servlet-name>"+ "    <servlet-class>sclass1</servlet-class>"+ "    <init-param>"+ "      <param-name>s1param1</param-name>"+ "      <param-value>s1param1value</param-value>"+ "    </init-param>"+ "  </servlet>"+ "</web-app>";
  WebXml mergeWebXml=WebXmlIo.parseWebXml(new ByteArrayInputStream(mergeXml.getBytes("UTF-8")),null);
  WebXmlMerger merger=new WebXmlMerger(srcWebXml);
  merger.merge(mergeWebXml);
  assertTrue(WebXmlUtils.hasServlet(srcWebXml,"s1"));
  List<String> initParams=WebXmlUtils.getServletInitParamNames(srcWebXml,"s1");
  assertEquals(1,initParams.size());
  assertEquals("s1param1",initParams.get(0));
  assertEquals("s1param1value",WebXmlUtils.getServletInitParam(srcWebXml,"s1","s1param1"));
}

public KMP(String pat){
  this.R=256;
  this.pat=pat;
  int m=pat.length();
  dfa=new int[R][m];
  dfa[pat.charAt(0)][0]=1;
  for (int x=0, j=1; j < m; j++) {
    for (int c=0; c < R; c++)     dfa[c][j]=dfa[c][x];
    dfa[pat.charAt(j)][j]=j + 1;
    x=dfa[pat.charAt(j)][x];
  }
}

private void loadConfiguration(){
  mClientId=mConfigurationManager.getString(PREF_CLIENT_ID,"");
  mClientKey=mConfigurationManager.getString(PREF_CLIENT_KEY,"");
  Timber.i("loaded HoundifyCommandManager configuration");
}

public static void putBooleanField(Object obj,long fieldOff,boolean val){
  UNSAFE.putBoolean(obj,fieldOff,val);
}

public void sort(Comparator<File> comparator){
synchronized (mLock) {
    Collections.sort(fileList,comparator);
  }
  notifyDataSetChanged();
}

public AcceptRequestInterceptor(final String accept){
  this.accept=accept;
  checkArgument(!accept.isEmpty(),"accept must not be empty");
}

public void test_getLowestSetBitNeg(){
  byte aBytes[]={-1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=-1;
  int iNumber=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  int result=aNumber.getLowestSetBit();
  assertTrue("incorrect value",result == iNumber);
}

private int tailingNonNewline(String str,int off,int len){
  for (int cnt=0; cnt < len; cnt++) {
    final int pos=off + (len - 1) - cnt;
    if (str.charAt(pos) == UNIX_NEWLINE) {
      return cnt;
    }
    if (str.charAt(pos) == CARRIAGE_RETURN) {
      return cnt;
    }
  }
  return len;
}

@Override public void reset(){
  _clear();
  bnodes=null;
  bnodesTotalCount=0;
  bnodesResolvedCount=0;
  deferredStmts=null;
  reifiedStmts=null;
  if (queue != null) {
    final Future<Void> ft=this.ft;
    if (ft != null) {
      ft.cancel(true);
      this.ft=null;
    }
    queue.clear();
  }
}

public static byte[] readData(final InputStream input) throws IOException {
  final byte[] inputBuffer=new byte[BUFFER_LENGTH];
  final ByteArrayOutputStream byteOutput=new ByteArrayOutputStream(BUFFER_LENGTH);
  int bytesRead;
  while ((bytesRead=input.read(inputBuffer)) != -1) {
    byteOutput.write(inputBuffer,0,bytesRead);
  }
  final byte[] r=byteOutput.toByteArray();
  byteOutput.close();
  return r;
}

public static String makeLogTag(Class cls){
  return makeLogTag(cls.getSimpleName());
}

@Override public synchronized void println(){
  print("\n");
}

public boolean isCrash(String testPath){
  for (  String prefix : getPrefixes(testPath)) {
    if (mCrashList.contains(prefix)) {
      return true;
    }
  }
  return false;
}

public AbstractSiteMap parseSiteMap(String contentType,byte[] content,URL url) throws UnknownFormatException, IOException {
  MediaType mediaType=MediaType.parse(contentType);
  while (mediaType != null && !mediaType.equals(MediaType.OCTET_STREAM)) {
    if (XML_MEDIA_TYPES.contains(mediaType)) {
      return processXml(url,content);
    }
 else     if (TEXT_MEDIA_TYPES.contains(mediaType)) {
      return processText(url.toString(),content);
    }
 else     if (GZ_MEDIA_TYPES.contains(mediaType)) {
      return processGzip(url,content);
    }
 else {
      mediaType=MEDIA_TYPE_REGISTRY.getSupertype(mediaType);
      return parseSiteMap(mediaType.toString(),content,url);
    }
  }
  throw new UnknownFormatException("Can't parse a sitemap with the MediaType of: " + contentType + " (at: "+ url+ ")");
}

private void createDefaultManagedObject(ManagedObjectDefinition<?,?> d,ManagedObject<?> child,DefaultManagedObject<?,?> dmo){
  for (  PropertyDefinition<?> pd : d.getAllPropertyDefinitions()) {
    setPropertyValues(child,pd,dmo);
  }
  try {
    child.commit();
  }
 catch (  ManagedObjectAlreadyExistsException e) {
    moaee=e;
  }
catch (  MissingMandatoryPropertiesException e) {
    mmpe=e;
  }
catch (  ConcurrentModificationException e) {
    cme=e;
  }
catch (  OperationRejectedException e) {
    ore=e;
  }
catch (  LdapException e) {
    ere=e;
  }
}

static String omitQuotesIfExist(String str){
  if (str == null) {
    return null;
  }
  if (((str.charAt(0) == '\"') || (str.charAt(0) == '\'')) && (str.length() >= 2)) {
    str=str.substring(1,str.length() - 1);
  }
  return str;
}

public static byte[] decode(byte[] input,int offset,int len,int flags){
  Decoder decoder=new Decoder(flags,new byte[len * 3 / 4]);
  if (!decoder.process(input,offset,len,true)) {
    throw new IllegalArgumentException("bad base-64");
  }
  if (decoder.op == decoder.output.length) {
    return decoder.output;
  }
  byte[] temp=new byte[decoder.op];
  System.arraycopy(decoder.output,0,temp,0,decoder.op);
  return temp;
}

private static boolean canCompleteNodePath(Entity start,Entity end,ArrayList<Entity> network,int startPosition,List<ECMInfo> allECMInfo){
  Entity spotter=network.get(startPosition);
  ECMInfo spotterStartECM=ComputeECM.getECMEffects(spotter,start.getPosition(),spotter.getPosition(),true,allECMInfo);
  boolean isC3BDefeated=start.hasBoostedC3() && (spotterStartECM != null) && spotterStartECM.isAngelECM();
  boolean isNovaDefeated=start.hasNovaCEWS() && (spotterStartECM != null) && spotterStartECM.isNovaECM();
  boolean isC3Defeated=!(start.hasBoostedC3() || start.hasNovaCEWS()) && (spotterStartECM != null) && spotterStartECM.isECM();
  if (isC3BDefeated || isNovaDefeated || isC3Defeated) {
    return false;
  }
  ECMInfo spotterEndECM=ComputeECM.getECMEffects(spotter,spotter.getPosition(),end.getPosition(),true,allECMInfo);
  isC3BDefeated=start.hasBoostedC3() && (spotterEndECM != null) && spotterEndECM.isAngelECM();
  isNovaDefeated=start.hasNovaCEWS() && (spotterEndECM != null) && spotterEndECM.isNovaECM();
  isC3Defeated=!(start.hasBoostedC3() || start.hasNovaCEWS()) && (spotterEndECM != null) && spotterEndECM.isECM();
  if (!(isC3BDefeated || isNovaDefeated || isC3Defeated)) {
    return true;
  }
  for (++startPosition; startPosition < network.size(); startPosition++) {
    if (Compute.canCompleteNodePath(spotter,end,network,startPosition,allECMInfo)) {
      return true;
    }
  }
  return false;
}

static void make72Safe(StringBuffer line){
  int length=line.length();
  if (length > 72) {
    int index=70;
    while (index < length - 2) {
      line.insert(index,"\r\n ");
      index+=72;
      length+=3;
    }
  }
  return;
}

@Override public int last(){
  CharacterIterator t=getText();
  t.setIndex(t.getEndIndex());
  return t.getIndex();
}

public static IStatus validateMethodName(String name){
  return validateMethodName(name,CompilerOptions.VERSION_1_3,CompilerOptions.VERSION_1_3);
}

public static void registerProtocol(final String id,final Protocol protocol){
  if (id == null) {
    throw new IllegalArgumentException("id is null");
  }
  if (protocol == null) {
    throw new IllegalArgumentException("protocol is null");
  }
  PROTOCOLS.put(id,protocol);
}

public byte receiveOneByte(){
  Log.d(TAG,"receiveOneByte() entrance");
  try {
    acquireLock();
    mServerSocket.receive(mReceivePacket);
    Log.d(TAG,"receive: " + (0 + mReceivePacket.getData()[0]));
    return mReceivePacket.getData()[0];
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  return Byte.MIN_VALUE;
}

public static String linkHTML(String text){
  if (text == null || text.length() == 0) {
    return "";
  }
  boolean http=text.indexOf("http") != -1;
  boolean www=text.indexOf("www.") != -1;
  boolean email=text.indexOf("@") != -1;
  if (!http && !www && !email) {
    return text;
  }
  if (text.indexOf("<") != -1 && text.indexOf(">") != -1) {
    return text;
  }
  if (http) {
    Matcher matcher=httpRegex.matcher(text);
    StringBuffer sb=new StringBuffer();
    while (matcher.find()) {
      String url=matcher.group();
      if (url.indexOf(".png") != -1 || url.indexOf(".jpg") != -1 || url.indexOf(".jpeg") != -1 || url.indexOf(".gif") != -1) {
        url="<a href='" + url + "' target='_blank'><img src='"+ url+ "' height='50'></a>";
      }
 else       if (url.indexOf(".mp4") != -1 || url.indexOf(".webm") != -1 || url.indexOf(".ogg") != -1) {
        url="<a href='" + url + "' target='_blank'><video src='"+ url+ "' height='50'></a>";
      }
 else       if (url.indexOf(".wav") != -1 || url.indexOf(".mp3") != -1) {
        url="<a href='" + url + "' target='_blank'><audio src='"+ url+ "' controls>audio</a>";
      }
 else {
        url="<a href='" + url + "' target='_blank'>"+ url+ "</a>";
      }
      matcher.appendReplacement(sb,url);
    }
    matcher.appendTail(sb);
    text=sb.toString();
  }
 else   if (www) {
    Matcher matcher=wwwRegex.matcher(text);
    StringBuffer sb=new StringBuffer();
    while (matcher.find()) {
      String url=matcher.group();
      matcher.appendReplacement(sb,"<a href='http://" + url + "' target='_blank'>"+ url+ "</a>");
    }
    matcher.appendTail(sb);
    text=sb.toString();
  }
  if (email) {
    Matcher matcher=emailRegex.matcher(text);
    StringBuffer sb=new StringBuffer();
    while (matcher.find()) {
      String address=matcher.group();
      matcher.appendReplacement(sb,"<a href='mailto://" + address + "' target='_blank'>"+ address+ "</a>");
    }
    matcher.appendTail(sb);
    text=sb.toString();
  }
  return text;
}

public static int hash(String key,int bitSize,String input,String hashType){
  int bitLimitedHash;
  try {
    MessageDigest md=MessageDigest.getInstance(hashType);
    byte[] array=md.digest(input.getBytes());
    int hashInt=fromByteArray(array);
    bitLimitedHash=hashInt;
    if (bitSize < 32) {
      bitLimitedHash=(0xFFFFFFFF >>> (32 - bitSize)) & hashInt;
    }
    logger.debug("hashInt = " + hashInt + " bitLimitedHash = "+ bitLimitedHash);
  }
 catch (  NoSuchAlgorithmException e) {
    logger.info(e.toString());
    bitLimitedHash=hash(key,bitSize,input);
  }
  return bitLimitedHash;
}

private OFFactory computeInitialFactory(Set<OFVersion> ofVersions){
  if (ofVersions == null || ofVersions.isEmpty()) {
    throw new IllegalStateException("OpenFlow version list should never be null or empty at this point. Make sure it's set in the OFSwitchManager.");
  }
  OFVersion highest=null;
  for (  OFVersion v : ofVersions) {
    if (highest == null) {
      highest=v;
    }
 else     if (v.compareTo(highest) > 0) {
      highest=v;
    }
  }
  return OFFactories.getFactory(highest);
}

private void loadJettyConfiguration(@Nullable URL cfgUrl) throws IgniteCheckedException {
  if (cfgUrl == null) {
    HttpConfiguration httpCfg=new HttpConfiguration();
    httpCfg.setSecureScheme("https");
    httpCfg.setSecurePort(8443);
    httpCfg.setSendServerVersion(true);
    httpCfg.setSendDateHeader(true);
    String srvPortStr=System.getProperty(IGNITE_JETTY_PORT,"8080");
    int srvPort;
    try {
      srvPort=Integer.parseInt(srvPortStr);
    }
 catch (    NumberFormatException ignore) {
      throw new IgniteCheckedException("Failed to start Jetty server because IGNITE_JETTY_PORT system property " + "cannot be cast to integer: " + srvPortStr);
    }
    httpSrv=new Server(new QueuedThreadPool(200,20));
    ServerConnector srvConn=new ServerConnector(httpSrv,new HttpConnectionFactory(httpCfg));
    srvConn.setHost(System.getProperty(IGNITE_JETTY_HOST,"localhost"));
    srvConn.setPort(srvPort);
    srvConn.setIdleTimeout(30000L);
    srvConn.setReuseAddress(true);
    httpSrv.addConnector(srvConn);
    httpSrv.setStopAtShutdown(false);
  }
 else {
    XmlConfiguration cfg;
    try {
      cfg=new XmlConfiguration(cfgUrl);
    }
 catch (    FileNotFoundException e) {
      throw new IgniteSpiException("Failed to find configuration file: " + cfgUrl,e);
    }
catch (    SAXException e) {
      throw new IgniteSpiException("Failed to parse configuration file: " + cfgUrl,e);
    }
catch (    IOException e) {
      throw new IgniteSpiException("Failed to load configuration file: " + cfgUrl,e);
    }
catch (    Exception e) {
      throw new IgniteSpiException("Failed to start HTTP server with configuration file: " + cfgUrl,e);
    }
    try {
      httpSrv=(Server)cfg.configure();
    }
 catch (    Exception e) {
      throw new IgniteCheckedException("Failed to start Jetty HTTP server.",e);
    }
  }
  assert httpSrv != null;
  httpSrv.setHandler(jettyHnd);
  override(getJettyConnector());
}

public byte[] encodeFrame(){
  int length=this.payload.length + frameLengthOverhead;
  if (this.payload.length > 65535) {
    length+=8;
  }
 else   if (this.payload.length >= 126) {
    length+=2;
  }
  ByteBuffer buffer=ByteBuffer.allocate(length);
  appendFinAndOpCode(buffer,this.opcode,this.fin);
  byte mask[]=generateMaskingKey();
  appendLengthAndMask(buffer,this.payload.length,mask);
  for (int i=0; i < this.payload.length; i++) {
    buffer.put((byte)(this.payload[i]^=mask[i % 4]));
  }
  buffer.flip();
  return buffer.array();
}

public static void preloadIcon(Context context,ComponentName componentName,Bitmap icon,int dpi){
  try {
    PackageManager packageManager=context.getPackageManager();
    packageManager.getActivityIcon(componentName);
    return;
  }
 catch (  PackageManager.NameNotFoundException e) {
  }
  final String key=componentName.flattenToString();
  FileOutputStream resourceFile=null;
  try {
    resourceFile=context.openFileOutput(getResourceFilename(componentName),Context.MODE_PRIVATE);
    ByteArrayOutputStream os=new ByteArrayOutputStream();
    if (icon.compress(android.graphics.Bitmap.CompressFormat.PNG,75,os)) {
      byte[] buffer=os.toByteArray();
      resourceFile.write(buffer,0,buffer.length);
    }
 else {
      Log.w(TAG,"failed to encode cache for " + key);
      return;
    }
  }
 catch (  FileNotFoundException e) {
    Log.w(TAG,"failed to pre-load cache for " + key,e);
  }
catch (  IOException e) {
    Log.w(TAG,"failed to pre-load cache for " + key,e);
  }
 finally {
    if (resourceFile != null) {
      try {
        resourceFile.close();
      }
 catch (      IOException e) {
        Log.d(TAG,"failed to save restored icon for: " + key,e);
      }
    }
  }
}

public void normalize(){
  StringBuilder sb=new StringBuilder();
  for (  String v : values) {
    sb.append(v);
  }
  values.clear();
  values.add(sb.toString());
  compacted=false;
}

public void addAttribute(String key,String value){
  extraSessionAttributes.put(key,value);
}

String capitalise(final String s){
  if (s.length() == 0) {
    return s;
  }
  final StringBuffer s1=new StringBuffer(s);
  if (Character.isLowerCase(s1.charAt(0))) {
    s1.setCharAt(0,Character.toUpperCase(s1.charAt(0)));
  }
  for (int j=1; j < s1.length(); j++) {
    if (Character.isUpperCase(s1.charAt(j))) {
      s1.setCharAt(j,Character.toLowerCase(s1.charAt(j)));
    }
  }
  return s1.toString();
}

public void recompose(Vector recomposableElements) throws TransformerException {
  int n=getIncludeCountComposed();
  for (int i=-1; i < n; i++) {
    Stylesheet included=getIncludeComposed(i);
    int s=included.getOutputCount();
    for (int j=0; j < s; j++) {
      recomposableElements.addElement(included.getOutput(j));
    }
    s=included.getAttributeSetCount();
    for (int j=0; j < s; j++) {
      recomposableElements.addElement(included.getAttributeSet(j));
    }
    s=included.getDecimalFormatCount();
    for (int j=0; j < s; j++) {
      recomposableElements.addElement(included.getDecimalFormat(j));
    }
    s=included.getKeyCount();
    for (int j=0; j < s; j++) {
      recomposableElements.addElement(included.getKey(j));
    }
    s=included.getNamespaceAliasCount();
    for (int j=0; j < s; j++) {
      recomposableElements.addElement(included.getNamespaceAlias(j));
    }
    s=included.getTemplateCount();
    for (int j=0; j < s; j++) {
      recomposableElements.addElement(included.getTemplate(j));
    }
    s=included.getVariableOrParamCount();
    for (int j=0; j < s; j++) {
      recomposableElements.addElement(included.getVariableOrParam(j));
    }
    s=included.getStripSpaceCount();
    for (int j=0; j < s; j++) {
      recomposableElements.addElement(included.getStripSpace(j));
    }
    s=included.getPreserveSpaceCount();
    for (int j=0; j < s; j++) {
      recomposableElements.addElement(included.getPreserveSpace(j));
    }
  }
}

private Geometry unionActual(Geometry g0,Geometry g1){
  return restrictToPolygons(g0.union(g1));
}

public boolean supports(@MagicConstant(flagsFromClass=Features.class) int capability){
  IAndroidTarget target=getTarget();
  if (target != null) {
    return RenderService.supportsCapability(getModule(),target,capability);
  }
  return false;
}

@Override public void transactionAborted(){
  if (listeners.isEmpty()) {
    records.reset();
  }
 else {
    records.flush();
    listeners.forEach(null);
  }
}

@Override public boolean add(E o){
  if (null == o) {
    throw new NullPointerException();
  }
  if (offer(o)) {
    return true;
  }
  throw new IllegalStateException();
}

public StandardCrosshairLabelGenerator(){
  this("{0}",NumberFormat.getNumberInstance());
}

private URI createEthernetStoragePort(Map<String,Object> keyMap,StoragePort port,String name,String portInstanceID,List<StoragePort> newPorts,List<StoragePort> existingPorts) throws IOException {
  StoragePort portinMemory=(StoragePort)keyMap.get(portInstanceID);
  if (null == port) {
    portinMemory.setPortNetworkId(name);
    portinMemory.setPortEndPointID(name);
    String portNativeGuid=NativeGUIDGenerator.generateNativeGuid(_dbClient,portinMemory);
    portinMemory.setNativeGuid(portNativeGuid);
    portinMemory.setLabel(portNativeGuid);
    _dbClient.createObject(portinMemory);
    newPorts.add(portinMemory);
    return portinMemory.getId();
  }
 else {
    port.setPortName(portinMemory.getPortName());
    port.setPortSpeed(portinMemory.getPortSpeed());
    port.setPortEndPointID(name);
    port.setCompatibilityStatus(portinMemory.getCompatibilityStatus());
    port.setDiscoveryStatus(portinMemory.getDiscoveryStatus());
    port.setOperationalStatus(portinMemory.getOperationalStatus());
    port.setPortType(portinMemory.getPortType());
    _dbClient.persistObject(port);
    existingPorts.add(port);
    return port.getId();
  }
}

default int add(Item stack){
  int itemsLeft=stack.count();
  for (int i=0; i < size(); i++) {
    itemsLeft=add(i,stack.withAmount(itemsLeft));
  }
  if (itemsLeft != stack.count()) {
    markChanged();
  }
  return itemsLeft;
}

public void mark(long n){
  count.addAndGet(n);
  m1Rate.update(n);
  m5Rate.update(n);
  m15Rate.update(n);
}

public String[] readAllLines(){
  ArrayList<String> lines=new ArrayList<String>();
  while (hasNextLine()) {
    lines.add(readLine());
  }
  return lines.toArray(new String[0]);
}

public static boolean isAbsolutePath(String systemId){
  if (systemId == null)   return false;
  final File file=new File(systemId);
  return file.isAbsolute();
}

protected QualifiedItem[] parseQualifiedItems(final VersionSpec defaultVersion,final boolean allowVersionRange,final int startIndex){
  return parseQualifiedItems(getFreeArguments(),defaultVersion,allowVersionRange,startIndex);
}

public void changeChangeEnabled(ChangeEnabledState state) throws RefactoringException {
  RefactoringSession session=getRefactoringSession(state.getSessionId());
  session.updateChangeEnabled(state.getChangeId(),state.isEnabled());
}

public UpdateBuilder bindUris(String from,Collection<String> uris){
  return bindUris(from,uris,"");
}

public void populateAll() throws GeneralException {
  for (  ServiceEcaAction ecaAction : serviceEcaRule.getEcaActionList()) {
    servicesCalledByThisServiceEca.add(aif.getServiceArtifactInfo(ecaAction.getServiceName()));
    UtilMisc.addToSortedSetInMap(this,aif.allServiceEcaInfosReferringToServiceName,ecaAction.getServiceName());
  }
}

private int[] findNearestArea(int pixelX,int pixelY,int minSpanX,int minSpanY,int spanX,int spanY,boolean ignoreOccupied,int[] result,int[] resultSpan){
  lazyInitTempRectStack();
  pixelX-=(mCellWidth + mWidthGap) * (spanX - 1) / 2f;
  pixelY-=(mCellHeight + mHeightGap) * (spanY - 1) / 2f;
  final int[] bestXY=result != null ? result : new int[2];
  double bestDistance=Double.MAX_VALUE;
  final Rect bestRect=new Rect(-1,-1,-1,-1);
  final Stack<Rect> validRegions=new Stack<Rect>();
  final int countX=mCountX;
  final int countY=mCountY;
  if (minSpanX <= 0 || minSpanY <= 0 || spanX <= 0 || spanY <= 0 || spanX < minSpanX || spanY < minSpanY) {
    return bestXY;
  }
  for (int y=0; y < countY - (minSpanY - 1); y++) {
    inner:     for (int x=0; x < countX - (minSpanX - 1); x++) {
      int ySize=-1;
      int xSize=-1;
      if (ignoreOccupied) {
        for (int i=0; i < minSpanX; i++) {
          for (int j=0; j < minSpanY; j++) {
            if (mOccupied[x + i][y + j]) {
              continue inner;
            }
          }
        }
        xSize=minSpanX;
        ySize=minSpanY;
        boolean incX=true;
        boolean hitMaxX=xSize >= spanX;
        boolean hitMaxY=ySize >= spanY;
        while (!(hitMaxX && hitMaxY)) {
          if (incX && !hitMaxX) {
            for (int j=0; j < ySize; j++) {
              if (x + xSize > countX - 1 || mOccupied[x + xSize][y + j]) {
                hitMaxX=true;
              }
            }
            if (!hitMaxX) {
              xSize++;
            }
          }
 else           if (!hitMaxY) {
            for (int i=0; i < xSize; i++) {
              if (y + ySize > countY - 1 || mOccupied[x + i][y + ySize]) {
                hitMaxY=true;
              }
            }
            if (!hitMaxY) {
              ySize++;
            }
          }
          hitMaxX|=xSize >= spanX;
          hitMaxY|=ySize >= spanY;
          incX=!incX;
        }
        incX=true;
        hitMaxX=xSize >= spanX;
        hitMaxY=ySize >= spanY;
      }
      final int[] cellXY=mTmpPoint;
      cellToCenterPoint(x,y,cellXY);
      Rect currentRect=mTempRectStack.pop();
      currentRect.set(x,y,x + xSize,y + ySize);
      boolean contained=false;
      for (      Rect r : validRegions) {
        if (r.contains(currentRect)) {
          contained=true;
          break;
        }
      }
      validRegions.push(currentRect);
      double distance=Math.hypot(cellXY[0] - pixelX,cellXY[1] - pixelY);
      if ((distance <= bestDistance && !contained) || currentRect.contains(bestRect)) {
        bestDistance=distance;
        bestXY[0]=x;
        bestXY[1]=y;
        if (resultSpan != null) {
          resultSpan[0]=xSize;
          resultSpan[1]=ySize;
        }
        bestRect.set(currentRect);
      }
    }
  }
  if (bestDistance == Double.MAX_VALUE) {
    bestXY[0]=-1;
    bestXY[1]=-1;
  }
  recycleTempRects(validRegions);
  return bestXY;
}

public void validationStatesRemoved(K key){
  hideMessage(key);
  validationErrorStates.remove(key);
  notifyUpstream(key,Collections.<ValidationState>emptySet());
}

public void killApplication(String applicationId) throws IOException, YarnException {
  log.info("killing job with application id: " + applicationId);
  yarnClient.killApplication(getApplicationIDFromString(applicationId));
}

public static String convert(String prefix){
  StringBuilder sb=new StringBuilder();
  prefix=prefix.replace('\n',';');
  String[] lines=prefix.split("[;]");
  for (  String line : lines) {
    List<String> tokens=new ArrayList<String>();
    char[] c=UnsafeString.getChars(line);
    int lastidx=0;
    int idx=0;
    while (idx < c.length) {
      while (c[idx] != '(' && c[idx] != ')' && c[idx] != ',') {
        idx++;
      }
      if (idx != lastidx) {
        tokens.add(new String(c,lastidx,idx - lastidx));
      }
      idx++;
      lastidx=idx;
    }
    Collections.reverse(tokens);
    for (    String token : tokens) {
      sb.append(token);
      sb.append("\n");
    }
  }
  return sb.toString();
}

public boolean toBoolean(Element el,String attributeName,boolean defaultValue){
  String value=el.getAttribute(attributeName);
  if (value == null)   return defaultValue;
  return Caster.toBooleanValue(value,false);
}

public synchronized void addPanListener(PanListener listener){
  mPanListeners.add(listener);
}

protected void serializePreRoot() throws IOException {
  int i;
  if (_preRoot != null) {
    for (i=0; i < _preRoot.size(); ++i) {
      printText((String)_preRoot.elementAt(i),true,true);
      if (_indenting)       _printer.breakLine();
    }
    _preRoot.removeAllElements();
  }
}

private void createSchemaColumnEntities(List<SchemaColumn> schemaColumns,boolean isPartitionList,Collection<SchemaColumnEntity> schemaColumnEntityList,Map<String,SchemaColumnEntity> schemaColumnEntityMap,BusinessObjectFormatEntity businessObjectFormatEntity){
  if (!CollectionUtils.isEmpty(schemaColumns)) {
    int position=1;
    for (    SchemaColumn schemaColumn : schemaColumns) {
      SchemaColumnEntity schemaColumnEntity=schemaColumnEntityMap.get(schemaColumn.getName());
      if (schemaColumnEntity == null) {
        schemaColumnEntity=createSchemaColumnEntity(schemaColumn,businessObjectFormatEntity);
        schemaColumnEntityList.add(schemaColumnEntity);
        schemaColumnEntityMap.put(schemaColumn.getName(),schemaColumnEntity);
      }
      if (isPartitionList) {
        schemaColumnEntity.setPartitionLevel(position++);
      }
 else {
        schemaColumnEntity.setPosition(position++);
      }
    }
  }
}

public static <T>String joinAnd(final String delimiter,final String lastDelimiter,final Collection<T> objs){
  if (objs == null || objs.isEmpty())   return "";
  final Iterator<T> iter=objs.iterator();
  final StringBuilder buffer=new StringBuilder();
  while (iter.hasNext()) {
    final T obj=iter.next();
    if (notEmpty(obj)) {
      if (buffer.length() != 0) {
        buffer.append(iter.hasNext() ? delimiter : lastDelimiter);
      }
      buffer.append(Strings.toString(obj));
    }
  }
  return buffer.toString();
}

public static String generateNativeGuid(DbClient dbClient,Snapshot snapshot) throws IOException {
  FileShare fs=dbClient.queryObject(FileShare.class,snapshot.getParent());
  StorageSystem device=dbClient.queryObject(StorageSystem.class,fs.getStorageDevice());
  return String.format("%s+%s+" + SNAPSHOT + "+%s",_deviceTypeMap.get(device.getSystemType()),device.getSerialNumber(),snapshot.getNativeId());
}

public static Map<String,Object> updateFile(DispatchContext dctx,Map<String,? extends Object> context){
  Map<String,Object> result=null;
  try {
    result=updateFileMethod(dctx,context);
  }
 catch (  GenericServiceException e) {
    return ServiceUtil.returnError(e.getMessage());
  }
  return result;
}

public static String readFully(Reader reader) throws IOException {
  try {
    StringWriter writer=new StringWriter();
    char[] buffer=new char[1024];
    int count;
    while ((count=reader.read(buffer)) != -1) {
      writer.write(buffer,0,count);
    }
    return writer.toString();
  }
  finally {
    reader.close();
  }
}

public EditSensorsDialog(final Collection<Sensor> sensors){
  super();
  if (sensors == null) {
    throw new IllegalArgumentException("sensors must not be null");
  }
  this.sensors=sensors;
  setTitle("Edit " + sensors.size() + " Sensor(s):");
  initComponents();
  layoutComponents();
}

@VisibleForTesting synchronized void trimToSize(int targetSize){
  int bytesToFree=Math.min(mUsed.mNumBytes + mFree.mNumBytes - targetSize,mFree.mNumBytes);
  if (bytesToFree <= 0) {
    return;
  }
  if (FLog.isLoggable(FLog.VERBOSE)) {
    FLog.v(TAG,"trimToSize: TargetSize = %d; Initial Size = %d; Bytes to free = %d",targetSize,mUsed.mNumBytes + mFree.mNumBytes,bytesToFree);
  }
  logStats();
  for (int i=0; i < mBuckets.size(); ++i) {
    if (bytesToFree <= 0) {
      break;
    }
    Bucket<V> bucket=mBuckets.valueAt(i);
    while (bytesToFree > 0) {
      V value=bucket.pop();
      if (value == null) {
        break;
      }
      free(value);
      bytesToFree-=bucket.mItemSize;
      mFree.decrement(bucket.mItemSize);
    }
  }
  logStats();
  if (FLog.isLoggable(FLog.VERBOSE)) {
    FLog.v(TAG,"trimToSize: TargetSize = %d; Final Size = %d",targetSize,mUsed.mNumBytes + mFree.mNumBytes);
  }
}

@Override public void addFocusables(ArrayList<View> views,int direction,int focusableMode){
  final int focusableCount=views.size();
  final int descendantFocusability=getDescendantFocusability();
  if (descendantFocusability != FOCUS_BLOCK_DESCENDANTS) {
    for (int i=0; i < getChildCount(); i++) {
      final View child=getChildAt(i);
      if (child.getVisibility() == VISIBLE) {
        ItemInfo ii=infoForChild(child);
        if (ii != null && ii.position == mCurItem) {
          child.addFocusables(views,direction,focusableMode);
        }
      }
    }
  }
  if (descendantFocusability != FOCUS_AFTER_DESCENDANTS || (focusableCount == views.size())) {
    if (!isFocusable()) {
      return;
    }
    if ((focusableMode & FOCUSABLES_TOUCH_MODE) == FOCUSABLES_TOUCH_MODE && isInTouchMode() && !isFocusableInTouchMode()) {
      return;
    }
    if (views != null) {
      views.add(this);
    }
  }
}

public String readToDelimiter(char delim) throws FormatException {
  StringBuffer buildretval=new StringBuffer();
  char tmp;
  try {
    while ((tmp=readChar()) != delim)     buildretval.append(tmp);
  }
 catch (  EOFException e) {
  }
catch (  FormatException fe) {
    if (buildretval.length() == 0) {
      throw fe;
    }
  }
  return buildretval.toString();
}

private void addNewLineAtTop(RecyclerView.Recycler recycler){
  int x=layoutStartPoint().x, bottom=getDecoratedTop(getChildAt(getMaxHeightLayoutPositionInLine(0))), y;
  int height=0;
  List<View> lineChildren=new LinkedList<>();
  int currentAdapterPosition=0;
  int endAdapterPosition=getChildAdapterPosition(0) - 1;
  Rect rect=new Rect();
  boolean newline;
  boolean firstItem=true;
  LayoutContext layoutContext=LayoutContext.fromLayoutOptions(flowLayoutOptions);
  int firstItemAdapterPosition=getChildAdapterPosition(0);
  if (cacheHelper.hasPreviousLineCached(firstItemAdapterPosition)) {
    int previousLineIndex=cacheHelper.itemLineIndex(firstItemAdapterPosition) - 1;
    Line previousLine=cacheHelper.getLine(previousLineIndex);
    int firstNewItemAdapterPosition=cacheHelper.firstItemIndex(previousLineIndex);
    for (int i=0; i < previousLine.itemCount; i++) {
      View newView=recycler.getViewForPosition(firstNewItemAdapterPosition + i);
      addView(newView,i);
      lineChildren.add(newView);
    }
    height=previousLine.maxHeight;
  }
 else {
    while (currentAdapterPosition <= endAdapterPosition) {
      View newChild=recycler.getViewForPosition(currentAdapterPosition);
      newline=calcChildLayoutRect(newChild,x,0,height,layoutContext,rect);
      cacheHelper.setItem(currentAdapterPosition,new Point(rect.width(),rect.height()));
      addView(newChild,lineChildren.size());
      if (newline && !firstItem) {
        for (        View viewToRecycle : lineChildren) {
          removeAndRecycleView(viewToRecycle,recycler);
        }
        lineChildren.clear();
        x=advanceInSameLine(layoutStartPoint().x,rect,layoutContext);
        height=rect.height();
        layoutContext.currentLineItemCount=1;
      }
 else {
        x=advanceInSameLine(x,rect,layoutContext);
        height=Math.max(height,rect.height());
        firstItem=false;
        layoutContext.currentLineItemCount++;
      }
      lineChildren.add(newChild);
      currentAdapterPosition++;
    }
  }
  x=layoutStartPoint().x;
  y=bottom - height;
  firstItem=true;
  layoutContext=LayoutContext.fromLayoutOptions(flowLayoutOptions);
  for (int i=0; i < lineChildren.size(); i++) {
    View childView=lineChildren.get(i);
    newline=calcChildLayoutRect(childView,x,y,height,layoutContext,rect);
    if (newline && firstItem) {
      int rectHeight=rect.height();
      rect.top-=rectHeight;
      rect.bottom-=rectHeight;
      firstItem=false;
    }
    layoutDecorated(childView,rect.left,rect.top,rect.right,rect.bottom);
    x=advanceInSameLine(x,rect,layoutContext);
  }
}

protected static final String addEscapes(String str){
  StringBuffer retval=new StringBuffer();
  char ch;
  for (int i=0; i < str.length(); i++) {
switch (str.charAt(i)) {
case 0:
      continue;
case '\b':
    retval.append("\\b");
  continue;
case '\t':
retval.append("\\t");
continue;
case '\n':
retval.append("\\n");
continue;
case '\f':
retval.append("\\f");
continue;
case '\r':
retval.append("\\r");
continue;
case '\"':
retval.append("\\\"");
continue;
case '\'':
retval.append("\\\'");
continue;
case '\\':
retval.append("\\\\");
continue;
default :
if ((ch=str.charAt(i)) < 0x20 || ch > 0x7e) {
String s="0000" + Integer.toString(ch,16);
retval.append("\\u" + s.substring(s.length() - 4,s.length()));
}
 else {
retval.append(ch);
}
continue;
}
}
return retval.toString();
}

default T call(SourceSection source,T lhs,T argument1,T argument2){
  return call(source,lhs,Arrays.asList(argument(argument1),argument(argument2)));
}

public boolean equalMapGenParameters(MapSettings other){
  if ((boardWidth != other.getBoardWidth()) || (boardHeight != other.getBoardHeight()) || (mapWidth != other.getMapWidth())|| (mapHeight != other.getMapHeight())|| (invertNegativeTerrain != other.getInvertNegativeTerrain())|| (hilliness != other.getHilliness())|| (cliffs != other.getCliffs())|| (range != other.getRange())|| (minWaterSpots != other.getMinWaterSpots())|| (maxWaterSpots != other.getMaxWaterSpots())|| (minWaterSize != other.getMinWaterSize())|| (maxWaterSize != other.getMaxWaterSize())|| (probDeep != other.getProbDeep())|| (minForestSpots != other.getMinForestSpots())|| (maxForestSpots != other.getMaxForestSpots())|| (minForestSize != other.getMinForestSize())|| (maxForestSize != other.getMaxForestSize())|| (probHeavy != other.getProbHeavy())|| (minRoughSpots != other.getMinRoughSpots())|| (maxRoughSpots != other.getMaxRoughSpots())|| (minRoughSize != other.getMinRoughSize())|| (maxRoughSize != other.getMaxRoughSize())|| (minSandSpots != other.getMinSandSpots())|| (maxSandSpots != other.getMaxSandSpots())|| (minSandSize != other.getMinSandSize())|| (maxSandSize != other.getMaxSandSize())|| (minPlantedFieldSpots != other.getMinPlantedFieldSpots())|| (maxPlantedFieldSpots != other.getMaxPlantedFieldSpots())|| (minPlantedFieldSize != other.getMinPlantedFieldSize())|| (maxPlantedFieldSize != other.getMaxPlantedFieldSize())|| (minSwampSpots != other.getMinSwampSpots())|| (maxSwampSpots != other.getMaxSwampSpots())|| (minSwampSize != other.getMinSwampSize())|| (maxSwampSize != other.getMaxSwampSize())|| (minPavementSpots != other.getMinPavementSpots())|| (maxPavementSpots != other.getMaxPavementSpots())|| (minPavementSize != other.getMinPavementSize())|| (maxPavementSize != other.getMaxPavementSize())|| (minRubbleSpots != other.getMinRubbleSpots())|| (maxRubbleSpots != other.getMaxRubbleSpots())|| (minRubbleSize != other.getMinRubbleSize())|| (maxRubbleSize != other.getMaxRubbleSize())|| (minFortifiedSpots != other.getMinFortifiedSpots())|| (maxFortifiedSpots != other.getMaxFortifiedSpots())|| (minFortifiedSize != other.getMinFortifiedSize())|| (maxFortifiedSize != other.getMaxFortifiedSize())|| (minIceSpots != other.getMinIceSpots())|| (maxIceSpots != other.getMaxIceSpots())|| (minIceSize != other.getMinIceSize())|| (maxIceSize != other.getMaxIceSize())|| (probRoad != other.getProbRoad())|| (probInvert != other.getProbInvert())|| (probRiver != other.getProbRiver())|| (probCrater != other.getProbCrater())|| (minRadius != other.getMinRadius())|| (maxRadius != other.getMaxRadius())|| (minCraters != other.getMinCraters())|| (maxCraters != other.getMaxCraters())|| (!theme.equals(other.getTheme()))|| (fxMod != other.getFxMod())|| (cityBlocks != other.getCityBlocks())|| (cityType != other.getCityType())|| (cityMinCF != other.getCityMinCF())|| (cityMaxCF != other.getCityMaxCF())|| (cityMinFloors != other.getCityMinFloors())|| (cityMaxFloors != other.getCityMaxFloors())|| (cityDensity != other.getCityDensity())|| (probFlood != other.getProbFlood())|| (probForestFire != other.getProbForestFire())|| (probFreeze != other.getProbFreeze())|| (probDrought != other.getProbDrought())|| (algorithmToUse != other.getAlgorithmToUse())|| (mountainHeightMin != other.getMountainHeightMin())|| (mountainHeightMax != other.getMountainHeightMax())|| (mountainPeaks != other.getMountainPeaks())|| (mountainStyle != other.getMountainStyle())|| (mountainWidthMin != other.getMountainWidthMin())|| (mountainWidthMax != other.getMountainWidthMax())|| (boardBuildings != other.getBoardBuildings())) {
    return false;
  }
  return true;
}

private static void decodeTextSegment(BitSource bits,StringBuilder result) throws FormatException {
  boolean upperShift=false;
  int[] cValues=new int[3];
  int shift=0;
  do {
    if (bits.available() == 8) {
      return;
    }
    int firstByte=bits.readBits(8);
    if (firstByte == 254) {
      return;
    }
    parseTwoBytes(firstByte,bits.readBits(8),cValues);
    for (int i=0; i < 3; i++) {
      int cValue=cValues[i];
switch (shift) {
case 0:
        if (cValue < 3) {
          shift=cValue + 1;
        }
 else         if (cValue < TEXT_BASIC_SET_CHARS.length) {
          char textChar=TEXT_BASIC_SET_CHARS[cValue];
          if (upperShift) {
            result.append((char)(textChar + 128));
            upperShift=false;
          }
 else {
            result.append(textChar);
          }
        }
 else {
          throw FormatException.getFormatInstance();
        }
      break;
case 1:
    if (upperShift) {
      result.append((char)(cValue + 128));
      upperShift=false;
    }
 else {
      result.append((char)cValue);
    }
  shift=0;
break;
case 2:
if (cValue < C40_SHIFT2_SET_CHARS.length) {
char c40char=C40_SHIFT2_SET_CHARS[cValue];
if (upperShift) {
  result.append((char)(c40char + 128));
  upperShift=false;
}
 else {
  result.append(c40char);
}
}
 else if (cValue == 27) {
result.append((char)29);
}
 else if (cValue == 30) {
upperShift=true;
}
 else {
throw FormatException.getFormatInstance();
}
shift=0;
break;
case 3:
if (cValue < TEXT_SHIFT3_SET_CHARS.length) {
char textChar=TEXT_SHIFT3_SET_CHARS[cValue];
if (upperShift) {
result.append((char)(textChar + 128));
upperShift=false;
}
 else {
result.append(textChar);
}
shift=0;
}
 else {
throw FormatException.getFormatInstance();
}
break;
default :
throw FormatException.getFormatInstance();
}
}
}
 while (bits.available() > 0);
}

public synchronized void curl(PointF curlPos,PointF curlDir,double radius){
  if (DRAW_CURL_POSITION) {
    mBufCurlPositionLines.position(0);
    mBufCurlPositionLines.put(curlPos.x);
    mBufCurlPositionLines.put(curlPos.y - 1.0f);
    mBufCurlPositionLines.put(curlPos.x);
    mBufCurlPositionLines.put(curlPos.y + 1.0f);
    mBufCurlPositionLines.put(curlPos.x - 1.0f);
    mBufCurlPositionLines.put(curlPos.y);
    mBufCurlPositionLines.put(curlPos.x + 1.0f);
    mBufCurlPositionLines.put(curlPos.y);
    mBufCurlPositionLines.put(curlPos.x);
    mBufCurlPositionLines.put(curlPos.y);
    mBufCurlPositionLines.put(curlPos.x + curlDir.x * 2);
    mBufCurlPositionLines.put(curlPos.y + curlDir.y * 2);
    mBufCurlPositionLines.position(0);
  }
  mBufVertices.position(0);
  mBufColors.position(0);
  if (DRAW_TEXTURE) {
    mBufTexCoords.position(0);
  }
  double curlAngle=Math.acos(curlDir.x);
  curlAngle=curlDir.y > 0 ? -curlAngle : curlAngle;
  mArrTempVertices.addAll(mArrRotatedVertices);
  mArrRotatedVertices.clear();
  for (int i=0; i < 4; ++i) {
    Vertex v=mArrTempVertices.remove(0);
    v.set(mRectangle[i]);
    v.translate(-curlPos.x,-curlPos.y);
    v.rotateZ(-curlAngle);
    int j=0;
    for (; j < mArrRotatedVertices.size(); ++j) {
      Vertex v2=mArrRotatedVertices.get(j);
      if (v.mPosX > v2.mPosX) {
        break;
      }
      if (v.mPosX == v2.mPosX && v.mPosY > v2.mPosY) {
        break;
      }
    }
    mArrRotatedVertices.add(j,v);
  }
  int lines[][]={{0,1},{0,2},{1,3},{2,3}};
{
    Vertex v0=mArrRotatedVertices.get(0);
    Vertex v2=mArrRotatedVertices.get(2);
    Vertex v3=mArrRotatedVertices.get(3);
    double dist2=Math.sqrt((v0.mPosX - v2.mPosX) * (v0.mPosX - v2.mPosX) + (v0.mPosY - v2.mPosY) * (v0.mPosY - v2.mPosY));
    double dist3=Math.sqrt((v0.mPosX - v3.mPosX) * (v0.mPosX - v3.mPosX) + (v0.mPosY - v3.mPosY) * (v0.mPosY - v3.mPosY));
    if (dist2 > dist3) {
      lines[1][1]=3;
      lines[2][1]=2;
    }
  }
  mVerticesCountFront=mVerticesCountBack=0;
  if (DRAW_SHADOW) {
    mArrTempShadowVertices.addAll(mArrDropShadowVertices);
    mArrTempShadowVertices.addAll(mArrSelfShadowVertices);
    mArrDropShadowVertices.clear();
    mArrSelfShadowVertices.clear();
  }
  double curlLength=Math.PI * radius;
  mArrScanLines.clear();
  if (mMaxCurlSplits > 0) {
    mArrScanLines.add((double)0);
  }
  for (int i=1; i < mMaxCurlSplits; ++i) {
    mArrScanLines.add((-curlLength * i) / (mMaxCurlSplits - 1));
  }
  mArrScanLines.add(mArrRotatedVertices.get(3).mPosX - 1);
  double scanXmax=mArrRotatedVertices.get(0).mPosX + 1;
  for (int i=0; i < mArrScanLines.size(); ++i) {
    double scanXmin=mArrScanLines.get(i);
    for (int j=0; j < mArrRotatedVertices.size(); ++j) {
      Vertex v=mArrRotatedVertices.get(j);
      if (v.mPosX >= scanXmin && v.mPosX <= scanXmax) {
        Vertex n=mArrTempVertices.remove(0);
        n.set(v);
        Array<Vertex> intersections=getIntersections(mArrRotatedVertices,lines,n.mPosX);
        if (intersections.size() == 1 && intersections.get(0).mPosY > v.mPosY) {
          mArrOutputVertices.addAll(intersections);
          mArrOutputVertices.add(n);
        }
 else         if (intersections.size() <= 1) {
          mArrOutputVertices.add(n);
          mArrOutputVertices.addAll(intersections);
        }
 else {
          mArrTempVertices.add(n);
          mArrTempVertices.addAll(intersections);
        }
      }
    }
    Array<Vertex> intersections=getIntersections(mArrRotatedVertices,lines,scanXmin);
    if (intersections.size() == 2) {
      Vertex v1=intersections.get(0);
      Vertex v2=intersections.get(1);
      if (v1.mPosY < v2.mPosY) {
        mArrOutputVertices.add(v2);
        mArrOutputVertices.add(v1);
      }
 else {
        mArrOutputVertices.addAll(intersections);
      }
    }
 else     if (intersections.size() != 0) {
      mArrTempVertices.addAll(intersections);
    }
    while (mArrOutputVertices.size() > 0) {
      Vertex v=mArrOutputVertices.remove(0);
      mArrTempVertices.add(v);
      boolean textureFront;
      if (i == 0) {
        textureFront=true;
        mVerticesCountFront++;
      }
 else       if (i == mArrScanLines.size() - 1 || curlLength == 0) {
        v.mPosX=-(curlLength + v.mPosX);
        v.mPosZ=2 * radius;
        v.mPenumbraX=-v.mPenumbraX;
        textureFront=false;
        mVerticesCountBack++;
      }
 else {
        double rotY=Math.PI * (v.mPosX / curlLength);
        v.mPosX=radius * Math.sin(rotY);
        v.mPosZ=radius - (radius * Math.cos(rotY));
        v.mPenumbraX*=Math.cos(rotY);
        v.mColorFactor=(float)(.1f + .9f * Math.sqrt(Math.sin(rotY) + 1));
        if (v.mPosZ >= radius) {
          textureFront=false;
          mVerticesCountBack++;
        }
 else {
          textureFront=true;
          mVerticesCountFront++;
        }
      }
      if (textureFront != mFlipTexture) {
        v.mTexX*=mTextureRectFront.right;
        v.mTexY*=mTextureRectFront.bottom;
        v.mColor=mTexturePage.getColor(CurlPage.SIDE_FRONT);
      }
 else {
        v.mTexX*=mTextureRectBack.right;
        v.mTexY*=mTextureRectBack.bottom;
        v.mColor=mTexturePage.getColor(CurlPage.SIDE_BACK);
      }
      v.rotateZ(curlAngle);
      v.translate(curlPos.x,curlPos.y);
      addVertex(v);
      if (DRAW_SHADOW && v.mPosZ > 0 && v.mPosZ <= radius) {
        ShadowVertex sv=mArrTempShadowVertices.remove(0);
        sv.mPosX=v.mPosX;
        sv.mPosY=v.mPosY;
        sv.mPosZ=v.mPosZ;
        sv.mPenumbraX=(v.mPosZ / 2) * -curlDir.x;
        sv.mPenumbraY=(v.mPosZ / 2) * -curlDir.y;
        sv.mPenumbraColor=v.mPosZ / radius;
        int idx=(mArrDropShadowVertices.size() + 1) / 2;
        mArrDropShadowVertices.add(idx,sv);
      }
      if (DRAW_SHADOW && v.mPosZ > radius) {
        ShadowVertex sv=mArrTempShadowVertices.remove(0);
        sv.mPosX=v.mPosX;
        sv.mPosY=v.mPosY;
        sv.mPosZ=v.mPosZ;
        sv.mPenumbraX=((v.mPosZ - radius) / 3) * v.mPenumbraX;
        sv.mPenumbraY=((v.mPosZ - radius) / 3) * v.mPenumbraY;
        sv.mPenumbraColor=(v.mPosZ - radius) / (2 * radius);
        int idx=(mArrSelfShadowVertices.size() + 1) / 2;
        mArrSelfShadowVertices.add(idx,sv);
      }
    }
    scanXmax=scanXmin;
  }
  mBufVertices.position(0);
  mBufColors.position(0);
  if (DRAW_TEXTURE) {
    mBufTexCoords.position(0);
  }
  if (DRAW_SHADOW) {
    mBufShadowColors.position(0);
    mBufShadowVertices.position(0);
    mDropShadowCount=0;
    for (int i=0; i < mArrDropShadowVertices.size(); ++i) {
      ShadowVertex sv=mArrDropShadowVertices.get(i);
      mBufShadowVertices.put((float)sv.mPosX);
      mBufShadowVertices.put((float)sv.mPosY);
      mBufShadowVertices.put((float)sv.mPosZ);
      mBufShadowVertices.put((float)(sv.mPosX + sv.mPenumbraX));
      mBufShadowVertices.put((float)(sv.mPosY + sv.mPenumbraY));
      mBufShadowVertices.put((float)sv.mPosZ);
      for (int j=0; j < 4; ++j) {
        double color=SHADOW_OUTER_COLOR[j] + (SHADOW_INNER_COLOR[j] - SHADOW_OUTER_COLOR[j]) * sv.mPenumbraColor;
        mBufShadowColors.put((float)color);
      }
      mBufShadowColors.put(SHADOW_OUTER_COLOR);
      mDropShadowCount+=2;
    }
    mSelfShadowCount=0;
    for (int i=0; i < mArrSelfShadowVertices.size(); ++i) {
      ShadowVertex sv=mArrSelfShadowVertices.get(i);
      mBufShadowVertices.put((float)sv.mPosX);
      mBufShadowVertices.put((float)sv.mPosY);
      mBufShadowVertices.put((float)sv.mPosZ);
      mBufShadowVertices.put((float)(sv.mPosX + sv.mPenumbraX));
      mBufShadowVertices.put((float)(sv.mPosY + sv.mPenumbraY));
      mBufShadowVertices.put((float)sv.mPosZ);
      for (int j=0; j < 4; ++j) {
        double color=SHADOW_OUTER_COLOR[j] + (SHADOW_INNER_COLOR[j] - SHADOW_OUTER_COLOR[j]) * sv.mPenumbraColor;
        mBufShadowColors.put((float)color);
      }
      mBufShadowColors.put(SHADOW_OUTER_COLOR);
      mSelfShadowCount+=2;
    }
    mBufShadowColors.position(0);
    mBufShadowVertices.position(0);
  }
}

public void saveLockPassword(String password,int quality,boolean isFallback){
  final byte[] hash=passwordToHash(password);
  try {
    RandomAccessFile raf=new RandomAccessFile(sLockPasswordFilename,"rwd");
    try {
      if (password == null) {
        raf.setLength(0);
      }
 else {
        raf.write(hash,0,hash.length);
      }
    }
  finally {
      if (raf != null)       raf.close();
    }
  }
 catch (  FileNotFoundException fnfe) {
    LogUtil.e(TAG,"Unable to save lock pattern to " + sLockPasswordFilename);
  }
catch (  IOException ioe) {
    LogUtil.e(TAG,"Unable to save lock pattern to " + sLockPasswordFilename);
  }
}

public boolean checkUsernameExists(String username) throws DataAccessException {
  return getUserInfo(username) != null;
}

public Code39Reader(){
  usingCheckDigit=false;
  extendedMode=false;
}

public static String encode(final List<Position> path,int precision){
  long lastLat=0;
  long lastLng=0;
  final StringBuffer result=new StringBuffer();
  double factor=Math.pow(10,precision);
  for (  final Position point : path) {
    long lat=Math.round(point.getLatitude() * factor);
    long lng=Math.round(point.getLongitude() * factor);
    long dLat=lat - lastLat;
    long dLng=lng - lastLng;
    encode(dLat,result);
    encode(dLng,result);
    lastLat=lat;
    lastLng=lng;
  }
  return result.toString();
}

public ActivityResolveInfo(ResolveInfo resolveInfo){
  this.resolveInfo=resolveInfo;
}

@Override public int compareTo(LibPackage p_other){
  return pkg_name.compareToIgnoreCase(p_other.pkg_name);
}

public void writeExif(Bitmap bmap,String exifOutFileName) throws FileNotFoundException, IOException {
  if (bmap == null || exifOutFileName == null) {
    throw new IllegalArgumentException(NULL_ARGUMENT_STRING);
  }
  OutputStream s=null;
  try {
    s=getExifWriterStream(exifOutFileName);
    bmap.compress(Bitmap.CompressFormat.JPEG,90,s);
    s.flush();
  }
 catch (  IOException e) {
    closeSilently(s);
    throw e;
  }
  s.close();
}

public double entropy(int[] x){
  double h=0.0;
  int n=x.length;
  double ln2=Math.log(2.0);
  int n0=0;
  for (int i=0; i < n; i++) {
    if (x[i] == 0) {
      n0++;
    }
  }
  double p;
  if (n0 == 0 || n0 == n) {
    return h;
  }
 else {
    p=(double)n0 / (double)n;
    h=-(p * Math.log(p) + (1.0 - p) * Math.log(1.0 - p)) / ln2;
  }
  return h;
}

private String[] addtoSelectionArgs(final String argValue,final String[] selectionArgsIn){
  String[] selectionArgs=selectionArgsIn;
  List<String> selectionArgsList=new ArrayList<>();
  selectionArgsList.add(argValue);
  if (null != selectionArgsIn) {
    for (    final String arg : selectionArgsIn) {
      selectionArgsList.add(arg);
    }
  }
  selectionArgs=selectionArgsList.toArray(new String[0]);
  selectionArgsList.clear();
  selectionArgsList=null;
  return selectionArgs;
}

public void put(String sample,String attribute,Object value){
  if (!sampleOrder.contains(sample))   sampleOrder.add(sample);
  if (!attributeOrder.contains(attribute))   attributeOrder.add(attribute);
  table.put(sample,attribute,value);
}

public boolean isCompacted(){
  return compacted;
}

protected void center(){
  Container parent=getParent();
  final Dimension size=getPreferredSize();
  setBounds((parent.getWidth() - size.width) / 2,(parent.getHeight() - size.height) / 2,size.width,size.height);
}

public boolean isCardDismissible(String tag){
  return mDismissibleCards.contains(tag);
}

public void write(char cbuf[],int off,int len) throws IOException {
  se.write(cbuf,off,len);
}

public boolean validate(String telephone){
  char aChar;
  StringBuilder buf=new StringBuilder(telephone);
  for (int aIndex=0; aIndex < buf.length(); aIndex++) {
    aChar=buf.charAt(aIndex);
    if (!Character.isSpaceChar(aChar)) {
      if (!Character.isDigit(aChar) && !isValidTelephoneChars(aChar)) {
        return false;
      }
    }
  }
  return true;
}

public static void unpack(HashMap<String,Object> object,String key,Object value){
  String[] split=key.split("\\.");
  HashMap lobj=object;
  for (int cur=0; cur < split.length; cur++) {
    String current=split[cur];
    if (!(lobj.containsKey(current) && lobj.get(current) instanceof HashMap)) {
      lobj.put(current,new HashMap<String,Object>());
    }
    if (cur == split.length - 1) {
      lobj.put(current,value);
    }
 else     lobj=(HashMap)lobj.get(current);
  }
}

public void removeListener(DNSListener listener){
  _listeners.remove(listener);
}

static Set<String> parseResourcePathParams(String resourcePath){
  Matcher matcher=PARAM_URL_REGEX.matcher(resourcePath);
  Set<String> patterns=new LinkedHashSet<>();
  while (matcher.find()) {
    patterns.add(matcher.group(1));
  }
  return patterns;
}

@Override public void close() throws IOException {
  if (logger != null) {
    logger.println("SSLSocket.close " + socket_was_closed);
  }
  if (!socket_was_closed) {
    if (handshake_started) {
      alertProtocol.alert(AlertProtocol.WARNING,AlertProtocol.CLOSE_NOTIFY);
      try {
        output.write(alertProtocol.wrap());
      }
 catch (      IOException ex) {
      }
      alertProtocol.setProcessed();
    }
    shutdown();
    closeTransportLayer();
    socket_was_closed=true;
  }
}

public JRangeSlider(BoundedRangeModel model,int orientation,int direction){
  super.setFocusable(true);
  this.model=model;
  this.orientation=orientation;
  this.direction=direction;
  setForeground(Color.LIGHT_GRAY);
  this.lstnr=createListener();
  model.addChangeListener(lstnr);
  addMouseListener(this);
  addMouseMotionListener(this);
  addKeyListener(this);
}

public static boolean isAutoNew(Properties ctx){
  if (ctx == null)   throw new IllegalArgumentException("Require Context");
  String s=getContext(ctx,"AutoNew");
  if (s != null && s.equals("Y"))   return true;
  return false;
}

public boolean canRead(String path){
  try {
    ZipEntry entry=getZipEntry(path);
    return entry != null && !entry.isDirectory();
  }
 catch (  IOException e) {
    log.log(Level.FINE,e.toString(),e);
    return false;
  }
}

public static long[] andI(long[] v,long[] o,int off){
  if (off == 0) {
    return andI(v,o);
  }
  if (off < 0) {
    throw new UnsupportedOperationException("Negative shifts are not supported.");
  }
  final int shiftWords=off >>> LONG_LOG2_SIZE;
  final int shiftBits=off & LONG_LOG2_MASK;
  if (shiftWords >= v.length) {
    return v;
  }
  if (shiftBits == 0) {
    final int end=Math.min(v.length,o.length + shiftWords);
    for (int i=shiftWords; i < end; i++) {
      v[i]&=o[i - shiftWords];
    }
    Arrays.fill(v,0,shiftWords,0);
    return v;
  }
  final int unshiftBits=Long.SIZE - shiftBits;
  final int end=Math.min(v.length,o.length + shiftWords) - 1;
  Arrays.fill(v,end + 1,v.length,0);
  for (int i=end; i > shiftWords; i--) {
    final int src=i - shiftWords;
    v[i]&=(o[src] << shiftBits) | (o[src - 1] >>> unshiftBits);
  }
  v[shiftWords]&=o[0] << shiftBits;
  Arrays.fill(v,0,shiftWords,0);
  return v;
}

private int calculateLayoutWidth(int widthSize,int mode){
  initResourcesIfNecessary();
  itemsLayout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
  itemsLayout.measure(MeasureSpec.makeMeasureSpec(widthSize,MeasureSpec.UNSPECIFIED),MeasureSpec.makeMeasureSpec(0,MeasureSpec.UNSPECIFIED));
  int width=itemsLayout.getMeasuredWidth();
  if (mode == MeasureSpec.EXACTLY) {
    width=widthSize;
  }
 else {
    width+=2 * PADDING;
    width=Math.max(width,getSuggestedMinimumWidth());
    if (mode == MeasureSpec.AT_MOST && widthSize < width) {
      width=widthSize;
    }
  }
  itemsLayout.measure(MeasureSpec.makeMeasureSpec(width - 2 * PADDING,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(0,MeasureSpec.UNSPECIFIED));
  return width;
}

public boolean equals(Object p_test){
  if (p_test instanceof URI) {
    URI testURI=(URI)p_test;
    if (((m_scheme == null && testURI.m_scheme == null) || (m_scheme != null && testURI.m_scheme != null && m_scheme.equals(testURI.m_scheme))) && ((m_userinfo == null && testURI.m_userinfo == null) || (m_userinfo != null && testURI.m_userinfo != null && m_userinfo.equals(testURI.m_userinfo))) && ((m_host == null && testURI.m_host == null) || (m_host != null && testURI.m_host != null && m_host.equals(testURI.m_host)))&& m_port == testURI.m_port && ((m_path == null && testURI.m_path == null) || (m_path != null && testURI.m_path != null && m_path.equals(testURI.m_path))) && ((m_queryString == null && testURI.m_queryString == null) || (m_queryString != null && testURI.m_queryString != null && m_queryString.equals(testURI.m_queryString))) && ((m_fragment == null && testURI.m_fragment == null) || (m_fragment != null && testURI.m_fragment != null && m_fragment.equals(testURI.m_fragment)))) {
      return true;
    }
  }
  return false;
}

public void testCase5(){
  byte aBytes[]={1,2,3,4,5,6,7,1,2,3,1,2,3,4,5};
  byte bBytes[]={10,20,30,40,50,60,70,10,20,30};
  int aSign=1;
  int bSign=-1;
  byte rBytes[]={-11,-41,-101,54,-97,-52,-77,-41,44,-86,-116,-45,126,-116,20,61,14,-86,-65,86,1,35,35,106};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.multiply(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

public ISAACRandom(){
  setSeed(System.currentTimeMillis() + System.identityHashCode(this));
}

public static boolean isMD5String(final String string){
  Preconditions.checkNotNull(string,"Error: String argument can't be null");
  return (string.length() == 32) && isHexString(string);
}

public synchronized void waitForSubmittedTasks() throws InterruptedException {
  while (currentTaskCount.get() > 0) {
    waitForSingleTask();
  }
}

private int scanToken(int startPos){
  int position=startPos;
  while (position < maxPosition) {
    if (!hasSurrogates) {
      char c=str.charAt(position);
      if ((c <= maxDelimCodePoint) && (delimiters.indexOf(c) >= 0))       break;
      position++;
    }
 else {
      int c=str.codePointAt(position);
      if ((c <= maxDelimCodePoint) && isDelimiter(c))       break;
      position+=Character.charCount(c);
    }
  }
  if (retDelims && (startPos == position)) {
    if (!hasSurrogates) {
      char c=str.charAt(position);
      if ((c <= maxDelimCodePoint) && (delimiters.indexOf(c) >= 0))       position++;
    }
 else {
      int c=str.codePointAt(position);
      if ((c <= maxDelimCodePoint) && isDelimiter(c))       position+=Character.charCount(c);
    }
  }
  return position;
}

public void zoomAt(double x,double y,double z,double zoomValue){
  double[] diff={targetXoff - x,targetYoff - y,z - targetZoff};
  double length=Math.sqrt(diff[0] * diff[0] + diff[1] * diff[1] + diff[2] * diff[2]);
  if (length == 0) {
    length=1;
  }
  double[] normalized={diff[0] / length,diff[1] / length,diff[2] / length};
  double percent=zoomValue / normalized[2];
  moveToPosition(-(float)(targetXoff + normalized[0] * percent),-(float)(targetYoff + normalized[1] * percent));
  zoomToCamera((float)(targetZoff + normalized[2] * percent));
}

private static int stringToHash(String s){
  int len=s.length();
  int hash2=0;
  int hash=len;
  hash<<=5;
  hash+=s.charAt(0) - 0x60;
  int j=len;
  for (int i=0; i < 4 && j > 0; i++) {
    j--;
    hash<<=5;
    hash+=s.charAt(j) - 0x60;
    hash2<<=6;
    hash2+=s.charAt(i) - 0x5F;
  }
  return hash ^ hash2;
}

public void registerDenseFeatures(ArrayList<FeatureFunction> featureFunctions){
  for (  FeatureFunction feature : featureFunctions) {
    ArrayList<String> names=feature.reportDenseFeatures(denseFeatures.size());
    for (    String name : names) {
      DENSE_FEATURE_NAMES.add(name);
      denseFeatures.add(getSparse(name));
      sparseFeatures.remove(name);
    }
  }
}

private void addFlag(final List<String> args,final String argName,final boolean value){
  if (value) {
    args.add(argName);
  }
}

public static PrivateKey load(InputStream is) throws IOException, CryptoException {
  byte[] pvk=ReadUtil.readFully(is);
  ByteBuffer bb=ByteBuffer.wrap(pvk);
  bb.order(ByteOrder.LITTLE_ENDIAN);
  long keyType=readReservedMagicKeyType(bb);
  long encrypted=UnsignedUtil.getInt(bb);
  if (encrypted != PVK_UNENCRYPTED) {
    throw new PrivateKeyEncryptedException(MessageFormat.format(res.getString("MsPvkIsEncrypted.exception.message"),Long.toHexString(encrypted),Long.toHexString(PVK_UNENCRYPTED)));
  }
  long saltLength=UnsignedUtil.getInt(bb);
  if (saltLength != UNENCRYPTED_SALT_LENGTH) {
    throw new CryptoException(MessageFormat.format(res.getString("InvalidMsPvkSaltLengthField.exception.message"),Long.toHexString(saltLength),Long.toHexString(UNENCRYPTED_SALT_LENGTH)));
  }
  long keyLength=UnsignedUtil.getInt(bb);
  readPrivateKeyBlobHeader(bb,keyType);
  byte[] privateKeyBlob=new byte[bb.remaining()];
  bb.get(privateKeyBlob);
  if (keyLength != (privateKeyBlob.length + BLOB_HEADER_LENGTH)) {
    throw new CryptoException(MessageFormat.format(res.getString("InvalidMsPvkKeyLengthField.exception.message"),Long.toHexString(keyLength),Long.toHexString(privateKeyBlob.length + BLOB_HEADER_LENGTH)));
  }
  return blobToPrivateKey(privateKeyBlob);
}

public static byte[] keyGenPrivate(byte[] randomBytes) throws NoSuchAlgorithmException, DigestException {
  if (randomBytes.length < 32) {
    throw new RuntimeException("Random bytes too small");
  }
  MessageDigest digest=MessageDigest.getInstance("SHA-256");
  digest.digest(randomBytes,0,randomBytes.length);
  byte[] privateKey=digest.digest();
  privateKey[0]&=248;
  privateKey[31]&=127;
  privateKey[31]|=64;
  return privateKey;
}

private boolean isCheckpointTableExists(Connection conn){
  Statement st=null;
  ResultSet rs=null;
  try {
    st=conn.createStatement();
    rs=st.executeQuery(chkTblExistsSql);
    return true;
  }
 catch (  SQLException ignored) {
    return false;
  }
 finally {
    U.close(rs,log);
    U.close(st,log);
  }
}

public FunctionTableModel(){
  columnList.add(Localisation.getString(FunctionTableModel.class,"FunctionTableModel.parameter"));
  columnList.add(Localisation.getString(FunctionTableModel.class,"FunctionTableModel.type"));
  columnList.add(Localisation.getString(FunctionTableModel.class,"FunctionTableModel.optional"));
  columnList.add(Localisation.getString(FunctionTableModel.class,"FunctionTableModel.value"));
}

private NewCookie createWsCookie(String cookieName,String token,boolean setMaxAge,String userAgent){
  String ieExpires="";
  int maxAge=setMaxAge ? _tokenManager.getMaxTokenLifeTimeInSecs() : NewCookie.DEFAULT_MAX_AGE;
  if (setMaxAge && StringUtils.contains(userAgent,"MSIE")) {
    ieExpires=";expires=" + getExpiredTimeGMT(maxAge);
    _log.debug("Expires: " + ieExpires);
  }
  if (token != null && !token.isEmpty()) {
    return new NewCookie(cookieName,token + ";HttpOnly" + ieExpires,null,null,null,maxAge,true);
  }
  return null;
}

protected void initView(){
  p.setFakeBoldText(false);
  p.setAntiAlias(true);
  p.setTextSize(MINI_DAY_NUMBER_TEXT_SIZE);
  p.setStyle(Style.FILL);
  mMonthNumPaint=new Paint();
  mMonthNumPaint.setFakeBoldText(true);
  mMonthNumPaint.setAntiAlias(true);
  mMonthNumPaint.setTextSize(MINI_DAY_NUMBER_TEXT_SIZE);
  mMonthNumPaint.setColor(mFocusMonthColor);
  mMonthNumPaint.setStyle(Style.FILL);
  mMonthNumPaint.setTextAlign(Align.CENTER);
}

@Override public boolean connectionAllowed(EventSetDescriptor esd){
  return connectionAllowed(esd.getName());
}

ScheduledFutureTask(Runnable r,V result,long ns,long period){
  super(r,result);
  this.time=ns;
  this.period=period;
  this.sequenceNumber=sequencer.getAndIncrement();
}

public boolean verify(X509Certificate cert,Provider sigProvider) throws NoSuchAlgorithmException, CertificateExpiredException, CertificateNotYetValidException, CMSException {
  Time signingTime=getSigningTime();
  if (signingTime != null) {
    cert.checkValidity(signingTime.getDate());
  }
  return doVerify(cert.getPublicKey(),sigProvider);
}

public GeoMark analyse(final String text,final String[] tags,final int maxlength,final String salt){
  GeoLocation loc=geocode(text,tags,maxlength);
  if (loc != null)   return new GeoMark(loc,salt);
  return reverse_geocode(text);
}

public void findAndInit(Iterator it){
  while (it.hasNext()) {
    findAndInit(it.next());
  }
}

public void test_SelectOrderBy() throws SQLException {
  String selectQuery="SELECT onum FROM " + DatabaseCreator.ORDERS_TABLE + " ORDER BY onum";
  ResultSet result=statement.executeQuery(selectQuery);
  ArrayList<Integer> values=new ArrayList<Integer>();
  values.add(Integer.valueOf(3001));
  values.add(Integer.valueOf(3002));
  values.add(Integer.valueOf(3003));
  values.add(Integer.valueOf(3005));
  values.add(Integer.valueOf(3006));
  values.add(Integer.valueOf(3007));
  values.add(Integer.valueOf(3008));
  values.add(Integer.valueOf(3009));
  values.add(Integer.valueOf(3010));
  values.add(Integer.valueOf(3011));
  int index=0;
  while (result.next()) {
    Integer onum=result.getInt("onum");
    assertTrue("result set doesn't contain value",values.contains(onum));
    assertEquals("result set is not sorted",index,values.indexOf(onum));
    index++;
  }
  result.close();
}

private static String formatTo2Digits(String str){
  if (str.length() < 2) {
    str="0" + str;
  }
  return str;
}

protected static String quoteSQL(Object data,int type) throws SQLException {
  if (data == null) {
    return "NULL";
  }
switch (type) {
case Types.BIT:
case Types.BOOLEAN:
case Types.INTEGER:
case Types.BIGINT:
case Types.DECIMAL:
case Types.DOUBLE:
case Types.FLOAT:
case Types.NUMERIC:
case Types.REAL:
case Types.SMALLINT:
case Types.TINYINT:
    return data.toString();
case Types.DATE:
case Types.TIME:
case Types.TIMESTAMP:
case Types.LONGVARCHAR:
case Types.CHAR:
case Types.VARCHAR:
  return quoteString(data.toString());
case Types.VARBINARY:
case Types.LONGVARBINARY:
case Types.BINARY:
if (data instanceof UUID) {
  return "'" + data.toString() + "'";
}
return "'" + StringUtils.convertBytesToHex((byte[])data) + "'";
case Types.CLOB:
case Types.JAVA_OBJECT:
case Types.OTHER:
case Types.BLOB:
case Types.STRUCT:
case Types.REF:
case Types.NULL:
case Types.ARRAY:
case Types.DATALINK:
case Types.DISTINCT:
throw throwException("Unsupported key data type: " + type);
default :
return "";
}
}

public void addFooterView(View v,Object data,boolean isSelectable){
  FixedViewInfo info=new FixedViewInfo();
  info.view=v;
  info.data=data;
  info.isSelectable=isSelectable;
  mFooterViewInfos.add(info);
  if (mAdapter != null && mObserver != null) {
    mObserver.onChanged();
  }
}

public static int calculateDigitCount(long value){
  if (value < 0) {
    if (value != Long.MIN_VALUE) {
      return calculateDigitCount(-value) + 1;
    }
 else {
      return 20;
    }
  }
  return (value < 10 ? 1 : (value < 100 ? 2 : (value < 1000 ? 3 : (value < 10000 ? 4 : ((int)(Math.log(value) / LOG_10) + 1)))));
}

public static Byte[] convertDate(String date){
  StringTokenizer st=new StringTokenizer(date);
  String sdate=st.nextToken();
  String stime=st.nextToken();
  st=new StringTokenizer(sdate,"-");
  String year=st.nextToken();
  int iyear=0;
  try {
    iyear=Integer.parseInt(year);
  }
 catch (  NumberFormatException ex) {
    debug.error("MonitoringUtil.convertDate year = " + year + " not parsable");
  }
  byte yrlow=(byte)(iyear & 0xff);
  byte yrhigh=(byte)(((iyear & 0xff00) >> 8) & 0xff);
  String month=st.nextToken();
  String day=st.nextToken();
  st=new StringTokenizer(stime,":");
  String hour=st.nextToken();
  String min=st.nextToken();
  String sec=st.nextToken();
  Byte bz=Byte.valueOf((byte)0);
  Byte byrhi=bz;
  Byte byrlo=bz;
  Byte bmo=bz;
  Byte bdy=bz;
  Byte bhr=bz;
  Byte bmn=bz;
  Byte bsc=bz;
  try {
    byrhi=new Byte(yrhigh);
    byrlo=new Byte(yrlow);
    bmo=new Byte(month);
    bdy=new Byte(day);
    bhr=new Byte(hour);
    bmn=new Byte(min);
    bsc=new Byte(sec);
  }
 catch (  NumberFormatException ex) {
    debug.error("MonitoringUtil error converting start date/time" + ", date = " + sdate + ", time = "+ stime);
  }
  Byte[] ret=new Byte[8];
  ret[0]=byrhi;
  ret[1]=byrlo;
  ret[2]=bmo;
  ret[3]=bdy;
  ret[4]=bhr;
  ret[5]=bmn;
  ret[6]=bsc;
  ret[7]=bz;
  return ret;
}

private void parseAndAdd(String line,BufferedReader reader) throws IOException {
  try {
    StringTokenizer tokenizer=new StringTokenizer(line," ");
    String tag=tokenizer.nextToken();
    if (tag.equals("CONTINUITY_WEIGHT")) {
      continuityWeight=Integer.parseInt(tokenizer.nextToken());
    }
 else     if (tag.equals("OPTIMAL_COUPLING")) {
      optimalCoupling=Integer.parseInt(tokenizer.nextToken());
    }
 else     if (tag.equals("EXTEND_SELECTIONS")) {
      extendSelections=Integer.parseInt(tokenizer.nextToken());
    }
 else     if (tag.equals("JOIN_METHOD")) {
      joinMethod=Integer.parseInt(tokenizer.nextToken());
    }
 else     if (tag.equals("JOIN_WEIGHTS")) {
      int numWeights=Integer.parseInt(tokenizer.nextToken());
      joinWeights=new int[numWeights];
      for (int i=0; i < numWeights; i++) {
        joinWeights[i]=Integer.parseInt(tokenizer.nextToken());
      }
      joinWeightShift=calcJoinWeightShift(joinWeights);
    }
 else     if (tag.equals("STS")) {
      String name=tokenizer.nextToken();
      if (name.equals("STS")) {
        sts=new SampleSet(tokenizer,reader);
      }
 else {
        mcep=new SampleSet(tokenizer,reader);
      }
    }
 else     if (tag.equals("UNITS")) {
      int type=Integer.parseInt(tokenizer.nextToken());
      int phone=Integer.parseInt(tokenizer.nextToken());
      int start=Integer.parseInt(tokenizer.nextToken());
      int end=Integer.parseInt(tokenizer.nextToken());
      int prev=Integer.parseInt(tokenizer.nextToken());
      int next=Integer.parseInt(tokenizer.nextToken());
      DatabaseClusterUnit unit=new DatabaseClusterUnit(type,phone,start,end,prev,next);
      unitList.add(unit);
    }
 else     if (tag.equals("CART")) {
      String name=tokenizer.nextToken();
      int nodes=Integer.parseInt(tokenizer.nextToken());
      CART cart=new CARTImpl(reader,nodes);
      cartMap.put(name,cart);
      if (defaultCart == null) {
        defaultCart=cart;
      }
    }
 else     if (tag.equals("UNIT_TYPE")) {
      String name=tokenizer.nextToken();
      int start=Integer.parseInt(tokenizer.nextToken());
      int count=Integer.parseInt(tokenizer.nextToken());
      UnitType unitType=new UnitType(name,start,count);
      unitTypesList.add(unitType);
    }
 else {
      throw new Error("Unsupported tag " + tag + " in db line `"+ line+ "'");
    }
  }
 catch (  NoSuchElementException nse) {
    throw new Error("Error parsing db " + nse.getMessage());
  }
catch (  NumberFormatException nfe) {
    throw new Error("Error parsing numbers in db line `" + line + "':"+ nfe.getMessage());
  }
}

public String byteStringNoSemicolon(){
  StringBuilder retval=new StringBuilder();
  try {
    while (true) {
      char next=lookAhead(0);
      if (next == '\0' || next == '\n' || next == ';' || next == ',') {
        break;
      }
 else {
        consume(1);
        retval.append(next);
      }
    }
  }
 catch (  ParseException ex) {
    return retval.toString();
  }
  return retval.toString();
}

public void testNegNegFirstLonger(){
  byte aBytes[]={-128,9,56,100,-2,-76,89,45,91,3,-15,35,26,-117,23,87,-25,-75};
  byte bBytes[]={-2,-3,-4,-4,5,14,23,39,48,57,66,5,14,23};
  int aSign=-1;
  int bSign=-1;
  byte rBytes[]={-1,1,75,-89,-45,-2,-3,-18,-36,-17,-10,-3,-6,-7,-21};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.or(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

public static void println(double x){
  out.println(x);
}

public boolean subscribeTopic(@NonNull Context context,@NonNull String[] newTopics){
  if (!initialized)   init(context);
  if (newTopics.length == 0)   return false;
  if (null == topics) {
    topics=new ArrayList<>();
  }
  for (  String topic : newTopics) {
    if (topics.contains(topic)) {
      return false;
    }
    topics.add(topic);
  }
  saveSubscibedTopics(context);
  Intent intent=new Intent(context,RegistrationIntentService.class);
  intent.setAction(RegistrationIntentService.ACTION_SUBSCRIBE);
  intent.putExtra(RegistrationIntentService.EXTRA_TOPIC_LIST,newTopics);
  context.startService(intent);
  return true;
}

public static String serialise(Node node){
  try {
    DOMImplementationRegistry registry=DOMImplementationRegistry.newInstance();
    DOMImplementationLS lsImpl=(DOMImplementationLS)registry.getDOMImplementation("LS");
    LSSerializer serializer=lsImpl.createLSSerializer();
    return serializer.writeToString(node);
  }
 catch (  Exception e) {
    log.fine("could not serialise XML node: " + e);
    return "";
  }
}

public static boolean isOnSegment(Geo a,Geo b,Geo i){
  return ((a.distance(i) < a.distance(b)) && (b.distance(i) < b.distance(a)));
}

public void addExtensionPoint(ExtensionPoint extensionPoint){
  fExtensionPoints.add(extensionPoint);
}

private List addNodeToList(int startIndexForNode,int endIndexForNode){
  List localvmList=new ArrayList();
  for (int i=startIndexForNode; i < endIndexForNode; i++) {
    localvmList.add(vm[i]);
  }
  return localvmList;
}

public void addMetaMethod(MetaMethod method){
  if (isInitialized()) {
    throw new RuntimeException("Already initialized, cannot add new method: " + method);
  }
  final CachedClass declaringClass=method.getDeclaringClass();
  addMetaMethodToIndex(method,metaMethodIndex.getHeader(declaringClass.getTheClass()));
}

public void waitForEvent(long timeout){
  Thread thread=Thread.currentThread();
  Semaphore semaphore=_semaphores.get(thread);
  if (semaphore == null) {
    semaphore=new Semaphore(1,true);
    semaphore.drainPermits();
    _semaphores.putIfAbsent(thread,semaphore);
  }
  semaphore=_semaphores.get(thread);
  try {
    semaphore.tryAcquire(timeout,TimeUnit.MILLISECONDS);
  }
 catch (  InterruptedException exception) {
    logger.log(Level.FINER,"Exception ",exception);
  }
}

public String stringValue(){
  Object cv=Assert.checkNonNull(constValue());
  return cv.toString();
}

public Date parseDate(String str){
  try {
    return dateFormat.parse(str);
  }
 catch (  java.text.ParseException e) {
    throw new RuntimeException(e);
  }
}

default int hash32(String value){
  return hash32(value.getBytes());
}

public Name addAll(Name suffix) throws InvalidNameException {
  return addAll(size(),suffix);
}

public final InputStream asInputStream() throws UnknownResourceException {
  return toInputStream();
}

private static double euclideanNorm(double vector[]){
  int n=vector.length;
  if (n < 1) {
    return 0;
  }
  if (n == 1) {
    return Math.abs(vector[0]);
  }
  double scale=0;
  double sum=1;
  for (int i=0; i < n; i++) {
    if (vector[i] != 0) {
      double abs=Math.abs(vector[i]);
      if (scale < abs) {
        double t=scale / abs;
        sum=1 + sum * (t * t);
        scale=abs;
      }
 else {
        double t=abs / scale;
        sum+=t * t;
      }
    }
  }
  return scale * Math.sqrt(sum);
}

public static FileDescriptor createSocket() throws IOException {
  if (!isSupported)   throw new UnsupportedOperationException("SDP not supported on this platform");
  int fdVal=create0();
  FileDescriptor fd=new FileDescriptor();
  fdAccess.set(fd,fdVal);
  return fd;
}

public static Grammar doTheMerges(Grammar grammar,Lexicon lexicon,boolean[][][] mergeThesePairs,double[][] mergeWeights){
  short[] numSubStatesArray=grammar.numSubStates;
  short[] newNumSubStatesArray=grammar.numSubStates;
  Grammar newGrammar=null;
  while (true) {
    boolean somethingToMerge=false;
    for (int tag=0; tag < numSubStatesArray.length; tag++) {
      for (int i=0; i < newNumSubStatesArray[tag]; i++) {
        for (int j=0; j < newNumSubStatesArray[tag]; j++) {
          somethingToMerge=somethingToMerge || mergeThesePairs[tag][i][j];
        }
      }
    }
    if (!somethingToMerge)     break;
    boolean[][][] mergeThisIteration=new boolean[newNumSubStatesArray.length][][];
    for (int tag=0; tag < numSubStatesArray.length; tag++) {
      mergeThisIteration[tag]=new boolean[mergeThesePairs[tag].length][mergeThesePairs[tag].length];
      for (int i=0; i < mergeThesePairs[tag].length; i++) {
        for (int j=0; j < mergeThesePairs[tag].length; j++) {
          mergeThisIteration[tag][i][j]=mergeThesePairs[tag][i][j];
        }
      }
    }
    for (int tag=0; tag < numSubStatesArray.length; tag++) {
      boolean[] alreadyDecidedToMerge=new boolean[mergeThesePairs[tag].length];
      for (int i=0; i < mergeThesePairs[tag].length; i++) {
        for (int j=0; j < mergeThesePairs[tag].length; j++) {
          if (alreadyDecidedToMerge[i] || alreadyDecidedToMerge[j])           mergeThisIteration[tag][i][j]=false;
          alreadyDecidedToMerge[i]=alreadyDecidedToMerge[i] || mergeThesePairs[tag][i][j];
          alreadyDecidedToMerge[j]=alreadyDecidedToMerge[j] || mergeThesePairs[tag][i][j];
        }
      }
    }
    for (int tag=0; tag < numSubStatesArray.length; tag++) {
      for (int i=0; i < mergeThesePairs[tag].length; i++) {
        for (int j=0; j < mergeThesePairs[tag].length; j++) {
          mergeThesePairs[tag][i][j]=mergeThesePairs[tag][i][j] && !mergeThisIteration[tag][i][j];
        }
      }
    }
    newGrammar=grammar.mergeStates(mergeThisIteration,mergeWeights);
    lexicon.mergeStates(mergeThisIteration,mergeWeights);
    grammar.fixMergeWeightsEtc(mergeThesePairs,mergeWeights,mergeThisIteration);
    grammar=newGrammar;
    newNumSubStatesArray=grammar.numSubStates;
  }
  grammar.makeCRArrays();
  return grammar;
}

private static void extractFile(ZipInputStream zipIn,String filePath) throws IOException {
  BufferedOutputStream bos=new BufferedOutputStream(new FileOutputStream(filePath));
  byte[] bytesIn=new byte[BUFFER_SIZE];
  int read=0;
  while ((read=zipIn.read(bytesIn)) != -1) {
    bos.write(bytesIn,0,read);
  }
  bos.close();
}

public static final String squareToString(int square){
  StringBuilder ret=new StringBuilder();
  int x=Position.getX(square);
  int y=Position.getY(square);
  ret.append((char)(x + 'a'));
  ret.append((char)(y + '1'));
  return ret.toString();
}

protected void drawVerticalItem(Graphics2D g2,CategoryItemRendererState state,Rectangle2D dataArea,CategoryPlot plot,CategoryAxis domainAxis,ValueAxis rangeAxis,StatisticalCategoryDataset dataset,int visibleRow,int row,int column){
  double rectX=calculateBarW0(plot,PlotOrientation.VERTICAL,dataArea,domainAxis,state,visibleRow,column);
  Number meanValue=dataset.getMeanValue(row,column);
  if (meanValue == null) {
    return;
  }
  double value=meanValue.doubleValue();
  double base=0.0;
  double lclip=getLowerClip();
  double uclip=getUpperClip();
  if (uclip <= 0.0) {
    if (value >= uclip) {
      return;
    }
    base=uclip;
    if (value <= lclip) {
      value=lclip;
    }
  }
 else   if (lclip <= 0.0) {
    if (value >= uclip) {
      value=uclip;
    }
 else {
      if (value <= lclip) {
        value=lclip;
      }
    }
  }
 else {
    if (value <= lclip) {
      return;
    }
    base=getLowerClip();
    if (value >= uclip) {
      value=uclip;
    }
  }
  RectangleEdge yAxisLocation=plot.getRangeAxisEdge();
  double transY1=rangeAxis.valueToJava2D(base,dataArea,yAxisLocation);
  double transY2=rangeAxis.valueToJava2D(value,dataArea,yAxisLocation);
  double rectY=Math.min(transY2,transY1);
  double rectWidth=state.getBarWidth();
  double rectHeight=Math.abs(transY2 - transY1);
  Rectangle2D bar=new Rectangle2D.Double(rectX,rectY,rectWidth,rectHeight);
  Paint itemPaint=getItemPaint(row,column);
  GradientPaintTransformer t=getGradientPaintTransformer();
  if (t != null && itemPaint instanceof GradientPaint) {
    itemPaint=t.transform((GradientPaint)itemPaint,bar);
  }
  g2.setPaint(itemPaint);
  g2.fill(bar);
  if (isDrawBarOutline() && state.getBarWidth() > BAR_OUTLINE_WIDTH_THRESHOLD) {
    Stroke stroke=getItemOutlineStroke(row,column);
    Paint paint=getItemOutlinePaint(row,column);
    if (stroke != null && paint != null) {
      g2.setStroke(stroke);
      g2.setPaint(paint);
      g2.draw(bar);
    }
  }
  Number n=dataset.getStdDevValue(row,column);
  if (n != null) {
    double valueDelta=n.doubleValue();
    double highVal=rangeAxis.valueToJava2D(meanValue.doubleValue() + valueDelta,dataArea,yAxisLocation);
    double lowVal=rangeAxis.valueToJava2D(meanValue.doubleValue() - valueDelta,dataArea,yAxisLocation);
    if (this.errorIndicatorPaint != null) {
      g2.setPaint(this.errorIndicatorPaint);
    }
 else {
      g2.setPaint(getItemOutlinePaint(row,column));
    }
    if (this.errorIndicatorStroke != null) {
      g2.setStroke(this.errorIndicatorStroke);
    }
 else {
      g2.setStroke(getItemOutlineStroke(row,column));
    }
    Line2D line;
    line=new Line2D.Double(rectX + rectWidth / 2.0d,lowVal,rectX + rectWidth / 2.0d,highVal);
    g2.draw(line);
    line=new Line2D.Double(rectX + rectWidth / 2.0d - 5.0d,highVal,rectX + rectWidth / 2.0d + 5.0d,highVal);
    g2.draw(line);
    line=new Line2D.Double(rectX + rectWidth / 2.0d - 5.0d,lowVal,rectX + rectWidth / 2.0d + 5.0d,lowVal);
    g2.draw(line);
  }
  CategoryItemLabelGenerator generator=getItemLabelGenerator(row,column);
  if (generator != null && isItemLabelVisible(row,column)) {
    drawItemLabel(g2,dataset,row,column,plot,generator,bar,(value < 0.0));
  }
  EntityCollection entities=state.getEntityCollection();
  if (entities != null) {
    addItemEntity(entities,dataset,row,column,bar);
  }
}

public static boolean hasValidCover(IGame game,Coords pos,int elevation){
  if ((pos == null) || (elevation > 0)) {
    return false;
  }
  boolean hasMovedEntity=false;
  for (  Entity e : game.getEntitiesVector(pos)) {
    if (e.isDone() && !(e instanceof Infantry) && (e.getElevation() == elevation)) {
      hasMovedEntity=true;
      break;
    }
  }
  if (!hasMovedEntity) {
    Enumeration<Entity> wrecks=game.getWreckedEntities();
    while (wrecks.hasMoreElements()) {
      Entity e=wrecks.nextElement();
      if (pos.equals(e.getPosition()) && !(e instanceof Infantry)) {
        hasMovedEntity=true;
      }
    }
  }
  return hasMovedEntity;
}

public static Coordinate[] computeTangentsThroughPoint(Coordinate circleCenter,double radius,Coordinate point){
  Coordinate[] ret=new Coordinate[3];
  double dx=(point.x - circleCenter.x) / 2;
  double dy=(point.y - circleCenter.y) / 2;
  double d=Math.sqrt(dx * dx + dy * dy);
  double a=(radius * radius) / (2.0 * d);
  double x2=circleCenter.x + (dx * a / d);
  double y2=circleCenter.y + (dy * a / d);
  double h=Math.sqrt(radius * radius - a * a);
  double rx=-dy * (h / d);
  double ry=dx * (h / d);
  double xi=x2 + rx;
  double yi=y2 + ry;
  double xiPrime=x2 - rx;
  double yiPrime=y2 - ry;
  ret[0]=new Coordinate(point);
  ret[1]=new Coordinate(xi,yi);
  ret[2]=new Coordinate(xiPrime,yiPrime);
  return ret;
}

public void addGroup(GroupConfigInterface subGroup){
  subGroupList.add(subGroup);
}

public void startScanning(final BeaconServiceConnection serviceConnection){
  final Cursor cursor=mDatabaseHelper.getAllRegions();
  while (cursor.moveToNext()) {
    final UUID uuid=UUID.fromString(cursor.getString(2));
    final int major=cursor.getInt(3);
    final int minor=cursor.getInt(4);
    final int event=cursor.getInt(6);
    serviceConnection.startRangingBeaconsInRegion(BeaconsFragment.BEACON_COMPANY_ID,uuid,major,minor,this);
    if (event == BeaconContract.EVENT_IN_RANGE || event == BeaconContract.EVENT_OUT_OF_RANGE)     serviceConnection.startMonitoringForRegion(BeaconsFragment.BEACON_COMPANY_ID,uuid,major,minor,this);
  }
}

public void testDivideRoundHalfDownNeg1(){
  String a="-92948782094488478231212478987482988798104576347813847567949855464535634534563456";
  int aScale=-24;
  String b="74723342238476237823754692930187879183479";
  int bScale=13;
  String c="-1.2439055763572051712242335979928354832010167729111113605E+76";
  int resScale=-21;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  BigDecimal result=aNumber.divide(bNumber,resScale,BigDecimal.ROUND_HALF_DOWN);
  assertEquals("incorrect value",c,result.toString());
  assertEquals("incorrect scale",resScale,result.scale());
}

public static boolean isHeader(Header hdr){
  return hdr.getBooleanValue(ZIMAGE,false);
}

public static InfoRegister createFolder(User user,Integer bookId,List atts,List inter,Map documents,String entidad,boolean consolidacion) throws ValidationException, SecurityException, BookException, SessionException, TecDocException, ParseException, AttributesException {
  InfoRegister result=new InfoRegister();
  String sessionID=new String();
  try {
    sessionID=Login.login(user,entidad);
    setOfficeUserRegister(entidad,sessionID,atts);
    BookSession.openBook(sessionID,bookId,entidad);
    Integer launchDistOutRegister=RegisterServicesUtil.getInvesConfActions(entidad);
    RegisterServicesUtil.canCreateFolder(sessionID,bookId,documents,user,atts,entidad,consolidacion);
    AxSf axsfQ=BookSession.getFormFormat(sessionID,bookId,entidad);
    FieldFormat fieldFormat=RegisterServicesUtil.getFieldFormat(sessionID,bookId);
    Map translatedIds=RegisterServicesUtil.getFieldsWithSustitute(atts,axsfQ,sessionID,bookId,entidad);
    AxSf newAxSF=RegisterServicesUtil.initInOrOutFolder(user,axsfQ);
    newAxSF=RegisterServicesUtil.completeFolder(translatedIds,axsfQ,newAxSF,user.getLocale(),atts,fieldFormat,consolidacion);
    FolderDataSession data=Register.createNewFolder(sessionID,bookId,newAxSF,inter,documents,launchDistOutRegister,user.getLocale(),entidad,consolidacion);
    result=ConsultRegister.consultRegisterInfo(bookId,data.getAxsfNew(),data.getNewRegisterID(),data.getScrofic(),data.getUserName(),user.getLocale());
  }
  finally {
    BookSession.closeBook(sessionID,bookId);
    SecuritySession.logout(sessionID,entidad);
  }
  return result;
}

public void close() throws IOException {
  fInputStream.close();
}

private void handleSubscriptionError(AzureAllocationContext ctx,String namespace,Throwable e){
  if (e instanceof CloudException) {
    CloudException ce=(CloudException)e;
    CloudError body=ce.getBody();
    if (body != null) {
      String code=body.getCode();
      if (MISSING_SUBSCRIPTION_CODE.equals(code)) {
        registerSubscription(ctx,namespace);
        return;
      }
    }
  }
  handleError(ctx,e);
}

public boolean hasShutdownHook(Runnable shutdownHook){
  return hooks.contains(shutdownHook);
}

@Override public void endProcessSubTokens(){
  if (!skey.isEmpty()) {
    map.put(skey,sval);
    skey="";
    sval="";
  }
}

private void heapifyDown(Comparable<Object> cur){
  final int stop=size >>> 1;
  int twopos=0;
  while (twopos < stop) {
    int bestchild=(twopos << 1) + 1;
    Comparable<Object> best=twoheap[bestchild];
    final int right=bestchild + 1;
    if (right < size && best.compareTo(twoheap[right]) > 0) {
      bestchild=right;
      best=twoheap[right];
    }
    if (cur.compareTo(best) <= 0) {
      break;
    }
    twoheap[twopos]=best;
    twopos=bestchild;
  }
  twoheap[twopos]=cur;
}

public void addFeature(IFeatureVector fv){
  idxList.addAll(Ints.asList(fv.getIndices()));
  valList.addAll(Floats.asList(fv.getValues()));
}

protected void waitForExternalStoreMount() throws Exception {
  String extStorageState=Environment.getExternalStorageState();
  int currentWaitTime=0;
  while (!extStorageState.equals(Environment.MEDIA_MOUNTED)) {
    Log.i(LOG_TAG,"Waiting for SD card...");
    currentWaitTime=timeoutWait(currentWaitTime,DEFAULT_WAIT_POLL_TIME,DEFAULT_MAX_WAIT_TIME,"Timed out waiting for SD Card to be ready!");
    extStorageState=Environment.getExternalStorageState();
  }
}

public static DataDisplayTable listGlyphDimensionBounds(Font font){
  String[] header={"Dimension","Value"};
  Align[] displayAlignment={Align.Left,Align.Right};
  DataDisplayTable table=new DataDisplayTable(Arrays.asList(header));
  table.setAlignment(Arrays.asList(displayAlignment));
  LocaTable locaTable=FontUtils.getLocaTable(font);
  GlyphTable glyfTable=FontUtils.getGlyphTable(font);
  int xMin=Integer.MAX_VALUE;
  int yMin=Integer.MAX_VALUE;
  int xMax=Integer.MIN_VALUE;
  int yMax=Integer.MIN_VALUE;
  for (int i=0; i < locaTable.numGlyphs(); i++) {
    Glyph glyph=glyfTable.glyph(locaTable.glyphOffset(i),locaTable.glyphLength(i));
    if (glyph.xMin() < xMin) {
      xMin=glyph.xMin();
    }
    if (glyph.yMin() < yMin) {
      yMin=glyph.yMin();
    }
    if (glyph.xMax() > xMax) {
      xMax=glyph.xMax();
    }
    if (glyph.yMax() > yMax) {
      yMax=glyph.yMax();
    }
  }
  table.add(Arrays.asList(new String[]{"xMin",String.format("%d",xMin)}));
  table.add(Arrays.asList(new String[]{"xMax",String.format("%d",xMax)}));
  table.add(Arrays.asList(new String[]{"yMin",String.format("%d",yMin)}));
  table.add(Arrays.asList(new String[]{"yMax",String.format("%d",yMax)}));
  return table;
}

private boolean isInThumbRange(float touchX,double normalizedThumbValue){
  return Math.abs(touchX - normalizedToScreen(normalizedThumbValue)) <= thumbHalfWidth;
}

public static byte[] str2UnicodeByteArray(final JBBPByteOrder byteOrder,final String str){
  final byte[] result=new byte[str.length() << 1];
  int index=0;
  for (int i=0; i < str.length(); i++) {
    final int val=str.charAt(i);
switch (byteOrder) {
case BIG_ENDIAN:
{
        result[index++]=(byte)(val >> 8);
        result[index++]=(byte)val;
      }
    break;
case LITTLE_ENDIAN:
{
    result[index++]=(byte)val;
    result[index++]=(byte)(val >> 8);
  }
break;
default :
throw new Error("Unexpected byte order [" + byteOrder + ']');
}
}
return result;
}

private MethodDef parse_method(StrTok st){
  String method_name=st.need_word();
  st.need("(");
  ArrayList<String> args=new ArrayList<>();
  String tok=st.nextToken();
  if (tok != ")") {
    st.pushBack();
    do {
      tok=st.need_word();
      args.add(tok);
    }
 while (st.nextToken() == ",");
    st.pushBack();
    st.need(")");
  }
  Type[] targs=new Type[args.size()];
  for (int ii=0; ii < args.size(); ii++) {
    targs[ii]=BCELUtil.classname_to_type(args.get(ii));
  }
  return new MethodDef(method_name,targs);
}

private void writeExperiecedAndCausingPersonDelay(){
  SortedMap<Double,Map<Id<Person>,Double>> timeBin2AffectedPerson2Delay=getExperiencedPersonDelay(1);
  SortedMap<Double,Map<Id<Person>,Double>> timeBin2CausingPerson2Delay=getCausingPersonDelay(1);
  if (timeBin2AffectedPerson2Delay.size() != 1)   throw new RuntimeException("Delay is not summed up for all time bins.");
  Map<Id<Person>,Double> affectedperson2Delay=timeBin2AffectedPerson2Delay.get(simulationEndTime);
  Map<Id<Person>,Double> causedPerson2Delay=timeBin2CausingPerson2Delay.get(simulationEndTime);
  BufferedWriter writer=IOUtils.getBufferedWriter(runDir + "/analysis/affectedAndCausedDelay_" + pricingScenario+ suffixForSoring+ ".txt");
  try {
    writer.write("personId \t userGroup \t affectedDelayInHr \t causedDelayInHr \n");
    for (    Id<Person> id : causedPerson2Delay.keySet()) {
      writer.write(id + "\t" + pf.getMunichUserGroupFromPersonId(id)+ "\t"+ affectedperson2Delay.get(id) / 3600 + "\t" + causedPerson2Delay.get(id) / 3600 + "\n");
    }
    writer.close();
  }
 catch (  Exception e) {
    throw new RuntimeException("Data is not written in file. Reason: " + e);
  }
}

static List<List<File>> partition(final int binCount,final File... files){
  final File[] sort=Arrays.copyOf(files,files.length);
  return binThem(binCount,sort);
}

private void calcBitePoint(int centerX,int centerY,float circleEdgeX,float circleEdgeY,double biteLine,boolean isFirstBite,boolean isRandomBite){
  double bitePercent;
  if (isFirstBite) {
    biteX=(int)circleEdgeX;
    biteY=(int)circleEdgeY;
  }
 else {
    bitePercent=biteRadius / biteLine;
    if (isRandomBite) {
      bitePercent*=bitesTakenMap.get(biteDirection);
    }
 else {
      bitePercent*=(numBitesForOneDirection - numBitesForOneDirectionLeft);
    }
    biteX=DrawUtils.getPointBetweenTwoPoints(circleEdgeX,centerX,bitePercent);
    biteY=DrawUtils.getPointBetweenTwoPoints(circleEdgeY,centerY,bitePercent);
  }
}

private boolean zzRefill() throws java.io.IOException {
  if (zzStartRead > 0) {
    System.arraycopy(zzBuffer,zzStartRead,zzBuffer,0,zzEndRead - zzStartRead);
    zzEndRead-=zzStartRead;
    zzCurrentPos-=zzStartRead;
    zzMarkedPos-=zzStartRead;
    zzPushbackPos-=zzStartRead;
    zzStartRead=0;
  }
  if (zzCurrentPos >= zzBuffer.length) {
    char newBuffer[]=new char[zzCurrentPos * 2];
    System.arraycopy(zzBuffer,0,newBuffer,0,zzBuffer.length);
    zzBuffer=newBuffer;
  }
  int numRead=zzReader.read(zzBuffer,zzEndRead,zzBuffer.length - zzEndRead);
  if (numRead < 0) {
    return true;
  }
 else {
    zzEndRead+=numRead;
    return false;
  }
}

private void updateBusinessObjectDefinitionEntityDescriptiveInformation(BusinessObjectDefinitionEntity businessObjectDefinitionEntity,BusinessObjectDefinitionDescriptiveInformationUpdateRequest request){
  businessObjectDefinitionEntity.setDescription(request.getDescription());
  businessObjectDefinitionEntity.setDisplayName(request.getDisplayName());
  businessObjectDefinitionDao.saveAndRefresh(businessObjectDefinitionEntity);
}

@Override public void onDownloadProgress(DownloadProgressInfo progress){
  mAverageSpeed.setText(getString(R.string.kilobytes_per_second,Helpers.getSpeedString(progress.mCurrentSpeed)));
  mTimeRemaining.setText(getString(R.string.time_remaining,Helpers.getTimeRemaining(progress.mTimeRemaining)));
  progress.mOverallTotal=progress.mOverallTotal;
  mPB.setMax((int)(progress.mOverallTotal >> 8));
  mPB.setProgress((int)(progress.mOverallProgress >> 8));
  mProgressPercent.setText(Long.toString(progress.mOverallProgress * 100 / progress.mOverallTotal) + "%");
  mProgressFraction.setText(Helpers.getDownloadProgressString(progress.mOverallProgress,progress.mOverallTotal));
}

static public boolean isSameDay(Timestamp one,Timestamp two){
  GregorianCalendar calOne=new GregorianCalendar();
  if (one != null)   calOne.setTimeInMillis(one.getTime());
  GregorianCalendar calTwo=new GregorianCalendar();
  if (two != null)   calTwo.setTimeInMillis(two.getTime());
  if (calOne.get(Calendar.YEAR) == calTwo.get(Calendar.YEAR) && calOne.get(Calendar.MONTH) == calTwo.get(Calendar.MONTH) && calOne.get(Calendar.DAY_OF_MONTH) == calTwo.get(Calendar.DAY_OF_MONTH))   return true;
  return false;
}

public static void updateAllForFacade(DataStore dataStore,Iterable<Update> updates){
  updateAllForFacade(dataStore,updates.iterator());
}

public ArrayFieldVector(FieldVector<T> v1,FieldVector<T> v2) throws NullArgumentException {
  MathUtils.checkNotNull(v1);
  MathUtils.checkNotNull(v2);
  field=v1.getField();
  final T[] v1Data=(v1 instanceof ArrayFieldVector) ? ((ArrayFieldVector<T>)v1).data : v1.toArray();
  final T[] v2Data=(v2 instanceof ArrayFieldVector) ? ((ArrayFieldVector<T>)v2).data : v2.toArray();
  data=MathArrays.buildArray(field,v1Data.length + v2Data.length);
  System.arraycopy(v1Data,0,data,0,v1Data.length);
  System.arraycopy(v2Data,0,data,v1Data.length,v2Data.length);
}

public boolean equals(Object o){
  if (o instanceof ServiceConfigManager) {
    ServiceConfigManager oscm=(ServiceConfigManager)o;
    if (serviceName.equals(oscm.serviceName) && version.equals(oscm.version)) {
      return (true);
    }
  }
  return (false);
}

public void addItemBoundsListener(ItemBoundsListener ibl){
  if (m_bounders == null)   m_bounders=new CopyOnWriteArrayList();
  m_bounders.add(ibl);
}

public static S2CellId fromFaceIJ(int face,int i,int j){
  long n[]={0,face << (POS_BITS - 33)};
  int bits=(face & SWAP_MASK);
  for (int k=7; k >= 0; --k) {
    bits=getBits(n,i,j,k,bits);
  }
  S2CellId s=new S2CellId((((n[1] << 32) + n[0]) << 1) + 1);
  return s;
}

public void increaseDpi(){
  if (this.currentDpiPos < (this.dpiSizes.length - 1)) {
    ++this.currentDpiPos;
  }
}

StringVector processPREFIX_URLLIST(StylesheetHandler handler,String uri,String name,String rawName,String value) throws org.xml.sax.SAXException {
  StringTokenizer tokenizer=new StringTokenizer(value," \t\n\r\f");
  int nStrings=tokenizer.countTokens();
  StringVector strings=new StringVector(nStrings);
  for (int i=0; i < nStrings; i++) {
    String prefix=tokenizer.nextToken();
    String url=handler.getNamespaceForPrefix(prefix);
    if (url != null)     strings.addElement(url);
 else     throw new org.xml.sax.SAXException(XSLMessages.createMessage(XSLTErrorResources.ER_CANT_RESOLVE_NSPREFIX,new Object[]{prefix}));
  }
  return strings;
}

@Override public void write(DataOutput out) throws IOException {
  out.writeLong(duration);
  out.writeInt(getLength());
  for (int i=0; i < coeffs.length; i++) {
    out.writeFloat(coeffs[i]);
  }
}

private void addSharingProfiles(Collection<SharingProfile> sharingProfiles) throws GuacamoleException {
  for (  SharingProfile sharingProfile : sharingProfiles) {
    String primaryConnectionIdentifier=sharingProfile.getPrimaryConnectionIdentifier();
    APIConnection primaryConnection=retrievedConnections.get(primaryConnectionIdentifier);
    if (primaryConnection != null) {
      Collection<APISharingProfile> children=primaryConnection.getSharingProfiles();
      if (children == null) {
        children=new ArrayList<APISharingProfile>();
        primaryConnection.setSharingProfiles(children);
      }
      children.add(new APISharingProfile(sharingProfile));
    }
 else     logger.debug("Sharing profile \"{}\" cannot be added to the " + "tree: primary connection \"{}\" does not actually " + "exist.",sharingProfile.getIdentifier(),primaryConnectionIdentifier);
  }
}

public void failoverCopy(RPCopyRequestParams copyToFailoverTo) throws RecoverPointException {
  String bookmarkName=copyToFailoverTo.getBookmarkName();
  Date apitTime=copyToFailoverTo.getApitTime();
  if (bookmarkName != null) {
    logger.info("Failover copy to bookmark : " + bookmarkName);
  }
 else   if (apitTime != null) {
    logger.info("Failover copy to APIT : " + apitTime.toString());
  }
 else {
    logger.info("Failover copy to most recent image");
  }
  RecoverPointImageManagementUtils imageManager=new RecoverPointImageManagementUtils();
  imageManager.enableCopyImage(functionalAPI,copyToFailoverTo,true);
}

private static void prepareLoggingSystemEnviroment(){
  System.setProperty("log.directory",getLogFolder());
}

public StateAttribute(byte[] octets){
  super(octets);
  state=new String(octets,2,octets.length - 2,Charset.forName("utf-8"));
}

private static long calcSize(long size,long skip,long limit){
  return size >= 0 ? Math.max(-1,Math.min(size - skip,limit)) : -1;
}

public static Collection<InetSocketAddress> resolveAddresses(AddressResolver addrRslvr,Iterable<String> addrs,int port) throws IgniteSpiException {
  assert addrRslvr != null;
  Collection<InetSocketAddress> extAddrs=new HashSet<>();
  for (  String addr : addrs) {
    InetSocketAddress sockAddr=new InetSocketAddress(addr,port);
    if (!sockAddr.isUnresolved()) {
      Collection<InetSocketAddress> extAddrs0=resolveAddress(addrRslvr,sockAddr);
      if (extAddrs0 != null)       extAddrs.addAll(extAddrs0);
    }
  }
  return extAddrs;
}

private double sampleFromGamma(double k,double theta){
  boolean accept=false;
  if (k < 1) {
    double c=(1 / k);
    double d=((1 - k) * Math.pow(k,(k / (1 - k))));
    double u, v, z, e, x;
    do {
      u=rng.nextDouble();
      v=rng.nextDouble();
      z=-Math.log(u);
      e=-Math.log(v);
      x=Math.pow(z,c);
      if ((z + e) >= (d + x)) {
        accept=true;
      }
    }
 while (!accept);
    return (x * theta);
  }
 else {
    double b=(k - Math.log(4));
    double c=(k + Math.sqrt(2 * k - 1));
    double lam=Math.sqrt(2 * k - 1);
    double cheng=(1 + Math.log(4.5));
    double u, v, x, y, z, r;
    do {
      u=rng.nextDouble();
      v=rng.nextDouble();
      y=((1 / lam) * Math.log(v / (1 - v)));
      x=(k * Math.exp(y));
      z=(u * v * v);
      r=(b + (c * y) - x);
      if ((r >= ((4.5 * z) - cheng)) || (r >= Math.log(z))) {
        accept=true;
      }
    }
 while (!accept);
    return (x * theta);
  }
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>();
  newVector.addElement(new Option("\tName of file containing network structure in BIF format\n","B",1,"-B <BIF File>"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

public BlocklyController build(){
  if (mViewFactory == null && (mWorkspaceFragment != null || mTrashFragment != null || mToolboxFragment != null || mToolboxDrawer != null)) {
    throw new IllegalStateException("BlockViewFactory cannot be null when using Fragments.");
  }
  if (mWorkspaceHelper == null) {
    mWorkspaceHelper=new WorkspaceHelper(mContext);
  }
  BlockFactory factory=new BlockFactory(mContext,null);
  for (int i=0; i < mBlockDefResources.size(); i++) {
    try {
      factory.addBlocks(mBlockDefResources.get(i));
    }
 catch (    Throwable e) {
      factory.clear();
      throw e;
    }
  }
  for (int i=0; i < mBlockDefAssets.size(); i++) {
    String assetPath=mBlockDefAssets.get(i);
    try {
      factory.addBlocks(mAssetManager.open(assetPath));
    }
 catch (    IOException e) {
      factory.clear();
      throw new IllegalStateException("Failed to load block definitions from asset: " + assetPath,e);
    }
  }
  for (int i=0; i < mBlockDefs.size(); i++) {
    factory.addBlockTemplate(mBlockDefs.get(i));
  }
  BlocklyController controller=new BlocklyController(mContext,factory,mWorkspaceHelper,mViewFactory);
  if (mToolboxResId != 0) {
    controller.loadToolboxContents(mToolboxResId);
  }
 else   if (mToolboxXml != null) {
    controller.loadToolboxContents(mToolboxXml);
  }
 else   if (mToolboxAssetId != null && mAssetManager != null) {
    try {
      controller.loadToolboxContents(mAssetManager.open(mToolboxAssetId));
    }
 catch (    IOException e) {
      throw new IllegalArgumentException("Failed to load toolbox from assets " + mToolboxAssetId,e);
    }
  }
  controller.setWorkspaceFragment(mWorkspaceFragment);
  controller.setTrashFragment(mTrashFragment);
  controller.setToolboxFragment(mToolboxFragment);
  controller.setTrashIcon(mTrashIcon);
  controller.setVariableCallback(mVariableCallback);
  return controller;
}

@Override public void run(){
  while (!isInterrupted()) {
    try {
      KeyHolder<K> ref=(KeyHolder<K>)_queue.remove();
      V removed=_table.remove(ref);
      if (_listener != null && removed != null)       _listener.weakEntryRemoved(removed);
    }
 catch (    InterruptedException e) {
      interrupt();
      break;
    }
  }
}

public JobDefinitionCreateRequest createJobDefinitionCreateRequest(String namespaceCd,String jobName,String jobDescription,String activitiXml,List<Parameter> parameters){
  JobDefinitionCreateRequest request=new JobDefinitionCreateRequest();
  request.setNamespace(namespaceCd);
  request.setJobName(jobName);
  request.setDescription(jobDescription);
  request.setActivitiJobXml(activitiXml);
  request.setParameters(parameters);
  return request;
}

public TabState restoreTabState(int tabId,boolean encrypted){
  return TabState.restoreTabState(getTabStateFile(tabId,encrypted),encrypted);
}

public FTPClient(){
  addListParser(new UnixListParser());
  addListParser(new DOSListParser());
  addListParser(new EPLFListParser());
  addListParser(new NetWareListParser());
  addListParser(new MLSDListParser());
}

public String addExtension(String testFileName){
  return testFileName + ".svg";
}

public <T>String makeStringValueSQ(T value){
  return value.toString();
}

private Level descriptionToLogLevel(String description){
  Level result=Level.OFF;
  if (description.equals(s_logger.localizeMessage("guiLogLevelOff"))) {
    result=Level.OFF;
  }
 else   if (description.equals(s_logger.localizeMessage("guiLogLevelSevere"))) {
    result=Level.SEVERE;
  }
 else   if (description.equals(s_logger.localizeMessage("guiLogLevelWarning"))) {
    result=Level.WARNING;
  }
 else   if (description.equals(s_logger.localizeMessage("guiLogLevelInfo"))) {
    result=Level.INFO;
  }
 else   if (description.equals(s_logger.localizeMessage("guiLogLevelConfig"))) {
    result=Level.CONFIG;
  }
 else   if (description.equals(s_logger.localizeMessage("guiLogLevelFine"))) {
    result=Level.FINE;
  }
 else   if (description.equals(s_logger.localizeMessage("guiLogLevelFiner"))) {
    result=Level.FINER;
  }
 else   if (description.equals(s_logger.localizeMessage("guiLogLevelFinest"))) {
    result=Level.FINEST;
  }
 else   if (description.equals(s_logger.localizeMessage("guiLogLevelAll"))) {
    result=Level.ALL;
  }
  return result;
}

default boolean isImmutable(){
  return false;
}

public long renew(String entryUid,String className,int objectType,long duration,boolean fromReplication,boolean origin,boolean isFromGateway) throws UnknownLeaseException, InternalSpaceException {
  try {
    extendLeasePeriod(entryUid,className,objectType,duration,fromReplication,origin,false,null,isFromGateway);
  }
 catch (  UnknownLeaseException unknownLeaseException) {
    if (_cacheManager.isCacheExternalDB() && objectType != ObjectTypes.NOTIFY_NULL_TEMPLATE && objectType != ObjectTypes.NOTIFY_TEMPLATE) {
      if (_logger.isLoggable(Level.FINE)) {
        _logger.log(Level.FINE,"Failed to renew lease of an entry belonging to external-data-source.",unknownLeaseException);
      }
    }
 else     throw unknownLeaseException;
  }
  return duration;
}

public JKTagMapping(){
}

public static void inRange(final long value,final String name,final long minInclusive,final long maxInclusive){
  if (value < minInclusive || value > maxInclusive) {
    final String message=String.format("%s must be between %d and %d inclusive",name,minInclusive,maxInclusive);
    throw new IllegalArgumentException(message);
  }
}

public Criteria or(){
  Criteria criteria=createCriteriaInternal();
  oredCriteria.add(criteria);
  return criteria;
}

public static File unzipToTempFolder(File zipFile){
  String zipFilename=zipFile.getName();
  String tempFolderPrefix=zipFilename.substring(0,zipFilename.lastIndexOf('.'));
  File tempFolder=createTempFolder(tempFolderPrefix);
  try {
    PUZipUtils.unzip(zipFile,tempFolder);
    return tempFolder;
  }
 catch (  Exception e) {
    try {
      FileUtils.deleteFileOrDirectory(tempFolder);
    }
 catch (    RuntimeException ex) {
      logger.debug("Failed to delete folder " + tempFolder,ex);
    }
    throw new RuntimeException("Failed to unzip file " + zipFile + " to "+ tempFolder,e);
  }
}

public void testAscii() throws Exception {
  String str="AbCdEfGhIjKlMnOpQrStUvWxYzX";
  ByteArrayInputStream aa=new ByteArrayInputStream(str.getBytes("ISO8859_1"));
  InputStreamReader a=new InputStreamReader(aa,"ISO8859_1");
  try {
    int x=a.read();
    assertEquals('A',x);
    char[] c=new char[26];
    x=a.read(c,0,26);
    assertEquals("ISO-8859-1",a.getEncoding());
    assertEquals(26,x);
    assertEquals("bCdEfGhIjKlMnOpQrStUvWxYzX",String.valueOf(c));
  }
  finally {
    a.close();
  }
}

public void clear(){
  m_reducedResults.clear();
  m_currentSearchIndex=0;
}

public static void createAccessorMethod(SootMethod container,Stmt stmt){
  Body containerBody=container.getActiveBody();
  soot.util.Chain containerStmts=containerBody.getUnits();
  if (!containerStmts.contains(stmt))   throw new RuntimeException();
  if (stmt.containsInvokeExpr()) {
    createInvokeAccessor(container,stmt);
  }
 else   if (stmt instanceof AssignStmt) {
    AssignStmt as=(AssignStmt)stmt;
    FieldRef ref;
    if (as.getLeftOp() instanceof FieldRef) {
      ref=(FieldRef)as.getLeftOp();
      createSetAccessor(container,as,ref);
    }
 else     if (as.getRightOp() instanceof FieldRef) {
      ref=(FieldRef)as.getRightOp();
      createGetAccessor(container,as,ref);
    }
 else {
      throw new RuntimeException("Expected class member access");
    }
  }
 else   throw new RuntimeException("Expected class member access");
}

@Override public void displayChanged(){
  updateGC();
}

public final void pushPair(Node v1,Node v2){
  if (null == m_map) {
    m_map=new Node[m_blocksize];
    m_mapSize=m_blocksize;
  }
 else {
    if ((m_firstFree + 2) >= m_mapSize) {
      m_mapSize+=m_blocksize;
      Node newMap[]=new Node[m_mapSize];
      System.arraycopy(m_map,0,newMap,0,m_firstFree);
      m_map=newMap;
    }
  }
  m_map[m_firstFree]=v1;
  m_map[m_firstFree + 1]=v2;
  m_firstFree+=2;
}

private static String escapeJSON(String text){
  StringBuilder builder=new StringBuilder();
  builder.append('"');
  for (int index=0; index < text.length(); index++) {
    char chr=text.charAt(index);
switch (chr) {
case '"':
case '\\':
      builder.append('\\');
    builder.append(chr);
  break;
case '\b':
builder.append("\\b");
break;
case '\t':
builder.append("\\t");
break;
case '\n':
builder.append("\\n");
break;
case '\r':
builder.append("\\r");
break;
default :
if (chr < ' ') {
String t="000" + Integer.toHexString(chr);
builder.append("\\u" + t.substring(t.length() - 4));
}
 else {
builder.append(chr);
}
break;
}
}
builder.append('"');
return builder.toString();
}

final Segment<K,V> segmentFor(int hash){
  return segments[(hash >>> segmentShift) & segmentMask];
}

@SuppressWarnings("deprecation") private void startSetTimeChanged(){
  int hours=0;
  int minutes=0;
  try {
    hours=Integer.parseInt(startHoursField.getText());
  }
 catch (  Exception e) {
    JOptionPane.showMessageDialog(this,(Bundle.getMessage("HoursError") + "\n" + e),Bundle.getMessage("ErrorTitle"),JOptionPane.ERROR_MESSAGE);
    log.error("Exception when parsing hours Field: " + e);
    return;
  }
  if ((hours < 0) || (hours > 23)) {
    JOptionPane.showMessageDialog(this,(Bundle.getMessage("HoursRangeError")),Bundle.getMessage("ErrorTitle"),JOptionPane.ERROR_MESSAGE);
    return;
  }
  try {
    minutes=Integer.parseInt(startMinutesField.getText());
  }
 catch (  Exception e) {
    JOptionPane.showMessageDialog(this,(Bundle.getMessage("HoursError") + "\n" + e),Bundle.getMessage("ErrorTitle"),JOptionPane.ERROR_MESSAGE);
    log.error("Exception when parsing hours Field: " + e);
    return;
  }
  if ((minutes < 0) || (minutes > 59)) {
    JOptionPane.showMessageDialog(this,(Bundle.getMessage("MinutesRangeError")),Bundle.getMessage("ErrorTitle"),JOptionPane.ERROR_MESSAGE);
    return;
  }
  long mSecPerHour=3600000;
  long mSecPerMinute=60000;
  Date tem=clock.getTime();
  int cHours=tem.getHours();
  long cNumMSec=tem.getTime();
  long nNumMSec=((cNumMSec / mSecPerHour) * mSecPerHour) - (cHours * mSecPerHour) + (hours * mSecPerHour) + (minutes * mSecPerMinute);
  clock.setStartSetTime(startSetTimeCheckBox.isSelected(),new Date(nNumMSec));
  changed=true;
}

public static String serialize(Object toSerialize) throws Exception {
  Class<?> xstreamClass;
  java.lang.reflect.Constructor<?> constructor;
  Object xstream;
  Class<?>[] serializeArgsClasses=new Class[1];
  Object[] serializeArgs=new Object[1];
  java.lang.reflect.Method methodSerialize;
  String result;
  xstreamClass=Class.forName("com.thoughtworks.xstream.XStream");
  constructor=xstreamClass.getConstructor();
  xstream=constructor.newInstance();
  serializeArgsClasses[0]=Object.class;
  serializeArgs[0]=toSerialize;
  methodSerialize=xstreamClass.getMethod("toXML",serializeArgsClasses);
  try {
    result=(String)methodSerialize.invoke(xstream,serializeArgs);
  }
 catch (  Exception ex) {
    result=null;
  }
  return result;
}

@Override public void release(){
  super.release();
}

public void updateAndTestCounter(OFMessage ofm,String type){
  validateCounter(type,0);
  counters.updateWriteStats(ofm);
  counters.updateWriteStats(ofm);
  counters.updateReadStats(ofm);
  counters.updateReadStats(ofm);
  validateCounter(type,2);
}

public static <E>List<E> of(){
  return Collections.emptyList();
}

protected void drawDomainCrosshair(Graphics2D g2,Rectangle2D dataArea,PlotOrientation orientation,int datasetIndex,Comparable rowKey,Comparable columnKey,Stroke stroke,Paint paint){
  CategoryDataset dataset=getDataset(datasetIndex);
  CategoryAxis axis=getDomainAxisForDataset(datasetIndex);
  CategoryItemRenderer renderer=getRenderer(datasetIndex);
  Line2D line;
  if (orientation == PlotOrientation.VERTICAL) {
    double xx=renderer.getItemMiddle(rowKey,columnKey,dataset,axis,dataArea,RectangleEdge.BOTTOM);
    line=new Line2D.Double(xx,dataArea.getMinY(),xx,dataArea.getMaxY());
  }
 else {
    double yy=renderer.getItemMiddle(rowKey,columnKey,dataset,axis,dataArea,RectangleEdge.LEFT);
    line=new Line2D.Double(dataArea.getMinX(),yy,dataArea.getMaxX(),yy);
  }
  g2.setStroke(stroke);
  g2.setPaint(paint);
  g2.draw(line);
}

@Override public Table summary(){
  Table table=Table.create("Column: " + name());
  CategoryColumn measure=CategoryColumn.create("Measure");
  CategoryColumn value=CategoryColumn.create("Value");
  table.addColumn(measure);
  table.addColumn(value);
  measure.add("Count");
  value.add(String.valueOf(size()));
  measure.add("Missing");
  value.add(String.valueOf(countMissing()));
  measure.add("Earliest");
  value.add(String.valueOf(min()));
  measure.add("Latest");
  value.add(String.valueOf(max()));
  return table;
}

private Object js_parseFloat(Object[] args){
  if (args.length < 1)   return ScriptRuntime.NaNobj;
  String s=ScriptRuntime.toString(args[0]);
  int len=s.length();
  int start=0;
  char c;
  for (; ; ) {
    if (start == len) {
      return ScriptRuntime.NaNobj;
    }
    c=s.charAt(start);
    if (!ScriptRuntime.isStrWhiteSpaceChar(c)) {
      break;
    }
    ++start;
  }
  int i=start;
  if (c == '+' || c == '-') {
    ++i;
    if (i == len) {
      return ScriptRuntime.NaNobj;
    }
    c=s.charAt(i);
  }
  if (c == 'I') {
    if (i + 8 <= len && s.regionMatches(i,"Infinity",0,8)) {
      double d;
      if (s.charAt(start) == '-') {
        d=Double.NEGATIVE_INFINITY;
      }
 else {
        d=Double.POSITIVE_INFINITY;
      }
      return ScriptRuntime.wrapNumber(d);
    }
    return ScriptRuntime.NaNobj;
  }
  int decimal=-1;
  int exponent=-1;
  boolean exponentValid=false;
  for (; i < len; i++) {
switch (s.charAt(i)) {
case '.':
      if (decimal != -1)       break;
    decimal=i;
  continue;
case 'e':
case 'E':
if (exponent != -1) {
  break;
}
 else if (i == len - 1) {
  break;
}
exponent=i;
continue;
case '+':
case '-':
if (exponent != i - 1) {
break;
}
 else if (i == len - 1) {
--i;
break;
}
continue;
case '0':
case '1':
case '2':
case '3':
case '4':
case '5':
case '6':
case '7':
case '8':
case '9':
if (exponent != -1) {
exponentValid=true;
}
continue;
default :
break;
}
break;
}
if (exponent != -1 && !exponentValid) {
i=exponent;
}
s=s.substring(start,i);
try {
return Double.valueOf(s);
}
 catch (NumberFormatException ex) {
return ScriptRuntime.NaNobj;
}
}

public CVisibilityCriteriumPanel(final CVisibilityCriterium criterium){
  super(new BorderLayout());
  visibilityCriterium=criterium;
  visibilityStateBox.addActionListener(visibilityStateBoxListener);
  initPanel();
}

public boolean isAlterAdd(){
  return columnsToAdd.size() > 0;
}

private boolean processRemovedNode(final INaviViewNode node){
  if (node instanceof INaviCodeNode) {
    final INaviCodeNode cnode=(INaviCodeNode)node;
    try {
      final INaviFunction targetFunction=cnode.getParentFunction();
      if (m_nodeCounter.containsKey(targetFunction)) {
        final int newCounter=m_nodeCounter.get(targetFunction) - 1;
        if (newCounter == 0) {
          m_nodeCounter.remove(targetFunction);
          final Set<CCrossReference> toDelete=new HashSet<CCrossReference>();
          for (          final CCrossReference reference : m_crossReferences) {
            if (reference.getCalledFunction() == targetFunction) {
              toDelete.add(reference);
            }
          }
          m_crossReferences.removeAll(toDelete);
          return true;
        }
 else {
          m_nodeCounter.put(targetFunction,newCounter);
        }
      }
    }
 catch (    final MaybeNullException exception) {
    }
  }
  return false;
}

public long transferTo(long position,long count,OutputStream dst) throws IOException {
  return transferTo(position,count,Channels.newChannel(dst));
}

public void test_isLenient(){
  DateFormat df=DateFormat.getInstance();
  Calendar c=df.getCalendar();
  if (df.isLenient()) {
    try {
      c.set(Calendar.DAY_OF_MONTH,32);
      c.get(Calendar.DAY_OF_MONTH);
    }
 catch (    Exception e) {
      fail("Unexpected exception " + e.toString());
    }
    c.setLenient(false);
    try {
      c.set(Calendar.DAY_OF_MONTH,32);
      c.get(Calendar.DAY_OF_MONTH);
      fail("Expected IllegalArgumentException was not thrown");
    }
 catch (    IllegalArgumentException e) {
    }
catch (    Exception e) {
      fail("Unexpected exception " + e.toString());
    }
  }
 else {
    try {
      c.set(Calendar.DAY_OF_MONTH,32);
      c.get(Calendar.DAY_OF_MONTH);
      fail("Expected IllegalArgumentException was not thrown");
    }
 catch (    IllegalArgumentException e) {
    }
catch (    Exception e) {
      fail("Unexpected exception " + e.toString());
    }
    c.setLenient(true);
    try {
      c.set(Calendar.DAY_OF_MONTH,32);
      c.get(Calendar.DAY_OF_MONTH);
    }
 catch (    Exception e) {
      fail("Unexpected exception " + e.toString());
    }
  }
}

private void writeIndexFile() throws IOException, CarbonDataWriterException {
  IndexHeader indexHeader=CarbonMetadataUtil.getIndexHeader(localCardinality,thriftColumnSchemaList);
  List<BlockIndex> blockIndexThrift=CarbonMetadataUtil.getBlockIndexInfo(blockIndexInfoList);
  String fileName=storeLocation + File.separator + carbonTablePath.getCarbonIndexFileName(carbonDataFileAttributes.getTaskId(),carbonDataFileAttributes.getFactTimeStamp());
  CarbonIndexFileWriter writer=new CarbonIndexFileWriter();
  writer.openThriftWriter(fileName);
  writer.writeThrift(indexHeader);
  for (  BlockIndex blockIndex : blockIndexThrift) {
    writer.writeThrift(blockIndex);
  }
  writer.close();
  copyCarbonDataFileToCarbonStorePath(fileName);
}

public void nackAll(PubsubReader<T> reader) throws IOException {
  checkState(this.reader == null,"Cannot nackAll on persisting checkpoint");
  List<String> batchYetToAckIds=new ArrayList<>(Math.min(notYetReadIds.size(),ACK_BATCH_SIZE));
  for (  String ackId : notYetReadIds) {
    batchYetToAckIds.add(ackId);
    if (batchYetToAckIds.size() >= ACK_BATCH_SIZE) {
      long nowMsSinceEpoch=now(reader);
      reader.nackBatch(nowMsSinceEpoch,batchYetToAckIds);
      batchYetToAckIds.clear();
    }
  }
  if (!batchYetToAckIds.isEmpty()) {
    long nowMsSinceEpoch=now(reader);
    reader.nackBatch(nowMsSinceEpoch,batchYetToAckIds);
  }
}

static public void assertEquals(String message,Object expected,Object actual){
  if (expected == null && actual == null)   return;
  if (expected != null && expected.equals(actual))   return;
  failNotEquals(message,expected,actual);
}

public static NamingException mapErrorCode(int errorCode,String errorMessage){
  if (errorCode == LdapClient.LDAP_SUCCESS)   return null;
  NamingException e=null;
  String message=LdapClient.getErrorMessage(errorCode,errorMessage);
switch (errorCode) {
case LdapClient.LDAP_ALIAS_DEREFERENCING_PROBLEM:
    e=new NamingException(message);
  break;
case LdapClient.LDAP_ALIAS_PROBLEM:
e=new NamingException(message);
break;
case LdapClient.LDAP_ATTRIBUTE_OR_VALUE_EXISTS:
e=new AttributeInUseException(message);
break;
case LdapClient.LDAP_AUTH_METHOD_NOT_SUPPORTED:
case LdapClient.LDAP_CONFIDENTIALITY_REQUIRED:
case LdapClient.LDAP_STRONG_AUTH_REQUIRED:
case LdapClient.LDAP_INAPPROPRIATE_AUTHENTICATION:
e=new AuthenticationNotSupportedException(message);
break;
case LdapClient.LDAP_ENTRY_ALREADY_EXISTS:
e=new NameAlreadyBoundException(message);
break;
case LdapClient.LDAP_INVALID_CREDENTIALS:
case LdapClient.LDAP_SASL_BIND_IN_PROGRESS:
e=new AuthenticationException(message);
break;
case LdapClient.LDAP_INAPPROPRIATE_MATCHING:
e=new InvalidSearchFilterException(message);
break;
case LdapClient.LDAP_INSUFFICIENT_ACCESS_RIGHTS:
e=new NoPermissionException(message);
break;
case LdapClient.LDAP_INVALID_ATTRIBUTE_SYNTAX:
case LdapClient.LDAP_CONSTRAINT_VIOLATION:
e=new InvalidAttributeValueException(message);
break;
case LdapClient.LDAP_LOOP_DETECT:
e=new NamingException(message);
break;
case LdapClient.LDAP_NO_SUCH_ATTRIBUTE:
e=new NoSuchAttributeException(message);
break;
case LdapClient.LDAP_NO_SUCH_OBJECT:
e=new NameNotFoundException(message);
break;
case LdapClient.LDAP_OBJECT_CLASS_MODS_PROHIBITED:
case LdapClient.LDAP_OBJECT_CLASS_VIOLATION:
case LdapClient.LDAP_NOT_ALLOWED_ON_RDN:
e=new SchemaViolationException(message);
break;
case LdapClient.LDAP_NOT_ALLOWED_ON_NON_LEAF:
e=new ContextNotEmptyException(message);
break;
case LdapClient.LDAP_OPERATIONS_ERROR:
e=new NamingException(message);
break;
case LdapClient.LDAP_OTHER:
e=new NamingException(message);
break;
case LdapClient.LDAP_PROTOCOL_ERROR:
e=new CommunicationException(message);
break;
case LdapClient.LDAP_SIZE_LIMIT_EXCEEDED:
e=new SizeLimitExceededException(message);
break;
case LdapClient.LDAP_TIME_LIMIT_EXCEEDED:
e=new TimeLimitExceededException(message);
break;
case LdapClient.LDAP_UNAVAILABLE_CRITICAL_EXTENSION:
e=new OperationNotSupportedException(message);
break;
case LdapClient.LDAP_UNAVAILABLE:
case LdapClient.LDAP_BUSY:
e=new ServiceUnavailableException(message);
break;
case LdapClient.LDAP_UNDEFINED_ATTRIBUTE_TYPE:
e=new InvalidAttributeIdentifierException(message);
break;
case LdapClient.LDAP_UNWILLING_TO_PERFORM:
e=new OperationNotSupportedException(message);
break;
case LdapClient.LDAP_COMPARE_FALSE:
case LdapClient.LDAP_COMPARE_TRUE:
case LdapClient.LDAP_IS_LEAF:
e=new NamingException(message);
break;
case LdapClient.LDAP_ADMIN_LIMIT_EXCEEDED:
e=new LimitExceededException(message);
break;
case LdapClient.LDAP_REFERRAL:
e=new NamingException(message);
break;
case LdapClient.LDAP_PARTIAL_RESULTS:
e=new NamingException(message);
break;
case LdapClient.LDAP_INVALID_DN_SYNTAX:
case LdapClient.LDAP_NAMING_VIOLATION:
e=new InvalidNameException(message);
break;
default :
e=new NamingException(message);
break;
}
return e;
}

public final void computeIndex(){
  if (indexComputed) {
    return;
  }
  List<Long> cellList=new ArrayList();
  List<Integer> edgeList=new ArrayList();
  for (int i=0; i < getNumEdges(); ++i) {
    S2Point from=edgeFrom(i);
    S2Point to=edgeTo(i);
    ArrayList<S2CellId> cover=new ArrayList();
    int level=getCovering(from,to,true,cover);
    minimumS2LevelUsed=Math.min(minimumS2LevelUsed,level);
    for (    S2CellId cellId : cover) {
      cellList.add(cellId.id());
      edgeList.add(i);
    }
  }
  cells=new long[cellList.size()];
  edges=new int[edgeList.size()];
  for (int i=0; i < cells.length; i++) {
    cells[i]=cellList.get(i);
    edges[i]=edgeList.get(i);
  }
  sortIndex();
  indexComputed=true;
}

public WaitForAnyListener(int numberOfResults){
  this(numberOfResults,null);
}

public static Object stringToValue(String string){
  Double d;
  if (string.equals("")) {
    return string;
  }
  if (string.equalsIgnoreCase("true")) {
    return Boolean.TRUE;
  }
  if (string.equalsIgnoreCase("false")) {
    return Boolean.FALSE;
  }
  if (string.equalsIgnoreCase("null")) {
    return JSONObject.NULL;
  }
  char b=string.charAt(0);
  if ((b >= '0' && b <= '9') || b == '.' || b == '-' || b == '+') {
    try {
      if (string.indexOf('.') > -1 || string.indexOf('e') > -1 || string.indexOf('E') > -1) {
        d=Double.valueOf(string);
        if (!d.isInfinite() && !d.isNaN()) {
          return d;
        }
      }
 else {
        Long myLong=new Long(string);
        if (myLong.longValue() == myLong.intValue()) {
          return new Integer(myLong.intValue());
        }
 else {
          return myLong;
        }
      }
    }
 catch (    Exception ignore) {
    }
  }
  return string;
}

public abstract void onPinSet(String pin);

public void testCase9(){
  byte aBytes[]={1,2,3,4,5,6,7,1,2,3,4,5,6,7};
  byte bBytes[]={10,20,30,40,50,60,70,10,20,30};
  int aSign=-1;
  int bSign=-1;
  byte rBytes[]={-2,-3,-4,-5,-16,-27,-38,-42,-53,-64,-75,-16,-27,-37};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.add(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

public EntityQuery orderBy(String... fields){
  this.orderBy=Arrays.asList(fields);
  return this;
}

public void removeNodesFromPartition(List<IGroupMemberNode> nodesToRemove){
  for (  final IGroupMemberNode nodeToRemove : nodesToRemove) {
    if (nodeToRemove != null) {
      if (!nonOptionalNonMinusNodes.remove(nodeToRemove)) {
        if (nodeToRemove.equals(optionalOrMinus)) {
          optionalOrMinus=null;
        }
      }
    }
  }
  recomputeDefinitelyProduced();
}

public static void banner(Logger logger,Class<?> clazz,String methodName,String text){
  String string=clazz.getSimpleName() + "." + methodName;
  if (text != null) {
    string+=" " + text;
  }
  logger.info("");
  logger.info("*************************************************************");
  logger.info("* " + string);
  logger.info("*************************************************************");
}

private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
  in.defaultReadObject();
  if (resourceBundleName != null) {
    try {
      rb=ResourceBundle.getBundle(resourceBundleName);
    }
 catch (    MissingResourceException e) {
      rb=null;
    }
  }
}

private static void exit(@Nullable String errMsg,@Nullable Options options,int exitCode){
  if (errMsg != null)   echo("ERROR: " + errMsg);
  String runner=System.getProperty(IGNITE_PROG_NAME,"randignite.{sh|bat}");
  int space=runner.indexOf(' ');
  runner=runner.substring(0,space == -1 ? runner.length() : space);
  if (options != null) {
    HelpFormatter formatter=new HelpFormatter();
    formatter.printHelp(runner,options);
  }
  System.exit(exitCode);
}

private static void replaceAltSpecialInstructions(){
  fillInstructionMap(0x8300,0xFF00,new FrInstruction(InstructionFormat.D,0,0,"AND","#u,C","Cw",Instruction.FlowType.NONE,false,false,andccrU8SimulationCode));
  fillInstructionMap(0x8700,0xFF00,new FrInstruction(InstructionFormat.D,0,0,"MOV","#u,M","",Instruction.FlowType.NONE,false,false,stilmU8SimulationCode));
  fillInstructionMap(0x9300,0xFF00,new FrInstruction(InstructionFormat.D,0,0,"OR","#u,C","Cw",Instruction.FlowType.NONE,false,false,orccrU8SimulationCode));
  fillInstructionMap(0xA300,0xFF00,new FrInstruction(InstructionFormat.D,0,0,"ADD","#4s,S","",Instruction.FlowType.NONE,false,false,addspS10SimulationCode));
}

@Override public boolean addSensorToRoute(String sensorName,int mode){
  if (_controlSensorList.size() >= MAX_CONTROL_SENSORS) {
    log.warn("Reached maximum number of control Sensors for Route: {}",getSystemName());
  }
  ControlSensor sensor=new ControlSensor(sensorName);
  log.debug("addSensorToRoute {} {}",getSystemName(),sensorName);
  if (!sensor.setState(mode)) {
    return false;
  }
  if (isControlSensorIncluded(sensor)) {
    log.debug("Not adding duplicate control sensor {} to route {}",sensorName,getSystemName());
  }
 else {
    _controlSensorList.add(sensor);
  }
  return true;
}

private void eliminateBackfillStates(int baseState){
  if (statesToBackfill.contains(new Integer(baseState))) {
    statesToBackfill.removeElement(new Integer(baseState));
    short[] state=tempStateTable.elementAt(baseState);
    for (int i=0; i < numCategories; i++) {
      if (state[i] != 0) {
        eliminateBackfillStates(state[i]);
      }
    }
  }
}

static boolean separateConvexPolygons(float[] verts1,float[] verts2,Vector2 separation){
  final int length1=verts1.length;
  final int length2=verts2.length;
  for (int i=0; i < length1; i+=2) {
    final int j=(i + 1) % length1;
    float projX=verts1[j + 1] - verts1[i + 1];
    float projY=verts1[i] - verts1[j];
    final float length=(float)Math.sqrt(projX * projX + projY * projY);
    projX/=length;
    projY/=length;
    float min1=Float.POSITIVE_INFINITY, max1=Float.NEGATIVE_INFINITY;
    for (int k=0; k < length1; k+=2) {
      final float dot=projX * verts1[k] + projY * verts1[k + 1];
      if (dot < min1)       min1=dot;
      if (dot > max1)       max1=dot;
    }
    float min2=Float.POSITIVE_INFINITY, max2=Float.NEGATIVE_INFINITY;
    for (int k=0; k < length2; k+=2) {
      final float dot=projX * verts2[k] + projY * verts2[k + 1];
      if (dot < min2)       min2=dot;
      if (dot > max2)       max2=dot;
    }
    if ((max1 < min2) || (max2 < min1)) {
      if (null != separation)       separation.set(projY,-projX);
      return true;
    }
  }
  return false;
}

public String paymentTerm(Properties ctx,int WindowNo,GridTab mTab,GridField mField,Object value){
  Integer C_PaymentTerm_ID=(Integer)value;
  int C_Invoice_ID=Env.getContextAsInt(ctx,WindowNo,"C_Invoice_ID");
  if (C_PaymentTerm_ID == null || C_PaymentTerm_ID.intValue() == 0 || C_Invoice_ID == 0)   return "";
  MPaymentTerm pt=new MPaymentTerm(ctx,C_PaymentTerm_ID.intValue(),null);
  if (pt.get_ID() == 0)   return "PaymentTerm not found";
  boolean valid=pt.apply(C_Invoice_ID);
  mTab.setValue("IsPayScheduleValid",valid ? "Y" : "N");
  return "";
}

static void checkTypeRefAndPath(int typeRef,TypePath typePath){
  int mask=0;
switch (typeRef >>> 24) {
case TypeReference.CLASS_TYPE_PARAMETER:
case TypeReference.METHOD_TYPE_PARAMETER:
case TypeReference.METHOD_FORMAL_PARAMETER:
    mask=0xFFFF0000;
  break;
case TypeReference.FIELD:
case TypeReference.METHOD_RETURN:
case TypeReference.METHOD_RECEIVER:
case TypeReference.LOCAL_VARIABLE:
case TypeReference.RESOURCE_VARIABLE:
case TypeReference.INSTANCEOF:
case TypeReference.NEW:
case TypeReference.CONSTRUCTOR_REFERENCE:
case TypeReference.METHOD_REFERENCE:
mask=0xFF000000;
break;
case TypeReference.CLASS_EXTENDS:
case TypeReference.CLASS_TYPE_PARAMETER_BOUND:
case TypeReference.METHOD_TYPE_PARAMETER_BOUND:
case TypeReference.THROWS:
case TypeReference.EXCEPTION_PARAMETER:
mask=0xFFFFFF00;
break;
case TypeReference.CAST:
case TypeReference.CONSTRUCTOR_INVOCATION_TYPE_ARGUMENT:
case TypeReference.METHOD_INVOCATION_TYPE_ARGUMENT:
case TypeReference.CONSTRUCTOR_REFERENCE_TYPE_ARGUMENT:
case TypeReference.METHOD_REFERENCE_TYPE_ARGUMENT:
mask=0xFF0000FF;
break;
default :
throw new IllegalArgumentException("Invalid type reference sort 0x" + Integer.toHexString(typeRef >>> 24));
}
if ((typeRef & ~mask) != 0) {
throw new IllegalArgumentException("Invalid type reference 0x" + Integer.toHexString(typeRef));
}
if (typePath != null) {
for (int i=0; i < typePath.getLength(); ++i) {
int step=typePath.getStep(i);
if (step != TypePath.ARRAY_ELEMENT && step != TypePath.INNER_TYPE && step != TypePath.TYPE_ARGUMENT && step != TypePath.WILDCARD_BOUND) {
throw new IllegalArgumentException("Invalid type path step " + i + " in "+ typePath);
}
if (step != TypePath.TYPE_ARGUMENT && typePath.getStepArgument(i) != 0) {
throw new IllegalArgumentException("Invalid type path step argument for step " + i + " in "+ typePath);
}
}
}
}

public static void transformCriteria(Properties formProperties,InputStream xslIs,Result result) throws SAXException, IOException, ParserConfigurationException, TransformerException {
  dbf.setNamespaceAware(true);
  DocumentBuilder builder=dbf.newDocumentBuilder();
  org.w3c.dom.Document xslDoc=builder.parse(xslIs);
  DOMSource ds=new DOMSource(xslDoc);
  Transformer transformer=null;
synchronized (tFactory) {
    transformer=tFactory.newTransformer(ds);
  }
  transformCriteria(formProperties,transformer,result);
}

public static List<byte[]> splitAndPad(byte[] byteArray,int blocksize){
  List<byte[]> blocks=new ArrayList<byte[]>();
  int numBlocks=(int)Math.ceil(byteArray.length / (double)blocksize);
  for (int i=0; i < numBlocks; i++) {
    byte[] block=new byte[blocksize];
    Arrays.fill(block,(byte)0x00);
    if (i + 1 == numBlocks) {
      int remainingBytes=byteArray.length - (i * blocksize);
      System.arraycopy(byteArray,i * blocksize,block,0,remainingBytes);
    }
 else {
      System.arraycopy(byteArray,i * blocksize,block,0,blocksize);
    }
    blocks.add(block);
  }
  return blocks;
}

public void put(E item) throws InterruptedException {
  if (!done.get()) {
    queue.put(item);
  }
}

protected void notifyComplete(){
  final String methodName="notifyComplete";
  log.fine(CLASS_NAME,methodName,"404",new Object[]{getKey(),this.response,this.exception});
synchronized (responseLock) {
    if (exception == null && pendingComplete) {
      completed=true;
      pendingComplete=false;
    }
 else {
      pendingComplete=false;
    }
    responseLock.notifyAll();
  }
synchronized (sentLock) {
    sent=true;
    sentLock.notifyAll();
  }
}

private Node<K,V>[] initTable(){
  Node<K,V>[] tab;
  int sc;
  while ((tab=table) == null || tab.length == 0) {
    if ((sc=sizeCtl) < 0) {
      Thread.yield();
    }
 else     if (U.compareAndSwapInt(this,SIZECTL,sc,-1)) {
      try {
        if ((tab=table) == null || tab.length == 0) {
          int n=(sc > 0) ? sc : DEFAULT_CAPACITY;
          @SuppressWarnings("unchecked") Node<K,V>[] nt=(Node<K,V>[])new Node<?,?>[n];
          table=tab=nt;
          sc=n - (n >>> 2);
        }
      }
  finally {
        sizeCtl=sc;
      }
      break;
    }
  }
  return tab;
}

public BufferedImage drawBarGraphWithStdDev(String graphTitle,String xLabel,String yLabel,HashMap<ComparableLabel,Integer[]> barDataPoints,String[] barLabels,Long stdDevHigh,Long stdDevLow,Long graphMaxValue){
  BufferedImage bi=new BufferedImage(this.WIDTH,this.HEIGHT,BufferedImage.TYPE_INT_ARGB);
  Graphics2D g2d=bi.createGraphics();
  RenderingHints renderHints=new RenderingHints(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
  g2d.setRenderingHints(renderHints);
  drawChartAndGraphRectangles(g2d);
  drawBarLegend(g2d,"Legend",barLabels,stdDevHigh,stdDevLow);
  drawTitleAndLabels(g2d,graphTitle,xLabel,yLabel);
  Collection<Integer[]> valueCollection=barDataPoints.values();
  Set<ComparableLabel> dateKeySet=barDataPoints.keySet();
  long maxValue=0;
  for (  Integer[] intArray : valueCollection) {
    for (    Integer intValue : intArray) {
      if (maxValue < intValue) {
        maxValue=intValue;
      }
    }
  }
  long yMaxMark=0;
  int yLabelXOffset=50;
  yMaxMark=determineYMaxMark(maxValue,stdDevHigh,graphMaxValue);
  drawYAxisDivisions(g2d,yMaxMark,yLabelXOffset);
  ArrayList<ComparableLabel> orderedDateSet=new ArrayList<ComparableLabel>();
  orderedDateSet.addAll(dateKeySet);
  Collections.sort(orderedDateSet);
  drawXAxisDivisions(g2d,orderedDateSet);
  drawBarsOnGraph(g2d,orderedDateSet,barDataPoints,yMaxMark);
  if (stdDevHigh != null) {
    drawStdDevLine(g2d,stdDevHigh,yMaxMark,this.stdDevHighColor);
  }
  if (stdDevLow != null) {
    drawStdDevLine(g2d,stdDevLow,yMaxMark,this.stdDevLowColor);
  }
  return bi;
}

public synchronized boolean loadPublicKey(){
  if (!has("public_key") || !has("key_algorithm"))   return false;
  String encodedKey=getString("public_key");
  String algorithm=getString("key_algorithm");
  PublicKey pub=IO.decodePublicKey(encodedKey,algorithm);
  if (pub != null) {
    public_key=pub;
    key_algorithm=algorithm;
    setPeerHash();
    return true;
  }
  return false;
}

private String extractProjectNameFromUri(@NotNull String uri){
  int indexFinishProjectName=uri.lastIndexOf(".");
  int indexStartProjectName=uri.lastIndexOf("/") != -1 ? uri.lastIndexOf("/") + 1 : (uri.lastIndexOf(":") + 1);
  if (indexStartProjectName != 0 && indexStartProjectName < indexFinishProjectName) {
    return uri.substring(indexStartProjectName,indexFinishProjectName);
  }
  if (indexStartProjectName != 0) {
    return uri.substring(indexStartProjectName);
  }
  return "";
}

private void loadTextData(DataInputStream dis) throws IOException {
  for (int f=0; f < numFrames; f++) {
    times[f]=Float.parseFloat(General.readWord(dis));
    General.readWord(dis);
    for (int c=0; c < numChannels; c++) {
      frames[f][c]=Float.parseFloat(General.readWord(dis));
    }
  }
}

public void addSwipeListener(SwipeListener listener){
  if (mListeners == null) {
    mListeners=new ArrayList<SwipeListener>();
  }
  mListeners.add(listener);
}

public static boolean isGzipContent(String contentEncoding){
  return contentEncoding != null && contentEncoding.contains("gzip");
}

public synchronized boolean checkSize(final int sizeChecked){
  if (!started) {
    throw new IllegalStateException("TimedBuffer is not started");
  }
  if (sizeChecked > bufferSize) {
    throw new IllegalStateException("Can't write records bigger than the bufferSize(" + bufferSize + ") on the journal");
  }
  if (bufferLimit == 0 || buffer.writerIndex() + sizeChecked > bufferLimit) {
    flush();
    delayFlush=true;
    final int remainingInFile=bufferObserver.getRemainingBytes();
    if (sizeChecked > remainingInFile) {
      return false;
    }
 else {
      bufferLimit=Math.min(remainingInFile,bufferSize);
      return true;
    }
  }
 else {
    delayFlush=true;
    return true;
  }
}

public void testCompareLessScale1(){
  String a="12380964839238475457356735674573563567890295784902768787678287";
  int aScale=18;
  String b="4573563567890295784902768787678287";
  int bScale=28;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  int result=1;
  assertEquals("incorrect result",result,aNumber.compareTo(bNumber));
}

void reclaimScrapViews(List<View> views){
  if (mViewTypeCount == 1) {
    views.addAll(mCurrentScrap);
  }
 else {
    final int viewTypeCount=mViewTypeCount;
    final ArrayList<View>[] scrapViews=mScrapViews;
    for (int i=0; i < viewTypeCount; ++i) {
      final ArrayList<View> scrapPile=scrapViews[i];
      views.addAll(scrapPile);
    }
  }
}

public void exit(){
  exitCalled=true;
  if (threadMap != null) {
    deleteAllThreads();
    log.info("----------------------------- ThreadMan exit -----------------------------");
    if (DurationStatistics.collectStatistics) {
      statistics.exit();
      log.info(String.format("ThreadMan Statistics (%,d cycles in %.3fs):",statistics.allCycles,statistics.getDurationMillis() / 1000.0));
      Collections.sort(statistics.threads);
      for (      Statistics.ThreadStatistics threadStatistics : statistics.threads) {
        double percentage=0;
        if (statistics.allCycles != 0) {
          percentage=(threadStatistics.runClocks / (double)statistics.allCycles) * 100;
        }
        log.info(String.format("    Thread %-30s %,12d cycles (%5.2f%%)",threadStatistics.getQuotedName(),threadStatistics.runClocks,percentage));
      }
    }
  }
}

private void formatNodeTo(Formatter f,int level,RadixTreeNode<T> node){
  for (int i=0; i < level; i++) {
    f.format(" ");
  }
  f.format("|");
  for (int i=0; i < level; i++) {
    f.format("-");
  }
  if (node.isReal() == true)   f.format("%s[%s]*%n",node.getKey(),node.getValue());
 else   f.format("%s%n",node.getKey());
  for (  RadixTreeNode<T> child : node.getChildern()) {
    formatNodeTo(f,level + 1,child);
  }
}

protected void startDownload(int blocks){
  if (blocks > 0)   log.info("Downloading block chain of size " + blocks + ". "+ (blocks > 1000 ? "This may take a while." : ""));
}

public void add(int start,int end,int handler,int type){
  if (start < end)   entries.add(new ExceptionTableEntry(start,end,handler,type));
}

private void freeKick(Team offense){
  if (gameTime <= 0)   return;
 else {
    if (gameTime < 180 && ((gamePoss && (awayScore - homeScore) <= 8 && (awayScore - homeScore) > 0) || (!gamePoss && (homeScore - awayScore) <= 8 && (homeScore - awayScore) > 0))) {
      if (offense.getK(0).ratKickFum * Math.random() > 60 || Math.random() < 0.1) {
        gameEventLog+=getEventPrefix() + offense.abbr + " K "+ offense.getK(0).name+ " successfully executes onside kick! "+ offense.abbr+ " has possession!";
        gameYardLine=35;
        gameDown=1;
        gameYardsNeed=10;
      }
 else {
        gameEventLog+=getEventPrefix() + offense.abbr + " K "+ offense.getK(0).name+ " failed the onside kick and lost possession.";
        gamePoss=!gamePoss;
        gameYardLine=65;
        gameDown=1;
        gameYardsNeed=10;
      }
      gameTime-=4 + 4 * Math.random();
    }
 else {
      gameYardLine=(int)(115 - (offense.getK(0).ratKickPow + 20 - 40 * Math.random()));
      if (gameYardLine <= 0)       gameYardLine=25;
      gameDown=1;
      gameYardsNeed=10;
      gamePoss=!gamePoss;
      gameTime-=15 * Math.random();
    }
  }
}

private void processNewPort(long sw,short p){
  if (isLinkDiscoverySuppressed(sw,p)) {
    return;
  }
  IOFSwitch iofSwitch=floodlightProvider.getSwitch(sw);
  if (iofSwitch == null)   return;
  if (autoPortFastFeature && iofSwitch.isFastPort(p)) {
    return;
  }
  NodePortTuple npt=new NodePortTuple(sw,p);
  discover(sw,p);
  if (!iofSwitch.isFastPort(p)) {
    addToQuarantineQueue(npt);
  }
 else {
    addToMaintenanceQueue(npt);
  }
}

public static void put3ByteInt(ByteBuffer buffer,int val){
  put3ByteInt(buffer,val,buffer.order());
}

public static void assertNoException(Runnable expression,String errorMessage){
  if (verbose) {
    log("assertNoException(" + expression + ", "+ errorMessage+ ")");
  }
  try {
    expression.run();
  }
 catch (  RuntimeException failure) {
    TestUtils.fail(errorMessage);
  }
}

@Override public int indexOf(Object object){
  return indexOf(object,0);
}

protected ResponseFormatType generateAcceptFormat(String format) throws BadApiRequestException {
  try {
    return format == null ? ResponseFormatType.JSON : ResponseFormatType.valueOf(format.toUpperCase(Locale.ENGLISH));
  }
 catch (  IllegalArgumentException e) {
    LOG.error(ACCEPT_FORMAT_INVALID.logFormat(format),e);
    throw new BadApiRequestException(ACCEPT_FORMAT_INVALID.format(format));
  }
}

public SharedObject(Map<String,Object> data,String name,String path,boolean persistent){
  super();
  this.name=name;
  this.path=path;
  this.persistentSO=persistent;
  ownerMessage=new SharedObjectMessage(null,name,0,persistent);
  creationTime=System.currentTimeMillis();
  super.setAttributes(data);
}

public static String dateToString(Date date){
  if (date == null) {
    return null;
  }
 else {
    DateFormat df=new SimpleDateFormat(dateFormat);
    df.setTimeZone(utc);
    return df.format(date);
  }
}

public static String infoFirstLastPixels(ImageLineInt line){
  return line.imgInfo.channels == 1 ? String.format("first=(%d) last=(%d)",line.scanline[0],line.scanline[line.scanline.length - 1]) : String.format("first=(%d %d %d) last=(%d %d %d)",line.scanline[0],line.scanline[1],line.scanline[2],line.scanline[line.scanline.length - line.imgInfo.channels],line.scanline[line.scanline.length - line.imgInfo.channels + 1],line.scanline[line.scanline.length - line.imgInfo.channels + 2]);
}

private AstNode memberExprTail(boolean allowCallSyntax,AstNode pn) throws IOException {
  if (pn == null)   codeBug();
  int pos=pn.getPosition();
  int lineno;
  tailLoop:   for (; ; ) {
    int tt=peekToken();
switch (tt) {
case Token.DOT:
case Token.DOTDOT:
      lineno=ts.lineno;
    pn=propertyAccess(tt,pn);
  pn.setLineno(lineno);
break;
case Token.DOTQUERY:
consumeToken();
int opPos=ts.tokenBeg, rp=-1;
lineno=ts.lineno;
mustHaveXML();
setRequiresActivation();
AstNode filter=expr();
int end=getNodeEnd(filter);
if (mustMatchToken(Token.RP,"msg.no.paren")) {
rp=ts.tokenBeg;
end=ts.tokenEnd;
}
XmlDotQuery q=new XmlDotQuery(pos,end - pos);
q.setLeft(pn);
q.setRight(filter);
q.setOperatorPosition(opPos);
q.setRp(rp - pos);
q.setLineno(lineno);
pn=q;
break;
case Token.LB:
consumeToken();
int lb=ts.tokenBeg, rb=-1;
lineno=ts.lineno;
AstNode expr=expr();
end=getNodeEnd(expr);
if (mustMatchToken(Token.RB,"msg.no.bracket.index")) {
rb=ts.tokenBeg;
end=ts.tokenEnd;
}
ElementGet g=new ElementGet(pos,end - pos);
g.setTarget(pn);
g.setElement(expr);
g.setParens(lb,rb);
g.setLineno(lineno);
pn=g;
break;
case Token.LP:
if (!allowCallSyntax) {
break tailLoop;
}
lineno=ts.lineno;
consumeToken();
checkCallRequiresActivation(pn);
FunctionCall f=new FunctionCall(pos);
f.setTarget(pn);
f.setLineno(lineno);
f.setLp(ts.tokenBeg - pos);
List<AstNode> args=argumentList();
if (args != null && args.size() > ARGC_LIMIT) reportError("msg.too.many.function.args");
f.setArguments(args);
f.setRp(ts.tokenBeg - pos);
f.setLength(ts.tokenEnd - pos);
pn=f;
break;
default :
break tailLoop;
}
}
return pn;
}

public static Iterable<Element> elements(NodeList nodes){
  return null;
}

public static int minDistance(String word1,String word2){
  if (word1.equals(word2))   return 0;
  int m=word1.length();
  int n=word2.length();
  int[][] d=new int[m + 1][n + 1];
  d[0][0]=0;
  for (int i=1; i < m + 1; i++)   d[i][0]=i;
  for (int j=1; j < n + 1; j++)   d[0][j]=j;
  for (int i=1; i < m + 1; i++) {
    for (int j=1; j < n + 1; j++) {
      d[i][j]=Math.min(Math.min(d[i][j - 1] + 1,d[i - 1][j] + 1),word1.charAt(i - 1) == word2.charAt(j - 1) ? d[i - 1][j - 1] : d[i - 1][j - 1] + 1);
    }
  }
  return d[m][n];
}

public void addUrl(String url){
  Set<String> urls=getCachedUrls();
  urls.add(url);
  putCachedUrls(urls);
  updateNotification(urls);
}

public void testValueOfLongMax(){
  long longVal=Long.MAX_VALUE;
  BigInteger aNumber=BigInteger.valueOf(longVal);
  byte rBytes[]={127,-1,-1,-1,-1,-1,-1,-1};
  byte resBytes[]=new byte[rBytes.length];
  resBytes=aNumber.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,aNumber.signum());
}

private void closeDatabaseConnection(Connection connection){
  if (connection == null)   return;
  try {
    connection.close();
  }
 catch (  SQLException e) {
  }
  connection=null;
  return;
}

@Override public boolean eIsSet(int featureID){
switch (featureID) {
case InformationModelPackage.INFORMATION_MODEL__NAME:
    return NAME_EDEFAULT == null ? name != null : !NAME_EDEFAULT.equals(name);
case InformationModelPackage.INFORMATION_MODEL__NAMESPACE:
  return NAMESPACE_EDEFAULT == null ? namespace != null : !NAMESPACE_EDEFAULT.equals(namespace);
case InformationModelPackage.INFORMATION_MODEL__VERSION:
return VERSION_EDEFAULT == null ? version != null : !VERSION_EDEFAULT.equals(version);
case InformationModelPackage.INFORMATION_MODEL__REFERENCES:
return references != null && !references.isEmpty();
case InformationModelPackage.INFORMATION_MODEL__DESCRIPTION:
return DESCRIPTION_EDEFAULT == null ? description != null : !DESCRIPTION_EDEFAULT.equals(description);
case InformationModelPackage.INFORMATION_MODEL__DISPLAYNAME:
return DISPLAYNAME_EDEFAULT == null ? displayname != null : !DISPLAYNAME_EDEFAULT.equals(displayname);
case InformationModelPackage.INFORMATION_MODEL__CATEGORY:
return CATEGORY_EDEFAULT == null ? category != null : !CATEGORY_EDEFAULT.equals(category);
case InformationModelPackage.INFORMATION_MODEL__PROPERTIES:
return properties != null && !properties.isEmpty();
}
return super.eIsSet(featureID);
}

public void addUnnamedTask(TmmTask task){
  if (unnamedTaskExecutor == null || unnamedTaskExecutor.isShutdown()) {
    unnamedTaskExecutor=createUnnamedTaskExecutor();
  }
  task.addListener(this);
  task.setState(TaskState.QUEUED);
  unnamedTaskExecutor.execute(task);
}

public Path(final Vertex v0,final Vertex v1,final EdgeSample edgeSample){
  if (v0 == null)   throw new IllegalArgumentException();
  if (v1 == null)   throw new IllegalArgumentException();
  if (v0.sample == null)   throw new IllegalArgumentException();
  if (edgeSample == null)   throw new IllegalArgumentException();
  if (edgeSample.getSample() == null)   throw new IllegalArgumentException();
  this.vertices=new Vertex[]{v0,v1};
  this.preds=getPredicates(vertices);
  this.edgeSample=edgeSample;
  this.sumEstRead=v0.sample.estCard + edgeSample.estRead;
  this.sumEstCard=edgeSample.estCard;
  this.sumEstCost=getCost(this.sumEstRead,this.sumEstCard);
}

public boolean evaluate(Map record){
  Object recVal=record.get(keyField);
  return op.evaluate(this.val,recVal);
}

protected static final String addEscapes(String str){
  StringBuffer retval=new StringBuffer();
  char ch;
  for (int i=0; i < str.length(); i++) {
switch (str.charAt(i)) {
case 0:
      continue;
case '\b':
    retval.append("\\b");
  continue;
case '\t':
retval.append("\\t");
continue;
case '\n':
retval.append("\\n");
continue;
case '\f':
retval.append("\\f");
continue;
case '\r':
retval.append("\\r");
continue;
case '\"':
retval.append("\\\"");
continue;
case '\'':
retval.append("\\\'");
continue;
case '\\':
retval.append("\\\\");
continue;
default :
if ((ch=str.charAt(i)) < 0x20 || ch > 0x7e) {
String s="0000" + Integer.toString(ch,16);
retval.append("\\u" + s.substring(s.length() - 4,s.length()));
}
 else {
retval.append(ch);
}
continue;
}
}
return retval.toString();
}

public char[] toCharArray(){
  Charset utf8=Charset.forName("UTF-8");
  CharBuffer charBuffer=utf8.decode(ByteBuffer.wrap(buffer,offset,length));
  char[] chars=new char[charBuffer.remaining()];
  charBuffer.get(chars);
  return chars;
}

public static byte[] chars2utf(char[] src,int sindex,int len){
  byte[] dst=new byte[len * 3];
  int len1=chars2utf(src,sindex,dst,0,len);
  byte[] result=new byte[len1];
  System.arraycopy(dst,0,result,0,len1);
  return result;
}

private void readReference(){
  String sql;
  if (Env.isBaseLanguage(Env.getCtx(),"AD_Ref_List"))   sql="SELECT Value, Name, Description FROM AD_Ref_List " + "WHERE AD_Reference_ID=135 ORDER BY Name";
 else   sql="SELECT l.Value, t.Name, t.Description " + "FROM AD_Ref_List l, AD_Ref_List_Trl t " + "WHERE l.AD_Ref_List_ID=t.AD_Ref_List_ID"+ " AND t.AD_Language='" + Env.getAD_Language(Env.getCtx()) + "'"+ " AND l.AD_Reference_ID=135 ORDER BY t.Name";
  ArrayList<String> v_value=new ArrayList<String>();
  ArrayList<String> v_name=new ArrayList<String>();
  ArrayList<String> v_description=new ArrayList<String>();
  try {
    PreparedStatement pstmt=DB.prepareStatement(sql,null);
    ResultSet rs=pstmt.executeQuery();
    while (rs.next()) {
      String value=rs.getString(1);
      String name=rs.getString(2);
      String description=rs.getString(3);
      if (description == null)       description="";
      v_value.add(value);
      v_name.add(name);
      v_description.add(description);
    }
    rs.close();
    pstmt.close();
  }
 catch (  SQLException e) {
    log.log(Level.SEVERE,sql,e);
  }
  int size=v_value.size();
  s_value=new String[size];
  s_name=new String[size];
  s_description=new String[size];
  for (int i=0; i < size; i++) {
    s_value[i]=(String)v_value.get(i);
    s_name[i]=(String)v_name.get(i);
    s_description[i]=(String)v_description.get(i);
  }
}

private CarbonDictionarySortInfo createColumnSortInfo(CarbonDictionarySortModel[] dictionarySortModels){
  int[] sortIndex;
  int[] sortIndexInverted;
  Arrays.sort(dictionarySortModels);
  sortIndex=new int[dictionarySortModels.length];
  sortIndexInverted=new int[dictionarySortModels.length];
  for (int i=0; i < dictionarySortModels.length; i++) {
    CarbonDictionarySortModel dictionarySortModel=dictionarySortModels[i];
    sortIndex[i]=dictionarySortModel.getKey();
    sortIndexInverted[dictionarySortModel.getKey() - 1]=i + 1;
  }
  dictionarySortModels=null;
  List<Integer> sortIndexList=convertToList(sortIndex);
  List<Integer> sortIndexInvertedList=convertToList(sortIndexInverted);
  return new CarbonDictionarySortInfo(sortIndexList,sortIndexInvertedList);
}

private IntegerPolynomial MGF(byte[] seed,int N,int minCallsR,boolean hashSeed){
  Digest hashAlg=params.hashAlg;
  int hashLen=hashAlg.getDigestSize();
  byte[] buf=new byte[minCallsR * hashLen];
  byte[] Z=hashSeed ? calcHash(hashAlg,seed) : seed;
  int counter=0;
  while (counter < minCallsR) {
    hashAlg.update(Z,0,Z.length);
    putInt(hashAlg,counter);
    byte[] hash=calcHash(hashAlg);
    System.arraycopy(hash,0,buf,counter * hashLen,hashLen);
    counter++;
  }
  IntegerPolynomial i=new IntegerPolynomial(N);
  while (true) {
    int cur=0;
    for (int index=0; index != buf.length; index++) {
      int O=(int)buf[index] & 0xFF;
      if (O >= 243) {
        continue;
      }
      for (int terIdx=0; terIdx < 4; terIdx++) {
        int rem3=O % 3;
        i.coeffs[cur]=rem3 - 1;
        cur++;
        if (cur == N) {
          return i;
        }
        O=(O - rem3) / 3;
      }
      i.coeffs[cur]=O - 1;
      cur++;
      if (cur == N) {
        return i;
      }
    }
    if (cur >= N) {
      return i;
    }
    hashAlg.update(Z,0,Z.length);
    putInt(hashAlg,counter);
    byte[] hash=calcHash(hashAlg);
    buf=hash;
    counter++;
  }
}

public static void agentmain(String agentArgs,Instrumentation inst) throws Exception {
synchronized (JVMAgent.class) {
    if (instance == null) {
      instance=new JVMAgent(inst);
      waitForInstance.countDown();
    }
  }
}

public void close(){
  Handler[] handlerArray=m_logger.getHandlers();
  for (int i=0; i < handlerArray.length; i++) {
    Handler h=handlerArray[i];
    h.flush();
    h.close();
    m_logger.removeHandler(h);
  }
}

public String toString(){
  if (val == null)   return "null";
  if (val instanceof Long || val instanceof Integer) {
    return Long.toString(val.longValue());
  }
  double d=val.doubleValue();
  if (Double.isInfinite(d))   return (d > 0) ? "(1.0 / 0.0)" : "(-1.0 / 0.0)";
  if (Double.isNaN(d))   return "(0.0 / 0.0)";
  return Double.toString(d);
}

public static List<String> splitText(String text){
  int startLine=0;
  int i=0;
  int n=text.length();
  ArrayList<String> rc=new ArrayList<String>();
  while (i < n) {
switch (text.charAt(i)) {
case '\n':
      i++;
    if (i < n && text.charAt(i) == '\r') {
      i++;
    }
  rc.add(text.substring(startLine,i));
startLine=i;
break;
case '\r':
i++;
if (i < n && text.charAt(i) == '\n') {
i++;
}
rc.add(text.substring(startLine,i));
startLine=i;
break;
default :
i++;
}
}
if (startLine == text.length()) {
rc.add("");
}
 else {
rc.add(text.substring(startLine,i));
}
return rc;
}

CountryCodeSource maybeStripInternationalPrefixAndNormalize(StringBuilder number,String possibleIddPrefix){
  if (number.length() == 0) {
    return CountryCodeSource.FROM_DEFAULT_COUNTRY;
  }
  Matcher m=PLUS_CHARS_PATTERN.matcher(number);
  if (m.lookingAt()) {
    number.delete(0,m.end());
    normalize(number);
    return CountryCodeSource.FROM_NUMBER_WITH_PLUS_SIGN;
  }
  Pattern iddPattern=regexCache.getPatternForRegex(possibleIddPrefix);
  normalize(number);
  return parsePrefixAsIdd(iddPattern,number) ? CountryCodeSource.FROM_NUMBER_WITH_IDD : CountryCodeSource.FROM_DEFAULT_COUNTRY;
}

@Override public void write(int value){
  digest.update((byte)value);
}

public boolean isManufactured(boolean ignoreSupplierProducts){
  List<GenericValue> supplierProducts=null;
  try {
    supplierProducts=product.getRelated("SupplierProduct",UtilMisc.toMap("supplierPrefOrderId","10_MAIN_SUPPL"),UtilMisc.toList("minimumOrderQuantity"),false);
  }
 catch (  GenericEntityException gee) {
    Debug.logError("Problem in BOMNode.isManufactured()",module);
  }
  supplierProducts=EntityUtil.filterByDate(supplierProducts,UtilDateTime.nowTimestamp(),"availableFromDate","availableThruDate",true);
  return childrenNodes.size() > 0 && (ignoreSupplierProducts || UtilValidate.isEmpty(supplierProducts));
}

private void addCodeFromField(StringBuilder sb,Field f){
  try {
    sb.append(f.getName() + " = " + f.getInt(KeyEvent.class));
  }
 catch (  IllegalArgumentException e) {
    e.printStackTrace();
  }
catch (  IllegalAccessException e) {
    e.printStackTrace();
  }
  sb.append("\n");
}

protected boolean scrollUp(TextView widget,Spannable buffer,int amount){
  final Layout layout=widget.getLayout();
  final int top=widget.getScrollY();
  int topLine=layout.getLineForVertical(top);
  if (layout.getLineTop(topLine) == top) {
    topLine-=1;
  }
  if (topLine >= 0) {
    topLine=Math.max(topLine - amount + 1,0);
    Touch.scrollTo(widget,layout,widget.getScrollX(),layout.getLineTop(topLine));
    return true;
  }
  return false;
}

public void load(String filename){
  ++numMappings;
  loadClassFile(filename);
}

protected void fillFaceToolBar(JToolBar faceTB,ButtonGroup bg){
  for (  EditToolLoader loader : loaderList) {
    String[] classnames=loader.getEditableClasses();
    for (int i=0; i < classnames.length; i++) {
      ImageIcon icon=loader.getIcon(classnames[i]);
      JToggleButton btn=new JToggleButton(icon,false);
      btn.setToolTipText(loader.getPrettyName(classnames[i]));
      btn.setFocusable(false);
      btn.setActionCommand(classnames[i]);
      btn.addActionListener(this);
      bg.add(btn);
      faceTB.add(btn);
    }
  }
}

public void writeToFile(File filename) throws IOException {
  FileUtils.stringToFile(mText.toString(),filename);
}

protected void transformRectsTouch(ArrayList<RectF> rects){
  for (int i=0; i < rects.size(); i++) {
    mMatrixTouch.mapRect(rects.get(i));
  }
}

@Override public String toString(){
  StringBuilder buf=new StringBuilder();
  for (  NameValuePair pair : nameValuePairList) {
    buf.append(' ');
    buf.append(pair.getName());
    buf.append('=');
    buf.append('"');
    buf.append(getQuotedAttributeValue(pair.getValue()));
    buf.append('"');
  }
  return buf.toString();
}

@Override public final int arrayOffset(){
  return protectedArrayOffset();
}

public DOMTestDocumentBuilderFactory newInstance(DocumentBuilderSetting[] newSettings) throws DOMTestIncompatibleException {
  if (newSettings == null) {
    return this;
  }
  DocumentBuilderSetting[] mergedSettings=mergeSettings(newSettings);
  return new BatikTestDocumentBuilderFactory(mergedSettings);
}

public float[] valueArray(float[] array){
  if (array == null || array.length != size()) {
    array=new float[count];
  }
  System.arraycopy(values,0,array,0,count);
  return array;
}

public static Set<TypeVariable> methodTypeToTargets(final AnnotatedExecutableType methodType){
  final List<AnnotatedTypeVariable> annotatedTypeVars=methodType.getTypeVariables();
  final Set<TypeVariable> targets=new LinkedHashSet<>(annotatedTypeVars.size());
  for (  final AnnotatedTypeVariable atv : annotatedTypeVars) {
    targets.add(atv.getUnderlyingType());
  }
  return targets;
}

private void validateTableMetaDataSingleRow(String tableNamePattern,String[] types,Map<TableMetaData,Object> validationRules) throws Exception {
  checkValidationRulesComplete(validationRules);
  try (ResultSet tables=dbmd.getTables(null,null,tableNamePattern,types)){
    assertTrue("Expected row in table metadata",tables.next());
    validateRowValues(tables,validationRules);
    assertFalse("Expected only one row in result set",tables.next());
  }
 }

public void flush() throws IOException {
  try {
    _writer.write(_buffer,0,_pos);
    _writer.flush();
  }
 catch (  IOException except) {
    if (_exception == null)     _exception=except;
    throw except;
  }
  _pos=0;
}

private JavaScriptRelationSets(){
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

private JMenu makeLogLevelMenu(){
  return new LogLevelMenu();
}

@Override public void close() throws IOException {
synchronized (lock) {
    buf=null;
    in.close();
  }
}

public DGetAlias(JFrame parent,String title,String alias){
  super(parent,title,Dialog.ModalityType.DOCUMENT_MODAL);
  initComponents(alias);
}

public static void closeQuietly(Closeable closeable){
  if (closeable != null) {
    try {
      closeable.close();
    }
 catch (    RuntimeException rethrown) {
      throw rethrown;
    }
catch (    Exception ignored) {
    }
  }
}

public static ArrayList<Hop> deepCopyHopsDag(ArrayList<Hop> hops) throws HopsException {
  ArrayList<Hop> ret=new ArrayList<Hop>();
  try {
    HashMap<Long,Hop> memo=new HashMap<Long,Hop>();
    for (    Hop hopRoot : hops)     ret.add(rDeepCopyHopsDag(hopRoot,memo));
  }
 catch (  Exception ex) {
    throw new HopsException(ex);
  }
  return ret;
}

public void addAll(T... items){
  if (mEventDelegate != null)   mEventDelegate.addData(items == null ? 0 : items.length);
  if (items != null && items.length != 0) {
synchronized (mLock) {
      Collections.addAll(mObjects,items);
    }
  }
  if (mNotifyOnChange)   notifyDataSetChanged();
}

private void replaceImpl(final int startIndex,final int endIndex,final int removeLen,final String insertStr,final int insertLen){
  final int newSize=size - removeLen + insertLen;
  if (insertLen != removeLen) {
    ensureCapacity(newSize);
    System.arraycopy(buffer,endIndex,buffer,startIndex + insertLen,size - endIndex);
    size=newSize;
  }
  if (insertLen > 0) {
    insertStr.getChars(0,insertLen,buffer,startIndex);
  }
}

public void updateCheque_DD_Card_Deposit_Receipt(final Map instrumentDetailsMap){
  updateInstrumentAndPayinSql(instrumentDetailsMap);
  addToBankReconcilationSQL(instrumentDetailsMap);
}

public void testtestIsLast() throws SQLException {
  assertFalse(target.isLast());
  target.absolute(-1);
  assertTrue(target.isLast());
  assertFalse(emptyTarget.isLast());
  assertFalse(emptyTarget.next());
  assertFalse(emptyTarget.isLast());
  try {
    target.close();
    target.isLast();
    fail("Should get SQLException");
  }
 catch (  SQLException e) {
  }
}

public final void addHelperText(@NonNull final CharSequence helperText){
  ensureNotNull(helperText,"The helper text may not be null");
  ensureNotEmpty(helperText,"The helper text may not be empty");
  if (!helperTexts.contains(helperText)) {
    helperTexts.add(helperText);
    verifyPasswordStrength();
  }
}

void waitForLogEntry(int index,int timeout) throws GondolaException, InterruptedException, TimeoutException {
  reset();
  this.index=index;
  long endTs=timeout < 0 ? Long.MAX_VALUE : gondola.getClock().now() + timeout;
  lock.lock();
  try {
    while (status == Command.STATUS_NONE && gondola.getClock().now() < endTs) {
      if (timeout < 0) {
        updateCond.await();
      }
 else {
        updateCond.await(timeout,TimeUnit.MILLISECONDS);
      }
    }
    if (this.index != index) {
      logger.error("This command object is being used by another thread");
    }
  }
  finally {
    lock.unlock();
  }
switch (status) {
case Command.STATUS_NONE:
    status=Command.STATUS_TIMEOUT;
  throw new TimeoutException(String.format("Timeout (%d ms) for index %d",timeout,index));
case Command.STATUS_NOT_LEADER:
assert false;
break;
case Command.STATUS_SLAVE_MODE:
throw new GondolaException(GondolaException.Code.SLAVE_MODE,cmember.memberId);
case Command.STATUS_ERROR:
throw new IllegalStateException("Error getting index " + index + ": "+ errorMessage);
case Command.STATUS_OK:
break;
}
}

public static String generateNativeGuid(DbClient dbClient,Volume volume) throws IOException {
  StorageSystem device=dbClient.queryObject(StorageSystem.class,volume.getStorageController());
  return String.format("%s+%s+" + VOLUME + "+%s",_deviceTypeMap.get(device.getSystemType()),device.getSerialNumber(),volume.getNativeId());
}

public AgentMappings saveAgentMappings(AgentMappings agentMappings,boolean checkEnvironments) throws BusinessException, JAXBException, IOException {
  if (checkEnvironments) {
    checkEnvironments(agentMappings);
  }
  AgentMappings current;
  do {
    current=agentMappingsReference.get();
    if (current.getRevision() != agentMappings.getRevision()) {
      throw new BusinessException("Update of the agent mappings.",ConfigurationInterfaceErrorCodeEnum.REVISION_CHECK_FAILED);
    }
  }
 while (!agentMappingsReference.compareAndSet(current,agentMappings));
  agentMappings.setRevision(agentMappings.getRevision() + 1);
  saveAgentMapping(agentMappings);
  publishAgentMappingsUpdateEvent();
  return agentMappings;
}

public E push(E object){
  addElement(object);
  return object;
}

protected void newCertBtnListener(){
  NewCertificateDialogData data=new NewCertificateDialogData();
  NewCertificateDialog dialog=new NewCertificateDialog(getShell(),data,"");
  int returnCode=dialog.open();
  if (returnCode == Window.OK) {
    String certPath=data.getCerFilePath();
    certTxt.setText(certPath != null ? certPath.replace('\\','/') : certPath);
    certInfoTxt.setText(getCertInfo(certTxt.getText()));
  }
}

public static void generateMov(final ITranslationEnvironment environment,final long baseOffset,final IInstruction instruction,final List<ReilInstruction> instructions) throws InternalTranslationException {
  Preconditions.checkNotNull(environment,"Error: Argument environment can't be null");
  Preconditions.checkNotNull(instruction,"Error: Argument instruction can't be null");
  Preconditions.checkNotNull(instructions,"Error: Argument instructions can't be null");
  long reilOffset=baseOffset;
  final List<? extends IOperandTree> operands=instruction.getOperands();
  final TranslationResult loadSource=Helpers.translateOperand(environment,reilOffset,operands.get(1),true);
  instructions.addAll(loadSource.getInstructions());
  reilOffset=baseOffset + instructions.size();
  final TranslationResult loadDest=Helpers.translateOperand(environment,reilOffset,operands.get(0),false);
  instructions.addAll(loadDest.getInstructions());
  reilOffset=baseOffset + instructions.size();
  Helpers.writeBack(environment,reilOffset,operands.get(0),loadSource.getRegister(),loadDest.getSize(),loadDest.getAddress(),loadDest.getType(),instructions);
}

public void characters(char ch[],int start,int length) throws org.xml.sax.SAXException {
  if (!m_shouldProcess)   return;
  XSLTElementProcessor elemProcessor=getCurrentProcessor();
  XSLTElementDef def=elemProcessor.getElemDef();
  if (def.getType() != XSLTElementDef.T_PCDATA)   elemProcessor=def.getProcessorFor(null,"text()");
  if (null == elemProcessor) {
    if (!XMLCharacterRecognizer.isWhiteSpace(ch,start,length))     error(XSLMessages.createMessage(XSLTErrorResources.ER_NONWHITESPACE_NOT_ALLOWED_IN_POSITION,null),null);
  }
 else   elemProcessor.characters(this,ch,start,length);
}

public boolean removeEntry(int xIndex,int dataSetIndex){
  if (dataSetIndex >= mDataSets.size())   return false;
  T dataSet=mDataSets.get(dataSetIndex);
  Entry e=dataSet.getEntryForXIndex(xIndex);
  return removeEntry(e,dataSetIndex);
}

public void testBug68562() throws Exception {
  testBug68562BatchWithSize(1);
  testBug68562BatchWithSize(3);
}

public Vec2 toVector(Point2D v){
  return new Vec2(toMeters(v.getX()),toMeters(-v.getY()));
}

@Override public void terminateAnyRestoreSessions(StorageSystem storage,BlockObject from,URI volume,TaskCompleter taskCompleter) throws Exception {
  BlockObject blockObject=BlockObject.fetch(_dbClient,volume);
  Collection<CIMObjectPath> syncObjects=null;
  if (storage.checkIfVmax3()) {
    syncObjects=_helper.getSettingsDefineStatePaths(storage,blockObject,(BlockSnapshot)from);
  }
 else {
    syncObjects=getRestoredOrMixedStateSyncObjects(storage,blockObject);
  }
  for (  CIMObjectPath syncObject : syncObjects) {
    resumeSnapshot(storage,from,blockObject,syncObject,taskCompleter);
  }
}

public static <T>Set<T> toSet(T obj1,T obj2,T obj3,T obj4,T obj5,T obj6){
  Set<T> theSet=new LinkedHashSet<T>();
  theSet.add(obj1);
  theSet.add(obj2);
  theSet.add(obj3);
  theSet.add(obj4);
  theSet.add(obj5);
  theSet.add(obj6);
  return theSet;
}

protected void writeGraphicCtrlExt() throws IOException {
  out.write(0x21);
  out.write(0xf9);
  out.write(4);
  int transp, disp;
  if (transparent == -1) {
    transp=0;
    disp=0;
  }
 else {
    transp=1;
    disp=2;
  }
  if (dispose >= 0) {
    disp=dispose & 7;
  }
  disp<<=2;
  out.write(0 | disp | 0| transp);
  writeShort(delay);
  out.write(transIndex);
  out.write(0);
}

public final double doOperation() throws OperatorFailedException {
  int index;
  if (updateMap == null) {
    index=MathUtils.nextInt(parameter.getDimension());
  }
 else {
    index=updateMap.get(MathUtils.nextInt(updateMapSize));
  }
  double draw=(2.0 * MathUtils.nextDouble() - 1.0) * windowSize;
  double newValue=parameter.getParameterValue(index) + draw;
  final Bounds<Double> bounds=parameter.getBounds();
  final double lower=(lowerOperatorBound == null ? bounds.getLowerLimit(index) : Math.max(bounds.getLowerLimit(index),lowerOperatorBound));
  final double upper=(upperOperatorBound == null ? bounds.getUpperLimit(index) : Math.min(bounds.getUpperLimit(index),upperOperatorBound));
  if (condition == BoundaryCondition.reflecting) {
    newValue=reflectValue(newValue,lower,upper);
  }
 else   if (condition == BoundaryCondition.absorbing && (newValue < lower || newValue > upper)) {
    return 0.0;
  }
 else   if (newValue < lower || newValue > upper) {
    throw new OperatorFailedException("proposed value outside boundaries");
  }
  parameter.setParameterValue(index,newValue);
  return 0.0;
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String childData;
  doc=(Document)load("hc_staff",true);
  elementList=doc.getElementsByTagName("acronym");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
  child.replaceData(30,5,"98665");
  childData=child.getData();
  assertEquals("characterdataReplaceDataEndAssert","1230 North Ave. Dallas, Texas 98665",childData);
}

public Collection<Object> injectables(){
  return Collections.emptyList();
}

private void updateEffectiveDimensions(){
  effectiveWidth=Math.max(0,width - leftBorder - rightBorder);
  effectiveHeight=Math.max(0,height - topBorder - bottomBorder);
}

public void addAttribute(AttributeInfo info){
  if (attribute == null)   attribute=new ArrayList();
  AttributeInfo.remove(attribute,info.getName());
  attribute.add(info);
}

public void addLine(String text) throws BadLocationException {
  if (text == null || text.length() == 0 || text.equals("\n")) {
    return;
  }
  document.replace(document.getLength(),0,text);
}

protected void muteButtonPressed(ActionEvent e){
  JToggleButton b=(JToggleButton)e.getSource();
  log.debug("Mute button pressed. value = " + b.isSelected());
  firePropertyChange(PropertyChangeID.MUTE,!b.isSelected(),b.isSelected());
}

public TwoDPoint(String s){
  StringTokenizer st=new StringTokenizer(s,",");
  x=Double.valueOf(st.nextToken());
  y=Double.valueOf(st.nextToken());
}

private void readObject(final ObjectInputStream in) throws IOException, ClassNotFoundException {
  in.defaultReadObject();
  init();
}

public static boolean isClassSupport(String clzName){
  try {
    Class.forName(clzName);
    return true;
  }
 catch (  ClassNotFoundException e) {
    return false;
  }
}

public void addPopupListener(final PopupListener listener){
  if (!popupListeners.contains(listener)) {
    popupListeners.add(listener);
  }
}

public static byte[] decode(byte[] data){
  int len=data.length / 4 * 3;
  ByteArrayOutputStream bOut=new ByteArrayOutputStream(len);
  try {
    encoder.decode(data,0,data.length,bOut);
  }
 catch (  Exception e) {
    throw new DecoderException("unable to decode base64 data: " + e.getMessage(),e);
  }
  return bOut.toByteArray();
}

public static String buildSelectorFromAttributeTypeAndValue(String attributeType,String attributeValue){
  StringBuilder strb=new StringBuilder();
  strb.append(OPEN_BRACKET);
  strb.append(attributeType);
  strb.append(EQUAL);
  strb.append(attributeValue);
  strb.append(CLOSE_BRACKET);
  return strb.toString();
}

public static Bitmap scaleFit(Bitmap src,int maxW,int maxH){
  float ratio=Math.min(maxW / (float)src.getWidth(),maxH / (float)src.getHeight());
  int newW=(int)(src.getWidth() * ratio);
  int newH=(int)(src.getHeight() * ratio);
  return scale(src,newW,newH);
}

public File(String dirPath,String name){
  if (name == null) {
    throw new NullPointerException("name == null");
  }
  if (dirPath == null || dirPath.isEmpty()) {
    this.path=fixSlashes(name);
  }
 else   if (name.isEmpty()) {
    this.path=fixSlashes(dirPath);
  }
 else {
    this.path=fixSlashes(join(dirPath,name));
  }
}

void decodeAttributeBody(byte[] attributeValue,char offset,char length){
  username=new byte[length];
  System.arraycopy(attributeValue,offset,username,0,length);
}

protected synchronized byte[] engineGenerateSeed(int numBytes){
  byte[] myBytes;
  if (numBytes < 0) {
    throw new NegativeArraySizeException(Integer.toString(numBytes));
  }
  if (numBytes == 0) {
    return EmptyArray.BYTE;
  }
  if (myRandom == null) {
    myRandom=new SHA1PRNG_SecureRandomImpl();
    myRandom.engineSetSeed(getRandomBytes(DIGEST_LENGTH));
  }
  myBytes=new byte[numBytes];
  myRandom.engineNextBytes(myBytes);
  return myBytes;
}

public static String normalizeInet4Address(String ip4String){
  final int[] octets=parseInet4Address(ip4String);
  if (octets == null) {
    return null;
  }
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < 4; i++) {
    if (i > 0) {
      sb.append('.');
    }
    sb.append(octets[i]);
  }
  return sb.toString();
}

public static int[] shuffle(int[] input){
  List<Integer> vals=new ArrayList<Integer>(input.length);
  for (int i=0; i < input.length; i++)   vals.add(input[i]);
  Collections.shuffle(vals,SEEDED_RANDOM);
  int[] copy=new int[input.length];
  for (int i=0; i < input.length; i++)   copy[i]=vals.get(i);
  return copy;
}

public boolean offer(PooledConnection pooledConnection){
  acquiredConnections.remove(pooledConnection);
  boolean offer=queue.offer(pooledConnection);
  if (!offer) {
    pooledConnection.dispose();
  }
  if (isTerminating.get()) {
    PooledConnection poll=queue.poll();
    if (poll != null) {
      poll.dispose();
    }
  }
  return offer;
}

private int parseStyleInDefaultWorkspace(GeoServerRESTReader reader,int count,List<StyleWrapper> styleList){
  RESTStyleList geoServerStyleList=reader.getStyles();
  for (  String style : geoServerStyleList.getNames()) {
    StyleWrapper newStyleWrapper=new StyleWrapper(DEFAULT_WORKSPACE_NAME,style);
    styleList.add(newStyleWrapper);
    if (parentObj != null) {
      parentObj.readStylesProgress(connection,count,count);
    }
    count++;
  }
  return count;
}

private ClassSignature loadClassFromJigsaw(String classname) throws IOException {
  if (method_Class_getModule == null || method_Module_getName == null) {
    return null;
  }
  final Class<?> clazz;
  final String moduleName;
  try {
    clazz=Class.forName(classname,false,loader);
    final Object module=method_Class_getModule.invoke(clazz);
    moduleName=(String)method_Module_getName.invoke(module);
  }
 catch (  Exception e) {
    return null;
  }
  return new ClassSignature(clazz,AsmUtils.isRuntimeModule(moduleName));
}

public void testConnectANTSensor_Cadence(){
  if (!runTest) {
    Log.d(TAG,BigTestUtils.DISABLE_MESSAGE);
    return;
  }
  useANTSeonsor();
  assertTrue(checkSensorsStatus_notRecording());
  checkANTSensorsStatus(R.id.sensor_state_cadence);
}

@Override public boolean equals(Object obj){
  if (this == obj) {
    return true;
  }
  if (obj == null) {
    return false;
  }
  if (getClass() != obj.getClass()) {
    return false;
  }
  Diff other=(Diff)obj;
  if (operation != other.operation) {
    return false;
  }
  if (text == null) {
    if (other.text != null) {
      return false;
    }
  }
 else   if (!text.equals(other.text)) {
    return false;
  }
  return true;
}

public void clearAttributeSpecs(){
  if (m_attributeSpecs == null) {
    m_attributeSpecs=new ArrayList<AttributeSpec>();
  }
  m_attributeSpecs.clear();
}

public void loadProperties(boolean silent){
  loadPropertiesFile(System.getProperty(PROPERTIES_FILE,"evosuite-files/evosuite.properties"),silent);
  initializeProperties();
}

@Override public void start(){
  try {
    JournalClientEndpoint endpoint=connect();
    if (endpoint != null) {
      OutputStream os;
      _os=os=endpoint.startMessage();
      if (os != null) {
        os.write('M');
      }
    }
  }
 catch (  Exception e) {
    log.finer(e.toString());
  }
}

static private int readBytes(int c[],int len,InputStream is) throws IOException {
  byte buf[]=new byte[len];
  if (is.read(buf,0,len) < len) {
    return -1;
  }
  for (int i=0; i < len; i++) {
    c[i]=buf[i] & 0xff;
  }
  return 0;
}

public static void sort(Object[] array){
  if (array.length > 1) {
    Arrays.sort(array,INSTANCE);
  }
}

public static int expectedSizeOfProbabilityTable(RandomVariable... vars){
  int expectedSizeOfDistribution=1;
  if (null != vars) {
    for (    RandomVariable rv : vars) {
      if (!(rv.getDomain() instanceof FiniteDomain)) {
        throw new IllegalArgumentException("Cannot have an infinite domain for a variable in this calculation:" + rv);
      }
      FiniteDomain d=(FiniteDomain)rv.getDomain();
      expectedSizeOfDistribution*=d.size();
    }
  }
  return expectedSizeOfDistribution;
}

native private static void initialize(String applicationId);

public static AnimGameItem process(MD5Model md5Model,MD5AnimModel animModel,Vector3f defaultColour) throws Exception {
  List<Matrix4f> invJointMatrices=calcInJointMatrices(md5Model);
  List<AnimatedFrame> animatedFrames=processAnimationFrames(md5Model,animModel,invJointMatrices);
  List<Mesh> list=new ArrayList<>();
  for (  MD5Mesh md5Mesh : md5Model.getMeshes()) {
    Mesh mesh=generateMesh(md5Model,md5Mesh);
    handleTexture(mesh,md5Mesh,defaultColour);
    list.add(mesh);
  }
  Mesh[] meshes=new Mesh[list.size()];
  meshes=list.toArray(meshes);
  AnimGameItem result=new AnimGameItem(meshes,animatedFrames,invJointMatrices);
  return result;
}

static String encodeHighLevel(String msg,Compaction compaction,Charset encoding) throws WriterException {
  StringBuilder sb=new StringBuilder(msg.length());
  if (encoding == null) {
    encoding=DEFAULT_ENCODING;
  }
 else   if (!DEFAULT_ENCODING.equals(encoding)) {
    CharacterSetECI eci=CharacterSetECI.getCharacterSetECIByName(encoding.name());
    if (eci != null) {
      encodingECI(eci.getValue(),sb);
    }
  }
  int len=msg.length();
  int p=0;
  int textSubMode=SUBMODE_ALPHA;
  byte[] bytes=null;
  if (compaction == Compaction.TEXT) {
    encodeText(msg,p,len,sb,textSubMode);
  }
 else   if (compaction == Compaction.BYTE) {
    bytes=msg.getBytes(encoding);
    encodeBinary(bytes,p,bytes.length,BYTE_COMPACTION,sb);
  }
 else   if (compaction == Compaction.NUMERIC) {
    sb.append((char)LATCH_TO_NUMERIC);
    encodeNumeric(msg,p,len,sb);
  }
 else {
    int encodingMode=TEXT_COMPACTION;
    while (p < len) {
      int n=determineConsecutiveDigitCount(msg,p);
      if (n >= 13) {
        sb.append((char)LATCH_TO_NUMERIC);
        encodingMode=NUMERIC_COMPACTION;
        textSubMode=SUBMODE_ALPHA;
        encodeNumeric(msg,p,n,sb);
        p+=n;
      }
 else {
        int t=determineConsecutiveTextCount(msg,p);
        if (t >= 5 || n == len) {
          if (encodingMode != TEXT_COMPACTION) {
            sb.append((char)LATCH_TO_TEXT);
            encodingMode=TEXT_COMPACTION;
            textSubMode=SUBMODE_ALPHA;
          }
          textSubMode=encodeText(msg,p,t,sb,textSubMode);
          p+=t;
        }
 else {
          if (bytes == null) {
            bytes=msg.getBytes(encoding);
          }
          int b=determineConsecutiveBinaryCount(msg,bytes,p);
          if (b == 0) {
            b=1;
          }
          if (b == 1 && encodingMode == TEXT_COMPACTION) {
            encodeBinary(bytes,p,1,TEXT_COMPACTION,sb);
          }
 else {
            encodeBinary(bytes,p,b,encodingMode,sb);
            encodingMode=BYTE_COMPACTION;
            textSubMode=SUBMODE_ALPHA;
          }
          p+=b;
        }
      }
    }
  }
  return sb.toString();
}

private int readAnnotationValue(int v,final char[] buf,final String name,final AnnotationVisitor av){
  int i;
  if (av == null) {
switch (b[v] & 0xFF) {
case 'e':
      return v + 5;
case '@':
    return readAnnotationValues(v + 3,buf,true,null);
case '[':
  return readAnnotationValues(v + 1,buf,false,null);
default :
return v + 3;
}
}
switch (b[v++] & 0xFF) {
case 'I':
case 'J':
case 'F':
case 'D':
av.visit(name,readConst(readUnsignedShort(v),buf));
v+=2;
break;
case 'B':
av.visit(name,new Byte((byte)readInt(items[readUnsignedShort(v)])));
v+=2;
break;
case 'Z':
av.visit(name,readInt(items[readUnsignedShort(v)]) == 0 ? Boolean.FALSE : Boolean.TRUE);
v+=2;
break;
case 'S':
av.visit(name,new Short((short)readInt(items[readUnsignedShort(v)])));
v+=2;
break;
case 'C':
av.visit(name,new Character((char)readInt(items[readUnsignedShort(v)])));
v+=2;
break;
case 's':
av.visit(name,readUTF8(v,buf));
v+=2;
break;
case 'e':
av.visitEnum(name,readUTF8(v,buf),readUTF8(v + 2,buf));
v+=4;
break;
case 'c':
av.visit(name,Type.getType(readUTF8(v,buf)));
v+=2;
break;
case '@':
v=readAnnotationValues(v + 2,buf,true,av.visitAnnotation(name,readUTF8(v,buf)));
break;
case '[':
int size=readUnsignedShort(v);
v+=2;
if (size == 0) {
return readAnnotationValues(v - 2,buf,false,av.visitArray(name));
}
switch (this.b[v++] & 0xFF) {
case 'B':
byte[] bv=new byte[size];
for (i=0; i < size; i++) {
bv[i]=(byte)readInt(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,bv);
--v;
break;
case 'Z':
boolean[] zv=new boolean[size];
for (i=0; i < size; i++) {
zv[i]=readInt(items[readUnsignedShort(v)]) != 0;
v+=3;
}
av.visit(name,zv);
--v;
break;
case 'S':
short[] sv=new short[size];
for (i=0; i < size; i++) {
sv[i]=(short)readInt(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,sv);
--v;
break;
case 'C':
char[] cv=new char[size];
for (i=0; i < size; i++) {
cv[i]=(char)readInt(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,cv);
--v;
break;
case 'I':
int[] iv=new int[size];
for (i=0; i < size; i++) {
iv[i]=readInt(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,iv);
--v;
break;
case 'J':
long[] lv=new long[size];
for (i=0; i < size; i++) {
lv[i]=readLong(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,lv);
--v;
break;
case 'F':
float[] fv=new float[size];
for (i=0; i < size; i++) {
fv[i]=Float.intBitsToFloat(readInt(items[readUnsignedShort(v)]));
v+=3;
}
av.visit(name,fv);
--v;
break;
case 'D':
double[] dv=new double[size];
for (i=0; i < size; i++) {
dv[i]=Double.longBitsToDouble(readLong(items[readUnsignedShort(v)]));
v+=3;
}
av.visit(name,dv);
--v;
break;
default :
v=readAnnotationValues(v - 3,buf,false,av.visitArray(name));
}
}
return v;
}

private static final boolean compareAndSetWaitStatus(Node node,int expect,int update){
  return unsafe.compareAndSwapInt(node,waitStatusOffset,expect,update);
}

public NetworkConnectivityListener(){
  mState=State.UNKNOWN;
}

Vector processSIMPLEPATTERNLIST(StylesheetHandler handler,String uri,String name,String rawName,String value,ElemTemplateElement owner) throws org.xml.sax.SAXException {
  try {
    StringTokenizer tokenizer=new StringTokenizer(value," \t\n\r\f");
    int nPatterns=tokenizer.countTokens();
    Vector patterns=new Vector(nPatterns);
    for (int i=0; i < nPatterns; i++) {
      XPath pattern=handler.createMatchPatternXPath(tokenizer.nextToken(),owner);
      patterns.addElement(pattern);
    }
    return patterns;
  }
 catch (  TransformerException te) {
    throw new org.xml.sax.SAXException(te);
  }
}

protected ASN1Sequence(ASN1Encodable[] array){
  for (int i=0; i != array.length; i++) {
    seq.addElement(array[i]);
  }
}

public void addCopy(IResource copy,CopyArguments arguments){
  if (fCopy == null) {
    fCopy=new ArrayList(2);
    fCopyArguments=new ArrayList(2);
  }
  fCopy.add(copy);
  fCopyArguments.add(arguments);
  addCopyDelta(copy,arguments);
}

@Override public void write(byte[] buffer,int offset,int length) throws IOException {
  while ((mByteToSkip > 0 || mByteToCopy > 0 || mState != STATE_JPEG_DATA) && length > 0) {
    if (mByteToSkip > 0) {
      int byteToProcess=length > mByteToSkip ? mByteToSkip : length;
      length-=byteToProcess;
      mByteToSkip-=byteToProcess;
      offset+=byteToProcess;
    }
    if (mByteToCopy > 0) {
      int byteToProcess=length > mByteToCopy ? mByteToCopy : length;
      out.write(buffer,offset,byteToProcess);
      length-=byteToProcess;
      mByteToCopy-=byteToProcess;
      offset+=byteToProcess;
    }
    if (length == 0) {
      return;
    }
switch (mState) {
case STATE_SOI:
      int byteRead=requestByteToBuffer(2,buffer,offset,length);
    offset+=byteRead;
  length-=byteRead;
if (mBuffer.position() < 2) {
  return;
}
mBuffer.rewind();
if (mBuffer.getShort() != JpegHeader.SOI) {
throw new IOException("Not a valid jpeg image, cannot write exif");
}
out.write(mBuffer.array(),0,2);
mState=STATE_FRAME_HEADER;
mBuffer.rewind();
writeExifData();
break;
case STATE_FRAME_HEADER:
byteRead=requestByteToBuffer(4,buffer,offset,length);
offset+=byteRead;
length-=byteRead;
if (mBuffer.position() == 2) {
short tag=mBuffer.getShort();
if (tag == JpegHeader.EOI) {
out.write(mBuffer.array(),0,2);
mBuffer.rewind();
}
}
if (mBuffer.position() < 4) {
return;
}
mBuffer.rewind();
short marker=mBuffer.getShort();
if (marker == JpegHeader.APP1) {
mByteToSkip=(mBuffer.getShort() & 0x0000ffff) - 2;
mState=STATE_JPEG_DATA;
}
 else if (!JpegHeader.isSofMarker(marker)) {
out.write(mBuffer.array(),0,4);
mByteToCopy=(mBuffer.getShort() & 0x0000ffff) - 2;
}
 else {
out.write(mBuffer.array(),0,4);
mState=STATE_JPEG_DATA;
}
mBuffer.rewind();
}
}
if (length > 0) {
out.write(buffer,offset,length);
}
}

protected boolean[] datasetIntegrity(boolean nominalPredictor,boolean numericPredictor,boolean stringPredictor,boolean datePredictor,boolean relationalPredictor,boolean multiInstance,int classType,boolean predictorMissing,boolean classMissing){
  print("scheme doesn't alter original datasets");
  printAttributeSummary(nominalPredictor,numericPredictor,stringPredictor,datePredictor,relationalPredictor,multiInstance,classType);
  print("...");
  int numTrain=getNumInstances(), numClasses=2, missingLevel=20;
  boolean[] result=new boolean[2];
  Instances train=null;
  Instances trainCopy=null;
  ASSearch search=null;
  ASEvaluation evaluation=null;
  try {
    train=makeTestDataset(42,numTrain,nominalPredictor ? getNumNominal() : 0,numericPredictor ? getNumNumeric() : 0,stringPredictor ? getNumString() : 0,datePredictor ? getNumDate() : 0,relationalPredictor ? getNumRelational() : 0,numClasses,classType,multiInstance);
    if (missingLevel > 0) {
      addMissing(train,missingLevel,predictorMissing,classMissing);
    }
    search=ASSearch.makeCopies(getSearch(),1)[0];
    evaluation=ASEvaluation.makeCopies(getEvaluator(),1)[0];
    trainCopy=new Instances(train);
  }
 catch (  Exception ex) {
    throw new Error("Error setting up for tests: " + ex.getMessage());
  }
  try {
    search(search,evaluation,trainCopy);
    compareDatasets(train,trainCopy);
    println("yes");
    result[0]=true;
  }
 catch (  Exception ex) {
    println("no");
    result[0]=false;
    if (m_Debug) {
      println("\n=== Full Report ===");
      print("Problem during training");
      println(": " + ex.getMessage() + "\n");
      println("Here are the datasets:\n");
      println("=== Train Dataset (original) ===\n" + trainCopy.toString() + "\n");
      println("=== Train Dataset ===\n" + train.toString() + "\n");
    }
  }
  return result;
}

public void insert_trace(Polyline p_polyline,int p_layer,int p_half_width,NetNosList p_net_no_arr,int p_clearance_class,ItemFixState p_fixed_state){
  BrdTracep new_trace=insert_trace_without_cleaning(p_polyline,p_layer,p_half_width,p_net_no_arr,p_clearance_class,p_fixed_state);
  if (new_trace == null)   return;
  new_trace.normalize(changed_area.get_area(p_layer));
}

void sendTransmit(MultiplexConnectionInfo info,byte buf[],int off,int len) throws IOException {
synchronized (dataOut) {
    if (alive && !info.closed)     try {
      dataOut.writeByte(TRANSMIT);
      dataOut.writeShort(info.id);
      dataOut.writeInt(len);
      dataOut.write(buf,off,len);
      dataOut.flush();
    }
 catch (    IOException e) {
      multiplexLog.log(Log.BRIEF,"exception: ",e);
      shutDown();
      throw e;
    }
  }
}

public <T extends SQLException>T toFlatSQLException(Class<T> type) throws ClassCastException {
  return type.cast(toFlatSQLException());
}

public void addTotalResultCountCookie(WorkbenchRequest req,HttpServletResponse resp,int value){
  addCookie(req,resp,"total_result_count",String.valueOf(value));
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

abstract void startPoll(int fd,int events);

private Rectangle integerise(Rectangle2D rect){
  int x0=(int)Math.ceil(rect.getMinX());
  int y0=(int)Math.ceil(rect.getMinY());
  int x1=(int)Math.floor(rect.getMaxX());
  int y1=(int)Math.floor(rect.getMaxY());
  return new Rectangle(x0,y0,(x1 - x0),(y1 - y0));
}

@Override public void mouseMoved(MouseEvent evt){
  delegate.mouseMoved(evt);
}

protected void validateConfig(){
  A.notNull(getStreamer(),"Streamer");
  A.notNull(getIgnite(),"Ignite");
  A.notNull(endpointUrl,"Twitter Streaming API endpoint");
  A.ensure(getSingleTupleExtractor() != null || getMultipleTupleExtractor() != null,"Twitter extractor");
  String followParam=apiParams.get(SITE_USER_ID_KEY);
  A.ensure(followParam != null && followParam.matches("^(\\d+,? ?)+$"),"Site streaming endpoint must provide 'follow' param with value as comma separated numbers");
}

public long[] selectZero(long rank,long[] dest,final int offset,final int length){
  if (length == 0)   return dest;
  long s=selectZero(rank);
  dest[offset]=s;
  int curr=(int)(s / Long.SIZE);
  long window=~bits[curr] & -1L << s;
  window&=window - 1;
  for (int i=1; i < length; i++) {
    while (window == 0)     window=~bits[++curr];
    dest[offset + i]=curr * Long.SIZE + Long.numberOfTrailingZeros(window);
    window&=window - 1;
  }
  return dest;
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return STRING_FIELD;
case 2:
  return SET_FIELD;
case 3:
return LIST_FIELD;
case 4:
return BINARY_FIELD;
default :
return null;
}
}

public int size(){
synchronized (children) {
    return children.size();
  }
}

private String flattenComment(String string){
  StringBuffer buffer=new StringBuffer(string.length() + 20);
  boolean skipAdjacentLineSeparator=true;
  for (int i=0; i < string.length(); i++) {
    char c=string.charAt(i);
    if (c == '\r' || c == '\n') {
      if (!skipAdjacentLineSeparator)       buffer.append(Policy.bind("separator"));
      skipAdjacentLineSeparator=true;
    }
 else {
      buffer.append(c);
      skipAdjacentLineSeparator=false;
    }
  }
  return buffer.toString();
}

private boolean isAccelerating(SensorEvent event){
  float ax=event.values[0];
  float ay=event.values[1];
  float az=event.values[2];
  final double magnitude=Math.sqrt(ax * ax + ay * ay + az * az);
  return magnitude > ACCELERATION_THRESHOLD;
}

@Override public byte[] readByteArray(String filePath,int length){
  FileChannel fileChannel=updateCache(filePath);
  ByteBuffer byteBffer=read(fileChannel,length);
  return byteBffer.array();
}

public void popDragEntry(int index){
  if (isIndexInBound(index)) {
    mDraggedEntry=mDragEntries.get(index);
    mDraggedEntryIndex=index;
    mDragEnteredEntryIndex=index;
    markDropArea(index);
  }
}

public void test_loadAndVerify_small_quadsMode() throws Exception {
  final String resource="/com/bigdata/rdf/rio/small.rdf";
  final Properties p=getProperties();
  p.setProperty(AbstractTripleStore.Options.QUADS,"true");
  doLoadAndVerifyTest(resource,p);
}

public void addEmail(EmailEntity email){
  emails.add(email);
}

private static int manhattanDistance(final int x1,final int y1,final int x2,final int y2){
  return Math.abs(x1 - x2) + Math.abs(y1 - y2);
}

private static final boolean compareAndSetWaitStatus(Node node,int expect,int update){
  return unsafe.compareAndSwapInt(node,waitStatusOffset,expect,update);
}

public void putGrammar(SchemaGrammar grammar){
  if (grammar.getTargetNamespace() == null)   fNoNSGrammar=grammar;
 else   fGrammarRegistry.put(grammar.getTargetNamespace(),grammar);
}

public JSONArray optJSONArray(String key){
  Object o=opt(key);
  return o instanceof JSONArray ? (JSONArray)o : null;
}

private void status(){
  ps.println("# Status of this version:");
  ps.println("#     OUTDATED: sorry, you have to redownload");
  ps.println("#     UPDATE_NEEDED:   there is an update available");
  ps.println("#     CURRENT:  good, we don't have to do anything at the moment");
  writeKeysWithPrefix("version.","version.destination");
}

@Override public void chartProgress(ChartProgressEvent event){
}

void pushImportSource(Source sourceFromURIResolver){
  m_importSourceStack.push(sourceFromURIResolver);
}

public static byte[] buildNalUnit(byte[] data,int offset,int length){
  byte[] nalUnit=new byte[length + NAL_START_CODE.length];
  System.arraycopy(NAL_START_CODE,0,nalUnit,0,NAL_START_CODE.length);
  System.arraycopy(data,offset,nalUnit,NAL_START_CODE.length,length);
  return nalUnit;
}

protected void doLogOobMessageOutbound(Message message){
  if (rpcLogger != null) {
    rpcLogger.logOobMessage(clientInfo,serverInfo,message,System.currentTimeMillis());
  }
}

@Override public void stop(){
  CountDownLatch latch=stopped;
  Thread oldThread=thread.getAndUpdate(null);
  if (oldThread != null && latch != null) {
    try {
      latch.await(10,TimeUnit.SECONDS);
    }
 catch (    InterruptedException e) {
      Thread.interrupted();
    }
  }
}

@Override public byte[] encode(BufferedImage bufferedImage) throws IOException {
  ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
  encode(bufferedImage,outputStream);
  return outputStream.toByteArray();
}

private JsonParserException createHelpfulException(char first,char[] expected,int failurePosition) throws JsonParserException {
  StringBuilder errorToken=new StringBuilder(first + (expected == null ? "" : new String(expected,0,failurePosition)));
  while (isAsciiLetter(peekChar()) && errorToken.length() < 15)   errorToken.append((char)advanceChar());
  return createParseException(null,"Unexpected token '" + errorToken + "'"+ (expected == null ? "" : ". Did you mean '" + first + new String(expected)+ "'?"),true);
}

public void testConstructorBytesPositive3(){
  byte aBytes[]={127,56,100,-1};
  byte rBytes[]={127,56,100,-1};
  BigInteger aNumber=new BigInteger(aBytes);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=aNumber.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,aNumber.signum());
}

public static void i(String tag,String s,Object... args){
  if (LOG.INFO >= LOGLEVEL)   Log.i(tag,String.format(s,args));
}

public void removeLifecycleListener(LifecycleListener lifecycleListener){
  lifecycleListeners.remove(lifecycleListener);
}

private synchronized void initRegistry(boolean force) throws MatlabConnectionException {
  if (_registry == null || force) {
    try {
      _registry=LocalHostRMIHelper.createRegistry(_options.getPort());
    }
 catch (    Exception e) {
      try {
        _registry=LocalHostRMIHelper.getRegistry(_options.getPort());
      }
 catch (      Exception ex) {
        throw new MatlabConnectionException("Could not create or connect to the RMI registry",ex);
      }
    }
  }
}

public boolean phaseHasTurns(IGame.Phase thisPhase){
switch (thisPhase) {
case PHASE_SET_ARTYAUTOHITHEXES:
case PHASE_DEPLOY_MINEFIELDS:
case PHASE_DEPLOYMENT:
case PHASE_MOVEMENT:
case PHASE_FIRING:
case PHASE_PHYSICAL:
case PHASE_TARGETING:
case PHASE_OFFBOARD:
    return true;
default :
  return false;
}
}

public int read() throws IOException {
  int ch1=is.read();
  int ch2=is.read();
  if (ch2 < 0)   return -1;
  return (ch2 << 8) + ch1;
}

public static boolean isUrl(String resourceLocation){
  if (resourceLocation == null) {
    return false;
  }
  if (resourceLocation.startsWith(CLASSPATH_URL_PREFIX)) {
    return true;
  }
  try {
    new URL(resourceLocation);
    return true;
  }
 catch (  MalformedURLException ex) {
    return false;
  }
}

public static String encodeURL(String uri){
  CharBuffer cb=CharBuffer.allocate();
  for (int i=0; i < uri.length(); i++) {
    char ch=uri.charAt(i);
switch (ch) {
case '<':
case '>':
case ' ':
case '%':
case '\'':
case '\"':
      cb.append('%');
    cb.append(encodeHex(ch >> 4));
  cb.append(encodeHex(ch));
break;
default :
cb.append(ch);
}
}
return cb.close();
}

public void close() throws IOException {
  if (closed) {
    return;
  }
  if (queuedForCleanup) {
    return;
  }
  try {
    if (expected > count) {
      long nskip=expected - count;
      if (nskip <= available()) {
        do {
        }
 while ((nskip=(expected - count)) > 0L && skip(Math.min(nskip,available())) > 0L);
      }
 else       if (expected <= KeepAliveStreamCleaner.MAX_DATA_REMAINING && !hurried) {
        queueForCleanup(new KeepAliveCleanerEntry(this,hc));
      }
 else {
        hc.closeServer();
      }
    }
    if (!closed && !hurried && !queuedForCleanup) {
      hc.finished();
    }
  }
  finally {
    if (pi != null)     pi.finishTracking();
    if (!queuedForCleanup) {
      in=null;
      hc=null;
      closed=true;
    }
  }
}

public boolean isPublic(){
  return Modifier.isPublic(_method.getModifiers());
}

private Object[] initializeCallerHierarchyRoots(Map<String,Map<String,Set<JsonElement>>> callerMap){
  List<TreeElement<SourceMethodNode,SourceMethodNode>> roots=new ArrayList<TreeElement<SourceMethodNode,SourceMethodNode>>();
  CallerHierarchy callerHierarchy=(CallerHierarchy)fInput;
  SourceMethodNode rootNode=callerHierarchy.getRoot();
  Set<SourceMethodNode> processedNodes=new HashSet<SourceMethodNode>();
  TreeElement<SourceMethodNode,SourceMethodNode> root=initializeCallerHierarchy(rootNode,processedNodes,callerMap);
  return new Object[]{root};
}

private List<Entry> reduceWithDouglasPeuker(List<Entry> entries,double epsilon){
  if (epsilon <= 0 || entries.size() < 3) {
    return entries;
  }
  keep[0]=true;
  keep[entries.size() - 1]=true;
  algorithmDouglasPeucker(entries,epsilon,0,entries.size() - 1);
  List<Entry> reducedEntries=new ArrayList<Entry>();
  for (int i=0; i < entries.size(); i++) {
    if (keep[i]) {
      Entry curEntry=entries.get(i);
      reducedEntries.add(new Entry(curEntry.getVal(),curEntry.getXIndex()));
    }
  }
  return reducedEntries;
}

public static double[] computeLogAmplitudeSpectrum(final double[] signal){
  double[] spectrum=computeAmplitudeSpectrum(signal);
  for (int i=0; i < spectrum.length; i++) {
    spectrum[i]=Math.log(spectrum[i]);
  }
  return spectrum;
}

private Segment createMemorySegment(SegmentDescriptor descriptor){
  File segmentFile=SegmentFile.createSegmentFile(name,storage.directory(),descriptor.id(),descriptor.version());
  Buffer buffer=HeapBuffer.allocate(Math.min(DEFAULT_BUFFER_SIZE,descriptor.maxSegmentSize()),Integer.MAX_VALUE);
  descriptor.copyTo(buffer);
  Segment segment=new Segment(new SegmentFile(segmentFile),buffer.slice(),descriptor,createIndex(descriptor),new OffsetPredicate(),serializer.clone(),this);
  LOGGER.debug("Created segment: {}",segment);
  return segment;
}

public static void init(final AsyncContext context){
  final SecurityContext security=(SecurityContext)context.getAttribute(AsyncContext.SECURITY_CTX);
  final boolean forceSetSecurity=forceSetSecurityContext(context);
  if (forceSetSecurity) {
    SecurityContextHolder.setContext(security);
  }
  ctx.set(context);
}

private void cancelPreviousWebRtcNotifications(){
  Set<String> notificationIds=mSharedPreferences.getStringSet(WEBRTC_NOTIFICATION_IDS,null);
  if (notificationIds == null)   return;
  Iterator<String> iterator=notificationIds.iterator();
  while (iterator.hasNext()) {
    mNotificationManager.cancel(NOTIFICATION_NAMESPACE,Integer.parseInt(iterator.next()));
  }
  SharedPreferences.Editor sharedPreferenceEditor=mSharedPreferences.edit();
  sharedPreferenceEditor.remove(MediaCaptureNotificationService.WEBRTC_NOTIFICATION_IDS);
  sharedPreferenceEditor.apply();
}

public static final String readString(byte[] bytes,int offset,int length,String charset) throws IOException {
  return readString(bytes,0,bytes.length,Charset.forName(charset));
}

private TopologyUpdaterThread(){
  super(id + "-topology-update");
}

private void typeParametersRest(List<? extends TypeParameterTree> typeParameters,Indent plusIndent){
  builder.open(plusIndent);
  builder.breakOp();
  builder.open(ZERO);
  boolean first=true;
  for (  TypeParameterTree typeParameter : typeParameters) {
    if (!first) {
      token(",");
      builder.breakOp(" ");
    }
    scan(typeParameter,null);
    first=false;
  }
  token(">");
  builder.close();
  builder.close();
}

public void writeString(String str) throws IOException {
  if (str == null)   writeInt(0);
 else {
    if (useCompression && str.length() >= Compressor.MIN_SIZE_FOR_DEFLATION) {
      byte[] bytes=compressor.deflateString2ByteArray(str);
      writeInt(-bytes.length);
      outs.write(bytes,0,bytes.length);
      position+=bytes.length;
    }
 else {
      byte[] bytes=str.getBytes("UTF-8");
      writeInt(bytes.length);
      outs.write(bytes,0,bytes.length);
      position+=bytes.length;
    }
  }
}

public void dequeueSound(Uri uri){
  mAudioQueue.remove(new AudioQueueItem(uri,null));
}

public void removeBookmark(final CBookmark bookmark){
  Preconditions.checkNotNull(bookmark,"IE00385: Bookmark can not be null");
  Preconditions.checkArgument(m_bookmarks.remove(bookmark),"IE00386: Bookmark is not managed by this manager");
  for (  final IBookmarkManagerListener listener : m_listeners) {
    try {
      listener.removedBookmark(this,bookmark);
    }
 catch (    final Exception exception) {
      CUtilityFunctions.logException(exception);
    }
  }
}

public static KeyStore loadKeyStore(String type,File file,char[] password) throws Exception {
  KeyStore keyStore=KeyStore.getInstance(type);
  try (FileInputStream fis=new FileInputStream(file)){
    keyStore.load(fis,password);
  }
   return keyStore;
}

public void loop(double ellapsedMillis){
  for (  SpringSystemListener listener : mListeners) {
    listener.onBeforeIntegrate(this);
  }
  advance(ellapsedMillis);
  if (mActiveSprings.isEmpty()) {
    mIdle=true;
  }
  for (  SpringSystemListener listener : mListeners) {
    listener.onAfterIntegrate(this);
  }
  if (mIdle) {
    mSpringLooper.stop();
  }
}

private void updateRecordingTrack(Track track,long lastTrackPointId,boolean increaseNumberOfPoints){
  if (lastTrackPointId >= 0) {
    if (track.getStartId() < 0) {
      track.setStartId(lastTrackPointId);
    }
    track.setStopId(lastTrackPointId);
  }
  if (increaseNumberOfPoints) {
    track.setNumberOfPoints(track.getNumberOfPoints() + 1);
  }
  trackTripStatisticsUpdater.updateTime(System.currentTimeMillis());
  track.setTripStatistics(trackTripStatisticsUpdater.getTripStatistics());
  myTracksProviderUtils.updateTrack(track);
}

@Override public void requestStartupUpdates(String from,byte[] tableKey,int podIndex,long deltaTime,Result<Boolean> cont){
  if (log.isLoggable(Level.FINEST)) {
    log.finest("CacheRequestUpdates " + from + " shard="+ podIndex+ " delta="+ deltaTime);
  }
  long accessTime=CurrentTime.currentTime() + deltaTime;
  TablePod tablePod=_clientKraken.getTable(tableKey);
  if (tablePod == null) {
    if (log.isLoggable(Level.FINEST)) {
      log.finest(L.l("{0} is an unknown table key ({1})",Hex.toShortHex(tableKey),BartenderSystem.getCurrentSelfServer()));
    }
    cont.ok(true);
    return;
  }
  tablePod.getUpdatesFromLocal(podIndex,accessTime,cont);
}

private void refreshMuteVideoButton(){
  if ((null != mCall) && mCall.isVideo()) {
    mMuteLocalCameraView.setVisibility(View.VISIBLE);
    boolean isMuted=mCall.isVideoRecordingMuted();
    Log.d(LOG_TAG,"## refreshMuteVideoButton(): isMuted=" + isMuted);
    int iconId=isMuted ? R.drawable.ic_material_videocam_off_pink_red : R.drawable.ic_material_videocam_off_grey;
    mMuteLocalCameraView.setImageResource(iconId);
  }
 else {
    Log.d(LOG_TAG,"## refreshMuteVideoButton(): View.INVISIBLE");
    mMuteLocalCameraView.setVisibility(View.INVISIBLE);
  }
}

public boolean isAutoUpdateTrl(String TableName){
  if (super.isMultiLingualDocument())   return false;
  if (TableName == null)   return false;
  if (TableName.startsWith("AD") && getAD_Client_ID() == 0)   return false;
  return true;
}

private void createPreferenceControls(Composite parent,Set<PreferenceId> preferenceSet,InputDefinition inputDefinition){
  for (  PreferenceId preferenceIdEnum : preferenceSet) {
    IPreferenceControl preferenceControl=PreferenceControlFactory.createPreferenceControls(parent,toolkit,preferenceIdEnum,this,inputDefinition);
    if (null != preferenceControl) {
      preferenceControlList.add(preferenceControl);
    }
  }
}

@RequestMapping(value="/page",method=POST,produces=APPLICATION_JSON_VALUE) public ResponseEntity<PageResponse<ProjectDTO>> findAll(@RequestBody PageRequestByExample<ProjectDTO> prbe) throws URISyntaxException {
  PageResponse<ProjectDTO> pageResponse=projectDTOService.findAll(prbe);
  return new ResponseEntity<>(pageResponse,new HttpHeaders(),HttpStatus.OK);
}

public void testSHAProvider(){
  MessageDigest md=null;
  try {
    md=MessageDigest.getInstance("SHA");
  }
 catch (  NoSuchAlgorithmException e) {
    fail("unexpected exception: " + e);
  }
  byte[] bytes=new byte[]{1,1,1,1,1};
  try {
    md.update(bytes,-1,1);
    fail("No expected IndexOutOfBoundsException");
  }
 catch (  IndexOutOfBoundsException e) {
  }
  try {
    md.update(bytes,1,-1);
    fail("No expected IndexOutOfBoundsException");
  }
 catch (  IndexOutOfBoundsException e) {
  }
  try {
    md=MessageDigest.getInstance("SHA");
  }
 catch (  NoSuchAlgorithmException e) {
    fail("unexpected exception: " + e);
  }
  try {
    md.digest(bytes,0,-1);
    fail("No expected DigestException");
  }
 catch (  DigestException e) {
  }
  try {
    md.digest(bytes,-1,0);
    fail("No expected DigestException");
  }
 catch (  DigestException e) {
  }
  try {
    md=MessageDigest.getInstance("UnknownDigest");
    fail("expected NoSuchAlgorithmException");
  }
 catch (  NoSuchAlgorithmException e) {
  }
}

static private double fac2(int j){
  long i=j;
  if (j < 0)   i=Math.abs(j);
  double d=1.0;
  while (i > 1)   d*=i--;
  if (j < 0)   return -d;
 else   return d;
}

private static boolean isInputExhausted(StreamTokenizer input) throws ParseError {
  try {
    if (input.nextToken() == StreamTokenizer.TT_EOF) {
      return true;
    }
    input.pushBack();
    return false;
  }
 catch (  IOException e) {
    throw new ParseError(e.getMessage());
  }
}

public void clear(){
  m.clear();
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public static void writeUnsafe(PacketOutputStream out,InputStream is,long length,boolean noBackslashEscapes) throws IOException {
  out.writeUnsafe(QUOTE);
  byte[] buffer=new byte[1024];
  long bytesLeft=length;
  int len;
  for (; ; ) {
    int bytesToRead=(int)Math.min(bytesLeft,buffer.length);
    if (bytesToRead == 0) {
      break;
    }
    len=is.read(buffer,0,bytesToRead);
    if (len <= 0) {
      break;
    }
    writeBytesEscapedUnsafe(out,buffer,len,noBackslashEscapes);
    bytesLeft-=len;
  }
  out.writeUnsafe(QUOTE);
}

public SQLQuery(Class<T> type,String sqlExpression,QueryResultType queryResultType){
  this(sqlExpression,type.getName(),null,queryResultType,null);
}

public Builder retry(long duration,TimeUnit timeUnit){
  this.retry=timeUnit.toSeconds(duration);
  return this;
}

private RecordBuffer<R> tryTake(long elapsedWaiting){
  RecordBuffer<R> result=null;
  if (!retryQueue.isEmpty()) {
    result=retryQueue.poll();
  }
 else {
    result=neverPubQueue.poll();
  }
  if (result != null) {
    return onTakeSuccess(result,elapsedWaiting);
  }
 else   if (elapsedWaiting > 0) {
    return onTakeTimeout(elapsedWaiting);
  }
 else   return null;
}

public void testConstructorBytesNegative1(){
  byte aBytes[]={-12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  byte rBytes[]={-12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  BigInteger aNumber=new BigInteger(aBytes);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=aNumber.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,aNumber.signum());
}

private <T>List<T> toSortedList(T[] array,Comparator<T> comparator){
  List<T> list=new ArrayList<>();
  Collections.addAll(list,array);
  Collections.sort(list,comparator);
  return list;
}

private GeoMark reverse_geocode(final String text){
  for (  String t : text.split(" ")) {
    if (t.length() < 9)     continue;
    String[] c=t.split(",");
    if (c.length != 2)     continue;
    try {
      double lat=Double.parseDouble(c[0]);
      double lon=Double.parseDouble(c[1]);
      GeoMark mark=cityNear(lat,lon);
      if (mark == null)       continue;
      return mark;
    }
 catch (    NumberFormatException e) {
      continue;
    }
  }
  return null;
}

public ArrayList<PlaToupleInt> entrance_points(Polyline p_polyline){
  ArrayList<PlaToupleInt> result=new ArrayList<PlaToupleInt>(2 * p_polyline.plaline_len());
  int prev_intersection_line_no=-1;
  int prev_intersection_edge_no=-1;
  for (int line_no=1; line_no < p_polyline.plaline_len(-1); ++line_no) {
    PlaSegmentInt curr_line_seg=p_polyline.segment_get(line_no);
    int[] curr_intersections=curr_line_seg.border_intersections(this);
    for (int index=0; index < curr_intersections.length; ++index) {
      int edge_no=curr_intersections[index];
      if (line_no != prev_intersection_line_no || edge_no != prev_intersection_edge_no) {
        result.add(new PlaToupleInt(line_no,edge_no));
        prev_intersection_line_no=line_no;
        prev_intersection_edge_no=edge_no;
      }
    }
  }
  return result;
}

private void emitClear(String fieldName,StringBuilder builder){
  builder.append("    public void ");
  builder.append(getClearName(fieldName));
  builder.append("() {\n      ");
  builder.append(getEnsureName(fieldName));
  builder.append("();\n      ");
  builder.append(fieldName);
  builder.append(".clear();\n");
  builder.append("    }\n\n");
}

public static byte[] serializeAsByteArray(Object b) throws IOException {
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  ObjectOutputStream out=new ObjectOutputStream(bos);
  try {
    out.writeObject(b);
  }
  finally {
    out.close();
  }
  return bos.toByteArray();
}

public static void putIntLE(long addr,int val){
  if (UNALIGNED)   UNSAFE.putInt(addr,Integer.reverseBytes(val));
 else   putIntByByte(addr,val,false);
}

public FloatingActionButton createSubFAB(char icon,String text){
  FloatingActionButton sub=new FloatingActionButton(icon,text,2.8f);
  if (subMenu == null) {
    subMenu=new ArrayList<FloatingActionButton>();
  }
  subMenu.add(sub);
  return sub;
}

public String readValue(InputNode from) throws Exception {
  if (!stack.isRelevant(from)) {
    return null;
  }
  int length=text.length();
  if (length <= 0) {
    EventNode event=reader.peek();
    if (event.isEnd()) {
      if (stack.top() == from) {
        return null;
      }
 else {
        stack.pop();
      }
      event=reader.next();
    }
  }
  return readText(from);
}

private void fitImageToView(){
  Drawable drawable=getDrawable();
  if (drawable == null || drawable.getIntrinsicWidth() == 0 || drawable.getIntrinsicHeight() == 0) {
    return;
  }
  if (matrix == null || prevMatrix == null) {
    return;
  }
  int drawableWidth=drawable.getIntrinsicWidth();
  int drawableHeight=drawable.getIntrinsicHeight();
  float scaleX=(float)viewWidth / drawableWidth;
  float scaleY=(float)viewHeight / drawableHeight;
switch (mScaleType) {
case CENTER:
    scaleX=scaleY=1;
  break;
case CENTER_CROP:
scaleX=scaleY=Math.max(scaleX,scaleY);
break;
case CENTER_INSIDE:
scaleX=scaleY=Math.min(1,Math.min(scaleX,scaleY));
case FIT_CENTER:
scaleX=scaleY=Math.min(scaleX,scaleY);
break;
case FIT_XY:
break;
default :
throw new UnsupportedOperationException("TouchImageView does not support FIT_START or FIT_END");
}
float redundantXSpace=viewWidth - (scaleX * drawableWidth);
float redundantYSpace=viewHeight - (scaleY * drawableHeight);
matchViewWidth=viewWidth - redundantXSpace;
matchViewHeight=viewHeight - redundantYSpace;
if (!isZoomed() && !imageRenderedAtLeastOnce) {
matrix.setScale(scaleX,scaleY);
matrix.postTranslate(redundantXSpace / 2,redundantYSpace / 2);
normalizedScale=1;
}
 else {
if (prevMatchViewWidth == 0 || prevMatchViewHeight == 0) {
savePreviousImageValues();
}
prevMatrix.getValues(m);
m[Matrix.MSCALE_X]=matchViewWidth / drawableWidth * normalizedScale;
m[Matrix.MSCALE_Y]=matchViewHeight / drawableHeight * normalizedScale;
float transX=m[Matrix.MTRANS_X];
float transY=m[Matrix.MTRANS_Y];
float prevActualWidth=prevMatchViewWidth * normalizedScale;
float actualWidth=getImageWidth();
translateMatrixAfterRotate(Matrix.MTRANS_X,transX,prevActualWidth,actualWidth,prevViewWidth,viewWidth,drawableWidth);
float prevActualHeight=prevMatchViewHeight * normalizedScale;
float actualHeight=getImageHeight();
translateMatrixAfterRotate(Matrix.MTRANS_Y,transY,prevActualHeight,actualHeight,prevViewHeight,viewHeight,drawableHeight);
matrix.setValues(m);
}
fixTrans();
setImageMatrix(matrix);
}

private void dispatchOnThirdPartyRegistered(){
synchronized (this) {
    for (    ThirdPartyRegistrationListener listener : mThirdPartyRegistrationListeners) {
      try {
        listener.onThirdPartyRegistered();
      }
 catch (      Exception e) {
        Log.e(LOG_TAG,"onSessionsRegistered " + e.getLocalizedMessage());
      }
    }
    mThirdPartyRegistrationListeners.clear();
  }
}

void updateForDecoderTypeID(List<DecoderFile> pList){
  decoderBox.setModel(DecoderIndexFile.jComboBoxModelFromList(pList));
  decoderBox.insertItemAt("<from locomotive settings>",0);
  decoderBox.setSelectedIndex(1);
}

@Override public void actionPerformed(ActionEvent event){
switch (event.getActionCommand()) {
case NEW_ALIAS:
    addAlias(new Alias("New Alias"));
  break;
case COPY_ALIAS:
for (Alias alias : getSelectedAliases()) {
  addAlias(AliasFactory.copyOf(alias));
}
break;
case DELETE_ALIAS:
List<Alias> toDelete=getSelectedAliases();
if (toDelete != null && !toDelete.isEmpty()) {
String title=toDelete.size() == 1 ? "Delete Alias?" : "Delete Aliases?";
String prompt=toDelete.size() == 1 ? "Do you want to delete this alias?" : "Do you want to delete these " + toDelete.size() + " aliases?";
int choice=JOptionPane.showConfirmDialog(AliasController.this,prompt,title,JOptionPane.YES_NO_OPTION,JOptionPane.WARNING_MESSAGE);
if (choice == JOptionPane.YES_OPTION) {
for (Alias alias : toDelete) {
mAliasModel.removeAlias(alias);
}
}
}
break;
default :
break;
}
}

public boolean directionKeyIsPressed(){
  return pressedStateKeys.contains(KeyEvent.VK_UP) || pressedStateKeys.contains(KeyEvent.VK_DOWN) || pressedStateKeys.contains(KeyEvent.VK_LEFT)|| pressedStateKeys.contains(KeyEvent.VK_RIGHT)|| pressedStateKeys.contains(KeyEvent.VK_KP_LEFT)|| pressedStateKeys.contains(KeyEvent.VK_KP_RIGHT)|| pressedStateKeys.contains(KeyEvent.VK_KP_UP)|| pressedStateKeys.contains(KeyEvent.VK_KP_DOWN);
}

private void calculateCalibration(long difference,float currentMeasure,byte currentIndex){
  if (difference >= MedtronicConstants.TIME_15_MIN_IN_MS && difference < MedtronicConstants.TIME_20_MIN_IN_MS) {
    if (isSensorMeasureInRange(currentIndex,expectedSensorSortNumberForCalibration)) {
      isCalibrating=false;
      calibrationStatus=MedtronicConstants.CALIBRATED;
      calibrationIsigValue=currentMeasure;
      SharedPreferences.Editor editor=settings.edit();
      calibrationFactor=lastGlucometerValue / calibrationIsigValue;
      editor.remove("expectedSensorSortNumberForCalibration0");
      editor.remove("expectedSensorSortNumberForCalibration1");
      editor.putFloat("calibrationFactor",(float)calibrationFactor);
      editor.putInt("calibrationStatus",calibrationStatus);
      editor.commit();
    }
 else {
      if (calibrationStatus != MedtronicConstants.WITHOUT_ANY_CALIBRATION && currentIndex != expectedSensorSortNumber) {
        calibrationStatus=MedtronicConstants.LAST_CALIBRATION_FAILED_USING_PREVIOUS;
        isCalibrating=false;
      }
 else {
        calibrationStatus=MedtronicConstants.WITHOUT_ANY_CALIBRATION;
      }
      SharedPreferences.Editor editor=settings.edit();
      editor.remove("expectedSensorSortNumberForCalibration0");
      editor.remove("expectedSensorSortNumberForCalibration1");
      editor.commit();
    }
  }
 else   if (difference >= MedtronicConstants.TIME_20_MIN_IN_MS) {
    if (isSensorMeasureInRange(currentIndex,expectedSensorSortNumberForCalibration)) {
      calibrationStatus=MedtronicConstants.CALIBRATED_IN_15MIN;
      calibrationIsigValue=currentMeasure;
      SharedPreferences.Editor editor=settings.edit();
      calibrationFactor=lastGlucometerValue / calibrationIsigValue;
      editor.remove("expectedSensorSortNumberForCalibration0");
      editor.remove("expectedSensorSortNumberForCalibration1");
      editor.putFloat("calibrationFactor",(float)calibrationFactor);
      editor.putInt("calibrationStatus",calibrationStatus);
      editor.commit();
    }
 else {
      if (calibrationStatus != MedtronicConstants.WITHOUT_ANY_CALIBRATION)       calibrationStatus=MedtronicConstants.LAST_CALIBRATION_FAILED_USING_PREVIOUS;
 else {
        calibrationStatus=MedtronicConstants.WITHOUT_ANY_CALIBRATION;
      }
      SharedPreferences.Editor editor=settings.edit();
      editor.remove("expectedSensorSortNumberForCalibration0");
      editor.remove("expectedSensorSortNumberForCalibration1");
      editor.commit();
    }
    isCalibrating=false;
  }
 else {
    if (isCalibrating) {
      if (difference < MedtronicConstants.TIME_5_MIN_IN_MS) {
        calibrationStatus=MedtronicConstants.CALIBRATING;
      }
 else       if (difference >= MedtronicConstants.TIME_5_MIN_IN_MS && difference <= MedtronicConstants.TIME_15_MIN_IN_MS)       calibrationStatus=MedtronicConstants.CALIBRATING2;
 else       calibrationStatus=MedtronicConstants.CALIBRATING;
    }
 else {
      if (calibrationStatus != MedtronicConstants.WITHOUT_ANY_CALIBRATION)       calibrationStatus=MedtronicConstants.LAST_CALIBRATION_FAILED_USING_PREVIOUS;
 else {
        calibrationStatus=MedtronicConstants.WITHOUT_ANY_CALIBRATION;
      }
      SharedPreferences.Editor editor=settings.edit();
      editor.remove("expectedSensorSortNumberForCalibration0");
      editor.remove("expectedSensorSortNumberForCalibration1");
      editor.putInt("calibrationStatus",calibrationStatus);
      editor.commit();
    }
  }
}

public void addPosition(int offset,int length,String... ids){
  TextAttribute highlighting=ids.length == 1 ? attributeProvider.getAttribute(ids[0]) : attributeProvider.getMergedAttributes(ids);
  boolean isExisting=false;
  for (int i=0, n=removedPositions.size(); i < n; i++) {
    AttributedPosition position=removedPositions.get(i);
    if (position == null)     continue;
    if (position.isEqual(offset,length,highlighting)) {
      isExisting=true;
      removedPositions.set(i,null);
      removedPositionCount--;
      break;
    }
  }
  if (!isExisting) {
    AttributedPosition position=presenter.createHighlightedPosition(offset,length,highlighting);
    addedPositions.add(position);
  }
}

static void exportMaskUpdate(ExportMask exportMask,Map<URI,Integer> volumeMap,List<Initiator> initiators,List<URI> targets){
  if (volumeMap != null) {
    for (    URI volume : volumeMap.keySet()) {
      exportMask.addVolume(volume,volumeMap.get(volume));
    }
  }
  if (initiators != null) {
    for (    Initiator initiator : initiators) {
      exportMask.addInitiator(initiator);
    }
  }
  if (targets != null) {
    for (    URI target : targets) {
      exportMask.addTarget(target);
    }
  }
}

private void internalAddHead(final MessageReference ref){
  queueMemorySize.addAndGet(ref.getMessageMemoryEstimate());
  refAdded(ref);
  int priority=getPriority(ref);
  messageReferences.addHead(ref,priority);
}

private boolean createNew(MProduct product,MAcctSchema as){
  MCost dimension=MCost.getOrCreate(product,0,as,0,0,as.getM_CostType_ID(),m_ce.getM_CostElement_ID());
  if (dimension.is_new())   return dimension.save();
  return false;
}

@Override protected void step(){
  while (iter.hasNext()) {
    reg=(SvcReg)iter.next();
    if (reg.leaseExpiration > now)     return;
  }
  reg=null;
}

public Enumeration<String> packages(){
  return m_Cache.keys();
}

protected int size(){
  return document.length();
}

public TPS currentRow(){
  return currentRow(null);
}

public final void deleteAllEntries(){
  if (numEntries > 0) {
    Arrays.fill(entries,null);
    this.numEntries=0;
  }
}

public List<Map<String,Object>> query(final String indexName,final String q,final Operator operator,final int offset,final int count){
  assert count > 1;
  SearchRequestBuilder request=elasticsearchClient.prepareSearch(indexName).setQuery(QueryBuilders.multiMatchQuery(q,"_all").operator(operator).zeroTermsQuery(ZeroTermsQuery.ALL)).setFrom(offset).setSize(count);
  SearchResponse response=request.execute().actionGet();
  SearchHit[] hits=response.getHits().getHits();
  ArrayList<Map<String,Object>> result=new ArrayList<Map<String,Object>>();
  for (  SearchHit hit : hits) {
    Map<String,Object> map=hit.getSource();
    result.add(map);
  }
  return result;
}

public SortedSet<String> plugins(){
  SortedSet<String> r=new TreeSet<>();
  for (  NamePair p : items.keySet()) {
    r.add(p.pluginName);
  }
  return Collections.unmodifiableSortedSet(r);
}

public static void error(int WindowNo,Container c,String AD_Message){
  error(WindowNo,c,AD_Message,null);
}

public ReilFunction translate(final ITranslationEnvironment environment,final IBlockContainer<InstructionType> function) throws InternalTranslationException {
  return translate(environment,function,new ArrayList<ITranslationExtension<InstructionType>>());
}

public Name parse(String name) throws NamingException {
  Vector<String> comps=insStringToStringifiedComps(name);
  return new CNCompoundName(comps.elements());
}

public CSVDataSourceFactory(){
  super("csv",CSV_MIME_TYPES,CSV_FILE_ENDINGS,CSVFormatSpecificationWizardStep.CSV_FORMAT_SPECIFICATION_STEP_ID);
}

private void sendAck(String index,String message,GuacamoleStatus status){
  if (status != GuacamoleStatus.SUCCESS)   closeInterceptedStream(index);
  sendInstruction(new GuacamoleInstruction("ack",index,message,Integer.toString(status.getGuacamoleStatusCode())));
}

public static boolean isWindowsPlatform(){
  String os=System.getProperty("os.name");
  return (os != null && os.startsWith(WIN_ID));
}

static public int countRangesThatCollideZone(List<Bounds> ranges,List<Bounds> zoneRanges){
  int overallEOAA=0;
  Collections.sort(zoneRanges);
  for (  Bounds extractedBounds : ranges) {
    for (    Bounds expectedBounds : zoneRanges) {
      if (expectedBounds.start >= extractedBounds.end) {
        break;
      }
      if (extractedBounds.overlaps(expectedBounds)) {
        overallEOAA++;
        break;
      }
    }
  }
  return overallEOAA;
}

public static boolean timeStampChanged(String location){
synchronized (installLock) {
    if (fgHasChanged.contains(location)) {
      return true;
    }
    File file=new File(location);
    if (file.exists()) {
      if (fgInstallTimeMap == null) {
        readInstallInfo();
      }
      Long stamp=fgInstallTimeMap.get(location);
      long fstamp=file.lastModified();
      if (stamp != null) {
        if (stamp.longValue() == fstamp) {
          return false;
        }
      }
      stamp=new Long(fstamp);
      fgInstallTimeMap.put(location,stamp);
      writeInstallInfo();
      fgHasChanged.add(location);
      return true;
    }
  }
  return false;
}

public static Boolean[] valuesOf(boolean[] array){
  Boolean[] dest=new Boolean[array.length];
  for (int i=0; i < array.length; i++) {
    dest[i]=Boolean.valueOf(array[i]);
  }
  return dest;
}

public void addUpdateListener(AnimatorUpdateListener listener){
  if (mUpdateListeners == null) {
    mUpdateListeners=new ArrayList<AnimatorUpdateListener>();
  }
  mUpdateListeners.add(listener);
}

private void correctTooHigh(int childCount){
  int lastPosition=mFirstPosition + childCount - 1;
  if (lastPosition == mItemCount - 1 && childCount > 0) {
    final int lastBottom=getLowestChildBottom();
    final int end=(getBottom() - getTop()) - getListPaddingBottom();
    int bottomOffset=end - lastBottom;
    final int firstTop=getHighestChildTop();
    if (bottomOffset > 0 && (mFirstPosition > 0 || firstTop < getListPaddingTop())) {
      if (mFirstPosition == 0) {
        bottomOffset=Math.min(bottomOffset,getListPaddingTop() - firstTop);
      }
      offsetChildrenTopAndBottom(bottomOffset);
      if (mFirstPosition > 0) {
        int previousPosition=mFirstPosition - 1;
        fillUp(previousPosition,getNextChildUpsBottom(previousPosition));
        adjustViewsUpOrDown();
      }
    }
  }
}

public static boolean writeLine(String fileName,String value){
  BufferedWriter writer=null;
  try {
    writer=new BufferedWriter(new FileWriter(fileName));
    writer.write(value);
  }
 catch (  FileNotFoundException e) {
    Log.w(TAG,"No such file " + fileName + " for writing",e);
    return false;
  }
catch (  IOException e) {
    Log.e(TAG,"Could not write to file " + fileName,e);
    return false;
  }
 finally {
    try {
      if (writer != null) {
        writer.close();
      }
    }
 catch (    IOException e) {
    }
  }
  return true;
}

public void didRollback(){
synchronized (this) {
    if (pending != null) {
      pending.cancel(false);
      pending=null;
    }
    docsSinceCommit.set(0);
  }
}

@Override protected void calculateThumbLocation(){
  super.calculateThumbLocation();
  if (slider.getSnapToTicks()) {
    int upperValue=slider.getValue() + slider.getExtent();
    int snappedValue=upperValue;
    int majorTickSpacing=slider.getMajorTickSpacing();
    int minorTickSpacing=slider.getMinorTickSpacing();
    int tickSpacing=0;
    if (minorTickSpacing > 0) {
      tickSpacing=minorTickSpacing;
    }
 else     if (majorTickSpacing > 0) {
      tickSpacing=majorTickSpacing;
    }
    if (tickSpacing != 0) {
      if ((upperValue - slider.getMinimum()) % tickSpacing != 0) {
        float temp=(float)(upperValue - slider.getMinimum()) / (float)tickSpacing;
        int whichTick=Math.round(temp);
        snappedValue=slider.getMinimum() + (whichTick * tickSpacing);
      }
      if (snappedValue != upperValue) {
        slider.setExtent(snappedValue - slider.getValue());
      }
    }
  }
  if (slider.getOrientation() == JSlider.HORIZONTAL) {
    int upperPosition=xPositionForValue(slider.getValue() + slider.getExtent());
    upperThumbRect.x=upperPosition - (upperThumbRect.width / 2);
    upperThumbRect.y=trackRect.y;
  }
 else {
    int upperPosition=yPositionForValue(slider.getValue() + slider.getExtent());
    upperThumbRect.x=trackRect.x;
    upperThumbRect.y=upperPosition - (upperThumbRect.height / 2);
  }
}

public void compile(int throughPhase) throws CompilationFailedException {
  gotoPhase(Phases.INITIALIZATION);
  throughPhase=Math.min(throughPhase,Phases.ALL);
  while (throughPhase >= phase && phase <= Phases.ALL) {
    if (phase == Phases.SEMANTIC_ANALYSIS) {
      doPhaseOperation(resolve);
      if (dequeued())       continue;
    }
    processPhaseOperations(phase);
    processNewPhaseOperations(phase);
    if (progressCallback != null)     progressCallback.call(this,phase);
    completePhase();
    applyToSourceUnits(mark);
    if (dequeued())     continue;
    gotoPhase(phase + 1);
    if (phase == Phases.CLASS_GENERATION) {
      sortClasses();
    }
  }
  errorCollector.failIfErrors();
}

public String generateBearerToken(String email,String username,Map<String,String> payload){
  String token=tokenGenerator.generate();
  Map<String,String> payloadCopy=payload == null ? new HashMap() : new HashMap(payload);
  payloadCopy.put("email",email);
  payloadCopy.put("username",username);
  payloadCopy.put("creation.time",Long.toString(System.currentTimeMillis()));
  tokenMap.put(token,payloadCopy);
  return token;
}

public void endDocument(Augmentations augs) throws XNIException {
  try {
    if (fDocumentHandler != null) {
      fDocumentHandler.endDocument();
    }
    if (fContentHandler != null) {
      fContentHandler.endDocument();
    }
  }
 catch (  SAXException e) {
    throw new XNIException(e);
  }
}

public final ConnectionState newInput() throws IOException {
  if (in.hasRemaining()) {
    throw new RuntimeException("data remaining in input");
  }
  in.clear();
  int r=ch.read(in);
  if (r == -1)   throw new IOException("connection closed on client side");
  if (r == 0)   return ConnectionState.SELECTOR_WAIT_FOR_NEW_INPUT;
  in.flip();
  return newRequestChunk();
}

protected final void refreshLoadingViewsSize(){
  final int maximumPullScroll=(int)(getMaximumPullScroll() * 1.2f);
  int pLeft=getPaddingLeft();
  int pTop=getPaddingTop();
  int pRight=getPaddingRight();
  int pBottom=getPaddingBottom();
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    if (mMode.showHeaderLoadingLayout()) {
      mHeaderLayout.setWidth(maximumPullScroll);
      pLeft=-maximumPullScroll;
    }
 else {
      pLeft=0;
    }
  if (mMode.showFooterLoadingLayout()) {
    mFooterLayout.setWidth(maximumPullScroll);
    pRight=-maximumPullScroll;
  }
 else {
    pRight=0;
  }
break;
case VERTICAL:
if (mMode.showHeaderLoadingLayout()) {
mHeaderLayout.setHeight(maximumPullScroll);
pTop=-maximumPullScroll;
}
 else {
pTop=0;
}
if (mMode.showFooterLoadingLayout()) {
mFooterLayout.setHeight(maximumPullScroll);
pBottom=-maximumPullScroll;
}
 else {
pBottom=0;
}
break;
}
if (DEBUG) {
Log.d(LOG_TAG,String.format("Setting Padding. L: %d, T: %d, R: %d, B: %d",pLeft,pTop,pRight,pBottom));
}
setPadding(pLeft,pTop,pRight,pBottom);
}

public boolean canMoveForward(){
  return currentIndex >= 0 && currentIndex < (history.size() - 1);
}

public void clearCache(){
  DiskLruCache.clearCache(mCacheDir);
}

public void addNaturalJoinColumn(Column c){
  if (naturalJoinColumns == null) {
    naturalJoinColumns=New.arrayList();
  }
  naturalJoinColumns.add(c);
}

private RefactoringStatus checkCanCreateIntermediaryMethod() throws JavaModelException {
  List<ITypeBinding> parameterBindings=new ArrayList<ITypeBinding>();
  if (!isStaticTarget())   parameterBindings.add(fIntermediaryFirstParameterType);
  parameterBindings.addAll(Arrays.asList(fTargetMethodBinding.getParameterTypes()));
  return Checks.checkMethodInType(fIntermediaryTypeBinding,fIntermediaryMethodName,parameterBindings.toArray(new ITypeBinding[parameterBindings.size()]));
}

@Override public String generateToolTip(XYDataset data,int series,int item){
  return getToolTipText(series,item);
}

private Class<?> findClassNonDalvik(String name) throws ClassNotFoundException {
  String pathName=CLASS_PATH + name + ".class";
  File path=new File(pathName);
  RandomAccessFile raf;
  try {
    raf=new RandomAccessFile(path,"r");
  }
 catch (  FileNotFoundException fnfe) {
    throw new ClassNotFoundException("Not found: " + pathName);
  }
  byte[] fileData;
  try {
    fileData=new byte[(int)raf.length()];
    raf.readFully(fileData);
  }
 catch (  IOException ioe) {
    throw new ClassNotFoundException("Read error: " + pathName);
  }
 finally {
    try {
      raf.close();
    }
 catch (    IOException ioe) {
    }
  }
  try {
    return defineClass(name,fileData,0,fileData.length);
  }
 catch (  Throwable th) {
    throw new ClassNotFoundException("defineClass failed",th);
  }
}

public static void load(Class<?> parent){
  load(parent,ClassLoader.getSystemClassLoader());
}

public void removeChangeListener(ChangeListener cl){
  listeners.remove(cl);
}

@GuardedBy("evictionLock") void applyRead(Node<K,V> node){
  if (evictionDeque.contains(node)) {
    evictionDeque.moveToBack(node);
  }
}

private void flushWriteChunk(){
  if (writeChunk == null)   return;
  if (writeChunk.position() == 0)   return;
  if (!writeChunk.hasRemaining()) {
    bytesWritten+=writeChunk.position();
    writeChunk.flip();
    list.addLast(writeChunk);
    writeChunk=null;
    return;
  }
  bytesWritten+=writeChunk.position();
  ByteBuffer flushChunk=writeChunk;
  writeChunk=writeChunk.slice();
  writeChunk.order(order);
  flushChunk.flip();
  list.addLast(flushChunk);
  return;
}

public final double sin(){
  return Math.sin(this.radians);
}

public AxisLabelLayout(String group,int axis,ValuedRangeModel values){
  this(group,axis,values,null);
}

public double angle(IMovingAgent agent){
  return Geometric.angle(this.location,agent.getLocation());
}

@Override public boolean equals(Object obj){
  if (obj == this) {
    return true;
  }
  if (!(obj instanceof DefaultDrawingSupplier)) {
    return false;
  }
  DefaultDrawingSupplier that=(DefaultDrawingSupplier)obj;
  if (!Arrays.equals(this.paintSequence,that.paintSequence)) {
    return false;
  }
  if (this.paintIndex != that.paintIndex) {
    return false;
  }
  if (!Arrays.equals(this.outlinePaintSequence,that.outlinePaintSequence)) {
    return false;
  }
  if (this.outlinePaintIndex != that.outlinePaintIndex) {
    return false;
  }
  if (!Arrays.equals(this.strokeSequence,that.strokeSequence)) {
    return false;
  }
  if (this.strokeIndex != that.strokeIndex) {
    return false;
  }
  if (!Arrays.equals(this.outlineStrokeSequence,that.outlineStrokeSequence)) {
    return false;
  }
  if (this.outlineStrokeIndex != that.outlineStrokeIndex) {
    return false;
  }
  if (!equalShapes(this.shapeSequence,that.shapeSequence)) {
    return false;
  }
  if (this.shapeIndex != that.shapeIndex) {
    return false;
  }
  return true;
}

public static int brighter(int c){
  int r=red(c), g=green(c), b=blue(c);
  int i=(int)(1.0 / (1.0 - scale));
  if (r == 0 && g == 0 && b == 0) {
    return rgba(i,i,i,alpha(c));
  }
  if (r > 0 && r < i)   r=i;
  if (g > 0 && g < i)   g=i;
  if (b > 0 && b < i)   b=i;
  return rgba(Math.min(255,(int)(r / scale)),Math.min(255,(int)(g / scale)),Math.min(255,(int)(b / scale)),alpha(c));
}

public void addPropertyChangeListener(String propertyName,PropertyChangeListener in_pcl){
  pcSupport.addPropertyChangeListener(propertyName,in_pcl);
}

@Override protected void paintComponent(Graphics g){
  super.paintComponent(g);
  Graphics2D g2=(Graphics2D)g;
  if (shouldDraw) {
    drawDisplayListOn(g2);
  }
}

public void load(InputStream in) throws IOException {
  properties.load(in);
  dirty=false;
}

@Override public void onBindViewHolder(VH holder,int position){
  if (list.get(position).type == TYPE_ITEM) {
    onBindItemViewHolder(holder,position);
  }
 else   if (list.get(position).type == TYPE_HEADER) {
    onBindHeaderViewHolder(holder,position);
  }
}

public static Map<ComponentWrapper,CC> parseComponentConstraints(Map<ComponentWrapper,String> constrMap){
  HashMap<ComponentWrapper,CC> flowConstrMap=new HashMap<ComponentWrapper,CC>();
  for (  ComponentWrapper c : constrMap.keySet()) {
    flowConstrMap.put(c,parseComponentConstraint(constrMap.get(c)));
  }
  return flowConstrMap;
}

private void sendStageProgressPatch(TaskState state){
  ServiceUtils.logInfo(this,"Sending self-patch to stage %s",state.stage,state.subStage);
  TaskUtils.sendSelfPatch(this,buildPatch(state.stage,state.subStage,null));
}

public void testCommonPrefix(){
  String returned=m_Trie.getCommonPrefix();
  assertEquals("Common prefixes differ",0,returned.length());
  String expected="this is a";
  Trie t=buildTrie(new String[]{m_Data[0],m_Data[1]});
  returned=t.getCommonPrefix();
  assertEquals("Common prefixes differ",expected.length(),returned.length());
}

public String moveBack(){
  Check.isTrue(currentIndex > 0,"currentIndex > 0");
  currentIndex--;
  return history.get(currentIndex);
}

public static long hash64(final String text){
  final byte[] bytes=text.getBytes();
  return hash64(bytes,bytes.length);
}

public static void deleteCore(){
  log.info("###deleteCore");
  if (h != null) {
    h.close();
  }
  if (factoryProp == null) {
    System.clearProperty("solr.directoryFactory");
  }
  solrConfig=null;
  h=null;
  lrf=null;
  configString=schemaString=null;
}

public static boolean canTab(List constraints){
  for (Iterator iter=constraints.iterator(); iter.hasNext(); ) {
    DockConstraint dc=(DockConstraint)iter.next();
    if (!dc.canTab())     return false;
  }
  return true;
}

public ImdnParser parse() throws ParserConfigurationException, SAXException, ParseFailureException {
  try {
    SAXParserFactory factory=SAXParserFactory.newInstance();
    SAXParser parser=factory.newSAXParser();
    parser.parse(mInputSource,this);
    return this;
  }
 catch (  IOException e) {
    throw new ParseFailureException("Failed to parse input source!",e);
  }
}

static boolean chunkSet(InternalDistributedMember recipient,Set set,int CHUNK_SIZE_IN_BYTES,boolean includeValues,ObjectIntProcedure proc) throws IOException {
  Iterator it=set.iterator();
  boolean keepGoing=true;
  boolean sentLastChunk=false;
  final HeapDataOutputStream mos=new HeapDataOutputStream(InitialImageOperation.CHUNK_SIZE_IN_BYTES + 2048,recipient.getVersionObject());
  do {
    mos.reset();
    int avgItemSize=0;
    int itemCount=0;
    while ((mos.size() + avgItemSize) < InitialImageOperation.CHUNK_SIZE_IN_BYTES && it.hasNext()) {
      Object key=it.next();
      DataSerializer.writeObject(key,mos);
      itemCount++;
      avgItemSize=mos.size() / itemCount;
    }
    DataSerializer.writeObject((Object)null,mos);
    int lastMsg=it.hasNext() ? 0 : 1;
    keepGoing=proc.executeWith(mos,lastMsg);
    sentLastChunk=lastMsg == 1 && keepGoing;
  }
 while (keepGoing && it.hasNext());
  return sentLastChunk;
}

public static BigInteger toBigInteger(final Ed25519EncodedFieldElement encoded){
  return toBigInteger(encoded.getRaw());
}

public String escapeLDAPSearchFilter(String filter){
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < filter.length(); i++) {
    char curChar=filter.charAt(i);
switch (curChar) {
case '\\':
      sb.append("\\5c");
    break;
case '*':
  sb.append("\\2a");
break;
case '(':
sb.append("\\28");
break;
case ')':
sb.append("\\29");
break;
case '\u0000':
sb.append("\\00");
break;
default :
sb.append(curChar);
}
}
return sb.toString();
}

protected synchronized void save(){
  int retVal;
  File file;
  String text;
  FileWriter fwriter;
  BufferedWriter bwriter;
  retVal=m_FileChooser.showOpenDialog(this);
  if (retVal != MekaFileChooser.APPROVE_OPTION)   return;
  file=m_FileChooser.getSelectedFile();
  text=m_TextArea.getText();
  fwriter=null;
  bwriter=null;
  try {
    fwriter=new FileWriter(file);
    bwriter=new BufferedWriter(fwriter);
    bwriter.write(text);
    bwriter.newLine();
    bwriter.flush();
    log("Log successfully saved to: " + file);
  }
 catch (  Exception e) {
    handleException("Failed to save log output to: " + file,e);
  }
 finally {
    FileUtils.closeQuietly(bwriter);
    FileUtils.closeQuietly(fwriter);
  }
}

public EigenvalueDecomposition(double[][] A){
  n=A.length;
  V=new double[n][n];
  d=new double[n];
  e=new double[n];
  issymmetric=true;
  for (int j=0; (j < n) && issymmetric; j++) {
    for (int i=0; (i < n) && issymmetric; i++) {
      issymmetric=(A[i][j] == A[j][i]);
      if (Double.isNaN(A[i][j])) {
        throw new IllegalArgumentException("NaN in EigenvalueDecomposition!");
      }
      if (Double.isInfinite(A[i][j])) {
        throw new IllegalArgumentException("+-inf in EigenvalueDecomposition!");
      }
    }
  }
  if (issymmetric) {
    for (int i=0; i < n; i++) {
      System.arraycopy(A[i],0,V[i],0,n);
    }
    tred2();
    tql2();
  }
 else {
    H=new double[n][n];
    ort=new double[n];
    for (int j=0; j < n; j++) {
      for (int i=0; i < n; i++) {
        H[i][j]=A[i][j];
      }
    }
    orthes();
    hqr2();
  }
}

public SearchSourceBuilder fields(String... fields){
  if (fieldNames == null) {
    fieldNames=new ArrayList<>();
  }
  Collections.addAll(fieldNames,fields);
  return this;
}

public static StringBuilder formatTo(StringBuilder buf,boolean[] d,String sep){
  if (d == null) {
    return buf.append("null");
  }
  if (d.length == 0) {
    return buf;
  }
  buf.append(d[0]);
  for (int i=1; i < d.length; i++) {
    buf.append(sep);
    buf.append(format(d[i]));
  }
  return buf;
}

public String toCompleteString(){
  String ret="";
  if (!lines.isEmpty() && !Config.v().noSourceInfo) {
    for (    SourceLocationTag line : lines) {
      ret+="// " + line + "\n";
    }
  }
  ret+=toSignatureString();
  return ret;
}

@Override public void updateReceiptDetails(final Set<BillReceiptInfo> billReceipts){
  LOGGER.debug("updateReceiptDetails : Updating Receipt Details Started, billReceipts : " + billReceipts);
  final Boolean status=false;
  if (billReceipts != null)   super.updateReceiptDetails(billReceipts);
  LOGGER.debug("updateReceiptDetails : Updating Receipt Details Finished, status : " + status);
}

public static void removeMapEntries(Map map,Set set){
  if ((set != null) && !set.isEmpty()) {
    for (Iterator iter=set.iterator(); iter.hasNext(); ) {
      map.remove(iter.next());
    }
  }
}

public static void putFile(ServiceClient h,final Operation put,File f) throws IOException {
  final AsynchronousFileChannel ch=AsynchronousFileChannel.open(f.toPath(),StandardOpenOption.READ);
  AtomicInteger completionCount=new AtomicInteger(0);
  String contentType=FileUtils.getContentType(f.toURI());
  final boolean[] fileIsDone={false};
  putChunks(h,put,ch,contentType,f.length(),0,completionCount,fileIsDone);
}

protected StringBuilder processLine(String nextElement){
  StringBuilder sb=new StringBuilder(INITIAL_STRING_SIZE);
  for (int j=0; j < nextElement.length(); j++) {
    char nextChar=nextElement.charAt(j);
    processCharacter(sb,nextChar);
  }
  return sb;
}

public JavaRefactoringDescriptor(final String id,final String project,final String description,final String comment,final Map arguments,final int flags){
  super(id,project,description,comment,flags);
  fArguments=arguments;
  fArguments.put(ATTRIBUTE_VERSION,VALUE_VERSION_1_0);
}

private static SupportedGroup negotiateNamedCurve(ClientHello clientHello){
  SupportedGroup result=null;
  List<SupportedGroup> preferredGroups=SupportedGroup.getPreferredGroups();
  SupportedEllipticCurvesExtension extension=clientHello.getSupportedEllipticCurvesExtension();
  if (extension == null) {
    if (!preferredGroups.isEmpty()) {
      result=preferredGroups.get(0);
    }
  }
 else {
    for (    Integer preferredGroupId : extension.getSupportedGroupIds()) {
      SupportedGroup group=SupportedGroup.fromId(preferredGroupId);
      if (group != null && group.isUsable() && preferredGroups.contains(group)) {
        result=group;
        break;
      }
    }
  }
  return result;
}

public void zoom(){
  if (getSelectedRowKey() != null && getSelectedRowKey() > 0) {
    MQuery zoomQuery=new MQuery();
    String column=getKeyColumn();
    if (column.indexOf(".") > 0)     column=column.substring(column.indexOf(".") + 1);
    zoomQuery.addRestriction(column,MQuery.EQUAL,getSelectedRowKey());
    zoomQuery.setRecordCount(1);
    zoomQuery.setTableName(column.substring(0,column.length() - 3));
    AEnv.zoom(236,zoomQuery);
  }
}

public long avgRate(){
  long sum=0L;
  for (  Sample s : samples) {
    sum+=s.rate();
  }
  return (long)(sum / (long)samples.size());
}

@Override public synchronized void close() throws IOException {
  try {
    if (syncTask != null) {
      syncTask.cancel();
    }
    sync();
    unmapFile();
  }
  finally {
    super.close();
  }
}

public boolean mouseMoved(MouseEvent e){
  OMGraphic newSelectedGraphic;
  if (show_plot_ && graph != null) {
    newSelectedGraphic=graph.selectPoint(e.getX(),e.getY(),4.0f);
    if (newSelectedGraphic != null) {
      String infostring=(String)(newSelectedGraphic.getAttribute(OMGraphic.APP_OBJECT));
      if (infostring != null) {
        fireRequestInfoLine(infostring);
      }
    }
 else {
      fireRequestInfoLine("");
    }
    return true;
  }
 else {
    OMGraphicList list=getList();
    if (list != null) {
      newSelectedGraphic=list.selectClosest(e.getX(),e.getY(),4.0f);
      if (newSelectedGraphic != null && (selectedGraphic == null || newSelectedGraphic != selectedGraphic)) {
        Debug.message("basic","Making selection...");
        selectedGraphic=newSelectedGraphic;
        selectedGraphic.regenerate(getProjection());
        GLOBESite site=(GLOBESite)(newSelectedGraphic.getAttribute(OMGraphic.APP_OBJECT));
        if (site != null) {
          fireRequestInfoLine(site.getInfo());
        }
        repaint();
      }
 else       if (selectedGraphic != null && newSelectedGraphic == null) {
        Debug.message("basic","Clearing selection...");
        selectedGraphic.regenerate(getProjection());
        fireRequestInfoLine("");
        selectedGraphic=null;
        repaint();
      }
      return true;
    }
  }
  return false;
}

public void hidePopup(){
  showPending=false;
  if (popup != null) {
    popup.hide();
    popup=null;
  }
}

private float interpolate(){
  long currTime=System.currentTimeMillis();
  float elapsed=(currTime - startTime) / ZOOM_TIME;
  elapsed=Math.min(1f,elapsed);
  return interpolator.getInterpolation(elapsed);
}

private PointF isFlingingToDelete(DragSource source){
  if (mFlingToDeleteDropTarget == null)   return null;
  if (!source.supportsFlingToDelete())   return null;
  ViewConfiguration config=ViewConfiguration.get(mLauncher);
  mVelocityTracker.computeCurrentVelocity(1000,config.getScaledMaximumFlingVelocity());
  if (mVelocityTracker.getYVelocity() < mFlingToDeleteThresholdVelocity) {
    PointF vel=new PointF(mVelocityTracker.getXVelocity(),mVelocityTracker.getYVelocity());
    PointF upVec=new PointF(0f,-1f);
    float theta=(float)Math.acos(((vel.x * upVec.x) + (vel.y * upVec.y)) / (vel.length() * upVec.length()));
    if (theta <= Math.toRadians(MAX_FLING_DEGREES)) {
      return vel;
    }
  }
  return null;
}

public final RuntimeException processDoMethodInvokeException(Exception e,Object object,Object[] argumentArray){
  if (e instanceof RuntimeException)   return (RuntimeException)e;
  return MetaClassHelper.createExceptionText("failed to invoke method: ",this,object,argumentArray,e,true);
}

protected boolean buildSubfieldDefns(String pszSublist){
  if (pszSublist.charAt(0) == '*') {
    bRepeatingSubfields=true;
    pszSublist=pszSublist.substring(1);
  }
  Vector papszSubfieldNames=PropUtils.parseMarkers(pszSublist,"!");
  paoSubfieldDefns=new Vector();
  for (Iterator it=papszSubfieldNames.iterator(); it.hasNext(); ) {
    DDFSubfieldDefinition ddfsd=new DDFSubfieldDefinition();
    ddfsd.setName((String)it.next());
    paoSubfieldDefns.add(ddfsd);
  }
  return true;
}

public boolean isRunning(){
  return mRunning.get();
}

private static Map<String,Boolean> objectMethodsToGenerate(List<ExecutableElement> methods){
  Map<String,Boolean> vars=new TreeMap<String,Boolean>();
  vars.put("equals",false);
  vars.put("hashCode",false);
  vars.put("toString",false);
  for (  ExecutableElement method : methods) {
    if (isToStringOrEqualsOrHashCode(method)) {
      boolean canGenerate=method.getModifiers().contains(Modifier.ABSTRACT) || isJavaLangObject((TypeElement)method.getEnclosingElement());
      vars.put(method.getSimpleName().toString(),canGenerate);
    }
  }
  assert vars.size() == 3;
  return vars;
}

public void addEntryTime(double time){
  if (entryTimes == null) {
    return;
  }
  if (time < 0) {
    time=0.0;
  }
  entryTimes.add(Double.valueOf(time));
}

public void test_singleResourceLocking_serialized_waitsFor_highConcurrency() throws Exception {
  final Properties properties=new Properties();
  final int nthreads=100;
  final int ntasks=100;
  properties.setProperty(TestOptions.CORE_POOL_SIZE,"" + nthreads);
  properties.setProperty(TestOptions.NTASKS,"" + ntasks);
  properties.setProperty(TestOptions.NRESOURCES,"1");
  properties.setProperty(TestOptions.MIN_LOCKS,"1");
  properties.setProperty(TestOptions.MAX_LOCKS,"1");
  properties.setProperty(TestOptions.PREDECLARE_LOCKS,"false");
  properties.setProperty(TestOptions.SORT_LOCK_REQUESTS,"false");
  final Result result=doComparisonTest(properties);
  assertEquals("ndeadlock",0,Integer.parseInt(result.get("ndeadlock")));
  assertEquals("maxrunning",1,Integer.parseInt(result.get("maxrunning")));
  assertEquals("nsuccess",ntasks,Integer.parseInt(result.get("nsuccess")));
}

public final double NPV(){
  calculate();
  QL.require(!Double.isNaN(this.NPV),"NPV not provided");
  return NPV;
}

public ArrayRealVector(ArrayRealVector v1,RealVector v2){
  final int l1=v1.data.length;
  final int l2=v2.getDimension();
  data=new double[l1 + l2];
  System.arraycopy(v1.data,0,data,0,l1);
  for (int i=0; i < l2; ++i) {
    data[l1 + i]=v2.getEntry(i);
  }
}

public static Map<String,Object> deactivateContentAssoc(DispatchContext dctx,Map<String,? extends Object> rcontext){
  Map<String,Object> context=UtilMisc.makeMapWritable(rcontext);
  context.put("entityOperation","_UPDATE");
  List<String> targetOperationList=ContentWorker.prepTargetOperationList(context,"_UPDATE");
  List<String> contentPurposeList=ContentWorker.prepContentPurposeList(context);
  context.put("targetOperationList",targetOperationList);
  context.put("contentPurposeList",contentPurposeList);
  context.put("skipPermissionCheck",null);
  Map<String,Object> result=deactivateContentAssocMethod(dctx,context);
  return result;
}

public ByteBuffer flushAndReleaseBuffer() throws IOException {
  _lock.lock();
  try {
    _flushPending=true;
    while (_bufferUseCount != 0) {
      _flushReady.await();
    }
    _buffer.flip();
    if (_buffer.limit() != 0 && _modified) {
      if (_backingFile == null) {
        _backingFile=Files.createTempFile("tablebuffer",".tmp");
      }
      _log.debug("Flushing buffer for index {} to {} ({}/{} bytes)",_startIndex,_backingFile,_buffer.limit(),_blockSize);
      try (ByteChannel out=Files.newByteChannel(_backingFile,WRITE)){
        out.write(_buffer);
      }
     }
 else {
      _log.debug("Releasing unmodified buffer for index {}",_startIndex);
    }
    ByteBuffer oldBuffer=_buffer;
    _buffer=null;
    _loaded=false;
    return oldBuffer;
  }
 catch (  InterruptedException e) {
    throw Throwables.propagate(e);
  }
 finally {
    _flushPending=false;
    _flushComplete.signalAll();
    _lock.unlock();
  }
}

public static boolean isDirectlyGettingPowered(World world,Coord4D coord){
  for (  ForgeDirection side : ForgeDirection.VALID_DIRECTIONS) {
    Coord4D sideCoord=coord.getFromSide(side);
    if (sideCoord.exists(world)) {
      if (world.isBlockProvidingPowerTo(coord.xCoord,coord.yCoord,coord.zCoord,side.ordinal()) > 0) {
        return true;
      }
    }
  }
  return false;
}

public <T extends PropertyContainer>List<SearchMatch<T>> search(String query,Class<T> clazz){
  SearchResult result=doQuery(query,clazz);
  List<SearchMatch<T>> matches=buildSearchMatches(result);
  @SuppressWarnings("unchecked") Function<SearchMatch,T> resolver=(Function<SearchMatch,T>)(clazz.equals(Node.class) ? getNodeResolver() : getRelationshipResolver());
  return resolveMatchItems(matches,resolver);
}

private synchronized void enumerate(Hashtable<String,Object> h){
  if (defaults != null) {
    defaults.enumerate(h);
  }
  for (Enumeration<?> e=keys(); e.hasMoreElements(); ) {
    String key=(String)e.nextElement();
    h.put(key,get(key));
  }
}

public void updateQuantityCsv(ItemBean original,ItemBean itemToAdd,boolean add){
  BigDecimal originalQuantity=original.getQtyCsv();
  BigDecimal quantityToAdd=itemToAdd.getQtyCsv();
  BigDecimal finalQuantity=null;
  if (!add)   finalQuantity=originalQuantity.subtract(quantityToAdd);
 else   finalQuantity=originalQuantity.add(quantityToAdd);
  original.setQtyCsv(finalQuantity);
}

public static Number abs(Number a){
  if (isFloatingPoint(a)) {
    return Math.abs(a.doubleValue());
  }
 else {
    return Math.abs(a.longValue());
  }
}

public void removeSwipeListener(SwipeListener listener){
  if (mListeners == null) {
    return;
  }
  mListeners.remove(listener);
}

private void sendResponse(String status,String mime,Properties header,InputStream data){
  try {
    if (status == null)     throw new Error("sendResponse(): Status can't be null.");
    OutputStream out=mySocket.getOutputStream();
    PrintWriter pw=new PrintWriter(out);
    pw.print("HTTP/1.0 " + status + " \r\n");
    if (mime != null)     pw.print("Content-Type: " + mime + "\r\n");
    if (header == null || header.getProperty("Date") == null)     pw.print("Date: " + gmtFrmt.format(new Date()) + "\r\n");
    if (header != null) {
      Enumeration e=header.keys();
      while (e.hasMoreElements()) {
        String key=(String)e.nextElement();
        String value=header.getProperty(key);
        pw.print(key + ": " + value+ "\r\n");
      }
    }
    pw.print("\r\n");
    pw.flush();
    if (data != null) {
      int pending=data.available();
      byte[] buff=new byte[2048];
      while (pending > 0) {
        int read=data.read(buff,0,((pending > 2048) ? 2048 : pending));
        if (read <= 0)         break;
        out.write(buff,0,read);
        pending-=read;
      }
    }
    out.flush();
    out.close();
    if (data != null)     data.close();
  }
 catch (  IOException ioe) {
    try {
      mySocket.close();
    }
 catch (    Throwable t) {
    }
  }
}

public static InputStream toInputStream(CharSequence input,Charset encoding){
  return toInputStream(input.toString(),encoding);
}

public User(String id,String name,String email){
  this.id=id;
  this.email=email;
  this.name=name;
}

public static void forceDeleteOnExit(File file) throws IOException {
  if (file.isDirectory()) {
    deleteDirectoryOnExit(file);
  }
 else {
    file.deleteOnExit();
  }
}

@SuppressWarnings("unchecked") public Object[] toArray(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    Object[] a=new Object[count];
    int k=0;
    for (Node<E> p=first; p != null; p=p.next)     a[k++]=p.item;
    return a;
  }
  finally {
    lock.unlock();
  }
}

public static Asset createAssetFromBitmap(Bitmap bitmap){
  if (bitmap != null) {
    final ByteArrayOutputStream byteStream=new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG,100,byteStream);
    return Asset.createFromBytes(byteStream.toByteArray());
  }
  return null;
}

public boolean isIPValid(Session sess,String clientIP) throws SSOException {
  boolean check=false;
  try {
    InetAddress sessIPAddress=InetAddress.getByName(sess.getProperty("Host"));
    InetAddress clientIPAddress=InetAddress.getByName(clientIP);
    if (sessIPAddress.equals(clientIPAddress)) {
      check=true;
    }
  }
 catch (  Exception e) {
    if (debug.messageEnabled()) {
      debug.message("IP address check of Token Failed",e);
    }
  }
  return check;
}

@SuppressWarnings("unchecked") private static void handleMethodNode(GetStaticGraph staticUsageTree,ClassNode cn,MethodNode mn,int depth){
  InsnList instructions=mn.instructions;
  Iterator<AbstractInsnNode> iterator=instructions.iterator();
  while (iterator.hasNext()) {
    AbstractInsnNode insn=iterator.next();
    if (insn instanceof MethodInsnNode) {
      handleMethodInsnNode(staticUsageTree,cn,mn,(MethodInsnNode)insn,depth + 1);
    }
 else     if (insn instanceof FieldInsnNode) {
      handleFieldInsnNode(staticUsageTree,cn,mn,(FieldInsnNode)insn,depth + 1);
    }
  }
}

public boolean handleTouch(MotionEvent event){
  int action=event.getAction();
  if (mRenderer != null && action == MotionEvent.ACTION_MOVE) {
    if (oldX >= 0 || oldY >= 0) {
      float newX=event.getX(0);
      float newY=event.getY(0);
      if (event.getPointerCount() > 1 && (oldX2 >= 0 || oldY2 >= 0) && mRenderer.isZoomEnabled()) {
        float newX2=event.getX(1);
        float newY2=event.getY(1);
        float newDeltaX=Math.abs(newX - newX2);
        float newDeltaY=Math.abs(newY - newY2);
        float oldDeltaX=Math.abs(oldX - oldX2);
        float oldDeltaY=Math.abs(oldY - oldY2);
        float zoomRate=1;
        float tan1=Math.abs(newY - oldY) / Math.abs(newX - oldX);
        float tan2=Math.abs(newY2 - oldY2) / Math.abs(newX2 - oldX2);
        if (tan1 <= 0.25 && tan2 <= 0.25) {
          zoomRate=newDeltaX / oldDeltaX;
          applyZoom(zoomRate,Zoom.ZOOM_AXIS_X);
        }
 else         if (tan1 >= 3.73 && tan2 >= 3.73) {
          zoomRate=newDeltaY / oldDeltaY;
          applyZoom(zoomRate,Zoom.ZOOM_AXIS_Y);
        }
 else {
          if (Math.abs(newX - oldX) >= Math.abs(newY - oldY)) {
            zoomRate=newDeltaX / oldDeltaX;
          }
 else {
            zoomRate=newDeltaY / oldDeltaY;
          }
          applyZoom(zoomRate,Zoom.ZOOM_AXIS_XY);
        }
        oldX2=newX2;
        oldY2=newY2;
      }
 else       if (mRenderer.isPanEnabled()) {
        mPan.apply(oldX,oldY,newX,newY);
        oldX2=0;
        oldY2=0;
      }
      oldX=newX;
      oldY=newY;
      graphicalView.repaint();
      return true;
    }
  }
 else   if (action == MotionEvent.ACTION_DOWN) {
    oldX=event.getX(0);
    oldY=event.getY(0);
    if (mRenderer != null && mRenderer.isZoomEnabled() && zoomR.contains(oldX,oldY)) {
      if (oldX < zoomR.left + zoomR.width() / 3) {
        graphicalView.zoomIn();
      }
 else       if (oldX < zoomR.left + zoomR.width() * 2 / 3) {
        graphicalView.zoomOut();
      }
 else {
        graphicalView.zoomReset();
      }
      return true;
    }
  }
 else   if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_POINTER_UP) {
    oldX=0;
    oldY=0;
    oldX2=0;
    oldY2=0;
    if (action == MotionEvent.ACTION_POINTER_UP) {
      oldX=-1;
      oldY=-1;
    }
  }
  return !mRenderer.isClickEnabled();
}

public void addParameter(NameValuePair param) throws IllegalArgumentException {
  log.trace("enter PostMethod.addParameter(NameValuePair)");
  if (param == null) {
    throw new IllegalArgumentException("NameValuePair may not be null");
  }
  addParameter(param.getName(),param.getValue());
}

public static String readAsString(InputStream is) throws IOException {
  StringBuffer buf=new StringBuffer();
  byte[] b=new byte[8192];
  int nread=-1;
  while ((nread=is.read(b)) >= 0) {
    String s=new String(b,0,nread);
    buf.append(s);
  }
  return buf.toString();
}

private void readPolicies(XmlPullParser parser) throws IOException, XmlPullParserException {
  while (parser.next() != XmlPullParser.END_TAG) {
    if (parser.getEventType() != XmlPullParser.START_TAG) {
      continue;
    }
    String name=parser.getName();
    if (TAG_USER_RESTRICTION.equals(name)) {
      String userRestriction=parser.getAttributeValue(null,ATTRIBUTE_NAME);
      if (userRestriction != null) {
        mUserRestrictions.add(userRestriction);
      }
    }
 else     if (TAG_GLOBAL_SETTING.equals(name)) {
      String setting=parser.getAttributeValue(null,ATTRIBUTE_NAME);
      String value=parser.getAttributeValue(null,ATTRIBUTE_VALUE);
      if (setting != null && value != null) {
        mGlobalSettings.add(new GlobalSetting(setting,value));
      }
    }
 else     if (TAG_DISABLE_STATUS_BAR.equals(name)) {
      mDisableStatusBar=Boolean.parseBoolean(parser.getAttributeValue(null,ATTRIBUTE_VALUE));
    }
 else     if (TAG_DISABLE_KEYGUARD.equals(name)) {
      mDisableKeyguard=Boolean.parseBoolean(parser.getAttributeValue(null,ATTRIBUTE_VALUE));
    }
 else     if (TAG_DISABLE_CAMERA.equals(name)) {
      mDisableCamera=Boolean.parseBoolean(parser.getAttributeValue(null,ATTRIBUTE_VALUE));
    }
 else     if (TAG_DISABLE_SCREEN_CAPTURE.equals(name)) {
      mDisableScreenCapture=Boolean.parseBoolean(parser.getAttributeValue(null,ATTRIBUTE_VALUE));
    }
    skipCurrentTag(parser);
  }
}

public boolean readHeader(RandomAccessFile raf) throws IOException {
  StringBuffer id=new StringBuffer(4);
  for (int i=0; i < 4; i++) {
    int ch=raf.read();
    if (ch < 32) {
      String hx=Integer.toHexString(ch);
      if (hx.length() < 2) {
        hx="0" + hx;
      }
      return false;
    }
    id.append((char)ch);
  }
  _chunkID=id.toString();
  _size=AiffUtil.readUINT32(raf);
  return true;
}

private XYPlot initializePlot(){
  jmxChart=new YIntervalSeriesImproved("jmx value");
  YIntervalSeriesCollection yintervalseriescollection=new YIntervalSeriesCollection();
  yintervalseriescollection.addSeries(jmxChart);
  DeviationRenderer renderer=new DeviationRenderer(true,false);
  renderer.setBaseShapesVisible(true);
  renderer.setSeriesStroke(0,new BasicStroke(3.0f,BasicStroke.CAP_ROUND,BasicStroke.JOIN_ROUND));
  renderer.setSeriesFillPaint(0,new Color(255,200,200));
  renderer.setSeriesOutlineStroke(0,new BasicStroke(2.0f));
  renderer.setSeriesShape(0,new Ellipse2D.Double(-2.5,-2.5,5.0,5.0));
  renderer.setBaseToolTipGenerator(new StandardXYToolTipGenerator(StandardXYToolTipGenerator.DEFAULT_TOOL_TIP_FORMAT,DateFormat.getDateTimeInstance(),NumberFormat.getNumberInstance()));
  NumberAxis rangeAxis=plotDataSolver.getAxis();
  subplot=new XYPlot(yintervalseriescollection,null,rangeAxis,renderer);
  subplot.setAxisOffset(new RectangleInsets(5.0,5.0,5.0,5.0));
  subplot.setRangeAxisLocation(AxisLocation.TOP_OR_LEFT);
  subplot.setRangeCrosshairVisible(true);
  return subplot;
}

private boolean isFatalState(String sqlState){
  if (sqlState == null || sqlState.length() < 2) {
    return true;
  }
  for (  String FATAL_SQL_STATE_CLASS : FATAL_SQL_STATE_CLASSES) {
    if (sqlState.startsWith(FATAL_SQL_STATE_CLASS)) {
      return true;
    }
  }
  return false;
}

private void analyzeFile(File inputFile,Optional<CommonTokenStream> optTokenStream,Optional<TopLevelContext> optTree,Formatter formatter,Severity maxSeverity,ConstructLengths constructLengths,Set<Rules> enabledRules) throws CLIArgumentParserException {
  try {
    Printer printer=new Printer(inputFile,maxSeverity,formatter);
    if (optTokenStream.isPresent() && optTree.isPresent()) {
      CommonTokenStream tokenStream=optTokenStream.get();
      TopLevelContext tree=optTree.get();
      CommentExtractor commentExtractor=new CommentExtractor(tokenStream);
      ViolationSuppressor disableAnalysis=new ViolationSuppressor(printer,commentExtractor.getSingleLineComments(),commentExtractor.getMultilineComments());
      disableAnalysis.analyze();
      List<SwiftBaseListener> listeners=createListeners(enabledRules,printer,tokenStream,constructLengths,commentExtractor);
      walkParseTree(listeners,tree);
      try (FileListener fileListener=new FileListener(printer,inputFile,constructLengths,enabledRules)){
        fileListener.verify();
      }
       numErrors.addAndGet(printer.getNumErrorMessages());
      numWarnings.addAndGet(printer.getNumWarningMessages());
    }
 else {
      printer.setShouldPrintParseErrorMessage(true);
    }
    printersForAllFiles.add(printer);
  }
 catch (  IOException e) {
    handleIOException(e);
  }
catch (  CLIArgumentParserException e) {
    handleCLIException(e);
  }
}

@SuppressWarnings("unchecked") public static <ValueT>ValueT toObject(ByteBuffer bf) throws IOException, ClassNotFoundException {
  Object obj=null;
  InputStream is=null;
  ObjectInputStream ois=null;
  try {
    is=new ByteBufferBackedInputStream(bf);
    ois=new ObjectInputStream(is);
    obj=ois.readObject();
  }
  finally {
    if (is != null) {
      is.close();
    }
    if (ois != null) {
      ois.close();
    }
  }
  return (ValueT)obj;
}

static private void scanDeadlineQueue(final long nowNanos,final PriorityBlockingQueue<QueryDeadline> deadlineQueue){
  final List<QueryDeadline> c=new ArrayList<QueryDeadline>(DEADLINE_QUEUE_SCAN_SIZE);
  deadlineQueue.drainTo(c,DEADLINE_QUEUE_SCAN_SIZE);
  int ndropped=0, nrunning=0;
  for (  QueryDeadline x : c) {
    if (x.checkDeadline(nowNanos) != null) {
      deadlineQueue.add(x);
      nrunning++;
    }
 else {
      ndropped++;
    }
  }
  if (log.isInfoEnabled())   log.info("Scan: threadhold=" + DEADLINE_QUEUE_SCAN_SIZE + ", ndropped="+ ndropped+ ", nrunning="+ nrunning+ ", deadlineQueueSize="+ deadlineQueue.size());
}

public int compare(File file1,File file2){
  return caseSensitivity.checkCompareTo(file1.getName(),file2.getName());
}

@Override public String lastString(){
  return Integer.toString(lastint);
}

public boolean removeItemContent(String uid){
  if (!users.isEmpty()) {
    return removeContent(uid,users);
  }
 else   if (!reports.isEmpty()) {
    return removeContent(uid,reports);
  }
 else {
    return removeContent(uid,resources);
  }
}

public void close(){
  if (dialog != null) {
    dialog.setVisible(false);
    dialog.dispose();
    dialog=null;
    pane=null;
    myBar=null;
  }
}

public static void expandOrdinal(String rawNumberString,WordRelation wordRelation){
  String numberString=Utilities.deleteChar(rawNumberString,',');
  expandNumber(numberString,wordRelation);
  Item lastItem=wordRelation.getTail();
  if (lastItem != null) {
    FeatureSet featureSet=lastItem.getFeatures();
    String lastNumber=featureSet.getString("name");
    String ordinal=findMatchInArray(lastNumber,digit2num,ord2num);
    if (ordinal == null) {
      ordinal=findMatchInArray(lastNumber,digit2teen,ord2teen);
    }
    if (ordinal == null) {
      ordinal=findMatchInArray(lastNumber,digit2enty,ord2enty);
    }
    if (lastNumber.equals("hundred")) {
      ordinal="hundredth";
    }
 else     if (lastNumber.equals("thousand")) {
      ordinal="thousandth";
    }
 else     if (lastNumber.equals("billion")) {
      ordinal="billionth";
    }
    if (ordinal != null) {
      wordRelation.setLastWord(ordinal);
    }
  }
}

private void checkBoundedTypeParameter(Method method){
  TypeVariable<Method> typeParameter=getTypeParameter(method);
  assertEquals("T",typeParameter.getName());
  assertEquals(method,typeParameter.getGenericDeclaration());
  Type[] bounds=typeParameter.getBounds();
  assertLenghtOne(bounds);
  Type bound=bounds[0];
  assertEquals(BoundedWildcardsGenericMethods.class,bound);
}

public void registerSensor(Sensor s,int i){
  if ((i < 0) || (i > (inputBits[nodeType] - 1)) || (i > MAXSENSORS)) {
    log.error("Unexpected sensor ordinal in registerSensor: " + Integer.toString(i + 1));
    return;
  }
  hasActiveSensors=true;
  if (sensorArray[i] == null) {
    sensorArray[i]=s;
    if (lastUsedSensor < i) {
      lastUsedSensor=i;
    }
  }
 else {
    log.warn("multiple registration of same sensor: CS" + Integer.toString((getNodeAddress() * SerialSensorManager.SENSORSPERNODE) + i + 1));
  }
}

public boolean hasOrganisationUnits(){
  List<DimensionalItemObject> dimOpts=getDimensionOptions(ORGUNIT_DIM_ID);
  List<DimensionalItemObject> filterOpts=getFilterOptions(ORGUNIT_DIM_ID);
  return !dimOpts.isEmpty() || !filterOpts.isEmpty();
}

protected void fixupBlocks(byte[] bytes2){
  byte[] bytes=bytes2;
  for (Iterator enumerator=blocks.iterator(); enumerator.hasNext(); ) {
    int[] info=(int[])enumerator.next();
    int codeSize=info[1];
    int offset=info[0];
    byte[] sizeBytes=OutStream.sintTo2Bytes(codeSize);
    bytes[offset]=sizeBytes[0];
    bytes[offset + 1]=sizeBytes[1];
  }
}

protected double negativeLogLikelihood(double[][] dataYs,double[][] probs){
  double logLikelihood=0;
  for (int i=0; i < dataYs.length; i++) {
    for (int j=0; j < m_numClasses; j++) {
      if (dataYs[i][j] == 1.0) {
        logLikelihood-=Math.log(probs[i][j]);
      }
    }
  }
  return logLikelihood;
}

public static boolean validSystemNameConfig(String systemName,char type,AcelaSystemConnectionMemo memo){
  if (!validSystemNameFormat(systemName,type,memo.getSystemPrefix())) {
    return false;
  }
  AcelaNode node=getNodeFromSystemName(systemName,memo);
  if (node == null) {
    return false;
  }
  int bit=getBitFromSystemName(systemName);
  if ((type == 'T') || (type == 'L')) {
    if ((bit < MINOUTPUTADDRESS) || (bit > MAXOUTPUTADDRESS)) {
      return false;
    }
  }
 else   if (type == 'S') {
    if ((bit < MINSENSORADDRESS) || (bit > MAXSENSORADDRESS)) {
      return false;
    }
  }
 else {
    log.error("Invalid type specification in validSystemNameConfig call");
    return false;
  }
  return true;
}

public void readEncryptionObject(final PdfObject encyptionObj,final PdfFileReader pdfFileReader) throws PdfSecurityException {
  stringsEncoded=false;
  isMetaDataEncypted=true;
  StmFObj=null;
  StrFObj=null;
  isAES=false;
  if (!isInitialised) {
    isInitialised=true;
    SetSecurity.init();
  }
  if (SetSecurity.useBouncyCastle) {
    decryptionMethods=new BouncyCastleDecryption();
  }
 else {
    decryptionMethods=new JCADecryption();
  }
  final int v=encyptionObj.getInt(PdfDictionary.V);
  final PdfArrayIterator filters=encyptionObj.getMixedArray(PdfDictionary.Filter);
  int firstValue=PdfDictionary.Standard;
  if (filters != null && filters.hasMoreTokens()) {
    firstValue=filters.getNextValueAsConstant(false);
  }
  if (v == 3) {
    throw new PdfSecurityException("Unsupported Custom Adobe Encryption method");
  }
 else   if ((v > 4) && (firstValue != PdfDictionary.Standard)) {
    throw new PdfSecurityException("Unsupported Encryption method");
  }
  final int newLength=encyptionObj.getInt(PdfDictionary.Length) >> 3;
  if (newLength != -1) {
    this.keyLength=newLength;
  }
  rev=encyptionObj.getInt(PdfDictionary.R);
  P=encyptionObj.getInt(PdfDictionary.P);
  O=encyptionObj.getTextStreamValueAsByte(PdfDictionary.O);
  U=encyptionObj.getTextStreamValueAsByte(PdfDictionary.U);
  OE=encyptionObj.getTextStreamValueAsByte(PdfDictionary.OE);
  UE=encyptionObj.getTextStreamValueAsByte(PdfDictionary.UE);
  Perms=encyptionObj.getTextStreamValueAsByte(PdfDictionary.Perms);
  if (v >= 4) {
    isAES=true;
    String CFkey;
    final PdfObject CF=encyptionObj.getDictionary(PdfDictionary.CF);
    if (v == 4) {
      isMetaDataEncypted=encyptionObj.getBoolean(PdfDictionary.EncryptMetadata);
    }
    isAESIdentity=false;
    String key=encyptionObj.getName(PdfDictionary.StrF);
    if (key != null) {
      isAESIdentity=key.equals("Identity");
      stringsEncoded=true;
      final PdfKeyPairsIterator keyPairs=CF.getKeyPairsIterator();
      while (keyPairs.hasMorePairs()) {
        CFkey=keyPairs.getNextKeyAsString();
        if (CFkey.equals(key)) {
          StrFObj=PdfObjectFactory.getPDFObjectObjectFromRefOrDirect(new EncryptionObject(encyptionObj.getObjectRefAsString()),pdfFileReader,keyPairs.getNextValueAsBytes(),PdfDictionary.CF);
        }
        keyPairs.nextPair();
      }
    }
    key=encyptionObj.getName(PdfDictionary.StmF);
    if (key != null) {
      isAESIdentity=key.equals("Identity");
      final PdfKeyPairsIterator keyPairs=CF.getKeyPairsIterator();
      while (keyPairs.hasMorePairs()) {
        CFkey=keyPairs.getNextKeyAsString();
        if (CFkey.equals(key)) {
          StmFObj=PdfObjectFactory.getPDFObjectObjectFromRefOrDirect(new EncryptionObject(encyptionObj.getObjectRefAsString()),pdfFileReader,keyPairs.getNextValueAsBytes(),PdfDictionary.CF);
        }
        keyPairs.nextPair();
      }
    }
  }
  isEncrypted=true;
  isFileViewable=false;
  LogWriter.writeLog("File has encryption settings");
  if (firstValue == PdfDictionary.Standard) {
    try {
      verifyAccess();
    }
 catch (    final PdfSecurityException e) {
      LogWriter.writeLog("File requires password " + e);
    }
  }
 else   if (certificate != null) {
    isFileViewable=true;
    isPasswordSupplied=true;
    extractionIsAllowed=true;
    passwordStatus=PDFflags.VALID_OWNER_PASSWORD;
  }
  if (rev == 5) {
    Perms=v5Decrypt(Perms,encryptionKey);
    isMetaDataEncypted=Perms[8] == 'T';
    P=(Perms[0] & 255) | ((Perms[1] & 255) << 8) | ((Perms[2] & 255) << 16)| ((Perms[2] & 255) << 24);
  }
}

public void addMember(String playerName){
  openInvites.remove(playerName);
  membersAndLastSeen.put(playerName,Long.valueOf(System.currentTimeMillis()));
  if (leader == null) {
    leader=playerName;
  }
  sendGroupChangeEvent();
}

public BubbleXYItemLabelGenerator(){
  this(DEFAULT_FORMAT_STRING,NumberFormat.getNumberInstance(),NumberFormat.getNumberInstance(),NumberFormat.getNumberInstance());
}

void addNodes(List<Node> newNodes,boolean atBeginning){
  if (atBeginning) {
    if ((nodes.size() > 0) && nodes.get(0) == newNodes.get(newNodes.size() - 1)) {
      Log.i(DEBUG_TAG,"addNodes attempt to add same node");
      if (newNodes.size() > 1) {
        Log.i(DEBUG_TAG,"retrying addNodes");
        newNodes.remove(newNodes.size() - 1);
        addNodes(newNodes,atBeginning);
      }
      return;
    }
    nodes.addAll(0,newNodes);
  }
 else {
    if ((nodes.size() > 0) && newNodes.get(0) == nodes.get(nodes.size() - 1)) {
      Log.i(DEBUG_TAG,"addNodes attempt to add same node");
      if (newNodes.size() > 1) {
        Log.i(DEBUG_TAG,"retrying addNodes");
        newNodes.remove(0);
        addNodes(newNodes,atBeginning);
      }
      return;
    }
    nodes.addAll(newNodes);
  }
}

public synchronized Boolean updateAVClientByStreamId(String streamId,RoomClient rcm){
  try {
    RoomClient rclUsual=getClientByPublicSID(rcm.getPublicSID(),false);
    if (rclUsual != null) {
      rclUsual.setBroadCastID(rcm.getBroadCastID());
      rclUsual.setAvsettings(rcm.getAvsettings());
      rclUsual.setVHeight(rcm.getVHeight());
      rclUsual.setVWidth(rcm.getVWidth());
      rclUsual.setVX(rcm.getVX());
      rclUsual.setVY(rcm.getVY());
      if (clientList.containsKey(rclUsual.getStreamid())) {
        clientList.put(rclUsual.getStreamid(),rclUsual);
      }
 else {
        log.debug("Tried to update a non existing Client " + rclUsual.getStreamid());
      }
    }
    updateClientByStreamId(streamId,rcm);
  }
 catch (  Exception err) {
    log.error("[updateAVClientByStreamId]",err);
  }
  return null;
}

public void addColor(int color){
  if (mColors == null)   mColors=new ArrayList<Integer>();
  mColors.add(color);
}

private void clampStartingPosition(){
  final float cX=mBounds.exactCenterX();
  final float cY=mBounds.exactCenterY();
  final float dX=mStartingX - cX;
  final float dY=mStartingY - cY;
  final float r=mTargetRadius;
  if (dX * dX + dY * dY > r * r) {
    final double angle=Math.atan2(dY,dX);
    mClampedStartingX=cX + (float)(Math.cos(angle) * r);
    mClampedStartingY=cY + (float)(Math.sin(angle) * r);
  }
 else {
    mClampedStartingX=mStartingX;
    mClampedStartingY=mStartingY;
  }
}

public Criteria createCriteria(){
  Criteria criteria=createCriteriaInternal();
  if (oredCriteria.size() == 0) {
    oredCriteria.add(criteria);
  }
  return criteria;
}

public boolean isEmpty(){
  if (lastBatch != null) {
    if (!lastBatch.isEmpty()) {
      return false;
    }
  }
  return currentBatch.isEmpty();
}

@SuppressWarnings("unchecked") public DummyData(int cols,int rows,Comparable<?> value){
  value.getClass();
  this.cols=cols;
  this.rows=rows;
  this.value=value;
  Class<? extends Comparable<?>>[] types=new Class[cols];
  Arrays.fill(types,value.getClass());
  setColumnTypes(types);
}

public Object clone() throws CloneNotSupportedException {
  NodeVector clone=(NodeVector)super.clone();
  if ((null != this.m_map) && (this.m_map == clone.m_map)) {
    clone.m_map=new int[this.m_map.length];
    System.arraycopy(this.m_map,0,clone.m_map,0,this.m_map.length);
  }
  return clone;
}

public boolean matchWithPattern(String pattern){
  if (TextUtils.isEmpty(pattern)) {
    mCurrentPattern="";
    mUpperCasePattern="";
    mLowerCasePattern="";
  }
  if (TextUtils.isEmpty(mDisplayName)) {
    return false;
  }
  if (TextUtils.isEmpty(mUpperCaseDisplayName)) {
    mUpperCaseDisplayName=mDisplayName.toLowerCase();
    mLowerCaseDisplayName=mDisplayName.toUpperCase();
  }
  if (!pattern.equals(mCurrentPattern)) {
    mCurrentPattern=pattern;
    mUpperCasePattern=pattern.toUpperCase();
    mLowerCasePattern=pattern.toLowerCase();
  }
  return (mUpperCaseDisplayName.indexOf(mUpperCasePattern) >= 0) || (mLowerCaseDisplayName.indexOf(mUpperCasePattern) >= 0);
}

public boolean equals(Object obj){
  if (obj == this) {
    return true;
  }
  if (obj instanceof AnnotationMember) {
    AnnotationMember that=(AnnotationMember)obj;
    if (name.equals(that.name) && tag == that.tag) {
      if (tag == ARRAY) {
        return equalArrayValue(that.value);
      }
 else       if (tag == ERROR) {
        return false;
      }
 else {
        return value.equals(that.value);
      }
    }
  }
  return false;
}

public int hleJpegDecodeYCbCr(BufferedImage bufferedImage,TPointer yCbCrBuffer,int yCbCrBufferSize,int dhtMode){
  int width=bufferedImage.getWidth();
  int height=bufferedImage.getHeight();
  int sizeY=width * height;
  int sizeCb=sizeY >> 2;
  int addressY=yCbCrBuffer.getAddress();
  int addressCb=addressY + sizeY;
  int addressCr=addressCb + sizeCb;
  if (log.isDebugEnabled()) {
    log.debug(String.format("hleJpegDecodeYCbCr 0x%08X, 0x%08X, 0x%08X",addressY,addressCb,addressCr));
  }
  int[] bufferCb=new int[sizeCb];
  int[] bufferCr=new int[sizeCb];
  IMemoryWriter imageWriterY=MemoryWriter.getMemoryWriter(addressY,sizeY,1);
  for (int y=0; y < height; y++) {
    int indexCb=(y >> 1) * (width >> 1);
    for (int x=0; x < width; x+=2, indexCb++) {
      int argb0=bufferedImage.getRGB(x,y);
      int yCbCr0=colorARGBToYCbCr(argb0);
      int argb1=bufferedImage.getRGB(x + 1,y);
      int yCbCr1=colorARGBToYCbCr(argb1);
      imageWriterY.writeNext(getY(yCbCr0));
      imageWriterY.writeNext(getY(yCbCr1));
      bufferCb[indexCb]+=getCb(yCbCr0);
      bufferCb[indexCb]+=getCb(yCbCr1);
      bufferCr[indexCb]+=getCr(yCbCr0);
      bufferCr[indexCb]+=getCr(yCbCr1);
    }
  }
  imageWriterY.flush();
  IMemoryWriter imageWriterCb=MemoryWriter.getMemoryWriter(addressCb,sizeCb,1);
  IMemoryWriter imageWriterCr=MemoryWriter.getMemoryWriter(addressCr,sizeCb,1);
  for (int i=0; i < sizeCb; i++) {
    imageWriterCb.writeNext(bufferCb[i] >> 2);
    imageWriterCr.writeNext(bufferCr[i] >> 2);
  }
  imageWriterCb.flush();
  imageWriterCr.flush();
  return getWidthHeight(width,height);
}

public static Range iterateZBounds(XYZDataset dataset,boolean includeInterval){
  double minimum=Double.POSITIVE_INFINITY;
  double maximum=Double.NEGATIVE_INFINITY;
  int seriesCount=dataset.getSeriesCount();
  for (int series=0; series < seriesCount; series++) {
    int itemCount=dataset.getItemCount(series);
    for (int item=0; item < itemCount; item++) {
      double value=dataset.getZValue(series,item);
      if (!Double.isNaN(value)) {
        minimum=Math.min(minimum,value);
        maximum=Math.max(maximum,value);
      }
    }
  }
  if (minimum == Double.POSITIVE_INFINITY) {
    return null;
  }
 else {
    return new Range(minimum,maximum);
  }
}

public void removeViewFromFadeList(View view){
  if (mFadeViewList != null && view != null) {
    mFadeViewList.remove(view);
  }
}

void addIndifferentAlgorithm(String algorithm){
  indifferentAlgorithms.add(algorithm);
}

public UnionIterator(Iterable<? extends E>... args){
  this(Arrays.asList(args));
}

public static String mangleNativeMethod(String owner,String name,String desc){
  StringBuilder sb=new StringBuilder();
  sb.append("Java_");
  sb.append(mangleNativeString(owner));
  sb.append("_");
  sb.append(mangleNativeString(name));
  if (desc != null) {
    sb.append("__");
    sb.append(mangleNativeString(desc.substring(1,desc.lastIndexOf(')'))));
  }
  return sb.toString();
}

public String readLine() throws IOException {
  boolean gotCR=false, gotLF=false;
  pos=0;
  lineBuf=new StringBuffer();
  while (!gotLF) {
    int c=is.read();
    if (c == -1) {
      return null;
    }
    if (gotCR) {
      if (c == LF) {
        gotLF=true;
      }
 else {
        gotCR=false;
        consume(CR);
        consume(c);
      }
    }
 else {
      if (c == CR) {
        gotCR=true;
      }
 else {
        consume(c);
      }
    }
  }
  lineBuf.append(buf,0,pos);
  return new String(lineBuf);
}

public LobbyClient login(){
  if (!m_serverProperties.isServerAvailable()) {
    JOptionPane.showMessageDialog(m_parent,m_serverProperties.serverErrorMessage,"Could not connect to server",JOptionPane.ERROR_MESSAGE);
    return null;
  }
  if (m_serverProperties.port == -1) {
    if (ClientFileSystemHelper.areWeOldExtraJar()) {
      JOptionPane.showMessageDialog(m_parent,"<html>Could not find lobby server for this version of TripleA, <br>Please make sure you are using the latest version: " + UrlConstants.LATEST_GAME_DOWNLOAD_WEBSITE + "<br /><br />This is because you are using an old engine that is kept for backwards compatibility. "+ "<br /><b>In order to load your Old savegames in the New lobby, you must First join the lobby with the latest engine, Then host a game, Then load the old savegame!</b></html>","Could not connect to server",JOptionPane.ERROR_MESSAGE);
    }
 else {
      JOptionPane.showMessageDialog(m_parent,"<html>Could not find lobby server for this version of TripleA, <br>Please make sure you are using the latest version: " + UrlConstants.LATEST_GAME_DOWNLOAD_WEBSITE + "</html>","Could not connect to server",JOptionPane.ERROR_MESSAGE);
    }
    return null;
  }
  return loginToServer();
}

@Override public boolean eIsSet(int featureID){
switch (featureID) {
case FunctionblockPackage.PARAM__MULTIPLICITY:
    return multiplicity != MULTIPLICITY_EDEFAULT;
case FunctionblockPackage.PARAM__NAME:
  return NAME_EDEFAULT == null ? name != null : !NAME_EDEFAULT.equals(name);
case FunctionblockPackage.PARAM__DESCRIPTION:
return DESCRIPTION_EDEFAULT == null ? description != null : !DESCRIPTION_EDEFAULT.equals(description);
}
return super.eIsSet(featureID);
}

protected Node popNode(Stack<Node> stack,Class<? extends Node> cls,String uri){
  Node top=stack.isEmpty() ? null : stack.peek();
  if (top != null) {
    if (nodeMatches(top,cls,uri)) {
      Node node=stack.pop();
      poppedNodes.push(node);
      return node;
    }
 else {
      for (int i=stack.size() - 2; i >= 0; i--) {
        if (nodeMatches(stack.get(i),cls,uri)) {
          Node node=stack.remove(i);
          poppedNodes.push(node);
          return node;
        }
      }
    }
  }
  return null;
}

static String pathToCookiePath(String path){
  if (path == null) {
    return "/";
  }
  int lastSlash=path.lastIndexOf('/');
  return path.substring(0,lastSlash + 1);
}

public static double[][] computeWeightMatrix(int bpp){
  final int dim=bpp * bpp * bpp;
  final double[][] m=new double[dim][dim];
  final double max=3. * (bpp - 1.);
  for (int x=0; x < dim; x++) {
    final int rx=(x / bpp) / bpp;
    final int gx=(x / bpp) % bpp;
    final int bx=x % bpp;
    for (int y=x; y < dim; y++) {
      final int ry=(y / bpp) / bpp;
      final int gy=(y / bpp) % bpp;
      final int by=y % bpp;
      final double dr=Math.abs(rx - ry);
      final double dg=Math.abs(gx - gy);
      final double db=Math.abs(bx - by);
      final double val=1 - (dr + dg + db) / max;
      m[x][y]=m[y][x]=val;
    }
  }
  return m;
}

public boolean moveEntry(User user,Entry entry,String direction,boolean isAdmin,Errors errors){
  if (direction == null) {
    Errors.add(errors,errorMessages.errorDirectionIsNull());
    return false;
  }
  if (entry == null) {
    Errors.add(errors,errorMessages.errorEntryIsNull());
    return false;
  }
  if (!canUserModifyEntry(user,entry,isAdmin)) {
    Errors.add(errors,errorMessages.errorUserIsNotEntitledToMoveTheEntry());
    return false;
  }
  final String parentId=entry.getParentId();
  String parentFirstChildId=null;
  String parentLastChildId=null;
  final Entry parent=getEntryById(parentId);
  if (parent == null) {
    Errors.add(errors,errorMessages.errorTheEntryHadNoParentSoItCouldNotBeMoved());
    return false;
  }
  parentFirstChildId=parent.getFirstChildId();
  parentLastChildId=parent.getLastChildId();
  if (direction.equals("before")) {
    final String previousId=entry.getPreviousSiblingId();
    if (previousId == null) {
      Errors.add(errors,errorMessages.errorThereIsNoEntryToMoveBefore());
      return false;
    }
    final Entry previous=getEntryById(previousId);
    final String previousPreviousId=previous.getPreviousSiblingId();
    if (previousPreviousId != null) {
      final Entry previousPrevious=getEntryById(previousPreviousId);
      if (previousPrevious != null) {
        previousPrevious.setNextSiblingId(entry.getId());
      }
    }
    final String nextId=entry.getNextSiblingId();
    if (nextId != null) {
      final Entry next=getEntryById(nextId);
      if (next != null) {
        next.setPreviousSiblingId(previousId);
      }
    }
    entry.setPreviousSiblingId(previousPreviousId);
    entry.setNextSiblingId(previousId);
    previous.setPreviousSiblingId(entry.getId());
    previous.setNextSiblingId(nextId);
    if (parentFirstChildId != null && previousId != null && parentFirstChildId.equals(previousId)) {
      parent.setFirstChildId(entry.getId());
    }
    if (parentLastChildId != null && parentLastChildId.equals(entry.getId())) {
      parent.setLastChildId(previousId);
    }
  }
 else   if (direction.equals("after")) {
    final String nextId=entry.getNextSiblingId();
    if (nextId == null) {
      Errors.add(errors,errorMessages.errorThereIsNoEntryToMoveAfter());
      return false;
    }
    final Entry next=getEntryById(nextId);
    final String nextNextId=next.getNextSiblingId();
    if (nextNextId != null) {
      final Entry nextNext=getEntryById(nextNextId);
      if (nextNext != null) {
        nextNext.setPreviousSiblingId(entry.getId());
      }
    }
    final String previousId=entry.getPreviousSiblingId();
    if (previousId != null) {
      final Entry previous=getEntryById(previousId);
      if (previousId != null) {
        previous.setNextSiblingId(nextId);
      }
    }
    entry.setPreviousSiblingId(nextId);
    entry.setNextSiblingId(nextNextId);
    next.setPreviousSiblingId(previousId);
    next.setNextSiblingId(entry.getId());
    if (parentFirstChildId != null && parentFirstChildId.equals(entry.getId())) {
      parent.setFirstChildId(nextId);
    }
    if (parentLastChildId != null && nextId != null && parentLastChildId.equals(nextId)) {
      parent.setLastChildId(entry.getId());
    }
  }
 else   if (direction.equals("left")) {
    final String parentParentId=parent.getParentId();
    if (parentParentId == null) {
      Errors.add(errors,errorMessages.errorThereIsNoParentOfTheParent());
      return false;
    }
    snipOutEntry(entry,parent,true);
    insertEntryAfter(entry,parent,true);
  }
 else   if (direction.equals("right")) {
    final String previousId=entry.getPreviousSiblingId();
    if (previousId == null) {
      Errors.add(errors,errorMessages.errorThereIsNoPreviousEntryToUseAsAParent());
      return false;
    }
    snipOutEntry(entry,parent,true);
    final Entry previous=getEntryById(previousId);
    final String previousLastChildId=previous.getLastChildId();
    if (previousLastChildId != null) {
      final Entry previousLastChild=getEntryById(previousLastChildId);
      previousLastChild.setNextSiblingId(entry.getId());
    }
    entry.setPreviousSiblingId(previousLastChildId);
    entry.setNextSiblingId(null);
    previous.setLastChildId(entry.getId());
    if (!previous.hasFirstChildId()) {
      previous.setFirstChildId(entry.getId());
    }
    previous.setLastChildId(entry.getId());
    entry.setParentId(previous.getId());
  }
 else {
    Errors.add(errors,errorMessages.errorTheDirectionIsInvalid());
    return false;
  }
  return true;
}

private static boolean isGnome(){
  return System.getenv("GNOME_DESKTOP_SESSION_ID") != null;
}

protected SizeRequirements calculateMajorAxisRequirements(int axis,SizeRequirements r){
  SizeRequirements req=super.calculateMajorAxisRequirements(axis,r);
  req.maximum=Integer.MAX_VALUE;
  return req;
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(4);
  newVector.addElement(new Option("\tSets if binary attributes are to be coded as nominal ones.","N",0,"-N"));
  newVector.addElement(new Option("\tFor each nominal value a new attribute is created, \n" + "\tnot only if there are more than 2 values.","A",0,"-A"));
  newVector.addElement(new Option("\tSpecifies list of columns to act on. First and last are \n" + "\tvalid indexes.\n" + "\t(default: first-last)","R",1,"-R <col1,col2-col4,...>"));
  newVector.addElement(new Option("\tInvert matching sense of column indexes.","V",0,"-V"));
  return newVector.elements();
}

public void addNodesInDocOrder(DTMIterator iterator,XPathContext support){
  if (!m_mutable)   throw new RuntimeException(XSLMessages.createXPATHMessage(XPATHErrorResources.ER_NODESETDTM_NOT_MUTABLE,null));
  int node;
  while (DTM.NULL != (node=iterator.nextNode())) {
    addNodeInDocOrder(node,support);
  }
}

public Map<String,List<RevisionFile>> currentRevisionFiles();

protected static Pair<String,String> rorRegister(final long offset,final ITranslationEnvironment environment,final List<ReilInstruction> instructions,final String registerNodeValue1,final String registerNodeValue2){
  final String shifterOperand=environment.getNextVariableString();
  final String shifterCarryOut=environment.getNextVariableString();
  final String tmpRsFour=environment.getNextVariableString();
  final String tmpRsFourNegative=environment.getNextVariableString();
  final String tmpRsSeven=environment.getNextVariableString();
  final String isZeroConditionFour=environment.getNextVariableString();
  final String isNotZeroConditionFour=environment.getNextVariableString();
  final String isZeroConditionSeven=environment.getNextVariableString();
  final String tmpVar1=environment.getNextVariableString();
  final String tmpVar2=environment.getNextVariableString();
  final String tmpVar3=environment.getNextVariableString();
  final String tmpVar4=environment.getNextVariableString();
  final String tmpVar5=environment.getNextVariableString();
  final String tmpVar6=environment.getNextVariableString();
  final String tmpVar7=environment.getNextVariableString();
  final String tmpVar8=environment.getNextVariableString();
  final String shifterCarryOutTmp1=environment.getNextVariableString();
  final String shifterCarryOutTmp2=environment.getNextVariableString();
  final String shifterCarryOutTmp3=environment.getNextVariableString();
  final String shifterCarryOutTmp4=environment.getNextVariableString();
  long baseOffset=offset;
  instructions.add(ReilHelpers.createAnd(baseOffset++,dWordSize,registerNodeValue2,dWordSize,String.valueOf(0xFFL),dWordSize,tmpRsSeven));
  instructions.add(ReilHelpers.createBisz(baseOffset++,dWordSize,tmpRsSeven,byteSize,isZeroConditionSeven));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dWordSize,tmpRsSeven,dWordSize,String.valueOf(0x1FL),dWordSize,tmpRsFour));
  instructions.add(ReilHelpers.createBisz(baseOffset++,dWordSize,tmpRsFour,byteSize,isZeroConditionFour));
  instructions.add(ReilHelpers.createBisz(baseOffset++,byteSize,isZeroConditionFour,byteSize,isNotZeroConditionFour));
  instructions.add(ReilHelpers.createSub(baseOffset++,dWordSize,zeroSet,dWordSize,tmpRsFour,dWordSize,tmpRsFourNegative));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dWordSize,registerNodeValue1,dWordSize,tmpRsFourNegative,dWordSize,tmpVar1));
  instructions.add(ReilHelpers.createSub(baseOffset++,dWordSize,String.valueOf(32L),dWordSize,tmpRsFour,dWordSize,tmpVar2));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dWordSize,registerNodeValue1,dWordSize,tmpVar2,dWordSize,tmpVar3));
  instructions.add(ReilHelpers.createOr(baseOffset++,dWordSize,tmpVar1,dWordSize,tmpVar3,dWordSize,tmpVar4));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dWordSize,tmpVar4,dWordSize,bitMaskAllBitsSet,dWordSize,shifterOperand));
  instructions.add(ReilHelpers.createAnd(baseOffset++,byteSize,"C",byteSize,isZeroConditionSeven,byteSize,shifterCarryOutTmp1));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dWordSize,registerNodeValue1,dWordSize,minusThirtyOneSet,byteSize,tmpVar5));
  instructions.add(ReilHelpers.createAnd(baseOffset++,byteSize,tmpVar5,byteSize,isZeroConditionFour,byteSize,shifterCarryOutTmp2));
  instructions.add(ReilHelpers.createSub(baseOffset++,dWordSize,tmpRsFour,byteSize,oneSet,dWordSize,tmpVar6));
  instructions.add(ReilHelpers.createSub(baseOffset++,dWordSize,zeroSet,dWordSize,tmpVar6,dWordSize,tmpVar7));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dWordSize,registerNodeValue1,dWordSize,tmpVar7,dWordSize,tmpVar8));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dWordSize,tmpVar8,byteSize,isNotZeroConditionFour,byteSize,shifterCarryOutTmp3));
  instructions.add(ReilHelpers.createOr(baseOffset++,byteSize,shifterCarryOutTmp1,byteSize,shifterCarryOutTmp2,byteSize,shifterCarryOutTmp4));
  instructions.add(ReilHelpers.createOr(baseOffset++,byteSize,shifterCarryOutTmp3,byteSize,shifterCarryOutTmp4,byteSize,shifterCarryOut));
  return new Pair<String,String>(shifterOperand,shifterCarryOut);
}

public static byte[] readFully(InputStream in) throws IOException {
  try {
    return readFullyNoClose(in);
  }
  finally {
    in.close();
  }
}

public void endSubreport(String subreport){
  if (subreport.isEmpty()) {
    LOG.error(String.format("Tried to end non-existing report \"%s\"",subreport));
    return;
  }
  String topSubreport=subreports.peek();
  if (topSubreport.equals(subreport)) {
    subreports.pop();
    addLogEntry(new SubreportEndEntry(subreport));
    return;
  }
  LOG.error(String.format("Tried to end non-existing report \"%s\"",subreport));
}

public static double dnormLog(double x,double mean,double sd){
  if (sd <= 0.0)   throw new IllegalArgumentException("standard deviation <= 0.0");
  return -Math.log(sd) + dnormLog((x - mean) / sd);
}

public static void delete(File f){
  delete_(f,false);
}

public BufferedHeader(final CharArrayBuffer buffer) throws ParseException {
  super();
  if (buffer == null) {
    throw new IllegalArgumentException("Char array buffer may not be null");
  }
  int colon=buffer.indexOf(':');
  if (colon == -1) {
    throw new ParseException("Invalid header: " + buffer.toString());
  }
  String s=buffer.substringTrimmed(0,colon);
  if (s.length() == 0) {
    throw new ParseException("Invalid header: " + buffer.toString());
  }
  this.buffer=buffer;
  this.name=s;
  this.valuePos=colon + 1;
}

public boolean extendsEntity(Class<?> entityDefinition){
  return entityDefinition.getAnnotation(ExtendsEntity.class) != null;
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getFooterSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if (mState == State.PULL_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

public void parse(InputSource input) throws IOException, SAXException {
  if (parsing) {
    throw new SAXException("Parser is already in use");
  }
  setupParser();
  parsing=true;
  try {
    parser.parse(input);
  }
  finally {
    parsing=false;
  }
  parsing=false;
}

private void release0(long ptr,long size,AtomicLong cnt){
  if (ptr != 0) {
    if (SAFE_RELEASE)     fill(ptr,size,(byte)0xAB);
    GridUnsafe.freeMemory(ptr);
    cnt.addAndGet(-size);
    if (lsnr != null)     lsnr.onEvent(RELEASE);
  }
}

public void addServices(List<ServiceDefinition> services) throws Exception {
  ensurePathExists();
  Set<String> remainingDescriptors=new HashSet<>(dataManager.getChildren(ZK_SERVICE_DEFINITION_PATH));
  for (  ServiceDefinition service : services) {
    LOG.debug(String.format("Adding Service %s into ZK",service.serviceId));
    String path=getServiceDefinitionPath(service.serviceId);
    try {
      Stat before=dataManager.checkExists(path);
      dataManager.putData(path,service);
      Stat after=dataManager.checkExists(path);
      nodeUpdated(path,before,after);
      remainingDescriptors.remove(service.serviceId);
    }
 catch (    Exception e) {
      LOG.error(String.format("Failed to add Service %s into ZK, path: %s",service.serviceId,path),e);
      throw e;
    }
  }
  for (  String descriptorName : remainingDescriptors) {
    LOG.info(String.format("Removing old Service %s from ZK",descriptorName));
    dataManager.removeNode(ZK_SERVICE_DEFINITION_PATH + "/" + descriptorName);
  }
}

protected void readProps(){
  int count;
  Properties props;
  int i;
  String itemStr;
  T item;
  m_IgnoreChanges=true;
  props=loadProps();
  count=Integer.parseInt(props.getProperty(expand(getCountKey()),"0"));
  m_RecentItems.clear();
  for (i=count - 1; i >= 0; i--) {
    itemStr=props.getProperty(getItemPrefix() + i,"");
    if (itemStr.length() > 0) {
      item=fromString(itemStr);
      if (check(item))       addRecentItem(item);
    }
  }
  m_IgnoreChanges=false;
}

public FormIndex stepIndexOut(FormIndex index){
  if (index.isTerminal()) {
    return null;
  }
 else {
    return new FormIndex(stepIndexOut(index.getNextLevel()),index);
  }
}

protected double kernelHelperLP(int n,char[] s,int endIndexS,char[] t,int endIndexT,int remainingMatchLength){
  if (n == 0) {
    return getReturnValue(n);
  }
  if (Math.min(endIndexS + 1,endIndexT + 1) < n) {
    ;
    return getReturnValue(n);
  }
  if (remainingMatchLength < 2 * n) {
    return getReturnValue(n);
  }
  int adr=0;
  if (m_useRecursionCache) {
    adr=m_multX * n + m_multY * endIndexS + m_multZ * endIndexT + m_multZZ * remainingMatchLength;
    if (cachekh2K[adr % maxCache] == adr + 1) {
      return cachekh2[adr % maxCache];
    }
  }
  int rml=0;
  double result=0;
  for (int iS=(endIndexS - remainingMatchLength); iS <= endIndexS; iS++) {
    result*=m_lambda;
    result+=kernelHelper2LP(n,s,iS,t,endIndexT,rml++);
  }
  if (m_useRecursionCache && endIndexS >= 0 && endIndexT >= 0 && n >= 0) {
    cachekhK[adr % maxCache]=adr + 1;
    cachekh[adr % maxCache]=result;
  }
  return result;
}

@Override protected synchronized void onMeasure(int widthMeasureSpec,int heightMeasureSpec){
  int width=200;
  if (MeasureSpec.UNSPECIFIED != MeasureSpec.getMode(widthMeasureSpec)) {
    width=MeasureSpec.getSize(widthMeasureSpec);
  }
  int height=thumbImage.getHeight();
  if (MeasureSpec.UNSPECIFIED != MeasureSpec.getMode(heightMeasureSpec)) {
    height=Math.min(height,MeasureSpec.getSize(heightMeasureSpec));
  }
  setMeasuredDimension(width,height);
}

public void start(){
  calculatePositionArray();
  setPreferredSize(calculatePreferredSize());
  offset=getWidth();
  timer=new Timer(interval,this);
  timer.start();
}

public static void writePlainFile(String filePath,byte[] content) throws IOException {
  FileOutputStream fileOuputStream=new FileOutputStream(filePath);
  fileOuputStream.write(content);
  fileOuputStream.close();
}

public void transform(AffineTransform at){
  clip[2]=clip[0];
  clip[3]=clip[7];
  clip[4]=clip[6];
  clip[5]=clip[1];
  at.transform(clip,0,clip,0,4);
  double xmin=clip[0], ymin=clip[1];
  double xmax=clip[6], ymax=clip[7];
  for (int i=0; i < 7; i+=2) {
    if (clip[i] < xmin)     xmin=clip[i];
    if (clip[i] > xmax)     xmax=clip[i];
    if (clip[i + 1] < ymin)     ymin=clip[i + 1];
    if (clip[i + 1] > ymax)     ymax=clip[i + 1];
  }
  clip[0]=xmin;
  clip[1]=ymin;
  clip[6]=xmax;
  clip[7]=ymax;
}

@SuppressWarnings("deprecation") public boolean isPortableFilename(String filename){
  return (filename.startsWith(PROGRAM) || filename.startsWith(HOME) || filename.startsWith(PREFERENCES)|| filename.startsWith(SCRIPTS)|| filename.startsWith(PROFILE)|| filename.startsWith(SETTINGS)|| filename.startsWith(FILE)|| filename.startsWith(RESOURCE));
}

void configureBasicAuth(HttpServerRequest serverRequest,HttpClientRequest httpClientRequest){
  final String authorization=serverRequest.getParam("authorization");
  if (authorization != null) {
    httpClientRequest.putHeader(HttpHeaders.AUTHORIZATION,authorization);
  }
}

public void rejectedExecution(Runnable r,ThreadPoolExecutor e){
  if (!e.isShutdown()) {
    r.run();
  }
}

public boolean nodeChange(CatalogTreeNode node,String name){
  CatalogTreeNode cNode=getCorrespondingNode(node);
  cNode.setLeaves(node.getLeaves());
  AbstractCatalogTree tree=(AbstractCatalogTree)getCorespondingModel(node);
  cNode.setUserObject(name);
  node.setUserObject(name);
  tree.nodeChanged(cNode);
  _model.nodeChanged(node);
  updatePanel();
  ImageIndexEditor.indexChanged(true);
  updatePanel();
  return true;
}

public static Enumeration all(){
  return _all.elements();
}

public boolean waitUntilEmpty(long timeout) throws InterruptedException {
  if (!notifyLock.tryLock(timeout,TimeUnit.MILLISECONDS)) {
    return false;
  }
  try {
    return pending.isEmpty() || notifyCondition.await(timeout,TimeUnit.MILLISECONDS);
  }
  finally {
    notifyLock.unlock();
  }
}

public static Set<JavaClassAndMethod> resolveMethodCallTargets(ReferenceType receiverType,InvokeInstruction invokeInstruction,ConstantPoolGen cpg) throws ClassNotFoundException {
  return resolveMethodCallTargets(receiverType,invokeInstruction,cpg,false);
}

private String safe(String src){
  StringBuffer sb=new StringBuffer();
  for (int i=0; i < src.length(); i++) {
    char c=src.charAt(i);
    if (c >= 32 && c < 128) {
      sb.append(c);
    }
 else {
      sb.append("<" + (int)c + ">");
    }
  }
  return sb.toString();
}

public Algorithm(Element el){
  requiredKey=el.getAttribute("RequiredKey");
  jceName=el.getAttribute("JCEName");
  algorithmClass=el.getAttribute("AlgorithmClass");
  if (el.hasAttribute("KeyLength")) {
    keyLength=Integer.parseInt(el.getAttribute("KeyLength"));
  }
 else {
    keyLength=0;
  }
}

protected abstract boolean isSSLSocket();

private Run consumeRun(int offset){
  char ch=fText.charAt(offset);
  int length=fText.length();
  Run run=getRun(ch);
  while (run.consume(ch) && offset < length - 1) {
    offset++;
    ch=fText.charAt(offset);
  }
  return run;
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(7);
  newVector.addElement(new Option("\tPopulation size","L",1,"-L <integer>"));
  newVector.addElement(new Option("\tDescendant population size","A",1,"-A <integer>"));
  newVector.addElement(new Option("\tNumber of runs","U",1,"-U <integer>"));
  newVector.addElement(new Option("\tUse mutation.\n\t(default true)","M",0,"-M"));
  newVector.addElement(new Option("\tUse cross-over.\n\t(default true)","C",0,"-C"));
  newVector.addElement(new Option("\tUse tournament selection (true) or maximum subpopulatin (false).\n\t(default false)","O",0,"-O"));
  newVector.addElement(new Option("\tRandom number seed","R",1,"-R <seed>"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

public static String formatForUI(Calendar today,Calendar date){
  if (today.get(Calendar.YEAR) == date.get(Calendar.YEAR)) {
    if (today.get(Calendar.DAY_OF_YEAR) == date.get(Calendar.DAY_OF_YEAR)) {
      return "Today";
    }
    return currentYearDateFormat(date.getTimeInMillis());
  }
 else {
    return format(date.getTimeInMillis());
  }
}

public OutputStreamWriter(OutputStream out,CharsetEncoder enc){
  super(out);
  if (enc == null)   throw new NullPointerException("charset encoder");
  se=StreamEncoder.forOutputStreamWriter(out,this,enc);
}

public synchronized void free(long pos,int length){
  int start=getBlock(pos);
  int blocks=getBlockCount(length);
  BlockRange x=new BlockRange(start,blocks);
  BlockRange next=freeSpace.ceiling(x);
  if (next == null) {
    throw DataUtils.newIllegalStateException(DataUtils.ERROR_INTERNAL,"Free space sentinel is missing");
  }
  BlockRange prev=freeSpace.lower(x);
  if (prev != null) {
    if (prev.start + prev.blocks == start) {
      prev.blocks+=blocks;
      if (prev.start + prev.blocks == next.start) {
        prev.blocks+=next.blocks;
        freeSpace.remove(next);
      }
      return;
    }
  }
  if (start + blocks == next.start) {
    next.start-=blocks;
    next.blocks+=blocks;
    return;
  }
  freeSpace.add(x);
}

private static void decodeHanziSegment(BitSource bits,StringBuilder result,int count) throws FormatException {
  if (count * 13 > bits.available()) {
    throw FormatException.getFormatInstance();
  }
  byte[] buffer=new byte[2 * count];
  int offset=0;
  while (count > 0) {
    int twoBytes=bits.readBits(13);
    int assembledTwoBytes=((twoBytes / 0x060) << 8) | (twoBytes % 0x060);
    if (assembledTwoBytes < 0x003BF) {
      assembledTwoBytes+=0x0A1A1;
    }
 else {
      assembledTwoBytes+=0x0A6A1;
    }
    buffer[offset]=(byte)((assembledTwoBytes >> 8) & 0xFF);
    buffer[offset + 1]=(byte)(assembledTwoBytes & 0xFF);
    offset+=2;
    count--;
  }
  try {
    result.append(new String(buffer,StringUtils.GB2312));
  }
 catch (  UnsupportedEncodingException ignored) {
    throw FormatException.getFormatInstance();
  }
}

public URI csrfToken(){
  URIBuilder builder=apiBuilder();
  builder.setParameter("action","query");
  builder.setParameter("meta","tokens");
  builder.setParameter("continue","");
  return build(builder);
}

private static char[] zzUnpackCMap(String packed){
  char[] map=new char[0x10000];
  int i=0;
  int j=0;
  while (i < 184) {
    int count=packed.charAt(i++);
    char value=packed.charAt(i++);
    do     map[j++]=value;
 while (--count > 0);
  }
  return map;
}

public DistributedLogMultiStreamWriter build(){
  Preconditions.checkArgument((null != _streams && !_streams.isEmpty()),"No streams provided");
  Preconditions.checkNotNull(_client,"No distributedlog client provided");
  Preconditions.checkNotNull(_codec,"No compression codec provided");
  Preconditions.checkArgument(_firstSpeculativeTimeoutMs > 0 && _firstSpeculativeTimeoutMs <= _maxSpeculativeTimeoutMs && _speculativeBackoffMultiplier > 0 && _maxSpeculativeTimeoutMs < _requestTimeoutMs,"Invalid speculative timeout settings");
  return new DistributedLogMultiStreamWriter(_streams,_client,Math.min(_bufferSize,MAX_LOGRECORDSET_SIZE),_flushIntervalMs,_requestTimeoutMs,_firstSpeculativeTimeoutMs,_maxSpeculativeTimeoutMs,_speculativeBackoffMultiplier,_codec,_ticker,_executorService);
}

private void writeChars(int number,char c) throws IOException {
  for (; number > 0; number--) {
    writer.write(c);
  }
}

@Override public void error(String msg,Throwable t){
  if (logger.isLoggable(Level.SEVERE)) {
    log(SELF,Level.SEVERE,msg,t);
  }
}

public int exit_signal(){
  return Integer.parseInt(fields[37]);
}

public Command(){
  msgQueue=new LinkedList<Message>();
  msgQueue.clear();
}

public synchronized int indexOf(V item){
  return items.indexOf(item);
}

protected void createNode(DefaultMutableTreeNode top,String title,String info,String content,int lineCount){
  DefaultMutableTreeNode threadInfo=null;
  threadInfo=new DefaultMutableTreeNode(new ThreadInfo(title,info,content,lineCount,getThreadTokens(title)));
  top.add(threadInfo);
}

public Peer clone(){
  Peer clone=new Peer(network.clone(),address);
  return clone;
}

public static String generateNativeGuid(String deviceType,String serialNumber,String fileShareNativeId){
  return String.format("%s+%s+" + FILESYSTEM + "+%s",_deviceTypeMap.get(deviceType),serialNumber,fileShareNativeId);
}

public StrBuilder ensureCapacity(final int capacity){
  if (capacity > buffer.length) {
    final char[] old=buffer;
    buffer=new char[capacity * 2];
    System.arraycopy(old,0,buffer,0,size);
  }
  return this;
}

private void onStartTrackingTouch(){
  mIsDragging=true;
}

private static void createSuperForwarder(ClassNode targetNode,MethodNode forwarder,final Map<String,ClassNode> genericsSpec){
  List<ClassNode> interfaces=new ArrayList<ClassNode>(Traits.collectAllInterfacesReverseOrder(targetNode,new LinkedHashSet<ClassNode>()));
  String name=forwarder.getName();
  Parameter[] forwarderParameters=forwarder.getParameters();
  LinkedHashSet<ClassNode> traits=new LinkedHashSet<ClassNode>();
  List<MethodNode> superForwarders=new LinkedList<MethodNode>();
  for (  ClassNode node : interfaces) {
    if (Traits.isTrait(node)) {
      MethodNode method=node.getDeclaredMethod(name,forwarderParameters);
      if (method != null) {
        traits.add(node);
        superForwarders.add(method);
      }
    }
  }
  for (  MethodNode superForwarder : superForwarders) {
    doCreateSuperForwarder(targetNode,superForwarder,traits.toArray(new ClassNode[traits.size()]),genericsSpec);
  }
}

public void testCase15(){
  byte aBytes[]={1,2,3,4,5,6,7};
  byte bBytes[]={1,2,3,4,5,6,7};
  byte rBytes[]={0};
  int aSign=-1;
  int bSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.add(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",0,result.signum());
}

public boolean isVirtualPoolAccessible(VirtualPool resource){
  return _permissionsHelper.tenantHasUsageACL(URI.create(_user.getTenantId()),resource);
}

public void testTimedInvokeAllNullTimeUnit() throws Throwable {
  ExecutorService e=new ForkJoinPool(1);
  PoolCleaner cleaner=null;
  try {
    cleaner=cleaner(e);
    List<Callable<String>> l=new ArrayList<Callable<String>>();
    l.add(new StringTask());
    try {
      e.invokeAll(l,MEDIUM_DELAY_MS,null);
      shouldThrow();
    }
 catch (    NullPointerException success) {
    }
  }
  finally {
    if (cleaner != null) {
      cleaner.close();
    }
  }
}

private static boolean intersectsOneOf(final Rectangle2D r,final Collection<? extends Shape> shapes){
  if (shapes.isEmpty()) {
    return false;
  }
  for (  final Shape item : shapes) {
    if (item.intersects(r)) {
      return true;
    }
  }
  return false;
}

private void expectedByte(int position,int count) throws UTFDataFormatException {
  throw new UTFDataFormatException(Localizer.getMessage("jsp.error.xml.expectedByte",Integer.toString(position),Integer.toString(count)));
}

private List<String> checkConfigList(Configuration config,String name){
  String peerIPs=config.getConfig(name);
  ArrayList<String> peers=new ArrayList<String>();
  if (peerIPs != null) {
    for (    String ip : StringUtils.split(peerIPs,",")) {
      peers.add(ip);
    }
  }
  return peers;
}

public final ByteBuffer encode(CharBuffer in) throws CharacterCodingException {
  int length=(int)(in.remaining() * averageBytesPerChar);
  ByteBuffer out=ByteBuffer.allocate(length);
  reset();
  while (state != FLUSHED) {
    CoderResult result=encode(in,out,true);
    if (result == CoderResult.OVERFLOW) {
      out=allocateMore(out);
      continue;
    }
 else {
      checkCoderResult(result);
    }
    result=flush(out);
    if (result == CoderResult.OVERFLOW) {
      out=allocateMore(out);
    }
 else {
      checkCoderResult(result);
    }
  }
  out.flip();
  return out;
}

private void loadExternal(){
  Properties properties=new Properties();
  try {
    properties.loadFromXML(new FileInputStream(PROPERTIES_PATH));
    for (    String key : properties.stringPropertyNames()) {
      externalSupport.put(key,properties.getProperty(key));
    }
  }
 catch (  IOException ignore) {
  }
}

public static URI parseURI(String nuri,URI baseuri) throws URISyntaxException {
  int colonLocation=nuri.indexOf(':');
  int fragmentLocation=getFragmentLocation(nuri);
  if (colonLocation == -1 || colonLocation > fragmentLocation) {
    if (baseuri == null)     throw new URISyntaxException("No ':' in \"" + nuri + "\" and no base URI given,"+ " so no relative URIs allowed",nuri);
  }
  String protocol=nuri.substring(0,colonLocation);
  if (protocol.equals("urn")) {
    return parseURN(nuri,colonLocation,fragmentLocation);
  }
 else   if (protocol.equals("http")) {
    return new URI(nuri);
  }
 else   if (protocol.equals("file")) {
    return new URI(nuri);
  }
 else   if (protocol.equals("res")) {
    return new URI(nuri);
  }
 else {
    return parseGeneralURI(nuri,colonLocation,fragmentLocation);
  }
}

protected void updateUs(){
  try {
    setText(m_Editor.getAsText());
  }
 catch (  IllegalArgumentException ex) {
  }
}

public File makeDirty() throws IOException {
  File f=File.createTempFile("dirty",".tmp",repositoryLocation.getParentFile());
  FileWriter fw=new FileWriter(f);
  fw.write("" + System.currentTimeMillis());
  fw.flush();
  fw.close();
  return f;
}

private static boolean isASCIISuperset(String encoding) throws Exception {
  String chkS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ" + "abcdefghijklmnopqrstuvwxyz-_.!~*'();/?:@&=+$,";
  byte[] chkB={48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,45,95,46,33,126,42,39,40,41,59,47,63,58,64,38,61,43,36,44};
  byte[] b=chkS.getBytes(encoding);
  return Arrays.equals(b,chkB);
}

public static BigDecimal allocated(int p_C_Payment_ID,int p_C_Currency_ID) throws SQLException {
  BigDecimal PayAmt=null;
  int C_Charge_ID=0;
  String sql="SELECT PayAmt, C_Charge_ID " + "FROM C_Payment_v " + "WHERE C_Payment_ID=?";
  PreparedStatement pstmt=Adempiere.prepareStatement(sql);
  pstmt.setInt(1,p_C_Payment_ID);
  ResultSet rs=pstmt.executeQuery();
  if (rs.next()) {
    PayAmt=rs.getBigDecimal(1);
    C_Charge_ID=rs.getInt(2);
  }
  rs.close();
  pstmt.close();
  if (C_Charge_ID > 0)   return PayAmt;
  int C_ConversionType_ID=0;
  BigDecimal allocatedAmt=getAllocatedAmt(p_C_Payment_ID,p_C_Currency_ID,C_ConversionType_ID);
  return Currency.round(allocatedAmt,p_C_Currency_ID,null);
}

public static ByteBuffer processOutboundPackage(ByteBuffer roData,int exchangeId,boolean connectionOk){
  roData.rewind();
  if (BuildConfig.DEBUG) {
    XposedBridge.log("Processing outbound package of size " + Integer.toString(roData.remaining()));
  }
  try {
synchronized (sync) {
    }
  }
 catch (  Throwable e) {
    XposedBridge.log(e);
  }
  return null;
}

public void initialize(){
  if (isClosed.get()) {
    logger.info("Initialing Parallel Client Resources: actor system, HttpClientStore, Task Manager ....");
    ActorConfig.createAndGetActorSystem();
    httpClientStore.init();
    tcpSshPingResourceStore.init();
    ParallelTaskManager.getInstance();
    isClosed.set(false);
    logger.info("Parallel Client Resources has been initialized.");
  }
 else {
    logger.debug("NO OP. Parallel Client Resources has already been initialized.");
  }
}

@NotNull private static TextRange processSpaces(@NotNull Helper helper,@NotNull TextRange range,int tabWidth){
  CharSequence indent=helper.getCurrentLineIndent();
  int start=Math.max(0,range.getStartOffset() - helper.getCurrentLineStartOffset());
  int end=Math.min(indent.length(),range.getEndOffset() - helper.getCurrentLineStartOffset());
  int tabsNumber=0;
  int indentOffset=end;
  for (int i=start; i < end; i++) {
    char c=indent.charAt(i);
    if (c == '\t') {
      tabsNumber++;
    }
 else     if (c != ' ') {
      indentOffset=i;
      break;
    }
  }
  if (tabsNumber > 0) {
    helper.replace(start,indentOffset,StringUtil.repeat(" ",indentOffset - start - tabsNumber + tabsNumber * tabWidth));
    return TextRange.create(range.getStartOffset(),range.getEndOffset() - tabsNumber + tabsNumber * tabWidth);
  }
 else {
    return range;
  }
}

public void removeAlarm(final Alarm ALARM){
  if (alarms.contains(ALARM))   alarms.remove(ALARM);
}

public int read() throws java.io.IOException {
synchronized (lock) {
    char charArray[]=new char[1];
    if (read(charArray,0,1) != -1) {
      return charArray[0];
    }
    return -1;
  }
}

protected void checkParameters(){
  if (parameters != null) {
    for (int i=0, size=parameters.size(); i < size; i++) {
      Parameter param=parameters.get(i);
      param.checkSet();
    }
  }
}

private static Properties createProperties1(String conflation){
  Properties props=new Properties();
  props.setProperty(DELTA_PROPAGATION,"false");
  props.setProperty(MCAST_PORT,"0");
  props.setProperty(LOCATORS,"");
  props.setProperty(CONFLATE_EVENTS,conflation);
  return props;
}

public static void CF3(double[] x,double[] f,double[] c,int nx){
  int count1=0;
  int count2=0;
  double sum1=0.0;
  double sum2=0.0;
  double prod1=1.0;
  double prod2=1.0;
  double yj;
  double pj;
  double N=2.0;
  double a=1.0;
  for (int j=2; j <= nx; j++) {
    yj=x[j - 1] - Math.sin(6.0 * PI * x[0] + j * PI / nx);
    pj=Math.cos(20.0 * yj * PI / Math.sqrt(j + 0.0));
    if (j % 2 == 0) {
      sum2+=yj * yj;
      prod2*=pj;
      count2++;
    }
 else {
      sum1+=yj * yj;
      prod1*=pj;
      count1++;
    }
  }
  f[0]=x[0] + 2.0 * (4.0 * sum1 - 2.0 * prod1 + 2.0) / (double)count1;
  f[1]=1.0 - x[0] * x[0] + 2.0 * (4.0 * sum2 - 2.0 * prod2 + 2.0) / (double)count2;
  c[0]=f[1] + f[0] * f[0] - a * Math.sin(N * PI * (f[0] * f[0] - f[1] + 1.0)) - 1.0;
}

public static void closeSilently(ResultSet rs){
  if (rs != null) {
    try {
      rs.close();
    }
 catch (    SQLException e) {
    }
  }
}

public static void execute(PoolImpl pool,Function function,Object args,MemberMappedArgument memberMappedArg,boolean allServers,byte hasResult,boolean isFnSerializationReqd,String[] groups){
  List servers=null;
  AbstractOp op=new ExecuteFunctionNoAckOpImpl(function,args,memberMappedArg,hasResult,isFnSerializationReqd,groups,allServers);
  try {
    if (allServers && groups.length == 0) {
      if (logger.isDebugEnabled()) {
        logger.debug("ExecuteFunctionNoAckOp#execute : Sending Function Execution Message:" + op.getMessage() + " to all servers using pool: "+ pool);
      }
      servers=pool.getCurrentServers();
      Iterator i=servers.iterator();
      while (i.hasNext()) {
        pool.executeOn((ServerLocation)i.next(),op);
      }
    }
 else {
      if (logger.isDebugEnabled()) {
        logger.debug("ExecuteFunctionNoAckOp#execute : Sending Function Execution Message:" + op.getMessage() + " to server using pool: "+ pool+ " with groups:"+ Arrays.toString(groups)+ " all members:"+ allServers);
      }
      pool.execute(op,0);
    }
  }
 catch (  Exception ex) {
    if (logger.isDebugEnabled()) {
      logger.debug("ExecuteFunctionNoAckOp#execute : Exception occured while Sending Function Execution Message:" + op.getMessage() + " to server using pool: "+ pool,ex);
    }
    if (ex.getMessage() != null)     throw new FunctionException(ex.getMessage(),ex);
 else     throw new FunctionException("Unexpected exception during function execution:",ex);
  }
}

public static Script createMultiSigInputScript(TransactionSignature... signatures){
  return createMultiSigInputScript(Arrays.asList(signatures));
}

Object proxyIfReturnTypeIsJdbcInterface(Class<?> returnType,Object toProxy){
  if (toProxy != null) {
    if (Util.isJdbcInterface(returnType)) {
      Class<?> toProxyClass=toProxy.getClass();
      return Proxy.newProxyInstance(toProxyClass.getClassLoader(),Util.getImplementedInterfaces(toProxyClass),getNewJdbcInterfaceProxy(toProxy));
    }
  }
  return toProxy;
}

public final void empty(){
synchronized (buffer) {
    buffer.clear();
    bufferMap.clear();
  }
}

public void testModeratelyComplexTemplating() throws Exception {
  HtmlPage page=getPage("/faces/facelets/templateDecoration2.xhtml");
  String text=page.asText();
  assertTrue(text.contains("Inserted from client1 Default"));
}

private ValueRange rangeByWeek(TemporalAccessor temporal,TemporalField field){
  int dow=localizedDayOfWeek(temporal);
  int offset=startOfWeekOffset(temporal.get(field),dow);
  ValueRange fieldRange=temporal.range(field);
  return ValueRange.of(computeWeek(offset,(int)fieldRange.getMinimum()),computeWeek(offset,(int)fieldRange.getMaximum()));
}

public Object apply(Object in){
  if (in instanceof HasWord) {
    HasWord w=(HasWord)in;
    String str=w.word();
    String outStr=americanize(str,capitalizeTimex);
    if (!outStr.equals(str)) {
      w.setWord(outStr);
    }
    return w;
  }
 else {
    String str=(String)in;
    return americanize(str,capitalizeTimex);
  }
}

public void addWayRef(MapWay way,int nodeIdx){
  if (ways == null)   ways=new ArrayList<WayRef>(2);
  if (ways.isEmpty() || ways.get(0) != way)   ways.add(new DefaultWayRef(way,(short)nodeIdx));
}

public double doCrossValidation(Iterable<T> data,int dataSize) throws InterruptedException, ExecutionException {
  stats=new OneVariableStats();
  log.info("Starting cross validation at " + (new Date()));
  log.info("Splitting data into " + numFolds + " folds");
  List<List<T>> splits=splitData(data,dataSize);
  log.info("Splitting complete.");
  ExecutorService executor=Executors.newFixedThreadPool(numThreads);
  List<FutureTask<Double>> folds=new ArrayList<>();
  for (int i=0; i < numFolds; i++) {
    List<T> trainingSet=new ArrayList<>();
    for (int j=0; j < numFolds; j++) {
      if (j != i)       trainingSet.addAll(splits.get(j));
    }
    List<T> testSet=splits.get(i);
    FutureTask<Double> fold=createFoldTask(trainingSet,testSet,i);
    executor.execute(fold);
    folds.add(fold);
  }
  executor.shutdown();
  executor.awaitTermination(timeoutSeconds,TimeUnit.SECONDS);
  for (  FutureTask<Double> fold : folds) {
    stats.add(fold.get());
  }
  log.info("Cross validation complete at " + (new Date()));
  return stats.mean();
}

public EntireTextBuilder addBackground(@ColorInt int bgColor,int start,int end){
  BackgroundHolder backgroundHolder=new BackgroundHolder(bgColor,start,end);
  mBackgrounds.add(backgroundHolder);
  return this;
}

public void removeChangingListener(OnWheelChangedListener listener){
  changingListeners.remove(listener);
}

public boolean matches(String filename){
  if (exts == null)   return true;
  int j=filename.lastIndexOf(".");
  if (j == -1 || j == filename.length())   return false;
  String suffix=filename.substring(j + 1);
  return exts.contains(suffix);
}

public Rectangle[] computeGaps(){
  ArrayList<Rectangle> ret=new ArrayList<>();
  Rectangle gap=new Rectangle();
  for (int i=0; i < mRectList.length; i++) {
    Rectangle rectangleA=mRectList[i];
    for (int j=i + 1; j < mRectList.length; j++) {
      Rectangle rectangleB=mRectList[j];
      boolean viable=calculateGap(rectangleA,rectangleB,gap);
      if (viable) {
        for (int k=0; k < mRectList.length; k++) {
          if (k != j && k != i) {
            if (gap.intersects(mRectList[k])) {
              viable=false;
              break;
            }
          }
        }
      }
      if (viable) {
        ret.add(new Rectangle(gap));
      }
    }
  }
  return ret.toArray(new Rectangle[ret.size()]);
}

public synchronized MethodCountSet collectHotMethods(int optLevel,double threshold){
  if (DEBUG)   validityCheck();
  ArrayList<HotMethodRecompilationEvent> collect=new ArrayList<HotMethodRecompilationEvent>();
  collectHotOptMethodsInternal(1,collect,hotnessToCounts(threshold),optLevel);
  int numHotMethods=collect.size();
  double[] numCounts=new double[numHotMethods];
  CompiledMethod[] hotMethods=new CompiledMethod[numHotMethods];
  for (int i=0; i < numHotMethods; i++) {
    HotMethodEvent event=collect.get(i);
    hotMethods[i]=event.getCompiledMethod();
    numCounts[i]=event.getNumSamples();
  }
  return new MethodCountSet(hotMethods,numCounts);
}

public synchronized void addBan(long duration,String reason,String id){
  addLine(new BanMessage(System.currentTimeMillis(),duration,reason,id));
}

private void writeHeader() throws OpenStegoException {
  DCTDataHeader header=null;
  try {
    header=new DCTDataHeader(this.dataLength,this.fileName,this.config);
    if (((header.getHeaderSize() + this.dataLength) * 8) > (this.imgWidth * this.imgHeight / (DCT.NJPEG * DCT.NJPEG))) {
      throw new OpenStegoException(null,DctLSBPlugin.NAMESPACE,DctLSBErrors.IMAGE_SIZE_INSUFFICIENT);
    }
    this.coord=new Coordinates((header.getHeaderSize() + this.dataLength) * 8);
    write(header.getHeaderData());
  }
 catch (  IOException ioEx) {
    throw new OpenStegoException(ioEx);
  }
}

public int decrementSubscriberCount(){
  if (isAvailable()) {
    return jmdnsSubscriberCount.decrementAndGet();
  }
  return 0;
}

public static boolean addShapelessEnchantingRecipe(ItemStack aResult,Enchantment[] aEnchantmentsAdded,int[] aEnchantmentLevelsAdded,Object[] aRecipe){
  return addShapelessCraftingRecipe(aResult,aEnchantmentsAdded,aEnchantmentLevelsAdded,true,false,false,false,aRecipe);
}

public void start() throws TomcatException {
  if (cat == null)   init();
  cat.start();
}

@Override public synchronized void initialize(){
  if (!mRootDirectory.exists()) {
    if (!mRootDirectory.mkdirs()) {
      VolleyLog.e("Unable to create cache dir %s",mRootDirectory.getAbsolutePath());
    }
    return;
  }
  File[] files=mRootDirectory.listFiles();
  if (files == null) {
    return;
  }
  for (  File file : files) {
    BufferedInputStream fis=null;
    try {
      fis=new BufferedInputStream(new FileInputStream(file));
      CacheHeader entry=CacheHeader.readHeader(fis);
      entry.size=file.length();
      putEntry(entry.key,entry);
    }
 catch (    IOException e) {
      if (file != null) {
        file.delete();
      }
    }
 finally {
      try {
        if (fis != null) {
          fis.close();
        }
      }
 catch (      IOException ignored) {
      }
    }
  }
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(1);
  newVector.addElement(new Option("\tInitial count (alpha)\n","A",1,"-A <alpha>"));
  return newVector.elements();
}

private List<View> addView(View view,List<View> cache){
  if (cache == null) {
    cache=new LinkedList<View>();
  }
  cache.add(view);
  return cache;
}

private boolean imageOutline(DefaultMutableTreeNode node){
  boolean isOutline=false;
  if (node != null) {
    DefaultMutableTreeNode parentNode=(DefaultMutableTreeNode)node.getParent();
    if (parentNode != null) {
      if (parentNode.getUserObject() instanceof RasterSymbolizer) {
        isOutline=true;
      }
    }
  }
  return isOutline;
}

private short addEntry(Entry entry){
  pool.add(entry);
  if (pool.size() >= 65535) {
    throw new IllegalArgumentException("constant pool size limit exceeded");
  }
  return (short)pool.size();
}

private boolean loadNextPage(){
  result=pageable.getPage(query,skip,pageSize);
  index=0;
  if (result == null || result.isEmpty()) {
    return false;
  }
  return true;
}

public boolean contains(Node s){
  runTo(-1);
  if (null == m_map)   return false;
  for (int i=0; i < m_firstFree; i++) {
    Node node=m_map[i];
    if ((null != node) && node.equals(s))     return true;
  }
  return false;
}

public void close() throws IOException {
  if (!closed) {
    if (usesDefaultInflater)     inf.end();
    in.close();
    closed=true;
  }
}

public FieldAnalysisRequest addFieldType(String fieldTypeName){
  if (fieldTypes == null) {
    fieldTypes=new LinkedList<>();
  }
  fieldTypes.add(fieldTypeName);
  return this;
}

public static BigFraction parseEditRate(String editRate){
  editRate=editRate.contains("/") ? rFrameRateToEditRate(editRate) : editRate;
  String[] parts=editRate.split(" ");
  try {
    if (parts.length == 2) {
      return new BigFraction(Long.parseLong(parts[0]),Long.parseLong(parts[1]));
    }
 else     if (parts.length == 1) {
      return new BigFraction(Long.parseLong(parts[0]));
    }
  }
 catch (  NumberFormatException e) {
    throw new ConversionHelperException("Incorrect edit rate! Edit rate must consist of two numbers.",e);
  }
  throw new ConversionHelperException("Incorrect edit rate! Edit rate must consist of two values.");
}

public FST<T> finish() throws IOException {
  final UnCompiledNode<T> root=frontier[0];
  freezeTail(0);
  if (root.inputCount < minSuffixCount1 || root.inputCount < minSuffixCount2 || root.numArcs == 0) {
    if (fst.emptyOutput == null) {
      return null;
    }
 else     if (minSuffixCount1 > 0 || minSuffixCount2 > 0) {
      return null;
    }
  }
 else {
    if (minSuffixCount2 != 0) {
      compileAllTargets(root,lastInput.length());
    }
  }
  fst.finish(compileNode(root,lastInput.length()).node);
  if (doPackFST) {
    return fst.pack(this,3,Math.max(10,(int)(getNodeCount() / 4)),acceptableOverheadRatio);
  }
 else {
    return fst;
  }
}

public void onConfiguration(ContactsOps.View view,boolean firstTimeIn){
  mContactsView=new WeakReference<>(view);
  if (firstTimeIn) {
    initializeAccount();
    mCursorAdapter=new SimpleCursorAdapter(view.getApplicationContext(),R.layout.list_layout,null,sColumnsToDisplay,sColumnResIds,1);
  }
}

public static final int randomUnsetBit(Random r,BitSet bits,final int max){
  if (bits.cardinality() == max + 1) {
    return -1;
  }
  final int candidate=TestUtil.nextInt(r,0,max);
  if (bits.get(candidate)) {
    final int lo=bits.previousClearBit(candidate);
    final int hi=bits.nextClearBit(candidate);
    if (lo < 0 && max < hi) {
      fail("how the hell did we not short circut out? card=" + bits.cardinality() + "/size="+ bits.size());
    }
 else     if (lo < 0) {
      return hi;
    }
 else     if (max < hi) {
      return lo;
    }
    return ((candidate - lo) < (hi - candidate)) ? lo : hi;
  }
  return candidate;
}

@Override public void flush() throws IOException {
synchronized (lock) {
    out.flush();
  }
}

public double std(){
  if (min == max || num == 0) {
    return 0;
  }
  double m=mean();
  return Math.sqrt(sigmax2 / num - m * m);
}

public boolean containsInstruction(InstructionHandle handle){
  Iterator<InstructionHandle> i=instructionIterator();
  while (i.hasNext()) {
    if (i.next() == handle) {
      return true;
    }
  }
  return false;
}

public static String sendFedexRequest(String xmlString,Delegator delegator,String shipmentGatewayConfigId,String resource,Locale locale) throws FedexConnectException {
  String url=getShipmentGatewayConfigValue(delegator,shipmentGatewayConfigId,"connectUrl",resource,"shipment.fedex.connect.url");
  if (UtilValidate.isEmpty(url)) {
    throw new FedexConnectException(UtilProperties.getMessage(resourceError,"FacilityShipmentFedexConnectUrlIncomplete",locale));
  }
  if (!xmlString.matches("^(?s)<\\?xml\\s+version=\"1\\.0\"\\s+encoding=\"UTF-8\"\\s*\\?>.*")) {
    throw new FedexConnectException(UtilProperties.getMessage(resourceError,"FacilityShipmentFedexXmlHeaderMalformed",locale));
  }
  url=url.trim();
  String timeOutStr=getShipmentGatewayConfigValue(delegator,shipmentGatewayConfigId,"connectTimeout",resource,"shipment.fedex.connect.timeout","60");
  int timeout=60;
  try {
    timeout=Integer.parseInt(timeOutStr);
  }
 catch (  NumberFormatException e) {
    Debug.logError(e,"Unable to set timeout to " + timeOutStr + " using default "+ timeout);
  }
  if (Debug.verboseOn()) {
    Debug.logVerbose("Fedex Connect URL : " + url,module);
    Debug.logVerbose("Fedex XML String : " + xmlString,module);
  }
  HttpClient http=new HttpClient(url);
  http.setTimeout(timeout * 1000);
  String response=null;
  try {
    response=http.post(xmlString);
  }
 catch (  HttpClientException e) {
    Debug.logError(e,"Problem connecting to Fedex server",module);
    throw new FedexConnectException(UtilProperties.getMessage(resourceError,"FacilityShipmentFedexConnectUrlProblem",UtilMisc.toMap("errorString",e.toString()),locale));
  }
  if (response == null) {
    throw new FedexConnectException(UtilProperties.getMessage(resourceError,"FacilityShipmentFedexReceivedNullResponse",locale));
  }
  if (Debug.verboseOn()) {
    Debug.logVerbose("Fedex Response : " + response,module);
  }
  return response;
}

public String trimToSize(String str,int maxStringLength){
  if (str == null)   return null;
  if (str.length() > maxStringLength) {
    StringBuilder sb=new StringBuilder(str);
    sb.setLength(maxStringLength);
    str=sb.toString();
  }
  return str;
}

public Subject login(String username,String password){
  if (StringUtils.isBlank(username) || StringUtils.isBlank(password))   return null;
  Properties credentials=new Properties();
  credentials.setProperty(ResourceConstants.USER_NAME,username);
  credentials.setProperty(ResourceConstants.PASSWORD,password);
  return login(credentials);
}

@Timed @ExceptionMetered @Path("/v2") @GET @Produces(APPLICATION_JSON) public Iterable<SanitizedSecret> secretListingV2(@Auth AutomationClient automationClient,@QueryParam("idx") Integer idx,@QueryParam("num") Integer num,@DefaultValue("true") @QueryParam("newestFirst") boolean newestFirst){
  if (idx != null && num != null) {
    if (idx < 0 || num < 0) {
      throw new BadRequestException("Index and num must both be positive when retrieving batched secrets!");
    }
    return secretController.getSecretsBatched(idx,num,newestFirst);
  }
  return secretController.getSanitizedSecrets(null,null);
}

public void deselect(Iterable<Integer> positions){
  Iterator<Integer> entries=positions.iterator();
  while (entries.hasNext()) {
    deselect(entries.next(),entries);
  }
}

public static String map2OID(String algName){
  checkCacheVersion();
  String result=alg2OidMap.get(algName.toUpperCase(Locale.US));
  if (result != null) {
    return result;
  }
  AlgNameMapperSource s=source;
  if (s != null) {
    return s.mapNameToOid(algName);
  }
  return null;
}

public PushHistory(int maxHistoryLength,JSONObject json){
  this.maxHistoryLength=maxHistoryLength;
  this.entries=new PriorityQueue<Entry>(maxHistoryLength + 1);
  this.pushIds=new HashSet<String>(maxHistoryLength + 1);
  this.lastTime=null;
  if (json != null) {
    JSONObject jsonHistory=json.optJSONObject("seen");
    if (jsonHistory != null) {
      Iterator<String> it=jsonHistory.keys();
      while (it.hasNext()) {
        String pushId=(String)it.next();
        String timestamp=jsonHistory.optString(pushId,null);
        if (pushId != null && timestamp != null) {
          tryInsertPush(pushId,timestamp);
        }
      }
    }
    setLastReceivedTimestamp(json.optString("lastTime",null));
  }
}

private void endList(boolean orderedList){
  if (!mParagraphStyles.isEmpty()) {
    AccumulatedParagraphStyle style=mParagraphStyles.peek();
    ParagraphType type=style.getType();
    if ((orderedList && (type.isNumbering() || type == ParagraphType.INDENTATION_OL)) || (!orderedList && (type.isBullet() || type == ParagraphType.INDENTATION_UL))) {
      int indent=style.getRelativeIndent();
      if (indent > 1) {
        style.setRelativeIndent(indent - 1);
        style.setAbsoluteIndent(style.getAbsoluteIndent() - 1);
      }
 else {
        mParagraphStyles.pop();
      }
    }
 else {
      mParagraphStyles.pop();
      endList(orderedList);
    }
  }
}

private boolean processKeyUp(int keyCode){
  if (keyCode == KeyEvent.KEYCODE_ESCAPE || keyCode == KeyEvent.KEYCODE_BACK) {
    dismiss();
    return true;
  }
 else   if (keyCode == KeyEvent.KEYCODE_TAB) {
    if (mInKbMode) {
      if (isTypedTimeFullyLegal()) {
        finishKbMode(true);
      }
      return true;
    }
  }
 else   if (keyCode == KeyEvent.KEYCODE_ENTER) {
    if (mInKbMode) {
      if (!isTypedTimeFullyLegal()) {
        return true;
      }
      finishKbMode(false);
    }
    if (mCallback != null) {
      mCallback.onTimeSet(mTimePicker,mTimePicker.getHours(),mTimePicker.getMinutes());
    }
    dismiss();
    return true;
  }
 else   if (keyCode == KeyEvent.KEYCODE_DEL) {
    if (mInKbMode) {
      if (!mTypedTimes.isEmpty()) {
        int deleted=deleteLastTypedKey();
        String deletedKeyStr;
        if (deleted == getAmOrPmKeyCode(AM)) {
          deletedKeyStr=mAmText;
        }
 else         if (deleted == getAmOrPmKeyCode(PM)) {
          deletedKeyStr=mPmText;
        }
 else {
          deletedKeyStr=String.format("%d",getValFromKeyCode(deleted));
        }
        Utils.tryAccessibilityAnnounce(mTimePicker,String.format(mDeletedKeyFormat,deletedKeyStr));
        updateDisplay(true);
      }
    }
  }
 else   if (keyCode == KeyEvent.KEYCODE_0 || keyCode == KeyEvent.KEYCODE_1 || keyCode == KeyEvent.KEYCODE_2 || keyCode == KeyEvent.KEYCODE_3 || keyCode == KeyEvent.KEYCODE_4 || keyCode == KeyEvent.KEYCODE_5 || keyCode == KeyEvent.KEYCODE_6 || keyCode == KeyEvent.KEYCODE_7 || keyCode == KeyEvent.KEYCODE_8 || keyCode == KeyEvent.KEYCODE_9 || (!mIs24HourMode && (keyCode == getAmOrPmKeyCode(AM) || keyCode == getAmOrPmKeyCode(PM)))) {
    if (!mInKbMode) {
      if (mTimePicker == null) {
        Log.e(TAG,"Unable to initiate keyboard mode, TimePicker was null.");
        return true;
      }
      mTypedTimes.clear();
      tryStartingKbMode(keyCode);
      return true;
    }
    if (addKeyIfLegal(keyCode)) {
      updateDisplay(false);
    }
    return true;
  }
  return false;
}

public boolean isNaturalJoinColumn(Column c){
  return naturalJoinColumns != null && naturalJoinColumns.contains(c);
}

public int read(byte[] b,int off,int len) throws IOException {
  ensureOpen();
  if (b == null) {
    throw new NullPointerException("Null buffer for read");
  }
 else   if (off < 0 || len < 0 || len > b.length - off) {
    throw new IndexOutOfBoundsException();
  }
 else   if (len == 0) {
    return 0;
  }
  int cnt=0;
  while (len > 0 && !def.finished()) {
    int n;
    if (def.needsInput()) {
      n=in.read(buf,0,buf.length);
      if (n < 0) {
        def.finish();
      }
 else       if (n > 0) {
        def.setInput(buf,0,n);
      }
    }
    n=def.deflate(b,off,len);
    cnt+=n;
    off+=n;
    len-=n;
  }
  if (cnt == 0 && def.finished()) {
    reachEOF=true;
    cnt=-1;
  }
  return cnt;
}

@Override public void passivate(){
  cleanupUserTransaction();
  super.passivate();
}

public Builder delay(long duration,TimeUnit timeUnit){
  this.delay=timeUnit.toSeconds(duration);
  return this;
}

private boolean contains(int part){
  return parts.contains(part);
}

int keyCount(Class clazz){
  Map map=get(clazz);
  int count=map.size();
  if (map.containsKey(CONSTRUCTORS_KEY))   count--;
  if (map.containsKey(GENERIC_GET_KEY))   count--;
  if (map.containsKey(ARGTYPES_KEY))   count--;
  return count;
}

public Mp4StcoBox(Mp4BoxHeader header,ByteBuffer originalDataBuffer,int adjustment){
  this.header=header;
  this.dataBuffer=originalDataBuffer.slice();
  dataBuffer.position(dataBuffer.position() + VERSION_FLAG_LENGTH + OTHER_FLAG_LENGTH);
  this.noOfOffSets=Utils.getIntBE(dataBuffer,dataBuffer.position(),(dataBuffer.position() + NO_OF_OFFSETS_LENGTH - 1));
  dataBuffer.position(dataBuffer.position() + NO_OF_OFFSETS_LENGTH);
  for (int i=0; i < noOfOffSets; i++) {
    int offset=Utils.getIntBE(dataBuffer,dataBuffer.position(),(dataBuffer.position() + NO_OF_OFFSETS_LENGTH - 1));
    offset=offset + adjustment;
    dataBuffer.put(Utils.getSizeBEInt32(offset));
  }
}

public static void createOPUSDirectories(Config config){
  log.info("Creating temp directories");
  UrbanSimParameterConfigModuleV3 module=M4UConfigUtils.getUrbanSimParameterConfigAndPossiblyConvert(config);
  File tempFile=new File(module.getOpusHome());
  tempFile.mkdirs();
  tempFile=new File(module.getMATSim4Opus());
  tempFile.mkdirs();
  tempFile=new File(module.getMATSim4OpusOutput());
  tempFile.mkdirs();
  tempFile=new File(module.getMATSim4OpusTemp());
  tempFile.mkdirs();
  tempFile=new File(module.getMATSim4OpusConfig());
  tempFile.mkdirs();
  log.info("Finished creating temp directories");
}

public static String lcfirst(String input){
  return withFirst(input,null);
}

void compress(int page,byte[] old){
  byte[][] array=data;
  if (page >= array.length) {
    return;
  }
  byte[] d=array[page];
  if (d != old) {
    return;
  }
synchronized (LZF) {
    int len=LZF.compress(d,BLOCK_SIZE,BUFFER,0);
    if (len <= BLOCK_SIZE) {
      d=new byte[len];
      System.arraycopy(BUFFER,0,d,0,len);
      byte[] o=array[page];
      if (o != old) {
        return;
      }
      array[page]=d;
    }
  }
}

public HadoopProcessDescriptor localProcessDescriptor(){
  return locProcDesc;
}

private Pair<String,Boolean> describeRain(Calendar calendar,int temperatureMod){
  int month=calendar.get(Calendar.MONTH);
  month=10 * Math.abs(month - 6);
  int hour=calendar.get(Calendar.HOUR_OF_DAY);
  hour=Math.abs((hour + 21) % 24 - 12) / 2;
  int temp=temperature.getValue() - hour - month + (temperatureMod * 10);
  LOGGER.debug("Modified temp: " + temp + " zone modifier: "+ temperatureMod);
  if (temp <= -30) {
    return new Pair<String,Boolean>("snow",Boolean.FALSE);
  }
  return new Pair<String,Boolean>("rain",temp >= -5 && thunder.getDescription(0) != null);
}

@VisibleForTesting @CalledByNativeUnchecked("BookmarkNode") public void addChild(BookmarkNode child){
  mChildren.add(child);
}

public void testGetMinCRL(){
  X509CRLSelector selector=new X509CRLSelector();
  assertNull("Initially the minCRL should be null.",selector.getMinCRL());
  BigInteger minCRL=new BigInteger("10000");
  selector.setMinCRLNumber(minCRL);
  assertTrue("The result should be equal to specified.",minCRL.equals(selector.getMinCRL()));
}

public void testWhenComplete_exceptionalCompletion(){
  for (  ExecutionMode m : ExecutionMode.values())   for (  boolean createIncomplete : new boolean[]{true,false}) {
    final AtomicInteger a=new AtomicInteger(0);
    final CFException ex=new CFException();
    final CompletableFuture<Integer> f=new CompletableFuture<>();
    if (!createIncomplete)     f.completeExceptionally(ex);
    final CompletableFuture<Integer> g=m.whenComplete(f,null);
    if (createIncomplete)     f.completeExceptionally(ex);
    checkCompletedWithWrappedException(g,ex);
    checkCompletedExceptionally(f,ex);
    assertEquals(1,a.get());
  }
}

@Override public String read(String pattern){
  return read(Pattern.compile(pattern,Pattern.DOTALL | Pattern.MULTILINE));
}

protected void addSubKeysAndAggregator(Set<String> values,Set<String> keysOfCompositeAggregator,Set<String> subKeys,String aggregatorName,Map<Set<String>,Integer> keysToCombinationId){
  if (keysOfCompositeAggregator == null || subKeys == null || keysOfCompositeAggregator.isEmpty() || subKeys.isEmpty()) {
    throw new IllegalArgumentException("Both keys and subKeys can't be null or empty");
  }
  Set<String> allKeys=Sets.newHashSet();
  allKeys.addAll(keysOfCompositeAggregator);
  allKeys.addAll(subKeys);
  if (allKeys.size() != keysOfCompositeAggregator.size() + subKeys.size()) {
    throw new IllegalArgumentException("Should NOT have overlap between keys " + keysOfCompositeAggregator.toString() + " and subKeys "+ subKeys);
  }
  Integer combinationId=keysToCombinationId.get(allKeys);
  if (combinationId == null) {
    if (dimensionsDescriptorIDToKeys.add(new Fields(allKeys))) {
      combinationId=dimensionsDescriptorIDToKeys.size() - 1;
    }
 else {
      throw new RuntimeException("The keys " + allKeys + " already existed.");
    }
    keysToCombinationId.put(allKeys,combinationId);
    addValueToAggregatorToCombination(values,allKeys,aggregatorName);
  }
 else {
    Set<String> incrementalAggregatorNames;
    boolean isOTFAggregator=false;
    if (!isIncrementalAggregator(aggregatorName)) {
      incrementalAggregatorNames=getOTFDependedIncrementalAggregatorNames(aggregatorName);
      isOTFAggregator=true;
    }
 else {
      incrementalAggregatorNames=Sets.newHashSet();
      incrementalAggregatorNames.add(aggregatorName);
    }
    Map<String,Set<String>> newValueToIncrementalAggregators=Maps.newHashMap();
    Map<String,Set<String>> newValueToOTFAggregators=Maps.newHashMap();
    for (    String value : values) {
      newValueToIncrementalAggregators.put(value,incrementalAggregatorNames);
      if (isOTFAggregator) {
        newValueToOTFAggregators.put(value,Sets.newHashSet(aggregatorName));
      }
    }
    int ddid=combinationId * customTimeBucketsCombination.size();
    for (int index=0; index < customTimeBucketsCombination.size(); ++index, ++ddid) {
      mergeMaps(dimensionsDescriptorIDToValueToAggregator.get(ddid),newValueToIncrementalAggregators);
      mergeMaps(dimensionsDescriptorIDToValueToOTFAggregator.get(ddid),newValueToOTFAggregators);
    }
  }
}

protected boolean _findCanonicalLabelling(boolean tmpPreviouslyEqualToMin){
  boolean foundNewMinimum=false;
  IntArrayList underlyingVertexPosThatExtendTmp=getUnderlyingVertexPosThatExtendTmp();
  IntCursor underlyingVertexPosThatExtendTmpCursor=underlyingVertexPosThatExtendTmp.cursor();
  while (underlyingVertexPosThatExtendTmpCursor.moveNext()) {
    int underlyingVertexPosToAdd=underlyingVertexPosThatExtendTmpCursor.elem();
    int newTmpVertexPos=addTmpVertex(underlyingVertexPosToAdd);
    int newTmpVertexLabel=underlyingPosToLabel.getUnchecked(underlyingVertexPosToAdd);
    IntSet neighbourUnderlyingPositions=underlyingAdjacencyList.get(underlyingVertexPosToAdd);
    IntCursor neighbourUnderlyingPositionsCursor=neighbourUnderlyingPositions.cursor();
    PatternEdgeArrayList edgesToAdd=createPatternEdgeArrayList();
    while (neighbourUnderlyingPositionsCursor.moveNext()) {
      int neighbourUnderlyingPos=neighbourUnderlyingPositionsCursor.elem();
      int neighbourTmpPos=tmpLabelling.get(neighbourUnderlyingPos);
      if (neighbourTmpPos == -1) {
        continue;
      }
      addCandidatePatternEdges(edgesToAdd,neighbourUnderlyingPos,neighbourTmpPos,underlyingVertexPosToAdd,newTmpVertexPos);
    }
    if (edgesToAdd.size() > 0 || newTmpVertexPos == 0) {
      edgesToAdd.sort();
      boolean promisingTmpPattern=true;
      boolean equalToMinTmpPattern=tmpPreviouslyEqualToMin;
      if (foundMinimum) {
        int comparisonResult;
        if (newTmpVertexPos > 0) {
          PatternEdgeArrayList minEquivalentEdges=minEdges.get(newTmpVertexPos);
          comparisonResult=edgesToAdd.compareTo(minEquivalentEdges);
        }
 else {
          int minFirstUnderlyingVertexPos=minInverseLabelling.get(newTmpVertexPos);
          int minFirstUnderylingVertexLabel=underlyingPosToLabel.getUnchecked(minFirstUnderlyingVertexPos);
          comparisonResult=Integer.compare(newTmpVertexLabel,minFirstUnderylingVertexLabel);
        }
        equalToMinTmpPattern=equalToMinTmpPattern && comparisonResult == 0;
        if (tmpPreviouslyEqualToMin && !equalToMinTmpPattern) {
          if (comparisonResult > 0) {
            promisingTmpPattern=false;
          }
        }
      }
      if (promisingTmpPattern) {
        addTmpEdges(edgesToAdd);
        if (tmpLabelling.size() == getNumberOfVertices()) {
          if (!equalToMinTmpPattern || !foundMinimum) {
            copyTmpToMin();
            foundNewMinimum=true;
            vertexPositionEquivalences.clear();
          }
          IntIntCursor tmpLabellingCursor=tmpLabelling.cursor();
          while (tmpLabellingCursor.moveNext()) {
            int underlyingPos=tmpLabellingCursor.key();
            int tmpEquivalentPos=tmpLabellingCursor.value();
            int underlyingPosAccordingToMin=minInverseLabelling.get(tmpEquivalentPos);
            vertexPositionEquivalences.addEquivalence(underlyingPos,underlyingPosAccordingToMin);
          }
        }
 else {
          boolean foundNewMinimumInChild=_findCanonicalLabelling(equalToMinTmpPattern);
          if (foundNewMinimumInChild) {
            tmpPreviouslyEqualToMin=true;
            foundNewMinimum=true;
          }
        }
        removeLastTmpEdges();
      }
 else {
        edgesToAdd.reclaim();
      }
    }
    removeLastTmpVertex();
  }
  underlyingVertexPosThatExtendTmp.reclaim();
  return foundNewMinimum;
}

private String constructISCSINamesQuery(String systemId,List<HostStorageDomain> hsdList,String model){
  Map<String,Object> attributeMap=new HashMap<String,Object>();
  StorageArray array=new StorageArray(systemId);
  Add addOp=new Add(HDSConstants.ISCSI_NAME_FOR_HSD_TARGET);
  attributeMap.put(HDSConstants.STORAGEARRAY,array);
  attributeMap.put(HDSConstants.ADD,addOp);
  attributeMap.put(HDSConstants.MODEL,model);
  attributeMap.put(HDSConstants.HOSTGROUP_LIST,hsdList);
  String addWWNQuery=InputXMLGenerationClient.getInputXMLString(HDSConstants.BATCH_ADD_WWN_TO_HSD_OP,attributeMap,HDSConstants.HITACHI_INPUT_XML_CONTEXT_FILE,HDSConstants.HITACHI_SMOOKS_CONFIG_FILE);
  return addWWNQuery;
}

public static void tryClaim(Publication publication,BufferFiller fillBuffer,int length,int timeout,TimeUnit timeUnit){
  if (publication.isClosed()) {
    throw new NotConnectedException();
  }
  final BufferClaim bufferClaim=bufferClaims.get();
  final long start=System.nanoTime();
  do {
    final long current=System.nanoTime();
    if ((current - start) > timeUnit.toNanos(timeout)) {
      throw new TimedOutException();
    }
    final long offer=publication.tryClaim(length,bufferClaim);
    if (offer >= 0) {
      try {
        final MutableDirectBuffer buffer=bufferClaim.buffer();
        final int offset=bufferClaim.offset();
        fillBuffer.fill(offset,buffer);
        break;
      }
  finally {
        bufferClaim.commit();
      }
    }
 else     if (Publication.NOT_CONNECTED == offer) {
      throw new NotConnectedException();
    }
  }
 while (true);
}

Builder addLenient(String line){
  int index=line.indexOf(":",1);
  if (index != -1) {
    return addLenient(line.substring(0,index),line.substring(index + 1));
  }
 else   if (line.startsWith(":")) {
    return addLenient("",line.substring(1));
  }
 else {
    return addLenient("",line);
  }
}

protected boolean tableExists(Table t) throws SQLException {
  String sql="SELECT * FROM pg_tables WHERE " + (t.isTemporary() ? "" : ("schemaname='" + t.getSchema() + "' AND ")) + "tablename='"+ (t.isTemporary() ? (t.getSchema() + "_") : "")+ t.getName()+ "'";
  Statement stmt=dbConn.createStatement();
  try {
    ResultSet rs=stmt.executeQuery(sql);
    return rs.next();
  }
  finally {
    if (stmt != null) {
      try {
        stmt.close();
      }
 catch (      SQLException e) {
      }
    }
  }
}

private void readUnlockedThread(){
  final long thisThreadId=Thread.currentThread().getId();
  final Integer entry=threadLockMap.get(thisThreadId);
  assert entry != null;
  if (entry.intValue() == 1) {
    threadLockMap.remove(thisThreadId);
  }
 else {
    threadLockMap.put(thisThreadId,entry.intValue() - 1);
  }
}

boolean isSingleWindowStandardOffset(){
  return windowEnd.equals(LocalDateTime.MAX) && timeDefinition == TimeDefinition.WALL && fixedSavingAmountSecs == null && lastRuleList.isEmpty() && ruleList.isEmpty();
}

public void add(Character ok){
  add(ok.charValue());
}

private Workflow.Method deleteVolumesMethod(URI systemURI,List<URI> volumeURIs){
  return new Workflow.Method("deleteVolumes",systemURI,volumeURIs);
}

public boolean remove(AccessibleState state){
  if (states == null) {
    return false;
  }
 else {
    return states.removeElement(state);
  }
}

public void testRadix10Pos(){
  String value="2387627892347567398736473476";
  int radix=16;
  BigInteger aNumber=new BigInteger(value,radix);
  String result=aNumber.toString(radix);
  assertTrue(result.equals(value));
}

public void outputExampleXML(PrintWriter writer,AttributeRule rule){
  writer.print(" " + rule.getName() + "=\"");
  if (rule.hasExample()) {
    writer.print(rule.getExample());
  }
 else {
    outputAttributeValue(writer,rule.getAttributeClass());
  }
  writer.print("\"");
}

private void beforeValue() throws JSONException {
  if (stack.isEmpty()) {
    return;
  }
  Scope context=peek();
  if (context == Scope.EMPTY_ARRAY) {
    replaceTop(Scope.NONEMPTY_ARRAY);
    newline();
  }
 else   if (context == Scope.NONEMPTY_ARRAY) {
    out.append(',');
    newline();
  }
 else   if (context == Scope.DANGLING_KEY) {
    out.append(indent == null ? ":" : ": ");
    replaceTop(Scope.NONEMPTY_OBJECT);
  }
 else   if (context != Scope.NULL) {
    throw new JSONException("Nesting problem");
  }
}

public static double calculateJulianDate(GregorianCalendar cal){
  int year=cal.get(Calendar.YEAR);
  int month=cal.get(Calendar.MONTH);
  int day=cal.get(Calendar.DAY_OF_MONTH);
  month++;
  if ((month == 1) || (month == 2)) {
    year-=1;
    month+=12;
  }
  int A=year / 100;
  int B=(int)(2 - A + (A / 4));
  int C=(int)(365.25 * (float)year);
  int D=(int)(30.6001 * (float)(month + 1));
  double julianDate=(double)(B + C + D+ day) + 1720994.5;
  return julianDate;
}

public boolean isUploadInProgress(){
  return mUploadStarted.get();
}

private int indexOf(int tabId){
  return mTabIdList.indexOf(tabId);
}

public NdefMessage(NdefRecord record,NdefRecord... records){
  if (record == null)   throw new NullPointerException("record cannot be null");
  for (  NdefRecord r : records) {
    if (r == null) {
      throw new NullPointerException("record cannot be null");
    }
  }
  mRecords=new NdefRecord[1 + records.length];
  mRecords[0]=record;
  System.arraycopy(records,0,mRecords,1,records.length);
}

private int findCheckpointPosition(int[] cids){
  if (checkpointPeriod < 1) {
    return -1;
  }
  if (cids.length == 0) {
    throw new IllegalArgumentException();
  }
  int firstCID=cids[0];
  if ((firstCID + 1) % checkpointPeriod == 0) {
    return cidPosition(cids,firstCID);
  }
 else {
    int nextCkpIndex=(((firstCID / checkpointPeriod) + 1) * checkpointPeriod) - 1;
    if (nextCkpIndex <= cids[cids.length - 1]) {
      return cidPosition(cids,nextCkpIndex);
    }
  }
  return -1;
}

private boolean readNextLine() throws IOException {
  if (headerLines.hasMoreElements()) {
    try {
      pos=0;
      String line=(headerLines.nextElement() + LINE_SEPERATOR);
      if (!headerLines.hasMoreElements()) {
        line+=LINE_SEPERATOR;
      }
      currLine=line.getBytes("US-ASCII");
      return true;
    }
 catch (    UnsupportedEncodingException e) {
      throw new IOException("US-ASCII encoding not supported by this platform ?!");
    }
  }
 else {
    return false;
  }
}

private boolean pause(){
  try {
    U.await(pauseLatch,REMAP_PAUSE,MILLISECONDS);
    return true;
  }
 catch (  IgniteInterruptedCheckedException e) {
    onDone(e);
    return false;
  }
}

public static InputStream toInputStream(final CharSequence input){
  return IOUtils.toInputStream(input,Charset.defaultCharset());
}

private static ITLRestRep createInitiatorTargetRefRep(ExportGroup exportGroup,BlockObject blockObject,String hlu,Initiator initiator,StoragePort port,FCZoneReference fcZoneReference){
  ITLRestRep rep=new ITLRestRep();
  rep.setHlu(Integer.parseInt(hlu));
  ITLRestRep.ITLBlockObjectRestRep blockObjectRestRep=new ITLRestRep.ITLBlockObjectRestRep();
  blockObjectRestRep.setId(blockObject.getId());
  blockObjectRestRep.setLink(new RestLinkRep("self",RestLinkFactory.newLink(blockObject)));
  blockObjectRestRep.setWwn(getBlockObjectFormattedWWN(blockObject));
  rep.setBlockObject(blockObjectRestRep);
  ITLRestRep.ITLInitiatorRestRep initiatorRestRep=new ITLRestRep.ITLInitiatorRestRep();
  initiatorRestRep.setId(initiator.getId());
  initiatorRestRep.setLink(new RestLinkRep("self",RestLinkFactory.newLink(initiator)));
  initiatorRestRep.setPort(initiator.getInitiatorPort());
  rep.setInitiator(initiatorRestRep);
  ITLRestRep.ITLStoragePortRestRep storagePortRestRep=new ITLRestRep.ITLStoragePortRestRep();
  if (port != null) {
    storagePortRestRep.setId(port.getId());
    storagePortRestRep.setLink(new RestLinkRep("self",RestLinkFactory.newLink(port)));
    storagePortRestRep.setPort(port.getPortNetworkId());
    if (port.getIpAddress() != null) {
      storagePortRestRep.setIpAddress(port.getIpAddress());
      storagePortRestRep.setTcpPort(String.valueOf(port.getTcpPortNumber()));
    }
  }
  rep.setStoragePort(storagePortRestRep);
  rep.setExport(toNamedRelatedResource(exportGroup,exportGroup.getLabel()));
  if (fcZoneReference != null) {
    rep.setSanZoneName(fcZoneReference.getZoneName());
  }
  return rep;
}

public void write(final int c) throws IOException {
  if (m_writer != null)   m_writer.write(c);
  if (count >= buf_length)   flushBuffer();
  if (c < 0x80) {
    buf[count++]=(byte)(c);
  }
 else   if (c < 0x800) {
    buf[count++]=(byte)(0xc0 + (c >> 6));
    buf[count++]=(byte)(0x80 + (c & 0x3f));
  }
 else {
    buf[count++]=(byte)(0xe0 + (c >> 12));
    buf[count++]=(byte)(0x80 + ((c >> 6) & 0x3f));
    buf[count++]=(byte)(0x80 + (c & 0x3f));
  }
}

private static List<COperandTree> convert(final INaviModule module,final List<Operand> operands){
  final List<COperandTree> convertedOperands=new ArrayList<COperandTree>();
  for (  final Operand operand : operands) {
    convertedOperands.add(module.createOperand(convert(module,operand.getRootNode(),null)));
  }
  return convertedOperands;
}

public static String xmlEscape(String s){
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < s.length(); i++) {
    char ch=s.charAt(i);
switch (ch) {
case '"':
      sb.append("&quot;");
    break;
case '&':
  sb.append("&amp;");
break;
case '\'':
sb.append("&apos;");
break;
case '<':
sb.append("&lt;");
break;
case '>':
sb.append("&gt;");
break;
case '\n':
sb.append("&#xA;");
break;
case '\r':
sb.append("&#xD;");
break;
case '\t':
sb.append("&#x9;");
break;
case '\0':
break;
default :
sb.append(ch);
break;
}
}
return sb.toString();
}

public boolean writeHeader(OutputStream os){
  try {
    writeInt(os,CACHE_MAGIC);
    writeString(os,key);
    writeString(os,etag == null ? "" : etag);
    writeLong(os,serverDate);
    writeLong(os,ttl);
    writeLong(os,softTtl);
    writeStringStringMap(responseHeaders,os);
    os.flush();
    return true;
  }
 catch (  IOException e) {
    VolleyLog.d("%s",e.toString());
    return false;
  }
}

@VisibleForTesting public Bitmap ensureNormalizedIcon(Bitmap icon,String origin){
  if (icon == null || icon.getWidth() == 0) {
    if (mIconGenerator == null) {
      int cornerRadiusPx=Math.min(mLargeIconWidthPx,mLargeIconHeightPx) / 2;
      mIconGenerator=new RoundedIconGenerator(mLargeIconWidthPx,mLargeIconHeightPx,cornerRadiusPx,NOTIFICATION_ICON_BG_COLOR,NOTIFICATION_TEXT_SIZE_DP * mDensity);
    }
    return mIconGenerator.generateIconForUrl(origin,true);
  }
  if (icon.getWidth() > mLargeIconWidthPx || icon.getHeight() > mLargeIconHeightPx) {
    return icon.createScaledBitmap(icon,mLargeIconWidthPx,mLargeIconHeightPx,false);
  }
  return icon;
}

protected boolean[] canHandleZeroTraining(boolean nominalPredictor,boolean numericPredictor,boolean stringPredictor,boolean datePredictor,boolean relationalPredictor,boolean multiInstance,int classType){
  print("handle zero training instances");
  printAttributeSummary(nominalPredictor,numericPredictor,stringPredictor,datePredictor,relationalPredictor,multiInstance,classType);
  print("...");
  ArrayList<String> accepts=new ArrayList<String>();
  accepts.add("train");
  accepts.add("value");
  int numTrain=0, numClasses=2, missingLevel=0;
  boolean predictorMissing=false, classMissing=false;
  return runBasicTest(nominalPredictor,numericPredictor,stringPredictor,datePredictor,relationalPredictor,multiInstance,classType,missingLevel,predictorMissing,classMissing,numTrain,numClasses,accepts);
}

public SQLQuery(String typeName,String sqlExpression){
  this(sqlExpression,typeName,null,DEFAULT_QUERY_RESULT_TYPE,null);
}

private static void checkOffset(String value,int offset,char expected) throws IndexOutOfBoundsException {
  char found=value.charAt(offset);
  if (found != expected) {
    throw new IndexOutOfBoundsException("Expected '" + expected + "' character but found '"+ found+ "'");
  }
}

public boolean isInNet(String host,String pattern,String mask){
  host=dnsResolve(host);
  if (host == null || host.length() == 0) {
    return false;
  }
  long lhost=parseIpAddressToLong(host);
  long lpattern=parseIpAddressToLong(pattern);
  long lmask=parseIpAddressToLong(mask);
  return (lhost & lmask) == lpattern;
}

protected static Pair<String,String> rrxRegister(final long offset,final ITranslationEnvironment environment,final List<ReilInstruction> instructions,final String registerNodeValue){
  final String shifterOperand=environment.getNextVariableString();
  final String shifterCarryOut=environment.getNextVariableString();
  final String tmpVar1=environment.getNextVariableString();
  final String tmpVar2=environment.getNextVariableString();
  final String tmpVar3=environment.getNextVariableString();
  long baseOffset=offset;
  instructions.add(ReilHelpers.createBsh(baseOffset++,byteSize,"C",wordSize,thirtyOneSet,dWordSize,tmpVar1));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dWordSize,registerNodeValue,byteSize,"-" + oneSet,dWordSize,tmpVar2));
  instructions.add(ReilHelpers.createOr(baseOffset++,dWordSize,tmpVar1,dWordSize,tmpVar2,dWordSize,tmpVar3));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dWordSize,tmpVar3,dWordSize,bitMaskAllBitsSet,dWordSize,shifterOperand));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dWordSize,registerNodeValue,byteSize,String.valueOf(1),byteSize,shifterCarryOut));
  return new Pair<String,String>(shifterOperand,shifterCarryOut);
}

public int enumerate(Thread[] threads){
  return enumerate(threads,true);
}

public void findAndUndo(Object someObj){
  if (someObj instanceof LayerHandler) {
    logger.fine("LayersPanel removing LayerHandler");
    if (getLayerHandler() == (LayerHandler)someObj) {
      setLayerHandler(null);
    }
  }
  if (controls != null && someObj != this) {
    controls.findAndUndo(someObj);
  }
  if (someObj instanceof Layer) {
    paneLookUp.remove((Layer)someObj);
  }
}

public void start(){
  log.info("Start DR health monitor {} with frequency {}",this.name,this.frequencyInSecs);
  stopped=false;
  Thread drHealthMonitorThread=new Thread(this);
  drHealthMonitorThread.setName(this.name);
  drHealthMonitorThread.start();
}

public void connect(String eventSourceUrl) throws IOException {
  LOG.entering(CLASS_NAME,"connect",eventSourceUrl);
  if (stream != null) {
    LOG.warning("Reusing the same event source for a differnt URL, please create a new EventSource object");
    throw new IllegalArgumentException("Reusing the same event source for a differnt URL, please create a new EventSource object");
  }
  stream=new SseEventStream(eventSourceUrl);
  stream.setListener(eventStreamListener);
  stream.connect();
}

private static String methodName(@NonNls final String method){
  return GitSSHHandler.HANDLER_NAME + "." + method;
}

public DataRow removeDataRow(int index){
  return dataList.remove(index);
}

public void put(Object key,Object value){
  int bucket=(key.hashCode() & 0x7FFFFFFF) % fTableSize;
  Entry entry=search(key,bucket);
  if (entry != null) {
    entry.value=value;
  }
 else {
    entry=new Entry(key,value,fBuckets[bucket]);
    fBuckets[bucket]=entry;
    fNum++;
  }
}

public void valueChanged(ListSelectionEvent e){
  if (_table == null) {
    return;
  }
  int row=_table.getSelectedRow();
  if (log.isDebugEnabled()) {
    log.debug("Table valueChanged: row= " + row);
  }
  if (row >= 0) {
    _addButton.setEnabled(true);
    _addButton.setToolTipText(null);
    if (_type != null && _type.equals("SignalHead")) {
      makeIconMap(_pickListModel.getBeanAt(row));
      clearIconPanel();
      doIconPanel();
    }
  }
 else {
    _addButton.setEnabled(false);
    _addButton.setToolTipText(Bundle.getMessage("ToolTipPickFromTable"));
  }
  validate();
}

private int processPollFds() throws IOException {
  if (pollFds.get(0).revents == POLLIN) {
    byte[] buffer=new byte[8];
    while (IoBridge.read(wakeupIn,buffer,0,1) > 0) {
    }
  }
  int readyKeyCount=0;
  for (int i=1; i < pollFds.size(); ++i) {
    StructPollfd pollFd=pollFds.get(i);
    if (pollFd.revents == 0) {
      continue;
    }
    if (pollFd.fd == null) {
      break;
    }
    SelectionKeyImpl key=(SelectionKeyImpl)pollFd.userData;
    pollFd.fd=null;
    pollFd.userData=null;
    int ops=key.interestOpsNoCheck();
    int selectedOps=0;
    if ((pollFd.revents & POLLHUP) != 0) {
      selectedOps|=ops;
    }
    if ((pollFd.revents & POLLIN) != 0) {
      selectedOps|=ops & (OP_ACCEPT | OP_READ);
    }
    if ((pollFd.revents & POLLOUT) != 0) {
      if (key.isConnected()) {
        selectedOps|=ops & OP_WRITE;
      }
 else {
        selectedOps|=ops & OP_CONNECT;
      }
    }
    if (selectedOps != 0) {
      boolean wasSelected=mutableSelectedKeys.contains(key);
      if (wasSelected && key.readyOps() != selectedOps) {
        key.setReadyOps(key.readyOps() | selectedOps);
        ++readyKeyCount;
      }
 else       if (!wasSelected) {
        key.setReadyOps(selectedOps);
        mutableSelectedKeys.add(key);
        ++readyKeyCount;
      }
    }
  }
  return readyKeyCount;
}

private void fitImageToView(){
  Drawable drawable=getDrawable();
  if (drawable == null || drawable.getIntrinsicWidth() == 0 || drawable.getIntrinsicHeight() == 0) {
    return;
  }
  if (matrix == null || prevMatrix == null) {
    return;
  }
  int drawableWidth=drawable.getIntrinsicWidth();
  int drawableHeight=drawable.getIntrinsicHeight();
  float scaleX=(float)viewWidth / drawableWidth;
  float scaleY=(float)viewHeight / drawableHeight;
switch (mScaleType) {
case CENTER:
    scaleX=scaleY=1;
  break;
case CENTER_CROP:
scaleX=scaleY=Math.max(scaleX,scaleY);
break;
case CENTER_INSIDE:
scaleX=scaleY=Math.min(1,Math.min(scaleX,scaleY));
case FIT_CENTER:
scaleX=scaleY=Math.min(scaleX,scaleY);
break;
case FIT_XY:
break;
default :
throw new UnsupportedOperationException("TouchImageView does not support FIT_START or FIT_END");
}
float redundantXSpace=viewWidth - (scaleX * drawableWidth);
float redundantYSpace=viewHeight - (scaleY * drawableHeight);
matchViewWidth=viewWidth - redundantXSpace;
matchViewHeight=viewHeight - redundantYSpace;
if (!isZoomed() && !imageRenderedAtLeastOnce) {
matrix.setScale(scaleX,scaleY);
matrix.postTranslate(redundantXSpace / 2,redundantYSpace / 2);
normalizedScale=1;
}
 else {
if (prevMatchViewWidth == 0 || prevMatchViewHeight == 0) {
savePreviousImageValues();
}
prevMatrix.getValues(m);
m[Matrix.MSCALE_X]=matchViewWidth / drawableWidth * normalizedScale;
m[Matrix.MSCALE_Y]=matchViewHeight / drawableHeight * normalizedScale;
float transX=m[Matrix.MTRANS_X];
float transY=m[Matrix.MTRANS_Y];
float prevActualWidth=prevMatchViewWidth * normalizedScale;
float actualWidth=getImageWidth();
translateMatrixAfterRotate(Matrix.MTRANS_X,transX,prevActualWidth,actualWidth,prevViewWidth,viewWidth,drawableWidth);
float prevActualHeight=prevMatchViewHeight * normalizedScale;
float actualHeight=getImageHeight();
translateMatrixAfterRotate(Matrix.MTRANS_Y,transY,prevActualHeight,actualHeight,prevViewHeight,viewHeight,drawableHeight);
matrix.setValues(m);
}
fixTrans();
setImageMatrix(matrix);
}

public static boolean isIntermediateTable(String tableName,SQLiteDatabase db){
  if (!TextUtils.isEmpty(tableName)) {
    if (tableName.matches("[0-9a-zA-Z]+_[0-9a-zA-Z]+")) {
      Cursor cursor=null;
      try {
        cursor=db.query(Const.TableSchema.TABLE_NAME,null,null,null,null,null,null);
        if (cursor.moveToFirst()) {
          do {
            String tableNameDB=cursor.getString(cursor.getColumnIndexOrThrow(Const.TableSchema.COLUMN_NAME));
            if (tableName.equalsIgnoreCase(tableNameDB)) {
              int tableType=cursor.getInt(cursor.getColumnIndexOrThrow(Const.TableSchema.COLUMN_TYPE));
              if (tableType == Const.TableSchema.INTERMEDIATE_JOIN_TABLE) {
                return true;
              }
              break;
            }
          }
 while (cursor.moveToNext());
        }
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
 finally {
        if (cursor != null) {
          cursor.close();
        }
      }
    }
  }
  return false;
}

public static void initialize(File helpDir) throws HelpException {
  if (helpDir.isDirectory() && helpDir.exists())   HelpManager.helpDir=helpDir;
 else   throw new HelpException("Help directory is missing or invalid: " + helpDir.getAbsolutePath(),null);
}

public RealMatrix create(){
  RealMatrix rotation=newIdentityMatrix();
  for (  Plane plane : planes) {
    double theta=plane.getTheta();
    if (Double.isNaN(theta)) {
      continue;
    }
    rotation=rotation.multiply(newRotationMatrix(plane.getFirstAxis(),plane.getSecondAxis(),theta));
  }
  return rotation;
}

public static String toUpperCase(String str){
  return str.toUpperCase(Locale.ENGLISH);
}

protected static void init(){
  String notificationfactoryClassName=null;
  try {
    notificationfactoryClassName=System.getProperty(NOTIFICATION_FACTORY_NAME);
  }
 catch (  SecurityException e) {
    throw new RuntimeException(e);
  }
  if (notificationfactoryClassName != null) {
    Class<?> nfc;
    try {
      nfc=Class.forName(notificationfactoryClassName);
      factory=(INotificationManagerFactory)nfc.newInstance();
    }
 catch (    ClassNotFoundException|InstantiationException|IllegalAccessException e) {
      throw new RuntimeException(e);
    }
  }
 else {
    factory=new SyslogNotificationFactory();
  }
}

public boolean isDeclaredEntity(String entityName){
  Entity entity=(Entity)fEntities.get(entityName);
  return entity != null;
}

private void openContextMenu(MouseEvent e){
  if (e.isPopupTrigger()) {
    selectClicked(e,false);
    List<RemovedListItem> selectedItems=list.getSelectedValuesList();
    List<StreamInfo> selected=new ArrayList<>();
    for (    RemovedListItem item : selectedItems) {
      selected.add(item.getStreamInfo());
    }
    StreamInfosContextMenu m=new StreamInfosContextMenu(selected,false);
    for (    ContextMenuListener cml : contextMenuListeners) {
      m.addContextMenuListener(cml);
    }
    m.show(list,e.getX(),e.getY());
  }
}

private boolean put(boolean isRoot,Vector names,int len,Object value){
  if (len == 0) {
    if (isRoot) {
      if (rootValue != null)       return false;
      rootValue=value;
    }
 else {
      if (otherValue != null)       return false;
      otherValue=value;
    }
    return true;
  }
 else {
    Object name=names.elementAt(len - 1);
    ContextMap nestedMap=(ContextMap)nameTable.get(name);
    if (nestedMap == null) {
      nestedMap=new ContextMap();
      nameTable.put(name,nestedMap);
    }
    return nestedMap.put(isRoot,names,len - 1,value);
  }
}

static String encodeHighLevel(String msg,Compaction compaction) throws WriterException {
  byte[] bytes=null;
  StringBuilder sb=new StringBuilder(msg.length());
  int len=msg.length();
  int p=0;
  int textSubMode=SUBMODE_ALPHA;
  if (compaction == Compaction.TEXT) {
    encodeText(msg,p,len,sb,textSubMode);
  }
 else   if (compaction == Compaction.BYTE) {
    bytes=getBytesForMessage(msg);
    encodeBinary(bytes,p,bytes.length,BYTE_COMPACTION,sb);
  }
 else   if (compaction == Compaction.NUMERIC) {
    sb.append((char)LATCH_TO_NUMERIC);
    encodeNumeric(msg,p,len,sb);
  }
 else {
    int encodingMode=TEXT_COMPACTION;
    while (p < len) {
      int n=determineConsecutiveDigitCount(msg,p);
      if (n >= 13) {
        sb.append((char)LATCH_TO_NUMERIC);
        encodingMode=NUMERIC_COMPACTION;
        textSubMode=SUBMODE_ALPHA;
        encodeNumeric(msg,p,n,sb);
        p+=n;
      }
 else {
        int t=determineConsecutiveTextCount(msg,p);
        if (t >= 5 || n == len) {
          if (encodingMode != TEXT_COMPACTION) {
            sb.append((char)LATCH_TO_TEXT);
            encodingMode=TEXT_COMPACTION;
            textSubMode=SUBMODE_ALPHA;
          }
          textSubMode=encodeText(msg,p,t,sb,textSubMode);
          p+=t;
        }
 else {
          if (bytes == null) {
            bytes=getBytesForMessage(msg);
          }
          int b=determineConsecutiveBinaryCount(msg,bytes,p);
          if (b == 0) {
            b=1;
          }
          if (b == 1 && encodingMode == TEXT_COMPACTION) {
            encodeBinary(bytes,p,1,TEXT_COMPACTION,sb);
          }
 else {
            encodeBinary(bytes,p,b,encodingMode,sb);
            encodingMode=BYTE_COMPACTION;
            textSubMode=SUBMODE_ALPHA;
          }
          p+=b;
        }
      }
    }
  }
  return sb.toString();
}

protected void queue(final Path file) throws InterruptedException {
  if (null != base && file.startsWith(base)) {
    queue.put(file.subpath(base.getNameCount(),file.getNameCount()));
  }
 else {
    queue.put(file);
  }
}

public InputStream openPath() throws IOException {
  Path filePath=Paths.get(path());
  if (Files.exists(filePath)) {
    logger.info("Opening keystore at file path {}",filePath);
    return Files.newInputStream(filePath);
  }
  URL resourceUrl=Resources.getResource(path());
  logger.info("Opening keystore at resource path {}",resourceUrl);
  return resourceUrl.openStream();
}

public static String replaceCharacters(final ConversionMethod conversionMethod,final String input,final int fromCharacter,final int toCharacter,final String wrap){
  String convertedText=input;
  for (int i=fromCharacter; i <= toCharacter; i++) {
    final String characterToReplace=new String(Character.toChars(i));
    if (wrap != null) {
      convertedText=convertedText.replace(characterToReplace,wrap + convertText(conversionMethod,characterToReplace) + wrap);
    }
 else {
      convertedText=convertedText.replace(characterToReplace,convertText(conversionMethod,characterToReplace));
    }
  }
  return convertedText;
}

public static byte[] hmac_sha1(byte[] keyBytes,byte[] text) throws NoSuchAlgorithmException, InvalidKeyException {
  Mac hmacSha1;
  try {
    hmacSha1=Mac.getInstance("HmacSHA1");
  }
 catch (  final NoSuchAlgorithmException nsae) {
    hmacSha1=Mac.getInstance("HMAC-SHA-1");
  }
  final SecretKeySpec macKey=new SecretKeySpec(keyBytes,"RAW");
  hmacSha1.init(macKey);
  return hmacSha1.doFinal(text);
}

public static byte[] readBytesAndClose(InputStream in,int length) throws IOException {
  try {
    if (length <= 0) {
      length=Integer.MAX_VALUE;
    }
    int block=Math.min(Constants.IO_BUFFER_SIZE,length);
    ByteArrayOutputStream out=new ByteArrayOutputStream(block);
    copy(in,out,length);
    return out.toByteArray();
  }
 catch (  Exception e) {
    throw DbException.convertToIOException(e);
  }
 finally {
    in.close();
  }
}

public IdentValue asIdentValue(){
  if (!identIsSet) {
    _identVal=IdentValue.getByIdentString(cssPrimitiveValue.getCssText());
    identIsSet=true;
  }
  return _identVal;
}

public final TestSuite build(){
  rootSuite=new TestSuite(getSuiteName());
  currentClassname=null;
  try {
    for (    TestMethod test : testGrouping.getTests()) {
      if (satisfiesAllPredicates(test)) {
        addTest(test);
      }
    }
    if (testCases.size() > 0) {
      for (      TestCase testCase : testCases) {
        if (satisfiesAllPredicates(new TestMethod(testCase))) {
          addTest(testCase);
        }
      }
    }
  }
 catch (  Exception exception) {
    Log.i("TestSuiteBuilder","Failed to create test.",exception);
    TestSuite suite=new TestSuite(getSuiteName());
    suite.addTest(new FailedToCreateTests(exception));
    return suite;
  }
  return rootSuite;
}

public javax.naming.Binding next() throws NamingException {
  if (more && counter >= _bindingList.value.length) {
    getMore();
  }
  if (more && counter < _bindingList.value.length) {
    org.omg.CosNaming.Binding bndg=_bindingList.value[counter];
    counter++;
    return mapBinding(bndg);
  }
 else {
    throw new NoSuchElementException();
  }
}

protected <T extends ASTNode>T moveNode(T oldNode,ASTRewrite rewrite){
  T movedNode;
  if (ASTNodes.isExistingNode(oldNode))   movedNode=ASTNodes.createMoveTarget(rewrite,oldNode);
 else   movedNode=ASTNodes.copySubtree(rewrite.getAST(),oldNode);
  return movedNode;
}

@Ignore @Test public void shouldBeFasterWhenRunningProcessingInParallel() throws Exception {
  testMojoWithConfigurableWroManagerFactoryWithValidConfigFileSet();
  final long begin=System.currentTimeMillis();
  victim.setParallelProcessing(false);
  testMojoWithConfigurableWroManagerFactoryWithValidConfigFileSet();
  final long endSerial=System.currentTimeMillis();
  victim.setParallelProcessing(true);
  testMojoWithConfigurableWroManagerFactoryWithValidConfigFileSet();
  final long endParallel=System.currentTimeMillis();
  final long serial=endSerial - begin;
  final long parallel=endParallel - endSerial;
  LOG.info("serial took: {}ms",serial);
  LOG.info("parallel took: {}ms",parallel);
  assertTrue(String.format("Serial (%s) > Parallel (%s)",serial,parallel),serial > parallel);
}

public static TetradMatrix incompleteCholeskyGramMatrix(List<Kernel> kernels,DataSet dataset,List<Node> nodes,double precision){
  if (precision <= 0) {
    throw new IllegalArgumentException("Precision must be > 0");
  }
  int m=dataset.getNumRows();
  TetradMatrix G=new TetradMatrix(m,m);
  double[] Dadv=new double[m];
  int[] p=new int[m];
  for (int i=0; i < m; i++) {
    Dadv[i]=evaluate(kernels,dataset,nodes,i,i);
    p[i]=i;
  }
  int cols=m;
  for (int k=0; k < m; k++) {
    double best=Dadv[k];
    int bestInd=k;
    for (int j=(k + 1); j < m; j++) {
      if (Dadv[j] > best / .99) {
        best=Dadv[j];
        bestInd=j;
      }
    }
    if (best < precision) {
      cols=k - 1;
      break;
    }
    int pk=p[k];
    p[k]=p[bestInd];
    p[bestInd]=pk;
    double dk=Dadv[k];
    Dadv[k]=Dadv[bestInd];
    Dadv[bestInd]=dk;
    for (int j=0; j < k; j++) {
      double gk=G.get(k,j);
      G.set(k,j,G.get(bestInd,j));
      G.set(bestInd,j,gk);
    }
    double diag=Math.sqrt(Dadv[k]);
    G.set(k,k,diag);
    for (int j=(k + 1); j < m; j++) {
      double s=0.0;
      for (int i=0; i < k; i++) {
        s+=G.get(j,i) * G.get(k,i);
      }
      G.set(j,k,(evaluate(kernels,dataset,nodes,p[j],p[k]) - s) / diag);
    }
    for (int j=(k + 1); j < m; j++) {
      Dadv[j]-=Math.pow(G.get(j,k),2);
    }
    Dadv[k]=0;
  }
  TetradMatrix Gm=new TetradMatrix(m,cols);
  for (int i=0; i < m; i++) {
    for (int j=0; j < cols; j++) {
      Gm.set(i,j,G.get(i,j));
    }
  }
  return Gm;
}

FormatSpecifierParser(String format){
  this.format=format;
  this.length=format.length();
}

public void addConsumerType(AttributeType type){
  if (!consumerTypes.contains(type)) {
    consumerTypes.add(type);
  }
}

public final void printVerboseMessage(final LocalizableMessage msg){
  if (isVerbose()) {
    out.println(wrap(msg));
  }
}

private static void orderMatches(List<Variable> typeMatches,String paramName){
  if (typeMatches != null)   Collections.sort(typeMatches,new MatchComparator(paramName));
}

SortedSet<String> typesToImport(){
  SortedSet<String> typesToImport=new TreeSet<String>();
  for (  Map.Entry<String,Spelling> entry : imports.entrySet()) {
    if (entry.getValue().importIt) {
      typesToImport.add(entry.getKey());
    }
  }
  return typesToImport;
}

@Override public boolean isScraped(){
  if (!scraped) {
    if (!plot.isEmpty() && !(year.isEmpty() || year.equals("0")) && !(genres == null || genres.size() == 0)&& !(actors == null || actors.size() == 0)) {
      return true;
    }
  }
  return scraped;
}

public NoiseTagLdaModel(InputStream in) throws IOException {
  GZIPInputStream zipin=new GZIPInputStream(in);
  BufferedInputStream bin=new BufferedInputStream(zipin);
  DataInputStream datain=new DataInputStream(bin);
  numTopics=datain.readInt();
  int numWords=datain.readInt();
  alpha=datain.readDouble();
  beta=datain.readDouble();
  locked=datain.readBoolean();
  wnz=new int[numTopics];
  Arrays.fill(wnz,0);
  for (int i=0; i < numWords; i++) {
    String word=datain.readUTF();
    int[] count=new int[numTopics];
    for (int j=0; j < numTopics; j++) {
      count[j]=datain.readInt();
      wnz[j]+=count[j];
      nw+=count[j];
    }
    nwz.put(word,count);
  }
  tnz=new int[numTopics + 1];
  Arrays.fill(tnz,0);
  int numTags=datain.readInt();
  eta=datain.readDouble();
  for (int i=0; i < numTags; i++) {
    String word=datain.readUTF();
    int[] count=new int[numTopics + 1];
    for (int j=0; j < numTopics + 1; j++) {
      count[j]=datain.readInt();
      tnz[j]+=count[j];
      nt+=count[j];
    }
    ntz.put(word,count);
  }
  noise=numTopics;
}

public void check(final int api){
  if (api == Opcodes.ASM4) {
    if (visibleTypeAnnotations != null && visibleTypeAnnotations.size() > 0) {
      throw new RuntimeException();
    }
    if (invisibleTypeAnnotations != null && invisibleTypeAnnotations.size() > 0) {
      throw new RuntimeException();
    }
    for (    FieldNode f : fields) {
      f.check(api);
    }
    for (    MethodNode m : methods) {
      m.check(api);
    }
  }
}

public static String RTFEnc(String s){
  int ln=s.length();
  int firstEscIdx=-1;
  int lastEscIdx=0;
  int plusOutLn=0;
  for (int i=0; i < ln; i++) {
    char c=s.charAt(i);
    if (c == '{' || c == '}' || c == '\\') {
      if (firstEscIdx == -1) {
        firstEscIdx=i;
      }
      lastEscIdx=i;
      plusOutLn++;
    }
  }
  if (firstEscIdx == -1) {
    return s;
  }
 else {
    char[] esced=new char[ln + plusOutLn];
    if (firstEscIdx != 0) {
      s.getChars(0,firstEscIdx,esced,0);
    }
    int dst=firstEscIdx;
    for (int i=firstEscIdx; i <= lastEscIdx; i++) {
      char c=s.charAt(i);
      if (c == '{' || c == '}' || c == '\\') {
        esced[dst++]='\\';
      }
      esced[dst++]=c;
    }
    if (lastEscIdx != ln - 1) {
      s.getChars(lastEscIdx + 1,ln,esced,dst);
    }
    return String.valueOf(esced);
  }
}

public String toString(cp_info constant_pool[]){
  return Integer.toString((int)bytes);
}

public InetNetwork(InetAddress inetAddress,int subnetBits){
  _inetAddress=inetAddress;
  _address=inetAddress.getAddress();
  if (subnetBits < 0)   subnetBits=8 * _address.length;
  _subnetBits=subnetBits;
  _subnetByte=subnetBits / 8;
  _subnetMask=~((1 << (8 - subnetBits % 8)) - 1) & 0xff;
}

public boolean equalArrayValue(Object otherValue){
  if (value instanceof Object[] && otherValue instanceof Object[]) {
    return Arrays.equals((Object[])value,(Object[])otherValue);
  }
  Class type=value.getClass();
  if (type != otherValue.getClass()) {
    return false;
  }
  if (type == int[].class) {
    return Arrays.equals((int[])value,(int[])otherValue);
  }
 else   if (type == byte[].class) {
    return Arrays.equals((byte[])value,(byte[])otherValue);
  }
 else   if (type == short[].class) {
    return Arrays.equals((short[])value,(short[])otherValue);
  }
 else   if (type == long[].class) {
    return Arrays.equals((long[])value,(long[])otherValue);
  }
 else   if (type == char[].class) {
    return Arrays.equals((char[])value,(char[])otherValue);
  }
 else   if (type == boolean[].class) {
    return Arrays.equals((boolean[])value,(boolean[])otherValue);
  }
 else   if (type == float[].class) {
    return Arrays.equals((float[])value,(float[])otherValue);
  }
 else   if (type == double[].class) {
    return Arrays.equals((double[])value,(double[])otherValue);
  }
  return false;
}

@Override public HierarchyWrapperOperation createSubOperation(){
  return new ToStringOperation(builder,baseIndent);
}

private static byte[] readClass(final InputStream is,boolean close) throws IOException {
  if (is == null) {
    throw new IOException("Class not found");
  }
  try {
    byte[] b=new byte[is.available()];
    int len=0;
    while (true) {
      int n=is.read(b,len,b.length - len);
      if (n == -1) {
        if (len < b.length) {
          byte[] c=new byte[len];
          System.arraycopy(b,0,c,0,len);
          b=c;
        }
        return b;
      }
      len+=n;
      if (len == b.length) {
        int last=is.read();
        if (last < 0) {
          return b;
        }
        byte[] c=new byte[b.length + 1000];
        System.arraycopy(b,0,c,0,len);
        c[len++]=(byte)last;
        b=c;
      }
    }
  }
  finally {
    if (close) {
      is.close();
    }
  }
}

protected final boolean execute() throws AdeException {
  logger.info("Starting execution: " + m_requestType.name());
  final long start=System.currentTimeMillis();
  final boolean success=doControlLogic();
  final long total=System.currentTimeMillis() - start;
  logger.info(m_requestType.name() + (success ? " done. " : " failed. ") + "Total time elapsed: "+ millisecondsToHumanTime(total));
  return success;
}

public abstract JsonValue sync() throws SynchronizationException ;

private boolean validConsist(){
  int cN=validConsist(consistTextField.getText());
  if (cN == -1) {
    consistStatus.setText(rb.getString("EditStateERROR"));
    JOptionPane.showMessageDialog(this,rb.getString("ToolTipConsist"),rb.getString("DIALOG_NceConsist"),JOptionPane.ERROR_MESSAGE);
    return false;
  }
  return true;
}

private void activity(){
  connectionCheckedCount=0;
}

public static ScheduleSpec computeValues(Object[] args) throws ScheduleParameterException {
  if (args.length <= 4 || args.length >= 8) {
    throw new ScheduleParameterException("Invalid number of crontab parameters, expecting between 5 and 7 parameters, received " + args.length);
  }
  EnumMap<ScheduleUnit,SortedSet<Integer>> unitMap=new EnumMap<ScheduleUnit,SortedSet<Integer>>(ScheduleUnit.class);
  Object minutes=args[0];
  Object hours=args[1];
  Object daysOfMonth=args[2];
  Object months=args[3];
  Object daysOfWeek=args[4];
  unitMap.put(ScheduleUnit.MINUTES,computeValues(minutes,ScheduleUnit.MINUTES));
  unitMap.put(ScheduleUnit.HOURS,computeValues(hours,ScheduleUnit.HOURS));
  SortedSet<Integer> resultMonths=computeValues(months,ScheduleUnit.MONTHS);
  if (daysOfWeek instanceof CronParameter && daysOfMonth instanceof CronParameter) {
    throw new ScheduleParameterException("Invalid combination between days of week and days of month fields for timer:at");
  }
  if (resultMonths != null && resultMonths.size() == 1 && (resultMonths.first() instanceof Integer)) {
    CronParameter parameter=null;
    if (daysOfMonth instanceof CronParameter) {
      parameter=((CronParameter)daysOfMonth);
    }
 else     if (daysOfWeek instanceof CronParameter) {
      parameter=((CronParameter)daysOfWeek);
    }
    if (parameter != null) {
      parameter.setMonth(resultMonths.first());
    }
  }
  SortedSet<Integer> resultDaysOfWeek=computeValues(daysOfWeek,ScheduleUnit.DAYS_OF_WEEK);
  SortedSet<Integer> resultDaysOfMonth=computeValues(daysOfMonth,ScheduleUnit.DAYS_OF_MONTH);
  if (resultDaysOfWeek != null && resultDaysOfWeek.size() == 1 && (resultDaysOfWeek.first() instanceof Integer)) {
    if (resultDaysOfWeek.first() > 6) {
      if (resultDaysOfMonth != null) {
        throw new ScheduleParameterException("Invalid combination between days of week and days of month fields for timer:at");
      }
      resultDaysOfMonth=resultDaysOfWeek;
      resultDaysOfWeek=null;
    }
  }
  if (resultDaysOfMonth != null && resultDaysOfMonth.size() == 1 && (resultDaysOfMonth.first() instanceof Integer)) {
    if (resultDaysOfWeek != null) {
      throw new ScheduleParameterException("Invalid combination between days of week and days of month fields for timer:at");
    }
  }
  unitMap.put(ScheduleUnit.DAYS_OF_WEEK,resultDaysOfWeek);
  unitMap.put(ScheduleUnit.DAYS_OF_MONTH,resultDaysOfMonth);
  unitMap.put(ScheduleUnit.MONTHS,resultMonths);
  if (args.length > 5) {
    unitMap.put(ScheduleUnit.SECONDS,computeValues(args[5],ScheduleUnit.SECONDS));
  }
  String timezone=null;
  if (args.length > 6) {
    if (!(args[6] instanceof WildcardParameter)) {
      if (!(args[6] instanceof String)) {
        throw new ScheduleParameterException("Invalid timezone parameter '" + args[6] + "' for timer:at, expected a string-type value");
      }
      timezone=(String)args[6];
    }
  }
  CronParameter optionalDayOfMonthOp=getOptionalSpecialOp(daysOfMonth);
  CronParameter optionalDayOfWeekOp=getOptionalSpecialOp(daysOfWeek);
  return new ScheduleSpec(unitMap,timezone,optionalDayOfMonthOp,optionalDayOfWeekOp);
}

public void remove(int position){
  mData.remove(position);
  notifyItemRemoved(position + getHeaderLayoutCount());
}

public AsyncBufferedOutputStream(OutputStream out,int bufSize,int maxBuffers){
  super(out);
  buffers=new ConcurrentLinkedDeque<>();
  buf=new byte[bufSize];
  flusherThread.start();
}

public boolean startlistContains(String x){
  if (startwords == null)   return true;
  return startwords.contains(x);
}

private void closeMediaInfo(){
  if (mediaInfo != null) {
    mediaInfo.close();
    mediaInfo=null;
  }
  miSnapshot=null;
}

public void addHeader(final Header header){
  headers.add(header);
}

private void readVersion(InputNode node,Object source,Label label) throws Exception {
  Object value=readInstance(node,source,label);
  Class expect=type.getType();
  if (value != null) {
    Version version=context.getVersion(expect);
    Double actual=version.revision();
    if (!value.equals(revision)) {
      revision.compare(actual,value);
    }
  }
}

protected Ignite startGridWithIgfs(String gridName,String igfsName,IgfsMode mode,@Nullable IgfsSecondaryFileSystem secondaryFs,@Nullable IgfsIpcEndpointConfiguration restCfg) throws Exception {
  FileSystemConfiguration igfsCfg=new FileSystemConfiguration();
  igfsCfg.setDataCacheName("dataCache");
  igfsCfg.setMetaCacheName("metaCache");
  igfsCfg.setName(igfsName);
  igfsCfg.setBlockSize(IGFS_BLOCK_SIZE);
  igfsCfg.setDefaultMode(mode);
  igfsCfg.setIpcEndpointConfiguration(restCfg);
  igfsCfg.setSecondaryFileSystem(secondaryFs);
  igfsCfg.setPrefetchBlocks(PREFETCH_BLOCKS);
  igfsCfg.setSequentialReadsBeforePrefetch(SEQ_READS_BEFORE_PREFETCH);
  CacheConfiguration dataCacheCfg=defaultCacheConfiguration();
  dataCacheCfg.setName("dataCache");
  dataCacheCfg.setCacheMode(PARTITIONED);
  dataCacheCfg.setNearConfiguration(null);
  dataCacheCfg.setWriteSynchronizationMode(CacheWriteSynchronizationMode.FULL_SYNC);
  dataCacheCfg.setAffinityMapper(new IgfsGroupDataBlocksKeyMapper(2));
  dataCacheCfg.setBackups(0);
  dataCacheCfg.setAtomicityMode(TRANSACTIONAL);
  dataCacheCfg.setOffHeapMaxMemory(0);
  CacheConfiguration metaCacheCfg=defaultCacheConfiguration();
  metaCacheCfg.setName("metaCache");
  metaCacheCfg.setCacheMode(REPLICATED);
  metaCacheCfg.setWriteSynchronizationMode(CacheWriteSynchronizationMode.FULL_SYNC);
  metaCacheCfg.setAtomicityMode(TRANSACTIONAL);
  IgniteConfiguration cfg=new IgniteConfiguration();
  cfg.setGridName(gridName);
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  discoSpi.setIpFinder(new TcpDiscoveryVmIpFinder(true));
  cfg.setDiscoverySpi(discoSpi);
  cfg.setCacheConfiguration(dataCacheCfg,metaCacheCfg);
  cfg.setFileSystemConfiguration(igfsCfg);
  cfg.setLocalHost("127.0.0.1");
  cfg.setConnectorConfiguration(null);
  return G.start(cfg);
}

TypeSimplifier(Types typeUtils,String packageName,Set<TypeMirror> types,TypeMirror base){
  this.typeUtils=typeUtils;
  Set<TypeMirror> typesPlusBase=new TypeMirrorSet(types);
  if (base != null) {
    typesPlusBase.add(base);
  }
  Set<TypeMirror> referenced=referencedClassTypes(typeUtils,typesPlusBase);
  Set<TypeMirror> defined=nonPrivateDeclaredTypes(typeUtils,base);
  this.imports=findImports(typeUtils,packageName,referenced,defined);
}

private List<Statistics> removeFailed(List<Statistics> statistics){
  List<Statistics> result=new ArrayList<>();
  for (  Statistics statistic : statistics) {
    if (statistic.getSucceeded())     result.add(statistic);
  }
  return result;
}

public void addAssociatedGefahr(GefaehrdungsUmsetzung gefaehrdung){
  if (!associatedGefaehrdungen.contains(gefaehrdung)) {
    associatedGefaehrdungen.add(gefaehrdung);
  }
}

public static byte[] packByteBufferIntoSingleByteArray(ByteBuffer[] byteBufferArr){
  if (null == byteBufferArr || byteBufferArr.length == 0) {
    return null;
  }
  int noOfCol=byteBufferArr.length;
  short toDetermineLengthOfByteArr=2;
  short offsetLen=(short)(noOfCol * 2 + toDetermineLengthOfByteArr);
  int totalBytes=calculateTotalBytes(byteBufferArr) + offsetLen;
  ByteBuffer buffer=ByteBuffer.allocate(totalBytes);
  buffer.putShort((short)(totalBytes - toDetermineLengthOfByteArr));
  buffer.putShort(offsetLen);
  for (int index=0; index < byteBufferArr.length - 1; index++) {
    ByteBuffer individualCol=byteBufferArr[index];
    int noOfBytes=individualCol.capacity();
    buffer.putShort((short)(offsetLen + noOfBytes));
    offsetLen+=noOfBytes;
    individualCol.rewind();
  }
  for (int index=0; index < byteBufferArr.length; index++) {
    ByteBuffer individualCol=byteBufferArr[index];
    buffer.put(individualCol.array());
  }
  buffer.rewind();
  return buffer.array();
}

public void connect(SocketAddress endpoint,int timeout) throws IOException {
  if (endpoint == null)   throw new IllegalArgumentException("connect: The address can't be null");
  if (timeout < 0)   throw new IllegalArgumentException("connect: timeout can't be negative");
  if (isClosed())   throw new SocketException("Socket is closed");
  if (!oldImpl && isConnected())   throw new SocketException("already connected");
  if (!(endpoint instanceof InetSocketAddress))   throw new IllegalArgumentException("Unsupported address type");
  InetSocketAddress epoint=(InetSocketAddress)endpoint;
  InetAddress addr=epoint.getAddress();
  int port=epoint.getPort();
  checkAddress(addr,"connect");
  SecurityManager security=System.getSecurityManager();
  if (security != null) {
    if (epoint.isUnresolved())     security.checkConnect(epoint.getHostName(),port);
 else     security.checkConnect(addr.getHostAddress(),port);
  }
  if (!created)   createImpl(true);
  if (!oldImpl)   impl.connect(epoint,timeout);
 else   if (timeout == 0) {
    if (epoint.isUnresolved())     impl.connect(addr.getHostName(),port);
 else     impl.connect(addr,port);
  }
 else   throw new UnsupportedOperationException("SocketImpl.connect(addr, timeout)");
  connected=true;
  bound=true;
}

private Pair<HashStepType,HashChainType> fetchHashStep(String uri,HashChainType currentChain) throws Exception {
  int hashIndex=uri.indexOf('#');
  if (hashIndex < 0) {
    throw new CodedException(X_MALFORMED_HASH_CHAIN,"Invalid hash step URI: %s",uri);
  }
  String baseUri=uri.substring(0,hashIndex);
  String fragment=uri.substring(hashIndex + 1);
  if (fragment.isEmpty()) {
    throw new CodedException(X_MALFORMED_HASH_CHAIN,"Invalid hash step URI: %s",uri);
  }
  HashChainType hashChain;
  if (baseUri.isEmpty()) {
    hashChain=currentChain;
  }
 else {
    hashChain=getHashChain(baseUri);
  }
  for (  HashStepType step : hashChain.getHashStep()) {
    if (fragment.equals(step.getId())) {
      return new ImmutablePair<>(step,hashChain);
    }
  }
  throw new CodedException(X_MALFORMED_HASH_CHAIN,"Invalid hash step URI: %s",uri);
}

@SuppressWarnings("RedundantIfStatement") public static boolean loadByCurrentClassloader(String clsName){
  if (clsName.startsWith("org.apache.ignite.internal.processors.hadoop.impl"))   return true;
  if (clsName.startsWith("org.apache.ignite.hadoop")) {
    if (clsName.contains("org.apache.ignite.hadoop.fs.v1.IgniteHadoopFileSystem") || clsName.contains("org.apache.ignite.hadoop.fs.v2.IgniteHadoopFileSystem") || clsName.contains("org.apache.ignite.hadoop.mapreduce.IgniteHadoopClientProtocolProvider"))     return true;
  }
  return false;
}

public void decrementTargetsCountAll(){
  final long decrementAndGet=targetsCountAll.decrementAndGet();
  if (decrementAndGet < 0) {
    targetsCountAll.set(0);
  }
}

private void addNotAvailableBusinessObjectDataStatuses(List<BusinessObjectDataStatus> notAvailableStatuses,List<StorageUnitEntity> storageUnitEntities,Set<BusinessObjectDataEntity> archivedBusinessObjectDataEntities){
  for (  StorageUnitEntity storageUnitEntity : storageUnitEntities) {
    notAvailableStatuses.add(createNotAvailableBusinessObjectDataStatus(storageUnitEntity,archivedBusinessObjectDataEntities));
  }
}

private List<JdbcStatement> createDefaultQueryJdbcStatements(){
  List<JdbcStatement> jdbcStatements=new ArrayList<>();
{
    JdbcStatement jdbcStatement=new JdbcStatement();
    jdbcStatement.setType(JdbcStatementType.QUERY);
    jdbcStatement.setSql(MockJdbcOperations.CASE_1_SQL);
    jdbcStatements.add(jdbcStatement);
  }
  return jdbcStatements;
}

private void testMemorySpatialIndex() throws SQLException {
  deleteDb("spatial");
  Connection conn=getConnection(URL);
  Statement stat=conn.createStatement();
  stat.execute("create memory table test(id int primary key, polygon geometry)");
  stat.execute("create spatial index idx_test_polygon on test(polygon)");
  stat.execute("insert into test values(1, 'POLYGON ((1 1, 1 2, 2 2, 1 1))')");
  stat.execute("insert into test values(2, null)");
  ResultSet rs;
  rs=stat.executeQuery("select * from test " + "where polygon && 'POLYGON ((1 1, 1 2, 2 2, 1 1))'::Geometry " + "and polygon && 'POLYGON ((10 10, 10 20, 20 20, 10 10))'::Geometry");
  assertFalse(rs.next());
  rs=stat.executeQuery("explain select * from test " + "where polygon && 'POLYGON ((1 1, 1 2, 2 2, 1 1))'::Geometry");
  rs.next();
  if (config.mvStore) {
    assertContains(rs.getString(1),"/* PUBLIC.IDX_TEST_POLYGON: POLYGON &&");
  }
  stat.executeQuery("select * from test where polygon > " + "'POLYGON ((1 1, 1 2, 2 2, 1 1))'::Geometry");
  stat.executeQuery("select * from test where polygon < " + "'POLYGON ((1 1, 1 2, 2 2, 1 1))'::Geometry");
  rs=stat.executeQuery("select * from test " + "where intersects(polygon, 'POLYGON ((1 1, 1 2, 2 2, 1 1))')");
  assertTrue(rs.next());
  rs=stat.executeQuery("select * from test " + "where intersects(polygon, 'POINT (1 1)')");
  assertTrue(rs.next());
  rs=stat.executeQuery("select * from test " + "where intersects(polygon, 'POINT (0 0)')");
  assertFalse(rs.next());
  stat.execute("drop table test");
  conn.close();
  deleteDb("spatial");
}

public static boolean isValid(Date expirationDate){
  Date currentDate=new Date();
  String formattedDate=dateFormat.format(currentDate);
  currentDate=convertDate(formattedDate);
  boolean isExpired=currentDate.after(expirationDate);
  boolean isEqual=currentDate.equals(expirationDate);
  if (isExpired == true || isEqual == true) {
    return true;
  }
  return false;
}

public long contentLength(){
  long size;
  try {
    size=Long.parseLong(request.getHeader(FileUpload.CONTENT_LENGTH));
  }
 catch (  NumberFormatException e) {
    size=request.getContentLength();
  }
  return size;
}

private E unlinkFirst(){
  Node<E> f=first;
  if (f == null)   return null;
  Node<E> n=f.next;
  E item=f.item;
  f.item=null;
  f.next=f;
  first=n;
  if (n == null)   last=null;
 else   n.prev=null;
  --count;
  notFull.signal();
  return item;
}

public void testZeroPos(){
  String numA="0";
  String numB="27384627835298756289327365";
  String res="27384627835298756289327365";
  BigInteger aNumber=new BigInteger(numA);
  BigInteger bNumber=new BigInteger(numB);
  BigInteger result=aNumber.xor(bNumber);
  assertTrue(res.equals(result.toString()));
}

public CheckBox addListener(Listener listener){
  if (listener != null && !listeners.contains(listener)) {
    listeners.add(listener);
  }
  return this;
}

@SuppressWarnings("unchecked") public Object[] toArray(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    Object[] a=new Object[count];
    int k=0;
    for (Node<E> p=first; p != null; p=p.next)     a[k++]=p.item;
    return a;
  }
  finally {
    lock.unlock();
  }
}

private void takePicture(){
  Log.d(TAG,"takePicture: ");
  lockFocus();
}

private int measureShort(int measureSpec){
  int result;
  int specMode=MeasureSpec.getMode(measureSpec);
  int specSize=MeasureSpec.getSize(measureSpec);
  if (specMode == MeasureSpec.EXACTLY) {
    result=specSize;
  }
 else {
    result=(int)(2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
    if (specMode == MeasureSpec.AT_MOST) {
      result=Math.min(result,specSize);
    }
  }
  return result;
}

private static int[][] parse(String members){
  Vector theRanges=new Vector();
  int n=(members == null ? 0 : members.length());
  int i=0;
  int state=0;
  int lb=0;
  int ub=0;
  char c;
  int digit;
  while (i < n) {
    c=members.charAt(i++);
switch (state) {
case 0:
      if (Character.isWhitespace(c)) {
        state=0;
      }
 else       if ((digit=Character.digit(c,10)) != -1) {
        lb=digit;
        state=1;
      }
 else {
        throw new IllegalArgumentException();
      }
    break;
case 1:
  if (Character.isWhitespace(c)) {
    state=2;
  }
 else   if ((digit=Character.digit(c,10)) != -1) {
    lb=10 * lb + digit;
    state=1;
  }
 else   if (c == '-' || c == ':') {
    state=3;
  }
 else   if (c == ',') {
    accumulate(theRanges,lb,lb);
    state=6;
  }
 else {
    throw new IllegalArgumentException();
  }
break;
case 2:
if (Character.isWhitespace(c)) {
state=2;
}
 else if (c == '-' || c == ':') {
state=3;
}
 else if (c == ',') {
accumulate(theRanges,lb,lb);
state=6;
}
 else {
throw new IllegalArgumentException();
}
break;
case 3:
if (Character.isWhitespace(c)) {
state=3;
}
 else if ((digit=Character.digit(c,10)) != -1) {
ub=digit;
state=4;
}
 else {
throw new IllegalArgumentException();
}
break;
case 4:
if (Character.isWhitespace(c)) {
state=5;
}
 else if ((digit=Character.digit(c,10)) != -1) {
ub=10 * ub + digit;
state=4;
}
 else if (c == ',') {
accumulate(theRanges,lb,ub);
state=6;
}
 else {
throw new IllegalArgumentException();
}
break;
case 5:
if (Character.isWhitespace(c)) {
state=5;
}
 else if (c == ',') {
accumulate(theRanges,lb,ub);
state=6;
}
 else {
throw new IllegalArgumentException();
}
break;
case 6:
if (Character.isWhitespace(c)) {
state=6;
}
 else if ((digit=Character.digit(c,10)) != -1) {
lb=digit;
state=1;
}
 else {
throw new IllegalArgumentException();
}
break;
}
}
switch (state) {
case 0:
break;
case 1:
case 2:
accumulate(theRanges,lb,lb);
break;
case 4:
case 5:
accumulate(theRanges,lb,ub);
break;
case 3:
case 6:
throw new IllegalArgumentException();
}
return canonicalArrayForm(theRanges);
}

public static String showDialog(final Component component,final String title,final Object message,final String... buttons){
  return showDialog(JOptionPane.getFrameForComponent(component),title,message,JOptionPane.PLAIN_MESSAGE,buttons);
}

public static void encode(InputStream in,Writer out) throws IOException {
  int column=0;
  while (true) {
    int byte1=in.read();
    int byte2=in.read();
    int byte3=in.read();
    if (byte1 < 0) {
      return;
    }
    if (column >= 72) {
      column=0;
      out.write('\n');
    }
    out.write(charset[byte1 >> 2]);
    int index=(byte1 & 0x3) << 4;
    if (byte2 < 0) {
      out.write(charset[index]);
      out.write(paddingChar);
      out.write(paddingChar);
      return;
    }
    index+=byte2 >> 4;
    out.write(charset[index]);
    index=(byte2 & 0xf) << 2;
    if (byte3 < 0) {
      out.write(charset[index]);
      out.write(paddingChar);
      return;
    }
    index+=byte3 >> 6;
    out.write(charset[index]);
    out.write(charset[byte3 & 0x3f]);
    column+=4;
  }
}

public static String canonicalID(String id){
  if (id == null)   return "";
  int st=0;
  int len=id.length();
  boolean substr=false;
  int c;
  while (st < len && ((c=id.charAt(st)) == '<' || c <= ' ')) {
    st++;
    substr=true;
  }
  while (st < len && ((c=id.charAt(len - 1)) == '>' || c <= ' ')) {
    len--;
    substr=true;
  }
  return substr ? id.substring(st,len) : id;
}

protected void sendMessage(String handler,List<?> arguments){
  ownerMessage.addEvent(Type.CLIENT_SEND_MESSAGE,handler,arguments);
  syncEvents.add(new SharedObjectEvent(Type.CLIENT_SEND_MESSAGE,handler,arguments));
  sendStats.incrementAndGet();
}

public void taskNow(final Runnable r,boolean async){
  if (async) {
    async(r);
  }
 else   if (r != null) {
    r.run();
  }
}

public void reset(){
  cur.reset();
  line.reset();
  inuse=true;
  word.setLength(0);
}

protected void engineSetMode(String mode) throws NoSuchAlgorithmException {
  if ((mode != null) && (!mode.equalsIgnoreCase("CBC"))) {
    throw new NoSuchAlgorithmException("Invalid cipher mode: " + mode);
  }
}

private void movePos(float deltaY){
  if ((deltaY < 0 && mPtrIndicator.isInStartPosition())) {
    if (DEBUG) {
      PtrCLog.e(LOG_TAG,String.format("has reached the top"));
    }
    return;
  }
  int to=mPtrIndicator.getCurrentPosY() + (int)deltaY;
  if (mPtrIndicator.willOverTop(to)) {
    if (DEBUG) {
      PtrCLog.e(LOG_TAG,String.format("over top"));
    }
    to=PtrIndicator.POS_START;
  }
  mPtrIndicator.setCurrentPos(to);
  int change=to - mPtrIndicator.getLastPosY();
  updatePos(change);
}

public static List<? extends Element> childElementList(DocumentFragment fragment){
  if (fragment == null)   return null;
  List<Element> elements=new LinkedList<Element>();
  Node node=fragment.getFirstChild();
  if (node != null) {
    do {
      if (node.getNodeType() == Node.ELEMENT_NODE) {
        Element childElement=(Element)node;
        elements.add(childElement);
      }
    }
 while ((node=node.getNextSibling()) != null);
  }
  return elements;
}

public void simulateMethod(SootMethod method,ReferenceVariable thisVar,ReferenceVariable returnVar,ReferenceVariable params[]){
  String subSignature=method.getSubSignature();
  if (subSignature.equals("void set(java.lang.Object,java.lang.Object)")) {
    java_lang_reflect_Field_set(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.Object get(java.lang.Object)")) {
    java_lang_reflect_Field_get(method,thisVar,returnVar,params);
    return;
  }
 else {
    defaultMethod(method,thisVar,returnVar,params);
    return;
  }
}

public FloatArray resize(FloatArray array,long size){
  if (array instanceof BigFloatArray) {
    return resizeInPlace((BigFloatArray)array,size);
  }
 else {
    AbstractArray arr=(AbstractArray)array;
    final FloatArray newArray=newFloatArray(size,arr.clearOnResize);
    for (long i=0, end=Math.min(size,array.size()); i < end; ++i) {
      newArray.set(i,array.get(i));
    }
    arr.close();
    return newArray;
  }
}

@Override public boolean domainMatch(final String host,String domain){
  if (host.equals(domain)) {
    return true;
  }
  if (!domain.startsWith(".")) {
    domain="." + domain;
  }
  return host.endsWith(domain) || host.equals(domain.substring(1));
}

public boolean isDirty(String key){
  return dirtyKeys.contains(key);
}

final public void println(float v){
  Writer out=this.out;
  if (out == null)   return;
  String s=String.valueOf(v);
  try {
    out.write(s,0,s.length());
    out.write(_newline,0,_newline.length);
  }
 catch (  IOException e) {
    log.log(Level.FINE,e.toString(),e);
  }
}

public static BigInteger sizeOfDirectoryAsBigInteger(File directory){
  checkDirectory(directory);
  final File[] files=directory.listFiles();
  if (files == null) {
    return BigInteger.ZERO;
  }
  BigInteger size=BigInteger.ZERO;
  for (  final File file : files) {
    try {
      if (!isSymlink(file)) {
        size=size.add(BigInteger.valueOf(sizeOf(file)));
      }
    }
 catch (    IOException ioe) {
    }
  }
  return size;
}

public double logDensityForInstance(Instance instance) throws Exception {
  double[] a=logJointDensitiesForInstance(instance);
  double max=a[Utils.maxIndex(a)];
  double sum=0.0;
  for (int i=0; i < a.length; i++) {
    sum+=Math.exp(a[i] - max);
  }
  return max + Math.log(sum);
}

public void testWhenComplete_sourceFailedActionFailed(){
  for (  boolean createIncomplete : new boolean[]{true,false})   for (  ExecutionMode m : ExecutionMode.values()) {
    final AtomicInteger a=new AtomicInteger(0);
    final CFException ex1=new CFException();
    final CFException ex2=new CFException();
    final CompletableFuture<Integer> f=new CompletableFuture<>();
    if (!createIncomplete)     f.completeExceptionally(ex1);
    final CompletableFuture<Integer> g=m.whenComplete(f,null);
    if (createIncomplete)     f.completeExceptionally(ex1);
    checkCompletedWithWrappedException(g,ex1);
    checkCompletedExceptionally(f,ex1);
    assertEquals(1,a.get());
  }
}

public static Angle greatCircleDistance(LatLon p1,LatLon p2){
  if ((p1 == null) || (p2 == null)) {
    throw new IllegalArgumentException("Lat Lon Is Null");
  }
  double lat1=p1.getLatitude().radians;
  double lon1=p1.getLongitude().radians;
  double lat2=p2.getLatitude().radians;
  double lon2=p2.getLongitude().radians;
  if (lat1 == lat2 && lon1 == lon2)   return Angle.ZERO;
  double a=Math.sin((lat2 - lat1) / 2.0);
  double b=Math.sin((lon2 - lon1) / 2.0);
  double c=a * a + +Math.cos(lat1) * Math.cos(lat2) * b* b;
  double distanceRadians=2.0 * Math.asin(Math.sqrt(c));
  return Double.isNaN(distanceRadians) ? Angle.ZERO : Angle.fromRadians(distanceRadians);
}

public int indexOf(java.lang.String subString,int start){
  if (start < 0) {
    start=0;
  }
  int subCount=subString.count;
  int _count=count;
  if (subCount > 0) {
    if (subCount + start > _count) {
      return -1;
    }
    char[] target=subString.value;
    int subOffset=subString.offset;
    char firstChar=target[subOffset];
    int end=subOffset + subCount;
    while (true) {
      int i=indexOf(firstChar,start);
      if (i == -1 || subCount + i > _count) {
        return -1;
      }
      int o1=offset + i, o2=subOffset;
      char[] _value=value;
      while (++o2 < end && _value[++o1] == target[o2]) {
      }
      if (o2 == end) {
        return i;
      }
      start=i + 1;
    }
  }
  return start < _count ? start : _count;
}

@Override public Query rewrite(IndexReader reader) throws IOException {
  if (disjuncts.length == 1) {
    return disjuncts[0];
  }
  boolean actuallyRewritten=false;
  List<Query> rewrittenDisjuncts=new ArrayList<>();
  for (  Query sub : disjuncts) {
    Query rewrittenSub=sub.rewrite(reader);
    actuallyRewritten|=rewrittenSub != sub;
    rewrittenDisjuncts.add(rewrittenSub);
  }
  if (actuallyRewritten) {
    return new DisjunctionMaxQuery(rewrittenDisjuncts,tieBreakerMultiplier);
  }
  return super.rewrite(reader);
}

public static String valueOf(long value){
  return Long.toString(value);
}

public static <T>boolean areSetsIdentical(final Set<T> set1,final Set<T> set2){
  if (set1 == set2)   return true;
  if (CollectionUtil.size(set1) != CollectionUtil.size(set2))   return false;
  if (CollectionUtil.isEmpty(set1))   return true;
  for (  final T t : set1)   if (!set2.contains(t))   return false;
  return true;
}

@Override public int compareTo(Value o){
  return hashCode() - o.hashCode();
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

private static void addOptions(final List<String> cmd,Map<CheckerProp,Object> props){
  for (  CheckerProp cp : CheckerProp.values()) {
    cmd.addAll(cp.getCmdLine(props));
  }
}

public boolean obsolete(){
  int[] stamp=new int[1];
  boolean undeployed=usage.get(stamp);
  return undeployed && stamp[0] == 0;
}

public void delete() throws IOException {
  close();
  Util.deleteContents(directory);
}

boolean popNamespace(String prefix){
  if (prefix.startsWith(XML_PREFIX)) {
    return false;
  }
  Stack stack;
  if ((stack=getPrefixStack(prefix)) != null) {
    stack.pop();
    return true;
  }
  return false;
}

public void redoLastAction(){
  try {
    if (undoManager.canRedo())     undoManager.redo();
  }
 catch (  CannotRedoException cre) {
    cre.printStackTrace();
  }
}

protected void continueWrite(){
  if (log.isDebugEnabled()) {
    log.debug("Start continueWrite");
  }
  Iterator<VariableValue> i=variables.iterator();
  while (i.hasNext()) {
    VariableValue v=i.next();
    if (v.isToWrite() && (!writingChanges || v.isChanged())) {
      amWriting=true;
      setBusy(true);
      log.debug("request write of " + v.label() + " writing changes "+ writingChanges);
      if (writingChanges) {
        v.writeChanges();
      }
 else {
        v.writeAll();
      }
      log.debug("return from starting write request");
      return;
    }
  }
  amWriting=false;
  super.setState(STORED);
  setBusy(false);
  log.debug("End continueWrite, nothing to do");
}

private void startGame(GameLaunchMessage gameLaunchMessage,Faction faction,RatingMode ratingMode,Integer localRelayPort){
  if (isRunning()) {
    logger.warn("Forged Alliance is already running, not starting game");
    return;
  }
  stopSearchRanked1v1();
  List<String> args=fixMalformedArgs(gameLaunchMessage.getArgs());
  try {
    localRelayServer.getPort();
    process=forgedAllianceService.startGame(gameLaunchMessage.getUid(),gameLaunchMessage.getMod(),faction,args,ratingMode,localRelayPort,rehostRequested);
    setGameRunning(true);
    this.ratingMode=ratingMode;
    spawnTerminationListener(process);
  }
 catch (  IOException e) {
    logger.warn("Game could not be started",e);
    notificationService.addNotification(new ImmediateNotification(i18n.get("errorTitle"),i18n.get("game.start.couldNotStart"),Severity.ERROR,e,Arrays.asList(new ReportAction(i18n,reportingService,e),new DismissAction(i18n))));
  }
}

public void addLine(String line){
  int index=line.indexOf(":",1);
  if (index != -1) {
    addLenient(line.substring(0,index),line.substring(index + 1));
  }
 else   if (line.startsWith(":")) {
    addLenient("",line.substring(1));
  }
 else {
    addLenient("",line);
  }
}

private synchronized void addEntries(Hashtable entries){
  entryDirectory.putAll(entries);
}

@RequestMapping(value={"/admin/update/","/admin/update"},method=RequestMethod.POST) @ResponseBody public RestWrapper updateOneRecord(@ModelAttribute("generalConfig") @Valid GeneralConfig generalConfig,BindingResult bindingResult,Principal principal){
  RestWrapper restWrapper=null;
  if (bindingResult.hasErrors()) {
    BindingResultError bindingResultError=new BindingResultError();
    return bindingResultError.errorMessage(bindingResult);
  }
  try {
    if (generalConfig.getRequired() <= 1) {
      com.wipro.ats.bdre.md.dao.jpa.GeneralConfig jpaGeneralConfigUpdate=new com.wipro.ats.bdre.md.dao.jpa.GeneralConfig();
      GeneralConfigId jpaGeneralConfigId=new GeneralConfigId();
      jpaGeneralConfigId.setConfigGroup(generalConfig.getConfigGroup());
      jpaGeneralConfigId.setGcKey(generalConfig.getKey());
      jpaGeneralConfigUpdate.setId(jpaGeneralConfigId);
      jpaGeneralConfigUpdate.setDefaultVal(generalConfig.getDefaultVal());
      jpaGeneralConfigUpdate.setDescription(generalConfig.getDescription());
      jpaGeneralConfigUpdate.setEnabled(generalConfig.isEnabled());
      jpaGeneralConfigUpdate.setGcValue(generalConfig.getValue());
      if (generalConfig.getRequired() == 1)       jpaGeneralConfigUpdate.setRequired(true);
 else       jpaGeneralConfigUpdate.setRequired(false);
      jpaGeneralConfigUpdate.setType(generalConfig.getType());
      LOGGER.info(generalConfig);
      generalConfigDAO.update(jpaGeneralConfigUpdate);
      restWrapper=new RestWrapper(generalConfig,RestWrapper.OK);
      LOGGER.info(" Record with key:" + jpaGeneralConfigId.getGcKey() + " and config group:"+ jpaGeneralConfigId.getConfigGroup()+ " updated in general_config by User:"+ principal.getName());
    }
 else {
      LOGGER.error("Invalid required field's data");
      restWrapper=new RestWrapper("Required field does not accest value other than 0 or 1",RestWrapper.ERROR);
    }
  }
 catch (  MetadataException e) {
    LOGGER.error(e);
    restWrapper=new RestWrapper(e.getMessage(),RestWrapper.ERROR);
  }
  return restWrapper;
}

public static void loadProject(final JTree tree,final INaviProject project){
  Preconditions.checkNotNull(tree,"IE01435: Tree argument can not be null");
  Preconditions.checkNotNull(project,"IE01436: Project argument can not be null");
  loadProjectThreaded(SwingUtilities.getWindowAncestor(tree),project,tree);
}

public Enumeration listOptions(){
  Vector newVector=new Vector(2);
  newVector.addElement(new Option("\tChange generalization parameter Rho\n","P",0,"-P"));
  newVector.addElement(new Option("\tUse ranking to class function special dev. for ARAM.\n","K",0,"-K"));
  newVector.addElement(new Option("\tUse report file to output debug specific information of ARAM.\n","Rt",0,"-Rt"));
  return newVector.elements();
}

public static DataPolicy fromOrdinal(byte ordinal){
  return VALUES[ordinal];
}

public static boolean isInstalled(PackageManager packageManager,String packageName){
  List<PackageInfo> packs=packageManager.getInstalledPackages(0);
  for (int i=0; i < packs.size(); i++) {
    if (TextUtils.equals(packs.get(i).packageName,packageName))     return true;
  }
  return false;
}

public void addSetAttribute(final SetAttribute setAttribute){
  setAttributes.add(setAttribute);
}

static String applyTemplate(final String template,final Map<String,Object> map){
  configuration=getConfiguration();
  try (ByteArrayOutputStream outputStream=new ByteArrayOutputStream();Writer writer=new OutputStreamWriter(outputStream)){
    Template configurationTemplate=configuration.getTemplate(template);
    configurationTemplate.process(map,writer);
    return outputStream.toString();
  }
 catch (  Exception e) {
    throw new RuntimeException(e.getMessage(),e);
  }
}

final void putShort(int offset,short value){
  unsafe.putShort(offset + address,value);
}

public static Clob toClob(Object value) throws PageException {
  if (value instanceof Clob)   return (Clob)value;
 else   if (value instanceof char[])   return toClob(new String((char[])value));
 else   if (value instanceof Reader) {
    StringWriter sw=new StringWriter();
    try {
      IOUtil.copy((Reader)value,sw,false,true);
    }
 catch (    IOException e) {
      throw ExpressionException.newInstance(e);
    }
    return toClob(sw.toString());
  }
  return toClob(Caster.toString(value));
}

private JFreeChart createHistogramChart(ExampleSet exampleSet){
  JFreeChart chart=ChartFactory.createHistogram(null,null,null,createHistogramDataset(exampleSet),PlotOrientation.VERTICAL,false,false,false);
  AbstractAttributeStatisticsModel.setDefaultChartFonts(chart);
  chart.setBackgroundPaint(null);
  chart.setBackgroundImageAlpha(0.0f);
  XYPlot plot=(XYPlot)chart.getPlot();
  plot.setRangeGridlinesVisible(false);
  plot.setDomainGridlinesVisible(false);
  plot.setOutlineVisible(false);
  plot.setRangeZeroBaselineVisible(false);
  plot.setDomainZeroBaselineVisible(false);
  plot.setBackgroundPaint(COLOR_INVISIBLE);
  plot.setBackgroundImageAlpha(0.0f);
  XYBarRenderer renderer=(XYBarRenderer)plot.getRenderer();
  renderer.setSeriesPaint(0,AttributeGuiTools.getColorForValueType(Ontology.NUMERICAL));
  renderer.setBarPainter(new StandardXYBarPainter());
  renderer.setDrawBarOutline(true);
  renderer.setShadowVisible(false);
  return chart;
}

List<Type> save(){
  ListBuffer<Type> buf=new ListBuffer<>();
  for (  Type t : undetvars) {
    UndetVar uv=(UndetVar)t;
    UndetVar uv2=new UndetVar((TypeVar)uv.qtype,types);
    for (    InferenceBound ib : InferenceBound.values()) {
      for (      Type b : uv.getBounds(ib)) {
        uv2.addBound(ib,b,types);
      }
    }
    uv2.inst=uv.inst;
    buf.add(uv2);
  }
  return buf.toList();
}

public int executeProcess(){
  final List<String> processStrings=tokenizeString(execCommand);
  processStrings.addAll(tokenizeString(script));
  logger.info(MessageFormat.format("Executing {0} ...",processStrings));
  final ProcessBuilder processBuilder=new ProcessBuilder(processStrings);
  if (workingDirectory != null) {
    final Path dir=Paths.get(workingDirectory);
    if (Files.notExists(dir)) {
      try {
        Files.createDirectories(dir);
      }
 catch (      IOException e) {
        logger.warning("Could not create working directory: " + workingDirectory);
        return -3;
      }
    }
 else     if (!Files.isDirectory(dir)) {
      logger.warning(workingDirectory + " already exists but is not a directory.");
      return -4;
    }
    final File directory=dir.toFile();
    processBuilder.directory(directory);
  }
  processBuilder.redirectErrorStream(true);
  Integer exitValue;
  try {
    logger.info("Starting external process ...");
    final Process process=processBuilder.start();
    sendInputStringToProcess(process);
    handleProcessOutput(process);
    try {
      exitValue=process.waitFor();
    }
 catch (    InterruptedException e) {
      logger.warning("Interrupted while waiting, killing external process ...");
      process.destroy();
      exitValue=-2;
    }
    logger.info("External process exit value " + exitValue + ".");
  }
 catch (  IOException e) {
    logger.log(SEVERE,"Failed to start external Process: ",e.getCause());
    exitValue=-1;
  }
  return exitValue;
}

static void checkMethodDesc(final String desc){
  if (desc == null || desc.length() == 0) {
    throw new IllegalArgumentException("Invalid method descriptor (must not be null or empty)");
  }
  if (desc.charAt(0) != '(' || desc.length() < 3) {
    throw new IllegalArgumentException("Invalid descriptor: " + desc);
  }
  int start=1;
  if (desc.charAt(start) != ')') {
    do {
      if (desc.charAt(start) == 'V') {
        throw new IllegalArgumentException("Invalid descriptor: " + desc);
      }
      start=checkDesc(desc,start,false);
    }
 while (start < desc.length() && desc.charAt(start) != ')');
  }
  start=checkDesc(desc,start + 1,true);
  if (start != desc.length()) {
    throw new IllegalArgumentException("Invalid descriptor: " + desc);
  }
}

protected Rectangle applyMargins(Rectangle rect,float[] margins,boolean reverse){
  if (isPositioned())   return rect;
  return rect.<Rectangle>applyMargins(margins[0],margins[1],margins[2],margins[3],reverse);
}

private void resetAttempts(){
  for (  final PoliticalActionAttachment paa : PoliticalActionAttachment.getPoliticalActionAttachments(m_player)) {
    paa.resetAttempts(getBridge());
  }
}

public static Number minus(Character left,Character right){
  return minus(Integer.valueOf(left),right);
}

public void findAndInit(Object someObj){
  if (someObj instanceof MouseDelegator) {
    Debug.message("mousemodepanel","MouseModePanel found a MouseDelegator.");
    setMouseDelegator((MouseDelegator)someObj);
  }
}

public static int toInt(final String value){
  return Integer.parseInt(value);
}

protected Object evaluateLeftLessRight(List elements,String lvalue,String rvalue){
  List array;
  if (elements instanceof java.util.Vector) {
    array=new java.util.Vector();
  }
 else {
    array=new ArrayList();
  }
  for (Iterator e=elements.iterator(); e.hasNext(); ) {
    Object o=e.next();
    if (o instanceof StructuredContent) {
      if ((o=evaluateLeftLessRight((StructuredContent)o,lvalue,rvalue)) != null) {
        array.add(o);
      }
    }
  }
  if (array.size() == 1) {
    return (StructuredContent)array.get(0);
  }
  return array;
}

static void checkTypeRefAndPath(int typeRef,TypePath typePath){
  int mask=0;
switch (typeRef >>> 24) {
case TypeReference.CLASS_TYPE_PARAMETER:
case TypeReference.METHOD_TYPE_PARAMETER:
case TypeReference.METHOD_FORMAL_PARAMETER:
    mask=0xFFFF0000;
  break;
case TypeReference.FIELD:
case TypeReference.METHOD_RETURN:
case TypeReference.METHOD_RECEIVER:
case TypeReference.LOCAL_VARIABLE:
case TypeReference.RESOURCE_VARIABLE:
case TypeReference.INSTANCEOF:
case TypeReference.NEW:
case TypeReference.CONSTRUCTOR_REFERENCE:
case TypeReference.METHOD_REFERENCE:
mask=0xFF000000;
break;
case TypeReference.CLASS_EXTENDS:
case TypeReference.CLASS_TYPE_PARAMETER_BOUND:
case TypeReference.METHOD_TYPE_PARAMETER_BOUND:
case TypeReference.THROWS:
case TypeReference.EXCEPTION_PARAMETER:
mask=0xFFFFFF00;
break;
case TypeReference.CAST:
case TypeReference.CONSTRUCTOR_INVOCATION_TYPE_ARGUMENT:
case TypeReference.METHOD_INVOCATION_TYPE_ARGUMENT:
case TypeReference.CONSTRUCTOR_REFERENCE_TYPE_ARGUMENT:
case TypeReference.METHOD_REFERENCE_TYPE_ARGUMENT:
mask=0xFF0000FF;
break;
default :
throw new IllegalArgumentException("Invalid type reference sort 0x" + Integer.toHexString(typeRef >>> 24));
}
if ((typeRef & ~mask) != 0) {
throw new IllegalArgumentException("Invalid type reference 0x" + Integer.toHexString(typeRef));
}
if (typePath != null) {
for (int i=0; i < typePath.getLength(); ++i) {
int step=typePath.getStep(i);
if (step != TypePath.ARRAY_ELEMENT && step != TypePath.INNER_TYPE && step != TypePath.TYPE_ARGUMENT && step != TypePath.WILDCARD_BOUND) {
throw new IllegalArgumentException("Invalid type path step " + i + " in "+ typePath);
}
if (step != TypePath.TYPE_ARGUMENT && typePath.getStepArgument(i) != 0) {
throw new IllegalArgumentException("Invalid type path step argument for step " + i + " in "+ typePath);
}
}
}
}

public void removeCatchable(CatchablePokemon pokemon){
  if (cachedCatchable.size() > 0) {
    cachedCatchable.remove(pokemon);
  }
}

@SuppressWarnings("unchecked") @Override protected void fillBuffer(){
  int oldP=p;
  int index=tokens.size();
  Token t=tokenSource.nextToken();
  while (t != null && t.getType() != CharStream.EOF) {
    int type=t.getType();
    if (type == InternalN4JSLexer.Solidus || type == InternalN4JSLexer.SolidusEqualsSign || type == InternalN4JSLexer.RightCurlyBracket) {
      t.setTokenIndex(index);
      tokens.add(t);
      index++;
      break;
    }
    boolean discard=false;
    if (channelOverrideMap != null) {
      Integer channelI=(Integer)channelOverrideMap.get(Integer.valueOf(type));
      if (channelI != null) {
        t.setChannel(channelI.intValue());
      }
    }
    if (discardSet != null && discardSet.contains(Integer.valueOf(type))) {
      discard=true;
    }
 else     if (discardOffChannelTokens && t.getChannel() != this.channel) {
      discard=true;
    }
    if (!discard) {
      t.setTokenIndex(index);
      tokens.add(t);
      index++;
    }
    t=tokenSource.nextToken();
  }
  p=oldP == -1 ? 0 : oldP;
  p=skipOffTokenChannels(p);
}

char caseFold(char c){
  if (alternateCasing) {
    if (c == 'I') {
      return '';
    }
 else     if (c == '') {
      return 'i';
    }
 else {
      return Character.toLowerCase(c);
    }
  }
 else {
    return Character.toLowerCase(c);
  }
}

public void writeCountsComparisonList(final String filename,final String format){
  if (format.compareToIgnoreCase("kml") == 0) {
    CountSimComparisonKMLWriter kmlWriter=new CountSimComparisonKMLWriter(countsComparisonList,this.network,TransformationFactory.getCoordinateTransformation(this.coordinateSystem,TransformationFactory.WGS84));
    kmlWriter.writeFile(filename);
  }
 else   if (format.compareToIgnoreCase("txt") == 0) {
    CountSimComparisonTableWriter writer=new CountSimComparisonTableWriter(countsComparisonList,Locale.US);
    writer.writeFile(filename);
  }
 else {
    throw new IllegalArgumentException("Output format must be txt or kml");
  }
  ComparisonErrorStatsCalculator errorStats=new ComparisonErrorStatsCalculator(countsComparisonList);
  double[] hours=new double[24];
  for (int i=1; i < 25; i++) {
    hours[i - 1]=i;
  }
  DoubleArrayTableWriter tableWriter=new DoubleArrayTableWriter();
  tableWriter.addColumn(hours);
  tableWriter.addColumn(errorStats.getMeanRelError());
  tableWriter.writeFile(filename + "errortable.txt");
}

public void testSubtractMathContextDiffScalePosNeg(){
  String a="1231212478987482988429808779810457634781384756794987";
  int aScale=15;
  String b="747233429293018787918347987234564568";
  int bScale=-10;
  String c="-7.4723342916989754E+45";
  int cScale=-29;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  MathContext mc=new MathContext(17,RoundingMode.DOWN);
  BigDecimal result=aNumber.subtract(bNumber,mc);
  assertEquals("incorrect value",c,result.toString());
  assertEquals("incorrect scale",cScale,result.scale());
}

public void putGrammar(DTDGrammar grammar){
  XMLDTDDescription desc=(XMLDTDDescription)grammar.getGrammarDescription();
  fGrammars.put(desc,grammar);
}

public ServiceCall<TranslationResult> translate(final String text,final Language source,final Language target){
  return translate(Collections.singletonList(text),source,target);
}

@Override public int execute(final FormObject form,final int type,final String code,final int eventType,final char keyPressed){
  int messageCode;
  final String js=code;
  final String[] args=JSFunction.convertToArray(js);
  final String command=args[0];
  if (command.startsWith("AF")) {
    messageCode=handleAFCommands(form,command,js,args,eventType,keyPressed);
  }
 else {
    executeFunctions(js,form,acro);
    messageCode=ActionHandler.VALUESCHANGED;
  }
  if (type == PdfDictionary.F) {
    calcualteEvent();
    messageCode=ActionHandler.VALUESCHANGED;
  }
  return messageCode;
}

private Object readResolve(){
synchronized (levels) {
    for (    Level level : levels) {
      if (value != level.value) {
        continue;
      }
      if (!name.equals(level.name)) {
        continue;
      }
      if (Objects.equal(resourceBundleName,level.resourceBundleName)) {
        return level;
      }
    }
    levels.add(this);
    return this;
  }
}

private static void repeat(String pattern,int count,Appendable out) throws IOException {
  while (count >= pattern.length()) {
    out.append(pattern);
    count-=pattern.length();
  }
  if (count > 0) {
    out.append(pattern,0,count);
  }
}

private void cleanUp(Reference<?> reference) throws ShutDown {
  Method finalizeReferentMethod=getFinalizeReferentMethod();
  do {
    reference.clear();
    if (reference == frqReference) {
      throw new ShutDown();
    }
    try {
      finalizeReferentMethod.invoke(reference);
    }
 catch (    Throwable t) {
      logger.log(Level.SEVERE,"Error cleaning up after reference.",t);
    }
  }
 while ((reference=queue.poll()) != null);
}

private boolean isMineshafterPresent(){
  try {
    Class.forName("mineshafter.MineServer");
    return true;
  }
 catch (  Exception e) {
    return false;
  }
}

public @CheckForNull Queue.Item run2(@Nonnull String replacementMainScript,@Nonnull Map<String,String> replacementLoadedScripts){
  List<Action> actions=new ArrayList<Action>();
  CpsFlowExecution execution=getExecution();
  if (execution == null) {
    return null;
  }
  actions.add(new ReplayFlowFactoryAction(replacementMainScript,replacementLoadedScripts,execution.isSandbox()));
  actions.add(new CauseAction(new Cause.UserIdCause(),new ReplayCause(run)));
  for (  Class<? extends Action> c : COPIED_ACTIONS) {
    actions.addAll(run.getActions(c));
  }
  return ParameterizedJobMixIn.scheduleBuild2(run.getParent(),0,actions.toArray(new Action[actions.size()]));
}

public static SecretKeys keys(String keysStr) throws InvalidKeyException {
  String[] keysArr=keysStr.split(":");
  if (keysArr.length != 2) {
    throw new IllegalArgumentException("Cannot parse aesKey:hmacKey");
  }
 else {
    byte[] confidentialityKey=Base64.decode(keysArr[0],BASE64_FLAGS);
    if (confidentialityKey.length != AES_KEY_LENGTH_BITS / 8) {
      throw new InvalidKeyException("Base64 decoded key is not " + AES_KEY_LENGTH_BITS + " bytes");
    }
    byte[] integrityKey=Base64.decode(keysArr[1],BASE64_FLAGS);
    if (integrityKey.length != HMAC_KEY_LENGTH_BITS / 8) {
      throw new InvalidKeyException("Base64 decoded key is not " + HMAC_KEY_LENGTH_BITS + " bytes");
    }
    SecretKeys secretKeys=new SecretKeys();
    SecretKeySpec secretKeySpec=new SecretKeySpec();
    secretKeySpec.generate(confidentialityKey,0,confidentialityKey.length,CIPHER);
    SecretKeySpec secretKeySpec1=new SecretKeySpec();
    secretKeySpec1.generate(integrityKey,HMAC_ALGORITHM);
    secretKeys.setConfidentialityKey(secretKeySpec);
    secretKeys.setIntegrityKey(secretKeySpec1);
    return secretKeys;
  }
}

public Path[] chooseStartingPaths(final int nedges,final Path[] paths){
  final List<Path> tmp=new LinkedList<Path>();
  Arrays.sort(paths,0,paths.length,EstimatedCardinalityComparator.INSTANCE);
  for (int i=0; i < paths.length && i < nedges; i++) {
    tmp.add(paths[i]);
  }
  return tmp.toArray(new Path[tmp.size()]);
}

private void safeBottomView(){
  Status status=getOpenStatus();
  ViewGroup bottom=getBottomView();
  if (status == Status.Close) {
    if (bottom.getVisibility() != INVISIBLE)     bottom.setVisibility(INVISIBLE);
  }
 else {
    if (bottom.getVisibility() != VISIBLE)     bottom.setVisibility(VISIBLE);
  }
}

public static int uniform(int n){
  if (n <= 0)   throw new IllegalArgumentException("Parameter N must be positive");
  return random.nextInt(n);
}

private void viewDelta(final Item item){
  final DeltaFragment fragment=DeltaFragment.newInstance(item);
  navigateToFragment(fragment);
}

public Message(String type,double value){
  if (!VALID_TYPES.contains(type)) {
    throw new IllegalArgumentException(type + " is not a valid message type.\n" + "Valid message types are \"FAST\", \"MEDIUM\", and \"SLOW\".");
  }
  this.type=type;
  this.value=value;
}

public void addAll(final CasualtyList casualtyList){
  m_damaged.addAll(casualtyList.getDamaged());
  m_killed.addAll(casualtyList.getKilled());
}

public static String importResultSet(ResultSet source,Database db,String name,ImportFilter filter,boolean useExistingTable) throws SQLException, IOException {
  ResultSetMetaData md=source.getMetaData();
  name=TableBuilder.escapeIdentifier(name);
  Table table=null;
  if (!useExistingTable || ((table=db.getTable(name)) == null)) {
    List<ColumnBuilder> columns=toColumns(md);
    table=createUniqueTable(db,name,columns,md,filter);
  }
  List<Object[]> rows=new ArrayList<Object[]>(COPY_TABLE_BATCH_SIZE);
  int numColumns=md.getColumnCount();
  while (source.next()) {
    Object[] row=new Object[numColumns];
    for (int i=0; i < row.length; i++) {
      row[i]=source.getObject(i + 1);
    }
    row=filter.filterRow(row);
    if (row == null) {
      continue;
    }
    rows.add(row);
    if (rows.size() == COPY_TABLE_BATCH_SIZE) {
      table.addRows(rows);
      rows.clear();
    }
  }
  if (rows.size() > 0) {
    table.addRows(rows);
  }
  return table.getName();
}

@Override public long skip(long n) throws IOException {
  long remaining=n;
  final char[] ch=new char[fBuffer.length];
  do {
    int length=ch.length < remaining ? ch.length : (int)remaining;
    int count=read(ch,0,length);
    if (count > 0) {
      remaining-=count;
    }
 else {
      break;
    }
  }
 while (remaining > 0);
  long skipped=n - remaining;
  return skipped;
}

public static long[] hashToLongs(double datum,long seed){
  double d=(datum == 0.0) ? 0.0 : datum;
  long[] data={Double.doubleToLongBits(d)};
  return hash(data,seed);
}

private boolean allowUploadCrashDump(){
  if (isCellularExperimentEnabled())   return isUsageAndCrashReportingEnabled();
  if (isMobileNetworkCapable()) {
    String option=mSharedPreferences.getString(PREF_CRASH_DUMP_UPLOAD,mCrashDumpNeverUpload);
    return option.equals(mCrashDumpAlwaysUpload) || (option.equals(mCrashDumpWifiOnlyUpload) && isWiFiOrEthernetNetwork());
  }
  return mSharedPreferences.getBoolean(PREF_CRASH_DUMP_UPLOAD_NO_CELLULAR,false);
}

private int[] joinMap(int[] a,int[] b){
  if (a == null) {
    return b;
  }
  if (b == null) {
    return a;
  }
  int[] result=new int[a.length + b.length];
  System.arraycopy(a,0,result,0,a.length);
  System.arraycopy(b,0,result,a.length,b.length);
  return result;
}

private void readObject(ObjectInputStream in) throws ClassNotFoundException, IOException {
  in.defaultReadObject();
  iter=col.iterator();
}

public LabelSet(int indices[],boolean sort){
  this.indices=indices;
  if (sort == true)   Arrays.sort(this.indices);
}

public void diffEquals(){
  double[] col=null;
  for (int i=0; i < A.length; i++) {
    col=new double[A[i].length - 1];
    for (int j=1; j < A[i].length; j++)     col[j - 1]=Math.abs(A[i][j] - A[i][j - 1]);
    A[i]=col;
  }
  n--;
}

private static void printStackTraceElement(StackTraceElement trace,PrintWriter out,ClassLoader loader){
  try {
    LineMap map=getScriptLineMap(trace.getClassName(),loader);
    if (map != null) {
      LineMap.Line line=map.getLine(trace.getLineNumber());
      if (line != null) {
        out.print(trace.getClassName() + "." + trace.getMethodName());
        out.print("(" + line.getSourceFilename() + ":");
        out.println(line.getSourceLine(trace.getLineNumber()) + ")");
        return;
      }
    }
  }
 catch (  Throwable e) {
  }
  out.println(trace);
}

private static void decodeTextCompaction(int[] textCompactionData,int[] byteCompactionData,int length,StringBuilder result){
  Mode subMode=Mode.ALPHA;
  Mode priorToShiftMode=Mode.ALPHA;
  int i=0;
  while (i < length) {
    int subModeCh=textCompactionData[i];
    char ch=0;
switch (subMode) {
case ALPHA:
      if (subModeCh < 26) {
        ch=(char)('A' + subModeCh);
      }
 else {
        if (subModeCh == 26) {
          ch=' ';
        }
 else         if (subModeCh == LL) {
          subMode=Mode.LOWER;
        }
 else         if (subModeCh == ML) {
          subMode=Mode.MIXED;
        }
 else         if (subModeCh == PS) {
          priorToShiftMode=subMode;
          subMode=Mode.PUNCT_SHIFT;
        }
 else         if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
          result.append((char)byteCompactionData[i]);
        }
 else         if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
          subMode=Mode.ALPHA;
        }
      }
    break;
case LOWER:
  if (subModeCh < 26) {
    ch=(char)('a' + subModeCh);
  }
 else {
    if (subModeCh == 26) {
      ch=' ';
    }
 else     if (subModeCh == AS) {
      priorToShiftMode=subMode;
      subMode=Mode.ALPHA_SHIFT;
    }
 else     if (subModeCh == ML) {
      subMode=Mode.MIXED;
    }
 else     if (subModeCh == PS) {
      priorToShiftMode=subMode;
      subMode=Mode.PUNCT_SHIFT;
    }
 else     if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
      result.append((char)byteCompactionData[i]);
    }
 else     if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
      subMode=Mode.ALPHA;
    }
  }
break;
case MIXED:
if (subModeCh < PL) {
ch=MIXED_CHARS[subModeCh];
}
 else {
if (subModeCh == PL) {
  subMode=Mode.PUNCT;
}
 else if (subModeCh == 26) {
  ch=' ';
}
 else if (subModeCh == LL) {
  subMode=Mode.LOWER;
}
 else if (subModeCh == AL) {
  subMode=Mode.ALPHA;
}
 else if (subModeCh == PS) {
  priorToShiftMode=subMode;
  subMode=Mode.PUNCT_SHIFT;
}
 else if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
  result.append((char)byteCompactionData[i]);
}
 else if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
  subMode=Mode.ALPHA;
}
}
break;
case PUNCT:
if (subModeCh < PAL) {
ch=PUNCT_CHARS[subModeCh];
}
 else {
if (subModeCh == PAL) {
subMode=Mode.ALPHA;
}
 else if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
result.append((char)byteCompactionData[i]);
}
 else if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
subMode=Mode.ALPHA;
}
}
break;
case ALPHA_SHIFT:
subMode=priorToShiftMode;
if (subModeCh < 26) {
ch=(char)('A' + subModeCh);
}
 else {
if (subModeCh == 26) {
ch=' ';
}
 else if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
subMode=Mode.ALPHA;
}
}
break;
case PUNCT_SHIFT:
subMode=priorToShiftMode;
if (subModeCh < PAL) {
ch=PUNCT_CHARS[subModeCh];
}
 else {
if (subModeCh == PAL) {
subMode=Mode.ALPHA;
}
 else if (subModeCh == MODE_SHIFT_TO_BYTE_COMPACTION_MODE) {
result.append((char)byteCompactionData[i]);
}
 else if (subModeCh == TEXT_COMPACTION_MODE_LATCH) {
subMode=Mode.ALPHA;
}
}
break;
}
if (ch != 0) {
result.append(ch);
}
i++;
}
}

public void readInformationObject(final PdfObject infoObj,final ObjectDecoder objectDecoder){
  try {
    objectDecoder.checkResolved(infoObj);
  }
 catch (  final Exception e) {
    LogWriter.writeLog("Exception: " + e.getMessage());
  }
  String newValue;
  int id;
  byte[] data;
  final int count=PdfFileInformation.information_field_IDs.length;
  for (int i=0; i < count; i++) {
    id=PdfFileInformation.information_field_IDs[i];
    if (id == PdfDictionary.Trapped) {
      newValue=infoObj.getName(id);
      if (newValue == null) {
        newValue="";
      }
    }
 else {
      data=infoObj.getTextStreamValueAsByte(id);
      if (data == null) {
        newValue="";
      }
 else {
        newValue=StringUtils.getTextString(data,false);
      }
    }
    setFieldValue(i,newValue);
  }
}

private void cmd_calculateDifference(){
  BigDecimal previousValue, actualValue;
  Timestamp today=TimeUtil.getDay(System.currentTimeMillis());
  MCash cash=MCash.get(p_pos.getCtx(),p_pos.getC_CashBook_ID(),today,null);
  v_previousBalance.setValue(cash.getEndingBalance());
  previousValue=cash.getEndingBalance();
  actualValue=(BigDecimal)v_ActualBalance.getValue();
  v_difference.setValue(actualValue.subtract(previousValue));
}

public boolean testAllocation(){
  boolean change=false;
  if (isProcessed()) {
    BigDecimal alloc=getAllocatedAmt();
    if (alloc == null)     alloc=Env.ZERO;
    BigDecimal total=getGrandTotal();
    if (!isSOTrx())     total=total.negate();
    if (isCreditMemo())     total=total.negate();
    boolean test=total.compareTo(alloc) == 0;
    change=test != isPaid();
    if (change)     setIsPaid(test);
    log.fine("Paid=" + test + " ("+ alloc+ "="+ total+ ")");
  }
  return change;
}

private void requestForUpload(OCFile file){
  FileUploader.UploadRequester requester=new FileUploader.UploadRequester();
  requester.uploadUpdate(mContext,mAccount,file,FileUploader.LOCAL_BEHAVIOUR_MOVE,true);
  mTransferWasRequested=true;
}

protected void decodeImageData(){
  int NullCode=-1;
  int npix=iw * ih;
  int available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, count, i, datum, data_size, first, top, bi, pi;
  if ((pixels == null) || (pixels.length < npix)) {
    pixels=new byte[npix];
  }
  if (prefix == null)   prefix=new short[MaxStackSize];
  if (suffix == null)   suffix=new byte[MaxStackSize];
  if (pixelStack == null)   pixelStack=new byte[MaxStackSize + 1];
  data_size=read();
  clear=1 << data_size;
  end_of_information=clear + 1;
  available=clear + 2;
  old_code=NullCode;
  code_size=data_size + 1;
  code_mask=(1 << code_size) - 1;
  for (code=0; code < clear; code++) {
    prefix[code]=0;
    suffix[code]=(byte)code;
  }
  datum=bits=count=first=top=pi=bi=0;
  for (i=0; i < npix; ) {
    if (top == 0) {
      if (bits < code_size) {
        if (count == 0) {
          count=readBlock();
          if (count <= 0)           break;
          bi=0;
        }
        datum+=(((int)block[bi]) & 0xff) << bits;
        bits+=8;
        bi++;
        count--;
        continue;
      }
      code=datum & code_mask;
      datum>>=code_size;
      bits-=code_size;
      if ((code > available) || (code == end_of_information))       break;
      if (code == clear) {
        code_size=data_size + 1;
        code_mask=(1 << code_size) - 1;
        available=clear + 2;
        old_code=NullCode;
        continue;
      }
      if (old_code == NullCode) {
        pixelStack[top++]=suffix[code];
        old_code=code;
        first=code;
        continue;
      }
      in_code=code;
      if (code == available) {
        pixelStack[top++]=(byte)first;
        code=old_code;
      }
      while (code > clear) {
        pixelStack[top++]=suffix[code];
        code=prefix[code];
      }
      first=((int)suffix[code]) & 0xff;
      if (available >= MaxStackSize)       break;
      pixelStack[top++]=(byte)first;
      prefix[available]=(short)old_code;
      suffix[available]=(byte)first;
      available++;
      if (((available & code_mask) == 0) && (available < MaxStackSize)) {
        code_size++;
        code_mask+=available;
      }
      old_code=in_code;
    }
    top--;
    pixels[pi++]=pixelStack[top];
    i++;
  }
  for (i=pi; i < npix; i++) {
    pixels[i]=0;
  }
}

void refreshCustomMasterList(){
  if (customMasterCountries == null || customMasterCountries.length() == 0) {
    customMasterCountriesList=null;
  }
 else {
    List<Country> localCountryList=new ArrayList<>();
    for (    String nameCode : customMasterCountries.split(",")) {
      Country country=Country.getCountryForNameCodeFromLibraryMasterList(customLanguage,nameCode);
      if (country != null) {
        if (!isAlreadyInList(country,localCountryList)) {
          localCountryList.add(country);
        }
      }
    }
    if (localCountryList.size() == 0) {
      customMasterCountriesList=null;
    }
 else {
      customMasterCountriesList=localCountryList;
    }
  }
  if (customMasterCountriesList != null) {
    for (    Country country : customMasterCountriesList) {
      country.log();
    }
  }
 else {
  }
}

protected boolean isDtoGetter(Method method){
  if (method.isAnnotationPresent(DelegateTo.class)) {
    return false;
  }
  String methodName=method.getName();
  if ((methodName.startsWith("get") || methodName.startsWith("is")) && method.getParameterTypes().length == 0) {
    if (methodName.length() > 2 && methodName.startsWith("is")) {
      return method.getReturnType() == Boolean.class || method.getReturnType() == boolean.class;
    }
    return methodName.length() > 3;
  }
  return false;
}

protected void handleParseConversionException(Exception e) throws SAXException {
  if (e instanceof RuntimeException)   throw (RuntimeException)e;
  ParseConversionEvent pce=new ParseConversionEventImpl(ValidationEvent.ERROR,e.getMessage(),new ValidationEventLocatorImpl(context.getLocator()),e);
  context.handleEvent(pce,true);
}

private static char[] yy_unpack_cmap(String packed){
  char[] map=new char[0x10000];
  int i=0;
  int j=0;
  while (i < 86) {
    int count=packed.charAt(i++);
    char value=packed.charAt(i++);
    do     map[j++]=value;
 while (--count > 0);
  }
  return map;
}

public StatusBar(boolean showMemory){
  super(new BorderLayout());
  add(createInfoPanel(),BorderLayout.WEST);
  if (showMemory) {
    add(createMemoryStatus(),BorderLayout.CENTER);
    JPanel iconPanel=new JPanel(new BorderLayout());
    iconPanel.add(new JLabel(new AngledLinesWindowsCornerIcon()),BorderLayout.SOUTH);
    add(iconPanel,BorderLayout.EAST);
  }
 else {
    setBackground(Color.WHITE);
  }
}

public void execute(final Runnable task){
  String name=metadata.get(Metadata.RESOURCE_NAME_KEY);
  if (name != null) {
    name="ICIJ Extract: " + name;
  }
 else {
    name="ICIJ Extract";
  }
  final Thread thread=new Thread(task,name);
  thread.setDaemon(true);
  thread.start();
}

static int stringSize(String string){
  int size=0;
  if (string != null) {
    size+=HEADERS + 4 * 4;
    size+=HEADERS + 2 * string.length();
  }
  return size;
}

public static GraphRequest newPostOpenGraphObjectRequest(AccessToken accessToken,JSONObject openGraphObject,Callback callback){
  if (openGraphObject == null) {
    throw new FacebookException("openGraphObject cannot be null");
  }
  if (Utility.isNullOrEmpty(openGraphObject.optString("type"))) {
    throw new FacebookException("openGraphObject must have non-null 'type' property");
  }
  if (Utility.isNullOrEmpty(openGraphObject.optString("title"))) {
    throw new FacebookException("openGraphObject must have non-null 'title' property");
  }
  String path=String.format(MY_OBJECTS_FORMAT,openGraphObject.optString("type"));
  Bundle bundle=new Bundle();
  bundle.putString(OBJECT_PARAM,openGraphObject.toString());
  return new GraphRequest(accessToken,path,bundle,HttpMethod.POST,callback);
}

public void addGraph(Graph g){
  graphs.add(g);
}

protected void addToQuarantineQueue(NodePortTuple npt){
  if (quarantineQueue.contains(npt) == false) {
    quarantineQueue.add(npt);
  }
}

private MrcMessage loadChars() throws java.io.IOException {
  int nchars;
  byte[] rcvBuffer=new byte[32];
  nchars=inpipe.read(rcvBuffer,0,32);
  MrcMessage msg=new MrcMessage(nchars);
  for (int i=0; i < nchars; i++) {
    msg.setElement(i,rcvBuffer[i] & 0xFF);
  }
  return msg;
}

@SuppressWarnings("unused") @Override protected Money handleTransactionThatIsALateRepaymentOfInstallment(final LoanRepaymentScheduleInstallment currentInstallment,final List<LoanRepaymentScheduleInstallment> installments,final LoanTransaction loanTransaction,final Money transactionAmountUnprocessed,List<LoanTransactionToRepaymentScheduleMapping> transactionMappings){
  return handleTransactionThatIsOnTimePaymentOfInstallment(currentInstallment,loanTransaction,transactionAmountUnprocessed,transactionMappings);
}

protected void fireTupleEvent(Table t,int start,int end,int type){
  if (m_tupleListeners != null && m_tupleListeners.size() > 0) {
    Object[] lstnrs=m_tupleListeners.getArray();
    Tuple[] tuples=new Tuple[end - start + 1];
    for (int i=0, r=start; r <= end; ++r, ++i) {
      tuples[i]=t.getTuple(r);
    }
    for (int i=0; i < lstnrs.length; ++i) {
      TupleSetListener tsl=(TupleSetListener)lstnrs[i];
      if (type == EventConstants.INSERT) {
        tsl.tupleSetChanged(this,tuples,EMPTY_ARRAY);
      }
 else {
        tsl.tupleSetChanged(this,EMPTY_ARRAY,tuples);
      }
    }
  }
}

public String buildQuery(String[] projectionIn,String selection,String groupBy,String having,String sortOrder,String limit){
  String[] projection=computeProjection(projectionIn);
  StringBuilder where=new StringBuilder();
  boolean hasBaseWhereClause=mWhereClause != null && mWhereClause.length() > 0;
  if (hasBaseWhereClause) {
    where.append(mWhereClause.toString());
    where.append(')');
  }
  if (selection != null && selection.length() > 0) {
    if (hasBaseWhereClause) {
      where.append(" AND ");
    }
    where.append('(');
    where.append(selection);
    where.append(')');
  }
  return buildQueryString(mDistinct,mTables,projection,where.toString(),groupBy,having,sortOrder,limit);
}

public static boolean isExceptionTime(Calendar scheduleTime,ScheduleInfo scheduleInfo) throws Exception {
  if (scheduleInfo.getDateExceptions() != null) {
    for (    String dateException : scheduleInfo.getDateExceptions()) {
      DateFormat formatter=new SimpleDateFormat(ScheduleInfo.FULL_DAYTIME_FORMAT);
      Date date=formatter.parse(scheduleInfo.getStartDate());
      Calendar exceptionTime=Calendar.getInstance(TimeZone.getTimeZone("UTC"));
      exceptionTime.setTime(date);
      if (exceptionTime.equals(scheduleTime)) {
        log.info("The scheduled time {} is in exception list",scheduleTime.toString());
        return true;
      }
    }
  }
  return false;
}

protected void initPort(){
  String portParam=getInitParameter("port");
  setPort((portParam == null) ? DEFAULT_PORT : Integer.parseInt(portParam));
  if (isDebug()) {
    log("port: " + getPort());
  }
}

public JPEGQTable(int[] table){
  if (table == null) {
    throw new IllegalArgumentException("table must not be null.");
  }
  if (table.length != 64) {
    throw new IllegalArgumentException("table.length != 64");
  }
  qTable=Arrays.copyOf(table,table.length);
}

public VNXeNfsShare findSnapNfsShare(String snapId,String shareName,String softwareVersion){
  StringBuilder queryFilter=new StringBuilder(VNXeConstants.NAME_FILTER);
  if (!VNXeUtils.isHigherVersion(softwareVersion,VNXeConstants.VNXE_BASE_SOFT_VER)) {
    queryFilter.append(shareName);
    queryFilter.append(VNXeConstants.AND);
    queryFilter.append(VNXeConstants.SNAP_FILTER);
    queryFilter.append(snapId);
  }
 else {
    queryFilter.append("\"" + shareName + "\"");
    queryFilter.append(VNXeConstants.AND);
    queryFilter.append(VNXeConstants.SNAP_FILTER_V31);
    queryFilter.append("\"" + snapId + "\"");
  }
  setFilter(queryFilter.toString());
  VNXeNfsShare result=null;
  List<VNXeNfsShare> shareList=getDataForObjects(VNXeNfsShare.class);
  if (shareList != null && !shareList.isEmpty()) {
    result=shareList.get(0);
    _logger.info("Snapshot : {} NFS share named : {} found",snapId,shareName);
  }
 else {
    _logger.info("No snapshot share found using the snapId : {}, nfsShare name: {} ",snapId,shareName);
  }
  return result;
}

@Override public final int read() throws IOException {
  ByteBuffer bb=waitForAvailableData();
  return (bb.get() & 0xff);
}

protected TokenPosition(TokenPosition other){
  Objects.requireNonNull(other);
  this.line=other.line;
  this.column=other.column;
  this.offset=other.offset;
}

private JComponent createDetailPanel(Throwable error){
  StackTraceList stl=new StackTraceList(error);
  JScrollPane detailPane=new ExtendedJScrollPane(stl);
  detailPane.setPreferredSize(new Dimension(getWidth(),200));
  detailPane.setBorder(null);
  return detailPane;
}

abstract boolean containsKey(T container,String key);

private JMXConnector connect(String host,int port){
  try {
    if (!isNodeAvailable(host)) {
      log.info("Node({}) is unavailable",host);
      throw new IllegalStateException("Node is unavailable");
    }
    log.debug("Connecting to JMX Server {}:{}",host,port);
    String connectorAddress=String.format(serviceUrl,host,port);
    JMXServiceURL jmxUrl=new JMXServiceURL(connectorAddress);
    return JMXConnectorFactory.connect(jmxUrl);
  }
 catch (  MalformedURLException e) {
    log.error(String.format("Failed to construct jmx url for %s:%d",host,port),e);
    throw new IllegalStateException("Failed to construct jmx url");
  }
catch (  IOException e) {
    log.error(String.format("Failed to connect %s:%d",host,port),e);
    throw new IllegalStateException("Failed to connect " + host);
  }
}

public TagHandler processObjectValue(Object value) throws JspException {
  if (value instanceof AttributeDefinition) {
    return processTypedAttribute((AttributeDefinition)value);
  }
 else   if (value instanceof ComponentDefinition) {
    return processDefinition((ComponentDefinition)value);
  }
  return processAsDefinitionOrURL(value.toString());
}

public List<Integer> emit(String streamId,Tuple anchor,List<Object> tuple){
  return emit(streamId,Arrays.asList(anchor),tuple);
}

private synchronized void writeToOutputStream(int oneByte){
  if (mClosed) {
    return;
  }
  try {
    mOutputStream.write(oneByte);
    reportDecodedSizeIfApplicable();
  }
 catch (  IOException e) {
    handleIOExceptionWritingToStream(e);
  }
}

public int difference(String s1,String s2) throws EncoderException {
  return SoundexUtils.difference(this,s1,s2);
}

public static Enumeration all(){
  return _all.elements();
}

protected List<ModelEntity> makeEntityModelToUseList() throws GenericEntityException {
  List<GenericValue> entitySyncIncludes=entitySync.getRelated("EntitySyncInclude",null,null,false);
  List<GenericValue> entitySyncGroupIncludes=entitySync.getRelated("EntitySyncInclGrpDetailView",null,null,false);
  entitySyncIncludes.addAll(entitySyncGroupIncludes);
  List<ModelEntity> entityModelToUseList=EntityGroupUtil.getModelEntitiesFromRecords(entitySyncIncludes,delegator,true);
  if (Debug.infoOn())   Debug.logInfo("In makeEntityModelToUseList for EntitySync with ID [" + entitySync.get("entitySyncId") + "] syncing "+ entityModelToUseList.size()+ " entities",module);
  return entityModelToUseList;
}

private static String lz(int num){
  return String.format("%02d",num);
}

public void onChildIdleBegin(){
  _idleCount.incrementAndGet();
}

private StartupMode checkStartupMode(Configuration config) throws IOException {
  StartupMode bootMode=checkStartupModeOnDisk(config);
  if (bootMode != null) {
    return bootMode;
  }
  if (checkConfigBool(config,Constants.STARTUPMODE_RESTORE_REINIT)) {
    _log.info("Found geodbrestore config: {}",Constants.STARTUPMODE_RESTORE_REINIT);
    GeodbRestoreMode mode=new GeodbRestoreMode(config);
    mode.setCoordinator(_coordinator);
    mode.setSchemaUtil(_schemaUtil);
    mode.setDbDir(dbDir);
    return mode;
  }
  if (checkConfigBool(config,Constants.REINIT_DB)) {
    _log.info("Found reinit config: {}",Constants.REINIT_DB);
    DbReinitMode mode=new DbReinitMode(config);
    mode.setCoordinator(_coordinator);
    mode.setSchemaUtil(_schemaUtil);
    mode.setDbDir(dbDir);
    return mode;
  }
  List<String> obsoletePeers=checkConfigList(config,Constants.OBSOLETE_CASSANDRA_PEERS);
  if (!obsoletePeers.isEmpty()) {
    ObsoletePeersCleanupMode mode=new ObsoletePeersCleanupMode(config);
    mode.setCoordinator(_coordinator);
    mode.setSchemaUtil(_schemaUtil);
    mode.setObsoletePeers(obsoletePeers);
    return mode;
  }
 else {
    NormalMode mode=new NormalMode(config);
    mode.setCoordinator(_coordinator);
    mode.setSchemaUtil(_schemaUtil);
    return mode;
  }
}

private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException {
  lock.lock();
  try {
    q=new PriorityQueue<E>(Math.max(size,1),comparator);
    q.addAll(this);
    s.defaultWriteObject();
  }
  finally {
    q=null;
    lock.unlock();
  }
}

private void run(){
  try {
    Thread current=Thread.currentThread();
    byte[] buf=new byte[1024];
    for (int len=in.read(buf); len != -1; len=in.read(buf)) {
      buffer.write(buf,0,len);
      if (current != thread) {
        break;
      }
    }
    buffer.flush();
    buffer.close();
  }
 catch (  IOException e) {
    log.error(e.getMessage(),e);
  }
}

protected boolean shardAvailable(@Nullable IndexShard shard){
  return shard != null && shard.canIndex() && CAN_UPDATE_INDEX_BUFFER_STATES.contains(shard.state());
}

synchronized void updateAuthConfigGlobals(ServiceSchemaManager scm) throws SMSException {
  ServiceSchema schema=scm.getOrganizationSchema();
  schema=schema.getSubSchema("Configurations");
  schema=schema.getSubSchema("NamedConfiguration");
  Map attrs=schema.getAttributeDefaults();
  if (attrs != null) {
    defaultServiceSuccessURLSet=(Set)attrs.get(ISAuthConstants.LOGIN_SUCCESS_URL);
    defaultServiceFailureURLSet=(Set)attrs.get(ISAuthConstants.LOGIN_FAILURE_URL);
  }
  if (debug.messageEnabled()) {
    debug.message("Default Service Success URL Set = " + defaultServiceSuccessURLSet);
    debug.message("Default Service Failure URL Set = " + defaultServiceFailureURLSet);
  }
}

public void increment(){
  count.incrementAndGet();
  rateWindow.incrementForTimestamp(timerGetter.now());
}

long totalMemory();

@Override public int preceding(int offset){
  CharacterIterator text=getText();
  checkOffset(offset,text);
  text.setIndex(offset);
  return previous();
}

public void log(String event,String message){
  boolean eventActive=isEventActive(event);
  if ((this.logging && eventActive && !writers.isEmpty())) {
    try {
      for (      Writer writer : writers.values()) {
        writer.write(message);
        writer.write("\n");
        writer.flush();
      }
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
}

public int write(final ByteBuffer byteBuffer) throws IOException {
  ensureOpen();
  final int remaining=byteBuffer.remaining();
  if (inspectable < buffer.length) {
    final int toBuffer=Math.min(buffer.length - inspectable,remaining);
    byteBuffer.get(buffer,inspectable,toBuffer);
    inspectable+=toBuffer;
  }
  if (byteBuffer.hasRemaining()) {
    fileChannel.position(writePosition);
    writePosition+=fileChannel.write(byteBuffer);
  }
  return remaining;
}

public void copyInto(int strOffset,byte[] bytes,int arrayOffset,int len){
  System.arraycopy(m_bytes,m_offset + strOffset,bytes,arrayOffset,len);
}

public static String repeatString(String pattern,int repeats){
  StringBuilder buffer=new StringBuilder(pattern.length() * repeats);
  for (int i=0; i < repeats; i++) {
    buffer.append(pattern);
  }
  return new String(buffer);
}

private boolean isMusicPlayer(){
  return playerSetting != null && playerSetting.equalsIgnoreCase("musicPlayer");
}

private void fitImageToView(){
  Drawable drawable=getDrawable();
  if (drawable == null || drawable.getIntrinsicWidth() == 0 || drawable.getIntrinsicHeight() == 0) {
    return;
  }
  if (matrix == null || prevMatrix == null) {
    return;
  }
  int drawableWidth=drawable.getIntrinsicWidth();
  int drawableHeight=drawable.getIntrinsicHeight();
  float scaleX=(float)viewWidth / drawableWidth;
  float scaleY=(float)viewHeight / drawableHeight;
switch (mScaleType) {
case CENTER:
    scaleX=scaleY=1;
  break;
case CENTER_CROP:
scaleX=scaleY=Math.max(scaleX,scaleY);
break;
case CENTER_INSIDE:
scaleX=scaleY=Math.min(1,Math.min(scaleX,scaleY));
case FIT_CENTER:
scaleX=scaleY=Math.min(scaleX,scaleY);
break;
case FIT_XY:
break;
default :
throw new UnsupportedOperationException("TouchImageView does not support FIT_START or FIT_END");
}
float redundantXSpace=viewWidth - (scaleX * drawableWidth);
float redundantYSpace=viewHeight - (scaleY * drawableHeight);
matchViewWidth=viewWidth - redundantXSpace;
matchViewHeight=viewHeight - redundantYSpace;
if (!isZoomed() && !imageRenderedAtLeastOnce) {
matrix.setScale(scaleX,scaleY);
matrix.postTranslate(redundantXSpace / 2,redundantYSpace / 2);
normalizedScale=1;
}
 else {
if (prevMatchViewWidth == 0 || prevMatchViewHeight == 0) {
savePreviousImageValues();
}
prevMatrix.getValues(m);
m[Matrix.MSCALE_X]=matchViewWidth / drawableWidth * normalizedScale;
m[Matrix.MSCALE_Y]=matchViewHeight / drawableHeight * normalizedScale;
float transX=m[Matrix.MTRANS_X];
float transY=m[Matrix.MTRANS_Y];
float prevActualWidth=prevMatchViewWidth * normalizedScale;
float actualWidth=getImageWidth();
translateMatrixAfterRotate(Matrix.MTRANS_X,transX,prevActualWidth,actualWidth,prevViewWidth,viewWidth,drawableWidth);
float prevActualHeight=prevMatchViewHeight * normalizedScale;
float actualHeight=getImageHeight();
translateMatrixAfterRotate(Matrix.MTRANS_Y,transY,prevActualHeight,actualHeight,prevViewHeight,viewHeight,drawableHeight);
matrix.setValues(m);
}
fixTrans();
setImageMatrix(matrix);
}

public final static VersionInfo[] loadVersionInfo(String[] pckgs,ClassLoader clsldr){
  if (pckgs == null) {
    throw new IllegalArgumentException("Package identifier list must not be null.");
  }
  ArrayList vil=new ArrayList(pckgs.length);
  for (int i=0; i < pckgs.length; i++) {
    VersionInfo vi=loadVersionInfo(pckgs[i],clsldr);
    if (vi != null)     vil.add(vi);
  }
  return (VersionInfo[])vil.toArray(new VersionInfo[vil.size()]);
}

public static Collection<ContentStream> toContentStreams(final String str,final String contentType){
  if (str == null)   return null;
  ArrayList<ContentStream> streams=new ArrayList<>(1);
  ContentStreamBase ccc=new ContentStreamBase.StringStream(str);
  ccc.setContentType(contentType);
  streams.add(ccc);
  return streams;
}

void writeRepeatedSqrt(DD xdd){
  int count=0;
  while (xdd.doubleValue() > 1e-300) {
    count++;
    double x=xdd.doubleValue();
    DD xSqrt=xdd.sqrt();
    String s=xSqrt.toString();
    DD xSqrt2=DD.parse(s);
    DD xx=xSqrt2.multiply(xSqrt2);
    double err=Math.abs(xx.doubleValue() - x);
    xdd=xSqrt;
    DD distFrom1DD=xSqrt.subtract(DD.valueOf(1.0));
    double distFrom1=distFrom1DD.doubleValue();
    if (Math.abs(distFrom1) < 1.0e-40)     break;
  }
}

@Override public String format(DateTimeFormatter formatter){
  Objects.requireNonNull(formatter,"formatter");
  return formatter.format(this);
}

void verifyUniqueXids(List<OFMessage> msgs){
  if (seenXids == null)   seenXids=new HashSet<Long>();
  for (  OFMessage m : msgs) {
    long xid=m.getXid();
    assertTrue("Xid in messags is 0",xid != 0);
    assertFalse("Xid " + xid + " has already been used",seenXids.contains(xid));
    seenXids.add(xid);
  }
}

public static boolean hasExtension(String extension){
  if (extension == null || extension.isEmpty()) {
    return false;
  }
  return extensionToMimeTypeMap.containsKey(extension);
}

private float applyFriction(float velocity,float simulationRate){
  if (isZero(velocity)) {
    velocity=0.0f;
  }
 else   if (velocity > 0) {
    velocity=Math.max(0.0f,velocity - (FRICTION * simulationRate));
  }
 else {
    velocity=Math.min(0.0f,velocity + (FRICTION * simulationRate));
  }
  return velocity;
}

static Boolean realIsJUnit4Test(Class scriptClass,GroovyClassLoader loader){
  boolean isTest=false;
  try {
    try {
      Class runWithAnnotationClass=loader.loadClass("org.junit.runner.RunWith");
      Annotation annotation=scriptClass.getAnnotation(runWithAnnotationClass);
      if (annotation != null) {
        isTest=true;
      }
 else {
        Class testAnnotationClass=loader.loadClass("org.junit.Test");
        Method[] methods=scriptClass.getMethods();
        for (int i=0; i < methods.length; i++) {
          Method method=methods[i];
          annotation=method.getAnnotation(testAnnotationClass);
          if (annotation != null) {
            isTest=true;
            break;
          }
        }
      }
    }
 catch (    ClassNotFoundException e) {
    }
  }
 catch (  Throwable e) {
  }
  return isTest ? Boolean.TRUE : Boolean.FALSE;
}

private Dimension layoutSize(Container target,boolean preferred){
synchronized (target.getTreeLock()) {
    int targetWidth=target.getSize().width;
    if (targetWidth == 0) {
      targetWidth=Integer.MAX_VALUE;
    }
    int hgap=getHgap();
    int vgap=getVgap();
    Insets insets=target.getInsets();
    int horizontalInsetsAndGap=insets.left + insets.right + (hgap * 2);
    int maxWidth=targetWidth - horizontalInsetsAndGap;
    Dimension dim=new Dimension(0,0);
    int rowWidth=0;
    int rowHeight=0;
    int nmembers=target.getComponentCount();
    for (int i=0; i < nmembers; i++) {
      Component m=target.getComponent(i);
      if (m.isVisible()) {
        Dimension d=preferred ? m.getPreferredSize() : m.getMinimumSize();
        if (rowWidth + d.width > maxWidth) {
          addRow(dim,rowWidth,rowHeight);
          rowWidth=0;
          rowHeight=0;
        }
        if (rowWidth != 0) {
          rowWidth+=hgap;
        }
        rowWidth+=d.width;
        rowHeight=Math.max(rowHeight,d.height);
      }
    }
    addRow(dim,rowWidth,rowHeight);
    dim.width+=horizontalInsetsAndGap;
    dim.height+=insets.top + insets.bottom + vgap * 2;
    Container scrollPane=SwingUtilities.getAncestorOfClass(JScrollPane.class,target);
    if (scrollPane != null) {
      dim.width-=(hgap + 1);
    }
    return dim;
  }
}

private static void parseExpression(final Reader reader,final boolean writingString,final StringBuilder templateExpressions) throws IOException {
  if (!writingString) {
    templateExpressions.append("out << \"\"\"");
  }
  templateExpressions.append("${");
  while (true) {
    int c=reader.read();
    if (c == -1)     break;
    if (c == '%') {
      c=reader.read();
      if (c == '>')       break;
      templateExpressions.append('%');
    }
    templateExpressions.append((char)c);
  }
  templateExpressions.append('}');
}

private static String doGetPath(String filename,int separatorAdd){
  if (filename == null) {
    return null;
  }
  int prefix=getPrefixLength(filename);
  if (prefix < 0) {
    return null;
  }
  int index=indexOfLastSeparator(filename);
  int endIndex=index + separatorAdd;
  if (prefix >= filename.length() || index < 0 || prefix >= endIndex) {
    return "";
  }
  return filename.substring(prefix,endIndex);
}

protected void reduceParseTree(CompilationUnitDeclaration unit){
  TypeDeclaration[] types=unit.types;
  for (int i=0, l=types.length; i < l; i++)   purgeMethodStatements(types[i],true);
}

public synchronized void writeTo(OutputStream out) throws IOException {
  int remaining=count;
  for (  byte[] buf : buffers) {
    int c=Math.min(buf.length,remaining);
    out.write(buf,0,c);
    remaining-=c;
    if (remaining == 0) {
      break;
    }
  }
}

public static long findRevision(final List<String> output,final Pattern pattern){
  long revision=-1;
  for (  final String line : output) {
    final Matcher matcher=pattern.matcher(line);
    if (matcher.find()) {
      revision=Long.parseLong(matcher.group(1));
      break;
    }
  }
  return revision;
}

protected int chooseHighWaterMark(int capacity,double maxLoad){
  return Math.min(capacity - 2,(int)(capacity * maxLoad));
}

private AccessGrant createAccessGrant(Map<String,String> params){
  AccessGrant accessGrant=new AccessGrant();
  if (params.get("access_token") != null) {
    String accessToken=params.get("access_token");
    Integer expires=null;
    if (params.get("expires") != null) {
      expires=Integer.valueOf(params.get("expires"));
    }
    accessGrant.setKey(accessToken);
    accessGrant.setAttribute("expires",expires);
  }
  accessGrant.setProviderId(mProviderName.toString());
  return accessGrant;
}

protected final boolean _loadToHaveAtLeast(int minAvailable) throws IOException {
  if (_inputStream == null) {
    return false;
  }
  int amount=_inputEnd - _inputPtr;
  if (amount > 0 && _inputPtr > 0) {
    _currInputProcessed+=_inputPtr;
    _currInputRowStart-=_inputPtr;
    System.arraycopy(_inputBuffer,_inputPtr,_inputBuffer,0,amount);
    _inputEnd=amount;
  }
 else {
    _inputEnd=0;
  }
  _inputPtr=0;
  while (_inputEnd < minAvailable) {
    int count=_inputStream.read(_inputBuffer,_inputEnd,_inputBuffer.length - _inputEnd);
    if (count < 1) {
      _closeInput();
      if (count == 0) {
        throw new IOException("InputStream.read() returned 0 characters when trying to read " + amount + " bytes");
      }
      return false;
    }
    _inputEnd+=count;
  }
  return true;
}

public double logPdf(double x){
  return Math.log(pdf(x));
}

private void selectFile(int titleMsg,int buttonMsg,String settingsName,String defaultDir,int dialog,int result){
  setAutoMode(AutoMode.OFF);
  String action="org.openintents.action.PICK_FILE";
  Intent i=new Intent(action);
  String currentFile=settings.getString(settingsName,"");
  String sep=File.separator;
  if (!currentFile.contains(sep))   currentFile=Environment.getExternalStorageDirectory() + sep + defaultDir+ sep+ currentFile;
  i.setData(Uri.fromFile(new File(currentFile)));
  i.putExtra("org.openintents.extra.TITLE",getString(titleMsg));
  i.putExtra("org.openintents.extra.BUTTON_TEXT",getString(buttonMsg));
  try {
    startActivityForResult(i,result);
  }
 catch (  ActivityNotFoundException e) {
    removeDialog(dialog);
    showDialog(dialog);
  }
}

private static void encodeBinary(byte[] bytes,int startpos,int count,int startmode,StringBuilder sb){
  if (count == 1 && startmode == TEXT_COMPACTION) {
    sb.append((char)SHIFT_TO_BYTE);
  }
 else {
    boolean sixpack=((count % 6) == 0);
    if (sixpack) {
      sb.append((char)LATCH_TO_BYTE);
    }
 else {
      sb.append((char)LATCH_TO_BYTE_PADDED);
    }
  }
  int idx=startpos;
  if (count >= 6) {
    char[] chars=new char[5];
    while ((startpos + count - idx) >= 6) {
      long t=0;
      for (int i=0; i < 6; i++) {
        t<<=8;
        t+=bytes[idx + i] & 0xff;
      }
      for (int i=0; i < 5; i++) {
        chars[i]=(char)(t % 900);
        t/=900;
      }
      for (int i=chars.length - 1; i >= 0; i--) {
        sb.append(chars[i]);
      }
      idx+=6;
    }
  }
  for (int i=idx; i < startpos + count; i++) {
    int ch=bytes[i] & 0xff;
    sb.append((char)ch);
  }
}

public String timerString(int level,String message){
  StringBuilder retStringBuf=new StringBuilder();
  for (int i=0; i < level; i++) {
    retStringBuf.append("| ");
  }
  retStringBuf.append("(");
  String timeSinceStartStr=String.valueOf(timeSinceStart());
  retStringBuf.append(timeSinceStartStr + ",");
  String timeSinceLastStr=String.valueOf(timeSinceLast());
  retStringBuf.append(timeSinceLastStr);
  retStringBuf.append(")");
  int spacecount=12 + (2 * level) - retStringBuf.length();
  for (int i=0; i < spacecount; i++) {
    retStringBuf.append(' ');
  }
  retStringBuf.append(message);
  lastMessageTime=System.currentTimeMillis();
  String retString=retStringBuf.toString();
  if (log && Debug.timingOn())   Debug.logTiming(retString,module);
  return retString;
}

public static int recompileWithOpt(NormalMethod method){
  if (VM.BuildForOptCompiler) {
    CompilationPlan plan=new CompilationPlan(method,(OptimizationPlanElement[])optimizationPlan,null,(OptOptions)options);
    return recompileWithOpt(plan);
  }
 else {
    if (VM.VerifyAssertions)     VM._assert(VM.NOT_REACHED);
    return -1;
  }
}

public String findMatch(Pattern pattern,String text){
  return findMatch(pattern,text,1);
}

private void addHit(String cname,Class<?> c){
  if (len == names.length) {
    final int nl=(len << 1) + 1;
    names=Arrays.copyOf(names,nl);
    clazzes=Arrays.copyOf(clazzes,nl);
  }
  names[len]=cname;
  clazzes[len]=c;
  ++len;
}

private Object queryCommandValue(final String commandIdentifier){
  Check.notNull(commandIdentifier,"command");
  final StringBuffer cmd=new StringBuffer();
  cmd.append("return editor.queryCommandValue(\"");
  cmd.append(commandIdentifier);
  cmd.append("\") || ''");
  return browser.evaluate(cmd.toString());
}

public void line(double x,double y){
  Line line=new Line(x,y);
  if (x < minX) {
    minX=x;
  }
  if (y < minY) {
    minY=y;
  }
  if (x > maxX) {
    maxX=x;
  }
  if (y > maxY) {
    maxY=y;
  }
  elements.add(line);
}

private void clipViewOnTheRight(Rect curViewBound,float curViewWidth,int right){
  curViewBound.right=(int)(right - mClipPadding);
  curViewBound.left=(int)(curViewBound.right - curViewWidth);
}

@Override public List<Cluster<T>> cluster(final Collection<T> points) throws NullArgumentException {
  MathUtils.checkNotNull(points);
  final List<Cluster<T>> clusters=new ArrayList<Cluster<T>>();
  final Map<Clusterable,PointStatus> visited=new HashMap<Clusterable,PointStatus>();
  for (  final T point : points) {
    if (visited.get(point) != null) {
      continue;
    }
    final List<T> neighbors=getNeighbors(point,points);
    if (neighbors.size() >= minPts) {
      final Cluster<T> cluster=new Cluster<T>();
      clusters.add(expandCluster(cluster,point,neighbors,points,visited));
    }
 else {
      visited.put(point,PointStatus.NOISE);
    }
  }
  return clusters;
}

public void testGetVersion25() throws Exception {
  String xml=WEBAPP_25_HEADER + "</web-app>";
  WebXml webXml=WebXmlIo.parseWebXml(new ByteArrayInputStream(xml.getBytes("UTF-8")),getEntityResolver());
  assertEquals(WebXmlVersion.V2_5,webXml.getVersion());
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

private static void mat4_util_inplace_rotate(float[] inOutMatrix,float eulerRadiansX,float eulerRadiansY,float eulerRadiansZ){
  float cos_rx=(float)Math.cos(eulerRadiansX);
  float cos_ry=(float)Math.cos(eulerRadiansY);
  float cos_rz=(float)Math.cos(eulerRadiansZ);
  float sin_rx=(float)Math.sin(eulerRadiansX);
  float sin_ry=(float)Math.sin(eulerRadiansY);
  float sin_rz=(float)Math.sin(eulerRadiansZ);
  float b00=cos_rz * cos_ry;
  float b10=sin_rz * cos_ry;
  float b20=-sin_ry;
  float b30=0.0f;
  float b01=-sin_rz * cos_rx + cos_rz * sin_ry * sin_rx;
  float b11=cos_rz * cos_rx + sin_rz * sin_ry * sin_rx;
  float b21=cos_ry * sin_rx;
  float b31=0.0f;
  float b02=sin_rz * sin_rx + cos_rz * sin_ry * cos_rx;
  float b12=-cos_rz * sin_rx + sin_rz * sin_ry * cos_rx;
  float b22=cos_ry * cos_rx;
  float b32=0.0f;
  float b03=0.0f;
  float b13=0.0f;
  float b23=0.0f;
  float b33=1.0f;
  float a00=inOutMatrix[0];
  float a10=inOutMatrix[1];
  float a20=inOutMatrix[2];
  float a30=inOutMatrix[3];
  float a01=inOutMatrix[4];
  float a11=inOutMatrix[5];
  float a21=inOutMatrix[6];
  float a31=inOutMatrix[7];
  float a02=inOutMatrix[8];
  float a12=inOutMatrix[9];
  float a22=inOutMatrix[10];
  float a32=inOutMatrix[11];
  float a03=inOutMatrix[12];
  float a13=inOutMatrix[13];
  float a23=inOutMatrix[14];
  float a33=inOutMatrix[15];
  inOutMatrix[0]=a00 * b00 + a01 * b10 + a02 * b20 + a03 * b30;
  inOutMatrix[1]=a10 * b00 + a11 * b10 + a12 * b20 + a13 * b30;
  inOutMatrix[2]=a20 * b00 + a21 * b10 + a22 * b20 + a23 * b30;
  inOutMatrix[3]=a30 * b00 + a31 * b10 + a32 * b20 + a33 * b30;
  inOutMatrix[4]=a00 * b01 + a01 * b11 + a02 * b21 + a03 * b31;
  inOutMatrix[5]=a10 * b01 + a11 * b11 + a12 * b21 + a13 * b31;
  inOutMatrix[6]=a20 * b01 + a21 * b11 + a22 * b21 + a23 * b31;
  inOutMatrix[7]=a30 * b01 + a31 * b11 + a32 * b21 + a33 * b31;
  inOutMatrix[8]=a00 * b02 + a01 * b12 + a02 * b22 + a03 * b32;
  inOutMatrix[9]=a10 * b02 + a11 * b12 + a12 * b22 + a13 * b32;
  inOutMatrix[10]=a20 * b02 + a21 * b12 + a22 * b22 + a23 * b32;
  inOutMatrix[11]=a30 * b02 + a31 * b12 + a32 * b22 + a33 * b32;
  inOutMatrix[12]=a00 * b03 + a01 * b13 + a02 * b23 + a03 * b33;
  inOutMatrix[13]=a10 * b03 + a11 * b13 + a12 * b23 + a13 * b33;
  inOutMatrix[14]=a20 * b03 + a21 * b13 + a22 * b23 + a23 * b33;
  inOutMatrix[15]=a30 * b03 + a31 * b13 + a32 * b23 + a33 * b33;
}

@Override public void mousePressed(MouseEvent evt){
  int pos=(slider.getOrientation() == JSlider.HORIZONTAL) ? evt.getX() : evt.getY();
  int loc=getLocationForValue(getSnappedValue(evt));
  this.offset=(loc < 0) ? 0 : pos - loc;
}

private String printDFormat(final long x){
  return printDFormat(Long.toString(x));
}

public void write(int ch) throws IOException {
  OutputStream os=getOutputStream();
  os.write('D');
  os.write(0);
  os.write(1);
  os.write(ch);
}

public static <S>ServiceLoader<S> loadInstalled(Class<S> service){
  ClassLoader cl=ClassLoader.getSystemClassLoader();
  if (cl != null) {
    while (cl.getParent() != null) {
      cl=cl.getParent();
    }
  }
  return ServiceLoader.load(service,cl);
}

private static Iterator<Operand> iterateReturnValues(IR ir){
  ArrayList<Operand> returnValues=new ArrayList<Operand>();
  for (Enumeration<Instruction> e=ir.forwardInstrEnumerator(); e.hasMoreElements(); ) {
    Instruction s=e.nextElement();
    if (Return.conforms(s)) {
      returnValues.add(Return.getVal(s));
    }
  }
  return returnValues.iterator();
}

public static Pattern glob2Pattern(String... globs){
  final StringBuilder regex=new StringBuilder();
  boolean needOr=false;
  for (  String glob : globs) {
    if (needOr) {
      regex.append('|');
    }
    int i=0, len=glob.length();
    while (i < len) {
      char c=glob.charAt(i++);
switch (c) {
case '*':
        if (i < len && glob.charAt(i) == '*') {
          regex.append(".*");
          i++;
        }
 else {
          regex.append("[^.]*");
        }
      break;
case '?':
    regex.append("[^.]");
  break;
default :
if (isRegexMeta(c)) {
  regex.append('\\');
}
regex.append(c);
}
}
needOr=true;
}
return Pattern.compile(regex.toString(),0);
}

public static boolean containsTraceExplorerModuleConflict(String rootModuleName){
  String rootModuleFileName=rootModuleName;
  if (!rootModuleName.endsWith(ResourceHelper.TLA_EXTENSION)) {
    rootModuleFileName=ResourceHelper.getModuleFileName(rootModuleName);
  }
  List<String> extendedModuleNames=ToolboxHandle.getExtendedModules(rootModuleFileName);
  Iterator<String> it=extendedModuleNames.iterator();
  while (it.hasNext()) {
    String moduleName=it.next();
    if (moduleName.equals(TE_FILE_TLA)) {
      return true;
    }
  }
  return false;
}

public void testFlipBitNegativeInside2(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=-1;
  int number=45;
  byte rBytes[]={-2,127,-57,-101,1,75,-90,-14,-92,-4,14,-36,-26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.flipBit(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

private String buildFullMessage(String msg,Object arg0,Object arg1,Object arg2,Object[] argArray){
  StringBuilder sb=null;
  int lastIndex=0;
  int argC=0;
  while (true) {
    int argIndex=msg.indexOf(ARG_STRING,lastIndex);
    if (argIndex == -1) {
      break;
    }
    if (sb == null) {
      sb=new StringBuilder(128);
    }
    sb.append(msg,lastIndex,argIndex);
    lastIndex=argIndex + ARG_STRING_LENGTH;
    if (argArray == null) {
      if (argC == 0) {
        appendArg(sb,arg0);
      }
 else       if (argC == 1) {
        appendArg(sb,arg1);
      }
 else       if (argC == 2) {
        appendArg(sb,arg2);
      }
 else {
      }
    }
 else     if (argC < argArray.length) {
      appendArg(sb,argArray[argC]);
    }
 else {
    }
    argC++;
  }
  if (sb == null) {
    return msg;
  }
 else {
    sb.append(msg,lastIndex,msg.length());
    return sb.toString();
  }
}

protected void removeFromParentInfo(Openable child){
  Openable parent=(Openable)child.getParent();
  if (parent != null && parent.isOpen()) {
    try {
      OpenableElementInfo info=(OpenableElementInfo)parent.getElementInfo();
      info.removeChild(child);
    }
 catch (    JavaModelException e) {
    }
  }
}

public void removeAllUpdateListeners(){
  if (mUpdateListeners == null) {
    return;
  }
  mUpdateListeners.clear();
  mUpdateListeners=null;
}

public static String encodeString(String s){
  return new String(encode(s.getBytes()));
}

public void executePlan(TaskCompleter completer,String successMessage,WorkflowCallbackHandler callbackHandler,Object[] callbackHandlerArgs,WorkflowRollbackHandler rollbackHandler,Object[] rollbackHandlerArgs) throws WorkflowException {
  this._callbackHandler=callbackHandler;
  if (callbackHandlerArgs != null) {
    this._callbackHandlerArgs=callbackHandlerArgs.clone();
  }
  this._rollbackHandler=rollbackHandler;
  if (rollbackHandlerArgs != null) {
    this._rollbackHandlerArgs=rollbackHandlerArgs.clone();
  }
  this._taskCompleter=completer;
  this._successMessage=successMessage;
  _service.executePlan(this);
}

private OSInfo(){
}

public boolean isMutable(){
  return mutable;
}

public void handleRequest(RequestContext rc) throws CLIException {
  super.handleRequest(rc);
  ldapLogin();
  String serviceName=getStringOptionValue(IArgument.SERVICE_NAME);
  String subConfigName=getStringOptionValue(IArgument.SUB_CONFIGURATION_NAME);
  String realmName=getStringOptionValue(IArgument.REALM_NAME);
  if ((realmName == null) || (realmName.length() == 0)) {
    deleteSubConfigToRoot(serviceName,subConfigName);
  }
 else {
    deleteSubConfigFromRealm(realmName,serviceName,subConfigName);
  }
}

public void enforceContext(Resource... contexts){
  OpenRDFUtil.verifyContextNotNull(contexts);
  this.contexts=Arrays.copyOf(contexts,contexts.length);
}

protected void runUpload(Integer numOfThreads,HashMap<String,String> attributes,Boolean createNewVersion,Boolean force) throws Exception {
  runUpload(numOfThreads,attributes,createNewVersion,force,null,null);
}

public final Collection<Component> components(){
  return new HashSet<>(components.values());
}

protected boolean[] canPredict(boolean nominalPredictor,boolean numericPredictor,boolean stringPredictor,boolean datePredictor,boolean relationalPredictor,boolean multiInstance,int classType){
  print("basic predict");
  printAttributeSummary(nominalPredictor,numericPredictor,stringPredictor,datePredictor,relationalPredictor,multiInstance,classType);
  print("...");
  ArrayList<String> accepts=new ArrayList<String>();
  accepts.add("unary");
  accepts.add("binary");
  accepts.add("nominal");
  accepts.add("numeric");
  accepts.add("string");
  accepts.add("date");
  accepts.add("relational");
  accepts.add("multi-instance");
  accepts.add("not in classpath");
  int numTrain=getNumInstances(), numClasses=2, missingLevel=0;
  boolean predictorMissing=false, classMissing=false;
  return runBasicTest(nominalPredictor,numericPredictor,stringPredictor,datePredictor,relationalPredictor,multiInstance,classType,missingLevel,predictorMissing,classMissing,numTrain,numClasses,accepts);
}

public void test_historyIndexDisabled() throws SailException {
  final Properties properties=getProperties();
  properties.setProperty(com.bigdata.rdf.store.AbstractTripleStore.Options.HISTORY_SERVICE,"false");
  final BigdataSail sail=getSail(properties);
  try {
    sail.initialize();
    final BigdataSailConnection conn=sail.getConnection();
    try {
      final IIndex ndx=getHistoryIndex(conn.getTripleStore());
      assertNull(ndx);
      conn.rollback();
    }
  finally {
      conn.close();
    }
  }
  finally {
    sail.__tearDownUnitTest();
  }
}

public void collapse(){
  collapse(true);
}

public int numInstances(){
  return m_Instances.size();
}

@Override public void startDocument(XMLLocator locator,String encoding,NamespaceContext namespaceContext,Augmentations augs) throws XNIException {
  fNamespaceContext=namespaceContext;
  try {
    if (fDocumentHandler != null) {
      if (locator != null) {
        fDocumentHandler.setDocumentLocator(new LocatorProxy(locator));
      }
      if (fDocumentHandler != null) {
        fDocumentHandler.startDocument();
      }
    }
    if (fContentHandler != null) {
      if (locator != null) {
        fContentHandler.setDocumentLocator(new LocatorProxy(locator));
      }
      if (fContentHandler != null) {
        fContentHandler.startDocument();
      }
    }
  }
 catch (  SAXException e) {
    throw new XNIException(e);
  }
}

public static double parseNumberPercentWithSeparateRange(FXGNode node,String value,String name,double minNumber,double maxNumber,double minPercent,double maxPercent,double defaultValue){
  if (value.length() != 0 && value.charAt(value.length() - 1) == '%') {
    String doubleValue=value.substring(0,value.length() - 1);
    try {
      return parseDouble(node,doubleValue,name,minPercent,maxPercent,defaultValue);
    }
 catch (    FXGException e) {
      throw new FXGException(node.getStartLine(),node.getStartColumn(),"InvalidPercentValue",name,value);
    }
  }
 else {
    return parseDouble(node,value,name,minNumber,maxNumber,defaultValue);
  }
}

private void checkDownloadCanProceed() throws StopRequestException {
  if (clock.intervalLessThan(Clock.Interval.ONE_SECOND)) {
    return;
  }
  clock.startInterval();
  checkIsPausedOrCanceled();
  checkClientRules();
}

private void calculateColor(int coord){
  coord=coord - mBarPointerHaloRadius;
  if (coord < 0) {
    coord=0;
  }
 else   if (coord > mBarLength) {
    coord=mBarLength;
  }
  mColor=Color.HSVToColor(Math.round(mPosToOpacFactor * coord),mHSVColor);
  if (Color.alpha(mColor) > 250) {
    mColor=Color.HSVToColor(mHSVColor);
  }
 else   if (Color.alpha(mColor) < 5) {
    mColor=Color.TRANSPARENT;
  }
}

private void deleteEvent(EventRegKeyExpiration regExpiration,EventReg reg){
  listeners.dec();
synchronized (reg) {
    EntryRep[] tmpls=reg.tmpl.attributeSetTemplates;
    if (tmpls != null) {
      for (int i=tmpls.length; --i >= 0; ) {
        EntryClass eclass=tmpls[i].eclass;
        eclass.setNumTemplates(eclass.getNumTemplates() - 1);
      }
    }
    Long id=reg.eventID;
    eventByID.remove(id);
    if (regExpiration != null) {
      eventByTime.remove(regExpiration);
    }
 else {
      eventByTime.remove(new EventRegKeyExpiration(reg,reg.leaseExpiration));
    }
    if (reg.tmpl.serviceID != null) {
      Object val=subEventByService.get(reg.tmpl.serviceID);
      if (val == reg) {
        subEventByService.remove(reg.tmpl.serviceID);
      }
 else {
        Object[] array=(EventReg[])val;
        array=arrayDel(array,indexOf(array,reg));
        if (array.length == 1)         val=array[0];
 else         val=array;
        subEventByService.put(reg.tmpl.serviceID,val);
      }
    }
 else {
      subEventByID.remove(id);
    }
    computeMaxLeases();
  }
}

public String gtidSet(){
  return this.gtidSet != null ? this.gtidSet : null;
}

public static Peer createMapPeer(Map map) throws MessageException {
  if (!map.containsKey(PORT) || !map.containsKey(ADDRESS))   throw new MessageException("Invalid address map");
  int port=(int)(long)map.get(PORT);
  String address=(String)map.get(ADDRESS);
  String peerId=null;
  if (map.containsKey(PEER_ID))   peerId=(String)map.get(PEER_ID);
  return new Peer(peerId,new InetSocketAddress(address,port));
}

private static int countGapsDashDotStar(String sequence){
  int count=0;
  for (int i=0; i < sequence.length(); i++) {
    int a=sequence.charAt(i);
    if (a == '-' || a == '.' || a == '*')     count++;
  }
  return count;
}

private boolean testPassword() throws PdfSecurityException {
  int count=32;
  final byte[] rawValue=new byte[32];
  byte[] keyValue;
  for (int i=0; i < 32; i++) {
    rawValue[i]=(byte)Integer.parseInt(pad[i],16);
  }
  byte[] encrypted=ObjectCloneFactory.cloneArray(rawValue);
  if (rev == 2) {
    encryptionKey=calculateKey(O,P,ID);
    encrypted=decrypt(encrypted,"",true,null,false,false);
  }
 else   if (rev >= 3) {
    int keyLength=this.keyLength;
    count=16;
    encryptionKey=calculateKey(O,P,ID);
    final byte[] originalKey=ObjectCloneFactory.cloneArray(encryptionKey);
    MessageDigest md=null;
    try {
      md=MessageDigest.getInstance("MD5");
    }
 catch (    final Exception e) {
      LogWriter.writeLog("Exception " + e + " with digest");
    }
    md.update(encrypted);
    keyValue=md.digest(ID);
    keyValue=decrypt(keyValue,"",true,null,true,false);
    final byte[] nextKey=new byte[keyLength];
    for (int i=1; i <= 19; i++) {
      for (int j=0; j < keyLength; j++) {
        nextKey[j]=(byte)(originalKey[j] ^ i);
      }
      encryptionKey=nextKey;
      keyValue=decrypt(keyValue,"",true,null,true,false);
    }
    encryptionKey=originalKey;
    encrypted=new byte[32];
    System.arraycopy(keyValue,0,encrypted,0,16);
    System.arraycopy(rawValue,0,encrypted,16,16);
  }
  return compareKeys(U,encrypted,count);
}

public static void putDoubleField(Object obj,long fieldOff,double val){
  UNSAFE.putDouble(obj,fieldOff,val);
}

public static String readFully(Reader reader) throws IOException {
  try {
    StringWriter writer=new StringWriter();
    char[] buffer=new char[1024];
    int count;
    while ((count=reader.read(buffer)) != -1) {
      writer.write(buffer,0,count);
    }
    return writer.toString();
  }
  finally {
    reader.close();
  }
}

public String toOIDString(){
  if (sOID == null) {
    sOID="OID." + toString();
  }
  return sOID;
}

public void emitDirect(int taskId,String streamId,Tuple anchor,List<Object> tuple){
  emitDirect(taskId,streamId,Arrays.asList(anchor),tuple);
}

protected void loadValue(String sValue){
  sValue=sValue.trim();
  try {
    int r=Integer.parseInt(sValue.substring(1,3),16);
    int g=Integer.parseInt(sValue.substring(3,5),16);
    int b=Integer.parseInt(sValue.substring(5,7),16);
    value=new Color(r,g,b);
  }
 catch (  NumberFormatException nfe) {
    revertToDefault();
  }
catch (  StringIndexOutOfBoundsException sioobe) {
    revertToDefault();
  }
}

public void schemaChanged(String serviceName,String version){
  updateStatus();
}

private static int byteCompaction(int mode,int[] codewords,int codeIndex,StringBuilder result){
  if (mode == BYTE_COMPACTION_MODE_LATCH) {
    int count=0;
    long value=0;
    char[] decodedData=new char[6];
    int[] byteCompactedCodewords=new int[6];
    boolean end=false;
    int nextCode=codewords[codeIndex++];
    while ((codeIndex < codewords[0]) && !end) {
      byteCompactedCodewords[count++]=nextCode;
      value=900 * value + nextCode;
      nextCode=codewords[codeIndex++];
      if (nextCode == TEXT_COMPACTION_MODE_LATCH || nextCode == BYTE_COMPACTION_MODE_LATCH || nextCode == NUMERIC_COMPACTION_MODE_LATCH || nextCode == BYTE_COMPACTION_MODE_LATCH_6 || nextCode == BEGIN_MACRO_PDF417_CONTROL_BLOCK || nextCode == BEGIN_MACRO_PDF417_OPTIONAL_FIELD || nextCode == MACRO_PDF417_TERMINATOR) {
        codeIndex--;
        end=true;
      }
 else {
        if ((count % 5 == 0) && (count > 0)) {
          for (int j=0; j < 6; ++j) {
            decodedData[5 - j]=(char)(value % 256);
            value>>=8;
          }
          result.append(decodedData);
          count=0;
        }
      }
    }
    if (codeIndex == codewords[0] && nextCode < TEXT_COMPACTION_MODE_LATCH) {
      byteCompactedCodewords[count++]=nextCode;
    }
    for (int i=0; i < count; i++) {
      result.append((char)byteCompactedCodewords[i]);
    }
  }
 else   if (mode == BYTE_COMPACTION_MODE_LATCH_6) {
    int count=0;
    long value=0;
    boolean end=false;
    while (codeIndex < codewords[0] && !end) {
      int code=codewords[codeIndex++];
      if (code < TEXT_COMPACTION_MODE_LATCH) {
        count++;
        value=900 * value + code;
      }
 else {
        if (code == TEXT_COMPACTION_MODE_LATCH || code == BYTE_COMPACTION_MODE_LATCH || code == NUMERIC_COMPACTION_MODE_LATCH || code == BYTE_COMPACTION_MODE_LATCH_6 || code == BEGIN_MACRO_PDF417_CONTROL_BLOCK || code == BEGIN_MACRO_PDF417_OPTIONAL_FIELD || code == MACRO_PDF417_TERMINATOR) {
          codeIndex--;
          end=true;
        }
      }
      if ((count % 5 == 0) && (count > 0)) {
        char[] decodedData=new char[6];
        for (int j=0; j < 6; ++j) {
          decodedData[5 - j]=(char)(value & 0xFF);
          value>>=8;
        }
        result.append(decodedData);
        count=0;
      }
    }
  }
  return codeIndex;
}

public int addAndGet(T obj,int delta){
  for (; ; ) {
    int current=get(obj);
    int next=current + delta;
    if (compareAndSet(obj,current,next))     return next;
  }
}

public KCResponse serve(String uri,String method,Properties header,Properties parms,Properties files){
  return serveFile(uri,header,myRootDir,true);
}

protected void fillMemData(Object data,int[] posits,int length,Object output,int outputOffset,int dim){
  if (data instanceof Object[]) {
    Object[] xo=(Object[])data;
    fillMemData(xo[posits[dim]],posits,length,output,outputOffset,dim + 1);
  }
 else {
    int startFrom=posits[dim];
    int startTo=outputOffset;
    int copyLength=length;
    if (posits[dim] < 0) {
      startFrom-=posits[dim];
      startTo-=posits[dim];
      copyLength+=posits[dim];
    }
    if (posits[dim] + length > this.dims[dim]) {
      copyLength-=posits[dim] + length - this.dims[dim];
    }
    System.arraycopy(data,startFrom,output,startTo,copyLength);
  }
}

public Optional<String> startAsyncJob(String jobType){
  try {
    final JobRunnable jobRunnable=findJobRunnable(jobType);
    JobInfo jobInfo=createJobInfo(jobType);
    repository.markJobAsRunningIfPossible(jobInfo,mutexJobTypesFor(jobType));
    repository.createOrUpdate(jobInfo);
    return Optional.of(startAsync(metered(jobRunnable),jobInfo.getJobId()));
  }
 catch (  JobBlockedException e) {
    LOG.info(e.getMessage());
    return Optional.empty();
  }
}

public boolean isLegalReplacement(byte[] replacement){
  if (decoder == null) {
    decoder=charset.newDecoder();
    decoder.onMalformedInput(CodingErrorAction.REPORT);
    decoder.onUnmappableCharacter(CodingErrorAction.REPORT);
  }
  ByteBuffer in=ByteBuffer.wrap(replacement);
  CharBuffer out=CharBuffer.allocate((int)(replacement.length * decoder.maxCharsPerByte()));
  CoderResult result=decoder.decode(in,out,true);
  return !result.isError();
}

public static void adaptTable(ConstraintTableLayout table){
  int width=table.getWidth();
  int height=table.getHeight();
  ConstraintWidget.DimensionBehaviour horizontalBehaviour=table.getHorizontalDimensionBehaviour();
  ConstraintWidget.DimensionBehaviour verticalBehaviour=table.getVerticalDimensionBehaviour();
  table.setHorizontalDimensionBehaviour(ConstraintWidget.DimensionBehaviour.WRAP_CONTENT);
  table.setVerticalDimensionBehaviour(ConstraintWidget.DimensionBehaviour.WRAP_CONTENT);
  table.layout();
  table.layout();
  table.setMinWidth(table.getWidth());
  table.setMinHeight(table.getHeight());
  table.computeGuidelinesPercentPositions();
  table.setHorizontalDimensionBehaviour(horizontalBehaviour);
  table.setVerticalDimensionBehaviour(verticalBehaviour);
  table.setWidth(width < table.getMinWidth() ? table.getMinWidth() : width);
  table.setHeight(height < table.getMinHeight() ? table.getMinHeight() : height);
  table.layout();
}

public static <V,C extends Collection<? super V>>C addAll(C c,V... vals){
  Collections.addAll(c,vals);
  return c;
}

public static void addStrut(JComponent b,int layout,int size){
  if (size < 1)   return;
  b.add(getAxis(b,layout) == BoxLayout.X_AXIS ? Box.createHorizontalStrut(size) : Box.createVerticalStrut(size));
}

public void elementType(String name,int model,int memberOf,int flags){
  ElementType e=new ElementType(name,model,memberOf,flags,this);
  theElementTypes.put(name.toLowerCase(),e);
  if (memberOf == M_ROOT)   theRoot=e;
}

public int arrayIndexScale(Class clazz){
  if (!clazz.isArray()) {
    throw new IllegalArgumentException("valid for array classes only");
  }
  return arrayIndexScale0(clazz);
}

public static StringPool readStringPool(ByteBuffer buffer,StringPoolHeader stringPoolHeader){
  long beginPos=buffer.position();
  long[] offsets=new long[(int)stringPoolHeader.getStringCount()];
  if (stringPoolHeader.getStringCount() > 0) {
    for (int idx=0; idx < stringPoolHeader.getStringCount(); idx++) {
      offsets[idx]=Buffers.readUInt(buffer);
    }
  }
  boolean utf8=(stringPoolHeader.getFlags() & StringPoolHeader.UTF8_FLAG) != 0;
  long stringPos=beginPos + stringPoolHeader.getStringsStart() - stringPoolHeader.getHeaderSize();
  buffer.position((int)stringPos);
  StringPoolEntry[] entries=new StringPoolEntry[offsets.length];
  for (int i=0; i < offsets.length; i++) {
    entries[i]=new StringPoolEntry(i,stringPos + offsets[i]);
  }
  String lastStr=null;
  long lastOffset=-1;
  StringPool stringPool=new StringPool((int)stringPoolHeader.getStringCount());
  for (  StringPoolEntry entry : entries) {
    if (entry.offset == lastOffset) {
      stringPool.set(entry.index,lastStr);
      continue;
    }
    buffer.position((int)entry.offset);
    lastOffset=entry.offset;
    String str=ParseUtils.readString(buffer,utf8);
    lastStr=str;
    stringPool.set(entry.index,str);
  }
  buffer.position((int)(beginPos + stringPoolHeader.getBodySize()));
  return stringPool;
}

public String strRep(){
  return "#" + rankTeamPollScore + " "+ abbr+ " ("+ wins+ "-"+ losses+ ")";
}

@Override public String toString(){
  if (eIsProxy())   return super.toString();
  StringBuffer result=new StringBuffer(super.toString());
  result.append(" (kind: ");
  result.append(kind);
  result.append(')');
  return result.toString();
}

public static <V>int addDistinctList(List<V> sourceList,List<V> entryList){
  if (sourceList == null || isEmpty(entryList)) {
    return 0;
  }
  int sourceCount=sourceList.size();
  for (  V entry : entryList) {
    if (!sourceList.contains(entry)) {
      sourceList.add(entry);
    }
  }
  return sourceList.size() - sourceCount;
}

private void recordRPOperation(DbClient dbClient,OperationTypeEnum opType,Operation.Status status,Object... extParam){
  try {
    boolean opStatus=(Operation.Status.ready == status) ? true : false;
    String evType;
    evType=opType.getEvType(opStatus);
    String evDesc=opType.getDescription();
    String opStage=AuditLogManager.AUDITOP_END;
    _log.info("opType: {} detail: {}",opType.toString(),evType.toString() + ':' + evDesc);
    recordBourneRPEvent(dbClient,getId(),evType,status,evDesc);
switch (opType) {
case START_RP_LINK:
case STOP_RP_LINK:
case PAUSE_RP_LINK:
case RESUME_RP_LINK:
case FAILOVER_RP_LINK:
case FAILOVER_CANCEL_RP_LINK:
case CHANGE_RP_IMAGE_ACCESS_MODE:
case SWAP_RP_VOLUME:
      AuditBlockUtil.auditBlock(dbClient,opType,opStatus,opStage,extParam);
    break;
default :
  _log.error("Unrecognized RP operation type");
}
}
 catch (Exception e) {
_log.error("Failed to record RP operation {}, err: {}",opType.toString(),e);
}
}

void autoClosingClipOpened(AutoClosingClip clip){
  if (Printer.debug)   Printer.debug("> EventDispatcher.autoClosingClipOpened ");
  int index=0;
synchronized (autoClosingClips) {
    index=getAutoClosingClipIndex(clip);
    if (index == -1) {
      if (Printer.debug)       Printer.debug("EventDispatcher: adding auto-closing clip " + clip);
      autoClosingClips.add(new ClipInfo(clip));
    }
  }
  if (index == -1) {
synchronized (this) {
      notifyAll();
    }
  }
  if (Printer.debug)   Printer.debug("< EventDispatcher.autoClosingClipOpened finished(" + autoClosingClips.size() + " clips)");
}

public boolean implies(Permission permission){
  if (!(permission instanceof ExecOptionPermission))   return false;
  ExecOptionPermission p=(ExecOptionPermission)permission;
  if (all_allowed)   return true;
  String pname=p.getName();
  Permission x=permissions.get(pname);
  if (x != null)   return x.implies(permission);
  int last, offset;
  offset=pname.length() - 1;
  while ((last=pname.lastIndexOf(".",offset)) != -1) {
    pname=pname.substring(0,last + 1) + "*";
    x=permissions.get(pname);
    if (x != null) {
      return x.implies(permission);
    }
    offset=last - 1;
  }
  pname=p.getName();
  offset=pname.length() - 1;
  while ((last=pname.lastIndexOf("=",offset)) != -1) {
    pname=pname.substring(0,last + 1) + "*";
    x=permissions.get(pname);
    if (x != null) {
      return x.implies(permission);
    }
    offset=last - 1;
  }
  return false;
}

public void addTailArg(String arg){
  _tailArgs.add(arg);
}

private static byte[] save(Bitmap src,Bitmap.CompressFormat format,int quality){
  ByteArrayOutputStream outputStream=null;
  try {
    outputStream=new ByteArrayOutputStream();
    src.compress(format,quality,outputStream);
    return outputStream.toByteArray();
  }
  finally {
    if (outputStream != null) {
      try {
        outputStream.close();
      }
 catch (      IOException e1) {
        e1.printStackTrace();
      }
    }
  }
}

public boolean isExternal(Resource input){
  return externalResources.contains(input);
}

protected final void writeD(ByteBuffer buf,int value){
  buf.putInt(value);
}

@Override public AbstractScannedResult scanBlocklet(BlocksChunkHolder blocksChunkHolder) throws QueryExecutionException {
  try {
    fillScannedResult(blocksChunkHolder);
  }
 catch (  FilterUnsupportedException e) {
    throw new QueryExecutionException(e.getMessage());
  }
  return scannedResult;
}

public List<ShoppingCartItem> items(){
  List<ShoppingCartItem> result=FastList.newInstance();
  result.addAll(cartLines);
  return result;
}

MutableBigInteger(BigInteger b){
  intLen=b.mag.length;
  value=Arrays.copyOf(b.mag,intLen);
}

public boolean isHttp11(){
  if (mVersion.equalsIgnoreCase(HTTP11)) {
    return true;
  }
  return false;
}

private int readNext(boolean charstring){
  num=(int)(data[pos++]) & 0xff;
  if (num == 30 && !charstring) {
    readFNum();
    return type=FLT;
  }
 else   if (num == 28) {
    num=(((int)data[pos]) << 8) + (((int)data[pos + 1]) & 0xff);
    pos+=2;
    return type=NUM;
  }
 else   if (num == 29 && !charstring) {
    num=(((int)data[pos] & 0xff) << 24) | (((int)data[pos + 1] & 0xff) << 16) | (((int)data[pos + 2] & 0xff) << 8)| (((int)data[pos + 3] & 0xff));
    pos+=4;
    return type=NUM;
  }
 else   if (num == 12) {
    num=1000 + ((int)(data[pos++]) & 0xff);
    return type=CMD;
  }
 else   if (num < 32) {
    return type=CMD;
  }
 else   if (num < 247) {
    num-=139;
    return type=NUM;
  }
 else   if (num < 251) {
    num=(num - 247) * 256 + (((int)data[pos++]) & 0xff) + 108;
    return type=NUM;
  }
 else   if (num < 255) {
    num=-(num - 251) * 256 - (((int)data[pos++]) & 0xff) - 108;
    return type=NUM;
  }
 else   if (!charstring) {
    printData();
    throw new RuntimeException("Got a 255 code while reading dict");
  }
 else {
    fnum=((((int)data[pos] & 0xff) << 24) | (((int)data[pos + 1] & 0xff) << 16) | (((int)data[pos + 2] & 0xff) << 8)| (((int)data[pos + 3] & 0xff))) / 65536f;
    pos+=4;
    return type=FLT;
  }
}

protected void deleteIcon(){
  if (_selectedIcon == null) {
    return;
  }
  if (_iconMap.remove(_selectedIcon.getName()) != null) {
    removeIconFamiliesPanel();
    addIconsToPanel(_iconMap);
    deleteIconButton.setEnabled(false);
    validate();
  }
}

public boolean equals(Object obj){
  if (obj == null)   return false;
  if (this == obj)   return true;
  if (getClass() != obj.getClass())   return false;
  ChoiceFormat other=(ChoiceFormat)obj;
  return (Arrays.equals(choiceLimits,other.choiceLimits) && Arrays.equals(choiceFormats,other.choiceFormats));
}

private static File createReserveDiskCacheDir(Context context){
  File cacheDir=StorageUtils.getCacheDirectory(context,false);
  File individualDir=new File(cacheDir,"uil-images");
  if (individualDir.exists() || individualDir.mkdir()) {
    cacheDir=individualDir;
  }
  return cacheDir;
}

public static Date updated(Date self,Map<Object,Integer> updates){
  Calendar cal=Calendar.getInstance();
  cal.setTime(self);
  set(cal,updates);
  return cal.getTime();
}

public boolean displayTopic(String name){
  String topic=null;
  if (name == null)   topic=DEFAULT + FILE_TYPE;
 else   topic=name.toLowerCase() + FILE_TYPE;
  File helpFile=new File(helpDir,topic);
  return display(helpFile);
}

private void dashToWords(String tokenVal){
  int index=tokenVal.indexOf('-');
  String aaa=tokenVal.substring(0,index);
  String bbb=tokenVal.substring(index + 1,tokenVal.length());
  if (matches(digitsPattern,aaa) && matches(digitsPattern,bbb)) {
    FeatureSet featureSet=tokenItem.getFeatures();
    featureSet.setString("name",aaa);
    tokenToWords(aaa);
    wordRelation.addWord("to");
    featureSet.setString("name",bbb);
    tokenToWords(bbb);
    featureSet.setString("name","");
  }
 else {
    tokenToWords(aaa);
    tokenToWords(bbb);
  }
}

public static int numberOfTrailingZerosSigned(long[] v){
  for (int p=0; ; p++) {
    if (p == v.length) {
      return -1;
    }
    if (v[p] != 0) {
      return Long.numberOfTrailingZeros(v[p]) + p * Long.SIZE;
    }
  }
}

public static void applyWMRule(Collection<MWMInOutBound> lines,String boundType){
  for (  MWMInOutBound line : lines) {
    for (    MWMDefinition definition : MWMDefinition.getAll(line.getCtx(),line.get_TrxName())) {
      WMRuleEngine.validateDefinition(line,definition,boundType);
    }
  }
}

public static float readFloat(final JSONArray jsonArray,final int index,final boolean required,final boolean notNull) throws JSONException {
  if (required) {
    return (float)jsonArray.getDouble(index);
  }
  if (notNull && jsonArray.isNull(index)) {
    throw new JSONException(String.format(Locale.US,NULL_VALUE_FORMAT_ARRAY,index));
  }
  float value=0.0f;
  if (!jsonArray.isNull(index)) {
    value=(float)jsonArray.getDouble(index);
  }
  return value;
}

public void flush() throws IOException {
  flushBits();
  out.flush();
}

public final Flux<T> onErrorResumeWith(Predicate<? super Throwable> predicate,Function<? super Throwable,? extends Publisher<? extends T>> fallback){
  Objects.requireNonNull(predicate,"predicate");
  return onErrorResumeWith(null);
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> result=new Vector<Option>();
  result.addElement(new Option("\tnumber of clusters. (default = 2).","N",1,"-N <num>"));
  result.addAll(Collections.list(super.listOptions()));
  return result.elements();
}

public @Test final void testSetUsersNegative(){
  Role role=new Role(TEST_ROLE);
  thrown.expect(IllegalArgumentException.class);
  role.setUsers(null);
}

private Set<String> findResourceNames(String path,String prefix,String suffix) throws IOException {
  Set<String> resourceNames=findResourceNamesFromFileSystem(path,new File(path));
  return filterResourceNames(resourceNames,prefix,suffix);
}

public boolean add(K key,V item){
  Set<V> values=map.get(key);
  if (values == null) {
    values=(sorted ? new TreeSet<V>() : new HashSet<V>());
    map.put(key,values);
  }
  if (item == null)   return false;
  return values.add(item);
}

public void addECM(ECMInfo info){
  ecmEffects.add(info);
}

protected void loadImage(String filePath,OMGraphicList ret){
  File file=new File(filePath);
  if (file.exists() && file.isDirectory()) {
    String[] files=file.list();
    for (int i=0; i < files.length; i++) {
      loadImage(filePath + "/" + files[i],ret);
    }
  }
 else {
    fireStatusUpdate(LayerStatusEvent.START_WORKING);
    try {
      URL fileURL=PropUtils.getResourceOrFileOrURL(filePath);
      if (fileURL != null) {
        if (imageReaderLoaders != null) {
          ImageTile imageTile=null;
          for (          ImageReaderLoader idl : imageReaderLoaders) {
            if (idl.isLoadable(filePath)) {
              ImageReader id=idl.getImageReader(fileURL);
              ImageTile tmpImageTile=id.getImageTile(imageCache);
              if (imageTile == null) {
                imageTile=tmpImageTile;
              }
 else               if (tmpImageTile != null && imageTile instanceof ErrImageTile) {
                imageTile=tmpImageTile;
              }
              if (imageTile != null && !(imageTile instanceof ErrImageTile)) {
                break;
              }
            }
          }
          if (imageTile != null) {
            addImageToLists(imageTile,ret,fileURL);
          }
        }
 else {
          logger.warning("ImageReaders not configured in " + getName() + " ImageTileLayer.");
        }
      }
 else {
        logger.warning("Can't get URL from " + filePath);
      }
    }
 catch (    MalformedURLException murle) {
    }
  }
}

@Override protected final boolean writeData(ByteBuffer data){
synchronized (guard) {
    GsServerPacket packet=sendMsgQueue.pollFirst();
    if (packet == null) {
      return false;
    }
    packet.write(this,data);
    return true;
  }
}

public static ExportMask createExportMask(DbClient dbClient,ExportGroup exportGroup,URI sdUri,String maskName) throws DatabaseException {
  ExportMask exportMask=new ExportMask();
  exportMask.setId(URIUtil.createId(ExportMask.class));
  exportMask.setMaskName(maskName);
  exportMask.setStorageDevice(sdUri);
  dbClient.createObject(exportMask);
  exportGroup.addExportMask(exportMask.getId());
  dbClient.updateObject(exportGroup);
  return exportMask;
}

public LogEntry(String timestamp,String contents){
  this.timestamp=timestamp;
  this.contents=contents;
}

public static boolean cancelPotentialWork(Object data,ImageView imageView){
  final BitmapWorkerTask bitmapWorkerTask=getBitmapWorkerTask(imageView);
  if (bitmapWorkerTask != null) {
    final Object bitmapData=bitmapWorkerTask.mData;
    if (bitmapData == null || !bitmapData.equals(data)) {
      bitmapWorkerTask.cancel(true);
      if (BuildConfig.DEBUG) {
        Log.d(TAG,"cancelPotentialWork - cancelled work for " + data);
      }
    }
 else {
      return false;
    }
  }
  return true;
}

void replacePolicyInResourceTree(Policy oldPolicy,Policy newPolicy) throws PolicyException, SSOException {
  removePolicyFromResourceTree(oldPolicy);
  addPolicyToResourceTree(newPolicy);
}

private Shape[] createHorizontalBlock(double x0,double width,double y0,double y1,boolean inverted){
  Shape[] result=new Shape[6];
  Point2D p00=new Point2D.Double(y0,x0);
  Point2D p01=new Point2D.Double(y0,x0 + width);
  Point2D p02=new Point2D.Double(p01.getX() + getXOffset(),p01.getY() - getYOffset());
  Point2D p03=new Point2D.Double(p00.getX() + getXOffset(),p00.getY() - getYOffset());
  Point2D p0=new Point2D.Double(y1,x0);
  Point2D p1=new Point2D.Double(y1,x0 + width);
  Point2D p2=new Point2D.Double(p1.getX() + getXOffset(),p1.getY() - getYOffset());
  Point2D p3=new Point2D.Double(p0.getX() + getXOffset(),p0.getY() - getYOffset());
  GeneralPath bottom=new GeneralPath();
  bottom.moveTo((float)p1.getX(),(float)p1.getY());
  bottom.lineTo((float)p01.getX(),(float)p01.getY());
  bottom.lineTo((float)p02.getX(),(float)p02.getY());
  bottom.lineTo((float)p2.getX(),(float)p2.getY());
  bottom.closePath();
  GeneralPath top=new GeneralPath();
  top.moveTo((float)p0.getX(),(float)p0.getY());
  top.lineTo((float)p00.getX(),(float)p00.getY());
  top.lineTo((float)p03.getX(),(float)p03.getY());
  top.lineTo((float)p3.getX(),(float)p3.getY());
  top.closePath();
  GeneralPath back=new GeneralPath();
  back.moveTo((float)p2.getX(),(float)p2.getY());
  back.lineTo((float)p02.getX(),(float)p02.getY());
  back.lineTo((float)p03.getX(),(float)p03.getY());
  back.lineTo((float)p3.getX(),(float)p3.getY());
  back.closePath();
  GeneralPath front=new GeneralPath();
  front.moveTo((float)p0.getX(),(float)p0.getY());
  front.lineTo((float)p1.getX(),(float)p1.getY());
  front.lineTo((float)p01.getX(),(float)p01.getY());
  front.lineTo((float)p00.getX(),(float)p00.getY());
  front.closePath();
  GeneralPath left=new GeneralPath();
  left.moveTo((float)p0.getX(),(float)p0.getY());
  left.lineTo((float)p1.getX(),(float)p1.getY());
  left.lineTo((float)p2.getX(),(float)p2.getY());
  left.lineTo((float)p3.getX(),(float)p3.getY());
  left.closePath();
  GeneralPath right=new GeneralPath();
  right.moveTo((float)p00.getX(),(float)p00.getY());
  right.lineTo((float)p01.getX(),(float)p01.getY());
  right.lineTo((float)p02.getX(),(float)p02.getY());
  right.lineTo((float)p03.getX(),(float)p03.getY());
  right.closePath();
  result[0]=bottom;
  result[1]=back;
  if (inverted) {
    result[2]=right;
    result[3]=left;
  }
 else {
    result[2]=left;
    result[3]=right;
  }
  result[4]=top;
  result[5]=front;
  return result;
}

public OIDCTokens acquireTokensBySecurID(String username,String passcode,SecurIDRetriever securIdRetriever,TokenSpec tokenSpec) throws OIDCClientException, OIDCServerException, TokenValidationException, SSLConnectionException {
  Validate.notEmpty(username,"username");
  Validate.notEmpty(passcode,"passcode");
  Validate.notNull(securIdRetriever,"securIdRetriever");
  Validate.notNull(tokenSpec,"tokenSpec");
  HttpResponse httpResponse=OIDCClientUtils.handleSecurIDMultiLeggedGrant(username,passcode,securIdRetriever,tokenSpec,getTokenEndpointURI(),this.clientId,this.holderOfKeyConfig,this.keyStore);
  return OIDCClientUtils.parseTokenResponse(httpResponse,this.providerPublicKey,this.issuer,this.clientId,this.clockToleranceInSeconds);
}

public void loadNested(Environment env){
  loadNested(env,0);
}

private JSONArray requestAllFileSystems() throws IOException, JSONException {
  JSONArray ret=new JSONArray();
  for (  Filesystem fs : filesystems) {
    ret.put(fs.getRootEntry());
  }
  return ret;
}

private Promise<ActionResponse,ResourceException> internalHandleAction(String tokenId,Context context,ActionRequest request){
  final String action=request.getAction();
  final ActionHandler actionHandler=actionHandlers.get(action);
  if (actionHandler != null) {
    return actionHandler.handle(tokenId,context,request);
  }
 else {
    String message=String.format("Action %s not implemented for this resource",action);
    NotSupportedException e=new NotSupportedException(message);
    if (LOGGER.messageEnabled()) {
      LOGGER.message("SessionResource.actionInstance :: " + message,e);
    }
    return e.asPromise();
  }
}

public int compareTo(Object obj){
  int diff=-1;
  if (obj instanceof ParserNotice) {
    ParserNotice p2=(ParserNotice)obj;
    diff=level - p2.getLevel();
    if (diff == 0) {
      diff=line - p2.getLine();
      if (diff == 0) {
        diff=message.compareTo(p2.getMessage());
      }
    }
  }
  return diff;
}

@Override @SuppressWarnings("unchecked") public NamedList<Object> doHighlighting(DocList docs,Query query,SolrQueryRequest req,String[] defaultFields) throws IOException {
  SolrParams params=req.getParams();
  if (!isHighlightingEnabled(params))   return null;
  SolrIndexSearcher searcher=req.getSearcher();
  IndexSchema schema=searcher.getSchema();
  NamedList fragments=new SimpleOrderedMap();
  String[] fieldNames=getHighlightFields(query,req,defaultFields);
  Set<String> fset=new HashSet<>();
{
    for (    String f : fieldNames) {
      fset.add(f);
    }
    SchemaField keyField=schema.getUniqueKeyField();
    if (null != keyField)     fset.add(keyField.getName());
  }
  FastVectorHighlighter fvh=new FastVectorHighlighter(params.getBool(HighlightParams.USE_PHRASE_HIGHLIGHTER,true),params.getBool(HighlightParams.FIELD_MATCH,false));
  fvh.setPhraseLimit(params.getInt(HighlightParams.PHRASE_LIMIT,SolrHighlighter.DEFAULT_PHRASE_LIMIT));
  FieldQuery fieldQuery=fvh.getFieldQuery(query,searcher.getIndexReader());
  DocIterator iterator=docs.iterator();
  for (int i=0; i < docs.size(); i++) {
    int docId=iterator.nextDoc();
    Document doc=searcher.doc(docId,fset);
    NamedList docSummaries=new SimpleOrderedMap();
    for (    String fieldName : fieldNames) {
      fieldName=fieldName.trim();
      if (useFastVectorHighlighter(params,schema,fieldName))       doHighlightingByFastVectorHighlighter(fvh,fieldQuery,req,docSummaries,docId,doc,fieldName);
 else       doHighlightingByHighlighter(query,req,docSummaries,docId,doc,fieldName);
    }
    String printId=schema.printableUniqueKey(doc);
    fragments.add(printId == null ? null : printId,docSummaries);
  }
  return fragments;
}

protected abstract Map<Integer,FilterOperationDelegateInvoker> doGetInvokerLookup();

private IBindingSet aggregate(final Iterable<IBindingSet> solutions){
  final IBindingSet aggregates=new ContextBindingSet(context,new ListBindingSet());
  if (groupBy != null) {
    final IBindingSet aSolution=solutions.iterator().next();
    for (    IValueExpression<?> expr : groupBy) {
      if (expr instanceof IVariable<?>) {
        final IVariable<?> var=(IVariable<?>)expr;
        final Object varValue=var.get(aSolution);
        final Constant<?> val;
        if (varValue == null) {
          val=Constant.errorValue();
        }
 else {
          val=new Constant(varValue.getClass().cast(varValue));
        }
        ;
        aggregates.set(var,val);
      }
 else       if (expr instanceof IBind<?>) {
        final IBind<?> bindExpr=(IBind<?>)expr;
        final Constant<?> val;
        final Object exprValue=bindExpr.get(aSolution);
        if (exprValue == null) {
          val=Constant.errorValue();
        }
 else {
          val=new Constant(exprValue.getClass().cast(exprValue));
        }
        final IVariable<?> ovar=((IBind<?>)expr).getVar();
        aggregates.set(ovar,val);
      }
    }
  }
{
    final boolean nestedAggregates=groupByState.isNestedAggregates();
    final Iterator<Map.Entry<IAggregate<?>,IVariable<?>>> itr=rewrite.getAggExpr().entrySet().iterator();
    while (itr.hasNext()) {
      final Map.Entry<IAggregate<?>,IVariable<?>> e=itr.next();
      doAggregate(e.getKey(),e.getValue(),nestedAggregates,aggregates,solutions,stats);
    }
    if (log.isTraceEnabled())     log.trace("aggregates: " + aggregates);
  }
  for (  IValueExpression<?> expr : rewrite.getSelect2()) {
    try {
      expr.get(aggregates);
    }
 catch (    SparqlTypeErrorException ex) {
      TypeErrorLog.handleTypeError(ex,expr,stats);
      continue;
    }
catch (    IllegalArgumentException ex) {
      TypeErrorLog.handleTypeError(ex,expr,stats);
      continue;
    }
  }
{
    final boolean drop;
    final IConstraint[] having2=rewrite.getHaving2();
    if (having2 != null && !BOpUtility.isConsistent(having2,aggregates)) {
      drop=true;
    }
 else {
      drop=false;
    }
    if (log.isInfoEnabled())     log.info((drop ? "drop" : "keep") + " : " + aggregates);
    if (drop) {
      return null;
    }
  }
  final IBindingSet out;
  if (groupBy == null) {
    assert !aggregates.containsErrorValues();
    out=aggregates.copy(groupByState.getSelectVars().toArray(new IVariable[0]));
  }
 else {
    out=aggregates.copyMinusErrors(groupByState.getSelectVars().toArray(new IVariable[0]));
  }
  return out;
}

public static void deleteCollection(String host,String collection) throws Exception {
  String deleteCollectionTemplate="http://%s:%s/solr/admin/collections?action=DELETE&name=%s";
  String deleteCollectionCommand=String.format(deleteCollectionTemplate,host,DEFAULT_SOLR_PORT,collection);
  executeSolrCommand(deleteCollectionCommand);
}

private Iterable<FragmentConstructor> createConstructors(){
  return Collections.unmodifiableList(Arrays.asList(new BiomeDataConstructor(Resolution.QUARTER),new EndIslandsConstructor(),new ImageConstructor(Resolution.QUARTER,LayerIds.BACKGROUND),new ImageConstructor(Resolution.CHUNK,LayerIds.SLIME)));
}

public static <T>int copy(final List<T> from,int first,int last,List<T> to){
  int i=first;
  for (; i < last; i++) {
    to.add(from.get(i));
  }
  return i;
}

@Nullable public static HKey psiKey(@NotNull PsiMethod psiMethod,@NotNull Direction direction,@NotNull MessageDigest md){
  final PsiClass psiClass=PsiTreeUtil.getParentOfType(psiMethod,PsiClass.class,false);
  if (psiClass == null) {
    return null;
  }
  byte[] classDigest=psiClassDigest(psiClass,md);
  if (classDigest == null) {
    return null;
  }
  byte[] sigDigest=methodDigest(psiMethod,md);
  if (sigDigest == null) {
    return null;
  }
  byte[] digest=new byte[HASH_SIZE];
  System.arraycopy(classDigest,0,digest,0,CLASS_HASH_SIZE);
  System.arraycopy(sigDigest,0,digest,CLASS_HASH_SIZE,SIGNATURE_HASH_SIZE);
  return new HKey(digest,mkDirectionKey(direction),true);
}

public static boolean isSdCardMounted(){
  String status=Environment.getExternalStorageState();
  if (status.equals(Environment.MEDIA_MOUNTED))   return true;
  return false;
}

private void parseResource(final Element resourceElement,final Collection<Resource> resources){
  final String tagName=resourceElement.getTagName();
  final String uri=resourceElement.getTextContent();
  if (TAG_GROUP_REF.equals(tagName)) {
    resources.addAll(getResourcesForGroup(uri));
  }
  if (getResourceType(resourceElement) != null) {
    final Resource resource=createResource(resourceElement);
    LOG.debug("\t\tadding resource: {}",resource);
    resources.add(resource);
  }
}

@Override public void licenceFile(String textToShow,File licenceFile) throws CancelException {
  try {
    final FileInputStream content=new FileInputStream(licenceFile);
    final StringWriter writer=new StringWriter();
    IOUtils.copy(content,writer,"UTF-8");
    content.close();
    licence(textToShow,writer.toString());
  }
 catch (  IOException e) {
    throw new ScriptFailureException("Cannot acces the licence file",e);
  }
}

public int meanAllocation(){
  if (m_slotAllocations == 0)   return 0;
  return (int)(m_sizeAllocations / m_slotAllocations);
}

public void testTimeZones() throws Exception {
  Map<String,String> tzMap=new HashMap<String,String>();
  tzMap.put("AUS Central Daylight Time","Australia/Darwin");
  tzMap.put("AUS Central Standard Time","Australia/Darwin");
  tzMap.put("AUS Eastern Daylight Time","Australia/Sydney");
  tzMap.put("AUS Eastern Standard Time","Australia/Sydney");
  tzMap.put("Afghanistan Daylight Time","Asia/Kabul");
  tzMap.put("Afghanistan Standard Time","Asia/Kabul");
  tzMap.put("Alaskan Daylight Time","America/Anchorage");
  tzMap.put("Alaskan Standard Time","America/Anchorage");
  tzMap.put("Arab Daylight Time","Asia/Riyadh");
  tzMap.put("Arab Standard Time","Asia/Riyadh");
  tzMap.put("Arabian Daylight Time","Asia/Dubai");
  tzMap.put("Arabian Standard Time","Asia/Dubai");
  tzMap.put("Arabic Daylight Time","Asia/Baghdad");
  tzMap.put("Arabic Standard Time","Asia/Baghdad");
  tzMap.put("Argentina Daylight Time","America/Buenos_Aires");
  tzMap.put("Argentina Standard Time","America/Buenos_Aires");
  tzMap.put("Atlantic Daylight Time","America/Halifax");
  tzMap.put("Atlantic Standard Time","America/Halifax");
  tzMap.put("Azerbaijan Daylight Time","Asia/Baku");
  tzMap.put("Azerbaijan Standard Time","Asia/Baku");
  tzMap.put("Azores Daylight Time","Atlantic/Azores");
  tzMap.put("Azores Standard Time","Atlantic/Azores");
  tzMap.put("Bahia Daylight Time","America/Bahia");
  tzMap.put("Bahia Standard Time","America/Bahia");
  tzMap.put("Bangladesh Daylight Time","Asia/Dhaka");
  tzMap.put("Bangladesh Standard Time","Asia/Dhaka");
  tzMap.put("Belarus Daylight Time","Europe/Minsk");
  tzMap.put("Belarus Standard Time","Europe/Minsk");
  tzMap.put("Canada Central Daylight Time","America/Regina");
  tzMap.put("Canada Central Standard Time","America/Regina");
  tzMap.put("Cape Verde Daylight Time","Atlantic/Cape_Verde");
  tzMap.put("Cape Verde Standard Time","Atlantic/Cape_Verde");
  tzMap.put("Caucasus Daylight Time","Asia/Yerevan");
  tzMap.put("Caucasus Standard Time","Asia/Yerevan");
  tzMap.put("Cen. Australia Daylight Time","Australia/Adelaide");
  tzMap.put("Cen. Australia Standard Time","Australia/Adelaide");
  tzMap.put("Central America Daylight Time","America/Guatemala");
  tzMap.put("Central America Standard Time","America/Guatemala");
  tzMap.put("Central Asia Daylight Time","Asia/Almaty");
  tzMap.put("Central Asia Standard Time","Asia/Almaty");
  tzMap.put("Central Brazilian Daylight Time","America/Cuiaba");
  tzMap.put("Central Brazilian Standard Time","America/Cuiaba");
  tzMap.put("Central Daylight Time","America/Chicago");
  tzMap.put("Central Daylight Time (Mexico)","America/Mexico_City");
  tzMap.put("Central Europe Daylight Time","Europe/Budapest");
  tzMap.put("Central Europe Standard Time","Europe/Budapest");
  tzMap.put("Central European Daylight Time","Europe/Warsaw");
  tzMap.put("Central European Standard Time","Europe/Warsaw");
  tzMap.put("Central Pacific Daylight Time","Pacific/Guadalcanal");
  tzMap.put("Central Pacific Standard Time","Pacific/Guadalcanal");
  tzMap.put("Central Standard Time","America/Chicago");
  tzMap.put("Central Standard Time (Mexico)","America/Mexico_City");
  tzMap.put("China Daylight Time","Asia/Shanghai");
  tzMap.put("China Standard Time","Asia/Shanghai");
  tzMap.put("Dateline Daylight Time","Etc/GMT+12");
  tzMap.put("Dateline Standard Time","Etc/GMT+12");
  tzMap.put("E. Africa Daylight Time","Africa/Nairobi");
  tzMap.put("E. Africa Standard Time","Africa/Nairobi");
  tzMap.put("E. Australia Daylight Time","Australia/Brisbane");
  tzMap.put("E. Australia Standard Time","Australia/Brisbane");
  tzMap.put("E. South America Daylight Time","America/Sao_Paulo");
  tzMap.put("E. South America Standard Time","America/Sao_Paulo");
  tzMap.put("Eastern Daylight Time","America/New_York");
  tzMap.put("Eastern Daylight Time (Mexico)","America/Cancun");
  tzMap.put("Eastern Standard Time","America/New_York");
  tzMap.put("Eastern Standard Time (Mexico)","America/Cancun");
  tzMap.put("Egypt Daylight Time","Africa/Cairo");
  tzMap.put("Egypt Standard Time","Africa/Cairo");
  tzMap.put("Ekaterinburg Daylight Time","Asia/Yekaterinburg");
  tzMap.put("Ekaterinburg Standard Time","Asia/Yekaterinburg");
  tzMap.put("FLE Daylight Time","Europe/Kiev");
  tzMap.put("FLE Standard Time","Europe/Kiev");
  tzMap.put("Fiji Daylight Time","Pacific/Fiji");
  tzMap.put("Fiji Standard Time","Pacific/Fiji");
  tzMap.put("GMT Daylight Time","Europe/London");
  tzMap.put("GMT Standard Time","Europe/London");
  tzMap.put("GTB Daylight Time","Europe/Bucharest");
  tzMap.put("GTB Standard Time","Europe/Bucharest");
  tzMap.put("Georgian Daylight Time","Asia/Tbilisi");
  tzMap.put("Georgian Standard Time","Asia/Tbilisi");
  tzMap.put("Greenland Daylight Time","America/Godthab");
  tzMap.put("Greenland Standard Time","America/Godthab");
  tzMap.put("Greenwich Daylight Time","Atlantic/Reykjavik");
  tzMap.put("Greenwich Standard Time","Atlantic/Reykjavik");
  tzMap.put("Hawaiian Daylight Time","Pacific/Honolulu");
  tzMap.put("Hawaiian Standard Time","Pacific/Honolulu");
  tzMap.put("India Daylight Time","Asia/Calcutta");
  tzMap.put("India Standard Time","Asia/Calcutta");
  tzMap.put("Iran Daylight Time","Asia/Tehran");
  tzMap.put("Iran Standard Time","Asia/Tehran");
  tzMap.put("Israel Daylight Time","Asia/Jerusalem");
  tzMap.put("Israel Standard Time","Asia/Jerusalem");
  tzMap.put("Jordan Daylight Time","Asia/Amman");
  tzMap.put("Jordan Standard Time","Asia/Amman");
  tzMap.put("Kaliningrad Daylight Time","Europe/Kaliningrad");
  tzMap.put("Kaliningrad Standard Time","Europe/Kaliningrad");
  tzMap.put("Korea Daylight Time","Asia/Seoul");
  tzMap.put("Korea Standard Time","Asia/Seoul");
  tzMap.put("Libya Daylight Time","Africa/Tripoli");
  tzMap.put("Libya Standard Time","Africa/Tripoli");
  tzMap.put("Line Islands Daylight Time","Pacific/Kiritimati");
  tzMap.put("Line Islands Standard Time","Pacific/Kiritimati");
  tzMap.put("Magadan Daylight Time","Asia/Magadan");
  tzMap.put("Magadan Standard Time","Asia/Magadan");
  tzMap.put("Mauritius Daylight Time","Indian/Mauritius");
  tzMap.put("Mauritius Standard Time","Indian/Mauritius");
  tzMap.put("Middle East Daylight Time","Asia/Beirut");
  tzMap.put("Middle East Standard Time","Asia/Beirut");
  tzMap.put("Montevideo Daylight Time","America/Montevideo");
  tzMap.put("Montevideo Standard Time","America/Montevideo");
  tzMap.put("Morocco Daylight Time","Africa/Casablanca");
  tzMap.put("Morocco Standard Time","Africa/Casablanca");
  tzMap.put("Mountain Daylight Time","America/Denver");
  tzMap.put("Mountain Daylight Time (Mexico)","America/Chihuahua");
  tzMap.put("Mountain Standard Time","America/Denver");
  tzMap.put("Mountain Standard Time (Mexico)","America/Chihuahua");
  tzMap.put("Myanmar Daylight Time","Asia/Rangoon");
  tzMap.put("Myanmar Standard Time","Asia/Rangoon");
  tzMap.put("N. Central Asia Daylight Time","Asia/Novosibirsk");
  tzMap.put("N. Central Asia Standard Time","Asia/Novosibirsk");
  tzMap.put("Namibia Daylight Time","Africa/Windhoek");
  tzMap.put("Namibia Standard Time","Africa/Windhoek");
  tzMap.put("Nepal Daylight Time","Asia/Katmandu");
  tzMap.put("Nepal Standard Time","Asia/Katmandu");
  tzMap.put("New Zealand Daylight Time","Pacific/Auckland");
  tzMap.put("New Zealand Standard Time","Pacific/Auckland");
  tzMap.put("Newfoundland Daylight Time","America/St_Johns");
  tzMap.put("Newfoundland Standard Time","America/St_Johns");
  tzMap.put("North Asia Daylight Time","Asia/Krasnoyarsk");
  tzMap.put("North Asia East Daylight Time","Asia/Irkutsk");
  tzMap.put("North Asia East Standard Time","Asia/Irkutsk");
  tzMap.put("North Asia Standard Time","Asia/Krasnoyarsk");
  tzMap.put("Pacific Daylight Time","America/Los_Angeles");
  tzMap.put("Pacific Daylight Time (Mexico)","America/Santa_Isabel");
  tzMap.put("Pacific SA Daylight Time","America/Santiago");
  tzMap.put("Pacific SA Standard Time","America/Santiago");
  tzMap.put("Pacific Standard Time","America/Los_Angeles");
  tzMap.put("Pacific Standard Time (Mexico)","America/Santa_Isabel");
  tzMap.put("Pakistan Daylight Time","Asia/Karachi");
  tzMap.put("Pakistan Standard Time","Asia/Karachi");
  tzMap.put("Paraguay Daylight Time","America/Asuncion");
  tzMap.put("Paraguay Standard Time","America/Asuncion");
  tzMap.put("Romance Daylight Time","Europe/Paris");
  tzMap.put("Romance Standard Time","Europe/Paris");
  tzMap.put("Russia Time Zone 10","Asia/Srednekolymsk");
  tzMap.put("Russia Time Zone 11","Asia/Kamchatka");
  tzMap.put("Russia Time Zone 3","Europe/Samara");
  tzMap.put("Russian Daylight Time","Europe/Moscow");
  tzMap.put("Russian Standard Time","Europe/Moscow");
  tzMap.put("SA Eastern Daylight Time","America/Cayenne");
  tzMap.put("SA Eastern Standard Time","America/Cayenne");
  tzMap.put("SA Pacific Daylight Time","America/Bogota");
  tzMap.put("SA Pacific Standard Time","America/Bogota");
  tzMap.put("SA Western Daylight Time","America/La_Paz");
  tzMap.put("SA Western Standard Time","America/La_Paz");
  tzMap.put("SE Asia Daylight Time","Asia/Bangkok");
  tzMap.put("SE Asia Standard Time","Asia/Bangkok");
  tzMap.put("Samoa Daylight Time","Pacific/Apia");
  tzMap.put("Samoa Standard Time","Pacific/Apia");
  tzMap.put("Singapore Daylight Time","Asia/Singapore");
  tzMap.put("Singapore Standard Time","Asia/Singapore");
  tzMap.put("South Africa Daylight Time","Africa/Johannesburg");
  tzMap.put("South Africa Standard Time","Africa/Johannesburg");
  tzMap.put("Sri Lanka Daylight Time","Asia/Colombo");
  tzMap.put("Sri Lanka Standard Time","Asia/Colombo");
  tzMap.put("Syria Daylight Time","Asia/Damascus");
  tzMap.put("Syria Standard Time","Asia/Damascus");
  tzMap.put("Taipei Daylight Time","Asia/Taipei");
  tzMap.put("Taipei Standard Time","Asia/Taipei");
  tzMap.put("Tasmania Daylight Time","Australia/Hobart");
  tzMap.put("Tasmania Standard Time","Australia/Hobart");
  tzMap.put("Tokyo Daylight Time","Asia/Tokyo");
  tzMap.put("Tokyo Standard Time","Asia/Tokyo");
  tzMap.put("Tonga Daylight Time","Pacific/Tongatapu");
  tzMap.put("Tonga Standard Time","Pacific/Tongatapu");
  tzMap.put("Turkey Daylight Time","Europe/Istanbul");
  tzMap.put("Turkey Standard Time","Europe/Istanbul");
  tzMap.put("US Eastern Daylight Time","America/Indianapolis");
  tzMap.put("US Eastern Standard Time","America/Indianapolis");
  tzMap.put("US Mountain Daylight Time","America/Phoenix");
  tzMap.put("US Mountain Standard Time","America/Phoenix");
  tzMap.put("UTC","Etc/GMT");
  tzMap.put("UTC+12","Etc/GMT-12");
  tzMap.put("UTC-02","Etc/GMT+2");
  tzMap.put("UTC-11","Etc/GMT+11");
  tzMap.put("Ulaanbaatar Daylight Time","Asia/Ulaanbaatar");
  tzMap.put("Ulaanbaatar Standard Time","Asia/Ulaanbaatar");
  tzMap.put("Venezuela Daylight Time","America/Caracas");
  tzMap.put("Venezuela Standard Time","America/Caracas");
  tzMap.put("Vladivostok Daylight Time","Asia/Vladivostok");
  tzMap.put("Vladivostok Standard Time","Asia/Vladivostok");
  tzMap.put("W. Australia Daylight Time","Australia/Perth");
  tzMap.put("W. Australia Standard Time","Australia/Perth");
  tzMap.put("W. Central Africa Daylight Time","Africa/Lagos");
  tzMap.put("W. Central Africa Standard Time","Africa/Lagos");
  tzMap.put("W. Europe Daylight Time","Europe/Berlin");
  tzMap.put("W. Europe Standard Time","Europe/Berlin");
  tzMap.put("West Asia Daylight Time","Asia/Tashkent");
  tzMap.put("West Asia Standard Time","Asia/Tashkent");
  tzMap.put("West Pacific Daylight Time","Pacific/Port_Moresby");
  tzMap.put("West Pacific Standard Time","Pacific/Port_Moresby");
  tzMap.put("Yakutsk Daylight Time","Asia/Yakutsk");
  tzMap.put("Yakutsk Standard Time","Asia/Yakutsk");
  tzMap.put("Africa/Addis_Ababa","Africa/Nairobi");
  tzMap.put("Africa/Asmara","Africa/Nairobi");
  tzMap.put("Africa/Asmera","Africa/Nairobi");
  tzMap.put("Africa/Bamako","Africa/Abidjan");
  tzMap.put("Africa/Bangui","Africa/Lagos");
  tzMap.put("Africa/Banjul","Africa/Abidjan");
  tzMap.put("Africa/Blantyre","Africa/Maputo");
  tzMap.put("Africa/Brazzaville","Africa/Lagos");
  tzMap.put("Africa/Bujumbura","Africa/Maputo");
  tzMap.put("Africa/Conakry","Africa/Abidjan");
  tzMap.put("Africa/Dakar","Africa/Abidjan");
  tzMap.put("Africa/Dar_es_Salaam","Africa/Nairobi");
  tzMap.put("Africa/Djibouti","Africa/Nairobi");
  tzMap.put("Africa/Douala","Africa/Lagos");
  tzMap.put("Africa/Freetown","Africa/Abidjan");
  tzMap.put("Africa/Gaborone","Africa/Maputo");
  tzMap.put("Africa/Harare","Africa/Maputo");
  tzMap.put("Africa/Juba","Africa/Khartoum");
  tzMap.put("Africa/Kampala","Africa/Nairobi");
  tzMap.put("Africa/Kigali","Africa/Maputo");
  tzMap.put("Africa/Kinshasa","Africa/Lagos");
  tzMap.put("Africa/Libreville","Africa/Lagos");
  tzMap.put("Africa/Lome","Africa/Abidjan");
  tzMap.put("Africa/Luanda","Africa/Lagos");
  tzMap.put("Africa/Lubumbashi","Africa/Maputo");
  tzMap.put("Africa/Lusaka","Africa/Maputo");
  tzMap.put("Africa/Malabo","Africa/Lagos");
  tzMap.put("Africa/Maseru","Africa/Johannesburg");
  tzMap.put("Africa/Mbabane","Africa/Johannesburg");
  tzMap.put("Africa/Mogadishu","Africa/Nairobi");
  tzMap.put("Africa/Niamey","Africa/Lagos");
  tzMap.put("Africa/Nouakchott","Africa/Abidjan");
  tzMap.put("Africa/Ouagadougou","Africa/Abidjan");
  tzMap.put("Africa/Porto-Novo","Africa/Lagos");
  tzMap.put("Africa/Sao_Tome","Africa/Abidjan");
  tzMap.put("Africa/Timbuktu","Africa/Abidjan");
  tzMap.put("America/Anguilla","America/Port_of_Spain");
  tzMap.put("America/Antigua","America/Port_of_Spain");
  tzMap.put("America/Argentina/ComodRivadavia","America/Argentina/Catamarca");
  tzMap.put("America/Aruba","America/Curacao");
  tzMap.put("America/Atka","America/Adak");
  tzMap.put("America/Buenos_Aires","America/Argentina/Buenos_Aires");
  tzMap.put("America/Catamarca","America/Argentina/Catamarca");
  tzMap.put("America/Coral_Harbour","America/Atikokan");
  tzMap.put("America/Cordoba","America/Argentina/Cordoba");
  tzMap.put("America/Dominica","America/Port_of_Spain");
  tzMap.put("America/Ensenada","America/Tijuana");
  tzMap.put("America/Fort_Wayne","America/Indiana/Indianapolis");
  tzMap.put("America/Grenada","America/Port_of_Spain");
  tzMap.put("America/Guadeloupe","America/Port_of_Spain");
  tzMap.put("America/Indianapolis","America/Indiana/Indianapolis");
  tzMap.put("America/Jujuy","America/Argentina/Jujuy");
  tzMap.put("America/Knox_IN","America/Indiana/Knox");
  tzMap.put("America/Kralendijk","America/Curacao");
  tzMap.put("America/Louisville","America/Kentucky/Louisville");
  tzMap.put("America/Lower_Princes","America/Curacao");
  tzMap.put("America/Marigot","America/Port_of_Spain");
  tzMap.put("America/Mendoza","America/Argentina/Mendoza");
  tzMap.put("America/Montreal","America/Toronto");
  tzMap.put("America/Montserrat","America/Port_of_Spain");
  tzMap.put("America/Porto_Acre","America/Rio_Branco");
  tzMap.put("America/Rosario","America/Argentina/Cordoba");
  tzMap.put("America/Shiprock","America/Denver");
  tzMap.put("America/St_Barthelemy","America/Port_of_Spain");
  tzMap.put("America/St_Kitts","America/Port_of_Spain");
  tzMap.put("America/St_Lucia","America/Port_of_Spain");
  tzMap.put("America/St_Thomas","America/Port_of_Spain");
  tzMap.put("America/St_Vincent","America/Port_of_Spain");
  tzMap.put("America/Tortola","America/Port_of_Spain");
  tzMap.put("America/Virgin","America/Port_of_Spain");
  tzMap.put("Antarctica/McMurdo","Pacific/Auckland");
  tzMap.put("Antarctica/South_Pole","Pacific/Auckland");
  tzMap.put("Arctic/Longyearbyen","Europe/Oslo");
  tzMap.put("Asia/Aden","Asia/Riyadh");
  tzMap.put("Asia/Ashkhabad","Asia/Ashgabat");
  tzMap.put("Asia/Bahrain","Asia/Qatar");
  tzMap.put("Asia/Calcutta","Asia/Kolkata");
  tzMap.put("Asia/Chongqing","Asia/Shanghai");
  tzMap.put("Asia/Chungking","Asia/Shanghai");
  tzMap.put("Asia/Dacca","Asia/Dhaka");
  tzMap.put("Asia/Harbin","Asia/Shanghai");
  tzMap.put("Asia/Istanbul","Europe/Istanbul");
  tzMap.put("Asia/Kashgar","Asia/Urumqi");
  tzMap.put("Asia/Katmandu","Asia/Kathmandu");
  tzMap.put("Asia/Kuwait","Asia/Riyadh");
  tzMap.put("Asia/Macao","Asia/Macau");
  tzMap.put("Asia/Muscat","Asia/Dubai");
  tzMap.put("Asia/Phnom_Penh","Asia/Bangkok");
  tzMap.put("Asia/Saigon","Asia/Ho_Chi_Minh");
  tzMap.put("Asia/Tel_Aviv","Asia/Jerusalem");
  tzMap.put("Asia/Thimbu","Asia/Thimphu");
  tzMap.put("Asia/Ujung_Pandang","Asia/Makassar");
  tzMap.put("Asia/Ulan_Bator","Asia/Ulaanbaatar");
  tzMap.put("Asia/Vientiane","Asia/Bangkok");
  tzMap.put("Atlantic/Faeroe","Atlantic/Faroe");
  tzMap.put("Atlantic/Jan_Mayen","Europe/Oslo");
  tzMap.put("Atlantic/St_Helena","Africa/Abidjan");
  tzMap.put("Australia/ACT","Australia/Sydney");
  tzMap.put("Australia/Canberra","Australia/Sydney");
  tzMap.put("Australia/LHI","Australia/Lord_Howe");
  tzMap.put("Australia/NSW","Australia/Sydney");
  tzMap.put("Australia/North","Australia/Darwin");
  tzMap.put("Australia/Queensland","Australia/Brisbane");
  tzMap.put("Australia/South","Australia/Adelaide");
  tzMap.put("Australia/Tasmania","Australia/Hobart");
  tzMap.put("Australia/Victoria","Australia/Melbourne");
  tzMap.put("Australia/West","Australia/Perth");
  tzMap.put("Australia/Yancowinna","Australia/Broken_Hill");
  tzMap.put("Brazil/Acre","America/Rio_Branco");
  tzMap.put("Brazil/DeNoronha","America/Noronha");
  tzMap.put("Brazil/East","America/Sao_Paulo");
  tzMap.put("Brazil/West","America/Manaus");
  tzMap.put("Canada/Atlantic","America/Halifax");
  tzMap.put("Canada/Central","America/Winnipeg");
  tzMap.put("Canada/East-Saskatchewan","America/Regina");
  tzMap.put("Canada/Eastern","America/Toronto");
  tzMap.put("Canada/Mountain","America/Edmonton");
  tzMap.put("Canada/Newfoundland","America/St_Johns");
  tzMap.put("Canada/Pacific","America/Vancouver");
  tzMap.put("Canada/Saskatchewan","America/Regina");
  tzMap.put("Canada/Yukon","America/Whitehorse");
  tzMap.put("Chile/Continental","America/Santiago");
  tzMap.put("Chile/EasterIsland","Pacific/Easter");
  tzMap.put("Cuba","America/Havana");
  tzMap.put("Egypt","Africa/Cairo");
  tzMap.put("Eire","Europe/Dublin");
  tzMap.put("Europe/Belfast","Europe/London");
  tzMap.put("Europe/Bratislava","Europe/Prague");
  tzMap.put("Europe/Busingen","Europe/Zurich");
  tzMap.put("Europe/Guernsey","Europe/London");
  tzMap.put("Europe/Isle_of_Man","Europe/London");
  tzMap.put("Europe/Jersey","Europe/London");
  tzMap.put("Europe/Ljubljana","Europe/Belgrade");
  tzMap.put("Europe/Mariehamn","Europe/Helsinki");
  tzMap.put("Europe/Nicosia","Asia/Nicosia");
  tzMap.put("Europe/Podgorica","Europe/Belgrade");
  tzMap.put("Europe/San_Marino","Europe/Rome");
  tzMap.put("Europe/Sarajevo","Europe/Belgrade");
  tzMap.put("Europe/Skopje","Europe/Belgrade");
  tzMap.put("Europe/Tiraspol","Europe/Chisinau");
  tzMap.put("Europe/Vaduz","Europe/Zurich");
  tzMap.put("Europe/Vatican","Europe/Rome");
  tzMap.put("Europe/Zagreb","Europe/Belgrade");
  tzMap.put("GB","Europe/London");
  tzMap.put("GB-Eire","Europe/London");
  tzMap.put("GMT+0","Etc/GMT");
  tzMap.put("GMT-0","Etc/GMT");
  tzMap.put("GMT0","Etc/GMT");
  tzMap.put("Greenwich","Etc/GMT");
  tzMap.put("Hongkong","Asia/Hong_Kong");
  tzMap.put("Iceland","Atlantic/Reykjavik");
  tzMap.put("Indian/Antananarivo","Africa/Nairobi");
  tzMap.put("Indian/Comoro","Africa/Nairobi");
  tzMap.put("Indian/Mayotte","Africa/Nairobi");
  tzMap.put("Iran","Asia/Tehran");
  tzMap.put("Israel","Asia/Jerusalem");
  tzMap.put("Jamaica","America/Jamaica");
  tzMap.put("Japan","Asia/Tokyo");
  tzMap.put("Kwajalein","Pacific/Kwajalein");
  tzMap.put("Libya","Africa/Tripoli");
  tzMap.put("Mexico/BajaNorte","America/Tijuana");
  tzMap.put("Mexico/BajaSur","America/Mazatlan");
  tzMap.put("Mexico/General","America/Mexico_City");
  tzMap.put("NZ","Pacific/Auckland");
  tzMap.put("NZ-CHAT","Pacific/Chatham");
  tzMap.put("Navajo","America/Denver");
  tzMap.put("PRC","Asia/Shanghai");
  tzMap.put("Pacific/Johnston","Pacific/Honolulu");
  tzMap.put("Pacific/Midway","Pacific/Pago_Pago");
  tzMap.put("Pacific/Ponape","Pacific/Pohnpei");
  tzMap.put("Pacific/Saipan","Pacific/Guam");
  tzMap.put("Pacific/Samoa","Pacific/Pago_Pago");
  tzMap.put("Pacific/Truk","Pacific/Chuuk");
  tzMap.put("Pacific/Yap","Pacific/Chuuk");
  tzMap.put("Poland","Europe/Warsaw");
  tzMap.put("Portugal","Europe/Lisbon");
  tzMap.put("ROC","Asia/Taipei");
  tzMap.put("ROK","Asia/Seoul");
  tzMap.put("Singapore","Asia/Singapore");
  tzMap.put("Turkey","Europe/Istanbul");
  tzMap.put("UCT","Etc/UCT");
  tzMap.put("US/Alaska","America/Anchorage");
  tzMap.put("US/Aleutian","America/Adak");
  tzMap.put("US/Arizona","America/Phoenix");
  tzMap.put("US/Central","America/Chicago");
  tzMap.put("US/East-Indiana","America/Indiana/Indianapolis");
  tzMap.put("US/Eastern","America/New_York");
  tzMap.put("US/Hawaii","Pacific/Honolulu");
  tzMap.put("US/Indiana-Starke","America/Indiana/Knox");
  tzMap.put("US/Michigan","America/Detroit");
  tzMap.put("US/Mountain","America/Denver");
  tzMap.put("US/Pacific","America/Los_Angeles");
  tzMap.put("US/Pacific-New","America/Los_Angeles");
  tzMap.put("US/Samoa","Pacific/Pago_Pago");
  tzMap.put("Universal","Etc/UTC");
  tzMap.put("W-SU","Europe/Moscow");
  tzMap.put("Zulu","Etc/UTC");
  tzMap.put("ACWST","Australia/Eucla");
  tzMap.put("AFT","Asia/Kabul");
  tzMap.put("ALMT","Asia/Almaty");
  tzMap.put("ANAT","Asia/Anadyr");
  tzMap.put("AZOST","Atlantic/Azores");
  tzMap.put("AZOT","Atlantic/Azores");
  tzMap.put("AZST","Asia/Baku");
  tzMap.put("AZT","Asia/Baku");
  tzMap.put("BDT","Asia/Dhaka");
  tzMap.put("BNT","Asia/Brunei");
  tzMap.put("BOT","America/La_Paz");
  tzMap.put("BRST","America/Sao_Paulo");
  tzMap.put("BTT","Asia/Thimphu");
  tzMap.put("CAT","Africa/Maputo");
  tzMap.put("CCT","Indian/Cocos");
  tzMap.put("CHADT","Pacific/Chatham");
  tzMap.put("CHAST","Pacific/Chatham");
  tzMap.put("CHOST","Asia/Choibalsan");
  tzMap.put("CHOT","Asia/Choibalsan");
  tzMap.put("CHUT","Pacific/Chuuk");
  tzMap.put("CKT","Pacific/Rarotonga");
  tzMap.put("COT","America/Bogota");
  tzMap.put("CVT","Atlantic/Cape_Verde");
  tzMap.put("CXT","Indian/Christmas");
  tzMap.put("ChST","Pacific/Guam");
  tzMap.put("DAVT","Antarctica/Davis");
  tzMap.put("DDUT","Antarctica/DumontDUrville");
  tzMap.put("EAST","Pacific/Easter");
  tzMap.put("ECT","America/Guayaquil");
  tzMap.put("EGST","America/Scoresbysund");
  tzMap.put("EGT","America/Scoresbysund");
  tzMap.put("FJST","Pacific/Fiji");
  tzMap.put("FJT","Pacific/Fiji");
  tzMap.put("FKST","Atlantic/Stanley");
  tzMap.put("FNT","America/Noronha");
  tzMap.put("GALT","Pacific/Galapagos");
  tzMap.put("GAMT","Pacific/Gambier");
  tzMap.put("GET","Asia/Tbilisi");
  tzMap.put("GFT","America/Cayenne");
  tzMap.put("GILT","Pacific/Tarawa");
  tzMap.put("GYT","America/Guyana");
  tzMap.put("HDT","America/Adak");
  tzMap.put("HKT","Asia/Hong_Kong");
  tzMap.put("HOVST","Asia/Hovd");
  tzMap.put("HOVT","Asia/Hovd");
  tzMap.put("IDT","Asia/Jerusalem");
  tzMap.put("IOT","Indian/Chagos");
  tzMap.put("IRST","Asia/Tehran");
  tzMap.put("JST","Asia/Tokyo");
  tzMap.put("KGT","Asia/Bishkek");
  tzMap.put("KOST","Pacific/Kosrae");
  tzMap.put("LHDT","Australia/Lord_Howe");
  tzMap.put("LHST","Australia/Lord_Howe");
  tzMap.put("LINT","Pacific/Kiritimati");
  tzMap.put("MAGT","Asia/Magadan");
  tzMap.put("MART","Pacific/Marquesas");
  tzMap.put("MAWT","Antarctica/Mawson");
  tzMap.put("MEST","MET");
  tzMap.put("MET","MET");
  tzMap.put("MIST","Antarctica/Macquarie");
  tzMap.put("MMT","Asia/Rangoon");
  tzMap.put("MUT","Indian/Mauritius");
  tzMap.put("MVT","Indian/Maldives");
  tzMap.put("NCT","Pacific/Noumea");
  tzMap.put("NDT","America/St_Johns");
  tzMap.put("NFT","Pacific/Norfolk");
  tzMap.put("NOVT","Asia/Novosibirsk");
  tzMap.put("NPT","Asia/Kathmandu");
  tzMap.put("NRT","Pacific/Nauru");
  tzMap.put("NST","America/St_Johns");
  tzMap.put("NUT","Pacific/Niue");
  tzMap.put("NZDT","Pacific/Auckland");
  tzMap.put("NZST","Pacific/Auckland");
  tzMap.put("OMST","Asia/Omsk");
  tzMap.put("ORAT","Asia/Oral");
  tzMap.put("PET","America/Lima");
  tzMap.put("PETT","Asia/Kamchatka");
  tzMap.put("PGT","Pacific/Port_Moresby");
  tzMap.put("PHOT","Pacific/Enderbury");
  tzMap.put("PHT","Asia/Manila");
  tzMap.put("PKT","Asia/Karachi");
  tzMap.put("PMDT","America/Miquelon");
  tzMap.put("PMST","America/Miquelon");
  tzMap.put("PONT","Pacific/Pohnpei");
  tzMap.put("PWT","Pacific/Palau");
  tzMap.put("PYST","America/Asuncion");
  tzMap.put("PYT","America/Asuncion");
  tzMap.put("QYZT","Asia/Qyzylorda");
  tzMap.put("RET","Indian/Reunion");
  tzMap.put("ROTT","Antarctica/Rothera");
  tzMap.put("SAKT","Asia/Sakhalin");
  tzMap.put("SAMT","Europe/Samara");
  tzMap.put("SAST","Africa/Johannesburg");
  tzMap.put("SBT","Pacific/Guadalcanal");
  tzMap.put("SCT","Indian/Mahe");
  tzMap.put("SGT","Asia/Singapore");
  tzMap.put("SRET","Asia/Srednekolymsk");
  tzMap.put("SRT","America/Paramaribo");
  tzMap.put("SST","Pacific/Pago_Pago");
  tzMap.put("SYOT","Antarctica/Syowa");
  tzMap.put("TAHT","Pacific/Tahiti");
  tzMap.put("TFT","Indian/Kerguelen");
  tzMap.put("TJT","Asia/Dushanbe");
  tzMap.put("TKT","Pacific/Fakaofo");
  tzMap.put("TLT","Asia/Dili");
  tzMap.put("TMT","Asia/Ashgabat");
  tzMap.put("TOT","Pacific/Tongatapu");
  tzMap.put("TVT","Pacific/Funafuti");
  tzMap.put("ULAST","Asia/Ulaanbaatar");
  tzMap.put("ULAT","Asia/Ulaanbaatar");
  tzMap.put("UYT","America/Montevideo");
  tzMap.put("VET","America/Caracas");
  tzMap.put("VOST","Antarctica/Vostok");
  tzMap.put("VUT","Pacific/Efate");
  tzMap.put("WAKT","Pacific/Wake");
  tzMap.put("WAST","Africa/Windhoek");
  tzMap.put("WFT","Pacific/Wallis");
  tzMap.put("WGST","America/Godthab");
  tzMap.put("WGT","America/Godthab");
  tzMap.put("WIT","Asia/Jayapura");
  tzMap.put("WITA","Asia/Makassar");
  tzMap.put("WSDT","Pacific/Apia");
  tzMap.put("WSST","Pacific/Apia");
  tzMap.put("XJT","Asia/Urumqi");
  tzMap.put("YEKT","Asia/Yekaterinburg");
  for (  String key : tzMap.keySet()) {
    assertEquals("Custom time Zone '" + key + "' mapping",tzMap.get(key),TimeUtil.getCanonicalTimezone(key,null));
  }
  for (  String tz : TimeZone.getAvailableIDs()) {
    String canonicalTZ;
    try {
      canonicalTZ=TimeUtil.getCanonicalTimezone(tz,null);
    }
 catch (    SQLException e) {
      canonicalTZ=null;
    }
    assertNotNull("System Time Zone '" + tz + "' mapping missing",canonicalTZ);
  }
}

@Override public String toString(){
  return MessageFormat.format("Query:\n" + "      Filter: {0}\n" + "  Attributes: {1}",getLDAPFilter(),StringUtils.join(requestedAttributes,", "));
}

public static void convolveAndTranspose(Kernel kernel,int[] inPixels,int[] outPixels,int width,int height,boolean alpha,boolean premultiply,boolean unpremultiply,int edgeAction){
  float[] matrix=kernel.getKernelData(null);
  int cols=kernel.getWidth();
  int cols2=cols / 2;
  for (int y=0; y < height; y++) {
    int index=y;
    int ioffset=y * width;
    for (int x=0; x < width; x++) {
      float r=0, g=0, b=0, a=0;
      int moffset=cols2;
      for (int col=-cols2; col <= cols2; col++) {
        float f=matrix[moffset + col];
        if (f != 0) {
          int ix=x + col;
          if (ix < 0) {
            if (edgeAction == CLAMP_EDGES)             ix=0;
 else             if (edgeAction == WRAP_EDGES)             ix=(x + width) % width;
          }
 else           if (ix >= width) {
            if (edgeAction == CLAMP_EDGES)             ix=width - 1;
 else             if (edgeAction == WRAP_EDGES)             ix=(x + width) % width;
          }
          int rgb=inPixels[ioffset + ix];
          int pa=(rgb >> 24) & 0xff;
          int pr=(rgb >> 16) & 0xff;
          int pg=(rgb >> 8) & 0xff;
          int pb=rgb & 0xff;
          if (premultiply) {
            float a255=pa * (1.0f / 255.0f);
            pr*=a255;
            pg*=a255;
            pb*=a255;
          }
          a+=f * pa;
          r+=f * pr;
          g+=f * pg;
          b+=f * pb;
        }
      }
      if (unpremultiply && a != 0 && a != 255) {
        float f=255.0f / a;
        r*=f;
        g*=f;
        b*=f;
      }
      int ia=alpha ? PixelUtils.clamp((int)(a + 0.5)) : 0xff;
      int ir=PixelUtils.clamp((int)(r + 0.5));
      int ig=PixelUtils.clamp((int)(g + 0.5));
      int ib=PixelUtils.clamp((int)(b + 0.5));
      outPixels[index]=(ia << 24) | (ir << 16) | (ig << 8)| ib;
      index+=height;
    }
  }
}

public void testCase6(){
  byte aBytes[]={10,20,30,40,50,60,70,10,20,30};
  byte bBytes[]={1,2,3,4,5,6,7,1,2,3,1,2,3,4,5};
  int aSign=1;
  int bSign=-1;
  byte rBytes[]={-11,-41,-101,54,-97,-52,-77,-41,44,-86,-116,-45,126,-116,20,61,14,-86,-65,86,1,35,35,106};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.multiply(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

public void animateProgressFill(int animateTo){
  mAnimationHandler.removeMessages(0);
  if (animateTo > mMax || animateTo < 0) {
    throw new IllegalArgumentException(String.format("Animation progress (%d) is greater than the max progress (%d) or lower than 0 ",animateTo,mMax));
  }
  mAnimationHandler.setAnimateTo(animateTo);
  mAnimationHandler.sendEmptyMessage(0);
  invalidate();
}

static boolean isRegistered(ObjectName objectName){
  Set<ObjectName> registeredObjectNames=mBeanServer.queryNames(objectName,null);
  return !registeredObjectNames.isEmpty();
}

public <T>PushableLazyFutureStream<T> futureStream(final LazyReact s){
  final Queue<T> q=createQueue();
  return new PushableLazyFutureStream<T>(q,s.fromStream(q.stream()));
}

public byte[] convertHexStringToBinary(String hexString) throws IllegalArgumentException {
  int length=hexString.length();
  if (length % 2 != 0) {
    throw new IllegalArgumentException("The provided hex String must be an even length, but was of length " + length + ": "+ hexString);
  }
  byte[] binary=new byte[length / 2];
  for (int i=0; i < length; i+=2) {
    char highBitsChar=hexString.charAt(i);
    char lowBitsChar=hexString.charAt(i + 1);
    int highBits=hexCharToInt(highBitsChar,hexString) << 4;
    int lowBits=hexCharToInt(lowBitsChar,hexString);
    binary[i / 2]=(byte)(highBits + lowBits);
  }
  return binary;
}

public void writeField(final String name,final short value) throws java.io.IOException {
  writeField(name,Short.toString(value));
}

public static ResultSet select(Connection conn,String sql) throws SQLException {
  Statement stat=conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY);
  return stat.executeQuery(sql);
}

public static void writeSetOfLongs(Set set,boolean hasLongIDs,DataOutput out) throws IOException {
  if (set == null) {
    out.writeInt(-1);
  }
 else {
    out.writeInt(set.size());
    out.writeBoolean(hasLongIDs);
    for (Iterator it=set.iterator(); it.hasNext(); ) {
      Long l=(Long)it.next();
      if (hasLongIDs) {
        out.writeLong(l.longValue());
      }
 else {
        out.writeInt((int)l.longValue());
      }
    }
  }
}

private void restoreWidget(Key key,byte[] buffer,int dataSize) throws IOException {
  if (VERBOSE)   Log.v(TAG,"unpacking widget " + key.id);
  if (DEBUG)   Log.d(TAG,"read (" + buffer.length + "): "+ Base64.encodeToString(buffer,0,dataSize,Base64.NO_WRAP));
  Widget widget=unpackProto(new Widget(),buffer,dataSize);
  if (DEBUG)   Log.d(TAG,"unpacked " + widget.provider);
  if (widget.icon.data != null) {
    Bitmap icon=BitmapFactory.decodeByteArray(widget.icon.data,0,widget.icon.data.length);
    if (icon == null) {
      Log.w(TAG,"failed to unpack widget icon for " + key.name);
    }
 else {
      mIconCache.preloadIcon(ComponentName.unflattenFromString(widget.provider),icon,widget.icon.dpi,widget.label,mUserSerial,mIdp);
    }
  }
  widgetSizes.add(widget.provider + "#" + 1+ ","+ 1);
}

private static boolean hasResponseBody(int requestMethod,int responseCode){
  return requestMethod != Request.Method.HEAD && !(HttpStatus.SC_CONTINUE <= responseCode && responseCode < HttpStatus.SC_OK) && responseCode != HttpStatus.SC_NO_CONTENT && responseCode != HttpStatus.SC_NOT_MODIFIED;
}

public void considerRegionXRegion(GeoRegion r,GeoRegion region){
  GeoArray rBoundary=r.getPoints();
  Geo rPoint=rBoundary.get(0,new Geo());
  GeoArray regionBoundary=region.getPoints();
  Geo regionPoint=regionBoundary.get(0,new Geo());
  if (Intersection.isPointInPolygon(rPoint,regionBoundary) || Intersection.isPointInPolygon(regionPoint,rBoundary)) {
    collector.collect(r,region);
  }
 else {
    for (GeoPath.SegmentIterator pit=r.segmentIterator(); pit.hasNext(); ) {
      GeoSegment seg=pit.nextSegment();
      if (filter.preConsider(seg,region) && considerSegmentXRegion(seg,region)) {
        collector.collect(seg,region);
        return;
      }
    }
  }
}

private XPathFactory loadFromServicesFile(String uri,String resourceName,InputStream in){
  if (debug)   debugPrintln("Reading " + resourceName);
  BufferedReader rd;
  try {
    rd=new BufferedReader(new InputStreamReader(in,"UTF-8"),DEFAULT_LINE_LENGTH);
  }
 catch (  java.io.UnsupportedEncodingException e) {
    rd=new BufferedReader(new InputStreamReader(in),DEFAULT_LINE_LENGTH);
  }
  String factoryClassName;
  XPathFactory resultFactory=null;
  while (true) {
    try {
      factoryClassName=rd.readLine();
    }
 catch (    IOException x) {
      break;
    }
    if (factoryClassName != null) {
      int hashIndex=factoryClassName.indexOf('#');
      if (hashIndex != -1) {
        factoryClassName=factoryClassName.substring(0,hashIndex);
      }
      factoryClassName=factoryClassName.trim();
      if (factoryClassName.length() == 0) {
        continue;
      }
      try {
        XPathFactory foundFactory=createInstance(factoryClassName);
        if (foundFactory.isObjectModelSupported(uri)) {
          resultFactory=foundFactory;
          break;
        }
      }
 catch (      Exception ignored) {
      }
    }
 else {
      break;
    }
  }
  IoUtils.closeQuietly(rd);
  return resultFactory;
}

private char foldCase(char ch){
  if (ch < 128) {
    if ('A' <= ch && ch <= 'Z') {
      return (char)(ch + ('a' - 'A'));
    }
    return ch;
  }
  return Character.toLowerCase(Character.toUpperCase(ch));
}

public WritableRaster createCompatibleWritableRaster(int w,int h){
  if (w <= 0 || h <= 0) {
    throw new RasterFormatException("negative " + ((w <= 0) ? "width" : "height"));
  }
  SampleModel sm=sampleModel.createCompatibleSampleModel(w,h);
  return new ByteBandedRaster(sm,new Point(0,0));
}

ConfigurationError(String msg,Exception x){
  super(msg);
  this.exception=x;
}

@TargetApi(VERSION_CODES.LOLLIPOP) public static void reveal(final View view,int cx,int cy){
  if (!hasLollipop()) {
    view.setVisibility(View.VISIBLE);
    return;
  }
  int finalRadius=Math.max(view.getWidth(),view.getHeight());
  Animator animator=ViewAnimationUtils.createCircularReveal(view,cx,cy,0,finalRadius);
  view.setVisibility(View.VISIBLE);
  animator.start();
}

public TopNMetric(TopNMetricType type,String previousStop,SortDirection order){
  this(type,previousStop);
  if (order == SortDirection.ASC) {
    this.type=TopNMetricType.INVERTED;
    this.nested=Optional.of(new TopNMetric(type,previousStop));
    this.previousStop=Optional.empty();
  }
}

public void removeSupportedOptions(Set<String> unmatchedProcessorOptions){
  unmatchedProcessorOptions.removeAll(supportedOptionNames);
}

protected void subscribe(){
  if (sampleClientSub == null) {
    try {
      sampleClientSub=new SampleAsyncCallback(url,clientIdSub,cleanSession,quietMode,userName,password);
    }
 catch (    MqttException e) {
      e.printStackTrace();
    }
  }
  if (sampleClientSub != null) {
    String topic="Sample/#";
    int qos=2;
    try {
      sampleClientSub.subscribe(topic,qos);
    }
 catch (    Throwable e) {
      e.printStackTrace();
    }
  }
}

private boolean shouldCrop(int width,int height){
  int pixelError=1;
  pixelError+=Math.round(Math.max(width,height) / 1000f);
  return (mMaxResultImageSizeX > 0 && mMaxResultImageSizeY > 0) || Math.abs(mCropRect.left - mCurrentImageRect.left) > pixelError || Math.abs(mCropRect.top - mCurrentImageRect.top) > pixelError || Math.abs(mCropRect.bottom - mCurrentImageRect.bottom) > pixelError || Math.abs(mCropRect.right - mCurrentImageRect.right) > pixelError;
}

public boolean exists(){
  return doAccess(F_OK);
}

@Deprecated public boolean isFillBelowLine(){
  return mFillBelowLine.size() > 0;
}

public ShapeTileBox bounding_box(){
  if (bounding_box != null)   return bounding_box;
  PlaPointFloat start_corner=start_point_approx();
  PlaPointFloat end_corner=end_point_approx();
  double llx=Math.min(start_corner.v_x,end_corner.v_x);
  double lly=Math.min(start_corner.v_y,end_corner.v_y);
  double urx=Math.max(start_corner.v_x,end_corner.v_x);
  double ury=Math.max(start_corner.v_y,end_corner.v_y);
  PlaPointInt lower_left=new PlaPointInt(Math.floor(llx),Math.floor(lly));
  PlaPointInt upper_right=new PlaPointInt(Math.ceil(urx),Math.ceil(ury));
  bounding_box=new ShapeTileBox(lower_left,upper_right);
  return bounding_box;
}

public boolean isValidAttachmentPoint(DatapathId switchDPID,OFPort switchPort){
  if (topology.isAttachmentPointPort(switchDPID,switchPort) == false)   return false;
  if (suppressAPs.contains(new SwitchPort(switchDPID,switchPort)))   return false;
  return true;
}

public void testClasspathWar() throws Exception {
  final URL url=new URL("http://localhost:" + System.getProperty("http.port") + "/classpath-war/test");
  final String expected="Got class!";
  PingUtils.assertPingTrue(url.getPath() + " not started",expected,url,logger);
}

protected abstract boolean isNullable();

public vec3 normalize(){
  float x=this.m[0];
  float y=this.m[1];
  float z=this.m[2];
  float s=1.0f / (float)Math.sqrt(x * x + y * y + z * z);
  this.m[0]=x * s;
  this.m[1]=y * s;
  this.m[2]=z * s;
  return this;
}

@Override public P readPage(int pageID){
  try {
    countRead();
    long offset=((long)(header.getReservedPages() + pageID)) * (long)pageSize;
    byte[] buffer=new byte[pageSize];
    file.seek(offset);
    file.read(buffer);
    return byteArrayToPage(buffer);
  }
 catch (  IOException e) {
    throw new RuntimeException("IOException occurred during reading of page " + pageID + "\n",e);
  }
}

public void addActionListener(ActionListener listener){
  forwardProjectionButton.addActionListener(listener);
  backProjectionButton.addActionListener(listener);
}

void writeDataToFileLocked(RandomAccessFile file,boolean addMayo,boolean addTomato,int whichFilling) throws IOException {
  file.setLength(0L);
  file.writeInt(whichFilling);
  file.writeBoolean(addMayo);
  file.writeBoolean(addTomato);
  Log.v(TAG,"NEW STATE: mayo=" + addMayo + " tomato="+ addTomato+ " filling="+ whichFilling);
}

static Type[] mapKeyAndValueTypes(Type context,Class<?> contextRawType){
  if (context == Properties.class)   return new Type[]{String.class,String.class};
  Type mapType=getSupertype(context,contextRawType,Map.class);
  if (mapType instanceof ParameterizedType) {
    ParameterizedType mapParameterizedType=(ParameterizedType)mapType;
    return mapParameterizedType.getActualTypeArguments();
  }
  return new Type[]{Object.class,Object.class};
}

static AggregatedHttpMessage of(HttpHeaders headers,HttpData content,HttpHeaders trailingHeaders){
  return of(Collections.emptyList(),headers,content,trailingHeaders);
}

public static boolean isLetter(char c){
  return Character.isLetter(c);
}

protected List<TreeNode> createChildList(){
  Branch branch=getXmlBranch();
  int size=branch.nodeCount();
  List<TreeNode> childList=new ArrayList<TreeNode>(size);
  for (int i=0; i < size; i++) {
    Node node=branch.node(i);
    if (node instanceof CharacterData) {
      String text=node.getText();
      if (text == null) {
        continue;
      }
      text=text.trim();
      if (text.length() <= 0) {
        continue;
      }
    }
    childList.add(createChildTreeNode(node));
  }
  return childList;
}

public Set<Value> mayAliases(Value v,Unit u){
  Set<Value> res=new HashSet<Value>();
  Set<Set<Value>> flow=getFlowBefore(u);
  for (  Set<Value> set : flow) {
    if (set.contains(v))     res.addAll(set);
  }
  return res;
}

@Nullable private static String read(@NonNull SocketChannel socket,@NonNull byte[] buffer) throws IOException {
  ByteBuffer buf=ByteBuffer.wrap(buffer,0,buffer.length);
  while (buf.position() != buf.limit()) {
    int count;
    count=socket.read(buf);
    if (count < 0) {
      throw new IOException("EOF");
    }
  }
  try {
    return new String(buffer,0,buf.position(),AdbHelper.DEFAULT_ENCODING);
  }
 catch (  UnsupportedEncodingException e) {
    return null;
  }
}

public static DateTimeUnit createLocalDateUnitInstance(Date date,org.hisp.dhis.calendar.Calendar calendar){
  return calendar.fromIso(DateTimeUnit.fromJdkDate(date));
}

public static boolean equal(double a,double b){
  return (Math.abs(a - b) < EPSILON);
}

@Override public void addClassAnnotation(char[] buffer,int offset,int length){
  String annType=new String(buffer,offset,length);
  if (_annTypes.contains(annType)) {
    addClass(_className);
  }
}

public Process exec(String[] taintedCommand,String[] taintedEnvironment,File workingDirectory,boolean redirectErrorStream) throws IOException {
  if (taintedCommand == null) {
    throw new NullPointerException("taintedCommand == null");
  }
  if (taintedCommand.length == 0) {
    throw new IndexOutOfBoundsException("taintedCommand.length == 0");
  }
  String[] command=taintedCommand.clone();
  String[] environment=taintedEnvironment != null ? taintedEnvironment.clone() : null;
  for (int i=0; i < command.length; i++) {
    if (command[i] == null) {
      throw new NullPointerException("taintedCommand[" + i + "] == null");
    }
  }
  if (environment != null) {
    for (int i=0; i < environment.length; i++) {
      if (environment[i] == null) {
        throw new NullPointerException("taintedEnvironment[" + i + "] == null");
      }
    }
  }
  FileDescriptor in=new FileDescriptor();
  FileDescriptor out=new FileDescriptor();
  FileDescriptor err=new FileDescriptor();
  String workingPath=(workingDirectory == null) ? null : workingDirectory.getPath();
synchronized (processReferences) {
    int pid;
    try {
      pid=exec(command,environment,workingPath,in,out,err,redirectErrorStream);
    }
 catch (    IOException e) {
      IOException wrapper=new IOException("Error running exec()." + " Command: " + Arrays.toString(command) + " Working Directory: "+ workingDirectory+ " Environment: "+ Arrays.toString(environment));
      wrapper.initCause(e);
      throw wrapper;
    }
    ProcessImpl process=new ProcessImpl(pid,in,out,err);
    ProcessReference processReference=new ProcessReference(process,referenceQueue);
    processReferences.put(pid,processReference);
    processReferences.notifyAll();
    return process;
  }
}

static PathPart makeAbsolute(PathPart oldPart){
  @SuppressWarnings("StringEquality") boolean encodedCached=oldPart.encoded != NOT_CACHED;
  String oldPath=encodedCached ? oldPart.encoded : oldPart.decoded;
  if (oldPath == null || oldPath.length() == 0 || oldPath.startsWith("/")) {
    return oldPart;
  }
  String newEncoded=encodedCached ? "/" + oldPart.encoded : NOT_CACHED;
  @SuppressWarnings("StringEquality") boolean decodedCached=oldPart.decoded != NOT_CACHED;
  String newDecoded=decodedCached ? "/" + oldPart.decoded : NOT_CACHED;
  return new PathPart(newEncoded,newDecoded);
}

public static int[] splitGt(String gt){
  final int gtlen=gt.length();
  if (gtlen == 1) {
    return new int[]{alleleId(gt.charAt(0))};
  }
 else {
    int[] result=new int[2];
    int ploid=0;
    int allelestart=0;
    for (int i=0; i < gtlen; i++) {
      final char c=gt.charAt(i);
      if (c == PHASED_SEPARATOR || c == UNPHASED_SEPARATOR) {
        if (ploid == result.length) {
          result=Arrays.copyOf(result,result.length + 1);
        }
        result[ploid++]=alleleId(gt,allelestart,i - allelestart);
        allelestart=i + 1;
      }
    }
    if (allelestart < gtlen) {
      if (ploid == result.length) {
        result=Arrays.copyOf(result,result.length + 1);
      }
      result[ploid++]=alleleId(gt,allelestart,gtlen - allelestart);
    }
    if (ploid < result.length) {
      result=Arrays.copyOf(result,ploid);
    }
    if (ploid == 0) {
      throw new NumberFormatException("Malformed GT '" + gt + "'");
    }
    return result;
  }
}

public void testBug18041() throws Exception {
  if (versionMeetsMinimum(4,1)) {
    createTable("testBug18041","(`a` tinyint(4) NOT NULL, `b` char(4) default NULL)");
    Properties props=new Properties();
    props.setProperty("jdbcCompliantTruncation","true");
    props.setProperty("useServerPrepStmts","true");
    Connection truncConn=null;
    PreparedStatement stm=null;
    try {
      truncConn=getConnectionWithProps(props);
      stm=truncConn.prepareStatement("insert into testBug18041 values (?,?)");
      stm.setInt(1,1000);
      stm.setString(2,"nnnnnnnnnnnnnnnnnnnnnnnnnnnnnn");
      stm.executeUpdate();
      fail("Truncation exception should have been thrown");
    }
 catch (    DataTruncation truncEx) {
    }
 finally {
      if (truncConn != null) {
        truncConn.close();
      }
    }
  }
}

public void deleteKernel(String name){
  Kernel kernel=getKernelByName(name);
  if (kernel != null) {
    kernel.dispose();
    Integer oldSize=Integer.valueOf(_kernelHashTable.size());
    _kernelHashTable.remove(name);
    setDirtyAndFirePropertyChange(KERNEL_LISTLENGTH_CHANGED_PROPERTY,oldSize,Integer.valueOf(_kernelHashTable.size()));
  }
}

protected boolean shouldStop(){
  return isPaused() || isKilled();
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public Builder addTokenFilter(String name,Map<String,String> params) throws IOException {
  Objects.requireNonNull(name,"TokenFilter name may not be null");
  tokenFilters.add(applyResourceLoader(TokenFilterFactory.forName(name,applyDefaultParams(params))));
  componentsAdded=true;
  return this;
}

public StyledToolTipUI(Style style){
  this.style=style;
  border=BorderFactory.createLineBorder(style.getShadowColor());
}

public final void addElements(Object value,int numberOfElements){
  if ((m_firstFree + numberOfElements) >= m_mapSize) {
    m_mapSize+=(m_blocksize + numberOfElements);
    Object newMap[]=new Object[m_mapSize];
    System.arraycopy(m_map,0,newMap,0,m_firstFree + 1);
    m_map=newMap;
  }
  for (int i=0; i < numberOfElements; i++) {
    m_map[m_firstFree]=value;
    m_firstFree++;
  }
}

public void actionPerformed(ActionEvent e){
  super.actionPerformed(e);
  String cmd=e.getActionCommand();
  if (cmd == showMapsCommand) {
    JCheckBox mapCheck=(JCheckBox)e.getSource();
    viewAttributes.showMaps=mapCheck.isSelected();
    repaint();
  }
 else   if (cmd == showInfoCommand) {
    JCheckBox infoCheck=(JCheckBox)e.getSource();
    boolean showInfo=infoCheck.isSelected();
    viewAttributes.showInfo=showInfo;
    showSubframes(showInfo);
    doPrepare();
  }
 else   if (cmd == lockSeriesCommand) {
    JCheckBox lockCheck=(JCheckBox)e.getSource();
    boolean locked=lockCheck.isSelected();
    if (locked) {
      List<RpfCoverageBox> coverageBoxes=getCoverageBoxes();
      String seriesName;
      if (coverageBoxes == null || coverageBoxes.isEmpty()) {
        seriesName=RpfViewAttributes.ANY;
      }
 else {
        seriesName=coverageBoxes.get(0).chartCode;
      }
      if (seriesName == null) {
        seriesName=RpfViewAttributes.ANY;
        fireRequestMessage("The " + getName() + " Layer is having trouble determining what kind\nof charts are being displayed.  Can't establish lock for charts\ncurrently being viewed.");
      }
      lockCheck.setText(lockedButtonTitle + " - " + seriesName);
      viewAttributes.chartSeries=seriesName;
    }
 else {
      lockCheck.setText(unlockedButtonTitle);
      viewAttributes.chartSeries=RpfViewAttributes.ANY;
    }
  }
 else   if (cmd == showCoverageCommand) {
    if (coverage != null) {
      JCheckBox coverageCheck=(JCheckBox)e.getSource();
      coverage.setInUse(coverageCheck.isSelected());
      doPrepare();
    }
  }
 else {
    doPrepare();
  }
}

@Override public void run(){
  if (mDelay > 0) {
    try {
      Thread.sleep(mDelay);
    }
 catch (    InterruptedException e) {
      LogImpl.w(TAG,getName() + ": " + e.getMessage());
    }
  }
  if (mParentTask != null) {
synchronized (this) {
      try {
        wait();
      }
 catch (      InterruptedException e) {
        LogImpl.w(TAG,getName() + ": " + e.getMessage());
      }
    }
  }
  mStatus=Status.STATUS_EXECUTING;
  long startTime=System.currentTimeMillis();
  start();
  long endTime=System.currentTimeMillis();
  LogImpl.i(TAG,getName() + " runs " + (endTime - startTime));
  if (mDoneSignal != null) {
    mDoneSignal.countDown();
  }
  if (mChildTask != null) {
synchronized (mChildTask) {
      mChildTask.notify();
    }
  }
  mStatus=Status.STATUS_DONE;
}

public boolean has(final String name){
  return contents.containsKey(name.toLowerCase());
}

public void stop(){
  isAlive.set(false);
  for (  KafkaConsumer<byte[],byte[]> c : consumers.values()) {
    c.wakeup();
  }
  kafkaConsumerExecutor.shutdownNow();
  holdingBuffer.clear();
  IOUtils.closeQuietly(this);
}

protected final void refreshLoadingViewsSize(){
  final int maximumPullScroll=(int)(getMaximumPullScroll() * 1.2f);
  int pLeft=getPaddingLeft();
  int pTop=getPaddingTop();
  int pRight=getPaddingRight();
  int pBottom=getPaddingBottom();
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    if (mMode.showHeaderLoadingLayout()) {
      mHeaderLayout.setWidth(maximumPullScroll);
      pLeft=-maximumPullScroll;
    }
 else {
      pLeft=0;
    }
  if (mMode.showFooterLoadingLayout()) {
    mFooterLayout.setWidth(maximumPullScroll);
    pRight=-maximumPullScroll;
  }
 else {
    pRight=0;
  }
break;
case VERTICAL:
if (mMode.showHeaderLoadingLayout()) {
mHeaderLayout.setHeight(maximumPullScroll);
pTop=-maximumPullScroll;
}
 else {
pTop=0;
}
if (mMode.showFooterLoadingLayout()) {
mFooterLayout.setHeight(maximumPullScroll);
pBottom=-maximumPullScroll;
}
 else {
pBottom=0;
}
break;
}
if (DEBUG) {
Log.d(LOG_TAG,String.format("Setting Padding. L: %d, T: %d, R: %d, B: %d",pLeft,pTop,pRight,pBottom));
}
setPadding(pLeft,pTop,pRight,pBottom);
}

public String consumeElementSelector(){
  int start=pos;
  while (!isEmpty() && (matchesWord() || matchesAny('|','_','-')))   pos++;
  return queue.substring(start,pos);
}

@SuppressWarnings("unchecked") public LongMap(int initialCapacity,float loadFactor){
  if (initialCapacity < 0)   throw new IllegalArgumentException("initialCapacity must be >= 0: " + initialCapacity);
  if (initialCapacity > 1 << 30)   throw new IllegalArgumentException("initialCapacity is too large: " + initialCapacity);
  capacity=nextPowerOfTwo(initialCapacity);
  if (loadFactor <= 0)   throw new IllegalArgumentException("loadFactor must be > 0: " + loadFactor);
  this.loadFactor=loadFactor;
  threshold=(int)(capacity * loadFactor);
  mask=capacity - 1;
  hashShift=63 - Long.numberOfTrailingZeros(capacity);
  stashCapacity=Math.max(3,(int)Math.ceil(Math.log(capacity)) * 2);
  pushIterations=Math.max(Math.min(capacity,8),(int)Math.sqrt(capacity) / 8);
  keyTable=new long[capacity + stashCapacity];
  valueTable=(V[])new Object[keyTable.length];
}

public void endAttributes() throws SAXException {
  String uri=getCurrentElementUri();
  String local=getCurrentElementLocal();
  String prefix=nsContext.getPrefix(uri);
  _assert(prefix != null);
  String qname;
  if (prefix.length() != 0)   qname=prefix + ':' + local;
 else   qname=local;
  nsContext.iterateDeclaredPrefixes(startPrefixCallback);
  writer.startElement(uri,local,qname,attributes);
  attributes.clear();
  textBuf.setLength(0);
}

private String abbreviateScript(String script){
  if (script == null) {
    return null;
  }
  if (script.length() <= 1000) {
    return script;
  }
  return "..." + script.substring(3,1000);
}

public static void expandID(String numberString,WordRelation wordRelation,Item tokenItem){
  int numberDigits=numberString.length();
  if ((numberDigits == 4) && (numberString.charAt(2) == '0') && (numberString.charAt(3) == '0')) {
    if (numberString.charAt(1) == '0') {
      expandNumber(numberString,wordRelation,tokenItem);
    }
 else {
      expandNumber(numberString.substring(0,2),wordRelation,tokenItem);
      wordRelation.addWord(tokenItem,"hundred");
    }
  }
 else   if ((numberDigits == 2) && (numberString.charAt(0) == '0')) {
    wordRelation.addWord(tokenItem,"oh");
    expandDigits(numberString.substring(1,2),wordRelation,tokenItem);
  }
 else   if ((numberDigits == 4 && numberString.charAt(1) == '0') || numberDigits < 3) {
    expandNumber(numberString,wordRelation,tokenItem);
  }
 else   if (numberDigits % 2 == 1) {
    String firstDigit=digit2num[numberString.charAt(0) - '0'];
    wordRelation.addWord(tokenItem,firstDigit);
    expandID(numberString.substring(1,numberDigits),wordRelation,tokenItem);
  }
 else {
    expandNumber(numberString.substring(0,2),wordRelation,tokenItem);
    expandID(numberString.substring(2,numberDigits),wordRelation,tokenItem);
  }
}

private static void unregisterMbeansFromPropsFile(MBeanServer mBeanServer) throws Exception {
  JamonPropertiesLoader loader=new JamonPropertiesLoader();
  List<String> jamonJmxBeanProperties=loader.getMxBeans();
  Iterator<String> iter=jamonJmxBeanProperties.iterator();
  while (iter.hasNext()) {
    String beanInfo=iter.next();
    MonitorMXBean mXbean=MonitorMXBeanFactory.create(beanInfo);
    mBeanServer.unregisterMBean(MonitorMXBeanFactory.getObjectName(mXbean));
    MonitorMXBean mXbeanDelta=MonitorMXBeanFactory.createDelta(beanInfo);
    mBeanServer.unregisterMBean(MonitorMXBeanFactory.getDeltaObjectName(mXbeanDelta));
  }
}

Source popImportSource(){
  return (Source)m_importSourceStack.pop();
}

public static Date zeroTimeDate(Date date){
  final GregorianCalendar gregorianCalendar=new GregorianCalendar();
  gregorianCalendar.setTime(date);
  gregorianCalendar.set(Calendar.HOUR_OF_DAY,0);
  gregorianCalendar.set(Calendar.MINUTE,0);
  gregorianCalendar.set(Calendar.SECOND,0);
  gregorianCalendar.set(Calendar.MILLISECOND,0);
  return gregorianCalendar.getTime();
}

public static final void writeMapXml(Map val,String name,XmlSerializer out) throws XmlPullParserException, IOException {
  if (val == null) {
    out.startTag(null,"null");
    out.endTag(null,"null");
    return;
  }
  Set s=val.entrySet();
  Iterator i=s.iterator();
  out.startTag(null,"map");
  if (name != null) {
    out.attribute(null,"name",name);
  }
  while (i.hasNext()) {
    Map.Entry e=(Map.Entry)i.next();
    writeValueXml(e.getValue(),(String)e.getKey(),out);
  }
  out.endTag(null,"map");
}

protected void export(){
  int retVal;
  File file;
  AbstractFileSaver saver;
  if (m_FileChooser == null)   m_FileChooser=GUIHelper.newConverterFileChooser();
  retVal=m_FileChooser.showSaveDialog(this);
  if (retVal != ConverterFileChooser.APPROVE_OPTION)   return;
  file=m_FileChooser.getSelectedFile();
  saver=m_FileChooser.getSaver();
  try {
    saver.setInstances(m_DataPanel.getInstances());
    saver.writeBatch();
  }
 catch (  Exception e) {
    JOptionPane.showMessageDialog(this,"Failed to save dataset to '" + file + "':\n"+ Utils.throwableToString(e),"Error saving",JOptionPane.ERROR_MESSAGE);
  }
}

public void sort(int i){
  Arrays.sort(vector[i],0,sizes.get(i));
}

private void createMapWhenNeeded(){
  if (isMapInitialized) {
    return;
  }
  if (resourceBundle != null) {
    Set<String> set=resourceBundle.keySet();
    topLevelMap=new HashMap<String,Object>(set.size());
    for (    String key : set) {
      Object value=resourceBundle.getObject(key);
      topLevelMap.put(key,value);
    }
  }
 else {
    topLevelMap=new HashMap<String,Object>(1);
  }
  topLevelMap.put("_RESOURCE_BUNDLE_",resourceBundle);
  isMapInitialized=true;
}

public static VectorClock increment(VectorClock clock,int... nodes){
  for (  int n : nodes)   clock=clock.incremented((short)n,System.currentTimeMillis());
  return clock;
}

@Override public String toString(){
  return "" + set.toString();
}

void createHeapPhiInstruction(BasicBlock bb,HeapVariable<Object> H){
  Instruction s=makePhiInstruction(H,bb);
  ArrayList<Instruction> heapPhis=heapPhi.get(bb);
  if (heapPhis == null) {
    heapPhis=new ArrayList<Instruction>(2);
    heapPhi.put(bb,heapPhis);
  }
  heapPhis.add(s);
  registerInstruction(s,bb);
}

protected void printTime(String s){
  SimpleDateFormat dateFormat=new SimpleDateFormat("HH:mm:ss");
  println(dateFormat.format(new java.util.Date()) + " " + s);
}

public static int determineSampleSize(ImageRequest imageRequest,EncodedImage encodedImage){
  if (!EncodedImage.isMetaDataAvailable(encodedImage)) {
    return DEFAULT_SAMPLE_SIZE;
  }
  float ratio=determineDownsampleRatio(imageRequest,encodedImage);
  int sampleSize;
  if (encodedImage.getImageFormat() == ImageFormat.JPEG) {
    sampleSize=ratioToSampleSizeJPEG(ratio);
  }
 else {
    sampleSize=ratioToSampleSize(ratio);
  }
  int maxDimension=Math.max(encodedImage.getHeight(),encodedImage.getWidth());
  while (maxDimension / sampleSize > MAX_BITMAP_SIZE) {
    if (encodedImage.getImageFormat() == ImageFormat.JPEG) {
      sampleSize*=2;
    }
 else {
      sampleSize++;
    }
  }
  return sampleSize;
}

public Skeleton(PrintWriter out){
  this.out=out;
}

public void disconnect(){
  if (conn != null) {
    try {
      conn.close();
    }
 catch (    SQLException e) {
      logger.warn("Unable to close connection",e);
    }
  }
  try {
    closeBinlog();
  }
 catch (  IOException e) {
    logger.warn("Unable to close binlog",e);
  }
}

@Override public int read(byte[] b,int off,int len) throws IOException {
  int n=in.read(b,off,len);
  if (n == -1) {
    throwIfFalseEOF();
  }
 else {
    bytesRead+=n;
  }
  return n;
}

@Override public Generator<ILineSegment> construct(String[] args){
  return new IntegerGenerator(Integer.valueOf(args[0]),Integer.valueOf(args[1]));
}

public SpatialStrategy(SpatialContext ctx,String fieldName){
  if (ctx == null)   throw new IllegalArgumentException("ctx is required");
  this.ctx=ctx;
  if (fieldName == null || fieldName.length() == 0)   throw new IllegalArgumentException("fieldName is required");
  this.fieldName=fieldName;
}

public void dispose(){
  if (keys != null) {
    keys.clear();
    keys=null;
  }
  super.dispose();
}

public boolean isFixedDisk(String letter){
  if (letter.length() != 1)   throw new IllegalArgumentException("Supply 1 letter, not: " + letter);
  char drive=Character.toUpperCase(letter.charAt(0));
  if (drive < 'A' || drive > 'Z')   throw new IllegalArgumentException("A drive is indicated by a letter, so A-Z inclusive. Not " + drive);
  return getDriveType(drive + ":\\") == 3L;
}

private void movePos(float deltaY){
  if ((deltaY < 0 && mPtrIndicator.isInStartPosition())) {
    if (DEBUG) {
      PtrCLog.e(LOG_TAG,String.format("has reached the top"));
    }
    return;
  }
  int to=mPtrIndicator.getCurrentPosY() + (int)deltaY;
  if (mPtrIndicator.willOverTop(to)) {
    if (DEBUG) {
      PtrCLog.e(LOG_TAG,String.format("over top"));
    }
    to=PtrIndicator.POS_START;
  }
  mPtrIndicator.setCurrentPos(to);
  int change=to - mPtrIndicator.getLastPosY();
  updatePos(change);
}

private Object[] compile(String path){
  List list=new ArrayList();
  if (path == null) {
    return list.toArray();
  }
  StringTokenizer tok=new StringTokenizer(path,":.");
  while (tok.hasMoreTokens()) {
    String token=tok.nextToken();
    OpEnum op=OpEnum.getInstance(token);
    if (op == null) {
      throw new Error("Bad path compiled " + path);
    }
    list.add(op);
    if (op == OpEnum.RELATION) {
      list.add(tok.nextToken());
    }
  }
  return list.toArray();
}

private void splitChunk(final MemoryChunk chunk,final long address){
  final byte[] oldData=chunk.getBytes();
  final byte[] newData1=new byte[(int)(address - chunk.getAddress())];
  final byte[] newData2=new byte[(chunk.getLength() - newData1.length)];
  System.arraycopy(oldData,0,newData1,0,newData1.length);
  System.arraycopy(oldData,oldData.length - newData2.length,newData2,0,newData2.length);
  final MemoryChunk newChunk1=new MemoryChunk(chunk.getAddress(),newData1);
  final MemoryChunk newChunk2=new MemoryChunk((chunk.getAddress() + chunk.getLength()) - newData2.length,newData2);
  removeChunk(chunk);
  insertChunk(newChunk1);
  insertChunk(newChunk2);
}

public boolean isDirty(){
  return dirty;
}

private Vector showTextFixedWidth(String text,int align){
  Vector comps=new Vector();
  if ((text == null) || (text.equals(""))) {
    return comps;
  }
  int spaceW=width - x;
  Vector words=getWords(text,align,false);
  if (words.size() > 0) {
    int w=0;
    String wordStr="";
    if ((CSSParser.isWhiteSpace(text.charAt(0))) && (curLine.getComponentCount() != 0)) {
      wordStr=" ";
    }
    while (w < words.size()) {
      String nextWord=(String)words.elementAt(w);
      String space="";
      if ((!wordStr.equals("")) && (!wordStr.equals(" "))) {
        space=" ";
      }
      if (font.stringWidth(wordStr + space + nextWord) > spaceW - 2) {
        comps.addElement(addString(wordStr,align));
        newLineIfNotEmpty(align);
        spaceW=width - x;
        wordStr=nextWord;
      }
 else {
        wordStr+=space + nextWord;
      }
      w++;
    }
    if (CSSParser.isWhiteSpace(text.charAt(text.length() - 1))) {
      wordStr+=" ";
    }
    comps.addElement(addString(wordStr,align));
  }
  return comps;
}

private void calculateSlotUsage(){
  numEntries=0;
  for (int i=0; i < table.table.length; i++) {
    LinkedList<V> list=(LinkedList<V>)table.table[i];
    if (list != null) {
      numEntries+=list.size();
      intHashTable[i]+=list.size();
    }
  }
}

public Insert defaultValues(){
  defaultValues=true;
  columns.clear();
  valuesToInsert.clear();
  query=null;
  invalidateCompileCache();
  return this;
}

public CFilenameFormatter(final File directory){
  Preconditions.checkArgument(directory.exists(),"Error: Direcctory must exist.");
  m_directory=directory;
}

public T pop(){
  return list.removeLast();
}

public static String makeLogTag(Class cls){
  return makeLogTag(cls.getSimpleName());
}

public Timestamp recalculateEstimatedCompletionDate(Long priority,Timestamp startDate){
  if (exist()) {
    getProductionRunRoutingTasks();
    if (quantity == null)     getQuantity();
    Timestamp endDate=null;
    for (Iterator<GenericValue> iter=productionRunRoutingTasks.iterator(); iter.hasNext(); ) {
      GenericValue routingTask=iter.next();
      if (priority.compareTo(routingTask.getLong("priority")) <= 0) {
        long totalTime=ProductionRun.getEstimatedTaskTime(routingTask,quantity,dispatcher);
        endDate=TechDataServices.addForward(TechDataServices.getTechDataCalendar(routingTask),startDate,totalTime);
        routingTask.set("estimatedStartDate",startDate);
        routingTask.set("estimatedCompletionDate",endDate);
        startDate=endDate;
      }
    }
    return endDate;
  }
 else {
    return null;
  }
}

protected ShoppingCartItem(){
}

public static String nodeListToString(List<? extends Node> list){
  StringBuffer buf=new StringBuffer();
  buf.append("{");
  if (list.size() > 0) {
    buf.append("\n  0 : [" + domToString(list.get(0)) + "]");
    for (int i=1; i < list.size(); ++i) {
      buf.append("\n  " + i + " : ["+ domToString(list.get(0))+ "]");
    }
    buf.append("\n");
  }
  buf.append("}");
  return buf.toString();
}

protected Element adapt(Element source,ElementMetadata<?,?> sourceMeta,String kind){
  ElementKey<?,?> adaptorKey=sourceMeta.adapt(kind);
  if (adaptorKey != null) {
    try {
      return adapt(adaptorKey,source);
    }
 catch (    ContentCreationException e) {
      LOGGER.log(Level.SEVERE,"Unable to adapt " + source.getClass() + " to "+ adaptorKey.getElementType(),e);
    }
  }
  return source;
}

public String convertAliasToNumber(String aliasName){
  if (!aliasName.contains("'") && AliasDatabase.containsAlias(aliasName)) {
    String[] res=AliasDatabase.getAlias(aliasName);
    return res[1];
  }
  return aliasName;
}

public Attr(String name,@Nullable Format format){
  this.name=name;
  if (format != null) {
    formats=Collections.singletonList(format);
  }
}

static StreamTokenizer makeTokenizer(String tagValue){
  StreamTokenizer tokenizer=new StreamTokenizer(new StringReader(tagValue));
  tokenizer.resetSyntax();
  tokenizer.wordChars('A','Z');
  tokenizer.wordChars('a','z');
  tokenizer.wordChars('0','9');
  tokenizer.wordChars('-','-');
  tokenizer.wordChars('_','_');
  tokenizer.wordChars('.','.');
  tokenizer.wordChars('<','<');
  tokenizer.wordChars('>','>');
  tokenizer.quoteChar('\'');
  tokenizer.quoteChar('"');
  tokenizer.whitespaceChars(' ',' ');
  tokenizer.whitespaceChars('\t','\t');
  tokenizer.whitespaceChars('\n','\n');
  tokenizer.whitespaceChars('\r','\r');
  tokenizer.eolIsSignificant(false);
  return tokenizer;
}

private void sendRequest(){
  int i=tabPane.getSelectedIndex();
  String prompt=rb.getString("CS" + i + "PromptChar");
  if (log.isDebugEnabled()) {
    log.debug("send " + prompt + " for pane "+ i);
  }
  if (source == null) {
    log.error("DataSource should not be null in sendRequest");
    timer.stop();
    return;
  }
  source.sendBytes(prompt.getBytes());
}

public void remove(Predicate filter){
  for (IntIterator ii=rows(filter); ii.hasNext(); )   removeRow(ii.nextInt());
}

private void calculateTrimArea(Rect bounds){
  float size=Math.min(bounds.height(),bounds.width());
  float yOffset=(bounds.height() - size) / 2f;
  float xOffset=(bounds.width() - size) / 2f;
  float padding=mPadding + (bounds.height() - 2f * mPadding) * 1f / 6f;
  mInternalBounds.set(bounds.left + padding + xOffset,bounds.top + padding + yOffset,bounds.right - padding - xOffset,bounds.bottom - padding - yOffset);
  mCenter=mInternalBounds.centerX();
  mSize=mInternalBounds.width();
  mPlayTipOffset=1f / 6f * mSize;
  mPlayBaseOffset=0.07735f * mSize;
  setTransitionState(0f,0f);
}

protected void initInstances(Operation post,ServiceDocument... states){
  initInstances(post,true,true,states);
}

protected Instance mergeInstances(Instance source,Instance dest){
  Instances outputFormat=outputFormatPeek();
  double[] vals=new double[outputFormat.numAttributes()];
  for (int i=0; i < vals.length; i++) {
    if ((i != outputFormat.classIndex()) && (m_SelectedCols.isInRange(i))) {
      if ((source != null) && !source.isMissing(i) && !dest.isMissing(i)) {
        vals[i]=dest.value(i) - source.value(i);
      }
 else {
        vals[i]=Utils.missingValue();
      }
    }
 else {
      vals[i]=dest.value(i);
    }
  }
  Instance inst=null;
  if (dest instanceof SparseInstance) {
    inst=new SparseInstance(dest.weight(),vals);
  }
 else {
    inst=new DenseInstance(dest.weight(),vals);
  }
  inst.setDataset(dest.dataset());
  return inst;
}

public SourceCallChainBuilder(int timeout,boolean process_callbacks){
  this.timeout=timeout;
  this.process_callbacks=process_callbacks;
}

public synchronized float recoveredBytesPercent(){
  long total=0;
  long recovered=0;
  for (  File file : fileDetails.values()) {
    if (file.reused() == false) {
      total+=file.length();
      recovered+=file.recovered();
    }
  }
  if (total == 0 && fileDetails.size() == 0) {
    return 0.0f;
  }
  if (total == recovered) {
    return 100.0f;
  }
 else {
    return 100.0f * recovered / total;
  }
}

public <E extends T>EventBinder<E> on(){
  return new EventBinder<>(Optional.empty());
}

private boolean isValueSupported(Object value){
  for (int i=0; i < values.length; i++) {
    if (value.equals(values[i])) {
      return true;
    }
  }
  return false;
}

public static BitSet fromByteArray(byte[] bytes){
  BitSet bits=new BitSet();
  for (int i=0; i < bytes.length * 8; i++) {
    if ((bytes[bytes.length - i / 8 - 1] & (1 << (i % 8))) > 0) {
      bits.set(i);
    }
  }
  return bits;
}

public RepeatTime createRepeatTime(int repeatInterval,int activeDuration,int[] offsets){
  RepeatField repeatTimeField=new RepeatField();
  try {
    repeatTimeField.setRepeatInterval(repeatInterval);
    repeatTimeField.setActiveDuration(activeDuration);
    repeatTimeField.setOffsetArray(offsets);
  }
 catch (  SdpException s) {
    s.printStackTrace();
  }
  return repeatTimeField;
}

public void remove(int i){
  if ((i >= array.length) || (i < 0))   throw new ArrayIndexOutOfBoundsException("invalid index:" + i + ";the array length is "+ array.length);
  NSObject[] newArray=new NSObject[array.length - 1];
  System.arraycopy(array,0,newArray,0,i);
  System.arraycopy(array,i + 1,newArray,i,array.length - i - 1);
  array=newArray;
}

private Time parseTime(String timeString) throws ParseException {
  java.util.Date parsedDate=TimeField.parse(timeString);
  if (parsedDate == null)   return null;
  return new Time(parsedDate.getTime());
}

public synchronized void deleteObservers(){
  observers.clear();
}

private void decrementCopyFieldTargetCount(SchemaField dest){
  Integer count=copyFieldTargetCounts.get(dest);
  assert count != null;
  if (count <= 1) {
    copyFieldTargetCounts.remove(dest);
  }
 else {
    copyFieldTargetCounts.put(dest,count - 1);
  }
}

public synchronized int updatePurchase(String orderId,String productId,PurchaseState purchaseState,long purchaseTime,String developerPayload){
  insertOrder(orderId,productId,purchaseState,purchaseTime,developerPayload);
  Cursor cursor=mDb.query(PURCHASE_HISTORY_TABLE_NAME,HISTORY_COLUMNS,HISTORY_PRODUCT_ID_COL + "=?",new String[]{productId},null,null,null,null);
  if (cursor == null) {
    return 0;
  }
  int quantity=0;
  try {
    while (cursor.moveToNext()) {
      int stateIndex=cursor.getInt(2);
      PurchaseState state=PurchaseState.valueOf(stateIndex);
      if (state == PurchaseState.PURCHASED || state == PurchaseState.REFUNDED) {
        quantity+=1;
      }
    }
    updatePurchasedItem(productId,quantity);
  }
  finally {
    if (cursor != null) {
      cursor.close();
    }
  }
  return quantity;
}

public static Calendar fromUnixTime(long unixTime,TimeUnit timeUnit){
  Calendar calendar=getCalendarInstance();
  calendar.setTimeZone(TimeZone.getDefault());
  long millis=timeUnit.toMillis(unixTime);
  calendar.setTimeInMillis(millis);
  return calendar;
}

public boolean isLayoutIdInRecord(int layoutId){
  return mLayoutIds != null && mLayoutIds.contains(layoutId);
}

private void open_board_design_action(){
  DesignFile design_file=open_dialog(stat,main_options.design_dir_name);
  if (design_file == null) {
    stat.userPrintln(resources.getString("message_3"));
    return;
  }
  String message=resources.getString("loading_design") + " " + design_file.get_name();
  stat.userPrintln(message);
  BoardFrame board_frame=new BoardFrame(design_file,stat);
  ImportDesign d_import=new ImportDesign(board_frame);
  d_import.execute();
}

public static String retrieveDisplayName(String id,boolean daylight,int style,Locale locale){
  String[] names=retrieveDisplayNamesImpl(id,locale);
  if (Objects.nonNull(names)) {
    return names[(daylight ? 4 : 2) - style];
  }
 else {
    return null;
  }
}

protected Query newFuzzyQuery(Term term,float minimumSimilarity,int prefixLength){
  String text=term.text();
  int numEdits=FuzzyQuery.floatToEdits(minimumSimilarity,text.codePointCount(0,text.length()));
  return new FuzzyQuery(term,numEdits,prefixLength);
}

@Override public void playVideo(Uri uri,String title){
  CameraActivity activity=mActivity.get();
  if (activity != null) {
    CameraUtil.playVideo(activity,uri,title);
  }
}

public void copyFrom(Path other){
  grow(other.length - 1);
  System.arraycopy(other.blockIdList,0,this.blockIdList,0,other.length);
  this.length=other.length;
  this.cachedHashCode=other.cachedHashCode;
}

void recoverMessages() throws RollbackFailedException {
  if (m_isQueue) {
    if (_logger.isLoggable(Level.FINE)) {
      _logger.log(Level.FINE,"GSSessionImpl.recoverMessages(): Recovering messages of Queue");
    }
    unackedMessages.clear();
    if (!isAutoAck()) {
      rollbackLocalTransaction();
    }
  }
 else {
    if (_logger.isLoggable(Level.FINE)) {
      _logger.log(Level.FINE,"GSSessionImpl.recoverMessages(): Recovering messages of Topic");
    }
    unackedMessages.addAll(recoverMessages);
    LinkedList<MessageQueueElement> temp=unackedMessages;
    recoverMessages.clear();
    unackedMessages=recoverMessages;
    recoverMessages=temp;
  }
}

private void maybeSampleSyncParams(){
  long playbackPositionUs=audioTrackUtil.getPlaybackHeadPositionUs();
  if (playbackPositionUs == 0) {
    return;
  }
  long systemClockUs=System.nanoTime() / 1000;
  if (systemClockUs - lastPlayheadSampleTimeUs >= MIN_PLAYHEAD_OFFSET_SAMPLE_INTERVAL_US) {
    playheadOffsets[nextPlayheadOffsetIndex]=playbackPositionUs - systemClockUs;
    nextPlayheadOffsetIndex=(nextPlayheadOffsetIndex + 1) % MAX_PLAYHEAD_OFFSET_COUNT;
    if (playheadOffsetCount < MAX_PLAYHEAD_OFFSET_COUNT) {
      playheadOffsetCount++;
    }
    lastPlayheadSampleTimeUs=systemClockUs;
    smoothedPlayheadOffsetUs=0;
    for (int i=0; i < playheadOffsetCount; i++) {
      smoothedPlayheadOffsetUs+=playheadOffsets[i] / playheadOffsetCount;
    }
  }
  if (!isPassthrough() && systemClockUs - lastTimestampSampleTimeUs >= MIN_TIMESTAMP_SAMPLE_INTERVAL_US) {
    audioTimestampSet=audioTrackUtil.updateTimestamp();
    if (audioTimestampSet) {
      long audioTimestampUs=audioTrackUtil.getTimestampNanoTime() / 1000;
      long audioTimestampFramePosition=audioTrackUtil.getTimestampFramePosition();
      if (audioTimestampUs < resumeSystemTimeUs) {
        audioTimestampSet=false;
      }
 else       if (Math.abs(audioTimestampUs - systemClockUs) > MAX_AUDIO_TIMESTAMP_OFFSET_US) {
        String message="Spurious audio timestamp (system clock mismatch): " + audioTimestampFramePosition + ", "+ audioTimestampUs+ ", "+ systemClockUs+ ", "+ playbackPositionUs;
        if (failOnSpuriousAudioTimestamp) {
          throw new InvalidAudioTrackTimestampException(message);
        }
        Log.w(TAG,message);
        audioTimestampSet=false;
      }
 else       if (Math.abs(framesToDurationUs(audioTimestampFramePosition) - playbackPositionUs) > MAX_AUDIO_TIMESTAMP_OFFSET_US) {
        String message="Spurious audio timestamp (frame position mismatch): " + audioTimestampFramePosition + ", "+ audioTimestampUs+ ", "+ systemClockUs+ ", "+ playbackPositionUs;
        if (failOnSpuriousAudioTimestamp) {
          throw new InvalidAudioTrackTimestampException(message);
        }
        Log.w(TAG,message);
        audioTimestampSet=false;
      }
    }
    if (getLatencyMethod != null) {
      try {
        latencyUs=(Integer)getLatencyMethod.invoke(audioTrack,(Object[])null) * 1000L - framesToDurationUs(bytesToFrames(bufferSize));
        latencyUs=Math.max(latencyUs,0);
        if (latencyUs > MAX_LATENCY_US) {
          Log.w(TAG,"Ignoring impossibly large audio latency: " + latencyUs);
          latencyUs=0;
        }
      }
 catch (      Exception e) {
        getLatencyMethod=null;
      }
    }
    lastTimestampSampleTimeUs=systemClockUs;
  }
}

private Map<Key,Array> store(Class clazz){
  Method[] methods=clazz.getMethods();
  Map<Key,Array> methodsMap=new ConcurrentHashMap<Key,Array>();
  for (int i=0; i < methods.length; i++) {
    storeMethod(methods[i],methodsMap);
  }
  map.put(clazz,methodsMap);
  return methodsMap;
}

private void readCentralDir() throws IOException {
  long scanOffset=raf.length() - ENDHDR;
  if (scanOffset < 0) {
    throw new ZipException("File too short to be a zip file: " + raf.length());
  }
  raf.seek(0);
  final int headerMagic=Integer.reverseBytes(raf.readInt());
  if (headerMagic != LOCSIG) {
    throw new ZipException("Not a zip archive");
  }
  long stopOffset=scanOffset - 65536;
  if (stopOffset < 0) {
    stopOffset=0;
  }
  while (true) {
    raf.seek(scanOffset);
    if (Integer.reverseBytes(raf.readInt()) == ENDSIG) {
      break;
    }
    scanOffset--;
    if (scanOffset < stopOffset) {
      throw new ZipException("End Of Central Directory signature not found");
    }
  }
  byte[] eocd=new byte[ENDHDR - 4];
  raf.readFully(eocd);
  BufferIterator it=HeapBufferIterator.iterator(eocd,0,eocd.length,ByteOrder.LITTLE_ENDIAN);
  int diskNumber=it.readShort() & 0xffff;
  int diskWithCentralDir=it.readShort() & 0xffff;
  int numEntries=it.readShort() & 0xffff;
  int totalNumEntries=it.readShort() & 0xffff;
  it.skip(4);
  long centralDirOffset=((long)it.readInt()) & 0xffffffffL;
  int commentLength=it.readShort() & 0xffff;
  if (numEntries != totalNumEntries || diskNumber != 0 || diskWithCentralDir != 0) {
    throw new ZipException("Spanned archives not supported");
  }
  if (commentLength > 0) {
    byte[] commentBytes=new byte[commentLength];
    raf.readFully(commentBytes);
    comment=new String(commentBytes,0,commentBytes.length,StandardCharsets.UTF_8);
  }
  RAFStream rafStream=new RAFStream(raf,centralDirOffset);
  BufferedInputStream bufferedStream=new BufferedInputStream(rafStream,4096);
  byte[] hdrBuf=new byte[CENHDR];
  for (int i=0; i < numEntries; ++i) {
    ZipEntry newEntry=new ZipEntry(hdrBuf,bufferedStream);
    if (newEntry.localHeaderRelOffset >= centralDirOffset) {
      throw new ZipException("Local file header offset is after central directory");
    }
    String entryName=newEntry.getName();
    if (entries.put(entryName,newEntry) != null) {
      throw new ZipException("Duplicate entry name: " + entryName);
    }
  }
}

protected int readFully(InputStream in,byte buffer[],int offset,int len) throws IOException {
  for (int i=0; i < len; i++) {
    int q=in.read();
    if (q == -1)     return ((i == 0) ? -1 : i);
    buffer[i + offset]=(byte)q;
  }
  return len;
}

private long renewServiceLeaseDo(ServiceID serviceID,Uuid leaseID,long renewDuration) throws UnknownLeaseException {
  long now=System.currentTimeMillis();
  long renewExpiration=renewServiceLeaseInt(serviceID,leaseID,renewDuration,now);
  addLogRecord(new ServiceLeaseRenewedLogObj(serviceID,leaseID,renewExpiration));
  return renewExpiration - now;
}

public BlockSwapper(World world,EntityPlayer player,ItemStack truncator,BlockPos origCoords,int range,boolean leaves){
  this.world=world;
  this.player=player;
  this.truncator=truncator;
  this.origin=origCoords;
  this.range=range;
  this.treatLeavesSpecial=leaves;
  this.candidateQueue=new PriorityQueue<>();
  this.completedCoords=new HashSet<>();
  candidateQueue.offer(new SwapCandidate(this.origin,this.range));
}

public static String[] toStringArray(Enumeration<String> enumeration){
  if (enumeration == null) {
    return null;
  }
  List<String> list=Collections.list(enumeration);
  return list.toArray(new String[list.size()]);
}

public boolean overlapSave(SphereCluster other){
  double minDist=Math.sqrt(2) * (getRadius() + other.getRadius());
  double diff=getCenterDistance(other) - minDist;
  return diff > 0;
}

@PUT @Consumes({MediaType.APPLICATION_XML,MediaType.APPLICATION_JSON}) @Path("/{id}/assign-matched-pools") @Produces({MediaType.APPLICATION_XML,MediaType.APPLICATION_JSON}) @CheckPermission(roles={Role.SYSTEM_ADMIN,Role.RESTRICTED_SYSTEM_ADMIN}) public FileVirtualPoolRestRep updateFileVirtualPoolWithAssignedPools(@PathParam("id") URI id,VirtualPoolPoolUpdateParam param){
  VirtualPool vPool=updateVirtualPoolWithAssignedStoragePools(id,param);
  return toFileVirtualPool(vPool,VirtualPool.getFileRemoteProtectionSettings(vPool,_dbClient));
}

public static java.sql.Date toSqlDate(int month,int day,int year){
  java.util.Date newDate=toDate(month,day,year,0,0,0);
  if (newDate != null) {
    return new java.sql.Date(newDate.getTime());
  }
 else {
    return null;
  }
}

public Object readDefaultListModel(Element node) throws Exception {
  DefaultListModel model;
  Vector<Element> children;
  Element child;
  int i;
  int index;
  int currIndex;
  if (DEBUG) {
    trace(new Throwable(),node.getAttribute(ATT_NAME));
  }
  m_CurrentNode=node;
  children=XMLDocument.getChildTags(node);
  model=new DefaultListModel();
  index=children.size() - 1;
  for (i=0; i < children.size(); i++) {
    child=children.get(i);
    currIndex=Integer.parseInt(child.getAttribute(ATT_NAME));
    if (currIndex > index) {
      index=currIndex;
    }
  }
  model.setSize(index + 1);
  for (i=0; i < children.size(); i++) {
    child=children.get(i);
    model.set(Integer.parseInt(child.getAttribute(ATT_NAME)),invokeReadFromXML(child));
  }
  return model;
}

private boolean resultsIdentical(String namedCurve,BigInteger badX,BigInteger badY,BigInteger secret,int iter) throws InvalidAlgorithmParameterException, NoSuchAlgorithmException, InvalidKeySpecException, InvalidKeyException {
  for (int i=0; i < iter; i++) {
    secret=secret.add(BigInteger.ONE);
    BigInteger resultCustom=computeSecretWithCustomAlgorithm(namedCurve,badX,badY,secret);
    BigInteger resultSun=computeSecretWithSunAlgorithm(namedCurve,badX,badY,secret);
    if (resultSun != null && !resultSun.equals(resultCustom)) {
      return false;
    }
  }
  return true;
}

public void enableLayers(boolean enable){
  TextureState textureState=(TextureState)getLocalRenderState(RenderState.StateType.Texture);
  textureState.setEnabled(enable);
  markDirty(DirtyType.RenderState);
}

protected void starveRandomly(int limit){
  while (population.size() > limit) {
    int removePos=Randomness.nextInt() % population.size();
    population.remove(removePos);
  }
}

public void saveParam() throws Exception {
  Enumeration<AbstractParamPanel> en=tablePanel.elements();
  AbstractParamPanel panel=null;
  while (en.hasMoreElements()) {
    panel=en.nextElement();
    panel.saveParam(paramObject);
  }
}

@SuppressWarnings("SleepWhileInLoop") public static LocalStreamingContainer waitForActivation(StramLocalCluster localCluster,PTOperator operator) throws InterruptedException {
  LocalStreamingContainer container;
  long startMillis=System.currentTimeMillis();
  while (System.currentTimeMillis() < (startMillis + DEFAULT_TIMEOUT_MILLIS)) {
    if (operator.getState() == PTOperator.State.ACTIVE) {
      if ((container=localCluster.getContainer(operator)) != null) {
        return container;
      }
    }
    LOG.debug("Waiting for {}({}) in container {}",new Object[]{operator,operator.getState(),operator.getContainer()});
    Thread.sleep(500);
  }
  Assert.fail("timeout waiting for operator deployment " + operator);
  return null;
}

private float interpolate(){
  long currTime=System.currentTimeMillis();
  float elapsed=(currTime - startTime) / ZOOM_TIME;
  elapsed=Math.min(1f,elapsed);
  return interpolator.getInterpolation(elapsed);
}

protected String toExternalForm(URL url){
  return toExternalForm(url,false);
}

public ResultSet executeQuery(String query) throws SQLException, NoConnectionException {
  if (connection != null) {
    Statement st=connection.createStatement();
    return st.executeQuery(query);
  }
  throw new NoConnectionException();
}

private void rejectAccessAndTerminateProcess(RadiusResponse response,ContextHolder holder){
  response.setResponsePacket(new AccessReject());
  response.setUniversalId(holder.getUniversalId());
  terminateAuthnProcess(holder);
}

public ScVolume createViewVolume(String name,String instanceId) throws StorageCenterAPIException {
  LOG.debug("Creating view volume of replay {}",instanceId);
  String errorMessage="";
  Parameters params=new Parameters();
  params.add("Name",name);
  params.add("Notes",NOTES_STRING);
  try {
    RestResult result=restClient.post(String.format("StorageCenter/ScReplay/%s/CreateView",instanceId),params.toJson());
    if (checkResults(result)) {
      return gson.fromJson(result.getResult(),ScVolume.class);
    }
  }
 catch (  Exception e) {
    errorMessage=String.format("Error creating view volume: %s",e);
    LOG.warn(errorMessage);
  }
  if (errorMessage.length() == 0) {
    errorMessage=String.format("Unable to create view volume %s from replay %s",name,instanceId);
  }
  throw new StorageCenterAPIException(errorMessage);
}

@Override public boolean contains(Object object){
  return indexOf(object,0) != -1;
}

public void sync() throws StorageFault {
  final String methodName="sync(): ";
  log.debug(methodName + "Entry");
  try {
    log.trace(methodName + "calling syncmanger syncAll()");
    _syncManager.syncAll();
  }
 catch (  SOSFailure e) {
    log.error(methodName + "StorageOSFailure occured",e);
    throw FaultUtil.StorageFault(e);
  }
  log.debug(methodName + "Exit");
}

private void addMenuItem(JPopupMenu menu,String title,MWFNodeNext line){
  WFPopupItem item=new WFPopupItem(title,line);
  menu.add(item);
  item.addActionListener(this);
}

public static Matcher<BindingSet> binds(String name,Class<?> value){
  return new BindsMatcher<Object>(name,instanceOf(value));
}

private void testAdd() throws Exception {
  LOG.info("add");
  long msgCount=messageMapper.countMessagesInMailbox(MBOXES.get(1));
  LOG.info(msgCount + " " + MESSAGE_NO.size());
  assertEquals(MESSAGE_NO.size(),msgCount);
}

public void cancelTaskNoException(Task task){
  try {
    cancelTask(task);
  }
 catch (  Exception e) {
    _log.error("Error when cancelling VMware task");
  }
}

public boolean isLayoutIdInRecord(int layoutId){
  return mLayoutIds != null && mLayoutIds.contains(layoutId);
}

public String toString(){
  return toIndentedString(0);
}

public int read(byte b[],int off,int len) throws IOException, LogException {
  if (length < len)   badRead(len);
  len=in.read(b,off,len);
  length-=len;
  return len;
}

public static void migrateFrom6To7(SQLiteDatabase db){
  String selectQuery="SELECT * FROM " + DatabaseHelper.TABLE_GRIDITEMRELATIONS;
  Cursor c=db.rawQuery(selectQuery,null);
  if (c.moveToFirst()) {
    do {
      try {
        int gridItemid=c.getInt(c.getColumnIndex(DatabaseHelper.KEY_ID));
        int pluginId=c.getInt(c.getColumnIndex(DatabaseHelper.KEY_GRIDITEMRELATIONS_PLUGIN));
        String pluginpageUrlQuery="SELECT " + DatabaseHelper.KEY_MUNINPLUGINS_PLUGINPAGEURL + " FROM "+ DatabaseHelper.TABLE_MUNINPLUGINS+ " WHERE "+ DatabaseHelper.KEY_ID+ " = "+ pluginId;
        Cursor c2=db.rawQuery(pluginpageUrlQuery,null);
        if (c2.moveToFirst()) {
          String pluginpageUrl=c2.getString(c2.getColumnIndex(DatabaseHelper.KEY_MUNINPLUGINS_PLUGINPAGEURL));
          ContentValues values=new ContentValues();
          values.put(DatabaseHelper.KEY_GRIDITEMRELATIONS_PLUGINPAGEURL,pluginpageUrl);
          db.update(DatabaseHelper.TABLE_GRIDITEMRELATIONS,values,DatabaseHelper.KEY_ID + " = ?",new String[]{String.valueOf(gridItemid)});
        }
        c2.close();
      }
 catch (      Exception ex) {
        ex.printStackTrace();
      }
    }
 while (c.moveToNext());
  }
  c.close();
}

public static InputStream cropImage(InputStream inputStream,int imageWidth,int imageHeight,int outWidth,int outHeight) throws IllegalArgumentException {
  if (inputStream == null) {
    throw new IllegalArgumentException("inputStream cannot be null");
  }
  if (imageWidth <= 0 || imageHeight <= 0) {
    throw new IllegalArgumentException(String.format("imageWidth and imageHeight must be > 0: imageWidth=%d" + " imageHeight=%d",imageWidth,imageHeight));
  }
  if (outWidth <= 0 || outHeight <= 0) {
    throw new IllegalArgumentException(String.format("outWidth and outHeight must be > 0: outWidth=%d" + " outHeight=%d",imageWidth,outHeight));
  }
  int scaleDownSampleSize=Math.min(imageWidth / outWidth,imageHeight / outHeight);
  if (scaleDownSampleSize > 0) {
    imageWidth/=scaleDownSampleSize;
    imageHeight/=scaleDownSampleSize;
  }
 else {
    float ratio=(float)outWidth / outHeight;
    if (imageWidth < imageHeight * ratio) {
      outWidth=imageWidth;
      outHeight=(int)(outWidth / ratio);
    }
 else {
      outHeight=imageHeight;
      outWidth=(int)(outHeight * ratio);
    }
  }
  int left=(imageWidth - outWidth) / 2;
  int top=(imageHeight - outHeight) / 2;
  InputStream compressed=null;
  try {
    BitmapFactory.Options options=new BitmapFactory.Options();
    if (scaleDownSampleSize > 1) {
      options.inSampleSize=scaleDownSampleSize;
    }
    Bitmap bitmap=BitmapFactory.decodeStream(inputStream,null,options);
    if (bitmap == null) {
      return null;
    }
    Bitmap cropped=Bitmap.createBitmap(bitmap,left,top,outWidth,outHeight);
    ByteArrayOutputStream tmpOut=new ByteArrayOutputStream(2048);
    if (cropped.compress(Bitmap.CompressFormat.PNG,DEFAULT_IMG_QUALITY,tmpOut)) {
      byte[] outByteArray=tmpOut.toByteArray();
      compressed=new ByteArrayInputStream(outByteArray);
    }
  }
 catch (  Exception e) {
    Log.e(TAG,"Exception " + e);
  }
  return compressed;
}

@Override public void datasetChanged(DatasetChangeEvent event){
  fireDatasetChanged();
}

public void drawingComplete(OMGraphic omg,OMAction action){
  if (timerButton.isSelected()) {
    timer.restart();
  }
  if (omg instanceof OMPoint) {
    OMPoint p=(OMPoint)omg;
    GLPoint mp=new GLPoint(p.getLat(),p.getLon(),p.getRadius(),true);
    mp.setName("Added Node " + (pointCount++));
    mp.setStationary(true);
    mp.showPalette();
    points.put(mp.getName(),mp);
    manageGraphics();
  }
 else   if (omg instanceof OMPoly) {
    OMPoly poly=(OMPoly)omg;
    PathGLPoint pmp=new PathGLPoint(poly,5,true);
    pmp.setName("Added Node " + (pointCount++));
    pmp.showPalette();
    points.put(pmp.getName(),pmp);
    manageGraphics();
  }
  addNodeButton.setEnabled(true);
  addPathButton.setEnabled(true);
}

public static String hashKeyForDisk(String key){
  String cacheKey;
  try {
    final MessageDigest mDigest=MessageDigest.getInstance("MD5");
    mDigest.update(key.getBytes());
    cacheKey=bytesToHexString(mDigest.digest());
  }
 catch (  NoSuchAlgorithmException e) {
    cacheKey=String.valueOf(key.hashCode());
  }
  return cacheKey;
}

static int firstIllegalCharacter(String source){
  for (int i=0; i < source.length(); i++) {
    if (isLegal(source.charAt(i)) == false) {
      return i;
    }
  }
  return -1;
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return COOKIE;
case 2:
  return USER_ID;
default :
return null;
}
}

public Charset charset(){
  return charset != null ? Charset.forName(charset) : null;
}

public DriverTask deleteVolumeMirror(VolumeMirror mirror){
  LOG.info("Deleting volume mirror {}",mirror);
  DellSCDriverTask task=new DellSCDriverTask("deleteVolumeMirror");
  try {
    StorageCenterAPI api=connectionManager.getConnection(mirror.getStorageSystemId());
    ScCopyMirrorMigrate cmm=api.getMirror(mirror.getNativeId());
    api.deleteMirror(cmm.instanceId);
    api.deleteVolume(cmm.destinationVolume.instanceId);
    task.setStatus(TaskStatus.READY);
  }
 catch (  StorageCenterAPIException|DellSCDriverException dex) {
    String error=String.format("Error deleting volume mirror %s: %s",mirror.getNativeId(),dex);
    LOG.error(error);
    task.setFailed(error);
  }
  return task;
}

public void testConnect_BlockNoServer() throws IOException {
  connectWithoutServer();
  disconnectAfterConnected();
}

public ByteArrayDataProvider(byte[] bytes){
  this.bytes=Arrays.copyOf(bytes,bytes.length);
}

public static String generateNativeGuidForPhysicalNAS(String systemNativeGuid,String pNasName){
  return String.format("%s" + PHYSICAL_NAS + "+%s",systemNativeGuid,pNasName);
}

private void expire(){
  if (m_expire != 0 && m_timeExp < System.currentTimeMillis()) {
    reset();
  }
}

private static int determineConsecutiveBinaryCount(String msg,int startpos,Charset encoding) throws WriterException {
  final CharsetEncoder encoder=encoding.newEncoder();
  int len=msg.length();
  int idx=startpos;
  while (idx < len) {
    char ch=msg.charAt(idx);
    int numericCount=0;
    while (numericCount < 13 && isDigit(ch)) {
      numericCount++;
      int i=idx + numericCount;
      if (i >= len) {
        break;
      }
      ch=msg.charAt(i);
    }
    if (numericCount >= 13) {
      return idx - startpos;
    }
    ch=msg.charAt(idx);
    if (!encoder.canEncode(ch)) {
      throw new WriterException("Non-encodable character detected: " + ch + " (Unicode: "+ (int)ch+ ')');
    }
    idx++;
  }
  return idx - startpos;
}

public void removeSwipeListener(SwipeListener listener){
  if (mListeners == null) {
    return;
  }
  mListeners.remove(listener);
}

private boolean apply(GridClientPredicate<N>[] p,N n){
  if (p != null) {
    for (    GridClientPredicate<? super N> r : p) {
      if (r != null && !r.apply(n))       return false;
    }
  }
  return true;
}

public boolean hasName(final String name){
  for (  final String n : names) {
    if (n.equalsIgnoreCase(name)) {
      return true;
    }
  }
  return false;
}

static MethodHandle makeSpreadArguments(MethodHandle target,Class<?> spreadArgType,int spreadArgPos,int spreadArgCount){
  MethodType targetType=target.type();
  for (int i=0; i < spreadArgCount; i++) {
    Class<?> arg=VerifyType.spreadArgElementType(spreadArgType,i);
    if (arg == null)     arg=Object.class;
    targetType=targetType.changeParameterType(spreadArgPos + i,arg);
  }
  target=target.asType(targetType);
  MethodType srcType=targetType.replaceParameterTypes(spreadArgPos,spreadArgPos + spreadArgCount,spreadArgType);
  MethodType lambdaType=srcType.invokerType();
  Name[] names=arguments(spreadArgCount + 2,lambdaType);
  int nameCursor=lambdaType.parameterCount();
  int[] indexes=new int[targetType.parameterCount()];
  for (int i=0, argIndex=1; i < targetType.parameterCount() + 1; i++, argIndex++) {
    Class<?> src=lambdaType.parameterType(i);
    if (i == spreadArgPos) {
      MethodHandle aload=MethodHandles.arrayElementGetter(spreadArgType);
      Name array=names[argIndex];
      names[nameCursor++]=new Name(Lazy.NF_checkSpreadArgument,array,spreadArgCount);
      for (int j=0; j < spreadArgCount; i++, j++) {
        indexes[i]=nameCursor;
        names[nameCursor++]=new Name(aload,array,j);
      }
    }
 else     if (i < indexes.length) {
      indexes[i]=argIndex;
    }
  }
  assert (nameCursor == names.length - 1);
  Name[] targetArgs=new Name[targetType.parameterCount()];
  for (int i=0; i < targetType.parameterCount(); i++) {
    int idx=indexes[i];
    targetArgs[i]=names[idx];
  }
  names[names.length - 1]=new Name(target,(Object[])targetArgs);
  LambdaForm form=new LambdaForm("spread",lambdaType.parameterCount(),names);
  return SimpleMethodHandle.make(srcType,form);
}

public void dup2X2(){
  mv.visitInsn(Opcodes.DUP2_X2);
}

@Override public boolean contains(Object key){
  if (key == null)   return _map._nullValue != null;
  K1[] keys=_map._keys;
  for (int i=keys.length - 1; i >= 0; i--) {
    K1 testKey=keys[i];
    if (key.equals(testKey))     return true;
  }
  return false;
}

public Expression compile(int opPos) throws TransformerException {
  int op=getOp(opPos);
  Expression expr=null;
switch (op) {
case OpCodes.OP_XPATH:
    expr=compile(opPos + 2);
  break;
case OpCodes.OP_OR:
expr=or(opPos);
break;
case OpCodes.OP_AND:
expr=and(opPos);
break;
case OpCodes.OP_NOTEQUALS:
expr=notequals(opPos);
break;
case OpCodes.OP_EQUALS:
expr=equals(opPos);
break;
case OpCodes.OP_LTE:
expr=lte(opPos);
break;
case OpCodes.OP_LT:
expr=lt(opPos);
break;
case OpCodes.OP_GTE:
expr=gte(opPos);
break;
case OpCodes.OP_GT:
expr=gt(opPos);
break;
case OpCodes.OP_PLUS:
expr=plus(opPos);
break;
case OpCodes.OP_MINUS:
expr=minus(opPos);
break;
case OpCodes.OP_MULT:
expr=mult(opPos);
break;
case OpCodes.OP_DIV:
expr=div(opPos);
break;
case OpCodes.OP_MOD:
expr=mod(opPos);
break;
case OpCodes.OP_NEG:
expr=neg(opPos);
break;
case OpCodes.OP_STRING:
expr=string(opPos);
break;
case OpCodes.OP_BOOL:
expr=bool(opPos);
break;
case OpCodes.OP_NUMBER:
expr=number(opPos);
break;
case OpCodes.OP_UNION:
expr=union(opPos);
break;
case OpCodes.OP_LITERAL:
expr=literal(opPos);
break;
case OpCodes.OP_VARIABLE:
expr=variable(opPos);
break;
case OpCodes.OP_GROUP:
expr=group(opPos);
break;
case OpCodes.OP_NUMBERLIT:
expr=numberlit(opPos);
break;
case OpCodes.OP_ARGUMENT:
expr=arg(opPos);
break;
case OpCodes.OP_EXTFUNCTION:
expr=compileExtension(opPos);
break;
case OpCodes.OP_FUNCTION:
expr=compileFunction(opPos);
break;
case OpCodes.OP_LOCATIONPATH:
expr=locationPath(opPos);
break;
case OpCodes.OP_PREDICATE:
expr=null;
break;
case OpCodes.OP_MATCHPATTERN:
expr=matchPattern(opPos + 2);
break;
case OpCodes.OP_LOCATIONPATHPATTERN:
expr=locationPathPattern(opPos);
break;
case OpCodes.OP_QUO:
error(XPATHErrorResources.ER_UNKNOWN_OPCODE,new Object[]{"quo"});
break;
default :
error(XPATHErrorResources.ER_UNKNOWN_OPCODE,new Object[]{Integer.toString(getOp(opPos))});
}
return expr;
}

public static void replaceValue(ExampleSet exampleSet,Attribute attribute,String oldValue,String newValue){
  if (!attribute.isNominal()) {
    throw new RuntimeException("Example-Tools: replaceValue is only supported for nominal attributes.");
  }
  NominalMapping mapping=attribute.getMapping();
  if (oldValue.equals("?")) {
    for (    Example example : exampleSet) {
      if (Double.isNaN(example.getValue(attribute))) {
        example.setValue(attribute,mapping.mapString(newValue));
      }
    }
  }
 else {
    int oldIndex=mapping.getIndex(oldValue);
    if (oldIndex < 0) {
      throw new RuntimeException("Example-Tools: replaceValue cannot be performed since old value was not defined in the attribute.");
    }
    if (newValue.equals("?")) {
      for (      Example example : exampleSet) {
        int index=mapping.getIndex(example.getValueAsString(attribute));
        if (index == oldIndex) {
          example.setValue(attribute,Double.NaN);
        }
      }
      return;
    }
    int newIndex=mapping.getIndex(newValue);
    if (newIndex >= 0) {
      for (      Example example : exampleSet) {
        int index=mapping.getIndex(example.getValueAsString(attribute));
        if (index == oldIndex) {
          example.setValue(attribute,newIndex);
        }
      }
    }
 else {
      mapping.setMapping(newValue,oldIndex);
    }
  }
}

protected void encode(ByteSequencesWriter writer,ByteArrayDataOutput output,byte[] buffer,BytesRef spare,BytesRef payload,Set<BytesRef> contexts,long weight) throws IOException {
  int requiredLength=spare.length + 8 + ((hasPayloads) ? 2 + payload.length : 0);
  if (hasContexts) {
    for (    BytesRef ctx : contexts) {
      requiredLength+=2 + ctx.length;
    }
    requiredLength+=2;
  }
  if (requiredLength >= buffer.length) {
    buffer=ArrayUtil.grow(buffer,requiredLength);
  }
  output.reset(buffer);
  output.writeBytes(spare.bytes,spare.offset,spare.length);
  if (hasContexts) {
    for (    BytesRef ctx : contexts) {
      output.writeBytes(ctx.bytes,ctx.offset,ctx.length);
      output.writeShort((short)ctx.length);
    }
    output.writeShort((short)contexts.size());
  }
  if (hasPayloads) {
    output.writeBytes(payload.bytes,payload.offset,payload.length);
    output.writeShort((short)payload.length);
  }
  output.writeLong(weight);
  writer.write(buffer,0,output.getPosition());
}

public void printEntryDetails(Writer w){
  int linesadded=-1;
  String title;
  try {
    HardcopyWriter ww=(HardcopyWriter)w;
    int textSpace=ww.getCharactersPerLine() - indentWidth - 1;
    title="   ID:                ";
    if ((textSpaceWithIcon != 0) && (linesadded < blanks)) {
      linesadded=writeWrappedComment(w,_id,title,textSpaceWithIcon) + linesadded;
    }
 else {
      linesadded=writeWrappedComment(w,_id,title,textSpace) + linesadded;
    }
    title="   Filename:          ";
    if ((textSpaceWithIcon != 0) && (linesadded < blanks)) {
      linesadded=writeWrappedComment(w,_fileName != null ? _fileName : "<null>",title,textSpaceWithIcon) + linesadded;
    }
 else {
      linesadded=writeWrappedComment(w,_fileName != null ? _fileName : "<null>",title,textSpace) + linesadded;
    }
    if (!(_roadName.isEmpty())) {
      title="   Road name:         ";
      if ((textSpaceWithIcon != 0) && (linesadded < blanks)) {
        linesadded=writeWrappedComment(w,_roadName,title,textSpaceWithIcon) + linesadded;
      }
 else {
        linesadded=writeWrappedComment(w,_roadName,title,textSpace) + linesadded;
      }
    }
    if (!(_roadNumber.isEmpty())) {
      title="   Road number:       ";
      if ((textSpaceWithIcon != 0) && (linesadded < blanks)) {
        linesadded=writeWrappedComment(w,_roadNumber,title,textSpaceWithIcon) + linesadded;
      }
 else {
        linesadded=writeWrappedComment(w,_roadNumber,title,textSpace) + linesadded;
      }
    }
    if (!(_mfg.isEmpty())) {
      title="   Manufacturer:      ";
      if ((textSpaceWithIcon != 0) && (linesadded < blanks)) {
        linesadded=writeWrappedComment(w,_mfg,title,textSpaceWithIcon) + linesadded;
      }
 else {
        linesadded=writeWrappedComment(w,_mfg,title,textSpace) + linesadded;
      }
    }
    if (!(_owner.isEmpty())) {
      title="   Owner:             ";
      if ((textSpaceWithIcon != 0) && (linesadded < blanks)) {
        linesadded=writeWrappedComment(w,_owner,title,textSpaceWithIcon) + linesadded;
      }
 else {
        linesadded=writeWrappedComment(w,_owner,title,textSpace) + linesadded;
      }
    }
    if (!(_model.isEmpty())) {
      title="   Model:             ";
      if ((textSpaceWithIcon != 0) && (linesadded < blanks)) {
        linesadded=writeWrappedComment(w,_model,title,textSpaceWithIcon) + linesadded;
      }
 else {
        linesadded=writeWrappedComment(w,_model,title,textSpace) + linesadded;
      }
    }
    if (!(_dccAddress.isEmpty())) {
      w.write(newLine,0,1);
      String s="   DCC Address:       " + _dccAddress;
      w.write(s,0,s.length());
      linesadded++;
    }
    if (!(_comment.isEmpty())) {
      for (int i=0; i < (blanks - linesadded); i++) {
        w.write(newLine,0,1);
      }
      if (blanks != 0) {
        blanks=0;
      }
      title="   Comment:           ";
      linesadded=writeWrappedComment(w,_comment,title,textSpace) + linesadded;
    }
    if (!(_decoderModel.isEmpty())) {
      title="   Decoder Model:     ";
      if ((textSpaceWithIcon != 0) && (linesadded < blanks)) {
        linesadded=writeWrappedComment(w,_decoderModel,title,textSpaceWithIcon) + linesadded;
      }
 else {
        linesadded=writeWrappedComment(w,_decoderModel,title,textSpace) + linesadded;
      }
    }
    if (!(_decoderFamily.isEmpty())) {
      title="   Decoder Family:    ";
      if ((textSpaceWithIcon != 0) && (linesadded < blanks)) {
        linesadded=writeWrappedComment(w,_decoderFamily,title,textSpaceWithIcon) + linesadded;
      }
 else {
        linesadded=writeWrappedComment(w,_decoderFamily,title,textSpace) + linesadded;
      }
    }
    if (!(_decoderComment.isEmpty())) {
      for (int i=0; i < (blanks - linesadded); i++) {
        w.write(newLine,0,1);
      }
      if (blanks != 0) {
        blanks=0;
      }
      title="   Decoder Comment:   ";
      linesadded=writeWrappedComment(w,_decoderComment,title,textSpace) + linesadded;
    }
    w.write(newLine,0,1);
    for (int i=-1; i < (blanks - linesadded); i++) {
      w.write(newLine,0,1);
    }
  }
 catch (  IOException e) {
    log.error("Error printing RosterEntry: " + e);
  }
}

private int skipQuotedString(String str,int pos){
  int n=str.length();
  pos+=1;
  while (pos < n) {
    if (str.charAt(pos) == '\'') {
      if (pos + 1 < n && str.charAt(pos + 1) == '\'') {
        pos+=2;
        continue;
      }
      return pos + 1;
    }
    pos+=1;
  }
  return n;
}

private static void addNewSegment(LinkedList<DNASegment> segments,Event event,HashMap<Integer,DNAStrand> strands,int firstJulianDay,int minStart,int minMinutes){
  if (event.startDay > event.endDay) {
    Log.wtf(TAG,"Event starts after it ends: " + event.toString());
  }
  if (event.startDay != event.endDay) {
    Event lhs=new Event();
    lhs.color=event.color;
    lhs.startDay=event.startDay;
    lhs.startTime=event.startTime;
    lhs.endDay=lhs.startDay;
    lhs.endTime=DAY_IN_MINUTES - 1;
    while (lhs.startDay != event.endDay) {
      addNewSegment(segments,lhs,strands,firstJulianDay,minStart,minMinutes);
      lhs.startDay++;
      lhs.endDay=lhs.startDay;
      lhs.startTime=0;
      minStart=0;
    }
    lhs.endTime=event.endTime;
    event=lhs;
  }
  DNASegment segment=new DNASegment();
  int dayOffset=(event.startDay - firstJulianDay) * DAY_IN_MINUTES;
  int endOfDay=dayOffset + DAY_IN_MINUTES - 1;
  segment.startMinute=Math.max(dayOffset + event.startTime,minStart);
  int minEnd=Math.min(segment.startMinute + minMinutes,endOfDay);
  segment.endMinute=Math.max(dayOffset + event.endTime,minEnd);
  if (segment.endMinute > endOfDay) {
    segment.endMinute=endOfDay;
  }
  segment.color=event.color;
  segment.day=event.startDay;
  segments.add(segment);
  DNAStrand strand=getOrCreateStrand(strands,segment.color);
  strand.count++;
}

private DatagramPacket[] encodeMulticastRequest(final MulticastRequest req) throws IOException {
  final Discovery disco=getDiscovery(multicastRequestConstraints.chooseProtocolVersion());
  final List packets=new ArrayList();
  EncodeIterator ei=disco.encodeMulticastRequest(req,multicastRequestConstraints.getMulticastMaxPacketSize(DEFAULT_MAX_PACKET_SIZE),multicastRequestConstraints.getUnfulfilledConstraints());
  while (ei.hasNext()) {
    try {
      packets.addAll(Arrays.asList(ei.next()));
    }
 catch (    Exception e) {
      logger.log((e instanceof UnsupportedConstraintException) ? Levels.HANDLED : Level.INFO,"exception encoding multicast request",e);
    }
  }
  if (packets.isEmpty()) {
    throw new DiscoveryProtocolException("no encoded requests");
  }
  return (DatagramPacket[])packets.toArray(new DatagramPacket[packets.size()]);
}

public FeatureTypeConstraintModel(FeatureTypeConstraintModelUpdateInterface parent){
  this.parentObj=parent;
  columnList.add(Localisation.getString(FieldConfigBase.class,"FeatureTypeConstraintModel.name"));
  columnList.add(Localisation.getString(FieldConfigBase.class,"FeatureTypeConstraintModel.filter"));
}

protected void deleteDb(String name){
  deleteDb(getBaseDir(),name);
}

public void removeAtRange(int index,int size){
  final int end=Math.min(mSize,index + size);
  for (int i=index; i < end; i++) {
    removeAt(i);
  }
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getFilteredPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / mFriction);
itemDimension=getFooterSize();
break;
case GOOGLE_STYLE:
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / mFriction);
itemDimension=getGoogleStyleViewSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / mFriction);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case GOOGLE_STYLE:
mGoogleStyleViewLayout.onPull(scale);
mGoogleStyleProgressLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if (mState == State.PULL_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

public StatMonitorHandler(){
}

public void addElements(final double[] values){
  final double[] tempArray=new double[numElements + values.length + 1];
  System.arraycopy(internalArray,startIndex,tempArray,0,numElements);
  System.arraycopy(values,0,tempArray,numElements,values.length);
  internalArray=tempArray;
  startIndex=0;
  numElements+=values.length;
}

public void registerUnregisteredNamespaces(){
  for (int i=0; i < m_unregisteredExtensions.size(); i++) {
    String ns=(String)m_unregisteredExtensions.get(i);
    ExtensionNamespaceSupport extNsSpt=defineJavaNamespace(ns);
    if (extNsSpt != null)     m_extensions.add(extNsSpt);
  }
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> result=new Vector<Option>();
  result.addElement(new Option("\tThe number of attributes to randomly select.\n" + "\tIf < 1 then percentage, >= 1 absolute number.\n" + "\t(default: 0.5)","N",1,"-N <double>"));
  result.addElement(new Option("\tInvert selection - i.e. randomly remove rather than select.","V",0,"-V"));
  result.addElement(new Option("\tThe seed value.\n" + "\t(default: 1)","S",1,"-S <int>"));
  result.addAll(Collections.list(super.listOptions()));
  return result.elements();
}

public Map<URI,List<URI>> addSourceVolumeSnapshots(){
  List<URI> blockSnapshots=Lists.newArrayList();
  Map<URI,List<URI>> snapshotsMap=new HashMap<>();
  for (  URI volumeId : uris(volumeIds)) {
    List<URI> snapshots=getSnapshots(volumeId);
    blockSnapshots.addAll(snapshots);
    snapshotsMap.put(volumeId,snapshots);
  }
  if (!blockSnapshots.isEmpty()) {
    BlockStorageUtils.addVolumesToConsistencyGroup(consistencyGroup,blockSnapshots);
  }
  return snapshotsMap;
}

public static void logInitiator(Initiator initiator,NetworkLite network){
  String networkName=(network != null ? network.getLabel() : "<unknown network>");
  _log.info(String.format("Attempting to assign port(s) to initiator: %s (%s) in network: %s",initiator.getInitiatorPort(),initiator.getHostName(),networkName));
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public static final Criterion and(Criterion one,Criterion two){
  final List<Criterion> criteria=new ArrayList<Criterion>();
  criteria.add(one);
  criteria.add(two);
  return new ConjunctionCriterion(Conjunction.AND,criteria);
}

public CCMenuItem(Object rec,String cb){
  targetCallback=rec;
  selector=cb;
  setAnchorPoint(CGPoint.make(0.5f,0.5f));
  invocation=null;
  if (rec != null && cb != null) {
    Class<?> cls=rec.getClass();
    try {
      invocation=cls.getMethod(cb,Object.class);
    }
 catch (    SecurityException e) {
      e.printStackTrace();
    }
catch (    NoSuchMethodException e) {
      e.printStackTrace();
    }
  }
  isEnabled_=true;
  isSelected_=false;
}

public void addChildElement(XMLElement child,boolean addAfterNewLine) throws Exception {
  addChildElementAt(child,-1,addAfterNewLine);
}

public void editText(VisualItem item,String attribute,Rectangle r){
  if (m_editing) {
    stopEditing();
  }
  String txt=item.getString(attribute);
  m_editItem=item;
  m_editAttribute=attribute;
  Color tc=ColorLib.getColor(item.getTextColor());
  Color fc=ColorLib.getColor(item.getFillColor());
  m_editor.setForeground(tc);
  m_editor.setBackground(fc);
  editText(txt,r);
}

public static Column column(final String id,final String title,final int width,final int doublePrecision){
  return new Column(id,title,Math.max(width,title.length()),doublePrecision);
}

public void printCount(String kind,int count){
  if (count != 0) {
    String key;
    if (count == 1)     key="count." + kind;
 else     key="count." + kind + ".plural";
    log.printLines(WriterKind.ERROR,key,String.valueOf(count));
    log.flush(Log.WriterKind.ERROR);
  }
}

public static byte[] decode(String str,int flags){
  return decode(str.getBytes(),flags);
}

public static float screenToScroll(float x,float warpSize){
  if (x <= 0)   return 0;
  if (x >= warpSize)   return x + warpSize;
  return (float)Math.sqrt(x * warpSize) * 2;
}

protected static final String addEscapes(String str){
  StringBuffer retval=new StringBuffer();
  char ch;
  for (int i=0; i < str.length(); i++) {
switch (str.charAt(i)) {
case 0:
      continue;
case '\b':
    retval.append("\\b");
  continue;
case '\t':
retval.append("\\t");
continue;
case '\n':
retval.append("\\n");
continue;
case '\f':
retval.append("\\f");
continue;
case '\r':
retval.append("\\r");
continue;
case '\"':
retval.append("\\\"");
continue;
case '\'':
retval.append("\\\'");
continue;
case '\\':
retval.append("\\\\");
continue;
default :
if ((ch=str.charAt(i)) < 0x20 || ch > 0x7e) {
String s="0000" + Integer.toString(ch,16);
retval.append("\\u" + s.substring(s.length() - 4,s.length()));
}
 else {
retval.append(ch);
}
continue;
}
}
return retval.toString();
}

public synchronized void recordStatistics(QueryStatistic statistic){
  queryStatistics.add(statistic);
}

protected double[] randomSubRange(double boundStart,double boundLen){
  if (boundLen >= 3 && usually()) {
    int intBoundStart=(int)Math.ceil(boundStart);
    int intBoundEnd=(int)(boundStart + boundLen);
    int intBoundLen=intBoundEnd - intBoundStart;
    int newLen=(int)randomGaussianMeanMax(intBoundLen / 16.0,intBoundLen);
    int newStart=intBoundStart + randomInt(intBoundLen - newLen);
    return new double[]{newStart,newLen};
  }
 else {
    double newLen=randomGaussianMeanMax(boundLen / 16,boundLen);
    double newStart=boundStart + (boundLen - newLen == 0 ? 0 : (randomDouble() % (boundLen - newLen)));
    return new double[]{newStart,newLen};
  }
}

private DateTimeZone generateTimeZone(String timeZoneId,DateTimeZone systemTimeZone){
  if (timeZoneId == null) {
    return systemTimeZone;
  }
  try {
    return DateTimeZone.forID(timeZoneId);
  }
 catch (  IllegalArgumentException ignored) {
    LOG.debug(INVALID_TIME_ZONE.logFormat(timeZoneId));
    throw new BadApiRequestException(INVALID_TIME_ZONE.format(timeZoneId));
  }
}

protected String toString(String[][] strings){
  int rows=strings.length;
  int columns=strings.length <= 0 ? 0 : strings[0].length;
  StringBuffer total=new StringBuffer();
  StringBuffer s=new StringBuffer();
  for (int row=0; row < rows; row++) {
    s.setLength(0);
    for (int column=0; column < columns; column++) {
      s.append(strings[row][column]);
      if (column < columns - 1)       s.append(columnSeparator);
    }
    total.append(s);
    if (row < rows - 1)     total.append(rowSeparator);
  }
  return total.toString();
}

public void checkWarehouse(boolean sbf){
  if (warehouse == null) {
    logger.fine("need to create warehouse");
    warehouse=new VPFAutoFeatureGraphicWarehouse();
  }
}

public double maxDist(SpatialComparable mbr1,SpatialComparable mbr2){
  final int dim1=mbr1.getDimensionality(), dim2=mbr2.getDimensionality();
  final int mindim=(dim1 < dim2) ? dim1 : dim2;
  double agg=0.;
  for (int d=0; d < mindim; d++) {
    double d1=mbr1.getMax(d) - mbr2.getMin(d);
    double d2=mbr2.getMax(d) - mbr1.getMin(d);
    double delta=d1 > d2 ? d1 : d2;
    agg+=delta * delta;
  }
  for (int d=mindim; d < dim1; d++) {
    double d1=Math.abs(mbr1.getMin(d)), d2=Math.abs(mbr1.getMax(d));
    double delta=d1 > d2 ? d1 : d2;
    agg+=delta * delta;
  }
  for (int d=mindim; d < dim2; d++) {
    double d1=Math.abs(mbr2.getMin(d)), d2=Math.abs(mbr2.getMax(d));
    double delta=d1 > d2 ? d1 : d2;
    agg+=delta * delta;
  }
  return Math.sqrt(agg);
}

public static void createLesson(@NotNull final Lesson lesson,@NotNull final VirtualFile courseDir,@NotNull final File resourceRoot,@NotNull final Project project) throws IOException {
  String lessonDirName=EduNames.LESSON + Integer.toString(lesson.getIndex());
  VirtualFile lessonDir=courseDir.createChildDirectory(project,lessonDirName);
  final List<Task> taskList=lesson.getTaskList();
  for (int i=1; i <= taskList.size(); i++) {
    Task task=taskList.get(i - 1);
    task.setIndex(i);
    createTask(task,lessonDir,new File(resourceRoot,lessonDir.getName()),project);
  }
}

protected void rehash(){
  int oldCapacity=table.length;
  CacheEntry oldTable[]=table;
  int newCapacity=oldCapacity * 2 + 1;
  CacheEntry newTable[]=new CacheEntry[newCapacity];
  threshold=(int)(newCapacity * loadFactor);
  table=newTable;
  for (int i=oldCapacity; i-- > 0; ) {
    for (CacheEntry old=oldTable[i]; old != null; ) {
      CacheEntry e=old;
      old=old.next;
      if (e.check() != null) {
        int index=(e.hash & 0x7FFFFFFF) % newCapacity;
        e.next=newTable[index];
        newTable[index]=e;
      }
 else       count--;
    }
  }
}

public void append(byte[] utf8,int start,int len){
  setCapacity(length + len,true);
  System.arraycopy(utf8,start,bytes,length,len);
  length+=len;
}

public static String makeLogTag(Class cls){
  return makeLogTag(cls.getSimpleName());
}

private void handleError(GCPStatsDataHolder statsData,Throwable e){
  logSevere(e);
  statsData.error=e;
  statsData.stage=StatsCollectionStage.ERROR;
  handleStatsRequest(statsData);
}

public java.lang.StringBuilder insert(int offset,double d){
  return insert(offset,Double.toString(d));
}

public Object castToType(int t,XPathContext support) throws javax.xml.transform.TransformerException {
  Object result;
switch (t) {
case CLASS_STRING:
    result=str();
  break;
case CLASS_NUMBER:
result=new Double(num());
break;
case CLASS_NODESET:
result=iter();
break;
case CLASS_BOOLEAN:
result=new Boolean(bool());
break;
case CLASS_UNKNOWN:
result=m_obj;
break;
default :
error(XPATHErrorResources.ER_CANT_CONVERT_TO_TYPE,new Object[]{getTypeString(),Integer.toString(t)});
result=null;
}
return result;
}

public static boolean areMsCapiStoresSupported(){
  return Security.getProvider(MS_CAPI.jce()) != null;
}

public boolean isCritical(){
  return true;
}

public boolean isPassthroughSupported(String mimeType){
  return audioCapabilities != null && audioCapabilities.supportsEncoding(getEncodingForMimeType(mimeType));
}

String internalsprintf(final Object s){
  final String s2;
  if (conversionCharacter == 's' || conversionCharacter == 'S') {
    s2=printSFormat(s.toString());
  }
 else {
    throw new IllegalArgumentException("Cannot format a String with a format using" + " a " + conversionCharacter + " conversion character.");
  }
  return s2;
}

public T firstItem(){
  if (mDataList == null || mDataList.size() == 0) {
    return null;
  }
  return mDataList.get(0);
}

public void addRequestProperty(String field,String newValue){
  checkNotConnected();
  if (field == null) {
    throw new NullPointerException("field == null");
  }
}

public double doOperation() throws OperatorFailedException {
  double[] mean=sccs.getMode();
  double[] currentValue=parameter.getParameterValues();
  double[] newValue=new double[dim];
  Set<Integer> updateSet=new HashSet<Integer>();
  if (setSizeMean != -1.0) {
    final int listLength=Poisson.nextPoisson(setSizeMean);
    while (updateSet.size() < listLength) {
      int newInt=MathUtils.nextInt(parameter.getDimension());
      if (!updateSet.contains(newInt)) {
        updateSet.add(newInt);
      }
    }
  }
 else {
    for (int i=0; i < dim; ++i) {
      updateSet.add(i);
    }
  }
  double logq=0;
  for (  Integer i : updateSet) {
    newValue[i]=mean[i] + scaleFactor * MathUtils.nextGaussian();
    if (UPDATE_ALL) {
      parameter.setParameterValueQuietly(i,newValue[i]);
    }
 else {
      parameter.setParameterValue(i,newValue[i]);
    }
    logq+=(NormalDistribution.logPdf(currentValue[i],mean[i],scaleFactor) - NormalDistribution.logPdf(newValue[i],mean[i],scaleFactor));
  }
  if (UPDATE_ALL) {
    parameter.setParameterValueNotifyChangedAll(0,parameter.getParameterValue(0));
  }
  return logq;
}

public Object load(URI uri) throws IOException {
  InputStreamReader src=null;
  try {
    src=new FileReader(new File(uri));
    return xstream.fromXML(src);
  }
  finally {
    if (null != src) {
      src.close();
    }
  }
}

private synchronized void sendPendingState(){
  if (!mPendingClients.isEmpty()) {
    final Message[] messages=new Message[]{SantaServiceMessages.getBeginFullStateMessage(),SantaServiceMessages.getSwitchOffMessage(mPreferences.getSwitchOff()),getTimeUpdateMessage(),SantaServiceMessages.getCastDisabledMessage(mPreferences.getCastDisabled()),SantaServiceMessages.getGamesMessage(mPreferences.getGumballDisabled(),mPreferences.getJetpackDisabled(),mPreferences.getMemoryDisabled(),mPreferences.getRocketDisabled(),mPreferences.getDancerDisabled(),mPreferences.getSnowdownDisabled()),SantaServiceMessages.getDestinationPhotoMessage(mPreferences.getDestinationPhotoDisabled()),SantaServiceMessages.getStateMessage(mState),SantaServiceMessages.getVideosMessage(mPreferences.getVideos())};
    for (int i=0; i < mPendingClients.size(); i++) {
      final Messenger messenger=mPendingClients.get(i);
      try {
        for (        Message msg : messages) {
          messenger.send(msg);
        }
        mClients.add(messenger);
      }
 catch (      RemoteException e) {
      }
      mPendingClients.remove(i);
    }
  }
}

private void fetchChunk(BulkIdParam input,List<T> results){
  List<T> items=getBulkResources(input);
  for (  T item : items) {
    results.add(item);
  }
}

public static void moveDirectoryToDirectory(File src,File destDir,boolean createDestDir) throws IOException {
  if (src == null) {
    throw new NullPointerException("Source must not be null");
  }
  if (destDir == null) {
    throw new NullPointerException("Destination directory must not be null");
  }
  if (!destDir.exists() && createDestDir) {
    destDir.mkdirs();
  }
  if (!destDir.exists()) {
    throw new FileNotFoundException("Destination directory '" + destDir + "' does not exist [createDestDir="+ createDestDir+ "]");
  }
  if (!destDir.isDirectory()) {
    throw new IOException("Destination '" + destDir + "' is not a directory");
  }
  moveDirectory(src,new File(destDir,src.getName()));
}

public Shape createCheckMark(final int x,final int y,final int w,final int h){
  double xf=w / 12.0;
  double hf=h / 12.0;
  path.reset();
  path.moveTo(x,y + 7.0 * hf);
  path.lineTo(x + 2.0 * xf,y + 7.0 * hf);
  path.lineTo(x + 4.75 * xf,y + 10.0 * hf);
  path.lineTo(x + 9.0 * xf,y);
  path.lineTo(x + 11.0 * xf,y);
  path.lineTo(x + 5.0 * xf,y + 12.0 * hf);
  path.closePath();
  return path;
}

public static ResponseData parse(String responseData){
  int index=responseData.indexOf(':');
  String mainData, extraData;
  if (-1 == index) {
    mainData=responseData;
    extraData="";
  }
 else {
    mainData=responseData.substring(0,index);
    extraData=index >= responseData.length() ? "" : responseData.substring(index + 1);
  }
  String[] fields=TextUtils.split(mainData,Pattern.quote("|"));
  if (fields.length < 6) {
    throw new IllegalArgumentException();
  }
  ResponseData data=new ResponseData();
  data.extra=extraData;
  data.responseCode=Integer.parseInt(fields[0]);
  data.nonce=Integer.parseInt(fields[1]);
  data.packageName=fields[2];
  data.versionCode=fields[3];
  data.userId=fields[4];
  data.timestamp=Long.parseLong(fields[5]);
  return data;
}

public int noOfTabs(){
  return m_curWinTab.getTabCount();
}

public void testExceptionally_exceptionalCompletionActionFailed(){
  for (  boolean createIncomplete : new boolean[]{true,false}) {
    final AtomicInteger a=new AtomicInteger(0);
    final CFException ex1=new CFException();
    final CFException ex2=new CFException();
    final CompletableFuture<Integer> f=new CompletableFuture<>();
    if (!createIncomplete)     f.completeExceptionally(ex1);
    final CompletableFuture<Integer> g=f.exceptionally(null);
    if (createIncomplete)     f.completeExceptionally(ex1);
    checkCompletedWithWrappedException(g,ex2);
    checkCompletedExceptionally(f,ex1);
    assertEquals(1,a.get());
  }
}

private static void close(Closeable closeable){
  if (closeable != null) {
    try {
      closeable.close();
    }
 catch (    IOException e) {
    }
  }
}

public static String convertTimestampToDateStringCompact(boolean useUTC,long milli){
  Date date=new Date(milli);
  SimpleDateFormat sourceFormat=new SimpleDateFormat("dd-MM-yyyy");
  sourceFormat.setTimeZone(useUTC ? TimeZone.getTimeZone("UTC") : TimeZone.getDefault());
  return sourceFormat.format(date);
}

protected synchronized void superposeBitSet(FixedBitSet incomingBitSet,double weight){
  weight=(int)Math.round(weight * Math.pow(10,BINARY_VECTOR_DECIMAL_PLACES));
  if (weight == 0)   return;
  totalNumberOfVotes.set(totalNumberOfVotes.get() + (int)weight);
  int logFloorOfWeight=(int)(Math.floor(Math.log(weight) / Math.log(2)));
  if (logFloorOfWeight < votingRecord.size() - 1) {
    while (logFloorOfWeight > 0) {
      superposeBitSetFromRowFloor(incomingBitSet,logFloorOfWeight);
      weight=weight - (int)Math.pow(2,logFloorOfWeight);
      logFloorOfWeight=(int)(Math.floor(Math.log(weight) / Math.log(2)));
    }
  }
  for (int x=0; x < weight; x++)   superposeBitSetFromRowFloor(incomingBitSet,0);
}

public final double tanHalfAngle(){
  return Math.tan(0.5 * this.radians);
}

abstract Future<AsynchronousSocketChannel> implAccept(Object attachment,CompletionHandler<AsynchronousSocketChannel,Object> handler);

public void parseSignaturesFile(URL url) throws IOException, ParseException {
  parseSignaturesFile(url.openStream(),url.toString());
}

public void addFlare(Flare flare){
  flares.addElement(flare);
  processGameEvent(new GameBoardChangeEvent(this));
}

public static void objectStringNonRecursive(@Unretained Object obj,StringBuilder sb){
  if (obj instanceof Object[]) {
    sb.append('(');
    boolean first=true;
    for (    Object o : (Object[])obj) {
      if (!first) {
        sb.append(',');
        sb.append(o);
      }
 else {
        first=false;
        objectStringWithBytes(o,sb);
      }
    }
    sb.append(')');
  }
 else {
    objectStringWithBytes(obj,sb);
  }
}

public void readOSM(File file){
  if (file.exists()) {
    streetLayer.openOSM(file);
  }
 else {
    LOG.info("osm.mapdb doesn't exist in graph folder. This means that street names won't be shown");
  }
}

public void startElement(StylesheetHandler handler,String uri,String localName,String rawName,Attributes attributes) throws SAXException {
  String msg="";
  if (!(handler.getElemTemplateElement() instanceof Stylesheet)) {
    msg="func:function element must be top level.";
    handler.error(msg,new SAXException(msg));
  }
  super.startElement(handler,uri,localName,rawName,attributes);
  String val=attributes.getValue("name");
  int indexOfColon=val.indexOf(":");
  if (indexOfColon > 0) {
  }
 else {
    msg="func:function name must have namespace";
    handler.error(msg,new SAXException(msg));
  }
}

public void write(byte[] buffer,int offset,int length) throws IOException {
  _file.write(buffer,offset,length);
}

public static boolean canInteract(Role issuer,Role target){
  if (issuer.getGuild() != target.getGuild())   throw new IllegalArgumentException("The 2 Roles are not from same Guild!");
  return target.getPosition() < issuer.getPosition();
}

public Webster() throws BindException {
  this.port=Integer.getInteger(WEBSTER_PORT,0);
  initialize();
}

public boolean willThrowExceptionIfKeyWasNotFound(){
  return throwex;
}

public void testComputeLocationWhenUberwarPackaging() throws Exception {
  Deployable deployableElement=new Deployable();
  deployableElement.setGroupId("projectGroupId");
  deployableElement.setArtifactId("projectArtifactId");
  deployableElement.setType("war");
  String location=deployableElement.computeLocation(createDefaultProject("uberwar",null));
  assertTrue(location.endsWith("projectFinalName.war"));
}

public Response createResponse(String responseString) throws java.text.ParseException {
  if (responseString == null)   return new SIPResponse();
  StringMsgParser smp=new StringMsgParser();
  SIPMessage sipMessage=smp.parseSIPMessage(responseString.getBytes(),true,false,null);
  if (!(sipMessage instanceof SIPResponse))   throw new ParseException(responseString,0);
  return (SIPResponse)sipMessage;
}

private ODEStateAndDerivative state(double t){
  return new ODEStateAndDerivative(t,new double[0],new double[0]);
}

public static Class<?> findCommonElementType(Collection collection){
  if (isEmpty(collection)) {
    return null;
  }
  Class<?> candidate=null;
  for (  Object val : collection) {
    if (val != null) {
      if (candidate == null) {
        candidate=val.getClass();
      }
 else       if (candidate != val.getClass()) {
        return null;
      }
    }
  }
  return candidate;
}

private static void decodeHanziSegment(BitSource bits,StringBuilder result,int count) throws FormatException {
  if (count * 13 > bits.available()) {
    throw FormatException.getFormatInstance();
  }
  byte[] buffer=new byte[2 * count];
  int offset=0;
  while (count > 0) {
    int twoBytes=bits.readBits(13);
    int assembledTwoBytes=((twoBytes / 0x060) << 8) | (twoBytes % 0x060);
    if (assembledTwoBytes < 0x003BF) {
      assembledTwoBytes+=0x0A1A1;
    }
 else {
      assembledTwoBytes+=0x0A6A1;
    }
    buffer[offset]=(byte)((assembledTwoBytes >> 8) & 0xFF);
    buffer[offset + 1]=(byte)(assembledTwoBytes & 0xFF);
    offset+=2;
    count--;
  }
  try {
    result.append(new String(buffer,StringUtils.GB2312));
  }
 catch (  UnsupportedEncodingException uee) {
    throw FormatException.getFormatInstance();
  }
}

protected void initPingIntervalMilli(){
  String pingIntervalMilliParam=getInitParameter("pingIntervalMilli");
  setPingIntervalMilli((pingIntervalMilliParam == null) ? DEFAULT_PING_INTERVAL_MILLI : Integer.parseInt(pingIntervalMilliParam));
  if (isDebug()) {
    log("pingIntervalMilli: " + getPingIntervalMilli());
  }
}

public boolean ask(final String queryStr,String externalQueryId) throws Exception {
  final RepositoryConnection cxn=cxn();
  UUID queryId=null;
  try {
    final BooleanQuery query=(BooleanQuery)cxn.prepareBooleanQuery(QueryLanguage.SPARQL,queryStr);
    setMaxQueryTime(query);
    if (query instanceof BigdataSailBooleanQuery && cxn instanceof BigdataSailRepositoryConnection) {
      final BigdataSailBooleanQuery bdtq=(BigdataSailBooleanQuery)query;
      queryId=setupQuery((BigdataSailRepositoryConnection)cxn,bdtq.getASTContainer(),QueryType.ASK,externalQueryId);
    }
    final boolean result=query.evaluate();
    return result;
  }
  finally {
    if (queryId != null) {
      finalizeQuery(queryId);
    }
  }
}

@SuppressWarnings("unchecked") private static int find(Object[] arr,net.sourceforge.retroweaver.harmony.runtime.java.lang.Comparable val,int bnd,int l,int r){
  int m=l;
  int d=1;
  while (m <= r) {
    if (val.compareTo(arr[m]) > bnd) {
      l=m + 1;
    }
 else {
      r=m - 1;
      break;
    }
    m+=d;
    d<<=1;
  }
  while (l <= r) {
    m=(l + r) >>> 1;
    if (val.compareTo(arr[m]) > bnd) {
      l=m + 1;
    }
 else {
      r=m - 1;
    }
  }
  return l - 1;
}

ConfigurationError(String msg,Exception x){
  super(msg);
  this.exception=x;
}

public static String asHex(byte[] bytes,String separator){
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < bytes.length; i++) {
    String code=Integer.toHexString(bytes[i] & 0xFF);
    if ((bytes[i] & 0xFF) < 16) {
      sb.append('0');
    }
    sb.append(code);
    if (separator != null && i < bytes.length - 1) {
      sb.append(separator);
    }
  }
  return sb.toString();
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String badString;
  doc=(Document)load("staff",false);
  elementList=doc.getElementsByTagName("address");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
{
    boolean success=false;
    try {
      badString=child.substringData(40,3);
    }
 catch (    DOMException ex) {
      success=(ex.code == DOMException.INDEX_SIZE_ERR);
    }
    assertTrue("throw_INDEX_SIZE_ERR",success);
  }
}

public String toString(){
  return String.valueOf(val);
}

private static void CallStaticVoidMethodV(JNIEnvironment env,int classJREF,int methodID,Address argAddress) throws Exception {
  if (traceJNI)   VM.sysWrite("JNI called: CallStaticVoidMethodV  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    JNIHelpers.invokeWithVarArg(methodID,argAddress,TypeReference.Void);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
  }
}

public static Connection createConnection(boolean autoCommit,int trxLevel){
  Connection conn=s_cc.getConnection(autoCommit,trxLevel);
  if (CLogMgt.isLevelFinest()) {
  }
  try {
    if (conn != null && conn.getAutoCommit() != autoCommit) {
      throw new IllegalStateException("Failed to set the requested auto commit mode on connection. [autoCommit=" + autoCommit + "]");
    }
  }
 catch (  SQLException e) {
  }
  return conn;
}

private boolean updateStatementData(StatementData sdata,Matcher matcher,String toRegex){
  if (transformTables)   return true;
  if (matcher == null)   return true;
  String schema=sdata.getDefaultSchema();
  if (schema == null)   return true;
  matcher.reset(schema);
  if (matcher.matches()) {
    String oldSchema=schema;
    sdata.setDefaultSchema(matcher.replaceAll(toRegex));
    if (logger.isDebugEnabled())     logger.debug("Filtered event schema name: old=" + oldSchema + " new="+ sdata.getDefaultSchema());
    return true;
  }
  return false;
}

public void testShiftLeft1(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int number=0;
  byte rBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.shiftLeft(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public void stopIfRequired(){
  if (System.currentTimeMillis() > stopAt) {
    throw new IllegalStateException();
  }
}

private void linkAccount(final String principalId,final NameID nameId) throws SAML2MetaException, AuthenticationException {
  final String spEntityId=metaManager.getEntityByMetaAlias(metaAlias);
  try {
    NameIDInfo info=new NameIDInfo(spEntityId,entityName,nameId,SAML2Constants.SP_ROLE,false);
    DEBUG.message("SAML2 :: Local User {} Linked to Federation Account - {}",principalId,nameId.getValue());
    if (shouldPersistNameID(spEntityId)) {
      AccountUtils.setAccountFederation(info,principalId);
    }
    principal=new SAML2Principal(principalId);
  }
 catch (  SAML2Exception e) {
    throw new AuthenticationException(BUNDLE_NAME,"localLinkError",new Object[0]);
  }
}

private void enableActions(){
  restoreAction.setEnabled(frame.isMaximum() || frame.isIcon());
  maximizeAction.setEnabled((frame.isMaximizable() && !frame.isMaximum() && !frame.isIcon()) || (frame.isMaximizable() && frame.isIcon()));
  iconifyAction.setEnabled(frame.isIconifiable() && !frame.isIcon());
  closeAction.setEnabled(frame.isClosable());
  sizeAction.setEnabled(false);
  moveAction.setEnabled(false);
}

private List<String> addRules(int filterId,List<String> rules,boolean useCosmetics){
  InputStream inputStream=null;
  InputStreamReader inputStreamReader=null;
  BufferedReader reader=null;
  try {
    String fileName=getOrCreateFilterFile(filterId);
    inputStream=context.openFileInput(fileName);
    inputStreamReader=new InputStreamReader(inputStream);
    reader=new BufferedReader(inputStreamReader);
    String line=reader.readLine();
    while (line != null) {
      if (useCosmetics || !FilterRule.isCosmeticRule(line)) {
        rules.add(line);
      }
      line=reader.readLine();
    }
    return rules;
  }
 catch (  Exception ex) {
    log.error("Cannot select rules for filter {}",filterId,ex);
    throw new RuntimeException("Cannot select rules for filter " + filterId,ex);
  }
 finally {
    IOUtils.closeQuietly(inputStream);
    IOUtils.closeQuietly(inputStreamReader);
    IOUtils.closeQuietly(reader);
  }
}

public static String convertToHexString(byte[] bytes){
  int size=bytes.length;
  StringBuffer buffer=new StringBuffer(size * 2);
  for (int i=0; i < size; i++) {
    int x=bytes[i];
    if (x < 0)     x+=256;
    String tmp=Integer.toHexString(x);
    if (tmp.length() == 1)     buffer.append("0");
    buffer.append(tmp);
  }
  return buffer.toString();
}

public OrderedTask(String identifier,Step... steps){
  this(identifier,Arrays.asList(steps));
}

public void randomize(List<CellIndex> cellIndices){
  Random rand=new Random();
  int range=getUpperBound() - getLowerBound();
  for (  CellIndex cellIndex : cellIndices) {
    int row=cellIndex.row;
    int col=cellIndex.col;
    double value=(rand.nextDouble() * range) + getLowerBound();
    setLogicalValue(row,col,value,false);
  }
  fireTableDataChanged();
}

private void readResponseHeaders(State state,InnerState innerState,HttpResponse response) throws StopRequest {
  Header header=response.getFirstHeader("Content-Disposition");
  if (header != null) {
    innerState.mHeaderContentDisposition=header.getValue();
  }
  header=response.getFirstHeader("Content-Location");
  if (header != null) {
    innerState.mHeaderContentLocation=header.getValue();
  }
  header=response.getFirstHeader("ETag");
  if (header != null) {
    innerState.mHeaderETag=header.getValue();
  }
  String headerTransferEncoding=null;
  header=response.getFirstHeader("Transfer-Encoding");
  if (header != null) {
    headerTransferEncoding=header.getValue();
  }
  String headerContentType=null;
  header=response.getFirstHeader("Content-Type");
  if (header != null) {
    headerContentType=header.getValue();
    if (!headerContentType.equals("application/vnd.android.obb")) {
      throw new StopRequest(DownloaderService.STATUS_FILE_DELIVERED_INCORRECTLY,"file delivered with incorrect Mime type");
    }
  }
  if (headerTransferEncoding == null) {
    header=response.getFirstHeader("Content-Length");
    if (header != null) {
      innerState.mHeaderContentLength=header.getValue();
      long contentLength=Long.parseLong(innerState.mHeaderContentLength);
      if (contentLength != -1 && contentLength != mInfo.mTotalBytes) {
        Log.e(Constants.TAG,"Incorrect file size delivered.");
      }
    }
  }
 else {
    if (Constants.LOGVV) {
      Log.v(Constants.TAG,"ignoring content-length because of xfer-encoding");
    }
  }
  if (Constants.LOGVV) {
    Log.v(Constants.TAG,"Content-Disposition: " + innerState.mHeaderContentDisposition);
    Log.v(Constants.TAG,"Content-Length: " + innerState.mHeaderContentLength);
    Log.v(Constants.TAG,"Content-Location: " + innerState.mHeaderContentLocation);
    Log.v(Constants.TAG,"ETag: " + innerState.mHeaderETag);
    Log.v(Constants.TAG,"Transfer-Encoding: " + headerTransferEncoding);
  }
  boolean noSizeInfo=innerState.mHeaderContentLength == null && (headerTransferEncoding == null || !headerTransferEncoding.equalsIgnoreCase("chunked"));
  if (noSizeInfo) {
    throw new StopRequest(DownloaderService.STATUS_HTTP_DATA_ERROR,"can't know size of download, giving up");
  }
}

public void addAuditory(int id){
  mAuditoryFeedback.add(id);
}

public String wrap(String path){
  return uriPrefix + path;
}

public static void constantAttributes(SimpleMethod method,Element element,String... attributeNames) throws ValidationException {
  for (  String name : attributeNames) {
    String attributeValue=element.getAttribute(name);
    if (!MiniLangUtil.isConstantAttribute(attributeValue)) {
      handleError("Constant attribute \"" + name + "\" cannot contain an expression.",method,element);
    }
  }
}

private void bindViewType(WXComponent component){
  int id=generateViewType(component);
  if (mViewTypes == null) {
    mViewTypes=new SparseArray<>();
  }
  ArrayList<WXComponent> mTypes=mViewTypes.get(id);
  if (mTypes == null) {
    mTypes=new ArrayList<>();
    mViewTypes.put(id,mTypes);
  }
  mTypes.add(component);
}

protected boolean isEmptyValue(Object rawValue){
  return rawValue == null || StringUtils.isBlank(String.valueOf(rawValue));
}

public CipherTextIvMac(byte[] c,byte[] i,byte[] h){
  cipherText=new byte[c.length];
  System.arraycopy(c,0,cipherText,0,c.length);
  iv=new byte[i.length];
  System.arraycopy(i,0,iv,0,i.length);
  mac=new byte[h.length];
  System.arraycopy(h,0,mac,0,h.length);
}

public static MasterPrivateKey createFromEncryptedSeed(String passphrase,byte[] encryptedSeed) throws HyperLedgerException {
  try {
    byte[] key=SCrypt.generate(passphrase.getBytes("UTF-8"),BITCOIN_SEED,16384,8,8,32);
    SecretKeySpec keyspec=new SecretKeySpec(key,"AES");
    if (encryptedSeed.length != 32) {
      throw new HyperLedgerException("Incorrect encrypted seed length");
    }
    Cipher cipher=Cipher.getInstance("AES/ECB/NoPadding","BC");
    cipher.init(Cipher.DECRYPT_MODE,keyspec);
    return create(cipher.doFinal(encryptedSeed));
  }
 catch (  UnsupportedEncodingException|NoSuchPaddingException|NoSuchProviderException|NoSuchAlgorithmException|InvalidKeyException|BadPaddingException|IllegalBlockSizeException e) {
    throw new HyperLedgerException(e);
  }
}

public static List<JsonPointer> filter(final String... fields){
  final List<JsonPointer> result=new ArrayList<>(fields.length);
  for (  final String field : fields) {
    result.add(new JsonPointer(field));
  }
  return result;
}

public boolean applyFtProxy(){
  return method.isAnnotationPresent(AstrixFaultToleranceProxy.class);
}

private void notifyChange(int previous,int current){
  mSoundPlayer.play(mSoundId,1,1,0,0,1);
  if (mOnValueChangeListener != null) {
    mOnValueChangeListener.onValueChange(this,previous,mValue);
  }
}

public static double atan2(double y,double x){
  if (Double.isNaN(x) || Double.isNaN(y)) {
    return Double.NaN;
  }
  if (y == 0) {
    final double result=x * y;
    final double invx=1d / x;
    final double invy=1d / y;
    if (invx == 0) {
      if (x > 0) {
        return y;
      }
 else {
        return copySign(Math.PI,y);
      }
    }
    if (x < 0 || invx < 0) {
      if (y < 0 || invy < 0) {
        return -Math.PI;
      }
 else {
        return Math.PI;
      }
    }
 else {
      return result;
    }
  }
  if (y == Double.POSITIVE_INFINITY) {
    if (x == Double.POSITIVE_INFINITY) {
      return Math.PI * F_1_4;
    }
    if (x == Double.NEGATIVE_INFINITY) {
      return Math.PI * F_3_4;
    }
    return Math.PI * F_1_2;
  }
  if (y == Double.NEGATIVE_INFINITY) {
    if (x == Double.POSITIVE_INFINITY) {
      return -Math.PI * F_1_4;
    }
    if (x == Double.NEGATIVE_INFINITY) {
      return -Math.PI * F_3_4;
    }
    return -Math.PI * F_1_2;
  }
  if (x == Double.POSITIVE_INFINITY) {
    if (y > 0 || 1 / y > 0) {
      return 0d;
    }
    if (y < 0 || 1 / y < 0) {
      return -0d;
    }
  }
  if (x == Double.NEGATIVE_INFINITY) {
    if (y > 0.0 || 1 / y > 0.0) {
      return Math.PI;
    }
    if (y < 0 || 1 / y < 0) {
      return -Math.PI;
    }
  }
  if (x == 0) {
    if (y > 0 || 1 / y > 0) {
      return Math.PI * F_1_2;
    }
    if (y < 0 || 1 / y < 0) {
      return -Math.PI * F_1_2;
    }
  }
  final double r=y / x;
  if (Double.isInfinite(r)) {
    return atan(r,0,x < 0);
  }
  double ra=doubleHighPart(r);
  double rb=r - ra;
  final double xa=doubleHighPart(x);
  final double xb=x - xa;
  rb+=(y - ra * xa - ra * xb - rb * xa - rb * xb) / x;
  final double temp=ra + rb;
  rb=-(temp - ra - rb);
  ra=temp;
  if (ra == 0) {
    ra=copySign(0d,y);
  }
  final double result=atan(ra,rb,x < 0);
  return result;
}

public int count(){
  return comments == null ? 0 : comments.size();
}

private boolean isAnyPackageFromListInstalled(List<String> packages){
  boolean result=false;
  PackageManager pm=mContext.getPackageManager();
  for (  String packageName : packages) {
    try {
      pm.getPackageInfo(packageName,0);
      QLog.e(packageName + " ROOT management app detected!");
      result=true;
    }
 catch (    PackageManager.NameNotFoundException e) {
      continue;
    }
  }
  return result;
}

public static String makeSystemName(String type,int bitNum){
  String nName="";
  if ((!type.equals("S")) && (!type.equals("L")) && (!type.equals("T"))) {
    log.error("illegal type character proposed for system name - " + type);
    return (nName);
  }
  if ((bitNum < 1) || ((type.equals("S")) && (bitNum > 1000)) || (bitNum > 8000)) {
    log.error("illegal address range proposed for system name - " + bitNum);
    return (nName);
  }
  nName="K" + type + Integer.toString(bitNum);
  return (nName);
}

public static void remove(){
  AUTH_TOKEN.remove();
}

public abstract boolean conflicts(CopyJob other);

public TreeNode deserialize(String data){
  Deque<String> nodes=new LinkedList<>();
  nodes.addAll(Arrays.asList(data.split(SPLITER)));
  return buildTree(nodes);
}

public void fill(int fromIndex,int toIndex,short val){
  if (toIndex > _pos) {
    ensureCapacity(toIndex);
    _pos=toIndex;
  }
  Arrays.fill(_data,fromIndex,toIndex,val);
}

private void runPendingRequests(){
  int maxStartId=-1;
  BillingRequest request;
  while ((request=mPendingRequests.peek()) != null) {
    if (request.runIfConnected()) {
      mPendingRequests.remove();
      if (maxStartId < request.getStartId()) {
        maxStartId=request.getStartId();
      }
    }
 else {
      bindToMarketBillingService();
      return;
    }
  }
  if (maxStartId >= 0) {
    if (Consts.DEBUG) {
      Log.i(TAG,"stopping service, startId: " + maxStartId);
    }
    stopSelf(maxStartId);
  }
}

public static void removeAttributeDefaultValues(String serviceName,String schemaType,String attrName,Set defaultValues,boolean isOrgAttrSchema) throws UpgradeException {
  String classMethod="UpgradeUtils:removeAttributeDefaultValues : ";
  ServiceSchema ss=null;
  if (debug.messageEnabled()) {
    debug.message(classMethod + "serviceName : " + serviceName);
    debug.message(classMethod + "schemaTpe :" + schemaType);
    debug.message(classMethod + "attrName : " + attrName);
    debug.message(classMethod + "defaltValues :" + defaultValues);
    debug.message(classMethod + "isOrgAttrSchema :" + isOrgAttrSchema);
  }
  try {
    if (isOrgAttrSchema) {
      ServiceSchemaManager sm=getServiceSchemaManager(serviceName);
      ss=sm.getOrganizationCreationSchema();
    }
 else {
      ss=getServiceSchema(serviceName,null,schemaType);
    }
    if (ss != null) {
      AttributeSchema attrSchema=ss.getAttributeSchema(attrName);
      for (Iterator i=defaultValues.iterator(); i.hasNext(); ) {
        String defaultValue=(String)i.next();
        attrSchema.removeDefaultValue(defaultValue);
      }
    }
  }
 catch (  SMSException sme) {
    debug.error(classMethod + "Error removing default values ",sme);
  }
catch (  SSOException ssoe) {
    debug.error(classMethod + "Invalid SSO Token",ssoe);
  }
}

public void unlock(final T tx){
  if (DEBUG)   log.debug("enter");
  lock.lock();
  if (DEBUG)   log.debug("have private lock");
  try {
    assertNotDead();
    assertOwnsLock(tx);
    if (queue.remove() != tx) {
      throw new AssertionError();
    }
    if (waitsFor != null) {
      final Iterator<T> itr=queue.iterator();
synchronized (waitsFor) {
        while (itr.hasNext()) {
          final T pendingTx=itr.next();
          try {
            waitsFor.removeEdge(pendingTx,tx);
          }
 catch (          Throwable t) {
            log.warn(t.getMessage(),t);
          }
        }
      }
    }
    if (queue.isEmpty()) {
      if (INFO)       log.info("Nothing pending");
      return;
    }
    if (INFO)     log.info("Signaling blocked requestors");
    available.signalAll();
  }
  finally {
    lock.unlock();
    if (DEBUG)     log.debug("released private lock");
  }
}

public boolean isUpdateAvailable(){
  return availableUpdate != null;
}

@Override public String toStringSummary(){
  String result;
  String titles;
  int resultsetLength;
  int i;
  int j;
  if (m_NonSigWins == null) {
    return "-summary data not set-";
  }
  result="";
  titles="";
  resultsetLength=1 + Math.max((int)(Math.log(getColCount()) / Math.log(10)),(int)(Math.log(getRowCount()) / Math.log(10)));
  for (i=0; i < getColCount(); i++) {
    if (getColHidden(i)) {
      continue;
    }
    titles+=" " + Utils.padLeft("" + getSummaryTitle(i),resultsetLength * 2 + 3);
  }
  result+=titles + "  (No. of datasets where [col] >> [row])\n";
  for (i=0; i < getColCount(); i++) {
    if (getColHidden(i)) {
      continue;
    }
    for (j=0; j < getColCount(); j++) {
      if (getColHidden(j)) {
        continue;
      }
      result+=" ";
      if (j == i) {
        result+=Utils.padLeft("-",resultsetLength * 2 + 3);
      }
 else {
        result+=Utils.padLeft("" + m_NonSigWins[i][j] + " ("+ m_Wins[i][j]+ ")",resultsetLength * 2 + 3);
      }
    }
    result+=" | " + getSummaryTitle(i) + " = "+ getColName(i)+ '\n';
  }
  return result;
}

public int read(BufferedInputStream is){
  init();
  if (is != null) {
    in=is;
    readHeader();
    if (!err()) {
      readContents();
      if (frameCount < 0) {
        status=STATUS_FORMAT_ERROR;
      }
    }
  }
 else {
    status=STATUS_OPEN_ERROR;
  }
  try {
    is.close();
  }
 catch (  IOException e) {
  }
  return status;
}

private static int determineType(byte[] bytes){
  int offset=0;
  if (bytes.length >= 3 && (bytes[0] & 0xFF) == 0xEF && (bytes[1] & 0xFF) == 0xBB && (bytes[2] & 0xFF) == 0xBF) {
    offset+=3;
  }
  while (offset < bytes.length && bytes[offset] == ' ' || bytes[offset] == '\t' || bytes[offset] == '\r' || bytes[offset] == '\n' || bytes[offset] == '\f') {
    offset++;
  }
  return determineType(new String(bytes,offset,Math.min(8,bytes.length - offset)));
}

public void fixHttpsURLConnection(){
  HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());
}

@Override public DataTable sample(int newSize){
  int rowCount=getRowNumber();
  if (rowCount <= newSize) {
    return this;
  }
  int[] sampledSelectedIndices=new int[rowCount];
  for (int i=0; i < rowCount; ++i) {
    sampledSelectedIndices[i]=i;
  }
  Random rng=new Random(0);
  int swapIdx;
  int tmpValue;
  for (int i=0; i < rowCount; ++i) {
    swapIdx=rng.nextInt(rowCount);
    tmpValue=sampledSelectedIndices[swapIdx];
    sampledSelectedIndices[swapIdx]=sampledSelectedIndices[i];
    sampledSelectedIndices[i]=tmpValue;
  }
  DataTableView sampledDataTable=new DataTableView(this);
  Vector<Integer> sampledSelectedIndicesVector=new Vector<Integer>(newSize);
  for (int i=0; i < newSize; ++i) {
    sampledSelectedIndicesVector.add(sampledSelectedIndices[i]);
  }
  sampledDataTable.setSelectedIndices(sampledSelectedIndicesVector);
  return sampledDataTable;
}

private synchronized void block(boolean tf){
  if (tf) {
    try {
      if (m_filterThread.isAlive() && m_state != IDLE) {
        wait();
      }
    }
 catch (    InterruptedException ex) {
    }
  }
 else {
    notifyAll();
  }
}

public void cancel(){
  if (mUploadOperation == null) {
    if (mUploadStarted.get()) {
      Log_OC.d(TAG,"Cancelling upload during upload preparations.");
      mCancellationRequested.set(true);
    }
 else {
      Log_OC.e(TAG,"No upload in progress. This should not happen.");
    }
  }
 else {
    Log_OC.d(TAG,"Cancelling upload during actual upload operation.");
    mUploadOperation.cancel();
  }
}

public void testNegNegFirstShorter(){
  byte aBytes[]={-2,-3,-4,-4,5,14,23,39,48,57,66,5,14,23};
  byte bBytes[]={-128,9,56,100,-2,-76,89,45,91,3,-15,35,26,-117,23,87,-25,-75};
  int aSign=-1;
  int bSign=-1;
  byte rBytes[]={-1,127,-10,-57,-101,1,2,2,2,-96,-16,8,-40,-59,68,-88,-88,16,73};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.and(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

public static void mergeFiles(final File file1,final File file2,final File outputFile){
  if (!isReadable(file1) || !isReadable(file2) || !outputFile.exists() && !makeDirsForFile(outputFile)) {
    return;
  }
  try {
    FileInputStream fis1=new FileInputStream(file1);
    FileInputStream fis2=new FileInputStream(file2);
    SequenceInputStream sis=new SequenceInputStream(fis1,fis2);
    FileOutputStream fos=new FileOutputStream(outputFile);
    int count;
    byte[] temp=new byte[4096];
    while ((count=sis.read(temp)) != -1) {
      fos.write(temp,0,count);
    }
    FileUtils.sync(fos);
    fos.close();
    sis.close();
    fis1.close();
    fis2.close();
  }
 catch (  FileNotFoundException e) {
    e.printStackTrace();
  }
catch (  IOException e) {
    e.printStackTrace();
  }
}

public static SnippetSet parse(final File file) throws ParseException {
  return parse(fileInputSupplier(file.getParentFile()),file.getName());
}

public static String readFile(Class<?> context,String name) throws IOException {
  try (InputStream in=context.getResourceAsStream(name)){
    if (in == null) {
      return null;
    }
    return new String(ByteStreams.toByteArray(in),ENC);
  }
 catch (  IOException e) {
    throw new IOException("Error reading " + name,e);
  }
}

long ptsToTimeUs(long pts){
  if (lastPts != Long.MIN_VALUE) {
    long closestWrapCount=(lastPts + (MAX_PTS / 2)) / MAX_PTS;
    long ptsWrapBelow=pts + (MAX_PTS * (closestWrapCount - 1));
    long ptsWrapAbove=pts + (MAX_PTS * closestWrapCount);
    pts=Math.abs(ptsWrapBelow - lastPts) < Math.abs(ptsWrapAbove - lastPts) ? ptsWrapBelow : ptsWrapAbove;
  }
  long timeUs=(pts * C.MICROS_PER_SECOND) / 90000;
  if (lastPts == Long.MIN_VALUE) {
    timestampOffsetUs=firstSampleTimestamp - timeUs;
  }
  lastPts=pts;
  return timeUs + timestampOffsetUs;
}

public int remove(Object key){
  Entry e=removeEntryForKey(key);
  return (e == null ? 0 : e.value);
}

public boolean verifyChallengeToken(InetSocketAddress address,int token){
  return Objects.equals(challengeTokens.get(address),token);
}

@Override public void handleKey(int virtualKeyCode,int transitionState,char keyChar){
  switchControlKeys(virtualKeyCode,transitionState);
  inputBuffer.add(new GlobalKeyEvent(this,virtualKeyCode,transitionState,keyChar,menuPressed,shiftPressed,controlPressed,extendedKey));
}

protected void drawTriangle(int x,int y,int w,int h,Color fillColor,Paint fillPaint,Color penColor,boolean shadow,String direction){
  Polygon triangle=new Polygon();
  if (direction.equals(mxConstants.DIRECTION_NORTH)) {
    triangle.addPoint(x,y + h);
    triangle.addPoint(x + w / 2,y);
    triangle.addPoint(x + w,y + h);
  }
 else   if (direction.equals(mxConstants.DIRECTION_SOUTH)) {
    triangle.addPoint(x,y);
    triangle.addPoint(x + w / 2,y + h);
    triangle.addPoint(x + w,y);
  }
 else   if (direction.equals(mxConstants.DIRECTION_WEST)) {
    triangle.addPoint(x + w,y);
    triangle.addPoint(x,y + h / 2);
    triangle.addPoint(x + w,y + h);
  }
 else {
    triangle.addPoint(x,y);
    triangle.addPoint(x + w,y + h / 2);
    triangle.addPoint(x,y + h);
  }
  drawPolygon(triangle,fillColor,fillPaint,penColor,shadow);
}

private static Map<String,String> resourceBundleMap(ResourceBundle bundle){
  final HashMap<String,String> map=new HashMap<String,String>();
  final Enumeration<String> e=bundle.getKeys();
  while (e.hasMoreElements()) {
    final String key=e.nextElement();
    map.put(key,(String)bundle.getObject(key));
  }
  return Collections.unmodifiableMap(map);
}

public int compareTo(IntBuffer otherBuffer){
  int compareRemaining=(remaining() < otherBuffer.remaining()) ? remaining() : otherBuffer.remaining();
  int thisPos=position;
  int otherPos=otherBuffer.position;
  int thisInt, otherInt;
  while (compareRemaining > 0) {
    thisInt=get(thisPos);
    otherInt=otherBuffer.get(otherPos);
    if (thisInt != otherInt) {
      return thisInt < otherInt ? -1 : 1;
    }
    thisPos++;
    otherPos++;
    compareRemaining--;
  }
  return remaining() - otherBuffer.remaining();
}

private static SizePair selectSizePair(Camera camera,int desiredWidth,int desiredHeight){
  List<SizePair> validPreviewSizes=generateValidPreviewSizeList(camera);
  SizePair selectedPair=null;
  int minDiff=Integer.MAX_VALUE;
  for (  SizePair sizePair : validPreviewSizes) {
    Size size=sizePair.previewSize();
    int diff=Math.abs(size.getWidth() - desiredWidth) + Math.abs(size.getHeight() - desiredHeight);
    if (diff < minDiff) {
      selectedPair=sizePair;
      minDiff=diff;
    }
  }
  return selectedPair;
}

public void testDivideRoundHalfUpPos(){
  String a="92948782094488478231212478987482988429808779810457634781384756794987";
  int aScale=-24;
  String b="7472334223847623782375469293018787918347987234564568";
  int bScale=13;
  String c="1.24390557635720517122423359799284E+53";
  int resScale=-21;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  BigDecimal result=aNumber.divide(bNumber,resScale,BigDecimal.ROUND_HALF_UP);
  assertEquals("incorrect value",c,result.toString());
  assertEquals("incorrect scale",resScale,result.scale());
}

private boolean isBlack(final int x,final int y){
  if (!inBounds(x,y)) {
    return false;
  }
  return (m_bufferedImage.getRGB(x,y) & 0x00FFFFFF) == 0;
}

public void addJob(Runnable job){
  mJobs.add(job);
}

public PKCS10CertificationRequest(String signatureAlgorithm,X509Name subject,PublicKey key,ASN1Set attributes,PrivateKey signingKey,String provider) throws NoSuchAlgorithmException, NoSuchProviderException, InvalidKeyException, SignatureException {
  String algorithmName=Strings.toUpperCase(signatureAlgorithm);
  DERObjectIdentifier sigOID=(DERObjectIdentifier)algorithms.get(algorithmName);
  if (sigOID == null) {
    try {
      sigOID=new DERObjectIdentifier(algorithmName);
    }
 catch (    Exception e) {
      throw new IllegalArgumentException("Unknown signature type requested");
    }
  }
  if (subject == null) {
    throw new IllegalArgumentException("subject must not be null");
  }
  if (key == null) {
    throw new IllegalArgumentException("public key must not be null");
  }
  if (noParams.contains(sigOID)) {
    this.sigAlgId=new AlgorithmIdentifier(sigOID);
  }
 else   if (params.containsKey(algorithmName)) {
    this.sigAlgId=new AlgorithmIdentifier(sigOID,(ASN1Encodable)params.get(algorithmName));
  }
 else {
    this.sigAlgId=new AlgorithmIdentifier(sigOID,DERNull.INSTANCE);
  }
  try {
    ASN1Sequence seq=(ASN1Sequence)ASN1Primitive.fromByteArray(key.getEncoded());
    this.reqInfo=new CertificationRequestInfo(subject,new SubjectPublicKeyInfo(seq),attributes);
  }
 catch (  IOException e) {
    throw new IllegalArgumentException("can't encode public key");
  }
  Signature sig;
  if (provider == null) {
    sig=Signature.getInstance(signatureAlgorithm);
  }
 else {
    sig=Signature.getInstance(signatureAlgorithm,provider);
  }
  sig.initSign(signingKey);
  try {
    sig.update(reqInfo.getEncoded(ASN1Encoding.DER));
  }
 catch (  Exception e) {
    throw new IllegalArgumentException("exception encoding TBS cert request - " + e);
  }
  this.sigBits=new DERBitString(sig.sign());
}

@Override public void close() throws IOException {
  if (in != null) {
    in.close();
    in=null;
    buf=null;
  }
}

public static Collection<Vector2D> reducePoints(final Collection<Vector2D> points){
  int size=0;
  Vector2D minX=null;
  Vector2D maxX=null;
  Vector2D minY=null;
  Vector2D maxY=null;
  for (  Vector2D p : points) {
    if (minX == null || p.getX() < minX.getX()) {
      minX=p;
    }
    if (maxX == null || p.getX() > maxX.getX()) {
      maxX=p;
    }
    if (minY == null || p.getY() < minY.getY()) {
      minY=p;
    }
    if (maxY == null || p.getY() > maxY.getY()) {
      maxY=p;
    }
    size++;
  }
  if (size < 4) {
    return points;
  }
  final List<Vector2D> quadrilateral=buildQuadrilateral(minY,maxX,maxY,minX);
  if (quadrilateral.size() < 3) {
    return points;
  }
  final List<Vector2D> reducedPoints=new ArrayList<Vector2D>(quadrilateral);
  for (  final Vector2D p : points) {
    if (!insideQuadrilateral(p,quadrilateral)) {
      reducedPoints.add(p);
    }
  }
  return reducedPoints;
}

int updateBookmarksInTransaction(ContentValues values,String selection,String[] selectionArgs,boolean callerIsSyncAdapter){
  int count=0;
  final SQLiteDatabase db=mOpenHelper.getWritableDatabase();
  final String[] bookmarksProjection=new String[]{Bookmarks._ID,Bookmarks.VERSION,Bookmarks.URL,Bookmarks.TITLE,Bookmarks.IS_FOLDER,Bookmarks.ACCOUNT_NAME,Bookmarks.ACCOUNT_TYPE};
  Cursor cursor=db.query(TABLE_BOOKMARKS,bookmarksProjection,selection,selectionArgs,null,null,null);
  boolean updatingParent=values.containsKey(Bookmarks.PARENT);
  String parentAccountName=null;
  String parentAccountType=null;
  if (updatingParent) {
    long parent=values.getAsLong(Bookmarks.PARENT);
    Cursor c=db.query(TABLE_BOOKMARKS,new String[]{Bookmarks.ACCOUNT_NAME,Bookmarks.ACCOUNT_TYPE},"_id = ?",new String[]{Long.toString(parent)},null,null,null);
    if (c.moveToFirst()) {
      parentAccountName=c.getString(0);
      parentAccountType=c.getString(1);
    }
    c.close();
  }
 else   if (values.containsKey(Bookmarks.ACCOUNT_NAME) || values.containsKey(Bookmarks.ACCOUNT_TYPE)) {
  }
  try {
    String[] args=new String[1];
    if (!callerIsSyncAdapter) {
      values.put(Bookmarks.DATE_MODIFIED,System.currentTimeMillis());
      values.put(Bookmarks.DIRTY,1);
    }
    boolean updatingUrl=values.containsKey(Bookmarks.URL);
    String url=null;
    if (updatingUrl) {
      url=values.getAsString(Bookmarks.URL);
    }
    ContentValues imageValues=extractImageValues(values,url);
    while (cursor.moveToNext()) {
      long id=cursor.getLong(0);
      args[0]=Long.toString(id);
      String accountName=cursor.getString(5);
      String accountType=cursor.getString(6);
      if (updatingParent && (!TextUtils.equals(accountName,parentAccountName) || !TextUtils.equals(accountType,parentAccountType))) {
        ContentValues newValues=valuesFromCursor(cursor);
        newValues.putAll(values);
        newValues.remove(Bookmarks._ID);
        newValues.remove(Bookmarks.VERSION);
        newValues.put(Bookmarks.ACCOUNT_NAME,parentAccountName);
        newValues.put(Bookmarks.ACCOUNT_TYPE,parentAccountType);
        Uri insertUri=insertInTransaction(Bookmarks.CONTENT_URI,newValues,callerIsSyncAdapter);
        long newId=ContentUris.parseId(insertUri);
        if (cursor.getInt(4) != 0) {
          ContentValues updateChildren=new ContentValues(1);
          updateChildren.put(Bookmarks.PARENT,newId);
          count+=updateBookmarksInTransaction(updateChildren,Bookmarks.PARENT + "=?",new String[]{Long.toString(id)},callerIsSyncAdapter);
        }
        Uri uri=ContentUris.withAppendedId(Bookmarks.CONTENT_URI,id);
        deleteInTransaction(uri,null,null,callerIsSyncAdapter);
        count+=1;
      }
 else {
        if (!callerIsSyncAdapter) {
          values.put(Bookmarks.VERSION,cursor.getLong(1) + 1);
        }
        count+=db.update(TABLE_BOOKMARKS,values,"_id=?",args);
      }
      if (imageValues != null) {
        if (!updatingUrl) {
          url=cursor.getString(2);
          imageValues.put(Images.URL,url);
        }
        if (!TextUtils.isEmpty(url)) {
          args[0]=url;
          if (db.update(TABLE_IMAGES,imageValues,Images.URL + "=?",args) == 0) {
            db.insert(TABLE_IMAGES,Images.FAVICON,imageValues);
          }
        }
      }
    }
  }
  finally {
    if (cursor != null)     cursor.close();
  }
  return count;
}

private IgniteBiTuple<String,Integer> hostPort(String connStr,String hostPortStr) throws IgniteCheckedException {
  String[] tokens=hostPortStr.split(":",-1);
  String host=tokens[0];
  if (F.isEmpty(host))   host=LOCALHOST;
  int port;
  if (tokens.length == 1)   port=IgfsIpcEndpointConfiguration.DFLT_PORT;
 else   if (tokens.length == 2) {
    String portStr=tokens[1];
    try {
      port=Integer.valueOf(portStr);
      if (port < 0 || port > 65535)       throw new IgniteCheckedException("Invalid port number: " + connStr);
    }
 catch (    NumberFormatException e) {
      throw new IgniteCheckedException("Invalid port number: " + connStr);
    }
  }
 else   throw new IgniteCheckedException("Invalid connection string format: " + connStr);
  return F.t(host,port);
}

public boolean isMissileGoingToHit(EntityMissile missile){
  if (missile == null || missile.targetVector == null) {
    return false;
  }
  return (Vector2.distance(new Vector2(new Pos3D(missile)),new Vector2(xCoord,zCoord)) < alarmRange && Vector2.distance(new Vector2(missile.targetVector),new Vector2(xCoord,zCoord)) < safetyRange);
}

public static Usericon parseModIcon(String json){
  try {
    JSONParser parser=new JSONParser();
    JSONObject o=(JSONObject)parser.parse(json);
    JSONObject room=(JSONObject)o.get("room");
    String roomId=(String)room.get("id");
    String modBadgeUrl=(String)room.get("moderator_badge");
    if (modBadgeUrl == null) {
      return null;
    }
    return UsericonFactory.createTwitchLikeIcon(Usericon.Type.MOD,roomId,modBadgeUrl,Usericon.SOURCE_FFZ,"Moderator (FFZ Icon)");
  }
 catch (  ParseException|ClassCastException|NullPointerException ex) {
  }
  return null;
}

public static long length(URL url) throws IOException {
  HTTPResponse http=HTTPEngine.head(url,null,null,-1,true,null,Constants.NAME,null,null);
  return http.getContentLength();
}

@Override public Request<List<Workspace>> all(){
  List<Workspace> workspacesToReturn=new ArrayList<>();
  for (  Workspace dummyWorkspace : workspaces.values()) {
    workspacesToReturn.add(dummyWorkspace);
  }
  return new DummyRequest<>(workspacesToReturn);
}

public void subscribe(EventSubscriber<?> subscriber){
  final Class<?> eventType=getEventType(subscriber);
  doSubscribe(subscriber,eventType);
}

public static String readerToString(final Reader fileReader) throws IOException {
  final StringBuilder sb=new StringBuilder();
  try (BufferedReader br=new BufferedReader(fileReader)){
    final char[] buffer=FileUtils.makeBuffer();
    final int eof=-1;
    for (int len=br.read(buffer); len > eof; len=br.read(buffer)) {
      for (int i=0; i < len; i++) {
        sb.append(buffer[i]);
      }
    }
  }
   return sb.toString();
}

public static String bytesToHex(byte[] bytes,boolean withSpaces){
  StringBuilder sb=new StringBuilder();
  for (  byte hashByte : bytes) {
    int intVal=0xff & hashByte;
    if (intVal < 0x10) {
      sb.append('0');
    }
    sb.append(Integer.toHexString(intVal));
    if (withSpaces) {
      sb.append(' ');
    }
  }
  return sb.toString();
}

public static byte[] stringToUtf8Bytes(String string){
  int len=string.length();
  byte[] bytes=new byte[len * 3];
  int outAt=0;
  for (int i=0; i < len; i++) {
    char c=string.charAt(i);
    if ((c != 0) && (c < 0x80)) {
      bytes[outAt]=(byte)c;
      outAt++;
    }
 else     if (c < 0x800) {
      bytes[outAt]=(byte)(((c >> 6) & 0x1f) | 0xc0);
      bytes[outAt + 1]=(byte)((c & 0x3f) | 0x80);
      outAt+=2;
    }
 else {
      bytes[outAt]=(byte)(((c >> 12) & 0x0f) | 0xe0);
      bytes[outAt + 1]=(byte)(((c >> 6) & 0x3f) | 0x80);
      bytes[outAt + 2]=(byte)((c & 0x3f) | 0x80);
      outAt+=3;
    }
  }
  byte[] result=new byte[outAt];
  System.arraycopy(bytes,0,result,0,outAt);
  return result;
}

private boolean isInterleaved(ComponentSampleModel sm){
  int numBands=sampleModel.getNumBands();
  if (numBands == 1) {
    return true;
  }
  int[] bankIndices=sm.getBankIndices();
  for (int i=0; i < numBands; i++) {
    if (bankIndices[i] != 0) {
      return false;
    }
  }
  int[] bandOffsets=sm.getBandOffsets();
  int minOffset=bandOffsets[0];
  int maxOffset=minOffset;
  for (int i=1; i < numBands; i++) {
    int offset=bandOffsets[i];
    if (offset < minOffset) {
      minOffset=offset;
    }
    if (offset > maxOffset) {
      maxOffset=offset;
    }
  }
  if (maxOffset - minOffset >= sm.getPixelStride()) {
    return false;
  }
  return true;
}

private int decodeSize(byte[] buffer){
  BigInteger bi=new BigInteger(buffer);
  int tmpSize=bi.intValue();
  if (tmpSize < 0) {
    logger.warning("Invalid Frame Size of:" + tmpSize + "Decoded from bin:"+ Integer.toBinaryString(tmpSize)+ "Decoded from hex:"+ Integer.toHexString(tmpSize));
  }
  return tmpSize;
}

public CertificateIssuerExtension(Boolean critical,Object value) throws IOException {
  this.extensionId=PKIXExtensions.CertificateIssuer_Id;
  this.critical=critical.booleanValue();
  this.extensionValue=(byte[])value;
  DerValue val=new DerValue(this.extensionValue);
  this.names=new GeneralNames(val);
}

@Override public void onSensorSelectionClosed(DialogFragment dialog){
  Log.d(TAG,"Sensor selection closed");
  sensorSelectionDialog=null;
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String childData;
  String childValue;
  doc=(Document)load("hc_staff",true);
  elementList=doc.getElementsByTagName("strong");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
  child.setNodeValue("Marilyn Martin");
  childData=child.getData();
  assertEquals("data","Marilyn Martin",childData);
  childValue=child.getNodeValue();
  assertEquals("value","Marilyn Martin",childValue);
}

public String toXML(){
  StringBuffer str=new StringBuffer();
  str.append("<");
  str.append(XML_ROOT_ELEMENT);
  str.append(">");
  str.append("<");
  str.append(XML_ELEMENT_QUALITY_CODE);
  str.append(">");
  str.append(qualityCode);
  str.append("</");
  str.append(XML_ELEMENT_QUALITY_CODE);
  str.append(">");
  if (description != null) {
    str.append("<");
    str.append(XML_ELEMENT_QUALITY_DESC);
    str.append("><![CDATA[");
    str.append(description);
    str.append("]]></");
    str.append(XML_ELEMENT_QUALITY_DESC);
    str.append(">");
  }
  str.append("</");
  str.append(XML_ROOT_ELEMENT);
  str.append(">\n");
  return str.toString();
}

public byte[] decrypt(FacesContext context,byte[] securedata){
  try {
    byte[] macBytes=new byte[macLength];
    System.arraycopy(securedata,0,macBytes,0,macBytes.length);
    byte[] iv=new byte[ivLength];
    System.arraycopy(securedata,macBytes.length,iv,0,iv.length);
    byte[] encdata=new byte[securedata.length - macBytes.length - iv.length];
    System.arraycopy(securedata,macBytes.length + iv.length,encdata,0,encdata.length);
    byte[] rawKey=convertPasswordToKey(getPasswordToSecureState(context));
    Mac mac=getMac(rawKey);
    mac.update(iv);
    mac.update(encdata);
    byte[] macBytesCalculated=mac.doFinal();
    if (Arrays.equals(macBytes,macBytesCalculated)) {
      Cipher cipher=getBlockCipherForDecryption(rawKey,iv);
      byte[] plaindata=cipher.doFinal(encdata);
      return plaindata;
    }
 else {
      if (logger.isLoggable(Level.WARNING)) {
        logger.warning("ERROR: MAC did not verify!");
      }
      return null;
    }
  }
 catch (  Exception e) {
    if (logger.isLoggable(Level.SEVERE)) {
      logger.log(Level.SEVERE,e.getMessage(),e.getCause());
    }
    throw new RuntimeException(e);
  }
}

public static Set<String> commaDelimitedListToSet(String str){
  Set<String> set=new TreeSet<>();
  String[] tokens=commaDelimitedListToStringArray(str);
  set.addAll(Arrays.asList(tokens));
  return set;
}

public int hashCode(){
  return Objects.hash(file,princ,bound);
}

public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(4);
  newVector.addElement(new Option("\tThe number of iterations to be performed.\n" + "\t(default 1)","I",1,"-I <int>"));
  newVector.addElement(new Option("\tThe exponent for the polynomial kernel.\n" + "\t(default 1)","E",1,"-E <double>"));
  newVector.addElement(new Option("\tThe seed for the random number generation.\n" + "\t(default 1)","S",1,"-S <int>"));
  newVector.addElement(new Option("\tThe maximum number of alterations allowed.\n" + "\t(default 10000)","M",1,"-M <int>"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

protected void tag(String tag,String name,String value,boolean close){
  spacing();
  m_out.print('<');
  m_out.print(tag);
  m_out.print(' ');
  m_out.print(name);
  m_out.print('=');
  m_out.print('\"');
  escapeString(value);
  m_out.print('\"');
  if (close)   m_out.print('/');
  m_out.print('>');
  println();
  if (!close) {
    m_tagStack.add(tag);
  }
}

public V remove(Object key){
  int hash=hash(key.hashCode());
  Segment<K,V> s=segmentForHash(hash);
  return s == null ? null : s.remove(key,hash,null);
}

public void addAttribute(AttributeInfo info){
  AttributeInfo.remove(attributes,info.getName());
  attributes.add(info);
}

public static Result evaluateModel(MultiLabelClassifier h,Instances D) throws Exception {
  return evaluateModelPrequentialBasic(h,D,20,1.0,"PCut1","3");
}

protected boolean isValidState(mxCellState state){
  return true;
}

public void testFindSpringSunDirectoryServerWithLimit(){
  LdapProxy proxy=getLdapSunDirectoryServer();
  List result=null;
  int limit=1;
  try {
    result=proxy.find(getLdapSearchVO("",limit,"cn","nacho",null,LdapScopeConstants.SCOPE_SUBTREE));
  }
 catch (  Exception e) {
  }
  assertNotNull(result);
  if (result != null) {
    assertEquals(limit,result.size());
  }
}

public static boolean deleteDir(File dir){
  if (dir == null) {
    return false;
  }
  if (dir.isDirectory()) {
    String[] children=dir.list();
    for (    String child : children) {
      boolean success=deleteDir(new File(dir,child));
      if (!success) {
        return false;
      }
    }
  }
  return dir.delete();
}

private CIMObjectPath createFilter(CimManagedFilterInfo filterInfo) throws WBEMException {
  StringBuilder filterNameBuilder=new StringBuilder();
  filterNameBuilder.append(_subscriptionsIdentifier);
  filterNameBuilder.append(CimConstants.PATH_NAME_DELIMITER);
  filterNameBuilder.append(filterInfo.getName());
  String filterName=filterNameBuilder.toString();
  String implNS=_connection.getImplNamespace();
  CIMProperty<?> nameProperty=new CIMProperty<String>(CimConstants.NAME_KEY,CIMDataType.STRING_T,filterName);
  CIMProperty<?> srcNamespaceProp=new CIMProperty<String>(CimConstants.FILTER_PROP_SRC_NAMESPACE,CIMDataType.STRING_T,implNS);
  CIMProperty<?> srcNamespacesProp=new CIMProperty<String[]>(CimConstants.FILTER_PROP_SRC_NAMESPACES,CIMDataType.STRING_ARRAY_T,new String[]{implNS});
  CIMProperty<?> queryLangProp=new CIMProperty<String>(CimConstants.FILTER_PROP_QUERY_LANGUAGE,CIMDataType.STRING_T,filterInfo.getQueryLanguage());
  CIMProperty<?> queryProp=new CIMProperty<String>(CimConstants.FILTER_PROP_QUERY,CIMDataType.STRING_T,filterInfo.getQuery());
  CIMProperty<?>[] filterProperties=new CIMProperty[]{nameProperty,srcNamespaceProp,srcNamespacesProp,queryLangProp,queryProp};
  CIMObjectPath filterPath=createInstance(CimConstants.CIM_FILTER_NAME,filterName,filterProperties);
  _filterPaths.add(filterPath);
  return filterPath;
}

public static ArrayList<ArrayList<String>> fileTokenizer(String fin){
  File file=new File(fin);
  BufferedReader br;
  FileReader fr;
  ArrayList<String> lines=new ArrayList<String>();
  try {
    fr=new FileReader(file);
    br=new BufferedReader(fr);
    String line;
    try {
      while ((line=br.readLine()) != null) {
        if (line.length() > 0) {
          lines.add(line);
        }
      }
    }
 catch (    IOException ex) {
    }
  }
 catch (  FileNotFoundException ex) {
  }
  ArrayList<ArrayList<String>> tokenized_list=new ArrayList<ArrayList<String>>();
  for (  String s : lines) {
    ArrayList<String> tokens=new ArrayList<String>();
    StringTokenizer st=new StringTokenizer(s," \t\n\r\f,");
    while (st.hasMoreTokens()) {
      tokens.add(st.nextToken());
    }
    tokenized_list.add(tokens);
  }
  return tokenized_list;
}

public ActivationGroupImpl(ActivationGroupID id,MarshalledObject<?> data) throws RemoteException {
  super(id);
  groupID=id;
  unexportObject(this,true);
  RMIServerSocketFactory ssf=new ServerSocketFactoryImpl();
  UnicastRemoteObject.exportObject(this,0,null,ssf);
  if (System.getSecurityManager() == null) {
    try {
      System.setSecurityManager(new SecurityManager());
    }
 catch (    Exception e) {
      throw new RemoteException("unable to set security manager",e);
    }
  }
}

static byte[] hash_df(Digest digest,byte[] seedMaterial,int seedLength){
  byte[] temp=new byte[(seedLength + 7) / 8];
  int len=temp.length / digest.getDigestSize();
  int counter=1;
  byte[] dig=new byte[digest.getDigestSize()];
  for (int i=0; i <= len; i++) {
    digest.update((byte)counter);
    digest.update((byte)(seedLength >> 24));
    digest.update((byte)(seedLength >> 16));
    digest.update((byte)(seedLength >> 8));
    digest.update((byte)seedLength);
    digest.update(seedMaterial,0,seedMaterial.length);
    digest.doFinal(dig,0);
    int bytesToCopy=((temp.length - i * dig.length) > dig.length) ? dig.length : (temp.length - i * dig.length);
    System.arraycopy(dig,0,temp,i * dig.length,bytesToCopy);
    counter++;
  }
  if (seedLength % 8 != 0) {
    int shift=8 - (seedLength % 8);
    int carry=0;
    for (int i=0; i != temp.length; i++) {
      int b=temp[i] & 0xff;
      temp[i]=(byte)((b >>> shift) | (carry << (8 - shift)));
      carry=b;
    }
  }
  return temp;
}

protected boolean dropMessage(RTMP rtmp,int channelId,IRTMPEvent message){
  boolean drop=false;
  if (rtmp.getMode() == RTMP.MODE_SERVER) {
    boolean isVideo=false;
    if (message instanceof Ping) {
      final Ping pingMessage=(Ping)message;
      if (pingMessage.getEventType() == Ping.STREAM_PLAYBUFFER_CLEAR) {
        final int channel=(4 + ((pingMessage.getValue2() - 1) * 5));
        rtmp.setLastTimestampMapping(channel,null);
        rtmp.setLastTimestampMapping(channel + 1,null);
        rtmp.setLastTimestampMapping(channel + 2,null);
      }
      return false;
    }
    if ((isVideo=message instanceof VideoData) || message instanceof AudioData) {
      if (message.getTimestamp() == 0) {
        return false;
      }
      boolean isLive=message.getSourceType() == Constants.SOURCE_TYPE_LIVE;
      long timestamp=(message.getTimestamp() & 0xFFFFFFFFL);
      LiveTimestampMapping mapping=rtmp.getLastTimestampMapping(channelId);
      long now=System.currentTimeMillis();
      if (mapping == null || timestamp < mapping.getLastStreamTime()) {
        log.debug("Resetting clock time ({}) to stream time ({})",now,timestamp);
        mapping=new LiveTimestampMapping(now,timestamp);
        rtmp.setLastTimestampMapping(channelId,mapping);
      }
      mapping.setLastStreamTime(timestamp);
      long clockTimeOfMessage=mapping.getClockStartTime() + timestamp - mapping.getStreamStartTime();
      long tardiness=clockTimeOfMessage - now;
      if (isLive && dropLiveFuture) {
        tardiness=Math.abs(tardiness);
      }
      IConnection conn=Red5.getConnectionLocal();
      if (conn != null) {
        tardiness-=conn.getLastPingTime();
      }
 else {
        log.debug("Connection is null");
      }
      if (tardiness < baseTolerance) {
      }
 else       if (tardiness > highestTolerance) {
        log.debug("Dropping late message: {}",message);
        if (isVideo) {
          mapping.setKeyFrameNeeded(true);
        }
        drop=true;
      }
 else {
        if (isVideo) {
          VideoData video=(VideoData)message;
          if (video.getFrameType() == FrameType.KEYFRAME) {
            mapping.setKeyFrameNeeded(false);
          }
 else           if (tardiness >= baseTolerance && tardiness < midTolerance) {
            if (video.getFrameType() == FrameType.DISPOSABLE_INTERFRAME) {
              log.debug("Dropping disposible frame; message: {}",message);
              drop=true;
            }
          }
 else           if (tardiness >= midTolerance && tardiness <= highestTolerance) {
            log.debug("Dropping disposible or inter frame; message: {}",message);
            drop=true;
          }
        }
      }
    }
    log.debug("Drop data: {}",drop);
  }
  return drop;
}

public static double vectorLength(double[] vector){
  double ret=0;
  if (vector == null)   return ret;
 else {
    for (    double aVector : vector) {
      ret+=Math.pow(aVector,2);
    }
  }
  return ret;
}

public static String encodeQuery(String url){
  Uri uri=Uri.parse(url);
  try {
    String query=uri.getQuery();
    String encodedQuery=query != null ? URLEncoder.encode(query,"UTF-8") : null;
    URI tmp=new URI(uri.getScheme(),uri.getAuthority(),uri.getPath(),null,uri.getFragment());
    return tmp + (encodedQuery != null && encodedQuery.length() > 0 ? "?" + encodedQuery : "");
  }
 catch (  UnsupportedEncodingException ignore) {
  }
catch (  URISyntaxException ignore) {
  }
  return uri.toString();
}

public void defineFillStyle(int bitmapId,Matrix matrix,boolean clipped) throws IOException {
  fillStyles.add(new FillStyle(bitmapId,matrix,clipped));
  outstandingChanges=true;
}

private static long writeFile(String path,byte[] data){
  FileOutputStream out=null;
  try {
    out=new FileOutputStream(path);
    out.write(data);
    return data.length;
  }
 catch (  Exception e) {
    Log.e(TAG,"Failed to write data",e);
  }
 finally {
    try {
      out.close();
    }
 catch (    Exception e) {
      Log.e(TAG,"Failed to close file after write",e);
    }
  }
  return -1;
}

public void firePaletteEvent(ComponentEvent event){
  if (localHackList == null) {
    return;
  }
  palette=(Container)event.getSource();
  int eventType=event.getID();
  for (  ComponentListener listener : localHackList) {
    if (eventType == ComponentEvent.COMPONENT_HIDDEN) {
      listener.componentHidden(event);
    }
 else     if (eventType == ComponentEvent.COMPONENT_SHOWN) {
      listener.componentShown(event);
    }
  }
  if (eventType == ComponentEvent.COMPONENT_HIDDEN) {
    palette=null;
  }
}

public void removeEntry(RosterEntry e){
  log.debug("Remove entry {}",e);
  _list.remove(e);
  e.removePropertyChangeListener(this);
  setDirty(true);
  firePropertyChange(REMOVE,e,null);
}

protected void logDiagnostic(String msg){
  if (isDiagnosticsEnabled()) {
    logRawDiagnostic(diagnosticPrefix + msg);
  }
}

public void addURL(final String url){
  while (currentIndex < history.size() - 1) {
    history.remove(currentIndex + 1);
  }
  history.add(url);
  currentIndex=history.size() - 1;
}

public static ValueTimestamp convertTimestamp(Timestamp x,Calendar calendar){
  if (calendar == null) {
    throw DbException.getInvalidValueException("calendar",null);
  }
  Calendar cal=(Calendar)calendar.clone();
  cal.setTimeInMillis(x.getTime());
  long dateValue=dateValueFromCalendar(cal);
  long nanos=nanosFromCalendar(cal);
  nanos+=x.getNanos() % 1000000;
  return ValueTimestamp.fromDateValueAndNanos(dateValue,nanos);
}

private void process(){
  ArrayList<Point2D> pList=new ArrayList<Point2D>();
  ArrayList<Color> cList=new ArrayList<Color>();
  while (reader.getPointer() < reader.getTotalBitLen()) {
    Point2D p=getPointCoords();
    pList.add(p);
    float[] cc={1f,1f,1f,1f};
    for (int z=0; z < colCompCount; z++) {
      cc[z]=reader.getFloat(bitsPerComponent);
    }
    Color c=new Color(cc[0],cc[1],cc[2],cc[3]);
    cList.add(c);
  }
  int totalRows=pList.size() / verticesPerRow;
  for (int mm=0; mm < (totalRows - 1); mm++) {
    int mRows=mm * totalRows;
    for (int nn=0; nn < (verticesPerRow - 1); nn++) {
      int nm=nn + mRows;
      int[] t=new int[6];
      t[0]=nm;
      t[1]=t[3]=nm + 1;
      t[2]=t[4]=nm + verticesPerRow;
      t[5]=nm + verticesPerRow + 1;
      for (int z=0; z < t.length; z++) {
        triangles.add(pList.get(t[z]));
        triColors.add(cList.get(t[z]));
      }
    }
  }
}

private void element(String segment){
  int index=segment.indexOf(':');
  String prefix=null;
  if (index > 0) {
    prefix=segment.substring(0,index);
    segment=segment.substring(index + 1);
  }
  String element=style.getElement(segment);
  prefixes.add(prefix);
  names.add(element);
}

private void cleanupHandler(ContentHandler vh) throws SAXException {
  for (PrefixMapping pm=prefixMapping; pm != null; pm=pm.parent)   vh.endPrefixMapping(pm.prefix);
  vh.endDocument();
}

public InputStream openClassfile(String classname){
  try {
    URLConnection con=openClassfile0(classname);
    if (con != null)     return con.getInputStream();
  }
 catch (  IOException e) {
  }
  return null;
}

public void removeIgnoredView(View v){
  mIgnoredViews.remove(v);
}

private double fitness(Solution solution,double[] weights){
  double max=Double.NEGATIVE_INFINITY;
  for (int i=0; i < solution.getNumberOfObjectives(); i++) {
    max=Math.max(max,Math.max(weights[i],0.0001) * Math.abs(solution.getObjective(i) - idealPoint[i]));
  }
  if (solution.violatesConstraints()) {
    max+=10000.0;
  }
  return max;
}

private boolean selectItemByName(CCombo combo,String name,String[] cString){
  for (int i=0; i < cString.length; i++) {
    String propName=cString[i];
    if (name.equalsIgnoreCase(propName)) {
      combo.select(i);
      return true;
    }
  }
  return false;
}

public void addFile(String path) throws IOException {
  File newFile=new File(path);
  if (!newFile.exists()) {
    throw new IOException("Could not add file to project: " + newFile.getAbsolutePath());
  }
  if (DelphiUtils.acceptFile(newFile.getAbsolutePath())) {
    files.add(newFile);
  }
}

public void removeLimitLine(LimitLine l){
  mLimitLines.remove(l);
}

public boolean isContent(){
  return state.equals(CONTENT);
}

protected boolean columnsDiffer(Column currentColumn,Column desiredColumn){
  String desiredDefault=desiredColumn.getDefaultValue();
  String currentDefault=currentColumn.getDefaultValue();
  boolean defaultsEqual=(desiredDefault == null) || desiredDefault.equals(currentDefault);
  boolean sizeMatters=databaseInfo.hasSize(currentColumn.getMappedTypeCode()) && (desiredColumn.getSize() != null);
  if ((databaseInfo.getTargetJdbcType(desiredColumn.getMappedTypeCode()) != currentColumn.getMappedTypeCode()) || (desiredColumn.isRequired() != currentColumn.isRequired()) || (sizeMatters && !StringUtils.equals(desiredColumn.getSize(),currentColumn.getSize()))|| !defaultsEqual) {
    return true;
  }
 else {
    return false;
  }
}

public static int readUINT16(InputStream stream) throws IOException {
  int result=stream.read();
  result|=stream.read() << 8;
  return result;
}

private void prepareMetadataConnection() throws SQLException, ReplicatorException {
  if (metadataConnection == null)   metadataConnection=dataSourceImpl.getConnection();
  long currentTime=System.currentTimeMillis();
  if (lastConnectionTime == 0) {
    lastConnectionTime=currentTime;
  }
 else   if (reconnectTimeoutInSeconds > 0 && currentTime - lastConnectionTime > reconnectTimeoutInSeconds * 1000) {
    dataSourceImpl.releaseConnection(metadataConnection);
    metadataConnection=dataSourceImpl.getConnection();
  }
}

public static String identifyLineDelimiter(String fileContent){
  if (fileContent.matches("(?s).*(\\r\\n).*")) {
    return "\r\n";
  }
 else   if (fileContent.matches("(?s).*(\\n).*")) {
    return "\n";
  }
 else   if (fileContent.matches("(?s).*(\\r).*")) {
    return "\r";
  }
 else {
    return "\n";
  }
}

public void addItem(ForceItem item){
  items.add(item);
}

public static List<String> makeBestTrailElementsForTrail(HttpServletRequest request,Delegator delegator,String categoryId,String productId){
  List<String> trail=CategoryWorker.getTrail(request);
  List<String> trailElements=null;
  if (categoryId != null) {
    if (trail == null || trail.size() < 1) {
      ;
    }
 else {
      ListIterator<String> li=trail.listIterator(trail.size());
      while (li.hasPrevious()) {
        String trailCatId=li.previous();
        if (categoryId.equals(trailCatId)) {
          trailElements=FastList.newInstance();
          trailElements.add(categoryId);
          break;
        }
      }
      if (trailElements == null) {
        li=trail.listIterator(trail.size());
        while (li.hasPrevious()) {
          String trailCatId=li.previous();
          if (CategoryWorker.isCategoryChildOf(request,trailCatId,categoryId)) {
            trailElements=FastList.newInstance();
            trailElements.add(trailCatId);
            trailElements.add(categoryId);
            break;
          }
        }
      }
    }
  }
 else {
    if (trail == null || trail.size() < 1) {
      ;
    }
 else {
      ListIterator<String> li=trail.listIterator(trail.size());
      while (li.hasPrevious()) {
        String trailCatId=li.previous();
        if (CategoryWorker.isCategoryContainsProduct(request,trailCatId,productId)) {
          trailElements=FastList.newInstance();
          trailElements.add(trailCatId);
          break;
        }
      }
    }
  }
  return trailElements;
}

public boolean deleteAttachmentPoint(DatapathId sw,OFPort port){
  AttachmentPoint ap=new AttachmentPoint(sw,port,new Date(0));
  if (this.oldAPs != null) {
    ArrayList<AttachmentPoint> apList=new ArrayList<AttachmentPoint>();
    apList.addAll(this.oldAPs);
    int index=apList.indexOf(ap);
    if (index > 0) {
      apList.remove(index);
      this.oldAPs=apList;
    }
  }
  if (this.attachmentPoints != null) {
    ArrayList<AttachmentPoint> apList=new ArrayList<AttachmentPoint>();
    apList.addAll(this.attachmentPoints);
    int index=apList.indexOf(ap);
    if (index > 0) {
      apList.remove(index);
      this.attachmentPoints=apList;
      return true;
    }
  }
  return false;
}

public void or(Criteria criteria){
  oredCriteria.add(criteria);
}

public void testConstructor2(){
  Executor e=Executors.newFixedThreadPool(1);
  SubmissionPublisher<Integer> p=new SubmissionPublisher<Integer>(e,8);
  checkInitialState(p);
  assertSame(p.getExecutor(),e);
  assertEquals(8,p.getMaxBufferCapacity());
}

protected void parseContainerAndScreen(XmlResourceParser parser,long[] out){
  if (HOTSEAT_CONTAINER_NAME.equals(getAttributeValue(parser,ATTR_CONTAINER))) {
    out[0]=LauncherSettings.Favorites.CONTAINER_HOTSEAT;
    long rank=Long.parseLong(getAttributeValue(parser,ATTR_RANK));
    out[1]=(rank < mHotseatAllAppsRank) ? rank : (rank + 1);
  }
 else {
    out[0]=LauncherSettings.Favorites.CONTAINER_DESKTOP;
    out[1]=Long.parseLong(getAttributeValue(parser,ATTR_SCREEN));
  }
}

public DefaultTreeColouring sampleTreeColouring(Tree tree,ColourChangeMatrix colourChangeMatrix,MetaPopulation mp){
  DefaultTreeColouring colouring=new DefaultTreeColouring(2,tree);
  double[] N=mp.getPopulationSizes(0);
  double[] rootPartials=prune(tree,tree.getRoot(),colourChangeMatrix,N);
  double normalization=0.0;
  for (int i=0; i < rootPartials.length; i++) {
    normalization+=colourChangeMatrix.getEquilibrium(i) * rootPartials[i];
  }
  sampleInternalNodes(tree,tree.getRoot(),colourChangeMatrix);
  sampleBranchColourings(colouring,tree,tree.getRoot(),colourChangeMatrix);
  double logP=calculateLogProbabilityDensity(colouring,tree,tree.getRoot(),colourChangeMatrix,N) - Math.log(normalization);
  colouring.setLogProbabilityDensity(logP);
  return colouring;
}

public StoredListIterator<T> establishListScan(boolean random_scan){
  if (isEmpty())   return null;
  StoredListIterator<T> slh=_SLHolderPool.get();
  StoredListIterator<T> res=establishPos(random_scan,slh);
  if (res == null)   slh.release();
  return res;
}

public void drag(long time,float x,float y,float deltaX,float deltaY,float totalX,float totalY){
  resetResizeTimeout(false);
  deltaX=MathUtils.flipSignIf(deltaX,LocalizationUtils.isLayoutRtl());
  mNewTabButton.drag(x,y);
  if (mLastPressedCloseButton != null) {
    if (!mLastPressedCloseButton.drag(x,y))     mLastPressedCloseButton=null;
  }
  if (mInReorderMode) {
    float accumulatedDeltaX=x - mLastReorderX;
    if (Math.abs(accumulatedDeltaX) >= 1.f) {
      if (!LocalizationUtils.isLayoutRtl()) {
        if (deltaX >= 1.f) {
          mReorderState|=REORDER_SCROLL_RIGHT;
        }
 else         if (deltaX <= -1.f) {
          mReorderState|=REORDER_SCROLL_LEFT;
        }
      }
 else {
        if (deltaX >= 1.f) {
          mReorderState|=REORDER_SCROLL_LEFT;
        }
 else         if (deltaX <= -1.f) {
          mReorderState|=REORDER_SCROLL_RIGHT;
        }
      }
      mLastReorderX=x;
      updateReorderPosition(accumulatedDeltaX);
    }
  }
 else   if (!mScroller.isFinished()) {
    mScroller.setFinalX((int)(mScroller.getFinalX() + deltaX));
  }
 else {
    float fastExpandDelta=calculateOffsetToMakeTabVisible(mInteractingTab,true,true,true);
    if (mInteractingTab != null && fastExpandDelta != 0.f) {
      if ((fastExpandDelta > 0 && deltaX > 0) || (fastExpandDelta < 0 && deltaX < 0)) {
        mScroller.startScroll(mScrollOffset,0,(int)fastExpandDelta,0,time,EXPAND_DURATION_MS);
      }
    }
 else {
      updateScrollOffsetPosition((int)(mScrollOffset + deltaX));
    }
  }
  if (!mInReorderMode) {
    final float absTotalX=Math.abs(totalX);
    final float absTotalY=Math.abs(totalY);
    if (totalY > mReorderMoveStartThreshold && absTotalX < mReorderMoveStartThreshold * 2.f && (absTotalX > EPSILON && (absTotalY / absTotalX) > TAN_OF_REORDER_ANGLE_START_THRESHOLD)) {
      startReorderMode(time,x,x - totalX);
    }
  }
  if (!mInReorderMode)   mInteractingTab=null;
  mUpdateHost.requestUpdate();
}

public static String decode(final String str,final String charsetName) throws UnsupportedEncodingException {
  return decode(new String(str.getBytes(charsetName),"UTF-8"));
}

public ServerCommit acquire(OperationEntry entry,ServerSessionContext session,long timestamp){
  ServerCommit commit=pool.poll();
  if (commit == null) {
    commit=new ServerCommit(this,log);
  }
  commit.reset(entry,session,timestamp);
  return commit;
}

public static synchronized double makeNoise(double mean,double standardDiviation){
  return random.nextGaussian() * Math.sqrt(standardDiviation) + mean;
}

void shutdown(){
  try {
    sslEngine.closeInbound();
  }
 catch (  SSLException e) {
    if (log.isDebugEnabled())     log.debug("Unable to correctly close inbound data stream (will ignore) [msg=" + e.getMessage() + ", ses="+ ses+ ']');
  }
}

@Override public synchronized void removeInstanceListener(InstanceListener tsl){
  m_instanceListeners.remove(tsl);
}

public Map<String,Map<String,Flt>> retrieveTerms(int docNum) throws IOException {
  return retrieveTerms(docNum,null);
}

boolean alias(String src,String target){
  if (src == null)   return false;
  PluginHolder<T> a=registry.get(src);
  if (a == null)   return false;
  PluginHolder<T> b=registry.get(target);
  if (b != null)   return false;
  registry.put(target,a);
  return true;
}

public static <T extends CharSequence>T eachMatch(T self,Pattern pattern,@ClosureParams(value=FromString.class,options={"List<String>","String[]"}) Closure closure){
  eachMatch(self.toString(),pattern,closure);
  return self;
}

public void switchSingleRow(){
  if (m_onlyMultiRow)   return;
  cardLayout.first(cardPanel);
  m_singleRow=true;
  dynamicDisplay(0);
}

private boolean isStringContinuation(int offset){
  int nextNonWSCharPosition=fScanner.findNonWhitespaceBackwardInAnyPartition(offset - 1,JavaHeuristicScanner.UNBOUND);
  try {
    if (nextNonWSCharPosition != JavaHeuristicScanner.NOT_FOUND && fDocument.getChar(nextNonWSCharPosition) == '"')     return true;
 else     return false;
  }
 catch (  BadLocationException e) {
    Log.error(JavaIndenter.class,e);
    return false;
  }
}

final void push(final Object object){
  stack.add(object);
}

public void makeImmutable(){
  mutable=false;
}

public static <K,V>V atomicGetOrCreate(ConcurrentMap<K,V> map,K key,Callable<V> ctor){
  V value=map.get(key);
  if (value == null) {
    try {
      value=ctor.call();
    }
 catch (    Exception e) {
      throw new RuntimeException("Element constructor should now throw an exception",e);
    }
    V existing=map.putIfAbsent(key,value);
    if (existing != null) {
      return existing;
    }
  }
  return value;
}

public void testMixed(){
  ArgumentParser parser=new ArgumentParser(new String[]{"-xcf","myfile.tgz","file1","file2","--verbose"},true);
  Iterator<String> iter=parser.iterator();
  assertEquals("-x",iter.next());
  assertEquals("-c",iter.next());
  assertEquals("-f",iter.next());
  assertEquals("myfile.tgz",iter.next());
  assertEquals("file1",iter.next());
  assertEquals("file2",iter.next());
  assertEquals("--verbose",iter.next());
  assertIteratorAtEnd(iter);
  parser=new ArgumentParser(new String[]{"-xcf","myfile.tgz","file1","file2","--verbose"},false);
  iter=parser.iterator();
  assertEquals("-xcf",iter.next());
  assertEquals("myfile.tgz",iter.next());
  assertEquals("file1",iter.next());
  assertEquals("file2",iter.next());
  assertEquals("--verbose",iter.next());
  assertIteratorAtEnd(iter);
  parser=new ArgumentParser(new String[]{"-xcf","=","=a","=ab","-=","-=a","--=","--=a","--a=b"},false);
  iter=parser.iterator();
  assertEquals("-xcf",iter.next());
  assertEquals("=",iter.next());
  assertEquals("=a",iter.next());
  assertEquals("=ab",iter.next());
  assertEquals("-=",iter.next());
  assertEquals("-=a",iter.next());
  assertEquals("--=",iter.next());
  assertEquals("--=a",iter.next());
  assertEquals("--a",iter.next());
  assertEquals("b",iter.next());
  assertIteratorAtEnd(iter);
}

private void createMetricChartPanel(int metric,DatasetGenerator datasetGenerator,List<GCStatsChartPanel> list){
  ChangingCategoryDatasetWithTTG dataset=datasetGenerator.newCategoryDatasetWithTTG(metric,false);
  GCStatsChartPanel panel=new MetricChartPanel(CHART_PREFIX + DatasetGenerator.getMetricName(metric),DatasetGenerator.getUnitName(metric),dataset,locker);
  list.add(panel);
}

public void testConstrStringWithExponentWithoutPoint2(){
  String a="-238768787678287e-214";
  int aScale=214;
  BigInteger bA=new BigInteger("-238768787678287");
  BigDecimal aNumber=new BigDecimal(a);
  assertEquals("incorrect value",bA,aNumber.unscaledValue());
  assertEquals("incorrect scale",aScale,aNumber.scale());
}

public DefaultClientWebRequestBuilder cookie(String name,String value){
  return cookie(new HttpCookie(name,value));
}

private void addNewTilesets(Map map) throws IOException {
  for (  TileSet set : map.getTileSets()) {
    setByName.put(set.getTilebmpFile(),set);
  }
  for (  String name : mapping.getNewSets()) {
    if (name.equals("")) {
      continue;
    }
    if (!setByName.containsKey(name)) {
      TileSet set=new TileSet();
      set.setName(constructTilesetName(name));
      BasicTileCutter cutter=new BasicTileCutter(32,32,0,0);
      set.importTileBitmap(name,cutter);
      setByName.put(name,set);
      map.addTileset(set);
    }
  }
}

public static List<CssMetaData<? extends Styleable,?>> createCssMetaDataList(List<CssMetaData<? extends Styleable,?>> baseList,CssMetaData<? extends Styleable,?>... metaData){
  List<CssMetaData<? extends Styleable,?>> styleables=new ArrayList<>(baseList);
  styleables.addAll(Arrays.asList(metaData));
  return Collections.unmodifiableList(styleables);
}

private String diff_linesToCharsMunge(String text,List<String> lineArray,Map<String,Integer> lineHash){
  int lineStart=0;
  int lineEnd=-1;
  String line;
  StringBuilder chars=new StringBuilder();
  while (lineEnd < text.length() - 1) {
    lineEnd=text.indexOf('\n',lineStart);
    if (lineEnd == -1) {
      lineEnd=text.length() - 1;
    }
    line=text.substring(lineStart,lineEnd + 1);
    lineStart=lineEnd + 1;
    if (lineHash.containsKey(line)) {
      chars.append(String.valueOf((char)(int)lineHash.get(line)));
    }
 else {
      lineArray.add(line);
      lineHash.put(line,lineArray.size() - 1);
      chars.append(String.valueOf((char)(lineArray.size() - 1)));
    }
  }
  return chars.toString();
}

public void addExtension(ASN1ObjectIdentifier oid,boolean critical,byte[] value){
  if (extensions.containsKey(oid)) {
    throw new IllegalArgumentException("extension " + oid + " already added");
  }
  extOrdering.addElement(oid);
  extensions.put(oid,new Extension(oid,critical,new DEROctetString(value)));
}

public void updateClientCookies(Boolean clientCookies) throws SecurityException {
  checkWriteAccess();
  boolean hasAccess=ConfigWebUtil.hasAccess(config,SecurityManager.TYPE_SETTING);
  if (!hasAccess)   throw new SecurityException("no access to update scope setting");
  Element scope=_getRootElement("scope");
  scope.setAttribute("setclientcookies",Caster.toString(clientCookies,""));
}

public double[] subseriesByCopy(double[] series,int start,int end) throws IndexOutOfBoundsException {
  if ((start > end) || (start < 0) || (end > series.length)) {
    throw new IndexOutOfBoundsException("Unable to extract subseries, series length: " + series.length + ", start: "+ start+ ", end: "+ String.valueOf(end - start));
  }
  return Arrays.copyOfRange(series,start,end);
}

public static String createTempFile(final String... lines) throws Exception {
  final File f=File.createTempFile("LDIFBasedTestCase",".txt");
  f.deleteOnExit();
  try (final FileWriter w=new FileWriter(f)){
    for (    final String s : lines) {
      w.write(s + System.getProperty("line.separator"));
    }
  }
   return f.getAbsolutePath();
}

public static void readSkel(BufferedReader reader) throws IOException {
  Vector lines=new Vector();
  StringBuffer section=new StringBuffer();
  String ln;
  while ((ln=reader.readLine()) != null) {
    if (ln.startsWith("---")) {
      lines.addElement(section.toString());
      section.setLength(0);
    }
 else {
      section.append(ln);
      section.append(NL);
    }
  }
  if (section.length() > 0)   lines.addElement(section.toString());
  if (lines.size() != size) {
    Out.error(ErrorMessages.WRONG_SKELETON);
    throw new GeneratorException();
  }
  line=new String[size];
  for (int i=0; i < size; i++)   line[i]=(String)lines.elementAt(i);
}

@Override public long readDouble(String filePath,long offset){
  FileChannel fileChannel=updateCache(filePath);
  ByteBuffer byteBffer=read(fileChannel,CarbonCommonConstants.LONG_SIZE_IN_BYTE,offset);
  return byteBffer.getLong();
}

public LuaCompiler(CompilerSettings settings){
  this.settings=Objects.requireNonNull(settings);
}

@SuppressWarnings("rawtypes") public void test_putGet3(){
  final List<IBindingSet[]> in=new LinkedList<IBindingSet[]>();
{
    final IVariable<?> x=Var.var("x");
    final IVariable<?> y=Var.var("y");
    final IVariable<?> z=Var.var("z");
{
      final List<IBindingSet> t=new LinkedList<IBindingSet>();
{
        final ListBindingSet b=new ListBindingSet();
        b.set(x,new Constant<IV>(termId));
        b.set(y,new Constant<IV>(termId2));
        t.add(b);
      }
{
        final ListBindingSet b=new ListBindingSet();
        b.set(x,new Constant<IV>(termId2));
        b.set(y,new Constant<IV>(inlineIV));
        b.set(z,new Constant<IV>(blobIV));
        t.add(b);
      }
      in.add(t.toArray(new IBindingSet[0]));
    }
  }
  final String solutionSet=getName();
  try {
    solutionSetsManager.getSolutions(solutionSet);
    fail("Expecting: " + IllegalStateException.class);
  }
 catch (  IllegalStateException ex) {
    if (log.isInfoEnabled())     log.info("Ignoring expected exception: " + ex);
  }
  solutionSetsManager.putSolutions(solutionSet,new CloseableIteratorWrapper<IBindingSet[]>(in.iterator()));
  final ICloseableIterator<IBindingSet[]> out=solutionSetsManager.getSolutions(solutionSet);
  assertSameSolutionsAnyOrder(flatten(in.iterator()),out);
}

public static void showAddressOnMap(Context mContext,String address){
  address=address.replace(' ','+');
  Intent geoIntent=new Intent(Intent.ACTION_VIEW,Uri.parse("geo:0,0?q=" + address));
  mContext.startActivity(geoIntent);
}

public Criteria createCriteria(){
  Criteria criteria=createCriteriaInternal();
  if (oredCriteria.size() == 0) {
    oredCriteria.add(criteria);
  }
  return criteria;
}

public void testCopyMap(){
  Serializer serializer=new Serializer();
  Map<String,String> map=new HashMap<>();
  map.put("foo","Hello world!");
  map.put("bar","Hello world again!");
  Map<String,String> result=serializer.copy(map);
  assertEquals(map,result);
  assertEquals(map.get("foo"),"Hello world!");
  assertEquals(map.get("bar"),"Hello world again!");
}

private void findBouncedInstrument(){
  for (  final ReceiptInstrumentInfo instrumentInfo : instrumentDetails)   if (instrumentInfo.isBounced())   bouncedInstruments.add(instrumentInfo);
}

public static Set<String> convertArrayToSet(String[] array){
  Set<String> resultSet=new HashSet<String>(array.length);
  Collections.addAll(resultSet,array);
  return resultSet;
}

public ParseFile(byte[] data){
  this(null,data,null);
}

private StoragePolicyEntity createStoragePolicyEntity(NamespaceEntity namespaceEntity,String storagePolicyName,StorageEntity storageEntity,StorageEntity destinationStorageEntity,StoragePolicyRuleTypeEntity storagePolicyRuleTypeEntity,Integer storagePolicyRuleValue,BusinessObjectDefinitionEntity businessObjectDefinitionEntity,String businessObjectFormatUsage,FileTypeEntity fileTypeEntity,StoragePolicyStatusEntity storagePolicyStatusEntity,Integer storagePolicyVersion,Boolean storagePolicyLatestVersion){
  StoragePolicyEntity storagePolicyEntity=new StoragePolicyEntity();
  storagePolicyEntity.setNamespace(namespaceEntity);
  storagePolicyEntity.setName(storagePolicyName);
  storagePolicyEntity.setStorage(storageEntity);
  storagePolicyEntity.setDestinationStorage(destinationStorageEntity);
  storagePolicyEntity.setStoragePolicyRuleType(storagePolicyRuleTypeEntity);
  storagePolicyEntity.setStoragePolicyRuleValue(storagePolicyRuleValue);
  storagePolicyEntity.setBusinessObjectDefinition(businessObjectDefinitionEntity);
  if (StringUtils.isNotBlank(businessObjectFormatUsage)) {
    storagePolicyEntity.setUsage(businessObjectFormatUsage);
  }
  storagePolicyEntity.setFileType(fileTypeEntity);
  storagePolicyEntity.setStatus(storagePolicyStatusEntity);
  storagePolicyEntity.setVersion(storagePolicyVersion);
  storagePolicyEntity.setLatestVersion(storagePolicyLatestVersion);
  return storagePolicyDao.saveAndRefresh(storagePolicyEntity);
}

public void drawStdDevLine(Graphics2D g2d,Long stdDevVal,long yMaxMark,Color color){
  float stdDevPerc=stdDevVal / (float)yMaxMark;
  g2d.setColor(color);
  int yPosOfLine=this.graphBottom - Math.round(this.graphHeight * stdDevPerc);
  g2d.drawLine(this.graphLeft,yPosOfLine,this.graphRight,yPosOfLine);
}

public SampleVcpc(IndependenceTest independenceTest){
  if (independenceTest == null) {
    throw new NullPointerException();
  }
  if (!(independenceTest instanceof IndTestFisherZ)) {
    throw new IllegalArgumentException("Need Fisher Z test to proceed with algorithm");
  }
  this.independenceTest=independenceTest;
  this.dataSet=(DataSet)independenceTest.getData();
  this.variables=dataSet.getVariables();
  this.covMatrix=new CovarianceMatrix(dataSet);
  List<Node> nodes=covMatrix.getVariables();
  this.indexMap=indexMap(variables);
  this.nameMap=mapNames(variables);
  this.nodesToVariables=new HashMap<>();
  this.variablesToNodes=new HashMap<>();
}

private int nextAvailableIdx(Collection<Integer> startedGrids,int maxTopSize,Random rnd){
  while (true) {
    int idx=rnd.nextInt(maxTopSize);
    if (!startedGrids.contains(idx))     return idx;
  }
}

public boolean hasColor(){
  return typeString.contains(COLOR);
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public ClearanceMatrix(int p_class_count,BrdLayerStructure p_layer_structure,String[] p_name_arr){
  class_count=Math.max(p_class_count,1);
  layer_structure=p_layer_structure;
  clearance_rows=new ClearanceMatrixRow[class_count];
  for (int index=0; index < class_count; ++index) {
    clearance_rows[index]=new ClearanceMatrixRow(this,p_name_arr[index]);
  }
  max_value_on_layer=new int[layer_structure.size()];
}

public static char[] concat(char[] base,char[] other,int appendCount){
  final int length=base.length;
  char[] newArray=copyFrom(base,base.length + appendCount);
  System.arraycopy(other,0,newArray,length,appendCount);
  return newArray;
}

public ArrayRealVector(ArrayRealVector v1,ArrayRealVector v2){
  data=new double[v1.data.length + v2.data.length];
  System.arraycopy(v1.data,0,data,0,v1.data.length);
  System.arraycopy(v2.data,0,data,v1.data.length,v2.data.length);
}

void addClassList(String classListFilename){
  if (classListFilename.length() > 0) {
    setOption("classlist",classListFilename);
    loadClassNames(classListFilename);
  }
 else {
    throw new IllegalArgumentException("class list name may not be empty string");
  }
}

private Start build(Start event){
  NamedNodeMap list=event.getAttributes();
  int length=list.getLength();
  for (int i=0; i < length; i++) {
    Node node=list.item(i);
    Attribute value=attribute(node);
    if (!value.isReserved()) {
      event.add(value);
    }
  }
  return event;
}

public BytesToNameCanonicalizer makeChild(boolean canonicalize,boolean intern){
  return new BytesToNameCanonicalizer(this,intern,_hashSeed,_tableInfo.get());
}

public static String encodeString(String s){
  return new String(encode(s.getBytes()));
}

public Instances retrieveInstances() throws Exception {
  return retrieveInstances(m_Query);
}

void extract(InputStream in,String files[]) throws IOException {
  ZipInputStream zis=new ZipInputStream(in);
  ZipEntry e;
  Set<ZipEntry> dirs=newDirSet();
  while ((e=zis.getNextEntry()) != null) {
    if (files == null) {
      dirs.add(extractFile(zis,e));
    }
 else {
      String name=e.getName();
      for (      String file : files) {
        if (name.startsWith(file)) {
          dirs.add(extractFile(zis,e));
          break;
        }
      }
    }
  }
  updateLastModifiedTime(dirs);
}

private int clampMag(int value,int absMin,int absMax){
  final int absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

public void testGetAccentColorsByName(){
  try {
    for (    String name : MaterialPalettes.COLORS_WITH_ACCENT_NAMES) {
      List<Integer> colorList=MaterialPalettes.getAccentColorsByName(name);
      assertEquals(MaterialPalettes.ACCENT_COLOR_LEVELS.length,colorList.size());
    }
  }
 catch (  IllegalAccessException iae) {
    fail();
  }
}

private static void drawChunk(Image image,Graphics g,boolean stretch,int dx1,int dy1,int dx2,int dy2,int sx1,int sy1,int sx2,int sy2,boolean xDirection){
  if (dx2 - dx1 <= 0 || dy2 - dy1 <= 0 || sx2 - sx1 <= 0 || sy2 - sy1 <= 0) {
    return;
  }
  if (stretch) {
    g.drawImage(image,dx1,dy1,dx2,dy2,sx1,sy1,sx2,sy2,null);
  }
 else {
    int xSize=sx2 - sx1;
    int ySize=sy2 - sy1;
    int deltaX;
    int deltaY;
    if (xDirection) {
      deltaX=xSize;
      deltaY=0;
    }
 else {
      deltaX=0;
      deltaY=ySize;
    }
    while (dx1 < dx2 && dy1 < dy2) {
      int newDX2=Math.min(dx2,dx1 + xSize);
      int newDY2=Math.min(dy2,dy1 + ySize);
      g.drawImage(image,dx1,dy1,newDX2,newDY2,sx1,sy1,sx1 + newDX2 - dx1,sy1 + newDY2 - dy1,null);
      dx1+=deltaX;
      dy1+=deltaY;
    }
  }
}

private void initSign(){
  messDigestTrees.reset();
  GMSSPrivateKeyParameters gmssPrivateKey=(GMSSPrivateKeyParameters)key;
  if (gmssPrivateKey.isUsed()) {
    throw new IllegalStateException("Private key already used");
  }
  if (gmssPrivateKey.getIndex(0) >= gmssPrivateKey.getNumLeafs(0)) {
    throw new IllegalStateException("No more signatures can be generated");
  }
  this.gmssPS=gmssPrivateKey.getParameters();
  this.numLayer=gmssPS.getNumOfLayers();
  byte[] seed=gmssPrivateKey.getCurrentSeeds()[numLayer - 1];
  byte[] OTSSeed=new byte[mdLength];
  byte[] dummy=new byte[mdLength];
  System.arraycopy(seed,0,dummy,0,mdLength);
  OTSSeed=gmssRandom.nextSeed(dummy);
  this.ots=new WinternitzOTSignature(OTSSeed,digestProvider.get(),gmssPS.getWinternitzParameter()[numLayer - 1]);
  byte[][][] helpCurrentAuthPaths=gmssPrivateKey.getCurrentAuthPaths();
  currentAuthPaths=new byte[numLayer][][];
  for (int j=0; j < numLayer; j++) {
    currentAuthPaths[j]=new byte[helpCurrentAuthPaths[j].length][mdLength];
    for (int i=0; i < helpCurrentAuthPaths[j].length; i++) {
      System.arraycopy(helpCurrentAuthPaths[j][i],0,currentAuthPaths[j][i],0,mdLength);
    }
  }
  index=new int[numLayer];
  System.arraycopy(gmssPrivateKey.getIndex(),0,index,0,numLayer);
  byte[] helpSubtreeRootSig;
  subtreeRootSig=new byte[numLayer - 1][];
  for (int i=0; i < numLayer - 1; i++) {
    helpSubtreeRootSig=gmssPrivateKey.getSubtreeRootSig(i);
    subtreeRootSig[i]=new byte[helpSubtreeRootSig.length];
    System.arraycopy(helpSubtreeRootSig,0,subtreeRootSig[i],0,helpSubtreeRootSig.length);
  }
  gmssPrivateKey.markUsed();
}

private static void decodeEdifactSegment(BitSource bits,StringBuilder result){
  do {
    if (bits.available() <= 16) {
      return;
    }
    for (int i=0; i < 4; i++) {
      int edifactValue=bits.readBits(6);
      if (edifactValue == 0x1F) {
        int bitsLeft=8 - bits.getBitOffset();
        if (bitsLeft != 8) {
          bits.readBits(bitsLeft);
        }
        return;
      }
      if ((edifactValue & 0x20) == 0) {
        edifactValue|=0x40;
      }
      result.append((char)edifactValue);
    }
  }
 while (bits.available() > 0);
}

public void write(byte[] b,int offset,int length) throws IOException {
  out.write(b,offset,length);
}

public SampleSet(DataInputStream is) throws IOException {
  int numSamples;
  sampleInfo=new SampleInfo(is);
  numSamples=is.readInt();
  this.samples=new Sample[numSamples];
  for (int i=0; i < numSamples; i++) {
    samples[i]=Sample.loadBinary(is);
  }
}

public void close(){
  running=false;
synchronized (histData) {
    histData.notify();
  }
}

public SQLiteDatabaseConfiguration(String path,@SQLiteDatabase.OpenFlags int openFlags){
  if (path == null) {
    throw new IllegalArgumentException("path must not be null.");
  }
  this.path=path;
  label=stripPathForLogs(path);
  this.openFlags=openFlags;
  maxSqlCacheSize=25;
  locale=Locale.getDefault();
}

private void printProperties(Properties properties) throws IOException {
  StringWriter stringBuffer=new StringWriter();
  BufferedReader reader=null;
  properties.store(stringBuffer,null);
  try {
    reader=new BufferedReader(new StringReader(stringBuffer.toString()));
    reader.readLine();
    String line=null;
    while ((line=reader.readLine()) != null) {
      writer.print("//");
      writer.println(line);
    }
  }
  finally {
    if (reader != null) {
      reader.close();
    }
  }
}

public static <T>Range<T> valueOf(String s,Class<T> clazz){
  char lbm=s.charAt(0);
  if (lbm != '[' && lbm != '(')   throw new IllegalArgumentException(s);
  char ubm=s.charAt(s.length() - 1);
  if (ubm != ']' && ubm != ')')   throw new IllegalArgumentException(s);
  BoundType lbt=lbm == '[' ? BoundType.CLOSED : BoundType.OPEN;
  BoundType ubt=ubm == ']' ? BoundType.CLOSED : BoundType.OPEN;
  s=s.substring(1,s.length() - 1);
  String[] parts=s.split("\\.\\.");
  String lbs=parts[0];
  String ubs=parts[1];
  T lowerBound=lbs.equals("*") ? null : boundValue(lbs,clazz);
  T upperBound=ubs.equals("*") ? null : boundValue(ubs,clazz);
  return range(lowerBound,lbt,upperBound,ubt);
}

public static DoubleVector dchisq(double x,DoubleVector ncp){
  int n=ncp.size();
  DoubleVector d=new DoubleVector(n);
  double xh=Math.sqrt(x);
  double mean;
  for (int i=0; i < n; i++) {
    mean=Math.sqrt(ncp.get(i));
    if (ncp.get(i) == 0.0)     d.set(i,dchisq(x));
 else     d.set(i,(dnorm(xh - mean) + dnorm(-xh - mean)) / (2 * xh));
  }
  return d;
}

@Override public void addPropertyChangeListener(PropertyChangeListener listener){
  propertyChangeSupport.addPropertyChangeListener(listener);
}

public void removeAllBaudRateQueryCallbacks(){
  baudRateQueryCallbacks.clear();
}

public void add(AbstractOption option){
  add(options.size(),option);
}

private void loadVerticesAndRelatives(){
  List<CnATreeElement> elementList=new LinkedList<CnATreeElement>();
  for (  IGraphElementLoader loader : getLoaderList()) {
    loader.setCnaTreeElementDao(getCnaTreeElementDao());
    elementList.addAll(loader.loadElements());
  }
  for (  CnATreeElement element : elementList) {
    graph.addVertex(element);
    if (LOG.isDebugEnabled()) {
      LOG.debug("Vertex added: " + element.getTitle());
    }
    uuidMap.put(element.getUuid(),element);
  }
  for (  CnATreeElement parent : elementList) {
    Set<CnATreeElement> children=parent.getChildren();
    for (    CnATreeElement child : children) {
      createParentChildEdge(parent,child);
    }
  }
}

private boolean hasNonSpecialAttribute(Collection<String> keys){
  for (  String attr : keys) {
    if (!attr.startsWith("_")) {
      return true;
    }
  }
  return false;
}

public static final void shuffle(double[] a,int start,int len,Random r){
  for (int i=start + len; i > 1; --i) {
    double t=a[i];
    int j=r.nextInt(i);
    a[i]=a[j];
    a[j]=t;
  }
}

public boolean isParityCorrect(byte[][] shards,int firstByte,int byteCount,byte[] tempBuffer){
  checkBuffersAndSizes(shards,firstByte,byteCount);
  if (tempBuffer.length < firstByte + byteCount) {
    throw new IllegalArgumentException("tempBuffer is not big enough");
  }
  byte[][] toCheck=new byte[parityShardCount][];
  System.arraycopy(shards,dataShardCount,toCheck,0,parityShardCount);
  return codingLoop.checkSomeShards(parityRows,shards,dataShardCount,toCheck,parityShardCount,firstByte,byteCount,tempBuffer);
}

public static void writeStream(InputStream in,File file) throws IOException {
  FileOutputStream out=new FileOutputStream(file);
  try {
    transfer(in,out);
  }
  finally {
    try {
      out.flush();
    }
  finally {
      out.close();
    }
  }
}

private static native long createEntityParser(long parentPointer,String context);

public void firePropertyChange(String propertyName,byte oldValue,byte newValue){
  if (changeSupport == null || oldValue == newValue) {
    return;
  }
  firePropertyChange(propertyName,Byte.valueOf(oldValue),Byte.valueOf(newValue));
}

private int adjustOffsetForUnitTests(int offset){
  if (System.getProperty("fdbunit") == null)   return offset;
 else   return 0;
}

private boolean checkTouchSlop(View child,float dx,float dy){
  if (child == null) {
    return false;
  }
  final boolean checkHorizontal=mCallback.getViewHorizontalDragRange(child) > 0;
  final boolean checkVertical=mCallback.getViewVerticalDragRange(child) > 0;
  if (checkHorizontal && checkVertical) {
    return dx * dx + dy * dy > mTouchSlop * mTouchSlop;
  }
 else   if (checkHorizontal) {
    return Math.abs(dx) > mTouchSlop;
  }
 else   if (checkVertical) {
    return Math.abs(dy) > mTouchSlop;
  }
  return false;
}

public static boolean isAix(){
  return osName.indexOf("AIX") > -1;
}

private double testFit(double[] x,double[] test,Distribution dist) throws ArithmeticException {
  for (int i=0; i < test.length; i++) {
    test[i]=dist.cdf(x[i]);
    if (test[i] > 1.) {
      test[i]=1.;
    }
    if (test[i] < 0.) {
      test[i]=0.;
    }
    if (Double.isNaN(test[i])) {
      throw new ArithmeticException("Got NaN after fitting " + dist.toString());
    }
  }
  Arrays.sort(test);
  return KolmogorovSmirnovTest.simpleTest(test);
}

public boolean supportsSQL(){
  return false;
}

private static Boolean isValidIPV4(final String ipAddress){
  boolean status=false;
  if (StringUtils.isNotEmpty(ipAddress)) {
    status=InetAddressUtils.isIPv4Address(ipAddress);
  }
  return status;
}

private int decryptBlockWithIV(byte[] in,int inOff,byte[] out,int outOff) throws DataLengthException, IllegalStateException {
  if ((inOff + blockSize) > in.length) {
    throw new DataLengthException("input buffer too short");
  }
  if ((outOff + blockSize) > out.length) {
    throw new DataLengthException("output buffer too short");
  }
  if (count == 0) {
    for (int n=0; n < blockSize; n++) {
      FR[n]=in[inOff + n];
    }
    cipher.processBlock(FR,0,FRE,0);
    count+=blockSize;
    return 0;
  }
 else   if (count == blockSize) {
    System.arraycopy(in,inOff,tmp,0,blockSize);
    System.arraycopy(FR,2,FR,0,blockSize - 2);
    FR[blockSize - 2]=tmp[0];
    FR[blockSize - 1]=tmp[1];
    cipher.processBlock(FR,0,FRE,0);
    for (int n=0; n < blockSize - 2; n++) {
      out[outOff + n]=encryptByte(tmp[n + 2],n);
    }
    System.arraycopy(tmp,2,FR,0,blockSize - 2);
    count+=2;
    return blockSize - 2;
  }
 else   if (count >= blockSize + 2) {
    System.arraycopy(in,inOff,tmp,0,blockSize);
    out[outOff + 0]=encryptByte(tmp[0],blockSize - 2);
    out[outOff + 1]=encryptByte(tmp[1],blockSize - 1);
    System.arraycopy(tmp,0,FR,blockSize - 2,2);
    cipher.processBlock(FR,0,FRE,0);
    for (int n=0; n < blockSize - 2; n++) {
      out[outOff + n + 2]=encryptByte(tmp[n + 2],n);
    }
    System.arraycopy(tmp,2,FR,0,blockSize - 2);
  }
  return blockSize;
}

public static PTABridge v(){
  return v;
}

public void registerCacheUpdatePeriodChangeListener(final PropertyChangeListener listener){
  cacheUpdatePeriodListeners.add(listener);
}

public void makeImmutable(){
}

public void testNullStoredField() throws Exception {
  Directory dir=newDirectory();
  Analyzer analyzer=new MockAnalyzer(random());
  IndexWriter iw=new IndexWriter(dir,new IndexWriterConfig(analyzer));
  Document doc=new Document();
  iw.addDocument(doc);
  expectThrows(IllegalArgumentException.class,null);
  assertNull(iw.getTragicException());
  iw.close();
  DirectoryReader r=DirectoryReader.open(dir);
  assertEquals(1,r.numDocs());
  r.close();
  dir.close();
}

public void addUpdateListener(AnimatorUpdateListener listener){
  if (mUpdateListeners == null) {
    mUpdateListeners=new ArrayList<AnimatorUpdateListener>();
  }
  mUpdateListeners.add(listener);
}

public String encode(){
  StringBuffer sb=new StringBuffer();
  encode(sb);
  return sb.toString();
}

public static Document readDocument(String fileName) throws SAXException, IOException {
  DocumentBuilder docBuilder;
  Document result=null;
  DocumentBuilderFactory docBuilderFactory=DocumentBuilderFactory.newInstance();
  docBuilderFactory.setIgnoringElementContentWhitespace(true);
  try {
    docBuilder=docBuilderFactory.newDocumentBuilder();
  }
 catch (  ParserConfigurationException e) {
    throw new Error(e);
  }
  File sourceFile=new File(fileName);
  result=docBuilder.parse(sourceFile);
  return result;
}

@Override public double[] analyse(double[] aFrame){
  if (aFrame.length != frameLength)   throw new IllegalArgumentException("Expected frame of length " + frameLength + ", got "+ aFrame.length);
  double[] real=new double[fftSize];
  double[] imag=new double[fftSize];
  System.arraycopy(aFrame,0,real,0,aFrame.length);
  FFT.transform(real,imag,false);
  MathUtils.toPolarCoordinates(real,imag);
  real=MathUtils.log(real);
  Arrays.fill(imag,0.);
  double b=5000;
  int bIndex=(int)(b / frequencyResolution);
  double[] invReal;
  double[] invImag;
  if (invFftSize == fftSize) {
    invReal=real;
    invImag=imag;
  }
 else {
    invReal=new double[invFftSize];
    System.arraycopy(real,0,invReal,0,bIndex + 1);
    invImag=new double[invFftSize];
  }
  for (int i=bIndex + 1; i < invFftSize / 2; i++) {
    invReal[i]=invReal[bIndex];
  }
  for (int i=0; i < invFftSize / 2; i++) {
    invReal[invFftSize - i - 1]=invReal[i];
  }
  FFT.transform(invReal,invImag,true);
  return invReal;
}

public SearchSourceBuilder scriptField(String name,Script script){
  if (scriptFields == null) {
    scriptFields=new ArrayList<>();
  }
  scriptFields.add(new ScriptField(name,script));
  return this;
}

public void fixedAspectResizeInner(RectF newInner){
  Matrix m=getRotMatrix();
  Matrix m0=getInverseRotMatrix();
  float aspectW=inner.width();
  float aspectH=inner.height();
  float aspRatio=aspectW / aspectH;
  float[] corners=CropMath.getCornersFromRect(outer);
  m.mapPoints(corners);
  float[] oldInnerCorners=CropMath.getCornersFromRect(inner);
  float[] newInnerCorners=CropMath.getCornersFromRect(newInner);
  int fixed=-1;
  if (inner.top == newInner.top) {
    if (inner.left == newInner.left)     fixed=0;
 else     if (inner.right == newInner.right)     fixed=2;
  }
 else   if (inner.bottom == newInner.bottom) {
    if (inner.right == newInner.right)     fixed=4;
 else     if (inner.left == newInner.left)     fixed=6;
  }
  if (fixed == -1)   return;
  float widthSoFar=newInner.width();
  int moved=-1;
  for (int i=0; i < newInnerCorners.length; i+=2) {
    float[] c={newInnerCorners[i],newInnerCorners[i + 1]};
    float[] c0=Arrays.copyOf(c,2);
    m0.mapPoints(c0);
    if (!CropMath.inclusiveContains(outer,c0[0],c0[1])) {
      moved=i;
      if (moved == fixed)       continue;
      float[] l2=CropMath.closestSide(c,corners);
      float[] l1={newInnerCorners[i],newInnerCorners[i + 1],oldInnerCorners[i],oldInnerCorners[i + 1]};
      float[] p=GeometryMathUtils.lineIntersect(l1,l2);
      if (p == null) {
        p=new float[2];
        p[0]=oldInnerCorners[i];
        p[1]=oldInnerCorners[i + 1];
      }
      float fixed_x=oldInnerCorners[fixed];
      float fixed_y=oldInnerCorners[fixed + 1];
      float newWidth=Math.abs(fixed_x - p[0]);
      float newHeight=Math.abs(fixed_y - p[1]);
      newWidth=Math.max(newWidth,aspRatio * newHeight);
      if (newWidth < widthSoFar)       widthSoFar=newWidth;
    }
  }
  float heightSoFar=widthSoFar / aspRatio;
  RectF ret=new RectF(inner);
  if (fixed == 0) {
    ret.right=ret.left + widthSoFar;
    ret.bottom=ret.top + heightSoFar;
  }
 else   if (fixed == 2) {
    ret.left=ret.right - widthSoFar;
    ret.bottom=ret.top + heightSoFar;
  }
 else   if (fixed == 4) {
    ret.left=ret.right - widthSoFar;
    ret.top=ret.bottom - heightSoFar;
  }
 else   if (fixed == 6) {
    ret.right=ret.left + widthSoFar;
    ret.top=ret.bottom - heightSoFar;
  }
  float[] retCorners=CropMath.getCornersFromRect(ret);
  m0.mapPoints(retCorners);
  innerRotated=retCorners;
  reconstrain();
}

public static <T>T withObjectStreams(Socket socket,@ClosureParams(value=SimpleType.class,options={"java.io.ObjectInputStream","java.io.ObjectOutputStream"}) Closure<T> closure) throws IOException {
  InputStream input=socket.getInputStream();
  OutputStream output=socket.getOutputStream();
  ObjectOutputStream oos=new ObjectOutputStream(output);
  ObjectInputStream ois=new ObjectInputStream(input);
  try {
    T result=closure.call(new Object[]{ois,oos});
    InputStream temp1=ois;
    ois=null;
    temp1.close();
    temp1=input;
    input=null;
    temp1.close();
    OutputStream temp2=oos;
    oos=null;
    temp2.close();
    temp2=output;
    output=null;
    temp2.close();
    return result;
  }
  finally {
    closeWithWarning(ois);
    closeWithWarning(input);
    closeWithWarning(oos);
    closeWithWarning(output);
  }
}

public JFileDataStoreChooser(Shell parent,int style,final String[] extensions){
  this(parent,style,associations(Arrays.asList(extensions)));
}

private void adjustAlignment(int align,int curAlign){
  if ((!FIXED_WIDTH) && (align != curAlign)) {
    if (curLine.getComponentCount() == 0) {
      curLine.setLayout(new FlowLayout(curAlign));
    }
  }
}

public boolean writeHeader(OutputStream os){
  try {
    writeInt(os,CACHE_MAGIC);
    writeString(os,key);
    writeString(os,etag == null ? "" : etag);
    writeLong(os,serverDate);
    writeLong(os,lastModified);
    writeLong(os,ttl);
    writeLong(os,softTtl);
    writeStringStringMap(responseHeaders,os);
    os.flush();
    return true;
  }
 catch (  IOException e) {
    VolleyLog.d("%s",e.toString());
    return false;
  }
}

public void removeListener(TrackingListener listener){
  listeners.remove(listener);
}

void createImpl(boolean stream) throws SocketException {
  if (impl == null)   setImpl();
  try {
    impl.create(stream);
    created=true;
  }
 catch (  IOException e) {
    throw new SocketException(e.getMessage());
  }
}

public synchronized byte[] toByteArray(){
  int remaining=count;
  if (remaining == 0) {
    return EMPTY_BYTE_ARRAY;
  }
  byte newbuf[]=new byte[remaining];
  int pos=0;
  for (  byte[] buf : buffers) {
    int c=Math.min(buf.length,remaining);
    System.arraycopy(buf,0,newbuf,pos,c);
    pos+=c;
    remaining-=c;
    if (remaining == 0) {
      break;
    }
  }
  return newbuf;
}

public boolean shExpMatch(String str,String shexp){
  StringTokenizer tokenizer=new StringTokenizer(shexp,"*");
  int startPos=0;
  while (tokenizer.hasMoreTokens()) {
    String token=tokenizer.nextToken();
    int temp=str.indexOf(token,startPos);
    if (startPos == 0 && !shexp.startsWith("*") && temp != 0) {
      return false;
    }
    if (!tokenizer.hasMoreTokens() && !shexp.endsWith("*") && !str.endsWith(token)) {
      return false;
    }
    if (temp == -1) {
      return false;
    }
 else {
      startPos=temp + token.length();
    }
  }
  return true;
}

public char peek(){
  return isEmpty() ? 0 : queue.charAt(pos);
}

private String[] parentKey(String name,int idx){
  String[] parts=name.split("\\.");
  if (idx > parts.length)   return null;
  String parent="";
  String key=null;
  if (idx < parts.length)   key=parts[idx];
  for (int i=0; i < idx; i++) {
    parent=parent.length() > 0 ? parent + "." + parts[i] : parts[i];
  }
  return new String[]{parent,key};
}

public DiphoneUnitDatabase(URL url,boolean isBinary) throws IOException {
  if (!useIndexing || useCache) {
    diphoneMap=new LinkedHashMap();
  }
  InputStream is=Utilities.getInputStream(url);
  indexName=getIndexName(url.toString());
  if (isBinary) {
    loadBinary(is);
  }
 else {
    loadText(is);
  }
  is.close();
  sampleInfo=new SampleInfo(sampleRate,numChannels,residualFold,lpcMin,lpcRange,0.0f);
}

public static List<NotificationDto> transformToDto(List<Notification> notifications){
  if (notifications == null) {
    throw new WebApplicationException("Null entity object cannot be converted to Dto object.",Status.INTERNAL_SERVER_ERROR);
  }
  List<NotificationDto> result=new ArrayList<NotificationDto>();
  for (  Notification notification : notifications) {
    result.add(transformToDto(notification));
  }
  return result;
}

public void writeTo(final PacketOutputStream os){
  os.write(ParameterWriter.QUOTE);
  os.write(dateToByte());
  ParameterWriter.formatMicroseconds(os,ts.getNanos() / 1000,fractionalSeconds);
  os.write(ParameterWriter.QUOTE);
}

public long skip(long n) throws IOException, LogException {
  if (length < n)   badRead((int)n);
  n=in.skip(n);
  length-=(int)n;
  return n;
}

public DriverTask discoverStorageProvider(StorageProvider storageProvider,List<StorageSystem> storageSystems){
  DellSCDriverTask task=new DellSCDriverTask("discover");
  try {
    LOG.info("Getting information for storage provider [{}:{}] as user {}",storageProvider.getProviderHost(),storageProvider.getPortNumber(),storageProvider.getUsername());
    StorageCenterAPI api=connectionManager.getConnection(storageProvider.getProviderHost(),storageProvider.getPortNumber(),storageProvider.getUsername(),storageProvider.getPassword(),true);
    LOG.info("Connected to DSM {} as user {}",storageProvider.getProviderHost(),storageProvider.getUsername());
    storageProvider.setAccessStatus(AccessStatus.READ_WRITE);
    storageProvider.setManufacturer("Dell");
    storageProvider.setProviderVersion(driverVersion);
    storageProvider.setIsSupportedVersion(true);
    EmDataCollector em=api.getDSMInfo();
    if (em != null) {
      LOG.info("Connected to {} DSM version {}, Java version {}",em.type,em.version,em.javaVersion);
      storageProvider.setProviderVersion(em.version);
    }
    StorageCenter[] scs=api.getStorageCenterInfo();
    for (    StorageCenter sc : scs) {
      StorageSystem storageSystem=util.getStorageSystemFromStorageCenter(api,sc,null);
      storageSystem.setSystemType(driverName);
      storageSystems.add(storageSystem);
    }
    task.setStatus(DriverTask.TaskStatus.READY);
  }
 catch (  Exception e) {
    String msg=String.format("Exception encountered getting storage provider information: %s",e);
    LOG.error(msg);
    task.setFailed(msg);
  }
  return task;
}

public void zoomIn(){
  zoomIn(null);
}

public void removeResponseCodeListener(ActionListener a){
  responseCodeListeners.removeElement(a);
}

public InputFieldDialog(final String CAPTION_KEY,final String LABEL_KEY){
  String caption=I18n.tr(CAPTION_KEY);
  Frame frame=GUIMediator.getAppFrame();
  _dialog=new JDialog(frame,caption,true);
  _dialog.setSize(340,180);
  LabeledComponent component=new LabeledComponent(LABEL_KEY,TEXT_FIELD,LabeledComponent.LEFT_GLUE);
  String[] buttonLabelKeys={I18n.tr("OK"),I18n.tr("Cancel")};
  String[] buttonLabelTips={I18n.tr("Apply Operation"),I18n.tr("Cancel Operation")};
  ActionListener[] buttonListeners={new OKListener(),new CancelListener()};
  ButtonRow buttons=new ButtonRow(buttonLabelKeys,buttonLabelTips,buttonListeners,ButtonRow.X_AXIS,ButtonRow.LEFT_GLUE);
  Container contentPane=_dialog.getContentPane();
  BoxPanel componentPanel=new BoxPanel(BoxPanel.Y_AXIS);
  componentPanel.add(Box.createVerticalGlue());
  componentPanel.add(component.getComponent());
  componentPanel.add(Box.createVerticalGlue());
  MAIN_PANEL.add(componentPanel);
  MAIN_PANEL.add(Box.createVerticalGlue());
  MAIN_PANEL.add(buttons);
  contentPane.add(MAIN_PANEL);
}

public EntityLoadInfo create(Entity entity){
  return create(entity,null);
}

public Float(Point2D pt2D){
  setLatLon(pt2D.getY(),pt2D.getX(),false);
}

public final static boolean isPotentialZipArchive(String name){
  int lastDot=name.lastIndexOf('.');
  if (lastDot == -1)   return false;
  if (name.lastIndexOf(File.separatorChar) > lastDot)   return false;
  int length=name.length();
  int extensionLength=length - lastDot - 1;
  if (extensionLength == EXTENSION_java.length()) {
    for (int i=extensionLength - 1; i >= 0; i--) {
      if (Character.toLowerCase(name.charAt(length - extensionLength + i)) != EXTENSION_java.charAt(i)) {
        break;
      }
      if (i == 0) {
        return false;
      }
    }
  }
  if (extensionLength == EXTENSION_class.length()) {
    for (int i=extensionLength - 1; i >= 0; i--) {
      if (Character.toLowerCase(name.charAt(length - extensionLength + i)) != EXTENSION_class.charAt(i)) {
        return true;
      }
    }
    return false;
  }
  return true;
}

public void open() throws IOException {
  connection=new DatagramSocket();
  connection.setSoTimeout(timeout);
}

@Override protected int sizeOf(String key,BitmapDrawable value){
  final int bitmapSize=getBitmapSize(value) / 1024;
  return bitmapSize == 0 ? 1 : bitmapSize;
}

default void forEachRemaining(IntConsumer action){
  Objects.requireNonNull(action);
  while (hasNext())   action.accept(nextInt());
}

private boolean isCI(){
  return Objects.equals(System.getenv("CI"),"true");
}

public DockNode(Node contents,String title){
  this(contents,title,null);
}

public void test2033092(){
  RelativeDateFormat rdf=new RelativeDateFormat();
  rdf.setShowZeroDays(false);
  rdf.setShowZeroHours(false);
  rdf.setMinuteSuffix(":");
  rdf.setHourSuffix(":");
  rdf.setSecondSuffix("");
  DecimalFormat hoursFormatter=new DecimalFormat();
  hoursFormatter.setMaximumFractionDigits(0);
  hoursFormatter.setMaximumIntegerDigits(2);
  hoursFormatter.setMinimumIntegerDigits(2);
  rdf.setHourFormatter(hoursFormatter);
  DecimalFormat minsFormatter=new DecimalFormat();
  minsFormatter.setMaximumFractionDigits(0);
  minsFormatter.setMaximumIntegerDigits(2);
  minsFormatter.setMinimumIntegerDigits(2);
  rdf.setMinuteFormatter(minsFormatter);
  DecimalFormat secondsFormatter=new DecimalFormat();
  secondsFormatter.setMaximumFractionDigits(0);
  secondsFormatter.setMaximumIntegerDigits(2);
  secondsFormatter.setMinimumIntegerDigits(2);
  rdf.setSecondFormatter(secondsFormatter);
  String s=rdf.format(new Date(2 * 60L * 60L* 1000L + 122500L));
  assertEquals("02:02:02",s);
}

public static int readSingleByte(InputStream in) throws IOException {
  byte[] buffer=new byte[1];
  int result=in.read(buffer,0,1);
  return (result != -1) ? buffer[0] & 0xff : -1;
}

public static long parseId(Uri contentUri){
  String last=contentUri.getLastPathSegment();
  return last == null ? -1 : Long.parseLong(last);
}

public void disableVM(String hostname,long durationMillis) throws IllegalStateException {
  logger.info("Disable VM " + hostname + " for "+ durationMillis+ " millis");
  assignableVMs.disableUntil(hostname,System.currentTimeMillis() + durationMillis);
}

protected final void endOfInput() throws IOException {
  if (cacheRequest != null) {
    cacheBody.close();
  }
  httpEngine.release(false);
}

public int left(){
  return data.length() - pos;
}

public FeatureSet combine(final FeatureSet other){
  final Set<Feature> enabled=new HashSet<>(this.enabled);
  enabled.addAll(other.enabled);
  final Set<Feature> disabled=new HashSet<>(this.disabled);
  disabled.addAll(other.disabled);
  return new FeatureSet(enabled,disabled);
}

public void removeInterval(final BatchWriter writer,final TemporalInterval interval,final Statement statement) throws MutationsRejectedException {
  final Text cf=new Text(StatementSerializer.writeContext(statement));
  final Text cqBegin=new Text(KeyParts.CQ_BEGIN);
  final Text cqEnd=new Text(KeyParts.CQ_END);
  Text keyText=new Text(interval.getAsKeyBeginning());
  KeyParts.appendUniqueness(statement,keyText);
  Mutation m=new Mutation(keyText);
  m.putDelete(cf,cqBegin);
  writer.addMutation(m);
  keyText=new Text(interval.getAsKeyEnd());
  KeyParts.appendUniqueness(statement,keyText);
  m=new Mutation(keyText);
  m.putDelete(cf,cqEnd);
  writer.addMutation(m);
}

public static final String removeDataFolderPath(String fullPath){
  File sdCard=Environment.getExternalStorageDirectory();
  String dataFolderPath=sdCard.getAbsolutePath() + "/" + MainApp.getDataFolder()+ "/";
  if (fullPath.indexOf(dataFolderPath) == 0) {
    return fullPath.substring(dataFolderPath.length());
  }
  return fullPath;
}

protected Character isWFXMLChar(String chardata){
  Character refInvalidChar;
  if (chardata == null || (chardata.length() == 0)) {
    return null;
  }
  char[] dataarray=chardata.toCharArray();
  int datalength=dataarray.length;
  if (fIsXMLVersion11) {
    int i=0;
    while (i < datalength) {
      if (XML11Char.isXML11Invalid(dataarray[i++])) {
        char ch=dataarray[i - 1];
        if (XMLChar.isHighSurrogate(ch) && i < datalength) {
          char ch2=dataarray[i++];
          if (XMLChar.isLowSurrogate(ch2) && XMLChar.isSupplemental(XMLChar.supplemental(ch,ch2))) {
            continue;
          }
        }
        refInvalidChar=new Character(ch);
        return refInvalidChar;
      }
    }
  }
 else {
    int i=0;
    while (i < datalength) {
      if (XMLChar.isInvalid(dataarray[i++])) {
        char ch=dataarray[i - 1];
        if (XMLChar.isHighSurrogate(ch) && i < datalength) {
          char ch2=dataarray[i++];
          if (XMLChar.isLowSurrogate(ch2) && XMLChar.isSupplemental(XMLChar.supplemental(ch,ch2))) {
            continue;
          }
        }
        refInvalidChar=new Character(ch);
        return refInvalidChar;
      }
    }
  }
  return null;
}

default CompletableFuture<Optional<R>> matchAsync(final Executor executor,final T value){
  return CompletableFuture.supplyAsync(null,executor);
}

public static void main(String[] args) throws FormatException {
  Debug.init();
  if (args.length == 0) {
    Debug.output("Usage: java com.bbn.openmap.layer.vpf.GenerateVPFProperties <path to vpf database directory> <path to vpf database directory> ...");
    System.exit(0);
  }
  for (int argsi=0; argsi < args.length; argsi++) {
    rootpath=args[argsi];
    LibrarySelectionTable lst=new LibrarySelectionTable(rootpath);
    if (Debug.debugging("vpf")) {
      Debug.output("Path to database: " + rootpath);
      Debug.output("Database Name: " + lst.getDatabaseName());
    }
    println("### Generated openmap.properties for");
    println("# VPF Data at: " + rootpath);
    println("# Description: " + lst.getDatabaseDescription());
    List<String> libraries=lst.getLibraryNames();
    if (Debug.debugging("vpf")) {
      print("Database Libraries: ");
      for (      String libraryName : libraries) {
        print(libraryName," ");
      }
      println();
      println();
    }
    for (    String libraryName : libraries) {
      String prefix=lst.getDatabaseName() + "_" + libraryName;
      println("# Library: " + prefix);
      printLibrary(prefix,lst.getCAT(libraryName));
      println();
    }
  }
}

private static String wildcardToRegex(String pattern){
  return "^" + StringUtils.replaceEach(escapeRegexp(pattern),new String[]{"\\*","\\?"},new String[]{".*","."}) + "$";
}

protected void clearCache(){
  if (_cache != null) {
    _cache.clear();
    _cache=null;
  }
}

public String sqlAD_getCustomEntityTypes(String vendorName,String catalogName,String schemaName){
  String tableName="AD_EntityType";
  ArrayList<String> columnNames=new ArrayList<String>();
  columnNames.add("EntityType");
  ArrayList<String> aliasNames=new ArrayList<String>();
  aliasNames.add("ENTITYTYPE");
  ArrayList<String> conditions=new ArrayList<String>();
  conditions.add("EntityType NOT IN ('C', 'D')");
  ArrayList<String> sortColumns=new ArrayList<String>();
  sortColumns.add("1");
  return sql_select(vendorName,catalogName,schemaName,tableName,null,columnNames,aliasNames,conditions,sortColumns,false);
}

public void paintComponent(Graphics g){
  int x=PADDING;
  int y=PADDING;
  g.drawImage(picture,x,y,scaleW,scaleH,null);
  x+=scaleW + PADDING;
  g.drawImage(picture,x,y,x + scaleW,y + scaleH,0,0,picture.getWidth(),picture.getHeight(),null);
  x+=scaleW + PADDING;
  Graphics2D g2d=(Graphics2D)g.create();
  g2d.translate(x,y);
  g2d.scale(SCALE_FACTOR,SCALE_FACTOR);
  g2d.drawImage(picture,0,0,null);
  g2d.dispose();
  x+=scaleW + PADDING;
  g2d=(Graphics2D)g.create();
  AffineTransform at=new AffineTransform();
  at.translate(x,y);
  at.scale(SCALE_FACTOR,SCALE_FACTOR);
  g2d.drawImage(picture,at,null);
  g2d.dispose();
  x+=scaleW + PADDING;
  Image scaledImg=picture.getScaledInstance(scaleW,scaleH,Image.SCALE_DEFAULT);
  g.drawImage(scaledImg,x,y,null);
}

public int hashCode(){
  return idType.hashCode();
}

private static void backupAudioConfig(){
  if (null != mRestoreAudioConfigTimer) {
    mRestoreAudioConfigTimer.cancel();
    mRestoreAudioConfigTimer=null;
    mRestoreAudioConfigTimerMask=null;
  }
 else   if (null == mAudioMode) {
    AudioManager audioManager=getAudioManager();
    mAudioMode=audioManager.getMode();
    mIsSpeakerOn=audioManager.isSpeakerphoneOn();
  }
}

public static String buildImdnDeliveryReport(String msgId,ImdnDocument.DeliveryStatus status,long timestamp){
  String method;
switch (status) {
case DISPLAYED:
    method="display-notification";
  break;
case DELIVERED:
method="delivery-notification";
break;
default :
method="processing-notification";
break;
}
return "<?xml version=\"1.0\" encoding=\"" + UTF8_STR + "\"?>"+ CRLF+ "<imdn xmlns=\"urn:ietf:params:xml:ns:imdn\">"+ CRLF+ "<message-id>"+ msgId+ "</message-id>"+ CRLF+ "<datetime>"+ DateUtils.encodeDate(timestamp)+ "</datetime>"+ CRLF+ "<"+ method+ "><status><"+ status+ "/></status></"+ method+ ">"+ CRLF+ "</imdn>";
}

private SpeedrunsLiveRequest(){
  super(URL);
}

public static Bitmap decodeResourceWithBackouts(Resources res,BitmapFactory.Options options,int id){
  boolean noBitmap=true;
  int num_tries=0;
  if (options.inSampleSize < 1) {
    options.inSampleSize=1;
  }
  Bitmap bmap=null;
  while (noBitmap) {
    try {
      bmap=BitmapFactory.decodeResource(res,id,options);
      noBitmap=false;
    }
 catch (    java.lang.OutOfMemoryError e) {
      if (++num_tries >= BITMAP_LOAD_BACKOUT_ATTEMPTS) {
        throw e;
      }
      bmap=null;
      System.gc();
      options.inSampleSize*=2;
    }
  }
  return bmap;
}

public void clear(){
  oredCriteria.clear();
  orderByClause=null;
  distinct=false;
}

public void readDataFile(String content) throws DataFileException {
  if (content == null || content.length() <= 0)   throw new IllegalStateException("Content is empty, can't read file");
  ByteArrayInputStream bis=new ByteArrayInputStream(content.getBytes());
  readDataFile(bis,null);
}

public static String readUTF(DataInput in) throws IOException {
  return DataInputStream.readUTF(in);
}

protected Object lazilyLoadDesktopProperty(String name){
  if (name.startsWith("gtk.icon.")) {
    return lazilyLoadGTKIcon(name);
  }
  return super.lazilyLoadDesktopProperty(name);
}

public OAuthRsaSha1Signer(String privateKeyString) throws OAuthException {
  if (privateKeyString == null) {
    throw new OAuthException("Private key string cannot be null");
  }
 else   if (privateKeyString.length() == 0) {
    throw new OAuthException("Private key string cannot be empty");
  }
  try {
    setPrivateKey(RsaSha1PrivateKeyHelper.getPrivateKey(privateKeyString));
  }
 catch (  Base64DecoderException e) {
    throw new OAuthException("Invalid private key",e);
  }
catch (  NoSuchAlgorithmException e) {
    throw new OAuthException("Invalid private key",e);
  }
catch (  InvalidKeySpecException e) {
    throw new OAuthException("Invalid private key",e);
  }
}

private Map<String,Volume> groupVolumesByReplicationGroup(List<Volume> volumeList){
  Map<String,Volume> repGroupToVolumeMap=new HashMap<String,Volume>();
  for (  Volume volume : volumeList) {
    String repGroupName=volume.getReplicationGroupInstance();
    if (volume.isVPlexVolume(_dbClient)) {
      Volume backedVol=VPlexUtil.getVPLEXBackendVolume(volume,true,_dbClient);
      if (backedVol != null) {
        repGroupName=backedVol.getReplicationGroupInstance();
      }
    }
    repGroupToVolumeMap.put(repGroupName,volume);
  }
  return repGroupToVolumeMap;
}

public DefaultFileFilter(String extension,String description){
  ext=extension.toLowerCase();
  desc=description;
}

public void appendCell(boolean value){
  appendCell(String.valueOf(value));
}

public String name(){
  return System.getProperty("java.vm.name");
}

protected void addURL(URL url){
  try {
    originalUrls.add(url);
    searchList.add(createSearchURL(url));
  }
 catch (  MalformedURLException e) {
  }
}

public void initStructure() throws Exception {
  int nAttribute=0;
  for (int iOrder=1; iOrder < m_Instances.numAttributes(); iOrder++) {
    if (nAttribute == m_Instances.classIndex()) {
      nAttribute++;
    }
  }
  m_ParentSets=new ParentSet[m_Instances.numAttributes()];
  for (int iAttribute=0; iAttribute < m_Instances.numAttributes(); iAttribute++) {
    m_ParentSets[iAttribute]=new ParentSet(m_Instances.numAttributes());
  }
}

@Override public synchronized CompletableFuture<Void> disconnect(){
  closeFuture=new CompletableFuture<>();
  if (!consumers.isEmpty()) {
    consumers.forEach(null);
    if (havePendingRead && cursor.cancelPendingReadRequest()) {
      havePendingRead=false;
    }
  }
 else {
    closeFuture.complete(null);
  }
  return closeFuture;
}

public static String readAsciiLine(InputStream in) throws IOException {
  StringBuilder result=new StringBuilder(80);
  while (true) {
    int c=in.read();
    if (c == -1) {
      throw new EOFException();
    }
 else     if (c == '\n') {
      break;
    }
    result.append((char)c);
  }
  int length=result.length();
  if (length > 0 && result.charAt(length - 1) == '\r') {
    result.setLength(length - 1);
  }
  return result.toString();
}

public static String readAsciiLine(InputStream in) throws IOException {
  StringBuilder result=new StringBuilder(80);
  while (true) {
    int c=in.read();
    if (c == -1) {
      throw new EOFException();
    }
 else     if (c == '\n') {
      break;
    }
    result.append((char)c);
  }
  int length=result.length();
  if (length > 0 && result.charAt(length - 1) == '\r') {
    result.setLength(length - 1);
  }
  return result.toString();
}

protected boolean IPIsBroadcast(int IPAddress){
  int inv_subnet_mask=~this.subnet_mask;
  return ((IPAddress & inv_subnet_mask) == inv_subnet_mask);
}

public void addCellAppearancesToWorkList(DF_LatticeCell cell){
  for (Enumeration<DF_Equation> e=getEquations(); e.hasMoreElements(); ) {
    DF_Equation eq=e.nextElement();
    if (eq.hasCell(cell)) {
      addToWorkList(eq);
    }
  }
}

public void remove(ConstraintWidget widget){
  Element toUnselect=null;
  for (  Element selection : mSelectedWidgets) {
    if (selection.widget == widget) {
      toUnselect=selection;
      break;
    }
  }
  if (toUnselect != null) {
    mSelectedWidgets.remove(toUnselect);
  }
  selectionHasChanged();
}

public static long hexStringToLong(final String hexString){
  Preconditions.checkNotNull(hexString,"Error: Unicode string can't be null");
  Preconditions.checkArgument(isHexString(hexString),String.format("Error: Hex string '%s' is not a vaild hex string",hexString));
  if ((hexString.length() == 16) && (hexString.charAt(0) >= 8)) {
    final String strAddr1=hexString.substring(0,hexString.length() - 8);
    final String strAddr2=hexString.substring(hexString.length() - 8);
    return (Long.parseLong(strAddr1,16) << 32) + Long.parseLong(strAddr2,16);
  }
  return Long.parseLong(hexString,16);
}

public static boolean containsFile(@NotNull SourceProvider provider,@NotNull File file){
  Collection<File> srcDirectories=getAllSourceFolders(provider);
  if (filesEqual(provider.getManifestFile(),file)) {
    return true;
  }
  for (  File container : srcDirectories) {
    File parent=container.getParentFile();
    if (parent != null && parent.isDirectory() && filesEqual(parent,file)) {
      return true;
    }
    if (!container.exists()) {
      continue;
    }
    if (isAncestor(container,file,false)) {
      return true;
    }
  }
  return false;
}

public static String checkNotEmpty(String string,Object errorMessage){
  if (ExoPlayerLibraryInfo.ASSERTIONS_ENABLED && TextUtils.isEmpty(string)) {
    throw new IllegalArgumentException(String.valueOf(errorMessage));
  }
  return string;
}

void runPostSearch(int cntItems);

private SSLEngineResult unwrap() throws SSLException {
  if (appBuffer == null) {
    appBuffer=IoBuffer.allocate(inNetBuffer.remaining());
  }
 else {
    appBuffer.expand(inNetBuffer.remaining());
  }
  SSLEngineResult res;
  Status status=null;
  HandshakeStatus handshakeStatus=null;
  do {
    res=sslEngine.unwrap(inNetBuffer.buf(),appBuffer.buf());
    status=res.getStatus();
    handshakeStatus=res.getHandshakeStatus();
    if (status == SSLEngineResult.Status.BUFFER_OVERFLOW) {
      appBuffer.capacity(appBuffer.capacity() << 1);
      appBuffer.limit(appBuffer.capacity());
      continue;
    }
  }
 while (((status == SSLEngineResult.Status.OK) || (status == SSLEngineResult.Status.BUFFER_OVERFLOW)) && ((handshakeStatus == SSLEngineResult.HandshakeStatus.NOT_HANDSHAKING) || (handshakeStatus == SSLEngineResult.HandshakeStatus.NEED_UNWRAP)));
  return res;
}

public Certificate requestCertificate(byte[] csr) throws AcmeException {
  return requestCertificate(csr,null,null);
}

public void clear(){
  mStrings.clear();
  notifyDataSetChanged();
}

@SuppressWarnings({"ClassLoader2Instantiation"}) private static GridUriDeploymentFileProcessorResult processWithDescriptorFile(GridUriDeploymentSpringDocument doc,File file,String uri,IgniteLogger log) throws IgniteSpiException {
  ClassLoader clsLdr=GridUriDeploymentClassLoaderFactory.create(U.gridClassLoader(),file,log);
  List<Class<? extends ComputeTask<?,?>>> tasks=doc.getTasks(clsLdr);
  List<Class<? extends ComputeTask<?,?>>> validTasks=null;
  if (!F.isEmpty(tasks)) {
    validTasks=new ArrayList<>();
    for (    Class<? extends ComputeTask<?,?>> task : tasks) {
      if (!isAllowedTaskClass(task)) {
        U.warn(log,"Failed to load task. Task should be public none-abstract class " + "(might be inner static one) that implements ComputeTask interface [taskCls=" + task + ']');
      }
 else {
        if (log.isDebugEnabled())         log.debug("Found grid deployment task: " + task.getName());
        validTasks.add(task);
      }
    }
  }
  GridUriDeploymentFileProcessorResult res=new GridUriDeploymentFileProcessorResult();
  res.setFile(file);
  res.setClassLoader(clsLdr);
  if (!F.isEmpty(validTasks))   res.setTaskClasses(validTasks);
 else   if (log.isDebugEnabled())   log.debug("No tasks loaded from file [file=" + file.getAbsolutePath() + ", uri="+ U.hidePassword(uri)+ ']');
  return res;
}

private <T extends DataObject>boolean testSelections(JClass jc,T dobj){
  List<JSelection> list=jc.getSelections();
  for (  JSelection js : list) {
    if (testSelection(jc,js,dobj) == false) {
      return false;
    }
  }
  return true;
}

public void truncate(){
  calculateIdealPoint();
  translateByIdealPoint();
  List<List<Solution>> members=associateToReferencePoint(this);
  clear();
  for (int i=0; i < members.size(); i++) {
    List<Solution> associations=members.get(i);
    if (associations.size() > 0) {
      add(select(associations,i));
    }
  }
}

protected void onDownloading(){
  if (LogConfiguration.loggingIsEnabled()) {
    logger.log(Level.INFO,messages.downloadingResources());
  }
  updating=true;
  fireApplicationCacheEvent(CacheEvent.onDownloading);
}

protected synchronized void addTransitionListener(Hashtable<TxState,Hashtable<TxState,Set<EventListener>>> listeners,EventListener lstnr,TxState from,TxState to){
  Hashtable<TxState,Set<EventListener>> lstnrs=listeners.get(from);
  if (lstnrs == null)   lstnrs=new Hashtable<TxState,Set<EventListener>>();
  Set<EventListener> tolstnrs=lstnrs.get(to);
  if (tolstnrs == null)   tolstnrs=new HashSet<EventListener>();
  if (!tolstnrs.contains(lstnr))   tolstnrs.add(lstnr);
  lstnrs.put(to,tolstnrs);
  listeners.put(from,lstnrs);
}

public boolean hasExclusion(){
  return !mExcludedClasses.isEmpty() || !mExcludedTests.isEmpty();
}

private int ensureBaselineOnGrid(){
  float baseline=getBaseline();
  float gridAlign=baseline % FOUR_DIP;
  if (gridAlign != 0) {
    extraTopPadding=(int)(FOUR_DIP - Math.ceil(gridAlign));
  }
  return extraTopPadding;
}

@Override public void compute(){
  Spliterator<P_IN> rs=spliterator, ls;
  long sizeEstimate=rs.estimateSize();
  long sizeThreshold=getTargetSize(sizeEstimate);
  boolean forkRight=false;
  @SuppressWarnings("unchecked") K task=(K)this;
  AtomicReference<R> sr=sharedResult;
  R result;
  while ((result=sr.get()) == null) {
    if (task.taskCanceled()) {
      result=task.getEmptyResult();
      break;
    }
    if (sizeEstimate <= sizeThreshold || (ls=rs.trySplit()) == null) {
      result=task.doLeaf();
      break;
    }
    K leftChild, rightChild, taskToFork;
    task.leftChild=leftChild=task.makeChild(ls);
    task.rightChild=rightChild=task.makeChild(rs);
    task.setPendingCount(1);
    if (forkRight) {
      forkRight=false;
      rs=ls;
      task=leftChild;
      taskToFork=rightChild;
    }
 else {
      forkRight=true;
      task=rightChild;
      taskToFork=leftChild;
    }
    taskToFork.fork();
    sizeEstimate=rs.estimateSize();
  }
  task.setLocalResult(result);
  task.tryComplete();
}

public static Map<String,Object> createContentAssoc(DispatchContext dctx,Map<String,? extends Object> rcontext){
  Map<String,Object> context=UtilMisc.makeMapWritable(rcontext);
  context.put("entityOperation","_CREATE");
  List<String> targetOperationList=ContentWorker.prepTargetOperationList(context,"_CREATE");
  List<String> contentPurposeList=ContentWorker.prepContentPurposeList(context);
  context.put("targetOperationList",targetOperationList);
  context.put("contentPurposeList",contentPurposeList);
  context.put("skipPermissionCheck",null);
  Map<String,Object> result=null;
  try {
    result=createContentAssocMethod(dctx,context);
  }
 catch (  GenericServiceException e) {
    return ServiceUtil.returnError(e.getMessage());
  }
catch (  GenericEntityException e2) {
    return ServiceUtil.returnError(e2.getMessage());
  }
catch (  Exception e3) {
    return ServiceUtil.returnError(e3.getMessage());
  }
  return result;
}

public String formatWithLocale(Locale locale,String... args){
  return String.format(locale,this.content,(Object[])args);
}

private static <T extends AbstractBlockBase<T>>T addPathToLinearScanOrder(T block,List<T> order,PriorityQueue<T> worklist,BitSet visitedBlocks){
  block.setLinearScanNumber(order.size());
  order.add(block);
  T mostLikelySuccessor=findAndMarkMostLikelySuccessor(block,visitedBlocks);
  enqueueSuccessors(block,worklist,visitedBlocks);
  if (mostLikelySuccessor != null) {
    if (!mostLikelySuccessor.isLoopHeader() && mostLikelySuccessor.getPredecessorCount() > 1) {
      double unscheduledSum=0.0;
      for (      T pred : mostLikelySuccessor.getPredecessors()) {
        if (pred.getLinearScanNumber() == -1) {
          unscheduledSum+=pred.probability();
        }
      }
      if (unscheduledSum > block.probability() / PENALTY_VERSUS_UNSCHEDULED) {
        visitedBlocks.clear(mostLikelySuccessor.getId());
        return null;
      }
    }
    return mostLikelySuccessor;
  }
  return null;
}

private static Dimension createThumbDimension(final BufferedImage image,final int maxWidth,final int maxHeight){
  Dimension dimension=new Dimension();
  if (image.getWidth() >= image.getHeight()) {
    if (image.getWidth() >= maxWidth) {
      dimension.width=maxWidth;
      dimension.height=Math.round(((float)maxWidth / image.getWidth()) * image.getHeight());
    }
 else {
      dimension.height=image.getHeight();
      dimension.width=image.getWidth();
    }
  }
 else {
    if (image.getHeight() >= maxHeight) {
      dimension.height=maxHeight;
      dimension.width=Math.round((((float)maxHeight / image.getHeight()) * image.getWidth()));
    }
 else {
      dimension.height=image.getHeight();
      dimension.width=image.getWidth();
    }
  }
  return dimension;
}

private boolean hasCurrentAccountChanged(){
  Account account=AccountUtils.getCurrentOwnCloudAccount(this);
  if (account == null) {
    return true;
  }
 else {
    return !mOriginalCurrentAccount.equals(account.name);
  }
}

public int nextClearBit(int index){
  int i=index >> 6;
  if (i >= wlen)   return -1;
  int subIndex=index & 0x3f;
  long word=~bits.get(i) >> subIndex;
  if (word != 0) {
    return (i << 6) + subIndex + Long.numberOfTrailingZeros(word);
  }
  while (++i < wlen) {
    word=~bits.get(i);
    if (word != 0) {
      return (i << 6) + Long.numberOfTrailingZeros(word);
    }
  }
  return -1;
}

private static synchronized void appendMessage(Context c,final String msg){
  if (msg.length() == 0)   return;
  String out=msg;
  boolean timestamp=PrefStore.isTimestamp(c);
  int maxLines=PrefStore.getMaxLines(c);
  int protocolSize=protocol.size();
  if (protocolSize > 0 && lastChar != '\n') {
    protocol.remove(protocolSize - 1);
    out=lastLine + out;
  }
  lastChar=out.charAt(out.length() - 1);
  String[] lines=out.split("\\n");
  for (int i=0, l=lines.length; i < l; i++) {
    lastLine=lines[i];
    if (timestamp)     protocol.add(getTimeStamp() + lastLine);
 else     protocol.add(lastLine);
    if (protocolSize + i >= maxLines) {
      protocol.remove(0);
    }
  }
  show();
  if (PrefStore.isLogger(c))   write(c,msg);
}

public Object[] importCells(Object[] cells,double dx,double dy,Object target,Point location){
  if (target == null && cells.length == 1 && location != null) {
    target=getCellAt(location.x,location.y);
    if (target instanceof mxICell && cells[0] instanceof mxICell) {
      mxICell targetCell=(mxICell)target;
      mxICell dropCell=(mxICell)cells[0];
      if (targetCell.isVertex() == dropCell.isVertex() || targetCell.isEdge() == dropCell.isEdge()) {
        mxIGraphModel model=graph.getModel();
        model.setStyle(target,model.getStyle(cells[0]));
        graph.setSelectionCell(target);
        return null;
      }
    }
  }
  return super.importCells(cells,dx,dy,target,location);
}

private void cancelSearch(){
  entrantToSearch=null;
}

public void onPrepared(MediaPlayer player){
  mState=State.PLAYING;
  updateNotification(String.format(getString(R.string.media_state_playing),mFile.getFileName()));
  if (mMediaController != null) {
    mMediaController.setEnabled(true);
  }
  player.seekTo(mStartPosition);
  configAndStartMediaPlayer();
  if (!mPlayOnPrepared) {
    processPauseRequest();
  }
  if (mMediaController != null) {
    mMediaController.updatePausePlay();
  }
}

public static ResultSet polar2Cartesian(Double r,Double alpha){
  SimpleResultSet rs=new SimpleResultSet();
  rs.addColumn("X",Types.DOUBLE,0,0);
  rs.addColumn("Y",Types.DOUBLE,0,0);
  if (r != null && alpha != null) {
    double x=r.doubleValue() * Math.cos(alpha.doubleValue());
    double y=r.doubleValue() * Math.sin(alpha.doubleValue());
    rs.addRow(x,y);
  }
  return rs;
}

private List<View> addView(View view,List<View> cache){
  if (cache == null) {
    cache=new LinkedList<View>();
  }
  cache.add(view);
  return cache;
}

public void threadFail(String reason){
  try {
    fail(reason);
  }
 catch (  AssertionFailedError t) {
    threadRecordFailure(t);
    throw t;
  }
}

@Override public void connectionLost(Throwable cause){
  onDisconnect(false);
}

private boolean isTypedTimeFullyLegal(){
  if (mIs24HourMode) {
    int[] values=getEnteredTime(null);
    return (values[0] >= 0 && values[1] >= 0 && values[1] < 60 && values[2] >= 0 && values[2] < 60);
  }
 else {
    return (mTypedTimes.contains(getAmOrPmKeyCode(AM)) || mTypedTimes.contains(getAmOrPmKeyCode(PM)));
  }
}

public synchronized void clearAnnotations(){
  mAnnotations.clear();
  mStringXY.clear();
}

public Table sample(double proportion){
  int tableCount=(int)Math.round(rowCount() * proportion);
  Selection table1Selection=new BitmapBackedSelection();
  int[] selectedRecords=generateUniformBitmap(tableCount,rowCount());
  for (  int selectedRecord : selectedRecords) {
    table1Selection.add(selectedRecord);
  }
  return selectWhere(table1Selection);
}

public void clear(){
  oredCriteria.clear();
  orderByClause=null;
  distinct=false;
}

public static MessageDigest newDigest(){
  try {
    return MessageDigest.getInstance("SHA-256");
  }
 catch (  NoSuchAlgorithmException e) {
    throw new RuntimeException(e);
  }
}

public Container addChildAt(int location,@NonNull DisplayObject DisplayObject){
  if (mFps != DEFAULT_FPS) {
    DisplayObject.setUp(mFps);
  }
  mDisplayList.add(location,DisplayObject);
  return this;
}

private void add(DimensionIndex index){
  flatten.add(index);
  lookup.put(index.getAxis(),index);
}

public static RecipePetals registerPetalRecipe(ItemStack output,Object... inputs){
  Preconditions.checkArgument(inputs.length <= 16);
  RecipePetals recipe=new RecipePetals(output,inputs);
  petalRecipes.add(recipe);
  return recipe;
}

private void buildFirstLine(LinePath path,Rect r){
  int[] range=new int[]{-r.left,-r.top,r.right,r.bottom};
  int max=-1;
  int maxId=0;
  for (int i=0; i < 4; i++) {
    if (range[i] > max) {
      max=range[i];
      maxId=i;
    }
  }
switch (maxId) {
case 0:
    path.setEndPoint(r.left,Utils.nextInt(r.height()) + r.top);
  break;
case 1:
path.setEndPoint(Utils.nextInt(r.width()) + r.left,r.top);
break;
case 2:
path.setEndPoint(r.right,Utils.nextInt(r.height()) + r.top);
break;
case 3:
path.setEndPoint(Utils.nextInt(r.width()) + r.left,r.bottom);
break;
}
path.lineToEnd();
}

public static boolean isExtension(String filename,String extension){
  if (filename == null) {
    return false;
  }
  if (extension == null || extension.length() == 0) {
    return indexOfExtension(filename) == -1;
  }
  String fileExt=getExtension(filename);
  return fileExt.equals(extension);
}

public void testValueOfDoubleNeg(){
  double a=-65678765876567576.98788767;
  BigDecimal result=BigDecimal.valueOf(a);
  String res="-65678765876567576";
  int resScale=0;
  assertEquals("incorrect value",res,result.toString());
  assertEquals("incorrect scale",resScale,result.scale());
}

public void testHugeTerm() throws IOException {
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < 10240; i++) {
    sb.append('a');
  }
  String input=sb.toString();
  char token[]=new char[1024];
  Arrays.fill(token,'a');
  String expectedToken=new String(token);
  String expected[]={expectedToken,expectedToken,expectedToken,expectedToken,expectedToken,expectedToken,expectedToken,expectedToken,expectedToken,expectedToken};
  assertAnalyzesTo(sentence,input,expected);
}

private String[] combineResultsFromMultipleReads(String[] buffer,String[] lastRead){
  String[] t=new String[buffer.length + lastRead.length];
  System.arraycopy(buffer,0,t,0,buffer.length);
  System.arraycopy(lastRead,0,t,buffer.length,lastRead.length);
  return t;
}

public double calcDistance(final double x,final double y){
  double distanceX;
  double distanceY;
  if (this.minX <= x && x <= this.maxX) {
    distanceX=0;
  }
 else {
    distanceX=Math.min(Math.abs(this.minX - x),Math.abs(this.maxX - x));
  }
  if (this.minY <= y && y <= this.maxY) {
    distanceY=0;
  }
 else {
    distanceY=Math.min(Math.abs(this.minY - y),Math.abs(this.maxY - y));
  }
  return Math.sqrt(distanceX * distanceX + distanceY * distanceY);
}

@Override public MatchesType marshal(Set<Match> matches){
  Set<RPSBlastMatch> rpsBlastMatches=new LinkedHashSet<RPSBlastMatch>();
  Set<Hmmer2Match> hmmer2Matches=new LinkedHashSet<Hmmer2Match>();
  Set<Hmmer3Match> hmmer3Matches=new LinkedHashSet<Hmmer3Match>();
  Set<SuperFamilyHmmer3Match> superFamilyHmmer3Matches=new LinkedHashSet<SuperFamilyHmmer3Match>();
  Set<FingerPrintsMatch> fingerPrintsMatches=new LinkedHashSet<FingerPrintsMatch>();
  Set<BlastProDomMatch> proDomMatches=new LinkedHashSet<BlastProDomMatch>();
  Set<PatternScanMatch> patternScanMatches=new LinkedHashSet<PatternScanMatch>();
  Set<ProfileScanMatch> profileScanMatches=new LinkedHashSet<ProfileScanMatch>();
  Set<PhobiusMatch> phobiusMatches=new LinkedHashSet<PhobiusMatch>();
  Set<CoilsMatch> coilsMatches=new LinkedHashSet<CoilsMatch>();
  Set<PantherMatch> pantherMatches=new LinkedHashSet<PantherMatch>();
  Set<SignalPMatch> signalPMatches=new LinkedHashSet<SignalPMatch>();
  Set<TMHMMMatch> tmhmmPMatches=new LinkedHashSet<TMHMMMatch>();
  for (  Match m : matches) {
    if (m instanceof RPSBlastMatch) {
      rpsBlastMatches.add((RPSBlastMatch)m);
    }
 else     if (m instanceof Hmmer2Match) {
      hmmer2Matches.add((Hmmer2Match)m);
    }
 else     if (m instanceof Hmmer3Match) {
      hmmer3Matches.add((Hmmer3Match)m);
    }
 else     if (m instanceof SuperFamilyHmmer3Match) {
      superFamilyHmmer3Matches.add((SuperFamilyHmmer3Match)m);
    }
 else     if (m instanceof FingerPrintsMatch) {
      fingerPrintsMatches.add((FingerPrintsMatch)m);
    }
 else     if (m instanceof BlastProDomMatch) {
      proDomMatches.add((BlastProDomMatch)m);
    }
 else     if (m instanceof PatternScanMatch) {
      patternScanMatches.add((PatternScanMatch)m);
    }
 else     if (m instanceof ProfileScanMatch) {
      profileScanMatches.add((ProfileScanMatch)m);
    }
 else     if (m instanceof PhobiusMatch) {
      phobiusMatches.add((PhobiusMatch)m);
    }
 else     if (m instanceof CoilsMatch) {
      coilsMatches.add((CoilsMatch)m);
    }
 else     if (m instanceof PantherMatch) {
      pantherMatches.add((PantherMatch)m);
    }
 else     if (m instanceof SignalPMatch) {
      signalPMatches.add((SignalPMatch)m);
    }
 else     if (m instanceof TMHMMMatch) {
      tmhmmPMatches.add((TMHMMMatch)m);
    }
 else {
      throw new IllegalArgumentException("Unrecognised Match class: " + m);
    }
  }
  return new MatchesType(rpsBlastMatches,hmmer2Matches,hmmer3Matches,superFamilyHmmer3Matches,fingerPrintsMatches,proDomMatches,patternScanMatches,profileScanMatches,phobiusMatches,coilsMatches,pantherMatches,signalPMatches,tmhmmPMatches);
}

public synchronized void ensureCapacity(int minimumCapacity){
  if (elementData.length < minimumCapacity) {
    int next=(capacityIncrement <= 0 ? elementData.length : capacityIncrement) + elementData.length;
    grow(minimumCapacity > next ? minimumCapacity : next);
  }
}

public static void reverse(final char[] buffer,final int start,final int len){
  if (len < 2)   return;
  int end=(start + len) - 1;
  char frontHigh=buffer[start];
  char endLow=buffer[end];
  boolean allowFrontSur=true, allowEndSur=true;
  final int mid=start + (len >> 1);
  for (int i=start; i < mid; ++i, --end) {
    final char frontLow=buffer[i + 1];
    final char endHigh=buffer[end - 1];
    final boolean surAtFront=allowFrontSur && Character.isSurrogatePair(frontHigh,frontLow);
    if (surAtFront && (len < 3)) {
      return;
    }
    final boolean surAtEnd=allowEndSur && Character.isSurrogatePair(endHigh,endLow);
    allowFrontSur=allowEndSur=true;
    if (surAtFront == surAtEnd) {
      if (surAtFront) {
        buffer[end]=frontLow;
        buffer[--end]=frontHigh;
        buffer[i]=endHigh;
        buffer[++i]=endLow;
        frontHigh=buffer[i + 1];
        endLow=buffer[end - 1];
      }
 else {
        buffer[end]=frontHigh;
        buffer[i]=endLow;
        frontHigh=frontLow;
        endLow=endHigh;
      }
    }
 else {
      if (surAtFront) {
        buffer[end]=frontLow;
        buffer[i]=endLow;
        endLow=endHigh;
        allowFrontSur=false;
      }
 else {
        buffer[end]=frontHigh;
        buffer[i]=endHigh;
        frontHigh=frontLow;
        allowEndSur=false;
      }
    }
  }
  if ((len & 0x01) == 1 && !(allowFrontSur && allowEndSur)) {
    buffer[end]=allowFrontSur ? endLow : frontHigh;
  }
}

@Override public String toString(){
  return String.format("%d:%d",ledgerId,entryId);
}

public void clear(){
  oredCriteria.clear();
  orderByClause=null;
  distinct=false;
}

public void trigger(Date time){
  taskList.remove(time);
}

private boolean checkTouchSlop(View child,float dx,float dy){
  if (child == null) {
    return false;
  }
  final boolean checkHorizontal=mCallback.getViewHorizontalDragRange(child) > 0;
  final boolean checkVertical=mCallback.getViewVerticalDragRange(child) > 0;
  if (checkHorizontal && checkVertical) {
    return dx * dx + dy * dy > mTouchSlop * mTouchSlop;
  }
 else   if (checkHorizontal) {
    return Math.abs(dx) > mTouchSlop;
  }
 else   if (checkVertical) {
    return Math.abs(dy) > mTouchSlop;
  }
  return false;
}

Cipher(CipherSpi cipherSpi,String transformation){
  this.spi=cipherSpi;
  this.transformation=transformation;
  this.cryptoPerm=CryptoAllPermission.INSTANCE;
  this.lock=null;
}

public void testFlipBitPositiveOutside1(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int number=150;
  byte rBytes[]={64,0,0,0,0,0,1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.flipBit(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

private void writeObject(ObjectOutputStream aOutputStream) throws IOException {
  aOutputStream.defaultWriteObject();
}

@Override public boolean isPanelEnabled(){
  return multiOptionGroupEnabled;
}

public synchronized void add(String name,long threadId){
  if (mFinished) {
    throw new IllegalStateException("Marker added to finished log");
  }
  mMarkers.add(new Marker(name,threadId,SystemClock.elapsedRealtime()));
}

public static String toUnixNewline(String input){
  return input.replace("\r\n","\n");
}

private void outputIndentation(){
  for (int i=0; i < m_indent; i++) {
    m_out.print(m_basicIndent);
  }
}

protected Bucket<T> createBucket(long bucketKey){
  return new Bucket<T>(bucketKey);
}

public AbstractSiteMap parseSiteMap(byte[] content,URL url) throws UnknownFormatException, IOException {
  if (url == null) {
    return null;
  }
  String filename=FilenameUtils.getName(url.getPath());
  String contentType=TIKA.detect(content,filename);
  return parseSiteMap(contentType,content,url);
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getFooterSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if (mState == State.PULL_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

public ApplicationMetaData(final Deserializer deserializer){
  this.appName=deserializer.readString("application");
  this.version=deserializer.readString("version");
  this.certificateSigner=deserializer.readOptionalString("signer");
  this.startTime=TimeInstant.readFrom(deserializer,"startTime");
  this.currentTime=TimeInstant.readFrom(deserializer,"currentTime");
  this.timeProvider=null;
}

public static ConstraintsParameters loadPolicyData(InputStream policyDataStream){
  if (policyDataStream != null) {
    return load(policyDataStream);
  }
  if ((defaultPolicyConstraintsLocation != null) && !defaultPolicyConstraintsLocation.isEmpty()) {
    return load(defaultPolicyConstraintsLocation);
  }
  return null;
}

public static void close(OutputStream out){
  try {
    if (out != null) {
      out.close();
    }
  }
 catch (  IOException ioE) {
  }
}

@Override public boolean isCellEditable(int row,int col){
  if (isConnectedToDataSource) {
    if (col != FIELD_COLUMN_ID) {
      return true;
    }
 else {
      return false;
    }
  }
 else {
    return true;
  }
}

@Override public boolean isFactoryForType(Object type){
  return supportedTypes.contains(type) || super.isFactoryForType(type);
}

private void saveSortedPomFile(final String sortedXml){
  fileUtil.savePomFile(sortedXml);
  log.info("Saved sorted pom file to " + pomFile.getAbsolutePath());
}

private void appendStatements(PolicyType policy,String prefix){
  List<Statement> appendStatements=newStatements(policy,prefix);
  for (  Statement statement : appendStatements) {
    appendStatement(statement);
  }
}

private void validateTOTPParameters() throws AuthLoginException {
  StringBuilder errorMessages=new StringBuilder();
  if (StringUtils.isEmpty(loginTimeAttrName)) {
    errorMessages.append("Login time attribute name is empty \n");
  }
  if (clockDriftCheckEnabled && StringUtils.isEmpty(observedClockDriftAttrName)) {
    errorMessages.append("Observed time drift attribute name is empty \n");
  }
  if (totpTimeStep <= 0) {
    errorMessages.append("Invalid TOTP time step interval: " + totpTimeStep + " \n");
  }
  if (totpStepsInWindow < 0) {
    errorMessages.append("Invalid TOTP steps in window value: " + totpStepsInWindow);
  }
  if (errorMessages.length() > 0) {
    debug.error("OATH.validateTOTPParameters(): Invalid settings : " + errorMessages.toString());
    throw new AuthLoginException(amAuthOATH,"authFailed",null);
  }
}

public static String removeUriFragment(String url){
  if (url == null || url.length() == 0) {
    return null;
  }
  String[] arr=url.split("#");
  if (arr.length == 2) {
    return arr[0];
  }
 else {
    return url;
  }
}

public static void writeReceiptsToFiles(List<byte[]> printedReceipts,String prefix,File baseDir){
  try {
    int index=1;
    for (    byte[] printedReceipt : printedReceipts) {
      ByteArrayInputStream bIn=new ByteArrayInputStream(printedReceipt);
      File receiptFile=new File(baseDir,prefix + "Receipt " + index+ ".pdf");
      BufferedOutputStream bufferedOutputStream=new BufferedOutputStream(new FileOutputStream(receiptFile));
      IOUtils.copy(bIn,bufferedOutputStream);
      bufferedOutputStream.close();
      index++;
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
}

public synchronized void renderDataForProjection(Projection proj,java.awt.Graphics g){
  fireStatusUpdate(LayerStatusEvent.FINISH_WORKING);
  if (proj == null) {
    logger.info("null projection!");
    return;
  }
 else {
    setTargetIndex(proj.getScale());
    Layer layer=getAppropriateLayer();
    layer.renderDataForProjection(proj,g);
  }
}

public void writeExif(InputStream jpegStream,OutputStream exifOutStream) throws IOException {
  if (jpegStream == null || exifOutStream == null) {
    throw new IllegalArgumentException(NULL_ARGUMENT_STRING);
  }
  OutputStream s=getExifWriterStream(exifOutStream);
  doExifStreamIO(jpegStream,s);
  s.flush();
}

private ContainerPanel createContainerPanel(){
  ContainerPanel containerPanel=new ContainerPanel();
  containerPanel.setAnimated(false);
  containerPanel.setMinimumSize(new Dimension(0,0));
  character=new Character();
  containerPanel.addRepaintable(character);
  inventory=new SlotWindow("bag",3,4);
  inventory.setAcceptedTypes(EntityMap.getClass("item",null,null));
  inventory.setCloseable(false);
  containerPanel.addRepaintable(inventory);
  keyring=new KeyRing();
  keyring.setAcceptedTypes(EntityMap.getClass("item",null,null));
  containerPanel.addRepaintable(keyring);
  userContext.addFeatureChangeListener(keyring);
  spells=new Spells();
  spells.setAcceptedTypes(EntityMap.getClass("spell",null,null));
  containerPanel.addRepaintable(spells);
  userContext.addFeatureChangeListener(spells);
  return containerPanel;
}

public void copyFromGeometry3D(Geometry3D geom){
  this.mNumIndices=geom.getNumIndices();
  this.mNumVertices=geom.getNumVertices();
  this.mVertexBufferInfo=geom.getVertexBufferInfo();
  this.mIndexBufferInfo=geom.getIndexBufferInfo();
  this.mTexCoordBufferInfo=geom.getTexCoordBufferInfo();
  this.mOnlyShortBufferSupported=geom.areOnlyShortBuffersSupported();
  if (mColors == null)   this.mColorBufferInfo=geom.getColorBufferInfo();
  this.mNormalBufferInfo=geom.getNormalBufferInfo();
  this.mOriginalGeometry=geom;
  this.mHasNormals=geom.hasNormals();
  this.mHasTextureCoordinates=geom.hasTextureCoordinates();
}

@Override public void addPropertyChangeListener(PropertyChangeListener pcl){
  m_pcSupport.addPropertyChangeListener(pcl);
}

public static Intent implicit2ExplicitIntent(Context context,Intent implicitIntent){
  PackageManager pm=context.getPackageManager();
  List<ResolveInfo> resolveInfo=pm.queryIntentServices(implicitIntent,0);
  if (resolveInfo == null || resolveInfo.size() != 1) {
    return null;
  }
  ResolveInfo serviceInfo=resolveInfo.get(0);
  String packageName=serviceInfo.serviceInfo.packageName;
  String className=serviceInfo.serviceInfo.name;
  ComponentName component=new ComponentName(packageName,className);
  Intent explicitIntent=new Intent(implicitIntent);
  explicitIntent.setComponent(component);
  return explicitIntent;
}

private synchronized void garbageCollectPeer(Peer peer){
  log.debug("Garbage collected peer " + peer);
  mCurrentPeers.remove(peer);
}

public void reset(){
synchronized (this) {
    queue.clear();
    setBridgeMode(-1);
  }
}

@PostConstruct public void initApplication() throws IOException {
  if (env.getActiveProfiles().length == 0) {
    log.warn("No Spring profile configured, running with default configuration");
  }
 else {
    log.info("Running with Spring profile(s) : {}",Arrays.toString(env.getActiveProfiles()));
  }
}

private void indent(){
  out.print(currentIndention);
}

private void computeImplicitForwardDependencesUse(Register r,DepGraphNode destNode){
  DepGraphNode sourceNode=getDepGraphNode(r);
  if (sourceNode != null) {
    for (Enumeration<Register> e=GenericPhysicalDefUse.enumerate(GenericPhysicalDefUse.getMaskTSPDefs(),ir); e.hasMoreElements(); ) {
      Register r2=e.nextElement();
      if (r == r2) {
        sourceNode.insertOutEdge(destNode,REG_MAY_DEF);
        return;
      }
    }
    sourceNode.insertOutEdge(destNode,REG_TRUE);
  }
}

public String description(){
synchronized (this) {
    if (messages == null) {
      messages=ResourceBundle.getBundle("com.sun.tools.jdi.resources.jdi");
    }
  }
  return messages.getString("memory_transportservice.description");
}

Set findRemovableAciList(Set aciList) throws AMException, SSOException {
  Set resultSet=new HashSet();
  if (aciList == null) {
    return resultSet;
  }
  Iterator iter=aciList.iterator();
  while (iter.hasNext()) {
    String aci=(String)iter.next();
    Set objs=dsServices.search(token,AMStoreConnection.getAMSdkBaseDN(),"(&" + AMSearchFilterManager.getGlobalSearchFilter(AMObject.GROUP) + "(iplanet-am-role-aci-list="+ aci+ "))",AMConstants.SCOPE_SUB);
    if (objs.size() < 2) {
      resultSet.add(aci);
    }
  }
  return resultSet;
}

protected final void unregisterDataSource(DataSource removed){
  unregisterDataSources(Collections.singleton(removed));
}

public String dump(byte[] der) throws Asn1Exception, IOException {
  try {
    ASN1Primitive derObject=ASN1Primitive.fromByteArray(der);
    if (derObject.getEncoded().length < der.length) {
      throw new Asn1Exception(res.getString("NoAsn1DumpObject.exception.message"));
    }
    return dump(derObject);
  }
 catch (  IOException ex) {
    throw new Asn1Exception(res.getString("NoAsn1DumpObject.exception.message"),ex);
  }
}

private static void assertChangeEvents(Collection<PortChangeEvent> earlyEvents,Collection<PortChangeEvent> lateEvents,Collection<PortChangeEvent> anytimeEvents,Collection<PortChangeEvent> actualEvents){
  String inputDesc=String.format("earlyEvents=%s, lateEvents=%s, " + "anytimeEvents=%s, actualEvents=%s",earlyEvents.toString(),lateEvents.toString(),anytimeEvents.toString(),actualEvents.toString());
  Collection<PortChangeEvent> early=new ArrayList<PortChangeEvent>(earlyEvents);
  Collection<PortChangeEvent> late=new ArrayList<PortChangeEvent>(lateEvents);
  Collection<PortChangeEvent> any=new ArrayList<PortChangeEvent>(anytimeEvents);
  for (  PortChangeEvent ev : early) {
    assertFalse("Test setup error. Early and late overlap",late.contains(ev));
    assertFalse("Test setup error. Early and anytime overlap",any.contains(ev));
  }
  for (  PortChangeEvent ev : late) {
    assertFalse("Test setup error. Late and early overlap",early.contains(ev));
    assertFalse("Test setup error. Late and any overlap",any.contains(ev));
  }
  for (  PortChangeEvent ev : any) {
    assertFalse("Test setup error. Anytime and early overlap",early.contains(ev));
    assertFalse("Test setup error. Anytime and late overlap",late.contains(ev));
  }
  for (  PortChangeEvent a : actualEvents) {
    if (early.remove(a)) {
      continue;
    }
    if (any.remove(a)) {
      continue;
    }
    if (late.remove(a)) {
      if (!early.isEmpty()) {
        fail(a + " is in late list, but haven't seen all required " + "early events. "+ inputDesc);
      }
 else {
        continue;
      }
    }
    fail(a + " was not expected. " + inputDesc);
  }
  if (!early.isEmpty())   fail("Elements left in early: " + early + ". "+ inputDesc);
  if (!late.isEmpty())   fail("Elements left in late: " + late + ". "+ inputDesc);
  if (!any.isEmpty())   fail("Elements left in any: " + any + ". "+ inputDesc);
}

public static Class needClass(String property) throws NoSuchPropertyException {
  String value=needProperty(property);
  Class c=null;
  try {
    c=Class.forName(value);
  }
 catch (  ClassNotFoundException e) {
    throw new NoSuchPropertyException("Cannot find class `" + value + "'. Check property `"+ property+ "' in configuration files");
  }
  return c;
}

DependencySpec createModuleDependency(ArtifactResult i,boolean forceExport){
  if (JDK_MODULE_NAMES.contains(i.name()))   return JDK_DEPENDENCY;
  final ModuleIdentifier mi=createModuleIdentifier(i);
  final boolean export=forceExport || (i.importType() == ImportType.EXPORT);
  return DependencySpec.createModuleDependencySpec(PathFilters.getMetaInfSubdirectoriesWithoutMetaInfFilter(),(export ? PathFilters.acceptAll() : PathFilters.rejectAll()),this,mi,i.importType() == ImportType.OPTIONAL);
}

public void appendNodes(NodeSet nodes){
  int nNodes=nodes.size();
  if (null == m_map) {
    m_mapSize=nNodes + m_blocksize;
    m_map=new Node[m_mapSize];
  }
 else   if ((m_firstFree + nNodes) >= m_mapSize) {
    m_mapSize+=(nNodes + m_blocksize);
    Node newMap[]=new Node[m_mapSize];
    System.arraycopy(m_map,0,newMap,0,m_firstFree + nNodes);
    m_map=newMap;
  }
  System.arraycopy(nodes.m_map,0,m_map,m_firstFree,nNodes);
  m_firstFree+=nNodes;
}

public void makeImmutable(){
  if (isMutable) {
    isMutable=false;
  }
}

private int readEpoch(File epochFile){
  int epoch=-1;
  if (!epochFile.exists()) {
    return epoch;
  }
  try {
    Scanner scanner=new Scanner(epochFile);
    epoch=scanner.nextInt();
    log.debug("Got epoch {} from file {}",epoch,epochFile.getName());
  }
 catch (  IOException e) {
    log.error("read epoch from file({}) failed. e=",epochFile.getName(),e);
  }
  return epoch;
}

private int fastMatch(String sha1){
  Integer idx=_indexes.get(sha1);
  if (idx == null)   return -1;
 else   return idx.intValue();
}

public void or(Criteria criteria){
  oredCriteria.add(criteria);
}

public static void format(String format,Object... args){
  if (!isDisabled()) {
    print(String.format(format,args));
  }
}

public void concatenate(SIPObjectList otherList){
  super.concatenate(otherList);
}

@Override @Transactional protected void persist(Collection<RawProtein<PrintsRawMatch>> filteredProteins,Map<String,Signature> modelIdToSignatureMap,Map<String,Protein> proteinIdToProteinMap){
  for (  RawProtein<PrintsRawMatch> rawProtein : filteredProteins) {
    Protein protein=proteinIdToProteinMap.get(rawProtein.getProteinIdentifier());
    if (protein == null) {
      throw new IllegalStateException("Cannot store match to a protein that is not in database " + "[protein ID= " + rawProtein.getProteinIdentifier() + "]");
    }
    Set<FingerPrintsMatch.FingerPrintsLocation> locations=null;
    String currentSignatureAc=null;
    Signature currentSignature=null;
    PrintsRawMatch lastRawMatch=null;
    final TreeSet<PrintsRawMatch> sortedMatches=new TreeSet<PrintsRawMatch>(PRINTS_RAW_MATCH_COMPARATOR);
    sortedMatches.addAll(rawProtein.getMatches());
    FingerPrintsMatch match=null;
    for (    PrintsRawMatch rawMatch : sortedMatches) {
      if (rawMatch == null) {
        continue;
      }
      if (currentSignatureAc == null || !currentSignatureAc.equals(rawMatch.getModelId())) {
        if (currentSignatureAc != null) {
          if (match != null) {
            entityManager.persist(match);
          }
          match=new FingerPrintsMatch(currentSignature,lastRawMatch.getEvalue(),lastRawMatch.getGraphscan(),locations);
          protein.addMatch(match);
        }
        locations=new HashSet<FingerPrintsMatch.FingerPrintsLocation>();
        currentSignatureAc=rawMatch.getModelId();
        currentSignature=modelIdToSignatureMap.get(currentSignatureAc);
        if (currentSignature == null) {
          throw new IllegalStateException("Cannot find PRINTS signature " + currentSignatureAc + " in the database.");
        }
      }
      locations.add(new FingerPrintsMatch.FingerPrintsLocation(rawMatch.getLocationStart(),boundedLocationEnd(protein,rawMatch),rawMatch.getPvalue(),rawMatch.getScore(),rawMatch.getMotifNumber()));
      lastRawMatch=rawMatch;
    }
    if (lastRawMatch != null) {
      match=new FingerPrintsMatch(currentSignature,lastRawMatch.getEvalue(),lastRawMatch.getGraphscan(),locations);
      protein.addMatch(match);
      entityManager.persist(match);
    }
  }
}

public Builder withKeyStorePassword(String trustStorePassword){
  properties.setProperty(NettyOptions.SSL_KEY_STORE_PASSWORD,Assert.notNull(trustStorePassword,"trustStorePassword"));
  return this;
}

public static String suffix(String string,String suffix){
  if (string.endsWith(suffix) == false) {
    string+=suffix;
  }
  return string;
}

public Point2D(double x,double y){
  if (Double.isInfinite(x) || Double.isInfinite(y))   throw new IllegalArgumentException("Coordinates must be finite");
  if (Double.isNaN(x) || Double.isNaN(y))   throw new IllegalArgumentException("Coordinates cannot be NaN");
  if (x == 0.0)   this.x=0.0;
 else   this.x=x;
  if (y == 0.0)   this.y=0.0;
 else   this.y=y;
}

public static void serverFailed(String serviceName){
  if (serviceName.startsWith(validRemoteURL)) {
    serverFailed=true;
  }
 else {
    remoteStubs.remove(serviceName);
  }
}

public RequestHandler(PokemonGo api,OkHttpClient client){
  this.api=api;
  this.client=client;
  apiEndpoint=ApiSettings.API_ENDPOINT;
  asyncHttpThread=new Thread(this,"Async HTTP Thread");
  asyncHttpThread.setDaemon(true);
  asyncHttpThread.start();
}

public String toString(){
  String s="";
  Enumeration names=getAttributeNames();
  while (names.hasMoreElements()) {
    Object key=names.nextElement();
    Object value=getAttribute(key);
    if (value instanceof AttributeSet) {
      s=s + key + "=**AttributeSet** ";
    }
 else {
      s=s + key + "="+ value+ " ";
    }
  }
  return s;
}

public VNXeCommandResult removeLunsFromConsistencyGroup(String cgId,List<String> luns){
  LunGroupModifyParam param=new LunGroupModifyParam();
  List<LunAddParam> lunRemoves=new ArrayList<LunAddParam>();
  for (  String lunId : luns) {
    VNXeBase lun=new VNXeBase(lunId);
    LunAddParam lunAdd=new LunAddParam();
    lunAdd.setLun(lun);
    lunRemoves.add(lunAdd);
  }
  param.setLunRemove(lunRemoves);
  ConsistencyGroupRequests req=new ConsistencyGroupRequests(_khClient);
  return req.modifyConsistencyGroupSync(cgId,param);
}

private static boolean notInstanceAvailable(){
  if (sInstance == null) {
    if (!sTrainingTaskFuture.isDone()) {
      try {
        sInstance=sTrainingTaskFuture.get();
        return false;
      }
 catch (      InterruptedException|ExecutionException e) {
        e.printStackTrace();
        return true;
      }
    }
 else {
      return true;
    }
  }
  return false;
}

public void readData(DataInput din) throws IOException {
  status=din.readUnsignedShort();
  events=din.readUnsignedShort();
}

private boolean checkTouchSlop(View child,float dx,float dy){
  if (child == null) {
    return false;
  }
  final boolean checkHorizontal=mCallback.getViewHorizontalDragRange(child) > 0;
  final boolean checkVertical=mCallback.getViewVerticalDragRange(child) > 0;
  if (checkHorizontal && checkVertical) {
    return dx * dx + dy * dy > mTouchSlop * mTouchSlop;
  }
 else   if (checkHorizontal) {
    return Math.abs(dx) > mTouchSlop;
  }
 else   if (checkVertical) {
    return Math.abs(dy) > mTouchSlop;
  }
  return false;
}

public void remove(String identifier,ActiveConnectionRecord record){
synchronized (records) {
    Set<ActiveConnectionRecord> connections=records.get(identifier);
    assert (connections != null);
    connections.remove(record);
    if (connections.isEmpty())     records.remove(identifier);
  }
}

private String buildMetroProintPlacementStatusString(){
  StringBuffer placementStatusBuf=new StringBuffer();
  if (placementStatus != null) {
    placementStatusBuf.append(String.format("%nPrimary Cluster"));
    placementStatusBuf.append(placementStatus.toString(dbClient));
  }
  if (secondaryPlacementStatus != null) {
    placementStatusBuf.append(String.format("%nSecondary Cluster"));
    placementStatusBuf.append(secondaryPlacementStatus.toString(dbClient));
  }
  return placementStatusBuf.toString();
}

private boolean hasSequence(Subgraph graph){
  int oddDegreeCount=0;
  for (Iterator i=graph.nodeIterator(); i.hasNext(); ) {
    Node node=(Node)i.next();
    if (node.getDegree() % 2 == 1)     oddDegreeCount++;
  }
  return oddDegreeCount <= 2;
}

public void ensureAdditionalCapacity(final int size){
  final int newCount=visible.position() + size;
  if (newCount > visible.capacity()) {
    final ByteBuffer newByteBuffer=ByteBuffer.allocate(Math.max(visible.capacity() << 1,newCount));
    visible.flip();
    visible=newByteBuffer.put(visible);
  }
}

public void forceReload(File file){
  fFilesToReoad.add(file);
}

private static long longMultiplyPowerTen(long val,int n){
  if (val == 0 || n <= 0)   return val;
  long[] tab=LONG_TEN_POWERS_TABLE;
  long[] bounds=THRESHOLDS_TABLE;
  if (n < tab.length && n < bounds.length) {
    long tenpower=tab[n];
    if (val == 1)     return tenpower;
    if (Math.abs(val) <= bounds[n])     return val * tenpower;
  }
  return INFLATED;
}

public static int wildCompare(String searchIn,String searchForWildcard){
  if ((searchIn == null) || (searchForWildcard == null)) {
    return WILD_COMPARE_NO_MATCH;
  }
  if (searchForWildcard.equals("%")) {
    return WILD_COMPARE_MATCH_WITH_WILD;
  }
  int result=WILD_COMPARE_NO_MATCH;
  char wildcardMany='%';
  char wildcardOne='_';
  char wildcardEscape='\\';
  int searchForPos=0;
  int searchForEnd=searchForWildcard.length();
  int searchInPos=0;
  int searchInEnd=searchIn.length();
  while (searchForPos != searchForEnd) {
    char wildstrChar=searchForWildcard.charAt(searchForPos);
    while ((searchForWildcard.charAt(searchForPos) != wildcardMany) && (wildstrChar != wildcardOne)) {
      if ((searchForWildcard.charAt(searchForPos) == wildcardEscape) && ((searchForPos + 1) != searchForEnd)) {
        searchForPos++;
      }
      if ((searchInPos == searchInEnd) || (Character.toUpperCase(searchForWildcard.charAt(searchForPos++)) != Character.toUpperCase(searchIn.charAt(searchInPos++)))) {
        return WILD_COMPARE_MATCH_WITH_WILD;
      }
      if (searchForPos == searchForEnd) {
        return ((searchInPos != searchInEnd) ? WILD_COMPARE_MATCH_WITH_WILD : WILD_COMPARE_MATCH_NO_WILD);
      }
      result=WILD_COMPARE_MATCH_WITH_WILD;
    }
    if (searchForWildcard.charAt(searchForPos) == wildcardOne) {
      do {
        if (searchInPos == searchInEnd) {
          return (result);
        }
        searchInPos++;
      }
 while ((++searchForPos < searchForEnd) && (searchForWildcard.charAt(searchForPos) == wildcardOne));
      if (searchForPos == searchForEnd) {
        break;
      }
    }
    if (searchForWildcard.charAt(searchForPos) == wildcardMany) {
      char cmp;
      searchForPos++;
      for (; searchForPos != searchForEnd; searchForPos++) {
        if (searchForWildcard.charAt(searchForPos) == wildcardMany) {
          continue;
        }
        if (searchForWildcard.charAt(searchForPos) == wildcardOne) {
          if (searchInPos == searchInEnd) {
            return (WILD_COMPARE_NO_MATCH);
          }
          searchInPos++;
          continue;
        }
        break;
      }
      if (searchForPos == searchForEnd) {
        return WILD_COMPARE_MATCH_NO_WILD;
      }
      if (searchInPos == searchInEnd) {
        return WILD_COMPARE_NO_MATCH;
      }
      if (((cmp=searchForWildcard.charAt(searchForPos)) == wildcardEscape) && ((searchForPos + 1) != searchForEnd)) {
        cmp=searchForWildcard.charAt(++searchForPos);
      }
      searchForPos++;
      do {
        while ((searchInPos != searchInEnd) && (Character.toUpperCase(searchIn.charAt(searchInPos)) != Character.toUpperCase(cmp))) {
          searchInPos++;
        }
        if (searchInPos++ == searchInEnd) {
          return WILD_COMPARE_NO_MATCH;
        }
{
          int tmp=wildCompare(searchIn,searchForWildcard);
          if (tmp <= 0) {
            return (tmp);
          }
        }
      }
 while ((searchInPos != searchInEnd) && (searchForWildcard.charAt(0) != wildcardMany));
      return WILD_COMPARE_NO_MATCH;
    }
  }
  return ((searchInPos != searchInEnd) ? WILD_COMPARE_MATCH_WITH_WILD : WILD_COMPARE_MATCH_NO_WILD);
}

boolean compareMethods(@Nullable Method a,@Nullable Method b){
  if ((a == null) != (b == null)) {
    return false;
  }
  if (a != null && b != null) {
    if (!a.equals(b)) {
      return false;
    }
  }
  return true;
}

public Object remove(String markername){
  return prefixLibrarian.remove(markername);
}

String formatLastModified(String fileName){
synchronized (dateFormat) {
    return dateFormat.format(new Date(FileUtils.lastModified(fileName)));
  }
}

public TrueTypeFont(String platname,Object nativeNames,int fIndex,boolean javaRasterizer,boolean useFilePool) throws FontFormatException {
  super(platname,nativeNames);
  useJavaRasterizer=javaRasterizer;
  fontRank=Font2D.TTF_RANK;
  try {
    verify(useFilePool);
    init(fIndex);
    if (!useFilePool) {
      close();
    }
  }
 catch (  Throwable t) {
    close();
    if (t instanceof FontFormatException) {
      throw (FontFormatException)t;
    }
 else {
      throw new FontFormatException("Unexpected runtime exception.");
    }
  }
  Disposer.addObjectRecord(this,disposerRecord);
}

public void calcMinMax(){
  if (mDataSets == null)   return;
  mYMax=-Float.MAX_VALUE;
  mYMin=Float.MAX_VALUE;
  mXMax=-Float.MAX_VALUE;
  mXMin=Float.MAX_VALUE;
  for (int i=0, size=mDataSets.size(); i < size; i++) {
    T set=mDataSets.get(i);
    calcMinMax(set);
  }
  mLeftAxisMax=-Float.MAX_VALUE;
  mLeftAxisMin=Float.MAX_VALUE;
  mRightAxisMax=-Float.MAX_VALUE;
  mRightAxisMin=Float.MAX_VALUE;
  T firstLeft=getFirstLeft(mDataSets);
  if (firstLeft != null) {
    mLeftAxisMax=firstLeft.getYMax();
    mLeftAxisMin=firstLeft.getYMin();
    for (int i=0; i < mDataSets.size(); i++) {
      T dataSet=mDataSets.get(i);
      if (dataSet.getAxisDependency() == AxisDependency.LEFT) {
        if (dataSet.getYMin() < mLeftAxisMin)         mLeftAxisMin=dataSet.getYMin();
        if (dataSet.getYMax() > mLeftAxisMax)         mLeftAxisMax=dataSet.getYMax();
      }
    }
  }
  T firstRight=getFirstRight(mDataSets);
  if (firstRight != null) {
    mRightAxisMax=firstRight.getYMax();
    mRightAxisMin=firstRight.getYMin();
    for (int i=0; i < mDataSets.size(); i++) {
      T dataSet=mDataSets.get(i);
      if (dataSet.getAxisDependency() == AxisDependency.RIGHT) {
        if (dataSet.getYMin() < mRightAxisMin)         mRightAxisMin=dataSet.getYMin();
        if (dataSet.getYMax() > mRightAxisMax)         mRightAxisMax=dataSet.getYMax();
      }
    }
  }
}

public LogarithmicAxis(String label){
  super(label);
  setupNumberFmtObj();
}

protected final boolean has_cycle_recu(Set<BrdItem> p_visited_items,BrdItem p_search_item,BrdItem p_come_from_item,boolean p_ignore_areas){
  if (p_ignore_areas && (this instanceof BrdAreaConduction))   return false;
  Collection<BrdItem> contact_list=get_normal_contacts();
  if (contact_list == null)   return false;
  for (  BrdItem curr_contact : contact_list) {
    if (curr_contact == p_come_from_item)     continue;
    if (curr_contact == p_search_item)     return true;
    if (!p_visited_items.add(curr_contact))     continue;
    if (curr_contact.has_cycle_recu(p_visited_items,p_search_item,this,p_ignore_areas))     return true;
  }
  return false;
}

public static boolean isCallingClassReflectionAvailable(){
  return true;
}

@Override public void addTableModelListener(TableModelListener l){
  m_Listeners.add(l);
}

public Process exec(String[] taintedCommand,String[] taintedEnvironment,File workingDirectory,boolean redirectErrorStream) throws IOException {
  if (taintedCommand == null) {
    throw new NullPointerException("taintedCommand == null");
  }
  if (taintedCommand.length == 0) {
    throw new IndexOutOfBoundsException("taintedCommand.length == 0");
  }
  String[] command=taintedCommand.clone();
  String[] environment=taintedEnvironment != null ? taintedEnvironment.clone() : null;
  for (int i=0; i < command.length; i++) {
    if (command[i] == null) {
      throw new NullPointerException("taintedCommand[" + i + "] == null");
    }
  }
  if (environment != null) {
    for (int i=0; i < environment.length; i++) {
      if (environment[i] == null) {
        throw new NullPointerException("taintedEnvironment[" + i + "] == null");
      }
    }
  }
  FileDescriptor in=new FileDescriptor();
  FileDescriptor out=new FileDescriptor();
  FileDescriptor err=new FileDescriptor();
  String workingPath=(workingDirectory == null) ? null : workingDirectory.getPath();
synchronized (processReferences) {
    int pid;
    try {
      pid=exec(command,environment,workingPath,in,out,err,redirectErrorStream);
    }
 catch (    IOException e) {
      IOException wrapper=new IOException("Error running exec()." + " Command: " + Arrays.toString(command) + " Working Directory: "+ workingDirectory+ " Environment: "+ Arrays.toString(environment));
      wrapper.initCause(e);
      throw wrapper;
    }
    ProcessImpl process=new ProcessImpl(pid,in,out,err);
    ProcessReference processReference=new ProcessReference(process,referenceQueue);
    processReferences.put(pid,processReference);
    processReferences.notifyAll();
    return process;
  }
}

private static String[] formGrams(String text,int ng){
  int len=text.length();
  String[] res=new String[len - ng + 1];
  for (int i=0; i < len - ng + 1; i++) {
    res[i]=text.substring(i,i + ng);
  }
  return res;
}

public void loadSettingsFromJson(){
synchronized (LOCK) {
    loadSettingsFromJson(defaultFile);
    for (    String fileName : files) {
      loadSettingsFromJson(fileName);
    }
  }
}

public void testFlush() throws Exception {
  byte[] data=new byte[]{-127,-100,-50,-10,-1,0,1,10,50,127};
  TestOutputStream tos=new TestOutputStream();
  CipherOutputStream cos=new CipherOutputStream(tos){
  }
;
  cos.write(data);
  cos.flush();
  byte[] result=tos.toByteArray();
  if (!Arrays.equals(result,data)) {
    fail("CipherOutputStream did not flush the data.");
  }
}

public void loadTrainIcons(){
  for (  Train train : getTrainsByIdList()) {
    train.loadTrainIcon();
  }
}

public final String translate(final CharSequence input){
  if (input == null) {
    return null;
  }
  try {
    final StringWriter writer=new StringWriter(input.length() * 2);
    translate(input,writer);
    return writer.toString();
  }
 catch (  final IOException ioe) {
    throw new RuntimeException(ioe);
  }
}

public void insertReverseSorted(final int idx,final double distance){
  int i=0;
  for (  ListNode temp : m_List) {
    if (temp.distance < distance) {
      break;
    }
    i++;
  }
  m_List.add(i,new ListNode(idx,distance));
}

public double normalDistance(final double x,final double y,final double z,final Membership... bounds){
  final double dist=evaluate(x,y,z);
  final double perpX=x - dist * this.x;
  final double perpY=y - dist * this.y;
  final double perpZ=z - dist * this.z;
  if (!meetsAllBounds(perpX,perpY,perpZ,bounds)) {
    return Double.POSITIVE_INFINITY;
  }
  return Math.abs(dist);
}

public void testBAandBCbrokerNetworkWithSelectorsSendFirst() throws Exception {
  bridgeBrokers("BrokerB","BrokerA",true,1,false);
  bridgeBrokers("BrokerB","BrokerC",true,1,false);
  startAllBrokers();
  waitForBridgeFormation();
  Destination dest=createDestination("TEST.FOO",false);
  HashMap<String,Object> props=new HashMap<>();
  props.put("broker","BROKER_A");
  sendMessages("BrokerB",dest,MESSAGE_COUNT,props);
  props.clear();
  props.put("broker","BROKER_C");
  sendMessages("BrokerB",dest,MESSAGE_COUNT,props);
  MessageConsumer clientA=createConsumer("BrokerA",dest,"broker = 'BROKER_A'");
  MessageConsumer clientC=createConsumer("BrokerC",dest,"broker = 'BROKER_C'");
  Thread.sleep(2000);
  MessageIdList msgsA=getConsumerMessages("BrokerA",clientA);
  MessageIdList msgsC=getConsumerMessages("BrokerC",clientC);
  assertEquals(MESSAGE_COUNT,msgsA.getMessageCount());
  assertEquals(MESSAGE_COUNT,msgsC.getMessageCount());
}

private void generateVectorDrawableResult(VectorDrawable vector,String nextVectorName,boolean isLast,boolean isFirst) throws IOException {
  CustomLogger.logError("generateVectorDrawableResult" + vector.getFileName() + " islast=="+ isLast);
  if (!vectorAlreadyDefined.contains(vector.getFileName())) {
    currentVectorFileName=vector.getFileName();
    CustomLogger.logError("Generating the following file " + currentVectorFileName);
    File vectorFile=new File(drawableFolder,currentVectorFileName + ".xml");
    BufferedWriter vectorBW=createIt(vectorFile);
    CustomLogger.log("Generating the following file " + vectorFile.getAbsolutePath());
    generateVectorDrawable(vector,vectorBW,isLast);
    vectorAlreadyDefined.add(vector.getFileName());
    vectorBW.flush();
    vectorBW.close();
  }
  if (!isLast) {
    File animatedVectorFile=new File(drawableFolder,animatedVector.replace("#fileName",currentVectorFileName));
    BufferedWriter animatedVectorBW=createIt(animatedVectorFile);
    CustomLogger.log("Generating the following file " + animatedVectorFile.getAbsolutePath());
    CustomLogger.logError("----------->Generating the following file " + animatedVectorFile.getAbsolutePath() + ", next VectorName="+ nextVectorName);
    generateAnimatedVector(vector,animatedVectorBW,nextVectorName,false);
    generateAnimatorSet(vector,false);
    animatedVectorBW.flush();
    animatedVectorBW.close();
  }
  if (!isLast) {
    File animatedVectorFile=new File(drawableFolder,animatedVector.replace("#fileName",currentVectorFileName + reverse));
    BufferedWriter animatedVectorBW=createIt(animatedVectorFile);
    CustomLogger.log("Generating the following file " + animatedVectorFile.getAbsolutePath());
    CustomLogger.logError("----------->Generating the following file " + animatedVectorFile.getAbsolutePath() + ", next VectorName="+ nextVectorName);
    generateAnimatedVector(vector,animatedVectorBW,nextVectorName,true);
    generateAnimatorSet(vector,true);
    animatedVectorBW.flush();
    animatedVectorBW.close();
  }
}

public void access(){
  lastAccessedTime=System.currentTimeMillis();
}

public void writeToObject(Object object){
  try {
    Method method=BeanUtils.getWriteMethod(object.getClass(),getName(),getType());
    if (method != null) {
      method.invoke(object,new Object[]{getValue()});
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}

private HttpURLConnection doHTTPPostRequest(String location,String clientSessionId,Map<String,String> metadata,String postBody) throws CommunicationException {
  OutputStreamWriter writer=null;
  try {
    URL url=new URL(location);
    HttpURLConnection connection=(HttpURLConnection)url.openConnection();
    connection.setRequestMethod("POST");
    connection.addRequestProperty("Content-Type","application/json");
    if (clientSessionId != null) {
      connection.addRequestProperty(HTTP_HEADER_SESSION_ID,"GCS v1Client:" + clientSessionId);
    }
    if (metadata != null) {
      connection.addRequestProperty(HTTP_HEADER_METADATA,GcUtil.getBase64EncodedMetadata(metadata));
    }
    if (Constants.ENABLE_REQUEST_LOGGING) {
      logRequest(connection,postBody);
    }
    connection.setDoOutput(true);
    writer=new OutputStreamWriter(connection.getOutputStream(),"UTF-8");
    writer.write(postBody);
    writer.flush();
    if (connection.getResponseCode() != 200) {
      throw new CommunicationException("No status 200 received, status is :" + connection.getResponseCode());
    }
    return connection;
  }
 catch (  MalformedURLException e) {
    Log.e(TAG,"doHTTPPostRequest, Unable to parse url " + location);
    throw new CommunicationException("Unable to parse url " + location);
  }
catch (  IOException e) {
    Log.e(TAG,"doHTTPPostRequest, IOException while opening connection " + e.getMessage());
    throw new CommunicationException("IOException while opening connection " + e.getMessage(),e);
  }
 finally {
    if (writer != null) {
      try {
        writer.close();
      }
 catch (      IOException e) {
        Log.i(TAG,"doHTTPPostRequest, IOException while closing connection " + e.getMessage());
      }
    }
  }
}

void ioMessage(Throwable ex){
  log.printLines(PrefixKind.JAVAC,"msg.io");
  ex.printStackTrace(log.getWriter(WriterKind.NOTICE));
}

ObjectAnimator animateBoundScroll(){
  float curScroll=getStackScroll();
  float newScroll=getBoundedStackScroll(curScroll);
  if (Float.compare(newScroll,curScroll) != 0) {
    animateScroll(curScroll,newScroll,null);
  }
  return mScrollAnimator;
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String substring;
  doc=(Document)load("staff",false);
  elementList=doc.getElementsByTagName("name");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
  substring=child.substringData(0,8);
  assertEquals("characterdataSubStringValueAssert","Margaret",substring);
}

public static Collection<UUID> nodeIds(@Nullable Collection<? extends ClusterNode> nodes){
  if (nodes == null || nodes.isEmpty())   return Collections.emptyList();
  return F.viewReadOnly(nodes,node2id());
}

public static InputStream toInputStream(final CharSequence input,final Charset encoding){
  return IOUtils.toInputStream(input.toString(),encoding);
}

public static boolean matchesXMLString(char[] buf,int off,int end,String str){
  int len=str.length();
  if (len != end - off)   return false;
  for (int i=0; i < len; off+=1, i++) {
    if (buf[off] != str.charAt(i))     return false;
  }
  return true;
}

public double r(){
  return Math.sqrt(x * x + y * y);
}

public void sign(KeyPair keypair) throws IOException {
  if (namelist.isEmpty()) {
    throw new IllegalStateException("No domain was set");
  }
  if (keypair == null) {
    throw new IllegalArgumentException("keypair must not be null");
  }
  try {
    GeneralName[] gns=new GeneralName[namelist.size()];
    for (int ix=0; ix < namelist.size(); ix++) {
      gns[ix]=new GeneralName(GeneralName.dNSName,namelist.get(ix));
    }
    GeneralNames subjectAltName=new GeneralNames(gns);
    PKCS10CertificationRequestBuilder p10Builder=new JcaPKCS10CertificationRequestBuilder(namebuilder.build(),keypair.getPublic());
    ExtensionsGenerator extensionsGenerator=new ExtensionsGenerator();
    extensionsGenerator.addExtension(Extension.subjectAlternativeName,false,subjectAltName);
    p10Builder.addAttribute(PKCSObjectIdentifiers.pkcs_9_at_extensionRequest,extensionsGenerator.generate());
    PrivateKey pk=keypair.getPrivate();
    JcaContentSignerBuilder csBuilder=new JcaContentSignerBuilder(pk instanceof ECKey ? EC_SIGNATURE_ALG : SIGNATURE_ALG);
    ContentSigner signer=csBuilder.build(pk);
    csr=p10Builder.build(signer);
  }
 catch (  OperatorCreationException ex) {
    throw new IOException("Could not generate CSR",ex);
  }
}

void removeEmptyRows(final List list){
  for (final Iterator<ReceiptDetailInfo> detail=list.iterator(); detail.hasNext(); )   if (detail.next() == null)   detail.remove();
}

private void add(String text,Text textNode){
  int startIndex=builder.length();
  builder.append(text);
  int endIndex=builder.length();
  textRuns.add(new TextRun(textNode,startIndex,endIndex));
}

public DNetscapeBaseUrl(JDialog parent){
  super(parent);
  setTitle(res.getString("DNetscapeBaseUrl.Title"));
  initComponents();
}

private void readObject(ObjectInputStream s) throws IOException, ClassNotFoundException {
  s.defaultReadObject();
  init(getName());
}

public void appendRow(RowSpec rowSpec){
  checkNotNull(rowSpec,"The row spec must not be null.");
  rowSpecs.add(rowSpec);
}

public static <T>ReactiveSeq<T> fromPublisher(final Publisher<? extends T> publisher){
  Objects.requireNonNull(publisher);
  final SeqSubscriber<T> sub=SeqSubscriber.subscriber();
  publisher.subscribe(sub);
  return sub.stream();
}

public void multiplyAllValuesBy(final double multiplyBy,final int RoundType){
  for (  final T t : keySet()) {
    double val=m_values.get(t);
switch (RoundType) {
case 1:
      val=Math.floor(val * multiplyBy);
    break;
case 2:
  val=Math.round(val * multiplyBy);
break;
case 3:
val=Math.ceil(val * multiplyBy);
break;
default :
val=val * multiplyBy;
break;
}
put(t,(int)val);
}
}

public void onTabsAllClosing(long time,boolean incognito){
}

public final TestSubscriber<T> await(Duration timeout){
  if (cdl.getCount() == 0) {
    return this;
  }
  try {
    if (!cdl.await(timeout.toMillis(),TimeUnit.MILLISECONDS)) {
      throw new AssertionError("No complete or error signal before timeout");
    }
    return this;
  }
 catch (  InterruptedException ex) {
    throw new AssertionError("Wait interrupted",ex);
  }
}

protected void paintContentBorderBottomEdge(Graphics g,int tabPlacement,int selectedIndex,int x,int y,int w,int h){
  boolean leftToRight=CompiereUtils.isLeftToRight(tabPane);
  int bottom=y + h - 1;
  int right=x + w - 1;
  Rectangle selRect=selectedIndex < 0 ? null : getTabBounds(selectedIndex,calcRect);
  g.setColor(shadow);
  if (tabPlacement != BOTTOM || selectedIndex < 0 || (selRect.x < x || selRect.x > x + w)) {
    g.setColor(darkShadow);
    g.drawLine(x,y + h - 1,x + w - 1,y + h - 1);
  }
 else {
    boolean lastInRun=isLastInRun(selectedIndex);
    g.setColor(darkShadow);
    if (leftToRight || lastInRun)     g.drawLine(x,bottom,selRect.x,bottom);
 else     g.drawLine(x,bottom,selRect.x - 1,bottom);
    if (selRect.x + selRect.width < x + w - 2) {
      if (leftToRight && !lastInRun)       g.drawLine(selRect.x + selRect.width,bottom,right,bottom);
 else       g.drawLine(selRect.x + selRect.width - 1,bottom,right,bottom);
    }
  }
}

public static void upto(double self,Number to,@ClosureParams(FirstParam.class) Closure closure){
  double to1=to.doubleValue();
  if (self <= to1) {
    for (double i=self; i <= to1; i++) {
      closure.call(i);
    }
  }
 else   throw new GroovyRuntimeException("The argument (" + to + ") to upto() cannot be less than the value ("+ self+ ") it's called on.");
}

public void save(String type,List<ElasticSearchDoc> docs){
  if (docs != null && !docs.isEmpty()) {
    List<List<ElasticSearchDoc>> partitionedDocs=Lists.partition(docs,100);
    partitionedDocs.forEach(null);
  }
}

public void error(SourceLocator srcLctr,String msg) throws TransformerException {
  error(srcLctr,null,null,msg,null);
}

void removeListener(String listenerID){
  if (listenerObjects != null) {
synchronized (listenerObjects) {
      listenerObjects.remove(listenerID);
      if (listenerObjects.isEmpty()) {
        deregisterListener();
      }
    }
    if (debug.messageEnabled()) {
      debug.message("ServiceConfigManagerImpl(" + serviceName + "):removeListener ListenerId: "+ listenerID);
    }
  }
}

@Deprecated public void registerCredentials(UserCredential authentication){
  wallet.put(authentication.getURL(),authentication);
}

public void testDatabaseDriverPropertiesUserAndPasswordPropertyOverrideDSUserAndPassword(){
  String driverPropertyString="user=APP;password=egg;CreateDatabase=create";
  Properties props=new Properties();
  props.setProperty(DatasourcePropertySet.USERNAME,"sa");
  props.setProperty(DatasourcePropertySet.PASSWORD,"");
  props.setProperty(DatasourcePropertySet.CONNECTION_PROPERTIES,driverPropertyString);
  DataSource ds=dataSourceConverter.fromProperties(props);
  assertEquals("APP",ds.getUsername());
  assertEquals("egg",ds.getPassword());
}

public boolean isAGCEnabled(){
  return mAGCEnabled.get();
}

protected LinkedList<String> splitIntoAllophones(String phoneString){
  LinkedList<String> phoneList=new LinkedList<String>();
  for (int i=0; i < phoneString.length(); i++) {
    String name=null;
    for (int j=3; j >= 1; j--) {
      if (i + j <= phoneString.length()) {
        String candidate=phoneString.substring(i,i + j);
        if (getAllophone(candidate) != null) {
          name=candidate;
          i+=j - 1;
          break;
        }
      }
    }
    if (name != null) {
      phoneList.add(name);
    }
  }
  return phoneList;
}

protected void addToMaintenanceQueue(NodePortTuple npt){
  if (maintenanceQueue.contains(npt) == false) {
    maintenanceQueue.add(npt);
  }
}

private boolean execute(boolean readResponse) throws IOException {
  try {
    httpEngine.sendRequest();
    if (readResponse) {
      httpEngine.readResponse();
    }
    return true;
  }
 catch (  IOException e) {
    if (handleFailure(e)) {
      return false;
    }
 else {
      throw e;
    }
  }
}

public BigdataSail(final Properties properties){
  this(properties.getProperty(Options.NAMESPACE,Options.DEFAULT_NAMESPACE),new Journal(properties));
  closeOnShutdown=true;
  if (!exists()) {
    try {
      create(properties);
    }
 catch (    InterruptedException|ExecutionException e) {
      throw new RuntimeException(e);
    }
  }
}

public float convert(){
  return Float.intBitsToFloat((int)bytes);
}

protected int addNode(Node node,int parentIndex,int previousSibling,int forceNodeType){
  int nodeIndex=m_nodes.size();
  if (m_dtmIdent.size() == (nodeIndex >>> DTMManager.IDENT_DTM_NODE_BITS)) {
    try {
      if (m_mgr == null)       throw new ClassCastException();
      DTMManagerDefault mgrD=(DTMManagerDefault)m_mgr;
      int id=mgrD.getFirstFreeDTMID();
      mgrD.addDTM(this,id,nodeIndex);
      m_dtmIdent.addElement(id << DTMManager.IDENT_DTM_NODE_BITS);
    }
 catch (    ClassCastException e) {
      error(XMLMessages.createXMLMessage(XMLErrorResources.ER_NO_DTMIDS_AVAIL,null));
    }
  }
  m_size++;
  int type;
  if (NULL == forceNodeType)   type=node.getNodeType();
 else   type=forceNodeType;
  if (Node.ATTRIBUTE_NODE == type) {
    String name=node.getNodeName();
    if (name.startsWith("xmlns:") || name.equals("xmlns")) {
      type=DTM.NAMESPACE_NODE;
    }
  }
  m_nodes.addElement(node);
  m_firstch.setElementAt(NOTPROCESSED,nodeIndex);
  m_nextsib.setElementAt(NOTPROCESSED,nodeIndex);
  m_prevsib.setElementAt(previousSibling,nodeIndex);
  m_parent.setElementAt(parentIndex,nodeIndex);
  if (DTM.NULL != parentIndex && type != DTM.ATTRIBUTE_NODE && type != DTM.NAMESPACE_NODE) {
    if (NOTPROCESSED == m_firstch.elementAt(parentIndex))     m_firstch.setElementAt(nodeIndex,parentIndex);
  }
  String nsURI=node.getNamespaceURI();
  String localName=(type == Node.PROCESSING_INSTRUCTION_NODE) ? node.getNodeName() : node.getLocalName();
  if (((type == Node.ELEMENT_NODE) || (type == Node.ATTRIBUTE_NODE)) && null == localName)   localName=node.getNodeName();
  ExpandedNameTable exnt=m_expandedNameTable;
  if (node.getLocalName() == null && (type == Node.ELEMENT_NODE || type == Node.ATTRIBUTE_NODE)) {
  }
  int expandedNameID=(null != localName) ? exnt.getExpandedTypeID(nsURI,localName,type) : exnt.getExpandedTypeID(type);
  m_exptype.setElementAt(expandedNameID,nodeIndex);
  indexNode(expandedNameID,nodeIndex);
  if (DTM.NULL != previousSibling)   m_nextsib.setElementAt(nodeIndex,previousSibling);
  if (type == DTM.NAMESPACE_NODE)   declareNamespaceInContext(parentIndex,nodeIndex);
  return nodeIndex;
}

public FileProcessController(final FileControllerParameters arguments,final int pid){
  this(arguments,pid,Long.getLong(STATUS_TIMEOUT_PROPERTY,60 * 1000),TimeUnit.MILLISECONDS);
}

public void testAddCertificate2() throws Exception {
  Identity i=new IdentityStub("iii");
  PublicKeyStub pk1=new PublicKeyStub("kkk","fff",null);
  CertificateStub c1=new CertificateStub("fff",null,null,pk1);
  i.addCertificate(c1);
  assertSame(c1,i.certificates()[0]);
  assertSame(pk1,i.getPublicKey());
}

protected static final String addEscapes(String str){
  StringBuffer retval=new StringBuffer();
  char ch;
  for (int i=0; i < str.length(); i++) {
switch (str.charAt(i)) {
case 0:
      continue;
case '\b':
    retval.append("\\b");
  continue;
case '\t':
retval.append("\\t");
continue;
case '\n':
retval.append("\\n");
continue;
case '\f':
retval.append("\\f");
continue;
case '\r':
retval.append("\\r");
continue;
case '\"':
retval.append("\\\"");
continue;
case '\'':
retval.append("\\\'");
continue;
case '\\':
retval.append("\\\\");
continue;
default :
if ((ch=str.charAt(i)) < 0x20 || ch > 0x7e) {
String s="0000" + Integer.toString(ch,16);
retval.append("\\u" + s.substring(s.length() - 4,s.length()));
}
 else {
retval.append(ch);
}
continue;
}
}
return retval.toString();
}

protected Set<Future<Void>> send(String channelId,Object message){
  Collection<Session> sessions=(channelId != null) ? socketSessions.get(channelId) : null;
  if (sessions != null && !sessions.isEmpty()) {
    Set<Future<Void>> results=new HashSet<>(sessions.size());
    String json=Json.encode(message);
    for (    Session session : sessions) {
      if (session.isOpen()) {
        send(session,json,results);
      }
    }
    return results;
  }
  return emptySet();
}

public Object attribute(Object key){
  return (attributes != null) ? attributes.get(key) : null;
}

public Response doPut(String url){
  return doPut(url,null);
}

private static Pair<String,String> offsetRRX(final long offset,final ITranslationEnvironment environment,final List<ReilInstruction> instructions,final String registerNodeValue1,final String registerNodeValue2){
  final String address=environment.getNextVariableString();
  final String index=environment.getNextVariableString();
  final String tmpVar=environment.getNextVariableString();
  final String tmpVar1=environment.getNextVariableString();
  final String tmpVar2=environment.getNextVariableString();
  final String tmpVar3=environment.getNextVariableString();
  long baseOffset=offset;
  instructions.add(ReilHelpers.createBsh(baseOffset++,bt,"C",wd,String.valueOf(31),dw,tmpVar1));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dw,registerNodeValue2,bt,String.valueOf(-1),dw,tmpVar2));
  instructions.add(ReilHelpers.createOr(baseOffset++,dw,tmpVar1,dw,tmpVar2,dw,tmpVar3));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dw,tmpVar3,dw,dWordBitMask,dw,index));
  instructions.add(ReilHelpers.createAdd(baseOffset++,dw,registerNodeValue1,dw,index,dw,tmpVar));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dw,tmpVar,dw,dWordBitMask,dw,address));
  return new Pair<String,String>(address,registerNodeValue1);
}

public void unregisterDropControllers(){
  dropControllerList.clear();
}

private static long CallStaticLongMethodV(JNIEnvironment env,int classJREF,int methodID,Address argAddress) throws Exception {
  if (traceJNI)   VM.sysWrite("JNI called: CallStaticLongMethodV  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    Object returnObj=JNIHelpers.invokeWithVarArg(methodID,argAddress,TypeReference.Long);
    return Reflection.unwrapLong(returnObj);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
    return 0L;
  }
}

public static String createLink(String uri,String label){
  return "<a href='" + uri + "'>"+ label+ "</a>";
}

public int size(){
  return segments.size();
}

public void addOperand(int startTick,int endTick,String text,Lifeline constraintLifeline) throws SequenceDiagramCheckedException {
  if (operands.size() == 0 && this.startTick != startTick) {
    throw new IllegalArgumentException("The start tick of the first operand must be equal to the start tick of the combined fragment");
  }
  operands.add(new Operand(startTick,endTick,text,constraintLifeline));
}

public static Number asin(Number a){
  return Math.asin(a.doubleValue());
}

private void createAndAttachEvent(long ov) throws WindowsException {
  long hEvent=CreateEvent(false,false);
  UNSAFE.putAddress(ov + OFFSETOF_HEVENT,hEvent);
}

public String toString(){
  StringBuffer result=new StringBuffer();
  result.append("[");
  int s1=sizes.size();
  for (int i=0; i < s1; ++i) {
    int s2=sizes.get(i);
    result.append("[");
    for (int j=0; j < s2; ++j) {
      result.append(vector[i][j]);
      if (j + 1 < s2)       result.append(", ");
    }
    result.append("]");
    if (i + 1 < s1)     result.append(",\n ");
  }
  result.append("]");
  return result.toString();
}

@Override public int compareTo(String o){
  int result;
  int major;
  int minor;
  int revision;
  int pnt;
  int[] maj=new int[1];
  int[] min=new int[1];
  int[] rev=new int[1];
  int[] point=new int[1];
  parseVersion(o,maj,min,rev,point);
  major=maj[0];
  minor=min[0];
  revision=rev[0];
  pnt=point[0];
  if (MAJOR < major) {
    result=-1;
  }
 else   if (MAJOR == major) {
    if (MINOR < minor) {
      result=-1;
    }
 else     if (MINOR == minor) {
      if (REVISION < revision) {
        result=-1;
      }
 else       if (REVISION == revision) {
        if (POINT < pnt) {
          result=-1;
        }
 else         if (POINT == pnt) {
          result=0;
        }
 else {
          result=1;
        }
      }
 else {
        result=1;
      }
    }
 else {
      result=1;
    }
  }
 else {
    result=1;
  }
  return result;
}

private void generateIntegrityKeyPair(boolean clientMode) throws UnsupportedEncodingException, IOException, NoSuchAlgorithmException {
  byte[] cimagic=CLIENT_INT_MAGIC.getBytes(encoding);
  byte[] simagic=SVR_INT_MAGIC.getBytes(encoding);
  MessageDigest md5=MessageDigest.getInstance("MD5");
  byte[] keyBuffer=new byte[H_A1.length + cimagic.length];
  System.arraycopy(H_A1,0,keyBuffer,0,H_A1.length);
  System.arraycopy(cimagic,0,keyBuffer,H_A1.length,cimagic.length);
  md5.update(keyBuffer);
  byte[] Kic=md5.digest();
  System.arraycopy(simagic,0,keyBuffer,H_A1.length,simagic.length);
  md5.update(keyBuffer);
  byte[] Kis=md5.digest();
  if (logger.isLoggable(Level.FINER)) {
    traceOutput(DI_CLASS_NAME,"generateIntegrityKeyPair","DIGEST12:Kic: ",Kic);
    traceOutput(DI_CLASS_NAME,"generateIntegrityKeyPair","DIGEST13:Kis: ",Kis);
  }
  if (clientMode) {
    myKi=Kic;
    peerKi=Kis;
  }
 else {
    myKi=Kis;
    peerKi=Kic;
  }
}

public static boolean isLocalFileUri(Uri uri){
  final String scheme=getSchemeOrNull(uri);
  return LOCAL_FILE_SCHEME.equals(scheme);
}

CompletableFuture<WriteResponse> write(List<WriteValue> writeValues);

public static <V>boolean addDistinctEntry(List<V> sourceList,V entry){
  return (sourceList != null && !sourceList.contains(entry)) ? sourceList.add(entry) : false;
}

public static boolean validSystemNameConfig(String systemName,char type){
  if (!validSystemNameFormat(systemName,type)) {
    return false;
  }
  int bit=getBitFromSystemName(systemName);
  if ((type == 'T') || (type == 'L')) {
    if ((bit <= 0) || (bit > OutputBits.getNumOutputBits())) {
      return false;
    }
  }
 else   if (type == 'S') {
    if ((bit <= 0) || (bit > InputBits.getNumInputBits())) {
      return false;
    }
  }
 else {
    log.error("Invalid type specification in validSystemNameConfig call");
    return false;
  }
  return true;
}

public boolean mouseMoved(MouseEvent e){
  EsriGraphicList list=getEsriGraphicList();
  boolean ret=false;
  if (list != null) {
    OMGraphic omg=list.findClosest(e.getX(),e.getY(),4);
    if (omg != null) {
      int index;
      Integer I=((Integer)omg.getAttribute(SHAPE_INDEX_ATTRIBUTE));
      if (I != null) {
        index=I.intValue();
      }
 else {
        index=list.indexOf(omg);
      }
      if (parentLayer == null) {
        Component comp=getComponent();
        if (comp instanceof Layer) {
          parentLayer=(Layer)comp;
        }
      }
      if (parentLayer != null) {
        parentLayer.fireRequestToolTip(getDescription(index));
      }
      ret=true;
    }
 else     if (parentLayer != null) {
      parentLayer.fireHideToolTip();
    }
  }
  return ret;
}

private void push(final int type){
  if (outputStack == null) {
    outputStack=new int[10];
  }
  int n=outputStack.length;
  if (outputStackTop >= n) {
    int[] t=new int[Math.max(outputStackTop + 1,2 * n)];
    System.arraycopy(outputStack,0,t,0,n);
    outputStack=t;
  }
  outputStack[outputStackTop++]=type;
  int top=owner.inputStackTop + outputStackTop;
  if (top > owner.outputStackMax) {
    owner.outputStackMax=top;
  }
}

public void createDatabaseEntitiesForBusinessObjectDataNotificationRegistrationTesting(String namespace,List<String> notificationEventTypes,String businessObjectDefinitionNamespace,String businessObjectDefinitionName,List<String> fileTypes,List<String> storageNames,List<String> businessObjectDataStatuses,List<JobAction> jobActions){
  NamespaceEntity namespaceEntity=namespaceDao.getNamespaceByCd(namespace);
  if (namespaceEntity == null) {
    namespaceDaoTestHelper.createNamespaceEntity(namespace);
  }
  if (!CollectionUtils.isEmpty(notificationEventTypes)) {
    for (    String notificationEventType : notificationEventTypes) {
      NotificationEventTypeEntity notificationEventTypeEntity=notificationEventTypeDao.getNotificationEventTypeByCode(notificationEventType);
      if (notificationEventTypeEntity == null) {
        notificationRegistrationDaoTestHelper.createNotificationEventTypeEntity(notificationEventType);
      }
    }
  }
  BusinessObjectDefinitionEntity businessObjectDefinitionEntity=businessObjectDefinitionDao.getBusinessObjectDefinitionByKey(new BusinessObjectDefinitionKey(businessObjectDefinitionNamespace,businessObjectDefinitionName));
  if (businessObjectDefinitionEntity == null) {
    businessObjectDefinitionDaoTestHelper.createBusinessObjectDefinitionEntity(businessObjectDefinitionNamespace,businessObjectDefinitionName,AbstractServiceTest.DATA_PROVIDER_NAME,AbstractServiceTest.BDEF_DESCRIPTION);
  }
  if (!CollectionUtils.isEmpty(fileTypes)) {
    for (    String businessObjectFormatFileType : fileTypes) {
      fileTypeDaoTestHelper.createFileTypeEntity(businessObjectFormatFileType);
    }
  }
  if (!CollectionUtils.isEmpty(storageNames)) {
    for (    String storageName : storageNames) {
      storageDaoTestHelper.createStorageEntity(storageName,StoragePlatformEntity.S3);
    }
  }
  if (!CollectionUtils.isEmpty(businessObjectDataStatuses)) {
    for (    String businessObjectDataStatus : businessObjectDataStatuses) {
      BusinessObjectDataStatusEntity businessObjectDataStatusEntity=businessObjectDataStatusDao.getBusinessObjectDataStatusByCode(businessObjectDataStatus);
      if (businessObjectDataStatusEntity == null) {
        businessObjectDataStatusDaoTestHelper.createBusinessObjectDataStatusEntity(businessObjectDataStatus);
      }
    }
  }
  if (!CollectionUtils.isEmpty(jobActions)) {
    for (    JobAction jobAction : jobActions) {
      jobDefinitionDaoTestHelper.createJobDefinitionEntity(jobAction.getNamespace(),jobAction.getJobName(),String.format("Description of \"%s.%s\" job definition.",jobAction.getNamespace(),jobAction.getJobName()),String.format("%s.%s.%s",jobAction.getNamespace(),jobAction.getJobName(),AbstractServiceTest.ACTIVITI_ID));
    }
  }
}

public boolean postData(InputStream data,Long length,OutputStream output,String type,URL url){
  if (mockMode)   return true;
  boolean success=true;
  if (type == null)   type=DEFAULT_CONTENT_TYPE;
  HttpURLConnection urlc=null;
  try {
    try {
      urlc=(HttpURLConnection)url.openConnection();
      try {
        urlc.setRequestMethod("POST");
      }
 catch (      ProtocolException e) {
        fatal("Shouldn't happen: HttpURLConnection doesn't support POST??" + e);
      }
      urlc.setDoOutput(true);
      urlc.setDoInput(true);
      urlc.setUseCaches(false);
      urlc.setAllowUserInteraction(false);
      urlc.setRequestProperty("Content-type",type);
      basicAuth(urlc);
      if (null != length) {
        urlc.setFixedLengthStreamingMode(length);
      }
 else {
        urlc.setChunkedStreamingMode(-1);
      }
      urlc.connect();
    }
 catch (    IOException e) {
      fatal("Connection error (is Solr running at " + solrUrl + " ?): "+ e);
      success=false;
    }
catch (    Exception e) {
      fatal("POST failed with error " + e.getMessage());
    }
    try (final OutputStream out=urlc.getOutputStream()){
      pipe(data,out);
    }
 catch (    IOException e) {
      fatal("IOException while posting data: " + e);
    }
    try {
      success&=checkResponseCode(urlc);
      try (final InputStream in=urlc.getInputStream()){
        pipe(in,output);
      }
     }
 catch (    IOException e) {
      warn("IOException while reading response: " + e);
      success=false;
    }
catch (    GeneralSecurityException e) {
      fatal("Looks like Solr is secured and would not let us in. Try with another user in '-u' parameter");
    }
  }
  finally {
    if (urlc != null)     urlc.disconnect();
  }
  return success;
}

public FormatException(String s,Throwable rootCause){
  super(s + ": " + rootCause.getLocalizedMessage());
  this.rootCause=rootCause;
}

private Pair<BigDecimal,BigDecimal> fillPayment(final CustomerOrder order,final CustomerOrderDelivery delivery,final Payment payment,final boolean singlePay,final BigDecimal runningTotal,final BigDecimal runningTotalTax,final boolean lastDelivery){
  if (payment.getTransactionReferenceId() == null) {
    payment.setTransactionReferenceId(delivery.getDeliveryNum());
  }
  payment.setOrderShipment(singlePay ? order.getOrdernum() : delivery.getDeliveryNum());
  fillPaymentItems(delivery,payment);
  fillPaymentShipment(order,delivery,payment);
  return fillPaymentAmount(order,delivery,payment,singlePay,runningTotal,runningTotalTax,lastDelivery);
}

public static double angle(NumberVector v1,NumberVector v2,NumberVector o){
  final int dim1=v1.getDimensionality(), dim2=v2.getDimensionality(), dimo=o.getDimensionality();
  final int mindim=(dim1 <= dim2) ? dim1 : dim2;
  double cross=0, l1=0, l2=0;
  for (int k=0; k < mindim; k++) {
    final double ok=k < dimo ? o.doubleValue(k) : 0.;
    final double r1=v1.doubleValue(k) - ok;
    final double r2=v2.doubleValue(k) - ok;
    cross+=r1 * r2;
    l1+=r1 * r1;
    l2+=r2 * r2;
  }
  for (int k=mindim; k < dim1; k++) {
    final double ok=k < dimo ? o.doubleValue(k) : 0.;
    final double r1=v1.doubleValue(k) - ok;
    l1+=r1 * r1;
  }
  for (int k=mindim; k < dim2; k++) {
    final double ok=k < dimo ? o.doubleValue(k) : 0.;
    final double r2=v2.doubleValue(k) - ok;
    l2+=r2 * r2;
  }
  final double a=(cross == 0.) ? 0. : (l1 == 0. || l2 == 0.) ? 1. : Math.sqrt((cross / l1) * (cross / l2));
  return (a < 1.) ? a : 1.;
}

void materialize(){
  if (cachefill < 0) {
    return;
  }
  double min=Double.MAX_VALUE, max=Double.MIN_VALUE;
  for (int i=0; i < cachefill; i++) {
    min=Math.min(min,cachec[i]);
    max=Math.max(max,cachec[i]);
  }
  LinearScale scale=new LinearScale(min,max);
  min=scale.getMin();
  max=scale.getMax();
  this.base=min;
  this.max=max;
  this.binsize=(max - min) / this.destsize;
  this.data=new float[this.destsize << 1];
  size=destsize;
  final int end=cachefill;
  cachefill=-1;
  for (int i=0; i < end; i++) {
    increment(cachec[i],cachev[i]);
  }
  cachec=null;
  cachev=null;
}

public boolean buildHostPart(Appendable buffer,String url,Boolean useSSL) throws WebAppConfigurationException, IOException {
  return buildHostPart(buffer,url,useSSL,true);
}

public static <T>List<T> shiftElementsToEnd(final List<T> source,final int count){
  final ArrayList<T> rVal=new ArrayList<>(source.size());
  for (int i=count; i < source.size(); i++) {
    rVal.add(source.get(i));
  }
  for (int i=0; i < count; i++) {
    rVal.add(source.get(i));
  }
  if (source.size() != rVal.size()) {
    throw new IllegalStateException("Didnt work for: " + count + " "+ source+ " : "+ rVal);
  }
  return rVal;
}

private boolean isLeafPage(ByteBuffer buffer) throws IOException {
  byte pageType=buffer.get(0);
  if (pageType == PageTypes.INDEX_LEAF) {
    return true;
  }
 else   if (pageType == PageTypes.INDEX_NODE) {
    return false;
  }
  throw new IOException(withErrorContext("Unexpected page type " + pageType));
}

public void addJsLibFiles(File... files){
  jsLibFiles.addAll(Arrays.asList(files));
}

public void testWriteOffset(){
  int len=200;
  int dataLen=100;
  byte[] srcData=getWData(dataLen);
  byte[] data=new byte[dataLen];
  int nOffset=10;
  ByteFifoBuffer instance=new ByteFifoBuffer(len);
  int result=instance.writeOffset(srcData,dataLen,nOffset);
  int readCount=instance.readOffset(data,0,dataLen,nOffset);
  assertEquals(result,readCount);
  assertArrayEquals(srcData,data);
  byte[] halfFilled=new byte[dataLen * 2];
  System.arraycopy(srcData,0,halfFilled,dataLen,dataLen);
  byte[] halfFilledRead=new byte[dataLen * 2];
  instance.readOffset(halfFilledRead,dataLen,dataLen,nOffset);
  assertArrayEquals(halfFilled,halfFilledRead);
  instance=new ByteFifoBuffer(len);
  instance.write(srcData,dataLen);
  instance.write(srcData,dataLen / 2);
  instance.read(data,dataLen);
  instance.writeOffset(srcData,dataLen,50);
  instance=new ByteFifoBuffer(61440);
  instance.writeOffset(getWData(1384),1384,31832);
}

private void initPropertiesIfNecessary(){
  if (timer == null) {
    Toolkit t=Toolkit.getDefaultToolkit();
    Integer prop;
    prop=(Integer)t.getDesktopProperty("DnD.Autoscroll.interval");
    timer=new Timer(prop == null ? 100 : prop.intValue(),this);
    prop=(Integer)t.getDesktopProperty("DnD.Autoscroll.initialDelay");
    timer.setInitialDelay(prop == null ? 100 : prop.intValue());
    prop=(Integer)t.getDesktopProperty("DnD.Autoscroll.cursorHysteresis");
    if (prop != null) {
      hysteresis=prop.intValue();
    }
  }
}

public EObject loadModel(String filename,String cwd){
  URI fileURI=normalizeURI(URI.createURI(filename));
  URI cwdURI=normalizeURI(URI.createURI(cwd));
  return loadModel(fileURI,cwdURI);
}

static boolean pathIsWindows(String path){
  if (path != null && path.length() > 1) {
    return (Character.isLetter(path.charAt(0)) && path.charAt(1) == ':') || (path.startsWith("//") || path.startsWith("\\\\"));
  }
  return false;
}

public static boolean isTestServer(){
  return System.getProperty(TestServerOnly.TEST_SERVER_PROPERTY) != null;
}

@SuppressWarnings("deprecation") private <T>String generateTestFile(String filename,List<T> elems,AvroCoder<T> coder,String codec) throws IOException {
  File tmpFile=tmpFolder.newFile(filename);
  String path=tmpFile.toString();
  FileOutputStream os=new FileOutputStream(tmpFile);
  DatumWriter<T> datumWriter=coder.createDatumWriter();
  try (DataFileWriter<T> writer=new DataFileWriter<>(datumWriter)){
    writer.setCodec(CodecFactory.fromString(codec));
    writer.create(coder.getSchema(),os);
    for (    T elem : elems) {
      writer.append(elem);
    }
  }
   return path;
}

public void notifyReturned(NotifyContext notifyContext,ITemplateHolder template){
  if (notifyContext == null)   return;
  if (_filterManager._isFilter[FilterOperationCodes.AFTER_NOTIFY_TRIGGER]) {
    Object[] entries=new Object[2];
    entries[0]=notifyContext.getEntry();
    entries[1]=template;
    try {
      _filterManager.invokeFilters(FilterOperationCodes.AFTER_NOTIFY_TRIGGER,null,entries);
    }
 catch (    Exception e) {
      if (_logger.isLoggable(Level.FINE))       _logger.log(Level.FINE,"Exception was thrown by filter on AFTER_NOTIFY_TRIGGER.",e);
    }
  }
  decreaseCounter(notifyContext);
}

public static String normalizeSlashes(String path){
  return path.replaceAll("\\\\","/");
}

protected Point2D correct(Point2D anchor,Rectangle2D bounds){
  if (anchor == null)   return anchor;
  double x=anchor.getX(), y=anchor.getY();
  double x1=bounds.getMinX(), y1=bounds.getMinY();
  double x2=bounds.getMaxX(), y2=bounds.getMaxY();
  x=(x < x1 ? x1 : (x > x2 ? x2 : x));
  y=(y < y1 ? y1 : (y > y2 ? y2 : y));
  m_tmp.setLocation(x,y);
  return m_tmp;
}

private String saveParameters(Set userSession,String userID,boolean isSOAPInitiated,boolean isIDPInitiated,String protocol,String realm,String idpEntityID,String spEntityID,String relayState,String singleLogoutRequestXML,String singleLogoutResponseXML,int currentStatus){
  String tmpRelayState=SAML2Utils.generateIDWithServerID();
  relayStateMap.put(tmpRelayState,relayState);
  if (debug.messageEnabled()) {
    debug.message("SingleLogoutManager.saveParameters: " + "userID=" + userID + ", session="+ userSession+ ", orig relayState="+ relayState+ ", new="+ tmpRelayState+ ", isSOAInitiated="+ isSOAPInitiated+ ", isIDPInitiated="+ isIDPInitiated+ ", protocol="+ protocol+ ", relam="+ realm+ ", idpEntityID="+ idpEntityID+ ", spEntityID="+ spEntityID+ ", status="+ currentStatus+ "\nlogout Request XML="+ singleLogoutRequestXML+ "\nlogout response XML="+ singleLogoutResponseXML);
  }
  if (userSession != null) {
    userSessionMap.put(tmpRelayState,userSession);
  }
  if (userID != null) {
    userIDMap.put(tmpRelayState,userID);
  }
  if (isSOAPInitiated) {
    isSOAPInitiatedMap.put(tmpRelayState,Boolean.TRUE);
  }
 else {
    isSOAPInitiatedMap.put(tmpRelayState,Boolean.FALSE);
  }
  if (isIDPInitiated) {
    isIDPInitiatedMap.put(tmpRelayState,Boolean.TRUE);
  }
 else {
    isIDPInitiatedMap.put(tmpRelayState,Boolean.FALSE);
  }
  if (protocol != null) {
    origProtocolMap.put(tmpRelayState,protocol);
    int listSize=protocolList.size();
    List list=new ArrayList(listSize - 1);
    for (int i=0; i < listSize; i++) {
      String proto=(String)protocolList.get(i);
      if (!proto.equals(protocol)) {
        list.add(proto);
      }
    }
    protocolListMap.put(tmpRelayState,list);
  }
  if (realm != null) {
    realmMap.put(tmpRelayState,realm);
  }
  if (idpEntityID != null) {
    idpEntityIDMap.put(tmpRelayState,idpEntityID);
  }
  if (spEntityID != null) {
    spEntityIDMap.put(tmpRelayState,spEntityID);
  }
  if (singleLogoutRequestXML != null) {
    sloRequestXMLMap.put(tmpRelayState,singleLogoutRequestXML);
  }
  if (singleLogoutResponseXML != null) {
    sloResponseXMLMap.put(tmpRelayState,singleLogoutResponseXML);
  }
  currentStatusMap.put(tmpRelayState,new Integer(currentStatus));
  return tmpRelayState;
}

private void nextPacket() throws IOException {
  int off=0;
  int remaining=7;
  do {
    int count=baseStream.read(header,off,remaining);
    if (count <= 0) {
      throw new EOFException("unexpected end of stream, read " + (7 - remaining) + " bytes from "+ 7);
    }
    remaining-=count;
    off+=count;
  }
 while (remaining > 0);
  int compressedLength=(header[0] & 0xff) + ((header[1] & 0xff) << 8) + ((header[2] & 0xff) << 16);
  lastPacketSeq=header[3] & 0xff;
  int decompressedLength=(header[4] & 0xff) + ((header[5] & 0xff) << 8) + ((header[6] & 0xff) << 16);
  if (decompressedLength != 0) {
    doDecompress=true;
    remainingBytes+=decompressedLength;
    byte[] compressedBuffer=new byte[compressedLength];
    byte[] decompressedBuffer=new byte[decompressedLength];
    off=0;
    remaining=compressedBuffer.length;
    do {
      int count=baseStream.read(compressedBuffer,off,remaining);
      if (count <= 0) {
        throw new EOFException("unexpected end of stream, read " + (7 - remaining) + " bytes from "+ 7);
      }
      remaining-=count;
      off+=count;
    }
 while (remaining > 0);
    Inflater inflater=new Inflater();
    inflater.setInput(compressedBuffer);
    try {
      int actualUncompressBytes=inflater.inflate(decompressedBuffer);
      if (actualUncompressBytes != decompressedLength) {
        throw new IOException("Invalid stream length after decompression " + actualUncompressBytes + ",expected "+ decompressedLength);
      }
    }
 catch (    DataFormatException dfe) {
      throw new IOException(dfe);
    }
    inflater.end();
    decompressedByteStream=new ByteArrayInputStream(decompressedBuffer);
  }
 else {
    doDecompress=false;
    remainingBytes+=compressedLength;
    decompressedByteStream=null;
  }
  logger.trace("read compress packet seq:" + lastPacketSeq + " length:"+ remainingBytes);
}

protected boolean loadField(DDFRecord record,String tagName,int fieldIndex){
  if (fields.get(tagName) == null) {
    DDFField ddf=record.findField(tagName,fieldIndex);
    if (ddf != null) {
      fields.put(tagName,ddf);
      ddf.toString();
      return true;
    }
  }
  return false;
}

public HttpRequest(final CharSequence url,final String method) throws HttpRequestException {
  try {
    this.url=new URL(url.toString());
  }
 catch (  MalformedURLException e) {
    throw new HttpRequestException(e);
  }
  this.requestMethod=method;
}

private boolean isError(IProblem problem,Type type){
  return true;
}

private static void addProcessParameters(int AD_PInstance_ID,Map<String,Object> params,String trxName){
  final String sql="SELECT " + " " + X_AD_PInstance_Para.COLUMNNAME_ParameterName + ","+ X_AD_PInstance_Para.COLUMNNAME_P_String+ ","+ X_AD_PInstance_Para.COLUMNNAME_P_String_To+ ","+ X_AD_PInstance_Para.COLUMNNAME_P_Number+ ","+ X_AD_PInstance_Para.COLUMNNAME_P_Number_To+ ","+ X_AD_PInstance_Para.COLUMNNAME_P_Date+ ","+ X_AD_PInstance_Para.COLUMNNAME_P_Date_To+ ","+ X_AD_PInstance_Para.COLUMNNAME_Info+ ","+ X_AD_PInstance_Para.COLUMNNAME_Info_To+ " FROM "+ X_AD_PInstance_Para.Table_Name+ " WHERE "+ X_AD_PInstance_Para.COLUMNNAME_AD_PInstance_ID+ "=?";
  PreparedStatement pstmt=null;
  ResultSet rs=null;
  try {
    pstmt=DB.prepareStatement(sql,ResultSet.TYPE_FORWARD_ONLY,ResultSet.CONCUR_READ_ONLY,trxName);
    pstmt.setInt(1,AD_PInstance_ID);
    rs=pstmt.executeQuery();
    while (rs.next()) {
      String name=rs.getString(1);
      String pStr=rs.getString(2);
      String pStrTo=rs.getString(3);
      BigDecimal pNum=rs.getBigDecimal(4);
      BigDecimal pNumTo=rs.getBigDecimal(5);
      Timestamp pDate=rs.getTimestamp(6);
      Timestamp pDateTo=rs.getTimestamp(7);
      if (pStr != null) {
        if (pStrTo != null) {
          params.put(name + "1",pStr);
          params.put(name + "2",pStrTo);
        }
 else {
          params.put(name,pStr);
        }
      }
 else       if (pDate != null) {
        if (pDateTo != null) {
          params.put(name + "1",pDate);
          params.put(name + "2",pDateTo);
        }
 else {
          params.put(name,pDate);
        }
      }
 else       if (pNum != null) {
        if (pNumTo != null) {
          params.put(name + "1",pNum);
          params.put(name + "2",pNumTo);
        }
 else {
          params.put(name,pNum);
        }
      }
      String info=rs.getString(8);
      String infoTo=rs.getString(9);
      params.put(name + "_Info1",(info != null ? info : ""));
      params.put(name + "_Info2",(infoTo != null ? infoTo : ""));
    }
  }
 catch (  SQLException e) {
    throw new DBException(e,sql);
  }
 finally {
    DB.close(rs,pstmt);
    rs=null;
    pstmt=null;
  }
}

@SuppressWarnings({"unchecked","rawtypes"}) public RecordSetPage(Input input){
  Deserializer deserizalizer=new Deserializer();
  Map mapResult=deserizalizer.deserialize(input,Map.class);
  cursor=(Integer)mapResult.get("Cursor");
  data=(List<List<Object>>)mapResult.get("Page");
}

public Optional<String> endpoint(){
  return Optional.ofNullable(endpointArg);
}

public void testCollisions() throws Exception {
  Map<Integer,Set<UUID>> map=new HashMap<>();
  Collection<UUID> nodes=new LinkedHashSet<>();
  while (nodes.size() < 10) {
    UUID uuid=UUID.randomUUID();
    int hashCode=uuid.hashCode();
    Set<UUID> set=map.get(hashCode);
    if (set == null)     map.put(hashCode,set=new LinkedHashSet<>());
    set.add(uuid);
    if (set.size() > 1)     nodes.addAll(set);
  }
  map.clear();
  GridClientConsistentHash<UUID> hash=new GridClientConsistentHash<>();
  hash.addNodes(nodes,REPLICAS);
  boolean fail=false;
  for (  UUID exp : nodes) {
    UUID act=hash.node(0,Arrays.asList(exp));
    if (exp.equals(act))     info("Validation succeed [exp=" + exp + ", act="+ act+ ']');
 else {
      info("Validation failed  [exp=" + exp + ", act="+ act+ ']');
      fail=true;
    }
  }
  if (fail)   fail("Failed to resolve consistent hash node, when node's hash codes collide: " + nodes);
}

void sendMessageToHandlerWithControllerReset(List<OFMessage> messages) throws Exception {
  sendMessageToHandlerNoControllerReset(messages);
}

public boolean isRedeployMode(){
  return scenario.equals(PropertyConstants.REDEPLOY_MODE) ? true : false;
}

public static RSAPrivateKey loadFromKeyStore(URL keystoreUrl,String password) throws IOException, NoSuchAlgorithmException, CertificateException, KeyStoreException, UnrecoverableKeyException {
  logger.debug("loadFromKeyStore: keystoreUrl={}",keystoreUrl);
  URLConnection connection=keystoreUrl.openConnection();
  InputStream is=connection.getInputStream();
  try {
    if (logger.isDebugEnabled())     logger.debug("getproviders={}",Arrays.toString(Security.getProviders()));
    KeyStore keyStore;
    try {
      try {
        keyStore=KeyStore.getInstance("PKCS12","SunJSSE");
      }
 catch (      NoSuchProviderException e) {
        keyStore=KeyStore.getInstance("PKCS12",CryptoUtil.getSecurityProviderName(KeyStore.class));
      }
    }
 catch (    NoSuchProviderException e) {
      keyStore=KeyStore.getInstance("PKCS12");
    }
    logger.debug("loadFromKeyStore: keyStore Provider={}",keyStore.getProvider());
    keyStore.load(is,password == null ? null : password.toCharArray());
    Enumeration<String> aliases=keyStore.aliases();
    Key key=null;
    while (aliases.hasMoreElements()) {
      String a=(String)aliases.nextElement();
      key=keyStore.getKey(a,password == null ? null : password.toCharArray());
    }
    return (RSAPrivateKey)key;
  }
  finally {
    is.close();
  }
}

@Override public double confSmallM(double totalExampleWeight,double delta){
  double term=Math.log(4 / delta) / (2 * totalExampleWeight);
  return Math.sqrt(term) + Math.pow(term,0.25) + Math.pow(term,0.75);
}

public static <T>boolean contains(Iterator<T> iterator,T element){
  if (iterator != null) {
    while (iterator.hasNext()) {
      T candidate=iterator.next();
      if (ObjectUtils.nullSafeEquals(candidate,element))       return true;
    }
  }
  return false;
}

public void testConstructor6(){
  Integer[] ints=new Integer[SIZE];
  for (int i=0; i < SIZE; ++i)   ints[i]=new Integer(i);
  LinkedBlockingQueue q=new LinkedBlockingQueue(Arrays.asList(ints));
  for (int i=0; i < SIZE; ++i)   assertEquals(ints[i],q.poll());
}

@Override public void drawDomainGridline(Graphics2D g2,CategoryPlot plot,Rectangle2D dataArea,double value){
  Line2D line=null;
  PlotOrientation orientation=plot.getOrientation();
  if (orientation == PlotOrientation.HORIZONTAL) {
    line=new Line2D.Double(dataArea.getMinX(),value,dataArea.getMaxX(),value);
  }
 else   if (orientation == PlotOrientation.VERTICAL) {
    line=new Line2D.Double(value,dataArea.getMinY(),value,dataArea.getMaxY());
  }
  Paint paint=plot.getDomainGridlinePaint();
  if (paint == null) {
    paint=CategoryPlot.DEFAULT_GRIDLINE_PAINT;
  }
  g2.setPaint(paint);
  Stroke stroke=plot.getDomainGridlineStroke();
  if (stroke == null) {
    stroke=CategoryPlot.DEFAULT_GRIDLINE_STROKE;
  }
  g2.setStroke(stroke);
  g2.draw(line);
}

public void addPreBuiltClassifier(Classifier c){
  m_preBuiltClassifiers.add(c);
}

@Override public InsnList generate(){
  return merge(generatedInstructions.toArray());
}

public static void putJavaVariablesIntoEngine(final ScriptEngine engine,final Map<String,Object> variables){
  final Bindings bindings=new SimpleBindings();
  for (  String key : variables.keySet()) {
    bindings.put(key,variables.get(key));
  }
  engine.setBindings(bindings,ScriptContext.ENGINE_SCOPE);
}

private Point2D calculateLabelPoint(Line2D line,RectangleAnchor anchor,double deltaX,double deltaY){
  double x, y;
  boolean left=(anchor == RectangleAnchor.BOTTOM_LEFT || anchor == RectangleAnchor.LEFT || anchor == RectangleAnchor.TOP_LEFT);
  boolean right=(anchor == RectangleAnchor.BOTTOM_RIGHT || anchor == RectangleAnchor.RIGHT || anchor == RectangleAnchor.TOP_RIGHT);
  boolean top=(anchor == RectangleAnchor.TOP_LEFT || anchor == RectangleAnchor.TOP || anchor == RectangleAnchor.TOP_RIGHT);
  boolean bottom=(anchor == RectangleAnchor.BOTTOM_LEFT || anchor == RectangleAnchor.BOTTOM || anchor == RectangleAnchor.BOTTOM_RIGHT);
  Rectangle rect=line.getBounds();
  if (line.getX1() == line.getX2()) {
    x=line.getX1();
    y=(line.getY1() + line.getY2()) / 2.0;
    if (left) {
      x=x - deltaX;
    }
    if (right) {
      x=x + deltaX;
    }
    if (top) {
      y=Math.min(line.getY1(),line.getY2()) + deltaY;
    }
    if (bottom) {
      y=Math.max(line.getY1(),line.getY2()) - deltaY;
    }
  }
 else {
    x=(line.getX1() + line.getX2()) / 2.0;
    y=line.getY1();
    if (left) {
      x=Math.min(line.getX1(),line.getX2()) + deltaX;
    }
    if (right) {
      x=Math.max(line.getX1(),line.getX2()) - deltaX;
    }
    if (top) {
      y=y - deltaY;
    }
    if (bottom) {
      y=y + deltaY;
    }
  }
  return new Point2D.Double(x,y);
}

public void fling(int startX,int startY,int velocityX,int velocityY,int minX,int maxX,int minY,int maxY){
  if (mFlywheel && !mFinished) {
    float oldVel=getCurrVelocity();
    float dx=(float)(mFinalX - mStartX);
    float dy=(float)(mFinalY - mStartY);
    float hyp=(float)Math.hypot(dx,dy);
    float ndx=dx / hyp;
    float ndy=dy / hyp;
    float oldVelocityX=ndx * oldVel;
    float oldVelocityY=ndy * oldVel;
    if (Math.signum(velocityX) == Math.signum(oldVelocityX) && Math.signum(velocityY) == Math.signum(oldVelocityY)) {
      velocityX+=oldVelocityX;
      velocityY+=oldVelocityY;
    }
  }
  mMode=FLING_MODE;
  mFinished=false;
  float velocity=(float)Math.hypot(velocityX,velocityY);
  mVelocity=velocity;
  mDuration=getSplineFlingDuration(velocity);
  mStartTime=AnimationUtils.currentAnimationTimeMillis();
  mStartX=startX;
  mStartY=startY;
  float coeffX=velocity == 0 ? 1.0f : velocityX / velocity;
  float coeffY=velocity == 0 ? 1.0f : velocityY / velocity;
  double totalDistance=getSplineFlingDistance(velocity);
  mDistance=(int)(totalDistance * Math.signum(velocity));
  mMinX=minX;
  mMaxX=maxX;
  mMinY=minY;
  mMaxY=maxY;
  mFinalX=startX + (int)Math.round(totalDistance * coeffX);
  mFinalX=Math.min(mFinalX,mMaxX);
  mFinalX=Math.max(mFinalX,mMinX);
  mFinalY=startY + (int)Math.round(totalDistance * coeffY);
  mFinalY=Math.min(mFinalY,mMaxY);
  mFinalY=Math.max(mFinalY,mMinY);
}

public void deleteWithMissing(Attribute att){
  deleteWithMissing(att.index());
}

protected void sprint(String a){
  if (a == null) {
    stringRepresentation+=getIndentation();
    stringRepresentation+="<null>\n";
    return;
  }
  if (a.compareTo("}") == 0 || a.compareTo("]") == 0) {
    indentation--;
  }
  stringRepresentation+=getIndentation();
  stringRepresentation+=a;
  stringRepresentation+="\n";
  if (a.compareTo("{") == 0 || a.compareTo("[") == 0) {
    indentation++;
  }
}

private void readObject(ObjectInputStream s) throws IOException, ClassNotFoundException {
  s.defaultReadObject();
  if (semIms == null) {
    throw new NullPointerException();
  }
}

private static Pair<Long,Long> load(ByteArray a,InputStream stream,long memoryOffset,long count,CommonIndex positions,CRC32 checksum,ByteArray checksums,PrereadHashFunction hf,boolean checksumsLoaded,long currentSeq) throws IOException {
  long tmpCurrentSeq=currentSeq;
  final byte[] buffer=new byte[1024 * 1024];
  long totalRead=0;
  int bytesRead;
  long pos=memoryOffset;
  while (totalRead < count && (bytesRead=stream.read(buffer,0,(int)Math.min(count - totalRead,buffer.length))) != -1) {
    a.set(pos,buffer,bytesRead);
    pos+=bytesRead;
    int j=0;
    while (j < bytesRead) {
      if (positions.get(tmpCurrentSeq + 1) == positions.get(tmpCurrentSeq)) {
        hf.irvineHash(0L);
        tmpCurrentSeq++;
        continue;
      }
      final int len=(int)(positions.get(tmpCurrentSeq + 1) - (memoryOffset + totalRead + j));
      if (j + len <= bytesRead) {
        checksum.update(buffer,j,len);
        hf.irvineHash(buffer,j,len);
        hf.irvineHash(positions.get(tmpCurrentSeq + 1) - positions.get(tmpCurrentSeq));
        if (checksumsLoaded) {
          if ((byte)checksum.getValue() != checksums.get(tmpCurrentSeq)) {
            throw new CorruptSdfException("Sequence: " + tmpCurrentSeq + " failed checksum");
          }
        }
 else {
          checksums.set(tmpCurrentSeq,(byte)checksum.getValue());
        }
        tmpCurrentSeq++;
        checksum.reset();
      }
 else {
        hf.irvineHash(buffer,j,bytesRead - j);
        checksum.update(buffer,j,bytesRead - j);
      }
      j+=len;
    }
    totalRead+=bytesRead;
  }
  return new Pair<>(totalRead,tmpCurrentSeq);
}

public static java.sql.Date toSqlDate(String monthStr,String dayStr,String yearStr){
  java.util.Date newDate=toDate(monthStr,dayStr,yearStr,"0","0","0");
  if (newDate != null) {
    return new java.sql.Date(newDate.getTime());
  }
 else {
    return null;
  }
}

public void removeSwipeListener(SwipeListener listener){
  if (mListeners == null) {
    return;
  }
  mListeners.remove(listener);
}

protected void savePNGImage(String filename,BufferedImage image) throws IOException {
  File file=new File(filename);
  ImageIO.write(image,"png",file);
}

public void unsetPermission(String name){
  permissions.remove(name.toLowerCase(java.util.Locale.ENGLISH));
  permissible.recalculatePermissions();
}

public void beforeInsert(int index,byte element){
  if (index > size || index < 0)   throw new IndexOutOfBoundsException("Index: " + index + ", Size: "+ size);
  ensureCapacity(size + 1);
  System.arraycopy(elements,index,elements,index + 1,size - index);
  elements[index]=element;
  size++;
}

public OMGraphicList readCachedGraphics(URL url) throws java.io.IOException {
  if (Debug.debugging("areas")) {
    Debug.output("Reading cached graphics");
  }
  OMGraphicList omgraphics=new OMGraphicList();
  if (url != null) {
    omgraphics.readGraphics(url);
  }
  return omgraphics;
}

int size(){
  return noxItems.size();
}

public <V>Future<V> invoke(String method,String path,Map<String,?> arguments,ResultHandler<V> resultHandler){
  if (method == null) {
    throw new IllegalArgumentException();
  }
  if (path == null) {
    throw new IllegalArgumentException();
  }
  if (arguments == null) {
    throw new IllegalArgumentException();
  }
  return executorService.submit(new InvocationCallback<>(method,path,arguments,resultHandler));
}

@Override public String replacePath(String inputURI){
  if (inputURI.contains(TemporaryDirectoryManager.DIRECTORY_TEMPLATE)) {
    return inputURI.replace(TemporaryDirectoryManager.DIRECTORY_TEMPLATE,TEMPLATE_DIRECTORY_NAME);
  }
  return inputURI;
}

@Override public void create(){
  assertWritable();
  final String name=getNamespace() + "." + NAME_SEARCH;
  final IIndexManager indexManager=getIndexManager();
  final Properties p=getProperties();
  final IndexMetadata indexMetadata=new IndexMetadata(indexManager,p,name,UUID.randomUUID(),IndexTypeEnum.BTree);
  final IKeyBuilderFactory keyBuilderFactory;
{
    final Properties tmp=new Properties(p);
    tmp.setProperty(KeyBuilder.Options.STRENGTH,p.getProperty(Options.INDEXER_COLLATOR_STRENGTH,Options.DEFAULT_INDEXER_COLLATOR_STRENGTH));
    keyBuilderFactory=new DefaultKeyBuilderFactory(tmp);
  }
  final boolean fieldsEnabled=Boolean.parseBoolean(p.getProperty(Options.FIELDS_ENABLED,Options.DEFAULT_FIELDS_ENABLED));
  if (log.isInfoEnabled())   log.info(Options.FIELDS_ENABLED + "=" + fieldsEnabled);
  indexMetadata.setTupleSerializer(new FullTextIndexTupleSerializer<V>(keyBuilderFactory,DefaultTupleSerializer.getDefaultLeafKeysCoder(),EmptyRabaValueCoder.INSTANCE,fieldsEnabled));
  indexManager.registerIndex(indexMetadata);
  if (log.isInfoEnabled())   log.info("Registered new text index: name=" + name);
}

public static PGPPublicKey mergeSignatures(PGPPublicKey targetKey,PGPPublicKey sourceKey) throws PGPException {
  if (!Objects.deepEquals(targetKey.getFingerprint(),sourceKey.getFingerprint())) {
    throw new IllegalArgumentException("Signature merge can be done for different instances of the same public key only");
  }
  return copySignatures(targetKey,sourceKey);
}

private static boolean hasSpecializedHandlerIntents(Context context,Intent intent){
  try {
    PackageManager pm=context.getPackageManager();
    List<ResolveInfo> handlers=pm.queryIntentActivities(intent,PackageManager.GET_RESOLVED_FILTER);
    if (handlers == null || handlers.size() == 0) {
      return false;
    }
    for (    ResolveInfo resolveInfo : handlers) {
      IntentFilter filter=resolveInfo.filter;
      if (filter == null)       continue;
      if (filter.countDataAuthorities() == 0 || filter.countDataPaths() == 0)       continue;
      if (resolveInfo.activityInfo == null)       continue;
      return true;
    }
  }
 catch (  RuntimeException e) {
    Log.e(TAG,"Runtime exception while getting specialized handlers");
  }
  return false;
}

public void drawBackground(Graphics g){
  g.fillRect(0,0,getWidth(),getHeight());
}

public static double info(int counts[]){
  int total=0;
  double x=0;
  for (int j=0; j < counts.length; j++) {
    x-=xlogx(counts[j]);
    total+=counts[j];
  }
  return x + xlogx(total);
}

public ComputeJobFailoverException(Throwable cause){
  this(cause.getMessage(),cause);
}

public boolean hasNewerVersion(){
  return latestStable.compareTo(currentVersion) > 0;
}

@Override public String format(DateTimeFormatter formatter){
  Objects.requireNonNull(formatter,"formatter");
  return formatter.format(this);
}

@Override public void readNBT(NBTTagCompound compound){
  super.readNBT(compound);
  if (compound.hasKey("foodExhaustionTimer")) {
    this.exhaustionTimer=compound.getInteger("foodExhaustionTimer");
  }
  if (!compound.hasKey("bwmAdjustedFoodStats")) {
    setFoodLevel(getFoodLevel() * 3);
    setSaturation(0);
  }
  if (getFoodLevel() > 60)   setFoodLevel(60);
  if (getSaturationLevel() > 20)   setSaturation(20);
}

private static boolean verifyXML(String fileName){
  SchemaFactory sf=SchemaFactory.newInstance(W3C_XML_SCHEMA);
  Source xsdFile=new StreamSource(new File(XSD_FILE_PATH));
  Source xmlFile=new StreamSource(new File(fileName));
  boolean validXML=false;
  try {
    Schema schema=sf.newSchema(xsdFile);
    Validator validator=schema.newValidator();
    try {
      validator.validate(xmlFile);
      validXML=true;
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
    if (!validXML) {
      new IOException("File isn't  valid against the xsd");
    }
  }
 catch (  SAXException e) {
    e.printStackTrace();
  }
  return validXML;
}

private void needNewBuffer(int newcount){
  if (currentBufferIndex < buffers.size() - 1) {
    filledBufferSum+=currentBuffer.length;
    currentBufferIndex++;
    currentBuffer=buffers.get(currentBufferIndex);
  }
 else {
    int newBufferSize;
    if (currentBuffer == null) {
      newBufferSize=newcount;
      filledBufferSum=0;
    }
 else {
      newBufferSize=Math.max(currentBuffer.length << 1,newcount - filledBufferSum);
      filledBufferSum+=currentBuffer.length;
    }
    currentBufferIndex++;
    currentBuffer=new byte[newBufferSize];
    buffers.add(currentBuffer);
  }
}

private static void dualPivotQuicksort(byte[] a,int left,int right){
  int sixth=(right - left + 1) / 6;
  int e1=left + sixth;
  int e5=right - sixth;
  int e3=(left + right) >>> 1;
  int e4=e3 + sixth;
  int e2=e3 - sixth;
  byte ae1=a[e1], ae2=a[e2], ae3=a[e3], ae4=a[e4], ae5=a[e5];
  if (ae1 > ae2) {
    byte t=ae1;
    ae1=ae2;
    ae2=t;
  }
  if (ae4 > ae5) {
    byte t=ae4;
    ae4=ae5;
    ae5=t;
  }
  if (ae1 > ae3) {
    byte t=ae1;
    ae1=ae3;
    ae3=t;
  }
  if (ae2 > ae3) {
    byte t=ae2;
    ae2=ae3;
    ae3=t;
  }
  if (ae1 > ae4) {
    byte t=ae1;
    ae1=ae4;
    ae4=t;
  }
  if (ae3 > ae4) {
    byte t=ae3;
    ae3=ae4;
    ae4=t;
  }
  if (ae2 > ae5) {
    byte t=ae2;
    ae2=ae5;
    ae5=t;
  }
  if (ae2 > ae3) {
    byte t=ae2;
    ae2=ae3;
    ae3=t;
  }
  if (ae4 > ae5) {
    byte t=ae4;
    ae4=ae5;
    ae5=t;
  }
  a[e1]=ae1;
  a[e3]=ae3;
  a[e5]=ae5;
  byte pivot1=ae2;
  a[e2]=a[left];
  byte pivot2=ae4;
  a[e4]=a[right];
  int less=left + 1;
  int great=right - 1;
  boolean pivotsDiffer=(pivot1 != pivot2);
  if (pivotsDiffer) {
    outer:     for (int k=less; k <= great; k++) {
      byte ak=a[k];
      if (ak < pivot1) {
        if (k != less) {
          a[k]=a[less];
          a[less]=ak;
        }
        less++;
      }
 else       if (ak > pivot2) {
        while (a[great] > pivot2) {
          if (great-- == k) {
            break outer;
          }
        }
        if (a[great] < pivot1) {
          a[k]=a[less];
          a[less++]=a[great];
          a[great--]=ak;
        }
 else {
          a[k]=a[great];
          a[great--]=ak;
        }
      }
    }
  }
 else {
    for (int k=less; k <= great; k++) {
      byte ak=a[k];
      if (ak == pivot1) {
        continue;
      }
      if (ak < pivot1) {
        if (k != less) {
          a[k]=a[less];
          a[less]=ak;
        }
        less++;
      }
 else {
        while (a[great] > pivot1) {
          great--;
        }
        if (a[great] < pivot1) {
          a[k]=a[less];
          a[less++]=a[great];
          a[great--]=ak;
        }
 else {
          a[k]=pivot1;
          a[great--]=ak;
        }
      }
    }
  }
  a[left]=a[less - 1];
  a[less - 1]=pivot1;
  a[right]=a[great + 1];
  a[great + 1]=pivot2;
  doSort(a,left,less - 2);
  doSort(a,great + 2,right);
  if (!pivotsDiffer) {
    return;
  }
  if (less < e1 && great > e5) {
    while (a[less] == pivot1) {
      less++;
    }
    while (a[great] == pivot2) {
      great--;
    }
    outer:     for (int k=less; k <= great; k++) {
      byte ak=a[k];
      if (ak == pivot2) {
        while (a[great] == pivot2) {
          if (great-- == k) {
            break outer;
          }
        }
        if (a[great] == pivot1) {
          a[k]=a[less];
          a[less++]=pivot1;
        }
 else {
          a[k]=a[great];
        }
        a[great--]=pivot2;
      }
 else       if (ak == pivot1) {
        a[k]=a[less];
        a[less++]=pivot1;
      }
    }
  }
  doSort(a,less,great);
}

@Nullable public N node(@Nullable Object key,@Nullable Collection<N> inc){
  return node(key,inc,null);
}

public void increment(){
  counter.getAndIncrement();
}

public DefaultDeploymentCache(){
  this.cache=Collections.synchronizedMap(new HashMap<String,T>());
}

private int findInsertionPoint(SortedListEntry entry){
  int insertionPoint=sortedModel.size();
  if (sortOrder != SortOrder.UNORDERED) {
    insertionPoint=Collections.binarySearch((List)sortedModel,entry);
    if (insertionPoint < 0) {
      insertionPoint=-(insertionPoint + 1);
    }
  }
  return insertionPoint;
}

private boolean haveShownMessageBefore(UpdateMessage msg){
  if (!msg.isShownOnce())   return false;
  loadSeenMessages();
  if (_seenMessages == null || _seenMessages.size() == 0 || !_seenMessages.contains(msg)) {
    if (_seenMessages == null)     _seenMessages=new HashSet<>();
    _seenMessages.add(msg);
    saveSeenMessages();
    return false;
  }
  return true;
}

public void dataSourceAdded(int index){
  update();
  updateCoordinateProjectionComboBoxes();
}

public boolean fieldIsStatic(){
  return Modifier.isStatic(field.getModifiers());
}

void newEquation(DF_LatticeCell lhs,DF_Operator operator,DF_LatticeCell op1,DF_LatticeCell op2,DF_LatticeCell op3){
  DF_Equation eq=new DF_Equation(lhs,operator,op1,op2,op3);
  equations.addGraphNode(eq);
  equations.addGraphNode(lhs);
  equations.addGraphNode(op1);
  equations.addGraphNode(op2);
  equations.addGraphNode(op3);
  newEquations.add(eq);
  op1.addUse(eq);
  op2.addUse(eq);
  op3.addUse(eq);
  lhs.addDef(eq);
  if (EAGER && eq.evaluate())   changedCell(lhs);
}

@Override public void stop(){
  if (stopping.compareAndSet(false,true)) {
    if (log.isDebugEnabled())     log.debug("Stopping write-behind store for cache '" + cacheName + '\'');
    wakeUp();
    boolean graceful=true;
    for (    GridWorker worker : flushThreads)     graceful&=U.join(worker,log);
    if (!graceful)     log.warning("Shutdown was aborted");
  }
}

private Set<StoragePort> andStoragePortSets(Set<StoragePort> a,Set<StoragePort> b){
  Set<StoragePort> result=new HashSet<StoragePort>();
  for (  StoragePort port : a) {
    if (b.contains(port)) {
      result.add(port);
    }
  }
  return result;
}

public static void addAttributeToSchema(String serviceName,String subSchemaName,String schemaType,Node attributeSchemaNode,SSOToken adminToken) throws UpgradeException {
  ServiceSchema ss=getServiceSchema(serviceName,subSchemaName,schemaType,adminToken);
  addAttributeToSchema(ss,attributeSchemaNode);
}

public int next(int current){
  for (int i=current + 1; i < (arguments != null ? arguments.size() : 0); i++) {
    if (getArgument(i) instanceof MathContainer) {
      return i;
    }
  }
  throw new ArrayIndexOutOfBoundsException("Index out of array bounds.");
}

@Override public boolean supportsAuthentication(){
  if (DEBUG.messageEnabled()) {
    DEBUG.message("supportsAuthentication invoked");
  }
  return true;
}

protected void reorderAppDeploymentsAfterConfigurationVersion(Element domain){
  List<Element> appDeployments=xmlTool.selectElementsMatchingXPath("weblogic:app-deployment",domain);
  for (  Element appDeployment : appDeployments) {
    domain.removeChild(appDeployment);
  }
  Element configurationVersion=xmlTool.selectElementMatchingXPath("weblogic:configuration-version",domain);
  Node before=null;
  NodeList children=domain.getChildNodes();
  for (int i=0; i < children.getLength(); i++) {
    if (configurationVersion.equals(children.item(i)) && i < children.getLength() - 1) {
      before=children.item(i + 1);
    }
  }
  if (before != null) {
    for (    Element appDeployment : appDeployments) {
      domain.insertBefore(appDeployment,before);
    }
  }
 else {
    for (    Element appDeployment : appDeployments) {
      domain.appendChild(appDeployment);
    }
  }
}

public URI(String scheme,String schemeSpecificPart,String fragment) throws URISyntaxException {
  StringBuilder uri=new StringBuilder();
  if (scheme != null) {
    uri.append(scheme);
    uri.append(':');
  }
  if (schemeSpecificPart != null) {
    ALL_LEGAL_ENCODER.appendEncoded(uri,schemeSpecificPart);
  }
  if (fragment != null) {
    uri.append('#');
    ALL_LEGAL_ENCODER.appendEncoded(uri,fragment);
  }
  parseURI(uri.toString(),false);
}

static FacetMethod selectFacetMethod(SchemaField field,FacetMethod method,Integer mincount){
  FieldType type=field.getType();
  if (method == null) {
    if (type instanceof BoolField && (field.indexed() == true || field.hasDocValues() == false)) {
      method=FacetMethod.ENUM;
    }
 else     if (type.getNumericType() != null && !field.multiValued()) {
      method=FacetMethod.FCS;
    }
 else {
      method=FacetMethod.FC;
    }
  }
  if (method == FacetMethod.FC && type.getNumericType() != null && !field.multiValued()) {
    method=FacetMethod.FCS;
  }
  if (method == FacetMethod.UIF && !field.hasDocValues() && mincount == 0) {
    method=field.multiValued() ? FacetMethod.FC : FacetMethod.FCS;
  }
  if (method == FacetMethod.ENUM && TrieField.getMainValuePrefix(type) != null) {
    method=field.multiValued() ? FacetMethod.FC : FacetMethod.FCS;
  }
  final boolean multiToken=field.multiValued() || type.multiValuedFieldCache();
  if (method == FacetMethod.FCS && multiToken) {
    method=FacetMethod.FC;
  }
  return method;
}

public void onTabsAllClosing(long time,boolean incognito){
}

public List<HashMap<String,Object>> clearOverallChat(){
  try {
    List<HashMap<String,Object>> myChatList=myChats.get(overallChatRoomName);
    myChatList=new LinkedList<HashMap<String,Object>>();
    myChats.put(overallChatRoomName,myChatList);
    Map<Integer,String> newMessage=new HashMap<Integer,String>();
    newMessage.put(0,"clearOverallChatHistory");
    scopeApplicationAdapter.sendMessageToMembers(newMessage);
    return myChatList;
  }
 catch (  Exception err) {
    log.error("[clearChat] ",err);
    return null;
  }
}

public DbSchemaChanger beginChange() throws Exception {
  backupFile=File.createTempFile("dataobj",".class");
  log.info("copy from {} to {}",classFile.getAbsolutePath(),backupFile.getAbsolutePath());
  copyFile(classFile,backupFile);
  cc.defrost();
  return this;
}

void animateChallengeTo(int y,int velocity){
  if (mChallengeView == null) {
    return;
  }
  cancelTransitionsInProgress();
  mChallengeInteractiveInternal=false;
  mChallengeView.setLayerType(LAYER_TYPE_HARDWARE,null);
  final int sy=mChallengeView.getBottom();
  final int dy=y - sy;
  if (dy == 0) {
    completeChallengeScroll();
    return;
  }
  setScrollState(SCROLL_STATE_SETTLING);
  final int childHeight=mChallengeView.getHeight();
  final int halfHeight=childHeight / 2;
  final float distanceRatio=Math.min(1f,1.0f * Math.abs(dy) / childHeight);
  final float distance=halfHeight + halfHeight * distanceInfluenceForSnapDuration(distanceRatio);
  int duration=0;
  velocity=Math.abs(velocity);
  if (velocity > 0) {
    duration=4 * Math.round(1000 * Math.abs(distance / velocity));
  }
 else {
    final float childDelta=(float)Math.abs(dy) / childHeight;
    duration=(int)((childDelta + 1) * 100);
  }
  duration=Math.min(duration,MAX_SETTLE_DURATION);
  mScroller.startScroll(0,sy,0,dy,duration);
  postInvalidateOnAnimation();
}

public JcaX509v3CertificateBuilder(X500Principal issuer,BigInteger serial,Date notBefore,Date notAfter,X500Principal subject,PublicKey publicKey){
  super(X500Name.getInstance(issuer.getEncoded()),serial,notBefore,notAfter,X500Name.getInstance(subject.getEncoded()),SubjectPublicKeyInfo.getInstance(publicKey.getEncoded()));
}

private void writeGUIDValue(ByteBuffer buffer,Object value) throws IOException {
  Matcher m=GUID_PATTERN.matcher(toCharSequence(value));
  if (!m.matches()) {
    throw new IOException(withErrorContext("Invalid GUID: " + value));
  }
  ByteBuffer origBuffer=null;
  byte[] tmpBuf=null;
  if (buffer.order() != ByteOrder.BIG_ENDIAN) {
    origBuffer=buffer;
    tmpBuf=new byte[16];
    buffer=ByteBuffer.wrap(tmpBuf);
  }
  ByteUtil.writeHexString(buffer,m.group(1));
  ByteUtil.writeHexString(buffer,m.group(2));
  ByteUtil.writeHexString(buffer,m.group(3));
  ByteUtil.writeHexString(buffer,m.group(4));
  ByteUtil.writeHexString(buffer,m.group(5));
  if (tmpBuf != null) {
    ByteUtil.swap4Bytes(tmpBuf,0);
    ByteUtil.swap2Bytes(tmpBuf,4);
    ByteUtil.swap2Bytes(tmpBuf,6);
    origBuffer.put(tmpBuf);
  }
}

public NeuronGroup(final Network net,final List<Neuron> neurons){
  super(net);
  neuronList=new ArrayList<Neuron>(neurons.size());
  for (  Neuron neuron : neurons) {
    addNeuron(neuron);
  }
  neuronList=new CopyOnWriteArrayList<Neuron>(neuronList);
  updateRule=getNeuronType();
  resetSubsamplingIndices();
}

@LogMessageDoc(level="ERROR",message="Error reading link discovery update.",explanation="Unable to process link discovery update",recommendation=LogMessageDoc.REPORT_CONTROLLER_BUG) public List<LDUpdate> applyUpdates(){
  List<LDUpdate> appliedUpdates=new ArrayList<LDUpdate>();
  LDUpdate update=null;
  while (ldUpdates.peek() != null) {
    try {
      update=ldUpdates.take();
    }
 catch (    Exception e) {
      log.error("Error reading link discovery update.",e);
    }
    if (log.isTraceEnabled()) {
      log.trace("Applying update: {}",update);
    }
switch (update.getOperation()) {
case LINK_UPDATED:
      addOrUpdateLink(update.getSrc(),update.getSrcPort(),update.getDst(),update.getDstPort(),update.getType());
    break;
case LINK_REMOVED:
  removeLink(update.getSrc(),update.getSrcPort(),update.getDst(),update.getDstPort());
break;
case SWITCH_UPDATED:
addOrUpdateSwitch(update.getSrc());
break;
case SWITCH_REMOVED:
removeSwitch(update.getSrc());
break;
case TUNNEL_PORT_ADDED:
addTunnelPort(update.getSrc(),update.getSrcPort());
break;
case TUNNEL_PORT_REMOVED:
removeTunnelPort(update.getSrc(),update.getSrcPort());
break;
case PORT_UP:
case PORT_DOWN:
break;
}
appliedUpdates.add(update);
}
return (Collections.unmodifiableList(appliedUpdates));
}

boolean isEmpty(){
  return mDescription.isEmpty() && mTypes.isEmpty();
}

public Star(int points,float rotation,float insideness){
  float x=0;
  float y=0;
  float radius=0.5f;
  points=points < 3 ? 3 : points;
  rotation=rotation + (float)(Math.PI / 2.0);
  boolean flat=insideness >= 1.0f;
  setControlPointSize(flat ? points : 2 * points);
  final float pi2=2 * (float)Math.PI;
  float insideRadius=radius * insideness;
  Point2D.Float pt;
  for (int p=0; p < points; ++p) {
    double vertex=p;
    double angle=vertex * pi2 / points + rotation;
    pt=new Point2D.Float((float)(x + Math.cos(angle) * radius),(float)(y + Math.sin(angle) * radius));
    pushPoint(pt);
    if (!flat) {
      double angle2=(vertex + 0.5) * pi2 / points + rotation;
      pt=new Point2D.Float((float)(x + Math.cos(angle2) * insideRadius),(float)(y + Math.sin(angle2) * insideRadius));
      pushPoint(pt);
    }
  }
}

private static boolean isStatic(Method m){
  int mods=m.getModifiers();
  return (mods & Modifier.STATIC) != 0;
}

public synchronized boolean tryLock(){
  try {
    lock=file.tryLock();
    return lock != null;
  }
 catch (  Exception e) {
    return false;
  }
}

@Override public void nodeDown(Topology topology,long eventUID,String nodeID){
  if (targetServerID.equals(nodeID)) {
    decideOnAction(topology);
  }
}

public boolean isValid(){
  return true;
}

private void rolloverLogTask(){
  try {
    if (_isInit) {
      flush();
    }
  }
 catch (  Exception e) {
    log.log(Level.WARNING,e.toString(),e);
  }
  _isRollingOver=true;
  try {
    if (!_isInit)     return;
    Path savedPath=null;
    long now=CurrentTime.currentTime();
    long lastPeriodEnd=_nextPeriodEnd;
    _nextPeriodEnd=nextRolloverTime(now);
    Path path=getPath();
synchronized (_logLock) {
      flushTempStream();
      long length=Files.size(path);
      if (lastPeriodEnd <= now && lastPeriodEnd > 0) {
        closeLogStream();
        savedPath=getSavedPath(lastPeriodEnd - 1);
      }
 else       if (path != null && getRolloverSize() <= length) {
        closeLogStream();
        savedPath=getSavedPath(now);
      }
    }
    if (savedPath != null) {
      movePathToArchive(savedPath);
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
synchronized (_logLock) {
      _isRollingOver=false;
      flushTempStream();
    }
    _rolloverListener.requeue(_rolloverAlarm);
  }
}

@Override public void onUpdateScrollbar(int dy){
  List<AlphabeticalAppsList.AdapterItem> items=mApps.getAdapterItems();
  if (items.isEmpty() || mNumAppsPerRow == 0) {
    mScrollbar.setThumbOffset(-1,-1);
    return;
  }
  int rowCount=mApps.getNumAppRows();
  getCurScrollState(mScrollPosState,-1);
  if (mScrollPosState.rowIndex < 0) {
    mScrollbar.setThumbOffset(-1,-1);
    return;
  }
  int availableScrollBarHeight=getAvailableScrollBarHeight();
  int availableScrollHeight=getAvailableScrollHeight(mApps.getNumAppRows());
  if (availableScrollHeight <= 0) {
    mScrollbar.setThumbOffset(-1,-1);
    return;
  }
  int scrollY=getScrollTop(mScrollPosState);
  int scrollBarY=mBackgroundPadding.top + (int)(((float)scrollY / availableScrollHeight) * availableScrollBarHeight);
  if (mScrollbar.isThumbDetached()) {
    int scrollBarX;
    if (Utilities.isRtl(getResources())) {
      scrollBarX=mBackgroundPadding.left;
    }
 else {
      scrollBarX=getWidth() - mBackgroundPadding.right - mScrollbar.getThumbWidth();
    }
    if (mScrollbar.isDraggingThumb()) {
      mScrollbar.setThumbOffset(scrollBarX,(int)mScrollbar.getLastTouchY());
    }
 else {
      int thumbScrollY=mScrollbar.getThumbOffset().y;
      int diffScrollY=scrollBarY - thumbScrollY;
      if (diffScrollY * dy > 0f) {
        if (dy < 0) {
          int offset=(int)((dy * thumbScrollY) / (float)scrollBarY);
          thumbScrollY+=Math.max(offset,diffScrollY);
        }
 else {
          int offset=(int)((dy * (availableScrollBarHeight - thumbScrollY)) / (float)(availableScrollBarHeight - scrollBarY));
          thumbScrollY+=Math.min(offset,diffScrollY);
        }
        thumbScrollY=Math.max(0,Math.min(availableScrollBarHeight,thumbScrollY));
        mScrollbar.setThumbOffset(scrollBarX,thumbScrollY);
        if (scrollBarY == thumbScrollY) {
          mScrollbar.reattachThumbToScroll();
        }
      }
 else {
        mScrollbar.setThumbOffset(scrollBarX,thumbScrollY);
      }
    }
  }
 else {
    synchronizeScrollBarThumbOffsetToViewScroll(mScrollPosState,rowCount);
  }
}

private void emitListAdd(Method method,String fieldName,StringBuilder builder){
  builder.append("    public void ");
  builder.append(getListAdderName(fieldName));
  builder.append("(");
  builder.append(getTypeArgumentImplName((ParameterizedType)method.getGenericReturnType(),0));
  builder.append(" v) {\n      ");
  builder.append(getEnsureName(fieldName));
  builder.append("();\n      ");
  builder.append(fieldName);
  builder.append(".add(v);\n");
  builder.append("    }\n\n");
}

public boolean onScrollChanged(int scrollY){
  boolean isPullingDownNow=scrollY < lastScrollY;
  latestPullingDown.offer(isPullingDownNow);
  if (latestPullingDown.size() > PULLING_DOWN_TIME_MAX) {
    latestPullingDown.poll();
  }
  lastScrollY=scrollY;
  return getPullingDownTime() >= PULLING_DOWN_TIME_THRESHOLD;
}

@ExceptionHandler(ConstraintViolationException.class) @ResponseStatus(value=HttpStatus.BAD_REQUEST) public Map<String,Object> handleConstraintViolationException(ConstraintViolationException ex){
  Collection<FieldError> errors=FieldError.getErrors(ex.getConstraintViolations());
  log.warn("ConstraintViolationException: " + errors.toString());
  return LemonUtil.mapOf("exception","ConstraintViolationException","errors",errors);
}

@Override public void readExternal(ObjectInput in) throws IOException {
  b=new double[in.readInt()];
  for (int p=0; p < b.length; p++) {
    b[p]=in.readDouble();
  }
}

private synchronized void addTracker(String path,Object marker,FileDeleteStrategy deleteStrategy){
  if (exitWhenFinished) {
    throw new IllegalStateException("No new trackers can be added once exitWhenFinished() is called");
  }
  if (reaper == null) {
    reaper=new Reaper();
    reaper.start();
  }
  trackers.add(new Tracker(path,deleteStrategy,marker,q));
}

List<Issue> errors(){
  return errors;
}

public AudioWife addOnCompletionListener(OnCompletionListener listener){
  mCompletionListeners.add(0,listener);
  return this;
}

public void addVolumeToConsistencyGroup(String instanceId,String cgID) throws StorageCenterAPIException {
  RestResult rr=restClient.get(String.format("StorageCenter/ScVolumeConfiguration/%s",instanceId));
  if (!checkResults(rr)) {
    throw new StorageCenterAPIException(String.format("Error getting volume configuration: %s",rr.getErrorMsg()));
  }
  ScVolumeConfiguration volConfig=gson.fromJson(rr.getResult(),ScVolumeConfiguration.class);
  List<String> profiles=new ArrayList<>();
  for (  ScObject profile : volConfig.replayProfileList) {
    if (!cgID.equals(profile.instanceId)) {
      profiles.add(profile.instanceId);
    }
  }
  profiles.add(cgID);
  Parameters params=new Parameters();
  params.add("ReplayProfileList",profiles.toArray(new String[0]));
  rr=restClient.put(String.format("StorageCenter/ScVolumeConfiguration/%s",instanceId),params.toJson());
  if (!checkResults(rr)) {
    throw new StorageCenterAPIException(String.format("Error updating volume replay profile membership: %s",rr.getErrorMsg()));
  }
}

public static boolean isImplementsInterface(Class clazz,Class interfaceClass){
  if (!(interfaceClass.isInterface())) {
    throw new IllegalArgumentException("Interface class passed in is not an interface");
  }
  boolean resultThisClass=recursiveIsImplementsInterface(clazz,interfaceClass);
  if (resultThisClass) {
    return true;
  }
  return recursiveSuperclassImplementsInterface(clazz,interfaceClass);
}

private static String replaceChars(String str){
  StringBuffer buf=new StringBuffer(str);
  int length=buf.length();
  for (int i=0; i < length; i++) {
    char currentChar=buf.charAt(i);
    if (currentChar == ' ') {
      buf.setCharAt(i,'%');
      buf.insert(i + 1,"20");
      length=length + 2;
      i=i + 2;
    }
 else     if (currentChar == '\\') {
      buf.setCharAt(i,'/');
    }
  }
  return buf.toString();
}

private void addBinding(final String key,final Object value){
  m_bindings.put(key,value);
}

public static <T extends Enum<T>>T forKey(String key,Map<String,T> mapping,Class<T> enumeration){
  T t=mapping.get(key);
  if (t != null) {
    return t;
  }
  throw new IllegalArgumentException("Not an alternate key for " + enumeration.toString() + ": "+ key);
}

private ExchangeRate directLookup(final Currency source,final Currency target,final Date date){
  if (System.getProperty("EXPERIMENTAL") == null)   throw new UnsupportedOperationException("Work in progress");
  ExchangeRate rate=null;
  QL.require(((rate=fetch(source,target,date)) != null),"no direct conversion available");
  return rate;
}

protected static int findNextNewLineChar(CharSequence s,int start){
  for (int i=start; i < s.length(); i++) {
    if (s.charAt(i) == '\n') {
      return i;
    }
  }
  return -1;
}

public SkypeBuilder withChat(String id){
  if (!id.startsWith("19:"))   throw new IllegalArgumentException("Invalid chat id");
  if (password != null)   throw new IllegalArgumentException("Not guest account");
  this.chatId=id;
  return this;
}

public static int compareTo(Object left,Object right){
  return compareToWithEqualityCheck(left,right,false);
}

public static X509CRLImpl toImpl(X509CRL crl) throws CRLException {
  if (crl instanceof X509CRLImpl) {
    return (X509CRLImpl)crl;
  }
 else {
    return X509Factory.intern(crl);
  }
}

public final void test_ROUNDTRIP_GetKeySpecKeyProvider02(){
  boolean performed=false;
  for (int i=0; i < algName.length; i++) {
    for (int l=0; l < provider.length; l++) {
      if (provider[l] == null) {
        continue;
      }
      TestDataGenerator g;
      try {
        g=new TestDataGenerator(algName[i][0],algName[i][1],privateKeyInfoDamaged,provider[l]);
      }
 catch (      TestDataGenerator.AllowedFailure allowedFailure) {
        continue;
      }
      try {
        EncryptedPrivateKeyInfo epki;
        if (g.ap() == null) {
          epki=new EncryptedPrivateKeyInfo(algName[i][0],g.ct());
        }
 else {
          epki=new EncryptedPrivateKeyInfo(g.ap(),g.ct());
        }
        try {
          epki.getKeySpec(g.pubK() == null ? g.k() : g.pubK(),provider[l]);
          fail(algName[i][0] + ", " + algName[i][1]);
        }
 catch (        InvalidKeyException e) {
        }
        performed=true;
      }
 catch (      NoSuchAlgorithmException allowedFailure) {
      }
    }
  }
  assertTrue("Test not performed",performed);
}

public final synchronized void closeAll(){
  if (onCloseAll()) {
    Log.w(TAG,"Windows close all cancelled by implementation.");
    return;
  }
  LinkedList<Integer> ids=new LinkedList<Integer>();
  for (  int id : getExistingIds()) {
    ids.add(id);
  }
  for (  int id : ids) {
    close(id);
  }
}

private static Pair<Character,Integer> normalizeCodepoint(String origString_,Charset encoding_,int offset_){
  char normalizedChar='?';
  boolean isOk=false;
  final int codepoint=origString_.codePointAt(offset_);
  if (encoding_.equals(Charset.forName("US-ASCII"))) {
    if (codepoint < 128)     isOk=true;
  }
 else   if (encoding_.equals(Charset.forName("ISO-8859-1"))) {
    if (codepoint < 256)     isOk=true;
  }
 else   if (encoding_.equals(Charset.forName("UTF-8"))) {
    if (codepoint < 1114111)     isOk=true;
  }
  if (isOk) {
    normalizedChar=(char)codepoint;
  }
 else {
    isOk=true;
    final int type=Character.getType(codepoint);
    if (type == Character.CURRENCY_SYMBOL)     normalizedChar='$';
 else     if (type == Character.DASH_PUNCTUATION)     normalizedChar='-';
 else     if (type == Character.FINAL_QUOTE_PUNCTUATION) {
      normalizedChar='"';
    }
 else     if (type == Character.INITIAL_QUOTE_PUNCTUATION) {
      normalizedChar='"';
    }
 else     if (type == Character.END_PUNCTUATION)     normalizedChar='.';
 else     if (type == Character.DASH_PUNCTUATION)     normalizedChar='-';
 else     if (type == Character.OTHER_LETTER)     normalizedChar='a';
 else     if (type == Character.OTHER_NUMBER)     normalizedChar='0';
 else     if (type == Character.OTHER_PUNCTUATION)     normalizedChar='-';
 else     if (type == Character.OTHER_SYMBOL)     normalizedChar=' ';
 else     isOk=false;
  }
  Character newChar=null;
  if (isOk)   newChar=normalizedChar;
  return new Pair<>(newChar,codepoint);
}

public void testPosNegFirstShorter(){
  byte aBytes[]={-2,-3,-4,-4,5,14,23,39,48,57,66,5,14,23};
  byte bBytes[]={-128,9,56,100,-2,-76,89,45,91,3,-15,35,26,-117,23,87,-25,-75};
  int aSign=1;
  int bSign=-1;
  byte rBytes[]={-1,127,-10,-57,-101,-1,-1,-2,-2,-91,-2,31,-1,-11,125,-22,-83,30,95};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.or(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

private boolean startRandomGame(){
  AbstractLaunch[] pins=mCardAdapter.getLaunchers();
  List<AbstractLaunch> games=new ArrayList<AbstractLaunch>(pins.length);
  for (  AbstractLaunch pin : pins) {
    if (pin.isGame()) {
      if (pin.mState == AbstractLaunch.STATE_READY) {
        games.add(pin);
      }
    }
  }
  if (games.size() > 0) {
    Random r=new Random();
    int index=r.nextInt(games.size());
    AbstractLaunch game=games.get(index);
    Log.d(TAG,String.format("Picked a game at random [%s]",game.mContentDescription));
    game.onClick(game.getClickTarget());
    MeasurementManager.recordCustomEvent(mMeasurement,getString(R.string.analytics_event_category_launch),getString(R.string.analytics_launch_action_voice),game.mContentDescription);
    AnalyticsManager.sendEvent(R.string.analytics_event_category_launch,R.string.analytics_launch_action_voice,game.mContentDescription);
    return true;
  }
 else {
    return false;
  }
}

public void initDiskCache(){
synchronized (mDiskCacheLock) {
    if (mDiskLruCache == null || mDiskLruCache.isClosed()) {
      File diskCacheDir=mCacheParams.diskCacheDir;
      if (mCacheParams.diskCacheEnabled && diskCacheDir != null) {
        if (!diskCacheDir.exists()) {
          diskCacheDir.mkdirs();
        }
        if (getUsableSpace(diskCacheDir) > mCacheParams.diskCacheSize) {
          try {
            mDiskLruCache=DiskLruCache.open(diskCacheDir,1,1,mCacheParams.diskCacheSize);
            if (BuildConfig.DEBUG) {
              Log.d(TAG,"Disk cache initialized");
            }
          }
 catch (          final IOException e) {
            mCacheParams.diskCacheDir=null;
            Log.e(TAG,"initDiskCache - " + e);
          }
        }
      }
    }
    mDiskCacheStarting=false;
    mDiskCacheLock.notifyAll();
  }
}

boolean isRegisteredPermission(Permission permission);

public static int compare(String id1,String id2){
  int result=-1;
  String seed1=IdGenerator.getSeedFromId(id1);
  String seed2=IdGenerator.getSeedFromId(id2);
  if (seed1 != null && seed2 != null) {
    result=seed1.compareTo(seed2);
    if (result == 0) {
      long count1=IdGenerator.getSequenceFromId(id1);
      long count2=IdGenerator.getSequenceFromId(id2);
      result=(int)(count1 - count2);
    }
  }
  return result;
}

public static Element addChildElementNSElement(Element element,String childElementName,Document document,String nameSpaceUrl){
  Element newElement=document.createElementNS(nameSpaceUrl,childElementName);
  element.appendChild(newElement);
  return element;
}

public VNXeCommandResult modifyConsistencyGroupSync(String id,LunGroupModifyParam param){
  StringBuilder urlBld=new StringBuilder(URL_MODIFY1);
  urlBld.append(id);
  urlBld.append(URL_MODIFY2);
  _url=urlBld.toString();
  return postRequestSync(param);
}

protected Query finishQuery(BooleanQuery.Builder in,boolean allTermsRequired){
  return in.build();
}

public long sum(){
  long sum=0L;
  for (  AtomicLong value : map.values()) {
    sum=sum + value.get();
  }
  return sum;
}

public void testNegPosFirstShorter(){
  byte aBytes[]={-2,-3,-4,-4,5,14,23,39,48,57,66,5,14,23};
  byte bBytes[]={-128,9,56,100,-2,-76,89,45,91,3,-15,35,26,-117,23,87,-25,-75};
  int aSign=-1;
  int bSign=1;
  byte rBytes[]={0,-128,9,56,100,0,0,1,1,90,1,-32,0,10,-126,21,82,-31,-95};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.and(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getFooterSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if (mState == State.PULL_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

public static String extractFullStackTrace(Throwable e){
  StringWriter stringWriter=new StringWriter();
  PrintWriter printWriter=new PrintWriter(stringWriter);
  e.printStackTrace(printWriter);
  return stringWriter.toString();
}

public EmptyTileFactory(TileFactoryInfo info){
  super(info);
  int tileSize=info.getTileSize(info.getMinimumZoomLevel());
  emptyTile=new BufferedImage(tileSize,tileSize,BufferedImage.TYPE_INT_ARGB);
  Graphics2D g=emptyTile.createGraphics();
  g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
  g.setColor(Color.GRAY);
  g.fillRect(0,0,tileSize,tileSize);
  g.setColor(Color.WHITE);
  g.drawOval(10,10,tileSize - 20,tileSize - 20);
  g.fillOval(70,50,20,20);
  g.fillOval(tileSize - 90,50,20,20);
  g.fillOval(tileSize / 2 - 10,tileSize / 2 - 10,20,20);
  g.dispose();
}

public static void i(String tag,String msg,Object... args){
  if (sLevel > LEVEL_INFO) {
    return;
  }
  if (args.length > 0) {
    msg=String.format(msg,args);
  }
  Log.i(tag,msg);
}

public void close() throws IOException {
  guard.close();
  RandomAccessFile localRaf=raf;
  if (localRaf != null) {
synchronized (localRaf) {
      raf=null;
      localRaf.close();
    }
    if (fileToDeleteOnClose != null) {
      fileToDeleteOnClose.delete();
      fileToDeleteOnClose=null;
    }
  }
}

public boolean matchWithRegEx(String aRegEx){
  if (TextUtils.isEmpty(aRegEx)) {
    return false;
  }
  boolean matched=false;
  if (!TextUtils.isEmpty(mDisplayName)) {
    matched=mDisplayName.matches(aRegEx);
  }
  if (!matched) {
    for (    String email : mEmails) {
      matched|=email.matches(aRegEx);
    }
  }
  return matched;
}

public String stemString(String str){
  StringBuffer result=new StringBuffer();
  int start=-1;
  for (int j=0; j < str.length(); j++) {
    char c=str.charAt(j);
    if (Character.isLetterOrDigit(c)) {
      if (start == -1) {
        start=j;
      }
    }
 else     if (c == '\'') {
      if (start == -1) {
        result.append(c);
      }
    }
 else {
      if (start != -1) {
        result.append(stem(str.substring(start,j)));
        start=-1;
      }
      result.append(c);
    }
  }
  if (start != -1) {
    result.append(stem(str.substring(start,str.length())));
  }
  return result.toString();
}

public static List<Integer> parseNumericList(String string){
  ArrayList<Integer> list=new ArrayList<>();
  Pattern ranges=Pattern.compile("(?<Range>(\\d+\\s*-\\s*\\d+))");
  Matcher m=ranges.matcher(string);
  while (m.find()) {
    String range=m.group("Range");
    string=string.replace(range,"");
    parseNumericRange(range,list);
  }
  String[] numbers=string.split("\\D+");
  for (int i=0; i < numbers.length; ++i) {
    String number=numbers[i];
    if (!number.isEmpty()) {
      list.add(Integer.valueOf(number));
    }
  }
  Collections.sort(list);
  return list;
}

protected void savePassCodeAndExit(){
  Intent resultIntent=new Intent();
  resultIntent.putExtra(KEY_PASSCODE,mPassCodeDigits[0] + mPassCodeDigits[1] + mPassCodeDigits[2]+ mPassCodeDigits[3]);
  setResult(RESULT_OK,resultIntent);
  finish();
}

public static void readFully(FileChannel file,long pos,ByteBuffer dst){
  try {
    do {
      int len=file.read(dst,pos);
      if (len < 0) {
        throw new EOFException();
      }
      pos+=len;
    }
 while (dst.remaining() > 0);
    dst.rewind();
  }
 catch (  IOException e) {
    long size;
    try {
      size=file.size();
    }
 catch (    IOException e2) {
      size=-1;
    }
    throw newIllegalStateException(ERROR_READING_FAILED,"Reading from {0} failed; file length {1} " + "read length {2} at {3}",file,size,dst.remaining(),pos,e);
  }
}

private static void sparseFullRepresentationTest(final ISchemaVersion schemaVersion) throws IOException {
  final Writer output=openOutput(schemaVersion,"sparse_full_representation",TestType.UNION);
  final HLL emptyHLL1=newHLL(HLLType.EMPTY);
  final HLL emptyHLL2=newHLL(HLLType.EMPTY);
  cumulativeUnionLine(output,emptyHLL1,emptyHLL2,schemaVersion);
  final HLL fullHLL=newHLL(HLLType.FULL);
  fullHLL.addRaw(constructHLLValue(LOG2M,0,1));
  final HLL sparseHLL=newHLL(HLLType.SPARSE);
  sparseHLL.addRaw(constructHLLValue(LOG2M,0,1));
  output.write(stringCardinality(fullHLL) + "," + toByteA(fullHLL,schemaVersion)+ ","+ stringCardinality(sparseHLL)+ ","+ toByteA(sparseHLL,schemaVersion)+ "\n");
  output.flush();
  final HLL fullHLL2=newHLL(HLLType.FULL);
  fullHLL2.addRaw(constructHLLValue(LOG2M,1,1));
  sparseHLL.addRaw(constructHLLValue(LOG2M,1,1));
  output.write(stringCardinality(fullHLL2) + "," + toByteA(fullHLL2,schemaVersion)+ ","+ stringCardinality(sparseHLL)+ ","+ toByteA(sparseHLL,schemaVersion)+ "\n");
  output.flush();
  final HLL fullHLL3=newHLL(HLLType.FULL);
  for (int i=2; i < (SPARSE_THRESHOLD + 1); i++) {
    fullHLL3.addRaw(constructHLLValue(LOG2M,i,1));
    sparseHLL.addRaw(constructHLLValue(LOG2M,i,1));
  }
  output.write(stringCardinality(fullHLL3) + "," + toByteA(fullHLL3,schemaVersion)+ ","+ stringCardinality(sparseHLL)+ ","+ toByteA(sparseHLL,schemaVersion)+ "\n");
  output.flush();
}

public void triggerCycle(){
  lock.lock();
  triggerCount++;
  contextsParked=0;
  lock.broadcast();
  lock.unlock();
}

protected boolean heapifyDownComparator(final int ipos,Object cur){
  int pos=ipos;
  final int half=size >>> 1;
  while (pos < half) {
    int min=pos;
    Object best=cur;
    final int lchild=(pos << 1) + 1;
    Object left=queue[lchild];
    if (comparator.compare(best,left) > 0) {
      min=lchild;
      best=left;
    }
    final int rchild=lchild + 1;
    if (rchild < size) {
      Object right=queue[rchild];
      if (comparator.compare(best,right) > 0) {
        min=rchild;
        best=right;
      }
    }
    if (min == pos) {
      break;
    }
    queue[pos]=best;
    pos=min;
  }
  queue[pos]=cur;
  return (pos != ipos);
}

public static boolean isString(String str){
  return ((str.startsWith("\"") && str.endsWith("\"")) || (str.startsWith("'") && str.endsWith("'"))) && str.length() > 1;
}

static public boolean hasPhoto(Tweet tweet){
  return getPhotoEntity(tweet) != null;
}

public void testCase19(){
  byte aBytes[]={1,2,3,4,5,6,7};
  byte rBytes[]={1,2,3,4,5,6,7};
  int aSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=BigInteger.ZERO;
  BigInteger result=aNumber.add(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public static StringBuilder formatTo(StringBuilder buf,long[] d,String sep){
  if (d == null) {
    return buf.append("null");
  }
  if (d.length == 0) {
    return buf;
  }
  buf.append(d[0]);
  for (int i=1; i < d.length; i++) {
    buf.append(sep);
    buf.append(d[i]);
  }
  return buf;
}

public static <T>int upperBound(final List<T> valueList,int fromIdx,int toIdx,final Comparable<T> value){
  int len=toIdx - fromIdx + (toIdx > fromIdx ? 1 : 0);
  int from=fromIdx;
  int half;
  int middle;
  while (len > 0) {
    half=len >> 1;
    middle=from;
    middle=middle + half;
    if (value.compareTo(valueList.get(middle)) == -1) {
      len=half;
    }
 else {
      from=middle;
      from++;
      len=len - half - 1;
    }
  }
  return from;
}

public int size(){
  return data.size();
}

public static synchronized void registerAdditionalHyphenationFileDirectory(String directory){
  if (additionalHyphenationFileDirectories == null) {
    additionalHyphenationFileDirectories=new ArrayList<>();
  }
  additionalHyphenationFileDirectories.add(directory);
}

private void insertNewDriveFiles() throws IOException {
  Cursor cursor=null;
  try {
    cursor=myTracksProviderUtils.getTrackCursor(SyncUtils.NO_DRIVE_ID_TRACKS_QUERY,null,null);
    long recordingTrackId=PreferencesUtils.getLong(context,R.string.recording_track_id_key);
    if (cursor != null && cursor.moveToFirst()) {
      do {
        Track track=myTracksProviderUtils.createTrack(cursor);
        if (track.getId() == recordingTrackId) {
          continue;
        }
        SyncUtils.insertDriveFile(drive,folderId,context,myTracksProviderUtils,track,true,true);
      }
 while (cursor.moveToNext());
    }
  }
  finally {
    if (cursor != null) {
      cursor.close();
    }
  }
}

public void testHandle_normalCompletion(){
  for (  ExecutionMode m : ExecutionMode.values())   for (  boolean createIncomplete : new boolean[]{true,false})   for (  Integer v1 : new Integer[]{1,null}) {
    final CompletableFuture<Integer> f=new CompletableFuture<>();
    final AtomicInteger a=new AtomicInteger(0);
    if (!createIncomplete)     assertTrue(f.complete(v1));
    final CompletableFuture<Integer> g=m.handle(f,null);
    if (createIncomplete)     assertTrue(f.complete(v1));
    checkCompletedNormally(g,inc(v1));
    checkCompletedNormally(f,v1);
    assertEquals(1,a.get());
  }
}

private static String unescape(String s){
  int len=s.length(), base=0, idx;
  String escapes="tnrbf\\\"'";
  String chars="\t\n\r\b\f\\\"'";
  StringBuffer sbuf=null;
  while ((idx=s.indexOf('\\',base)) != -1) {
    if (sbuf != null)     sbuf.append(s.substring(base,idx));
    if (idx + 1 == len)     break;
    char c=s.charAt(idx + 1);
    int cidx=escapes.indexOf(c);
    if (cidx == -1) {
      sbuf.append('\\');
      sbuf.append(c);
    }
 else {
      if (sbuf == null)       sbuf=new StringBuffer(s.substring(base,idx));
      sbuf.append(chars.charAt(cidx));
    }
    base=idx + 2;
  }
  if (sbuf != null && base < len)   sbuf.append(s.substring(base));
  return (sbuf == null ? s : sbuf.toString());
}

public static void put(String dbgToken){
  dbgTable.put(dbgToken,Boolean.TRUE);
}

public boolean removeDataSet(T d){
  if (d == null)   return false;
  boolean removed=mDataSets.remove(d);
  if (removed) {
    mYValCount-=d.getEntryCount();
    mYValueSum-=d.getYValueSum();
    calcMinMax(mDataSets);
  }
  return removed;
}

public long reservedStore(){
  return m_size * m_totalSlots;
}

public Transfer writeString(String s) throws IOException {
  if (s == null) {
    out.writeInt(-1);
  }
 else {
    int len=s.length();
    out.writeInt(len);
    for (int i=0; i < len; i++) {
      out.writeChar(s.charAt(i));
    }
  }
  return this;
}

private void fillInsideDraw(Graphics g,int x,int y,int w,int h){
  g.setColor(Color.BLACK);
  g.drawRect(x,y,w,h);
  g.setColor(Color.LIGHT_GRAY);
  g.fillRect(x + 1,y + 1,w - 1,h - 1);
}

public DrawerBuilder addStickyDrawerItems(@NonNull IDrawerItem... stickyDrawerItems){
  if (this.mStickyDrawerItems == null) {
    this.mStickyDrawerItems=new ArrayList<>();
  }
  Collections.addAll(this.mStickyDrawerItems,stickyDrawerItems);
  return this;
}

public void appendToBuffer(StringBuilder buf){
  Iterator<Polygon> iter=polygons.iterator();
  while (iter.hasNext()) {
    Polygon poly=iter.next();
    poly.appendToBuffer(buf);
    if (iter.hasNext()) {
      buf.append(" -- ");
    }
  }
}

public void addFunction(FunctionInterface activeFunction){
  functions.add(activeFunction);
}

public static Charset toCharset(Charset charset){
  return charset == null ? Charset.defaultCharset() : charset;
}

public <T extends DataObject>Joiner join(Class<T> clazz,String alias){
  if (!jClasses.isEmpty()) {
    throw new JoinerException("Illegal use of Joiner; starting a new join in the middle of a join chain");
  }
  JClass jc=new JClass(clazz,alias,jClasses.size());
  jClasses.add(jc);
  lastJClass=jc;
  aliasMap.put(alias,jc);
  return this;
}

public ByteVector putByteArray(final byte[] b,final int off,final int len){
  if (length + len > data.length) {
    enlarge(len);
  }
  if (b != null) {
    System.arraycopy(b,off,data,length,len);
  }
  length+=len;
  return this;
}

public static void showProgressBar(int status,int i){
  if (mRootView != null) {
    ProgressBar pb=(ProgressBar)mRootView.findViewById(R.id.progress_slice);
    TextView tv=(TextView)mRootView.findViewById(R.id.viewer_text_progress_slice);
    TextView tve=(TextView)mRootView.findViewById(R.id.viewer_text_estimated_time);
    TextView tve_title=(TextView)mRootView.findViewById(R.id.viewer_estimated_time_textview);
    if (mSlicingHandler.getLastReference() != null) {
      tve_title.setVisibility(View.VISIBLE);
      pb.setVisibility(View.VISIBLE);
switch (status) {
case StateUtils.SLICER_HIDE:
        if (i < 0) {
          tv.setText(R.string.error);
        }
 else {
          tv.setText(R.string.viewer_text_downloaded);
        }
      pb.setVisibility(View.INVISIBLE);
    break;
case StateUtils.SLICER_UPLOAD:
  String uploadText=mContext.getString(R.string.viewer_text_uploading);
if (i == 0) pb.setIndeterminate(true);
 else {
  pb.setProgress(i);
  pb.setIndeterminate(false);
  uploadText+=" (" + i + "%)";
}
tv.setText(uploadText);
tve.setText(null);
break;
case StateUtils.SLICER_SLICE:
String slicingText=mContext.getString(R.string.viewer_text_slicing);
if (i == 0) {
pb.setIndeterminate(true);
}
 else if (i == 100) {
pb.setIndeterminate(false);
pb.setProgress(100);
slicingText+="  " + mContext.getString(R.string.viewer_text_done);
}
 else {
pb.setProgress(i);
pb.setIndeterminate(false);
slicingText+="  (" + i + "%)";
}
tv.setText(slicingText);
tve.setText(null);
mRootView.invalidate();
break;
case StateUtils.SLICER_DOWNLOAD:
if (i > 0) {
tve.setText(OctoprintConnection.ConvertSecondToHHMMString(String.valueOf(i)));
}
tv.setText(R.string.viewer_text_downloading);
pb.setIndeterminate(true);
break;
default :
break;
}
}
 else {
pb.setVisibility(View.INVISIBLE);
tve_title.setVisibility(View.INVISIBLE);
tv.setText(null);
tve.setText(null);
mRootView.invalidate();
}
}
}

public LaunchOption(Version version,Authenticator authenticator,MinecraftDirectory minecraftDir){
  Objects.requireNonNull(version);
  Objects.requireNonNull(authenticator);
  Objects.requireNonNull(minecraftDir);
  this.version=version;
  this.authenticator=authenticator;
  this.minecraftDirectory=minecraftDir;
  this.runtimeDirectory=minecraftDir;
  this.javaEnvironment=JavaEnvironment.current();
}

protected boolean isStoppable(){
  return (isRunning() && getLocator() != null);
}

public void load(String fileName) throws Exception {
  if (!fileName.endsWith(".kf") && !fileName.endsWith(".kfml")) {
    throw new Exception("Can only load and run binary or xml serialized KnowledgeFlows " + "(*.kf | *.kfml)");
  }
  if (fileName.endsWith(".kf")) {
    loadBinary(fileName);
  }
 else   if (fileName.endsWith(".kfml")) {
    loadXML(fileName);
  }
}

public Bindings addOptComponent(String property,Class clazz,JToggleButton c,boolean enabledByDefault){
  Binding b=new OptComponentBinding(this,property,clazz,c,enabledByDefault);
  if (_optComponents.containsKey(property)) {
    throw new BindingException(Messages.getString("Bindings.duplicate.binding"));
  }
  _optComponents.put(property,b);
  return this;
}

public static boolean copyFile(File file,File copy){
  if (file == null || copy == null)   throw new NullPointerException("File cannot be null");
  if (!file.isFile() || copy.isDirectory())   throw new IllegalArgumentException("Not a valid file");
  FileInputStream fis=null;
  FileOutputStream fos=null;
  try {
    fis=new FileInputStream(file);
    fos=new FileOutputStream(copy);
    int bytes;
    byte[] packet=new byte[COPY_PACKET_SIZE];
    while ((bytes=fis.read(packet,0,COPY_PACKET_SIZE)) != -1)     fos.write(packet,0,bytes);
    return true;
  }
 catch (  Exception e) {
    LOGGER.log(Level.SEVERE,"Error copying file",e);
    return false;
  }
 finally {
    try {
      if (fos != null)       fos.close();
    }
 catch (    Exception e) {
      LOGGER.log(Level.SEVERE,"Problem closing target stream",e);
    }
    try {
      if (fis != null)       fis.close();
    }
 catch (    Exception e) {
      LOGGER.log(Level.SEVERE,"Problem closing source stream",e);
    }
  }
}

public static byte[] encryptMySQLPassword(String password,byte[] seed){
  if (password == null || password.equals("")) {
    return new byte[0];
  }
  MessageDigest digest=null;
  try {
    digest=MessageDigest.getInstance("SHA-1");
  }
 catch (  NoSuchAlgorithmException e) {
    logger.error("Cannot encrypt password",e);
    return new byte[0];
  }
  byte[] stage1_hash=digest.digest(password.getBytes());
  digest.reset();
  byte[] sha1_stage1=digest.digest(stage1_hash);
  digest.reset();
  digest.update(seed);
  digest.update(sha1_stage1);
  byte[] finalSha1=digest.digest();
  byte[] token=new byte[finalSha1.length];
  for (int i=0; i < finalSha1.length; i++) {
    token[i]=(byte)(stage1_hash[i] ^ finalSha1[i]);
  }
  return token;
}

protected void addUrl(URL url){
  if (urls.contains(url)) {
    LOGGER.info("Skipped CRL url (duplicate): " + url);
    return;
  }
  urls.add(url);
  LOGGER.info("Added CRL url: " + url);
}

private int[] defineNumeric(Random random){
  int[] num=new int[getNumAttributes()];
  for (int i=0; i < num.length; i++) {
    num[i]=Attribute.NOMINAL;
  }
  int numNum=0;
  for (int i=0; (numNum < getNumNumeric()) && (i < getNumAttributes() * 5); i++) {
    int maybeNext=(int)(random.nextDouble() * num.length);
    if (num[maybeNext] != Attribute.NUMERIC) {
      num[maybeNext]=Attribute.NUMERIC;
      numNum++;
    }
  }
  return num;
}

public static boolean isFavoriteStation(Context context,int iStation){
  return isStationExist(context,iStation,STATION_TYPE_FAVORITE);
}

protected void paintCaption(Graphics g,Rectangle rect){
  String s=getTargetLabel();
  if (s.equals("")) {
    return;
  }
  g.setFont(getTargetFont());
  FontMetrics fm=g.getFontMetrics();
  String str=getTargetLabel();
  int width=fm.stringWidth(str);
  int textx=rect.x + (rect.width - width) / 2;
  int texty=rect.y + CAPTION_MARGIN_TOP + fm.getAscent();
  int sepy=rect.y + rect.height - CAPTION_SEPARATOR_HEIGHT / 2;
  g.setColor(isTargetEnabled() ? getForegroundColor() : getDisabledColor());
  g.drawString(s,textx,texty);
  draw3DRect(g,rect.x,sepy,rect.width,2,false);
}

private static boolean hasSpecializedHandlerIntents(Context context,Intent intent){
  try {
    PackageManager pm=context.getPackageManager();
    List<ResolveInfo> handlers=pm.queryIntentActivities(intent,PackageManager.GET_RESOLVED_FILTER);
    if (handlers == null || handlers.size() == 0) {
      return false;
    }
    for (    ResolveInfo resolveInfo : handlers) {
      IntentFilter filter=resolveInfo.filter;
      if (filter == null)       continue;
      if (filter.countDataAuthorities() == 0 || filter.countDataPaths() == 0)       continue;
      if (resolveInfo.activityInfo == null)       continue;
      return true;
    }
  }
 catch (  RuntimeException e) {
    Log.e(TAG,"Runtime exception while getting specialized handlers");
  }
  return false;
}

public void putFloat(float x){
  bb.putFloat(space-=4,x);
}

final void putInt(int offset,int value){
  unsafe.putInt(offset + address,value);
}

private static boolean isUnreservedCharacter(char p_char){
  return (isAlphanum(p_char) || MARK_CHARACTERS.indexOf(p_char) != -1);
}

public static InetSocketAddress parseSocketAddress(String addr){
  String[] parts=addr.split(COLON);
  Preconditions.checkArgument(parts.length == 2);
  String hostname=parts[0];
  int port=Integer.parseInt(parts[1]);
  return new InetSocketAddress(hostname,port);
}

@Override public void writeExternal(ObjectOutput out) throws IOException {
  super.writeExternal(out);
  out.writeObject(approximation);
}

public Object[] toArray(){
  final Object[] items=this.items;
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    final int count=this.count;
    Object[] a=new Object[count];
    int n=items.length - takeIndex;
    if (count <= n) {
      System.arraycopy(items,takeIndex,a,0,count);
    }
 else {
      System.arraycopy(items,takeIndex,a,0,n);
      System.arraycopy(items,0,a,n,count - n);
    }
    return a;
  }
  finally {
    lock.unlock();
  }
}

public void messageArrived(MqttPublish sendMessage){
  final String methodName="messageArrived";
  if (mqttCallback != null || callbacks.size() > 0) {
synchronized (spaceAvailable) {
      while (running && !quiescing && messageQueue.size() >= INBOUND_QUEUE_SIZE) {
        try {
          log.fine(CLASS_NAME,methodName,"709");
          spaceAvailable.wait(200);
        }
 catch (        InterruptedException ex) {
        }
      }
    }
    if (!quiescing) {
      messageQueue.addElement(sendMessage);
synchronized (workAvailable) {
        log.fine(CLASS_NAME,methodName,"710");
        workAvailable.notifyAll();
      }
    }
  }
}

private void findHome(){
  String home=System.getProperty("replicator.home.dir");
  if (home == null)   home=System.getProperty("manager.home");
  if (home == null)   home=System.getProperty("cluster.home");
  if (home == null)   home=System.getProperty("user.dir");
  if (home != null)   manifestPath=home + File.separator + ".."+ File.separator+ manifestFileName;
 else   manifestPath=manifestFileName;
}

public static final int[] toIntArray(String s[]){
  int u[]=new int[s.length];
  for (int j=0; j < s.length; j++) {
    u[j]=Integer.parseInt(s[j]);
  }
  return u;
}

private List<String> checkAllColumnsInCube(CubeInstance cube,TableDesc table,Map<String,HiveTableMeta.HiveTableColumnMeta> fieldsMap){
  Set<ColumnDesc> usedColumns=Sets.newHashSet();
  for (  TblColRef col : cube.getAllColumns()) {
    usedColumns.add(col.getColumnDesc());
  }
  List<String> violateColumns=Lists.newArrayList();
  for (  ColumnDesc column : table.getColumns()) {
    if (usedColumns.contains(column)) {
      HiveTableMeta.HiveTableColumnMeta field=fieldsMap.get(column.getName());
      if (field == null || !isColumnCompatible(column,field)) {
        violateColumns.add(column.getName());
      }
    }
  }
  return violateColumns;
}

public static String makeUnifiedLineFeeds(String query){
  if (query.indexOf('\r') == -1) {
    return query;
  }
  StringBuilder result=new StringBuilder(query.length());
  for (int i=0; i < query.length(); i++) {
    char c=query.charAt(i);
    if (c == '\r') {
      continue;
    }
    result.append(c);
  }
  return result.toString();
}

private void reflectMemberVariablesInLeftButton(){
  final boolean lastPageReached=(viewPager.getCurrentItem() + 1) == pages.size();
  final boolean buttonShouldBeInvisible=(lastPageReached && disableLeftButtonOnLastPage) || leftButtonDisabled;
  final boolean buttonIsCurrentlyInvisible=leftButton.getVisibility() == View.INVISIBLE;
  final boolean shouldUpdateButton=buttonShouldBeInvisible != buttonIsCurrentlyInvisible;
  if (shouldUpdateButton) {
    final Animator buttonAnimator=buttonShouldBeInvisible ? buttonAnimatorFactory.newLeftButtonDisappearAnimator(leftButton) : buttonAnimatorFactory.newLeftButtonAppearAnimator(leftButton);
    if (buttonShouldBeInvisible) {
      disableButton(buttonAnimator,leftButton);
    }
 else {
      enableButton(buttonAnimator,leftButton);
    }
  }
}

public static void registerSemiDisposableBlock(String oreDictName){
  semiDisposableBlocks.add(oreDictName);
}

public boolean acceptsTypeName(String type){
  return _typeList.contains(type);
}

public void deleteAsync(final String id,final FutureCallback<Task> responseCallback) throws IOException {
  deleteObjectAsync(id,responseCallback);
}

private boolean continueAfterAcceptFailure(Throwable t){
  RMIFailureHandler fh=RMISocketFactory.getFailureHandler();
  if (fh != null) {
    return fh.failure(t instanceof Exception ? (Exception)t : new InvocationTargetException(t));
  }
 else {
    throttleLoopOnException();
    return true;
  }
}

private static void processPackage(String tbName,Packages pkg){
  String classNamePrefix=StringUtil.parseHumpName(tbName,true,isHumpModelClass);
  pkg.setDao(packagePrefix + (StringUtil.isEmpty(packagePrefix) || StringUtil.isEmpty(packageDao) ? "" : ".") + packageDao);
  pkg.setDaoName(classNamePrefix + daoSuffix);
  pkg.setModel(packagePrefix + (StringUtil.isEmpty(packagePrefix) || StringUtil.isEmpty(packageModel) ? "" : ".") + packageModel);
  pkg.setModelName(classNamePrefix + modelSuffix);
  pkg.setMapperXml(packagePrefix + (StringUtil.isEmpty(packagePrefix) || StringUtil.isEmpty(packageMapperXml) ? "" : ".") + packageMapperXml);
  pkg.setMapperXmlName(classNamePrefix + mapperXmlSuffix);
  pkg.setModelNameLowerFirst(StringUtil.lowerFirst(pkg.getModelName()));
}

public void addOnCentralPositionChangedListener(OnCentralPositionChangedListener listener){
  mOnCentralPositionChangedListeners.add(listener);
}

public boolean addCall(String sourceClass,String sourceMethod,String targetClass,String targetMethod){
  CallGraphEntry from=new CallGraphEntry(targetClass,targetMethod);
  CallGraphEntry to=new CallGraphEntry(sourceClass,sourceMethod);
  if (sourceClass.equals(className))   cutNodes.add(to);
  if (!graph.containsEdge(from,to)) {
    graph.addEdge(from,to);
    callGraphClasses.add(targetClass.replaceAll("/","."));
    return true;
  }
  return false;
}

private static void doThreadDump(final HttpServletRequest req,final HttpServletResponse resp) throws IOException {
  resp.setStatus(HTTP_OK);
  resp.addHeader("Cache-Control","no-cache");
  resp.setContentType(MIME_TEXT_PLAIN);
  final PrintWriter w=resp.getWriter();
  try {
    BigdataStatics.threadDump(w);
    w.flush();
  }
 catch (  Throwable t) {
    launderThrowable(t,resp,"");
  }
 finally {
    w.close();
  }
}

public static boolean isValidNmtoken(String nmtoken){
  final int length=nmtoken.length();
  if (length == 0) {
    return false;
  }
  for (int i=0; i < length; ++i) {
    char ch=nmtoken.charAt(i);
    if (!isName(ch)) {
      return false;
    }
  }
  return true;
}

public MMRoll(MMRandom rng){
  super(6,1);
  this.total=rng.randomInt(this.faces) + this.min;
  all.addElement(this.total);
}

public void handleButton3Request(RequestInvocationEvent event) throws ModelControlException {
  returnToHomePage();
}

static <T>UnixStream<T> unixify(final Stream<T> stream){
  Objects.requireNonNull(stream,"The input stream must not be null");
  return new UnixStreamImpl<>(stream);
}

@Deprecated public MediaFile(File f){
  this(f.toPath(),null);
}

public static KeyStore load(File keyStoreFile,Password password,KeyStoreType keyStoreType) throws CryptoException, FileNotFoundException {
  if (!keyStoreType.isFileBased()) {
    throw new CryptoException(MessageFormat.format(res.getString("NoLoadKeyStoreNotFile.exception.message"),keyStoreType.jce()));
  }
  FileInputStream fis=new FileInputStream(keyStoreFile);
  KeyStore keyStore=getKeyStoreInstance(keyStoreType);
  try {
    keyStore.load(fis,password.toCharArray());
  }
 catch (  CertificateException ex) {
    throw new KeyStoreLoadException(MessageFormat.format(res.getString("NoLoadKeyStoreType.exception.message"),keyStoreType),ex,keyStoreType);
  }
catch (  NoSuchAlgorithmException ex) {
    throw new KeyStoreLoadException(MessageFormat.format(res.getString("NoLoadKeyStoreType.exception.message"),keyStoreType),ex,keyStoreType);
  }
catch (  FileNotFoundException ex) {
    throw ex;
  }
catch (  IOException ex) {
    throw new KeyStoreLoadException(MessageFormat.format(res.getString("NoLoadKeyStoreType.exception.message"),keyStoreType),ex,keyStoreType);
  }
 finally {
    IOUtils.closeQuietly(fis);
  }
  return keyStore;
}

public static String addToCartBulk(HttpServletRequest request,HttpServletResponse response){
  String categoryId=request.getParameter("category_id");
  ShoppingCart cart=getCartObject(request);
  Delegator delegator=(Delegator)request.getAttribute("delegator");
  LocalDispatcher dispatcher=(LocalDispatcher)request.getAttribute("dispatcher");
  ShoppingCartHelper cartHelper=new ShoppingCartHelper(delegator,dispatcher,cart);
  String controlDirective;
  Map<String,Object> result;
  Map<String,Object> paramMap=UtilHttp.getParameterMap(request);
  String catalogId=CatalogWorker.getCurrentCatalogId(request);
  result=cartHelper.addToCartBulk(catalogId,categoryId,paramMap);
  controlDirective=processResult(result,request);
  if (controlDirective.equals(ERROR)) {
    return "error";
  }
 else {
    return "success";
  }
}

public void dumpLog(String containerId,File logFile) throws DockerException, InterruptedException {
  LogStream errorStream=null;
  FileChannel fileChannel=null;
  FileOutputStream fileOutputStream=null;
  try {
    if (logFile.exists()) {
      logFile.delete();
    }
    logFile.createNewFile();
    fileOutputStream=new FileOutputStream(logFile);
    fileChannel=fileOutputStream.getChannel();
    errorStream=dockerClient.logs(containerId,LogsParam.stderr());
    while (errorStream.hasNext()) {
      LogMessage message=errorStream.next();
      ByteBuffer buffer=message.content();
      fileChannel.write(buffer);
    }
  }
 catch (  FileNotFoundException e) {
    throw new DockerException("File " + logFile + " not found");
  }
catch (  IOException e) {
    throw new DockerException(e);
  }
 finally {
    if (errorStream != null) {
      errorStream.close();
    }
    if (fileChannel != null) {
      try {
        fileChannel.close();
      }
 catch (      IOException e) {
        logger.error("Failed to close file channel",e);
      }
    }
    if (fileOutputStream != null) {
      try {
        fileOutputStream.close();
      }
 catch (      IOException e) {
        logger.error("Failed to close file output stream",e);
      }
    }
  }
}

public static final void warning(String message,Throwable e){
  if (message == null && e != null) {
    message=e.getMessage();
  }
  logExpensive(Level.WARNING,message,e);
}

public static IndexedImage pack(int[] rgb,int width,int height){
  int arrayLength=width * height;
  int[] tempPalette=new int[256];
  int paletteLocation=0;
  for (int iter=0; iter < arrayLength; iter++) {
    int current=rgb[iter];
    if (!contains(tempPalette,paletteLocation,current)) {
      if (paletteLocation > 255) {
        return null;
      }
      tempPalette[paletteLocation]=current;
      paletteLocation++;
    }
  }
  if (paletteLocation != tempPalette.length) {
    int[] newArray=new int[paletteLocation];
    System.arraycopy(tempPalette,0,newArray,0,paletteLocation);
    tempPalette=newArray;
  }
  IndexedImage i=new IndexedImage(width,height,tempPalette,rgb);
  return i;
}

public void addHint(Component hintComponent,Component destinationComponent,String position){
  hintComponent.putClientProperty(POS,position);
  hintComponent.putClientProperty(DEST,destinationComponent);
  vec.addElement(hintComponent);
}

public static int convertSRGBtoLinearRGB(int color){
  float input, output;
  input=color / 255.0f;
  if (input <= 0.04045f) {
    output=input / 12.92f;
  }
 else {
    output=(float)Math.pow((input + 0.055) / 1.055,2.4);
  }
  return Math.round(output * 255.0f);
}

public void vetoableChange(PropertyChangeEvent evt) throws PropertyVetoException {
  log.info(evt.toString());
  throw new PropertyVetoException("Skip reset for trx entries cache",evt);
}

private void writeAttribute(java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (namespace.equals("")) {
    xmlWriter.writeAttribute(attName,attValue);
  }
 else {
    registerPrefix(xmlWriter,namespace);
    xmlWriter.writeAttribute(namespace,attName,attValue);
  }
}

public void finish() throws SQLException {
  Statement statement=connection.createStatement();
  statement.execute("CREATE INDEX articleIdx on revisions(ArticleID);");
  statement.close();
  statement=connection.createStatement();
  statement.execute("ALTER TABLE index_articleID_rc_ts ENABLE KEYS;");
  statement.close();
  statement=connection.createStatement();
  statement.execute("ALTER TABLE index_revisionID ENABLE KEYS;");
  statement.close();
  statement=connection.createStatement();
  statement.execute("ALTER TABLE index_chronological ENABLE KEYS;");
  statement.close();
}

@Override public boolean contains(Object object){
  return indexOf(object,0) != -1;
}

public void put(E item) throws InterruptedException {
  if (!done.get()) {
    queue.put(item);
  }
}

public AuthorizationCode(String code,String resourceOwnerId,String clientId,String redirectUri,Set<String> scope,String claims,long expiryTime,String nonce,String realm,String authModules,String acr,String ssoTokenId,String codeChallenge,String codeChallengeMethod,String authGrantId,String auditId){
  super(new HashMap<String,Object>());
  setStringProperty(ID,code);
  setStringProperty(USERNAME,resourceOwnerId);
  setStringProperty(CLIENT_ID,clientId);
  setStringProperty(REDIRECT_URI,redirectUri);
  setStringProperty(EXPIRE_TIME,String.valueOf(expiryTime));
  put(SCOPE,newList(scope));
  setStringProperty(TOKEN_TYPE,"Bearer");
  setStringProperty(TOKEN_NAME,OAUTH_CODE_TYPE);
  setStringProperty(NONCE,nonce);
  setStringProperty(AUTH_MODULES,authModules);
  setStringProperty(ACR,acr);
  setStringProperty(CODE_CHALLENGE,codeChallenge);
  setStringProperty(CODE_CHALLENGE_METHOD,codeChallengeMethod);
  setStringProperty(AUTH_GRANT_ID,authGrantId);
  setStringProperty(REALM,realm == null || realm.isEmpty() ? "/" : realm);
  setStringProperty(SSO_TOKEN_ID,ssoTokenId);
  put(CLAIMS,CollectionUtils.asList(claims));
  setStringProperty(AUDIT_TRACKING_ID,auditId);
}

@Override public Object draw(Graphics2D g2,Rectangle2D area,Object params){
  draw(g2,area);
  return null;
}

public void testSetBitPositiveInside3(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int number=45;
  byte rBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.setBit(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public boolean isRowVisible(int row){
  if (row != -1) {
    Rectangle cellRect=getCellRect(row,0,false);
    Rectangle visibleRect=getVisibleRect();
    return visibleRect.intersects(cellRect);
  }
 else   return false;
}

public void signalEvent(){
  Collection<Semaphore> semaphores=_semaphores.values();
  for (  Semaphore semaphore : semaphores) {
    semaphore.release();
    semaphores.remove(semaphore);
  }
}

public static int fileInTimeRange(File f,Date start,Date end){
  long time=getFileTime(f);
  if (start != null && time < start.getTime()) {
    return -1;
  }
  if (end != null && time > end.getTime()) {
    return 1;
  }
  return 0;
}

private float interpolate(){
  long currTime=System.currentTimeMillis();
  float elapsed=(currTime - startTime) / ZOOM_TIME;
  elapsed=Math.min(1f,elapsed);
  return interpolator.getInterpolation(elapsed);
}

public Object extFunction(String ns,String funcName,Vector argVec,Object methodKey,ExpressionContext exprContext) throws javax.xml.transform.TransformerException {
  Object result=null;
  if (null != ns) {
    ExtensionHandler extNS=(ExtensionHandler)m_extensionFunctionNamespaces.get(ns);
    if (null != extNS) {
      try {
        result=extNS.callFunction(funcName,argVec,methodKey,exprContext);
      }
 catch (      javax.xml.transform.TransformerException e) {
        throw e;
      }
catch (      Exception e) {
        throw new javax.xml.transform.TransformerException(e);
      }
    }
 else {
      throw new XPathProcessorException(XSLMessages.createMessage(XSLTErrorResources.ER_EXTENSION_FUNC_UNKNOWN,new Object[]{ns,funcName}));
    }
  }
  return result;
}

private synchronized void block(boolean tf){
  if (tf) {
    try {
      if (m_buildThread.isAlive() && m_state != IDLE) {
        wait();
      }
    }
 catch (    InterruptedException ex) {
    }
  }
 else {
    notifyAll();
  }
}

public Set<Resource> onClass(){
  Set<Resource> targets=new HashSet<>();
  for (  OwlClass c : qcClasses) {
    targets.add(c.getURI());
  }
  return targets;
}

public static int indexOfChars(String str,String chars,int fromIndex){
  final int len=str.length();
  for (int pos=fromIndex; pos < len; pos++) {
    if (chars.indexOf(str.charAt(pos)) >= 0) {
      return pos;
    }
  }
  return -1;
}

private synchronized void notifyZoomListeners(ZoomEvent e){
  for (  ZoomListener listener : mZoomListeners) {
    listener.zoomApplied(e);
  }
}

public static String buildStringFromLines(String... lines){
  int numChars=lines.length;
  for (  String line : lines) {
    numChars+=line.length();
  }
  StringBuilder builder=new StringBuilder(numChars);
  for (  String line : lines) {
    builder.append(line);
    builder.append('\n');
  }
  return builder.toString();
}

public void init(){
  if (mContext == null) {
    return;
  }
  if (mName.isEmpty()) {
    mName=mContext.getPackageName();
  }
  if (mMode == INVALID_VALUE || (mMode != MODE_PRIVATE && mMode != MODE_WORLD_READABLE && mMode != MODE_WORLD_WRITEABLE)) {
    mMode=MODE_PRIVATE;
  }
  mSharedPreferences=mContext.getSharedPreferences(mName,mMode);
}

@Override public void mergeAndOutputTransformationMetadata(Iterator<DistinctValue> values,String outputDir,int colID,FileSystem fs,TfUtils agents) throws IOException {
  double min=Double.MAX_VALUE;
  double max=-Double.MAX_VALUE;
  int nbins=0;
  DistinctValue val=new DistinctValue();
  String w=null;
  double d;
  while (values.hasNext()) {
    val.reset();
    val=values.next();
    w=val.getWord();
    if (w.startsWith(MIN_PREFIX)) {
      d=UtilFunctions.parseToDouble(w.substring(MIN_PREFIX.length()));
      if (d < min)       min=d;
    }
 else     if (w.startsWith(MAX_PREFIX)) {
      d=UtilFunctions.parseToDouble(w.substring(MAX_PREFIX.length()));
      if (d > max)       max=d;
    }
 else     if (w.startsWith(NBINS_PREFIX)) {
      nbins=(int)UtilFunctions.parseToLong(w.substring(NBINS_PREFIX.length()));
    }
 else     throw new RuntimeException("MVImputeAgent: Invalid prefix while merging map output: " + w);
  }
  double binwidth=(max - min) / nbins;
  writeTfMtd(colID,Double.toString(min),Double.toString(max),Double.toString(binwidth),Integer.toString(nbins),outputDir,fs,agents);
}

static SQLWarning convertShowWarningsToSQLWarnings(Connection connection) throws SQLException {
  return convertShowWarningsToSQLWarnings(connection,0,false);
}

public boolean hasEmptyRow(){
  if (m_dataVector.size() == 0) {
    return false;
  }
  List<String> dataRow=m_dataVector.get(m_dataVector.size() - 1);
  for (  String s : dataRow) {
    if (s.length() != 0) {
      return false;
    }
  }
  return true;
}

public synchronized byte[] toByteArray(){
  int remaining=count;
  if (remaining == 0) {
    return EMPTY_BYTE_ARRAY;
  }
  byte newbuf[]=new byte[remaining];
  int pos=0;
  for (  byte[] buf : buffers) {
    int c=Math.min(buf.length,remaining);
    System.arraycopy(buf,0,newbuf,pos,c);
    pos+=c;
    remaining-=c;
    if (remaining == 0) {
      break;
    }
  }
  return newbuf;
}

public Node selectSingleNode(Node contextNode,String str,Node namespaceNode) throws TransformerException {
  NodeIterator nl=selectNodeIterator(contextNode,str,namespaceNode);
  return nl.nextNode();
}

private static String javaScriptEscapeHelper(String s,boolean escapeToAscii){
  StringBuilder sb=new StringBuilder(s.length() * 9 / 8);
  for (int i=0; i < s.length(); i++) {
    char c=s.charAt(i);
switch (c) {
case '\n':
      sb.append("\\n");
    break;
case '\r':
  sb.append("\\r");
break;
case '\t':
sb.append("\\t");
break;
case '\\':
sb.append("\\\\");
break;
case '\"':
sb.append("\\\"");
break;
case '\'':
sb.append("\\\'");
break;
case '=':
appendHexJavaScriptRepresentation(sb,c);
break;
case '<':
case '/':
boolean isUnsafe=false;
for (String tag : UNSAFE_TAGS) {
if (s.regionMatches(true,i + 1,tag,0,tag.length())) {
isUnsafe=true;
break;
}
}
if (isUnsafe) {
appendHexJavaScriptRepresentation(sb,c);
}
 else {
sb.append(c);
}
break;
case '>':
if (sb.length() > 0 && sb.charAt(sb.length() - 1) == '-') {
sb.append('\\');
}
sb.append(c);
break;
case '\u2028':
sb.append("\\u2028");
break;
case '\u2029':
sb.append("\\u2029");
break;
default :
if (c >= 128 && escapeToAscii) {
appendHexJavaScriptRepresentation(sb,c);
}
 else {
sb.append(c);
}
}
}
return sb.toString();
}

public synchronized void add(String category,double value){
  mCategories.add(category);
  mValues.add(value);
}

public final void walkGraph(Hashtable semNodesTable){
  Integer uid=new Integer(myUID);
  if (semNodesTable.get(uid) != null)   return;
  semNodesTable.put(uid,this);
  if (assumeExpr != null) {
    assumeExpr.walkGraph(semNodesTable);
  }
  ;
}

private List<ValueComboBoxDataGroup> populateSymbolList(Class<?> panelDetails){
  List<ValueComboBoxDataGroup> combinedSymbolList=new ArrayList<ValueComboBoxDataGroup>();
  for (  FieldState panel : symbolTypeFieldList) {
    panel.populateSymbolList(panelDetails,combinedSymbolList);
  }
  return combinedSymbolList;
}

@Override public int hashCode(){
  long value=17;
  value+=37 * value + Double.doubleToLongBits(Math.abs(x));
  value+=37 * value + Double.doubleToLongBits(Math.abs(y));
  return (int)(value ^ (value >>> 32));
}

public void disconnect(){
  socket.disconnect();
}

protected void initComponentDefaults(UIDefaults table){
  super.initComponentDefaults(table);
  Color c=table.getColor("TextField.background");
  table.put("ComboBox.background",c);
  table.put("ComboBox.listBackground",c);
}

public int indexOfColumnName(String columnName){
  return columnNameList.indexOf(columnName.toLowerCase());
}

public boolean clear(T expect,boolean allowReset){
  sync.lock();
  try {
    if (expect != value) {
      return false;
    }
    ValueState prev=state;
    clear(allowReset);
    return prev == ValueState.SET;
  }
  finally {
    sync.unlock();
  }
}

public void copyStream(InputStream is) throws IOException {
  super.setContentEncoding(null);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  while (true) {
    int b=is.read();
    if (b == -1) {
      content=baos.toByteArray();
      is.close();
      return;
    }
  }
}

public void test_readResolve(){
  MockAttributedCharacterIteratorAttribute mac1=new MockAttributedCharacterIteratorAttribute("test");
  try {
    mac1.readResolve();
    fail("InvalidObjectException has not been thrown");
  }
 catch (  InvalidObjectException e) {
  }
  ObjectOutputStream out=null;
  ObjectInputStream in=null;
  try {
    ByteArrayOutputStream bytes=new ByteArrayOutputStream();
    out=new ObjectOutputStream(bytes);
    AttributedCharacterIterator.Attribute attr1, attr2;
    attr1=AttributedCharacterIterator.Attribute.LANGUAGE;
    out.writeObject(attr1);
    in=new ObjectInputStream(new ByteArrayInputStream(bytes.toByteArray()));
    try {
      attr2=(AttributedCharacterIterator.Attribute)in.readObject();
      assertSame("resolved incorrectly",attr1,attr2);
    }
 catch (    IllegalArgumentException e) {
      fail("Unexpected IllegalArgumentException: " + e);
    }
  }
 catch (  IOException e) {
    fail("unexpected IOException" + e);
  }
catch (  ClassNotFoundException e) {
    fail("unexpected ClassNotFoundException" + e);
  }
 finally {
    try {
      if (out != null)       out.close();
      if (in != null)       in.close();
    }
 catch (    IOException e) {
    }
  }
}

public void interrupt(){
  Thread t=threadVar.get();
  if (t != null) {
    t.interrupt();
  }
  threadVar.clear();
}

public final boolean isSecure(Socket sock) throws IllegalArgumentException {
  if (sock == null) {
    throw new IllegalArgumentException("Socket may not be null.");
  }
  if (sock.getClass() != Socket.class) {
    throw new IllegalArgumentException("Socket not created by this factory.");
  }
  if (sock.isClosed()) {
    throw new IllegalArgumentException("Socket is closed.");
  }
  return false;
}

protected boolean checkList(String currentVal,String tokenValue){
  if (currentVal == null || tokenValue == null) {
    throw new NullPointerException("Received null argument");
  }
  if (!currentVal.startsWith("INLIST") && !currentVal.startsWith("!INLIST")) {
    throw new IllegalArgumentException("currentVal does not start with INLIST or !INLIST");
  }
  boolean negation=currentVal.startsWith("!");
  String listName=currentVal.substring(currentVal.indexOf(":") + 1);
  Object listObj=listMap.get(listName);
  if (listObj == null)   return false;
  boolean contains;
  if (listObj instanceof Set) {
    Set<String> set=(Set)listObj;
    contains=set.contains(tokenValue);
  }
 else {
    throw new IllegalArgumentException("Unknown list representation: " + listObj);
  }
  return !(contains && negation || !contains && !negation);
}

public static synchronized void addNativeLibraryDependencies(String name,String... dependencyNames){
  List<String> list=libraryDependencies.get(name);
  if (list == null) {
    libraryDependencies.put(name,list=new ArrayList<String>());
  }
  for (  String dependencyName : dependencyNames) {
    if (!list.contains(dependencyName)) {
      list.add(dependencyName);
    }
  }
}

@Override protected boolean hasOverflow(FlatRStarTreeNode node){
  if (node.isLeaf()) {
    return node.getNumEntries() == leafCapacity;
  }
 else   if (node.getNumEntries() == node.getCapacity()) {
    node.increaseEntries();
  }
  return false;
}

public void processVolumeExpansion(StorageSystem storageSystem,URI storagePoolURI,URI volumeId,CIMArgument[] outArgs) throws Exception {
  StringBuilder logMsgBuilder=new StringBuilder(String.format("Processing volume expansion - "));
  CimConnection connection=_cimConnection.getConnection(storageSystem);
  WBEMClient client=connection.getCimClient();
  StoragePool storagePool=_dbClient.queryObject(StoragePool.class,storagePoolURI);
  StringMap reservationMap=storagePool.getReservedCapacityMap();
  reservationMap.remove(volumeId.toString());
  updateStoragePoolCapacity(client,storagePool);
  _dbClient.persistObject(storagePool);
  Volume volume=_dbClient.queryObject(Volume.class,volumeId);
  CIMObjectPath volumePath=(CIMObjectPath)_cimPath.getFromOutputArgs(outArgs,IBMSmisConstants.CP_THE_ELEMENT);
  boolean isSuccess=false;
  if (volumePath != null) {
    CIMInstance volumeInstance=client.getInstance(volumePath,true,false,null);
    if (volumeInstance != null) {
      isSuccess=true;
      volume.setProvisionedCapacity(getProvisionedCapacityInformation(volumeInstance));
      volume.setAllocatedCapacity(getAllocatedCapacityInformation(client,volumeInstance));
      _dbClient.persistObject(volume);
      logMsgBuilder.append(String.format("%n   Capacity: %s, Provisioned capacity: %s, Allocated Capacity: %s",volume.getCapacity(),volume.getProvisionedCapacity(),volume.getAllocatedCapacity()));
    }
  }
  if (!isSuccess) {
    UnsignedInteger32 returnCoede=(UnsignedInteger32)_cimPath.getFromOutputArgs(outArgs,IBMSmisConstants.CP_RETURN_CODE);
    logMsgBuilder.append("\n");
    logMsgBuilder.append(String.format("Failed to expand volume: %s with return code: %s",volume.getId(),returnCoede.toString()));
  }
  _log.info(logMsgBuilder.toString());
}

void updateFromNativeNode(Node node,boolean fromScratch) throws IIOInvalidTreeException {
  NamedNodeMap attrs=node.getAttributes();
  if (attrs.getLength() > 0) {
    int value=getAttributeValue(node,attrs,"majorVersion",0,255,false);
    majorVersion=(value != -1) ? value : majorVersion;
    value=getAttributeValue(node,attrs,"minorVersion",0,255,false);
    minorVersion=(value != -1) ? value : minorVersion;
    value=getAttributeValue(node,attrs,"resUnits",0,2,false);
    resUnits=(value != -1) ? value : resUnits;
    value=getAttributeValue(node,attrs,"Xdensity",1,65535,false);
    Xdensity=(value != -1) ? value : Xdensity;
    value=getAttributeValue(node,attrs,"Ydensity",1,65535,false);
    Ydensity=(value != -1) ? value : Ydensity;
    value=getAttributeValue(node,attrs,"thumbWidth",0,255,false);
    thumbWidth=(value != -1) ? value : thumbWidth;
    value=getAttributeValue(node,attrs,"thumbHeight",0,255,false);
    thumbHeight=(value != -1) ? value : thumbHeight;
  }
  if (node.hasChildNodes()) {
    NodeList children=node.getChildNodes();
    int count=children.getLength();
    if (count > 2) {
      throw new IIOInvalidTreeException("app0JFIF node cannot have > 2 children",node);
    }
    for (int i=0; i < count; i++) {
      Node child=children.item(i);
      String name=child.getNodeName();
      if (name.equals("JFXX")) {
        if ((!extSegments.isEmpty()) && fromScratch) {
          throw new IIOInvalidTreeException("app0JFIF node cannot have > 1 JFXX node",node);
        }
        NodeList exts=child.getChildNodes();
        int extCount=exts.getLength();
        for (int j=0; j < extCount; j++) {
          Node ext=exts.item(j);
          extSegments.add(new JFIFExtensionMarkerSegment(ext));
        }
      }
      if (name.equals("app2ICC")) {
        if ((iccSegment != null) && fromScratch) {
          throw new IIOInvalidTreeException("> 1 ICC APP2 Marker Segment not supported",node);
        }
        iccSegment=new ICCMarkerSegment(child);
      }
    }
  }
}

private void addBestTestSuite(File newlyGeneratedTestSuite){
  String testName=extractClassName(tmpTests,newlyGeneratedTestSuite);
  String path=testName.replace(".",File.separator) + ".java";
  File file=new File(getBestTestFolder() + File.separator + path);
  file.delete();
  try {
    FileUtils.copyFile(newlyGeneratedTestSuite,file);
  }
 catch (  IOException e) {
    logger.error("Failed to copy new generated test suite into the current best set: " + e.getMessage(),e);
  }
}

@Override public void createConnectionFactory(String name,boolean ha,boolean useDiscovery,int cfType,String connectors,String bindings) throws Exception {
  createConnectionFactory(name,ha,useDiscovery,cfType,toArray(connectors),toArray(bindings));
}

protected Object evaluateSingle(List elements,String expr){
  List array;
  if (elements instanceof java.util.Vector) {
    array=new java.util.Vector();
  }
 else {
    array=new ArrayList();
  }
  for (Iterator e=elements.iterator(); e.hasNext(); ) {
    Object o=e.next();
    if (o instanceof StructuredContent) {
      if ((o=evaluateSingle((StructuredContent)o,expr)) != null) {
        array.add(o);
      }
    }
  }
  if (array.size() == 1) {
    return (StructuredContent)array.get(0);
  }
  return array;
}

protected void onClose(){
}

private int doScale(int number,double factor){
  return (int)StrictMath.round(number * factor);
}

private int parseMessageId(final byte[] b,final int off) throws ParseException {
  final int messageIdLen=Constants.MESSAGE_ID_LEN;
  final int len=b.length - off;
  if (len >= messageIdLen) {
    messageId_=Arrays.copyOfRange(b,off,off + messageIdLen);
    return messageIdLen;
  }
 else {
    throw new ParseException("Not enough bytes to parse serial number");
  }
}

static void generateCharacterClass(String theTemplateFileName,String theOutputFileName) throws FileNotFoundException, IOException {
  BufferedReader in=new BufferedReader(new FileReader(theTemplateFileName));
  PrintWriter out=new PrintWriter(new BufferedWriter(new FileWriter(theOutputFileName)));
  out.println(commentStart + " This file was generated AUTOMATICALLY from a template file " + new java.util.Date()+ commentEnd);
  int marklen=commandMarker.length();
  LOOP:   while (true) {
    try {
      String line=in.readLine();
      if (line == null)       break LOOP;
      int pos=0;
      int depth=0;
      while ((pos=line.indexOf(commandMarker,pos)) >= 0) {
        int newpos=pos + marklen;
        char ch='x';
        SCAN:         while (newpos < line.length() && (Character.isJavaIdentifierStart(ch=line.charAt(newpos)) || ch == '(' || (ch == ')' && depth > 0))) {
          ++newpos;
          if (ch == '(') {
            ++depth;
          }
 else           if (ch == ')') {
            --depth;
            if (depth == 0)             break SCAN;
          }
        }
        String replacement=replaceCommand(line.substring(pos + marklen,newpos));
        line=line.substring(0,pos) + replacement + line.substring(newpos);
        pos+=replacement.length();
      }
      out.println(line);
    }
 catch (    IOException e) {
      break LOOP;
    }
  }
  in.close();
  out.close();
}

public static String combineExtensions(final String[] extensions){
  Check.notNull(extensions,"extensions");
  final StringBuffer ret=new StringBuffer();
  for (int i=0; i < extensions.length; i++) {
    if (i > 0) {
      ret.append(", ");
    }
    ret.append(extensions[i]);
  }
  return ret.toString();
}

public static void initializeProperties(String file) throws MissingResourceException {
  Properties props=new Properties();
  ResourceBundle bundle=ResourceBundle.getBundle(file);
  for (  String key : bundle.keySet()) {
    props.put(key,bundle.getString(key));
  }
  initializeProperties(props,false,false);
}

private E unlinkFirst(){
  Node<E> f=first;
  if (f == null)   return null;
  Node<E> n=f.next;
  E item=f.item;
  f.item=null;
  f.next=f;
  first=n;
  if (n == null)   last=null;
 else   n.prev=null;
  --count;
  notFull.signal();
  return item;
}

private String tweakNativeLaunchUri(String uri,boolean forDebugging,LaunchInfo launchInfo) throws IOException, FileNotFoundException {
  if (launchInfo.isHttpOrAbout()) {
    boolean modify=(getPreference(PREF_URI_MODIFICATION) != 0);
    if (modify && forDebugging && !launchInfo.isAbout()) {
      uri=URLHelper.escapeSpace(uri);
      URLHelper urlHelper=new URLHelper(uri);
      Map<String,String> params=urlHelper.getParameterMap();
      params.put("debug","true");
      urlHelper.setParameterMap(params);
      uri=urlHelper.getURL();
    }
  }
 else {
    File f=null;
    if (uri.startsWith("file:")) {
      try {
        f=new File(new URI(uri));
      }
 catch (      URISyntaxException e) {
        IOException ioe=new IOException(e.getMessage());
        ioe.initCause(e);
        throw ioe;
      }
    }
 else {
      f=new File(uri);
    }
    if (f != null && f.exists()) {
      uri=f.getAbsolutePath();
    }
 else {
      throw new FileNotFoundException(uri);
    }
  }
  return uri;
}

public void addListener(final Listener listener){
  listeners.add(listener);
}

public List<T> queryAsList(){
  QuantumFluxCursor<T> cursor=queryAsCursor();
  try {
    List<T> resultList=new ArrayList<>(cursor.getCount());
    while (cursor.moveToNext()) {
      resultList.add(cursor.inflate());
    }
    return resultList;
  }
  finally {
    if (cursor != null)     cursor.close();
  }
}

@Override public void profile(){
  recordStats();
}

public static void touch(File file) throws IOException {
  if (!file.exists()) {
    OutputStream out=openOutputStream(file);
    IOUtils.closeQuietly(out);
  }
  boolean success=file.setLastModified(System.currentTimeMillis());
  if (!success) {
    throw new IOException("Unable to set the last modification time for " + file);
  }
}

public boolean isEmpty(){
  return extOrdering.isEmpty();
}

public static byte[] ivCipherConcat(byte[] iv,byte[] cipherText){
  byte[] combined=new byte[iv.length + cipherText.length];
  System.arraycopy(iv,0,combined,0,iv.length);
  System.arraycopy(cipherText,0,combined,iv.length,cipherText.length);
  return combined;
}

public static final void saveInstanceIdentifier(String confPath,String instanceIdentifier) throws Exception {
  Path file=Paths.get(confPath,INSTANCE_IDENTIFIER_FILE);
  log.trace("Saving instance identifier to {}",file);
  AtomicSave.execute(file.toString(),"inst",instanceIdentifier.getBytes(StandardCharsets.UTF_8));
}

Part(String contents,String property) throws Exception {
  this.contents=" " + contents;
  this.property=property;
  simplify();
}

public static boolean isSame(Object s1,Object s2){
  if (s1 == s2)   return true;
  if (X.isEmpty(s1) && X.isEmpty(s2))   return true;
  if (s1 != null) {
    return s1.equals(s2);
  }
  return false;
}

public static double standardDeviation(double variance){
  return Math.sqrt(variance);
}

public static int frequencyToMIDINote(double aFrequency){
  double r=1.05946309436;
  double ref=523.251;
  int supinf=0;
  int i=0;
  double hautnb=1;
  double ref1=0;
  double ref2=0;
  double flag=0;
  int nmidi=72;
  while (aFrequency < ref) {
    ref=Math.floor(1000 * ref / r) / 1000;
    i=i + 1;
    supinf=-1;
    flag=1;
    ref1=ref;
  }
  while (aFrequency > ref) {
    ref=Math.floor(1000 * ref * r) / 1000;
    i=i - 1;
    supinf=1;
    ref2=ref;
  }
  if (Math.abs(aFrequency - ref1) < Math.abs(aFrequency - ref2)) {
    supinf=-1;
    i=i + 1;
  }
 else {
    if (flag == 1)     supinf=-1;
  }
  if (ref1 == 0) {
    ref1=Math.floor(1000 * ref / r) / 1000;
    if (Math.abs(aFrequency - ref1) < Math.abs(aFrequency - ref2)) {
      i=i + 1;
      supinf=1;
    }
  }
  i=Math.abs(i);
  while (i-- != 0) {
    if ((hautnb == 1 && supinf == -1) || (hautnb == 12 && supinf == 1)) {
      if (supinf == 1)       hautnb=0;
      if (supinf == -1)       hautnb=13;
    }
    hautnb=hautnb + supinf;
    nmidi=nmidi + supinf;
  }
  return nmidi;
}

private void writeAttribute(java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (namespace.equals("")) {
    xmlWriter.writeAttribute(attName,attValue);
  }
 else {
    registerPrefix(xmlWriter,namespace);
    xmlWriter.writeAttribute(namespace,attName,attValue);
  }
}

public void recordGCVersions(RegionVersionVector<T> other){
  assert other.memberToGCVersion != null : "incoming gc version set is null";
  recordGCVersion(other.myId,other.localGCVersion.get());
  for (  Map.Entry<T,Long> entry : other.memberToGCVersion.entrySet()) {
    recordGCVersion(entry.getKey(),entry.getValue().longValue());
  }
}

boolean waitForState(Processor p,int state){
synchronized (waitSync) {
    try {
      while (p.getState() < state && stateTransitionOK)       waitSync.wait();
    }
 catch (    Exception e) {
    }
  }
  return stateTransitionOK;
}

private static boolean extractFile(Context c,String rootAsset,String path){
  AssetManager assetManager=c.getAssets();
  InputStream in=null;
  OutputStream out=null;
  try {
    in=assetManager.open(rootAsset + path);
    String fullPath=PrefStore.getEnvDir(c) + path;
    out=new FileOutputStream(fullPath);
    byte[] buffer=new byte[1024];
    int read;
    while ((read=in.read(buffer)) != -1) {
      out.write(buffer,0,read);
    }
    out.flush();
  }
 catch (  IOException e) {
    e.printStackTrace();
    return false;
  }
 finally {
    close(in);
    close(out);
  }
  return true;
}

protected int never(){
synchronized (sleepLock) {
    while (running) {
      try {
        sleepLock.wait(60 * 60 * 1000L);
      }
 catch (      InterruptedException e) {
        continue;
      }
    }
    return 0;
  }
}

public boolean verify(X509Certificate cert,Provider sigProvider) throws NoSuchAlgorithmException, CertificateExpiredException, CertificateNotYetValidException, CMSException {
  Time signingTime=getSigningTime();
  if (signingTime != null) {
    cert.checkValidity(signingTime.getDate());
  }
  return doVerify(cert.getPublicKey(),sigProvider);
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return MESSAGE_TYPE;
case 2:
  return REQUEST_INFO;
case 3:
return RESPONSE_INFO;
case 4:
return TRACE_INFO;
case 5:
return GLOBAL_CONTEXT;
case 6:
return LOCAL_CONTEXT;
case 7:
return HEARTBEAT_INFO;
default :
return null;
}
}

protected void loadHistory(boolean set){
  BufferedInputStream str;
  File file;
  int width;
  int height;
  try {
    file=new File(getHistoryFilename());
    if (file.exists()) {
      str=new BufferedInputStream(new FileInputStream(getHistoryFilename()));
      m_History.load(str);
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  if (set) {
    m_ConnectionPanel.setHistory(stringToModel(m_History.getProperty(ConnectionPanel.HISTORY_NAME,"")));
    m_QueryPanel.setHistory(stringToModel(m_History.getProperty(QueryPanel.HISTORY_NAME,"")));
    m_QueryPanel.setMaxRows(Integer.parseInt(m_History.getProperty(QueryPanel.MAX_ROWS,"100")));
    width=Integer.parseInt(m_History.getProperty(WIDTH,"0"));
    height=Integer.parseInt(m_History.getProperty(HEIGHT,"0"));
    if ((width != 0) && (height != 0)) {
      setPreferredSize(new Dimension(width,height));
    }
  }
}

private void updatePanelForExpansion(float percentage){
  updatePromoVisibility(1.f);
  float baseBaseY=MathUtils.interpolate(0.f,getBasePageTargetY(),percentage);
  mBasePageY=baseBaseY;
  float brightness=MathUtils.interpolate(BASE_PAGE_BRIGHTNESS_STATE_PEEKED,BASE_PAGE_BRIGHTNESS_STATE_EXPANDED,percentage);
  mBasePageBrightness=brightness;
  float searchBarHeight=Math.round(MathUtils.interpolate(mSearchBarHeightPeeking,getSearchBarHeightExpanded(),percentage));
  mSearchBarHeight=searchBarHeight;
  mSearchBarTextOpacity=1.f;
  mIsSearchBarBorderVisible=true;
  mSearchBarBorderY=searchBarHeight - SEARCH_BAR_BORDER_HEIGHT_DP + 1;
  mSearchIconOpacity=SEARCH_ICON_OPACITY_STATE_EXPANDED;
  mArrowIconOpacity=ARROW_ICON_OPACITY_STATE_EXPANDED;
  mArrowIconRotation=Math.round(MathUtils.interpolate(ARROW_ICON_ROTATION_STATE_PEEKED,ARROW_ICON_ROTATION_STATE_EXPANDED,percentage));
  mCloseIconOpacity=CLOSE_ICON_OPACITY_STATE_EXPANDED;
  float peekedHeight=getPanelHeightFromState(PanelState.PEEKED);
  float threshold=PROGRESS_BAR_VISIBILITY_THRESHOLD_DP / mPxToDp;
  float diff=Math.min(mHeight - peekedHeight,threshold);
  float progressBarOpacity=MathUtils.interpolate(0.f,1.f,diff / threshold);
  mProgressBarOpacity=progressBarOpacity;
  mProgressBarY=searchBarHeight - PROGRESS_BAR_HEIGHT_DP + 1;
  updateSearchBarShadow();
}

protected boolean[] updateableClusterer(){
  boolean[] result=new boolean[2];
  print("updateable clusterer...");
  if (m_Clusterer instanceof UpdateableClusterer) {
    println("yes");
    result[0]=true;
  }
 else {
    println("no");
    result[0]=false;
  }
  return result;
}

@Override protected int sizeOf(String key,BitmapDrawable value){
  final int bitmapSize=getBitmapSize(value) / 1024;
  return bitmapSize == 0 ? 1 : bitmapSize;
}

public void addField(MappedMember mm){
  fields.add(mm);
}

public static List<BaseMqttMessage> readAndConvertMessageLog(final File selectedFile) throws SpyException {
  final List<String> lines=FileUtils.readFileAsLines(selectedFile);
  logger.info("Message audit log - read {} messages from {}",lines.size(),selectedFile.getAbsoluteFile());
  return processMessageLog(parseMessageLog(lines,null,0,0),null,0,0);
}

void readStream(InputStream is) throws Exception {
  String line;
  Date start=new Date();
  BufferedReader reader=new BufferedReader(new InputStreamReader(is));
  while ((line=reader.readLine()) != null && !mStop) {
    mResults.append(line);
    mResults.append(Tools.LineSep);
    Date end=new Date();
    if ((end.getTime() - start.getTime()) / 1000 > 10 || mResults.length() > 5000) {
      start=end;
      int last=mResults.lastIndexOf("\n");
      if (last != -1) {
        XmppMsg msg=new XmppMsg(_font);
        msg.append(mResults.substring(0,last + 1));
        mCmdBase.send(mShellId,msg);
        mResults.setLength(0);
      }
    }
  }
}

public static boolean isValidName(String name){
  if (name == null) {
    return false;
  }
  return name.length() > 3;
}

public void removeParentRelation(long osmId){
  if (parentRelations != null) {
    ArrayList<Relation> tempRelList=new ArrayList<Relation>(parentRelations);
    for (    Relation r : tempRelList) {
      if (osmId == r.getOsmId())       parentRelations.remove(r);
    }
  }
}

public final void test_ROUNDTRIP_GetKeySpecCipher01(){
  boolean performed=false;
  for (int i=0; i < algName.length; i++) {
    try {
      TestDataGenerator g=new TestDataGenerator(algName[i][0],algName[i][1],privateKeyInfo,null);
      EncryptedPrivateKeyInfo epki;
      if (g.ap() == null) {
        epki=new EncryptedPrivateKeyInfo(algName[i][0],g.ct());
      }
 else {
        epki=new EncryptedPrivateKeyInfo(g.ap(),g.ct());
      }
      try {
        PKCS8EncodedKeySpec eks=epki.getKeySpec(g.c());
        if (!Arrays.equals(privateKeyInfo,eks.getEncoded())) {
          fail(algName[i][0] + " != " + algName[i][1]);
        }
      }
 catch (      InvalidKeySpecException e) {
        fail(algName[i][0] + ", " + algName[i][1]+ e+ "\n");
      }
      performed=true;
    }
 catch (    TestDataGenerator.AllowedFailure allowedFailure) {
    }
catch (    NoSuchAlgorithmException allowed) {
    }
  }
  assertTrue("Test not performed",performed);
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

void insert(V val,K key){
  ArrayList<K> list=map.get(val);
  if (list == null) {
    list=new ArrayList<K>(4);
    map.put(cloneValue(val),list);
  }
  list.add(key);
}

public ServerSocket createServerSocket(int nport,int backlog) throws IOException {
  return createServerSocket(nport,backlog,null);
}

public static ArrayList<Integer> convertStringArrayToIntegerArray(List<String> arrayList){
  ArrayList<Integer> integers=new ArrayList<>();
  for (  String str : arrayList) {
    integers.add(Integer.valueOf(str));
  }
  return integers;
}

@Override public void unwrapSSLv2(byte[] bytes){
  unexpectedMessage();
}

public static String buildSelectorFromClass(String classValue){
  StringBuilder strb=new StringBuilder();
  strb.append(CLASS_SELECTOR_PREFIX);
  strb.append(classValue);
  return strb.toString();
}

public void ensureCapacity(int minimumCapacity){
  if (minimumCapacity > value.length) {
    int ourMin=value.length * 2 + 2;
    enlargeBuffer(Math.max(ourMin,minimumCapacity));
  }
}

public String poolFooterStatements(){
  StringBuilder sb=new StringBuilder();
  for (  String footerStatement : footerStatements) {
    sb.append("\n");
    sb.append(footerStatement);
    sb.append("\n");
  }
  footerStatements.clear();
  return sb.toString();
}

private void handleNodeQueue(SerialMessage incomingMessage){
  if (currentStage == ZWaveNodeInitStage.DONE) {
    return;
  }
  logger.debug("NODE {}: Node advancer - checking initialisation queue. Queue size {}.",node.getNodeId(),msgQueue.size());
  if (msgQueue.contains(incomingMessage)) {
    msgQueue.remove(incomingMessage);
    logger.debug("NODE {}: Node advancer - message removed from queue. Queue size {}.",node.getNodeId(),msgQueue.size());
    freeToSend=true;
    advanceNodeStage(incomingMessage.getMessageClass());
  }
 else   if (msgQueue.isEmpty() && currentStage == ZWaveNodeInitStage.SECURITY_REPORT) {
    logger.debug("NODE {}: Node advancer - In Security stage, going to advanceNodeStage to get next request.",node.getNodeId());
    advanceNodeStage(incomingMessage.getMessageClass());
  }
}

public static Predicate<String> matches(final String regexp){
  Objects.requireNonNull(regexp,"The regexp must not be null");
  return null;
}

public boolean hasSet(String name){
  return m_map.containsKey(name);
}

public void or(Criteria criteria){
  oredCriteria.add(criteria);
}

public void clearParsers(){
  timer.stop();
  clearParserNoticeHighlights();
  parsers.clear();
  textArea.fireParserNoticesChange();
}

protected PropertyDefinition(AbstractManagedObjectDefinition<?,?> d,Class<T> theClass,String propertyName,EnumSet<PropertyOption> options,AdministratorAction adminAction,DefaultBehaviorProvider<T> defaultBehavior){
  Reject.ifNull(d,theClass,propertyName,options,adminAction,defaultBehavior);
  this.definition=d;
  this.theClass=theClass;
  this.propertyName=propertyName;
  this.options=EnumSet.copyOf(options);
  this.adminAction=adminAction;
  this.defaultBehavior=defaultBehavior;
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

private static IMultiPoint[] randomPoints(int n,int d,int scale){
  IMultiPoint points[]=new IMultiPoint[n];
  for (int i=0; i < n; i++) {
    StringBuilder sb=new StringBuilder();
    for (int j=0; j < d; j++) {
      sb.append(rGen.nextDouble() * scale);
      if (j < d - 1) {
        sb.append(",");
      }
    }
    points[i]=new Hyperpoint(sb.toString());
  }
  return points;
}

public DateTimeParseException(String message,CharSequence parsedData,int errorIndex,Throwable cause){
  super(message,cause);
  this.parsedString=parsedData.toString();
  this.errorIndex=errorIndex;
}

public ConfigureXmlAttributeCountDialog_NB(XmlAttributeCount xmlAttributeCount){
  this.xmlAttributeCount=xmlAttributeCount;
  initComponents();
  final IterateModel numberOfTagsIterator=xmlAttributeCount.getNumberOfAttributesIterator();
  configureIterateModel_NB2.setStartAt(String.valueOf(numberOfTagsIterator.getStartAt()));
  configureIterateModel_NB2.setStopAt(String.valueOf(numberOfTagsIterator.getStopAt()));
  configureIterateModel_NB2.setIncrement(String.valueOf(numberOfTagsIterator.getIncrement()));
  configureIterateModel_NB2.setIterateStrategie(numberOfTagsIterator.getIterateStrategie());
  List<String> names=Arrays.asList(xmlAttributeCount.getNames());
  configureStringList_NB1.setStringList(names);
}

public static void checkArgument(boolean expression,@Nullable Object errorMessage){
  if (!expression) {
    throw new IllegalArgumentException(String.valueOf(errorMessage));
  }
}

public void onMenuDismissed(){
  mReloadMenuItem=null;
}

public static Thread consumeProcessOutputStream(Process self,OutputStream output){
  Thread thread=new Thread(new ByteDumper(self.getInputStream(),output));
  thread.start();
  return thread;
}

public static Angle greatCircleAzimuth(LatLon p1,LatLon p2){
  if ((p1 == null) || (p2 == null)) {
    throw new IllegalArgumentException("Lat Lon Is Null");
  }
  double lat1=p1.getLatitude().radians;
  double lon1=p1.getLongitude().radians;
  double lat2=p2.getLatitude().radians;
  double lon2=p2.getLongitude().radians;
  if (lat1 == lat2 && lon1 == lon2)   return Angle.ZERO;
  if (lon1 == lon2)   return lat1 > lat2 ? Angle.POS180 : Angle.ZERO;
  double y=Math.cos(lat2) * Math.sin(lon2 - lon1);
  double x=Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);
  double azimuthRadians=Math.atan2(y,x);
  return Double.isNaN(azimuthRadians) ? Angle.ZERO : Angle.fromRadians(azimuthRadians);
}

public void delete() throws IOException {
  close();
  Util.deleteContents(directory);
}

public void addAllTagsOf(Host h){
  List<Tag> tags=h.getTags();
  if (tags.isEmpty())   return;
  if (mTagList == null) {
    mTagList=new ArrayList<Tag>(tags.size());
  }
  mTagList.addAll(tags);
}

public static boolean isNumbersWithPunctuation(String token){
  boolean hasDigit=false;
  int len=token.length();
  for (int i=0; i < len; ++i) {
    char c=token.charAt(i);
    hasDigit=hasDigit || Character.isDigit(c);
    if (!(Character.isDigit(c) || Characters.isPunctuation(c))) {
      return false;
    }
  }
  return hasDigit;
}

private boolean isPaintLineSeperators(JComponent c){
  boolean paintLines=c instanceof JTextArea;
  String globalOverride=System.getProperty("SeaGlass.JTextArea.drawLineSeparator");
  if (globalOverride != null && globalOverride.length() > 0) {
    paintLines=Boolean.valueOf(globalOverride);
  }
  Boolean overrideProperty=(Boolean)c.getClientProperty("SeaGlass.JTextArea.drawLineSeparator");
  if (overrideProperty != null) {
    paintLines=overrideProperty;
  }
  return paintLines;
}

public static Db open(DataSource ds){
  try {
    return new Db(ds.getConnection());
  }
 catch (  SQLException e) {
    throw convert(e);
  }
}

@Override public void basicPutPart3(EntryEventImpl event,RegionEntry entry,boolean isInitialized,long lastModified,boolean invokeCallbacks,boolean ifNew,boolean ifOld,Object expectedOldValue,boolean requireOldValue){
  distributeUpdate(event,lastModified,false,false,null,false);
  super.basicPutPart3(event,entry,isInitialized,lastModified,invokeCallbacks,ifNew,ifOld,expectedOldValue,requireOldValue);
}

public LanguageRange(String range){
  this.range=range.split("-");
  full=range;
}

protected void removeContainer() throws Throwable {
  if (containerId == null) {
    return;
  }
  sendDeleteContainerRequest();
  waitForPropertyValue(provisioningTaskLink,MockTaskState.class,"taskInfo.stage",TaskState.TaskStage.FINISHED);
  if (!isMockTarget()) {
    Thread.sleep(2000L);
  }
  verifyContainerDoesNotExist(containerId);
}

public int size(){
  return list.size();
}

public TransformerHandler newTransformerHandler(Templates templates) throws TransformerConfigurationException {
  try {
    TransformerImpl transformer=(TransformerImpl)templates.newTransformer();
    transformer.setURIResolver(m_uriResolver);
    TransformerHandler th=(TransformerHandler)transformer.getInputContentHandler(true);
    return th;
  }
 catch (  TransformerConfigurationException ex) {
    if (m_errorListener != null) {
      try {
        m_errorListener.fatalError(ex);
        return null;
      }
 catch (      TransformerConfigurationException ex1) {
        throw ex1;
      }
catch (      TransformerException ex1) {
        throw new TransformerConfigurationException(ex1);
      }
    }
    throw ex;
  }
}

public void addField(FieldRef fref){
  mFieldRefs.add(fref);
}

public String render(ValueExpr theExpr) throws Exception {
  reset();
  theExpr.visit(this);
  return mBuffer.toString();
}

public void add(final Vector2D[] bLoop) throws MathIllegalArgumentException {
  add(new NestedLoops(bLoop,tolerance));
}

@NotNull public static <T>List<T> asList(@Nullable final Collection<?> expression,@NotNull final Class<T> elementClass){
  if ((expression == null) || expression.isEmpty()) {
    return Collections.emptyList();
  }
  final List<T> result=new ArrayList<T>();
  for (  final Object element : expression) {
    final T toAdd=as(element,elementClass);
    if (toAdd != null) {
      result.add(toAdd);
    }
  }
  return result;
}

public static String readAsciiLine(InputStream in) throws IOException {
  StringBuilder result=new StringBuilder(80);
  while (true) {
    int c=in.read();
    if (c == -1) {
      throw new EOFException();
    }
 else     if (c == '\n') {
      break;
    }
    result.append((char)c);
  }
  int length=result.length();
  if (length > 0 && result.charAt(length - 1) == '\r') {
    result.setLength(length - 1);
  }
  return result.toString();
}

private void startNewTransition(){
  if (!hasBounds()) {
    return;
  }
  mCurrentTrans=mTransGen.generateNextTransition(mDrawableRect,mViewportRect);
  mElapsedTime=0;
  mLastFrameTime=System.currentTimeMillis();
  fireTransitionStart(mCurrentTrans);
}

@Override protected void makeFinished(){
  byte[] verify_data;
  if (serverHello.server_version[1] == 1) {
    verify_data=new byte[12];
    computerVerifyDataTLS("client finished",verify_data);
  }
 else {
    verify_data=new byte[36];
    computerVerifyDataSSLv3(SSLv3Constants.client,verify_data);
  }
  clientFinished=new Finished(verify_data);
  send(clientFinished);
  if (isResuming) {
    session.lastAccessedTime=System.currentTimeMillis();
    status=FINISHED;
  }
 else {
    if (serverHello.server_version[1] == 1) {
      computerReferenceVerifyDataTLS("server finished");
    }
 else {
      computerReferenceVerifyDataSSLv3(SSLv3Constants.server);
    }
    status=NEED_UNWRAP;
  }
}

public static File removeExtension(File file){
  String absolutePath=file.getAbsolutePath();
  if (absolutePath.contains(".")) {
    return new File(absolutePath.substring(0,absolutePath.lastIndexOf('.')));
  }
 else {
    return file;
  }
}

public void update(){
  if (bgIsOpaque) {
    int w=Math.max(getSize().width,minWidth);
    int h=Math.max(getSize().height,minHeight);
    offScr=createImage(w,h);
    if (offScr == null)     return;
    Graphics g=offScr.getGraphics();
    drawInto(g);
    repaint();
    g.dispose();
  }
 else {
    repaint();
  }
}

public static final int readInt(InputStream is) throws IOException {
  return (((0xFF & is.read()) << 8) | (0xFF & is.read()));
}

private void saveDynamicActions(FacesContext context,StateContext stateContext,Map<String,Object> stateMap){
  if (LOGGER.isLoggable(Level.FINEST)) {
    LOGGER.finest("FaceletPartialStateManagementStrategy.saveDynamicActions");
  }
  List<ComponentStruct> actions=stateContext.getDynamicActions();
  HashMap<String,UIComponent> componentMap=stateContext.getDynamicComponents();
  if (actions != null) {
    List<Object> savedActions=new ArrayList<>(actions.size());
    for (    ComponentStruct action : actions) {
      UIComponent component=componentMap.get(action.clientId);
      if (component == null && context.isProjectStage(ProjectStage.Development)) {
        LOGGER.log(Level.WARNING,"Unable to save dynamic action with clientId ''{0}'' because the UIComponent cannot be found",action.clientId);
      }
      if (component != null) {
        savedActions.add(action.saveState(context));
      }
    }
    stateMap.put(DYNAMIC_ACTIONS,savedActions);
  }
}

private Instance generateExample(Instances format,Random randomG,SubspaceClusterDefinition cl,String cName){
  boolean makeInteger=cl.isInteger();
  int num=-1;
  Instance example=null;
  int numAtts=m_NumAttributes;
  if (getClassFlag()) {
    numAtts++;
  }
  example=new DenseInstance(numAtts);
  example.setDataset(format);
  boolean[] attributes=cl.getAttributes();
  double[] minValue=cl.getMinValue();
  double[] maxValue=cl.getMaxValue();
  double value;
  int clusterI=-1;
  for (int i=0; i < m_NumAttributes; i++) {
    if (attributes[i]) {
      clusterI++;
      num++;
      if (isBoolean(i) || isNominal(i)) {
        if (minValue[clusterI] == maxValue[clusterI]) {
          value=minValue[clusterI];
        }
 else {
          int numValues=(int)(maxValue[clusterI] - minValue[clusterI] + 1.0);
          value=randomG.nextInt(numValues);
          value+=minValue[clusterI];
        }
      }
 else {
        value=randomG.nextDouble() * (maxValue[num] - minValue[num]) + minValue[num];
        if (makeInteger) {
          value=Math.round(value);
        }
      }
      example.setValue(i,value);
    }
 else {
      example.setMissing(i);
    }
  }
  if (getClassFlag()) {
    example.setClassValue(cName);
  }
  return example;
}

@Override public long skip(long n){
  if (n < 0) {
    throw new IllegalArgumentException("Number of characters to skip is less than zero: " + n);
  }
  if (idx >= charSequence.length()) {
    return -1;
  }
  int dest=(int)Math.min(charSequence.length(),idx + n);
  int count=dest - idx;
  idx=dest;
  return count;
}

@Override public void clear(){
  if (elementCount > 0) {
    elementCount=0;
    Arrays.fill(elementData,null);
    modCount++;
    while (referenceQueue.poll() != null) {
    }
  }
}

public DefaultConsolePanel(){
  setLayout(new BorderLayout(0,0));
  textPane=new JTextArea();
  textPane.setRows(5);
  textPane.setEditable(false);
  JScrollPane jp=new JScrollPane(textPane);
  add(jp,BorderLayout.CENTER);
}

public void push(){
  level.add(null);
  cloned=false;
}

private static void loadPluginsFromClassLoader(ClassLoader classLoader){
  ServiceLoader<GDSFactoryPlugin> pluginLoader=ServiceLoader.load(GDSFactoryPlugin.class,classLoader);
  for (  GDSFactoryPlugin plugin : pluginLoader) {
    registerPlugin(plugin);
  }
}

private boolean checkTouchSlop(View child,float dx,float dy){
  if (child == null) {
    return false;
  }
  final boolean checkHorizontal=mCallback.getViewHorizontalDragRange(child) > 0;
  final boolean checkVertical=mCallback.getViewVerticalDragRange(child) > 0;
  if (checkHorizontal && checkVertical) {
    return dx * dx + dy * dy > mTouchSlop * mTouchSlop;
  }
 else   if (checkHorizontal) {
    return Math.abs(dx) > mTouchSlop;
  }
 else   if (checkVertical) {
    return Math.abs(dy) > mTouchSlop;
  }
  return false;
}

public String redo(){
  if (!canRedo()) {
    return "";
  }
  m_nCurrentEditAction++;
  UndoAction undoAction=m_undoStack.get(m_nCurrentEditAction);
  m_bNeedsUndoAction=false;
  undoAction.redo();
  m_bNeedsUndoAction=true;
  return undoAction.getRedoMsg();
}

private float interpolate(){
  long currTime=System.currentTimeMillis();
  float elapsed=(currTime - startTime) / ZOOM_TIME;
  elapsed=Math.min(1f,elapsed);
  return interpolator.getInterpolation(elapsed);
}

@Override public Writer append(CharSequence value){
  builder.append(value);
  return this;
}

@Override public InetSocketAddress ipLocal(){
  SocketChannel s=_channel;
  if (s != null) {
    try {
      return (InetSocketAddress)s.getLocalAddress();
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
 else {
    return null;
  }
}

@Nonnull private static NodeDisk findNodeDisk(String diskId,List<NodeDisk> nodeDisks,String nodeName) throws IOException {
  NodeDisk selected=null;
  for (  NodeDisk nodeDisk : nodeDisks) {
    if (diskId.equals(nodeDisk.getDiskRefId())) {
      selected=nodeDisk;
      break;
    }
  }
  if (selected == null) {
    String message=format("The Node '%s' config does not have defined any Disk Ref ID '%s'",nodeName,diskId);
    throw new AbortException(message);
  }
  if (selected.getNodeMountPoint() == null) {
    String message=format("The Node '%s' config does not have defined any node mount point for Disk Ref ID '%s'",nodeName,diskId);
    throw new AbortException(message);
  }
  return selected;
}

private int stripMultipartHeaders(byte[] b,int offset){
  int i=0;
  for (i=offset; i < b.length; i++) {
    if (b[i] == '\r' && b[++i] == '\n' && b[++i] == '\r' && b[++i] == '\n')     break;
  }
  return i + 1;
}

void seek(int position) throws IOException {
  mDexFile.seek(position);
}

@Override public List<Column> columns(){
  return columnList;
}

public static void writeFloat(DataOutputStream dos,boolean isBigEndian,float val) throws IOException {
  if (!isBigEndian) {
    writeLittleEndianFloat(dos,val);
  }
 else {
    dos.writeFloat(val);
  }
}

public void testFlipBitPositiveInside1(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int number=15;
  byte rBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,-93,26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.flipBit(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public static void main(String[] args){
  Log.printLine("Starting CloudSimExample3...");
  try {
    int num_user=1;
    Calendar calendar=Calendar.getInstance();
    boolean trace_flag=false;
    CloudSim.init(num_user,calendar,trace_flag);
    @SuppressWarnings("unused") Datacenter datacenter0=createDatacenter("Datacenter_0");
    DatacenterBroker broker=createBroker();
    int brokerId=broker.getId();
    vmlist=new ArrayList<Vm>();
    int vmid=0;
    int mips=250;
    long size=10000;
    int ram=2048;
    long bw=1000;
    int pesNumber=1;
    String vmm="Xen";
    Vm vm1=new Vm(vmid,brokerId,mips,pesNumber,ram,bw,size,vmm,new CloudletSchedulerTimeShared());
    vmid++;
    Vm vm2=new Vm(vmid,brokerId,mips * 2,pesNumber,ram,bw,size,vmm,new CloudletSchedulerTimeShared());
    vmlist.add(vm1);
    vmlist.add(vm2);
    broker.submitVmList(vmlist);
    cloudletList=new ArrayList<Cloudlet>();
    int id=0;
    long length=40000;
    long fileSize=300;
    long outputSize=300;
    UtilizationModel utilizationModel=new UtilizationModelFull();
    Cloudlet cloudlet1=new Cloudlet(id,length,pesNumber,fileSize,outputSize,utilizationModel,utilizationModel,utilizationModel);
    cloudlet1.setUserId(brokerId);
    id++;
    Cloudlet cloudlet2=new Cloudlet(id,length,pesNumber,fileSize,outputSize,utilizationModel,utilizationModel,utilizationModel);
    cloudlet2.setUserId(brokerId);
    cloudletList.add(cloudlet1);
    cloudletList.add(cloudlet2);
    broker.submitCloudletList(cloudletList);
    broker.bindCloudletToVm(cloudlet1.getCloudletId(),vm1.getId());
    broker.bindCloudletToVm(cloudlet2.getCloudletId(),vm2.getId());
    CloudSim.startSimulation();
    List<Cloudlet> newList=broker.getCloudletReceivedList();
    CloudSim.stopSimulation();
    printCloudletList(newList);
    Log.printLine("CloudSimExample3 finished!");
  }
 catch (  Exception e) {
    e.printStackTrace();
    Log.printLine("The simulation has been terminated due to an unexpected error");
  }
}

public static Instruction _osrHelper(Instruction barrier,GenerationContext gc){
  Instruction inst=OsrPoint.create(YIELDPOINT_OSR,null,0);
  gc.saveOSRBarrierForInst(barrier,inst);
  return inst;
}

protected void initializeState(S current){
  InitializationUtils.initialize(current);
  if (current.documentExpirationTimeMicros <= 0) {
    current.documentExpirationTimeMicros=ServiceUtils.computeExpirationTime(ServiceUtils.DEFAULT_DOC_EXPIRATION_TIME_MICROS);
  }
}

@SuppressWarnings("unchecked") public InputStream fetchVolumeStats(final Argument argument,final Map<String,Object> keyMap,int index) throws VNXFilePluginException {
  _logger.info("Creating volume stats query");
  InputStream iStream=null;
  List<QueryStats> statList=new ArrayList<QueryStats>();
  try {
    Set<String> movers=(Set<String>)keyMap.get(VNXFileConstants.MOVERLIST);
    if (null != movers && !movers.isEmpty()) {
      for (      String moverID : movers) {
        QueryStats queryStats=new QueryStats();
        VolumeStatsSetQueryParams params=new VolumeStatsSetQueryParams();
        params.setStatsSet(VolumeStatsSetType.ALL);
        params.setMover(moverID);
        queryStats.setVolumeStats(params);
        statList.add(queryStats);
      }
      iStream=_vnxFileInputRequestBuilder.getMultiRequestQueryStatsPacket(statList);
    }
 else {
      _logger.error("No movers found to construct volumeStats query.");
    }
  }
 catch (  JAXBException jaxbException) {
    throw new VNXFilePluginException("Exception occurred while fetching fileSystem info",jaxbException.getCause());
  }
  return iStream;
}

private static boolean isDirectory(URL url){
  String file=url.getFile();
  return (file.length() > 0 && file.charAt(file.length() - 1) == '/');
}

@Override public final String readUTF() throws IOException {
  return dis.readUTF();
}

@Nullable public static NetworkParameters fromID(String id){
  if (id.equals(ID_MAINNET)) {
    return MainNetParams.get();
  }
 else   if (id.equals(ID_TESTNET)) {
    return TestNet3Params.get();
  }
 else   if (id.equals(ID_UNITTESTNET)) {
    return UnitTestParams.get();
  }
 else {
    return null;
  }
}

final synchronized void releaseSocket(){
  running=false;
  sender.interrupt();
  outboundMessages.clear();
  if (socket != null) {
    socket.close();
    socket=null;
  }
  maximumTransmissionUnit=0;
}

public boolean addPart(PduPart part){
  if (null == part) {
    throw new NullPointerException();
  }
  putPartToMaps(part);
  return mParts.add(part);
}

public String codeOwner(List<CodeOwner> codeOwners){
  long currentUnix=System.currentTimeMillis() / 1000L;
  double best=0;
  String owner="Unknown";
  for (  CodeOwner codeOwner : codeOwners) {
    double age=(currentUnix - codeOwner.getMostRecentUnixCommitTimestamp()) / 60 / 60;
    double calc=codeOwner.getNoLines() / Math.pow((age),1.8);
    if (calc > best) {
      best=calc;
      owner=codeOwner.getName();
    }
  }
  return owner;
}

private ArrayList<CellRecord> processNeighbors(final CellRecord serving,final PositionRecord cellPos){
  final ArrayList<CellRecord> neighbors=new ArrayList<>();
  final ArrayList<NeighboringCellInfo> neighboringCellInfos=(ArrayList<NeighboringCellInfo>)mTelephonyManager.getNeighboringCellInfo();
  if (serving == null) {
    Log.e(TAG,"Can't process neighbor cells: we need a serving cell first");
    return neighbors;
  }
  if (neighboringCellInfos == null) {
    Log.i(TAG,"Neigbor cell list null. Maybe not supported by your phone..");
    return neighbors;
  }
  for (  final NeighboringCellInfo ci : neighboringCellInfos) {
    final boolean skip=!isValidNeigbor(ci);
    if (!skip) {
      final CellRecord neighbor=new CellRecord(mSessionId);
      neighbor.setOpenBmapTimestamp(cellPos.getOpenBmapTimestamp());
      neighbor.setBeginPosition(cellPos);
      neighbor.setEndPosition(cellPos);
      neighbor.setIsServing(false);
      neighbor.setIsNeighbor(true);
      neighbor.setMnc(serving.getMnc());
      neighbor.setMcc(serving.getMcc());
      neighbor.setOperator(serving.getOperator());
      neighbor.setOperatorName(serving.getOperatorName());
      final int networkType=ci.getNetworkType();
      neighbor.setNetworkType(networkType);
      if (networkType == TelephonyManager.NETWORK_TYPE_GPRS || networkType == TelephonyManager.NETWORK_TYPE_EDGE) {
        neighbor.setIsCdma(false);
        neighbor.setLogicalCellId(ci.getCid());
        neighbor.setArea(ci.getLac());
        neighbor.setStrengthdBm(-113 + 2 * ci.getRssi());
        neighbor.setStrengthAsu(ci.getRssi());
      }
 else       if (networkType == TelephonyManager.NETWORK_TYPE_UMTS || networkType == TelephonyManager.NETWORK_TYPE_HSDPA || networkType == TelephonyManager.NETWORK_TYPE_HSUPA || networkType == TelephonyManager.NETWORK_TYPE_HSPA) {
        neighbor.setIsCdma(false);
        neighbor.setPsc(ci.getPsc());
        neighbor.setStrengthdBm(ci.getRssi());
        final int asu=(int)Math.round((ci.getRssi() + 113.0) / 2.0);
        neighbor.setStrengthAsu(asu);
      }
 else       if (networkType == TelephonyManager.NETWORK_TYPE_CDMA) {
        neighbor.setIsCdma(true);
      }
      neighbors.add(neighbor);
    }
  }
  return neighbors;
}

public Map read(SSOToken token,String objName) throws SMSException, SSOException {
  if (objName == null || objName.length() == 0) {
    throw new IllegalArgumentException("SMSFlatFileObject.read: object name is null or empty.");
  }
  String objKey=objName.toLowerCase();
  Map attrMap=null;
  mRWLock.readRequest();
  try {
    String filepath=mNameMap.getProperty(objKey);
    if (filepath == null) {
      if (mDebug.messageEnabled()) {
        mDebug.message("SMSFlatFileObject.read: object " + objName + " not found.");
      }
    }
 else {
      File filehandle=new File(filepath);
      Properties props=null;
      try {
        props=loadProperties(filehandle,objName);
      }
 catch (      ServiceNotFoundException e) {
      }
      if (props != null) {
        attrMap=new CaseInsensitiveHashMap();
        Enumeration keys=props.propertyNames();
        while (keys.hasMoreElements()) {
          String key=(String)keys.nextElement();
          String vals=props.getProperty(key);
          if ((vals != null) && (vals.length() > 0)) {
            attrMap.put(key,toValSet(key,vals));
          }
        }
      }
    }
  }
  finally {
    mRWLock.readDone();
  }
  return attrMap;
}

public static double parseDouble(String s){
  s=s.trim();
  int length=s.length();
  if (length == 0) {
    throw invalidReal(s,true);
  }
  char last=s.charAt(length - 1);
  if (last == 'y' || last == 'N') {
    return parseName(s,true);
  }
  StringExponentPair info=initialParse(s,length,true);
  if (info.infinity || info.zero) {
    return info.specialValue();
  }
  double result=parseDblImpl(info.s,(int)info.e);
  if (Double.doubleToLongBits(result) == 0xffffffffffffffffL) {
    throw invalidReal(s,true);
  }
  return info.negative ? -result : result;
}

public byte readByte() throws IOException {
  byte v=dataInput.readByte();
  offset+=1;
  available-=1;
  return v;
}

public static IMultiPoint[] randomPoints(int n,int d){
  IMultiPoint points[]=new IMultiPoint[n];
  for (int i=0; i < n; i++) {
    StringBuilder sb=new StringBuilder();
    for (int j=0; j < d; j++) {
      sb.append(rGen.nextDouble());
      if (j < d - 1) {
        sb.append(",");
      }
    }
    points[i]=new Hyperpoint(sb.toString());
  }
  return points;
}

private String verifyRestoreCode(String restoreCode,String code){
  if (code == null) {
    return "code_parameter_is_null";
  }
  if (restoreCode == null) {
    return "account_restore_code_is_null";
  }
  boolean validCode=passwordManager.matches(code,restoreCode);
  return validCode ? null : "code_does_not_match_restoreCode - code: '" + code + "' restoreCode: '"+ restoreCode+ "'";
}

public static void appendPaddedInteger(StringBuffer buf,long value,int size){
  int intValue=(int)value;
  if (intValue == value) {
    appendPaddedInteger(buf,intValue,size);
  }
 else   if (size <= 19) {
    buf.append(Long.toString(value));
  }
 else {
    if (value < 0) {
      buf.append('-');
      if (value != Long.MIN_VALUE) {
        value=-value;
      }
 else {
        for (; size > 19; size--) {
          buf.append('0');
        }
        buf.append("9223372036854775808");
        return;
      }
    }
    int digits=(int)(Math.log(value) / LOG_10) + 1;
    for (; size > digits; size--) {
      buf.append('0');
    }
    buf.append(Long.toString(value));
  }
}

@Override public void flush(){
  if (!queue.isEmpty()) {
    List<AlertStreamEvent> events=new ArrayList<>();
    queue.drainTo(events);
    events.forEach(null);
    LOG.info("Flushed {} alerts",events.size());
  }
  lastFlushTime.set(System.currentTimeMillis());
}

@Override public void addUndoPoint(){
  File tempFile;
  ObjectOutputStream oos;
  if (!isUndoEnabled()) {
    return;
  }
  if (getInstances() != null) {
    try {
      tempFile=File.createTempFile("arffviewer",null);
      tempFile.deleteOnExit();
      oos=new ObjectOutputStream(new BufferedOutputStream(new FileOutputStream(tempFile)));
      oos.writeObject(getInstances());
      oos.flush();
      oos.close();
      m_UndoList.add(tempFile);
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
}

public final void addChildNode(RowRegexExprNode childNode){
  childNodes.add(childNode);
}

private List<String> makeList(final String... strings){
  final List<String> result=new ArrayList<>();
  for (  String string : strings) {
    result.add(string);
  }
  return result;
}

protected boolean isLevelEnabled(int logLevel){
  return (logLevel >= currentLogLevel);
}

public int numberOfShardsWithState(ShardRoutingState... states){
  int count=0;
  for (  ShardRouting shardEntry : this) {
    for (    ShardRoutingState state : states) {
      if (shardEntry.state() == state) {
        count++;
      }
    }
  }
  return count;
}

@Override public void notifyCommit(final long commitTime){
  lock.lock();
  try {
    updateReleaseTimeForBareCommit(commitTime);
  }
  finally {
    lock.unlock();
  }
}

public static int showYesNoCancelQuestion(final Component parent,final String msg){
  return JOptionPane.showConfirmDialog(isIconified(parent) ? null : parent,msg,System.getProperty(DEFAULT_WINDOW_TITLE_PROPERTY),JOptionPane.YES_NO_CANCEL_OPTION,JOptionPane.QUESTION_MESSAGE);
}

public static String quantityplnounCreature(final int quantity,final String noun){
  if (noun.equals("chicken")) {
    final String end=plnounCreature(quantity,noun);
    return Integer.toString(quantity) + " " + end;
  }
  return quantityplnoun(quantity,noun);
}

static int copyBytes(OutputStream os,InputStream is,byte[] ioBuffer,int maxSize) throws IOException {
  int totalSize=0;
  while (totalSize < maxSize) {
    int rc=is.read(ioBuffer,0,Math.min(maxSize - totalSize,ioBuffer.length));
    if (rc == -1) {
      break;
    }
    os.write(ioBuffer,0,rc);
    totalSize+=rc;
  }
  return totalSize;
}

public int doFinal(byte[] out,int outOff) throws DataLengthException, IllegalStateException, InvalidCipherTextException {
  try {
    int resultLen=0;
    if (outOff + bufOff > out.length) {
      throw new OutputLengthException("output buffer too short for doFinal()");
    }
    if (bufOff != 0) {
      if (!partialBlockOkay) {
        throw new DataLengthException("data not block size aligned");
      }
      cipher.processBlock(buf,0,buf,0);
      resultLen=bufOff;
      bufOff=0;
      System.arraycopy(buf,0,out,outOff,resultLen);
    }
    return resultLen;
  }
  finally {
    reset();
  }
}

void composeMessage(final Mail mail,final String textContent,final String htmlContent,final Map<String,byte[]> attachments,final List<String> mailTemplateChain,final String shopCode,final String locale,final String templateName) throws MessagingException, ClassNotFoundException, IOException {
  if (textContent == null || htmlContent == null) {
    if (textContent != null) {
      mail.setTextVersion(textContent);
    }
    if (htmlContent != null) {
      mail.setHtmlVersion(htmlContent);
      inlineResources(mail,htmlContent,mailTemplateChain,shopCode,locale,templateName);
      addAttachments(mail,attachments);
    }
  }
 else {
    mail.setTextVersion(textContent);
    mail.setHtmlVersion(htmlContent);
    inlineResources(mail,htmlContent,mailTemplateChain,shopCode,locale,templateName);
    addAttachments(mail,attachments);
  }
}

private void handleLaunchMessageEvent(MessageEvent messageEvent){
  DataMap dataMap=DataMap.fromByteArray(messageEvent.getData());
  boolean relaunchIfRunning=dataMap.getBoolean(KEY_START_ACTIVITY_RELAUNCH,false);
  DataMap bundleData=dataMap.getDataMap(KEY_START_ACTIVITY_BUNDLE);
  String activityName=dataMap.getString(KEY_START_ACTIVITY_NAME);
  Bundle bundle=null;
  if (bundleData != null) {
    bundle=bundleData.toBundle();
  }
  if (activityName == null) {
    for (    WearConsumer consumer : mWearConsumers) {
      consumer.onWearableApplicationLaunchRequestReceived(bundle,relaunchIfRunning);
    }
  }
 else {
    try {
      if (!TextUtils.isEmpty(activityName)) {
        Class<?> targetActivity=Class.forName(activityName);
        Intent intent=new Intent(mContext,targetActivity);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        if (bundle != null) {
          intent.putExtras(bundle);
        }
        if (!mAppForeground || relaunchIfRunning) {
          mContext.startActivity(intent);
        }
      }
 else {
        Log.e(TAG,"Activity Name cannot be empty");
      }
    }
 catch (    ClassNotFoundException e) {
      Log.e(TAG,"Failed to find the activity class to launch",e);
    }
  }
}

@Override public void close() throws IOException {
  closed=true;
  def.end();
  in.close();
}

public static String escapeColonInString(String str){
  if (str != null) {
    if (str.indexOf(":") >= 0) {
      str=str.replaceAll(":","&#58;");
    }
  }
  return str;
}

protected void tearDown() throws Exception {
  File file;
  file=new File(m_ExportFilenameData);
  if (file.exists())   file.delete();
  m_ExportFilenameData=null;
  super.tearDown();
}

private static SAXParserFactory createSAXParserFactory(){
  try {
    SAXParserFactory factory=SAXParserFactory.newInstance();
    try {
      SAXParserFactory secureFactory=SecureGenericXMLFactory.getSAXParserFactory(factory);
      secureFactory.newSAXParser();
      factory=secureFactory;
    }
 catch (    ParserConfigurationException e) {
    }
    factory.setNamespaceAware(true);
    return factory;
  }
 catch (  SAXException e) {
    throw new IllegalStateException("Failed to create a SAX parser factory",e);
  }
}

private static void attemptRetryOnException(String logPrefix,Request<?> request,VolleyError exception) throws VolleyError {
  RetryPolicy retryPolicy=request.getRetryPolicy();
  int oldTimeout=request.getTimeoutMs();
  try {
    retryPolicy.retry(exception);
  }
 catch (  VolleyError e) {
    request.addMarker(String.format("%s-timeout-giveup [timeout=%s]",logPrefix,oldTimeout));
    throw e;
  }
  request.addMarker(String.format("%s-retry [timeout=%s]",logPrefix,oldTimeout));
}

public static void saveAsXML(NSObject root,File out) throws IOException {
  File parent=out.getParentFile();
  if (!parent.exists() && !parent.mkdirs()) {
    throw new IOException("The output directory does not exist and could not be created.");
  }
  FileOutputStream fous=new FileOutputStream(out);
  saveAsXML(root,fous);
  fous.close();
}

public static boolean containsChroot(String zkHost){
  return zkHost.contains("/");
}

public final void lazySet(int newValue){
  unsafe.putOrderedInt(this,valueOffset,newValue);
}

public Feature(String line,Map cpStr2Int,Map lbStr2Int,Map fmap){
  StringTokenizer strTok=new StringTokenizer(line," \t\r\n");
  int len=strTok.countTokens();
  String strIdStr=strTok.nextToken();
  int idx=Integer.parseInt(strTok.nextToken());
  float val=1;
  double wgt=Double.parseDouble(strTok.nextToken());
  StringTokenizer strIdTok=new StringTokenizer(strIdStr,"_");
  String prefix=strIdTok.nextToken();
  if (prefix.compareToIgnoreCase("e1") == 0) {
    Integer yInt=(Integer)lbStr2Int.get(strIdTok.nextToken());
    Integer ypInt=(Integer)lbStr2Int.get(strIdTok.nextToken());
    if (yInt != null && ypInt != null) {
      eFeature1Init(yInt.intValue(),ypInt.intValue());
    }
  }
 else   if (prefix.compareToIgnoreCase("s1") == 0) {
    Integer yInt=(Integer)lbStr2Int.get(strIdTok.nextToken());
    Integer cpInt=(Integer)cpStr2Int.get(strIdTok.nextToken());
    if (yInt != null && cpInt != null) {
      sFeature1Init(yInt.intValue(),cpInt.intValue());
    }
  }
  this.idx=idx;
  this.val=val;
  this.wgt=wgt;
  strId2IdxAdd(fmap);
}

public static int patchFast(InputStream oldInputStream,InputStream diffInputStream,File newFile) throws IOException {
  if (oldInputStream == null) {
    return RETURN_OLD_FILE_ERR;
  }
  if (newFile == null) {
    return RETURN_NEW_FILE_ERR;
  }
  if (diffInputStream == null) {
    return RETURN_DIFF_FILE_ERR;
  }
  byte[] oldBytes=BSUtil.inputStreamToByte(oldInputStream);
  byte[] diffBytes=BSUtil.inputStreamToByte(diffInputStream);
  byte[] newBytes=patchFast(oldBytes,oldBytes.length,diffBytes,diffBytes.length,0);
  OutputStream newOutputStream=new FileOutputStream(newFile);
  try {
    newOutputStream.write(newBytes);
  }
  finally {
    newOutputStream.close();
  }
  return RETURN_SUCCESS;
}

public static byte[] readFullyNoClose(InputStream in) throws IOException {
  ByteArrayOutputStream bytes=new ByteArrayOutputStream();
  byte[] buffer=new byte[1024];
  int count;
  while ((count=in.read(buffer)) != -1) {
    bytes.write(buffer,0,count);
  }
  return bytes.toByteArray();
}

public ContentStorage(ContentStorageBO contentStorageBO,List<GenericPackage> genericPackageList,List<EssenceContainerData> essenceContainerDataList){
  this.contentStorageBO=contentStorageBO;
  this.genericPackageList=Collections.unmodifiableList(genericPackageList);
  this.essenceContainerDataList=Collections.unmodifiableList(essenceContainerDataList);
}

public static String decode(byte[] utf8) throws CharacterCodingException {
  return decode(ByteBuffer.wrap(utf8),true);
}

public ScaleIOVolume queryVolume(String volId) throws Exception {
  ClientResponse response=get(URI.create(ScaleIOConstants.getVolumeURI(volId)));
  return getResponseObject(ScaleIOVolume.class,response);
}

public void removeEventListener(SIPDialogEventListener oldListener){
  eventListeners.remove(oldListener);
}

protected static Object primitiveArrayPut(Object self,int idx,Object newValue){
  Array.set(self,normaliseIndex(idx,Array.getLength(self)),newValue);
  return newValue;
}

public void toAxisAngle(Vector4f output){
  if (getW() > 1) {
    normalise();
  }
  float angle=2 * (float)Math.toDegrees(Math.acos(getW()));
  float x;
  float y;
  float z;
  float s=(float)Math.sqrt(1 - getW() * getW());
  if (s < 0.001) {
    x=points[0];
    y=points[1];
    z=points[2];
  }
 else {
    x=points[0] / s;
    y=points[1] / s;
    z=points[2] / s;
  }
  output.points[0]=x;
  output.points[1]=y;
  output.points[2]=z;
  output.points[3]=angle;
}

@Override public synchronized void initialize(){
  if (!mRootDirectory.exists()) {
    if (!mRootDirectory.mkdirs()) {
      VolleyLog.e("Unable to create cache dir %s",mRootDirectory.getAbsolutePath());
    }
    return;
  }
  File[] files=mRootDirectory.listFiles();
  if (files == null) {
    return;
  }
  for (  File file : files) {
    FileInputStream fis=null;
    try {
      fis=new FileInputStream(file);
      CacheHeader entry=CacheHeader.readHeader(fis);
      entry.size=file.length();
      putEntry(entry.key,entry);
    }
 catch (    IOException e) {
      if (file != null) {
        file.delete();
      }
    }
 finally {
      try {
        if (fis != null) {
          fis.close();
        }
      }
 catch (      IOException ignored) {
      }
    }
  }
}

private QNameMap<BindingExpression> processBindingAttributes(Node node){
  QNameMap<BindingExpression> attributeBindings=null;
  for (Iterator<QName> i=node.getAttributeNames(); i != null && i.hasNext(); ) {
    QName qname=i.next();
    String value=(String)node.getAttributeValue(qname);
    BindingExpression be=textParser.parseBindingExpression(value,node.beginLine);
    if (be != null) {
      if (attributeBindings == null) {
        attributeBindings=new QNameMap<BindingExpression>();
      }
      attributeBindings.put(qname,be);
      i.remove();
    }
  }
  return attributeBindings;
}

public void load(String fileName) throws IOException {
  BufferedReader bfr=new BufferedReader(new InputStreamReader(new FileInputStream(fileName),"UTF-8"));
  if (bList == null)   bList=new Vector(DEFAULT_INCREMENT,DEFAULT_INCREMENT);
  String line=bfr.readLine();
  if (line.indexOf("FROM: ") != -1) {
    line=line.substring(6);
    String[] parts=new String[2];
    parts=line.split("\\*",2);
    fromDir=parts[0];
    fromExt=parts[1];
  }
 else   if (!(line.matches("^\\s*$")))   add(line);
  while ((line=bfr.readLine()) != null) {
    if (!(line.matches("^\\s*$")))     add(line);
  }
}

private void verifyRegisterDefs(String where){
  DefUse.computeDU(this);
  for (Register r=regpool.getFirstSymbolicRegister(); r != null; r=r.getNext()) {
    if (r.isPhysical())     continue;
    if (r.useList != null) {
      if (r.defList == null) {
        printInstructions();
        verror(where,"verifyRegisterDefs: " + r + " has use but no defs");
      }
    }
  }
}

@SuppressWarnings("unchecked") public static PartListing parseListParts(InputStream responseBody) throws ResponseParseException {
  try {
    Element root=getXmlRootElement(responseBody);
    PartListing partListing=new PartListing();
    partListing.setBucketName(root.getChildText("Bucket"));
    partListing.setKey(root.getChildText("Key"));
    partListing.setUploadId(root.getChildText("UploadId"));
    partListing.setStorageClass(root.getChildText("StorageClass"));
    partListing.setMaxParts(Integer.valueOf(root.getChildText("MaxParts")));
    partListing.setTruncated(Boolean.valueOf(root.getChildText("IsTruncated")));
    if (root.getChild("PartNumberMarker") != null) {
      String partNumberMarker=root.getChildText("PartNumberMarker");
      if (!isNullOrEmpty(partNumberMarker)) {
        partListing.setPartNumberMarker(Integer.valueOf(partNumberMarker));
      }
    }
    if (root.getChild("NextPartNumberMarker") != null) {
      String nextPartNumberMarker=root.getChildText("NextPartNumberMarker");
      if (!isNullOrEmpty(nextPartNumberMarker)) {
        partListing.setNextPartNumberMarker(Integer.valueOf(nextPartNumberMarker));
      }
    }
    List<Element> partElems=root.getChildren("Part");
    for (    Element elem : partElems) {
      PartSummary ps=new PartSummary();
      ps.setPartNumber(Integer.valueOf(elem.getChildText("PartNumber")));
      ps.setLastModified(DateUtil.parseIso8601Date(elem.getChildText("LastModified")));
      ps.setETag(trimQuotes(elem.getChildText("ETag")));
      ps.setSize(Integer.valueOf(elem.getChildText("Size")));
      partListing.addPart(ps);
    }
    return partListing;
  }
 catch (  Exception e) {
    throw new ResponseParseException(e.getMessage(),e);
  }
}

private static void findSnap(Collection<ConstraintWidget> widgets,ConstraintWidget widget,SnapCandidate candidate,boolean checkHorizontal){
  ArrayList<ConstraintAnchor> anchorsSource=widget.getAnchors();
  for (  ConstraintWidget w : widgets) {
    if (w == widget) {
      continue;
    }
    ArrayList<ConstraintAnchor> anchorsTarget=w.getAnchors();
    for (    ConstraintAnchor as : anchorsSource) {
      if (checkHorizontal && as.isVerticalAnchor()) {
        continue;
      }
 else       if (!checkHorizontal && !as.isVerticalAnchor()) {
        continue;
      }
      for (      ConstraintAnchor at : anchorsTarget) {
        snapCheck(as,at,candidate,CONNECTION_SLOPE);
      }
    }
  }
}

protected String padString(String s,int length,boolean left){
  String result;
  int i;
  result=s;
  for (i=s.length(); i < length; i++) {
    if (left) {
      result=" " + result;
    }
 else {
      result=result + " ";
    }
  }
  if ((length > 0) && (result.length() > length)) {
    result=result.substring(0,length);
  }
  return result;
}

public static <C extends Comparable<?>>List<Range<C>> remove(Range<C> self,Range<C> other){
  if (other == null || !self.isConnected(other)) {
    return Collections.singletonList(self);
  }
  Range<C> share=self.intersection(other);
  if (share.isEmpty()) {
    return Collections.singletonList(self);
  }
  List<Range<C>> ret=Lists.newArrayList();
  if (!self.hasLowerBound()) {
    if (share.hasLowerBound()) {
      if (share.lowerBoundType() == BoundType.CLOSED) {
        ret.add(Range.lessThan(share.lowerEndpoint()));
      }
 else {
        ret.add(Range.atMost(share.lowerEndpoint()));
      }
    }
  }
 else {
    if (self.lowerEndpoint() != share.lowerEndpoint()) {
      if (self.lowerBoundType() == BoundType.CLOSED) {
        if (share.lowerBoundType() == BoundType.CLOSED) {
          ret.add(Range.closedOpen(self.lowerEndpoint(),share.lowerEndpoint()));
        }
 else {
          ret.add(Range.closed(self.lowerEndpoint(),share.lowerEndpoint()));
        }
      }
 else {
        if (share.lowerBoundType() == BoundType.CLOSED) {
          ret.add(Range.open(self.lowerEndpoint(),share.lowerEndpoint()));
        }
 else {
          ret.add(Range.openClosed(self.lowerEndpoint(),share.lowerEndpoint()));
        }
      }
    }
 else {
      if (self.lowerBoundType() == BoundType.CLOSED && share.lowerBoundType() == BoundType.OPEN) {
        ret.add(Range.closed(self.lowerEndpoint(),share.lowerEndpoint()));
      }
    }
  }
  if (!self.hasUpperBound()) {
    if (share.hasUpperBound()) {
      if (share.upperBoundType() == BoundType.CLOSED) {
        ret.add(Range.greaterThan(share.upperEndpoint()));
      }
 else {
        ret.add(Range.atLeast(share.upperEndpoint()));
      }
    }
  }
 else {
    if (self.upperEndpoint() != share.upperEndpoint()) {
      if (self.upperBoundType() == BoundType.CLOSED) {
        if (share.upperBoundType() == BoundType.CLOSED) {
          ret.add(Range.openClosed(share.upperEndpoint(),self.upperEndpoint()));
        }
 else {
          ret.add(Range.closed(share.upperEndpoint(),self.upperEndpoint()));
        }
      }
 else {
        if (share.upperBoundType() == BoundType.CLOSED) {
          ret.add(Range.open(share.upperEndpoint(),self.upperEndpoint()));
        }
 else {
          ret.add(Range.closedOpen(share.upperEndpoint(),self.upperEndpoint()));
        }
      }
    }
 else {
      if (self.upperBoundType() == BoundType.CLOSED && share.upperBoundType() == BoundType.OPEN) {
        ret.add(Range.closed(self.upperEndpoint(),share.upperEndpoint()));
      }
    }
  }
  return ret;
}

void recomposeKeys(KeyDeclaration keyDecl){
  m_keyDecls.addElement(keyDecl);
}

public <T>JsonArray<T> createListDtoFromJson(Reader json,Class<T> dtoInterface) throws IOException {
  final DtoProvider<T> dtoProvider=getDtoProvider(dtoInterface);
  final List<JsonElement> list;
  try {
    list=gson.fromJson(json,listTypeCache.get(JsonElement.class));
  }
 catch (  JsonSyntaxException e) {
    final Throwable cause=e.getCause();
    if (cause instanceof IOException) {
      throw (IOException)cause;
    }
    throw e;
  }
  final List<T> result=new ArrayList<>(list.size());
  for (  JsonElement e : list) {
    result.add(dtoProvider.fromJson(e));
  }
  return new JsonArrayImpl<>(result);
}

private View fillFromTop(int nextTop){
  mFirstPosition=Math.min(mFirstPosition,-1);
  mFirstPosition=Math.min(mFirstPosition,mItemCount - 1);
  if (mFirstPosition < 0) {
    mFirstPosition=0;
  }
  return fillDown(mFirstPosition,nextTop);
}

public void connectionOpen(){
  lock.lock();
  try {
    log.info("New server channel active.");
    connectionOpen=true;
  }
  finally {
    lock.unlock();
  }
}

public static float rotateY(float pX,float pY,float cX,float cY,float angleInDegrees){
  double angle=Math.toRadians(angleInDegrees);
  return (float)(Math.sin(angle) * (pX - cX) + Math.cos(angle) * (pY - cY) + cY);
}

public void list(PrintStream out){
  properties.list(out);
}

protected LayerPane findSelectedPane(){
  for (  LayerPane pane : getPanes()) {
    if (pane.isSelected()) {
      return pane;
    }
  }
  return null;
}

private final void scaleNoiseArray(final int seaLevel){
  for (int x=0; x < X_SECTIONS; x++) {
    for (int z=0; z < Z_SECTIONS; z++) {
      for (int y=0; y < Y_SECTIONS; y++) {
        this.rawDensity[x][y][z]*=MAX_ELEV;
        this.rawDensity[x][y][z]+=seaLevel;
      }
    }
  }
}

public Object[] toArray(){
  ArrayList<E> al=new ArrayList<E>();
  for (Node<E> p=first(); p != null; p=succ(p)) {
    E item=p.item;
    if (item != null)     al.add(item);
  }
  return al.toArray();
}

public MicroservicesRunner(int... ports){
  configureTransport(ports);
}

public static boolean deleteContents(File directory){
  File[] files=directory.listFiles();
  boolean success=true;
  if (files != null) {
    for (    File file : files) {
      success&=deleteRecursively(file);
    }
  }
  return success;
}

private void handleResponse(AvsResponse response){
  mEventManager.post(new CommandEvent(CommandEvent.TYPE_COMMAND_SEARCHING,KEYWORD_ALEXA));
  if (response != null) {
    for (int i=response.size() - 1; i >= 0; i--) {
      if (response.get(i) instanceof AvsReplaceAllItem || response.get(i) instanceof AvsReplaceEnqueuedItem) {
        mAvsQueue.clear();
        response.remove(i);
      }
    }
    Timber.i("Adding %s items to our queue",response.size());
    mAvsQueue.addAll(response);
  }
  checkQueue();
}

void mergesort(Vector a,Vector b,int l,int r,XPathContext support) throws TransformerException {
  if ((r - l) > 0) {
    int m=(r + l) / 2;
    mergesort(a,b,l,m,support);
    mergesort(a,b,m + 1,r,support);
    int i, j, k;
    for (i=m; i >= l; i--) {
      if (i >= b.size())       b.insertElementAt(a.elementAt(i),i);
 else       b.setElementAt(a.elementAt(i),i);
    }
    i=l;
    for (j=(m + 1); j <= r; j++) {
      if (r + m + 1 - j >= b.size())       b.insertElementAt(a.elementAt(j),r + m + 1 - j);
 else       b.setElementAt(a.elementAt(j),r + m + 1 - j);
    }
    j=r;
    int compVal;
    for (k=l; k <= r; k++) {
      if (i == j)       compVal=-1;
 else       compVal=compare((NodeCompareElem)b.elementAt(i),(NodeCompareElem)b.elementAt(j),0,support);
      if (compVal < 0) {
        a.setElementAt(b.elementAt(i),k);
        i++;
      }
 else       if (compVal > 0) {
        a.setElementAt(b.elementAt(j),k);
        j--;
      }
    }
  }
}

public static List<String> toList(CharSequence self){
  String s=self.toString();
  int size=s.length();
  List<String> answer=new ArrayList<String>(size);
  for (int i=0; i < size; i++) {
    answer.add(s.substring(i,i + 1));
  }
  return answer;
}

void appendArrayGenericType(StringBuilder sb,Type[] types){
  if (types.length > 0) {
    appendGenericType(sb,types[0]);
    for (int i=1; i < types.length; i++) {
      sb.append(',');
      appendGenericType(sb,types[i]);
    }
  }
}

public static int decode_residual(H264Context h,GetBitContext gb,short[] block_base,int block_offset,int n,int[] scantable_base,int scantable_offset,long[] qmul_base,int qmul_offset,int max_coeff){
  final int[] coeff_token_table_index={0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,3};
  int[] level=new int[16];
  int zeros_left, coeff_token, total_coeff, i, trailing_ones, run_before;
  if (n >= H264Context.CHROMA_DC_BLOCK_INDEX) {
    coeff_token=gb.get_vlc2(chroma_dc_coeff_token_vlc.table_base,chroma_dc_coeff_token_vlc.table_offset,H264Context.CHROMA_DC_COEFF_TOKEN_VLC_BITS,1,"coeff_token_CROMA_DC");
    total_coeff=coeff_token >> 2;
  }
 else {
    if (n == H264Context.LUMA_DC_BLOCK_INDEX) {
      total_coeff=pred_non_zero_count(h,0);
      coeff_token=gb.get_vlc2(coeff_token_vlc[coeff_token_table_index[total_coeff]].table_base,coeff_token_vlc[coeff_token_table_index[total_coeff]].table_offset,H264Context.COEFF_TOKEN_VLC_BITS,2,"coeff_token_LUMA_DC");
      total_coeff=coeff_token >> 2;
    }
 else {
      total_coeff=pred_non_zero_count(h,n);
      coeff_token=gb.get_vlc2(coeff_token_vlc[coeff_token_table_index[total_coeff]].table_base,coeff_token_vlc[coeff_token_table_index[total_coeff]].table_offset,H264Context.COEFF_TOKEN_VLC_BITS,2,"coeff_token_LUMA(2)_DC");
      total_coeff=coeff_token >> 2;
    }
  }
  h.non_zero_count_cache[H264Context.scan8[n]]=total_coeff;
  if (total_coeff == 0)   return 0;
  if (total_coeff > max_coeff) {
    return -1;
  }
  trailing_ones=coeff_token & 3;
  i=(int)gb.show_bits(3);
  gb.skip_bits(trailing_ones);
  level[0]=1 - ((i & 4) >> 1);
  level[1]=1 - ((i & 2));
  level[2]=1 - ((i & 1) << 1);
  if (trailing_ones < total_coeff) {
    int mask, prefix;
    int suffix_length=((total_coeff > 10) ? 1 : 0) & ((trailing_ones < 3) ? 1 : 0);
    int bitsi=(int)gb.show_bits(LEVEL_TAB_BITS);
    int level_code=cavlc_level_tab[suffix_length][bitsi][0];
    gb.skip_bits(cavlc_level_tab[suffix_length][bitsi][1]);
    if (level_code >= 100) {
      prefix=level_code - 100;
      if (prefix == LEVEL_TAB_BITS)       prefix+=get_level_prefix(gb);
      if (prefix < 14) {
        if (suffix_length != 0)         level_code=(int)((prefix << 1) + gb.get_bits1("level_code"));
 else         level_code=prefix;
      }
 else       if (prefix == 14) {
        if (suffix_length != 0)         level_code=(int)((prefix << 1) + gb.get_bits1("level_code"));
 else         level_code=(int)(prefix + gb.get_bits(4,"level_code"));
      }
 else {
        level_code=30 + (int)(gb.get_bits(prefix - 3,"level_code"));
        if (prefix >= 16) {
          if (prefix > 25 + 3) {
            return -1;
          }
          level_code+=(1 << (prefix - 3)) - 4096;
        }
      }
      if (trailing_ones < 3)       level_code+=2;
      suffix_length=2;
      mask=-(level_code & 1);
      level[trailing_ones]=(((2 + level_code) >> 1) ^ mask) - mask;
    }
 else {
      level_code+=((level_code >> 31) | 1) & -((trailing_ones < 3) ? 1 : 0);
      suffix_length=1 + (((0xffffffffL & (level_code + 3)) > 6) ? 1 : 0);
      level[trailing_ones]=level_code;
    }
    for (i=trailing_ones + 1; i < total_coeff; i++) {
      final int[] suffix_limit={0,3,6,12,24,48,Integer.MAX_VALUE};
      bitsi=(int)gb.show_bits(LEVEL_TAB_BITS);
      level_code=cavlc_level_tab[suffix_length][bitsi][0];
      gb.skip_bits(cavlc_level_tab[suffix_length][bitsi][1]);
      if (level_code >= 100) {
        prefix=level_code - 100;
        if (prefix == LEVEL_TAB_BITS) {
          prefix+=get_level_prefix(gb);
        }
        if (prefix < 15) {
          level_code=(int)((prefix << suffix_length) + gb.get_bits(suffix_length,"level_code"));
        }
 else {
          level_code=(int)((15 << suffix_length) + gb.get_bits(prefix - 3,"level_code"));
          if (prefix >= 16)           level_code+=(1 << (prefix - 3)) - 4096;
        }
        mask=-(level_code & 1);
        level_code=(((2 + level_code) >> 1) ^ mask) - mask;
      }
      level[i]=level_code;
      suffix_length+=(((0xffffffffL & (suffix_limit[suffix_length] + level_code)) > (2L * suffix_limit[suffix_length])) ? 1 : 0);
    }
  }
  if (total_coeff == max_coeff)   zeros_left=0;
 else {
    if (n >= H264Context.CHROMA_DC_BLOCK_INDEX) {
      zeros_left=gb.get_vlc2(chroma_dc_total_zeros_vlc[total_coeff - 1].table_base,chroma_dc_total_zeros_vlc[total_coeff - 1].table_offset,H264Context.CHROMA_DC_TOTAL_ZEROS_VLC_BITS,1,"coeff_token_CROMA_DC_TOTAL_ZERO");
    }
 else {
      zeros_left=gb.get_vlc2(total_zeros_vlc[total_coeff - 1].table_base,total_zeros_vlc[total_coeff - 1].table_offset,H264Context.TOTAL_ZEROS_VLC_BITS,1,"coeff_token_TOTAL_ZEROS");
    }
  }
  scantable_offset+=zeros_left + total_coeff - 1;
  if (scantable_offset < 0) {
    int[] new_scantable_base=new int[scantable_base.length + (-scantable_offset)];
    System.arraycopy(scantable_base,0,new_scantable_base,-scantable_offset,scantable_base.length);
    scantable_base=new_scantable_base;
    scantable_offset=0;
  }
  if (n >= H264Context.LUMA_DC_BLOCK_INDEX) {
    block_base[block_offset + scantable_base[scantable_offset]]=(short)level[0];
    for (i=1; i < total_coeff && zeros_left > 0; i++) {
      if (zeros_left < 7) {
        run_before=gb.get_vlc2(run_vlc[zeros_left - 1].table_base,run_vlc[zeros_left - 1].table_offset,H264Context.RUN_VLC_BITS,1,"RUN_VLC");
      }
 else {
        run_before=gb.get_vlc2(run7_vlc.table_base,run7_vlc.table_offset,H264Context.RUN7_VLC_BITS,2,"RUN7_VLC");
      }
      zeros_left-=run_before;
      scantable_offset-=1 + run_before;
      block_base[block_offset + scantable_base[scantable_offset]]=(short)level[i];
    }
    for (; i < total_coeff; i++) {
      scantable_offset--;
      block_base[block_offset + scantable_base[scantable_offset]]=(short)level[i];
    }
  }
 else {
    block_base[block_offset + scantable_base[scantable_offset]]=(short)((level[0] * qmul_base[qmul_offset + scantable_base[scantable_offset]] + 32) >> 6);
    for (i=1; i < total_coeff && zeros_left > 0; i++) {
      if (zeros_left < 7) {
        run_before=gb.get_vlc2(run_vlc[zeros_left - 1].table_base,run_vlc[zeros_left - 1].table_offset,H264Context.RUN_VLC_BITS,1,"RUN_VLC");
      }
 else {
        run_before=gb.get_vlc2(run7_vlc.table_base,run7_vlc.table_offset,H264Context.RUN7_VLC_BITS,2,"RUN7_VLC");
      }
      zeros_left-=run_before;
      scantable_offset-=(1 + run_before);
      block_base[block_offset + scantable_base[scantable_offset]]=(short)((level[i] * qmul_base[qmul_offset + scantable_base[scantable_offset]] + 32) >> 6);
    }
    for (; i < total_coeff; i++) {
      scantable_offset--;
      block_base[block_offset + scantable_base[scantable_offset]]=(short)((level[i] * qmul_base[qmul_offset + scantable_base[scantable_offset]] + 32) >> 6);
    }
  }
  if (zeros_left < 0) {
    return -1;
  }
  return 0;
}

public void checkReinitFile(final boolean needReinit) throws IOException {
  File bootModeFile=new File(rootDir,Constants.STARTUPMODE);
  if (!needReinit) {
    log.info("Reinit flag is false");
    if (bootModeFile.exists()) {
      bootModeFile.delete();
    }
    return;
  }
  if (!bootModeFile.exists()) {
    setDbStartupModeAsRestoreReinit(rootDir);
  }
  chown(bootModeFile,BackupConstants.STORAGEOS_USER,BackupConstants.STORAGEOS_GROUP);
  log.info("Startup mode file({}) has been created",bootModeFile.getAbsolutePath());
}

private float clampMag(float value,float absMin,float absMax){
  final float absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

public void readDOT(Reader input){
  DotParser dp=new DotParser(input,m_nodes,m_edges);
  graphID=dp.parse();
  setAppropriateNodeSize();
  if (m_le != null) {
    m_le.setNodeSize(paddedNodeWidth,nodeHeight);
    jBtLayout.setEnabled(false);
    layoutGraph();
  }
}

private void notifyAllEntity(){
  Log.printConcatLine(super.getName(),": Notify all CloudSim entities for shutting down.");
  signalShutdown(resList);
  signalShutdown(gisList);
  resList.clear();
  gisList.clear();
}

protected Response calcDefaultSMTPResponse(HookResult result){
  if (result != null) {
    int rCode=result.getResult();
    String smtpRetCode=result.getSmtpRetCode();
    String smtpDesc=result.getSmtpDescription();
    if ((rCode & HookReturnCode.DENY) == HookReturnCode.DENY) {
      if (smtpRetCode == null)       smtpRetCode=SMTPRetCode.AUTH_FAILED;
      if (smtpDesc == null)       smtpDesc="Authentication Failed";
      SMTPResponse response=new SMTPResponse(smtpRetCode,smtpDesc);
      if ((rCode & HookReturnCode.DISCONNECT) == HookReturnCode.DISCONNECT) {
        response.setEndSession(true);
      }
      return response;
    }
 else     if ((rCode & HookReturnCode.DENYSOFT) == HookReturnCode.DENYSOFT) {
      if (smtpRetCode == null)       smtpRetCode=SMTPRetCode.LOCAL_ERROR;
      if (smtpDesc == null)       smtpDesc="Temporary problem. Please try again later";
      SMTPResponse response=new SMTPResponse(smtpRetCode,smtpDesc);
      if ((rCode & HookReturnCode.DISCONNECT) == HookReturnCode.DISCONNECT) {
        response.setEndSession(true);
      }
      return response;
    }
 else     if ((rCode & HookReturnCode.OK) == HookReturnCode.OK) {
      if (smtpRetCode == null)       smtpRetCode=SMTPRetCode.AUTH_OK;
      if (smtpDesc == null)       smtpDesc="Authentication Succesfull";
      SMTPResponse response=new SMTPResponse(smtpRetCode,smtpDesc);
      if ((rCode & HookReturnCode.DISCONNECT) == HookReturnCode.DISCONNECT) {
        response.setEndSession(true);
      }
      return response;
    }
 else     if ((rCode & HookReturnCode.DISCONNECT) == HookReturnCode.DISCONNECT) {
      SMTPResponse response=new SMTPResponse("");
      response.setEndSession(true);
      return response;
    }
 else {
      return null;
    }
  }
 else {
    return null;
  }
}

public synchronized boolean hasAlerts(){
  if (alerts == null) {
    return false;
  }
  return !alerts.isEmpty();
}

public void testCompareToPosPos1(){
  byte aBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  byte bBytes[]={10,20,30,40,50,60,70,10,20,30};
  int aSign=1;
  int bSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  assertEquals(1,aNumber.compareTo(bNumber));
}

protected Collection<? extends AnnotationMirror> replacePolyAll(Collection<? extends AnnotationMirror> annos){
  Set<AnnotationMirror> returnAnnos=AnnotationUtils.createAnnotationSet();
  for (  AnnotationMirror top : getTopAnnotations()) {
    AnnotationMirror annotationInHierarchy=findAnnotationInHierarchy(annos,top);
    if (annotationInHierarchy != null) {
      returnAnnos.add(annotationInHierarchy);
    }
  }
  return returnAnnos;
}

public synchronized void resetInputs() throws IOException {
  source.printStatistics("docs");
  setConfig(config,source);
  source.resetInputs();
  numDocsCreated.set(0);
  resetLeftovers();
}

public void removeMatchingCoupling(Coupling<?> toRemove){
  for (  Coupling<?> coupling : getCouplings()) {
    boolean consumersMatch=attributesMatch(coupling.getConsumer(),toRemove.getConsumer());
    boolean producersMatch=attributesMatch(coupling.getProducer(),toRemove.getProducer());
    if (consumersMatch && producersMatch) {
      removeCoupling(coupling);
    }
  }
}

public String toShortString(){
  StringBuilder sb=new StringBuilder();
  if (xRoadInstance != null) {
    sb.append(xRoadInstance);
  }
  for (  String part : getFieldsForStringFormat()) {
    if (part != null) {
      if (sb.length() > 0) {
        sb.append('/');
      }
      sb.append(part);
    }
  }
  return sb.toString();
}

private boolean checkPattern(){
  if (pattern == null) {
    return false;
  }
  char leftSeparator=getLeftSeparator();
  char rightSeparator=getRightSeparator();
  Stack<Character> separatorStack=new Stack<Character>();
  for (int i=0; i < pattern.length(); i++) {
    char cur=pattern.charAt(i);
    if (cur == leftSeparator) {
      separatorStack.push(cur);
    }
 else     if (cur == rightSeparator) {
      if (!separatorStack.isEmpty() && (separatorStack.pop() == leftSeparator)) {
        continue;
      }
 else {
        return false;
      }
    }
  }
  return separatorStack.isEmpty();
}

public static SQLiteDatabase openOrCreateDatabase(File file,CursorFactory factory){
  return openOrCreateDatabase(file.getPath(),factory);
}

public String toString(cp_info constant_pool[]){
  return Integer.toString((int)bytes);
}

private void clampStartingPosition(){
  final float cX=mBounds.exactCenterX();
  final float cY=mBounds.exactCenterY();
  final float dX=mStartingX - cX;
  final float dY=mStartingY - cY;
  final float r=mTargetRadius;
  if (dX * dX + dY * dY > r * r) {
    final double angle=Math.atan2(dY,dX);
    mClampedStartingX=cX + (float)(Math.cos(angle) * r);
    mClampedStartingY=cY + (float)(Math.sin(angle) * r);
  }
 else {
    mClampedStartingX=mStartingX;
    mClampedStartingY=mStartingY;
  }
}

public Wildcard(String pattern,int regexpOptions){
  this.regexpOptions=regexpOptions;
  regexp=Pattern.compile(wildcardToRegex(pattern),regexpOptions);
  shortcut=extractShortcut(pattern);
}

private boolean linkLast(Node<E> node){
  if (count >= capacity)   return false;
  Node<E> l=last;
  node.prev=l;
  last=node;
  if (first == null)   first=node;
 else   l.next=node;
  ++count;
  notEmpty.signal();
  return true;
}

private String local_number() throws ParseException {
  StringBuffer s=new StringBuffer();
  if (debug)   dbg_enter("local_number");
  try {
    int lc=0;
    while (lexer.hasMoreChars()) {
      char la=lexer.lookAhead(0);
      if (la == '*' || la == '#' || la == '-' || la == '.' || la == '(' || la == ')' || Lexer.isHexDigit(la)) {
        lexer.consume(1);
        s.append(la);
        lc++;
      }
 else       if (lc > 0)       break;
 else       throw createParseException("unexepcted " + la);
    }
    return s.toString();
  }
  finally {
    if (debug)     dbg_leave("local_number");
  }
}

private static void appendDefaultValue(StringBuilder sb,FieldType fieldType,Object defaultValue){
  if (fieldType.isEscapedDefaultValue()) {
    appendEscapedWord(sb,defaultValue.toString());
  }
 else {
    sb.append(defaultValue);
  }
}

public MetadataBlockDataPicture(ByteBuffer rawdata) throws IOException, InvalidFrameException {
  initFromByteBuffer(rawdata);
}

public void previous(){
  if (current() == null) {
    return;
  }
  m_currentSearchIndex--;
  m_isBeforeFirst=false;
  m_isAfterLast=false;
  if (m_currentSearchIndex < 0) {
    m_currentSearchIndex=m_reducedResults.size() - 1;
    m_isBeforeFirst=true;
  }
}

public void testZeroOne(){
  byte aBytes[]={0};
  byte bBytes[]={1};
  int aSign=0;
  int bSign=1;
  byte rBytes[]={1};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.or(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

@Nullable public static Method findMethod(Class c,String name,Object... params){
  Class[] paramTypes=getParamTypes(params);
  Method method=null;
  try {
    method=c.getDeclaredMethod(name,paramTypes);
  }
 catch (  NoSuchMethodException e) {
    try {
      method=c.getMethod(name,paramTypes);
    }
 catch (    NoSuchMethodException e1) {
    }
  }
  if (method != null)   method.setAccessible(true);
  return method;
}

public void testPosZero(){
  byte aBytes[]={-2,-3,-4,-4,5,14,23,39,48,57,66,5,14,23};
  byte bBytes[]={0};
  int aSign=1;
  int bSign=0;
  byte rBytes[]={0,-2,-3,-4,-4,5,14,23,39,48,57,66,5,14,23};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.or(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public boolean closeAllSessions(){
  while (existsSession()) {
    SessionEditor sessionEditor=getFrontmostSessionEditor();
    SessionEditorWorkbench workbench=sessionEditor.getSessionWorkbench();
    SessionWrapper wrapper=workbench.getSessionWrapper();
    if (!wrapper.isSessionChanged()) {
      closeFrontmostSession();
      continue;
    }
    String name=sessionEditor.getName();
    int ret=JOptionPane.showConfirmDialog(JOptionUtils.centeringComp(),"Would you like to save the changes you made to " + name + "?","Advise needed...",JOptionPane.YES_NO_CANCEL_OPTION);
    if (ret == JOptionPane.NO_OPTION) {
      closeFrontmostSession();
      continue;
    }
 else     if (ret == JOptionPane.CANCEL_OPTION) {
      return false;
    }
    SaveSessionAsAction action=new SaveSessionAsAction();
    action.actionPerformed(new ActionEvent(this,ActionEvent.ACTION_PERFORMED,"Dummy close action"));
    if (!action.isSaved()) {
      int ret2=JOptionPane.showConfirmDialog(JOptionUtils.centeringComp(),"This session was not saved. Close session and continue anyway?","Advise needed...",JOptionPane.OK_CANCEL_OPTION);
      if (ret2 == JOptionPane.CANCEL_OPTION) {
        return false;
      }
    }
    closeFrontmostSession();
  }
  return true;
}

private void removeNonVisibleViews(final int offset){
  int childCount=getChildCount();
  if (mLastItemPosition != mAdapter.getCount() - 1 && childCount > 1) {
    View firstChild=getChildAt(0);
    while (firstChild != null && getChildBottom(firstChild) + offset < 0) {
      removeViewInLayout(firstChild);
      childCount--;
      mCachedItemViews.addLast(firstChild);
      mFirstItemPosition++;
      mListTopOffset+=getChildHeight(firstChild);
      if (childCount > 1) {
        firstChild=getChildAt(0);
      }
 else {
        firstChild=null;
      }
    }
  }
  if (mFirstItemPosition != 0 && childCount > 1) {
    View lastChild=getChildAt(childCount - 1);
    while (lastChild != null && getChildTop(lastChild) + offset > getHeight()) {
      removeViewInLayout(lastChild);
      childCount--;
      mCachedItemViews.addLast(lastChild);
      mLastItemPosition--;
      if (childCount > 1) {
        lastChild=getChildAt(childCount - 1);
      }
 else {
        lastChild=null;
      }
    }
  }
}

public RepeatedFieldBuilder<MType,BType,IType> addMessage(int index,MType message){
  if (message == null) {
    throw new NullPointerException();
  }
  ensureMutableMessageList();
  messages.add(index,message);
  if (builders != null) {
    builders.add(index,null);
  }
  onChanged();
  incrementModCounts();
  return this;
}

void unlock(Table t){
  locks.remove(t);
}

public void onExceededDatabaseQuota(String url,String databaseIdentifier,long currentQuota,long estimatedSize,long totalUsedQuota,WebStorage.QuotaUpdater quotaUpdater){
  if (LOGV_ENABLED) {
    Log.v(LOGTAG,"Received onExceededDatabaseQuota for " + url + ":"+ databaseIdentifier+ "(current quota: "+ currentQuota+ ", total used quota: "+ totalUsedQuota+ ")");
  }
  long totalUnusedQuota=mGlobalLimit - totalUsedQuota - mAppCacheMaxSize;
  if (totalUnusedQuota <= 0) {
    if (totalUsedQuota > 0) {
      scheduleOutOfSpaceNotification();
    }
    quotaUpdater.updateQuota(currentQuota);
    if (LOGV_ENABLED) {
      Log.v(LOGTAG,"onExceededDatabaseQuota: out of space.");
    }
    return;
  }
  long newOriginQuota=currentQuota;
  if (newOriginQuota == 0) {
    if (totalUnusedQuota >= estimatedSize) {
      newOriginQuota=estimatedSize;
    }
 else {
      if (LOGV_ENABLED) {
        Log.v(LOGTAG,"onExceededDatabaseQuota: Unable to satisfy" + " estimatedSize for the new database " + " (estimatedSize: " + estimatedSize + ", unused quota: "+ totalUnusedQuota);
      }
      newOriginQuota=0;
    }
  }
 else {
    long quotaIncrease=estimatedSize == 0 ? Math.min(QUOTA_INCREASE_STEP,totalUnusedQuota) : estimatedSize;
    newOriginQuota+=quotaIncrease;
    if (quotaIncrease > totalUnusedQuota) {
      newOriginQuota=currentQuota;
    }
  }
  quotaUpdater.updateQuota(newOriginQuota);
  if (LOGV_ENABLED) {
    Log.v(LOGTAG,"onExceededDatabaseQuota set new quota to " + newOriginQuota);
  }
}

protected String toValString(Set vals){
  StringBuilder sb=new StringBuilder();
  boolean first=true;
  for (Iterator i=vals.iterator(); i.hasNext(); ) {
    String val=(String)i.next();
    val=encodeVal(val);
    if (first) {
      first=false;
    }
 else {
      sb.append(',');
    }
    sb.append(val);
  }
  return sb.toString();
}

private String printOFormat(short x){
  String sx=null;
  if (x == Short.MIN_VALUE)   sx="100000";
 else   if (x < 0) {
    String t=Integer.toString((~(-x - 1)) ^ Short.MIN_VALUE,8);
switch (t.length()) {
case 1:
      sx="10000" + t;
    break;
case 2:
  sx="1000" + t;
break;
case 3:
sx="100" + t;
break;
case 4:
sx="10" + t;
break;
case 5:
sx="1" + t;
break;
}
}
 else sx=Integer.toString(x,8);
return printOFormat(sx);
}

public static JSONArray readJSONArray(final JSONArray jsonArray,final int index,final boolean required,final boolean notNull) throws JSONException {
  if (required) {
    return jsonArray.getJSONArray(index);
  }
  if (notNull && jsonArray.isNull(index)) {
    throw new JSONException(String.format(Locale.US,NULL_VALUE_FORMAT_ARRAY,index));
  }
  JSONArray value=null;
  if (!jsonArray.isNull(index)) {
    value=jsonArray.getJSONArray(index);
  }
  return value;
}

private static Bitmap resizePhoto(Bitmap realImage,float maxImageSize,boolean filter){
  float ratio=Math.min((float)maxImageSize / realImage.getWidth(),(float)maxImageSize / realImage.getHeight());
  int width=Math.round((float)ratio * realImage.getWidth());
  int height=Math.round((float)ratio * realImage.getHeight());
  Bitmap newBitmap=Bitmap.createScaledBitmap(realImage,width,height,filter);
  return newBitmap;
}

private Element createKeyValue() throws Exception {
  Element keyValueEle=null;
  PrivateKey key=idmClient.getTenantPrivateKey(tenantName);
  if (key != null) {
    RSAPrivateKey rsaKey=(RSAPrivateKey)key;
    Element rsaKeyEle=createRSAKeyValue(rsaKey);
    if (rsaKeyEle != null) {
      keyValueEle=doc.createElement(SAMLNames.DS_KEYVALUE);
      keyValueEle.appendChild(rsaKeyEle);
    }
  }
  return keyValueEle;
}

static protected void expandElement(Element el,List<Element> list){
  list.addAll(el.getChildren("display"));
  List<Element> children=el.getChildren();
  for (int i=0; i < children.size(); i++) {
    expandElement(children.get(i),list);
  }
}

static void load(){
}

public static String dump(Map<?,?> map){
  StringBuilder stringBuilder=new StringBuilder();
  for (  Map.Entry<?,?> entry : map.entrySet()) {
    stringBuilder.append(entry.getKey());
    stringBuilder.append(" : ");
    stringBuilder.append(entry.getValue());
  }
  return stringBuilder.toString();
}

public void changedUpdate(DocumentEvent e){
}

private void mergeCollapse(){
  while (stackSize > 1) {
    int n=stackSize - 2;
    if (n > 0 && runLen[n - 1] <= runLen[n] + runLen[n + 1]) {
      if (runLen[n - 1] < runLen[n + 1])       n--;
      mergeAt(n);
    }
 else     if (runLen[n] <= runLen[n + 1]) {
      mergeAt(n);
    }
 else {
      break;
    }
  }
}

private File findFile(File directory,String name) throws FileNotFoundException {
  File file=new File(directory,name);
  if (file.exists()) {
    return file;
  }
  for (  String child : directory.list()) {
    if (child.equalsIgnoreCase(name)) {
      return new File(directory,child);
    }
  }
  throw new FileNotFoundException("Missing file: " + file);
}

public void forceRewriteExif(String filename,Collection<ExifTag> tags) throws FileNotFoundException, IOException {
  if (!rewriteExif(filename,tags)) {
    ExifData tempData=mData;
    mData=new ExifData(DEFAULT_BYTE_ORDER);
    FileInputStream is=null;
    ByteArrayOutputStream bytes=null;
    try {
      is=new FileInputStream(filename);
      bytes=new ByteArrayOutputStream();
      doExifStreamIO(is,bytes);
      byte[] imageBytes=bytes.toByteArray();
      readExif(imageBytes);
      setTags(tags);
      writeExif(imageBytes,filename);
    }
 catch (    IOException e) {
      closeSilently(is);
      throw e;
    }
 finally {
      is.close();
      mData=tempData;
    }
  }
}

private boolean linkLast(Node<E> node){
  if (count >= capacity)   return false;
  Node<E> l=last;
  node.prev=l;
  last=node;
  if (first == null)   first=node;
 else   l.next=node;
  ++count;
  notEmpty.signal();
  return true;
}

protected void removeFromMaps(String clientType){
  Client client=(Client)clientTypeMap.get(clientType);
  externalClientData.remove(clientType);
  Map map=(Map)internalClientData.get(clientType);
  if (map == null) {
    removeFromClientMap(clientType,client);
  }
 else {
    handleParentChange(clientType,map);
  }
  unloadClient(clientType);
}

public String serialize(Object object) throws ConverterException {
  deep=0;
  StringBuilder sb=new StringBuilder();
  _serialize(object,sb,new HashSet<Object>());
  return sb.toString();
}

private void endList(boolean orderedList){
  if (!mParagraphStyles.isEmpty()) {
    AccumulatedParagraphStyle style=mParagraphStyles.peek();
    ParagraphType type=style.getType();
    if ((orderedList && (type.isNumbering() || type == ParagraphType.INDENTATION_OL)) || (!orderedList && (type.isBullet() || type == ParagraphType.INDENTATION_UL))) {
      int indent=style.getRelativeIndent();
      if (indent > 1) {
        style.setRelativeIndent(indent - 1);
        style.setAbsoluteIndent(style.getAbsoluteIndent() - 1);
      }
 else {
        mParagraphStyles.pop();
      }
    }
 else {
      mParagraphStyles.pop();
      endList(orderedList);
    }
  }
}

private void displayVerbose(ConsoleApplication app,String categoryName,String typeName,Tag tag,Set<String> propertyNames){
  LocalizableMessage c1=buildLine('=',MAX_LINE_WIDTH);
  LocalizableMessage c2=buildLine('-',MAX_LINE_WIDTH);
  boolean isFirstManagedObject=true;
  for (  String category : categoryMap.keySet()) {
    if (categoryName != null && !categoryName.equals(category)) {
      continue;
    }
    Map<String,AbstractManagedObjectDefinition<?,?>> subTypes=categoryMap.get(category);
    for (    String type : subTypes.keySet()) {
      if (typeName != null && !typeName.equals(type)) {
        continue;
      }
      AbstractManagedObjectDefinition<?,?> mod=subTypes.get(type);
      if (cannotDisplay(app,mod,tag)) {
        continue;
      }
      boolean isFirstProperty=true;
      Set<PropertyDefinition<?>> pds=getPropertyDefinitions(mod);
      for (      PropertyDefinition<?> pd : pds) {
        if (cannotDisplay(app,pd,propertyNames)) {
          continue;
        }
        if (isFirstProperty) {
          if (!isFirstManagedObject) {
            app.println();
            app.println(c1);
            app.println();
          }
 else {
            isFirstManagedObject=false;
          }
          app.println(INFO_DSCFG_HELP_HEADING_COMPONENT.get(mod.getUserFriendlyName()));
          app.println();
          app.println(mod.getSynopsis());
          if (mod.getDescription() != null) {
            app.println();
            app.println(mod.getDescription());
          }
        }
        app.println();
        app.println(c2);
        app.println();
        displayVerboseSingleProperty(app,mod,pd.getName());
        isFirstProperty=false;
      }
    }
  }
}

private static <T>void findUniqueGoals(Map<TestCase,Set<T>> testToGoals){
  Map<TestCase,Set<T>> goalMapCopy=new LinkedHashMap<>();
  for (  Map.Entry<TestCase,Set<T>> entry : testToGoals.entrySet()) {
    Set<T> goalSet=new LinkedHashSet<T>(entry.getValue());
    for (    Map.Entry<TestCase,Set<T>> otherEntry : testToGoals.entrySet()) {
      if (entry == otherEntry)       continue;
      goalSet.removeAll(otherEntry.getValue());
    }
    goalMapCopy.put(entry.getKey(),goalSet);
  }
  testToGoals.clear();
  testToGoals.putAll(goalMapCopy);
}

private static String formHead(String hair,String face,String neck){
  return String.join("",hair,face,neck);
}

public void terminate(){
  listeners.clear();
  lookupDisc.terminate();
  locatorDisc.terminate();
  if (dynamicLocatorDisc != null)   dynamicLocatorDisc.terminate();
}

public void start(){
  start=System.currentTimeMillis();
}

@Nullable public static String extractProtocol(@NotNull String url){
  int index=url.indexOf(URLUtil.SCHEME_SEPARATOR);
  if (index < 0)   return null;
  return url.substring(0,index);
}

protected void loadBuffer(){
  int resIdx=minuteSpacing / 5;
  if (resIdx < 0)   resIdx=0;
 else   if (resIdx > 3)   resIdx=3;
  String fileName=path + etopoFileNames[resIdx];
  dataBuffer=null;
  try {
    BinaryBufferedFile binFile=new BinaryBufferedFile(fileName);
    binFile.byteOrder(true);
    bufferWidth=etopoWidths[resIdx];
    bufferHeight=etopoHeights[resIdx];
    int spacer=1;
switch (minuteSpacing) {
case (2):
      spacer=1 + this.spacer;
    break;
case (5):
  spacer=0 + this.spacer;
break;
default :
spacer=1 + this.spacer;
}
dataBuffer=new short[(bufferWidth + spacer) * bufferHeight];
for (int i=0; i < bufferWidth * bufferHeight; i++) dataBuffer[i]=binFile.readShort();
binFile.close();
bufferWidth+=spacer;
}
 catch (FileNotFoundException e) {
Debug.error("ETOPOLayer loadBuffer(): file " + fileName + " not found");
}
catch (IOException e) {
Debug.error("ETOPOLayer loadBuffer(): File IO Error!\n" + e.toString());
}
catch (FormatException e) {
Debug.error("ETOPOLayer loadBuffer(): Format exception!\n" + e.toString());
}
}

protected VersionTag fetchRemoteVersionTag(Object key){
  VersionTag tag=null;
  assert this.dataPolicy != DataPolicy.REPLICATE;
  TransactionId txId=cache.getCacheTransactionManager().suspend();
  try {
    boolean retry=true;
    InternalDistributedMember member=getRandomReplicate();
    while (retry) {
      try {
        if (member == null) {
          break;
        }
        FetchVersionResponse response=RemoteFetchVersionMessage.send(member,this,key);
        tag=response.waitForResponse();
        retry=false;
      }
 catch (      RemoteOperationException e) {
        member=getRandomReplicate();
        if (member != null) {
          if (logger.isDebugEnabled()) {
            logger.debug("Retrying RemoteFetchVersionMessage on member:{}",member);
          }
        }
      }
    }
  }
  finally {
    if (txId != null) {
      cache.getCacheTransactionManager().resume(txId);
    }
  }
  return tag;
}

public Node replaceChild(Node newChild,Node oldChild) throws DOMException {
  if (oldChild == null || oldChild.getParentNode() != this)   return null;
  ElemTemplateElement newChildElem=((ElemTemplateElement)newChild);
  ElemTemplateElement oldChildElem=((ElemTemplateElement)oldChild);
  ElemTemplateElement prev=(ElemTemplateElement)oldChildElem.getPreviousSibling();
  if (null != prev)   prev.m_nextSibling=newChildElem;
  if (m_firstChild == oldChildElem)   m_firstChild=newChildElem;
  newChildElem.m_parentNode=this;
  oldChildElem.m_parentNode=null;
  newChildElem.m_nextSibling=oldChildElem.m_nextSibling;
  oldChildElem.m_nextSibling=null;
  return newChildElem;
}

public void paintDirty(){
  int size=0;
synchronized (displayLock) {
    size=paintQueueFill;
    Animation[] array=paintQueue;
    paintQueue=paintQueueTemp;
    paintQueueTemp=array;
    paintQueueFill=0;
  }
  if (size > 0) {
    Graphics wrapper=getCodenameOneGraphics();
    int dwidth=getDisplayWidth();
    int dheight=getDisplayHeight();
    int topX=dwidth;
    int topY=dheight;
    int bottomX=0;
    int bottomY=0;
    for (int iter=0; iter < size; iter++) {
      Animation ani=paintQueueTemp[iter];
      if (ani == null) {
        continue;
      }
      paintQueueTemp[iter]=null;
      wrapper.translate(-wrapper.getTranslateX(),-wrapper.getTranslateY());
      wrapper.setClip(0,0,dwidth,dheight);
      if (ani instanceof Component) {
        Component cmp=(Component)ani;
        Rectangle dirty=cmp.getDirtyRegion();
        if (dirty != null) {
          Dimension d=dirty.getSize();
          wrapper.setClip(dirty.getX(),dirty.getY(),d.getWidth(),d.getHeight());
          cmp.setDirtyRegion(null);
        }
        cmp.paintComponent(wrapper);
        getPaintableBounds(cmp,paintDirtyTmpRect);
        int cmpAbsX=paintDirtyTmpRect.getX();
        topX=Math.min(cmpAbsX,topX);
        bottomX=Math.max(cmpAbsX + paintDirtyTmpRect.getWidth(),bottomX);
        int cmpAbsY=paintDirtyTmpRect.getY();
        topY=Math.min(cmpAbsY,topY);
        bottomY=Math.max(cmpAbsY + paintDirtyTmpRect.getHeight(),bottomY);
      }
 else {
        bottomX=dwidth;
        bottomY=dheight;
        topX=0;
        topY=0;
        ani.paint(wrapper);
      }
    }
    paintOverlay(wrapper);
    flushGraphics(topX,topY,bottomX - topX,bottomY - topY);
  }
}

public static FSize calcTextSize(Paint paint,String demoText){
  Rect r=new Rect();
  paint.getTextBounds(demoText,0,demoText.length(),r);
  return new FSize(r.width(),r.height());
}

private boolean parseDelimiters(DelimiterProcessor delimiterProcessor,char delimiterChar){
  DelimiterData res=scanDelimiters(delimiterProcessor,delimiterChar);
  if (res == null) {
    return false;
  }
  int numDelims=res.count;
  int startIndex=index;
  index+=numDelims;
  Text node=appendText(input,startIndex,index);
  lastDelimiter=new Delimiter(node,delimiterChar,res.canOpen,res.canClose,lastDelimiter);
  lastDelimiter.numDelims=numDelims;
  if (lastDelimiter.previous != null) {
    lastDelimiter.previous.next=lastDelimiter;
  }
  return true;
}

private void clearMoney(){
  money.clear();
  updateMoney();
}

private void multiTouchController(){
  if (DEBUG)   Log.i("MultiTouch","Got here 6 - " + mMode + " "+ mCurrPt.getNumTouchPoints()+ " "+ mCurrPt.isDown()+ mCurrPt.isMultiTouch());
switch (mMode) {
case MODE_NOTHING:
    if (DEBUG)     Log.i("MultiTouch","MODE_NOTHING");
  if (mCurrPt.isDown()) {
    selectedObject=objectCanvas.getDraggableObjectAtPoint(mCurrPt);
    if (selectedObject != null) {
      mMode=MODE_DRAG;
      objectCanvas.selectObject(selectedObject,mCurrPt);
      anchorAtThisPositionAndScale();
      mSettleStartTime=mSettleEndTime=mCurrPt.getEventTime();
    }
  }
break;
case MODE_DRAG:
if (DEBUG) Log.i("MultiTouch","MODE_DRAG");
if (!mCurrPt.isDown()) {
mMode=MODE_NOTHING;
objectCanvas.selectObject((selectedObject=null),mCurrPt);
}
 else if (mCurrPt.isMultiTouch()) {
mMode=MODE_PINCH;
anchorAtThisPositionAndScale();
mSettleStartTime=mCurrPt.getEventTime();
mSettleEndTime=mSettleStartTime + EVENT_SETTLE_TIME_INTERVAL;
}
 else {
if (mCurrPt.getEventTime() < mSettleEndTime) {
anchorAtThisPositionAndScale();
}
 else {
performDragOrPinch();
}
}
break;
case MODE_PINCH:
if (DEBUG) Log.i("MultiTouch","MODE_PINCH");
if (!mCurrPt.isMultiTouch() || !mCurrPt.isDown()) {
if (!mCurrPt.isDown()) {
mMode=MODE_NOTHING;
objectCanvas.selectObject((selectedObject=null),mCurrPt);
}
 else {
mMode=MODE_DRAG;
anchorAtThisPositionAndScale();
mSettleStartTime=mCurrPt.getEventTime();
mSettleEndTime=mSettleStartTime + EVENT_SETTLE_TIME_INTERVAL;
}
}
 else {
if (Math.abs(mCurrPt.getX() - mPrevPt.getX()) > MAX_MULTITOUCH_POS_JUMP_SIZE || Math.abs(mCurrPt.getY() - mPrevPt.getY()) > MAX_MULTITOUCH_POS_JUMP_SIZE || Math.abs(mCurrPt.getMultiTouchWidth() - mPrevPt.getMultiTouchWidth()) * .5f > MAX_MULTITOUCH_DIM_JUMP_SIZE || Math.abs(mCurrPt.getMultiTouchHeight() - mPrevPt.getMultiTouchHeight()) * .5f > MAX_MULTITOUCH_DIM_JUMP_SIZE) {
anchorAtThisPositionAndScale();
mSettleStartTime=mCurrPt.getEventTime();
mSettleEndTime=mSettleStartTime + EVENT_SETTLE_TIME_INTERVAL;
}
 else if (mCurrPt.eventTime < mSettleEndTime) {
anchorAtThisPositionAndScale();
}
 else {
performDragOrPinch();
}
}
break;
}
if (DEBUG) Log.i("MultiTouch","Got here 7 - " + mMode + " "+ mCurrPt.getNumTouchPoints()+ " "+ mCurrPt.isDown()+ mCurrPt.isMultiTouch());
}

public void exec(String[] args) throws Throwable {
  URLClassLoader urlClassLoader=new URLClassLoader(classPath.toArray(new URL[classPath.size()]));
  Class<?> cls=urlClassLoader.loadClass(mainClass);
  Method method=cls.getDeclaredMethod("main",String[].class);
  method.setAccessible(true);
  try {
    method.invoke(null,new Object[]{args});
  }
 catch (  InvocationTargetException e) {
    throw e.getTargetException();
  }
}

public static String toString(URI uri,Charset encoding) throws IOException {
  return toString(uri.toURL(),Charsets.toCharset(encoding));
}

void rollbackLocalTransaction() throws RollbackFailedException {
  if (_tx == null) {
    return;
  }
  try {
    if (_logger.isLoggable(Level.FINEST)) {
      _logger.log(Level.FINEST,"Aborting local transaction: " + _tx);
    }
    _tx.abort();
  }
 catch (  Exception e) {
    if (_logger.isLoggable(Level.SEVERE)) {
      _logger.log(Level.SEVERE,"Internal error during local transaction abort: " + _tx,e);
    }
    throw new RollbackFailedException(e);
  }
}

public void write(char c[],int off,int len){
  if ((off < 0) || (off > c.length) || (len < 0)|| ((off + len) > c.length)|| ((off + len) < 0)) {
    throw new IndexOutOfBoundsException();
  }
 else   if (len == 0) {
    return;
  }
synchronized (lock) {
    int newcount=count + len;
    if (newcount > buf.length) {
      buf=Arrays.copyOf(buf,Math.max(buf.length << 1,newcount));
    }
    System.arraycopy(c,off,buf,count,len);
    count=newcount;
  }
}

private void writeJarPostResource(StringBuilder sb,String path){
  sb.append("className=\"" + JAR_RESOURCE_SET + "\" base=\"");
  sb.append(path.replace("&","&amp;"));
}

public static String normalize(String value){
  if (value == null)   return value;
  value=value.trim();
  if (value.indexOf("  ") == -1)   return value;
  boolean space=false;
  int len=value.length();
  StringBuffer b=new StringBuffer(len);
  for (int i=0; i < len; i++) {
    char v=value.charAt(i);
    if (v == ' ') {
      if (!space)       b.append(v);
      space=true;
    }
 else {
      b.append(v);
      space=false;
    }
  }
  return b.toString();
}

protected static void appendDecorations(int basePos,String sourceCode,CreateSimpleLexer langHandler,List<Object> out){
  if (sourceCode == null) {
    throw new NullPointerException("argument 'sourceCode' cannot be null");
  }
  Job job=new Job();
  job.setSourceCode(sourceCode);
  job.setBasePos(basePos);
  langHandler.decorate(job);
  out.addAll(job.getDecorations());
}

protected CarbonDictionaryColumnMetaChunk readLastChunkFromDictionaryMetadataFile(DictionaryColumnUniqueIdentifier dictionaryColumnUniqueIdentifier) throws IOException {
  DictionaryService dictService=CarbonCommonFactory.getDictionaryService();
  CarbonDictionaryMetadataReader columnMetadataReaderImpl=dictService.getDictionaryMetadataReader(dictionaryColumnUniqueIdentifier.getCarbonTableIdentifier(),dictionaryColumnUniqueIdentifier.getColumnIdentifier(),carbonStorePath);
  CarbonDictionaryColumnMetaChunk carbonDictionaryColumnMetaChunk=null;
  try {
    carbonDictionaryColumnMetaChunk=columnMetadataReaderImpl.readLastEntryOfDictionaryMetaChunk();
  }
  finally {
    columnMetadataReaderImpl.close();
  }
  return carbonDictionaryColumnMetaChunk;
}

public static ExternalAppId determineExternalIntentSource(String packageName,Intent intent){
  String appId=IntentUtils.safeGetStringExtra(intent,Browser.EXTRA_APPLICATION_ID);
  ExternalAppId externalId=ExternalAppId.OTHER;
  if (appId == null) {
    String url=getUrlFromIntent(intent);
    if (url != null && url.startsWith(TWITTER_LINK_PREFIX)) {
      externalId=ExternalAppId.TWITTER;
    }
 else     if (url != null && url.startsWith(FACEBOOK_LINK_PREFIX)) {
      externalId=ExternalAppId.FACEBOOK;
    }
 else     if (url != null && url.startsWith(NEWS_LINK_PREFIX)) {
      externalId=ExternalAppId.NEWS;
    }
  }
 else {
    if (appId.equals(PACKAGE_PLUS)) {
      externalId=ExternalAppId.PLUS;
    }
 else     if (appId.equals(PACKAGE_GMAIL)) {
      externalId=ExternalAppId.GMAIL;
    }
 else     if (appId.equals(PACKAGE_HANGOUTS)) {
      externalId=ExternalAppId.HANGOUTS;
    }
 else     if (appId.equals(PACKAGE_MESSENGER)) {
      externalId=ExternalAppId.MESSENGER;
    }
 else     if (appId.equals(PACKAGE_LINE)) {
      externalId=ExternalAppId.LINE;
    }
 else     if (appId.equals(PACKAGE_WHATSAPP)) {
      externalId=ExternalAppId.WHATSAPP;
    }
 else     if (appId.equals(PACKAGE_GSA)) {
      externalId=ExternalAppId.GSA;
    }
 else     if (appId.equals(packageName)) {
      externalId=ExternalAppId.CHROME;
    }
  }
  return externalId;
}

protected TableHDU(Header hdr,T td){
  super(hdr,td);
}

public void pushStylesheet(Stylesheet s){
  if (m_stylesheets.size() == 0)   m_stylesheetRoot=(StylesheetRoot)s;
  m_stylesheets.push(s);
}

public boolean isBlank(final CharSequence cs){
  int strLen;
  if (cs == null || (strLen=cs.length()) == 0) {
    return true;
  }
  for (int i=0; i < strLen; i++) {
    if (!Character.isWhitespace(cs.charAt(i))) {
      return false;
    }
  }
  return true;
}

public void stop() throws IOException, InterruptedException {
  thread.interrupt();
  selector.wakeup();
}

private Document parse(final String data,DocumentBuilder docBuilder){
  if (docBuilder == null || data == null) {
    return null;
  }
  Document document=null;
  try {
    StringBuilder buf=new StringBuilder(1024);
    if (!data.startsWith("<?xml")) {
      buf.append(BEGIN_PART);
    }
    buf.append(data);
    if (!data.endsWith(END_PART)) {
      buf.append(END_PART);
    }
    InputSource inputSource=new InputSource(new StringReader(buf.toString()));
    document=docBuilder.parse(inputSource);
  }
 catch (  Exception e) {
    LOGGER.warn("Problem with creating document: " + e.getMessage());
  }
  return document;
}

private XNetReply loadChars(java.io.BufferedReader istream) throws java.io.IOException {
  String s="";
  s=istream.readLine();
  if (log.isDebugEnabled()) {
    log.debug("Received from port: " + s);
  }
  if (s == null) {
    return null;
  }
 else {
    return new XNetReply(s);
  }
}

public synchronized void removeConnectionManager(final HttpConnectionManager connectionManager){
  if (shutdown) {
    throw new IllegalStateException("IdleConnectionTimeoutThread has been shutdown");
  }
  connectionManagers.remove(connectionManager);
}

private boolean addState(long stateNumber){
  if (firstState < 0) {
    firstState=stateNumber;
  }
 else   if (stepSize < 0) {
    stepSize=(int)(stateNumber - firstState);
  }
 else {
    int step=(int)(stateNumber - lastState);
    if (step != stepSize) {
      return false;
    }
  }
  lastState=stateNumber;
  return true;
}

public void reset(){
  adler=1;
}

public static boolean isLibraryResourceRoot(@Nullable VirtualFile res){
  if (res != null) {
    VirtualFile aar=res.getParent();
    if (aar != null) {
      VirtualFile exploded=aar.getParent();
      if (exploded != null) {
        String name=exploded.getName();
        if (name.equals(EXPLODED_BUNDLES) || name.equals(EXPLODED_AAR)) {
          return true;
        }
      }
    }
  }
  return false;
}

public void failEngine(String reason,@Nullable Throwable failure){
  if (failEngineLock.tryLock()) {
    store.incRef();
    try {
      try {
        closeNoLock("engine failed on: [" + reason + "]");
      }
  finally {
        if (failedEngine != null) {
          logger.debug("tried to fail engine but engine is already failed. ignoring. [{}]",reason,failure);
          return;
        }
        logger.warn("failed engine [{}]",failure,reason);
        failedEngine=(failure != null) ? failure : new IllegalStateException(reason);
        if (Lucene.isCorruptionException(failure)) {
          try {
            store.markStoreCorrupted(new IOException("failed engine (reason: [" + reason + "])",ExceptionsHelper.unwrapCorruption(failure)));
          }
 catch (          IOException e) {
            logger.warn("Couldn't mark store corrupted",e);
          }
        }
        failedEngineListener.onFailedEngine(shardId,reason,failure);
      }
    }
 catch (    Throwable t) {
      logger.warn("failEngine threw exception",t);
    }
 finally {
      store.decRef();
    }
  }
 else {
    logger.debug("tried to fail engine but could not acquire lock - engine should be failed by now [{}]",reason,failure);
  }
}

public void clear(){
  values.clear();
}

@Override default CompletableFuture<OptionalInt> maxInt(final ToIntFunction<? super T> fn){
  return CompletableFuture.supplyAsync(null,getExec());
}

private void addVNXFileStorageSystemIntoCache(String storageSystemURI,DistributedQueueItemProcessedCallback callBack){
  if (StringUtils.isNotEmpty(storageSystemURI)) {
    VNXFILE_CACHE.put(storageSystemURI,callBack);
  }
}

void resetToPreferredSizes(int availableSize){
  int[] testSizes=getPreferredSizes();
  int totalSize=0;
  for (int counter=0; counter < 3; counter++) {
    if (testSizes[counter] != -1) {
      totalSize+=testSizes[counter];
    }
  }
  if (totalSize > availableSize) {
    testSizes=getMinimumSizes();
    totalSize=0;
    for (int counter=0; counter < 3; counter++) {
      if (testSizes[counter] != -1) {
        totalSize+=testSizes[counter];
      }
    }
  }
  setSizes(testSizes);
  distributeSpace(availableSize - totalSize,false);
}

@Override public byte[] decode(byte[] data) throws Exception {
  if (data[0] == 0 && data[1] == 0 && data[2] == 0) {
    return data;
  }
  int bufSize=512000;
  FastByteArrayOutputStream bos=null;
  boolean failed=true;
  final int orgSize=data.length;
  if (data != null) {
    while (failed) {
      final Inflater inf=new Inflater();
      inf.setInput(data);
      final int size=data.length;
      bos=new FastByteArrayOutputStream(size);
      if (size < bufSize) {
        bufSize=size;
      }
      final byte[] buf=new byte[bufSize];
      int count;
      try {
        while (!inf.finished()) {
          count=inf.inflate(buf);
          bos.write(buf,0,count);
          if (inf.getRemaining() == 0) {
            break;
          }
        }
        failed=false;
      }
 catch (      final Exception ee) {
        LogWriter.writeLog("Exception in Flate " + ee);
        failed=true;
        hasError=true;
        if (data.length == orgSize && data.length > 10000) {
          failed=false;
        }
 else         if (data.length > 10) {
          final byte[] newData=new byte[data.length - 1];
          System.arraycopy(data,0,newData,0,data.length - 1);
          data=newData;
        }
 else {
          failed=false;
        }
      }
    }
    data=bos.toByteArray();
    return applyPredictor(predictor,data,colors,bitsPerComponent,columns);
  }
  return data;
}

public boolean isProcessing(){
  return mRunning.get();
}

public Criteria or(){
  Criteria criteria=createCriteriaInternal();
  oredCriteria.add(criteria);
  return criteria;
}

private static InputStreamReader decompressWith7Zip(final String archivePath) throws ConfigurationException {
  PATH_PROGRAM_7ZIP=(String)config.getConfigParameter(ConfigurationKeys.PATH_PROGRAM_7ZIP);
  if (PATH_PROGRAM_7ZIP == null) {
    throw ErrorFactory.createConfigurationException(ErrorKeys.CONFIGURATION_PARAMETER_UNDEFINED);
  }
  try {
    Runtime runtime=Runtime.getRuntime();
    Process p=runtime.exec(PATH_PROGRAM_7ZIP + " e " + archivePath+ " -so");
    return new InputStreamReader(p.getInputStream(),WIKIPEDIA_ENCODING);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}

public void makeImmutable(){
  if (isMutable) {
    isMutable=false;
  }
}

private final Object arenaExchange(Object item,boolean timed,long ns){
  Node[] a=arena;
  Node p=participant.get();
  for (int i=p.index; ; ) {
    int b, m, c;
    long j;
    Node q=(Node)U.getObjectVolatile(a,j=(i << ASHIFT) + ABASE);
    if (q != null && U.compareAndSwapObject(a,j,q,null)) {
      Object v=q.item;
      q.match=item;
      Thread w=q.parked;
      if (w != null)       U.unpark(w);
      return v;
    }
 else     if (i <= (m=(b=bound) & MMASK) && q == null) {
      p.item=item;
      if (U.compareAndSwapObject(a,j,null,p)) {
        long end=(timed && m == 0) ? System.nanoTime() + ns : 0L;
        Thread t=Thread.currentThread();
        for (int h=p.hash, spins=SPINS; ; ) {
          Object v=p.match;
          if (v != null) {
            U.putOrderedObject(p,MATCH,null);
            p.item=null;
            p.hash=h;
            return v;
          }
 else           if (spins > 0) {
            h^=h << 1;
            h^=h >>> 3;
            h^=h << 10;
            if (h == 0)             h=SPINS | (int)t.getId();
 else             if (h < 0 && (--spins & ((SPINS >>> 1) - 1)) == 0)             Thread.yield();
          }
 else           if (U.getObjectVolatile(a,j) != p)           spins=SPINS;
 else           if (!t.isInterrupted() && m == 0 && (!timed || (ns=end - System.nanoTime()) > 0L)) {
            U.putObject(t,BLOCKER,this);
            p.parked=t;
            if (U.getObjectVolatile(a,j) == p)             U.park(false,ns);
            p.parked=null;
            U.putObject(t,BLOCKER,null);
          }
 else           if (U.getObjectVolatile(a,j) == p && U.compareAndSwapObject(a,j,p,null)) {
            if (m != 0)             U.compareAndSwapInt(this,BOUND,b,b + SEQ - 1);
            p.item=null;
            p.hash=h;
            i=p.index>>>=1;
            if (Thread.interrupted())             return null;
            if (timed && m == 0 && ns <= 0L)             return TIMED_OUT;
            break;
          }
        }
      }
 else       p.item=null;
    }
 else {
      if (p.bound != b) {
        p.bound=b;
        p.collides=0;
        i=(i != m || m == 0) ? m : m - 1;
      }
 else       if ((c=p.collides) < m || m == FULL || !U.compareAndSwapInt(this,BOUND,b,b + SEQ + 1)) {
        p.collides=c + 1;
        i=(i == 0) ? m : i - 1;
      }
 else       i=m + 1;
      p.index=i;
    }
  }
}

public void send(String data) throws IOException {
  DatagramPacket dp=new DatagramPacket(data.getBytes(),data.length(),multicastGroup);
  datagramSocket.send(dp);
}

private void removeStaleRangeReferences(){
  removeStaleReferences(rangeReferenceQueue,ranges);
}

private boolean isExported(URI id,List<URI> exportedVolumes){
  return exportedVolumes.contains(id);
}

private String fixMonitorLinks(String fixString,String dumpName){
  if (fixString.indexOf("monitor://") > 0) {
    fixString=fixString.replaceAll("monitor://","monitor:/" + dumpName + "/");
  }
  return (fixString);
}

protected static TestDimensionConfig buildStandardDimensionConfig(TestApiDimensionName dimensionName){
  return new TestDimensionConfig(dimensionName,dimensionName.asName(),getDefaultKeyValueStore(dimensionName),getDefaultSearchProvider(),getDefaultFields(),getDefaultFields());
}

public String toString(){
  StringBuffer sb=new StringBuffer("VerifyingProxyPreparer[");
  if (type != SET_CONSTRAINTS) {
    sb.append(type == AS_IS ? "false, " : "true, ");
  }
  sb.append(loader);
  sb.append(", {");
  for (int i=0; i < contextElements.length; i++) {
    if (i > 0) {
      sb.append(", ");
    }
    sb.append(contextElements[i]);
  }
  if (principals == null) {
    sb.append("}, null, {");
  }
 else {
    sb.append("}, {");
    for (int i=0; i < principals.length; i++) {
      if (i > 0) {
        sb.append(", ");
      }
      sb.append(principals[i]);
    }
    sb.append("}, {");
  }
  for (int i=0; i < permissions.length; i++) {
    if (i > 0) {
      sb.append(", ");
    }
    sb.append(permissions[i]);
  }
  sb.append("}]");
  return sb.toString();
}

public synchronized void cacheReposts(List<Long> newRepostIds){
  TreeSet<Long> reposts=new TreeSet<>();
  reposts.addAll(Longs.asList(repostCache.get()));
  reposts.addAll(newRepostIds);
  repostCache.set(Longs.toArray(reposts));
}

public boolean isNavigationAtBottom(){
  return (mSmallestWidthDp >= 600 || mInPortrait);
}

protected final Class<?> defineClass(String className,byte[] classRep,int offset,int length) throws ClassFormatError {
  return defineClass(className,classRep,offset,length,null);
}

public boolean rewriteExif(ByteBuffer buf,Collection<ExifTag> tags) throws IOException {
  ExifModifier mod=null;
  try {
    mod=new ExifModifier(buf,this);
    for (    ExifTag t : tags) {
      mod.modifyTag(t);
    }
    return mod.commit();
  }
 catch (  ExifInvalidFormatException e) {
    throw new IOException("Invalid exif format : " + e);
  }
}

private void writeNewlineOnDebug(XMLStreamWriter out) throws XMLStreamException {
  if (LOG.isDebugging()) {
    out.writeCharacters("\n");
  }
}

public RequestHandle put(String url,ResponseHandlerInterface responseHandler){
  return put(null,url,null,responseHandler);
}

public Discretize(Element discretize,FieldMetaInfo.Optype opType,ArrayList<Attribute> fieldDefs) throws Exception {
  super(opType,fieldDefs);
  m_fieldName=discretize.getAttribute("field");
  m_mapMissingTo=discretize.getAttribute("mapMissingTo");
  if (m_mapMissingTo != null && m_mapMissingTo.length() > 0) {
    m_mapMissingDefined=true;
  }
  m_defaultValue=discretize.getAttribute("defaultValue");
  if (m_defaultValue != null && m_defaultValue.length() > 0) {
    m_defaultValueDefined=true;
  }
  NodeList dbL=discretize.getElementsByTagName("DiscretizeBin");
  for (int i=0; i < dbL.getLength(); i++) {
    Node dbN=dbL.item(i);
    if (dbN.getNodeType() == Node.ELEMENT_NODE) {
      Element dbE=(Element)dbN;
      DiscretizeBin db=new DiscretizeBin(dbE,m_opType);
      m_bins.add(db);
    }
  }
  if (fieldDefs != null) {
    setUpField();
  }
}

private static String quadTree(final MapTile aTile){
  StringBuilder quadKey=new StringBuilder();
  for (int i=aTile.zoomLevel; i > 0; i--) {
    int digit=0;
    int mask=1 << (i - 1);
    if ((aTile.x & mask) != 0)     digit+=1;
    if ((aTile.y & mask) != 0)     digit+=2;
    quadKey.append(digit);
  }
  return quadKey.toString();
}

public static int[] concatAllInt(int[]... arrays){
  int totalLength=0;
  final int subArrayCount=arrays.length;
  for (int i=0; i < subArrayCount; ++i) {
    totalLength+=arrays[i].length;
  }
  int[] result=Arrays.copyOf(arrays[0],totalLength);
  int offset=arrays[0].length;
  for (int i=1; i < subArrayCount; ++i) {
    System.arraycopy(arrays[i],0,result,offset,arrays[i].length);
    offset+=arrays[i].length;
  }
  return result;
}

public static double log1p(double value){
  if (USE_JDK_MATH) {
    return STRICT_MATH ? StrictMath.log1p(value) : Math.log1p(value);
  }
  if (false) {
    if (value == Double.POSITIVE_INFINITY) {
      return Double.POSITIVE_INFINITY;
    }
    double valuePlusOne=1 + value;
    if (valuePlusOne == 1.0) {
      return value;
    }
 else {
      return FastMath.log(valuePlusOne) * (value / (valuePlusOne - 1.0));
    }
  }
  if (value > -1.0) {
    if (value == Double.POSITIVE_INFINITY) {
      return Double.POSITIVE_INFINITY;
    }
    double valuePlusOne=1.0 + value;
    if (valuePlusOne == 1.0) {
      return value;
    }
 else     if (Math.abs(value) < 0.15) {
      double z=value / (value + 2.0);
      double z2=z * z;
      return z * (2 + z2 * ((2.0 / 3) + z2 * ((2.0 / 5) + z2 * ((2.0 / 7) + z2 * ((2.0 / 9) + z2 * ((2.0 / 11)))))));
    }
    int valuePlusOneBitsHi=(int)(Double.doubleToRawLongBits(valuePlusOne) >> 32) & 0x7FFFFFFF;
    int valuePlusOneExp=(valuePlusOneBitsHi >> 20) - MAX_DOUBLE_EXPONENT;
    int xIndex=((valuePlusOneBitsHi << 12) >>> (32 - LOG_BITS));
    double z=(valuePlusOne * twoPowTab[-valuePlusOneExp - MIN_DOUBLE_EXPONENT]) * logXInvTab[xIndex] - 1;
    z*=(1 - z * ((1.0 / 2) - z * (1.0 / 3)));
    return valuePlusOneExp * LOG_2 + logXLogTab[xIndex] + (z + (value - (valuePlusOne - 1)) / valuePlusOne);
  }
 else   if (value == -1.0) {
    return Double.NEGATIVE_INFINITY;
  }
 else {
    return Double.NaN;
  }
}

public static long[] ones(int bits){
  long[] v=new long[((bits - 1) >>> LONG_LOG2_SIZE) + 1];
  final int fillWords=bits >>> LONG_LOG2_SIZE;
  final int fillBits=bits & LONG_LOG2_MASK;
  Arrays.fill(v,0,fillWords,LONG_ALL_BITS);
  if (fillWords < v.length) {
    v[v.length - 1]=(1L << fillBits) - 1;
  }
  return v;
}

private boolean checkCurrentKeyAge() throws NumberFormatException {
  long currentTokenKeyTS=Long.parseLong(_cachedTokenKeysBundle.getCurrentKeyEntry());
  long now=System.currentTimeMillis();
  long diff=now - currentTokenKeyTS;
  if (diff >= _keyRotationIntervalInMsecs) {
    return false;
  }
  return true;
}

public final void pushContextNodeList(DTMIterator nl){
  m_contextNodeLists.push(nl);
}

public void note(Element e,String msg){
  messager.printMessage(Diagnostic.Kind.NOTE,msg,e);
}

public static PublicKey generatePublicKey(String encodedPublicKey){
  try {
    byte[] decodedKey=Base64.decode(encodedPublicKey,Base64.DEFAULT);
    KeyFactory keyFactory=KeyFactory.getInstance(KEY_FACTORY_ALGORITHM);
    return keyFactory.generatePublic(new X509EncodedKeySpec(decodedKey));
  }
 catch (  NoSuchAlgorithmException e) {
    throw new RuntimeException(e);
  }
catch (  InvalidKeySpecException e) {
    Log.e(TAG,"Invalid key specification.");
    throw new IllegalArgumentException(e);
  }
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> result=new Vector<Option>();
  result.addAll(Collections.list(super.listOptions()));
  result.addElement(new Option("\tSuppresses the 'BibTex:' prolog in the Javadoc.","noprolog",0,"-noprolog"));
  return result.elements();
}

public TrustSource add(File trustedCAPemFile){
  if (trustedCAPemFile == null) {
    throw new IllegalArgumentException("Trusted CA file cannot be null");
  }
  String pemFileContents;
  try {
    pemFileContents=Files.toString(trustedCAPemFile,Charset.forName("UTF-8"));
  }
 catch (  IOException e) {
    throw new UncheckedIOException("Unable to read file containing PEM-encoded trusted CAs: " + trustedCAPemFile.getAbsolutePath(),e);
  }
  return add(pemFileContents);
}

StringVector processSTRINGLIST(StylesheetHandler handler,String uri,String name,String rawName,String value){
  StringTokenizer tokenizer=new StringTokenizer(value," \t\n\r\f");
  int nStrings=tokenizer.countTokens();
  StringVector strings=new StringVector(nStrings);
  for (int i=0; i < nStrings; i++) {
    strings.addElement(tokenizer.nextToken());
  }
  return strings;
}

private String checkforRegex(String aRegexFragment){
  final StringBuilder result=new StringBuilder();
  final StringCharacterIterator iterator=new StringCharacterIterator(aRegexFragment);
  char character=iterator.current();
  while (character != CharacterIterator.DONE) {
    if (character == '.') {
      result.append("\\.");
    }
 else     if (character == '\\') {
      result.append("\\\\");
    }
 else     if (character == '?') {
      result.append("\\?");
    }
 else     if (character == '*') {
      result.append("\\*");
    }
 else     if (character == '+') {
      result.append("\\+");
    }
 else     if (character == '&') {
      result.append("\\&");
    }
 else     if (character == ':') {
      result.append("\\:");
    }
 else     if (character == '{') {
      result.append("\\{");
    }
 else     if (character == '}') {
      result.append("\\}");
    }
 else     if (character == '[') {
      result.append("\\[");
    }
 else     if (character == ']') {
      result.append("\\]");
    }
 else     if (character == '(') {
      result.append("\\(");
    }
 else     if (character == ')') {
      result.append("\\)");
    }
 else     if (character == '^') {
      result.append("\\^");
    }
 else     if (character == '$') {
      result.append("\\$");
    }
 else     if (character == '|') {
      result.append("\\|");
    }
 else {
      result.append(character);
    }
    character=iterator.next();
  }
  return result.toString();
}

protected void drawValueLabel(DrawingContext context,Slice slice,double radius,Row row,int rowIndex){
  Comparable<?> value=slice.end - slice.start;
  Format format=getValueFormat();
  if ((format == null) && (value instanceof Number)) {
    format=NumberFormat.getInstance();
  }
  String text=(format != null) ? format.format(value) : value.toString();
  ColorMapper colors=getValueColor();
  Paint paint=colors.get(rowIndex);
  Font font=getValueFont();
  double fontSize=font.getSize2D();
  Location location=getValueLocation();
  double alignX=getValueAlignmentX();
  double alignY=getValueAlignmentY();
  double rotation=getValueRotation();
  double distance=getValueDistance();
  if (MathUtils.isCalculatable(distance)) {
    distance*=fontSize;
  }
 else {
    distance=0.0;
  }
  double radiusRelOuter=getOuterRadius();
  double radiusRelInner=getInnerRadius();
  double radiusOuter=radius * radiusRelOuter;
  double radiusInner=radius * radiusRelInner;
  double distanceV=distance;
  double labelPosV;
  if (location == Location.NORTH) {
    labelPosV=radiusOuter + distanceV;
  }
 else   if (location == Location.SOUTH) {
    labelPosV=Math.max(radiusInner - distanceV,0);
  }
 else {
    double sliceHeight=radiusOuter - radiusInner;
    if (2.0 * distance >= sliceHeight) {
      alignY=0.5;
      distanceV=0.0;
    }
    labelPosV=radiusInner + distanceV + alignY * (sliceHeight - 2.0 * distanceV);
  }
  double sum=plot.getSum(row.getSource());
  if (sum == 0.0) {
    return;
  }
  double sliceStartRel=slice.start / sum;
  double sliceEndRel=slice.end / sum;
  double circumference=2.0 * labelPosV * Math.PI;
  double distanceRelH=distance / circumference;
  double sliceWidthRel=sliceEndRel - sliceStartRel;
  if (2.0 * distanceRelH >= sliceWidthRel) {
    alignX=0.5;
    distanceRelH=0.0;
  }
  double labelPosRelH=sliceStartRel + distanceRelH + alignX * (sliceWidthRel - 2.0 * distanceRelH);
  double start=plot.getStart();
  double angleStart=Math.toRadians(-start);
  double direction=1.0;
  if (!plot.isClockwise()) {
    direction=-1.0;
  }
  double angle=angleStart + direction * labelPosRelH * 2.0* Math.PI;
  double dirX=Math.cos(angle);
  double dirY=Math.sin(angle);
  Label label=new Label(text);
  label.setAlignmentX(1.0 - 0.5 * dirX - 0.5);
  label.setAlignmentY(0.5 * dirY + 0.5);
  label.setRotation(rotation);
  label.setColor(paint);
  label.setFont(font);
  Dimension2D sizeLabel=label.getPreferredSize();
  double anchorX=0.5;
  double anchorY=0.5;
  if (location == Location.NORTH || location == Location.SOUTH) {
    anchorX=dirX * sizeLabel.getWidth() / 2.0;
    anchorY=dirY * sizeLabel.getHeight() / 2.0;
    if (location == Location.SOUTH) {
      anchorX=-anchorX;
      anchorY=-anchorY;
    }
  }
  double x=labelPosV * dirX + anchorX - sizeLabel.getWidth() / 2.0;
  double y=labelPosV * dirY + anchorY - sizeLabel.getHeight() / 2.0;
  double w=sizeLabel.getWidth();
  double h=sizeLabel.getHeight();
  label.setBounds(x,y,w,h);
  label.draw(context);
}

public static void downto(Float self,Number to,@ClosureParams(FirstParam.class) Closure closure){
  float to1=to.floatValue();
  if (self >= to1) {
    for (float i=self; i >= to1; i--) {
      closure.call(i);
    }
  }
 else   throw new GroovyRuntimeException("The argument (" + to + ") to downto() cannot be greater than the value ("+ self+ ") it's called on.");
}

public static AttributeDescription objectClass(){
  return OBJECT_CLASS;
}

public void addKeyValueComment(String keyName,String value){
  int keyIndex;
  if ((keyIndex=findKeyCommentIndex(keyName)) < 0) {
    keyValComments.add("! " + keyName + ": "+ value+ "\n");
    return;
  }
  log.warn("Key " + keyName + " already exists in key/value set.  Overriding previous value!");
  keyValComments.set(keyIndex,"! " + keyName + ": "+ value+ "\n");
}

private String isInputChecked(String dataSet,String value){
  if (dataSet != null && dataSet.equals(value)) {
    return " checked";
  }
  return "";
}

public final void popSubContextList(){
  m_axesIteratorStack.pop();
}

private DriverTask createDriverTask(String taskType){
  String taskID=String.format("%s+%s+%s",HP3PARConstants.DRIVER_NAME,taskType,UUID.randomUUID());
  DriverTask task=new HP3PARDriverTask(taskID);
  return task;
}

public static void write(File file,CharSequence data,Charset encoding,boolean append) throws IOException {
  String str=data == null ? null : data.toString();
  writeStringToFile(file,str,encoding,append);
}

public void store(Element cat,List<String> trees){
  CatalogTreeManager manager=InstanceManager.getDefault(jmri.CatalogTreeManager.class);
  cat.setAttribute("class","jmri.jmrit.catalog.DefaultCatalogTreeManagerConfigXML");
  Iterator<String> iter=trees.iterator();
  while (iter.hasNext()) {
    String sname=iter.next();
    if (sname == null) {
      log.error("System name null during store");
      continue;
    }
    if (log.isDebugEnabled()) {
      log.debug("system name is " + sname);
    }
    if (sname.charAt(1) != CatalogTree.XML) {
      continue;
    }
    CatalogTree ct=manager.getBySystemName(sname);
    Element elem=new Element("catalogTree");
    elem.setAttribute("systemName",sname);
    String uname=ct.getUserName();
    if (uname != null) {
      elem.setAttribute("userName",uname);
    }
    storeNode(elem,ct.getRoot());
    if (log.isDebugEnabled()) {
      log.debug("store CatalogTree " + sname);
    }
    cat.addContent(elem);
  }
}

public boolean isEnabled(){
  return enabled;
}

public Criteria createCriteria(){
  Criteria criteria=createCriteriaInternal();
  if (oredCriteria.size() == 0) {
    oredCriteria.add(criteria);
  }
  return criteria;
}

public static boolean loadTexture(int glId,int file){
  InputStream is=Resource.getResInputStream(file);
  Bitmap bitmap=null;
  try {
    BitmapFactory.Options opts=new BitmapFactory.Options();
    opts.inScaled=false;
    bitmap=BitmapFactory.decodeStream(is,null,opts);
  }
 catch (  Exception e) {
    Log.e(TAG,"Could not read texture file " + file,e);
    return false;
  }
 finally {
    try {
      is.close();
    }
 catch (    Exception e) {
      Log.e(TAG,"Error closing stream",e);
    }
  }
  return loadTexture(glId,bitmap);
}

public static int roll1D100(){
  return rand.nextInt(100) + 1;
}

public ZipfianGenerator(long min,long max,double _zipfianconstant,double _zetan){
  items=max - min + 1;
  base=min;
  zipfianconstant=_zipfianconstant;
  theta=zipfianconstant;
  zeta2theta=zeta(2,theta);
  alpha=1.0 / (1.0 - theta);
  zetan=_zetan;
  countforzeta=items;
  eta=(1 - Math.pow(2.0 / items,1 - theta)) / (1 - zeta2theta / zetan);
  nextInt();
}

public void removeRole(RoleEntity role){
  roles.remove(role);
}

final boolean transferAfterCancelledWait(Node node){
  if (compareAndSetWaitStatus(node,Node.CONDITION,0)) {
    enq(node);
    return true;
  }
  while (!isOnSyncQueue(node))   Thread.yield();
  return false;
}

private Map processEvent(MatchResult result){
  Map map=new HashMap();
  for (int i=1; i < result.groupCount() + 1; i++) {
    Object key=matchingKeywords.get(i - 1);
    Object value=result.group(i);
    map.put(key,value);
  }
  return map;
}

public void addExtension(String ext){
  exts.add(ext.toLowerCase());
}

private void displaySimple(PrintStream output){
  output.println("First-Order Effects");
  for (int j=0; j < P; j++) {
    double[] a0=new double[N];
    double[] a1=new double[N];
    double[] a2=new double[N];
    for (int i=0; i < N; i++) {
      a0[i]=A[i];
      a1[i]=C_A[i][j];
      a2[i]=B[i];
    }
    double value=computeFirstOrder(a0,a1,a2,N);
    output.print(value < 0 ? 0.0 : value);
    if (j < P - 1) {
      output.print('\t');
    }
  }
  output.println();
  output.println("Total-Order Effects");
  for (int j=0; j < P; j++) {
    double[] a0=new double[N];
    double[] a1=new double[N];
    double[] a2=new double[N];
    for (int i=0; i < N; i++) {
      a0[i]=A[i];
      a1[i]=C_A[i][j];
      a2[i]=B[i];
    }
    double value=computeTotalOrder(a0,a1,a2,N);
    output.print(value < 0 ? 0.0 : value);
    if (j < P - 1) {
      output.print('\t');
    }
  }
  output.println();
}

public boolean equals(Object o){
  if (o == this)   return true;
  if (!(o instanceof MBeanAttributeInfo))   return false;
  MBeanAttributeInfo p=(MBeanAttributeInfo)o;
  return (Objects.equals(p.getName(),getName()) && Objects.equals(p.getType(),getType()) && Objects.equals(p.getDescription(),getDescription())&& Objects.equals(p.getDescriptor(),getDescriptor())&& p.isReadable() == isReadable() && p.isWritable() == isWritable() && p.isIs() == isIs());
}

protected boolean handleDirectory(File directory,String[] contentNames) throws SecurityException {
  boolean continueWandering=true;
  for (  String child : contentNames) {
    boolean keepGoing=handleEntry(new File(directory.getAbsolutePath() + File.separator,child));
    if (!keepGoing) {
      continueWandering=exhaustiveSearch;
      if (!continueWandering) {
        break;
      }
    }
  }
  return continueWandering;
}

int size(){
  return Integer.bitCount(set);
}

public boolean hasNext(){
  return iterator.hasNext();
}

public static double vectorDistance(double[] vec1,double[] vec2,double power,double oneOverPower){
  double result=0;
  if (power == 0) {
    for (int i=0; i < vec1.length; i++) {
      result+=vec1[i] - vec2[i] == 0 ? 0 : 1;
    }
  }
 else   if (power == 1.0) {
    for (int i=0; i < vec1.length; i++) {
      result+=Math.abs(vec1[i] - vec2[i]);
    }
  }
 else   if (power == 2.0) {
    result=Math.sqrt(distSquaredCartesian(vec1,vec2));
  }
 else   if (power == Integer.MAX_VALUE || Double.isInfinite(power)) {
    for (int i=0; i < vec1.length; i++) {
      result=Math.max(result,Math.max(vec1[i],vec2[i]));
    }
  }
 else {
    for (int i=0; i < vec1.length; i++) {
      result+=Math.pow(vec1[i] - vec2[i],power);
    }
    result=Math.pow(result,oneOverPower);
  }
  return result;
}

public static String formatNumber(final long number){
  long divided=number;
  final StringBuffer sb=new StringBuffer();
  while (divided > 1000) {
    long rest=divided % 1000;
    sb.insert(0," " + String.format("%03d",rest));
    divided=divided / 1000;
  }
  long rest=divided % 1000;
  sb.insert(0,rest);
  return sb.toString();
}

private boolean isSubsumed(String selector,Iterable<String> others){
  for (  String other : others) {
    if (subsumes(other,selector)) {
      return true;
    }
  }
  return false;
}

private void displayValues(){
  log("cup2 task - attribute settings: \n ========================",Project.MSG_INFO);
  log("spec..........: " + this.spec);
  log("- source......: " + getSpecAbsolutePath());
  log("- serialized..: " + getSerializedSpecAbsolutePath());
  log("specdir.......: " + this.specdir);
  log("cup2srcdir....: " + this.cup2srcdir);
  log("classpath.....: " + this.classpath);
  log("algorithm.....: " + this.algorithm);
  log("verbose.......: " + this.verbose);
  log("parsetable....: " + this.parsetable);
  log(" ========================");
}

private List<View> addView(View view,List<View> cache){
  if (cache == null) {
    cache=new LinkedList<View>();
  }
  cache.add(view);
  return cache;
}

private boolean checkTouchingMinTarget(int index,MotionEvent event){
  if (isTouchingMinTarget(index,event)) {
    lastTouchedMin=true;
    isTouchingMinTarget.add(event.getPointerId(index));
    if (!minAnimator.isRunning()) {
      minAnimator=getMinTargetAnimator(true);
      minAnimator.start();
    }
    return true;
  }
  return false;
}

public boolean isCanceled(){
  if (pane == null)   return false;
  Object v=pane.getValue();
  return ((v != null) && (cancelOption.length == 1) && (v.equals(cancelOption[0])));
}

public int availableProcessors(){
  return RVMThread.availableProcessors;
}

public void updateDebug(Boolean debug,Boolean database,Boolean exception,Boolean tracing,Boolean dump,Boolean timer,Boolean implicitAccess,Boolean queryUsage) throws SecurityException {
  checkWriteAccess();
  boolean hasAccess=ConfigWebUtil.hasAccess(config,SecurityManager.TYPE_DEBUGGING);
  if (!hasAccess)   throw new SecurityException("no access to change debugging settings");
  Element debugging=_getRootElement("debugging");
  if (debug != null)   debugging.setAttribute("debug",Caster.toString(debug.booleanValue()));
 else   debugging.removeAttribute("debug");
  if (database != null)   debugging.setAttribute("database",Caster.toString(database.booleanValue()));
 else   debugging.removeAttribute("database");
  if (exception != null)   debugging.setAttribute("exception",Caster.toString(exception.booleanValue()));
 else   debugging.removeAttribute("exception");
  if (tracing != null)   debugging.setAttribute("tracing",Caster.toString(tracing.booleanValue()));
 else   debugging.removeAttribute("tracing");
  if (dump != null)   debugging.setAttribute("dump",Caster.toString(dump.booleanValue()));
 else   debugging.removeAttribute("dump");
  if (timer != null)   debugging.setAttribute("timer",Caster.toString(timer.booleanValue()));
 else   debugging.removeAttribute("timer");
  if (implicitAccess != null)   debugging.setAttribute("implicit-access",Caster.toString(implicitAccess.booleanValue()));
 else   debugging.removeAttribute("implicit-access");
  if (queryUsage != null)   debugging.setAttribute("query-usage",Caster.toString(queryUsage.booleanValue()));
 else   debugging.removeAttribute("query-usage");
}

public final static void debug(String s){
  if (DEBUG)   debug.println("// Debug: " + s);
}

public static final void writeLongArrayXml(long[] val,String name,XmlSerializer out) throws XmlPullParserException, IOException {
  if (val == null) {
    out.startTag(null,"null");
    out.endTag(null,"null");
    return;
  }
  out.startTag(null,"long-array");
  if (name != null) {
    out.attribute(null,"name",name);
  }
  final int N=val.length;
  out.attribute(null,"num",Integer.toString(N));
  for (int i=0; i < N; i++) {
    out.startTag(null,"item");
    out.attribute(null,"value",Long.toString(val[i]));
    out.endTag(null,"item");
  }
  out.endTag(null,"long-array");
}

public static <T extends GenericEntity>List<T> filterByOr(List<T> values,List<? extends EntityCondition> exprs){
  if (values == null)   return null;
  if (UtilValidate.isEmpty(exprs)) {
    return values;
  }
  List<T> result=new LinkedList<T>();
  for (  T value : values) {
    boolean include=false;
    for (    EntityCondition condition : exprs) {
      include=condition.entityMatches(value);
      if (include)       break;
    }
    if (include) {
      result.add(value);
    }
  }
  return result;
}

private boolean checkTouchSlop(View child,float dx,float dy){
  if (child == null) {
    return false;
  }
  final boolean checkHorizontal=mCallback.getViewHorizontalDragRange(child) > 0;
  final boolean checkVertical=mCallback.getViewVerticalDragRange(child) > 0;
  if (checkHorizontal && checkVertical) {
    return dx * dx + dy * dy > mTouchSlop * mTouchSlop;
  }
 else   if (checkHorizontal) {
    return Math.abs(dx) > mTouchSlop;
  }
 else   if (checkVertical) {
    return Math.abs(dy) > mTouchSlop;
  }
  return false;
}

@Override public RES next(REQ req){
  writeTraceLog(req,middlewareName);
  if (predicate.test(req)) {
    RES res=middleware.handle(req,next);
    writeTraceLog(res,middlewareName);
    return res;
  }
 else   if (next != null) {
    RES res=(RES)next.next(req);
    writeTraceLog(res,middlewareName);
    return res;
  }
 else {
    return null;
  }
}

protected void read(long offset,byte[] b) throws IOException {
  rafile.seek(offset);
  if (rafile.read(b) != b.length) {
    throw new IOException("Not enough bytes available in file " + getPath());
  }
}

public void run(){
  final FetcherInfo info=FetcherInfo.getFetcherInfo();
  try {
    fetchloop();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
 finally {
synchronized (info.waitList) {
      Thread me=Thread.currentThread();
      for (int i=0; i < info.fetchers.length; i++) {
        if (info.fetchers[i] == me) {
          info.fetchers[i]=null;
          info.numFetchers--;
        }
      }
    }
  }
}

public CtClass makeAnnotation(String name) throws RuntimeException {
  try {
    CtClass cc=makeInterface(name,get("java.lang.annotation.Annotation"));
    cc.setModifiers(cc.getModifiers() | Modifier.ANNOTATION);
    return cc;
  }
 catch (  NotFoundException e) {
    throw new RuntimeException(e.getMessage(),e);
  }
}

public void testNegateMathContextNegative(){
  String a="-92948782094488478231212478987482988429808779810457634781384756794987";
  int aScale=49;
  int precision=46;
  RoundingMode rm=RoundingMode.CEILING;
  MathContext mc=new MathContext(precision,rm);
  String c="9294878209448847823.121247898748298842980877982";
  int cScale=27;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal res=aNumber.negate(mc);
  assertEquals("incorrect value",c,res.toString());
  assertEquals("incorrect scale",cScale,res.scale());
}

public void add(Node node){
  availableNodes.add(node);
}

public void write(OutputStream out) throws IOException {
  DataOutputStream dataOut=new DataOutputStream(out);
  dataOut.writeShort(pool.size() + 1);
  for (  Entry e : pool) {
    e.write(dataOut);
  }
}

protected ForeignKeyConstraint buildForeignKeyConstraint(List<String> fkFieldNames,List<String> pkFieldNames,TableDefinition targetTable,DatabasePlatform platform){
  assert fkFieldNames.size() > 0 && fkFieldNames.size() == pkFieldNames.size();
  ForeignKeyConstraint fkConstraint=new ForeignKeyConstraint();
  for (int i=0; i < fkFieldNames.size(); i++) {
    fkConstraint.getSourceFields().add(fkFieldNames.get(i));
    fkConstraint.getTargetFields().add(pkFieldNames.get(i));
  }
  fkConstraint.setTargetTable(targetTable.getFullName());
  String fkFieldName=fkFieldNames.get(0);
  String name=buildForeignKeyConstraintName(this.getName(),fkFieldName,platform.getMaxForeignKeyNameSize(),platform);
  fkConstraint.setName(name);
  return fkConstraint;
}

public static boolean isRewritableBatch(String queryString,boolean noBackslashEscapes){
  LexState state=LexState.Normal;
  char lastChar='\0';
  boolean singleQuotes=false;
  boolean endingSemicolon=false;
  char[] query=queryString.toCharArray();
  int queryLength=query.length;
  for (int i=0; i < queryLength; i++) {
    if (state == LexState.Escape)     state=LexState.String;
    char car=query[i];
switch (car) {
case '*':
      if (state == LexState.Normal && lastChar == '/')       state=LexState.SlashStarComment;
    break;
case '/':
  if (state == LexState.SlashStarComment && lastChar == '*') {
    state=LexState.Normal;
  }
 else   if (state == LexState.Normal && lastChar == '/') {
    state=LexState.EOLComment;
  }
break;
case '#':
if (state == LexState.Normal) state=LexState.EOLComment;
break;
case '-':
if (state == LexState.Normal && lastChar == '-') {
state=LexState.EOLComment;
}
break;
case ';':
if (state == LexState.Normal) {
endingSemicolon=true;
}
break;
case '\n':
if (state == LexState.EOLComment) {
state=LexState.Normal;
}
break;
case '"':
if (state == LexState.Normal) {
state=LexState.String;
singleQuotes=false;
}
 else if (state == LexState.String && !singleQuotes) {
state=LexState.Normal;
}
break;
case '\'':
if (state == LexState.Normal) {
state=LexState.String;
singleQuotes=true;
}
 else if (state == LexState.String && singleQuotes) {
state=LexState.Normal;
}
break;
case '\\':
if (noBackslashEscapes) {
break;
}
if (state == LexState.String) state=LexState.Escape;
break;
case '`':
if (state == LexState.Backtick) {
state=LexState.Normal;
}
 else if (state == LexState.Normal) {
state=LexState.Backtick;
}
break;
default :
if (state == LexState.Normal && endingSemicolon && ((byte)car >= 40)) {
endingSemicolon=false;
}
break;
}
lastChar=car;
}
return state != LexState.EOLComment && !endingSemicolon;
}

private boolean zzRefill() throws java.io.IOException {
  if (zzStartRead > 0) {
    System.arraycopy(zzBuffer,zzStartRead,zzBuffer,0,zzEndRead - zzStartRead);
    zzEndRead-=zzStartRead;
    zzCurrentPos-=zzStartRead;
    zzMarkedPos-=zzStartRead;
    zzPushbackPos-=zzStartRead;
    zzStartRead=0;
  }
  if (zzCurrentPos >= zzBuffer.length) {
    char newBuffer[]=new char[zzCurrentPos * 2];
    System.arraycopy(zzBuffer,0,newBuffer,0,zzBuffer.length);
    zzBuffer=newBuffer;
  }
  int numRead=zzReader.read(zzBuffer,zzEndRead,zzBuffer.length - zzEndRead);
  if (numRead < 0) {
    return true;
  }
 else {
    zzEndRead+=numRead;
    return false;
  }
}

public ServerBuilder(Config config){
  Objects.requireNonNull(config);
  _config=config;
}

private static LDAPFilter createSubstringFilter(SubstringFilter sf) throws LDAPException, IOException {
  List<Object> anyo=sf.getAny();
  ArrayList<ByteString> subAnyElements=new ArrayList<>(anyo.size());
  for (  Object o : anyo) {
    subAnyElements.add(ByteStringUtility.convertValue(o));
  }
  if (sf.getInitial() == null && subAnyElements.isEmpty() && sf.getFinal() == null) {
    LocalizableMessage message=ERR_LDAP_FILTER_DECODE_NULL.get();
    throw new LDAPException(LDAPResultCode.PROTOCOL_ERROR,message);
  }
  return LDAPFilter.createSubstringFilter(sf.getName(),sf.getInitial() == null ? null : ByteStringUtility.convertValue(sf.getInitial()),subAnyElements,sf.getFinal() == null ? null : ByteStringUtility.convertValue(sf.getFinal()));
}

public void testCompareNegNeg2(){
  byte aBytes[]={10,20,30,40,50,60,70,10,20,30};
  byte bBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  int aSign=-1;
  int bSign=-1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  assertEquals(1,aNumber.compareTo(bNumber));
}

@Override protected void onSizeChanged(int w,int h,int oldw,int oldh){
  if (readySent) {
    setScaleAndCenter(getScale(),getCenter());
  }
}

protected void disown(AbstractNode child) throws IllegalStateException {
  ensureParentage(child);
  child.parent=null;
}

public String qName2String(QName qName,boolean writeNS){
  String prefix=null;
  String namespaceURI=qName.getNamespace();
  String localPart=qName.getLocalPart();
  if (localPart != null && localPart.length() > 0) {
    int index=localPart.indexOf(':');
    if (index != -1) {
      prefix=localPart.substring(0,index);
      if (prefix.length() > 0 && !prefix.equals("urn")) {
        registerPrefixForURI(prefix,namespaceURI);
        localPart=localPart.substring(index + 1);
      }
 else {
        prefix=null;
      }
    }
    localPart=getLastLocalPart(localPart);
  }
  if (namespaceURI.length() == 0) {
    if (writeNS) {
      String defaultNS=nsStack.getNamespaceURI("");
      if (defaultNS != null && defaultNS.length() > 0) {
        registerPrefixForURI("","");
      }
    }
  }
 else {
    prefix=getPrefixForURI(namespaceURI,qName.getPreferredPrefix());
  }
  if ((prefix == null) || (prefix.length() == 0))   return localPart;
  return prefix + ':' + localPart;
}

public JSONException(Throwable cause){
  super(cause.getMessage());
  this.cause=cause;
}

@Override public void close() throws XMLStreamException {
  log.log(Level.FINE,"close()");
  stream.close();
}

public void testDivideRoundHalfUpNeg2(){
  String a="-37361671119238118911893939591735";
  int aScale=10;
  String b="74723342238476237823787879183470";
  int bScale=15;
  String c="-1E+5";
  int resScale=-5;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  BigDecimal result=aNumber.divide(bNumber,resScale,BigDecimal.ROUND_HALF_UP);
  assertEquals("incorrect value",c,result.toString());
  assertEquals("incorrect scale",resScale,result.scale());
}

@Override public String readLine() throws IOException {
  if (this.pointer >= this.data.length - 1) {
    return null;
  }
 else {
    final StringBuilder buf=new StringBuilder();
    int c;
    while ((c=read()) >= 0) {
      if ((c == 10) || (c == 13)) {
        if (((peek() == 10) || (peek() == 13)) && (peek() != c)) {
          read();
        }
        break;
      }
      buf.append((char)c);
    }
    return buf.toString();
  }
}

protected static Map attrSetToMap(AttrSet attrSet,boolean fetchByteValues){
  Map attributesMap=new AMHashMap(fetchByteValues);
  if (attrSet == null) {
    return attributesMap;
  }
  int attrSetSize=attrSet.size();
  if (!fetchByteValues) {
    for (int i=0; i < attrSetSize; i++) {
      Attr attr=attrSet.elementAt(i);
      String values[]=attr.getStringValues();
      attributesMap.put(attr.getName(),stringArrayToSet(values));
    }
  }
 else {
    for (int i=0; i < attrSetSize; i++) {
      Attr attr=attrSet.elementAt(i);
      attributesMap.put(attr.getName(),attr.getByteValues());
    }
  }
  return attributesMap;
}

public void testGetMinCRL(){
  X509CRLSelector selector=new X509CRLSelector();
  assertNull("Initially the minCRL should be null.",selector.getMinCRL());
  BigInteger minCRL=new BigInteger("10000");
  selector.setMinCRLNumber(minCRL);
  assertTrue("The result should be equal to specified.",minCRL.equals(selector.getMinCRL()));
}

public <E>E parseResponseData(GDataRequest req,Class<E> resultType) throws IOException, ServiceException {
  InputProperties inputProperties=new ClientInputProperties(req,resultType);
  return parseResponseData(req.getParseSource(),inputProperties,resultType);
}

public void addRtpStreamListener(RtpStreamListener rtpStreamListener){
  mRtpStreamListener=rtpStreamListener;
}

public synchronized byte[] toByteArray(){
  int remaining=count;
  if (remaining == 0) {
    return EMPTY_BYTE_ARRAY;
  }
  byte[] newbuf=new byte[remaining];
  int pos=0;
  for (  byte[] buf : buffers) {
    int c=Math.min(buf.length,remaining);
    System.arraycopy(buf,0,newbuf,pos,c);
    pos+=c;
    remaining-=c;
    if (remaining == 0) {
      break;
    }
  }
  return newbuf;
}

public void addVolumesToConsistencyGroup(String cgName,List<String> virtualVolumeNames) throws VPlexApiException {
  s_logger.info("Request to add volumes to a consistency group on VPlex at {}",_baseURI);
  _cgMgr.addVolumesToConsistencyGroup(cgName,virtualVolumeNames);
}

public void testConstructorSignBytesPositive6(){
  byte aBytes[]={12,56,100,-2,-76,89,45,91,3,-15,23,-101};
  int aSign=1;
  byte rBytes[]={12,56,100,-2,-76,89,45,91,3,-15,23,-101};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=aNumber.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,aNumber.signum());
}

public static boolean looksLikeAFontStyle(String val){
  return FONT_STYLES.indexOf(val) >= 0;
}

public static void dumpCursor(ICursor cursor,int maxColumnWidth){
  StringBuilder builder=new StringBuilder("\n");
  dumpCursor(cursor,maxColumnWidth,builder);
  Logger.d(Logger.LOG_TAG,builder.toString());
}

static int computeValidLevels(long bitPattern){
  return Long.bitCount(bitPattern);
}

public static void runUnderLock(ReentrantLock lock,Runnable runnable){
  lock.lock();
  try {
    runnable.run();
  }
  finally {
    lock.unlock();
  }
}

private static boolean dateByMonth(DateTimeFormatterBuilder bld,Collection<DateTimeFieldType> fields,boolean extended,boolean strictISO){
  boolean reducedPrec=false;
  if (fields.remove(DateTimeFieldType.year())) {
    bld.append(yearElement());
    if (fields.remove(DateTimeFieldType.monthOfYear())) {
      if (fields.remove(DateTimeFieldType.dayOfMonth())) {
        appendSeparator(bld,extended);
        bld.appendMonthOfYear(2);
        appendSeparator(bld,extended);
        bld.appendDayOfMonth(2);
      }
 else {
        bld.appendLiteral('-');
        bld.appendMonthOfYear(2);
        reducedPrec=true;
      }
    }
 else {
      if (fields.remove(DateTimeFieldType.dayOfMonth())) {
        checkNotStrictISO(fields,strictISO);
        bld.appendLiteral('-');
        bld.appendLiteral('-');
        bld.appendDayOfMonth(2);
      }
 else {
        reducedPrec=true;
      }
    }
  }
 else   if (fields.remove(DateTimeFieldType.monthOfYear())) {
    bld.appendLiteral('-');
    bld.appendLiteral('-');
    bld.appendMonthOfYear(2);
    if (fields.remove(DateTimeFieldType.dayOfMonth())) {
      appendSeparator(bld,extended);
      bld.appendDayOfMonth(2);
    }
 else {
      reducedPrec=true;
    }
  }
 else   if (fields.remove(DateTimeFieldType.dayOfMonth())) {
    bld.appendLiteral('-');
    bld.appendLiteral('-');
    bld.appendLiteral('-');
    bld.appendDayOfMonth(2);
  }
  return reducedPrec;
}

@Override public int insert(String elem){
  int firstIndex=(int)(elem.charAt(0) - 'a');
  int lastIndex=(int)(elem.charAt(elem.length() - 2) - 'a');
  storage[firstIndex * 26 + lastIndex]=elem;
  return 1;
}

public void clearMovementData(){
  pathSprites=new ArrayList<StepSprite>();
  movementTarget=null;
  checkFoVHexImageCacheClear();
  repaint();
  refreshMoveVectors();
}

public void threadRecordFailure(Throwable t){
  threadFailure.compareAndSet(null,t);
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

protected Boolean replayCompletion(Participant participant) throws IllegalStateException {
  if (!replayStack_.contains(participant)) {
    replayStack_.push(participant);
  }
  return committed_;
}

public static <V>boolean addDistinctEntry(List<V> sourceList,V entry){
  return (sourceList != null && !sourceList.contains(entry)) ? sourceList.add(entry) : false;
}

public void testDecoder7(){
  boolean res;
  String originalAppIdName=mAppIdName;
  int originalContentTypeValue=mContentTypeValue;
  Random rd=new Random();
  for (int i=0; i < OMA_CONTENT_TYPE_NAMES.length; i++) {
    mContentTypeName=OMA_CONTENT_TYPE_NAMES[i];
    byte[] pdu=createPDU(7);
    WspTypeDecoder pduDecoder=new WspTypeDecoder(pdu);
    res=pduDecoder.decodeContentType(mWspContentTypeStart);
    assertTrue(res);
    Log.d(LOG_TAG,"mContentTypeName: [" + mContentTypeName + "], val: ["+ pduDecoder.getValueString()+ "]");
    assertTrue(mContentTypeName.equals(pduDecoder.getValueString()));
  }
  mAppIdName=originalAppIdName;
  mContentTypeValue=originalContentTypeValue;
}

public void shutdownNow(){
  shutdown=true;
  final Future<?> f=engineFuture.get();
  if (f != null) {
    if (log.isInfoEnabled())     log.info("Cancelling engineFuture: " + this);
    f.cancel(true);
  }
  final ExecutorService s=engineService.get();
  if (s != null) {
    if (log.isInfoEnabled())     log.info("Terminating engineService: " + this);
    s.shutdownNow();
  }
  final HttpClient cm=clientConnectionManagerRef.get();
  if (cm != null) {
    if (log.isInfoEnabled())     log.info("Terminating HttpClient: " + this);
    try {
      cm.stop();
    }
 catch (    Exception e) {
      log.error("Problem stopping HttpClient",e);
    }
  }
  for (  AbstractRunningQuery q : runningQueries.values()) {
    q.cancel(true);
  }
  priorityQueue.clear();
  deadlineQueue.clear();
  engineFuture.set(null);
  engineService.set(null);
  clientConnectionManagerRef.set(null);
}

static public void addNotificationListener(JMXConnector jmxConnector,Class<?> mbeanClass,NotificationListener notificationListener) throws InstanceNotFoundException, Exception {
  MBeanServerConnection mbsc=jmxConnector.getMBeanServerConnection();
  ObjectName objectName=generateMBeanObjectName(mbeanClass);
  mbsc.addNotificationListener(objectName,notificationListener,null,null);
}

protected String toHTML(String s){
  String result;
  result=s;
  result=result.replaceAll("&","&amp;");
  result=result.replaceAll("<","&lt;");
  result=result.replaceAll(">","&gt;");
  result=result.replaceAll("@","&#64;");
  result=result.replaceAll("\n","<br/>\n");
  return result;
}

@Override public synchronized void clear(){
  File[] files=mRootDirectory.listFiles();
  if (files != null) {
    for (    File file : files) {
      file.delete();
    }
  }
  mEntries.clear();
  mTotalSize=0;
  VolleyLog.d("Cache cleared.");
}

protected void normalizeScores(){
  double hub_ssum=0;
  double auth_ssum=0;
  for (  V v : graph.getVertices()) {
    double hub_val=getOutputValue(v).hub;
    double auth_val=getOutputValue(v).authority;
    hub_ssum+=(hub_val * hub_val);
    auth_ssum+=(auth_val * auth_val);
  }
  hub_ssum=Math.sqrt(hub_ssum);
  auth_ssum=Math.sqrt(auth_ssum);
  for (  V v : graph.getVertices()) {
    HITS.Scores values=getOutputValue(v);
    setOutputValue(v,new HITS.Scores(values.hub / hub_ssum,values.authority / auth_ssum));
  }
}

public static int absoluteMax(int[] intArray){
  int max=Integer.MIN_VALUE;
  for (int i=0; i < intArray.length; i++) {
    if (Math.abs(intArray[i]) > max && intArray[i] != 0) {
      max=intArray[i];
    }
  }
  return max == Integer.MIN_VALUE ? 0 : max;
}

private boolean doAcquireNanos(long arg,long nanosTimeout) throws InterruptedException {
  if (nanosTimeout <= 0L)   return false;
  final long deadline=System.nanoTime() + nanosTimeout;
  final Node node=addWaiter(Node.EXCLUSIVE);
  boolean failed=true;
  try {
    for (; ; ) {
      final Node p=node.predecessor();
      if (p == head && tryAcquire(arg)) {
        setHead(node);
        p.next=null;
        failed=false;
        return true;
      }
      nanosTimeout=deadline - System.nanoTime();
      if (nanosTimeout <= 0L)       return false;
      if (shouldParkAfterFailedAcquire(p,node) && nanosTimeout > spinForTimeoutThreshold)       LockSupport.parkNanos(this,nanosTimeout);
      if (Thread.interrupted())       throw new InterruptedException();
    }
  }
  finally {
    if (failed)     cancelAcquire(node);
  }
}

boolean hasMinFeatureCount(String feature){
  if (minFeatureCount == 0)   return true;
  Set<Integer> ids=clippedFeatureIndex.get(feature);
  if (ids == null)   return false;
  return ids.size() >= minFeatureCount;
}

void mutate(){
  do {
    int iBit;
    do {
      iBit=m_random.nextInt(m_nNodes * m_nNodes);
    }
 while (isSquare(iBit));
    m_bits[iBit]=!m_bits[iBit];
  }
 while (hasCycles());
  calcScore();
}

public void put(E e) throws InterruptedException {
  checkNotNull(e);
  final ReentrantLock lock=this.lock;
  lock.lockInterruptibly();
  try {
    while (count == items.length)     notFull.await();
    enqueue(e);
  }
  finally {
    lock.unlock();
  }
}

private void deleteComments(SpanManager sm){
  int start=0;
  while ((start=sm.indexOf("<!--",start)) != -1) {
    int end=sm.indexOf("-->",start + 4) + 3;
    if (end == -1 + 3) {
      end=sm.length();
    }
    try {
      if (lineSeparator.equals(sm.substring(start - lineSeparator.length(),start)) && lineSeparator.equals(sm.substring(end,end + lineSeparator.length()))) {
        end+=lineSeparator.length();
      }
    }
 catch (    IndexOutOfBoundsException e) {
    }
    sm.delete(start,end);
  }
}

DateTimeParseContext(DateTimeFormatter formatter){
  super();
  this.formatter=formatter;
  parsed.add(new Parsed());
}

public static boolean isNetworkTypeCellular(String networkType){
  return networkType.equals("MOBILE");
}

private void defineInternalFrameCloseButtons(UIDefaults d){
  String p="InternalFrame:InternalFrameTitlePane:\"InternalFrameTitlePane.closeButton\"";
  String c=PAINTER_PREFIX + "TitlePaneCloseButtonPainter";
  d.put(p + ".States","Enabled,MouseOver,Pressed,Disabled,Focused,Selected,WindowNotFocused");
  d.put(p + ".WindowNotFocused",new TitlePaneCloseButtonWindowNotFocusedState());
  d.put(p + ".contentMargins",new InsetsUIResource(0,0,0,0));
  d.put(p + "[Disabled].backgroundPainter",new LazyPainter(c,TitlePaneCloseButtonPainter.Which.BACKGROUND_DISABLED));
  d.put(p + "[Enabled].backgroundPainter",new LazyPainter(c,TitlePaneCloseButtonPainter.Which.BACKGROUND_ENABLED));
  d.put(p + "[MouseOver].backgroundPainter",new LazyPainter(c,TitlePaneCloseButtonPainter.Which.BACKGROUND_MOUSEOVER));
  d.put(p + "[Pressed].backgroundPainter",new LazyPainter(c,TitlePaneCloseButtonPainter.Which.BACKGROUND_PRESSED));
  d.put(p + "[Enabled+WindowNotFocused].backgroundPainter",new LazyPainter(c,TitlePaneCloseButtonPainter.Which.BACKGROUND_ENABLED_WINDOWNOTFOCUSED));
  d.put(p + "[MouseOver+WindowNotFocused].backgroundPainter",new LazyPainter(c,TitlePaneCloseButtonPainter.Which.BACKGROUND_MOUSEOVER));
  d.put(p + "[Pressed+WindowNotFocused].backgroundPainter",new LazyPainter(c,TitlePaneCloseButtonPainter.Which.BACKGROUND_PRESSED_WINDOWNOTFOCUSED));
  d.put(p + ".icon",new SeaGlassIcon(p,"iconPainter",43,18));
}

private void modify(StoragePort port,String portNetworkId){
  port.setPortNetworkId(portNetworkId);
  dbClient.persistObject(port);
  modifiedStoragePortsList.add(port);
}

public boolean is(String word){
  return m_Words.contains(word.toLowerCase());
}

public static final String removeMultipleSpacesAndReturns(final String data){
  final StringBuilder all_data=new StringBuilder(data);
  int i=1;
  while (i < all_data.length()) {
    if (((all_data.charAt(i) == ' ') && (all_data.charAt(i - 1) == ' ')) || ((all_data.charAt(i) == Character.LINE_SEPARATOR) && (all_data.charAt(i - 1) == Character.LINE_SEPARATOR))) {
      all_data.deleteCharAt(i);
    }
 else {
      i++;
    }
  }
  return all_data.toString();
}

public void removeListener(ConnectableDeviceListener listener){
  listeners.remove(listener);
}

protected boolean readAttributes(DataInputStream d,int attributes_count,attribute_info[] ai) throws IOException {
  attribute_info a=null;
  int i;
  int j;
  long len;
  String s;
  for (i=0; i < attributes_count; i++) {
    j=d.readUnsignedShort();
    len=d.readInt() & 0xFFFFFFFFL;
    s=((CONSTANT_Utf8_info)(constant_pool[j])).convert();
    if (s.compareTo(attribute_info.SourceFile) == 0) {
      SourceFile_attribute sa=new SourceFile_attribute();
      sa.sourcefile_index=d.readUnsignedShort();
      a=(attribute_info)sa;
    }
 else     if (s.compareTo(attribute_info.ConstantValue) == 0) {
      ConstantValue_attribute ca=new ConstantValue_attribute();
      ca.constantvalue_index=d.readUnsignedShort();
      a=(attribute_info)ca;
    }
 else     if (s.compareTo(attribute_info.Code) == 0) {
      Code_attribute ca=new Code_attribute();
      ca.max_stack=d.readUnsignedShort();
      ca.max_locals=d.readUnsignedShort();
      ca.code_length=d.readInt() & 0xFFFFFFFFL;
      ca.code=new byte[(int)ca.code_length];
      d.read(ca.code);
      ca.exception_table_length=d.readUnsignedShort();
      ca.exception_table=new exception_table_entry[ca.exception_table_length];
      int k;
      exception_table_entry e;
      for (k=0; k < ca.exception_table_length; k++) {
        e=new exception_table_entry();
        e.start_pc=d.readUnsignedShort();
        e.end_pc=d.readUnsignedShort();
        e.handler_pc=d.readUnsignedShort();
        e.catch_type=d.readUnsignedShort();
        ca.exception_table[k]=e;
      }
      ca.attributes_count=d.readUnsignedShort();
      ca.attributes=new attribute_info[ca.attributes_count];
      readAttributes(d,ca.attributes_count,ca.attributes);
      a=(attribute_info)ca;
    }
 else     if (s.compareTo(attribute_info.Exceptions) == 0) {
      Exception_attribute ea=new Exception_attribute();
      ea.number_of_exceptions=d.readUnsignedShort();
      if (ea.number_of_exceptions > 0) {
        int k;
        ea.exception_index_table=new int[ea.number_of_exceptions];
        for (k=0; k < ea.number_of_exceptions; k++)         ea.exception_index_table[k]=d.readUnsignedShort();
      }
      a=(attribute_info)ea;
    }
 else     if (s.compareTo(attribute_info.LineNumberTable) == 0) {
      LineNumberTable_attribute la=new LineNumberTable_attribute();
      la.line_number_table_length=d.readUnsignedShort();
      int k;
      line_number_table_entry e;
      la.line_number_table=new line_number_table_entry[la.line_number_table_length];
      for (k=0; k < la.line_number_table_length; k++) {
        e=new line_number_table_entry();
        e.start_pc=d.readUnsignedShort();
        e.line_number=d.readUnsignedShort();
        la.line_number_table[k]=e;
      }
      a=(attribute_info)la;
    }
 else     if (s.compareTo(attribute_info.LocalVariableTable) == 0) {
      LocalVariableTable_attribute la=new LocalVariableTable_attribute();
      la.local_variable_table_length=d.readUnsignedShort();
      int k;
      local_variable_table_entry e;
      la.local_variable_table=new local_variable_table_entry[la.local_variable_table_length];
      for (k=0; k < la.local_variable_table_length; k++) {
        e=new local_variable_table_entry();
        e.start_pc=d.readUnsignedShort();
        e.length=d.readUnsignedShort();
        e.name_index=d.readUnsignedShort();
        e.descriptor_index=d.readUnsignedShort();
        e.index=d.readUnsignedShort();
        la.local_variable_table[k]=e;
      }
      a=(attribute_info)la;
    }
 else     if (s.compareTo(attribute_info.LocalVariableTypeTable) == 0) {
      LocalVariableTypeTable_attribute la=new LocalVariableTypeTable_attribute();
      la.local_variable_type_table_length=d.readUnsignedShort();
      int k;
      local_variable_type_table_entry e;
      la.local_variable_type_table=new local_variable_type_table_entry[la.local_variable_type_table_length];
      for (k=0; k < la.local_variable_type_table_length; k++) {
        e=new local_variable_type_table_entry();
        e.start_pc=d.readUnsignedShort();
        e.length=d.readUnsignedShort();
        e.name_index=d.readUnsignedShort();
        e.signature_index=d.readUnsignedShort();
        e.index=d.readUnsignedShort();
        la.local_variable_type_table[k]=e;
      }
      a=(attribute_info)la;
    }
 else     if (s.compareTo(attribute_info.Synthetic) == 0) {
      Synthetic_attribute ia=new Synthetic_attribute();
      a=(attribute_info)ia;
    }
 else     if (s.compareTo(attribute_info.Signature) == 0) {
      Signature_attribute ia=new Signature_attribute();
      ia.signature_index=d.readUnsignedShort();
      a=(attribute_info)ia;
    }
 else     if (s.compareTo(attribute_info.Deprecated) == 0) {
      Deprecated_attribute da=new Deprecated_attribute();
      a=(attribute_info)da;
    }
 else     if (s.compareTo(attribute_info.EnclosingMethod) == 0) {
      EnclosingMethod_attribute ea=new EnclosingMethod_attribute();
      ea.class_index=d.readUnsignedShort();
      ea.method_index=d.readUnsignedShort();
      a=(attribute_info)ea;
    }
 else     if (s.compareTo(attribute_info.InnerClasses) == 0) {
      InnerClasses_attribute ia=new InnerClasses_attribute();
      ia.inner_classes_length=d.readUnsignedShort();
      ia.inner_classes=new inner_class_entry[ia.inner_classes_length];
      for (int k=0; k < ia.inner_classes_length; k++) {
        inner_class_entry e=new inner_class_entry();
        e.inner_class_index=d.readUnsignedShort();
        e.outer_class_index=d.readUnsignedShort();
        e.name_index=d.readUnsignedShort();
        e.access_flags=d.readUnsignedShort();
        ia.inner_classes[k]=e;
      }
      a=(attribute_info)ia;
    }
 else     if (s.compareTo(attribute_info.RuntimeVisibleAnnotations) == 0) {
      RuntimeVisibleAnnotations_attribute ra=new RuntimeVisibleAnnotations_attribute();
      ra.number_of_annotations=d.readUnsignedShort();
      ra.annotations=new annotation[ra.number_of_annotations];
      for (int k=0; k < ra.number_of_annotations; k++) {
        annotation annot=new annotation();
        annot.type_index=d.readUnsignedShort();
        annot.num_element_value_pairs=d.readUnsignedShort();
        annot.element_value_pairs=readElementValues(annot.num_element_value_pairs,d,true,0);
        ra.annotations[k]=annot;
      }
      a=(attribute_info)ra;
    }
 else     if (s.compareTo(attribute_info.RuntimeInvisibleAnnotations) == 0) {
      RuntimeInvisibleAnnotations_attribute ra=new RuntimeInvisibleAnnotations_attribute();
      ra.number_of_annotations=d.readUnsignedShort();
      ra.annotations=new annotation[ra.number_of_annotations];
      for (int k=0; k < ra.number_of_annotations; k++) {
        annotation annot=new annotation();
        annot.type_index=d.readUnsignedShort();
        annot.num_element_value_pairs=d.readUnsignedShort();
        annot.element_value_pairs=readElementValues(annot.num_element_value_pairs,d,true,0);
        ra.annotations[k]=annot;
      }
      a=(attribute_info)ra;
    }
 else     if (s.compareTo(attribute_info.RuntimeVisibleParameterAnnotations) == 0) {
      RuntimeVisibleParameterAnnotations_attribute ra=new RuntimeVisibleParameterAnnotations_attribute();
      ra.num_parameters=d.readUnsignedByte();
      ra.parameter_annotations=new parameter_annotation[ra.num_parameters];
      for (int x=0; x < ra.num_parameters; x++) {
        parameter_annotation pAnnot=new parameter_annotation();
        pAnnot.num_annotations=d.readUnsignedShort();
        pAnnot.annotations=new annotation[pAnnot.num_annotations];
        for (int k=0; k < pAnnot.num_annotations; k++) {
          annotation annot=new annotation();
          annot.type_index=d.readUnsignedShort();
          annot.num_element_value_pairs=d.readUnsignedShort();
          annot.element_value_pairs=readElementValues(annot.num_element_value_pairs,d,true,0);
          pAnnot.annotations[k]=annot;
        }
        ra.parameter_annotations[x]=pAnnot;
      }
      a=(attribute_info)ra;
    }
 else     if (s.compareTo(attribute_info.RuntimeInvisibleParameterAnnotations) == 0) {
      RuntimeInvisibleParameterAnnotations_attribute ra=new RuntimeInvisibleParameterAnnotations_attribute();
      ra.num_parameters=d.readUnsignedByte();
      ra.parameter_annotations=new parameter_annotation[ra.num_parameters];
      for (int x=0; x < ra.num_parameters; x++) {
        parameter_annotation pAnnot=new parameter_annotation();
        pAnnot.num_annotations=d.readUnsignedShort();
        pAnnot.annotations=new annotation[pAnnot.num_annotations];
        for (int k=0; k < pAnnot.num_annotations; k++) {
          annotation annot=new annotation();
          annot.type_index=d.readUnsignedShort();
          annot.num_element_value_pairs=d.readUnsignedShort();
          annot.element_value_pairs=readElementValues(annot.num_element_value_pairs,d,true,0);
          pAnnot.annotations[k]=annot;
        }
        ra.parameter_annotations[x]=pAnnot;
      }
      a=(attribute_info)ra;
    }
 else     if (s.compareTo(attribute_info.AnnotationDefault) == 0) {
      AnnotationDefault_attribute da=new AnnotationDefault_attribute();
      element_value[] result=readElementValues(1,d,false,0);
      da.default_value=result[0];
      a=(attribute_info)da;
    }
 else     if (s.equals(attribute_info.BootstrapMethods)) {
      BootstrapMethods_attribute bsma=new BootstrapMethods_attribute();
      int count=d.readUnsignedShort();
      bsma.method_handles=new short[count];
      bsma.arg_indices=new short[count][];
      for (int num=0; num < count; num++) {
        short index=(short)d.readUnsignedShort();
        bsma.method_handles[num]=index;
        int argCount=d.readUnsignedShort();
        bsma.arg_indices[num]=new short[argCount];
        for (int numArg=0; numArg < argCount; numArg++) {
          short indexArg=(short)d.readUnsignedShort();
          bsma.arg_indices[num][numArg]=indexArg;
        }
      }
      assert bootstrap_methods_attribute == null : "More than one bootstrap methods attribute!";
      a=bootstrap_methods_attribute=bsma;
    }
 else {
      Generic_attribute ga=new Generic_attribute();
      if (len > 0) {
        ga.info=new byte[(int)len];
        d.read(ga.info);
      }
      a=(attribute_info)ga;
    }
    a.attribute_name=j;
    a.attribute_length=len;
    ai[i]=a;
  }
  return true;
}

private void notifiyDownloadState(){
synchronized (mDownloadMonitor) {
    Log.v(LOG_TAG,"notifiy download manager state changed.");
    mDownloadMonitor.notify();
  }
}

private PKIXBuilderParameters CreatePKIXBuilderParameters(X509Certificate endCert) throws CertificatePathBuildingException {
  X509CertSelector targetConstraints=new X509CertSelector();
  targetConstraints.setCertificate(endCert);
  PKIXBuilderParameters params;
  try {
    params=new PKIXBuilderParameters(trustStore,targetConstraints);
    params.setRevocationEnabled(false);
  }
 catch (  KeyStoreException e) {
    throw new CertificatePathBuildingException("Error creating PKIXBuilderParameters: Please check trust store" + e.getMessage(),e);
  }
catch (  InvalidAlgorithmParameterException e) {
    throw new CertificatePathBuildingException("Error creating PKIXBuilderParameters:" + e.getMessage(),e);
  }
catch (  Throwable e) {
    throw new CertificatePathBuildingException("Error creating PKIXBuilderParameters:" + e.getMessage(),e);
  }
  Collection<Object> certCollection=new ArrayList<Object>();
  addCertificateCandidates(endCert,certCollection);
  if (!certCollection.isEmpty()) {
    try {
      CertStore certStore=CertStore.getInstance("Collection",new CollectionCertStoreParameters(certCollection));
      params.addCertStore(certStore);
    }
 catch (    InvalidAlgorithmParameterException e) {
      throw new CertificatePathBuildingException("Error creating CertStore for PKIXBuilderParameters:" + e.getMessage(),e);
    }
catch (    NoSuchAlgorithmException e) {
      throw new CertificatePathBuildingException("Error creating CertStore for  PKIXBuilderParameters:" + e.getMessage(),e);
    }
  }
 else {
    logger.debug("Revocation check: CRL list empty");
  }
  return params;
}

public synchronized void addSeries(XYSeries series){
  mSeries.add(series);
}

public static String valueOf(long value){
  return Long.toString(value);
}

public void printStackTrace(){
  Throwable t;
  StringWriter writer;
  writer=new StringWriter();
  t=new Throwable();
  t.fillInStackTrace();
  t.printStackTrace(new PrintWriter(writer));
  println(writer.toString());
}

protected int effectiveBandSize(final int dim1,final int dim2){
  if (bandSize == Double.POSITIVE_INFINITY) {
    return (dim1 > dim2) ? dim1 : dim2;
  }
  if (bandSize >= 1.) {
    return (int)bandSize;
  }
  return (int)Math.ceil((dim1 >= dim2 ? dim1 : dim2) * bandSize);
}

private final Object arenaExchange(Object item,boolean timed,long ns){
  Node[] a=arena;
  Node p=participant.get();
  for (int i=p.index; ; ) {
    int b, m, c;
    long j;
    Node q=(Node)U.getObjectVolatile(a,j=(i << ASHIFT) + ABASE);
    if (q != null && U.compareAndSwapObject(a,j,q,null)) {
      Object v=q.item;
      q.match=item;
      Thread w=q.parked;
      if (w != null)       U.unpark(w);
      return v;
    }
 else     if (i <= (m=(b=bound) & MMASK) && q == null) {
      p.item=item;
      if (U.compareAndSwapObject(a,j,null,p)) {
        long end=(timed && m == 0) ? System.nanoTime() + ns : 0L;
        Thread t=Thread.currentThread();
        for (int h=p.hash, spins=SPINS; ; ) {
          Object v=p.match;
          if (v != null) {
            U.putOrderedObject(p,MATCH,null);
            p.item=null;
            p.hash=h;
            return v;
          }
 else           if (spins > 0) {
            h^=h << 1;
            h^=h >>> 3;
            h^=h << 10;
            if (h == 0)             h=SPINS | (int)t.getId();
 else             if (h < 0 && (--spins & ((SPINS >>> 1) - 1)) == 0)             Thread.yield();
          }
 else           if (U.getObjectVolatile(a,j) != p)           spins=SPINS;
 else           if (!t.isInterrupted() && m == 0 && (!timed || (ns=end - System.nanoTime()) > 0L)) {
            U.putObject(t,BLOCKER,this);
            p.parked=t;
            if (U.getObjectVolatile(a,j) == p)             U.park(false,ns);
            p.parked=null;
            U.putObject(t,BLOCKER,null);
          }
 else           if (U.getObjectVolatile(a,j) == p && U.compareAndSwapObject(a,j,p,null)) {
            if (m != 0)             U.compareAndSwapInt(this,BOUND,b,b + SEQ - 1);
            p.item=null;
            p.hash=h;
            i=p.index>>>=1;
            if (Thread.interrupted())             return null;
            if (timed && m == 0 && ns <= 0L)             return TIMED_OUT;
            break;
          }
        }
      }
 else       p.item=null;
    }
 else {
      if (p.bound != b) {
        p.bound=b;
        p.collides=0;
        i=(i != m || m == 0) ? m : m - 1;
      }
 else       if ((c=p.collides) < m || m == FULL || !U.compareAndSwapInt(this,BOUND,b,b + SEQ + 1)) {
        p.collides=c + 1;
        i=(i == 0) ? m : i - 1;
      }
 else       i=m + 1;
      p.index=i;
    }
  }
}

public static int encodeLongitudeCeil(double longitude){
  GeoUtils.checkLongitude(longitude);
  if (longitude == 180.0D) {
    longitude=Math.nextDown(longitude);
  }
  return (int)Math.ceil(longitude / LON_DECODE);
}

private LinkedList<Diff> diff_lineMode(String text1,String text2,long deadline){
  LinesToCharsResult b=diff_linesToChars(text1,text2);
  text1=b.chars1;
  text2=b.chars2;
  List<String> linearray=b.lineArray;
  LinkedList<Diff> diffs=diff_main(text1,text2,false,deadline);
  diff_charsToLines(diffs,linearray);
  diff_cleanupSemantic(diffs);
  diffs.add(new Diff(Operation.EQUAL,""));
  int count_delete=0;
  int count_insert=0;
  String text_delete="";
  String text_insert="";
  ListIterator<Diff> pointer=diffs.listIterator();
  Diff thisDiff=pointer.next();
  while (thisDiff != null) {
switch (thisDiff.operation) {
case INSERT:
      count_insert++;
    text_insert+=thisDiff.text;
  break;
case DELETE:
count_delete++;
text_delete+=thisDiff.text;
break;
case EQUAL:
if (count_delete >= 1 && count_insert >= 1) {
pointer.previous();
for (int j=0; j < count_delete + count_insert; j++) {
pointer.previous();
pointer.remove();
}
for (Diff newDiff : diff_main(text_delete,text_insert,false,deadline)) {
pointer.add(newDiff);
}
}
count_insert=0;
count_delete=0;
text_delete="";
text_insert="";
break;
}
thisDiff=pointer.hasNext() ? pointer.next() : null;
}
diffs.removeLast();
return diffs;
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return ID;
case 2:
  return CREATE_TIME;
case 3:
return UPDATE_TIME;
case 4:
return OPERATION;
case 5:
return STATUS;
case 6:
return SRC_PATH;
case 7:
return SRC_CLUSTER;
case 8:
return SRC_DB;
case 9:
return SRC_TABLE;
case 10:
return SRC_PARTITIONS;
case 11:
return SRC_MODIFIED_TIME;
case 12:
return RENAME_TO_DB;
case 13:
return RENAME_TO_TABLE;
case 14:
return RENAME_TO_PATH;
case 15:
return EXTRAS;
case 16:
return WAITING_ON_JOBS;
default :
return null;
}
}

public JSONBuffer appendKeyHash(Object key){
  if (stack.empty() || stack.peek() != Operand.HASH) {
    throw new JSONException("Appending key-value outside of hash context.");
  }
  addQuotedString(key);
  buffer.append(":");
  buffer.append("{");
  stack.push(Operand.HASH);
  return this;
}

static ReplayPromise<Void> anyReplay(final Duration timeout,final Promise<?>... promises){
  return anyReplay(timeout,System.currentTimeMillis(),promises);
}

public static PolicyService sendPLLRequest(URL policyServiceUrl,PolicyRequest preq) throws SendRequestException, PolicyException {
  String lbcookie=null;
  try {
    lbcookie=getLBCookie(preq);
  }
 catch (  Exception e) {
    throw new SendRequestException(e);
  }
  PolicyService policyService=new PolicyService();
  policyService.setMethodID(PolicyService.POLICY_REQUEST_ID);
  policyService.setPolicyRequest(preq);
  String xmlString=policyService.toXMLString();
  Request request=new Request(xmlString);
  RequestSet requestSet=new RequestSet(PolicyService.POLICY_SERVICE);
  requestSet.addRequest(request);
  if (debug.messageEnabled()) {
    debug.message("ResourceResultCache.sendPLLRequest:" + "sending PLL request to URL=" + policyServiceUrl + ":\nPLL message="+ xmlString);
  }
  Vector responses=PLLClient.send(policyServiceUrl,lbcookie,requestSet);
  Response response=(Response)responses.elementAt(0);
  PolicyService ps=PolicyService.parseXML(response.getContent());
  if (debug.messageEnabled()) {
    debug.message("ResourceResultCache.sendPLLRequest:" + "result=" + ps.toXMLString());
  }
  return ps;
}

public static URI createId(Class<? extends DataObject> clazz){
  return newId(clazz,getLocation(clazz));
}

public static double log2(double x){
  return Math.log(x) * ONE_BY_LOG2;
}

private void needNewBuffer(int newcount){
  if (currentBufferIndex < buffers.size() - 1) {
    filledBufferSum+=currentBuffer.length;
    currentBufferIndex++;
    currentBuffer=buffers.get(currentBufferIndex);
  }
 else {
    int newBufferSize;
    if (currentBuffer == null) {
      newBufferSize=newcount;
      filledBufferSum=0;
    }
 else {
      newBufferSize=Math.max(currentBuffer.length << 1,newcount - filledBufferSum);
      filledBufferSum+=currentBuffer.length;
    }
    currentBufferIndex++;
    currentBuffer=new byte[newBufferSize];
    buffers.add(currentBuffer);
  }
}

@Override public void addFocusables(ArrayList<View> views,int direction,int focusableMode){
  final int focusableCount=views.size();
  final int descendantFocusability=getDescendantFocusability();
  if (descendantFocusability != FOCUS_BLOCK_DESCENDANTS) {
    for (int i=0; i < getChildCount(); i++) {
      final View child=getChildAt(i);
      if (child.getVisibility() == VISIBLE) {
        ItemInfo ii=infoForChild(child);
        if (ii != null && ii.position == mCurItem) {
          child.addFocusables(views,direction,focusableMode);
        }
      }
    }
  }
  if (descendantFocusability != FOCUS_AFTER_DESCENDANTS || (focusableCount == views.size())) {
    if (!isFocusable()) {
      return;
    }
    if ((focusableMode & FOCUSABLES_TOUCH_MODE) == FOCUSABLES_TOUCH_MODE && isInTouchMode() && !isFocusableInTouchMode()) {
      return;
    }
    if (views != null) {
      views.add(this);
    }
  }
}

public void insertElementAt(Node value,int at){
  if (!m_mutable)   throw new RuntimeException(XSLMessages.createXPATHMessage(XPATHErrorResources.ER_NODESET_NOT_MUTABLE,null));
  if (null == m_map) {
    m_map=new Node[m_blocksize];
    m_mapSize=m_blocksize;
  }
 else   if ((m_firstFree + 1) >= m_mapSize) {
    m_mapSize+=m_blocksize;
    Node newMap[]=new Node[m_mapSize];
    System.arraycopy(m_map,0,newMap,0,m_firstFree + 1);
    m_map=newMap;
  }
  if (at <= (m_firstFree - 1)) {
    System.arraycopy(m_map,at,m_map,at + 1,m_firstFree - at);
  }
  m_map[at]=value;
  m_firstFree++;
}

public Result regress(DiscreteVariable x,List<Node> regressors){
  if (!binary(x)) {
    throw new IllegalArgumentException("Target must be binary.");
  }
  for (  Node node : regressors) {
    if (!(node instanceof ContinuousVariable || binary(node))) {
      throw new IllegalArgumentException("Regressors must be continuous or binary.");
    }
  }
  double[][] _regressors=new double[regressors.size()][getRows().length];
  for (int j=0; j < regressors.size(); j++) {
    int col=dataSet.getColumn(regressors.get(j));
    double[] dataCol=dataCols[col];
    for (int i=0; i < getRows().length; i++) {
      _regressors[j][i]=dataCol[getRows()[i]];
    }
  }
  int[] target=new int[getRows().length];
  int col=dataSet.getColumn(dataSet.getVariable(x.getName()));
  for (int i=0; i < getRows().length; i++) {
    target[i]=dataSet.getInt(getRows()[i],col);
  }
  List<String> regressorNames=new ArrayList<>();
  for (  Node node : regressors) {
    regressorNames.add(node.getName());
  }
  return regress(target,x.getName(),_regressors,regressorNames);
}

void copyFile(String source,String target);

static public List<Sequence<IString>> tokenizeFile(String filename,boolean doNIST){
  List<Sequence<IString>> sequences=new ArrayList<>();
  LineNumberReader reader=IOTools.getReaderFromFile(filename);
  try {
    for (String line; (line=reader.readLine()) != null; ) {
      if (doNIST)       line=NISTTokenizer.tokenize(line);
      sequences.add(IStrings.tokenize(line));
    }
    reader.close();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  return sequences;
}

public Statement like(String expr){
  statement.append(" LIKE ");
  appendEscapedSQLString(statement,expr);
  return this;
}

public static KdbxHeader readKdbxHeader(KdbxHeader kdbxHeader,InputStream inputStream) throws IOException {
  MessageDigest digest=Encryption.getMessageDigestInstance();
  DigestInputStream digestInputStream=new DigestInputStream(inputStream,digest);
  LittleEndianDataInputStream ledis=new LittleEndianDataInputStream(digestInputStream);
  if (!verifyMagicNumber(ledis)) {
    throw new IllegalStateException("Magic number did not match");
  }
  if (!verifyFileVersion(ledis)) {
    throw new IllegalStateException("File version did not match");
  }
  byte headerType;
  while ((headerType=ledis.readByte()) != HeaderType.END) {
switch (headerType) {
case HeaderType.COMMENT:
      getByteArray(ledis);
    break;
case HeaderType.CIPHER_ID:
  kdbxHeader.setCipherUuid(getByteArray(ledis));
break;
case HeaderType.COMPRESSION_FLAGS:
kdbxHeader.setCompressionFlags(getInt(ledis));
break;
case HeaderType.MASTER_SEED:
kdbxHeader.setMasterSeed(getByteArray(ledis));
break;
case HeaderType.TRANSFORM_SEED:
kdbxHeader.setTransformSeed(getByteArray(ledis));
break;
case HeaderType.TRANSFORM_ROUNDS:
kdbxHeader.setTransformRounds(getLong(ledis));
break;
case HeaderType.ENCRYPTION_IV:
kdbxHeader.setEncryptionIv(getByteArray(ledis));
break;
case HeaderType.PROTECTED_STREAM_KEY:
kdbxHeader.setProtectedStreamKey(getByteArray(ledis));
break;
case HeaderType.STREAM_START_BYTES:
kdbxHeader.setStreamStartBytes(getByteArray(ledis));
break;
case HeaderType.INNER_RANDOM_STREAM_ID:
kdbxHeader.setInnerRandomStreamId(getInt(ledis));
break;
default :
throw new IllegalStateException("Unknown File Header");
}
}
getByteArray(ledis);
kdbxHeader.setHeaderHash(digest.digest());
return kdbxHeader;
}

public static byte[] copyToByteArray(InputStream in) throws IOException {
  ByteArrayOutputStream out=new ByteArrayOutputStream(BUFFER_SIZE);
  copy(in,out);
  return out.toByteArray();
}

public boolean isEnumConstant(){
  return (getModifiers() & Modifier.ENUM) != 0;
}

public boolean containsAny(Collection<Taxon> taxa){
  for (  Taxon taxon : taxa) {
    if (taxa.contains(taxon)) {
      return true;
    }
  }
  return false;
}

@SuppressWarnings("unchecked") public synchronized T dequeueTask() throws InterruptedException {
  while (_data.isEmpty()) {
    if (!_closedInput)     wait();
 else     return (T)NO_MORE_TASKS;
  }
  T t=_data.removeFirst();
  notify();
  return t;
}

@Override public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException {
  super.readExternal(in);
  this.facetName=in.readUTF();
}

private boolean stringToBoolean(String condition){
  boolean result=false;
  if (condition != null && condition.length() > 0) {
    String s=condition.substring(0,1);
    if (s.equalsIgnoreCase("Y") || s.equals("1") || s.equalsIgnoreCase("T"))     result=true;
  }
  return result;
}

public static void writeUINT32(long number,OutputStream out) throws IOException {
  if (number < 0) {
    throw new IllegalArgumentException("positive value expected.");
  }
  byte[] toWrite=new byte[4];
  for (int i=0; i <= 24; i+=8) {
    toWrite[i / 8]=(byte)((number >> i) & 0xFF);
  }
  out.write(toWrite);
}

public RemoteMetaDataImpl(Schema schema) throws RemoteException {
  this.schema=schema;
  fields.addAll(schema.fields());
}

private void checkServerResponseCode(HttpURLConnection urlConnection) throws RequestFailureException {
  try {
    if (urlConnection.getResponseCode() != 200) {
      throw new RequestFailureException("Received " + urlConnection.getResponseCode() + " code instead of 200 (OK) from the server.  Aborting.");
    }
  }
 catch (  IOException e) {
    throw new RequestFailureException("Failed to read response code from server: ",e);
  }
}

public void addSwitchWithOptionalExtraPart(String option,String optionExtraPartSynopsis,String description){
  optionList.add(option);
  optionExtraPartSynopsisMap.put(option,optionExtraPartSynopsis);
  optionDescriptionMap.put(option,description);
  int length=option.length() + optionExtraPartSynopsis.length() + 3;
  if (length > maxWidth) {
    maxWidth=length;
  }
}

public static Object detectLinuxDefaultFileBrowser(Map<String,Object> fileBrowsers){
  ArrayList<String> command=new ArrayList<String>();
  command.add("xdg-mime");
  command.add("query");
  command.add("default");
  command.add("inode/directory");
  if (fileBrowsers == null) {
    fileBrowsers=new HashMap<String,Object>();
    fileBrowsers.put(".*","*");
  }
  return Utils.isExpectedCommandOutput(command,fileBrowsers);
}

public void updated(){
  currentColor=HtmlColors.decode(getSettingValue());
  secondaryColor=HtmlColors.decode(baseColor);
  Color foregroundColor;
  Color backgroundColor;
  if (type == FOREGROUND) {
    foregroundColor=currentColor;
    backgroundColor=secondaryColor;
  }
 else {
    foregroundColor=secondaryColor;
    backgroundColor=currentColor;
  }
  preview.setForeground(foregroundColor);
  preview.setBackground(backgroundColor);
}

public Collection<? extends ImmutableClassType> removeInstrumentationPoints(final Collection<? extends ImmutableType> types){
  return removeInstrumentationPoints(types,Collections.<IInstrumentationApplier>singleton(RemoveAllInstrumentationApplier.getInstance()));
}

private Record createRecord(RecordProperties recordProperties) throws RecordException {
  String debugDirectory;
  if (isRecording()) {
    debugDirectory=previousDebugDirectory;
  }
 else {
    debugDirectory=SystemPropertiesManager.get(DebugConstants.CONFIG_DEBUG_DIRECTORY);
  }
  String recordDirectory=debugDirectory + File.separator + RecordConstants.RECORD_FOLDER_NAME+ File.separator+ recordProperties.getIssueID()+ File.separator+ recordProperties.getReferenceID();
  Record record=new Record(recordProperties,recordDirectory);
  try {
    createFolder(record.getFolderPath());
    PrintWriter printWriterInfo=getPrintWriterForFile(record,RecordConstants.INFO_FILE_NAME);
    JsonValue info=recordReport.infoReport(record);
    try {
      JSONObject json=new JSONObject(info.toString());
      printWriterInfo.println(json.toString(4));
    }
 catch (    JSONException e) {
      debug.warning("Can't indent json '{}'",info,e);
      printWriterInfo.println(info);
    }
    printWriterInfo.flush();
    return record;
  }
 catch (  IOException e) {
    debug.error("Info report can't be initialized for issue '{}'",recordProperties,e);
    throw new RecordException("Info report can't be initialized for issue '" + recordProperties.getIssueID() + "'",e);
  }
}

public static LaggedEdge serializableInstance(){
  return new LaggedEdge("X",LaggedFactor.serializableInstance());
}

public final void dispatchCharactersEvents(int nodeHandle,ContentHandler ch,boolean normalize) throws SAXException {
  int identity=makeNodeIdentity(nodeHandle);
  if (identity == DTM.NULL)   return;
  int type=_type2(identity);
  if (type == DTM.ELEMENT_NODE || type == DTM.DOCUMENT_NODE) {
    int startNode=identity;
    identity=_firstch2(identity);
    if (DTM.NULL != identity) {
      int offset=-1;
      int length=0;
      do {
        type=_exptype2(identity);
        if (type == DTM.TEXT_NODE || type == DTM.CDATA_SECTION_NODE) {
          int dataIndex=m_dataOrQName.elementAt(identity);
          if (dataIndex >= 0) {
            if (-1 == offset) {
              offset=dataIndex >>> TEXT_LENGTH_BITS;
            }
            length+=dataIndex & TEXT_LENGTH_MAX;
          }
 else {
            if (-1 == offset) {
              offset=m_data.elementAt(-dataIndex);
            }
            length+=m_data.elementAt(-dataIndex + 1);
          }
        }
        identity++;
      }
 while (_parent2(identity) >= startNode);
      if (length > 0) {
        if (normalize)         m_chars.sendNormalizedSAXcharacters(ch,offset,length);
 else         m_chars.sendSAXcharacters(ch,offset,length);
      }
    }
  }
 else   if (DTM.TEXT_NODE == type || DTM.CDATA_SECTION_NODE == type) {
    int dataIndex=m_dataOrQName.elementAt(identity);
    if (dataIndex >= 0) {
      if (normalize)       m_chars.sendNormalizedSAXcharacters(ch,dataIndex >>> TEXT_LENGTH_BITS,dataIndex & TEXT_LENGTH_MAX);
 else       m_chars.sendSAXcharacters(ch,dataIndex >>> TEXT_LENGTH_BITS,dataIndex & TEXT_LENGTH_MAX);
    }
 else {
      if (normalize)       m_chars.sendNormalizedSAXcharacters(ch,m_data.elementAt(-dataIndex),m_data.elementAt(-dataIndex + 1));
 else       m_chars.sendSAXcharacters(ch,m_data.elementAt(-dataIndex),m_data.elementAt(-dataIndex + 1));
    }
  }
 else {
    int dataIndex=m_dataOrQName.elementAt(identity);
    if (dataIndex < 0) {
      dataIndex=-dataIndex;
      dataIndex=m_data.elementAt(dataIndex + 1);
    }
    String str=(String)m_values.elementAt(dataIndex);
    if (normalize)     FastStringBuffer.sendNormalizedSAXcharacters(str.toCharArray(),0,str.length(),ch);
 else     ch.characters(str.toCharArray(),0,str.length());
  }
}

private int clampMag(int value,int absMin,int absMax){
  final int absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

private static int lengthOfMimeNames(String val){
  int len=val.indexOf(' ');
  if (len < 0)   len=val.length();
  return len;
}

private char readEscapeCharacter() throws JSONException {
  char escaped=in.charAt(pos++);
switch (escaped) {
case 'u':
    if (pos + 4 > in.length()) {
      throw syntaxError("Unterminated escape sequence");
    }
  String hex=in.substring(pos,pos + 4);
pos+=4;
return (char)Integer.parseInt(hex,16);
case 't':
return '\t';
case 'b':
return '\b';
case 'n':
return '\n';
case 'r':
return '\r';
case 'f':
return '\f';
case '\'':
case '"':
case '\\':
default :
return escaped;
}
}

public static boolean isSha1String(final String string){
  Preconditions.checkNotNull(string,"Error: String argument can't be null");
  return (string.length() == 40) && isHexString(string);
}

public boolean isWatched(){
  return watched;
}

public void addDateChangeListener(DateChangeListener listener){
  dateChangeListeners.add(listener);
}

public static String stripFileProtocol(String uriString){
  if (uriString.startsWith("file://")) {
    uriString=uriString.substring(7);
  }
  return uriString;
}

public void replaceTemplate(ElemTemplate v,int i) throws TransformerException {
  if (null == m_templates)   throw new ArrayIndexOutOfBoundsException();
  replaceChild(v,(ElemTemplateElement)m_templates.elementAt(i));
  m_templates.setElementAt(v,i);
  v.setStylesheet(this);
}

public RotatedProblem(Problem problem,RealMatrix rotation){
  super();
  this.problem=problem;
  this.rotation=rotation;
  Solution solution=problem.newSolution();
  center=new double[getNumberOfVariables()];
  lowerBounds=new double[getNumberOfVariables()];
  upperBounds=new double[getNumberOfVariables()];
  for (int i=0; i < getNumberOfVariables(); i++) {
    RealVariable variable=(RealVariable)solution.getVariable(i);
    center[i]=(variable.getLowerBound() + variable.getUpperBound()) / 2.0;
    lowerBounds[i]=Math.sqrt(2.0) * (variable.getLowerBound() - center[i]);
    upperBounds[i]=Math.sqrt(2.0) * (variable.getUpperBound() - center[i]);
  }
}

public static byte[] decode(String data){
  int len=data.length() / 4 * 3;
  ByteArrayOutputStream bOut=new ByteArrayOutputStream(len);
  try {
    encoder.decode(data,bOut);
  }
 catch (  Exception e) {
    throw new DecoderException("unable to decode base64 string: " + e.getMessage(),e);
  }
  return bOut.toByteArray();
}

public void characters(char ch[],int start,int length) throws SAXException {
  m_curValue.append(ch,start,length);
}

public boolean regenerate(Projection proj){
  boolean ret=super.regenerate(proj);
  if (proj != null && !ret) {
    ret=generate(proj);
  }
  return ret;
}

@Override public byte[] unwrap(final byte[] incoming,final int offset,final int len) throws LdapException {
  final byte[] copy=new byte[len];
  System.arraycopy(incoming,offset,copy,0,len);
  return copy;
}

private int sequentialForwardSelection(String dataFile,String[] features,int indVarColNumber,int X[],int Y[],double J[],int rowIni,int rowEnd){
  double sig[]=new double[Y.length];
  int sigIndex[]=new int[Y.length];
  double corXplusy[]=new double[Y.length];
  double corX;
  if (X.length > 0) {
    Regression reg=new Regression();
    reg.multipleLinearRegression(dataFile,indVarColNumber,X,features,interceptTerm,rowIni,rowEnd);
    corX=reg.getCorrelation();
  }
 else   corX=0.0;
  for (int i=0; i < Y.length; i++) {
    corXplusy[i]=correlationOfNewFeature(dataFile,features,indVarColNumber,X,Y[i],rowIni,rowEnd);
    sig[i]=corXplusy[i] - corX;
    sigIndex[i]=Y[i];
  }
  int minSig=MathUtils.getMinIndex(sig);
  J[0]=corXplusy[minSig];
  J[1]=corX;
  int maxSig=MathUtils.getMaxIndex(sig);
  J[2]=corXplusy[maxSig];
  return sigIndex[maxSig];
}

private static byte[] codesToBytes(String codes,boolean required){
  if (codes.length() == 0) {
    if (required) {
      throw new IllegalStateException("empty code bytes");
    }
    return null;
  }
  if ((codes.length() % 2) != 0) {
    codes="0" + codes;
  }
  byte[] bytes=new byte[codes.length() / 2];
  for (int i=0; i < bytes.length; ++i) {
    int charIdx=i * 2;
    bytes[i]=(byte)(Integer.parseInt(codes.substring(charIdx,charIdx + 2),16));
  }
  return bytes;
}

public DragEntry dragSelectedEntry(){
  try {
    KeyStoreHistory history=getActiveKeyStoreHistory();
    if (history == null) {
      return null;
    }
    KeyStoreState currentState=history.getCurrentState();
    KeyStore keyStore=currentState.getKeyStore();
    String alias=getSelectedEntryAlias();
    if (alias == null) {
      return null;
    }
    if (KeyStoreUtil.isKeyEntry(alias,keyStore)) {
      JOptionPane.showMessageDialog(frame,res.getString("KseFrame.NoDragKeyEntry.message"),KSE.getApplicationName(),JOptionPane.WARNING_MESSAGE);
      return null;
    }
    if (KeyStoreUtil.isKeyPairEntry(alias,keyStore)) {
      Password password=currentState.getEntryPassword(alias);
      KeyStoreType type=KeyStoreType.resolveJce(keyStore.getType());
      if (password == null && type.hasEntryPasswords()) {
        JOptionPane.showMessageDialog(frame,res.getString("KseFrame.NoDragLockedKeyPairEntry.message"),KSE.getApplicationName(),JOptionPane.WARNING_MESSAGE);
        return null;
      }
      PrivateKey privateKey=(PrivateKey)keyStore.getKey(alias,password.toCharArray());
      Certificate[] certificateChain=keyStore.getCertificateChain(alias);
      return new DragKeyPairEntry(alias,privateKey,password,certificateChain);
    }
 else {
      Certificate trustedCertificate=keyStore.getCertificate(alias);
      return new DragTrustedCertificateEntry(alias,trustedCertificate);
    }
  }
 catch (  Exception ex) {
    DError.displayError(frame,ex);
    return null;
  }
}

public void insert(T object,int index){
synchronized (mLock) {
    if (mOriginalValues != null) {
      mOriginalValues.add(index,object);
    }
 else {
      mObjects.add(index,object);
    }
  }
  if (mNotifyOnChange)   notifyDataSetChanged();
}

public static Document createDocument(boolean isSecureProcessing){
  try {
    DocumentBuilderFactory dfactory=DocumentBuilderFactory.newInstance();
    dfactory.setNamespaceAware(true);
    DocumentBuilder docBuilder=dfactory.newDocumentBuilder();
    Document outNode=docBuilder.newDocument();
    return outNode;
  }
 catch (  ParserConfigurationException pce) {
    throw new RuntimeException(XMLMessages.createXMLMessage(XMLErrorResources.ER_CREATEDOCUMENT_NOT_SUPPORTED,null));
  }
}

public double reduce(String numericColumnName,NumericReduceFunction function){
  Column column=column(numericColumnName);
  return function.reduce(column.toDoubleArray());
}

public void testSetBitNegativeOutside1(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=-1;
  int number=150;
  byte rBytes[]={-2,127,-57,-101,1,75,-90,-46,-92,-4,14,-36,-26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.setBit(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

static public String formatUInt8Char(byte b){
  String ch=new String(new byte[]{b});
  ch=ch.replaceAll("\\p{C}"," ");
  return formatUInt8(b) + ":" + ch;
}

public static final ArrayList<Move> removeIllegal(Position pos,ArrayList<Move> moveList){
  ArrayList<Move> ret=new ArrayList<Move>();
  UndoInfo ui=new UndoInfo();
  int mlSize=moveList.size();
  for (int mi=0; mi < mlSize; mi++) {
    Move m=moveList.get(mi);
    pos.makeMove(m,ui);
    pos.setWhiteMove(!pos.whiteMove);
    if (!inCheck(pos))     ret.add(m);
    pos.setWhiteMove(!pos.whiteMove);
    pos.unMakeMove(m,ui);
  }
  return ret;
}

public static int applyMaskPenaltyRule4(ByteMatrix matrix){
  int numDarkCells=0;
  byte[][] array=matrix.getArray();
  int width=matrix.getWidth();
  int height=matrix.getHeight();
  for (int y=0; y < height; ++y) {
    for (int x=0; x < width; ++x) {
      if (array[y][x] == 1) {
        numDarkCells+=1;
      }
    }
  }
  int numTotalCells=matrix.getHeight() * matrix.getWidth();
  double darkRatio=(double)numDarkCells / numTotalCells;
  return Math.abs((int)(darkRatio * 100 - 50)) / 5 * 10;
}

private void checkState(){
  if (diagramRetrieved) {
    throw new IllegalStateException("The final diagram was returned and therefore no more changes are allowed.");
  }
}

static Hashtable convertToHash(Map m){
  Hashtable retHash=new Hashtable();
  Set s=m.keySet();
  Iterator iter=s.iterator();
  while (iter.hasNext()) {
    String key=(String)iter.next();
    Set val=(Set)m.get(key);
    retHash.put(key,setToString(val));
  }
  return retHash;
}

public void actionPerformed(ActionEvent evt){
}

public boolean equal_at_start(PlaPointInt p_point){
  if (p_point == null)   return false;
  PlaPoint first=corner_first();
  return first.equals(p_point);
}

public void forEachBlockDepthFirst(boolean reverse,SsaBasicBlock.Visitor v){
  BitSet visited=new BitSet(blocks.size());
  Stack<SsaBasicBlock> stack=new Stack<SsaBasicBlock>();
  SsaBasicBlock rootBlock=reverse ? getExitBlock() : getEntryBlock();
  if (rootBlock == null) {
    return;
  }
  stack.add(null);
  stack.add(rootBlock);
  while (stack.size() > 0) {
    SsaBasicBlock cur=stack.pop();
    SsaBasicBlock parent=stack.pop();
    if (!visited.get(cur.getIndex())) {
      BitSet children=reverse ? cur.getPredecessors() : cur.getSuccessors();
      for (int i=children.nextSetBit(0); i >= 0; i=children.nextSetBit(i + 1)) {
        stack.add(cur);
        stack.add(blocks.get(i));
      }
      visited.set(cur.getIndex());
      v.visitBlock(cur,parent);
    }
  }
}

protected void fillPath(){
  mPSStream.println(mFillOpStr);
}

public static byte[] decode(String encoded){
  if (encoded == null) {
    return null;
  }
  char[] base64Data=encoded.toCharArray();
  int len=removeWhiteSpace(base64Data);
  if (len % FOURBYTE != 0) {
    return null;
  }
  int numberQuadruple=(len / FOURBYTE);
  if (numberQuadruple == 0) {
    return new byte[0];
  }
  byte decodedData[]=null;
  byte b1=0, b2=0, b3=0, b4=0;
  char d1=0, d2=0, d3=0, d4=0;
  int i=0;
  int encodedIndex=0;
  int dataIndex=0;
  decodedData=new byte[(numberQuadruple) * 3];
  for (; i < numberQuadruple - 1; i++) {
    if (!isData((d1=base64Data[dataIndex++])) || !isData((d2=base64Data[dataIndex++])) || !isData((d3=base64Data[dataIndex++]))|| !isData((d4=base64Data[dataIndex++]))) {
      return null;
    }
    b1=base64Alphabet[d1];
    b2=base64Alphabet[d2];
    b3=base64Alphabet[d3];
    b4=base64Alphabet[d4];
    decodedData[encodedIndex++]=(byte)(b1 << 2 | b2 >> 4);
    decodedData[encodedIndex++]=(byte)(((b2 & 0xf) << 4) | ((b3 >> 2) & 0xf));
    decodedData[encodedIndex++]=(byte)(b3 << 6 | b4);
  }
  if (!isData((d1=base64Data[dataIndex++])) || !isData((d2=base64Data[dataIndex++]))) {
    return null;
  }
  b1=base64Alphabet[d1];
  b2=base64Alphabet[d2];
  d3=base64Data[dataIndex++];
  d4=base64Data[dataIndex++];
  if (!isData((d3)) || !isData((d4))) {
    if (isPad(d3) && isPad(d4)) {
      if ((b2 & 0xf) != 0) {
        return null;
      }
      byte[] tmp=new byte[i * 3 + 1];
      System.arraycopy(decodedData,0,tmp,0,i * 3);
      tmp[encodedIndex]=(byte)(b1 << 2 | b2 >> 4);
      return tmp;
    }
 else     if (!isPad(d3) && isPad(d4)) {
      b3=base64Alphabet[d3];
      if ((b3 & 0x3) != 0) {
        return null;
      }
      byte[] tmp=new byte[i * 3 + 2];
      System.arraycopy(decodedData,0,tmp,0,i * 3);
      tmp[encodedIndex++]=(byte)(b1 << 2 | b2 >> 4);
      tmp[encodedIndex]=(byte)(((b2 & 0xf) << 4) | ((b3 >> 2) & 0xf));
      return tmp;
    }
 else {
      return null;
    }
  }
 else {
    b3=base64Alphabet[d3];
    b4=base64Alphabet[d4];
    decodedData[encodedIndex++]=(byte)(b1 << 2 | b2 >> 4);
    decodedData[encodedIndex++]=(byte)(((b2 & 0xf) << 4) | ((b3 >> 2) & 0xf));
    decodedData[encodedIndex++]=(byte)(b3 << 6 | b4);
  }
  return decodedData;
}

public boolean isLastWindow(AccessibilityWindowInfo baseWindow,int windowType){
  int index=getWindowIndex(baseWindow);
  if (index == WRONG_INDEX) {
    return true;
  }
  int count=mWindows.size();
  for (int i=index + 1; i < count; i++) {
    AccessibilityWindowInfo window=mWindows.get(i);
    if (window != null && window.getType() == windowType) {
      return false;
    }
  }
  return true;
}

public void passPgSessionMapEx(ViewBean other){
  Map attributes=getPageSessionAttributes();
  for (Iterator i=retainPageSessionsBtwTabs.iterator(); i.hasNext(); ) {
    String key=(String)i.next();
    other.setPageSessionAttribute(key,(Serializable)attributes.get(key));
  }
  other.setPageSessionAttribute(getTrackingTabIDName(),(Serializable)attributes.get(getTrackingTabIDName()));
}

public long time(){
  return heartbeatTime;
}

public boolean hitClip(int x,int y,int width,int height){
  return g.hitClip(x,y,width,height);
}

public static CloseWatcher pollUnclosed(){
  ReferenceQueue<Object> q=queue;
  if (q == null) {
    return null;
  }
  while (true) {
    CloseWatcher cw=(CloseWatcher)q.poll();
    if (cw == null) {
      return null;
    }
    if (refs != null) {
      refs.remove(cw);
    }
    if (cw.closeable != null) {
      return cw;
    }
  }
}

private static boolean appendOdexesToClassPath(Context cxt,File dexDir,String[] names){
  String strDexDir=dexDir.getAbsolutePath();
  ArrayList<String> jarPaths=new ArrayList<String>();
  for (int i=0; i < names.length; i++) {
    String jarPath=strDexDir + '/' + names[i];
    File f=new File(jarPath);
    if (f.isFile()) {
      jarPaths.add(jarPath);
    }
  }
  String[] jarsOfDex=new String[jarPaths.size()];
  jarPaths.toArray(jarsOfDex);
  PathClassLoader pcl=(PathClassLoader)cxt.getClassLoader();
  try {
    if (Build.VERSION.SDK_INT < SDK_INT_ICS) {
      FrameworkHack.appendDexListImplUnderICS(jarsOfDex,pcl,dexDir);
    }
 else {
      boolean kitkatPlus=Build.VERSION.SDK_INT >= SDK_INT_KITKAT;
      boolean marshmallowPlus=Build.VERSION.SDK_INT >= SDK_INT_MARSHMALLOW;
      ArrayList<File> jarFiles=DexDex.strings2Files(jarsOfDex);
      FrameworkHack.appendDexListImplICS(jarFiles,pcl,dexDir,kitkatPlus,marshmallowPlus);
    }
    for (    String jarName : names) {
      theAppended.add(jarName);
    }
    if (debug) {
      Log.d(TAG,"appendOdexesToClassPath completed : " + pcl);
      Log.d(TAG,"theAppended : " + theAppended);
    }
  }
 catch (  Exception ex) {
    throw new RuntimeException(ex);
  }
  return true;
}

@Override public final int readInt() throws IOException {
  dis.readFully(work,0,4);
  return (work[3]) << 24 | (work[2] & 0xff) << 16 | (work[1] & 0xff) << 8 | (work[0] & 0xff);
}

private void assertSerializeAndDesDateTime(String dateTimeString) throws RyaTypeResolverException {
  assertSerializeAndDesDateTime(dateTimeString,dateTimeString);
}

public boolean isHardMode(){
  return isHardMode;
}

protected String doIt() throws Exception {
  setup();
  for (  MWarehouse warehouse : warehouses)   for (  MCostType costType : costTypes)   for (  MCostElement costElement : costElements)   for (  int productId : products)   generateInventoryValue(productId,costType.getM_CostType_ID(),costElement.getM_CostElement_ID(),warehouse.getM_Warehouse_ID());
  pstmt.executeBatch();
  commitEx();
  DB.close(pstmt);
  DB.executeUpdate("UPDATE T_InventoryValue SET Cost = CASE WHEN QtyOnHand <> 0 THEN (CostAmt + CostAmtLL) / QtyOnHand ELSE  0 END  ,  CumulatedAmt = CASE WHEN QtyOnHand <> 0  THEN  CostAmt + CostAmtLL ELSE 0 END ,  DateValue = " + DB.TO_DATE(p_DateValue) + " WHERE AD_PInstance_ID=?",getAD_PInstance_ID(),get_TrxName());
  return "@Ok@ " + count;
}

public void run(){
  setup();
  log.info("start recovering...");
  for (  TaskStorageManager taskStorageManager : taskStorageManagers) {
    taskStorageManager.init();
    taskStorageManager.stopStores();
    log.debug("restored " + taskStorageManager.toString());
  }
  log.info("successfully recovered in " + storeBaseDir.toString());
}

public Criteria createCriteria(){
  Criteria criteria=createCriteriaInternal();
  if (oredCriteria.size() == 0) {
    oredCriteria.add(criteria);
  }
  return criteria;
}

public static int[] shuffle(int[] input){
  List<Integer> vals=new ArrayList<Integer>(input.length);
  for (int i=0; i < input.length; i++)   vals.add(input[i]);
  Collections.shuffle(vals,SEEDED_RANDOM);
  int[] copy=new int[input.length];
  for (int i=0; i < input.length; i++)   copy[i]=vals.get(i);
  return copy;
}

public void read(int i){
  VariableValue v=rowVector.elementAt(i);
  v.readAll();
}

protected List<Expression> transformExpressions(List<? extends Expression> expressions,ExpressionTransformer transformer){
  List<Expression> list=new ArrayList<Expression>(expressions.size());
  for (  Expression expr : expressions) {
    list.add(transformer.transform(expr));
  }
  return list;
}

public String prefixForward(int length){
  final String prefix=prefix(length);
  this.pointer+=length;
  this.index+=length;
  this.column+=length;
  return prefix;
}

private boolean canAddTask(){
  return tCur == null;
}

public void flush() throws IOException {
  if (printWriter != null) {
    printWriter.flush();
  }
  if (gzipOutputStream != null) {
    gzipOutputStream.flush();
  }
}

public int start(){
  started.compareAndSet(false,true);
  server.start();
  return server.getServerPort();
}

public static double angle(Tuple3d a,Tuple3d b){
  double dx=b.x - a.x;
  double dy=b.y - a.y;
  double angle=0.0d;
  if (dx == 0.0) {
    if (dy == 0.0)     angle=0.0;
 else     if (dy > 0.0)     angle=Math.PI / 2.0;
 else     angle=(Math.PI * 3.0) / 2.0;
  }
 else   if (dy == 0.0) {
    if (dx > 0.0)     angle=0.0;
 else     angle=Math.PI;
  }
 else {
    if (dx < 0.0)     angle=Math.atan(dy / dx) + Math.PI;
 else     if (dy < 0.0)     angle=Math.atan(dy / dx) + (2 * Math.PI);
 else     angle=Math.atan(dy / dx);
  }
  return angle;
}

public void addStringToTable(byte[] oldString,byte newString){
  int length=oldString.length;
  byte[] str=new byte[length + 1];
  System.arraycopy(oldString,0,str,0,length);
  str[length]=newString;
  stringTable[tableIndex++]=str;
  if (tableIndex == 511) {
    bitsToGet=10;
  }
 else   if (tableIndex == 1023) {
    bitsToGet=11;
  }
 else   if (tableIndex == 2047) {
    bitsToGet=12;
  }
}

public static boolean identical(URI first,URI second){
  if ((first != null) && (second != null)) {
    return first.equals(second);
  }
  return false;
}

default <ST>Xor<ST,T> toXor(final ST secondary){
  final Optional<T> o=toOptional();
  return o.isPresent() ? Xor.primary(o.get()) : Xor.secondary(secondary);
}

public void processInvite(RequestEvent requestEvent,ServerTransaction serverTransaction){
  SipProvider sipProvider=(SipProvider)requestEvent.getSource();
  Request request=requestEvent.getRequest();
  logger.info("Got an INVITE  " + request);
  timer.schedule(new DelayedInviteResponsesTask(requestEvent,sipProvider),100);
}

ConfigurationError(String msg,Exception x){
  super(msg);
  this.exception=x;
}

protected Instances dataFromXML(Instances header) throws Exception {
  Instances result;
  Element node;
  Vector<Element> list;
  list=getChildTags(m_Document.getDocumentElement(),TAG_BODY);
  node=list.get(0);
  list=getChildTags(node,TAG_INSTANCES);
  node=list.get(0);
  result=createInstances(header,node);
  return result;
}

private static String prependIfMissing(final String str,final CharSequence prefix,final boolean ignoreCase,final CharSequence... prefixes){
  if (str == null || isEmpty(prefix) || startsWith(str,prefix,ignoreCase)) {
    return str;
  }
  if (prefixes != null && prefixes.length > 0) {
    for (    final CharSequence p : prefixes) {
      if (startsWith(str,p,ignoreCase)) {
        return str;
      }
    }
  }
  return prefix.toString() + str;
}

protected CacheDistributionAdvisor createDistributionAdvisor(InternalRegionArguments internalRegionArgs){
  return CacheDistributionAdvisor.createCacheDistributionAdvisor(this);
}

public Object[] toArray(){
  ArrayList<E> al=new ArrayList<E>();
  for (Node<E> p=first(); p != null; p=succ(p)) {
    E item=p.item;
    if (item != null)     al.add(item);
  }
  return al.toArray();
}

public void addMouseListener(GlobalMouseListener listener){
  listeners.add(listener);
}

private Vector1D finiteOrNullPoint(final double x){
  return Double.isInfinite(x) ? null : new Vector1D(x);
}

public void loadPDF(final File input){
  if (input == null) {
    return;
  }
  scale=1;
  PDFfile=input.getAbsolutePath();
  fileLoc.setText(PDFfile);
  openFile(input,null,false);
}

public CharBuffer append(Object obj){
  return append(String.valueOf(obj));
}

public void testIntbyInt1(){
  byte aBytes[]={10,20,30,40};
  byte bBytes[]={1,2,3,4};
  int aSign=1;
  int bSign=-1;
  byte rBytes[]={-11,-41,-101,55,5,15,96};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.multiply(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

public abstract void initializeConstraints(Step step,Settings settings);

private static void checkFileValidation(File file){
  if (file == null)   throw new NullPointerException("File must not be null");
  if (!file.exists()) {
    throw new IllegalArgumentException("The file: " + file.getPath() + " doesn't exist.");
  }
  file.canRead();
}

public <ResultT>Set<ResultT> toSet(Converter<ResultT> converter){
  try {
    if (isEmpty(cursor)) {
      return Collections.emptySet();
    }
    return populate(converter,new HashSet<ResultT>(cursor.getCount()));
  }
  finally {
    close();
  }
}

public static Builder newBuilder(){
  return new Builder();
}

public static void stashDisableAssertionArg(String arg){
  if (arg == null || arg.equals("")) {
    assertionsEnabled=false;
  }
 else {
    disabledAssertionStrings=arg.split(":");
  }
}

private static void attemptRetryOnException(String logPrefix,Request<?> request,VolleyError exception) throws VolleyError {
  RetryPolicy retryPolicy=request.getRetryPolicy();
  int oldTimeout=request.getTimeoutMs();
  try {
    retryPolicy.retry(exception);
  }
 catch (  VolleyError e) {
    request.addMarker(String.format("%s-timeout-giveup [timeout=%s]",logPrefix,oldTimeout));
    throw e;
  }
  request.addMarker(String.format("%s-retry [timeout=%s]",logPrefix,oldTimeout));
}

public Iterator<Stream> memberIterator(){
  return memberSet.iterator();
}

private void cleanMapping(){
  ArrayList<Integer> toRemove=new ArrayList<Integer>();
  int size=mListMapping.size();
  for (int i=0; i < size; ++i) {
    if (mListMapping.keyAt(i) == mListMapping.valueAt(i)) {
      toRemove.add(mListMapping.keyAt(i));
    }
  }
  size=toRemove.size();
  for (int i=0; i < size; ++i) {
    mListMapping.delete(toRemove.get(i));
  }
}

public static String timeUntil(final int seconds,final boolean forceSeconds){
  final StringBuilder sbuf=new StringBuilder();
  timeUntil(sbuf,seconds,forceSeconds);
  return sbuf.toString();
}

public void remove(T item){
  if (set.remove(item)) {
    fireContentsChanged(this,0,getSize() - 1);
  }
}

public static void append(File file,Reader reader,String charset) throws IOException {
  append(file,reader,charset,false);
}

void parseIgnoredSection() throws IOException {
  int depth=1;
  in.replace++;
  while (true) {
switch (ch) {
case '<':
      if ((ch=in.read()) == '!') {
        if ((ch=in.read()) == '[') {
          ch=in.read();
          depth++;
        }
      }
    break;
case ']':
  if ((ch=in.read()) == ']') {
    if ((ch=in.read()) == '>') {
      ch=in.read();
      if (--depth == 0) {
        in.replace--;
        return;
      }
    }
  }
break;
case -1:
error("eof");
in.replace--;
return;
default :
ch=in.read();
break;
}
}
}

private synchronized int readRecordLength() throws IOException {
  if (in.getPos() >= end) {
    return -1;
  }
  int length=in.readInt();
  if (sync != null && length == SYNC_ESCAPE) {
    in.readFully(syncCheck);
    if (!Arrays.equals(sync,syncCheck)) {
      throw new IOException("File is corrupt!");
    }
    syncSeen=true;
    if (in.getPos() >= end) {
      return -1;
    }
    length=in.readInt();
  }
 else {
    syncSeen=false;
  }
  return length;
}

public void addSlide(@NonNull Fragment fragment){
  fragments.add(fragment);
  if (isWizardMode) {
    setOffScreenPageLimit(fragments.size());
  }
  mPagerAdapter.notifyDataSetChanged();
}

public DefaultIntervalCategoryDataset(Comparable[] seriesKeys,Comparable[] categoryKeys,Number[][] starts,Number[][] ends){
  this.startData=starts;
  this.endData=ends;
  if (starts != null && ends != null) {
    String baseName="org.jfree.data.resources.DataPackageResources";
    ResourceBundle resources=ResourceBundleWrapper.getBundle(baseName);
    int seriesCount=starts.length;
    if (seriesCount != ends.length) {
      String errMsg="DefaultIntervalCategoryDataset: the number " + "of series in the start value dataset does " + "not match the number of series in the end "+ "value dataset.";
      throw new IllegalArgumentException(errMsg);
    }
    if (seriesCount > 0) {
      if (seriesKeys != null) {
        if (seriesKeys.length != seriesCount) {
          throw new IllegalArgumentException("The number of series keys does not " + "match the number of series in the data.");
        }
        this.seriesKeys=seriesKeys;
      }
 else {
        String prefix=resources.getString("series.default-prefix") + " ";
        this.seriesKeys=generateKeys(seriesCount,prefix);
      }
      int categoryCount=starts[0].length;
      if (categoryCount != ends[0].length) {
        String errMsg="DefaultIntervalCategoryDataset: the " + "number of categories in the start value " + "dataset does not match the number of "+ "categories in the end value dataset.";
        throw new IllegalArgumentException(errMsg);
      }
      if (categoryKeys != null) {
        if (categoryKeys.length != categoryCount) {
          throw new IllegalArgumentException("The number of category keys does not match " + "the number of categories in the data.");
        }
        this.categoryKeys=categoryKeys;
      }
 else {
        String prefix=resources.getString("categories.default-prefix") + " ";
        this.categoryKeys=generateKeys(categoryCount,prefix);
      }
    }
 else {
      this.seriesKeys=new Comparable[0];
      this.categoryKeys=new Comparable[0];
    }
  }
}

public void translate(double dx,double dy){
  if (!isRelative()) {
    x+=dx;
    y+=dy;
  }
  if (sourcePoint != null) {
    sourcePoint.setX(sourcePoint.getX() + dx);
    sourcePoint.setY(sourcePoint.getY() + dy);
  }
  if (targetPoint != null) {
    targetPoint.setX(targetPoint.getX() + dx);
    targetPoint.setY(targetPoint.getY() + dy);
  }
  if (TRANSLATE_CONTROL_POINTS && points != null) {
    int count=points.size();
    for (int i=0; i < count; i++) {
      mxPoint pt=(mxPoint)points.get(i);
      pt.setX(pt.getX() + dx);
      pt.setY(pt.getY() + dy);
    }
  }
}

public abstract void fill(ByteBuffer buffer,long id);

private String anonymizePassword(String password){
  if (password == null) {
    return "null";
  }
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < password.length(); i++) {
    sb.append('*');
  }
  return sb.toString();
}

public final void write(final byte[] data){
  byteBuffer.put(data);
}

public RRDatabase(File file) throws IOException {
  name=file.getName();
  rrdFile=new RRDFile(file);
  header=new Header(rrdFile);
  nameindex=new HashMap<String,Integer>(header.dsCount);
  dataSources=new ArrayList<DataSource>(header.dsCount);
  for (int i=0; i < header.dsCount; i++) {
    DataSource ds=new DataSource(rrdFile);
    nameindex.put(ds.getName(),i);
    dataSources.add(ds);
  }
  archives=new ArrayList<Archive>(header.rraCount);
  for (int i=0; i < header.rraCount; i++) {
    Archive archive=new Archive(this);
    archives.add(archive);
  }
  long last_up=(long)rrdFile.readLong() * 1000;
  if (header.getVersionAsInt() >= Constants.VERSION_WITH_LAST_UPDATE_SEC) {
    long last_up_usec=rrdFile.readLong();
    last_up+=last_up_usec / 1000;
  }
  lastUpdate=new Date(last_up);
  for (int i=0; i < header.dsCount; i++) {
    DataSource ds=dataSources.get(i);
    ds.loadPDPStatusBlock(rrdFile);
  }
  for (int i=0; i < header.rraCount; i++) {
    Archive archive=archives.get(i);
    archive.loadCDPStatusBlocks(rrdFile,header.dsCount);
  }
  for (int i=0; i < header.rraCount; i++) {
    Archive archive=archives.get(i);
    archive.loadCurrentRow(rrdFile);
  }
  for (int i=0; i < header.rraCount; i++) {
    Archive archive=archives.get(i);
    archive.loadData(rrdFile,header.dsCount);
  }
}

public void close() throws IOException {
  inputStream.close();
}

public Address malloc(int size,int howmany){
  int result=nextReservableAddress;
  nextReservableAddress+=size * howmany;
  if (nextReservableAddress > (MEMSIZE + memAddressStart)) {
    addressOutOfRange=true;
    return null;
  }
  return new Address(Op.MEM,size,result);
}

public static String maskLeft(String s,int len,char mask_ch){
  if (len <= 0) {
    return s;
  }
  len=Math.min(len,s.length());
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < len; i++) {
    sb.append(mask_ch);
  }
  sb.append(s.substring(len));
  return sb.toString();
}

public static double pdf(double x,double mu,double sigma,double skew){
  x=(x - mu) / sigma;
  if (Math.abs(skew) > 0.) {
    x=-Math.log(1. - skew * x) / skew;
  }
  return MathUtil.SQRTHALF * Math.exp(-.5 * x * x) / sigma / (1 - skew * x);
}

public Composer to(long animDuration,float x,float y,int alpha,float scaleX,float scaleY,float rotation,Ease ease){
  mTweenParameterList.add(new TweenParameter(x,y,alpha,scaleX,scaleY,rotation,animDuration,ease));
  return this;
}

@Override public String toString(){
  StringBuilder buffer=new StringBuilder(32);
  try {
    print(buffer);
  }
 catch (  IOException e) {
    throw new RuntimeException("Exception printing to StringBuilder",e);
  }
  return buffer.toString();
}

@Override public MemChunkHolder<BigDataMemAllocator> createChunk(long size,boolean autoreclaim){
  MemChunkHolder<BigDataMemAllocator> ret=null;
  Long addr=m_vmasvc.allocate(m_nid,size,true);
  if (0 == addr && m_activegc) {
    forceGC();
    addr=m_vmasvc.allocate(m_nid,size,true);
  }
  if (0 != addr) {
    ret=new MemChunkHolder<BigDataMemAllocator>(this,addr,size);
    ret.setCollector(m_chunkcollector);
    if (autoreclaim) {
      m_chunkcollector.register(ret);
    }
  }
  return ret;
}

protected void drawLabel(Canvas canvas,String labelText,DefaultRenderer renderer,List<RectF> prevLabelsBounds,int centerX,int centerY,float shortRadius,float longRadius,float currentAngle,float angle,int left,int right,int color,Paint paint,boolean line,boolean display){
  if (renderer.isShowLabels() || display) {
    paint.setColor(color);
    double rAngle=Math.toRadians(90 - (currentAngle + angle / 2));
    double sinValue=Math.sin(rAngle);
    double cosValue=Math.cos(rAngle);
    int x1=Math.round(centerX + (float)(shortRadius * sinValue));
    int y1=Math.round(centerY + (float)(shortRadius * cosValue));
    int x2=Math.round(centerX + (float)(longRadius * sinValue));
    int y2=Math.round(centerY + (float)(longRadius * cosValue));
    float size=renderer.getLabelsTextSize();
    float extra=Math.max(size / 2,10);
    paint.setTextAlign(Align.LEFT);
    if (x1 > x2) {
      extra=-extra;
      paint.setTextAlign(Align.RIGHT);
    }
    float xLabel=x2 + extra;
    float yLabel=y2;
    float width=right - xLabel;
    if (x1 > x2) {
      width=xLabel - left;
    }
    labelText=getFitText(labelText,width,paint);
    float widthLabel=paint.measureText(labelText);
    boolean okBounds=false;
    while (!okBounds && line) {
      boolean intersects=false;
      int length=prevLabelsBounds.size();
      for (int j=0; j < length && !intersects; j++) {
        RectF prevLabelBounds=prevLabelsBounds.get(j);
        if (prevLabelBounds.intersects(xLabel,yLabel,xLabel + widthLabel,yLabel + size)) {
          intersects=true;
          yLabel=Math.max(yLabel,prevLabelBounds.bottom);
        }
      }
      okBounds=!intersects;
    }
    if (line) {
      y2=(int)(yLabel - size / 2);
      canvas.drawLine(x1,y1,x2,y2,paint);
      canvas.drawLine(x2,y2,x2 + extra,y2,paint);
    }
 else {
      paint.setTextAlign(Align.CENTER);
    }
    canvas.drawText(labelText,xLabel,yLabel,paint);
    if (line) {
      prevLabelsBounds.add(new RectF(xLabel,yLabel,xLabel + widthLabel,yLabel + size));
    }
  }
}

protected void onPageScrolled(int position,float offset,int offsetPixels){
  if (mDecorChildCount > 0) {
    final int scrollX=getScrollX();
    int paddingLeft=getPaddingLeft();
    int paddingRight=getPaddingRight();
    final int width=getWidth();
    final int childCount=getChildCount();
    for (int i=0; i < childCount; i++) {
      final View child=getChildAt(i);
      final LayoutParams lp=(LayoutParams)child.getLayoutParams();
      if (!lp.isDecor)       continue;
      final int hgrav=lp.gravity & Gravity.HORIZONTAL_GRAVITY_MASK;
      int childLeft=0;
switch (hgrav) {
default :
        childLeft=paddingLeft;
      break;
case Gravity.LEFT:
    childLeft=paddingLeft;
  paddingLeft+=child.getWidth();
break;
case Gravity.CENTER_HORIZONTAL:
childLeft=Math.max((width - child.getMeasuredWidth()) / 2,paddingLeft);
break;
case Gravity.RIGHT:
childLeft=width - paddingRight - child.getMeasuredWidth();
paddingRight+=child.getMeasuredWidth();
break;
}
childLeft+=scrollX;
final int childOffset=childLeft - child.getLeft();
if (childOffset != 0) {
child.offsetLeftAndRight(childOffset);
}
}
}
if (mOnPageChangeListener != null) {
mOnPageChangeListener.onPageScrolled(position,offset,offsetPixels);
}
if (mInternalPageChangeListener != null) {
mInternalPageChangeListener.onPageScrolled(position,offset,offsetPixels);
}
if (mPageTransformer != null) {
final int scrollX=getScrollX();
final int childCount=getChildCount();
for (int i=0; i < childCount; i++) {
final View child=getChildAt(i);
final LayoutParams lp=(LayoutParams)child.getLayoutParams();
if (lp.isDecor) continue;
final float transformPos=(float)(child.getLeft() - scrollX) / getClientWidth();
mPageTransformer.transformPage(child,transformPos);
}
}
mCalledSuper=true;
}

public void DrawSemivariogramSurface(double Radius,boolean AnIsotropic){
  double[][] data=new double[3][BinSurface.length * BinSurface[0].length];
  int n=0;
  double max=Double.MIN_VALUE;
  for (int i=0; i < BinSurface.length; i++) {
    for (int j=0; j < BinSurface[i].length; j++) {
      data[0][n]=BinSurface[i][j].GridHorDistance;
      data[1][n]=BinSurface[i][j].GridVerDistance;
      if ((Math.pow(data[0][n],2) + Math.pow(data[1][n],2)) <= Radius * Radius && !Double.isNaN(BinSurface[i][j].Value)) {
        data[2][n]=BinSurface[i][j].Value;
        if (max < data[2][n]) {
          max=data[2][n];
        }
      }
 else {
        data[2][n]=-1;
      }
      n++;
    }
  }
  DefaultXYZDataset dataset=new DefaultXYZDataset();
  dataset.addSeries("Value",data);
  NumberAxis xAxis=new NumberAxis();
  xAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
  xAxis.setLowerMargin(0.0);
  xAxis.setUpperMargin(0.0);
  NumberAxis yAxis=new NumberAxis();
  yAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
  yAxis.setLowerMargin(0.0);
  yAxis.setUpperMargin(0.0);
  XYBlockRenderer renderer=new XYBlockRenderer();
  renderer.setBlockWidth(LagSize);
  renderer.setBlockHeight(LagSize);
  renderer.setBlockAnchor(RectangleAnchor.CENTER);
  LookupPaintScale paintScale=new LookupPaintScale(0,max,Color.white);
  double colorRange=max / 6;
  paintScale.add(0.0,Color.blue);
  paintScale.add(1 * colorRange,Color.green);
  paintScale.add(2 * colorRange,Color.cyan);
  paintScale.add(3 * colorRange,Color.yellow);
  paintScale.add(4 * colorRange,Color.ORANGE);
  paintScale.add(5 * colorRange,Color.red);
  renderer.setPaintScale(paintScale);
  XYPlot plot=new XYPlot(dataset,xAxis,yAxis,renderer);
  plot.setBackgroundPaint(Color.lightGray);
  plot.setDomainGridlinesVisible(false);
  plot.setRangeGridlinePaint(Color.white);
  if (AnIsotropic) {
    CombinedRangeXYPlot combinedrangexyplot=new CombinedRangeXYPlot();
    XYSeries seriesT1=new XYSeries("1");
    XYSeriesCollection AngleCollct=new XYSeriesCollection();
    double bw=BandWidth;
    double r=bw / Math.sin(Tolerance);
    if (r > Radius) {
      bw=Radius * Math.sin(Tolerance);
      r=Radius;
    }
    seriesT1.add(r * Math.cos(Angle + Tolerance),r * Math.sin(Angle + Tolerance));
    if ((double)Math.round(Math.sin(Angle) * 10000) / 10000 != 0) {
      if ((double)Math.round(Math.cos(Angle) * 10000) / 10000 != 0) {
        double a=(1 + Math.pow(Math.tan(Angle),2));
        double b=2 * bw / Math.sin(Angle) * Math.pow(Math.tan(Angle),2);
        double c=Math.pow(Math.tan(Angle),2) * Math.pow(bw / Math.sin(Angle),2) - Math.pow(Radius,2);
        double x1=(-b + Math.sqrt(Math.pow(b,2) - 4 * a * c)) / (2 * a);
        double y1=Math.tan(Angle) * (x1 + bw / Math.sin(Angle));
        double x2=(-b - Math.sqrt(Math.pow(b,2) - 4 * a * c)) / (2 * a);
        double y2=Math.tan(Angle) * (x2 + bw / Math.sin(Angle));
        double d1=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x1),2)) + (Math.pow((Radius * Math.sin(Angle) - y1),2)));
        double d2=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x2),2)) + (Math.pow((Radius * Math.sin(Angle) - y2),2)));
        if (d1 < d2) {
          seriesT1.add(x1,y1);
        }
 else {
          seriesT1.add(x2,y2);
        }
      }
 else {
        double x1=-bw * Math.sin(Angle);
        double y1=Math.sqrt(Math.pow(Radius,2) - Math.pow(x1,2));
        double y2=-Math.sqrt(Math.pow(Radius,2) - Math.pow(x1,2));
        double d1=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x1),2)) + (Math.pow((Radius * Math.sin(Angle) - y1),2)));
        double d2=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x1),2)) + (Math.pow((Radius * Math.sin(Angle) - y2),2)));
        if (d1 < d2) {
          seriesT1.add(x1,y1);
        }
 else {
          seriesT1.add(x1,y2);
        }
      }
    }
 else {
      double y1=bw * Math.cos(Angle);
      double x1=Math.sqrt(Math.pow(Radius,2) - Math.pow(y1,2));
      double x2=-Math.sqrt(Math.pow(Radius,2) - Math.pow(y1,2));
      double d1=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x1),2)) + (Math.pow((Radius * Math.sin(Angle) - y1),2)));
      double d2=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x2),2)) + (Math.pow((Radius * Math.sin(Angle) - y1),2)));
      if (d1 < d2) {
        seriesT1.add(x1,y1);
      }
 else {
        seriesT1.add(x2,y1);
      }
    }
    AngleCollct.addSeries(seriesT1);
    XYSeries seriesT2=new XYSeries("2");
    seriesT2.add(r * Math.cos(Angle + Tolerance),r * Math.sin(Angle + Tolerance));
    seriesT2.add(0.0,0.0);
    AngleCollct.addSeries(seriesT2);
    XYSeries seriesT3=new XYSeries("3");
    seriesT3.add(Radius * Math.cos(Angle),Radius * Math.sin(Angle));
    seriesT3.add(0,0);
    AngleCollct.addSeries(seriesT3);
    XYSeries seriesT4=new XYSeries("4");
    seriesT4.add(r * Math.cos(Angle - Tolerance),r * Math.sin(Angle - Tolerance));
    seriesT4.add(0,0);
    AngleCollct.addSeries(seriesT4);
    XYSeries seriesT5=new XYSeries("5");
    seriesT5.add(r * Math.cos(Angle - Tolerance),r * Math.sin(Angle - Tolerance));
    if ((double)Math.round(Math.sin(Angle) * 10000) / 10000 != 0) {
      if ((double)Math.round(Math.cos(Angle) * 10000) / 10000 != 0) {
        double a=(1 + Math.pow(Math.tan(Angle),2));
        double b=-2 * bw / Math.sin(Angle) * Math.pow(Math.tan(Angle),2);
        double c=Math.pow(Math.tan(Angle),2) * Math.pow(bw / Math.sin(Angle),2) - Math.pow(Radius,2);
        double x1=(-b + Math.sqrt(Math.pow(b,2) - 4 * a * c)) / (2 * a);
        double y1=Math.tan(Angle) * (x1 - bw / Math.sin(Angle));
        double x2=(-b - Math.sqrt(Math.pow(b,2) - 4 * a * c)) / (2 * a);
        double y2=Math.tan(Angle) * (x2 - bw / Math.sin(Angle));
        double d1=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x1),2)) + (Math.pow((Radius * Math.sin(Angle) - y1),2)));
        double d2=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x2),2)) + (Math.pow((Radius * Math.sin(Angle) - y2),2)));
        if (d1 < d2) {
          seriesT5.add(x1,y1);
        }
 else {
          seriesT5.add(x2,y2);
        }
      }
 else {
        double x1=bw * Math.sin(Angle);
        double y1=Math.sqrt(Math.pow(Radius,2) - Math.pow(x1,2));
        double y2=-Math.sqrt(Math.pow(Radius,2) - Math.pow(x1,2));
        double d1=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x1),2)) + (Math.pow((Radius * Math.sin(Angle) - y1),2)));
        double d2=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x1),2)) + (Math.pow((Radius * Math.sin(Angle) - y2),2)));
        if (d1 < d2) {
          seriesT5.add(x1,y1);
        }
 else {
          seriesT5.add(x1,y2);
        }
      }
    }
 else {
      double y1=-bw * Math.cos(Angle);
      double x1=Math.sqrt(Math.pow(Radius,2) - Math.pow(y1,2));
      double x2=-Math.sqrt(Math.pow(Radius,2) - Math.pow(y1,2));
      double d1=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x1),2)) + (Math.pow((Radius * Math.sin(Angle) - y1),2)));
      double d2=Math.sqrt((Math.pow((Radius * Math.cos(Angle) - x2),2)) + (Math.pow((Radius * Math.sin(Angle) - y1),2)));
      if (d1 < d2) {
        seriesT5.add(x1,y1);
      }
 else {
        seriesT5.add(x2,y1);
      }
    }
    AngleCollct.addSeries(seriesT5);
    plot.setDataset(1,AngleCollct);
    XYLineAndShapeRenderer lineshapRend=new XYLineAndShapeRenderer(true,false);
    for (int i=0; i < AngleCollct.getSeriesCount(); i++) {
      lineshapRend.setSeriesPaint(i,Color.BLACK);
    }
    plot.setRenderer(1,lineshapRend);
    combinedrangexyplot.add(plot);
  }
  plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);
  JFreeChart chart=new JFreeChart("Semivariogram Surface",plot);
  chart.removeLegend();
  chart.setBackgroundPaint(Color.white);
  ChartFrame frame=new ChartFrame("",chart);
  frame.pack();
  frame.setVisible(true);
}

public static void overScrollBy(final PullToRefreshBase<?> view,final int deltaX,final int scrollX,final int deltaY,final int scrollY,final int scrollRange,final int fuzzyThreshold,final float scaleFactor,final boolean isTouchEvent){
  final int deltaValue, currentScrollValue, scrollValue;
switch (view.getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    deltaValue=deltaX;
  scrollValue=scrollX;
currentScrollValue=view.getScrollX();
break;
case VERTICAL:
default :
deltaValue=deltaY;
scrollValue=scrollY;
currentScrollValue=view.getScrollY();
break;
}
if (view.isPullToRefreshOverScrollEnabled() && !view.isRefreshing()) {
final Mode mode=view.getMode();
if (mode.permitsPullToRefresh() && !isTouchEvent && deltaValue != 0) {
final int newScrollValue=(deltaValue + scrollValue);
if (PullToRefreshBase.DEBUG) {
Log.d(LOG_TAG,"OverScroll. DeltaX: " + deltaX + ", ScrollX: "+ scrollX+ ", DeltaY: "+ deltaY+ ", ScrollY: "+ scrollY+ ", NewY: "+ newScrollValue+ ", ScrollRange: "+ scrollRange+ ", CurrentScroll: "+ currentScrollValue);
}
if (newScrollValue < (0 - fuzzyThreshold)) {
if (mode.showHeaderLoadingLayout()) {
if (currentScrollValue == 0) {
view.setState(State.OVERSCROLLING);
}
view.setHeaderScroll((int)(scaleFactor * (currentScrollValue + newScrollValue)));
}
}
 else if (newScrollValue > (scrollRange + fuzzyThreshold)) {
if (mode.showFooterLoadingLayout()) {
if (currentScrollValue == 0) {
view.setState(State.OVERSCROLLING);
}
view.setHeaderScroll((int)(scaleFactor * (currentScrollValue + newScrollValue - scrollRange)));
}
}
 else if (Math.abs(newScrollValue) <= fuzzyThreshold || Math.abs(newScrollValue - scrollRange) <= fuzzyThreshold) {
view.setState(State.RESET);
}
}
 else if (isTouchEvent && State.OVERSCROLLING == view.getState()) {
view.setState(State.RESET);
}
}
}

public Single<TAccessToken> grantNewAccessToken(OAuth2Grant<TAccessToken> grant){
  return grantNewAccessToken(grant,Calendar.getInstance());
}

public static Number floor(Number a){
  if (isFloatingPoint(a)) {
    return Math.floor(a.doubleValue());
  }
 else {
    return a.longValue();
  }
}

private void readDefsElement(IXMLElement elem) throws IOException {
  for (  IXMLElement child : elem.getChildren()) {
    Figure childFigure=readElement(child);
  }
}

@Nullable private static ActivityWrapper findLauncherActivityForDevice(@NotNull List<ActivityWrapper> launchableActivities,@NotNull IDevice device){
  if (device.supportsFeature(IDevice.HardwareFeature.TV)) {
    return findLeanbackLauncher(launchableActivities);
  }
  return null;
}

public boolean isQueryRunning(final BoundEntity song){
synchronized (mRunningQueries) {
    return mRunningQueries.contains(song);
  }
}

public synchronized void flush() throws IOException {
  checkNotClosed();
  trimToSize();
  trimToFileCount();
  journalWriter.flush();
}

private Response<Bitmap> doParse(NetworkResponse response){
  byte[] data=response.data;
  BitmapFactory.Options decodeOptions=new BitmapFactory.Options();
  Bitmap bitmap=null;
  if (mMaxWidth == 0 && mMaxHeight == 0) {
    decodeOptions.inPreferredConfig=mDecodeConfig;
    bitmap=BitmapFactory.decodeByteArray(data,0,data.length,decodeOptions);
  }
 else {
    decodeOptions.inJustDecodeBounds=true;
    BitmapFactory.decodeByteArray(data,0,data.length,decodeOptions);
    int actualWidth=decodeOptions.outWidth;
    int actualHeight=decodeOptions.outHeight;
    int desiredWidth=getResizedDimension(mMaxWidth,mMaxHeight,actualWidth,actualHeight);
    int desiredHeight=getResizedDimension(mMaxHeight,mMaxWidth,actualHeight,actualWidth);
    decodeOptions.inJustDecodeBounds=false;
    decodeOptions.inSampleSize=findBestSampleSize(actualWidth,actualHeight,desiredWidth,desiredHeight);
    Bitmap tempBitmap=BitmapFactory.decodeByteArray(data,0,data.length,decodeOptions);
    if (tempBitmap != null && (tempBitmap.getWidth() > desiredWidth || tempBitmap.getHeight() > desiredHeight)) {
      bitmap=Bitmap.createScaledBitmap(tempBitmap,desiredWidth,desiredHeight,true);
      tempBitmap.recycle();
    }
 else {
      bitmap=tempBitmap;
    }
  }
  if (bitmap == null) {
    return Response.error(new ParseError(response));
  }
 else {
    return Response.success(bitmap,HttpHeaderParser.parseCacheHeaders(response));
  }
}

private Map<String,ExtensionFileFilter> addExtensions(JFileChooser chooser){
  Map<String,ExtensionFileFilter> filters=new HashMap<String,ExtensionFileFilter>();
  for (  Map.Entry<String,String> entry : exts.entrySet()) {
    ExtensionFileFilter filter=new ExtensionFileFilter(entry.getKey(),entry.getValue());
    filters.put(entry.getKey(),filter);
    chooser.addChoosableFileFilter(filter);
  }
  return filters;
}

public static String withNodeInfo(AccessibilityNodeInfo nodeInfo){
  if (nodeInfo == null) {
    return null;
  }
  return String.format(":[text: %s; contentDescription: %s]",nodeInfo.getText(),nodeInfo.getContentDescription());
}

static int allParametersAndArgumentsMatchWithDefaultParams(Parameter[] params,ClassNode[] args){
  int dist=0;
  ClassNode ptype=null;
  for (int i=0, j=0; i < params.length; i++) {
    Parameter param=params[i];
    ClassNode paramType=param.getType();
    ClassNode arg=j >= args.length ? null : args[j];
    if (arg == null || !isAssignableTo(arg,paramType)) {
      if (!param.hasInitialExpression() && (ptype == null || !ptype.equals(paramType))) {
        return -1;
      }
      ptype=null;
    }
 else {
      j++;
      if (!paramType.equals(arg))       dist+=getDistance(arg,paramType);
      if (param.hasInitialExpression()) {
        ptype=arg;
      }
 else {
        ptype=null;
      }
    }
  }
  return dist;
}

private void expect(char expectedSymbol) throws ParseException {
  if (!accept(expectedSymbol))   throw new ParseException("Expected '" + expectedSymbol + "' but found '"+ (char)data[index]+ "'",index);
}

public static byte[] stringToUtf8Bytes(String string){
  int len=string.length();
  byte[] bytes=new byte[len * 3];
  int outAt=0;
  for (int i=0; i < len; i++) {
    char c=string.charAt(i);
    if ((c != 0) && (c < 0x80)) {
      bytes[outAt]=(byte)c;
      outAt++;
    }
 else     if (c < 0x800) {
      bytes[outAt]=(byte)(((c >> 6) & 0x1f) | 0xc0);
      bytes[outAt + 1]=(byte)((c & 0x3f) | 0x80);
      outAt+=2;
    }
 else {
      bytes[outAt]=(byte)(((c >> 12) & 0x0f) | 0xe0);
      bytes[outAt + 1]=(byte)(((c >> 6) & 0x3f) | 0x80);
      bytes[outAt + 2]=(byte)((c & 0x3f) | 0x80);
      outAt+=3;
    }
  }
  byte[] result=new byte[outAt];
  System.arraycopy(bytes,0,result,0,outAt);
  return result;
}

public abstract void initParameters(int[] aCircuitData,IRedstoneCircuitBlock aRedstoneCircuitBlock);

public Contentlet executeSafeFirst(){
  List<Contentlet> result=executeSafe();
  if (result.size() > 0) {
    return result.get(0);
  }
  return null;
}

public void clear(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    for (Node<E> f=first; f != null; ) {
      f.item=null;
      Node<E> n=f.next;
      f.prev=null;
      f.next=null;
      f=n;
    }
    first=last=null;
    count=0;
    notFull.signalAll();
  }
  finally {
    lock.unlock();
  }
}

public void clear(){
  oredCriteria.clear();
  orderByClause=null;
  distinct=false;
}

private static int determineConsecutiveDigitCount(CharSequence msg,int startpos){
  int count=0;
  int len=msg.length();
  int idx=startpos;
  if (idx < len) {
    char ch=msg.charAt(idx);
    while (isDigit(ch) && idx < len) {
      count++;
      idx++;
      if (idx < len) {
        ch=msg.charAt(idx);
      }
    }
  }
  return count;
}

public static boolean isFileExist(String filePath,FileType fileType,boolean performFileCheck) throws IOException {
  filePath=filePath.replace("\\","/");
switch (fileType) {
case HDFS:
case VIEWFS:
    Path path=new Path(filePath);
  FileSystem fs=path.getFileSystem(configuration);
if (performFileCheck) {
  return fs.exists(path) && fs.isFile(path);
}
 else {
  return fs.exists(path);
}
case LOCAL:
default :
File defaultFile=new File(filePath);
if (performFileCheck) {
return defaultFile.exists() && defaultFile.isFile();
}
 else {
return defaultFile.exists();
}
}
}

private DoubleFactor pointwiseProduct(List<DoubleFactor> factors){
  if (factors.isEmpty()) {
    DoubleFactor factor=new DoubleFactor();
    factor.addEntry(new Assignment(),1.0,0.0);
    return factor;
  }
 else   if (factors.size() == 1) {
    return factors.get(0);
  }
  DoubleFactor factor=factors.get(0);
  factors.remove(0);
  for (  DoubleFactor f : factors) {
    DoubleFactor tempFactor=new DoubleFactor();
    Set<String> sharedVars=new HashSet<String>(f.getVariables());
    sharedVars.retainAll(factor.getVariables());
    for (    Assignment a : f.getValues()) {
      double[] entry=f.getEntry(a);
      double prob=entry[0];
      double util=entry[1];
      for (      Assignment b : factor.getValues()) {
        if (b.consistentWith(a,sharedVars)) {
          double[] entry2=factor.getEntry(b);
          double prob2=entry2[0];
          double util2=entry2[1];
          double product=prob * prob2;
          double sum=util + util2;
          tempFactor.addEntry(new Assignment(a,b),product,sum);
        }
      }
    }
    factor=tempFactor;
  }
  return factor;
}

public ClassPath(){
  String syscp=System.getProperty("sun.boot.class.path");
  String envcp=System.getProperty("env.class.path");
  if (envcp == null)   envcp=".";
  String cp=syscp + File.pathSeparator + envcp;
  init(cp);
}

protected static boolean uninstallAddOnExtension(AddOn addOn,Extension extension,AddOnUninstallationProgressCallback callback){
  boolean uninstalledWithoutErrors=true;
  if (extension.isEnabled()) {
    String extUiName=extension.getUIName();
    if (extension.canUnload()) {
      logger.debug("Unloading ext: " + extension.getName());
      try {
        extension.unload();
        ExtensionFactory.unloadAddOnExtension(extension);
      }
 catch (      Exception e) {
        logger.error("An error occurred while uninstalling the extension \"" + extension.getName() + "\" bundled in the add-on \""+ addOn.getId()+ "\":",e);
        uninstalledWithoutErrors=false;
      }
    }
 else {
      logger.debug("Cant dynamically unload ext: " + extension.getName());
      uninstalledWithoutErrors=false;
    }
    callback.extensionRemoved(extUiName);
  }
  addOn.removeLoadedExtension(extension);
  return uninstalledWithoutErrors;
}

private static String pickRandomStatsFields(String[] fieldNames){
  String fieldName;
  do {
    fieldName=fieldNames[TestUtil.nextInt(random(),0,fieldNames.length - 1)];
  }
 while (fieldName.endsWith("_b") || fieldName.endsWith("_b1"));
  return fieldName;
}

@Override public synchronized void doDeleteChild(BaseSolrResource endpoint,String childId){
  String key=getIgnoreCase() ? childId.toLowerCase(Locale.ROOT) : childId;
  if (!managedWords.contains(key))   throw new SolrException(ErrorCode.NOT_FOUND,String.format(Locale.ROOT,"%s not found in %s",childId,getResourceId()));
  managedWords.remove(key);
  storeManagedData(managedWords);
  log.info("Removed word: {}",key);
}

public static final String writeTime(double seconds,final String timeformat,final char separator){
  if (seconds < 0) {
    if (seconds == UNDEFINED_TIME)     return "undefined";
    return "-" + writeTime(Math.abs(seconds),timeformat,separator);
  }
  int day=(int)(seconds / MIDNIGHT);
  seconds%=MIDNIGHT;
  if (TIMEFORMAT_EEESSSS.equals(timeformat))   return Week.getDayName(day) + "," + Long.toString((long)(seconds));
  double s=seconds;
  long h=(long)(s / 3600);
  s=s % 3600;
  int m=(int)(s / 60);
  s=s % 60;
  StringBuilder str=new StringBuilder(10);
  if (h < timeElements.length) {
    str.append(timeElements[(int)h]);
  }
 else {
    str.append(Long.toString(h));
  }
  str.append(separator);
  str.append(timeElements[m]);
  if (TIMEFORMAT_EEEHHMM.equals(timeformat)) {
    return Week.getDayName(day) + "," + str.toString();
  }
  if (TIMEFORMAT_EEEHHMMSS.equals(timeformat)) {
    str.append(separator);
    str.append(timeElements[(int)s]);
    return Week.getDayName(day) + "," + str.toString();
  }
  if (TIMEFORMAT_HHMMSSDOTSS.equals(timeformat)) {
    str.append(separator);
    if (s < 10.) {
      str.append("0");
    }
    str.append(s);
    return Week.getDayName(day) + "," + str.toString();
  }
  throw new IllegalArgumentException("The time format (" + timeformat + ") is not known.");
}

public DExportPrivateKeyType(JFrame parent){
  super(parent,Dialog.ModalityType.DOCUMENT_MODAL);
  setTitle(res.getString("DExportPrivateKeyType.Title"));
  initComponents();
}

public static IPoint[] copyOf(IPoint[] original,int newLength){
  IPoint[] copy=new IPoint[newLength];
  System.arraycopy(original,0,copy,0,Math.min(original.length,newLength));
  return copy;
}

public void writeFooter(){
  ps.println("</table>");
  ps.println("</body>");
  ps.println("</html>");
}

protected void saveObject(Object object){
  if (m_FileChooser == null) {
    createFileChooser();
  }
  int returnVal=m_FileChooser.showSaveDialog(this);
  if (returnVal == JFileChooser.APPROVE_OPTION) {
    File sFile=m_FileChooser.getSelectedFile();
    try {
      ObjectOutputStream oo=new ObjectOutputStream(new BufferedOutputStream(new FileOutputStream(sFile)));
      oo.writeObject(object);
      oo.close();
    }
 catch (    Exception ex) {
      JOptionPane.showMessageDialog(this,"Couldn't write to file: " + sFile.getName() + "\n"+ ex.getMessage(),"Save object",JOptionPane.ERROR_MESSAGE);
    }
  }
}

@Override public void write(DataOutput out) throws IOException {
  if (USE_HADOOP_TEXT)   Text.writeString(out,term);
 else   out.writeUTF(term);
  WritableUtils.writeVInt(out,splitno);
  WritableUtils.writeVInt(out,flushno);
}

public static String stripNonDigits(String str){
  StringBuffer result=new StringBuffer(str.length());
  for (  char candidate : str.toCharArray()) {
    if (Character.isDigit(candidate)) {
      result.append(candidate);
    }
  }
  return result.toString();
}

protected Collection<CommunicationSummaryStatistics> doGetCommunicationSummaryStatistics(String tenantId,Criteria criteria){
  String index=client.getIndex(tenantId);
  Map<String,CommunicationSummaryStatistics> stats=new HashMap<>();
  if (!criteria.transactionWide()) {
    Criteria txnWideCriteria=criteria.deriveTransactionWide();
    buildCommunicationSummaryStatistics(stats,index,txnWideCriteria,false);
  }
  buildCommunicationSummaryStatistics(stats,index,criteria,true);
  return stats.values();
}

public void removeContent(String variableId){
  if (!paused) {
    curState.removeFromState(variableId);
    update();
  }
 else {
    log.info("system is paused, ignoring removal of " + variableId);
  }
}

public void addCommandListener(ActionListener l){
  if (globalCommandListeners == null) {
    globalCommandListeners=new EventDispatcher();
  }
  globalCommandListeners.addListener(l);
}

public static void completeBackgroundTasks(long timeoutMillis){
  boolean fifoEmpty=false;
  boolean asyncThreadsCompleted=false;
  long absTimeout=System.currentTimeMillis() + timeoutMillis;
  while (System.currentTimeMillis() < absTimeout) {
synchronized (fifo) {
      fifoEmpty=fifo.size() == 0;
    }
synchronized (JGoogleAnalyticsTracker.class) {
      asyncThreadsCompleted=asyncThreadsRunning == 0;
    }
    if (fifoEmpty && asyncThreadsCompleted)     break;
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
      break;
    }
  }
}

private synchronized void writeObject(java.io.ObjectOutputStream s) throws IOException {
  if (actions == null)   getActions();
  s.defaultWriteObject();
}

public static final byte[] decode(BufferedReader reader) throws IOException, Base64DecodingException {
  byte[] retBytes=null;
  UnsyncByteArrayOutputStream baos=null;
  try {
    baos=new UnsyncByteArrayOutputStream();
    String line;
    while (null != (line=reader.readLine())) {
      byte[] bytes=decode(line);
      baos.write(bytes);
    }
    retBytes=baos.toByteArray();
  }
  finally {
    baos.close();
  }
  return retBytes;
}

public boolean isDefinedInEnv(){
  if (envVars == null || paramNames.length == 0) {
    return false;
  }
  for (  String var : envVars) {
    if (System.getenv(var) == null) {
      return false;
    }
  }
  return true;
}

public void apply(Animator animator,float currValue,float endValue,float velocity){
  apply(animator,currValue,endValue,velocity,Math.abs(endValue - currValue));
}

public void addNotice(ParserNotice notice){
  notices.add(notice);
}

@Override public String toString(){
  int len=sessionId.length;
  StringBuffer s=new StringBuffer(10 + 2 * len);
  s.append("{");
  for (int i=0; i < len; i++) {
    s.append(0x0ff & sessionId[i]);
    if (i != (len - 1))     s.append(", ");
  }
  s.append("}");
  return s.toString();
}

public EventBinder<E> after(String name){
  after.add(name);
  return this;
}

public Point2D forward(Point2D llp,Point2D pt){
  return forward(llp.getY(),llp.getX(),pt,false);
}

private static int maxNumArcsForDedupByte(int currentNumDedupBytes){
  int maxArcs=1 + (2 * currentNumDedupBytes);
  if (currentNumDedupBytes > 5) {
    maxArcs*=currentNumDedupBytes;
  }
  return Math.min(maxArcs,255);
}

public JobCreateRequest createJobCreateRequest(String namespaceCd,String jobName){
  List<Parameter> parameters=new ArrayList<>();
  Parameter parameter=new Parameter(AbstractServiceTest.ATTRIBUTE_NAME_2_MIXED_CASE,AbstractServiceTest.ATTRIBUTE_VALUE_2);
  parameters.add(parameter);
  parameter=new Parameter("Extra Attribute With No Value",null);
  parameters.add(parameter);
  return createJobCreateRequest(namespaceCd,jobName,parameters);
}

private void load() throws RepositoryException, RDFParseException, IOException {
  final RepositoryConnection conn=repository.getConnection();
  String ttlString=MODEL_TTL;
  InputStream stringInput=new ByteArrayInputStream(ttlString.getBytes());
  conn.add(stringInput,"http://dragon-research.com/cham/model/model1",RDFFormat.TURTLE,new Resource[]{});
  ttlString=BUCKET_TTL;
  stringInput=new ByteArrayInputStream(ttlString.getBytes());
  conn.add(stringInput,"http://dragon-research.com/cham/bucket/bucket1",RDFFormat.TURTLE,new Resource[]{});
  conn.commit();
  conn.close();
}

public boolean isTaxIncluded(){
  if (m_M_PriceList_ID == 0) {
    m_M_PriceList_ID=DB.getSQLValue(get_TrxName(),"SELECT M_PriceList_ID FROM C_Order WHERE C_Order_ID=?",getC_Order_ID());
  }
  MPriceList pl=MPriceList.get(getCtx(),m_M_PriceList_ID,get_TrxName());
  return pl.isTaxIncluded();
}

protected WebResource createRequest(String uriPath){
  ensureInitialization();
  return clientRequestHelper.createRequest(client,serviceURI,URI.create(uriPath));
}

public static void init(Context context){
  if (cameraManager == null) {
    cameraManager=new CameraManager(context);
  }
}

public void nextTable() throws SQLException {
  if (tables.hasNext()) {
    currentTable=tables.next();
    openRows();
  }
}

public DDistinguishedNameChooser(JFrame parent,String title,X500Name distinguishedName,boolean editable){
  super(parent,title,Dialog.ModalityType.DOCUMENT_MODAL);
  this.distinguishedName=distinguishedName;
  this.editable=editable;
  initComponents();
}

public static boolean deleteFile(String filePathAndName){
  if ((filePathAndName == null) || filePathAndName.isEmpty()) {
    return false;
  }
  boolean isSuccessfulDelete=false;
  try {
    File fileToDelete=new File(filePathAndName);
    isSuccessfulDelete=fileToDelete.delete();
  }
 catch (  Exception e) {
    logger.debug(e.toString() + System.lineSeparator() + StackTrace.getStringFromStackTrace(e));
    isSuccessfulDelete=false;
  }
  return isSuccessfulDelete;
}

public TungstenPropertiesIO(File path){
  this(new JavaFileIO(),new FilePath(path.getAbsolutePath()));
}

private void computeTabOffsetHelper(RectF stackRect){
  final boolean portrait=mCurrentMode == Orientation.PORTRAIT;
  final float parentWidth=stackRect.width();
  final float parentHeight=stackRect.height();
  final float overscrollPercent=computeOverscrollPercent();
  final float scrollOffset=MathUtils.clamp(mScrollOffset,getMinScroll(false),getMaxScroll(false));
  final float stackScale=getStackScale(stackRect);
  int stackedCount=0;
  float minStackedPosition=0.0f;
  for (int i=0; i < mStackTabs.length; ++i) {
    assert mStackTabs[i] != null;
    StackTab stackTab=mStackTabs[i];
    LayoutTab layoutTab=stackTab.getLayoutTab();
    final float stackScrollOffset=stackTab.isDying() ? mScrollOffsetForDyingTabs : scrollOffset;
    float screenScrollOffset=approxScreen(stackTab,stackScrollOffset);
    screenScrollOffset=Math.max(minStackedPosition,screenScrollOffset);
    if (stackedCount < MAX_NUMBER_OF_STACKED_TABS_TOP) {
      final float tiltXcos=(float)Math.cos(Math.toRadians(layoutTab.getTiltX()));
      final float tiltYcos=(float)Math.cos(Math.toRadians(layoutTab.getTiltY()));
      float collapse=Math.min(Math.abs(tiltXcos),Math.abs(tiltYcos));
      collapse*=layoutTab.getAlpha();
      minStackedPosition+=StackTab.sStackedTabVisibleSize * collapse;
    }
    stackedCount+=stackTab.isDying() ? 0 : 1;
    if (overscrollPercent < 0) {
      screenScrollOffset+=(overscrollPercent / OVERSCROLL_TOP_SLIDE_PCTG) * screenScrollOffset;
      screenScrollOffset=Math.max(0,screenScrollOffset);
    }
    float xIn=(parentWidth - layoutTab.getScaledContentWidth()) / 2.0f;
    float yIn=(parentHeight - layoutTab.getScaledContentHeight()) / 2.0f;
    final float horizontalPadding=(parentWidth - layoutTab.getOriginalContentWidth() * StackAnimation.SCALE_AMOUNT * stackScale) / 2.0f;
    final float verticalPadding=(parentHeight - layoutTab.getOriginalContentHeight() * StackAnimation.SCALE_AMOUNT * stackScale) / 2.0f;
    if (portrait) {
      yIn+=STACK_PORTRAIT_Y_OFFSET_PROPORTION * verticalPadding;
      yIn+=screenScrollOffset;
    }
 else {
      if (LocalizationUtils.isLayoutRtl()) {
        xIn-=STACK_LANDSCAPE_START_OFFSET_PROPORTION * horizontalPadding;
        xIn-=screenScrollOffset;
      }
 else {
        xIn+=STACK_LANDSCAPE_START_OFFSET_PROPORTION * horizontalPadding;
        xIn+=screenScrollOffset;
      }
      yIn+=STACK_LANDSCAPE_Y_OFFSET_PROPORTION * verticalPadding;
    }
    layoutTab.setX(xIn);
    layoutTab.setY(yIn);
  }
  stackedCount=0;
  float maxStackedPosition=portrait ? mLayout.getHeightMinusTopControls() : mLayout.getWidth();
  for (int i=mStackTabs.length - 1; i >= 0; i--) {
    assert mStackTabs[i] != null;
    StackTab stackTab=mStackTabs[i];
    LayoutTab layoutTab=stackTab.getLayoutTab();
    if (stackTab.isDying())     continue;
    float pos;
    if (portrait) {
      pos=layoutTab.getY();
      layoutTab.setY(Math.min(pos,maxStackedPosition));
    }
 else     if (LocalizationUtils.isLayoutRtl()) {
      float posOffset=mLayout.getWidth() - layoutTab.getOriginalContentWidth() * StackAnimation.SCALE_AMOUNT * stackScale;
      pos=-layoutTab.getX() + posOffset;
      layoutTab.setX(-Math.min(pos,maxStackedPosition) + posOffset);
    }
 else {
      pos=layoutTab.getX();
      layoutTab.setX(Math.min(pos,maxStackedPosition));
    }
    if (pos >= maxStackedPosition && stackedCount < MAX_NUMBER_OF_STACKED_TABS_BOTTOM) {
      maxStackedPosition-=StackTab.sStackedTabVisibleSize;
      stackedCount++;
    }
  }
  final float discardRange=getDiscardRange();
  for (int i=0; i < mStackTabs.length; ++i) {
    assert mStackTabs[i] != null;
    StackTab stackTab=mStackTabs[i];
    LayoutTab layoutTab=stackTab.getLayoutTab();
    final float xIn=layoutTab.getX() + stackTab.getXInStackOffset();
    final float yIn=layoutTab.getY() + stackTab.getYInStackOffset();
    final float xOut=stackTab.getXOutOfStack();
    final float yOut=stackTab.getYOutOfStack();
    float x=MathUtils.interpolate(xOut,xIn,stackTab.getXInStackInfluence());
    float y=MathUtils.interpolate(yOut,yIn,stackTab.getYInStackInfluence());
    if (stackTab.getDiscardAmount() != 0) {
      float discard=stackTab.getDiscardAmount();
      boolean fromClick=stackTab.getDiscardFromClick();
      float scale=computeDiscardScale(discard,discardRange,fromClick);
      float deltaX=stackTab.getDiscardOriginX() - stackTab.getLayoutTab().getOriginalContentWidth() / 2.f;
      float deltaY=stackTab.getDiscardOriginY() - stackTab.getLayoutTab().getOriginalContentHeight() / 2.f;
      float discardOffset=fromClick ? 0.f : discard;
      if (portrait) {
        x+=discardOffset + deltaX * (1.f - scale);
        y+=deltaY * (1.f - scale);
      }
 else {
        x+=deltaX * (1.f - scale);
        y+=discardOffset + deltaY * (1.f - scale);
      }
    }
    layoutTab.setX(stackRect.left + x);
    layoutTab.setY(stackRect.top + y);
  }
}

@Override public int compareTo(final TimeInstant rhs){
  return Integer.compare(this.time,rhs.time);
}

private boolean writeToCharacteristic(BluetoothGattCharacteristic charc,byte[] data){
  charc.setValue(data);
  boolean result=mGattClient.writeCharacteristic(charc);
  if (result) {
    Log.d(TAG,"Wrote to characteristic: " + charc.getUuid() + ", data: "+ Arrays.toString(data));
  }
 else {
    Log.e(TAG,"Write failed to characteristic: " + charc.getUuid() + ", data: "+ Arrays.toString(data));
  }
  return result;
}

public static void composeThroughMask(Raster src,WritableRaster dst,Raster sel){
  int x=src.getMinX();
  int y=src.getMinY();
  int w=src.getWidth();
  int h=src.getHeight();
  int srcRGB[]=null;
  int selRGB[]=null;
  int dstRGB[]=null;
  for (int i=0; i < h; i++) {
    srcRGB=src.getPixels(x,y,w,1,srcRGB);
    selRGB=sel.getPixels(x,y,w,1,selRGB);
    dstRGB=dst.getPixels(x,y,w,1,dstRGB);
    int k=x;
    for (int j=0; j < w; j++) {
      int sr=srcRGB[k];
      int dir=dstRGB[k];
      int sg=srcRGB[k + 1];
      int dig=dstRGB[k + 1];
      int sb=srcRGB[k + 2];
      int dib=dstRGB[k + 2];
      int sa=srcRGB[k + 3];
      int dia=dstRGB[k + 3];
      float a=selRGB[k + 3] / 255f;
      float ac=1 - a;
      dstRGB[k]=(int)(a * sr + ac * dir);
      dstRGB[k + 1]=(int)(a * sg + ac * dig);
      dstRGB[k + 2]=(int)(a * sb + ac * dib);
      dstRGB[k + 3]=(int)(a * sa + ac * dia);
      k+=4;
    }
    dst.setPixels(x,y,w,1,dstRGB);
    y++;
  }
}

public char skipTo(char to){
  char c;
  int index=this.myIndex;
  do {
    c=next();
    if (c == 0) {
      this.myIndex=index;
      return c;
    }
  }
 while (c != to);
  back();
  return c;
}

public int checkVersionSize(final SoftwareVersion version){
  URL imageUrl=getImageURL(version);
  HttpURLConnection urlConnection=invokeRequest(imageUrl);
  return urlConnection.getContentLength();
}

private static DateTimeFormatter createFormatterForStyle(String style){
  if (style == null || style.length() != 2) {
    throw new IllegalArgumentException("Invalid style specification: " + style);
  }
  int dateStyle=selectStyle(style.charAt(0));
  int timeStyle=selectStyle(style.charAt(1));
  if (dateStyle == NONE && timeStyle == NONE) {
    throw new IllegalArgumentException("Style '--' is invalid");
  }
  return createFormatterForStyleIndex(dateStyle,timeStyle);
}

public boolean ackNextChunkId(String id){
  if (state.isTerminated())   return false;
 else   if (id.equals(chunkid)) {
    return true;
  }
 else {
    if (!allowOtherChunksInBetween(id)) {
      if (state.isDone()) {
        if (!isTerminated())         terminate();
        return false;
      }
 else {
        throw new PngjInputException("Unexpected chunk " + id + " while "+ chunkid+ " set is not done");
      }
    }
 else     return true;
  }
}

void submit(ProcessAndDisplayImageTask task){
  initExecutorsIfNeed();
  taskExecutorForCachedImages.execute(task);
}

private TopDocs combine(TopDocs in,TopDocs resorted,QueryRescoreContext ctx){
  System.arraycopy(resorted.scoreDocs,0,in.scoreDocs,0,resorted.scoreDocs.length);
  if (in.scoreDocs.length > resorted.scoreDocs.length) {
    for (int i=resorted.scoreDocs.length; i < in.scoreDocs.length; i++) {
      in.scoreDocs[i].score*=ctx.queryWeight();
    }
    Arrays.sort(in.scoreDocs,SCORE_DOC_COMPARATOR);
  }
  return in;
}

public void testPosPosSameLength(){
  byte aBytes[]={-128,56,100,-2,-76,89,45,91,3,-15,35,26,-117};
  byte bBytes[]={-2,-3,-4,-4,5,14,23,39,48,57,66,5,14,23};
  int aSign=1;
  int bSign=1;
  byte rBytes[]={0,-2,-3,-4,-4,-1,-66,95,47,123,59,-13,39,30,-97};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.or(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

private Response<Bitmap> doParse(NetworkResponse response){
  byte[] data=response.data;
  BitmapFactory.Options decodeOptions=new BitmapFactory.Options();
  Bitmap bitmap=null;
  if (mMaxWidth == 0 && mMaxHeight == 0) {
    decodeOptions.inPreferredConfig=mDecodeConfig;
    bitmap=BitmapFactory.decodeByteArray(data,0,data.length,decodeOptions);
  }
 else {
    decodeOptions.inJustDecodeBounds=true;
    BitmapFactory.decodeByteArray(data,0,data.length,decodeOptions);
    int actualWidth=decodeOptions.outWidth;
    int actualHeight=decodeOptions.outHeight;
    int desiredWidth=getResizedDimension(mMaxWidth,mMaxHeight,actualWidth,actualHeight,mScaleType);
    int desiredHeight=getResizedDimension(mMaxHeight,mMaxWidth,actualHeight,actualWidth,mScaleType);
    decodeOptions.inJustDecodeBounds=false;
    decodeOptions.inSampleSize=findBestSampleSize(actualWidth,actualHeight,desiredWidth,desiredHeight);
    Bitmap tempBitmap=BitmapFactory.decodeByteArray(data,0,data.length,decodeOptions);
    if (tempBitmap != null && (tempBitmap.getWidth() > desiredWidth || tempBitmap.getHeight() > desiredHeight)) {
      bitmap=Bitmap.createScaledBitmap(tempBitmap,desiredWidth,desiredHeight,true);
      tempBitmap.recycle();
    }
 else {
      bitmap=tempBitmap;
    }
  }
  if (bitmap == null) {
    return Response.error(new ParseError(response));
  }
 else {
    return Response.success(bitmap,HttpHeaderParser.parseCacheHeaders(response));
  }
}

@Override public void pause(boolean toPause){
  isPaused=toPause;
}

public static String replaceAll(String original,String oldSubstring,String newSubstring){
  return replace(original,oldSubstring,newSubstring,true);
}

public long add(final AddOp add) throws Exception {
  return add(add,UUID.randomUUID());
}

protected boolean isSmall(){
  return this.scale * this.textSizeInMeters < this.pixelSizeInMeters;
}

public byte[] decompress(DataInput is){
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  try {
    while (true) {
      byte b=is.readByte();
      if (b == -1)       break;
      baos.write(b);
    }
  }
 catch (  EOFException ex) {
  }
catch (  IOException ex) {
    throw new RuntimeException(ex);
  }
  return decompress(baos.toByteArray());
}

public int borrowSpareRegister(int category){
  int result=spareRegisterBase + borrowedSpareRegisters;
  borrowedSpareRegisters+=category;
  registerCount=Math.max(registerCount,result + category);
  return result;
}

public void True(boolean expression,Object errorMessage){
  if (!expression) {
    throw new IllegalArgumentException(String.valueOf(errorMessage));
  }
}

private void processFields(final Object component,final Context context,final ContextDestroyer contextDestroyer){
  Class<?> componentClass=component.getClass();
  while (componentClass != null && !componentClass.equals(Object.class)) {
    final Field[] fields=ClassReflection.getDeclaredFields(componentClass);
    if (fields != null && fields.length > 0) {
      processFields(component,fields,context,contextDestroyer);
    }
    componentClass=componentClass.getSuperclass();
  }
}

public static String replaceAll(String input,String regularExpression,String replacement){
  return input.replaceAll(regularExpression,replacement);
}

void requestNotificationUpdate(){
  if (mCurrentNotificationGroupIndex != NOTIFICATION_OFF) {
    RhythmNotificationService.showNotification(mContext,mNotificationId);
  }
}

public static int countLowerCase(final String text){
  int count=0;
  for (  final char chr : text.toCharArray()) {
    if (Character.isLowerCase(chr)) {
      count++;
    }
  }
  return count;
}

public void assignService(String serviceName,Map attributes) throws IdRepoException, SSOException {
  IdServices idServices=IdServicesFactory.getDataStoreServices();
  Set OCs=getServiceOCs(token,serviceName);
  SchemaType stype;
  Map tMap=new HashMap();
  tMap.put(serviceName,OCs);
  Set assignedServices=idServices.getAssignedServices(token,type,name,tMap,orgName,univDN);
  if (assignedServices.contains(serviceName)) {
    Object args[]={serviceName,type.getName()};
    throw new IdRepoException(IdRepoBundle.BUNDLE_NAME,IdRepoErrorCode.SERVICE_ALREADY_ASSIGNED,args);
  }
  try {
    ServiceSchemaManager ssm=new ServiceSchemaManager(serviceName,token);
    ServiceSchema ss=ssm.getSchema(type.getName());
    if (ss != null) {
      Set cosPriority=(attributes != null) ? (Set)attributes.remove(COS_PRIORITY) : null;
      attributes=ss.validateAndInheritDefaults(attributes,orgName,true);
      if (cosPriority != null) {
        attributes.put(COS_PRIORITY,cosPriority);
      }
      attributes=AMCommonUtils.removeEmptyValues(attributes);
      stype=ss.getServiceType();
    }
 else {
      ss=ssm.getSchema(SchemaType.DYNAMIC);
      if (ss == null) {
        Object args[]={serviceName};
        throw new IdRepoException(IdRepoBundle.BUNDLE_NAME,IdRepoErrorCode.UNABLE_GET_SERVICE_SCHEMA,args);
      }
      if (attributes == null) {
        try {
          attributes=getServiceConfig(token,serviceName,SchemaType.DYNAMIC);
        }
 catch (        SMSException smsex) {
          Object args[]={serviceName,type.getName()};
          throw new IdRepoException(IdRepoBundle.BUNDLE_NAME,"451",args);
        }
      }
 else {
        attributes=ss.validateAndInheritDefaults(attributes,orgName,true);
      }
      attributes=AMCommonUtils.removeEmptyValues(attributes);
      stype=SchemaType.DYNAMIC;
    }
    attributes=AMCrypt.encryptPasswords(attributes,ss);
  }
 catch (  SMSException smse) {
    Object[] args={serviceName};
    throw new IdRepoException(IdRepoBundle.BUNDLE_NAME,IdRepoErrorCode.SERVICE_NOT_ASSIGNED,args);
  }
  attributes.put("objectclass",OCs);
  idServices.assignService(token,type,name,serviceName,stype,attributes,orgName,univDN);
}

@Override protected void createButtonsForButtonBar(final Composite parent){
  for (final Iterator it=buttonDescriptions.iterator(); it.hasNext(); ) {
    final ButtonDescription buttonDescription=(ButtonDescription)it.next();
    createButton(parent,buttonDescription.buttonId,buttonDescription.buttonLabel,buttonDescription.isDefault);
  }
  if (includeDefaultButtons) {
    super.createButtonsForButtonBar(parent);
  }
  hookAfterButtonsCreated();
}

private boolean checkFileModifications() throws Exception {
  long destFileTime=destFile.lastModified();
  if (sourceFile.lastModified() > destFileTime) {
    logger.debug("Source file was modified ");
    return true;
  }
  Properties metadata=restoreFileModifications(metaDataFile);
  if (metadata == null) {
    return true;
  }
  SAXParserFactory parserFactory=SAXParserFactory.newInstance();
  SAXParser parser=parserFactory.newSAXParser();
  TimeCheckerHandler handler=new TimeCheckerHandler(baseDir,metadata);
  parser.parse(sourceFile,handler);
  return handler.isModified();
}

public static Number mul(Number a,Number b){
  if (isFloatingPoint(a) || isFloatingPoint(b)) {
    return a.doubleValue() * b.doubleValue();
  }
 else {
    return a.longValue() * b.longValue();
  }
}

private final int findWidestAxis(){
  int widest=0;
  double width=(maxLimit[0] - minLimit[0]) * getAxisWeightHint(0);
  if (Double.isNaN(width)) {
    width=0;
  }
  for (int i=1; i < dimensions; i++) {
    double nwidth=(maxLimit[i] - minLimit[i]) * getAxisWeightHint(i);
    if (Double.isNaN(nwidth)) {
      nwidth=0;
    }
    if (nwidth > width) {
      widest=i;
      width=nwidth;
    }
  }
  return widest;
}

public void addSortKey(int column,Comparator<String> comparator){
  sortKeys.add(column);
  sortComparators.add(comparator);
}

public static String tagSwap(String content,Map<String,String> tagSwapMap){
  for (  Map.Entry<String,String> entry : tagSwapMap.entrySet()) {
    content=content.replace(entry.getKey(),entry.getValue());
  }
  return content;
}

public static RunStats delegateGetBucketForIntegers(int buckets) throws Exception {
  Long startTime=System.currentTimeMillis();
  PrimaryIndexBucketGeneratorImpl ibg=new PrimaryIndexBucketGeneratorImpl(FieldDataType.INTEGER,buckets);
  PrimaryIndexBucketLocatorImpl locator=new PrimaryIndexBucketLocatorImpl(null,null,null,ibg.generateBuckets(),null,null,null,null,null);
  logger.debug("test to getBucket for the bucket distribution");
  HashMap<Long,List<Object>> hm=new HashMap<>();
  SummaryStatistics stats=new SummaryStatistics();
  for (int inputInt=-2000000; inputInt < 2000000; inputInt++) {
    Long bucketId=locator.getBucket(inputInt,FieldDataType.INTEGER);
    calculate(hm,stats,bucketId,inputInt);
  }
  Long runTime=System.currentTimeMillis() - startTime;
  RunStats runStats=new RunStats("BucketForIntegers",FieldDataType.INTEGER,runTime,stats,hm);
  logger.debug(runStats.toString());
  return runStats;
}

public static long countSubstr(final String value,final String subStr,final boolean caseSensitive,boolean allowOverlapping){
  validate(value,NULL_STRING_PREDICATE,NULL_STRING_MSG_SUPPLIER);
  return countSubstr(caseSensitive ? value : value.toLowerCase(),caseSensitive ? subStr : subStr.toLowerCase(),allowOverlapping,0L);
}

private void dropIndex(String indexName) throws OracleException {
  PreparedStatement stmt=null;
  if (indexName == null)   throw SODAUtils.makeException(SODAMessage.EX_ARG_CANNOT_BE_NULL,"indexName");
  indexName=CollectionDescriptor.stringToIdentifier(indexName);
  String sqltext=dropIndexDDL(indexName);
  try {
    metrics.startTiming();
    stmt=conn.prepareStatement(sqltext);
    stmt.execute();
    if (OracleLog.isLoggingEnabled())     log.info("Dropped index " + indexName);
    stmt.close();
    stmt=null;
    metrics.recordDDL();
  }
 catch (  SQLException e) {
    int errcode=e.getErrorCode();
    if ((errcode == ORA_SQL_OBJECT_NOT_EXISTS) || (errcode == ORA_SQL_INDEX_NOT_EXISTS)) {
      if (OracleLog.isLoggingEnabled())       log.warning(e.toString());
    }
 else {
      if (OracleLog.isLoggingEnabled())       log.warning(e.toString());
      throw SODAUtils.makeExceptionWithSQLText(e,sqltext);
    }
  }
 finally {
    for (    String message : SODAUtils.closeCursor(stmt,null)) {
      if (OracleLog.isLoggingEnabled())       log.severe(message);
    }
  }
}

void unlaunch(){
  if (server != null) {
    server.die();
    server=null;
  }
  frame.setVisible(true);
  client=null;
  System.gc();
  System.runFinalization();
}

private boolean isOutsideDocElem(){
  return (null == m_docFrag) && m_elemStack.size() == 0 && (null == m_currentNode || m_currentNode.getNodeType() == Node.DOCUMENT_NODE);
}

public int postFiles(File[] files,int startIndexInArgs,OutputStream out,String type){
  reset();
  int filesPosted=0;
  for (  File srcFile : files) {
    if (srcFile.isDirectory() && srcFile.canRead()) {
      filesPosted+=postDirectory(srcFile,out,type);
    }
 else     if (srcFile.isFile() && srcFile.canRead()) {
      filesPosted+=postFiles(new File[]{srcFile},out,type);
    }
 else {
      File parent=srcFile.getParentFile();
      if (parent == null)       parent=new File(".");
      String fileGlob=srcFile.getName();
      GlobFileFilter ff=new GlobFileFilter(fileGlob,false);
      File[] fileList=parent.listFiles(ff);
      if (fileList == null || fileList.length == 0) {
        warn("No files or directories matching " + srcFile);
        continue;
      }
      filesPosted+=postFiles(fileList,out,type);
    }
  }
  return filesPosted;
}

private static String unicode2html(final String text,final boolean amp,final boolean html){
  if (text == null)   return null;
  final StringBuilder sb=new StringBuilder(text.length() * 12 / 10);
  int textpos=0;
  String r;
  char c;
  while (textpos < text.length()) {
    c=text.charAt(textpos);
    if (amp && c == AMP_UNICODE) {
      sb.append(AMP_HTML);
      textpos++;
      continue;
    }
    if ((r=UNICODE2HTML4XML.get(c)) != null) {
      sb.append(r);
      textpos++;
      continue;
    }
    if (html && (r=UNICODE2HTML4HTML.get(c)) != null) {
      sb.append(r);
      textpos++;
      continue;
    }
    sb.append(c);
    textpos++;
  }
  return sb.toString();
}

public String addPlaylist(String playlistName){
  ContentValues mInserts=new ContentValues();
  mInserts.put(MediaStore.Audio.Playlists.NAME,playlistName);
  mInserts.put(MediaStore.Audio.Playlists.DATE_ADDED,System.currentTimeMillis());
  mInserts.put(MediaStore.Audio.Playlists.DATE_MODIFIED,System.currentTimeMillis());
  Uri uri=mContentResolver.insert(MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI,mInserts);
  if (uri == null) {
    return null;
  }
 else {
    String ref=PREFIX_PLAYLIST + getPlaylistUniqueName(Long.toString(ContentUris.parseId(uri)));
    Playlist pl=new Playlist(ref);
    pl.setName(playlistName);
    pl.setIsLoaded(true);
    mPlaylists.put(ref,pl);
    mCallback.playlistUpdated(pl);
    return ref;
  }
}

public static JSONArray readJSONArray(final JSONObject jsonObject,final String key,final boolean required,final boolean notNull) throws JSONException {
  if (required) {
    return jsonObject.getJSONArray(key);
  }
  if (notNull && jsonObject.isNull(key)) {
    throw new JSONException(String.format(Locale.US,NULL_VALUE_FORMAT_OBJECT,key));
  }
  JSONArray value=null;
  if (!jsonObject.isNull(key)) {
    value=jsonObject.getJSONArray(key);
  }
  return value;
}

default int copyTo(@NotNull byte[] bytes) throws BufferUnderflowException {
  int len=(int)Math.min(bytes.length,readRemaining());
  for (int i=0; i < len; i++)   bytes[i]=readByte(start() + i);
  return len;
}

private static float[] randomPoints(Random random,int wavesCount,float width,float shiftCoef){
  float shift;
  float[] points=new float[wavesCount + 1];
  for (int i=0; i < points.length; i++) {
    if (i == 0) {
      points[i]=-1;
    }
 else     if (i == points.length - 1) {
      points[i]=1;
    }
 else {
      shift=random.nextFloat() * shiftCoef * width;
      shift*=random.nextBoolean() ? 1 : -1;
      points[i]=-1 + i * width + shift;
    }
  }
  return points;
}

private void addCharacters(final Map<String,RPObject> characters){
  for (  Entry<String,RPObject> character : characters.entrySet()) {
    JButton button=createCharacterButton(character.getKey(),character.getValue());
    characterPanel.add(button);
  }
}

public void runTest() throws Throwable {
  Document doc;
  NodeList genderList;
  Node genderNode;
  CharacterData entText;
  EntityReference entReference;
  doc=(Document)load("staff",true);
  genderList=doc.getElementsByTagName("gender");
  genderNode=genderList.item(2);
  entReference=doc.createEntityReference("ent3");
  assertNotNull("createdEntRefNotNull",entReference);
  entText=(CharacterData)entReference.getFirstChild();
  assertNotNull("entTextNotNull",entText);
{
    boolean success=false;
    try {
      entText.insertData(1,"newArg");
    }
 catch (    DOMException ex) {
      success=(ex.code == DOMException.NO_MODIFICATION_ALLOWED_ERR);
    }
    assertTrue("throw_NO_MODIFICATION_ALLOWED_ERR",success);
  }
}

@Override public void unbindView(VH holder){
}

public static boolean isPresent(Rule rule){
  if (rule == null) {
    return false;
  }
  return (!isNotSet(rule.getMinScaleDenominator()) || !isNotSet(rule.getMaxScaleDenominator()));
}

public long startcode(){
  return Long.parseLong(fields[25]);
}

public static void consumeProcessOutput(Process self){
  consumeProcessOutput(self,(OutputStream)null,(OutputStream)null);
}

public static void registerDefaultResolvers(){
  List<KeyResolver> keyResolverList=new ArrayList<KeyResolver>();
  keyResolverList.add(new KeyResolver(new RSAKeyValueResolver()));
  keyResolverList.add(new KeyResolver(new DSAKeyValueResolver()));
  keyResolverList.add(new KeyResolver(new X509CertificateResolver()));
  keyResolverList.add(new KeyResolver(new X509SKIResolver()));
  keyResolverList.add(new KeyResolver(new RetrievalMethodResolver()));
  keyResolverList.add(new KeyResolver(new X509SubjectNameResolver()));
  keyResolverList.add(new KeyResolver(new X509IssuerSerialResolver()));
  keyResolverList.add(new KeyResolver(new DEREncodedKeyValueResolver()));
  keyResolverList.add(new KeyResolver(new KeyInfoReferenceResolver()));
  keyResolverList.add(new KeyResolver(new X509DigestResolver()));
  resolverVector.addAll(keyResolverList);
}

public static final void delete(String fileName){
  File file=new File(fileName);
  if (!file.delete()) {
    log.error("Failed to delete file {}",file);
  }
  File metadataFile=new File(fileName + METADATA_SUFFIX);
  if (!metadataFile.delete()) {
    log.error("Failed to delete file {}",metadataFile);
  }
  File directory=file.getParentFile();
  if (directory.isDirectory()) {
    directory.delete();
  }
}

protected final void refreshLoadingViewsSize(){
  final int maximumPullScroll=(int)(getMaximumPullScroll() * 1.2f);
  int pLeft=getPaddingLeft();
  int pTop=getPaddingTop();
  int pRight=getPaddingRight();
  int pBottom=getPaddingBottom();
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    if (mMode.showHeaderLoadingLayout()) {
      mHeaderLayout.setWidth(maximumPullScroll);
      pLeft=-maximumPullScroll;
    }
 else {
      pLeft=0;
    }
  if (mMode.showFooterLoadingLayout()) {
    mFooterLayout.setWidth(maximumPullScroll);
    pRight=-maximumPullScroll;
  }
 else {
    pRight=0;
  }
break;
case VERTICAL:
if (mMode.showHeaderLoadingLayout()) {
mHeaderLayout.setHeight(maximumPullScroll);
pTop=-maximumPullScroll;
}
 else {
pTop=0;
}
if (mMode.showFooterLoadingLayout()) {
mFooterLayout.setHeight(maximumPullScroll);
pBottom=-maximumPullScroll;
}
 else {
pBottom=0;
}
break;
}
if (DEBUG) {
Log.d(LOG_TAG,String.format("Setting Padding. L: %d, T: %d, R: %d, B: %d",pLeft,pTop,pRight,pBottom));
}
setPadding(pLeft,pTop,pRight,pBottom);
}

public static boolean isExtension(String filename,String extension){
  if (filename == null) {
    return false;
  }
  if (extension == null || extension.length() == 0) {
    return indexOfExtension(filename) == -1;
  }
  String fileExt=getExtension(filename);
  return fileExt.equals(extension);
}

@Override public boolean equals(Object obj){
  if (obj == this) {
    return true;
  }
  if (!(obj instanceof TimePeriodValuesCollection)) {
    return false;
  }
  TimePeriodValuesCollection that=(TimePeriodValuesCollection)obj;
  if (this.domainIsPointsInTime != that.domainIsPointsInTime) {
    return false;
  }
  if (this.xPosition != that.xPosition) {
    return false;
  }
  if (!ObjectUtilities.equal(this.data,that.data)) {
    return false;
  }
  return true;
}

public void print(JTextPane pane){
  setDocument(pane);
  printDialog();
}

private boolean ensureScrollWheelAdjusted(){
  int deltaY=mInitialScrollOffset - mCurrentScrollOffset;
  if (deltaY != 0) {
    mPreviousScrollerY=0;
    if (Math.abs(deltaY) > mSelectorElementHeight / 2) {
      deltaY+=(deltaY > 0) ? -mSelectorElementHeight : mSelectorElementHeight;
    }
    mAdjustScroller.startScroll(0,0,0,deltaY,SELECTOR_ADJUSTMENT_DURATION_MILLIS);
    invalidate();
    return true;
  }
  return false;
}

private String sortXml(final String originalXml){
  String errorMsg="Could not sort pom files content: ";
  xmlProcessingInstructionParser.scanForIgnoredSections(originalXml);
  String xml=xmlProcessingInstructionParser.replaceIgnoredSections();
  insertXmlInXmlProcessor(xml,errorMsg);
  xmlProcessor.sortXml();
  try (ByteArrayOutputStream sortedXmlOutputStream=xmlProcessor.getSortedXml()){
    String sortedXml=sortedXmlOutputStream.toString(encoding);
    if (xmlProcessingInstructionParser.existsIgnoredSections()) {
      sortedXml=xmlProcessingInstructionParser.revertIgnoredSections(sortedXml);
    }
    return sortedXml;
  }
 catch (  IOException e) {
    throw new FailureException(errorMsg + xml,e);
  }
}

void waitForDictionaryLoading(){
  while (mUpdatingDictionary) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
    }
  }
}

private void publishData(String path,byte[] data){
  try {
    if (data != null && data.length > 0) {
      ByteArrayInputStream bii=new ByteArrayInputStream(data);
      ObjectInputStream ois=new ObjectInputStream(bii);
      Object dataObj=ois.readObject();
      ZooKeeperDataWrapper wrapper=(ZooKeeperDataWrapper)(dataObj);
      JetstreamMessage tm=(JetstreamMessage)wrapper.getOrginalData();
      String trackerKey=createKey(path,wrapper);
      m_changeTracker.put(trackerKey,wrapper.getTimestamp());
      try {
        LOGGER.warn("Publishing the change for topic :" + path + " TrackerKey :"+ trackerKey+ " Timestamp : "+ wrapper.getTimestamp());
        m_transportListener.postMessage(tm,m_queueStats);
      }
 catch (      Throwable mse) {
        StringBuffer buf=new StringBuffer();
        buf.append("Error dispatching to message service - ");
        buf.append(mse.getLocalizedMessage());
        LOGGER.error("Exception publishing data for path :" + path + buf.toString(),mse);
      }
      m_totalMsgsRcvd.increment();
      m_msgsRcvdPerSec.increment();
    }
  }
 catch (  ClassNotFoundException e) {
    LOGGER.error(" ClassNotFoundException while publishing data to transport Listener :" + path,e);
  }
catch (  IOException e) {
    LOGGER.error(" IOException while publishing data to transport Listener :" + path,e);
  }
}

static public long nextAddr(Random r,WormAddressManager am){
  if (r.nextInt(100) < 5)   return 0L;
  return nextNonZeroAddr(r,am);
}

public void undoableEditHappened(mxUndoableEdit undoableEdit){
  if (enabled) {
    if (undoableEdit.getTransparent()) {
    }
 else     if (!undoableEdit.getUndoable()) {
      notUndoableEditHappened();
    }
 else     if (collection) {
      collected.add(undoableEdit);
      fireEvent(new mxEventObject(mxEvent.ADD,"edit",undoableEdit));
    }
 else {
      collected.add(undoableEdit);
      addEventList();
      fireEvent(new mxEventObject(mxEvent.ADD,"edit",undoableEdit));
    }
  }
}

public File(File dir,String name){
  this(dir == null ? null : dir.getPath(),name);
}

public void removeDragListener(DragListener l){
  mListeners.remove(l);
}

private HighTideValues findHighTide(JSONObject responseObject) throws JSONException, ParseException {
  JSONArray predictions=(JSONArray)responseObject.get("predictions");
  JSONObject lastPrediction=null, firstHighTide=null, secondHighTide=null, lowTide=null;
  boolean firstTideDone=false;
  for (int i=0; i < predictions.length(); i++) {
    JSONObject prediction=(JSONObject)predictions.get(i);
    if (lastPrediction == null) {
      lastPrediction=prediction;
      continue;
    }
    if (isTideIncreasing(lastPrediction,prediction)) {
      if (!firstTideDone) {
        firstHighTide=prediction;
      }
 else {
        secondHighTide=prediction;
      }
    }
 else {
      if (!firstTideDone && firstHighTide != null) {
        firstTideDone=true;
      }
 else       if (secondHighTide != null) {
        break;
      }
      if (firstTideDone) {
        lowTide=prediction;
      }
    }
    lastPrediction=prediction;
  }
  DateFormat dateFormat=new SimpleDateFormat("yyyy-MM-d HH:mm");
  return new HighTideValues(AlexaDateUtil.getFormattedTime(dateFormat.parse(firstHighTide.getString("t"))),getFormattedHeight(firstHighTide.getString("v")),AlexaDateUtil.getFormattedTime(dateFormat.parse(lowTide.getString("t"))),getFormattedHeight(lowTide.getString("v")),AlexaDateUtil.getFormattedTime(dateFormat.parse(secondHighTide.getString("t"))),getFormattedHeight(secondHighTide.getString("v")));
}

public static boolean isIpAddress(String ipAddress){
  Matcher m1=validIPV4Pattern.matcher(ipAddress);
  if (m1.matches()) {
    return true;
  }
  Matcher m2=validIPV6Pattern.matcher(ipAddress);
  return m2.matches();
}

@Override public synchronized void removeTrainingSetListener(TrainingSetListener tsl){
  m_trainingListeners.removeElement(tsl);
}

public void renameAttributeValue(Attribute att,String val,String name){
  int v=att.indexOfValue(val);
  if (v == -1) {
    throw new IllegalArgumentException(val + " not found");
  }
  renameAttributeValue(att.index(),v,name);
}

private static void s_uacmean(SparseBlock a,double[] c,int m,int n,KahanObject kbuff,Mean kmean,int rl,int ru){
  Arrays.fill(c,n,n * 2,ru - rl);
  if (a.isContiguous()) {
    countDisAgg(a.values(rl),c,a.indexes(rl),a.pos(rl),n,(int)a.size(rl,ru));
  }
 else {
    for (int i=rl; i < ru; i++) {
      if (!a.isEmpty(i))       countDisAgg(a.values(i),c,a.indexes(i),a.pos(i),n,a.size(i));
    }
  }
  if (a.isContiguous()) {
    meanAgg(a.values(rl),c,a.indexes(rl),a.pos(rl),(int)a.size(rl,ru),n,kbuff,kmean);
  }
 else {
    for (int i=rl; i < ru; i++) {
      if (!a.isEmpty(i))       meanAgg(a.values(i),c,a.indexes(i),a.pos(i),a.size(i),n,kbuff,kmean);
    }
  }
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public boolean isPdfAttachment(){
  if (getPO() == null)   return false;
  return m_po.isPdfAttachment();
}

private int nameToIndex(String parameterName) throws SQLException {
  parameterMetadata.readMetadataFromDbIfRequired();
  for (int i=1; i <= parameterMetadata.getParameterCount(); i++) {
    String name=parameterMetadata.getName(i);
    if (name != null && name.equalsIgnoreCase(parameterName)) {
      return i;
    }
  }
  throw new SQLException("there is no parameter with the name " + parameterName);
}

public void sort(Comparator<? super SubRange> comparator){
  Collections.sort(data,comparator);
}

private void add(TreeMap<String,Object> map,String key,Object value){
  Vector<Object> v=getList(map,key);
  if (v == null) {
    v=new Vector<>();
synchronized (map) {
      map.put(key,v);
    }
  }
  if (!v.contains(value)) {
    v.add(value);
  }
}

public void test_singleResourceLocking_serialized_waitsFor_highConcurrency_taskTimeout() throws Exception {
  final Properties properties=new Properties();
  final int nthreads=100;
  final int ntasks=1000;
  properties.setProperty(TestOptions.CORE_POOL_SIZE,"" + nthreads);
  properties.setProperty(TestOptions.NTASKS,"" + ntasks);
  properties.setProperty(TestOptions.NRESOURCES,"1");
  properties.setProperty(TestOptions.MIN_LOCKS,"1");
  properties.setProperty(TestOptions.MAX_LOCKS,"1");
  properties.setProperty(TestOptions.TASK_TIMEOUT,"3000");
  properties.setProperty(TestOptions.PREDECLARE_LOCKS,"false");
  properties.setProperty(TestOptions.SORT_LOCK_REQUESTS,"false");
  final Result result=doComparisonTest(properties);
  assertEquals("ndeadlock",0,Integer.parseInt(result.get("ndeadlock")));
  assertEquals("maxrunning",1,Integer.parseInt(result.get("maxrunning")));
  final int ncancel=Integer.parseInt(result.get("ncancel"));
  assertTrue("No cancelled tasks?",ncancel > 0);
}

private void blackmanHarris3s(int size){
  int start=(windowFunction.length - size) / 2;
  int stop=(windowFunction.length + size) / 2;
  double scale=1.0 / (double)size / 0.45;
  for (int i=0; start < stop; start++, i++)   windowFunction[i]=scale * (0.44959 - 0.49364 * Math.cos(twoPI * i / size) + 0.05677 * Math.cos(2 * twoPI * i / size));
}

private WeekFields(DayOfWeek firstDayOfWeek,int minimalDaysInFirstWeek){
  Objects.requireNonNull(firstDayOfWeek,"firstDayOfWeek");
  if (minimalDaysInFirstWeek < 1 || minimalDaysInFirstWeek > 7) {
    throw new IllegalArgumentException("Minimal number of days is invalid");
  }
  this.firstDayOfWeek=firstDayOfWeek;
  this.minimalDays=minimalDaysInFirstWeek;
}

private ResultPointsAndTransitions transitionsBetween(ResultPoint from,ResultPoint to){
  int fromX=(int)from.getX();
  int fromY=(int)from.getY();
  int toX=(int)to.getX();
  int toY=(int)to.getY();
  boolean steep=Math.abs(toY - fromY) > Math.abs(toX - fromX);
  if (steep) {
    int temp=fromX;
    fromX=fromY;
    fromY=temp;
    temp=toX;
    toX=toY;
    toY=temp;
  }
  int dx=Math.abs(toX - fromX);
  int dy=Math.abs(toY - fromY);
  int error=-dx >> 1;
  int ystep=fromY < toY ? 1 : -1;
  int xstep=fromX < toX ? 1 : -1;
  int transitions=0;
  boolean inBlack=image.get(steep ? fromY : fromX,steep ? fromX : fromY);
  for (int x=fromX, y=fromY; x != toX; x+=xstep) {
    boolean isBlack=image.get(steep ? y : x,steep ? x : y);
    if (isBlack != inBlack) {
      transitions++;
      inBlack=isBlack;
    }
    error+=dy;
    if (error > 0) {
      if (y == toY) {
        break;
      }
      y+=ystep;
      error-=dx;
    }
  }
  return new ResultPointsAndTransitions(from,to,transitions);
}

private void placeGroups(){
  startRow();
  placeChild(mCloseButton,Gravity.END);
  placeGroup(mMainGroup);
  int customGroupWidth=0;
  if (mCustomGroup != null) {
    updateCustomGroupForRow(ROW_MAIN);
    customGroupWidth=getWidthWithMargins(mCustomGroup);
  }
  int buttonGroupWidth=0;
  if (mButtonGroup != null) {
    updateButtonGroupForRow(ROW_MAIN);
    buttonGroupWidth=getWidthWithMargins(mButtonGroup);
  }
  boolean customGroupOnMainRow=customGroupWidth <= availableWidth();
  boolean buttonGroupOnMainRow=customGroupWidth + buttonGroupWidth <= availableWidth();
  if (mCustomGroup != null) {
    if (customGroupOnMainRow) {
      mCustomGroup.gravity=(mButtonGroup != null && buttonGroupOnMainRow) ? Gravity.START : Gravity.END;
    }
 else {
      startRow();
      updateCustomGroupForRow(ROW_OTHER);
    }
    placeGroup(mCustomGroup);
  }
  if (mButtonGroup != null) {
    if (!buttonGroupOnMainRow) {
      startRow();
      updateButtonGroupForRow(ROW_OTHER);
      if (mCustomGroup == null && mMessageTextView != null) {
        LayoutParams lp=(LayoutParams)mMessageTextView.getLayoutParams();
        int messageBottom=lp.top + mMessageTextView.getMeasuredHeight();
        mTop=Math.max(mTop,messageBottom + 2 * mMargin);
      }
    }
    placeGroup(mButtonGroup);
    if (mCustomButton != null && !buttonGroupOnMainRow) {
      LayoutParams primaryButtonLP=(LayoutParams)mPrimaryButton.getLayoutParams();
      LayoutParams customButtonLP=(LayoutParams)mCustomButton.getLayoutParams();
      LayoutParams messageLP=(LayoutParams)mMessageView.getLayoutParams();
      if (customButtonLP.start >= messageLP.start) {
        customButtonLP.start=messageLP.start;
      }
 else {
        customButtonLP.start=mMargin;
      }
      if (!mButtonGroup.isStacked) {
        customButtonLP.top=primaryButtonLP.top + (mPrimaryButton.getMeasuredHeight() - mCustomButton.getMeasuredHeight()) / 2;
      }
    }
  }
  startRow();
  if (buttonGroupOnMainRow) {
    int layoutHeight=mBottom;
    for (int i=0; i < getChildCount(); i++) {
      View child=getChildAt(i);
      int extraSpace=layoutHeight - child.getMeasuredHeight();
      LayoutParams lp=(LayoutParams)child.getLayoutParams();
      lp.top=extraSpace / 2;
    }
  }
}

static HeapDoublesSketch copy(DoublesSketch sketch){
  HeapDoublesSketch qsCopy;
  qsCopy=HeapDoublesSketch.newInstance(sketch.getK());
  qsCopy.n_=sketch.getN();
  qsCopy.minValue_=sketch.getMinValue();
  qsCopy.maxValue_=sketch.getMaxValue();
  qsCopy.combinedBufferItemCapacity_=sketch.getCombinedBufferItemCapacity();
  qsCopy.baseBufferCount_=sketch.getBaseBufferCount();
  qsCopy.bitPattern_=sketch.getBitPattern();
  double[] combBuf=sketch.getCombinedBuffer();
  qsCopy.combinedBuffer_=Arrays.copyOf(combBuf,combBuf.length);
  return qsCopy;
}

public List<VerificationOK> verify(List<VerificationOK> result) throws IOException, GeneralSecurityException {
  if (result == null)   result=new ArrayList<>();
  while (pkcs7 != null) {
    result.addAll(verifySignature());
  }
  return result;
}

public SchemaField(String name,FieldType type){
  this(name,type,type.properties,null);
}

private void createDaySlot(ArrayList<MAssignmentSlot> list,MAssignmentSlot ma){
  Timestamp start=ma.getStartTime();
  GregorianCalendar calStart=new GregorianCalendar();
  calStart.setTime(start);
  calStart.set(Calendar.HOUR_OF_DAY,0);
  calStart.set(Calendar.MINUTE,0);
  calStart.set(Calendar.SECOND,0);
  calStart.set(Calendar.MILLISECOND,0);
  Timestamp end=ma.getEndTime();
  GregorianCalendar calEnd=new GregorianCalendar();
  calEnd.setTime(end);
  calEnd.set(Calendar.HOUR_OF_DAY,0);
  calEnd.set(Calendar.MINUTE,0);
  calEnd.set(Calendar.SECOND,0);
  calEnd.set(Calendar.MILLISECOND,0);
  while (calStart.before(calEnd)) {
    Timestamp xStart=new Timestamp(calStart.getTimeInMillis());
    calStart.add(Calendar.DAY_OF_YEAR,1);
    Timestamp xEnd=new Timestamp(calStart.getTimeInMillis());
    MAssignmentSlot myMa=new MAssignmentSlot(xStart,xEnd,ma.getName(),ma.getDescription(),ma.getStatus());
    list.add(myMa);
  }
}

public boolean isAttachment(String fileName){
  return fileName.startsWith(ENTRY_ATTACHMENT);
}

void subtractFlakes(int quantity){
  for (int i=0; i < quantity; ++i) {
    int index=numFlakes - i - 1;
    flakes.remove(index);
  }
  setNumFlakes(numFlakes - quantity);
}

public Optimized(int n,int s,int t,Iterator<EdgeInfo> edges){
  super(n,s,t);
  queue=new int[n];
  QUEUE_SIZE=n;
  capacity=new int[n][n];
  flow=new int[n][n];
  previous=new int[n];
  visited=new int[n];
  while (edges.hasNext()) {
    EdgeInfo ei=edges.next();
    capacity[ei.start][ei.end]=ei.capacity;
  }
}

public void put(Buffer buffer){
  if (buffer.getLength() <= 2) {
    return;
  }
  byte[] currentRtpPacketData=((byte[])buffer.getData());
  H264RtpHeaders h264RtpHeaders=new H264RtpHeaders(currentRtpPacketData);
  if (h264RtpHeaders.getFUI_F()) {
    return;
  }
  if (reassembledData == null) {
    timeStamp=buffer.getTimeStamp();
    format=buffer.getFormat();
    seqNumber=buffer.getSequenceNumber();
    reassembledDataNALHeader=h264RtpHeaders.getNALHeader();
    reassembledData=new byte[JavaPacketizer.H264_MAX_RTP_PKTS][H264_FRAME_PACKET_SIZE];
    reassembledDataSize=new int[JavaPacketizer.H264_MAX_RTP_PKTS];
    reassembledDataHasStart=false;
    reassembledDataHasEnd=false;
  }
  int posSeq=(int)(buffer.getSequenceNumber() & VIDEO_DECODER_MAX_PAYLOADS_CHUNKS_MASK);
  int payloadStartPosition=h264RtpHeaders.getHeaderSize();
  int payloadLength=buffer.getLength() - h264RtpHeaders.getHeaderSize();
  if (h264RtpHeaders.getFUI_TYPE() == H264RtpHeaders.AVC_NALTYPE_FUA) {
    reassembledDataHasStart|=(h264RtpHeaders.getFUH_S());
    reassembledDataHasEnd|=(h264RtpHeaders.getFUH_E());
    reassembledDataPosSeqStart=((h264RtpHeaders.getFUH_S()) ? posSeq : reassembledDataPosSeqStart);
    reassembledDataPosSeqEnd=((h264RtpHeaders.getFUH_E()) ? posSeq : reassembledDataPosSeqEnd);
  }
  reassembledDataSize[posSeq]=payloadLength;
  reassembledDataFullSize+=payloadLength;
  System.arraycopy(currentRtpPacketData,payloadStartPosition,reassembledData[posSeq],0,payloadLength);
  videoOrientation=buffer.getVideoOrientation();
}

public static Map<String,Object> badExpireEvenProcessor(DispatchContext dctx,Map<String,? extends Object> context){
  GenericValue creditCard=(GenericValue)context.get("creditCard");
  String expireDate=creditCard.getString("expireDate");
  String lastNumberStr=expireDate.substring(expireDate.length() - 1);
  int lastNumber=Integer.parseInt(lastNumberStr);
  if (lastNumber % 2.0 == 0.0) {
    return alwaysBadExpireProcessor(dctx,context);
  }
 else {
    return alwaysApproveProcessor(dctx,context);
  }
}

public ExpressionType negate(){
  if (isNegated()) {
    return new ExpressionType(typeString.replace(SUFFIX_NEGATED,""));
  }
 else {
    return new ExpressionType(typeString + SUFFIX_NEGATED);
  }
}

protected void updatePathGreyness(TreePath ancestor){
  boolean value=isPathCheckBox(ancestor);
  Object ancestorNode=ancestor.getLastPathComponent();
  if (!isPathCheckBox(ancestor)) {
    addToCheckBoxPathsSet(ancestor);
    return;
  }
}

protected ArrayList<String> useTokenizer(String s) throws Exception {
  String[] tokens;
  ArrayList<String> result;
  int i;
  tokens=Tokenizer.tokenize(m_Tokenizer,new String[]{s});
  result=new ArrayList<String>();
  for (i=0; i < tokens.length; i++) {
    result.add(tokens[i]);
  }
  return result;
}

public DOMStorableInputOutputFormat(DOMFactory factory,String description,String fileExtension,String mimeType){
  this.factory=factory;
  this.description=description;
  this.fileExtension=fileExtension;
  this.mimeType=mimeType;
  try {
    this.dataFlavor=new DataFlavor(mimeType);
  }
 catch (  ClassNotFoundException ex) {
    InternalError error=new InternalError("Unable to create data flavor for mime type:" + mimeType);
    error.initCause(ex);
    throw error;
  }
}

default TypeParameterDeclaration asTypeParameter(){
  throw new UnsupportedOperationException(String.format("%s is not a type parameter",this));
}

public void addColumn(String header){
  if (getModel() instanceof DefaultTableModel) {
    DefaultTableModel model=(DefaultTableModel)getModel();
    model.addColumn(Util.cleanAmp(header));
  }
 else   throw new IllegalArgumentException("Model must be instance of DefaultTableModel");
}

public void addMoveScript(String pathname){
  _moveScripts.add(pathname);
  setDirtyAndFirePropertyChange("addMoveScript",pathname,null);
}

private void checkAndAddResizeHandler(){
  Component parent=getParent();
  if (parent != null && resizable && resizeHandler == null) {
    resizeHandler=new ResizeHandler();
    parent.addComponentListener(resizeHandler);
  }
}

static public void useXalanXPathSupport() throws Exception {
  Class.forName("org.apache.xpath.XPath");
  Class c=Class.forName("freemarker.ext.dom.XalanXPathSupport");
synchronized (STATIC_LOCK) {
    xpathSupportClass=c;
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("Using Xalan classes for XPath support");
  }
}

public int numberOfOwningShards(){
  int count=0;
  for (  ShardRouting shardEntry : this) {
    if (shardEntry.state() != ShardRoutingState.RELOCATING) {
      count++;
    }
  }
  return count;
}

public String convertBinaryToHexString(byte[] bytes){
  StringBuilder builder=new StringBuilder(bytes.length * 2);
  for (  byte b : bytes) {
    int highBitsInt=(b >> 4) & 0xF;
    int lowBitsInt=b & 0xF;
    builder.append(HEX_CHARS[highBitsInt]);
    builder.append(HEX_CHARS[lowBitsInt]);
  }
  return builder.toString();
}

protected static void writeHeader(XMLWriter writer){
  XmlWriterUtil.writeCommentLineBreak(writer);
  XmlWriterUtil.writeComment(writer,"    ");
  DateFormat dateFormat=new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss");
  XmlWriterUtil.writeComment(writer,"Generated by Maven Help Plugin on " + dateFormat.format(new Date(System.currentTimeMillis())));
  XmlWriterUtil.writeComment(writer,"See: http://maven.apache.org/plugins/maven-help-plugin/");
  XmlWriterUtil.writeComment(writer,"    ");
  XmlWriterUtil.writeCommentLineBreak(writer);
  XmlWriterUtil.writeLineBreak(writer);
}

protected void close(){
  try {
    if (to != null)     to.close();
    if (from != null)     from.close();
  }
 catch (  IOException e) {
  }
  if (process != null)   process.destroy();
  process=null;
  to=null;
  from=null;
  errorLogger=null;
}

public void clearParseIssues(){
  parseIssues.clear();
}

public int validate(GraphicsConfiguration gc){
  int returnCode=VolatileImage.IMAGE_OK;
  boolean lostSurfaceTmp=lostSurface;
  lostSurface=false;
  if (isAccelerationEnabled()) {
    if (!isConfigValid(gc)) {
      returnCode=VolatileImage.IMAGE_INCOMPATIBLE;
    }
 else     if (sdAccel == null) {
      sdAccel=initAcceleratedSurface();
      if (sdAccel != null) {
        sdCurrent=sdAccel;
        sdBackup=null;
        returnCode=VolatileImage.IMAGE_RESTORED;
      }
 else {
        sdCurrent=getBackupSurface();
      }
    }
 else     if (sdAccel.isSurfaceLost()) {
      try {
        restoreAcceleratedSurface();
        sdCurrent=sdAccel;
        sdAccel.setSurfaceLost(false);
        sdBackup=null;
        returnCode=VolatileImage.IMAGE_RESTORED;
      }
 catch (      sun.java2d.InvalidPipeException e) {
        sdCurrent=getBackupSurface();
      }
    }
 else     if (lostSurfaceTmp) {
      returnCode=VolatileImage.IMAGE_RESTORED;
    }
  }
 else   if (sdAccel != null) {
    sdCurrent=getBackupSurface();
    sdAccel=null;
    returnCode=VolatileImage.IMAGE_RESTORED;
  }
  if ((returnCode != VolatileImage.IMAGE_INCOMPATIBLE) && (sdCurrent != sdPrevious)) {
    sdPrevious=sdCurrent;
    returnCode=VolatileImage.IMAGE_RESTORED;
  }
  if (returnCode == VolatileImage.IMAGE_RESTORED) {
    initContents();
  }
  return returnCode;
}

private static String unsignedToString(final int value){
  if (value >= 0) {
    return Integer.toString(value);
  }
 else {
    return Long.toString(((long)value) & 0x00000000FFFFFFFFL);
  }
}

public ConnectionManager(ConnectionManagerConfiguration configuration) throws Exception {
  _configuration=configuration;
  if (_configuration == null) {
    throw new ConnectionManagerException("Invalid null connection manager configuration.");
  }
}

@SuppressWarnings("unchecked") public Pids(){
  Arrays.sort(PIDs,pidComparator);
}

public void handleHeaderColumnReleased(Point p){
  TABLE.setPressedColumnIndex(-1);
  JTableHeader th=TABLE.getTableHeader();
  int col=th.columnAtPoint(p);
  if (col != -1)   th.repaint(th.getHeaderRect(col));
}

public void createDevices(@NotNull List<Device> devices){
  if (!initIfNecessary()) {
    return;
  }
  for (  Device device : devices) {
    String deviceIdBase=device.getId();
    String deviceNameBase=device.getDisplayName();
    int i=2;
    while (isUserDevice(device)) {
      String id=String.format(Locale.getDefault(),"%1$s_%2$d",deviceIdBase,i);
      String name=String.format(Locale.getDefault(),"%1$s_%2$d",deviceNameBase,i);
      device=cloneDeviceWithNewIdAndName(device,id,name);
    }
    ourDeviceManager.addUserDevice(device);
  }
  ourDeviceManager.saveUserDevices();
}

public WritableRaster createCompatibleWritableRaster(int w,int h){
  if (w <= 0 || h <= 0) {
    throw new RasterFormatException("negative " + ((w <= 0) ? "width" : "height"));
  }
  SampleModel sm=sampleModel.createCompatibleSampleModel(w,h);
  return new ShortBandedRaster(sm,new Point(0,0));
}

public void write(PrintWriter writer){
  for (int i=0; i < count; i++) {
    writer.println(keys[i] + "\t" + values[i]);
  }
  writer.flush();
}

@WorkerThread public synchronized int stopRecord(){
  if (mRecorder == null) {
    mState=STATE_IDLE;
    return -1;
  }
  int length=-1;
switch (mState) {
case STATE_RECORDING:
    try {
      Thread.sleep(STOP_AUDIO_RECORD_DELAY_MILLIS);
      mRecorder.stop();
      length=(int)((System.currentTimeMillis() - mSampleStart) / 1000);
    }
 catch (    RuntimeException e) {
      Log.w(TAG,"stopRecord fail, stop fail(no audio data recorded): " + e.getMessage());
    }
catch (    InterruptedException e) {
      Log.w(TAG,"stopRecord fail, stop fail(InterruptedException): " + e.getMessage());
    }
case STATE_PREPARED:
case STATE_IDLE:
default :
  try {
    mRecorder.reset();
  }
 catch (  RuntimeException e) {
    Log.w(TAG,"stopRecord fail, reset fail " + e.getMessage());
  }
mRecorder.release();
mRecorder=null;
mState=STATE_IDLE;
break;
}
return length;
}

public XMLParser(final Class classToBeBound,final String[] schemas) throws XMLException {
  try {
    JAXBContext jc=JAXBContext.newInstance(classToBeBound);
    marshaller=jc.createMarshaller();
    marshaller.setSchema(XMLSchemaUtils.createSchema(schemas));
    unmarshaller=jc.createUnmarshaller();
    unmarshaller.setSchema(XMLSchemaUtils.createSchema(schemas));
  }
 catch (  JAXBException e) {
    throw new XMLException("Cannot instantiate marshaller/unmarshaller for " + classToBeBound,e);
  }
}

private void abort(Throwable t){
  throwable=t;
}

public static UserImpl signup(Map<String,String[]> parameters,String ip,List<SignupError> errors){
  log.entering("GaeStore","signup");
  String email=getFirst(parameters,"email");
  String displayName=getFirst(parameters,"displayName");
  String photoUrl=getFirst(parameters,"photoUrl");
  String password=getFirst(parameters,"password");
  String confirm=getFirst(parameters,"confirm");
  if (Strings.isNullOrEmpty(email) || !EmailValidator.isValid(email)) {
    errors.add(SignupError.INVALID_EMAIL);
  }
  if (Strings.isNullOrEmpty(displayName)) {
    errors.add(SignupError.EMPTY_DISPLAY_NAME);
  }
  if (Strings.isNullOrEmpty(password)) {
    errors.add(SignupError.INVALID_PASSWORD);
  }
 else   if (!password.equals(confirm)) {
    errors.add(SignupError.CONFIRM_MISMATCH);
  }
 else   if (password.length() < 3) {
    errors.add(SignupError.INVALID_PASSWORD);
  }
  PersistenceManager pm=pmf.getPersistenceManager();
  try {
    UserRecord record=findUserByEmail(pm,email);
    if (record != null) {
      errors.add(SignupError.EMAIL_REGISTERED);
    }
 else     if (errors.isEmpty()) {
      log.fine("Create new legacy user for: " + email);
      record=new UserRecord();
      record.setEmail(email);
      record.setDisplayName(displayName);
      record.setPhotoUrl(photoUrl);
      record.setPassword(password);
      record.setTosAccepted(true);
      record.setLastBigChangeTime(System.currentTimeMillis());
      pm.makePersistent(record);
      UserImpl user=createUserByRecord(record);
      return user;
    }
  }
  finally {
    pm.close();
  }
  log.exiting("GaeStore","signup");
  return null;
}

@Override public final String readNullTerminatedAsciiString(){
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  byte b;
  while (true) {
    b=readByte();
    if (b == 0) {
      break;
    }
    baos.write(b);
  }
  byte[] buf=baos.toByteArray();
  char[] chrBuf=new char[buf.length];
  for (int x=0; x < buf.length; x++) {
    chrBuf[x]=(char)buf[x];
  }
  return String.valueOf(chrBuf);
}

private void thresholdBlur(Kernel kernel,int[] inPixels,int[] outPixels,int width,int height,boolean alpha){
  float[] matrix=kernel.getKernelData(null);
  int cols=kernel.getWidth();
  int cols2=cols / 2;
  for (int y=0; y < height; y++) {
    int ioffset=y * width;
    int outIndex=y;
    for (int x=0; x < width; x++) {
      float r=0, g=0, b=0, a=0;
      int moffset=cols2;
      int rgb1=inPixels[ioffset + x];
      int a1=(rgb1 >> 24) & 0xff;
      int r1=(rgb1 >> 16) & 0xff;
      int g1=(rgb1 >> 8) & 0xff;
      int b1=rgb1 & 0xff;
      float af=0, rf=0, gf=0, bf=0;
      for (int col=-cols2; col <= cols2; col++) {
        float f=matrix[moffset + col];
        if (f != 0) {
          int ix=x + col;
          if (!(0 <= ix && ix < width))           ix=x;
          int rgb2=inPixels[ioffset + ix];
          int a2=(rgb2 >> 24) & 0xff;
          int r2=(rgb2 >> 16) & 0xff;
          int g2=(rgb2 >> 8) & 0xff;
          int b2=rgb2 & 0xff;
          int d;
          d=a1 - a2;
          if (d >= -threshold && d <= threshold) {
            a+=f * a2;
            af+=f;
          }
          d=r1 - r2;
          if (d >= -threshold && d <= threshold) {
            r+=f * r2;
            rf+=f;
          }
          d=g1 - g2;
          if (d >= -threshold && d <= threshold) {
            g+=f * g2;
            gf+=f;
          }
          d=b1 - b2;
          if (d >= -threshold && d <= threshold) {
            b+=f * b2;
            bf+=f;
          }
        }
      }
      a=af == 0 ? a1 : a / af;
      r=rf == 0 ? r1 : r / rf;
      g=gf == 0 ? g1 : g / gf;
      b=bf == 0 ? b1 : b / bf;
      int ia=alpha ? PixelUtils.clamp((int)(a + 0.5)) : 0xff;
      int ir=PixelUtils.clamp((int)(r + 0.5));
      int ig=PixelUtils.clamp((int)(g + 0.5));
      int ib=PixelUtils.clamp((int)(b + 0.5));
      outPixels[outIndex]=(ia << 24) | (ir << 16) | (ig << 8)| ib;
      outIndex+=height;
    }
  }
}

void closeSilently(ServerSocket socket){
  try {
    socket.close();
  }
 catch (  Exception e) {
  }
}

public ExpressionParserBuilder withProcess(Process process){
  this.process=process;
  return this;
}

void addAssociatedComponentAt(int index,Component cmp){
  if (comps == null) {
    comps=new Vector();
  }
  comps.insertElementAt(cmp,index);
}

private static byte[] readClass(final InputStream is) throws IOException {
  if (is == null) {
    throw new IOException("Class not found");
  }
  byte[] b=new byte[is.available()];
  int len=0;
  while (true) {
    int n=is.read(b,len,b.length - len);
    if (n == -1) {
      if (len < b.length) {
        byte[] c=new byte[len];
        System.arraycopy(b,0,c,0,len);
        b=c;
      }
      return b;
    }
    len+=n;
    if (len == b.length) {
      int last=is.read();
      if (last < 0) {
        return b;
      }
      byte[] c=new byte[b.length + 1000];
      System.arraycopy(b,0,c,0,len);
      c[len++]=(byte)last;
      b=c;
    }
  }
}

static String stringFromPacket(DatagramPacket packet){
  return new String(packet.getData(),0,packet.getLength());
}

private String readAttributeName(boolean returnLowerCase){
  skipWhitespace();
  int c=find(ATTRIBUTE_NAME_TERMINATORS);
  String forSubstring=returnLowerCase ? inputLowerCase : input;
  String result=pos < c ? forSubstring.substring(pos,c) : null;
  pos=c;
  return result;
}

public boolean contains(final Entity entity){
  if (entity == null) {
    return false;
  }
  final IRPZone entityZone=entity.getZone();
  return zone.equals(entityZone) && zone.has(entity.getID()) && shape.contains(entity.getX(),entity.getY());
}

protected void checkOffscreenImage(Dimension d){
  if (doubleBuffered) {
    if (offscreen == null || offscreen.getWidth() != d.width || offscreen.getHeight() != d.height) {
      offscreen=new BufferedImage(d.width,d.height,BufferedImage.TYPE_INT_ARGB);
      offscreenG2d=offscreen.createGraphics();
    }
  }
}

public void clear(){
synchronized (mLock) {
    mGraphics.clear();
  }
  postInvalidate();
}

public void testSetObject_int_Object_int() throws SQLException {
  PreparedStatement ps=null;
  try {
    String query="insert into type (IntVal) values (?);";
    ps=conn.prepareStatement(query);
    Statement st=null;
    try {
      ps.setObject(1,Integer.MAX_VALUE,Types.INTEGER);
      ps.execute();
      st=conn.createStatement();
      st.execute("select * from type where IntVal=" + Integer.MAX_VALUE);
      ResultSet rs=st.getResultSet();
      assertEquals(1,getCount(rs));
    }
  finally {
      try {
        st.close();
      }
 catch (      Exception ee) {
      }
    }
    query="insert into type (LongVal) values (?);";
    ps=conn.prepareStatement(query);
    try {
      ps.setObject(1,"test text",Types.CHAR);
      ps.execute();
      st=conn.createStatement();
      st.execute("select * from type where LongVal='test text';");
      ResultSet rs=st.getResultSet();
      assertEquals(1,getCount(rs));
    }
  finally {
      try {
        st.close();
      }
 catch (      Exception ee) {
      }
    }
    query="insert into type (DecVal) values (?);";
    ps=conn.prepareStatement(query);
    ps.setObject(1,new Object(),Types.DECIMAL);
    ps.execute();
    query="insert into type (dateVal) values (?);";
    ps=conn.prepareStatement(query);
    Date d=new Date(123456789);
    try {
      ps.setObject(1,d,Types.DATE);
      ps.execute();
      st=conn.createStatement();
      st.execute("select * from type where dateVal='" + d.getTime() + "';");
      ResultSet rs=st.getResultSet();
      assertEquals(1,getCount(rs));
    }
  finally {
      try {
        st.close();
      }
 catch (      Exception ee) {
      }
    }
    query="insert into type (BlobVal) values (?);";
    ps=conn.prepareStatement(query);
    try {
      ps.setObject(1,"",Types.BLOB);
      ps.execute();
    }
  finally {
      try {
        st.close();
      }
 catch (      Exception ee) {
      }
    }
  }
  finally {
    try {
      ps.close();
    }
 catch (    Exception ee) {
    }
  }
  try {
    ps.setObject(1,Integer.MAX_VALUE,Types.INTEGER);
    fail("Exception not thrown");
  }
 catch (  SQLException e) {
  }
}

public void warning(org.xml.sax.SAXParseException e) throws org.xml.sax.SAXException {
  String formattedMsg=e.getMessage();
  SAXSourceLocator locator=getLocator();
  ErrorListener handler=m_stylesheetProcessor.getErrorListener();
  try {
    handler.warning(new TransformerException(formattedMsg,locator));
  }
 catch (  TransformerException te) {
    throw new org.xml.sax.SAXException(te);
  }
}

public static boolean checkChrootPath(String zkHost,boolean create) throws KeeperException, InterruptedException {
  if (!containsChroot(zkHost)) {
    return true;
  }
  log.info("zkHost includes chroot");
  String chrootPath=zkHost.substring(zkHost.indexOf("/"),zkHost.length());
  SolrZkClient tmpClient=new SolrZkClient(zkHost.substring(0,zkHost.indexOf("/")),60 * 1000);
  boolean exists=tmpClient.exists(chrootPath,true);
  if (!exists && create) {
    tmpClient.makePath(chrootPath,false,true);
    exists=true;
  }
  tmpClient.close();
  return exists;
}

public void addJob(Runnable job){
  mJobs.add(job);
}

public void addXValue(String xVal){
  mXValAverageLength=(mXValAverageLength + xVal.length()) / 2f;
  mXVals.add(xVal);
}

public boolean isNavigationAtBottom(){
  return (mSmallestWidthDp >= 600 || mInPortrait);
}

public long timeSinceStart(){
  long currentTime=System.currentTimeMillis();
  return currentTime - startTime;
}

public void fillRectRadialGradient(Object graphics,int startColor,int endColor,int x,int y,int width,int height,float relativeX,float relativeY,float relativeSize){
  int centerX=(int)(width * (1 - relativeX));
  int centerY=(int)(height * (1 - relativeY));
  int size=(int)(Math.min(width,height) * relativeSize);
  int x2=(int)(width / 2 - (size * relativeX));
  int y2=(int)(height / 2 - (size * relativeY));
  boolean aa=isAntiAliased(graphics);
  setAntiAliased(graphics,false);
  if (cacheRadialGradients()) {
    Object r=findCachedGradient(radialGradientCache,startColor,endColor,x,y,width,height,true,centerX,centerY,size);
    if (r != null) {
      drawImage(graphics,r,x,y);
    }
 else {
      r=createMutableImage(width,height,0xffffffff);
      Object imageGraphics=getNativeGraphics(r);
      setColor(imageGraphics,endColor);
      fillRect(imageGraphics,0,0,width,height);
      fillRadialGradientImpl(imageGraphics,startColor,endColor,x2,y2,size,size,0,360);
      drawImage(graphics,r,x,y);
      if (radialGradientCache == null) {
        radialGradientCache=new Hashtable();
      }
      storeCachedGradient(r,radialGradientCache,startColor,endColor,x,y,true,centerX,centerY,size);
    }
  }
 else {
    setColor(graphics,endColor);
    fillRect(graphics,x,y,width,height);
    fillRadialGradientImpl(graphics,startColor,endColor,x + x2,y + y2,size,size,0,360);
  }
  if (aa) {
    setAntiAliased(graphics,true);
  }
}

public Formatter format(Locale l,String format,Object... args){
  ensureOpen();
  int last=-1;
  int lasto=-1;
  FormatString[] fsa=parse(format);
  for (int i=0; i < fsa.length; i++) {
    FormatString fs=fsa[i];
    int index=fs.index();
    try {
switch (index) {
case -2:
        fs.print(null,l);
      break;
case -1:
    if (last < 0 || (args != null && last > args.length - 1))     throw new MissingFormatArgumentException(fs.toString());
  fs.print((args == null ? null : args[last]),l);
break;
case 0:
lasto++;
last=lasto;
if (args != null && lasto > args.length - 1) throw new MissingFormatArgumentException(fs.toString());
fs.print((args == null ? null : args[lasto]),l);
break;
default :
last=index - 1;
if (args != null && last > args.length - 1) throw new MissingFormatArgumentException(fs.toString());
fs.print((args == null ? null : args[last]),l);
break;
}
}
 catch (IOException x) {
lastException=x;
}
}
return this;
}

public void testWriteReadEmpty() throws Exception {
  ByteArrayOutputStream out=new ByteArrayOutputStream(0);
  ObjectOutputStream os=new ObjectOutputStream(out);
  os.writeObject(empty);
  ObjectInputStream is=new ObjectInputStream(new ByteArrayInputStream(out.toByteArray()));
  ClusterPolicy copy=(ClusterPolicy)is.readObject();
  is.close();
  os.close();
  assertTrue(helper.areEquals(empty,copy));
}

DOMStringListImpl(String[] params){
  fStrings=new Vector();
  if (params != null) {
    for (int i=0; i < params.length; i++) {
      fStrings.add(params[i]);
    }
  }
}

public Instant watermarkHold(){
  long min=Long.MAX_VALUE;
  for (  Instant hold : watermarkHolds.values()) {
    min=Math.min(min,hold.getMillis());
  }
  return new Instant(min);
}

@Override public final boolean isCapPresent(int cap){
  return ((oglCaps.getCaps() & cap) != 0);
}

public static <T>MenuResult<T> again(){
  return new MenuResult<>(Type.AGAIN,Collections.<T>emptyList());
}

@SuppressWarnings("unchecked") public V put(K key,V value){
  final int hash=key.hashCode();
  int index=indexOf(key,hash);
  if (index >= 0) {
    index=(index << 1) + 1;
    final V old=(V)mArray[index];
    mArray[index]=value;
    return old;
  }
  index=~index;
  if (mSize >= mHashes.length) {
    final int n=mSize >= (BASE_SIZE * 2) ? (mSize + (mSize >> 1)) : (mSize >= BASE_SIZE ? (BASE_SIZE * 2) : BASE_SIZE);
    final int[] ohashes=mHashes;
    final Object[] oarray=mArray;
    allocArrays(n);
    if (mHashes.length > 0) {
      System.arraycopy(ohashes,0,mHashes,0,ohashes.length);
      System.arraycopy(oarray,0,mArray,0,oarray.length);
    }
    freeArrays(ohashes,oarray,mSize);
  }
  if (index < mSize) {
    System.arraycopy(mHashes,index,mHashes,index + 1,mSize - index);
    System.arraycopy(mArray,index << 1,mArray,(index + 1) << 1,(mSize - index) << 1);
  }
  mHashes[index]=hash;
  mArray[index << 1]=key;
  mArray[(index << 1) + 1]=value;
  mSize++;
  return null;
}

public Long addNewUser(String SID,String username,String userpass,String lastname,String firstname,String email,String additionalname,String street,String zip,String fax,long states_id,String town,long language_id,String baseURL) throws AxisFault {
  try {
    Long users_id=sessionManagement.checkSession(SID);
    Long user_level=userManagement.getUserLevelByID(users_id);
    if (authLevelManagement.checkWebServiceLevel(user_level)) {
      Configuration conf=cfgManagement.getConfKey(3L,"default.timezone");
      String jName_timeZone="";
      if (conf != null) {
        jName_timeZone=conf.getConf_value();
      }
      Long user_id=userManagement.registerUser(username,userpass,lastname,firstname,email,new Date(),street,additionalname,fax,zip,states_id,town,language_id,"",baseURL,true,jName_timeZone);
      if (user_id == null || user_id < 0) {
        return user_id;
      }
      Users user=userManagement.getUserById(user_id);
      user.setStatus(1);
      user.setUpdatetime(new Date());
      userManagement.updateUser(user);
      return user_id;
    }
 else {
      return new Long(-26);
    }
  }
 catch (  Exception err) {
    log.error("setUserObject",err);
    throw new AxisFault(err.getMessage());
  }
}

public static void interpreterOnly(Runnable runnable){
  runnable.run();
}

public DAddExtensionType(JDialog parent,X509Extension extensions){
  super(parent,Dialog.ModalityType.DOCUMENT_MODAL);
  setTitle(res.getString("DAddExtensionType.Title"));
  this.extensions=extensions;
  initComponents();
}

private int hash(GraphicsConfiguration config,int w,int h,Object... args){
  int hash;
  hash=(config != null ? config.hashCode() : 0);
  hash=31 * hash + w;
  hash=31 * hash + h;
  hash=31 * hash + Arrays.deepHashCode(args);
  return hash;
}

public static byte[] decode(byte[] input,int offset,int len,int flags){
  Decoder decoder=new Decoder(flags,new byte[len * 3 / 4]);
  if (!decoder.process(input,offset,len,true)) {
    throw new IllegalArgumentException("bad base-64");
  }
  if (decoder.op == decoder.output.length) {
    return decoder.output;
  }
  byte[] temp=new byte[decoder.op];
  System.arraycopy(decoder.output,0,temp,0,decoder.op);
  return temp;
}

protected void paintText(Graphics g,AbstractButton b,Rectangle textRect,String text){
  paintText(g,(JComponent)b,textRect,text);
}

public static boolean usesSecondOperand(final Integer mnemonic){
  return !mnemonic.equals(ReilHelpers._OPCODE_NOP) && !mnemonic.equals(ReilHelpers._OPCODE_BISZ) && !mnemonic.equals(ReilHelpers._OPCODE_STR)&& !mnemonic.equals(ReilHelpers._OPCODE_STM)&& !mnemonic.equals(ReilHelpers._OPCODE_LDM)&& !mnemonic.equals(ReilHelpers._OPCODE_JCC);
}

public RhythmGroup addOverlay(RhythmOverlay overlay){
  mOverlays.add(overlay);
  if (mCurrentOverlayIndex == NO_OVERLAY) {
    selectOverlay(0);
  }
  return this;
}

public char[] toCharArray(){
  char[] buffer=new char[count];
  System.arraycopy(value,offset,buffer,0,count);
  return buffer;
}

private File[] filterFiles(final File[] toFilter,final String fileName){
  if (fileName != null && toFilter != null) {
    final File fileAsFilter=new File(fileName);
    for (    File file : toFilter) {
      if (file.compareTo(fileAsFilter) == 0) {
        return new File[]{fileAsFilter};
      }
    }
    return new File[0];
  }
  return toFilter;
}

public Fp(ECCurve curve,ECFieldElement x,ECFieldElement y){
  this(curve,x,y,false);
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getFooterSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if ((mState == State.PULL_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) || (mState == State.RESET && itemDimension < Math.abs(newScrollValue))) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

private File writePrivateKeyFile() throws GitException {
  final File keyDirectory=new File(rootFolder,host);
  if (!keyDirectory.exists()) {
    keyDirectory.mkdirs();
  }
  final File keyFile=new File(keyDirectory,DEFAULT_KEY_NAME);
  try (FileOutputStream fos=new FileOutputStream(keyFile)){
    fos.write(sshKey);
  }
 catch (  IOException e) {
    LOG.error("Can't store ssh key. ",e);
    throw new GitException("Can't store ssh key. ");
  }
  protectPrivateKeyFile(keyFile);
  return keyFile;
}

protected boolean drawLeftBorder(Component c,Graphics g,int x,int y,int width,int height){
  if (super.drawLeftBorder(c,g,x,y,width,height) && frame.isResizable()) {
    g.setColor(getFrameHighlight());
    int topY=y + CORNER_SIZE;
    g.drawLine(x,topY,x + 4,topY);
    int bottomY=height - CORNER_SIZE;
    g.drawLine(x + 1,bottomY,x + 5,bottomY);
    g.setColor(getFrameShadow());
    g.drawLine(x + 1,topY - 1,x + 5,topY - 1);
    g.drawLine(x + 1,bottomY - 1,x + 5,bottomY - 1);
    return true;
  }
  return false;
}

public static boolean isFileReadable(String fileName){
  final File file=new File(fileName);
  return file.exists() && file.canRead();
}

public static String hintingSize(Font font){
  int instrSize=0;
  LocaTable locaTable=FontUtils.getLocaTable(font);
  GlyphTable glyfTable=FontUtils.getGlyphTable(font);
  for (int i=0; i < locaTable.numGlyphs(); i++) {
    Glyph glyph=glyfTable.glyph(locaTable.glyphOffset(i),locaTable.glyphLength(i));
    instrSize+=glyph.instructionSize();
  }
  double percentage=instrSize * 100.0 / glyfTable.headerLength();
  return String.format("%d bytes (%s%% of glyf table)",instrSize,twoDecimalPlaces.format(percentage));
}

public static void premain(String agentArgs,Instrumentation inst){
  instrumentation=inst;
  LOGGER.info("inspectIT Agent: Starting initialization...");
  checkForCorrectSetup();
  try {
    @SuppressWarnings("resource") InspectItClassLoader classLoader=new InspectItClassLoader(new URL[0]);
    Class<?> agentClazz=classLoader.loadClass(INSPECTIT_AGENT);
    Constructor<?> constructor=agentClazz.getConstructor(File.class);
    Object realAgent=constructor.newInstance(getInspectItAgentJarFileLocation());
    Agent.agent=(IAgent)realAgent;
    preloadClasses();
    LOGGER.info("inspectIT Agent: Initialization complete...");
    analyzeAlreadyLoadedClasses();
    inst.addTransformer(new JavaAgent());
  }
 catch (  Exception e) {
    LOGGER.severe("Something unexpected happened while trying to initialize the Agent, aborting!");
    e.printStackTrace();
  }
}

private static float systemPropertyValue(String name){
  String floatString=System.getProperty(name);
  if (floatString == null)   return Float.NaN;
  try {
    return Float.parseFloat(floatString);
  }
 catch (  NumberFormatException ex) {
    throw new IllegalArgumentException(String.format("Bad float value in system property %s=%s",name,floatString));
  }
}

@ZapApiIgnore public boolean isConfirmRemoveProxyExcludedDomain(){
  return this.confirmRemoveProxyExcludeDomain;
}

public FloatColumn(int nrows,int capacity,float defaultValue){
  super(float.class,new Float(defaultValue));
  if (capacity < nrows) {
    throw new IllegalArgumentException("Capacity value can not be less than the row count.");
  }
  m_values=new float[capacity];
  Arrays.fill(m_values,defaultValue);
  m_size=nrows;
}

private boolean addLocalKey(KeyCacheObject key,AffinityTopologyVersion topVer,Collection<KeyCacheObject> distributedKeys) throws IgniteCheckedException {
  GridDistributedCacheEntry entry=cctx.colocated().entryExx(key,topVer,false);
  assert !entry.detached();
  if (!cctx.isAll(entry,filter)) {
    if (log.isDebugEnabled())     log.debug("Entry being locked did not pass filter (will not lock): " + entry);
    onComplete(false,false);
    return false;
  }
  GridCacheMvccCandidate cand=addEntry(entry);
  if (cand != null && !cand.reentry())   distributedKeys.add(key);
  return inTx() && cand == null;
}

public static boolean isSupplemental(int c){
  return (c >= 0x10000 && c <= 0x10FFFF);
}

public void testRadix10Neg(){
  String value="-2489756308572364789878394872984";
  int radix=16;
  BigInteger aNumber=new BigInteger(value,radix);
  String result=aNumber.toString(radix);
  assertTrue(result.equals(value));
}

public synchronized int readInTestFromSUT(){
  if (remoteBuffer.isEmpty()) {
    return -1;
  }
  return remoteBuffer.poll() & 0xFF;
}

public SpatialIndex(String shpFilename) throws IOException {
  this.shpFileName=shpFilename;
  if (logger.isLoggable(Level.FINE)) {
    logger.fine("SpatialIndex(" + shpFilename + ");");
  }
}

public int invokeCompiler(){
  List<String> args=getExecArguments();
  for (int i=0; i < args.size(); i++) {
    String arg=args.get(i);
    if (arg.startsWith("-AoutputArgsToFile=")) {
      String fileName=arg.substring(19);
      args.remove(i);
      outputArgumentsToFile(fileName,args);
      break;
    }
  }
  return ExecUtil.execute(args.toArray(new String[args.size()]),System.out,System.err);
}

static double fourNeighborsIDW(SpatialGrid sg,double xCoord,double yCoord,double exp){
  double xDif=(xCoord - sg.getXmin()) % sg.getResolution();
  double yDif=(yCoord - sg.getYmin()) % sg.getResolution();
  if (xDif == 0 && yDif == 0) {
    return sg.getValue(xCoord,yCoord);
  }
  double x1=xCoord - xDif;
  double x2=x1 + sg.getResolution();
  double y1=yCoord - yDif;
  double y2=y1 + sg.getResolution();
  double d11=Math.pow(distance(x1,y1,xCoord,yCoord),exp);
  double d12=Math.pow(distance(x1,y2,xCoord,yCoord),exp);
  double d21=Math.pow(distance(x2,y1,xCoord,yCoord),exp);
  double d22=Math.pow(distance(x2,y2,xCoord,yCoord),exp);
  if (xCoord == sg.getXmax()) {
    return (sg.getValue(x1,y1) / d11 + sg.getValue(x1,y2) / d12) / (1 / d11 + 1 / d12);
  }
  if (yCoord == sg.getYmax()) {
    return (sg.getValue(x1,y1) / d11 + sg.getValue(x2,y1) / d21) / (1 / d11 + 1 / d21);
  }
  return (sg.getValue(x1,y1) / d11 + sg.getValue(x1,y2) / d12 + sg.getValue(x2,y1) / d21 + sg.getValue(x2,y2) / d22) / (1 / d11 + 1 / d12 + 1 / d21 + 1 / d22);
}

protected void preUpdateMenu(){
}

public PojoValueField(PropertyDescriptor desc){
  super(desc);
}

public UrlFilterRule(String ruleText){
  super(ruleText);
  String urlRuleText=ruleText;
  if (StringUtils.startsWith(urlRuleText,MASK_WHITE_LIST)) {
    urlRuleText=urlRuleText.substring(MASK_WHITE_LIST.length());
    whiteListRule=true;
  }
  int optionsIndex=StringUtils.lastIndexOf(urlRuleText,OPTIONS_DELIMITER);
  if (optionsIndex > -1) {
    urlRuleText=urlRuleText.substring(0,optionsIndex);
  }
  urlRuleText=toPunycode(urlRuleText);
  boolean regexRule=urlRuleText.startsWith(MASK_REGEX_RULE) && urlRuleText.endsWith(MASK_REGEX_RULE);
  if (!regexRule) {
    shortcut=findShortcut(urlRuleText);
  }
}

protected static Pair<String,String> lsrRegister(final long offset,final ITranslationEnvironment environment,final List<ReilInstruction> instructions,final String registerNodeValue1,final String registerNodeValue2){
  final String shifterOperand=environment.getNextVariableString();
  final String shifterCarryOut=environment.getNextVariableString();
  final String tmpVar1=environment.getNextVariableString();
  final String tmpVar11=environment.getNextVariableString();
  final String tmpVar2=environment.getNextVariableString();
  final String tmpVar3=environment.getNextVariableString();
  final String tmpVar4=environment.getNextVariableString();
  final String tmpVar5=environment.getNextVariableString();
  final String tmpVar6=environment.getNextVariableString();
  final String tmpVar7=environment.getNextVariableString();
  final String isZeroCondition=environment.getNextVariableString();
  final String shifterCarryOutTmp1=environment.getNextVariableString();
  final String shifterCarryOutTmp2=environment.getNextVariableString();
  final String shifterCarryOutTmp3=environment.getNextVariableString();
  final String shifterCarryOutTmp4=environment.getNextVariableString();
  long baseOffset=offset;
  instructions.add(ReilHelpers.createAnd(baseOffset++,dWordSize,registerNodeValue2,dWordSize,String.valueOf(0x000000FFL),dWordSize,tmpVar1));
  instructions.add(ReilHelpers.createSub(baseOffset++,dWordSize,String.valueOf(0),dWordSize,tmpVar1,dWordSize,tmpVar11));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dWordSize,registerNodeValue1,dWordSize,tmpVar11,dWordSize,tmpVar2));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dWordSize,tmpVar2,dWordSize,bitMaskAllBitsSet,dWordSize,shifterOperand));
  instructions.add(ReilHelpers.createBisz(baseOffset++,dWordSize,tmpVar11,byteSize,isZeroCondition));
  instructions.add(ReilHelpers.createAnd(baseOffset++,byteSize,isZeroCondition,byteSize,"C",byteSize,shifterCarryOutTmp1));
  instructions.add(ReilHelpers.createXor(baseOffset++,dWordSize,tmpVar11,wordSize,String.valueOf(0x20L),dWordSize,tmpVar3));
  instructions.add(ReilHelpers.createBisz(baseOffset++,dWordSize,tmpVar3,byteSize,isZeroCondition));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dWordSize,registerNodeValue1,dWordSize,thirtyOneSet,byteSize,tmpVar4));
  instructions.add(ReilHelpers.createAnd(baseOffset++,byteSize,isZeroCondition,byteSize,tmpVar4,byteSize,shifterCarryOutTmp2));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dWordSize,tmpVar11,dWordSize,notThirtyOneSet,dWordSize,tmpVar5));
  instructions.add(ReilHelpers.createBisz(baseOffset++,dWordSize,tmpVar5,byteSize,isZeroCondition));
  instructions.add(ReilHelpers.createSub(baseOffset++,dWordSize,tmpVar11,dWordSize,oneSet,dWordSize,tmpVar6));
  instructions.add(ReilHelpers.createSub(baseOffset++,dWordSize,zeroSet,dWordSize,tmpVar6,dWordSize,tmpVar6));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dWordSize,registerNodeValue1,dWordSize,tmpVar6,byteSize,tmpVar7));
  instructions.add(ReilHelpers.createAnd(baseOffset++,byteSize,isZeroCondition,byteSize,tmpVar7,byteSize,shifterCarryOutTmp3));
  instructions.add(ReilHelpers.createOr(baseOffset++,byteSize,shifterCarryOutTmp1,byteSize,shifterCarryOutTmp2,byteSize,shifterCarryOutTmp4));
  instructions.add(ReilHelpers.createOr(baseOffset++,byteSize,shifterCarryOutTmp3,byteSize,shifterCarryOutTmp4,byteSize,shifterCarryOut));
  return new Pair<String,String>(shifterOperand,shifterCarryOut);
}

public static boolean isDrmConvertNeeded(String mimetype){
  return MIMETYPE_DRM_MESSAGE.equals(mimetype);
}

public static String pad(String original,int length,char padChar){
  if (original.length() >= length)   return original;
  StringBuilder sb=new StringBuilder(original);
  while (sb.length() < length) {
    sb.append(padChar);
  }
  return sb.toString();
}

public void propertyChange(PropertyChangeEvent evt){
  String propName=evt.getPropertyName();
  if (propName == MapBean.CursorProperty) {
    fallbackMapBeanCursor=((Cursor)evt.getNewValue());
  }
 else {
    if (propName == MouseDelegator.ActiveModeProperty) {
      MapMouseMode mmm=(MapMouseMode)evt.getNewValue();
      setResetCursor(mmm.getModeCursor());
    }
 else     if (propName == MapBean.LayersProperty) {
      resetForLayers((Layer[])evt.getNewValue(),(Layer[])evt.getOldValue());
    }
 else     if (propName != MapBean.ProjectionProperty) {
      return;
    }
    setAllLabels(fudgeString);
  }
  initToolTip();
}

private void checkForNight(final ZonedDateTime TIME){
  int hour=TIME.getHour();
  int minute=TIME.getMinute();
  if (0 <= hour && minute >= 0 && hour <= 5 && minute <= 59 || 17 <= hour && minute <= 59 && hour <= 23 && minute <= 59) {
    if (isNightMode())     return;
    setNightMode(true);
  }
 else {
    if (!isNightMode())     return;
    setNightMode(false);
  }
}

@Override public int calculateOffsetY(){
  return -(int)(Math.sin(this.angle) * this.distance) - this.shadowSize;
}

private double[] concatenateSamples(final double[] x,final double[] y){
  final double[] z=new double[x.length + y.length];
  System.arraycopy(x,0,z,0,x.length);
  System.arraycopy(y,0,z,x.length,y.length);
  return z;
}

@Override public void drawSeries(Canvas canvas,Paint paint,List<Float> points,XYSeriesRenderer renderer,float yAxisValue,int seriesIndex,int startIndex){
  paint.setColor(renderer.getColor());
  final float stroke=paint.getStrokeWidth();
  if (renderer.isFillPoints()) {
    paint.setStyle(Style.FILL);
  }
 else {
    paint.setStrokeWidth(renderer.getPointStrokeWidth());
    paint.setStyle(Style.STROKE);
  }
  int length=points.size();
  PointStyle ps=renderer.getPointStyle();
  if (ps == PointStyle.X) {
    paint.setStrokeWidth(renderer.getPointStrokeWidth());
    for (int i=0; i < length; i+=2) {
      drawX(canvas,paint,points.get(i),points.get(i + 1));
    }
  }
 else {
    if (ps == PointStyle.CIRCLE) {
      for (int i=0; i < length; i+=2) {
        drawCircle(canvas,paint,points.get(i),points.get(i + 1));
      }
    }
 else {
      if (ps == PointStyle.TRIANGLE) {
        float[] path=new float[6];
        for (int i=0; i < length; i+=2) {
          drawTriangle(canvas,paint,path,points.get(i),points.get(i + 1));
        }
      }
 else {
        if (ps == PointStyle.SQUARE) {
          for (int i=0; i < length; i+=2) {
            drawSquare(canvas,paint,points.get(i),points.get(i + 1));
          }
        }
 else {
          if (ps == PointStyle.DIAMOND) {
            float[] path=new float[8];
            for (int i=0; i < length; i+=2) {
              drawDiamond(canvas,paint,path,points.get(i),points.get(i + 1));
            }
          }
 else {
            if (ps == PointStyle.POINT) {
              for (int i=0; i < length; i+=2) {
                canvas.drawPoint(points.get(i),points.get(i + 1),paint);
              }
            }
          }
        }
      }
    }
  }
  paint.setStrokeWidth(stroke);
}

public final void pushSubContextList(SubContextList iter){
  m_axesIteratorStack.push(iter);
}

public String handleWord(String aWord){
  Matcher m=conditionPattern.matcher(aWord);
  if (m != null && m.matches()) {
    if (type.equals(AffixType.PREFIX)) {
      return handlePrefix(aWord);
    }
 else     if (type.equals(AffixType.SUFFIX)) {
      return handleSuffix(aWord);
    }
  }
  return null;
}

public static void round(Calendar c,String unit){
  Integer uu=CALENDAR_UNITS.get(unit);
  if (null == uu) {
    throw new IllegalArgumentException("Rounding Unit not recognized: " + unit);
  }
  int u=uu.intValue();
switch (u) {
case Calendar.YEAR:
    c.clear(Calendar.MONTH);
case Calendar.MONTH:
  c.clear(Calendar.DAY_OF_MONTH);
c.clear(Calendar.DAY_OF_WEEK);
c.clear(Calendar.DAY_OF_WEEK_IN_MONTH);
c.clear(Calendar.DAY_OF_YEAR);
c.clear(Calendar.WEEK_OF_MONTH);
c.clear(Calendar.WEEK_OF_YEAR);
case Calendar.DATE:
c.clear(Calendar.HOUR_OF_DAY);
c.clear(Calendar.HOUR);
c.clear(Calendar.AM_PM);
case Calendar.HOUR_OF_DAY:
c.clear(Calendar.MINUTE);
case Calendar.MINUTE:
c.clear(Calendar.SECOND);
case Calendar.SECOND:
c.clear(Calendar.MILLISECOND);
break;
default :
throw new IllegalStateException("No logic for rounding value (" + u + ") "+ unit);
}
}

private static final char[] growBuffer(char[] dest,int index,int size){
  char[] copy=new char[size];
  if (index > 0) {
    System.arraycopy(dest,0,copy,0,index);
  }
  return copy;
}

public boolean sync(){
  if (ulog == null) {
    return false;
  }
  log.info(msg() + "START replicas=" + replicas+ " nUpdates="+ nUpdates);
  if (!(ulog.getState() == UpdateLog.State.ACTIVE || ulog.getState() == UpdateLog.State.REPLAYING)) {
    log.error(msg() + "ERROR, update log not in ACTIVE or REPLAY state. " + ulog);
  }
  if (debug) {
    if (startingVersions != null) {
      log.debug(msg() + "startingVersions=" + startingVersions.size()+ " "+ startingVersions);
    }
  }
  for (  String replica : replicas) {
    requestVersions(replica);
  }
  recentUpdates=ulog.getRecentUpdates();
  try {
    ourUpdates=recentUpdates.getVersions(nUpdates);
  }
  finally {
    recentUpdates.close();
  }
  Collections.sort(ourUpdates,absComparator);
  if (startingVersions != null) {
    if (startingVersions.size() == 0) {
      log.warn("no frame of reference to tell if we've missed updates");
      return false;
    }
    Collections.sort(startingVersions,absComparator);
    ourLowThreshold=percentile(startingVersions,0.8f);
    ourHighThreshold=percentile(startingVersions,0.2f);
    long smallestNewUpdate=Math.abs(ourUpdates.get(ourUpdates.size() - 1));
    if (Math.abs(startingVersions.get(0)) < smallestNewUpdate) {
      log.warn(msg() + "too many updates received since start - startingUpdates no longer overlaps with our currentUpdates");
      return false;
    }
    List<Long> newList=new ArrayList<>(ourUpdates);
    for (    Long ver : startingVersions) {
      if (Math.abs(ver) < smallestNewUpdate) {
        newList.add(ver);
      }
    }
    ourUpdates=newList;
  }
 else {
    if (ourUpdates.size() > 0) {
      ourLowThreshold=percentile(ourUpdates,0.8f);
      ourHighThreshold=percentile(ourUpdates,0.2f);
    }
 else {
      log.info(msg() + "DONE.  We have no versions.  sync failed.");
      return false;
    }
  }
  ourUpdateSet=new HashSet<>(ourUpdates);
  requestedUpdateSet=new HashSet<>(ourUpdates);
  for (; ; ) {
    ShardResponse srsp=shardHandler.takeCompletedOrError();
    if (srsp == null)     break;
    boolean success=handleResponse(srsp);
    if (!success) {
      log.info(msg() + "DONE. sync failed");
      shardHandler.cancelAll();
      return false;
    }
  }
  log.info(msg() + "DONE. sync succeeded");
  return true;
}

public static String stripFileProtocol(String uriString){
  if (uriString.startsWith("file://")) {
    uriString=uriString.substring(7);
  }
  return uriString;
}

private void contentSpecTree(int contentSpecIndex,XMLContentSpec contentSpec,ChildrenList children){
  getContentSpec(contentSpecIndex,contentSpec);
  if (contentSpec.type == XMLContentSpec.CONTENTSPECNODE_LEAF || (contentSpec.type & 0x0f) == XMLContentSpec.CONTENTSPECNODE_ANY || (contentSpec.type & 0x0f) == XMLContentSpec.CONTENTSPECNODE_ANY_LOCAL || (contentSpec.type & 0x0f) == XMLContentSpec.CONTENTSPECNODE_ANY_OTHER) {
    if (children.length == children.qname.length) {
      QName[] newQName=new QName[children.length * 2];
      System.arraycopy(children.qname,0,newQName,0,children.length);
      children.qname=newQName;
      int[] newType=new int[children.length * 2];
      System.arraycopy(children.type,0,newType,0,children.length);
      children.type=newType;
    }
    children.qname[children.length]=new QName(null,(String)contentSpec.value,(String)contentSpec.value,(String)contentSpec.otherValue);
    children.type[children.length]=contentSpec.type;
    children.length++;
    return;
  }
  final int leftNode=contentSpec.value != null ? ((int[])(contentSpec.value))[0] : -1;
  int rightNode=-1;
  if (contentSpec.otherValue != null)   rightNode=((int[])(contentSpec.otherValue))[0];
 else   return;
  if (contentSpec.type == XMLContentSpec.CONTENTSPECNODE_CHOICE || contentSpec.type == XMLContentSpec.CONTENTSPECNODE_SEQ) {
    contentSpecTree(leftNode,contentSpec,children);
    contentSpecTree(rightNode,contentSpec,children);
    return;
  }
  if (contentSpec.type == XMLContentSpec.CONTENTSPECNODE_ZERO_OR_ONE || contentSpec.type == XMLContentSpec.CONTENTSPECNODE_ZERO_OR_MORE || contentSpec.type == XMLContentSpec.CONTENTSPECNODE_ONE_OR_MORE) {
    contentSpecTree(leftNode,contentSpec,children);
    return;
  }
  throw new RuntimeException("Invalid content spec type seen in contentSpecTree() method of AbstractDTDGrammar class : " + contentSpec.type);
}

protected JTextField createEditorComponent(){
  JTextField editor=new BorderlessTextField("",9);
  editor.setBorder(null);
  return editor;
}

private void addArg(String key,Object value){
  if (requestArguments == null) {
    requestArguments=new Hashtable();
  }
  if (value == null || key == null) {
    return;
  }
  if (post) {
    setWriteRequest(true);
  }
  requestArguments.put(key,value);
}

public static double[] readFileColumn(String filename,int columnIdx,int sizeLimit) throws IOException, SAXException {
  Path path=Paths.get(filename);
  if (!(Files.exists(path))) {
    throw new SAXException("unable to load data - data source not found.");
  }
  BufferedReader br=new BufferedReader(new InputStreamReader(new FileInputStream(filename),"UTF-8"));
  return readTS(br,columnIdx,sizeLimit);
}

private void startReader(ConnectionTable connTable){
  Assert.assertTrue(!this.isRunning);
  stopped=false;
  this.isRunning=true;
  connTable.executeCommand(this);
}

public static boolean isCompactionRequiredForTable(String metaFolderPath){
  String minorCompactionStatusFile=metaFolderPath + CarbonCommonConstants.FILE_SEPARATOR + CarbonCommonConstants.minorCompactionRequiredFile;
  String majorCompactionStatusFile=metaFolderPath + CarbonCommonConstants.FILE_SEPARATOR + CarbonCommonConstants.majorCompactionRequiredFile;
  try {
    if (FileFactory.isFileExist(minorCompactionStatusFile,FileFactory.getFileType(minorCompactionStatusFile)) || FileFactory.isFileExist(majorCompactionStatusFile,FileFactory.getFileType(majorCompactionStatusFile))) {
      return true;
    }
  }
 catch (  IOException e) {
    LOGGER.error("Exception in isFileExist compaction request file " + e.getMessage());
  }
  return false;
}

BigInteger copy(){
  prepareJavaRepresentation();
  int[] copyDigits=new int[numberLength];
  System.arraycopy(digits,0,copyDigits,0,numberLength);
  return new BigInteger(sign,numberLength,copyDigits);
}

public void addExcludedClass(String className){
  mExcludedClasses.add(className);
}

public BundleMessageSource(Locale locale){
  _messages=ResourceBundle.getBundle(BASE_NAME,locale);
}

private void clipViewOnTheRight(Rect curViewBound,float curViewWidth,int right){
  curViewBound.right=(int)(right - mClipPadding);
  curViewBound.left=(int)(curViewBound.right - curViewWidth);
}

private void createEditPanel(){
  editPanel=new JPanel();
  add(editPanel,BorderLayout.CENTER);
  CardLayout cardlayout=new CardLayout();
  editPanel.setLayout(cardlayout);
  if (colourRampMap != null) {
    for (    ColourRampPanelInterface data : colourRampMap.keySet()) {
      data.setParent(this);
      String key=data.getTitle();
      editPanel.add(data.getPanel(),key);
    }
  }
}

public static long atol(String s){
  int i=0;
  while (i < s.length() && Character.isWhitespace(s.charAt(i)))   i++;
  if (i < s.length() && s.charAt(i) == '0') {
    if (i + 1 < s.length() && (s.charAt(i + 1) == 'x' || s.charAt(i + 1) == 'X'))     return parseLong(s.substring(i + 2),16);
 else     return parseLong(s,8);
  }
 else   return parseLong(s,10);
}

public Object eval(Reader reader,ScriptEngine engine) throws ScriptException {
  return engine.eval(reader);
}

public static InputStream toInputStream(CharSequence input,Charset encoding){
  return toInputStream(input.toString(),encoding);
}

public void classForName(SootMethod container,Stmt forNameInvokeStmt){
  Set<String> classNames=reflectionInfo.classForNameClassNames(container);
  if (classNames == null || classNames.isEmpty()) {
    registerGuard(container,forNameInvokeStmt,"Class.forName() call site; Soot did not expect this site to be reached");
  }
 else {
    for (    String clsName : classNames) {
      constantForName(clsName,container,forNameInvokeStmt);
    }
  }
}

private AbstractRenderer createRenderer(JTabbedPane tabbedPane){
  return hasEmbeddedTabs() ? AbstractRenderer.createEmbeddedRenderer(tabbedPane) : AbstractRenderer.createRenderer(tabPane);
}

public void readMap(InputStream inputStream,MapBuilder builder){
  try {
    parseMap(inputStream,builder);
    if (builder.nodeRefsWithoutDefsAdded())     LOG.warning("Nodes were referenced in ways but not defined before.");
  }
 catch (  SAXParseException e) {
    throw new OsmRuntimeException("Unable to parse input stream" + ".  publicId=(" + e.getPublicId() + "), systemId=("+ e.getSystemId()+ "), lineNumber="+ e.getLineNumber()+ ", columnNumber="+ e.getColumnNumber()+ ".",e);
  }
catch (  SAXException e) {
    throw new OsmRuntimeException("Unable to parse XML.",e);
  }
catch (  IOException e) {
    throw new OsmRuntimeException("Unable to read XML input stream.",e);
  }
 finally {
    if (inputStream != null) {
      try {
        inputStream.close();
      }
 catch (      IOException e) {
        LOG.log(Level.SEVERE,"Unable to close input stream.",e);
      }
    }
  }
}

private void processComment(){
  templateReader.nextCharacter();
  if (templateReader.startsWith(syntax.getDocumentTypeOpening())) {
    processSchemaComment();
    return;
  }
 else   if (nestedComments) {
    processNestedComment();
    return;
  }
  while (templateReader.hasNextCharacter()) {
    final char commentCharacter=templateReader.nextCharacter();
    if (isCommentClosingMarker(commentCharacter) && templateReader.hasNextCharacter() && templateReader.peekCharacter() == syntax.getTagClosing()) {
      templateReader.nextCharacter();
      break;
    }
  }
}

private void emitPermutationsAppCache(TreeLogger logger,LinkerContext context,ArtifactSet artifacts,String startScreenId,OfflineScreen offlineScreen) throws UnableToCompleteException {
  for (  EmittedArtifact emitted : artifacts.find(EmittedArtifact.class)) {
    if (emitted.getVisibility() == Visibility.Private) {
      continue;
    }
    String pathName=emitted.getPartialPath();
    if (acceptCachedResource(pathName)) {
      if (!allArtifacts.contains(pathName)) {
        cachedArtifacts.add(pathName);
      }
    }
  }
  Set<ArtifactsGroup> keySet=artifactsByGroup.keySet();
  for (  ArtifactsGroup group : keySet) {
    Set<String> set=artifactsByGroup.get(group);
    set.addAll(cachedArtifacts);
    artifacts.add(createCacheManifest(context,logger,set,group.getGroupId(),startScreenId,offlineScreen));
    artifacts.add(createCacheManifestLoader(context,logger,group.getGroupId(),startScreenId));
  }
}

public final boolean isRegistered(){
  return !canonicalName.startsWith("x-") && !canonicalName.startsWith("X-");
}

public License(final String filename,final String text){
  if (filename == null) {
    throw new NullPointerException("license file name is null");
  }
  if (filename.isEmpty()) {
    throw new IllegalArgumentException("license file name is empty");
  }
  this.filename=filename;
  if (text == null) {
    throw new NullPointerException("license text is null");
  }
  if (text.isEmpty()) {
    throw new IllegalArgumentException("license text is empty");
  }
  this.text=text;
}

protected static void processExplorerProps(File propsFile){
  try {
    Properties expProps=new Properties();
    BufferedInputStream bi=new BufferedInputStream(new FileInputStream(propsFile));
    expProps.load(bi);
    bi.close();
    bi=null;
    Set<Object> keys=expProps.keySet();
    Iterator<Object> keysI=keys.iterator();
    while (keysI.hasNext()) {
      String key=(String)keysI.next();
      if (!key.endsWith("Policy")) {
        String existingVal=ExplorerDefaults.get(key,"");
        if (existingVal.length() > 0) {
          String replacePolicy=expProps.getProperty(key + "Policy");
          if (replacePolicy != null && replacePolicy.length() > 0) {
            if (replacePolicy.equalsIgnoreCase("replace")) {
              String newVal=expProps.getProperty(key);
              ExplorerDefaults.set(key,newVal);
            }
 else {
              String newVal=expProps.getProperty(key);
              if (existingVal.indexOf(newVal) < 0) {
                newVal=existingVal + "," + newVal;
                ExplorerDefaults.set(key,newVal);
              }
            }
          }
 else {
            String newVal=expProps.getProperty(key);
            if (existingVal.indexOf(newVal) < 0) {
              newVal=existingVal + "," + newVal;
              ExplorerDefaults.set(key,newVal);
            }
          }
        }
 else {
          String newVal=expProps.getProperty(key);
          ExplorerDefaults.set(key,newVal);
        }
      }
    }
  }
 catch (  Exception ex) {
  }
}

long calculateMidEntry(long loVal,long hiVal,final double dfp,long loEntry,long hiEntry){
  final double dhi=(double)hiEntry;
  final double dlo=(double)loEntry;
  final double dhiVal=(double)hiVal;
  final double dloVal=(double)loVal;
  long midEntry=loEntry + (long)((dhi - dlo) * (dfp - dloVal) / (dhiVal - dloVal));
  if (midEntry == hiEntry) {
    midEntry--;
  }
  return midEntry;
}

@SuppressWarnings("unchecked") protected int hashFields(int hash,Map<FieldDescriptor,Object> map){
  for (  Map.Entry<FieldDescriptor,Object> entry : map.entrySet()) {
    FieldDescriptor field=entry.getKey();
    Object value=entry.getValue();
    hash=(37 * hash) + field.getNumber();
    if (field.getType() != FieldDescriptor.Type.ENUM) {
      hash=(53 * hash) + value.hashCode();
    }
 else     if (field.isRepeated()) {
      List<? extends EnumLite> list=(List<? extends EnumLite>)value;
      hash=(53 * hash) + hashEnumList(list);
    }
 else {
      hash=(53 * hash) + hashEnum((EnumLite)value);
    }
  }
  return hash;
}

public DashboardServiceHelper(){
  attributesRequireUpdate.add(DASHBOARD_CLASS_NAME);
  attributesRequireUpdate.add(DASHBOARD_NAME);
  attributesRequireUpdate.add(DASHBOARD_DISPLAY_NAME);
  attributesRequireUpdate.add(DASHBOARD_ICON);
  attributesRequireUpdate.add(DASHBOARD_LOGIN);
  attributesRequireUpdate.add(ICF_IDENTIFIER);
  attributes.addAll(attributesRequireUpdate);
}

public static String javaUtilRegexEscape(String s){
  if (s.indexOf("\\E") == -1) {
    return "\\Q" + s + "\\E";
  }
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < s.length(); i++) {
    sb.append('\\');
    sb.append(s.charAt(i));
  }
  return sb.toString();
}

public void forgetFfmpegPath(){
  settings.put(SETTINGS_FFMPEG_PATH,FFMPEG_PATH_UNSET);
}

@Override public void printWarning(final String message){
  printWarning(message,preferenceStore.getBoolean(UIPreferenceConstants.CONSOLE_SHOW_ON_NEW_WARNING));
}

public static String revertNewLines(String string){
  int index;
  StringBuffer newStringBuffer=new StringBuffer();
  while ((index=string.indexOf("\\n")) != -1) {
    if (index > 0) {
      newStringBuffer.append(string.substring(0,index));
    }
    newStringBuffer.append('\n');
    if ((index + 2) < string.length()) {
      string=string.substring(index + 2);
    }
 else {
      string="";
    }
  }
  newStringBuffer.append(string);
  string=newStringBuffer.toString();
  newStringBuffer=new StringBuffer();
  while ((index=string.indexOf("\\r")) != -1) {
    if (index > 0) {
      newStringBuffer.append(string.substring(0,index));
    }
    newStringBuffer.append('\r');
    if ((index + 2) < string.length()) {
      string=string.substring(index + 2);
    }
 else {
      string="";
    }
  }
  newStringBuffer.append(string);
  return newStringBuffer.toString();
}

public void pathValuesToPixel(List<Path> paths){
  for (int i=0; i < paths.size(); i++) {
    pathValueToPixel(paths.get(i));
  }
}

@Override public void onInsertComplete(int taskId,Object cookie,long insertRowId){
  if (taskId == AppConstants.QueryTokens.INSERT_WALLPOST && insertRowId != -1) {
    Logger.i(TAG,"Successfully inserted at row no. " + insertRowId);
  }
}

protected void parseList(ArrayList<String> list,String text){
  list.clear();
  StringTokenizer st=new StringTokenizer(text,"\n\r");
  while (st.hasMoreElements()) {
    String line=(String)st.nextElement();
    list.add(line.trim());
  }
}

protected List<Node> splitAssignments(Node node){
  if (node instanceof AssignmentNode) {
    List<Node> result=new ArrayList<>();
    AssignmentNode a=(AssignmentNode)node;
    result.add(a.getTarget());
    result.addAll(splitAssignments(a.getExpression()));
    return result;
  }
 else {
    return Collections.singletonList(node);
  }
}

public Tree<String> extractBestMaxRuleParse(int start,int end,List<String> sentence){
  return extractBestMaxRuleParse1(start,end,0,sentence);
}

public static double normalize(double val,double min,double max){
  if (max < min)   throw new IllegalArgumentException("Max must be greather than min");
  return (val - min) / (max - min);
}

private static boolean containsOnlyTransientAndStaticFields(List<Field> fields){
  boolean containsNormalField=false;
  for (  Field field : fields) {
    if (!Modifier.isTransient(field.getModifiers()) && !Modifier.isStatic(field.getModifiers())) {
      containsNormalField=true;
    }
  }
  return !containsNormalField;
}

@Override public void appendIndexMapTo(Appendable out,String name,List<SourceMapSection> sections) throws IOException {
  out.append("{\n");
  appendFirstField(out,"version","3");
  appendField(out,"file",escapeString(name));
  appendFieldStart(out,"sections");
  out.append("[\n");
  boolean first=true;
  for (  SourceMapSection section : sections) {
    if (first) {
      first=false;
    }
 else {
      out.append(",\n");
    }
    out.append("{\n");
    appendFirstField(out,"offset",offsetValue(section.getLine(),section.getColumn()));
    if (section.getSectionType() == SourceMapSection.SectionType.URL) {
      appendField(out,"url",escapeString(section.getSectionValue()));
    }
 else     if (section.getSectionType() == SourceMapSection.SectionType.MAP) {
      appendField(out,"map",section.getSectionValue());
    }
 else {
      throw new IOException("Unexpected section type");
    }
    out.append("\n}");
  }
  out.append("\n]");
  appendFieldEnd(out);
  out.append("\n}\n");
}

public Builder addPart(Part part){
  if (part == null)   throw new NullPointerException("part == null");
  parts.add(part);
  return this;
}

protected void notifyGone(L locator){
synchronized (this) {
    if (!staleLocators.add(locator.getPartitionId())) {
      fail("Locator already in stale locators collection? " + locator);
    }
  }
}

@Override public void addVetoableChangeListener(String name,VetoableChangeListener vcl){
  m_bcSupport.addVetoableChangeListener(name,vcl);
}

public String buildUser(){
  return properties.getProperty("build.user");
}

private void updateIdleExpireTime(long now){
  _threadIdleExpireTime.set(now + _idleTimeout);
}

protected CtClass createCtClass(String classname,boolean useCache){
  if (classname.charAt(0) == '[')   classname=Descriptor.toClassName(classname);
  if (classname.endsWith("[]")) {
    String base=classname.substring(0,classname.indexOf('['));
    if ((!useCache || getCached(base) == null) && find(base) == null)     return null;
 else     return new CtArray(classname,this);
  }
 else   if (find(classname) == null)   return null;
 else   return new CtClassType(classname,this);
}

@Transactional public long createVoucherFromBill(final int billId) throws ApplicationRuntimeException {
  try {
    String voucherStatus=null;
    final List vStatusList=appConfigValuesService.getConfigValuesByModuleAndKey("EGF","DEFAULTVOUCHERCREATIONSTATUS");
    if (!vStatusList.isEmpty() && vStatusList.size() == 1) {
      final AppConfigValues appVal=(AppConfigValues)vStatusList.get(0);
      voucherStatus=appVal.getValue();
    }
 else     throw new ApplicationRuntimeException("DEFAULTVOUCHERCREATIONSTATUS" + MISSINGMSG);
    final long vh=createVoucher.createVoucherFromBill(billId,voucherStatus,null,null);
    return vh;
  }
 catch (  final Exception e) {
    LOGGER.error(e.getMessage());
    throw new ApplicationRuntimeException(e.getMessage());
  }
}

public static float compareEquivalance(Bitmap bitmap1,Bitmap bitmap2){
  if (bitmap1 == null || bitmap2 == null || bitmap1.getWidth() != bitmap2.getWidth() || bitmap1.getHeight() != bitmap2.getHeight()) {
    return 0f;
  }
  ByteBuffer buffer1=ByteBuffer.allocate(bitmap1.getHeight() * bitmap1.getRowBytes());
  bitmap1.copyPixelsToBuffer(buffer1);
  ByteBuffer buffer2=ByteBuffer.allocate(bitmap2.getHeight() * bitmap2.getRowBytes());
  bitmap2.copyPixelsToBuffer(buffer2);
  byte[] array1=buffer1.array();
  byte[] array2=buffer2.array();
  int len=array1.length;
  int count=0;
  for (int i=0; i < len; i++) {
    if (array1[i] == array2[i]) {
      count++;
    }
  }
  return ((float)(count)) / len;
}

public void handleTblCharsetAliasHrefActionRequest(RequestInvocationEvent event) throws ModelControlException {
  try {
    Map values=getValues();
    onBeforeSaveProfile(values);
    setPageSessionAttribute(PROPERTY_ATTRIBUTE,(HashMap)values);
    G11NCharsetAliasEditViewBean vb=(G11NCharsetAliasEditViewBean)getViewBean(G11NCharsetAliasEditViewBean.class);
    unlockPageTrail();
    passPgSessionMap(vb);
    vb.populateValues((String)getDisplayFieldValue("tblCharsetAliasHrefAction"));
    vb.forwardTo(getRequestContext());
  }
 catch (  AMConsoleException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",e.getMessage());
  }
}

public BooleanGlassGeneIm(BooleanGlassGenePm genePm,Parameters parameters){
  try {
    this.genePm=genePm;
    this.glassFunction=new BooleanGlassFunction(genePm.getLagGraph());
    this.initializer=new BasalInitializer(glassFunction,0,1);
    this.history=new GeneHistory(initializer,glassFunction);
    this.simulator=new MeasurementSimulatorParams(parameters);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}

protected List<ITEM_TYPE> selectFoldTrainItems(List<ITEM_TYPE> items,int nFolds,int fold){
  List<ITEM_TYPE> trainItems=new ArrayList<ITEM_TYPE>();
  for (int i=0; i < items.size(); ++i) {
    if (i % nFolds != fold) {
      trainItems.add(items.get(i));
    }
  }
  return trainItems;
}

private boolean journalRebuildRequired(){
  final int redundantOpCompactThreshold=2000;
  return redundantOpCount >= redundantOpCompactThreshold && redundantOpCount >= lruEntries.size();
}

protected void rehash(int newCapacity){
  int oldCapacity=_set.length;
  K oldKeys[]=(K[])_set;
  short oldVals[]=_values;
  _set=new Object[newCapacity];
  Arrays.fill(_set,FREE);
  _values=new short[newCapacity];
  for (int i=oldCapacity; i-- > 0; ) {
    if (oldKeys[i] != FREE && oldKeys[i] != REMOVED) {
      K o=oldKeys[i];
      int index=insertionIndex(o);
      if (index < 0) {
        throwObjectContractViolation(_set[(-index - 1)],o);
      }
      _set[index]=o;
      _values[index]=oldVals[i];
    }
  }
}

protected void addAttributes(Element element,Attributes attributes){
  boolean noNamespaceAttributes=false;
  if (element instanceof AbstractElement) {
    AbstractElement baseElement=(AbstractElement)element;
    baseElement.setAttributes(attributes,namespaceStack,noNamespaceAttributes);
  }
 else {
    int size=attributes.getLength();
    for (int i=0; i < size; i++) {
      String attributeQName=attributes.getQName(i);
      if (noNamespaceAttributes || !attributeQName.startsWith("xmlns")) {
        String attributeURI=attributes.getURI(i);
        String attributeLocalName=attributes.getLocalName(i);
        String attributeValue=attributes.getValue(i);
        QName qName=namespaceStack.getAttributeQName(attributeURI,attributeLocalName,attributeQName);
        element.addAttribute(qName,attributeValue);
      }
    }
  }
}

public static <T>boolean remove(Collection<T> collection,T element){
  if (element == null) {
    return false;
  }
  if (CollectionUtils.isEmpty(collection)) {
    return false;
  }
  return collection.remove(element);
}

private static void persistUpdatedVpoolList(List<VirtualPool> updatedVpoolList,DbClient dbClient){
  if (!updatedVpoolList.isEmpty()) {
    dbClient.updateAndReindexObject(updatedVpoolList);
  }
}

void composeTemplates(ElemTemplateElement templ) throws TransformerException {
  templ.compose(this);
  for (ElemTemplateElement child=templ.getFirstChildElem(); child != null; child=child.getNextSiblingElem()) {
    composeTemplates(child);
  }
  templ.endCompose(this);
}

public static boolean classExists(String className){
  try {
    return Class.forName(className) != null;
  }
 catch (  ClassNotFoundException e) {
    return false;
  }
}

public static void createTopLevelClassesXML(String outputDir,String templatesPath,boolean lenient) throws CompilerException {
  try {
    AsDocHelper asDocHelp=new AsDocHelper(outputDir + "toplevel.xml",outputDir + "tempdita",outputDir,outputDir + "tempdita" + File.separator+ "ASDoc_Config.xml");
    asDocHelp.createTopLevelClasses(lenient);
  }
 catch (  Throwable t) {
    t.printStackTrace();
    CompilerMessage c=new CouldNotCreate("toplevel.xml",t.getMessage());
    ThreadLocalToolkit.log(c);
    throw c;
  }
}

void drawShape(Graphics g,CSS.Value type,int ax,int ay,int aw,int ah,float align){
  int gap=isLeftToRight ? -(bulletgap + 8) : (aw + bulletgap);
  int x=ax + gap;
  int y=Math.max(ay,ay + (int)(align * ah) - 8);
  if (type == CSS.Value.SQUARE) {
    g.drawRect(x,y,8,8);
  }
 else   if (type == CSS.Value.CIRCLE) {
    g.drawOval(x,y,8,8);
  }
 else {
    g.fillOval(x,y,8,8);
  }
}

public static void restore(final Context context){
  SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(context);
  if (LongTermOrbits.isSupported() && prefs.getBoolean(KEY_LOCATION_TOGGLE,false)) {
    saveDownloadDataWifiOnlyPref(context);
    AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    Intent intent=new Intent(context,LtoService.class);
    PendingIntent pi=PendingIntent.getService(context,0,intent,PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_ONE_SHOT);
    long nextLtoDownload=System.currentTimeMillis() + (1000 * 60 * 2L);
    am.set(AlarmManager.RTC,nextLtoDownload,pi);
  }
}

private void generateFile(int wordCnt) throws Exception {
  Random rnd=new Random(System.currentTimeMillis());
  try (OutputStreamWriter writer=new OutputStreamWriter(igfs.create(FILE,true))){
    int cnt=0;
    while (cnt < wordCnt) {
      String word=DICTIONARY[rnd.nextInt(DICTIONARY.length)];
      writer.write(word + " ");
      cnt++;
    }
  }
 }

public void polygon(double[] x,double[] y){
  int n=x.length;
  GeneralPath path=new GeneralPath();
  path.moveTo((float)scaleX(x[0]),(float)scaleY(y[0]));
  for (int i=0; i < n; i++)   path.lineTo((float)scaleX(x[i]),(float)scaleY(y[i]));
  path.closePath();
  offscreen.draw(path);
  draw();
}

public void forceRewriteExif(String filename,Collection<ExifTag> tags) throws FileNotFoundException, IOException {
  if (!rewriteExif(filename,tags)) {
    ExifData tempData=mData;
    mData=new ExifData(DEFAULT_BYTE_ORDER);
    FileInputStream is=null;
    ByteArrayOutputStream bytes=null;
    try {
      is=new FileInputStream(filename);
      bytes=new ByteArrayOutputStream();
      doExifStreamIO(is,bytes);
      byte[] imageBytes=bytes.toByteArray();
      readExif(imageBytes);
      setTags(tags);
      writeExif(imageBytes,filename);
    }
 catch (    IOException e) {
      closeSilently(is);
      throw e;
    }
 finally {
      is.close();
      mData=tempData;
    }
  }
}

public void append(int key,E value){
  if (mSize != 0 && key <= mKeys[mSize - 1]) {
    put(key,value);
    return;
  }
  if (mGarbage && mSize >= mKeys.length) {
    gc();
  }
  int pos=mSize;
  if (pos >= mKeys.length) {
    int n=ContainerHelpers.idealIntArraySize(pos + 1);
    int[] nkeys=new int[n];
    Object[] nvalues=new Object[n];
    System.arraycopy(mKeys,0,nkeys,0,mKeys.length);
    System.arraycopy(mValues,0,nvalues,0,mValues.length);
    mKeys=nkeys;
    mValues=nvalues;
  }
  mKeys[pos]=key;
  mValues[pos]=value;
  mSize=pos + 1;
}

public void testNegateNegative(){
  String a="-92948782094488478231212478987482988429808779810457634781384756794987";
  int aScale=41;
  String c="92948782094488478231212478987482988429808779810457634781384756794987";
  int cScale=41;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal cNumber=new BigDecimal(new BigInteger(c),cScale);
  assertEquals("incorrect value",cNumber,aNumber.negate());
}

public List<SearchResult> searchByObjectName(String name){
  List<SearchResult> all=new ArrayList<>();
  for (  Layer layer : layers) {
    if (isLayerVisible(layer)) {
      all.addAll(layer.searchByObjectName(name));
    }
  }
  Log.d(TAG,"Got " + all.size() + " results in total for "+ name);
  return all;
}

private void clearMessages(){
  messages.clear();
}

public Searcher() throws IOException {
  searcher=new IndexSearcher(DirectoryReader.open(FSDirectory.open(Paths.get(INDEX_DIR))));
  parser=new QueryParser(CONTENT_FIELD,new StandardAnalyzer());
}

public void clearTextEdits(){
  fEdits.clear();
}

public static void main(String[] args){
  Frame frame=new PacketTool();
  frame.pack();
  frame.setLocationRelativeTo(null);
  frame.setVisible(true);
}

private void createToolBar(){
  toolBar=new JToolBar("TDA Toolbar");
  if (listener.runningAsJConsolePlugin || listener.runningAsVisualVMPlugin) {
    toolBar.add(createToolBarButton("Request a Thread Dump","FileOpen.png"));
    toolBar.setFloatable(false);
  }
 else {
    toolBar.add(createToolBarButton("Open Logfile","FileOpen.png"));
    closeToolBarButton=createToolBarButton("Close selected Logfile","CloseFile.png");
    closeToolBarButton.setEnabled(false);
    toolBar.add(closeToolBarButton);
  }
  toolBar.addSeparator();
  toolBar.add(createToolBarButton("Preferences","Preferences.png"));
  toolBar.addSeparator();
  expandButton=createToolBarButton("Expand all nodes","Expanded.png");
  expandButton.setEnabled(false);
  toolBar.add(expandButton);
  collapseButton=createToolBarButton("Collapse all nodes","Collapsed.png");
  collapseButton.setEnabled(false);
  toolBar.add(collapseButton);
  toolBar.addSeparator();
  findLRThreadsButton=createToolBarButton("Find long running threads","FindLRThreads.png");
  findLRThreadsButton.setEnabled(false);
  toolBar.add(findLRThreadsButton);
  toolBar.add(createToolBarButton("Filters","Filters.png"));
  toolBar.add(createToolBarButton("Custom Categories","CustomCat.png"));
  toolBar.addSeparator();
}

public static Map attrSetToMap(AttrSet attrSet,boolean fetchByteValues){
  Map attributesMap=new AMHashMap(fetchByteValues);
  if (attrSet == null) {
    return attributesMap;
  }
  int attrSetSize=attrSet.size();
  if (!fetchByteValues) {
    for (int i=0; i < attrSetSize; i++) {
      Attr attr=attrSet.elementAt(i);
      String values[]=attr.getStringValues();
      attributesMap.put(attr.getName(),stringArrayToSet(values));
    }
  }
 else {
    for (int i=0; i < attrSetSize; i++) {
      Attr attr=attrSet.elementAt(i);
      attributesMap.put(attr.getName(),attr.getByteValues());
    }
  }
  return attributesMap;
}

public final Iterator<String> schemesIterator(){
  return mDataSchemes != null ? mDataSchemes.iterator() : null;
}

@Override public void close() throws IOException {
  try {
    out.close();
  }
  finally {
    lockFile.delete();
  }
}

public static void reinitRecompiler(){
  _rewriter.set(new ProgramRewriter(false,true));
}

default Value remove(Optional<? extends CharSequence> name){
  return name.isPresent() ? remove(name.get()) : null;
}

private String nextToInternal(String excluded){
  int start=pos;
  for (; pos < in.length(); pos++) {
    char c=in.charAt(pos);
    if (c == '\r' || c == '\n' || excluded.indexOf(c) != -1) {
      return in.substring(start,pos);
    }
  }
  return in.substring(start);
}

AcceptTcp(PortTcp port,ServerSocketBar serverSocket){
  Objects.requireNonNull(port);
  Objects.requireNonNull(serverSocket);
  _port=port;
  _serverSocket=serverSocket;
}

private static void updateGrabbedCursor(Cursor cur){
  XBaseWindow target=XAwtState.getGrabWindow();
  if (target instanceof XWindowPeer) {
    XWindowPeer grabber=(XWindowPeer)target;
    grabber.pSetCursor(cur);
  }
}

protected void parseURI(String uriString) throws URISyntaxException {
  String s=uriString;
  int index=s.indexOf(FRAGMENT_SEPARATOR);
  if (index != -1) {
    setFragment(s.substring(index + 1),false);
    s=s.substring(0,index);
  }
  index=s.indexOf(SCHEME_SEPARATOR);
  if (index != -1) {
    String scheme=s.substring(0,index);
    if (isValidScheme(scheme)) {
      setScheme(scheme);
      s=s.substring(index + 1);
    }
  }
  parseSchemeSpecificPart(s,false);
}

@Override public boolean equals(Object obj){
  if ((obj instanceof KeepAliveKey) == false)   return false;
  KeepAliveKey kae=(KeepAliveKey)obj;
  return host.equals(kae.host) && (port == kae.port) && protocol.equals(kae.protocol)&& this.obj == kae.obj;
}

protected static void appendLongStringType(StringBuilder sb){
  sb.append("TEXT");
}

public void testConnectHeadset(){
  int iterations=BluetoothTestRunner.sConnectHeadsetIterations;
  if (iterations == 0) {
    return;
  }
  BluetoothAdapter adapter=BluetoothAdapter.getDefaultAdapter();
  BluetoothDevice device=adapter.getRemoteDevice(BluetoothTestRunner.sDeviceAddress);
  mTestUtils.disable(adapter);
  mTestUtils.enable(adapter);
  mTestUtils.unpair(adapter,device);
  mTestUtils.pair(adapter,device,BluetoothTestRunner.sDevicePairPasskey,BluetoothTestRunner.sDevicePairPin);
  mTestUtils.disconnectProfile(adapter,device,BluetoothProfile.HEADSET,null);
  for (int i=0; i < iterations; i++) {
    mTestUtils.writeOutput("connectHeadset iteration " + (i + 1) + " of "+ iterations);
    mTestUtils.connectProfile(adapter,device,BluetoothProfile.HEADSET,String.format("connectHeadset(device=%s)",device));
    mTestUtils.disconnectProfile(adapter,device,BluetoothProfile.HEADSET,String.format("disconnectHeadset(device=%s)",device));
  }
  mTestUtils.unpair(adapter,device);
  mTestUtils.disable(adapter);
}

public static boolean isNA(String[] NAstrings,String w){
  if (NAstrings == null)   return false;
  for (  String na : NAstrings) {
    if (w.equals(na))     return true;
  }
  return false;
}

private double[] evaluateProbability(double[] data){
  double[] prob=new double[m_NumClasses], v=new double[m_NumClasses];
  for (int j=0; j < m_NumClasses - 1; j++) {
    for (int k=0; k <= m_NumPredictors; k++) {
      v[j]+=m_Par[k][j] * data[k];
    }
  }
  v[m_NumClasses - 1]=0;
  for (int m=0; m < m_NumClasses; m++) {
    double sum=0;
    for (int n=0; n < m_NumClasses - 1; n++) {
      sum+=Math.exp(v[n] - v[m]);
    }
    prob[m]=1 / (sum + Math.exp(-v[m]));
  }
  return prob;
}

public static final HashMap readMapXml(InputStream in) throws XmlPullParserException, IOException {
  XmlPullParser parser=Xml.newPullParser();
  parser.setInput(in,null);
  return (HashMap)readValueXml(parser,new String[1]);
}

protected void modifyOMGraphicForEditRender(){
}

int nextNode(String sStr,int i){
  int nBraces=0;
  char c=sStr.charAt(i);
  do {
    i++;
    if (i < sStr.length()) {
      c=sStr.charAt(i);
      if (c == '[') {
        while (i < sStr.length() && sStr.charAt(i) != ']') {
          i++;
        }
        i++;
        if (i < sStr.length()) {
          c=sStr.charAt(i);
        }
      }
switch (c) {
case '(':
        nBraces++;
      break;
case ')':
    nBraces--;
  break;
default :
break;
}
}
}
 while (i < sStr.length() && (nBraces > 0 || (c != ',' && c != ')' && c != '(')));
if (i >= sStr.length() || nBraces < 0) {
return -1;
}
 else if (sStr.charAt(i) == ')') {
i++;
if (sStr.charAt(i) == '[') {
while (i < sStr.length() && sStr.charAt(i) != ']') {
i++;
}
i++;
if (i >= sStr.length()) {
return -1;
}
}
if (sStr.charAt(i) == ':') {
i++;
c=sStr.charAt(i);
while (i < sStr.length() && (c == '.' || Character.isDigit(c))) {
i++;
if (i < sStr.length()) {
c=sStr.charAt(i);
}
}
}
}
return i;
}

public boolean selectNode(D nodeData,SignalEvent event){
  if (selectedNodes.isEmpty()) {
    insertAndSelectNode(nodeData,0,true);
    return true;
  }
  if (!hasSameParent(selectedNodes.get(0),nodeData)) {
    if (!this.multilevelSelection || event.getShiftKey()) {
      return selectSingleNode(nodeData);
    }
  }
  if (event == null || event.getCommandKey()) {
    ctrlSelect(nodeData);
    return true;
  }
 else {
    if (event.getShiftKey()) {
      return shiftSelect(nodeData);
    }
  }
  return selectSingleNode(nodeData);
}

@Override public int[] sequenceLengths(final long start,final long end) throws IOException {
  final int entrySize=mIndex.getVersion() >= IndexFile.PER_SEQUENCE_CHECKSUM_VERSION ? (mIndex.hasQuality() ? 6 : 5) : 4;
  final long internalStart=start + mStart;
  final long internalEnd=end + mStart;
  final int[] ret=new int[(int)(internalEnd - internalStart)];
  if (ret.length == 0) {
    return ret;
  }
  if (mIndex.getMaxLength() == mIndex.getMinLength()) {
    Arrays.fill(ret,(int)mIndex.getMaxLength());
    return ret;
  }
  final byte[] buffer=new byte[entrySize * 1024];
  final DataFileIndex dataIndex=mSequenceManager.sequenceIndex();
  final long[] numSequences=new long[dataIndex.numberEntries()];
  int startFileNo=-1;
  int endFileNo=-1;
  for (int i=0; i < numSequences.length; i++) {
    if (i > 0) {
      numSequences[i]=numSequences[i - 1] + dataIndex.numberSequences(i);
    }
 else {
      numSequences[0]=dataIndex.numberSequences(0);
    }
    if (internalStart < numSequences[i]) {
      if (startFileNo == -1) {
        startFileNo=i;
      }
      if (internalEnd < numSequences[i]) {
        endFileNo=i;
        break;
      }
    }
  }
  final long startLower=startFileNo == 0 ? 0 : numSequences[startFileNo - 1];
  final long endLower=endFileNo < 1 ? 0 : numSequences[endFileNo - 1];
  int seqNo=0;
  for (int i=startFileNo; (endFileNo == -1 || i <= endFileNo) && i < numSequences.length; i++) {
    try (RandomAccessFile raf=new RandomAccessFile(SdfFileUtils.sequencePointerFile(mDirectory,i),"r")){
      final long pos;
      if (i == startFileNo) {
        pos=(internalStart - startLower) * entrySize;
        raf.seek(pos);
      }
 else {
        pos=0;
      }
      final long endPos=endFileNo == i ? (internalEnd - endLower) * entrySize : raf.length();
      seqNo=sequenceLengthsHelper(raf,buffer,ret,seqNo,pos,endPos,entrySize);
      if (endFileNo != i && seqNo > 0) {
        final long fileLength=dataIndex.dataSize(i);
        ret[seqNo - 1]=ret[seqNo - 1] - (int)fileLength;
      }
 else {
        if (seqNo != ret.length) {
          throw new CorruptSdfException("Should have read " + ret.length + " sequence pointers, got "+ seqNo);
        }
        raf.read();
        ret[seqNo - 1]-=raf.readInt();
      }
    }
   }
  ret[ret.length - 1]=0 - ret[ret.length - 1];
  return ret;
}

public Observable<DriveId> createFile(DriveFolder folder,File file,String title){
  return createFile(folder,file,title,MimeTypeMap.getFileExtensionFromUrl(file.getPath()));
}

public static String extractCollectionFromPath(String path){
  String extractedCollectionName=null;
  String pathModified=removeFromEndOfString(path,SLASH);
  String[] pathSegments=pathModified.split("/");
  if (pathSegments.length > 0) {
    extractedCollectionName=pathSegments[pathSegments.length - 1];
  }
  return extractedCollectionName;
}

public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(1);
  newVector.addElement(new Option("\tRandom number seed.\n" + "\t(default 1)","S",1,"-S <num>"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

public boolean isPrivate(){
  return Modifier.isPrivate(_field.getModifiers());
}

public static final long longEncode(final String hash){
  int level=hash.length() - 1;
  long b;
  long l=0L;
  for (  char c : hash.toCharArray()) {
    b=(long)(BASE_32_STRING.indexOf(c));
    l|=(b << (level-- * 5));
  }
  return (l << 4) | hash.length();
}

@Override public void onSuccess(T result){
  try {
    LOGGER.debug("Putting {} into queue",result);
    queue.put(result);
  }
 catch (  InterruptedException e) {
    LOGGER.warn("Exception occurred while putting the converted result in queue",e);
  }
}

public void handleTblProviderResourceIdMapperButtonAddRequest(RequestInvocationEvent event) throws ModelControlException {
  try {
    Map values=getValues();
    onBeforeSaveProfile(values);
    setPageSessionAttribute(PROPERTY_ATTRIBUTE,(HashMap)values);
    SMDiscoveryProviderResourceIdMapperAddViewBean vb=(SMDiscoveryProviderResourceIdMapperAddViewBean)getViewBean(SMDiscoveryProviderResourceIdMapperAddViewBean.class);
    removePageSessionAttribute(SMDiscoveryProviderResourceIdMapperAddViewBean.PROPERTY_ATTRIBUTE);
    unlockPageTrail();
    passPgSessionMap(vb);
    vb.forwardTo(getRequestContext());
  }
 catch (  AMConsoleException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",e.getMessage());
  }
}

public COpenOriginalFunction(final CGraphWindow parent,final IViewContainer container,final INaviFunction function){
  super(String.format("Open original function '%s'",function.getName()));
  m_parent=parent;
  m_container=container;
  m_function=function;
}

public int read(char[] buffer,int offset,int length) throws IOException {
  byte[] bytes=new byte[length];
  int count=_file.read(bytes,0,length);
  for (int i=0; i < count; i++) {
    buffer[offset + i]=(char)bytes[i];
  }
  return count;
}

public boolean equals(Object o){
  if (!(o instanceof Vector2f)) {
    return false;
  }
  if (this == o) {
    return true;
  }
  Vector2f comp=(Vector2f)o;
  if (Float.compare(x,comp.x) != 0) {
    return false;
  }
  if (Float.compare(y,comp.y) != 0) {
    return false;
  }
  return true;
}

@Override protected EClass findInstantiableCompatible(EClass eType){
  if (!isInstantiatableSubType(eType,eType)) {
    throw new IllegalStateException(String.valueOf(eType));
  }
  return eType;
}

private int measureWidth(int measureSpec){
  int result=0;
  int specMode=MeasureSpec.getMode(measureSpec);
  int specSize=MeasureSpec.getSize(measureSpec);
  if (specMode == MeasureSpec.EXACTLY) {
    result=specSize;
  }
 else {
    result=IMAGE_WIDTH + MAX_TEXT_WIDTH + TOAST_HEIGHT;
    if (specMode == MeasureSpec.AT_MOST) {
      result=Math.min(result,specSize);
    }
  }
  return result;
}

public void restoreTopology(Iterable<TcpDiscoveryNode> nodes,long topVer){
  assert !F.isEmpty(nodes);
  assert topVer > 0;
  rwLock.writeLock().lock();
  try {
    locNode.internalOrder(topVer);
    clear();
    boolean firstAdd=true;
    for (    TcpDiscoveryNode node : nodes) {
      if (nodesMap.containsKey(node.id()))       continue;
      nodesMap.put(node.id(),node);
      if (firstAdd) {
        this.nodes=new TreeSet<>(this.nodes);
        firstAdd=false;
      }
      node.lastUpdateTime(U.currentTimeMillis());
      this.nodes.add(node);
    }
    nodeOrder=topVer;
    initializeMinimumVersion();
  }
  finally {
    rwLock.writeLock().unlock();
  }
}

final protected void startOp(final IStartOpMessage msg){
  if (!controller)   throw new UnsupportedOperationException(ERR_NOT_CONTROLLER);
  if (msg == null)   throw new IllegalArgumentException();
  if (!queryId.equals(msg.getQueryId()))   throw new IllegalArgumentException();
  lock.lock();
  try {
    if (log.isTraceEnabled())     log.trace(msg.toString());
    if (future.isDone())     throw new RuntimeException("Query is done");
    runState.startOp(msg);
  }
 catch (  TimeoutException ex) {
    halt(ex);
  }
 finally {
    lock.unlock();
  }
}

public Flux<IN> drain(){
  return Flux.empty();
}

int traverseConsistencyCheck(TextEditProcessor processor,Document document,List<List<TextEdit>> sourceEdits){
  int result=0;
  if (fChildren != null) {
    for (int i=fChildren.size() - 1; i >= 0; i--) {
      TextEdit child=(TextEdit)fChildren.get(i);
      result=Math.max(result,child.traverseConsistencyCheck(processor,document,sourceEdits));
    }
  }
  if (processor.considerEdit(this)) {
    performConsistencyCheck(processor,document);
  }
  return result;
}

public Minute(Date time,TimeZone zone){
  this(time,zone,Locale.getDefault());
}

private Plan buildPlan1(){
  Plan plan=PopulationUtils.createPlan();
  Activity a=PopulationUtils.createActivityFromCoord("a",CoordUtils.createCoord(0.0,0.0));
  a.setEndTime(Time.parseTime("16:00:00"));
  plan.addActivity(a);
  plan.addLeg(PopulationUtils.createLeg("truck"));
  double travelTime=Time.parseTime("16:00:00");
  double distance=Math.round((travelTime * ChainChopper.AVERAGE_SPEED) / ChainChopper.CROWFLY_FACTOR);
  Activity b=PopulationUtils.createActivityFromCoord("b",CoordUtils.createCoord(distance,2.0));
  plan.addActivity(b);
  return plan;
}

protected void encodeAtom(OutputStream outStream,byte data[],int offset,int len) throws IOException {
  byte a, b=1, c=1;
  int c1, c2, c3, c4;
  a=data[offset];
  if (len > 1) {
    b=data[offset + 1];
  }
  if (len > 2) {
    c=data[offset + 2];
  }
  c1=(a >>> 2) & 0x3f;
  c2=((a << 4) & 0x30) | ((b >>> 4) & 0xf);
  c3=((b << 2) & 0x3c) | ((c >>> 6) & 0x3);
  c4=c & 0x3f;
  outStream.write(c1 + ' ');
  outStream.write(c2 + ' ');
  outStream.write(c3 + ' ');
  outStream.write(c4 + ' ');
  return;
}

public void test_unwrap_ByteBuffer_ByteBuffer_05(){
  String host="new host";
  int port=8080;
  ByteBuffer bbs=ByteBuffer.allocate(10);
  ByteBuffer bbd=ByteBuffer.allocate(100);
  SSLEngine sse=getEngine(host,port);
  sse.setUseClientMode(true);
  try {
    SSLEngineResult res=sse.unwrap(bbs,bbd);
    assertEquals(0,res.bytesConsumed());
    assertEquals(0,res.bytesProduced());
  }
 catch (  Exception e) {
    fail("Unexpected exception: " + e);
  }
}

private int adjustAlpha(int color,float factor){
  int alpha=Math.round(Color.alpha(color) * factor);
  int red=Color.red(color);
  int green=Color.green(color);
  int blue=Color.blue(color);
  return Color.argb(alpha,red,green,blue);
}

private void initializeRatioSlider(){
  ratioSlider.setMajorTickSpacing(10);
  ratioSlider.setMinorTickSpacing(2);
  ratioSlider.setPaintTicks(true);
  Hashtable<Integer,JLabel> labelTable=new Hashtable<Integer,JLabel>();
  labelTable.put(new Integer(0),new JLabel("0/100"));
  labelTable.put(new Integer(25),new JLabel("25/75"));
  labelTable.put(new Integer(50),new JLabel("50/50"));
  labelTable.put(new Integer(75),new JLabel("75/25"));
  labelTable.put(new Integer(100),new JLabel("100/0"));
  ratioSlider.setLabelTable(labelTable);
  ratioSlider.setPaintLabels(true);
}

private static void initializeSettings(Settings.Builder output,Settings input,boolean loadDefaults){
  output.put(input);
  if (useSystemProperties(input)) {
    if (loadDefaults) {
      for (      String prefix : PROPERTY_DEFAULTS_PREFIXES) {
        output.putProperties(prefix,System.getProperties());
      }
    }
    for (    String prefix : PROPERTY_PREFIXES) {
      output.putProperties(prefix,System.getProperties(),PROPERTY_DEFAULTS_PREFIXES);
    }
  }
  output.replacePropertyPlaceholders();
}

@Override public void drawOval(int x,int y,int width,int height){
  setStateToLocal();
  m_printstream.println(xTransform(xScale(x)) + " " + yTransform(yScale(y))+ " "+ xScale(width)+ " "+ yScale(height)+ " false Oval");
}

public String toString(int indentFactor) throws JSONException {
  return toString(indentFactor,0);
}

private void validateSQLFields(){
  boolean flag=controller.isEnableSQLDatabaseOutput();
  enableSQLDatabaseConnection.setSelected(flag);
  sqlHostLabel.setEnabled(flag);
  sqlHostField.setEnabled(flag);
  sqlDatabaseLabel.setEnabled(flag);
  sqlDatabaseField.setEnabled(flag);
  sqlUserLabel.setEnabled(flag);
  sqlUserField.setEnabled(flag);
  sqlPasswordLabel.setEnabled(flag);
  sqlPasswordField.setEnabled(flag);
  enableZipEncodingCheckBox.setEnabled(flag);
}

public void readFromObject(Object object){
  try {
    Method method=BeanUtils.getReadMethod(object.getClass(),getName());
    if (method != null) {
      Object value=method.invoke(object,null);
      initializeValue(value);
      if (value != null) {
        for (Iterator iter=subProperties.iterator(); iter.hasNext(); ) {
          Property subProperty=(Property)iter.next();
          subProperty.readFromObject(value);
        }
      }
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}

private boolean internalOfferTask(AFrameTask task){
synchronized (mFrameTaskQueue) {
    return mFrameTaskQueue.offer(task);
  }
}

public void startDTD(String name,String publicId,String systemId) throws org.xml.sax.SAXException {
}

public static String toString(ByteBuffer bb){
  byte[] bytes=new byte[bb.getInt()];
  String s="";
  try {
    if (ArrayUtils.isNotEmpty(bytes)) {
      bb.get(bytes);
      s=new String(bytes,UTF8);
    }
  }
 catch (  Exception e) {
    throw new RuntimeException("ByteBuffer not in expected format," + " failed to parse string bytes",e);
  }
  return s;
}

public static boolean validImage(Image image){
  return (image != null && image.getWidth(null) > 0 && image.getHeight(null) > 0);
}

protected void ping(InetAddress address) throws Exception {
  Socket socket=null;
  int ping=1;
  for (; ; ) {
    if (isDebug()) {
      log("Trial #" + ping + "/"+ getMaxPings()+ " - creating socket connected to "+ address+ " on port "+ getPort());
    }
    try {
      socket=new Socket(address,getPort());
      break;
    }
 catch (    ConnectException ce) {
      log("Trial #" + ping + "/"+ getMaxPings()+ " - exception caught: "+ ce.toString()+ " while creating socket connected to "+ address+ " on port "+ getPort());
      ping++;
      if (ping <= getMaxPings()) {
        log("Waiting " + getPingIntervalMilli() + " milliseconds before retrying ...");
        Thread.sleep(getPingIntervalMilli());
      }
 else {
        break;
      }
    }
  }
  if (socket == null) {
    throw new ConnectException("maxPings exceeded: " + getMaxPings() + ". Giving up. The clamd daemon seems not to be running");
  }
  try {
    BufferedReader reader=new BufferedReader(new InputStreamReader(socket.getInputStream(),"ASCII"));
    PrintWriter writer=new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())),true);
    log("Sending: \"PING\" to " + address + " ...");
    writer.println("PING");
    writer.flush();
    boolean pongReceived=false;
    for (; ; ) {
      String answer=reader.readLine();
      if (answer != null) {
        answer=answer.trim();
        log("Received: \"" + answer + "\"");
        answer=answer.trim();
        if (answer.equals("PONG")) {
          pongReceived=true;
        }
      }
 else {
        break;
      }
    }
    reader.close();
    writer.close();
    if (!pongReceived) {
      throw new ConnectException("Bad answer from \"PING\" probe: expecting \"PONG\"");
    }
  }
  finally {
    socket.close();
  }
}

private ImageSize computeSizeToFit(float maxSide){
  if (0 == maxSide) {
    return new ImageSize(0,0);
  }
  ImageSize resized=new ImageSize(this);
  if ((this.mWidth > maxSide) || (this.mHeight > maxSide)) {
    double ratioX=maxSide / this.mWidth;
    double ratioY=maxSide / this.mHeight;
    double scale=Math.min(ratioX,ratioY);
    scale=1.0d / Integer.highestOneBit((int)Math.floor(1.0 / scale));
    resized.mWidth=(int)(Math.floor(resized.mWidth * scale / 2) * 2);
    resized.mHeight=(int)(Math.floor(resized.mHeight * scale / 2) * 2);
  }
  return resized;
}

public static List<BigInteger> embeddedSelectorToPartitions(String selector,String type,DataPartitioner partitioner) throws PIRException {
  List<BigInteger> parts;
  int partitionBits=partitioner.getBits(type);
  if (partitionBits > 32) {
    int hashedSelector=KeyedHash.hash("aux",32,selector,"MD5");
    parts=partitioner.toPartitions(hashedSelector,PrimitiveTypePartitioner.INT);
  }
 else {
    parts=partitioner.toPartitions(selector,type);
  }
  return parts;
}

public static double stddevp(double[] a,int lo,int hi){
  return Math.sqrt(varp(a,lo,hi));
}

public void maybeLookAheadScripts(){
}

public Java2TypeScriptTranslator(TranspilationHandler logHandler,JSweetContext context,JCCompilationUnit compilationUnit,boolean preserveSourceLineNumbers){
  super(logHandler,context,compilationUnit,new Java2TypeScriptAdapter(context),preserveSourceLineNumbers);
}

@Override protected void onMeasure(int widthMeasureSpec,int heightMeasureSpec){
  int count=getChildCount();
  mLeftWidth=0;
  mRightWidth=0;
  int maxHeight=0;
  int maxWidth=0;
  int childState=0;
  for (int i=0; i < count; i++) {
    final View child=getChildAt(i);
    if (child.getVisibility() != GONE) {
      measureChildWithMargins(child,widthMeasureSpec,0,heightMeasureSpec,0);
      final LayoutParams lp=(LayoutParams)child.getLayoutParams();
      if (lp.position == LayoutParams.POSITION_LEFT) {
        mLeftWidth+=Math.max(maxWidth,child.getMeasuredWidth() + lp.leftMargin + lp.rightMargin);
      }
 else       if (lp.position == LayoutParams.POSITION_RIGHT) {
        mRightWidth+=Math.max(maxWidth,child.getMeasuredWidth() + lp.leftMargin + lp.rightMargin);
      }
 else {
        maxWidth=Math.max(maxWidth,child.getMeasuredWidth() + lp.leftMargin + lp.rightMargin);
      }
      maxHeight=Math.max(maxHeight,child.getMeasuredHeight() + lp.topMargin + lp.bottomMargin);
      childState=combineMeasuredStates(childState,child.getMeasuredState());
    }
  }
  maxWidth+=mLeftWidth + mRightWidth;
  maxHeight=Math.max(maxHeight,getSuggestedMinimumHeight());
  maxWidth=Math.max(maxWidth,getSuggestedMinimumWidth());
  setMeasuredDimension(resolveSizeAndState(maxWidth,widthMeasureSpec,childState),resolveSizeAndState(maxHeight,heightMeasureSpec,childState << MEASURED_HEIGHT_STATE_SHIFT));
}

protected int exec(String command,StringList args){
  try {
    print(command);
    StringList cmd=new StringList();
    cmd=cmd.plus(command);
    if (args != null) {
      for (      String a : args) {
        print(" " + a);
      }
      cmd.addAll(args);
    }
    println("");
    ProcessBuilder pb=new ProcessBuilder();
    pb.command(cmd.array());
    pb.redirectErrorStream(true);
    Process p=pb.start();
    copyInThread(p.getInputStream(),quiet ? null : sysOut);
    p.waitFor();
    return p.exitValue();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}

@Ignore @Test public void testGatewaySenderEventListenerInvocationWithoutLocator(){
  int mPort=AvailablePortHelper.getRandomAvailablePortForDUnitSite();
  vm4.invoke(null);
  vm5.invoke(null);
  vm6.invoke(null);
  vm7.invoke(null);
  vm4.invoke(null);
  vm5.invoke(null);
  startSenderInVMs("ln",vm4,vm5);
  vm4.invoke(null);
  vm5.invoke(null);
  vm6.invoke(null);
  vm7.invoke(null);
  final Map keyValues=new HashMap();
  for (int i=0; i < 1000; i++) {
    keyValues.put(i,i);
  }
  vm4.invoke(null);
  vm4.invoke(null);
  vm5.invoke(null);
  vm4.invoke(null);
  vm5.invoke(null);
  fail("tried to invoke missing method");
}

protected ApplicationUser buildUser(Map<String,String> headerMap,boolean includeRoles){
  LOGGER.debug("Creating Application User From Headers");
  Map<String,String> headerNames=getHeaderNames();
  ApplicationUser applicationUser=createNewApplicationUser();
  buildUserId(applicationUser,headerMap,headerNames.get(HTTP_HEADER_USER_ID));
  buildFirstName(applicationUser,headerMap,headerNames.get(HTTP_HEADER_FIRST_NAME));
  buildLastName(applicationUser,headerMap,headerNames.get(HTTP_HEADER_LAST_NAME));
  buildEmail(applicationUser,headerMap,headerNames.get(HTTP_HEADER_EMAIL));
  buildSessionId(applicationUser,headerMap,HTTP_HEADER_SESSION_ID);
  buildSessionInitTime(applicationUser,headerMap,headerNames.get(HTTP_HEADER_SESSION_INIT_TIME));
  userNamespaceAuthorizationHelper.buildNamespaceAuthorizations(applicationUser);
  if (includeRoles) {
    buildRoles(applicationUser,headerMap,headerNames.get(HTTP_HEADER_ROLES));
  }
  LOGGER.debug("Application user created successfully: " + applicationUser);
  return applicationUser;
}

@Interruptible public static void harnessEnd(){
  Stats.stopAll();
  insideHarness=false;
}

private Cluster<SubspaceModel> runFastDOC(Database database,Relation<V> relation,ArrayModifiableDBIDs S,int d,int n,int m,int r){
  long[] D=null;
  DBIDVar dV=DBIDUtil.newVar();
  FiniteProgress iprogress=LOG.isVerbose() ? new FiniteProgress("Iteration progress for current cluster",m * n,LOG) : null;
  Random random=rnd.getSingleThreadedRandom();
  DBIDArrayIter iter=S.iter();
  outer:   for (int i=0; i < n; ++i) {
    iter.seek(random.nextInt(S.size()));
    for (int j=0; j < m; ++j) {
      DBIDs randomSet=DBIDUtil.randomSample(S,r,random);
      long[] nD=BitsUtil.zero(d);
      for (int k=0; k < d; ++k) {
        if (dimensionIsRelevant(k,relation,randomSet)) {
          BitsUtil.setI(nD,k);
        }
      }
      if (D == null || BitsUtil.cardinality(nD) > BitsUtil.cardinality(D)) {
        D=nD;
        dV.set(iter);
        if (BitsUtil.cardinality(D) >= d_zero) {
          if (iprogress != null) {
            iprogress.setProcessed(iprogress.getTotal(),LOG);
          }
          break outer;
        }
      }
      LOG.incrementProcessed(iprogress);
    }
  }
  LOG.ensureCompleted(iprogress);
  if (D == null || BitsUtil.cardinality(D) == 0) {
    return null;
  }
  SubspaceMaximumDistanceFunction df=new SubspaceMaximumDistanceFunction(D);
  DistanceQuery<V> dq=database.getDistanceQuery(relation,df);
  RangeQuery<V> rq=database.getRangeQuery(dq,DatabaseQuery.HINT_SINGLE);
  DBIDs C=DBIDUtil.intersection(S,rq.getRangeForDBID(dV,w));
  return (C.size() > 0) ? makeCluster(relation,C,D) : null;
}

public RaceGUI(String appName){
  UIManager.put("swing.boldMetal",Boolean.FALSE);
  JFrame f=new JFrame(appName);
  f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  f.setLayout(new BorderLayout());
  track=new TrackView();
  f.add(track,BorderLayout.CENTER);
  controlPanel=new RaceControlPanel();
  f.add(controlPanel,BorderLayout.SOUTH);
  f.pack();
  f.setVisible(true);
}

public static Iterable<String> toHexStrings(Iterable<ByteArray> arrays){
  ArrayList<String> ret=new ArrayList<String>();
  for (  ByteArray array : arrays)   ret.add(HexString.toHexString(array.get()));
  return ret;
}

public static List<GeoTimeSerie> partitionAndApply(Object function,WarpScriptStack stack,Macro validator,Collection<String> bylabels,List<GeoTimeSerie>... series) throws WarpScriptException {
  Map<Map<String,String>,List<GeoTimeSerie>> unflattened=partitionAndApplyUnflattened(function,stack,validator,bylabels,series);
  List<GeoTimeSerie> results=new ArrayList<GeoTimeSerie>();
  for (  List<GeoTimeSerie> l : unflattened.values()) {
    results.addAll(l);
  }
  return results;
}

final WorkQueue registerWorker(ForkJoinWorkerThread wt){
  Thread.UncaughtExceptionHandler handler;
  WorkQueue[] ws;
  int s, ps;
  wt.setDaemon(true);
  if ((handler=ueh) != null)   wt.setUncaughtExceptionHandler(handler);
  do {
  }
 while (!U.compareAndSwapInt(this,INDEXSEED,s=indexSeed,s+=SEED_INCREMENT) || s == 0);
  WorkQueue w=new WorkQueue(this,wt,config >>> 16,s);
  if (((ps=plock) & PL_LOCK) != 0 || !U.compareAndSwapInt(this,PLOCK,ps,ps+=PL_LOCK))   ps=acquirePlock();
  int nps=(ps & SHUTDOWN) | ((ps + PL_LOCK) & ~SHUTDOWN);
  try {
    if ((ws=workQueues) != null) {
      int n=ws.length, m=n - 1;
      int r=(s << 1) | 1;
      if (ws[r&=m] != null) {
        int probes=0;
        int step=(n <= 4) ? 2 : ((n >>> 1) & EVENMASK) + 2;
        while (ws[r=(r + step) & m] != null) {
          if (++probes >= n) {
            workQueues=ws=Arrays.copyOf(ws,n<<=1);
            m=n - 1;
            probes=0;
          }
        }
      }
      w.eventCount=w.poolIndex=r;
      ws[r]=w;
    }
  }
  finally {
    if (!U.compareAndSwapInt(this,PLOCK,ps,nps))     releasePlock(nps);
  }
  wt.setName(workerNamePrefix.concat(Integer.toString(w.poolIndex)));
  return w;
}

public void clear(){
  documents.clear();
  fireMRUListChanged();
}

public boolean isDirectlyControlDependentOn(BasicBlock insBlock,Branch b){
  Set<ControlFlowEdge> incomming=incomingEdgesOf(insBlock);
  if (incomming.size() == 1) {
    for (    ControlFlowEdge e : incomming) {
      if (!e.hasControlDependency() && !e.isExceptionEdge()) {
        return isDirectlyControlDependentOn(getEdgeSource(e),b);
      }
    }
  }
  boolean isRootDependent=isRootDependent(insBlock);
  if (b == null)   return isRootDependent;
  if (isRootDependent && b != null)   return false;
  for (  ControlFlowEdge e : incomming) {
    Branch current=e.getBranchInstruction();
    if (e.isExceptionEdge()) {
      if (current != null)       throw new IllegalStateException("expect exception edges to have no BranchInstruction set");
 else       continue;
    }
    if (current == null)     continue;
    if (current.equals(b))     return true;
  }
  return false;
}

final boolean tryReadLock(){
  Thread current=Thread.currentThread();
  for (; ; ) {
    int c=getState();
    if (exclusiveCount(c) != 0 && getExclusiveOwnerThread() != current)     return false;
    int r=sharedCount(c);
    if (r == MAX_COUNT)     throw new Error("Maximum lock count exceeded");
    if (compareAndSetState(c,c + SHARED_UNIT)) {
      if (r == 0) {
        firstReader=current;
        firstReaderHoldCount=1;
      }
 else       if (firstReader == current) {
        firstReaderHoldCount++;
      }
 else {
        HoldCounter rh=cachedHoldCounter;
        if (rh == null || rh.tid != current.getId())         cachedHoldCounter=rh=readHolds.get();
 else         if (rh.count == 0)         readHolds.set(rh);
        rh.count++;
      }
      return true;
    }
  }
}

public static String replace(String text,String oldsub,String newsub,boolean caseInsensitive,boolean firstOnly){
  StringBuilder buf;
  int tln;
  int oln=oldsub.length();
  if (oln == 0) {
    int nln=newsub.length();
    if (nln == 0) {
      return text;
    }
 else {
      if (firstOnly) {
        return newsub + text;
      }
 else {
        tln=text.length();
        buf=new StringBuilder(tln + (tln + 1) * nln);
        buf.append(newsub);
        for (int i=0; i < tln; i++) {
          buf.append(text.charAt(i));
          buf.append(newsub);
        }
        return buf.toString();
      }
    }
  }
 else {
    oldsub=caseInsensitive ? oldsub.toLowerCase() : oldsub;
    String input=caseInsensitive ? text.toLowerCase() : text;
    int e=input.indexOf(oldsub);
    if (e == -1) {
      return text;
    }
    int b=0;
    tln=text.length();
    buf=new StringBuilder(tln + Math.max(newsub.length() - oln,0) * 3);
    do {
      buf.append(text.substring(b,e));
      buf.append(newsub);
      b=e + oln;
      e=input.indexOf(oldsub,b);
    }
 while (e != -1 && !firstOnly);
    buf.append(text.substring(b));
    return buf.toString();
  }
}

public void serializeFormDef(FormDef fd,String filepath){
  String hash=FileUtils.getMd5Hash(new File(filepath));
  File formDef=new File(Collect.CACHE_PATH + File.separator + hash+ ".formdef");
  if (!formDef.exists()) {
    FileOutputStream fos;
    try {
      fos=new FileOutputStream(formDef);
      DataOutputStream dos=new DataOutputStream(fos);
      fd.writeExternal(dos);
      dos.flush();
      dos.close();
    }
 catch (    FileNotFoundException e) {
      e.printStackTrace();
    }
catch (    IOException e) {
      e.printStackTrace();
    }
  }
}

private void paintRoute(Graphics2D graphics,JXMapViewer viewer,PlottableEntity entity){
  Set<Plottable> plottables=entity.getPlottables();
  if (plottables.size() > 1) {
    graphics.setColor(Color.BLACK);
    graphics.setStroke(new BasicStroke(3));
    drawRoute(plottables,graphics,viewer);
    graphics.setColor(entity.getColor());
    graphics.setStroke(new BasicStroke(1));
    drawRoute(plottables,graphics,viewer);
  }
}

private boolean installReply(String alias,InputStream in) throws Exception {
  if (alias == null) {
    alias=keyAlias;
  }
  Pair<Key,char[]> objs=recoverKey(alias,storePass,keyPass);
  PrivateKey privKey=(PrivateKey)objs.fst;
  if (keyPass == null) {
    keyPass=objs.snd;
  }
  Certificate userCert=keyStore.getCertificate(alias);
  if (userCert == null) {
    MessageFormat form=new MessageFormat(rb.getString("alias.has.no.public.key.certificate."));
    Object[] source={alias};
    throw new Exception(form.format(source));
  }
  Collection<? extends Certificate> c=cf.generateCertificates(in);
  if (c.isEmpty()) {
    throw new Exception(rb.getString("Reply.has.no.certificates"));
  }
  Certificate[] replyCerts=c.toArray(new Certificate[c.size()]);
  Certificate[] newChain;
  if (replyCerts.length == 1) {
    newChain=establishCertChain(userCert,replyCerts[0]);
  }
 else {
    newChain=validateReply(alias,userCert,replyCerts);
  }
  if (newChain != null) {
    keyStore.setKeyEntry(alias,privKey,(keyPass != null) ? keyPass : storePass,newChain);
    return true;
  }
 else {
    return false;
  }
}

@Override public boolean eIsSet(int featureID){
switch (featureID) {
case EipPackage.AGGREGATOR__NAME:
    return NAME_EDEFAULT == null ? name != null : !NAME_EDEFAULT.equals(name);
case EipPackage.AGGREGATOR__TO_CHANNELS:
  return toChannels != null && !toChannels.isEmpty();
case EipPackage.AGGREGATOR__FROM_CHANNELS:
return fromChannels != null && !fromChannels.isEmpty();
case EipPackage.AGGREGATOR__PART:
return part != PART_EDEFAULT;
case EipPackage.AGGREGATOR__STRATEGY:
return STRATEGY_EDEFAULT == null ? strategy != null : !STRATEGY_EDEFAULT.equals(strategy);
case EipPackage.AGGREGATOR__EXPRESSION:
return EXPRESSION_EDEFAULT == null ? expression != null : !EXPRESSION_EDEFAULT.equals(expression);
}
return super.eIsSet(featureID);
}

public synchronized void mouseWheel(int wheelAmt){
  peer.mouseWheel(wheelAmt);
  afterEvent();
}

@Override public int length(){
  return data.length / (format.getFrameSize() * 8);
}

public void validate(Set setData) throws ValidationException {
  for (Iterator iter=setData.iterator(); iter.hasNext(); ) {
    performValidation((String)iter.next());
  }
}

public static void deleteDirectory(final File dir,boolean checkForLinks){
  if (dir.isFile()) {
    throw new IllegalArgumentException("Directory " + dir.getName() + " must not be a file!");
  }
 else   if (checkForLinks && isLink(dir)) {
    throw new IllegalArgumentException("Directory " + dir.getName() + " doesn't exist or is a symbolic link or has a path name of type ./xyz or ../xyz !");
  }
  if (dir.exists()) {
    IOUtils.deleteDir(dir,checkForLinks);
  }
 else {
    throw new IllegalArgumentException("Directory " + dir.getName() + " doesn't exist!");
  }
}

private static Marshaller createMarshaller(JAXBContext jaxbContext,String schemaPath) throws SAXException, JAXBException {
  Schema schema=XmlParser.getSchema(new String[]{schemaPath});
  Marshaller jaxbMarshaller=jaxbContext.createMarshaller();
  jaxbMarshaller.setSchema(schema);
  jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT,true);
  jaxbMarshaller.setProperty(Marshaller.JAXB_ENCODING,"UTF-8");
  return jaxbMarshaller;
}

public static GeneralPath cardinalSpline(float pts[],float slack,boolean closed){
  GeneralPath path=new GeneralPath();
  path.moveTo(pts[0],pts[1]);
  return cardinalSpline(path,pts,slack,closed,0f,0f);
}

public static String makeMethodSafe(final String S){
  String name=makeHTMLNameSafe(S);
  name=name.replace("-","_");
  return name;
}

public Builder addListenUrl(String url){
  if (UrlUtil.isUrl(url)) {
    if (mListenUrls == null) {
      mListenUrls=new HashSet<String>();
    }
    mListenUrls.add(url);
  }
  return this;
}

private void expand(int i){
  if (count + i <= buf.length) {
    return;
  }
  byte[] newbuf=mPool.getBuf((count + i) * 2);
  System.arraycopy(buf,0,newbuf,0,count);
  mPool.returnBuf(buf);
  buf=newbuf;
}

public void remove(Production production){
  productions.remove(production);
}

private void writeDelay(){
  try {
    Thread.sleep(10);
  }
 catch (  InterruptedException e) {
    fail("Interrupted sleep.");
  }
}

public static void main(String[] argv){
  ArgParser ap=new ArgParser("EsriShapeExport");
  ap.add("shp","A URL to a shape file (.shp).",1);
  if (argv.length < 1) {
    ap.bail("",true);
  }
  ap.parse(argv);
  String[] files=ap.getArgValues("shp");
  if (files != null && files[0] != null) {
    String shp=files[0];
    String dbf=null;
    try {
      dbf=shp.substring(0,shp.lastIndexOf('.') + 1) + PARAM_DBF;
      DbfTableModel model=DbfTableModel.getDbfTableModel(PropUtils.getResourceOrFileOrURL(dbf));
      EsriGraphicList list=EsriGraphicList.getEsriGraphicList(PropUtils.getResourceOrFileOrURL(shp),null,null);
      logger.info(list.getDescription());
      EsriShapeExport ese=new EsriShapeExport(list,model,null);
      ese.export();
    }
 catch (    MalformedURLException murle) {
      logger.warning("EsriShapeExport: Malformed URL Exception\n" + murle.getMessage());
    }
catch (    NullPointerException npe) {
      logger.warning("EsriShapeExport: Path to shape file isn't good enough to find .dbf file and .shx file.");
    }
catch (    Exception exception) {
      logger.warning("EsriShapeExport: Exception\n" + exception.getMessage());
      exception.printStackTrace();
    }
  }
 else {
    ap.bail("Need a path to a Shape file (.shp)",true);
  }
  System.exit(0);
}

public PartialHull(IPoint first,IPoint second){
  points.add(first);
  points.add(second);
}

public void testMaxGreater(){
  byte aBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  byte bBytes[]={45,91,3,-15,35,26,3,91};
  int aSign=1;
  int bSign=1;
  byte rBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.max(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertTrue("incorrect sign",result.signum() == 1);
}

public static SortedSet<Interval> findFullAvailabilityGaps(Set<Interval> availableIntervals,Set<Interval> neededIntervals){
  Comparator<Interval> intervalStartComparator=new IntervalStartComparator();
  SortedSet<Interval> sortedAvailableIntervals=new TreeSet<>(intervalStartComparator);
  sortedAvailableIntervals.addAll(availableIntervals);
  SortedSet<Interval> sortedNeededIntervals=new TreeSet<>(intervalStartComparator);
  sortedNeededIntervals.addAll(neededIntervals);
  Iterator<Interval> availableIntervalsIterator=sortedAvailableIntervals.iterator();
  if (!availableIntervalsIterator.hasNext()) {
    return sortedNeededIntervals;
  }
  Interval available=availableIntervalsIterator.next();
  SortedSet<Interval> missingIntervals=new TreeSet<>(intervalStartComparator);
  for (  Interval needed : sortedNeededIntervals) {
    while (!canDetermineAvailability(available,needed) && availableIntervalsIterator.hasNext()) {
      available=availableIntervalsIterator.next();
    }
    if (available.contains(needed)) {
      continue;
    }
    missingIntervals.add(needed);
  }
  return missingIntervals;
}

public static List<String> split(String str,String delim){
  List<String> splitList=null;
  StringTokenizer st=null;
  if (str == null)   return splitList;
  if (delim != null)   st=new StringTokenizer(str,delim);
 else   st=new StringTokenizer(str);
  if (st != null && st.hasMoreTokens()) {
    splitList=new LinkedList<String>();
    while (st.hasMoreTokens())     splitList.add(st.nextToken());
  }
  return splitList;
}

public void writeExif(String jpegFileName,String exifOutFileName) throws FileNotFoundException, IOException {
  if (jpegFileName == null || exifOutFileName == null) {
    throw new IllegalArgumentException(NULL_ARGUMENT_STRING);
  }
  InputStream is=null;
  is=new FileInputStream(jpegFileName);
  writeExif(is,exifOutFileName);
  is.close();
}

public boolean isGenClass(SootClass clz){
  return genClasses.contains(clz.getName());
}

public boolean hasExtraStillImage(){
  return isApng() && !firsIdatApngFrame;
}

private void readResponseHeaders(State state,InnerState innerState,HttpResponse response) throws StopRequest {
  Header header=response.getFirstHeader("Content-Disposition");
  if (header != null) {
    innerState.mHeaderContentDisposition=header.getValue();
  }
  header=response.getFirstHeader("Content-Location");
  if (header != null) {
    innerState.mHeaderContentLocation=header.getValue();
  }
  header=response.getFirstHeader("ETag");
  if (header != null) {
    innerState.mHeaderETag=header.getValue();
  }
  String headerTransferEncoding=null;
  header=response.getFirstHeader("Transfer-Encoding");
  if (header != null) {
    headerTransferEncoding=header.getValue();
  }
  String headerContentType=null;
  header=response.getFirstHeader("Content-Type");
  if (header != null) {
    headerContentType=header.getValue();
    if (!headerContentType.equals("application/vnd.android.obb")) {
      throw new StopRequest(DownloaderService.STATUS_FILE_DELIVERED_INCORRECTLY,"file delivered with incorrect Mime type");
    }
  }
  if (headerTransferEncoding == null) {
    header=response.getFirstHeader("Content-Length");
    if (header != null) {
      innerState.mHeaderContentLength=header.getValue();
      long contentLength=Long.parseLong(innerState.mHeaderContentLength);
      if (contentLength != -1 && contentLength != mInfo.mTotalBytes) {
        Log.e(Constants.TAG,"Incorrect file size delivered.");
      }
    }
  }
 else {
    if (Constants.LOGVV) {
      Log.v(Constants.TAG,"ignoring content-length because of xfer-encoding");
    }
  }
  if (Constants.LOGVV) {
    Log.v(Constants.TAG,"Content-Disposition: " + innerState.mHeaderContentDisposition);
    Log.v(Constants.TAG,"Content-Length: " + innerState.mHeaderContentLength);
    Log.v(Constants.TAG,"Content-Location: " + innerState.mHeaderContentLocation);
    Log.v(Constants.TAG,"ETag: " + innerState.mHeaderETag);
    Log.v(Constants.TAG,"Transfer-Encoding: " + headerTransferEncoding);
  }
  boolean noSizeInfo=innerState.mHeaderContentLength == null && (headerTransferEncoding == null || !headerTransferEncoding.equalsIgnoreCase("chunked"));
  if (noSizeInfo) {
    throw new StopRequest(DownloaderService.STATUS_HTTP_DATA_ERROR,"can't know size of download, giving up");
  }
}

public void removeChangeListener(final PTPropertyChangeListener listener){
  changeListeners.remove(listener);
}

public static ResultSet optimizeInJoinSelect(){
  SimpleResultSet rs=new SimpleResultSet();
  rs.addColumn("X",Types.INTEGER,0,0);
  rs.addRow(1);
  return rs;
}

public PartitionSubstitutionModel parsePAUPBlock(BeautiOptions options,List<CharSet> charSets) throws ImportException, IOException {
  PartitionSubstitutionModel model=new PartitionSubstitutionModel(options,"nucs");
  readTopLevelBlock(options,model,charSets);
  return model;
}

private void zEventToggleTimeMenuButtonMousePressed(MouseEvent e){
  togglePopup();
}

private void addLine(GridField field,VEditor editor,boolean mandatory){
  log.fine("Field=" + field);
  JLabel label=VEditorFactory.getLabel(field);
  label.setLabelFor((Component)editor);
  editor.setReadWrite(true);
  editor.setMandatory(mandatory);
  field.addPropertyChangeListener(editor);
  if (m_newRow) {
    m_gbc.gridy=m_line++;
    m_gbc.gridx=0;
  }
 else   m_gbc.gridx=2;
  m_gbc.insets=m_labelInsets;
  m_gbc.fill=GridBagConstraints.HORIZONTAL;
  m_gbc.weightx=0;
  parameterPanel.add(label,m_gbc);
  if (m_newRow)   m_gbc.gridx=1;
 else   m_gbc.gridx=3;
  m_gbc.insets=m_fieldInsets;
  m_gbc.fill=GridBagConstraints.HORIZONTAL;
  m_gbc.weightx=1;
  parameterPanel.add((Component)editor,m_gbc);
  m_newRow=!m_newRow;
}

protected Object lazilyLoadDesktopProperty(String name){
  return null;
}

@edu.umd.cs.findbugs.annotations.SuppressWarnings(value="ML_SYNC_ON_FIELD_TO_GUARD_CHANGING_THAT_FIELD",justification="sync on localExceptions guards concurrent modification but this is a replacement") public void initRecoveredVersion(T member,RegionVersionHolder<T> v,boolean latestOplog){
  RegionVersionHolder<T> recovered=v.clone();
  if (member == null || member.equals(myId)) {
synchronized (localExceptions) {
      if (latestOplog || localVersion.get() == 0) {
        localExceptions=recovered;
        if (logger.isTraceEnabled(LogMarker.RVV)) {
          logger.trace(LogMarker.RVV,"initRecoveredVersion setting local version to {}",recovered.version);
        }
        localVersion.set(recovered.version);
      }
    }
  }
 else {
    Long gcVersion=memberToGCVersion.get(member);
synchronized (memberToVersion) {
      RegionVersionHolder<T> oldVersion=memberToVersion.get(member);
      if (latestOplog || oldVersion == null || oldVersion.version == 0) {
        if (gcVersion != null) {
          recovered.removeExceptionsOlderThan(gcVersion);
        }
        memberToVersion.put(member,recovered);
      }
    }
  }
}

protected void notifyClickListenersAboutClick(int item){
  if (clickingListeners.size() > 0) {
    for (    OnWheelClickedListener listener : clickingListeners) {
      listener.onItemClicked(this,item);
    }
  }
 else {
    setCurrentItem(item,true,500);
  }
}

@Override public synchronized void disconnectionNotification(String eventName,Object source){
  List<Object> listenees=m_listenees.get(eventName);
  if (listenees != null) {
    listenees.remove(source);
    if (listenees.size() == 0) {
      m_listenees.remove(eventName);
    }
  }
  if (eventName.compareTo("instance") == 0) {
    stop();
  }
}

public void testConstructorSignBytesZeroNull1(){
  byte aBytes[]={};
  int aSign=-1;
  byte rBytes[]={0};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=aNumber.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",0,aNumber.signum());
}

private String replaceIllegalChar(String data,char ch,String replacement){
  int idx=0;
  StringBuilder buffer=new StringBuilder(data.length() * 4);
  while ((data != null) && (idx=data.indexOf(ch)) != -1) {
    buffer.append(data.substring(0,idx));
    buffer.append(replacement);
    data=data.substring(idx + 1);
  }
  if ((data != null) && (data.length() > 0)) {
    buffer.append(data);
  }
  return buffer.toString();
}

protected static final void adjustModuleName(DebugModule d){
  d.name=adjustModuleName(d.name);
}

public org.dom4j.Attribute createAttribute(Element elem,Attribute attr){
  return factory.createAttribute(elem,createQName(attr.getName()),attr.getValue());
}

public LogEntry(){
  index=ENTRY_INDEX.getAndIncrement();
  time=System.currentTimeMillis();
}

public void testBitLengthPositive3(){
  byte aBytes[]={1,0,0,0,0,0,0,0,0,0,0};
  int aSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  assertEquals(81,aNumber.bitLength());
}

public boolean isSignatureValid(){
  return ECKey.verify(Utils.doubleDigest(content),signature,params.getAlertSigningKey());
}

private void validateCreateInformation(Date startTime,String taskName){
  Assert.notNull(startTime,"TaskExecution start time cannot be null.");
  if (taskName != null && taskName.length() > this.maxTaskNameSize) {
    throw new IllegalArgumentException("TaskName length exceeds " + this.maxTaskNameSize + " characters");
  }
}

private static Object increment(final Object object,final Number amount,final JsonPointer field) throws BadRequestException {
  if (object instanceof Long) {
    return ((Long)object) + amount.longValue();
  }
 else   if (object instanceof Integer) {
    return ((Integer)object) + amount.intValue();
  }
 else   if (object instanceof Float) {
    return ((Float)object) + amount.floatValue();
  }
 else   if (object instanceof Double) {
    return ((Double)object) + amount.doubleValue();
  }
 else {
    throw new BadRequestException("The field '" + field + "' is not a number");
  }
}

public static LinkedHashSet<Entity> findEntites(LinkedHashSet<Entity> matches,HashSet<Entity> checked,Entity entity,Predicate predicate){
  if (!checked.add(entity)) {
    return matches;
  }
  if (predicate.matches(entity)) {
    matches.add(entity);
  }
  for (  RefNode refNode : entity.getChildren(RefNode.class)) {
    Entity e=refNode.getReference();
    if (e != null) {
      findEntites(matches,checked,e,predicate);
    }
  }
  for (  ToManyNode toManyNode : entity.getChildren(ToManyNode.class)) {
    for (    Entity e : toManyNode.getList()) {
      if (e != null) {
        findEntites(matches,checked,e,predicate);
      }
    }
  }
  return matches;
}

protected OMGeometry createMGRSRectangle(MGRSPoint mgrsBasePoint,double voffset,double hoffset,double interval,Ellipsoid ellipsoid){
  double[] llpoints=new double[10];
  double easting=mgrsBasePoint.easting + hoffset;
  double northing=mgrsBasePoint.northing + voffset;
  int zone_number=mgrsBasePoint.zone_number;
  char zone_letter=mgrsBasePoint.zone_letter;
  LatLonPoint llp1=new LatLonPoint.Double();
  llp1=MGRSPoint.MGRStoLL(ellipsoid,northing,easting,zone_number,zone_letter,llp1);
  llpoints[0]=llp1.getY();
  llpoints[1]=llp1.getX();
  llpoints[8]=llp1.getY();
  llpoints[9]=llp1.getX();
  MGRSPoint.MGRStoLL(ellipsoid,northing,easting + interval,zone_number,zone_letter,llp1);
  llpoints[2]=llp1.getY();
  llpoints[3]=llp1.getX();
  MGRSPoint.MGRStoLL(ellipsoid,northing + interval,easting + interval,zone_number,zone_letter,llp1);
  llpoints[4]=llp1.getY();
  llpoints[5]=llp1.getX();
  MGRSPoint.MGRStoLL(ellipsoid,northing + interval,easting,zone_number,zone_letter,llp1);
  llpoints[6]=llp1.getY();
  llpoints[7]=llp1.getX();
  MGRSPoint mgrs=new MGRSPoint(northing,easting,zone_number,zone_letter);
  mgrs.resolve(mgrsBasePoint.getAccuracy());
  String mgrsString=mgrs.getMGRS();
  if (Debug.debugging("utmgriddetail"))   Debug.output(" - assigning " + mgrsString + " to poly with "+ mgrs.getAccuracy());
  PolygonGeometry poly=new PolygonGeometry.LL(llpoints,OMGraphic.DECIMAL_DEGREES,(interval <= 1000 ? OMGraphic.LINETYPE_STRAIGHT : OMGraphic.LINETYPE_GREATCIRCLE));
  poly.putAttribute(OMGraphic.APP_OBJECT,mgrsString);
  return poly;
}

public String toXMLString() throws XACMLException {
  return toXMLString(true,false);
}

public void addMemoryPressureListener(MemoryPressureListener listener){
  mListeners.add(listener);
}

private void resetForOT(){
  if (bottomOT && homeScore == awayScore) {
    gameYardLine=75;
    gameYardsNeed=10;
    gameDown=1;
    numOT++;
    if ((numOT % 2) == 0)     gamePoss=true;
 else     gamePoss=false;
    gameTime=-1;
    bottomOT=false;
  }
 else   if (!bottomOT) {
    gamePoss=!gamePoss;
    gameYardLine=75;
    gameYardsNeed=10;
    gameDown=1;
    gameTime=-1;
    bottomOT=true;
  }
 else {
    playingOT=false;
  }
}

public synchronized void startPolling(){
  m_scheduler.scheduleAtFixedRate(m_notificationPoller,0,500,TimeUnit.MILLISECONDS);
}

private void dropProxy(ProxyReg reg){
synchronized (caches) {
    Iterator iter=caches.iterator();
    while (iter.hasNext()) {
      LookupCacheImpl cache=(LookupCacheImpl)iter.next();
      cache.removeProxyReg(reg);
    }
  }
}

public void testUpdate4(){
  int newValue1=-1;
  int newValue2=-2;
  String updateQuery="UPDATE " + DatabaseCreator.TEST_TABLE1 + " SET field2="+ newValue1+ ", field3="+ newValue2+ " WHERE id > 10";
  try {
    int num=statement.executeUpdate(updateQuery);
    int expectedUpdated=9;
    assertEquals("Not all records in the database were updated",expectedUpdated,num);
    String selectQuery="SELECT id, field2, field3 FROM " + DatabaseCreator.TEST_TABLE1;
    ResultSet result=statement.executeQuery(selectQuery);
    while (result.next()) {
      int id=result.getInt("id");
    }
    result.close();
  }
 catch (  SQLException e) {
    fail("Unexpected exception" + e.getMessage());
  }
}

public long toLong(){
  return m_value.longValue();
}

public static void moveToDirectory(File src,File destDir,boolean createDestDir) throws IOException {
  if (src == null) {
    throw new NullPointerException("Source must not be null");
  }
  if (destDir == null) {
    throw new NullPointerException("Destination must not be null");
  }
  if (!src.exists()) {
    throw new FileNotFoundException("Source '" + src + "' does not exist");
  }
  if (src.isDirectory()) {
    moveDirectoryToDirectory(src,destDir,createDestDir);
  }
 else {
    moveFileToDirectory(src,destDir,createDestDir);
  }
}

public static int copyAndCloseBoth(Reader input,Writer output) throws IOException {
  try {
    return copyAndCloseOutput(input,output);
  }
  finally {
    input.close();
  }
}

protected void writeHeader() throws IOException {
  header=new byte[SHAPE_FILE_HEADER_LENGTH];
  writeBEInt(header,0,SHAPE_FILE_CODE);
  writeBEInt(header,24,50);
  writeLEInt(header,28,SHAPE_FILE_VERSION);
  writeLEInt(header,32,SHAPE_TYPE_NULL);
  writeLEDouble(header,36,0.0);
  writeLEDouble(header,44,0.0);
  writeLEDouble(header,52,0.0);
  writeLEDouble(header,60,0.0);
  raf.seek(0);
  raf.write(header,0,SHAPE_FILE_HEADER_LENGTH);
}

public String hashKeyForDisk(String key){
  String cacheKey;
  try {
    final MessageDigest mDigest=MessageDigest.getInstance("MD5");
    mDigest.update(key.getBytes());
    cacheKey=bytesToHexString(mDigest.digest());
  }
 catch (  NoSuchAlgorithmException e) {
    cacheKey=String.valueOf(key.hashCode());
  }
  return cacheKey;
}

private Favorite packFavorite(Cursor c){
  Favorite favorite=new Favorite();
  favorite.id=c.getLong(ID_INDEX);
  favorite.screen=c.getInt(SCREEN_INDEX);
  favorite.container=c.getInt(CONTAINER_INDEX);
  favorite.cellX=c.getInt(CELLX_INDEX);
  favorite.cellY=c.getInt(CELLY_INDEX);
  favorite.spanX=c.getInt(SPANX_INDEX);
  favorite.spanY=c.getInt(SPANY_INDEX);
  favorite.iconType=c.getInt(ICON_TYPE_INDEX);
  if (favorite.iconType == Favorites.ICON_TYPE_RESOURCE) {
    String iconPackage=c.getString(ICON_PACKAGE_INDEX);
    if (!TextUtils.isEmpty(iconPackage)) {
      favorite.iconPackage=iconPackage;
    }
    String iconResource=c.getString(ICON_RESOURCE_INDEX);
    if (!TextUtils.isEmpty(iconResource)) {
      favorite.iconResource=iconResource;
    }
  }
  if (favorite.iconType == Favorites.ICON_TYPE_BITMAP) {
    byte[] blob=c.getBlob(ICON_INDEX);
    if (blob != null && blob.length > 0) {
      favorite.icon=blob;
    }
  }
  String title=c.getString(TITLE_INDEX);
  if (!TextUtils.isEmpty(title)) {
    favorite.title=title;
  }
  String intentDescription=c.getString(INTENT_INDEX);
  if (!TextUtils.isEmpty(intentDescription)) {
    try {
      Intent intent=Intent.parseUri(intentDescription,0);
      intent.removeExtra(ItemInfo.EXTRA_PROFILE);
      favorite.intent=intent.toUri(0);
    }
 catch (    URISyntaxException e) {
      Log.e(TAG,"Invalid intent",e);
    }
  }
  favorite.itemType=c.getInt(ITEM_TYPE_INDEX);
  if (favorite.itemType == Favorites.ITEM_TYPE_APPWIDGET) {
    favorite.appWidgetId=c.getInt(APPWIDGET_ID_INDEX);
    String appWidgetProvider=c.getString(APPWIDGET_PROVIDER_INDEX);
    if (!TextUtils.isEmpty(appWidgetProvider)) {
      favorite.appWidgetProvider=appWidgetProvider;
    }
  }
  return favorite;
}

public static void unregister(SPINThreadFunctions old){
  if (old != null) {
    localFunctions.set(old);
  }
 else {
    localFunctions.remove();
  }
}

public static boolean loadProperties(Properties properties,InputStream propsIn){
  try {
    properties.load(propsIn);
    return true;
  }
 catch (  java.io.IOException e) {
    if (logger.isLoggable(Level.FINE)) {
      logger.warning("Caught IOException loading properties from InputStream.");
    }
    return false;
  }
}

public Complex sin(){
  return new Complex(Math.sin(re) * Math.cosh(im),Math.cos(re) * Math.sinh(im));
}

@OnClick(R.id.dismiss_button) public void onDismissClick(View view){
  if (SystemClock.elapsedRealtime() - mLastClickTime < 500) {
    return;
  }
  mLastClickTime=SystemClock.elapsedRealtime();
  dismissOffer(getAdapterPosition());
  if (snackbar != null) {
    snackbar.dismiss();
  }
}

public Table findTable(String name){
  return findTable(name,false);
}

public static void appendString(final StringBuffer buf,final String s){
  buf.append('\"');
  for (int i=0; i < s.length(); ++i) {
    char c=s.charAt(i);
    if (c == '\n') {
      buf.append("\\n");
    }
 else     if (c == '\r') {
      buf.append("\\r");
    }
 else     if (c == '\\') {
      buf.append("\\\\");
    }
 else     if (c == '"') {
      buf.append("\\\"");
    }
 else     if (c < 0x20 || c > 0x7f) {
      buf.append("\\u");
      if (c < 0x10) {
        buf.append("000");
      }
 else       if (c < 0x100) {
        buf.append("00");
      }
 else       if (c < 0x1000) {
        buf.append('0');
      }
      buf.append(Integer.toString(c,16));
    }
 else {
      buf.append(c);
    }
  }
  buf.append('\"');
}

public void draw(final Graphics g,final int height,final int width){
  int constantDim;
  int changingDim;
  if (orientation == X_AXIS) {
    changingDim=width;
    constantDim=height;
  }
 else {
    changingDim=height;
    constantDim=width;
  }
  int dimStep;
  if (fixedSteps) {
    dimStep=changingDim / STEPS;
  }
 else {
    dimStep=2;
    STEPS=changingDim / dimStep;
  }
  float red=_redT;
  float green=_greenT;
  float blue=_blueT;
  int offset=0;
  for (int i=0; i < STEPS; i++) {
    Color c=new Color(round(red),round(green),round(blue));
    g.setColor(c);
    drawRect(g,offset,constantDim,dimStep);
    offset+=dimStep;
    float value=shader.getValue((float)i / (float)STEPS);
    red=_redT + (_redB - _redT) * value;
    green=_greenT + (_greenB - _greenT) * value;
    blue=_blueT + (_blueB - _blueT) * value;
  }
  Color c=new Color(round(red),round(green),round(blue));
  g.setColor(c);
  drawRect(g,offset,constantDim,changingDim - offset);
}

public static double[] convexHull(double[] pts,int len,float[] angles,int[] idx,int[] stack){
  int plen=len / 2 - 1;
  if (len < 6) {
    throw new IllegalArgumentException("Input must have at least 3 points");
  }
  if (angles.length < plen || idx.length < plen || stack.length < len / 2) {
    throw new IllegalArgumentException("Pre-allocated data structure too small");
  }
  int i0=0;
  for (int i=2; i < len; i+=2) {
    if (pts[i + 1] < pts[i0 + 1]) {
      i0=i;
    }
 else     if (pts[i + 1] == pts[i0 + 1]) {
      i0=(pts[i] < pts[i0] ? i : i0);
    }
  }
  for (int i=0, j=0; i < len; i+=2) {
    if (i == i0)     continue;
    angles[j]=(float)Math.atan2(pts[i + 1] - pts[i0 + 1],pts[i] - pts[i0]);
    idx[j++]=i;
  }
  ArrayLib.sort(angles,idx,plen);
  float angle=angles[0];
  int ti=0, tj=idx[0];
  for (int i=1; i < plen; i++) {
    int j=idx[i];
    if (angle == angles[i]) {
      double x1=pts[tj] - pts[i0];
      double y1=pts[tj + 1] - pts[i0 + 1];
      double x2=pts[j] - pts[i0];
      double y2=pts[j + 1] - pts[i0 + 1];
      double d1=x1 * x1 + y1 * y1;
      double d2=x2 * x2 + y2 * y2;
      if (d1 >= d2) {
        idx[i]=-1;
      }
 else {
        idx[ti]=-1;
        angle=angles[i];
        ti=i;
        tj=j;
      }
    }
 else {
      angle=angles[i];
      ti=i;
      tj=j;
    }
  }
  int sp=0;
  stack[sp++]=i0;
  int j=0;
  for (int k=0; k < 2; j++) {
    if (idx[j] != -1) {
      stack[sp++]=idx[j];
      k++;
    }
  }
  for (; j < plen; j++) {
    if (idx[j] == -1)     continue;
    while (isNonLeft(i0,stack[sp - 2],stack[sp - 1],idx[j],pts)) {
      sp--;
    }
    stack[sp++]=idx[j];
  }
  double[] hull=new double[2 * sp];
  for (int i=0; i < sp; i++) {
    hull[2 * i]=pts[stack[i]];
    hull[2 * i + 1]=pts[stack[i] + 1];
  }
  return hull;
}

private void sendMessages(){
  List<MurmurMessage> messages=getMessages(0);
  MurmurMessage exchangeInfoMessage=new MurmurMessage("ExchangeAgreement",Integer.toString(messages.size()),1d);
  if (lengthValueWrite(out,exchangeInfoMessage.toJSON(MurmurApplication.getContext(),0,0))) {
    for (    MurmurMessage message : messages) {
      List<MurmurMessage> packet=new ArrayList<>();
      packet.add(message);
      CleartextMessages messagesMessage=new CleartextMessages((ArrayList<MurmurMessage>)packet);
      lengthValueWrite(out,messagesMessage.toJson(MurmurApplication.getContext()));
    }
  }
}

protected void init(String str){
  int len=str.length();
  text=new char[len];
  lcText=new char[len];
  for (int i=0; i < len; i++) {
    char c=str.charAt(i);
    text[i]=c;
    if (c == '\n' || c == '\r' || c == '\t') {
      lcText[i]=' ';
    }
 else     lcText[i]=((c >= 'a' && c <= 'z') || (c >= '0' && c <= '9')) ? c : Character.toLowerCase(c);
  }
}

private void updateAttrs(SvcReg reg,EntryRep entry,Object[] values){
  EntryClass eclass=entry.eclass;
  for (int fldidx=values.length; --fldidx >= 0; ) {
    Object oval=entry.fields[fldidx];
    Object nval=values[fldidx];
    if (nval != null && !nval.equals(oval)) {
      eclass=getDefiningClass(eclass,fldidx);
      HashMap map=addAttr(reg,eclass,fldidx,nval);
      entry.fields[fldidx]=nval;
      if (hasAttr(reg,eclass,fldidx,oval))       continue;
      ArrayList regs=(ArrayList)map.get(oval);
      regs.remove(regs.indexOf(reg));
      if (regs.isEmpty())       map.remove(oval);
    }
  }
}

public void finalizeNetworkConstruction(){
  Set<MotifLink> keySet=nodeSetsDepartingFromLink.keySet();
  nodesWithLink=new HashMap<MotifLink,ArrayList<Node>>(keySet.size());
  for (  MotifLink motifLink : keySet) {
    Set<Node> nodes=nodeSetsDepartingFromLink.get(motifLink);
    ArrayList<Node> n=new ArrayList<Node>(nodes);
    Collections.sort(n);
    nodesWithLink.put(motifLink,n);
  }
  nodeSetsDepartingFromLink=null;
}

public Collection<AISValidationFailure> failures(){
  return Collections.unmodifiableCollection(failureList);
}

public static GetInactiveImagesResponse checkGetInactiveImagesResponse(GetInactiveImagesResponse response) throws RpcException {
  logger.info("Checking {}",response);
switch (response.getResult()) {
case OK:
    break;
case SYSTEM_ERROR:
  throw new SystemErrorException(response.getError());
case DATASTORE_NOT_FOUND:
throw new DatastoreNotFoundException(response.getError());
case OPERATION_IN_PROGRESS:
throw new OperationInProgressException(response.getError());
default :
throw new RpcException(String.format("Unexpected return code: %s",response.getResult()));
}
return response;
}

public void runTest() throws Throwable {
  Document doc;
  Element root;
  NodeList elementList;
  Node firstChild;
  NodeList textList;
  CharacterData textNode;
  String data;
  doc=(Document)load("staff",false);
  root=doc.getDocumentElement();
  root.normalize();
  elementList=root.getElementsByTagName("name");
  firstChild=elementList.item(2);
  textList=firstChild.getChildNodes();
  textNode=(CharacterData)textList.item(0);
  data=textNode.getData();
  assertEquals("data","Roger\n Jones",data);
}

public double semiDeviation(){
  return Math.sqrt(semiVariance());
}

private void checkPostsDisplayOnRecyclerView(List<Post> postsToCheck,int position){
  int columnCount=5;
  int size=postsToCheck.size() + position;
  int pos=0;
  for (int i=position; i < size; i++) {
    checkItemAtPosition(i,postsToCheck.get(pos));
    if (((i + 1) % columnCount) == 0) {
      int nextRowStart=i + columnCount;
      int nextRowEnd=nextRowStart - columnCount + 1;
      for (int n=nextRowStart; n >= nextRowEnd; n--) {
        checkItemAtPosition(n,postsToCheck.get(n - position));
      }
      i=i + columnCount;
    }
    pos++;
  }
}

private void addDependentClassesToWorklist(GVCongruenceClass c){
  for (  ValueGraphVertex v : c) {
    for (Enumeration<GraphNode> e=v.inNodes(); e.hasMoreElements(); ) {
      ValueGraphVertex in=(ValueGraphVertex)e.nextElement();
      int vn=in.getValueNumber();
      GVCongruenceClass x=B.get(vn);
      workList.push(x);
    }
  }
}

public synchronized JSONObject toJSONObject(){
  JSONObject res=new JSONObject();
  res.putAll(this);
  return res;
}

private Shape createEllipseInternal(int x,int y,int w,int h){
  ellipse.setFrame(x,y,w,h);
  return ellipse;
}

public static String write(StringBuilder sb,String... strings){
  for (  String string : strings)   sb.append(string);
  return sb.toString();
}

public ImportFolderValidation validate(final String path){
  Check.notNull(path,"path");
  if (validationCache == null) {
    validationCache=new HashMap();
  }
 else {
    if (validationCache.containsKey(path)) {
      return (ImportFolderValidation)validationCache.get(path);
    }
  }
  final ImportFolderValidation validation=computeValidation(path);
  validationCache.put(path,validation);
  return validation;
}

private static byte[] hmac_sha(String crypto,byte[] keyBytes,byte[] text){
  try {
    Mac hmac;
    hmac=Mac.getInstance(crypto);
    SecretKeySpec macKey=new SecretKeySpec(keyBytes,"RAW");
    hmac.init(macKey);
    return hmac.doFinal(text);
  }
 catch (  GeneralSecurityException gse) {
    throw new UndeclaredThrowableException(gse);
  }
}

public static String fetchCgName(String clusterCgName){
  String cgName=null;
  if (clusterCgName != null && !clusterCgName.isEmpty()) {
    String[] tmp=clusterCgName.split(SPLITTER);
    cgName=tmp[1];
  }
  return cgName;
}

public void test_chooseServerAlias(){
  init(SERVER);
  assertNull(manager.chooseServerAlias(null,null,new Socket()));
  assertNull(manager.chooseServerAlias("",null,new Socket()));
  String res=manager.chooseServerAlias(TYPE_RSA,null,null);
  assertNotNull(res);
  assertEquals("serverkey_00",res.toLowerCase());
  res=manager.chooseServerAlias(TYPE_RSA,null,new Socket());
  assertNotNull(res);
  assertEquals("serverkey_00",res.toLowerCase());
}

public void add(int index,Entity entity){
  if (entities.contains(entity)) {
    throw new IllegalStateException("ToMany relation already contains '" + entity + "'");
  }
  if (entity.getEntityType() != entityType) {
    throw new IllegalStateException("Cannot add " + entity.getEntityType() + " to "+ getParent()+ "."+ getName());
  }
  if (entity.isClearlyNotInDatabase()) {
    newEntities.add(entity);
  }
  entities.add(index,entity);
}

public static ControlTagCacheObject createTestEquipmentAlive(){
  ControlTagCacheObject cacheObject=new ControlTagCacheObject(new Long(5000200),"Test equipment alive tag","Long",DataTagConstants.MODE_TEST);
  cacheObject.setDescription("test alive description");
  cacheObject.setLogged(false);
  cacheObject.setUnit("seconds since 1970");
  cacheObject.setDipAddress("testDIPaddress");
  cacheObject.setJapcAddress("testJAPCaddress");
  cacheObject.setValue(new Long(System.currentTimeMillis()));
  cacheObject.setValueDescription("test value description");
  cacheObject.setSimulated(false);
  cacheObject.setMinValue(Long.MIN_VALUE);
  cacheObject.setMaxValue(Long.MAX_VALUE);
  cacheObject.setValueDictionary(new DataTagValueDictionary());
  cacheObject.setAddress(new DataTagAddress());
  cacheObject.setDataTagQuality(createValidQuality());
  cacheObject.setCacheTimestamp(new Timestamp(System.currentTimeMillis()));
  cacheObject.setDaqTimestamp(new Timestamp(System.currentTimeMillis()));
  cacheObject.setSourceTimestamp(new Timestamp(System.currentTimeMillis()));
  return cacheObject;
}

public DistributedLogConfiguration(){
  super();
  addConfiguration(new SystemConfiguration());
}

public static double sampleStandardDeviation(int size,double sampleVariance){
  double s, Cn;
  int n=size;
  s=Math.sqrt(sampleVariance);
  if (n > 30) {
    Cn=1 + 1.0 / (4 * (n - 1));
  }
 else {
    Cn=Math.sqrt((n - 1) * 0.5) * Gamma.gamma((n - 1) * 0.5) / Gamma.gamma(n * 0.5);
  }
  return Cn * s;
}

void normalize() throws IOException {
  int end=chars.length();
  if (end == 0) {
    return;
  }
  int pos=0;
  int codepoint=Character.codePointAt(chars,0);
  boolean escaped=false;
  for (int i=0; i < end; ) {
    int charCount=Character.charCount(codepoint);
    int i2=i + charCount;
    int nextCodepoint=i2 < end ? Character.codePointAt(chars,i2) : -1;
    if (escaped) {
      escaped=false;
      if (escapeOneCodepoint(pos,i - 1,codepoint,nextCodepoint)) {
        pos=i2;
      }
    }
 else     if (codepoint == '\\') {
      escaped=true;
    }
 else     if (escapeOneCodepoint(pos,i,codepoint,nextCodepoint)) {
      pos=i2;
    }
    i=i2;
    codepoint=nextCodepoint;
  }
  out.append(chars,pos,end);
}

protected void rebuildListModel(){
  DefaultListModel dlm=(DefaultListModel)getListModel();
  OMGraphicList list=getList();
  int[] selectedIndicies=null;
  if (list != null) {
    if (selectedTiles != null && selectedTiles.length > 0) {
      selectedIndicies=new int[selectedTiles.length];
    }
    int tileCount=0;
    int selectedIndex=0;
    if (selectedIndicies != null) {
      for (      OMGraphic omg : list) {
        ImageTile imageTile=(ImageTile)omg;
        if (imageTile.isSelected() && selectedIndex < selectedIndicies.length) {
          selectedIndicies[selectedIndex++]=tileCount;
        }
        tileCount++;
      }
    }
    dlm.clear();
    for (    OMGraphic omg : list) {
      tileCount++;
      dlm.addElement(omg);
    }
  }
  if (resultsList != null) {
    if (selectedIndicies != null) {
      resultsList.setSelectedIndices(selectedIndicies);
    }
    resultsList.repaint();
  }
}

public void tick(){
  tick(1);
}

public Result send(Email email,boolean... sync){
  return service.send(email,boolToInt(true,sync));
}

private boolean isPopulating(){
  return isPopulating;
}

public void processAttributes(java.io.Writer writer,int nAttrs) throws IOException, SAXException {
  String encoding=getEncoding();
  for (int i=0; i < nAttrs; i++) {
    final String name=m_attributes.getQName(i);
    final String value=m_attributes.getValue(i);
    writer.write(' ');
    writer.write(name);
    writer.write("=\"");
    writeAttrString(writer,value,encoding);
    writer.write('\"');
  }
}

public int processor(){
  return Integer.parseInt(fields[38]);
}

public void addNativeChildAt(ReactShadowNode child,int nativeIndex){
  Assertions.assertCondition(!mIsLayoutOnly);
  Assertions.assertCondition(!child.mIsLayoutOnly);
  if (mNativeChildren == null) {
    mNativeChildren=new ArrayList<>(4);
  }
  mNativeChildren.add(nativeIndex,child);
  child.mNativeParent=this;
}

public boolean containsKey(final Object eKey){
  return _elementOrder.contains(eKey);
}

private void handleExitMessage(final Component component,final long nativeCtxt){
  postDropTargetEvent(component,0,0,DnDConstants.ACTION_NONE,DnDConstants.ACTION_NONE,null,nativeCtxt,SunDropTargetEvent.MOUSE_EXITED,SunDropTargetContextPeer.DISPATCH_SYNC);
}

public void addParameterAnnotations(CstMethodRef method,AnnotationsList list){
  if (parameterAnnotations == null) {
    parameterAnnotations=new ArrayList<ParameterAnnotationStruct>();
  }
  parameterAnnotations.add(new ParameterAnnotationStruct(method,list));
}

public static String unhtmlSingleQuotes(final String str){
  return str.replaceAll("&rsquo;","\'");
}

public void addInputMethodListener(InputMethodListener l){
  m_textArea.addInputMethodListener(l);
}

public void initRawSwap(ArrayList<S2CellId> cellIds){
  this.cellIds=new ArrayList<S2CellId>(cellIds);
  cellIds.clear();
}

protected void encryptFinal() throws IOException {
  inBuffer.flip();
  outBuffer.clear();
  try {
    cipher.doFinal(inBuffer,outBuffer);
  }
 catch (  ShortBufferException e) {
    throw new IOException(e);
  }
catch (  IllegalBlockSizeException e) {
    throw new IOException(e);
  }
catch (  BadPaddingException e) {
    throw new IOException(e);
  }
  inBuffer.clear();
  outBuffer.flip();
  while (outBuffer.hasRemaining()) {
    output.write(outBuffer);
  }
}

private static boolean spanWillOverlap(Spannable spanText,URLSpan[] spanList,int start,int end){
  if (start == end) {
    return false;
  }
  for (  URLSpan span : spanList) {
    int existingStart=spanText.getSpanStart(span);
    int existingEnd=spanText.getSpanEnd(span);
    if ((start >= existingStart && start < existingEnd) || end > existingStart && end <= existingEnd) {
      if (Log.isLoggable(TAG,Log.VERBOSE)) {
        CharSequence seq=spanText.subSequence(start,end);
        Log.v(TAG,"Not linkifying " + seq + " as phone number due to overlap");
      }
      return true;
    }
  }
  return false;
}

private HashMap<Integer,Trie> buildLookupTable(final Map<Integer,List<Trie>> childTries){
  HashMap<Integer,Trie> lookup=new HashMap<>(childTries.size());
  for (  int id : childTries.keySet()) {
    final List<Trie> tries=childTries.get(id);
    if (tries.size() == 1) {
      lookup.put(id,tries.get(0));
    }
 else {
      lookup.put(id,new SliceAggregatingTrie(tries));
    }
  }
  return lookup;
}

public void addMarker(int x,int z,Color color){
  MapMarker marker=new MapMarker();
  marker.x=x;
  marker.z=z;
  marker.color=color;
  markers.add(marker);
}

private void commitDiscard(long time,boolean allowDiscard){
  if (mDiscardingTab == null)   return;
  assert mStackTabs != null;
  StackTab discarded=mDiscardingTab;
  if (Math.abs(discarded.getDiscardAmount()) / getDiscardRange() > DISCARD_COMMIT_THRESHOLD && allowDiscard) {
    mLayout.uiRequestingCloseTab(time,discarded.getId());
    RecordUserAction.record("MobileStackViewSwipeCloseTab");
    RecordUserAction.record("MobileTabClosed");
  }
 else {
    startAnimation(time,OverviewAnimationType.UNDISCARD);
  }
  mDiscardingTab=null;
  requestUpdate();
}

public List<Object> buildJavaMethodParameters(AssetOptionsContext context,Map<String,String> availableAssets,AssetOptionsMethodInfo assetMethod){
  final List<Object> javaMethodParameters=Lists.newArrayList();
  javaMethodParameters.add(context);
  for (  String parentAssetName : assetMethod.assetDependencies) {
    String parentAssetValue=availableAssets.get(parentAssetName);
    int index=javaMethodParameters.size();
    Object value=assetMethod.convertParameter(index,parentAssetValue);
    javaMethodParameters.add(value);
  }
  return javaMethodParameters;
}

private static ImageView pickGraphic(RestartableService startStoppable){
  final boolean running=startStoppable.isRunning();
  final ImageView icon=running ? new ImageView(stopImage) : new ImageView(startImage);
  if (!running) {
    final FadeTransition ft=new FadeTransition(Duration.millis(750),icon);
    ft.setToValue(0.1);
    ft.setCycleCount(Transition.INDEFINITE);
    ft.setAutoReverse(true);
    ft.play();
  }
  icon.setFitHeight(DPIUtility.MINI_ICON_SIZE);
  icon.setFitWidth(DPIUtility.MINI_ICON_SIZE);
  return icon;
}

public static boolean isExtension(String filename,String extension){
  if (filename == null) {
    return false;
  }
  if (extension == null || extension.length() == 0) {
    return indexOfExtension(filename) == -1;
  }
  String fileExt=getExtension(filename);
  return fileExt.equals(extension);
}

public void createCashBasedJournalEntriesAndReversalsForSavingsCharges(final Office office,final String currencyCode,final CASH_ACCOUNTS_FOR_SAVINGS accountTypeToBeDebited,final CASH_ACCOUNTS_FOR_SAVINGS accountTypeToBeCredited,final Long savingsProductId,final Long paymentTypeId,final Long loanId,final String transactionId,final Date transactionDate,final BigDecimal totalAmount,final Boolean isReversal,final List<ChargePaymentDTO> chargePaymentDTOs){
  if (chargePaymentDTOs.size() != 1) {
    throw new PlatformDataIntegrityException("Recent Portfolio changes w.r.t Charges for Savings have Broken the accounting code","Recent Portfolio changes w.r.t Charges for Savings have Broken the accounting code");
  }
  ChargePaymentDTO chargePaymentDTO=chargePaymentDTOs.get(0);
  final GLAccount chargeSpecificAccount=getLinkedGLAccountForSavingsCharges(savingsProductId,accountTypeToBeCredited.getValue(),chargePaymentDTO.getChargeId());
  final GLAccount savingsControlAccount=getLinkedGLAccountForSavingsProduct(savingsProductId,accountTypeToBeDebited.getValue(),paymentTypeId);
  if (isReversal) {
    createDebitJournalEntryForSavings(office,currencyCode,chargeSpecificAccount,loanId,transactionId,transactionDate,totalAmount);
    createCreditJournalEntryForSavings(office,currencyCode,savingsControlAccount,loanId,transactionId,transactionDate,totalAmount);
  }
 else {
    createDebitJournalEntryForSavings(office,currencyCode,savingsControlAccount,loanId,transactionId,transactionDate,totalAmount);
    createCreditJournalEntryForSavings(office,currencyCode,chargeSpecificAccount,loanId,transactionId,transactionDate,totalAmount);
  }
}

public void addAll(JsonArray array){
  elements.addAll(array.elements);
}

public double nextDouble(double k){
  double u, v, w, c, z;
  if (k <= 0.0)   throw new IllegalArgumentException();
  if (k_set != k) {
    tau=1.0 + Math.sqrt(1.0 + 4.0 * k * k);
    rho=(tau - Math.sqrt(2.0 * tau)) / (2.0 * k);
    r=(1.0 + rho * rho) / (2.0 * rho);
    k_set=k;
  }
  do {
    u=randomGenerator.raw();
    v=randomGenerator.raw();
    z=Math.cos(Math.PI * u);
    w=(1.0 + r * z) / (r + z);
    c=k * (r - w);
  }
 while ((c * (2.0 - c) < v) && (Math.log(c / v) + 1.0 < c));
  return (randomGenerator.raw() > 0.5) ? Math.acos(w) : -Math.acos(w);
}

public void testListOptions(){
  if (m_OptionTester.getOptionHandler() != null) {
    if (!m_OptionTester.checkListOptions()) {
      fail("Options cannot be listed via listOptions.");
    }
  }
}

@Override final public void mouseReleased(MouseEvent e){
  if (isComponentPressedDown) {
    mouseLiberalClick(e);
    long now=System.currentTimeMillis();
    long timeBetweenUnusedClicks=now - lastUnusedLiberalSingleClickTimeStamp;
    if (timeBetweenUnusedClicks <= slowestDoubleClickMilliseconds) {
      mouseLiberalDoubleClick(e);
      lastUnusedLiberalSingleClickTimeStamp=0;
    }
 else {
      lastUnusedLiberalSingleClickTimeStamp=System.currentTimeMillis();
    }
  }
  isComponentPressedDown=false;
  mouseRelease(e);
}

public static ModificationType valueOf(final int intValue){
  ModificationType result=null;
  if (0 <= intValue && intValue < ELEMENTS.length) {
    result=ELEMENTS[intValue];
  }
  if (result == null) {
    result=new ModificationType(intValue,"unknown(" + intValue + ")",Enum.UNKNOWN);
  }
  return result;
}

@Override public void fillHeader(Header hdr){
  try {
    Standard.context(AsciiTable.class);
    hdr.setXtension("TABLE");
    hdr.setBitpix(BasicHDU.BITPIX_BYTE);
    hdr.setNaxes(2);
    hdr.setNaxis(1,this.rowLen);
    hdr.setNaxis(2,this.nRows);
    Cursor<String,HeaderCard> iter=hdr.iterator();
    iter.setKey(NAXIS2.key());
    iter.next();
    iter.add(new HeaderCard(PCOUNT.key(),0,PCOUNT.comment()));
    iter.add(new HeaderCard(GCOUNT.key(),1,GCOUNT.comment()));
    iter.add(new HeaderCard(TFIELDS.key(),this.nFields,TFIELDS.comment()));
    for (int i=0; i < this.nFields; i+=1) {
      addColInfo(i,iter);
    }
  }
 catch (  HeaderCardException e) {
    LOG.log(Level.SEVERE,"ImpossibleException in fillHeader:" + e.getMessage(),e);
  }
 finally {
    Standard.context(null);
  }
}

private boolean searchEndMatch(final String itemName){
  for (  Map.Entry<String,Sentence> e : parsedNames.entrySet()) {
    Sentence parsed=e.getValue();
    if (itemName.endsWith(parsed.getOriginalText()) || itemName.endsWith(parsed.getNormalized())) {
      name=e.getKey();
      return true;
    }
  }
  return false;
}

private static byte expectedNorm(final DefaultSimilarity sim,final int length,final float boost){
  return (byte)sim.encodeNormValue(boost / ((float)Math.sqrt(length)));
}

public void testCompareToEqualNeg(){
  byte aBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  byte bBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  int aSign=-1;
  int bSign=-1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  assertEquals(0,aNumber.compareTo(bNumber));
}

@Override public ShapeTileSimplex enlarge(double p_offset){
  if (p_offset == 0)   return this;
  ShapeTileSimplex offset_simplex=offset(p_offset);
  ShapeTileOctagon bounding_oct=bounding_octagon();
  if (bounding_oct.is_NaN())   return ShapeTileSimplex.EMPTY;
  ShapeTileOctagon offset_oct=bounding_oct.offset(p_offset);
  return offset_simplex.intersection(offset_oct.to_Simplex());
}

V remove(Object key,int hash,Object value){
  lock();
  try {
    int c=cnt - 1;
    HE<K,V>[] tab=table;
    int index=hash & (tab.length - 1);
    HE<K,V> first=tab[index];
    HE<K,V> e=first;
    while (e != null && (e.hash != hash || !key.equals(e.k)))     e=e.next;
    V oldValue=null;
    if (e != null) {
      V v=e.v;
      if (value == null || value.equals(v)) {
        oldValue=v;
        ++modCnt;
        HE<K,V> newFirst=e.next;
        for (HE<K,V> p=first; p != e; p=p.next)         newFirst=new HE<K,V>(p.k,p.hash,newFirst,p.v);
        tab[index]=newFirst;
        cnt=c;
      }
    }
    return oldValue;
  }
  finally {
    unlock();
  }
}

public static TreePath pathTillOfKind(final TreePath path,final Tree.Kind kind){
  return pathTillOfKind(path,EnumSet.of(kind));
}

public BigDecimal readF2Dot14(int index){
  throw new UnsupportedOperationException();
}

public int size(){
  return set.size();
}

private void writeAttribute(java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (namespace.equals("")) {
    xmlWriter.writeAttribute(attName,attValue);
  }
 else {
    registerPrefix(xmlWriter,namespace);
    xmlWriter.writeAttribute(namespace,attName,attValue);
  }
}

public void addRenderingHints(Map<?,?> hints){
  mGraphics.addRenderingHints(hints);
}

private void createNewFieldsArray(){
  for (int i=0; i < personFieldsOld.length; i++) {
    personFieldsNew[i]=personFieldsOld[i] + "_link";
  }
}

public void removeAllRelations(){
  for (  BNode inputNode : new LinkedList<BNode>(inputNodes.values())) {
    removeInputNode(inputNode.getId());
  }
  for (  BNode outputNode : new LinkedList<BNode>(outputNodes.values())) {
    removeOutputNode(outputNode.getId());
  }
}

private void addExposedTypes(Class<?> clazz,Class<?> cause){
  if (pruned(clazz)) {
    return;
  }
  boolean alreadyDone=done(clazz);
  visit(clazz);
  recordExposure(clazz,cause);
  if (alreadyDone || pruned(clazz)) {
    return;
  }
  TypeToken<?> token=TypeToken.of(clazz);
  for (  TypeToken<?> superType : token.getTypes()) {
    if (!superType.equals(token)) {
      logger.debug("Adding exposed types from {}, which is a super type token on {}",superType,clazz);
      addExposedTypes(superType,clazz);
    }
  }
  for (  Class innerClass : clazz.getDeclaredClasses()) {
    if (exposed(innerClass.getModifiers())) {
      logger.debug("Adding exposed types from {}, which is an exposed inner class of {}",innerClass,clazz);
      addExposedTypes(innerClass,clazz);
    }
  }
  for (  Field field : clazz.getDeclaredFields()) {
    if (exposed(field.getModifiers())) {
      logger.debug("Adding exposed types from {}, which is an exposed field on {}",field,clazz);
      addExposedTypes(field,clazz);
    }
  }
  for (  Invokable invokable : getExposedInvokables(token)) {
    logger.debug("Adding exposed types from {}, which is an exposed invokable on {}",invokable,clazz);
    addExposedTypes(invokable,clazz);
  }
}

public void storeLogs(File folder){
  String path=folder.getAbsolutePath();
  mLoggerFolder=new LogThis(path);
}

@Override public Object clone(){
  return new LocationPath(this);
}

private Assignment recursiveBackTrackingSearch(CSP csp,Assignment assignment){
  Assignment result=null;
  if (assignment.isComplete(csp.getVariables())) {
    result=assignment;
  }
 else {
    Variable var=selectUnassignedVariable(assignment,csp);
    for (    Object value : orderDomainValues(var,assignment,csp)) {
      assignment.setAssignment(var,value);
      fireStateChanged(assignment,csp);
      if (assignment.isConsistent(csp.getConstraints(var))) {
        DomainRestoreInfo info=inference(var,assignment,csp);
        if (!info.isEmpty())         fireStateChanged(csp);
        if (!info.isEmptyDomainFound()) {
          result=recursiveBackTrackingSearch(csp,assignment);
          if (result != null)           break;
        }
        info.restoreDomains(csp);
      }
      assignment.removeAssignment(var);
    }
  }
  return result;
}

private static JSONObject createFileTransferError(int errorCode,String source,String target,String body,Integer httpStatus){
  JSONObject error=null;
  try {
    error=new JSONObject();
    error.put("code",errorCode);
    error.put("source",source);
    error.put("target",target);
    if (body != null) {
      error.put("body",body);
    }
    if (httpStatus != null) {
      error.put("http_status",httpStatus);
    }
  }
 catch (  JSONException e) {
    Log.e(LOG_TAG,e.getMessage(),e);
  }
  return error;
}

public ArrayList<Value> keys(){
  ArrayList<Value> list=New.arrayList(size);
  for (  Value k : keys) {
    if (k != null && k != ValueNull.DELETED) {
      list.add(k);
    }
  }
  return list;
}

private void close(){
  if (closed) {
    return;
  }
  closed=true;
  try {
    resultSet.close();
  }
 catch (  final SQLException e) {
    logger.error(e,e);
  }
  try {
    if (statement != null) {
      statement.close();
    }
  }
 catch (  final SQLException e) {
    logger.error(e,e);
  }
}

public DeliveryThread(TOMLayer tomLayer,ServiceReplica receiver,Recoverable recoverer,ServerViewController controller){
  super("Delivery Thread");
  this.decided=new LinkedBlockingQueue<>();
  this.tomLayer=tomLayer;
  this.receiver=receiver;
  this.recoverer=recoverer;
  this.controller=controller;
}

protected void addButtonListener(){
  ApplicationInsightsAddDialog dialog=new ApplicationInsightsAddDialog(getShell());
  dialog.open();
  tableViewer.refresh();
}

public int[] toArray(){
  int[] result=new int[size];
  System.arraycopy(array,0,result,0,size);
  return result;
}

public Block obtainBlock(String prototypeName,@Nullable String uuid){
  Block block;
  if (uuid != null) {
    WeakReference<Block> ref=mBlockRefs.get(uuid);
    if (ref != null) {
      block=ref.get();
      if (block != null) {
        throw new IllegalArgumentException("Block with given UUID \"" + uuid + "\" already exists. Duplicate UUIDs not allowed.");
      }
    }
  }
  if (!mBlockTemplates.containsKey(prototypeName)) {
    Log.w(TAG,"Block " + prototypeName + " not found.");
    return null;
  }
  Block.Builder builder=new Block.Builder(mBlockTemplates.get(prototypeName));
  if (uuid != null) {
    builder.setUuid(uuid);
  }
  block=builder.build();
  mBlockRefs.put(block.getId(),new WeakReference<Block>(block));
  return block;
}

public SmsConsoleServiceConfig(){
  Document doc=parseDocument(CONFIG_FILENAME);
  configServices(doc);
  hiddenServices=Collections.unmodifiableSet(services.get(HIDDEN_SERVICES));
}

@Override protected void onSizeChanged(int w,int h,int oldw,int oldh){
  super.onSizeChanged(w,h,oldw,oldh);
  setupBounds(w,h);
  setupPaints();
  invalidate();
}

private static String convertToQuotedString(String s){
  if (s == null || s.isEmpty()) {
    return null;
  }
  if (s.charAt(0) == '"' && s.charAt(s.length() - 1) == '"') {
    return s;
  }
  return '\"' + s + '\"';
}

public PatternObserverExpr(String namespace,String name,Expression[] parameters){
  super(namespace,name,Arrays.asList(parameters));
}

public static String convertStringToHexString(String data){
  return conventBytesToHexString(data.getBytes());
}

public boolean isTransient(){
  return Modifier.isTransient(getAccessFlags());
}

public boolean isForHTTPBasic(){
  return (negoValue != null) ? negoValue.equalsIgnoreCase(HTTP_HTTPBASIC) : false;
}

private String indent(int level){
  final String s="...";
  if (level == 0)   return "";
  StringBuilder sb=new StringBuilder(level * s.length());
  for (int i=0; i < level; i++) {
    sb.append(s);
  }
  return s.toString();
}

public static String cut(String line,IntPredicate testFunction){
  String s="";
  int pos=SubParser.locate(line,testFunction);
  if (pos != -1) {
    s=line.substring(0,pos);
  }
  return s;
}

public void addListener(UpdateManagerListener listener){
  listeners.add(listener);
}

@Override public void run(){
  List<Span> dequeuedSpans=new ArrayList<Span>(maxSpanBatchSize);
  long errorCount=0;
  while (running.get() || queue.size() > 0) {
    Span firstSpan=null;
    try {
      firstSpan=queue.poll(1,TimeUnit.SECONDS);
      if (firstSpan != null) {
        dequeuedSpans.add(firstSpan);
        queue.drainTo(dequeuedSpans,maxSpanBatchSize - 1);
      }
    }
 catch (    InterruptedException ie) {
    }
    startClient();
    if (dequeuedSpans.isEmpty()) {
      continue;
    }
    try {
      List<Event> events=new ArrayList<Event>(dequeuedSpans.size());
      for (      Span span : dequeuedSpans) {
        Map<String,String> headers=new HashMap<String,String>();
        headers.put("SpanId",span.toString());
        headers.put("TracerId",span.getTracerId());
        headers.put("Description",span.getDescription());
        String body=span.toJson();
        Event evt=EventBuilder.withBody(body,Charset.forName("UTF-8"),headers);
        events.add(evt);
      }
      flumeClient.appendBatch(events);
      dequeuedSpans.clear();
      errorCount=0;
    }
 catch (    Exception e) {
      errorCount+=1;
      if (errorCount < MAX_ERRORS) {
        try {
          queue.addAll(dequeuedSpans);
        }
 catch (        IllegalStateException ex) {
          LOG.error("Drop " + dequeuedSpans.size() + " span(s) because writing to HBase failed.");
        }
      }
      closeClient();
      try {
        Thread.sleep(500);
      }
 catch (      InterruptedException e1) {
      }
    }
  }
  closeClient();
}

public void cancelAuthentication(){
synchronized (syncLock) {
    authenticating=false;
    timer.cancel();
    timer.purge();
  }
}

private void checkValidInterval(Duration pollingInterval,int retries,long timeSleptMillis){
  long highSum=0;
  long lowSum=0;
  for (int i=0; i < retries; i++) {
    double currentInterval=pollingInterval.getMillis() * Math.pow(DataflowPipelineJob.DEFAULT_BACKOFF_EXPONENT,i);
    double randomOffset=0.5 * currentInterval;
    highSum+=Math.round(currentInterval + randomOffset);
    lowSum+=Math.round(currentInterval - randomOffset);
  }
  assertThat(timeSleptMillis,allOf(greaterThanOrEqualTo(lowSum),lessThanOrEqualTo(highSum)));
}

public void write(String str,int off,int len) throws IOException {
  if (_outputStream == null)   throw new IOException("Writer closed");
  final int off_plus_len=off + len;
  for (int i=off; i < off_plus_len; ) {
    char c=str.charAt(i++);
    if (c < 0x80) {
      _bytes[_index]=(byte)c;
      if (++_index >= _bytes.length) {
        flushBuffer();
      }
    }
 else {
      write(c);
    }
  }
}

public CommitRecordIndex(IRawStore store,Checkpoint checkpoint,IndexMetadata metadata,boolean readOnly){
  super(store,checkpoint,metadata,readOnly);
  this.ser=new Entry.EntrySerializer();
}

protected String encodeBody(){
  return Long.toString(this.sequenceNumber);
}

public void addContainer(ImageContainer container){
  mContainers.add(container);
}

private void checkSize(final int i){
  if (i >= max_size) {
    final int old_size=max_size;
    max_size+=increment_size;
    if (max_size <= i) {
      max_size=i + increment_size + 2;
    }
    final Rectangle[] temp=items;
    items=new Rectangle[max_size];
    System.arraycopy(temp,0,items,0,old_size);
    increment_size=incrementSize(increment_size);
  }
}

public static double[] genPulseFromFourierMag(double[] mag,double f0){
  int numHarm=mag.length;
  int currentF0=(int)Math.round(f0);
  int T;
  if (currentF0 < 512)   T=512;
 else   T=1024;
  int T2=2 * T;
  double[] pulse=new double[T];
  double[] real=new double[T2];
  double[] imag=new double[T2];
  real[0]=real[T]=0.0;
  for (int i=1; i <= numHarm; i++) {
    real[i]=real[T - i]=real[T + i]=real[T2 - i]=mag[i - 1];
    imag[i]=imag[T - i]=imag[T + i]=imag[T2 - i]=0.0;
  }
  for (int i=(numHarm + 1); i < (T - numHarm); i++) {
    real[i]=real[T - i]=real[T + i]=real[T2 - i]=1.0;
    imag[i]=imag[T - i]=imag[T + i]=imag[T2 - i]=0.0;
  }
  FFT.transform(real,imag,true);
  double sqrt_f0=Math.sqrt(currentF0);
  for (int i=0; i < T; i++)   pulse[i]=real[(i - numHarm) % T] * sqrt_f0;
  return pulse;
}

public double volume(){
  if (cachedVolume < 0) {
    cachedVolume=1.0;
    IHypercube cube=this.region;
    int nd=cube.dimensionality();
    for (int d=1; d <= nd; d++) {
      double right=cube.getRight(d);
      double left=cube.getLeft(d);
      if (Double.isInfinite(right)) {
        right=+1;
      }
      if (Double.isInfinite(left)) {
        left=-1;
      }
      if (left == -1 && right == +1) {
      }
 else {
        cachedVolume*=(right - left);
      }
    }
  }
  return cachedVolume;
}

static String _targetSoFile(String libName,int version){
  Context context=mContext;
  if (null == context) {
    return "";
  }
  String path="/data/data/" + context.getPackageName() + "/files";
  File f=context.getFilesDir();
  if (f != null) {
    path=f.getPath();
  }
  return path + "/lib" + libName+ "bk"+ version+ ".so";
}

@Override public void stopMonitoring(){
  stopMonitoring(false);
}

@Override public Object compute(ArrayList<Map<String,Object>> rows) throws Exception {
  if (column.equals("*")) {
    return rows.size();
  }
  long count=0;
  for (  Map<String,Object> row : rows) {
    if (row.containsKey(column) && (row.get(column) != null)) {
      count++;
    }
  }
  return count;
}

private Property[] parseProperties(final String contents){
  final String[] parts=contents.split(";");
  final List<Property> resultsAsList=new ArrayList<Property>();
  for (  String part : parts) {
    try {
      if (!StringUtils.isEmpty(part.trim())) {
        resultsAsList.add(new Property(part));
      }
    }
 catch (    final Exception e) {
      LOG.warn(e.getMessage(),e);
    }
  }
  return resultsAsList.toArray(new Property[resultsAsList.size()]);
}

public void requestSecondsUntilAccountExpiration(){
  operations.add(PasswordPolicyStateOperationType.GET_SECONDS_UNTIL_ACCOUNT_EXPIRATION);
}

public final boolean equalsIgnoreCase(String a){
  int len=a.length();
  if (_length != len)   return false;
  int offset=_offset;
  char[] buffer=_buffer;
  for (int i=0; i < len; i++) {
    char ca=buffer[offset + i];
    char cb=a.charAt(i);
    if (ca == cb) {
    }
 else     if (Character.toLowerCase(ca) != Character.toLowerCase(cb))     return false;
  }
  return true;
}

public static int[] checkObjectStart(PdfTokenizer lineTokenizer){
  try {
    lineTokenizer.seek(0);
    if (!lineTokenizer.nextToken() || lineTokenizer.getTokenType() != TokenType.Number)     return null;
    int num=lineTokenizer.getIntValue();
    if (!lineTokenizer.nextToken() || lineTokenizer.getTokenType() != TokenType.Number)     return null;
    int gen=lineTokenizer.getIntValue();
    if (!lineTokenizer.nextToken())     return null;
    if (!Arrays.equals(Obj,lineTokenizer.getByteContent()))     return null;
    return new int[]{num,gen};
  }
 catch (  Exception ioe) {
  }
  return null;
}

private Object singleElement(int row,int col){
  Object res=null;
  if (this.isNull == null || !this.isNull[row * this.nFields + col]) {
    res=ArrayFuncs.newInstance(this.types[col],1);
    System.arraycopy(this.data[col],row,res,0,1);
  }
  return res;
}

private char convertToChar(String kurzname){
  char result=KEIN_SIEGEL;
  if (kurzname != null && !kurzname.isEmpty()) {
    if (kurzname.length() > 1) {
      result=kurzname.toCharArray()[1];
    }
 else {
      result=kurzname.toCharArray()[0];
    }
  }
  return result;
}

public NodeSetDTM(NodeIterator iterator,XPathContext xctxt){
  super();
  Node node;
  m_manager=xctxt.getDTMManager();
  while (null != (node=iterator.nextNode())) {
    int handle=xctxt.getDTMHandleFromNode(node);
    addNodeInDocOrder(handle,xctxt);
  }
}

public static Vec meanVector(DataSet dataSet){
  DenseVector dv=new DenseVector(dataSet.getNumNumericalVars());
  meanVector(dv,dataSet);
  return dv;
}

private void makeCacheDirectory(){
  File cacheDir=new File(CACHE_DIRECTORY);
  if (!cacheDir.exists()) {
    cacheDir.mkdir();
  }
}

public void inputKeyevent(int value){
  executeCommandQuietly(adbCommand("shell","input","keyevent","" + value));
  try {
    Thread.sleep(500);
  }
 catch (  InterruptedException e) {
    log.warn("",e);
  }
}

public static void passMockSleep(){
  mockSleepQueue.offer(false);
}

private static File createReserveDiskCacheDir(Context context){
  File cacheDir=StorageUtils.getCacheDirectory(context,false);
  File individualDir=new File(cacheDir,"uil-images");
  if (individualDir.exists() || individualDir.mkdir()) {
    cacheDir=individualDir;
  }
  return cacheDir;
}

JSONStringer close(Scope empty,Scope nonempty,String closeBracket) throws JSONException {
  Scope context=peek();
  if (context != nonempty && context != empty) {
    throw new JSONException("Nesting problem");
  }
  stack.remove(stack.size() - 1);
  if (context == nonempty) {
    newline();
  }
  out.append(closeBracket);
  return this;
}

private QueryBuilder buildSort(){
  QueryBuilder builder=new QueryBuilder();
  Iterator<String> sortIterator=mSortingOrderList.iterator();
  while (sortIterator.hasNext()) {
    builder.append(sortIterator.next());
    if (sortIterator.hasNext())     builder.append(", ");
  }
  return builder;
}

public void init(int mode,byte[] key,byte[] iv){
  context=OpenSslNative.init(context,mode,algorithm,padding,key,iv);
}

private String diff_wordsToCharsMunge(String text,List<String> lineArray,Map<String,Integer> lineHash){
  int lineStart=0;
  int lineEnd=-1;
  String line;
  StringBuilder chars=new StringBuilder();
  while (lineEnd < text.length() - 1) {
    String patternStr="[. :;\\[\\]\\{\\}\\(\\)\\+!?\\-]";
    Pattern pattern=Pattern.compile(patternStr);
    Matcher matcher=pattern.matcher(text);
    matcher.region(lineStart,text.length());
    if (matcher.find()) {
      lineEnd=matcher.start();
    }
 else     lineEnd=-1;
    if (lineEnd == -1) {
      lineEnd=text.length() - 1;
    }
    line=text.substring(lineStart,lineEnd + 1);
    lineStart=lineEnd + 1;
    if (lineHash.containsKey(line)) {
      chars.append(String.valueOf((char)(int)lineHash.get(line)));
    }
 else {
      lineArray.add(line);
      lineHash.put(line,lineArray.size() - 1);
      chars.append(String.valueOf((char)(lineArray.size() - 1)));
    }
  }
  return chars.toString();
}

private void replaceTop(Scope topOfStack){
  stack.set(stack.size() - 1,topOfStack);
}

public boolean hasNext(){
  return index < desc.length();
}

public void registerSessionThread(SessionThread newSession){
synchronized (this) {
    List<SessionThread> toBeRemoved=new ArrayList<SessionThread>();
    for (    SessionThread sessionThread : sessionThreads) {
      if (!sessionThread.isAlive()) {
        Log.d(TAG,"Cleaning up finished session...");
        try {
          sessionThread.join();
          Log.d(TAG,"Thread joined");
          toBeRemoved.add(sessionThread);
          sessionThread.closeSocket();
        }
 catch (        InterruptedException e) {
          Log.d(TAG,"Interrupted while joining");
        }
      }
    }
    for (    SessionThread removeThread : toBeRemoved) {
      sessionThreads.remove(removeThread);
    }
    sessionThreads.add(newSession);
  }
  Log.d(TAG,"Registered session thread");
}

protected IObjectInfo<T> store_impl(Segment<T> segment,ObjectInfo<T> oi){
  if (_invalid)   return null;
  _size.incrementAndGet();
  segment.incrementSize();
  ObjectInfo<T> tail=segment.getTail();
  tail.setForwardRef(oi);
  oi.setBackwardRef(tail);
  segment.setTail(oi);
  return oi;
}

public TeXFormula(){
  parser=new TeXParser("",this,false);
}

public static void grayToBinary(BinaryVariable variable){
  int n=variable.getNumberOfBits();
  BitSet gray=variable.getBitSet();
  variable.set(n - 1,gray.get(n - 1));
  for (int i=n - 2; i >= 0; i--) {
    variable.set(i,variable.get(i + 1) ^ gray.get(i));
  }
}

private void updateTags(Movie movie){
  List<String> availableTags=new ArrayList<>(tagsObservable);
  for (  String tagInMovie : new ArrayList<>(movie.getTags())) {
    boolean tagFound=false;
    for (    String tag : availableTags) {
      if (tagInMovie.equals(tag)) {
        tagFound=true;
        break;
      }
    }
    if (!tagFound) {
      addTag(tagInMovie);
    }
  }
}

protected void removeNextProtocolMessages(List<ProtocolMessage> protocolMessages,int fromIndex){
  for (int i=protocolMessages.size() - 1; i >= fromIndex; i--) {
    protocolMessages.remove(i);
  }
}

public static double sigmoid(double x){
  return 1.0 / (1.0 + Math.pow(Math.E,-x));
}

public void testRadix36Neg(){
  String value="-uhguweut98iu4h3478tq3985pq98yeiuth33485yq4aiuhalai485yiaehasdkr8tywi5uhslei8";
  int radix=36;
  BigInteger aNumber=new BigInteger(value,radix);
  String result=aNumber.toString(radix);
  assertTrue(result.equals(value));
}

public UCIBestMove stop(){
  if (!isConnected()) {
    throw new IllegalStateException("Engine is not connected.");
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("Entering stop(...)");
  }
  UCIBestMove result=null;
synchronized (stopSynch) {
    if (!isProcessingGo()) {
      result=lastBestMove;
      lastBestMove=null;
    }
 else {
      long totalSleepTime=0;
      send("stop");
      while (goRunnable != null && totalSleepTime < 2500) {
        try {
          Thread.sleep(500);
          totalSleepTime+=500;
        }
 catch (        InterruptedException ie) {
        }
      }
      result=lastBestMove;
      lastBestMove=null;
    }
  }
  return result;
}

@Override public boolean supportsDataDefinitionAndDataManipulationTransactions(){
  debugCodeCall("supportsDataDefinitionAndDataManipulationTransactions");
  return false;
}

public static void removeJavaNoOpLogger(Collection<Handler> rmvHnds){
  Logger log=Logger.getLogger("");
  for (  Handler h : log.getHandlers())   log.removeHandler(h);
  if (!F.isEmpty(rmvHnds)) {
    for (    Handler h : rmvHnds)     log.addHandler(h);
  }
}

public void onConfigurationChanged(){
  int curFirst=pager.getCurrentScreen() * PAGE_SIZE;
  calPageSize();
  int newPage=curFirst / PAGE_SIZE;
  removeViewAt(1);
  afterPlatformListGot();
  pager.setCurrentScreen(newPage);
}

private int binarySearch(final int start,final int end,final SizeTester sizeTester,final RectF availableSpace){
  int lastBest=start;
  int low=start;
  int high=end - 1;
  int middle;
  while (low <= high) {
    middle=low + high >>> 1;
    final int midValCmp=sizeTester.onTestSize(middle,availableSpace);
    if (midValCmp < 0) {
      lastBest=low;
      low=middle + 1;
    }
 else     if (midValCmp > 0) {
      high=middle - 1;
      lastBest=high;
    }
 else     return middle;
  }
  return lastBest;
}

protected boolean isValidDomain(String domain){
  Matcher ipDomainMatcher=IP_DOMAIN_PATTERN.matcher(domain);
  if (ipDomainMatcher.matches()) {
    InetAddressValidator inetAddressValidator=InetAddressValidator.getInstance();
    return inetAddressValidator.isValid(ipDomainMatcher.group(1));
  }
  DomainValidator domainValidator=DomainValidator.getInstance(allowLocal);
  return domainValidator.isValid(domain) || domainValidator.isValidTld(domain);
}

public void tableSwitch(final int[] keys,final TableSwitchGenerator generator,final boolean useTable){
  for (int i=1; i < keys.length; ++i) {
    if (keys[i] < keys[i - 1]) {
      throw new IllegalArgumentException("keys must be sorted ascending");
    }
  }
  Label def=newLabel();
  Label end=newLabel();
  if (keys.length > 0) {
    int len=keys.length;
    int min=keys[0];
    int max=keys[len - 1];
    int range=max - min + 1;
    if (useTable) {
      Label[] labels=new Label[range];
      Arrays.fill(labels,def);
      for (int i=0; i < len; ++i) {
        labels[keys[i] - min]=newLabel();
      }
      mv.visitTableSwitchInsn(min,max,def,labels);
      for (int i=0; i < range; ++i) {
        Label label=labels[i];
        if (label != def) {
          mark(label);
          generator.generateCase(i + min,end);
        }
      }
    }
 else {
      Label[] labels=new Label[len];
      for (int i=0; i < len; ++i) {
        labels[i]=newLabel();
      }
      mv.visitLookupSwitchInsn(def,keys,labels);
      for (int i=0; i < len; ++i) {
        mark(labels[i]);
        generator.generateCase(keys[i],end);
      }
    }
  }
  mark(def);
  generator.generateDefault();
  mark(end);
}

public void testRemainderKnuthMultiDigitsByOneDigit(){
  byte aBytes[]={113,-83,123,-5,18,-34,67,39,-29};
  byte bBytes[]={2,-3,-4,-50};
  int aSign=1;
  int bSign=-1;
  byte rBytes[]={2,-37,-60,59};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.remainder(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public void testTimedInvokeAny4() throws Throwable {
  ExecutorService e=new ForkJoinPool(1);
  PoolCleaner cleaner=null;
  try {
    cleaner=cleaner(e);
    long startTime=System.nanoTime();
    List<Callable<String>> l=new ArrayList<Callable<String>>();
    l.add(new NPETask());
    try {
      e.invokeAny(l,LONG_DELAY_MS,MILLISECONDS);
      shouldThrow();
    }
 catch (    ExecutionException success) {
      assertTrue(success.getCause() instanceof NullPointerException);
    }
    assertTrue(millisElapsedSince(startTime) < LONG_DELAY_MS);
  }
  finally {
    if (cleaner != null) {
      cleaner.close();
    }
  }
}

private void parse(File dir){
  File[] xmlFiles=dir.listFiles(new XmlFilter());
  for (  File xmlFile : xmlFiles) {
    parseTestFromXml(xmlFile);
  }
}

public boolean hasNext(int index){
  for (int p=0; p < mask.length; p++) {
    if (mask[p]) {
      if (index <= lastElementIndex[p]) {
        return true;
      }
    }
  }
  return false;
}

public static boolean isExternalStorageAvailable(){
  String state=Environment.getExternalStorageState();
  if (state.equals(Environment.MEDIA_MOUNTED)) {
    return true;
  }
 else {
    return false;
  }
}

public TarEntry(byte[] headerBuf){
  this();
  parseTarHeader(headerBuf);
}

public static void unregisterMbeans(MBeanServer mBeanServer){
  try {
    mBeanServer.unregisterMBean(Log4jMXBeanImp.getObjectName());
    mBeanServer.unregisterMBean(ExceptionMXBeanImp.getObjectName());
    mBeanServer.unregisterMBean(ExceptionDeltaMXBeanImp.getObjectName());
    mBeanServer.unregisterMBean(Log4jDeltaMXBeanImp.getObjectName());
    mBeanServer.unregisterMBean(JamonMXBeanImp.getObjectName());
    mBeanServer.unregisterMBean(HttpStatusMXBeanImp.getObjectName());
    mBeanServer.unregisterMBean(HttpStatusDeltaMXBeanImp.getObjectName());
    unregisterGcMXBean(mBeanServer);
    unregisterMbeansFromPropsFile(mBeanServer);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}

public static DeterministicKey createMasterPrivateKey(byte[] seed) throws HDDerivationException {
  checkArgument(seed.length > 8,"Seed is too short and could be brute forced");
  byte[] i=HDUtils.hmacSha512(MASTER_HMAC_SHA512,seed);
  checkState(i.length == 64,i.length);
  byte[] il=Arrays.copyOfRange(i,0,32);
  byte[] ir=Arrays.copyOfRange(i,32,64);
  Arrays.fill(i,(byte)0);
  DeterministicKey masterPrivKey=createMasterPrivKeyFromBytes(il,ir);
  Arrays.fill(il,(byte)0);
  Arrays.fill(ir,(byte)0);
  return masterPrivKey;
}

public boolean isNANPACountry(String regionCode){
  return nanpaRegions.contains(regionCode);
}

public void parse(InputStream in) throws IOException, SAXException {
  try {
    _xmlReader.setInput(in);
    parseAll();
  }
 catch (  XMLStreamException e) {
    if (e.getNestedException() instanceof IOException)     throw (IOException)e.getNestedException();
    throw new SAXException(e.getMessage());
  }
 finally {
    _xmlReader.reset();
  }
}

@Override public void printStackTrace(PrintStream ps){
  super.printStackTrace(ps);
  if (nested != null)   nested.printStackTrace(ps);
}

public AMPassword(char[] pw){
  int i;
  int length=pw.length;
  cleared=false;
  password=new char[length];
  System.arraycopy(pw,0,password,0,length);
}

public void reset(){
  firstStep=true;
  N3=0;
  N4=0;
  System.arraycopy(IV,0,ofbV,0,IV.length);
  byteCount=0;
  cipher.reset();
}

private static img createControlButtonImage(String name,String js_command,boolean enabled){
  StringBuffer imgName=new StringBuffer("wf" + name);
  if (!enabled)   imgName.append("D");
  imgName.append("24.gif");
  img img=new img(MobileEnv.getImageDirectory(imgName.toString()),name);
  if (enabled)   img.setAlt(Msg.getMsg(AD_Language,name));
  img.setID("imgButton");
  if (js_command != null && js_command.length() > 0 && enabled) {
    img.setOnClick("document." + FORM_NAME + "."+ M_Command+ ".value='"+ name+ "';"+ js_command);
  }
  return img;
}

public String[] toArray() throws Exception {
  return Utils.splitOptions(toCommandLine());
}

public static Set<EvalFactoryNode> recursiveGetChildNodes(EvalFactoryNode currentNode,EvalNodeUtilFactoryFilter filter){
  Set<EvalFactoryNode> result=new LinkedHashSet<EvalFactoryNode>();
  if (filter.consider(currentNode)) {
    result.add(currentNode);
  }
  recursiveGetChildNodes(result,currentNode,filter);
  return result;
}

void dispose(){
  if (popup != null) {
    popup.removeAll();
  }
  popup=null;
}

void checkFrameValue(final Object value){
  if (value == Opcodes.TOP || value == Opcodes.INTEGER || value == Opcodes.FLOAT || value == Opcodes.LONG || value == Opcodes.DOUBLE || value == Opcodes.NULL || value == Opcodes.UNINITIALIZED_THIS) {
    return;
  }
  if (value instanceof String) {
    checkInternalName((String)value,"Invalid stack frame value");
    return;
  }
  if (!(value instanceof Label)) {
    throw new IllegalArgumentException("Invalid stack frame value: " + value);
  }
 else {
    usedLabels.add((Label)value);
  }
}

@Override public void endPrefixMapping(String str) throws SAXException {
}

@Override public void parse(final Cookie cookie,final String value) throws MalformedCookieException {
  if (cookie == null) {
    throw new IllegalArgumentException("Cookie may not be null");
  }
  if (value == null) {
    throw new MalformedCookieException("Missing value for max-age attribute");
  }
  int age=-1;
  try {
    age=Integer.parseInt(value);
  }
 catch (  final NumberFormatException e) {
    age=-1;
  }
  if (age < 0) {
    throw new MalformedCookieException("Invalid max-age attribute.");
  }
  cookie.setExpiryDate(new Date(System.currentTimeMillis() + age * 1000L));
}

public VariableConfigResource(String configuration,TextResource baseResource){
  this(baseResource);
  for (  String configurationLine : configuration.split("\n|\r\n")) {
    String[] configSplit=configurationLine.split("=");
    addConfig(configSplit[0],configSplit[1]);
  }
}

private static String readFile(String fileName){
  String classMethod="UpgradeUtils:readFile : ";
  StringBuilder fileData=new StringBuilder();
  String fileString="";
  try {
    BufferedReader reader=new BufferedReader(new FileReader(fileName));
    char[] buf=new char[1024];
    int numRead=0;
    while ((numRead=reader.read(buf)) != -1) {
      String readData=String.valueOf(buf,0,numRead);
      fileData.append(readData);
      buf=new char[1024];
    }
    reader.close();
    fileString=fileData.toString();
  }
 catch (  Exception e) {
    debug.error(classMethod + "Error reading file : " + fileName);
  }
  return fileString;
}

public ScaleIOSnapshotVolumeResponse snapshotMultiVolume(Map<String,String> id2snapshot,String systemId) throws Exception {
  String uri=ScaleIOConstants.getSnapshotVolumesURI(systemId);
  ScaleIOSnapshotVolumes spVol=new ScaleIOSnapshotVolumes();
  for (  Map.Entry<String,String> entry : id2snapshot.entrySet()) {
    spVol.addSnapshot(entry.getKey(),entry.getValue());
  }
  ClientResponse response=post(URI.create(uri),getJsonForEntity(spVol));
  return getResponseObject(ScaleIOSnapshotVolumeResponse.class,response);
}

@Override public String toString(){
  return "Kernel estimator with bandwidth " + m_Width + " and total weight "+ m_SumOfWeights+ " based on\n"+ m_TM.toString();
}

public synchronized void returnBuf(byte[] buf){
  if (buf == null || buf.length > mSizeLimit) {
    return;
  }
  mBuffersByLastUse.add(buf);
  int pos=Collections.binarySearch(mBuffersBySize,buf,BUF_COMPARATOR);
  if (pos < 0) {
    pos=-pos - 1;
  }
  mBuffersBySize.add(pos,buf);
  mCurrentSize+=buf.length;
  trim();
}

public boolean isDraft(){
  return draft != null && draft.booleanValue();
}

private WeatherUpdater(){
  onTurnReached(0);
}

protected void writeDataToFile(NodeHolder nodeHolder) throws CarbonDataWriterException {
  long offset=writeDataToFile(nodeHolder,fileChannel);
  BlockletInfoColumnar blockletInfo=getBlockletInfo(nodeHolder,offset);
  blockletInfoList.add(blockletInfo);
}

protected Container createSideNavigationComponent(Vector commands){
  return createSideNavigationComponent(commands,null);
}

public static double min(double[] a){
  double min=Double.POSITIVE_INFINITY;
  for (int i=0; i < a.length; i++) {
    if (Double.isNaN(a[i]))     return Double.NaN;
    if (a[i] < min)     min=a[i];
  }
  return min;
}

@Override public void onUpdateSelection(int oldSelStart,int oldSelEnd,int newSelStart,int newSelEnd,int candidatesStart,int candidatesEnd){
  super.onUpdateSelection(oldSelStart,oldSelEnd,newSelStart,newSelEnd,candidatesStart,candidatesEnd);
  if (mComposing.length() > 0 && (newSelStart != candidatesEnd || newSelEnd != candidatesEnd)) {
    mComposing.setLength(0);
    updateCandidates();
    InputConnection ic=getCurrentInputConnection();
    if (ic != null) {
      ic.finishComposingText();
    }
  }
}

public <T>T mapTo(final Class<T> mappingClass){
  return mapTo(mappingClass,null);
}

private ArrayList<SpinnerLanguageElement> createSpinnerLanguages(int avoidLanguage){
  ArrayList<SpinnerLanguageElement> result=new ArrayList<SpinnerLanguageElement>();
  List<String> languages=mSessionOptions.allLanguages();
  for (int i=0; i < languages.size(); ++i) {
    if (i != avoidLanguage) {
      result.add(new SpinnerLanguageElement(languages.get(i),i));
    }
  }
  return result;
}

private String userAgent(){
  return mUserAgent;
}

protected void collectProperties(Class<?> type,Type<?> referenceType,Map<String,Property> properties){
  try {
    BeanInfo beanInfo=Introspector.getBeanInfo(type);
    PropertyDescriptor[] descriptors=beanInfo.getPropertyDescriptors();
    for (    final PropertyDescriptor pd : descriptors) {
      try {
        Method readMethod=getReadMethod(pd,type);
        Method writeMethod=getWriteMethod(pd,type,null);
        Property property=processProperty(pd.getName(),pd.getPropertyType(),readMethod,writeMethod,type,referenceType,properties);
        postProcessProperty(property,pd,readMethod,writeMethod,type,referenceType,properties);
      }
 catch (      final Exception e) {
        throw new RuntimeException("Unexpected error while trying to resolve property " + referenceType.getCanonicalName() + ", ["+ pd.getName()+ "]",e);
      }
    }
  }
 catch (  IntrospectionException e) {
    throw new RuntimeException(e);
  }
}

private void beforeKey() throws JSONException {
  Scope context=peek();
  if (context == Scope.NONEMPTY_OBJECT) {
    out.append(',');
  }
 else   if (context != Scope.EMPTY_OBJECT) {
    throw new JSONException("Nesting problem");
  }
  newline();
  replaceTop(Scope.DANGLING_KEY);
}

public void addHeaderView(View v,Object data,boolean isSelectable){
  if (mAdapter != null && !(mAdapter instanceof HeaderViewListAdapter)) {
    throw new IllegalStateException("Cannot add header view to list -- setAdapter has already been called.");
  }
  FixedViewInfo info=new FixedViewInfo();
  info.view=v;
  info.data=data;
  info.isSelectable=isSelectable;
  mHeaderViewInfos.add(info);
  if (mAdapter != null && mObserver != null) {
    mObserver.onChanged();
  }
}

private void renderOperatorBackground(final Operator operator,final Graphics2D g2){
  Rectangle2D frame=model.getOperatorRect(operator);
  if (frame == null) {
    return;
  }
  RoundRectangle2D background=new RoundRectangle2D.Double(frame.getX() - 7,frame.getY() - 3,frame.getWidth() + 14,frame.getHeight() + 11,OPERATOR_BG_CORNER,OPERATOR_BG_CORNER);
  g2.setColor(Color.WHITE);
  g2.fill(background);
  Rectangle2D nameBounds=OPERATOR_FONT.getStringBounds(operator.getName(),g2.getFontRenderContext());
  if (nameBounds.getWidth() > frame.getWidth()) {
    double relevantWidth=Math.min(nameBounds.getWidth(),frame.getWidth() * MAX_HEADER_RATIO);
    double offset=(frame.getWidth() - relevantWidth) / 2;
    int x=(int)(frame.getX() + offset);
    int padding=5;
    RoundRectangle2D nameBackground=new RoundRectangle2D.Double((int)Math.min(frame.getX() - padding,x - padding),frame.getY() - 3,relevantWidth + 2 * padding,ProcessRendererModel.HEADER_HEIGHT + 3,OPERATOR_BG_CORNER,OPERATOR_BG_CORNER);
    g2.fill(nameBackground);
  }
  renderPortsBackground(operator.getInputPorts(),g2);
  renderPortsBackground(operator.getOutputPorts(),g2);
}

protected void optionWindow(ActionEvent e){
  if (optionsFrame == null) {
    optionsFrame=new JmriJFrame(Bundle.getMessage("OptionsTitle"),false,true);
    optionsPane=optionsFrame.getContentPane();
    optionsPane.setLayout(new BoxLayout(optionsFrame.getContentPane(),BoxLayout.Y_AXIS));
    clearEntry.setSelectedIndex(nxPairs.getClearDownOption());
    JPanel p1=new JPanel();
    clearEntry.setToolTipText("set the action for when the NX buttons are reselected");
    p1.add(new JLabel(Bundle.getMessage("Reselection")));
    p1.add(clearEntry);
    optionsPane.add(p1);
    JPanel p2=new JPanel();
    initializeColorCombo(settingTrackColorBox);
    setColorCombo(settingTrackColorBox,nxPairs.getSettingRouteColor());
    ActionListener settingTrackColorListener=null;
    settingTrackColorBox.addActionListener(settingTrackColorListener);
    p2.add(new JLabel(Bundle.getMessage("RouteSetColour")));
    p2.add(settingTrackColorBox);
    optionsPane.add(p2);
    durationSetting.setText("" + nxPairs.getSettingTimer());
    if (nxPairs.useDifferentColorWhenSetting()) {
      durationSetting.setEnabled(true);
    }
 else {
      durationSetting.setEnabled(false);
    }
    JPanel p3=new JPanel();
    p3.add(new JLabel(Bundle.getMessage("SettingDuration")));
    p3.add(durationSetting);
    optionsPane.add(p3);
    JPanel p4=new JPanel();
    p4.add(dispatcherUse);
    dispatcherUse.setSelected(nxPairs.getDispatcherIntegration());
    optionsPane.add(p4);
    JButton ok=new JButton(Bundle.getMessage("ButtonOK"));
    optionsPane.add(ok);
    ok.addActionListener(null);
  }
  optionsFrame.pack();
  optionsFrame.setVisible(true);
}

public void makeExistingDemandBillInactive(String assessmentNo){
  DemandBillService demandBillService=(DemandBillService)beanProvider.getBean("demandBillService");
  demandBillService.makeDemandBillInactive(assessmentNo);
}

public void write(DataOutput out) throws IOException {
  WritableUtils.writeVInt(out,length);
  out.write(bytes,0,length);
}

int characterClass() throws RESyntaxException {
  if (pattern.charAt(idx) != '[') {
    internalError();
  }
  if ((idx + 1) >= len || pattern.charAt(++idx) == ']') {
    syntaxError("Empty or unterminated class");
  }
  if (idx < len && pattern.charAt(idx) == ':') {
    idx++;
    int idxStart=idx;
    while (idx < len && pattern.charAt(idx) >= 'a' && pattern.charAt(idx) <= 'z') {
      idx++;
    }
    if ((idx + 1) < len && pattern.charAt(idx) == ':' && pattern.charAt(idx + 1) == ']') {
      String charClass=pattern.substring(idxStart,idx);
      Character i=(Character)hashPOSIX.get(charClass);
      if (i != null) {
        idx+=2;
        return node(RE.OP_POSIXCLASS,i.charValue());
      }
      syntaxError("Invalid POSIX character class '" + charClass + "'");
    }
    syntaxError("Invalid POSIX character class syntax");
  }
  int ret=node(RE.OP_ANYOF,0);
  char CHAR_INVALID=Character.MAX_VALUE;
  char last=CHAR_INVALID;
  char simpleChar;
  boolean include=true;
  boolean definingRange=false;
  int idxFirst=idx;
  char rangeStart=Character.MIN_VALUE;
  char rangeEnd;
  RERange range=new RERange();
  while (idx < len && pattern.charAt(idx) != ']') {
    switchOnCharacter: switch (pattern.charAt(idx)) {
case '^':
      include=!include;
    if (idx == idxFirst) {
      range.include(Character.MIN_VALUE,Character.MAX_VALUE,true);
    }
  idx++;
continue;
case '\\':
{
int c;
switch (c=escape()) {
case ESC_COMPLEX:
case ESC_BACKREF:
  syntaxError("Bad character class");
case ESC_CLASS:
if (definingRange) {
  syntaxError("Bad character class");
}
switch (pattern.charAt(idx - 1)) {
case RE.E_NSPACE:
range.include(Character.MIN_VALUE,7,include);
range.include((char)11,include);
range.include(14,31,include);
range.include(33,Character.MAX_VALUE,include);
break;
case RE.E_NALNUM:
range.include(Character.MIN_VALUE,'/',include);
range.include(':','@',include);
range.include('[','^',include);
range.include('`',include);
range.include('{',Character.MAX_VALUE,include);
break;
case RE.E_NDIGIT:
range.include(Character.MIN_VALUE,'/',include);
range.include(':',Character.MAX_VALUE,include);
break;
case RE.E_SPACE:
range.include('\t',include);
range.include('\r',include);
range.include('\f',include);
range.include('\n',include);
range.include('\b',include);
range.include(' ',include);
break;
case RE.E_ALNUM:
range.include('a','z',include);
range.include('A','Z',include);
range.include('_',include);
case RE.E_DIGIT:
range.include('0','9',include);
break;
}
last=CHAR_INVALID;
break;
default :
simpleChar=(char)c;
break switchOnCharacter;
}
}
continue;
case '-':
if (definingRange) {
syntaxError("Bad class range");
}
definingRange=true;
rangeStart=(last == CHAR_INVALID ? 0 : last);
if ((idx + 1) < len && pattern.charAt(++idx) == ']') {
simpleChar=Character.MAX_VALUE;
break;
}
continue;
default :
simpleChar=pattern.charAt(idx++);
break;
}
if (definingRange) {
rangeEnd=simpleChar;
if (rangeStart >= rangeEnd) {
syntaxError("Bad character class");
}
range.include(rangeStart,rangeEnd,include);
last=CHAR_INVALID;
definingRange=false;
}
 else {
if (idx >= len || pattern.charAt(idx) != '-') {
range.include(simpleChar,include);
}
last=simpleChar;
}
}
if (idx == len) {
syntaxError("Unterminated character class");
}
idx++;
instruction[ret + RE.offsetOpdata]=(char)range.num;
for (int i=0; i < range.num; i++) {
emit((char)range.minRange[i]);
emit((char)range.maxRange[i]);
}
return ret;
}

public static byte[] decode(byte[] data){
  int len=data.length / 4 * 3;
  ByteArrayOutputStream bOut=new ByteArrayOutputStream(len);
  try {
    encoder.decode(data,0,data.length,bOut);
  }
 catch (  Exception e) {
    throw new DecoderException("unable to decode base64 data: " + e.getMessage(),e);
  }
  return bOut.toByteArray();
}

@Override public int doFinal(final byte[] out,final int outOff) throws BadCiphertextException {
  complete_=true;
  int written=contentCryptoHandler_.doFinal(out,outOff);
  updateTrailingSignature(out,outOff,written);
  if (cryptoAlgo_.getTrailingSignatureLength() > 0) {
    try {
      CiphertextFooters footer=new CiphertextFooters(trailingSig_.sign());
      byte[] fBytes=footer.toByteArray();
      System.arraycopy(fBytes,0,out,outOff + written,fBytes.length);
      return written + fBytes.length;
    }
 catch (    final SignatureException ex) {
      throw new AwsCryptoException(ex);
    }
  }
 else {
    return written;
  }
}

public void hideAllBudges(){
  for (  RelativeLayout badge : badgeList) {
    if (badge.getVisibility() == VISIBLE)     BadgeHelper.hideBadge(badge);
  }
  badgeSaveInstanceHashMap.clear();
}

public Element render(SVGPlot svgp){
  Element tag=svgp.svgElement(SVGConstants.SVG_G_TAG);
  Element button=svgp.svgRect(x,y,w,h);
  if (!Double.isNaN(r)) {
    SVGUtil.setAtt(button,SVGConstants.SVG_RX_ATTRIBUTE,r);
    SVGUtil.setAtt(button,SVGConstants.SVG_RY_ATTRIBUTE,r);
  }
  SVGUtil.setAtt(button,SVGConstants.SVG_STYLE_ATTRIBUTE,butcss.inlineCSS());
  tag.appendChild(button);
  if (svgp.getIdElement(SVGEffects.LIGHT_GRADIENT_ID) != null) {
    Element light=svgp.svgRect(x,y,w,h);
    if (!Double.isNaN(r)) {
      SVGUtil.setAtt(light,SVGConstants.SVG_RX_ATTRIBUTE,r);
      SVGUtil.setAtt(light,SVGConstants.SVG_RY_ATTRIBUTE,r);
    }
    SVGUtil.setAtt(light,SVGConstants.SVG_STYLE_ATTRIBUTE,"fill:url(#" + SVGEffects.LIGHT_GRADIENT_ID + ");fill-opacity:.5");
    tag.appendChild(light);
  }
  if (svgp.getIdElement(SVGEffects.SHADOW_ID) != null) {
    button.setAttribute(SVGConstants.SVG_FILTER_ATTRIBUTE,"url(#" + SVGEffects.SHADOW_ID + ")");
  }
  if (title != null) {
    Element label=svgp.svgText(x + w * .5,y + h * .7,title);
    label.setAttribute(SVGConstants.SVG_STYLE_ATTRIBUTE,titlecss.inlineCSS());
    tag.appendChild(label);
  }
  return tag;
}

public void add(String gram){
  if (name == null || gram == null)   return;
  int len=gram.length();
  if (len < 1 || len > NGram.N_GRAM)   return;
  ++n_words[len - 1];
  if (freq.containsKey(gram)) {
    freq.put(gram,freq.get(gram) + 1);
  }
 else {
    freq.put(gram,1);
  }
}

public void test_addressing(){
  final Journal store=(Journal)getStore();
  try {
    final RWStrategy bufferStrategy=(RWStrategy)store.getBufferStrategy();
    final RWStore rw=bufferStrategy.getStore();
    final ArrayList<Integer> sizes=new ArrayList<Integer>();
    final TreeMap<Long,Integer> paddrs=new TreeMap<Long,Integer>();
    for (int i=0; i < 100000; i++) {
      final int s=r.nextInt(250) + 1;
      sizes.add(s);
      final int a=rw.alloc(s,null);
      final long pa=rw.physicalAddress(a);
      assertTrue(paddrs.get(pa) == null);
      paddrs.put(pa,a);
    }
    for (int i=0; i < 50; i++) {
      final int s=r.nextInt(500) + 1;
      sizes.add(s);
      final int a=rw.alloc(s,null);
      final long pa=rw.physicalAddress(a);
      paddrs.put(pa,a);
    }
  }
  finally {
    store.destroy();
  }
}

public void handleClientMembership(String clientId,int eventType){
  String notifType=null;
  List<ManagedResource> cleanedUp=null;
  if (eventType == ClientMembershipMessage.LEFT) {
    notifType=NOTIF_CLIENT_LEFT;
    cleanedUp=cleanupBridgeClientResources(clientId);
  }
 else   if (eventType == ClientMembershipMessage.CRASHED) {
    notifType=NOTIF_CLIENT_CRASHED;
    cleanedUp=cleanupBridgeClientResources(clientId);
  }
 else   if (eventType == ClientMembershipMessage.JOINED) {
    notifType=NOTIF_CLIENT_JOINED;
  }
  if (cleanedUp != null) {
    for (    ManagedResource resource : cleanedUp) {
      MBeanUtil.unregisterMBean(resource);
    }
  }
  Helper.sendNotification(this,new Notification(notifType,this.modelMBean,Helper.getNextNotificationSequenceNumber(),clientId));
}

public <V extends Comparable<? super V>>OptionalDouble maxBy(DoubleFunction<V> keyExtractor){
  ObjDoubleBox<V> result=collect(null,null,null);
  return result.a == null ? OptionalDouble.empty() : OptionalDouble.of(result.b);
}

private JLabel addKeybindLabel(JPanel panel,String labelText){
  GridBagConstraints gbc=new GridBagConstraints();
  gbc.anchor=GridBagConstraints.WEST;
  gbc.insets=new Insets(0,0,5,0);
  gbc.gridx=0;
  gbc.gridy=keybindLabelGridYCounter++;
  gbc.weightx=20;
  JLabel jlbl=new JLabel(labelText);
  panel.add(jlbl,gbc);
  return jlbl;
}

public static boolean isLetterOrNumber(int c){
  return isLetter(c) || isNumber(c);
}

public String seasonSummaryStr(){
  setTeamRanks();
  StringBuilder sb=new StringBuilder();
  sb.append(ncgSummaryStr());
  sb.append("\n\n" + userTeam.seasonSummaryStr());
  sb.append("\n\n" + leagueRecords.brokenRecordsStr(getYear(),userTeam.abbr));
  return sb.toString();
}

public void addEndBumper(){
  numEndBumpers++;
  String name="";
  boolean duplicate=true;
  while (duplicate) {
    name="EB" + numEndBumpers;
    if (finder.findPositionablePointByName(name) == null) {
      duplicate=false;
    }
    if (duplicate) {
      numEndBumpers++;
    }
  }
  PositionablePoint o=new PositionablePoint(name,PositionablePoint.END_BUMPER,currentPoint,this);
  pointList.add(o);
  setDirty(true);
}

public Map<String,Object> convertDataToObjects(Map<String,String> data){
  Map<String,Object> results=new HashMap<>();
  if (data != null) {
    for (    String key : data.keySet()) {
      results.put(key,data.get(key));
    }
  }
  return results;
}

public int pixelFor(Color c){
  return pixelFor(c.getRGB());
}

void stripNonCompiledNodes(Node n,Set<String> filesToCompile){
  for (  Node child : n.children()) {
    if (!filesToCompile.contains(child.getSourceFileName())) {
      child.detachFromParent();
    }
  }
}

protected void restoreBaseURI(){
  fBaseURI.pop();
  fLiteralSystemID.pop();
  fExpandedSystemID.pop();
  fBaseURIScope.pop();
  fCurrentBaseURI.setBaseSystemId((String)fBaseURI.peek());
  fCurrentBaseURI.setLiteralSystemId((String)fLiteralSystemID.peek());
  fCurrentBaseURI.setExpandedSystemId((String)fExpandedSystemID.peek());
}

private boolean checkTouchSlop(View child,float dx,float dy){
  if (child == null) {
    return false;
  }
  final boolean checkHorizontal=mCallback.getViewHorizontalDragRange(child) > 0;
  final boolean checkVertical=mCallback.getViewVerticalDragRange(child) > 0;
  if (checkHorizontal && checkVertical) {
    return dx * dx + dy * dy > mTouchSlop * mTouchSlop;
  }
 else   if (checkHorizontal) {
    return Math.abs(dx) > mTouchSlop;
  }
 else   if (checkVertical) {
    return Math.abs(dy) > mTouchSlop;
  }
  return false;
}

public void testToBigIntegerPos1(){
  String a="123809648392384754573567356745735.63567890295784902768787678287E+21";
  BigInteger bNumber=new BigInteger("123809648392384754573567356745735635678902957849027687");
  BigDecimal aNumber=new BigDecimal(a);
  BigInteger result=aNumber.toBigInteger();
  assertTrue("incorrect value",result.equals(bNumber));
}

public static boolean asBoolean(CharSequence string){
  return string.length() > 0;
}

public void initialize(){
  TextureState ts=new TextureState();
  ts.setEnabled(false);
  setRenderState(ts);
  for (int i=0; i < landmarkList.size(); ++i) {
    LandmarkState state=landmarkList.get(i);
    addLandmark(state,false);
  }
  zBufferState=new ZBufferState();
  zBufferState.setFunction(ZBufferState.TestFunction.LessThanOrEqualTo);
  zBufferState.setEnabled(true);
  setRenderState(zBufferState);
}

public List<JCCompilationUnit> enterTrees(List<JCCompilationUnit> roots){
  if (!taskListener.isEmpty()) {
    for (    JCCompilationUnit unit : roots) {
      TaskEvent e=new TaskEvent(TaskEvent.Kind.ENTER,unit);
      taskListener.started(e);
    }
  }
  enter.main(roots);
  if (!taskListener.isEmpty()) {
    for (    JCCompilationUnit unit : roots) {
      TaskEvent e=new TaskEvent(TaskEvent.Kind.ENTER,unit);
      taskListener.finished(e);
    }
  }
  if (needRootClasses || sourceOutput || stubOutput) {
    ListBuffer<JCClassDecl> cdefs=new ListBuffer<>();
    for (    JCCompilationUnit unit : roots) {
      for (List<JCTree> defs=unit.defs; defs.nonEmpty(); defs=defs.tail) {
        if (defs.head instanceof JCClassDecl)         cdefs.append((JCClassDecl)defs.head);
      }
    }
    rootClasses=cdefs.toList();
  }
  for (  JCCompilationUnit unit : roots) {
    inputFiles.add(unit.sourcefile);
  }
  return roots;
}

final V replaceNode(long key,V value,Object cv){
  int hash=spread(key);
  for (Node<V>[] tab=table; ; ) {
    Node<V> f;
    int n, i, fh;
    if (tab == null || (n=tab.length) == 0 || (f=tabAt(tab,i=(n - 1) & hash)) == null) {
      break;
    }
 else     if ((fh=f.hash) == MOVED) {
      tab=helpTransfer(tab,f);
    }
 else {
      V oldVal=null;
      boolean validated=false;
synchronized (f) {
        if (tabAt(tab,i) == f) {
          if (fh >= 0) {
            validated=true;
            for (Node<V> e=f, pred=null; ; ) {
              if ((e.key == key)) {
                V ev=e.val;
                if (cv == null || cv == ev || (ev != null && cv.equals(ev))) {
                  oldVal=ev;
                  if (value != null) {
                    e.val=value;
                  }
 else                   if (pred != null) {
                    pred.next=e.next;
                  }
 else {
                    setTabAt(tab,i,e.next);
                  }
                }
                break;
              }
              pred=e;
              if ((e=e.next) == null) {
                break;
              }
            }
          }
 else           if (f instanceof TreeBin) {
            validated=true;
            TreeBin<V> t=(TreeBin<V>)f;
            TreeNode<V> r, p;
            if ((r=t.root) != null && (p=r.findTreeNode(hash,key)) != null) {
              V pv=p.val;
              if (cv == null || cv == pv || (pv != null && cv.equals(pv))) {
                oldVal=pv;
                if (value != null) {
                  p.val=value;
                }
 else                 if (t.removeTreeNode(p)) {
                  setTabAt(tab,i,untreeify(t.first));
                }
              }
            }
          }
        }
      }
      if (validated) {
        if (oldVal != null) {
          if (value == null) {
            addCount(-1L,-1);
          }
          return oldVal;
        }
        break;
      }
    }
  }
  return null;
}

public static LineByLineFileInputOperator checkpoint(LineByLineFileInputOperator oper,ByteArrayOutputStream bos) throws Exception {
  Kryo kryo=new Kryo();
  Output loutput=new Output(bos);
  kryo.writeObject(loutput,oper);
  loutput.close();
  Input lInput=new Input(bos.toByteArray());
  @SuppressWarnings("unchecked") LineByLineFileInputOperator checkPointedOper=kryo.readObject(lInput,oper.getClass());
  lInput.close();
  return checkPointedOper;
}

public static String explode(Collection<String> collection,String delimiter){
  StringBuilder sb=new StringBuilder();
  if (!collection.isEmpty()) {
    Iterator<String> i=collection.iterator();
    sb.append(i.next());
    while (i.hasNext()) {
      sb.append(delimiter);
      sb.append(i.next());
    }
  }
  return sb.toString();
}

@Override public int hashCode(){
  return fullyQualifiedName.hashCode();
}

@Override public Enumeration<String> enumerateMeasures(){
  Vector<String> newVector=new Vector<String>(1);
  newVector.addElement("measureNumRules");
  return newVector.elements();
}

public static void writeStatistics(TDoubleObjectHashMap<DescriptiveStatistics> statsMap,String keyLabel,String file) throws IOException {
  double[] keys=statsMap.keys();
  Arrays.sort(keys);
  BufferedWriter writer=new BufferedWriter(new FileWriter(file));
  writer.write(keyLabel);
  writer.write(TAB);
  writer.write("mean");
  writer.write(TAB);
  writer.write("median");
  writer.write(TAB);
  writer.write("min");
  writer.write(TAB);
  writer.write("max");
  writer.write(TAB);
  writer.write("n");
  writer.newLine();
  for (  double key : keys) {
    DescriptiveStatistics stats=statsMap.get(key);
    writer.write(String.valueOf(key));
    writer.write(TAB);
    writer.write(String.valueOf(stats.getMean()));
    writer.write(TAB);
    writer.write(String.valueOf(stats.getPercentile(50)));
    writer.write(TAB);
    writer.write(String.valueOf(stats.getMin()));
    writer.write(TAB);
    writer.write(String.valueOf(stats.getMax()));
    writer.write(TAB);
    writer.write(String.valueOf(stats.getN()));
    writer.newLine();
  }
  writer.close();
}

public void actionPerformed(ActionEvent e){
  if (!checkModified())   return;
  if (m_Script.getFilename() == null)   return;
  try {
    m_Script.start(m_Args);
  }
 catch (  Exception ex) {
    ex.printStackTrace();
    JOptionPane.showMessageDialog(FileScriptingPanel.this,"Error running script:\n" + ex,"Error",JOptionPane.ERROR_MESSAGE);
  }
}

static String encodeStub(RMIServer rmiServer,Map<String,?> env) throws IOException {
  if (IIOPHelper.isStub(rmiServer))   return "/ior/" + encodeIIOPStub(rmiServer,env);
 else   return "/stub/" + encodeJRMPStub(rmiServer,env);
}

public int lineToY(int line){
  FontMetrics fm=painter.getFontMetrics();
  return (line - firstLine) * fm.getHeight() - (fm.getLeading() + fm.getMaxDescent());
}

private void handleDoubleClick(DoubleClickEvent e){
  ISelection selection=e.getSelection();
  if (selection instanceof IStructuredSelection) {
    IStructuredSelection structured=(IStructuredSelection)selection;
    if (structured.size() == 1) {
      Object first=structured.getFirstElement();
      if (first instanceof ISVNRemoteFile) {
        openAction.selectionChanged(null,selection);
        openAction.run(null);
      }
 else {
        treeViewer.setExpandedState(first,!treeViewer.getExpandedState(first));
      }
    }
  }
}

public CSVResultSetConfiguration(){
}

protected File chooseFile(int type){
  Frame frame=getFrame();
  File f=null;
  if (fileChooser == null)   fileChooser=new JFileChooser();
  fileChooser.setCurrentDirectory(E00File);
  if (type == 0)   fileChooser.setDialogType(JFileChooser.OPEN_DIALOG);
 else   fileChooser.setDialogType(JFileChooser.SAVE_DIALOG);
  int retval=fileChooser.showDialog(frame,null);
  if (retval == JFileChooser.APPROVE_OPTION)   f=fileChooser.getSelectedFile();
  return f;
}

public void pixellate(FontRenderContext renderFRC,Point2D loc,Point pxResult){
  if (renderFRC == null) {
    renderFRC=frc;
  }
  AffineTransform at=renderFRC.getTransform();
  at.transform(loc,loc);
  pxResult.x=(int)loc.getX();
  pxResult.y=(int)loc.getY();
  loc.setLocation(pxResult.x,pxResult.y);
  try {
    at.inverseTransform(loc,loc);
  }
 catch (  NoninvertibleTransformException e) {
    throw new IllegalArgumentException("must be able to invert frc transform");
  }
}

public static long startTime(){
  return System.nanoTime();
}

@Transactional public int deleteAll(){
  List<T> allEntities=retrieveAll();
  for (  T entity : allEntities) {
    delete(entity);
  }
  return allEntities.size();
}

private GSMessageImpl receiveFromQueue(long timeout) throws ReceiveFromQueueException {
  Transaction txn=m_session.getTransaction();
  if (_logger.isLoggable(Level.FINE)) {
    _logger.log(Level.FINE,"receiveFromQueue(): Receiving from Queue, txn=" + txn);
  }
  try {
    return (GSMessageImpl)m_space.take(m_jmsMessageTemplate,txn,timeout);
  }
 catch (  Exception e) {
    throw new ReceiveFromQueueException(e);
  }
}

public static void writeByteArrayToFile(File file,byte[] data,boolean append) throws IOException {
  OutputStream out=null;
  try {
    out=openOutputStream(file,append);
    out.write(data);
    out.close();
  }
  finally {
    IOUtils.closeQuietly(out);
  }
}

public String findNext(boolean previousFlipped){
  boolean resetIsFlipped=true;
  if (previousFlipped && count > 0) {
    if (!valueIterator.hasNext()) {
      valueIterator=values.iterator();
      index=0;
      isFlipped=true;
      resetIsFlipped=false;
    }
 else {
      index++;
    }
    currentValue=valueIterator.next();
  }
  count++;
  if (resetIsFlipped) {
    isFlipped=false;
  }
  return currentValue;
}

public static boolean isNotEmpty(List<Object> list){
  return !list.isEmpty();
}

private RegistrationResult checkPassword(String password,String confirmPassword){
  if ((password == null) || password.length() == 0) {
    if (debug.messageEnabled()) {
      debug.message("password was missing from the form");
    }
    return RegistrationResult.NO_PASSWORD_ERROR;
  }
 else {
    if (password.length() < requiredPasswordLength) {
      if (debug.messageEnabled()) {
        debug.message("password was not long enough");
      }
      return RegistrationResult.PASSWORD_TOO_SHORT;
    }
    if ((confirmPassword == null) || confirmPassword.length() == 0) {
      if (debug.messageEnabled()) {
        debug.message("no confirmation password");
      }
      return RegistrationResult.NO_CONFIRMATION_ERROR;
    }
 else {
      if (!password.equals(confirmPassword)) {
        return RegistrationResult.PASSWORD_MISMATCH_ERROR;
      }
    }
  }
  return RegistrationResult.NO_ERROR;
}

private static LDAPFilter createANDFilter(FilterSet filterSet) throws LDAPException, IOException {
  List<JAXBElement<?>> list=filterSet.getFilterGroup();
  ArrayList<RawFilter> filters=new ArrayList<>(list.size());
  for (  JAXBElement<?> filter : list) {
    filters.add(createFilter(filter));
  }
  return LDAPFilter.createANDFilter(filters);
}

void calculateUtility(FiringPlan firingPlan,int overheatTolerance,boolean shooterIsAero){
  int overheat=0;
  if (firingPlan.getHeat() > overheatTolerance) {
    overheat=firingPlan.getHeat() - overheatTolerance;
  }
  double modifier=1;
  modifier+=calcCommandUtility(firingPlan.getTarget());
  modifier+=calcStrategicBuildingTargetUtility(firingPlan.getTarget());
  modifier+=calcPriorityUnitTargetUtility(firingPlan.getTarget());
  double utility=0;
  utility+=DAMAGE_UTILITY * firingPlan.getExpectedDamage();
  utility+=CRITICAL_UTILITY * firingPlan.getExpectedCriticals();
  utility+=KILL_UTILITY * firingPlan.getKillProbability();
  utility*=calcTargetPotentialDamageMultiplier(firingPlan.getTarget());
  utility+=TARGET_HP_FRACTION_DEALT_UTILITY * calcDamageAllocationUtility(firingPlan.getTarget(),firingPlan.getExpectedDamage());
  utility-=calcCivilianTargetDisutility(firingPlan.getTarget());
  utility*=modifier;
  utility-=(shooterIsAero ? OVERHEAT_DISUTILITY_AERO : OVERHEAT_DISUTILITY) * overheat;
  utility-=(firingPlan.getTarget() instanceof MechWarrior) ? EJECTED_PILOT_DISUTILITY : 0;
  firingPlan.setUtility(utility);
}

public void put(String key,double value){
  if (value == Double.POSITIVE_INFINITY) {
    put(key,"INF");
  }
 else   if (value == Double.NEGATIVE_INFINITY) {
    put(key,"-INF");
  }
 else {
    put(key,Double.toString(value));
  }
}

public void test_fill$FIIF(){
  float val=Float.MAX_VALUE;
  float d[]=new float[1000];
  Arrays.fill(d,400,d.length,val);
  for (int i=0; i < 400; i++)   assertTrue("Filled elements not in range",!(d[i] == val));
  for (int i=400; i < d.length; i++)   assertTrue("Failed to fill float array correctly",d[i] == val);
  try {
    Arrays.fill(d,10,0,val);
    fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    Arrays.fill(d,-10,0,val);
    fail("ArrayIndexOutOfBoundsException expected");
  }
 catch (  ArrayIndexOutOfBoundsException e) {
  }
  try {
    Arrays.fill(d,10,d.length + 1,val);
    fail("ArrayIndexOutOfBoundsException expected");
  }
 catch (  ArrayIndexOutOfBoundsException e) {
  }
}

public static long persianToJulian(long year,int month,int day){
  return 365L * ((ceil(year - 474L,2820D) + 474L) - 1L) + ((long)Math.floor((682L * (ceil(year - 474L,2820D) + 474L) - 110L) / 2816D)) + (PersianCalendarConstants.PERSIAN_EPOCH - 1L) + 1029983L * ((long)Math.floor((year - 474L) / 2820D)) + (month < 7 ? 31 * month : 30 * month + 6) + day;
}

@Override public void mouseDragged(MouseEvent evt){
  int xTrans=0;
  int yTrans=0;
  if (slider.getSnapToTicks()) {
    int pos=getLocationForValue(getSnappedValue(evt));
    if (pos > -1) {
      if (slider.getOrientation() == JSlider.HORIZONTAL) {
        xTrans=pos - evt.getX() + offset;
        evt.translatePoint(xTrans,0);
      }
 else {
        yTrans=pos - evt.getY() + offset;
        evt.translatePoint(0,yTrans);
      }
    }
  }
  delegate.mouseDragged(evt);
  evt.translatePoint(xTrans,yTrans);
}

@Override final Node<K,V> find(int h,Object k){
  if (k != null) {
    for (Node<K,V> e=first; e != null; e=e.next) {
      int s;
      K ek;
      if (((s=lockState) & (WAITER | WRITER)) != 0) {
        if (e.hash == h && ((ek=e.key) == k || (ek != null && k.equals(ek))))         return e;
      }
 else       if (U.compareAndSwapInt(this,LOCKSTATE,s,s + READER)) {
        TreeNode<K,V> r, p;
        try {
          p=((r=root) == null ? null : r.findTreeNode(h,k,null));
        }
  finally {
          Thread w;
          int ls;
          do {
          }
 while (!U.compareAndSwapInt(this,LOCKSTATE,ls=lockState,ls - READER));
          if (ls == (READER | WAITER) && (w=waiter) != null)           LockSupport.unpark(w);
        }
        return p;
      }
    }
  }
  return null;
}

public void stopEnumeration(EnumerationDeletionContext aws){
  aws.computeEnumerationRequest.enumerationAction=EnumerationAction.STOP;
  handleEnumerationRequestForDeletion(aws);
}

public static void doRestart(Context c){
  try {
    if (c != null) {
      PackageManager pm=c.getPackageManager();
      if (pm != null) {
        Intent mStartActivity=pm.getLaunchIntentForPackage(c.getPackageName());
        if (mStartActivity != null) {
          mStartActivity.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
          int mPendingIntentId=223344;
          PendingIntent mPendingIntent=PendingIntent.getActivity(c,mPendingIntentId,mStartActivity,PendingIntent.FLAG_CANCEL_CURRENT);
          AlarmManager mgr=(AlarmManager)c.getSystemService(Context.ALARM_SERVICE);
          mgr.set(AlarmManager.RTC,System.currentTimeMillis() + 100,mPendingIntent);
          System.exit(0);
        }
 else {
          Log.e("AppRestarter","Was not able to restart application, mStartActivity null");
        }
      }
 else {
        Log.e("AppRestarter","Was not able to restart application, PM null");
      }
    }
 else {
      Log.e("AppRestarter","Was not able to restart application, Context null");
    }
  }
 catch (  Exception ex) {
    Log.e("AppRestarter","Was not able to restart application");
  }
}

public Collection<Object> values(){
  ArrayList<Object> answer=new ArrayList<Object>(readMethods.size());
  for (Iterator<Object> iter=valueIterator(); iter.hasNext(); ) {
    answer.add(iter.next());
  }
  return Collections.unmodifiableList(answer);
}

protected DateTimeData parse(String str) throws SchemaDateTimeException {
  DateTimeData date=new DateTimeData(str,this);
  int len=str.length();
  int end=getYearMonth(str,0,len,date);
  date.day=DAY;
  parseTimeZone(str,end,len,date);
  validateDateTime(date);
  saveUnnormalized(date);
  if (date.utc != 0 && date.utc != 'Z') {
    normalize(date);
  }
  date.position=0;
  return date;
}

public ArrayVal(double[] values){
  this.array=new double[values.length];
  for (int i=0; i < array.length; i++) {
    array[i]=values[i];
  }
  hashcode=Arrays.hashCode(array);
}

public void addChild(String child){
  if (child == null) {
    return;
  }
  String childPath=path.endsWith("/") ? path + child : path + "/" + child;
  children.add(new ZkNode(childPath));
}

@VisibleForTesting public static boolean sendToTMaster(String command,String topologyName,SchedulerStateManagerAdaptor stateManager,NetworkUtils.TunnelConfig tunnelConfig){
  LOG.fine("Fetching TMaster location for topology: " + topologyName);
  TopologyMaster.TMasterLocation location=stateManager.getTMasterLocation(topologyName);
  if (location == null) {
    LOG.severe("Failed to fetch TMaster Location for topology: " + topologyName);
    return false;
  }
  LOG.fine("Fetched TMaster location for topology: " + topologyName);
  String url=String.format("http://%s:%d/%s?topologyid=%s",location.getHost(),location.getControllerPort(),command,location.getTopologyId());
  try {
    URL endpoint=new URL(url);
    LOG.fine("HTTP URL for TMaster: " + endpoint);
    return sendGetRequest(endpoint,command,tunnelConfig);
  }
 catch (  MalformedURLException e) {
    throw new RuntimeException("Invalid URL for tmaster endpoint: " + url,e);
  }
}

public int addPadding(byte[] in,int inOff){
  byte code=(byte)(in.length - inOff);
  while (inOff < (in.length - 1)) {
    in[inOff]=(byte)random.nextInt();
    inOff++;
  }
  in[inOff]=code;
  return code;
}

public void update(long duration,TimeUnit unit){
  update(unit.toNanos(duration));
}

public static String fromDoc2String(Document doc) throws Exception {
  KXmlSerializer serializer=new KXmlSerializer();
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(bos);
  try {
    serializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output",true);
    serializer.setOutput(dos,XformConstants.DEFAULT_CHARACTER_ENCODING);
    doc.write(serializer);
    serializer.flush();
  }
 catch (  Exception e) {
    e.printStackTrace();
    return null;
  }
  return new String(bos.toByteArray(),XformConstants.DEFAULT_CHARACTER_ENCODING);
}

public int addOrderTerm(GenericValue orderTerm){
  orderTerms.add(orderTerm);
  return orderTerms.indexOf(orderTerm);
}

public static int checkActions(Map<String,Object> entry){
  boolean ip6=false;
  boolean ip4=false;
  String actions=null;
  if (entry.containsKey(StaticFlowEntryPusher.COLUMN_ACTIONS) || entry.containsKey(StaticFlowEntryPusher.COLUMN_INSTR_APPLY_ACTIONS) || entry.containsKey(StaticFlowEntryPusher.COLUMN_INSTR_WRITE_ACTIONS)) {
    if (entry.containsKey(StaticFlowEntryPusher.COLUMN_ACTIONS)) {
      actions=(String)entry.get(StaticFlowEntryPusher.COLUMN_ACTIONS);
    }
 else     if (entry.containsKey(StaticFlowEntryPusher.COLUMN_INSTR_APPLY_ACTIONS)) {
      actions=(String)entry.get(StaticFlowEntryPusher.COLUMN_INSTR_APPLY_ACTIONS);
    }
 else     if (entry.containsKey(StaticFlowEntryPusher.COLUMN_INSTR_WRITE_ACTIONS)) {
      actions=(String)entry.get(StaticFlowEntryPusher.COLUMN_INSTR_WRITE_ACTIONS);
    }
    if (actions.contains(MatchUtils.STR_ICMPV6_CODE) || actions.contains(MatchUtils.STR_ICMPV6_TYPE) || actions.contains(MatchUtils.STR_IPV6_DST)|| actions.contains(MatchUtils.STR_IPV6_SRC)|| actions.contains(MatchUtils.STR_IPV6_FLOW_LABEL)|| actions.contains(MatchUtils.STR_IPV6_ND_SSL)|| actions.contains(MatchUtils.STR_IPV6_ND_TARGET)|| actions.contains(MatchUtils.STR_IPV6_ND_TTL)) {
      ip6=true;
    }
    if (actions.contains(MatchUtils.STR_NW_SRC) || actions.contains(MatchUtils.STR_NW_DST) || actions.contains(MatchUtils.STR_ARP_OPCODE)|| actions.contains(MatchUtils.STR_ARP_SHA)|| actions.contains(MatchUtils.STR_ARP_DHA)|| actions.contains(MatchUtils.STR_ARP_SPA)|| actions.contains(MatchUtils.STR_ARP_DPA)|| actions.contains(MatchUtils.STR_ICMP_CODE)|| actions.contains(MatchUtils.STR_ICMP_TYPE)) {
      ip4=true;
    }
  }
  if (ip6 == false && ip4 == false) {
    return 0;
  }
 else   if (ip6 == false && ip4 == true) {
    return 1;
  }
 else   if (ip6 == true && ip4 == false) {
    return 2;
  }
 else {
    return -1;
  }
}

public String toString(){
  StringBuilder stringBuilder=new StringBuilder();
  for (  ValidationErrorObject error : errors) {
    stringBuilder.append(error.toString());
  }
  return stringBuilder.toString();
}

public static ObservableStringValue decision(ObservableBooleanValue condition,ObservableStringValue ifTrue,ObservableStringValue ifFalse){
  StringProperty ret=new SimpleStringProperty();
  condition.addListener(null);
  ifTrue.addListener(null);
  ifFalse.addListener(null);
  ret.set(condition.get() ? ifTrue.get() : ifFalse.get());
  return ret;
}

public static final boolean readFromStream(InputStream in,byte[] buf,int offset,int len) throws IOException {
  int totalBytesRead=0;
  while (totalBytesRead < len) {
    int bytesRead=in.read(buf,offset + totalBytesRead,len - totalBytesRead);
    if (bytesRead < 0) {
      return false;
    }
    totalBytesRead+=bytesRead;
  }
  return true;
}

public static Field findStaticField(Class<?> type,String name) throws NoSuchFieldException {
  Field field=findField(type,name);
  if (!Modifier.isStatic(field.getModifiers())) {
    throw new NoSuchFieldException("Field '" + name + "' is not static");
  }
  return field;
}

public void newBraces(EditorState editorState,char ch){
  String casName=argumentHelper.readCharacters(editorState);
  if (ch == FUNCTION_OPEN_KEY && metaModel.isGeneral(casName)) {
    delCharacters(editorState,casName.length());
    newFunction(editorState,casName);
  }
 else   if (ch == FUNCTION_OPEN_KEY && metaModel.isFunction(casName)) {
    delCharacters(editorState,casName.length());
    newFunction(editorState,casName);
  }
 else {
    newArray(editorState,1,ch);
  }
}

@Override public Xid[] recover(int flag) throws XAException {
  debugCodeCall("recover",quoteFlags(flag));
  checkOpen();
  try (Statement stat=physicalConn.createStatement()){
    ResultSet rs=stat.executeQuery("SELECT * FROM " + "INFORMATION_SCHEMA.IN_DOUBT ORDER BY TRANSACTION");
    ArrayList<Xid> list=New.arrayList();
    while (rs.next()) {
      String tid=rs.getString("TRANSACTION");
      int id=getNextId(XID);
      Xid xid=new JdbcXid(factory,id,tid);
      list.add(xid);
    }
    rs.close();
    Xid[] result=new Xid[list.size()];
    list.toArray(result);
    if (list.size() > 0) {
      prepared=true;
    }
    return result;
  }
 catch (  SQLException e) {
    XAException xa=new XAException(XAException.XAER_RMERR);
    xa.initCause(e);
    throw xa;
  }
}

public void bind(Texture texture){
  faces.forEach(null);
}

public final void clearPassword(){
  Arrays.fill(password,'?');
  password=null;
}

private static int NewCharArray(JNIEnvironment env,int length){
  if (traceJNI)   VM.sysWrite("JNI called: NewCharArray  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    char[] newArray=new char[length];
    return env.pushJNIRef(newArray);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
    return 0;
  }
}

private void initQuadProgram(){
  glUseProgram(quadProgram);
  int texUniform=glGetUniformLocation(quadProgram,"tex");
  glUniform1i(texUniform,0);
  glUseProgram(0);
}

public void put(E e) throws InterruptedException {
  if (e == null)   throw new NullPointerException();
  int c=-1;
  Node<E> node=new Node<E>(e);
  final ReentrantLock putLock=this.putLock;
  final AtomicInteger count=this.count;
  putLock.lockInterruptibly();
  try {
    while (count.get() == capacity) {
      notFull.await();
    }
    enqueue(node);
    c=count.getAndIncrement();
    if (c + 1 < capacity)     notFull.signal();
  }
  finally {
    putLock.unlock();
  }
  if (c == 0)   signalNotEmpty();
}

public static boolean logFileZipped(String file){
  return file.endsWith(".bz2") || file.endsWith(".gz") || file.endsWith(".xz");
}

private void validateHasChecksumFile(File archiveFile) throws InvalidArchiveUpdateException {
  try {
    resolveChecksumFile(extractFileToDirectory(archiveFile,CHECKSUMS_FILE_IN_OPENIDM));
  }
 catch (  Exception e) {
    throw new InvalidArchiveUpdateException(archiveFile.getName(),"The archive " + archiveFile.getName() + " does not appear to contain a checksums file.",e);
  }
}

protected String ratsProblem(){
  final String text="Mayor Chalmers shouts: Ados City is being invaded by #rats!" + " Anyone who will help to clean up the city, will be rewarded!";
  return (text);
}

public Class<?> lookupEntityClass(Class<?> objClass){
  for (Class<?> cls=objClass; cls != null; cls=cls.getSuperclass()) {
    if (entityBindings.containsKey(cls) || cls.isAnnotationPresent(Entity.class)) {
      return cls;
    }
  }
  throw new IllegalArgumentException("Unknown Entity " + objClass);
}

private boolean isWhitespace(int position){
  if (_len >= 0 && position >= _len) {
    return false;
  }
  return Character.isWhitespace(_working[position]);
}

private void collectWrapperClasses(ClassLoader cl,String pkg,File file) throws Exception {
  for (  File f : file.listFiles()) {
    if (f.isDirectory()) {
      collectWrapperClasses(cl,pkg + f.getName() + ".",f);
    }
 else {
      addWrapperClassToWrapperClassesList(cl,pkg,f);
    }
  }
}

public void clearImages(){
  chunks.clear();
  markers.clear();
  redraw(true);
  shift_x=0;
  shift_y=0;
  zoom_level_pos=7;
  zoom_level=1;
}

public void test_fill$JIIJ(){
  long d[]=new long[1000];
  Arrays.fill(d,400,d.length,Long.MAX_VALUE);
  for (int i=0; i < 400; i++)   assertTrue("Filled elements not in range",!(d[i] == Long.MAX_VALUE));
  for (int i=400; i < d.length; i++)   assertTrue("Failed to fill long array correctly",d[i] == Long.MAX_VALUE);
  try {
    Arrays.fill(d,10,0,Long.MIN_VALUE);
    fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    Arrays.fill(d,-10,0,Long.MAX_VALUE);
    fail("ArrayIndexOutOfBoundsException expected");
  }
 catch (  ArrayIndexOutOfBoundsException e) {
  }
  try {
    Arrays.fill(d,10,d.length + 1,Long.MAX_VALUE);
    fail("ArrayIndexOutOfBoundsException expected");
  }
 catch (  ArrayIndexOutOfBoundsException e) {
  }
}

public Object extFunction(String ns,String funcName,Vector argVec,Object methodKey,ExpressionContext exprContext) throws javax.xml.transform.TransformerException {
  Object result=null;
  if (null != ns) {
    ExtensionHandler extNS=(ExtensionHandler)m_extensionFunctionNamespaces.get(ns);
    if (null != extNS) {
      try {
        result=extNS.callFunction(funcName,argVec,methodKey,exprContext);
      }
 catch (      javax.xml.transform.TransformerException e) {
        throw e;
      }
catch (      Exception e) {
        throw new javax.xml.transform.TransformerException(e);
      }
    }
 else {
      throw new XPathProcessorException(XSLMessages.createMessage(XSLTErrorResources.ER_EXTENSION_FUNC_UNKNOWN,new Object[]{ns,funcName}));
    }
  }
  return result;
}

private static void addComponent(final JPanel panel,final Component component,final String description,final String hint){
  final JPanel settingPanel=new JPanel(new BorderLayout());
  settingPanel.setBorder(STANDARD_EMPTY_BORDER);
  settingPanel.add(new JLabel(description),BorderLayout.CENTER);
  final JPanel innerPanel=new JPanel(new BorderLayout());
  innerPanel.add(component,BorderLayout.CENTER);
  final JHintIcon hintPopup=new JHintIcon(hint);
  hintPopup.setBorder(new EmptyBorder(0,3,0,0));
  innerPanel.add(hintPopup,BorderLayout.EAST);
  settingPanel.add(innerPanel,BorderLayout.EAST);
  panel.add(settingPanel);
}

private void writeAttribute(java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (namespace.equals("")) {
    xmlWriter.writeAttribute(attName,attValue);
  }
 else {
    registerPrefix(xmlWriter,namespace);
    xmlWriter.writeAttribute(namespace,attName,attValue);
  }
}

public ReversedLinesFileReader(final File file,final int blockSize,final String encoding) throws IOException {
  this(file,blockSize,Charsets.toCharset(encoding));
}

private void onConnect(){
  connectionState=ConnectionState.Connected;
  checkForUpdatedFlight=true;
  subscribe(String.format(trafficAlertChannel,flightId));
  subscribe(String.format(situationalAwarenessChannel,flightId));
}

public static double cdf(double x,double sigma){
  if (x <= 0.) {
    return 0.;
  }
  final double xs=x / sigma;
  return 1. - Math.exp(-.5 * xs * xs);
}

public double gaussianShortfall(double target){
  final CumulativeNormalDistribution gIntegral=new CumulativeNormalDistribution(mean(),standardDeviation());
  return gIntegral.op(target);
}

@Override public int read(char ch[],int offset,int length) throws IOException {
  int byteLength=length << 1;
  if (byteLength > fBuffer.length) {
    byteLength=fBuffer.length;
  }
  int byteCount=fInputStream.read(fBuffer,0,byteLength);
  if (byteCount == -1) {
    return -1;
  }
  if ((byteCount & 1) != 0) {
    int b=fInputStream.read();
    if (b == -1) {
      expectedTwoBytes();
    }
    fBuffer[byteCount++]=(byte)b;
  }
  final int charCount=byteCount >> 1;
  if (fIsBigEndian) {
    processBE(ch,offset,charCount);
  }
 else {
    processLE(ch,offset,charCount);
  }
  return charCount;
}

public static void endWrapper(Writer writer) throws IOException {
  writer.write("});\n");
  writer.write("}(typeof define==='function' && define.amd ? define : function (factory) {\n");
  writer.write("if (typeof exports!=='undefined') { factory(require, exports, module);\n");
  writer.write("} else { throw 'no module loader'; }\n");
  writer.write("}));\n");
}

protected Document createConfigurationDocument(AVList params){
  Document doc=super.createConfigurationDocument(params);
  if (doc == null || doc.getDocumentElement() == null)   return doc;
  DataConfigurationUtils.createWMSLayerConfigElements(params,doc.getDocumentElement());
  return doc;
}

public void registerCallback(String challenge,ChallengeCallbackPlugin plugin,HttpMessage attack){
  cleanExpiredCallbacks();
  regCallbacks.put(challenge,new RegisteredCallback(plugin,attack));
}

public static double min(Array array) throws PageException {
  if (array.getDimension() > 1)   throw new ExpressionException("can only get max value from 1 dimensional arrays");
  if (array.size() == 0)   return 0;
  double rtn=_toDoubleValue(array,1);
  int len=array.size();
  try {
    for (int i=2; i <= len; i++) {
      double v=_toDoubleValue(array,i);
      if (rtn > v)       rtn=v;
    }
  }
 catch (  PageException e) {
    throw new ExpressionException("exception while execute array operation: " + e.getMessage());
  }
  return rtn;
}

public static byte[] writeToArray(NSObject root) throws IOException {
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  write(bout,root);
  return bout.toByteArray();
}

private static void loadLibraryResource(String resourceSubdirectoryName,String libraryName,String tempSubdirectoryName,String... dependentLibraryNames) throws Throwable {
  for (  String dependentLibraryName : dependentLibraryNames) {
    logger.log(level,"Library " + libraryName + " depends on "+ dependentLibraryName);
    String dependentResourceSubdirectoryName=resourceSubdirectoryName + "/" + osString()+ "/"+ archString();
    String dependentLibraryTempSubDirectoryName=libraryName + "_dependents" + File.separator+ osString()+ File.separator+ archString()+ File.separator;
    loadLibraryResource(dependentResourceSubdirectoryName,dependentLibraryName,dependentLibraryTempSubDirectoryName);
  }
  String libraryFileName=createLibraryFileName(libraryName);
  File libraryTempFile=createTempFile(tempSubdirectoryName,libraryFileName);
  if (!libraryTempFile.exists()) {
    String libraryResourceName=resourceSubdirectoryName + "/" + libraryFileName;
    logger.log(level,"Writing resource  " + libraryResourceName);
    logger.log(level,"to temporary file " + libraryTempFile);
    writeResourceToFile(libraryResourceName,libraryTempFile);
  }
  logger.log(level,"Loading library " + libraryTempFile);
  System.load(libraryTempFile.toString());
  logger.log(level,"Loading library " + libraryTempFile + " DONE");
}

private JobDefinition createJobDefinition() throws Exception {
  namespaceDaoTestHelper.createNamespaceEntity(TEST_ACTIVITI_NAMESPACE_CD);
  JobDefinitionCreateRequest request=jobDefinitionServiceTestHelper.createJobDefinitionCreateRequest();
  JobDefinition jobDefinition=jobDefinitionService.createJobDefinition(request,false);
  validateJobDefinition(jobDefinition);
  return jobDefinition;
}

private WebSocketInputStream openInputStream(Socket socket) throws WebSocketException {
  try {
    return new WebSocketInputStream(new BufferedInputStream(socket.getInputStream()));
  }
 catch (  IOException e) {
    throw new WebSocketException(WebSocketError.SOCKET_INPUT_STREAM_FAILURE,"Failed to get the input stream of the raw socket: " + e.getMessage(),e);
  }
}

@Override protected void drawFirstPassShape(Graphics2D g2,int pass,int series,int item,Shape shape){
  if (isShadowPass(pass)) {
    if (getWallPaint() != null) {
      g2.setStroke(getItemStroke(series,item));
      g2.setPaint(getWallPaint());
      g2.translate(getXOffset(),getYOffset());
      g2.draw(shape);
      g2.translate(-getXOffset(),-getYOffset());
    }
  }
 else {
    super.drawFirstPassShape(g2,pass,series,item,shape);
  }
}

public static double asDouble(String str,double def){
  try {
    return Double.parseDouble(str);
  }
 catch (  NumberFormatException e) {
    return def;
  }
}

public JMenu createHelpMenu(){
  ShowHelpAction helpAction=new ShowHelpAction("Pages/Network.html");
  JMenu helpMenu=new JMenu("Help");
  helpMenu.add(helpAction);
  return helpMenu;
}

@Override public void addFocusables(ArrayList<View> views,int direction,int focusableMode){
  final int focusableCount=views.size();
  final int descendantFocusability=getDescendantFocusability();
  if (descendantFocusability != FOCUS_BLOCK_DESCENDANTS) {
    for (int i=0; i < getChildCount(); i++) {
      final View child=getChildAt(i);
      if (child.getVisibility() == VISIBLE) {
        ItemInfo ii=infoForChild(child);
        if (ii != null && ii.position == mCurItem) {
          child.addFocusables(views,direction,focusableMode);
        }
      }
    }
  }
  if (descendantFocusability != FOCUS_AFTER_DESCENDANTS || (focusableCount == views.size())) {
    if (!isFocusable()) {
      return;
    }
    if ((focusableMode & FOCUSABLES_TOUCH_MODE) == FOCUSABLES_TOUCH_MODE && isInTouchMode() && !isFocusableInTouchMode()) {
      return;
    }
    if (views != null) {
      views.add(this);
    }
  }
}

public static void expandDigits(String numberString,WordRelation wordRelation,Item tokenItem){
  int numberDigits=numberString.length();
  for (int i=0; i < numberDigits; i++) {
    char digit=numberString.charAt(i);
    if (isDigit(digit)) {
      wordRelation.addWord(tokenItem,digit2num[numberString.charAt(i) - '0']);
    }
 else {
      wordRelation.addWord(tokenItem,"umpty");
    }
  }
}

public String longestMatch(String input){
  TrieNode node=root;
  String result=null;
  for (int i=input.length() - 1; i >= 0; i--) {
    node=node.getChild(input.charAt(i));
    if (node == null)     break;
    if (node.isTerminal())     result=input.substring(i);
  }
  return result;
}

public void testMapSubClass() throws Exception {
  ObjectMapper mapper=new ObjectMapper();
  MapSubClass result=mapper.readValue("{\"a\":true }",MapSubClass.class);
  assertEquals(1,result.size());
  Object value=result.get("a");
  assertEquals(BooleanWrapper.class,value.getClass());
  BooleanWrapper bw=(BooleanWrapper)value;
  assertEquals(Boolean.TRUE,bw.b);
}

@Override public void removePropertyChangeListener(PropertyChangeListener pcl){
  m_pcs.removePropertyChangeListener(pcl);
}

public void addOnTagClickListener(TagsClickListener listener){
  if (clickListeners == null) {
    clickListeners=new ArrayList<>();
  }
  clickListeners.add(listener);
}

public void removeAllTrackingIcons(){
  if (trackingIcons != null && trackingIcons.size() > 0) {
    trackingIcons.clear();
    repaint();
  }
}

private void readReference(){
  ArrayList<String> v_value=new ArrayList<String>();
  ArrayList<String> v_name=new ArrayList<String>();
  ArrayList<String> v_description=new ArrayList<String>();
  DocumentEngine.readReferenceList(v_value,v_name,v_description);
  int size=v_value.size();
  s_value=new String[size];
  s_name=new String[size];
  s_description=new String[size];
  for (int i=0; i < size; i++) {
    s_value[i]=(String)v_value.get(i);
    s_name[i]=(String)v_name.get(i);
    s_description[i]=(String)v_description.get(i);
  }
}

protected void assertRoundTrip(TPS expected) throws IOException, ClassNotFoundException {
  final byte[] serialized;
{
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    ObjectOutputStream oos=new ObjectOutputStream(baos);
    expected.writeExternal(oos);
    oos.flush();
    serialized=baos.toByteArray();
  }
  final TPS actual;
{
    actual=new TPS();
    ByteArrayInputStream bais=new ByteArrayInputStream(serialized);
    ObjectInputStream ois=new ObjectInputStream(bais);
    actual.readExternal(ois);
  }
  assertEquals(expected,actual);
}

public static double calculateContrastRatio(double lum1,double lum2){
  if ((lum1 < 0.0d) || (lum2 < 0.0d)) {
    throw new IllegalArgumentException("Luminance values may not be negative.");
  }
  return (Math.max(lum1,lum2) + 0.05d) / (Math.min(lum1,lum2) + 0.05d);
}

protected void reset() throws XNIException {
  int count=fComponents.size();
  for (int i=0; i < count; i++) {
    XMLComponent c=(XMLComponent)fComponents.get(i);
    c.reset(this);
  }
}

public synchronized void unregister(String name){
  StreamScope<?> streamScope=byNameMap.remove(name);
  if (streamScope == null)   return;
  List<String> names=byStreamScopeMap.get(streamScope);
  names.remove(name);
  if (names.isEmpty())   byStreamScopeMap.remove(streamScope);
}

private String expandAffix(String pattern,StringBuffer buffer){
  buffer.setLength(0);
  for (int i=0; i < pattern.length(); ) {
    char c=pattern.charAt(i++);
    if (c == QUOTE) {
      c=pattern.charAt(i++);
switch (c) {
case CURRENCY_SIGN:
        if (i < pattern.length() && pattern.charAt(i) == CURRENCY_SIGN) {
          ++i;
          buffer.append(symbols.getInternationalCurrencySymbol());
        }
 else {
          buffer.append(symbols.getCurrencySymbol());
        }
      continue;
case PATTERN_PERCENT:
    c=symbols.getPercent();
  break;
case PATTERN_PER_MILLE:
c=symbols.getPerMill();
break;
case PATTERN_MINUS:
c=symbols.getMinusSign();
break;
}
}
buffer.append(c);
}
return buffer.toString();
}

public static QueryFunctions extractFunctions(String[] filterQueries){
  final QueryFunctions result=new QueryFunctions();
  if (isEmpty(filterQueries)) {
    return result;
  }
  String[] arguments=new String[0];
  for (  String unmodifiedAnalysis : filterQueries) {
    String function=extractFunction(unmodifiedAnalysis);
    String[] functions;
    if (function.contains(FUNCTION_ARGUMENT_SPLITTER)) {
      functions=function.split(FUNCTION_ARGUMENT_SPLITTER);
    }
 else {
      functions=new String[]{function};
    }
    for (    String subFunction : functions) {
      if (subFunction.contains(AGGREGATION_ARGUMENT_DELIMITER)) {
        arguments=extractAggregationParameter(subFunction);
        subFunction=subFunction.substring(0,subFunction.indexOf(AGGREGATION_ARGUMENT_DELIMITER));
      }
      FunctionType type=FunctionType.valueOf(subFunction.toUpperCase());
      addFunction(result,type,arguments);
    }
  }
  return result;
}

protected final void fireVetoableChange(String propertyName,int oldValue,int newValue) throws PropertyVetoException {
  VetoableChangeSupport aVetoSupport=this.vetoSupport;
  if (aVetoSupport == null) {
    return;
  }
  aVetoSupport.fireVetoableChange(propertyName,Integer.valueOf(oldValue),Integer.valueOf(newValue));
}

protected boolean isValidClassname(String classname){
  return (classname.indexOf("$") == -1);
}

public static int number(){
  return _all.size();
}

public String generateInvertedString(){
  return String.format("#%06X",0xFFFFFF & generateInverted());
}

@NotNull public String extractPresentableUrl(@NotNull String path){
  return path.replace('/',File.separatorChar);
}

public String convertSWFToHTML(URL in) throws Exception {
  HttpURLConnection conn=(HttpURLConnection)in.openConnection();
  conn.setAllowUserInteraction(false);
  conn.setRequestProperty("User-agent","www.tumba.pt");
  conn.setInstanceFollowRedirects(true);
  conn.connect();
  return convertSWFToHTML(conn.getInputStream());
}

private void initProgram(){
  glUseProgram(this.program);
  viewProjMatrixUniform=glGetUniformLocation(this.program,"viewProjMatrix");
  glUseProgram(0);
}

private boolean isNegative(final String input){
  requireNonNull(input);
  for (  final String negativeString : negativeStrings) {
    if (input.equalsIgnoreCase(negativeString)) {
      return true;
    }
  }
  return false;
}

@Override protected void sendDispositionHeader(final OutputStream out) throws IOException {
  LOG.trace("enter sendDispositionHeader(OutputStream out)");
  super.sendDispositionHeader(out);
  final String filename=source.getFileName();
  if (filename != null) {
    out.write(FILE_NAME_BYTES);
    out.write(QUOTE_BYTES);
    out.write(EncodingUtil.getAsciiBytes(filename));
    out.write(QUOTE_BYTES);
  }
}

private List<Map<String,Object>> prepareResultsforDisplay(Collection<ScoredResult> scoredResults){
  ArrayList<Map<String,Object>> output=new ArrayList<Map<String,Object>>(scoredResults.size());
  for (  ScoredResult result : scoredResults) {
    Map<String,Object> resultMap=new HashMap<String,Object>();
    if (result.track != null) {
      prepareTrackForDisplay(result.track,resultMap);
    }
 else {
      prepareMarkerForDisplay(result.waypoint,resultMap);
    }
    output.add(resultMap);
  }
  return output;
}

public long copy(final InputStream from,final OutputStream to) throws IOException {
  long count=0;
  byte[] tmp=mByteArrayPool.get(mTempBufSize);
  try {
    while (true) {
      int read=from.read(tmp,0,mTempBufSize);
      if (read == -1) {
        return count;
      }
      to.write(tmp,0,read);
      count+=read;
    }
  }
  finally {
    mByteArrayPool.release(tmp);
  }
}

private static Element infoAsElement(Document doc,LibraryInfo info){
  Element libraryElement=doc.createElement("libraryInfo");
  libraryElement.setAttribute("version",info.getVersion());
  appendPathElements(doc,"bootpath",libraryElement,info.getBootpath());
  appendPathElements(doc,"extensionDirs",libraryElement,info.getExtensionDirs());
  appendPathElements(doc,"endorsedDirs",libraryElement,info.getEndorsedDirs());
  return libraryElement;
}

public void addChoiceValue(String value,String i18nKey) throws SMSException, SSOException {
  Map choiceValues=as.getChoiceValuesMap();
  choiceValues.put(value,i18nKey);
  updateChoiceValues(choiceValues);
}

private void notifyChange(int previous,int current){
  if (mOnValueChangeListener != null) {
    mOnValueChangeListener.onValueChange(this,previous,mValue);
  }
}

public void loadLibrary(String libName){
  loadLibrary0(libName,RVMClass.getClassLoaderFromStackFrame(1),true);
}

public void handleTblDataActionHrefRequest(RequestInvocationEvent event){
  String idRepoName=hexToString((String)getDisplayFieldValue(TBL_DATA_ACTION_HREF));
  String curRealm=(String)getPageSessionAttribute(AMAdminConstants.CURRENT_REALM);
  try {
    IDRepoModel model=(IDRepoModel)getModel();
    setPageSessionAttribute(IDRepoOpViewBeanBase.IDREPO_NAME,idRepoName);
    setPageSessionAttribute(IDRepoOpViewBeanBase.IDREPO_TYPE,model.getIDRepoType(curRealm,idRepoName));
    IDRepoEditViewBean vb=(IDRepoEditViewBean)getViewBean(IDRepoEditViewBean.class);
    unlockPageTrail();
    passPgSessionMap(vb);
    vb.forwardTo(getRequestContext());
  }
 catch (  AMConsoleException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",e.getMessage());
    forwardTo();
  }
}

public Charset charset(){
  return charset != null ? Charset.forName(charset) : null;
}

public boolean initialize(DDFModule poModuleIn,String pszTagIn,byte[] pachFieldArea){
  int iFDOffset=poModuleIn._fieldControlLength;
  poModule=poModuleIn;
  pszTag=pszTagIn;
  _data_struct_code=DataStructCode.get((char)pachFieldArea[0]);
  _data_type_code=DataTypeCode.get((char)pachFieldArea[1]);
  if (Debug.debugging("iso8211")) {
    Debug.output("DDFFieldDefinition.initialize(" + pszTagIn + "):\n\t\t data_struct_code = "+ _data_struct_code+ "\n\t\t data_type_code = "+ _data_type_code+ "\n\t\t iFDOffset = "+ iFDOffset);
  }
  byte[] tempData=new byte[pachFieldArea.length - iFDOffset];
  System.arraycopy(pachFieldArea,iFDOffset,tempData,0,pachFieldArea.length - iFDOffset);
  MutableInt nCharsConsumed=new MutableInt();
  _fieldName=DDFUtils.fetchVariable(tempData,tempData.length,DDF_UNIT_TERMINATOR,DDF_FIELD_TERMINATOR,nCharsConsumed);
  if (Debug.debugging("iso8211")) {
    Debug.output("DDFFieldDefinition.initialize(" + pszTagIn + "): created field name "+ _fieldName);
  }
  iFDOffset+=nCharsConsumed.value;
  tempData=new byte[pachFieldArea.length - iFDOffset];
  System.arraycopy(pachFieldArea,iFDOffset,tempData,0,pachFieldArea.length - iFDOffset);
  _arrayDescr=DDFUtils.fetchVariable(tempData,tempData.length,DDF_UNIT_TERMINATOR,DDF_FIELD_TERMINATOR,nCharsConsumed);
  iFDOffset+=nCharsConsumed.value;
  tempData=new byte[pachFieldArea.length - iFDOffset];
  System.arraycopy(pachFieldArea,iFDOffset,tempData,0,pachFieldArea.length - iFDOffset);
  _formatControls=DDFUtils.fetchVariable(tempData,tempData.length,DDF_UNIT_TERMINATOR,DDF_FIELD_TERMINATOR,nCharsConsumed);
  if (_data_struct_code != DataStructCode.ELEMENTARY) {
    if (!buildSubfieldDefns(_arrayDescr)) {
      return false;
    }
    if (!applyFormats(_formatControls)) {
      return false;
    }
  }
  return true;
}

@Override public void loadHeightMap(Raster raster) throws IOException {
  int stripHeight=Math.min(STRIP_ROWS,rasterLength);
  int stripWidth=rasterWidth * samplesPerPixel;
  int stripSize=stripWidth * stripHeight * bytesPerSample;
  int numStrips=(int)Math.ceil((double)rasterLength / stripHeight);
  if (stripSize > Integer.MAX_VALUE) {
    throw new IllegalArgumentException("Cannot load PDS file with strip size > " + Integer.MAX_VALUE + ".");
  }
  if ((minimum == null) || (maximum == null)) {
    computeMinMaxFromStrip(dataType,numStrips,stripSize,stripWidth,stripHeight);
  }
  loadFromStrip(dataType,numStrips,stripSize,stripWidth,stripHeight,raster,false);
}

public void addFooter(@NonNull View view){
  if (view == null) {
    throw new IllegalArgumentException("You can't have a null footer!");
  }
  mFooters.add(view);
}

public static Pair<int[],double[]> convert(Set<Feature> features,Lexicon lexicon,boolean trainingMode){
  TIntDoubleHashMap fMap=new TIntDoubleHashMap(features.size());
  for (  Feature feature : features) {
    final int featureId=FeatureUtilities.getFeatureId(lexicon,trainingMode,feature);
    if (featureId < 0)     continue;
    double value=feature.getValue() + fMap.get(featureId);
    fMap.put(featureId,value);
  }
  int[] idsOriginal=fMap.keys();
  int[] ids=new int[idsOriginal.length];
  System.arraycopy(idsOriginal,0,ids,0,ids.length);
  Arrays.sort(ids);
  double[] vals=new double[fMap.size()];
  int count=0;
  for (  int key : ids) {
    vals[count++]=fMap.get(key);
  }
  return new Pair<>(ids,vals);
}

private static String creteXMLTotalCount(int firstRow,int numPFIS,int numPJUR,int rDefault,int maxResults){
  String result=null;
  Document document=DocumentHelper.createDocument();
  Element root=document.addElement(PersonKeys.XML_PERSONAS_TEXT);
  root.addAttribute(PersonKeys.XML_INICIO_TEXT,Integer.toString(firstRow));
  if ((firstRow + rDefault) > (numPFIS + numPJUR)) {
    root.addAttribute(PersonKeys.XML_FIN_TEXT,Integer.toString(numPFIS + numPJUR));
  }
 else {
    root.addAttribute(PersonKeys.XML_FIN_TEXT,Integer.toString(firstRow + rDefault));
  }
  root.addAttribute(PersonKeys.XML_TOTAL_TEXT,Integer.toString(numPFIS + numPJUR));
  root.addAttribute(PersonKeys.XML_RANGO_TEXT,Integer.toString(rDefault));
  root.addAttribute(PersonKeys.XML_RESULT_MAX_TEXT,Integer.toString(maxResults));
  result=document.asXML();
  return result;
}

public String toFeatureString(FeatureVector fv){
  if (numByteFeatures != fv.getNumberOfByteFeatures() || numShortFeatures != fv.getNumberOfShortFeatures() || numContinuousFeatures != fv.getNumberOfContinuousFeatures())   throw new IllegalArgumentException("Feature vector '" + fv + "' is inconsistent with feature definition");
  StringBuilder buf=new StringBuilder();
  for (int i=0; i < numByteFeatures; i++) {
    if (buf.length() > 0)     buf.append(" ");
    buf.append(getFeatureValueAsString(i,fv.getByteFeature(i)));
  }
  for (int i=numByteFeatures; i < numByteFeatures + numShortFeatures; i++) {
    if (buf.length() > 0)     buf.append(" ");
    buf.append(getFeatureValueAsString(i,fv.getShortFeature(i)));
  }
  for (int i=numByteFeatures + numShortFeatures; i < numByteFeatures + numShortFeatures + numContinuousFeatures; i++) {
    if (buf.length() > 0)     buf.append(" ");
    buf.append(fv.getContinuousFeature(i));
  }
  return buf.toString();
}

protected void sortPopulation(){
  if (Properties.SHUFFLE_GOALS)   Randomness.shuffle(population);
  if (isMaximizationFunction()) {
    Collections.sort(population,Collections.reverseOrder());
  }
 else {
    Collections.sort(population);
  }
}

public void clean(){
  ChronoFullRevision cfr=firstCFR;
  totalSize=size;
  while (cfr != null) {
    totalSize+=cfr.size();
    cfr=cfr.getNext();
  }
  if (totalSize < MAX_STORAGE_SIZE) {
    return;
  }
  cfr=firstCFR;
  while (cfr != null) {
    totalSize+=cfr.clean(revisionIndex,0);
    cfr=cfr.getNext();
  }
  ChronoStorageBlock block;
  while (last != null && totalSize >= MAX_STORAGE_SIZE) {
    block=last.getIndexPrev();
    if (storage.remove(last.getRevisionIndex()) == null) {
      throw new RuntimeException("VALUE WAS NOT REMOVED FROM STORAGE");
    }
    totalSize-=last.length();
    size+=last.length();
    if (block != null) {
      block.setIndexNext(null);
    }
    last.setIndexPrev(null);
    cfr=last.getChronoFullRevision();
    totalSize+=cfr.size() - cfr.clean(revisionIndex,last.getRevisionIndex());
    if (last == first) {
      first=null;
    }
    last=block;
  }
  System.gc();
}

public static Number plus(Character left,Character right){
  return plus(Integer.valueOf(left),right);
}

boolean containRelayState(String relayState){
  return relayStateMap.containsKey(relayState);
}

public void localSearchStarted(){
  startTime=System.currentTimeMillis();
  endTime=startTime + Properties.LOCAL_SEARCH_BUDGET * 1000;
  tests=0;
  suites=0;
  fitnessEvaluations=0;
  executedStart=MaxStatementsStoppingCondition.getNumExecutedStatements();
}

public synchronized int write(InputStream in) throws IOException {
  int readCount=0;
  int inBufferPos=count - filledBufferSum;
  int n=in.read(currentBuffer,inBufferPos,currentBuffer.length - inBufferPos);
  while (n != -1) {
    readCount+=n;
    inBufferPos+=n;
    count+=n;
    if (inBufferPos == currentBuffer.length) {
      needNewBuffer(currentBuffer.length);
      inBufferPos=0;
    }
    n=in.read(currentBuffer,inBufferPos,currentBuffer.length - inBufferPos);
  }
  return readCount;
}

public static double normalizeRadians(double r){
  if (r < 0 && r >= -TWO_PI)   return r + TWO_PI;
  if (r >= TWO_PI && r < FOUR_PI)   return r - TWO_PI;
  if (r >= 0 && r < TWO_PI)   return r;
  r-=TWO_PI * Math.floor(r * TWO_PI_INVERSE);
  if (r < 0.)   r+=TWO_PI;
  return r;
}

public static TetradMatrix convertCovToCorr(TetradMatrix m){
  for (int i=0; i < m.rows(); i++) {
    for (int j=0; j < m.columns(); j++) {
      if (Double.isNaN(m.get(i,j))) {
        throw new IllegalArgumentException("Please remove or impute missing values.");
      }
    }
  }
  return correlation(m);
}

private byte[] ungzip(byte[] body){
  ByteArrayInputStream bytein=new ByteArrayInputStream(body);
  try (GZIPInputStream gzin=new GZIPInputStream(bytein);ByteArrayOutputStream byteout=new ByteArrayOutputStream()){
    int res=0;
    byte buf[]=new byte[1024];
    while (res >= 0) {
      res=gzin.read(buf,0,buf.length);
      if (res > 0) {
        byteout.write(buf,0,res);
      }
    }
    byte uncompressed[]=byteout.toByteArray();
    return uncompressed;
  }
 catch (  IOException e) {
  }
  return null;
}

private boolean selectID(int nodeID,boolean show){
  if (m_root == null)   return false;
  log.config("NodeID=" + nodeID + ", Show="+ show+ ", root="+ m_root);
  MTreeNode node=m_root.findNode(nodeID);
  if (node != null) {
    TreePath treePath=new TreePath(node.getPath());
    log.config("Node=" + node + ", Path="+ treePath.toString());
    tree.setSelectionPath(treePath);
    if (show) {
      tree.makeVisible(treePath);
      tree.scrollPathToVisible(treePath);
    }
    return true;
  }
  log.info("Node not found; ID=" + nodeID);
  return false;
}

@Override public void loadRGBA(Raster raster) throws IOException {
  if (bandStorageType == null) {
    throw new IllegalArgumentException("Unable to find BAND_STORAGE_TYPE.");
  }
  if (samplesPerPixel < 3) {
    throw new IllegalArgumentException("Cannot load RGBA with less than 3 color components.");
  }
  if (iStream != null) {
    iStream.close();
  }
  iStream=new FileImageInputStream(new File(dataFilePath));
  iStream.seek(imageStart);
  int stripHeight=Math.min(STRIP_ROWS,rasterLength);
  int stripWidth=rasterWidth * samplesPerPixel;
  int numStrips=(int)Math.ceil((double)rasterLength / stripHeight);
  if (bandStorageType.equals("SAMPLE_INTERLEAVED")) {
    int stripSize=stripWidth * stripHeight * bytesPerSample;
    if (stripSize > Integer.MAX_VALUE) {
      throw new IllegalArgumentException("Cannot load PDS file with strip size > " + Integer.MAX_VALUE + ".");
    }
    byte[] bbArray=new byte[stripSize];
    ByteBuffer bbuf=ByteBuffer.allocate(4 * rasterWidth * stripHeight);
    iStream.seek(imageStart);
    int r=0;
    for (int i=0; i < numStrips; ++i) {
      int h=Math.min(rasterLength - stripHeight * i,stripHeight);
      int len=h * stripWidth;
      len=iStream.read(bbArray,0,len);
      for (int j=0; j < h; ++j) {
        for (int k=0; k < stripWidth; k+=samplesPerPixel) {
          for (int l=0; l < samplesPerPixel; ++l) {
            bbuf.put(bbArray[k + l]);
          }
          if (samplesPerPixel == 3) {
            bbuf.put((byte)255);
          }
        }
        r++;
      }
      bbuf.rewind();
      raster.set(r,h,bbArray);
    }
  }
 else   if (bandStorageType.equals("BAND_SEQUENTIAL")) {
    int stripSize=rasterWidth * stripHeight;
    if (stripSize > Integer.MAX_VALUE) {
      throw new IllegalArgumentException("Cannot load PDS file with strip size > " + Integer.MAX_VALUE + ".");
    }
    raster.set(255);
    byte[] bArray=new byte[4 * rasterWidth * stripHeight];
    byte[] bbArray=new byte[stripSize];
    iStream.seek(imageStart);
    for (int k=0; k < samplesPerPixel; ++k) {
      int r=0;
      for (int i=0; i < numStrips; ++i) {
        int h=Math.min(rasterLength - stripHeight * i,stripHeight);
        int len=h * rasterWidth;
        len=iStream.read(bbArray,0,len);
        for (int j=0; j < h; ++j) {
          raster.get(r,bArray);
          for (int c=0; c < rasterWidth; ++c) {
            bArray[c * 4 + k]=bbArray[c];
          }
          raster.set(r,1,bArray);
          r++;
        }
      }
    }
  }
  if (minimum == null) {
    minimum=new double[]{0,0,0,1};
  }
  if (maximum == null) {
    maximum=new double[]{255,255,255,255};
  }
}

protected final boolean isListState(){
  return stateTextTypes.charAt(state) == 'L';
}

private static Class<? extends Activity> guessErrorActivityClass(Context context){
  Class<? extends Activity> resolvedActivityClass;
  resolvedActivityClass=CustomActivityOnCrash.getErrorActivityClassWithIntentFilter(context);
  if (resolvedActivityClass == null) {
    resolvedActivityClass=DefaultErrorActivity.class;
  }
  return resolvedActivityClass;
}

public void loadGlyphs(String chars) throws NoGlyphException {
  char[] chs=chars.toCharArray();
  for (int i=0; i < chs.length; i++) {
    getGlyph(chs[i],null);
  }
}

private void initQuestAndAddToWorld(final IQuest quest){
  logger.info("Loading Quest: " + quest.getName());
  quest.addToWorld();
  quests.add(quest);
}

public static MoveCommand[] values(int f,GameOptions opts,boolean forwardIni){
  boolean manualShutdown=false, selfDestruct=false;
  if (opts != null) {
    manualShutdown=opts.booleanOption("manual_shutdown");
    selfDestruct=opts.booleanOption("tacops_self_destruct");
  }
  ArrayList<MoveCommand> flaggedCmds=new ArrayList<MoveCommand>();
  for (  MoveCommand cmd : MoveCommand.values()) {
    if ((cmd == MOVE_SHUTDOWN || cmd == MOVE_STARTUP) && !manualShutdown) {
      continue;
    }
    if (cmd == MOVE_SELF_DESTRUCT && !selfDestruct) {
      continue;
    }
    if (cmd == MOVE_FORWARD_INI && !forwardIni) {
      continue;
    }
    if ((cmd.flag & f) == f) {
      flaggedCmds.add(cmd);
    }
  }
  return flaggedCmds.toArray(new MoveCommand[0]);
}

public boolean isLDAP(){
  String host=getLDAPHost();
  if (host == null || host.length() == 0)   return false;
  String domain=getLDAPDomain();
  return domain != null && domain.length() > 0;
}

public void shedCache(){
  Connection[] conn;
synchronized (freeList) {
    conn=freeList.toArray(new Connection[freeList.size()]);
    freeList.clear();
  }
  for (int i=conn.length; --i >= 0; ) {
    Connection c=conn[i];
    conn[i]=null;
    try {
      c.close();
    }
 catch (    java.io.IOException e) {
    }
  }
}

public static byte[] hash(InputStream in) throws IOException {
  if (HASH_DIGEST == null) {
    throw new EvernoteUtilException(EDAM_HASH_ALGORITHM + " not supported",new NoSuchAlgorithmException(EDAM_HASH_ALGORITHM));
  }
  byte[] buf=new byte[1024];
  int n;
  while ((n=in.read(buf)) != -1) {
    HASH_DIGEST.update(buf,0,n);
  }
  return HASH_DIGEST.digest();
}

public byte[] readRawBytes(final int size) throws IOException {
  if (size < 0) {
    throw InvalidProtocolBufferNanoException.negativeSize();
  }
  if (bufferPos + size > currentLimit) {
    skipRawBytes(currentLimit - bufferPos);
    throw InvalidProtocolBufferNanoException.truncatedMessage();
  }
  if (size <= bufferSize - bufferPos) {
    final byte[] bytes=new byte[size];
    System.arraycopy(buffer,bufferPos,bytes,0,size);
    bufferPos+=size;
    return bytes;
  }
 else {
    throw InvalidProtocolBufferNanoException.truncatedMessage();
  }
}

public abstract TreeNode createNode(final int x,final int y);

@SuppressWarnings("unchecked") public static <T extends FeatureStructure>List<T> toList(FSArray array){
  if (array == null) {
    return new ArrayList<T>();
  }
 else {
    return (List<T>)Arrays.asList(array.toArray());
  }
}

private void resetNotes2(){
  if (errorInStatus2) {
    if (editMode) {
      statusText1.setText(editStatus2);
    }
 else {
      statusText2.setText(stdStatus2);
    }
    errorInStatus2=false;
  }
}

protected static int toDigit(final char ch,final int index) throws IllegalArgumentException {
  final int digit=Character.digit(ch,16);
  if (digit == -1) {
    throw new IllegalArgumentException("Illegal hexadecimal character " + ch + " at index "+ index);
  }
  return digit;
}

public static ServerSideSortRequestControl newControl(final boolean isCritical,final Collection<SortKey> keys){
  Reject.ifNull(keys);
  Reject.ifFalse(!keys.isEmpty(),"keys must not be empty");
  return new ServerSideSortRequestControl(isCritical,Collections.unmodifiableList(new ArrayList<SortKey>(keys)));
}

@SuppressWarnings({"unchecked","rawtypes"}) static <E extends Comparable<E>>AutoSortedCollection<E> createAutoSortedCollection(Supplier<List<SortedListElement<E>>> listSup,Collection<? extends E> values){
  List list=listSup.get();
  if (!list.isEmpty()) {
    throw new IllegalStateException("List must be empty.");
  }
  AutoSortedCollection<E> sortedCollection=new AutoListSortedCollection<>(list,null);
  sortedCollection.addAll(values);
  return sortedCollection;
}

private void intStream(){
  int[] ints=new int[]{10,20,30,40,50};
  IntStream intStream=IntStream.of(ints);
  intStream.forEach(null);
  IntStream intStream2=IntStream.of(10,20,30,40,50);
  intStream2.forEach(null);
}

@SuppressWarnings("static-access") public boolean isCustomized(){
  if (m_customizationLevel == null) {
    getElementID();
    m_customizationLevel=new Integer(s_parameters.CUSTOMNONE);
    if (m_parent.isCustomPrefix(m_name)) {
      m_customizationLevel=new Integer(s_parameters.CUSTOMPREFIXED);
    }
 else {
      if (m_parent.isObjectExists("AD_COLUMN",m_parent.getTables()) && m_parent.isObjectExists("AD_TABLE",m_parent.getTables())) {
        String sql=s_dbEngine.sqlAD_getTableColumnEntityType(m_parent.getVendor(),m_parent.getCatalog(),m_parent.getSchema(),m_table,m_name);
        Statement stmt=m_parent.setStatement();
        ResultSet rs=m_parent.executeQuery(stmt,sql);
        if (m_parent.getResultSetNext(rs)) {
          String s=m_parent.getResultSetString(rs,"ENTITY_TYPE");
          if (m_parent.isCustomEntityType(s))           m_customizationLevel=new Integer(s_parameters.CUSTOMMARKED);
        }
        m_parent.releaseResultSet(rs);
        m_parent.releaseStatement(stmt);
      }
    }
  }
  if (m_customizationLevel.intValue() > s_parameters.CUSTOMNONE)   return true;
 else   return false;
}

private void reloadQueue(){
  String q=null;
  int id=mCardId;
  if (mPreferences.contains("cardid")) {
    id=mPreferences.getInt("cardid",~mCardId);
  }
  if (id == mCardId) {
    q=mPreferences.getString("queue","");
  }
  int qlen=q != null ? q.length() : 0;
  if (qlen > 1) {
    int plen=0;
    int n=0;
    int shift=0;
    for (int i=0; i < qlen; i++) {
      final char c=q.charAt(i);
      if (c == ';') {
        ensurePlayListCapacity(plen + 1);
        mPlayList[plen]=n;
        plen++;
        n=0;
        shift=0;
      }
 else {
        if (c >= '0' && c <= '9') {
          n+=c - '0' << shift;
        }
 else         if (c >= 'a' && c <= 'f') {
          n+=10 + c - 'a' << shift;
        }
 else {
          plen=0;
          break;
        }
        shift+=4;
      }
    }
    mPlayListLen=plen;
    final int pos=mPreferences.getInt("curpos",0);
    if (pos < 0 || pos >= mPlayListLen) {
      mPlayListLen=0;
      return;
    }
    mPlayPos=pos;
    updateCursor(mPlayList[mPlayPos]);
    if (mCursor == null) {
      SystemClock.sleep(3000);
      updateCursor(mPlayList[mPlayPos]);
    }
synchronized (this) {
      closeCursor();
      mOpenFailedCounter=20;
      openCurrentAndNext();
    }
    if (mPlayer == null || !mPlayer.isInitialized()) {
      mPlayListLen=0;
      return;
    }
    final long seekpos=mPreferences.getLong("seekpos",0);
    seek(seekpos >= 0 && seekpos < duration() ? seekpos : 0);
    if (D) {
      LOG.info("restored queue, currently at position " + position() + "/"+ duration()+ " (requested "+ seekpos+ ")");
    }
    int repmode=mPreferences.getInt("repeatmode",REPEAT_NONE);
    if (repmode != REPEAT_ALL && repmode != REPEAT_CURRENT) {
      repmode=REPEAT_NONE;
    }
    mRepeatMode=repmode;
    int shufmode=mPreferences.getInt("shufflemode",SHUFFLE_NONE);
    if (shufmode != SHUFFLE_AUTO && shufmode != SHUFFLE_NORMAL) {
      shufmode=SHUFFLE_NONE;
    }
    if (shufmode != SHUFFLE_NONE) {
      q=mPreferences.getString("history","");
      qlen=q != null ? q.length() : 0;
      if (qlen > 1) {
        n=0;
        shift=0;
        mHistory.clear();
        for (int i=0; i < qlen; i++) {
          final char c=q.charAt(i);
          if (c == ';') {
            if (n >= mPlayListLen) {
              mHistory.clear();
              break;
            }
            mHistory.add(n);
            n=0;
            shift=0;
          }
 else {
            if (c >= '0' && c <= '9') {
              n+=c - '0' << shift;
            }
 else             if (c >= 'a' && c <= 'f') {
              n+=10 + c - 'a' << shift;
            }
 else {
              mHistory.clear();
              break;
            }
            shift+=4;
          }
        }
      }
    }
    if (shufmode == SHUFFLE_AUTO) {
      if (!makeAutoShuffleList()) {
        shufmode=SHUFFLE_NONE;
      }
    }
    mShuffleMode=shufmode;
  }
}

public final void scheduledForFlush(){
  scheduledForFlush.set(true);
}

public ImageInfo inspectImage(String image) throws IOException {
  return inspectImage(InspectImageParams.create(image));
}

@Override public double prevCumulativeQuantity(final Long woActivityId,Long mbHeaderId){
  if (mbHeaderId == null)   mbHeaderId=-1l;
  final Object[] params=new Object[]{mbHeaderId,mbHeaderId,WorksConstants.CANCELLED_STATUS,woActivityId};
  final Double pQuant=(Double)genericService.findByNamedQuery("prevCumulativeQuantity",params);
  if (pQuant == null)   return 0.0d;
 else   return pQuant.doubleValue();
}

void receive(int length,DataInputStream in) throws IOException {
synchronized (lock) {
    if ((pos > 0) && ((buffer.length - present) < length)) {
      System.arraycopy(buffer,pos,buffer,0,present - pos);
      present-=pos;
      pos=0;
    }
    if ((buffer.length - present) < length)     throw new IOException("Receive buffer overflow");
    in.readFully(buffer,present,length);
    present+=length;
    requested-=length;
    lock.notifyAll();
  }
}

public JDABuilder removeListener(Object listener){
  listeners.remove(listener);
  return this;
}

private void updateBaseMatrix(Drawable d){
  ImageView imageView=getImageView();
  if (null == imageView || null == d) {
    return;
  }
  final float viewWidth=getImageViewWidth(imageView);
  final float viewHeight=getImageViewHeight(imageView);
  final int drawableWidth=d.getIntrinsicWidth();
  final int drawableHeight=d.getIntrinsicHeight();
  mBaseMatrix.reset();
  final float widthScale=viewWidth / drawableWidth;
  final float heightScale=viewHeight / drawableHeight;
  if (mScaleType == ScaleType.CENTER) {
    mBaseMatrix.postTranslate((viewWidth - drawableWidth) / 2F,(viewHeight - drawableHeight) / 2F);
  }
 else   if (mScaleType == ScaleType.CENTER_CROP) {
    float scale=Math.max(widthScale,heightScale);
    mBaseMatrix.postScale(scale,scale);
    mBaseMatrix.postTranslate((viewWidth - drawableWidth * scale) / 2F,(viewHeight - drawableHeight * scale) / 2F);
  }
 else   if (mScaleType == ScaleType.CENTER_INSIDE) {
    float scale=Math.min(1.0f,Math.min(widthScale,heightScale));
    mBaseMatrix.postScale(scale,scale);
    mBaseMatrix.postTranslate((viewWidth - drawableWidth * scale) / 2F,(viewHeight - drawableHeight * scale) / 2F);
  }
 else {
    RectF mTempSrc=new RectF(0,0,drawableWidth,drawableHeight);
    RectF mTempDst=new RectF(0,0,viewWidth,viewHeight);
switch (mScaleType) {
case FIT_CENTER:
      mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.CENTER);
    break;
case FIT_START:
  mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.START);
break;
case FIT_END:
mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.END);
break;
case FIT_XY:
mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.FILL);
break;
default :
break;
}
}
resetMatrix();
}

private static List<String> readFile(File file) throws IOException {
  FileReader fr=new FileReader(file);
  BufferedReader br=new BufferedReader(fr);
  List<String> lines=new ArrayList<String>();
  String line;
  while ((line=br.readLine()) != null)   lines.add(line);
  fr.close();
  br.close();
  return lines;
}

FlexibleNode readExternalNode(HashMap<String,Taxon> translationList) throws ImportException, IOException {
  FlexibleNode node=new FlexibleNode();
  String label=readToken(":(),;");
  Taxon taxon;
  if (translationList.size() > 0) {
    taxon=translationList.get(label);
    if (taxon == null) {
      throw new UnknownTaxonException("Taxon in tree, '" + label + "' is unknown");
    }
  }
 else {
    taxon=new Taxon(label);
  }
  if (getLastMetaComment() != null) {
    parseMigrationString(getLastMetaComment(),node);
    clearLastMetaComment();
  }
  node.setTaxon(taxon);
  int pop=Integer.parseInt(label.split("\\.")[0]);
  node.setAttribute(POP,(pop - 1));
  return node;
}

static void plugTogetherPair(InputStream in,OutputStream out,InputStream in1,OutputStream out1){
  Thread inThread=null;
  Thread outThread=null;
  int nExecs=getNumExec();
  inThread=AccessController.doPrivileged(new NewThreadAction(new PipeWriter(in,out,"out",nExecs),"out",true));
  outThread=AccessController.doPrivileged(new NewThreadAction(new PipeWriter(in1,out1,"err",nExecs),"err",true));
  inThread.start();
  outThread.start();
}

@NonNull public static StorableFence and(@NonNull StorableFence... fences){
  return StorableFence.and(Arrays.asList(fences));
}

public MXFUID(byte[] uid){
  this.uid=Arrays.copyOf(uid,uid.length);
}

private int shrinkFlexItems(FlexLine flexLine,@FlexDirection int flexDirection,int maxMainSize,int paddingAlongMainAxis,int startIndex){
  int childIndex=startIndex;
  int sizeBeforeShrink=flexLine.mMainSize;
  if (flexLine.mTotalFlexShrink <= 0 || maxMainSize > flexLine.mMainSize) {
    childIndex+=flexLine.mItemCount;
    return childIndex;
  }
  boolean needsReshrink=false;
  float unitShrink=(flexLine.mMainSize - maxMainSize) / flexLine.mTotalFlexShrink;
  float accumulatedRoundError=0;
  flexLine.mMainSize=paddingAlongMainAxis + flexLine.mDividerLengthInMainSize;
  for (int i=0; i < flexLine.mItemCount; i++) {
    View child=getReorderedChildAt(childIndex);
    if (child == null) {
      continue;
    }
 else     if (child.getVisibility() == View.GONE) {
      childIndex++;
      continue;
    }
    LayoutParams lp=(LayoutParams)child.getLayoutParams();
    if (isMainAxisDirectionHorizontal(flexDirection)) {
      if (!mChildrenFrozen[childIndex]) {
        float rawCalculatedWidth=child.getMeasuredWidth() - unitShrink * lp.flexShrink;
        if (i == flexLine.mItemCount - 1) {
          rawCalculatedWidth+=accumulatedRoundError;
          accumulatedRoundError=0;
        }
        int newWidth=Math.round(rawCalculatedWidth);
        if (newWidth < lp.minWidth) {
          needsReshrink=true;
          newWidth=lp.minWidth;
          mChildrenFrozen[childIndex]=true;
          flexLine.mTotalFlexShrink-=lp.flexShrink;
        }
 else {
          accumulatedRoundError+=(rawCalculatedWidth - newWidth);
          if (accumulatedRoundError > 1.0) {
            newWidth+=1;
            accumulatedRoundError-=1;
          }
 else           if (accumulatedRoundError < -1.0) {
            newWidth-=1;
            accumulatedRoundError+=1;
          }
        }
        child.measure(MeasureSpec.makeMeasureSpec(newWidth,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(child.getMeasuredHeight(),MeasureSpec.EXACTLY));
      }
      flexLine.mMainSize+=child.getMeasuredWidth() + lp.leftMargin + lp.rightMargin;
    }
 else {
      if (!mChildrenFrozen[childIndex]) {
        float rawCalculatedHeight=child.getMeasuredHeight() - unitShrink * lp.flexShrink;
        if (i == flexLine.mItemCount - 1) {
          rawCalculatedHeight+=accumulatedRoundError;
          accumulatedRoundError=0;
        }
        int newHeight=Math.round(rawCalculatedHeight);
        if (newHeight < lp.minHeight) {
          needsReshrink=true;
          newHeight=lp.minHeight;
          mChildrenFrozen[childIndex]=true;
          flexLine.mTotalFlexShrink-=lp.flexShrink;
        }
 else {
          accumulatedRoundError+=(rawCalculatedHeight - newHeight);
          if (accumulatedRoundError > 1.0) {
            newHeight+=1;
            accumulatedRoundError-=1;
          }
 else           if (accumulatedRoundError < -1.0) {
            newHeight-=1;
            accumulatedRoundError+=1;
          }
        }
        child.measure(MeasureSpec.makeMeasureSpec(child.getMeasuredWidth(),MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(newHeight,MeasureSpec.EXACTLY));
      }
      flexLine.mMainSize+=child.getMeasuredHeight() + lp.topMargin + lp.bottomMargin;
    }
    childIndex++;
  }
  if (needsReshrink && sizeBeforeShrink != flexLine.mMainSize) {
    shrinkFlexItems(flexLine,flexDirection,maxMainSize,paddingAlongMainAxis,startIndex);
  }
  return childIndex;
}

public static DataModelList serializableInstance(){
  return new DataModelList();
}

@Override public MBHeader findLastMBPageNoForLineItem(final WorkOrderActivity workOrderActivity,final Long mbHeaderId){
  logger.info("-------------------------Inside findLastMBPageNoForLineItem--------------");
  String query="select distinct mbh from MBHeader mbh join mbh.mbDetails as mbDetail ";
  Object[] params;
  final List<Object> paramList=new ArrayList<Object>();
  query=query + " where mbDetail.workOrderActivity.id = ? " + " and mbh.id != ? and mbh.egwStatus.code=? "+ " and mbh.modifiedDate < (select modifiedDate from MBHeader where id = ? )"+ " order by mbh.modifiedDate desc";
  paramList.add(workOrderActivity.getId());
  paramList.add(mbHeaderId);
  paramList.add(WorksConstants.APPROVED);
  paramList.add(mbHeaderId);
  params=new Object[paramList.size()];
  params=paramList.toArray(params);
  final List<MBHeader> mbHeaderList=genericService.findAllBy(query,params);
  MBHeader result=null;
  if (mbHeaderList != null && !mbHeaderList.isEmpty())   result=mbHeaderList.get(0);
  return result;
}

synchronized private void outputBufferedChunk(){
  if (smallChunks == null || chunkSize == 0) {
    return;
  }
  if (smallChunks.size() == 1) {
    outputChunk(smallChunks.get(0));
    chunkSize=0;
    smallChunks=null;
    return;
  }
  final IBindingSet[] chunk=new IBindingSet[chunkSize];
  int destPos=0;
  for (  IBindingSet[] e : smallChunks) {
    System.arraycopy(e,0,chunk,destPos,e.length);
    destPos+=e.length;
  }
  outputChunk(chunk);
  chunkSize=0;
  smallChunks=null;
}

public ByteVector putByteArray(final byte[] b,final int off,final int len){
  if (length + len > data.length) {
    enlarge(len);
  }
  if (b != null) {
    System.arraycopy(b,off,data,length,len);
  }
  length+=len;
  return this;
}

private void waitLoadCompete(){
  if (m_loadComplete)   return;
  m_loader.setPriority(Thread.NORM_PRIORITY);
  log.config("");
  while (m_loader.isAlive()) {
    try {
      Thread.sleep(100);
    }
 catch (    Exception e) {
      log.log(Level.SEVERE,"",e);
    }
  }
  log.config("fini");
}

@SuppressWarnings("fallthrough") private void dtdatt(Pair elm) throws Exception {
  char attqn[]=null;
  Pair att=null;
  char ch;
  for (short st=0; st >= 0; ) {
    ch=getch();
switch (st) {
case 0:
switch (chtyp(ch)) {
case 'a':
case 'A':
case '_':
case 'X':
case ':':
        bkch();
      attqn=qname(mIsNSAware);
    att=find(elm.list,attqn);
  if (att == null) {
    att=pair(elm.list);
    att.chars=attqn;
    elm.list=att;
  }
 else {
    att=pair(null);
    att.chars=attqn;
    att.id='c';
  }
wsskip();
st=1;
break;
case '%':
pent(' ');
break;
case ' ':
break;
default :
panic(FAULT);
break;
}
break;
case 1:
switch (chtyp(ch)) {
case '(':
att.id='u';
st=2;
break;
case '%':
pent(' ');
break;
case ' ':
break;
default :
bkch();
bntok();
att.id=bkeyword();
switch (att.id) {
case 'o':
if (wsskip() != '(') {
panic(FAULT);
}
ch=getch();
st=2;
break;
case 'i':
case 'r':
case 'R':
case 'n':
case 'N':
case 't':
case 'T':
case 'c':
wsskip();
st=4;
break;
default :
panic(FAULT);
break;
}
break;
}
break;
case 2:
switch (chtyp(ch)) {
case 'a':
case 'A':
case 'd':
case '.':
case ':':
case '-':
case '_':
case 'X':
bkch();
switch (att.id) {
case 'u':
bntok();
break;
case 'o':
mBuffIdx=-1;
bname(false);
break;
default :
panic(FAULT);
break;
}
wsskip();
st=3;
break;
case '%':
pent(' ');
break;
case ' ':
break;
default :
panic(FAULT);
break;
}
break;
case 3:
switch (ch) {
case ')':
wsskip();
st=4;
break;
case '|':
wsskip();
switch (att.id) {
case 'u':
bntok();
break;
case 'o':
mBuffIdx=-1;
bname(false);
break;
default :
panic(FAULT);
break;
}
wsskip();
break;
case '%':
pent(' ');
break;
default :
panic(FAULT);
break;
}
break;
case 4:
switch (ch) {
case '#':
bntok();
switch (bkeyword()) {
case 'F':
switch (wsskip()) {
case '\"':
case '\'':
st=5;
break;
case EOS:
panic(FAULT);
default :
st=-1;
break;
}
break;
case 'Q':
case 'I':
st=-1;
break;
default :
panic(FAULT);
break;
}
break;
case '\"':
case '\'':
bkch();
st=5;
break;
case ' ':
case '\n':
case '\r':
case '\t':
break;
case '%':
pent(' ');
break;
default :
bkch();
st=-1;
break;
}
break;
case 5:
switch (ch) {
case '\"':
case '\'':
bkch();
bqstr('d');
att.list=pair(null);
att.list.chars=new char[att.chars.length + mBuffIdx + 3];
System.arraycopy(att.chars,1,att.list.chars,0,att.chars.length - 1);
att.list.chars[att.chars.length - 1]='=';
att.list.chars[att.chars.length]=ch;
System.arraycopy(mBuff,1,att.list.chars,att.chars.length + 1,mBuffIdx);
att.list.chars[att.chars.length + mBuffIdx + 1]=ch;
att.list.chars[att.chars.length + mBuffIdx + 2]=' ';
st=-1;
break;
default :
panic(FAULT);
break;
}
break;
default :
panic(FAULT);
break;
}
}
}

public void addClasses(List<String> classNames){
  if (handlerFactories == null) {
    handlerFactories=new ArrayList<String>();
  }
  handlerFactories.addAll(classNames);
}

public static boolean isConstantName(String name){
  return Pattern.matches("[\\dA-Z_]+",name);
}

private void notifyDead(final RPEntity dead){
  if (!rats.remove(dead)) {
    logger.warn("killed creature isn't in control list (" + dead.toString() + ").");
  }
  if (rats.size() == 0) {
    phaseToDefaultPhase(new LinkedList<String>(Arrays.asList("pied piper")));
  }
}

public static OMGrid read(DataInputStream dis) throws IOException {
  return read(dis,null);
}

public VarcharConstant(String s){
  type=new VarcharType(s.length());
  val=s;
}

public boolean addChildPlanet(DimensionProperties child){
  if (child == this)   return false;
  childPlanets.add(child.getId());
  child.setParentPlanet(this);
  return true;
}

@Override public Enumeration<String> enumerateMeasures(){
  Vector<String> newVector=new Vector<String>(1);
  newVector.add("measureNumRules");
  return newVector.elements();
}

int[] calculateRelative(int[] absolute){
  int[] res=new int[absolute.length];
  res[0]=absolute[0];
  for (int i=1; i < res.length; i++) {
    res[i]=absolute[i] - absolute[i - 1];
  }
  return res;
}

@AfterClass public static void deleteLogDir(){
  if (logDir != null) {
    FileUtils.deleteQuietly(logDir);
  }
}

public String toString(){
  StringBuffer sb=new StringBuffer();
  char[] separator={'[',' '};
  int n=rows();
  int m=columns();
  for (int i=0; i < n; i++) {
    separator[0]='{';
    for (int j=0; j < m; j++) {
      sb.append(separator);
      sb.append(components[i][j]);
      separator[0]=' ';
    }
    sb.append('}');
    sb.append('\n');
  }
  return sb.toString();
}

public static String[] splitStringIntoArray(String value){
  String[] values=new String[0];
  if (value != null && value.length() > 0) {
    if (value.indexOf(CIMConstants.COMMA_SEPERATOR) != -1) {
      values=value.split(",");
    }
 else {
      values=new String[1];
      values[0]=value;
    }
  }
  return values;
}

public static String fromAttrModelingModelClass(String vaModelClass){
  return vaModelClass.split(ValueAnalysis.MODEL_PACKAGE_PREFIX)[1];
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getFooterSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if (mState == State.PULL_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

public synchronized void add(DccLocoAddress locoAddress,boolean directionNormal){
  if (!contains(locoAddress)) {
    if (ConsistList.size() == 0) {
      byte command=NceBinaryCommand.LOCO_CMD_FWD_CONSIST_LEAD;
      if (!directionNormal) {
        command=NceBinaryCommand.LOCO_CMD_REV_CONSIST_LEAD;
      }
      addLocoToConsist(locoAddress.getNumber(),locoAddress.isLongAddress(),command);
      ConsistPosition.put(locoAddress,DccConsist.POSITION_LEAD);
    }
 else     if (ConsistList.size() == 1) {
      byte command=NceBinaryCommand.LOCO_CMD_FWD_CONSIST_REAR;
      if (!directionNormal) {
        command=NceBinaryCommand.LOCO_CMD_REV_CONSIST_REAR;
      }
      addLocoToConsist(locoAddress.getNumber(),locoAddress.isLongAddress(),command);
      ConsistPosition.put(locoAddress,DccConsist.POSITION_TRAIL);
    }
 else {
      byte command=NceBinaryCommand.LOCO_CMD_FWD_CONSIST_MID;
      if (!directionNormal) {
        command=NceBinaryCommand.LOCO_CMD_REV_CONSIST_MID;
      }
      addLocoToConsist(locoAddress.getNumber(),locoAddress.isLongAddress(),command);
      ConsistPosition.put(locoAddress,ConsistPosition.size());
    }
    ConsistList.add(locoAddress);
    ConsistDir.put(locoAddress,Boolean.valueOf(directionNormal));
  }
 else {
    log.error("Loco " + locoAddress + " is already part of this consist "+ getConsistAddress());
  }
}

private GridClientConfiguration clientConfiguration(){
  GridClientConfiguration cfg=new GridClientConfiguration();
  cfg.setTopologyRefreshFrequency(topologyRefreshFrequency());
  cfg.setMaxConnectionIdleTime(maxConnectionIdleTime());
  cfg.setProtocol(protocol());
  cfg.setServers(Arrays.asList(serverAddress()));
  cfg.setBalancer(new GridClientRoundRobinBalancer());
  if (useSsl())   cfg.setSslContextFactory(sslContextFactory());
  GridClientDataConfiguration loc=new GridClientDataConfiguration();
  GridClientDataConfiguration partitioned=new GridClientDataConfiguration();
  partitioned.setName(PARTITIONED_CACHE_NAME);
  partitioned.setAffinity(new GridClientPartitionAffinity());
  GridClientDataConfiguration partitionedAsyncBackup=new GridClientDataConfiguration();
  partitionedAsyncBackup.setName(PARTITIONED_ASYNC_BACKUP_CACHE_NAME);
  partitionedAsyncBackup.setAffinity(new GridClientPartitionAffinity());
  GridClientDataConfiguration replicated=new GridClientDataConfiguration();
  replicated.setName(REPLICATED_CACHE_NAME);
  GridClientDataConfiguration replicatedAsync=new GridClientDataConfiguration();
  replicatedAsync.setName(REPLICATED_ASYNC_CACHE_NAME);
  cfg.setDataConfigurations(Arrays.asList(loc,partitioned,replicated,replicatedAsync,partitionedAsyncBackup));
  return cfg;
}

public final TestSubscriber assertNotSubscribed(){
  String prefix="";
  if (done.getCount() != 0) {
    prefix="Subscriber still running! ";
  }
  if (subscription.get() != null) {
    fail(prefix,"Subscribed!",errors);
  }
 else   if (!errors.isEmpty()) {
    fail(prefix,"Not subscribed but errors found",errors);
  }
  return this;
}

public Builder(){
  setVersionCode(Math.min(FreshAir.getCurrentApplicationVersion(),0));
  setFeatures(new LinkedList<FeatureInfo>());
}

protected String convertDateFormat(String pattern){
  boolean inside=false;
  boolean mark=false;
  boolean modifiedCommand=false;
  StringBuilder buf=new StringBuilder();
  for (int i=0; i < pattern.length(); i++) {
    char c=pattern.charAt(i);
    if (c == '%' && !mark) {
      mark=true;
    }
 else {
      if (mark) {
        if (modifiedCommand) {
          modifiedCommand=false;
          mark=false;
        }
 else {
          inside=translateCommand(buf,pattern,i,inside);
          if (c == 'O' || c == 'E') {
            modifiedCommand=true;
          }
 else {
            mark=false;
          }
        }
      }
 else {
        if (!inside && c != ' ') {
          buf.append("'");
          inside=true;
        }
        buf.append(c);
      }
    }
  }
  if (buf.length() > 0) {
    char lastChar=buf.charAt(buf.length() - 1);
    if (lastChar != '\'' && inside) {
      buf.append('\'');
    }
  }
  return buf.toString();
}

public void addChildNode(EvalFactoryNode childNode){
  childNodes.add(childNode);
}

public final void headTo(Tuple3d p){
  double angle=Geometric.angle(this.location,p);
  turnTo(Math.toDegrees(angle));
}

public void compactBuffer(){
  if (offset != buffer.length) {
    byte[] newBuffer=new byte[offset];
    System.arraycopy(buffer,0,newBuffer,0,offset);
    buffer=newBuffer;
  }
}

public static byte[] decode(String s){
  return decode(s.toCharArray());
}

public static int putByteBuffer(byte[] bytes,int offset,ByteBuffer buf){
  int len=buf.remaining();
  buf.get(bytes,offset,len);
  return offset + len;
}

private void clearIndexToFirst(){
  for (; ; ) {
    Index<K,V> q=head;
    for (; ; ) {
      Index<K,V> r=q.right;
      if (r != null && r.indexesDeletedNode() && !q.unlink(r))       break;
      if ((q=q.down) == null) {
        if (head.right == null)         tryReduceLevel();
        return;
      }
    }
  }
}

final void tryTerminate(){
  for (; ; ) {
    int c=ctl.get();
    if (isRunning(c) || runStateAtLeast(c,TIDYING) || (runStateOf(c) == SHUTDOWN && !workQueue.isEmpty()))     return;
    if (workerCountOf(c) != 0) {
      interruptIdleWorkers(ONLY_ONE);
      return;
    }
    final ReentrantLock mainLock=this.mainLock;
    mainLock.lock();
    try {
      if (ctl.compareAndSet(c,ctlOf(TIDYING,0))) {
        try {
          terminated();
        }
  finally {
          ctl.set(ctlOf(TERMINATED,0));
          termination.signalAll();
        }
        return;
      }
    }
  finally {
      mainLock.unlock();
    }
  }
}

public void joinResource() throws InterruptedException {
  if (runObj != null) {
synchronized (complete) {
      if (runObj != null)       complete.wait();
    }
  }
}

public static String toJSONString(List list){
  if (list == null)   return "null";
  boolean first=true;
  StringBuffer sb=new StringBuffer();
  Iterator iter=list.iterator();
  sb.append('[');
  while (iter.hasNext()) {
    if (first)     first=false;
 else     sb.append(',');
    Object value=iter.next();
    if (value == null) {
      sb.append("null");
      continue;
    }
    sb.append(JSONValue.toJSONString(value));
  }
  sb.append(']');
  return sb.toString();
}

@Override public int hashCode(){
  final int prime=31;
  int result=super.hashCode();
  result=prime * result + (tenant == null ? 0 : tenant.hashCode());
  return result;
}

public void loadAccessors(MappedField configuredField,MappedField targetField){
  loadAccessors(targetClass,configuredField,targetField);
}

public static MatrixBlock reshape(MatrixBlock in,MatrixBlock out,int rows,int cols,boolean rowwise) throws DMLRuntimeException {
  int rlen=in.rlen;
  int clen=in.clen;
  if (((long)rlen) * clen != ((long)rows) * cols)   throw new DMLRuntimeException("Reshape matrix requires consistent numbers of input/output cells (" + rlen + ":"+ clen+ ", "+ rows+ ":"+ cols+ ").");
  if (rlen == rows && clen == cols) {
    out.copy(in);
    return out;
  }
  out.sparse=MatrixBlock.evalSparseFormatInMemory(rows,cols,in.nonZeros);
  out.rlen=rows;
  out.clen=cols;
  out.nonZeros=in.nonZeros;
  if (!in.sparse && !out.sparse)   reshapeDense(in,out,rows,cols,rowwise);
 else   if (in.sparse && out.sparse)   reshapeSparse(in,out,rows,cols,rowwise);
 else   if (in.sparse)   reshapeSparseToDense(in,out,rows,cols,rowwise);
 else   reshapeDenseToSparse(in,out,rows,cols,rowwise);
  return out;
}

public static Class<?>[] toClassesFromObjects(final Object[] params){
  final Class<?>[] classes=new Class<?>[params.length];
  int i=0;
  for (  final Object object : params) {
    if (object != null) {
      classes[i++]=object.getClass();
    }
 else {
      classes[i++]=Object.class;
    }
  }
  return classes;
}

public AdminRegion(String localName,RemoteGemFireVM vm,String userAttributeDesc){
  String gn=localName;
  int idx=localName.lastIndexOf(nameSep);
  if (idx != -1) {
    localName=localName.substring(idx + 1);
  }
 else {
    gn=nameSep + gn;
  }
  this.globalName=gn;
  this.localName=localName;
  this.userAttributeDesc=userAttributeDesc;
  this.vm=vm;
}

public Element signWithWSSX509TokenProfile(Document doc,java.security.cert.Certificate cert,String algorithm,List ids) throws XMLSignatureException {
  return signWithWSSX509TokenProfile(doc,cert,algorithm,ids,SOAPBindingConstants.WSF_10_VERSION);
}

public void addUserMessageListener(UserMessageListener userMessageListener){
  userMessageListeners.add(userMessageListener);
}

public IteratorBuilder addTemplate(ISpaceQuery query){
  templates.add(query);
  return this;
}

public String addToClassPath(final String path){
  this.classPath+=(System.getProperty("path.separator") + path);
  return this.classPath;
}

private static int NewLongArray(JNIEnvironment env,int length){
  if (traceJNI)   VM.sysWrite("JNI called: NewLongArray  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    long[] newArray=new long[length];
    return env.pushJNIRef(newArray);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
    return 0;
  }
}

protected abstract void finalizeOutput(final int[] sourceImagePixels,final int imageWidth,final int imageHeight);

public static boolean ignoringBatteryOptimizations(){
  return NgnApplication.ignoringBatteryOptimizations(null);
}

private boolean retryDelayHasPassedBy(Long lastFailTime){
  return lastFailTime == null || lastFailTime + this.retryAfterMs < System.currentTimeMillis();
}

public static java.lang.String valueOf(long l){
  return Long.toString(l);
}

private boolean useMetric(MetricRule rule,Metric metric){
  if (rule.awsDimensionSelect == null && rule.awsDimensionSelectRegex == null) {
    return true;
  }
  if (rule.awsDimensionSelect != null && metricsIsInAwsDimensionSelect(rule,metric)) {
    return true;
  }
  if (rule.awsDimensionSelectRegex != null && metricIsInAwsDimensionSelectRegex(rule,metric)) {
    return true;
  }
  return false;
}

final void addIconManager(AbstractStatusIconManager manager){
  iconManagers.add(manager);
}

public IndexMetaData upgradeIndexMetaData(IndexMetaData indexMetaData){
  if (isUpgraded(indexMetaData)) {
    return indexMetaData;
  }
  checkSupportedVersion(indexMetaData);
  IndexMetaData newMetaData=upgradeLegacyRoutingSettings(indexMetaData);
  newMetaData=addDefaultUnitsIfNeeded(newMetaData);
  checkMappingsCompatibility(newMetaData);
  newMetaData=upgradeSettings(newMetaData);
  newMetaData=markAsUpgraded(newMetaData);
  return newMetaData;
}

static final void encode(byte[] src,int srcOff,int len,byte[] dst,int dstOff){
  dst[dstOff]=(byte)ENCODE_TABLE.charAt((src[srcOff] >> 2) & 0x3F);
  if (len == 3) {
    dst[dstOff + 1]=(byte)ENCODE_TABLE.charAt(((src[srcOff] << 4) & 0x30) | ((src[srcOff + 1] >> 4) & 0x0F));
    dst[dstOff + 2]=(byte)ENCODE_TABLE.charAt(((src[srcOff + 1] << 2) & 0x3C) | ((src[srcOff + 2] >> 6) & 0x03));
    dst[dstOff + 3]=(byte)ENCODE_TABLE.charAt(src[srcOff + 2] & 0x3F);
  }
 else   if (len == 2) {
    dst[dstOff + 1]=(byte)ENCODE_TABLE.charAt(((src[srcOff] << 4) & 0x30) | ((src[srcOff + 1] >> 4) & 0x0F));
    dst[dstOff + 2]=(byte)ENCODE_TABLE.charAt((src[srcOff + 1] << 2) & 0x3C);
  }
 else {
    dst[dstOff + 1]=(byte)ENCODE_TABLE.charAt((src[srcOff] << 4) & 0x30);
  }
}

public static void convolveV(Kernel kernel,int[] inPixels,int[] outPixels,int width,int height,boolean alpha,int edgeAction){
  int index=0;
  float[] matrix=kernel.getKernelData(null);
  int rows=kernel.getHeight();
  int rows2=rows / 2;
  for (int y=0; y < height; y++) {
    for (int x=0; x < width; x++) {
      float r=0, g=0, b=0, a=0;
      for (int row=-rows2; row <= rows2; row++) {
        int iy=y + row;
        int ioffset;
        if (iy < 0) {
          if (edgeAction == CLAMP_EDGES)           ioffset=0;
 else           if (edgeAction == WRAP_EDGES)           ioffset=((y + height) % height) * width;
 else           ioffset=iy * width;
        }
 else         if (iy >= height) {
          if (edgeAction == CLAMP_EDGES)           ioffset=(height - 1) * width;
 else           if (edgeAction == WRAP_EDGES)           ioffset=((y + height) % height) * width;
 else           ioffset=iy * width;
        }
 else         ioffset=iy * width;
        float f=matrix[row + rows2];
        if (f != 0) {
          int rgb=inPixels[ioffset + x];
          a+=f * ((rgb >> 24) & 0xff);
          r+=f * ((rgb >> 16) & 0xff);
          g+=f * ((rgb >> 8) & 0xff);
          b+=f * (rgb & 0xff);
        }
      }
      int ia=alpha ? PixelUtils.clamp((int)(a + 0.5)) : 0xff;
      int ir=PixelUtils.clamp((int)(r + 0.5));
      int ig=PixelUtils.clamp((int)(g + 0.5));
      int ib=PixelUtils.clamp((int)(b + 0.5));
      outPixels[index++]=(ia << 24) | (ir << 16) | (ig << 8)| ib;
    }
  }
}

@SuppressWarnings("unchecked") public final void storeData(final List data) throws IDBPersistenceException {
  SqlSession session=null;
  int size=data.size();
  int commited=0;
  T dtShortTermLog;
  try {
    session=sqlSessionFactory.openSession(ExecutorType.BATCH,false);
    if (LOGGER.isDebugEnabled()) {
      LOGGER.debug("Obtained batch transacted SQL session (session: " + session.toString() + ")");
    }
    LoggerMapper<T> persistenceMapper=session.getMapper(mapperInterface);
    for (int i=0; i != size; i++) {
      if ((0 == i % RECORDS_PER_BATCH) && i > 0) {
        if (LOGGER.isDebugEnabled()) {
          LOGGER.debug("storeData([Collection]) : Commiting rows for i=" + i);
        }
        session.commit();
        commited=i;
      }
      if (data.get(i) != null) {
        dtShortTermLog=(T)data.get(i);
        if (LOGGER.isDebugEnabled()) {
          LOGGER.debug("Logging object with ID: " + dtShortTermLog.getId());
        }
        persistenceMapper.insertLog(dtShortTermLog);
      }
    }
    session.commit();
    commited=size;
  }
 catch (  PersistenceException e) {
    LOGGER.error("storeData([Collection]) : Error executing/closing prepared statement for " + data.size() + " dataTags",e);
    try {
      if (session != null) {
        session.rollback();
      }
    }
 catch (    Exception sql) {
      LOGGER.error("storeData([Collection]) : Error rolling back transaction.",sql);
    }
    throw new IDBPersistenceException(e.getMessage(),commited);
  }
 finally {
    try {
      if (session != null) {
        session.close();
      }
    }
 catch (    Exception e) {
      LOGGER.error("storeData([Collection]) : Error closing session.",e);
    }
  }
}

@SuppressWarnings("unchecked") public static Map<String,ConfigurationKey<?>> registeredKeys(){
synchronized (registeredKeys) {
    if (copy == null)     copy=Collections.unmodifiableMap((Map<String,ConfigurationKey<?>>)registeredKeys.clone());
    return copy;
  }
}

public static String md5(String stringToHash){
  if (stringToHash != null) {
    try {
      MessageDigest md=MessageDigest.getInstance("MD5");
      byte[] bytes=md.digest(stringToHash.getBytes());
      StringBuilder sb=new StringBuilder(2 * bytes.length);
      for (int i=0; i < bytes.length; i++) {
        int low=(bytes[i] & 0x0f);
        int high=((bytes[i] & 0xf0) >> 4);
        sb.append(Constants.HEXADECIMAL[high]);
        sb.append(Constants.HEXADECIMAL[low]);
      }
      return sb.toString();
    }
 catch (    NoSuchAlgorithmException e) {
      return "";
    }
  }
 else {
    return "";
  }
}

public String mostOfString(){
  String typeName="";
switch (type) {
case BUILTIN:
    typeName="BUILTIN";
  break;
case NUMBER:
typeName="NUMBER";
break;
case STRING:
typeName="STRING";
break;
case PF_STEP:
typeName="PF_STEP";
break;
case IDENT:
typeName="IDENT";
break;
case COMMENT:
typeName="COMMENT";
break;
case DASHES:
typeName="DASHES";
break;
case END_MODULE:
typeName="END_MODULE";
break;
case PROLOG:
typeName="PROLOG";
break;
case EPILOG:
typeName="EPILOG";
break;
case PCAL_LABEL:
typeName="PCAL_LABEL";
break;
}
;
String str="\"" + string + "\"";
if (string == null) {
str="null";
}
;
String result="[str |-> " + str + ",\t type |-> "+ typeName+ ",\t col |-> "+ column+ ",\t width |-> "+ getWidth();
if (aboveAlign.line != -1) {
result=result + ",\t above |-> " + aboveAlign.toString();
}
;
if (belowAlign.line != -1) {
result=result + ",\t below |-> " + belowAlign.toString();
}
;
if (preSpace != 0) {
result=result + ", space |-> " + preSpace;
}
;
if (isAlignmentPoint) {
result=result + ", align |-> true";
}
;
if (distFromMargin != 0) {
result=result + ", dist |-> " + distFromMargin;
}
;
if (subscript) {
result=result + ", sub |-> true";
}
;
return result;
}

public CreateIndexRequest mapping(String type,XContentBuilder source){
  if (mappings.containsKey(type)) {
    throw new IllegalStateException("mappings for type \"" + type + "\" were already defined");
  }
  try {
    mappings.put(type,source.string());
  }
 catch (  IOException e) {
    throw new IllegalArgumentException("Failed to build json for mapping request",e);
  }
  return this;
}

public static PrettyPrint indentWithSpaces(int number){
  if (number < 0) {
    throw new IllegalArgumentException("number is negative");
  }
  char[] chars=new char[number];
  Arrays.fill(chars,' ');
  return new PrettyPrint(chars);
}

private static void copyFile(File src,File dst,Integer port,boolean internalCompression) throws IOException {
  BufferedReader in=new BufferedReader(new InputStreamReader(new FileInputStream(src),StandardCharsets.UTF_8));
  Writer out=new OutputStreamWriter(new FileOutputStream(dst),StandardCharsets.UTF_8);
  for (String line=in.readLine(); null != line; line=in.readLine()) {
    if (null != port)     line=line.replace("TEST_PORT",port.toString());
    line=line.replace("COMPRESSION",internalCompression ? "internal" : "false");
    out.write(line);
  }
  in.close();
  out.close();
}

public void assertEventLogContains(Object event){
  if (!mEventLog.contains(event)) {
    fail("Expected event not present. Actual events: " + mEventLog);
  }
}

private static boolean isAllUnderscores(){
  int i=0;
  boolean result=true;
  while (result && (i < token.length())) {
    if (token.charAt(i) != '_') {
      result=false;
    }
    ;
    i=i + 1;
  }
  ;
  return result;
}

public ImageWarp(BufferedImage bi,GeoCoordTransformation transform,DataBounds imageBounds){
  if (bi != null) {
    iwidth=bi.getWidth();
    iheight=bi.getHeight();
    setGeoTrans(transform);
    setImageBounds(imageBounds);
    pixels=getPixels(bi,0,0,iwidth,iheight);
    bi=null;
  }
}

public static EquipmentLoggerFactory createFactory(final EquipmentConfiguration econf,final ProcessConfiguration pconf,boolean useEquipmentLoggers,boolean useEquipmentAppendersOnly){
  return new EquipmentLoggerFactory(econf.getHandlerClassName(),Long.valueOf(econf.getId()),econf.getName(),pconf.getProcessName(),useEquipmentLoggers,useEquipmentAppendersOnly);
}

protected void assertEquals(Integer expected,Integer actual){
  if (expected == null || actual == null) {
    if (expected != actual) {
      assertEquals("" + expected,"" + actual);
    }
  }
 else {
    assertEquals(expected.intValue(),actual.intValue());
  }
}

public static boolean vPoolSpecifiesSnapshots(final VirtualPool virtualPool){
  if (virtualPool.getMaxNativeSnapshots() == null) {
    return false;
  }
  return virtualPool.getMaxNativeSnapshots() != MAX_DISABLED;
}

public void mapDatasetToAxis(int index,int axisIndex){
  List axisIndices=new java.util.ArrayList(1);
  axisIndices.add(new Integer(axisIndex));
  mapDatasetToAxes(index,axisIndices);
}

public AuthenticatorAppRegistrationURIBuilder(AMIdentity id,String secretHex,int codeLength,String issuer){
  Reject.ifNull(id,"id cannot be null");
  Reject.ifNull(secretHex,"secretHex cannot be null");
  Reject.ifTrue(StringUtils.isBlank(issuer),"issuer cannot be empty");
  Reject.ifTrue((codeLength < MIN_CODE_LENGTH),"code length must be " + MIN_CODE_LENGTH + " or greater");
  if (secretHex.length() == 0) {
    throw new IllegalArgumentException("secretHex cannot be an empty String.");
  }
  this.issuer=issuer;
  this.id=id;
  this.secretHex=secretHex;
  this.codeLength=codeLength;
}

protected void updateApplicationEnabled(){
  firePropertyChange("enabled",Boolean.valueOf(!isEnabled()),Boolean.valueOf(isEnabled()));
}

public PersonalityInsights(final String versionDate,String username,String password){
  this(versionDate);
  setUsernameAndPassword(username,password);
}

public String signMessage(String message) throws IllegalStateException {
  Validate.notNull(getSignAlgorithm(),"Signature Algorithm");
  Validate.notNull(getPrivateKey(),"PrivateKey for signing");
  Validate.notEmpty(message,"message string");
  log.debug("Signing  message " + message + ", sigAlg "+ getSignAlgorithm());
  try {
    SignatureAlgorithm algo=SignatureAlgorithm.getSignatureAlgorithmForURI(getSignAlgorithm());
    Signature sig=Signature.getInstance(algo.getAlgorithmName());
    sig.initSign(this.privateKey);
    byte[] messageBytes=message.getBytes("UTF-8");
    sig.update(messageBytes);
    byte[] sigBytes=sig.sign();
    String signature=SharedUtils.encodeBytes(sigBytes);
    log.debug("signature: " + signature);
    return signature;
  }
 catch (  Exception e) {
    log.error("Failed to sign the message: exception cause",e);
    throw new IllegalStateException(e);
  }
}

private void outputPriceLists(Properties ctx,PrintWriter out,boolean includeAny){
  out.println("<pricelists>");
  if (includeAny)   out.println("<pricelist id='-1' selected='selected'>ANY</pricelist>");
  out.println("<pricelist id='1'>Standard</pricelist>");
  out.println("<pricelist id='2'>Summer Specials</pricelist>");
  out.println("</pricelists>");
}

public void clearBindings(){
  if (mBindArgs != null) {
    Arrays.fill(mBindArgs,null);
  }
}

public boolean assignIfBestMatch(MethodDeclaration declaration){
  assert !finalized : "Assigning on a method that has already been finalized";
  if (!isMatch(declaration.getParameters())) {
    return false;
  }
  if (this.bestMatchMethod.isPresent()) {
    if (this.bestMatchMethod.get().getParameters().size() > declaration.getParameters().size()) {
      return false;
    }
  }
  this.bestMatchMethod=Optional.of(declaration);
  return true;
}

public static List<User> from(Cursor c){
  List<User> users=null;
  int count=c.getCount();
  if (count > 0) {
    users=new ArrayList<>(count);
    while (c.moveToNext()) {
      User user=new User();
      Syncing.from(c,user);
      int col=c.getColumnIndex(EMAIL_HASH);
      if (col >= 0) {
        user.emailHash=c.getString(col);
      }
      col=c.getColumnIndex(FOLLOWING);
      if (col >= 0) {
        user.isFollowing=c.getInt(col) == 1;
      }
      users.add(user);
    }
  }
  c.close();
  return users;
}

@Override public void flush() throws IOException {
  out.flush();
}

private void startCheckingStatus(){
  future=executor.submit(null);
}

private static Object newInstanceNoServiceLoader(Class<?> providerClass){
  if (System.getSecurityManager() == null) {
    return null;
  }
  try {
    Method creationMethod=providerClass.getDeclaredMethod("newXPathFactoryNoServiceLoader");
    return creationMethod.invoke(null,(Object[])null);
  }
 catch (  NoSuchMethodException exc) {
    return null;
  }
catch (  Exception exc) {
    return null;
  }
}

private void addSignatureProfile(SignatureWrapper signature,XmlSignature xmlSignature){
  SignatureType signatureType=SignatureType.NA;
  String certificateId=signature.getSigningCertificateId();
  if (certificateId != null) {
    signatureType=getSignatureType(certificateId);
  }
  xmlSignature.setSignatureLevel(signatureType.name());
}

private static final int parseTimeString(String str){
  str=str.trim();
  int ret=0;
  boolean neg=false;
  int i=0;
  if (str.charAt(0) == '-') {
    neg=true;
    i++;
  }
  int num=0;
  final int len=str.length();
  for (; i < len; i++) {
    char c=str.charAt(i);
    if ((c >= '0') && (c <= '9')) {
      num=num * 10 + c - '0';
    }
 else     if (c == ':') {
      ret+=num;
      num=0;
      ret*=60;
    }
  }
  ret+=num;
  ret*=1000;
  if (neg)   ret=-ret;
  return ret;
}

public synchronized void removeImageListener(ImageListener cl){
  m_imageListeners.remove(cl);
}

public ArrayList<ConstraintWidget> buildList(ScoutWidget[] list){
  ArrayList<ConstraintWidget> ret=new ArrayList<>();
  for (int i=mContainSet.nextSetBit(0); i >= 0; i=mContainSet.nextSetBit(i + 1)) {
    ret.add(list[i].mConstraintWidget);
  }
  return ret;
}

private boolean nodeExists(StringTokenizer path) throws BackingStoreException {
  String token=path.nextToken();
  if (token.equals("/"))   throw new IllegalArgumentException("Consecutive slashes in path");
synchronized (lock) {
    AbstractPreferences child=kidCache.get(token);
    if (child == null)     child=getChild(token);
    if (child == null)     return false;
    if (!path.hasMoreTokens())     return true;
    path.nextToken();
    if (!path.hasMoreTokens())     throw new IllegalArgumentException("Path ends with slash");
    return child.nodeExists(path);
  }
}

public int size(){
  return delegate.size();
}

public NetworkAddressFactoryImpl() throws InitializationException {
  this(DEFAULT_TCP_HTTP_LISTEN_PORT);
}

public TransparentGlassPanePanel(ImageIcon icon,String text,Color backgroundColor,float transparency){
  setLayout(new GridBagLayout());
  GridBagConstraints gbc=new GridBagConstraints();
  gbc.gridy=0;
  gbc.gridx=0;
  JLabel iconLabel=new JLabel(icon);
  add(iconLabel,gbc);
  gbc.gridy+=1;
  label=new JLabel(text);
  add(label,gbc);
  if (transparency > 1) {
    transparency=1;
  }
 else   if (transparency < 0) {
    transparency=0;
  }
  Color transparentColor=new Color(backgroundColor.getRed(),backgroundColor.getGreen(),backgroundColor.getBlue(),(int)(transparency * 255));
  setBackground(transparentColor);
  setOpaque(false);
}

@Override protected void fillHeader(Header head){
  try {
    Standard.context(UndefinedData.class);
    head.setXtension("UNKNOWN");
    head.setBitpix(BasicHDU.BITPIX_BYTE);
    head.setNaxes(1);
    head.addValue(NAXISn.n(1),this.data.length);
    head.addValue(PCOUNT,0);
    head.addValue(GCOUNT,1);
    head.addValue(EXTEND,true);
  }
 catch (  HeaderCardException e) {
    LOG.log(Level.SEVERE,"Unable to create unknown header",e);
  }
 finally {
    Standard.context(null);
  }
}

protected void cleanStationsAndNetwork(){
  log.info("Clean Stations and Network...");
  cleanSchedule();
  removeNonUsedStopFacilities();
  cleanModes();
  removeNonUsedLinks();
  log.info("Clean Stations and Network... done.");
}

private static String stripAppleSpanFromMarkup(String markup){
  StringBuilder stripped=new StringBuilder(markup);
  int prefixBegIdx=stripped.indexOf(APPLE_SPAN_PREFIX);
  while (prefixBegIdx >= 0) {
    int prefixEndIdx=stripped.indexOf(">",prefixBegIdx) + 1;
    stripped.replace(prefixBegIdx,prefixEndIdx,"");
    int suffixBegIdx=stripped.lastIndexOf(APPLE_SPAN_SUFFIX);
    int suffixEndIdx=suffixBegIdx + APPLE_SPAN_SUFFIX.length();
    stripped.replace(suffixBegIdx,suffixEndIdx,"");
    prefixBegIdx=stripped.indexOf(APPLE_SPAN_PREFIX);
  }
  return stripped.toString();
}

private InvocationConstraints createInvocationConstraints(){
  if (MIN_RETRY >= sleepTime[tryIndx]) {
    return new InvocationConstraints(new ConnectionAbsoluteTime(System.currentTimeMillis() + sleepTime[tryIndx]),null);
  }
 else {
    return InvocationConstraints.EMPTY;
  }
}

public void create(SSOToken token,String dn,Map attrs) throws SMSException, SSOException {
  create(token.getPrincipal(),dn,attrs);
  objectChanged(dn,ADD);
}

@Override public void close() throws IOException {
  if (!closed) {
    try {
      if (!eof) {
        exhaustInputStream(this);
      }
    }
  finally {
      eof=true;
      closed=true;
    }
  }
}

private void discardDownstreamMediaChunk(){
  MediaChunk removed=mediaChunks.removeFirst();
  long totalBytes=removed.bytesLoaded();
  removed.release();
  notifyDownstreamDiscarded(removed.startTimeUs,removed.endTimeUs,totalBytes);
}

public Object executeScript(final Script script,final ScriptContext context){
  final ScriptEngine engine=scriptEngineProvider.getScriptEngine(script.getType());
  return executeScript(script,engine,context);
}

public static PlaceholderFragment newInstance(){
  PlaceholderFragment fragment=new PlaceholderFragment();
  Bundle args=new Bundle();
  fragment.setArguments(args);
  return fragment;
}

void removeEQ(Object o){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    Object[] array=queue;
    for (int i=0, n=size; i < n; i++) {
      if (o == array[i]) {
        removeAt(i);
        break;
      }
    }
  }
  finally {
    lock.unlock();
  }
}

public T eval(){
  return eval(bindings());
}

public void add(XMPPathSegment segment){
  segments.add(segment);
}

private void nextSync(){
  if (syncItemIterator.hasNext()) {
    partialStartTime=System.currentTimeMillis();
    currentSyncItem=syncItemIterator.next();
    currentSyncItem.sync(this,hostConnection,callbackHandler,contentResolver);
  }
 else {
    LogUtils.LOGD(TAG,"Sync finished for all items. Total time: " + (System.currentTimeMillis() - startTime));
    if (listener != null) {
      listener.onSyncFinished(this);
    }
    syncService.stopSelf(serviceStartId);
  }
}

public String decode(String encoded){
  JsonObject object=new JsonObject(encoded);
  JsonArray headers=object.getJsonArray("headers");
  for (  Object headerObj : headers) {
    JsonArray header=(JsonArray)headerObj;
    String key=header.getString(0);
    String value=header.getString(1);
    if (key.equalsIgnoreCase(CONTENT_TYPE) && (value.contains("text/") || value.contains(APPLICATION_JSON))) {
      try {
        object.put("payloadObject",new JsonObject(new String(object.getBinary(PAYLOAD),Charset.forName(UTF_8))));
      }
 catch (      DecodeException e) {
        object.put("payloadString",new String(object.getBinary(PAYLOAD),Charset.forName(UTF_8)));
      }
      object.remove(PAYLOAD);
      break;
    }
  }
  return object.toString();
}

public boolean matchesWord(){
  return !isEmpty() && Character.isLetterOrDigit(queue.charAt(pos));
}

public void test_doAs_01(){
  Subject subj=new Subject();
  PrivilegedAction<Object> pa=new myPrivilegedAction();
  PrivilegedAction<Object> paNull=null;
  try {
    Object obj=Subject.doAs(null,pa);
  }
 catch (  Exception e) {
    fail("Unexpected exception: " + e);
  }
  try {
    Object obj=Subject.doAs(subj,pa);
  }
 catch (  Exception e) {
    fail("Unexpected exception: " + e);
  }
  try {
    Object obj=Subject.doAs(subj,paNull);
    fail("NullPointerException wasn't thrown");
  }
 catch (  NullPointerException npe) {
  }
}

public void testDivideExpLessZero(){
  String a="1231212478987482988429808779810457634781384756794987";
  int aScale=15;
  String b="747233429293018787918347987234564568";
  int bScale=10;
  String c="1.64770E+10";
  int resScale=-5;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  BigDecimal result=aNumber.divide(bNumber,resScale,BigDecimal.ROUND_CEILING);
  assertEquals("incorrect value",c,result.toString());
  assertEquals("incorrect scale",resScale,result.scale());
}

public static boolean containsWhitespace(final CharSequence seq){
  if (isEmpty(seq)) {
    return false;
  }
  final int strLen=seq.length();
  for (int i=0; i < strLen; i++) {
    if (Character.isWhitespace(seq.charAt(i))) {
      return true;
    }
  }
  return false;
}

public boolean isWheelEvent(){
  return isWheelEvent;
}

public Connection(String clientHandle,String clientId,String host,int port,Context context,MqttAndroidClient client,boolean sslConnection){
  this.clientHandle=clientHandle;
  this.clientId=clientId;
  this.host=host;
  this.port=port;
  this.context=context;
  this.client=client;
  this.sslConnection=sslConnection;
  history=new ArrayList<String>();
  StringBuffer sb=new StringBuffer();
  sb.append("Client: ");
  sb.append(clientId);
  sb.append(" created");
  addAction(sb.toString());
}

public void recordState(DialogueState state,String name){
  if (frame != null) {
    stateMonitorTab.recordState(state,name);
  }
}

public void characters(org.w3c.dom.Node node) throws org.xml.sax.SAXException {
  flushPending();
  String data=node.getNodeValue();
  if (data != null) {
    final int length=data.length();
    if (length > m_charsBuff.length) {
      m_charsBuff=new char[length * 2 + 1];
    }
    data.getChars(0,length,m_charsBuff,0);
    characters(m_charsBuff,0,length);
  }
}

private void computeFiltersFromDefault(IndicatorViewState oldState){
  filters=new ArrayList<Filter>();
  Set<String> defaultFilterNames=new HashSet<String>();
  for (  Filter defaultFilter : defaultFilters) {
    filters.add(defaultFilter);
    if (defaultFilter.name != null)     defaultFilterNames.add(defaultFilter.name);
  }
  if (oldState != null) {
    for (    Filter oldFilter : oldState.filters) {
      if (oldFilter.name == null || !defaultFilterNames.contains(oldFilter.name))       filters.add(oldFilter);
    }
  }
}

private static Data parseName(Set me,Set peer){
  if (me == null) {
    throw new NullPointerException("local principals must be non-empty");
  }
 else   if (me.isEmpty()) {
    throw new IllegalArgumentException("local principals must be non-empty");
  }
  Data data=new Data();
  StringBuffer b=new StringBuffer();
  data.me=cons(me,b);
  if (peer != null && !peer.isEmpty()) {
    b.append(" peer ");
    data.peer=cons(peer,b);
  }
  data.name=b.toString();
  return data;
}

public static boolean streamContentEquals(InputStream s1,InputStream s2) throws IOException {
  try {
    int b1, b2;
    do {
      b1=s1.read();
      b2=s2.read();
    }
 while ((b1 == b2) && (b1 != -1));
    return b1 == b2;
  }
  finally {
    try {
      s1.close();
      s2.close();
    }
 catch (    Exception e) {
    }
  }
}

public ContentNode parse(JSDocCharScanner scanner,TagDictionary<AbstractInlineTagDefinition> inlineTagsDictinary){
  ComposedContent description=DomFactory.eINSTANCE.createComposedContent();
  if (!scanner.hasNext()) {
    return null;
  }
  if (nextIsTagTitle(scanner)) {
    return null;
  }
  int start=scanner.nextOffset();
  int end=start;
  StringBuilder strb=new StringBuilder();
  while (scanner.hasNext()) {
    char c=scanner.peek();
    if (regionStart(c)) {
      ScannerState st=scanner.saveState();
      InlineTag tag=(InlineTag)parseRegion(scanner,inlineTagsDictinary);
      if (tag != null) {
        saveTextTokens(description,start,end,strb);
        strb=new StringBuilder();
        start=end;
        description.getContents().add(tag);
        continue;
      }
 else {
        scanner.restoreState(st);
        if (start == end) {
          assert false;
        }
      }
    }
    scanner.next();
    if (JSDocCharScanner.isNL(c)) {
      if (scanner.hasNext() && !nextIsTagTitle(scanner)) {
        end=scanner.offset();
      }
 else {
        break;
      }
    }
    strb.append(c);
    end=scanner.offset();
  }
  String pendingData=strb.toString();
  if (pendingData.isEmpty() == false) {
    saveTextTokens(description,start,end,strb);
  }
switch (description.getContents().size()) {
case 0:
    return null;
case 1:
  return description.getContents().get(0);
default :
return description;
}
}

static public void add(Errors errors,String text){
  if (errors == null) {
    return;
  }
  errors.add(text);
}

public synchronized void removeIconsForPkg(String packageName,UserHandleCompat user){
  removeFromMemCacheLocked(packageName,user);
  long userSerial=mUserManager.getSerialNumberForUser(user);
  mIconDb.delete(IconDB.COLUMN_COMPONENT + " LIKE ? AND " + IconDB.COLUMN_USER+ " = ?",new String[]{packageName + "/%",Long.toString(userSerial)});
}

public boolean contains(String sCategory){
  return CategoryEstimations.containsKey(sCategory);
}

private void createRecursivly(String path) throws KeeperException, InterruptedException {
  try {
    if (zk.exists(path,true) == null && path.length() > 0) {
      String temp=path.substring(0,path.lastIndexOf(File.separator));
      createRecursivly(temp);
      zk.create(path,null,Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
    }
 else {
      return;
    }
  }
 catch (  KeeperException e) {
    throw e;
  }
catch (  InterruptedException e) {
    throw e;
  }
}

public static final void frontEndStatistics(SpecObj spec){
}

public String toString(){
  if (notBefore == null || notAfter == null)   return "";
  return ("Validity: [From: " + notBefore.toString() + ",\n               To: "+ notAfter.toString()+ "]");
}

public void zoom(double x,double y,double factor){
  double rangeX=Math.abs(currentExtent.getMaxX() - currentExtent.getMinX());
  double rangeY=Math.abs(currentExtent.getMaxY() - currentExtent.getMinY());
  currentExtent.setMinX(x - (rangeX * factor) / 2.0);
  currentExtent.setMinY(y - (rangeY * factor) / 2.0);
  currentExtent.setMaxX(x + (rangeX * factor) / 2.0);
  currentExtent.setMaxY(y + (rangeY * factor) / 2.0);
  addToExtentHistory(currentExtent);
}

protected boolean isOutputLineExpected(final String line,final String[] expectedPrefixes,final boolean filePathsAreExpected){
  final String trimmed=line != null ? line.trim() : null;
  if (StringUtils.isNotEmpty(trimmed)) {
    if (filePathsAreExpected && isFilePath(line)) {
      return true;
    }
    if (expectedPrefixes != null) {
      for (      final String prefix : expectedPrefixes) {
        if (StringUtils.startsWithIgnoreCase(line,prefix)) {
          return true;
        }
      }
    }
    return false;
  }
  return true;
}

public static String meterToString(OFInstructionMeter inst,Logger log){
  return STR_SUB_GOTO_METER_METER_ID + "=" + Long.toString(inst.getMeterId());
}

public boolean isImageCachable(int w,int h){
  return (w * h) < maxSingleImagePixelSize;
}

public static BigInteger sizeOfDirectoryAsBigInteger(File directory){
  checkDirectory(directory);
  final File[] files=directory.listFiles();
  if (files == null) {
    return BigInteger.ZERO;
  }
  BigInteger size=BigInteger.ZERO;
  for (  final File file : files) {
    try {
      if (!isSymlink(file)) {
        size=size.add(BigInteger.valueOf(sizeOf(file)));
      }
    }
 catch (    IOException ioe) {
    }
  }
  return size;
}

private void writeAttribute(java.lang.String prefix,java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (xmlWriter.getPrefix(namespace) == null) {
    xmlWriter.writeNamespace(prefix,namespace);
    xmlWriter.setPrefix(prefix,namespace);
  }
  xmlWriter.writeAttribute(namespace,attName,attValue);
}

public void freeEntry(BasicPoolEntry entry){
  if (numEntries < 1) {
    throw new IllegalStateException("No entry created for this pool. " + route);
  }
  if (numEntries <= freeEntries.size()) {
    throw new IllegalStateException("No entry allocated from this pool. " + route);
  }
  freeEntries.add(entry);
}

public boolean isIn(Coords coords){
  return coordinates.contains(coords);
}

private DialogBaseUnits computeDialogBaseUnits(FontMetrics metrics){
  double averageCharWidth=computeAverageCharWidth(metrics,averageCharWidthTestString);
  int ascent=metrics.getAscent();
  double height=ascent > 14 ? ascent : ascent + (15 - ascent) / 3;
  DialogBaseUnits dialogBaseUnits=new DialogBaseUnits(averageCharWidth,height);
  if (LOGGER.isLoggable(Level.CONFIG)) {
    LOGGER.config("Computed dialog base units " + dialogBaseUnits + " for: "+ metrics.getFont());
  }
  return dialogBaseUnits;
}

public synchronized void close(){
  try {
    writer.close();
  }
 catch (  IOException ioe) {
    ioe.printStackTrace();
  }
}

public static boolean isProxyUri(final String url){
  notNull(url);
  return url.contains(getRequestHandlerPath());
}

public void addAction(Action act){
  if (act.entry != null && act.entry != this) {
    Log.e(TAG,"addAction failed. Already applied to another notification - " + act.entry.ID + ". Current notification is "+ ID);
    return;
  }
  if (mActions == null) {
    mActions=new ArrayList<Action>();
  }
  if (mActions.size() == 3) {
    Log.w(TAG,"only suppport up to 3 actions.");
    return;
  }
  act.entry=this;
  mActions.add(act);
}

public abstract Iterable<? extends CompilationUnitTree> parse() throws IOException ;

private void name(StringBuilder builder){
  String name=type.getName();
  if (name != null) {
    builder.append('@');
    builder.append(name);
    builder.append('(');
  }
}

boolean ensureProcessSizeFits(final ExecutionUnit process,final Rectangle2D rect){
  Dimension processSize=model.getProcessSize(process);
  if (processSize == null) {
    return false;
  }
  if (rect == null) {
    return false;
  }
  boolean needsResize=false;
  double processWidth=processSize.getWidth() * (1 / model.getZoomFactor());
  double processHeight=processSize.getHeight() * (1 / model.getZoomFactor());
  double width=processWidth;
  double height=processHeight;
  if (processSize != null) {
    if (processWidth < rect.getMaxX() + ProcessDrawer.GRID_X_OFFSET) {
      double diff=rect.getMaxX() + ProcessDrawer.GRID_X_OFFSET - processWidth;
      if (diff > ProcessDrawer.GRID_X_OFFSET) {
        width+=diff;
      }
 else {
        width+=ProcessDrawer.GRID_X_OFFSET;
      }
      needsResize=true;
    }
    if (processHeight < rect.getMaxY() + ProcessDrawer.GRID_Y_OFFSET) {
      double diff=rect.getMaxY() + ProcessDrawer.GRID_Y_OFFSET - processHeight;
      if (diff > ProcessDrawer.GRID_Y_OFFSET) {
        height+=diff;
      }
 else {
        height+=ProcessDrawer.GRID_Y_OFFSET;
      }
      needsResize=true;
    }
    if (needsResize) {
      model.setProcessWidth(process,width);
      model.setProcessHeight(process,height);
      balance();
      model.fireProcessSizeChanged();
      return true;
    }
  }
  return false;
}

public void handleTblHandlersButtonAddRequest(RequestInvocationEvent event) throws ModelControlException {
  try {
    Map values=getValues();
    onBeforeSaveProfile(values);
    setPageSessionAttribute(PROPERTY_ATTRIBUTE,(HashMap)values);
    WSAuthNServicesHandlersAddViewBean vb=(WSAuthNServicesHandlersAddViewBean)getViewBean(WSAuthNServicesHandlersAddViewBean.class);
    unlockPageTrail();
    passPgSessionMap(vb);
    vb.forwardTo(getRequestContext());
  }
 catch (  AMConsoleException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",e.getMessage());
  }
}

public void reduceDL(double expFPRate,boolean checkErr){
  boolean needUpdate=false;
  double[] rulesetStat=new double[6];
  for (int j=0; j < m_SimpleStats.size(); j++) {
    rulesetStat[0]+=m_SimpleStats.get(j)[0];
    rulesetStat[2]+=m_SimpleStats.get(j)[2];
    rulesetStat[4]+=m_SimpleStats.get(j)[4];
    if (j == m_SimpleStats.size() - 1) {
      rulesetStat[1]=m_SimpleStats.get(j)[1];
      rulesetStat[3]=m_SimpleStats.get(j)[3];
      rulesetStat[5]=m_SimpleStats.get(j)[5];
    }
  }
  for (int k=m_SimpleStats.size() - 1; k >= 0; k--) {
    double[] ruleStat=m_SimpleStats.get(k);
    double ifDeleted=potential(k,expFPRate,rulesetStat,ruleStat,checkErr);
    if (!Double.isNaN(ifDeleted)) {
      if (k == (m_SimpleStats.size() - 1)) {
        removeLast();
      }
 else {
        m_Ruleset.remove(k);
        needUpdate=true;
      }
    }
  }
  if (needUpdate) {
    m_Filtered=null;
    m_SimpleStats=null;
    countData();
  }
}

@Override public void onDrawFrame(GL10 gl10){
  GLES20.glClearColor(1.0f,0.0f,0.0f,1.0f);
  GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
  GLES20.glEnable(GLES20.GL_DEPTH_TEST);
  GLES20.glEnable(GLES20.GL_CULL_FACE);
  GLES20.glEnable(GLES20.GL_BLEND);
  GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA,GLES20.GL_ONE_MINUS_SRC_ALPHA);
  long currentTimeMillis=System.currentTimeMillis();
  updateWithDelta(currentTimeMillis - lastTimeMillis);
  lastTimeMillis=currentTimeMillis;
}

public void removeLineHighlight(Object tag){
  if (tag instanceof LineHighlightInfo) {
    lineHighlights.remove(tag);
    repaintLine((LineHighlightInfo)tag);
  }
}

private Element createSingleLogOutForCastleAsIDP(String binding) throws Exception {
  String entityID=idmClient.getEntityID(tenantName);
  String ssoLoc=convertToIPV6ShortForm(entityID);
  if (ssoLoc == null) {
    ssoLoc=tenantName;
  }
  String sloLoc=ssoLoc.replaceAll("/Metadata/","/SLO/");
  Element slosEle=createEndPoint(SAMLNames.SLOS,binding,sloLoc,null);
  return slosEle;
}

public static void unregisterTransportMBean(String containerName) throws Exception {
  MBeanServer mBeanServer=getMBeanServer(containerName);
  if (mBeanServer == null)   return;
  ObjectName transportMBeanObjectName=TransportConstants.createTransportMBeanObjectName(containerName);
  if (mBeanServer.isRegistered(transportMBeanObjectName)) {
    mBeanServer.unregisterMBean(transportMBeanObjectName);
    if (_logger.isLoggable(Level.FINE)) {
      _logger.fine("Transport MBean was unregistered successfully.");
    }
  }
}

public void addNodesInDocOrder(NodeIterator iterator,XPathContext support){
  if (!m_mutable)   throw new RuntimeException(XSLMessages.createXPATHMessage(XPATHErrorResources.ER_NODESET_NOT_MUTABLE,null));
  Node node;
  while (null != (node=iterator.nextNode())) {
    addNodeInDocOrder(node,support);
  }
}

protected void uninstallDefaults(){
  SeaGlassContext context=getContext(splitPane,ENABLED);
  style.uninstallDefaults(context);
  context.dispose();
  style=null;
  context=getContext(splitPane,Region.SPLIT_PANE_DIVIDER,ENABLED);
  dividerStyle.uninstallDefaults(context);
  context.dispose();
  dividerStyle=null;
  super.uninstallDefaults();
}

public void subtractAmount(final String amount){
  subtractAmount(Integer.parseInt(amount));
}

private synchronized void makeCompositeBuilder() throws InvalidObjectException {
  if (compositeBuilder != null)   return;
  Class<?> targetClass=(Class<?>)getJavaType();
  CompositeBuilder[][] builders={{new CompositeBuilderViaFrom(targetClass,itemNames)},{new CompositeBuilderViaConstructor(targetClass,itemNames)},{new CompositeBuilderCheckGetters(targetClass,itemNames,getterMappings),new CompositeBuilderViaSetters(targetClass,itemNames),new CompositeBuilderViaProxy(targetClass,itemNames)}};
  CompositeBuilder foundBuilder=null;
  final StringBuilder whyNots=new StringBuilder();
  Throwable possibleCause=null;
  find:   for (  CompositeBuilder[] relatedBuilders : builders) {
    for (int i=0; i < relatedBuilders.length; i++) {
      CompositeBuilder builder=relatedBuilders[i];
      String whyNot=builder.applicable(getters);
      if (whyNot == null) {
        foundBuilder=builder;
        break find;
      }
      Throwable cause=builder.possibleCause();
      if (cause != null)       possibleCause=cause;
      if (whyNot.length() > 0) {
        if (whyNots.length() > 0)         whyNots.append("; ");
        whyNots.append(whyNot);
        if (i == 0)         break;
      }
    }
  }
  if (foundBuilder == null) {
    String msg="Do not know how to make a " + targetClass.getName() + " from a CompositeData: "+ whyNots;
    if (possibleCause != null)     msg+=". Remaining exceptions show a POSSIBLE cause.";
    throw invalidObjectException(msg,possibleCause);
  }
  compositeBuilder=foundBuilder;
}

public void append(CharSequence s){
  text.append(s);
}

public void invalidateAll(){
  if (m_tuples == null)   return;
  for (int i=0; i < m_tuples.length; ++i)   invalidate(i);
}

public void add(final long addr){
  addrs.add(addr);
}

@AndroidOnly("The RI doesn't throw the IllegalStateException.") public void test_wrap_ByteBuffer_ByteBuffer_04(){
  String host="new host";
  int port=8080;
  ByteBuffer bbs=ByteBuffer.allocate(10);
  ByteBuffer bbd=ByteBuffer.allocate(10);
  SSLEngine sse=getEngine(host,port);
  try {
    sse.wrap(bbs,bbd);
    fail("IllegalStateException wasn't thrown");
  }
 catch (  IllegalStateException iobe) {
  }
catch (  Exception e) {
    fail(e + " was thrown instead of IllegalStateException");
  }
}

public static boolean isBlackListed(@Nonnull Size size,@Nonnull String blacklistString){
  String[] blacklistStringArray=blacklistString.split(",");
  if (blacklistStringArray.length == 0) {
    return false;
  }
  Set<String> blacklistedSizes=new HashSet(Lists.newArrayList(blacklistStringArray));
  return isBlackListed(size,blacklistedSizes);
}

static private void _writeDecRef(Writer out,char ch) throws IOException {
  if (ch == '\u20ac') {
    out.write("&euro;");
    return;
  }
  out.write("&#");
  int i=(int)ch;
  if (i > 10000) {
    out.write('0' + (i / 10000));
    i=i % 10000;
    out.write('0' + (i / 1000));
    i=i % 1000;
    out.write('0' + (i / 100));
    i=i % 100;
    out.write('0' + (i / 10));
    i=i % 10;
    out.write('0' + i);
  }
 else   if (i > 1000) {
    out.write('0' + (i / 1000));
    i=i % 1000;
    out.write('0' + (i / 100));
    i=i % 100;
    out.write('0' + (i / 10));
    i=i % 10;
    out.write('0' + i);
  }
 else {
    out.write('0' + (i / 100));
    i=i % 100;
    out.write('0' + (i / 10));
    i=i % 10;
    out.write('0' + i);
  }
  out.write(';');
}

protected byte[] inputStreamToByteArray(InputStream is) throws IOException {
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  int next=is.read();
  while (next > -1) {
    bos.write(next);
    next=is.read();
  }
  bos.flush();
  is.close();
  return bos.toByteArray();
}

@Override public String toString(){
  Object value=get();
  return value == null ? "" : value.toString();
}

private boolean isAReferenceTag(String str){
  if (str == null) {
    return false;
  }
  return str.indexOf("<") == 0 && str.lastIndexOf(">") == (str.length() - 1);
}

protected static String encode(String url){
  StringBuilder encoder=new StringBuilder();
  for (  char chr : url.toCharArray()) {
    byte chrByte=(byte)chr;
    if ((chrByte <= 32 || chrByte >= 127 || chr == '#' || chr == '%')) {
      encoder.append(String.format("%%%02X",chrByte));
    }
 else {
      encoder.append(chr);
    }
  }
  return encoder.toString();
}

public void testX509CRLEntry(){
  TBTCRLEntry tbt_crlentry=new TBTCRLEntry();
  assertNull(tbt_crlentry.getCertificateIssuer());
  assertNull(tbt_crlentry.getCriticalExtensionOIDs());
  try {
    assertNull(tbt_crlentry.getEncoded());
  }
 catch (  CRLException e) {
    fail("Unexpected exception " + e.getMessage());
  }
  assertNull(tbt_crlentry.getNonCriticalExtensionOIDs());
  assertNull(tbt_crlentry.getRevocationDate());
}

public static long now(){
  return System.currentTimeMillis();
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

private BinlogPosition findHeartbeat(MaxwellReplicator r) throws Exception {
  r.startReplicator();
  for (RowMap row=r.getRow(); row != null; row=r.getRow()) {
    if (Objects.equals(r.getLastHeartbeatRead(),recoveryInfo.heartbeat))     return row.getPosition();
  }
  return null;
}

private Configure(){
  Properties p=new Properties();
  Map args=new HashMap();
  args.putAll(System.getenv());
  args.putAll(System.getProperties());
  p.putAll(args);
  this.property=p;
  reload(false);
}

private void handleTruncatedInfo(final StatementInfo info) throws SQLException {
  final byte[] originalInfo=statement.getStatementInfoRequestItems();
  final byte[] newInfoItems=new byte[originalInfo.length + 2 * 4];
  int newIndex=0;
  for (  final byte infoItem : originalInfo) {
    assert newIndex < newInfoItems.length : "newInfoItems size too short";
switch (infoItem) {
case ISCConstants.isc_info_sql_select:
case ISCConstants.isc_info_sql_bind:
      final RowDescriptorBuilder currentBuilder=infoItem == ISCConstants.isc_info_sql_select ? info.fieldBuilder : info.parameterBuilder;
    final int descriptorIndex=currentBuilder != null ? currentBuilder.getFirstUnprocessedIndex() + 1 : 1;
  newInfoItems[newIndex++]=ISCConstants.isc_info_sql_sqlda_start;
newInfoItems[newIndex++]=2;
newInfoItems[newIndex++]=(byte)(descriptorIndex & 0xFF);
newInfoItems[newIndex++]=(byte)(descriptorIndex >> 8);
newInfoItems[newIndex++]=infoItem;
break;
default :
newInfoItems[newIndex++]=infoItem;
break;
}
}
assert newIndex == newInfoItems.length : "newInfoItems size too long";
info.requestBufferSize=Math.min(2 * info.requestBufferSize,statement.getMaxSqlInfoSize());
info.buffer=statement.getSqlInfo(newInfoItems,info.requestBufferSize);
info.currentIndex=0;
}

public static String stripFileExtension(String name){
  int pos=name.lastIndexOf('.');
  if (pos > 0 & pos < name.length() - 1)   return name.substring(0,pos);
  return name;
}

private static void pushTransactionStartStamp(Transaction t){
  Map<Transaction,Timestamp> map=suspendedTxStartStamps.get();
  Timestamp stamp=transactionStartStamp.get();
  if (stamp != null) {
    map.put(t,stamp);
  }
 else {
    Debug.logError("Error in transaction handling - no start stamp to push.",module);
  }
}

private int indexedBinarySearch(List<S2CellId> l,S2CellId key,int low){
  int high=l.size() - 1;
  while (low <= high) {
    int mid=(low + high) >> 1;
    S2CellId midVal=l.get(mid);
    int cmp=midVal.compareTo(key);
    if (cmp < 0) {
      low=mid + 1;
    }
 else     if (cmp > 0) {
      high=mid - 1;
    }
 else {
      return mid;
    }
  }
  return low;
}

public Variable[] findLocalArrays(){
  List<Variable> arrays=new ArrayList<Variable>();
  for (ListIterator<Variable> iterator=fLocalVariables.listIterator(fLocalVariables.size()); iterator.hasPrevious(); ) {
    Variable localVariable=iterator.previous();
    if (localVariable.isArray())     arrays.add(localVariable);
  }
  return arrays.toArray(new Variable[arrays.size()]);
}

public static int indexOfJavaLikeExtension(String fileName){
  int fileNameLength=fileName.length();
  char[][] javaLikeExtensions=getJavaLikeExtensions();
  extensions:   for (int i=0, length=javaLikeExtensions.length; i < length; i++) {
    char[] extension=javaLikeExtensions[i];
    int extensionLength=extension.length;
    int extensionStart=fileNameLength - extensionLength;
    int dotIndex=extensionStart - 1;
    if (dotIndex < 0)     continue;
    if (fileName.charAt(dotIndex) != '.')     continue;
    for (int j=0; j < extensionLength; j++) {
      if (fileName.charAt(extensionStart + j) != extension[j])       continue extensions;
    }
    return dotIndex;
  }
  return -1;
}

public ShapeTileSimplex remove_border_line(int p_no){
  if (p_no < 0 || p_no >= lines_size()) {
    return this;
  }
  ArrayList<PlaLineInt> new_arr=new ArrayList<PlaLineInt>(lines_size());
  new_arr.addAll(lines_list);
  new_arr.remove(p_no);
  return new ShapeTileSimplex(new_arr);
}

protected boolean waitBeforeExecution() throws InterruptedException {
  return true;
}

static boolean isValidStreamingUrl(String url){
  return url != null && url.matches("^https?:\\/\\/(www\\.)?twitch\\.tv\\/.+");
}

public WebServiceProxy(URL serverURL,ExecutorService executorService){
  this(serverURL,executorService,0,0);
}

private static byte[] exposeByteArrayInputStreamBytes(ByteArrayInputStream bais){
  byte[] buffer;
synchronized (bais) {
    byte[] buf;
    int pos;
    try {
      buf=(byte[])BAIS_BUF.get(bais);
      pos=BAIS_POS.getInt(bais);
    }
 catch (    IllegalAccessException iae) {
      throw new AssertionError(iae);
    }
    int available=bais.available();
    if (pos == 0 && buf.length == available) {
      buffer=buf;
    }
 else {
      buffer=new byte[available];
      System.arraycopy(buf,pos,buffer,0,available);
    }
    bais.skip(available);
  }
  return buffer;
}

private void restoreData(){
  Map<String,?> map=preferenceUtils.getAll();
  Set<String> strings=map.keySet();
  for (  String string : strings) {
    if (string.startsWith(SharedPreferenceUtils.keyTestMode)) {
      preferenceUtils.restoreKey(string);
    }
  }
  refreshKeyValues();
}

public String putImage(String theFolder,String theImageName,Bitmap theBitmap){
  if (theFolder == null || theImageName == null || theBitmap == null)   return null;
  this.DEFAULT_APP_IMAGEDATA_DIRECTORY=theFolder;
  String mFullPath=setupFullPath(theImageName);
  if (!mFullPath.equals("")) {
    lastImagePath=mFullPath;
    saveBitmap(mFullPath,theBitmap);
  }
  return mFullPath;
}

public Class<?> type(){
  if (isClass) {
    return (Class<?>)object;
  }
 else {
    return object.getClass();
  }
}

void addToExternalCSS(CSSElement cssElement){
  if (externalCSS == null) {
    externalCSS=new Vector();
  }
  externalCSS.addElement(cssElement);
}

@Override public String toString(){
  return buf.toString();
}

private void remove(String world,PermissionHolder holder,String permission){
  try {
    if (world != null && !world.equals("")) {
      holder.unsetPermission(permission,server,world);
    }
 else {
      holder.unsetPermission(permission,server);
    }
  }
 catch (  ObjectLacksException ignored) {
  }
  save(holder);
}

private void action_treeAddAll(){
  log.info("");
  ListModel model=centerList.getModel();
  int size=model.getSize();
  int index=-1;
  for (index=0; index < size; index++) {
    ListItem item=(ListItem)model.getElementAt(index);
    action_treeAdd(item);
  }
}

private ConcurrentSkipListMap.Node<K,V> hiNode(){
  if (hi == null)   return m.findLast();
 else   if (hiInclusive)   return m.findNear(hi,LT | EQ);
 else   return m.findNear(hi,LT);
}

public static final ImagePoint convertPoint(MapPoint mapPoint,MapEnvelope mapEnv,int imgHeight,int imgWidth){
  long imageY=Math.round(convertY(mapPoint,mapEnv,imgHeight));
  long imageX=Math.round(convertX(mapPoint,mapEnv,imgWidth));
  return new ImagePoint(imageX,imageY);
}

private void checkUsingAdaptation(){
  if (tsUseAdaptation.isSelected()) {
    tfAdaptationTime.setEnabled(true);
    tfAdaptationParam.setEnabled(true);
  }
 else {
    tfAdaptationTime.setEnabled(false);
    tfAdaptationParam.setEnabled(false);
  }
}

public String combineMix(List<String> files,String outFile){
  ArrayList<String> cmd=new ArrayList<String>();
  cmd.add(soxBin);
  cmd.add("-m");
  for (  String file : files) {
    cmd.add("-v");
    cmd.add("1.0");
    cmd.add(file);
  }
  cmd.add(outFile);
  try {
    int rc=execSox(cmd,callback);
    if (rc != 0) {
      outFile=null;
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
catch (  InterruptedException e) {
    e.printStackTrace();
  }
  return outFile;
}

public Quarter(int quarter,Year year){
  if ((quarter < FIRST_QUARTER) || (quarter > LAST_QUARTER)) {
    throw new IllegalArgumentException("Quarter outside valid range.");
  }
  this.year=(short)year.getYear();
  this.quarter=(byte)quarter;
  peg(Calendar.getInstance());
}

public void sendRequestVoteRequest(boolean isPrevote) throws GondolaException {
  if (!enabled || masterId >= 0) {
    return;
  }
  if (!isPrevote) {
    currentTerm++;
    votedFor=-1;
    save(currentTerm,memberId);
    votedFor=memberId;
  }
  prevotesOnly=isPrevote;
  Message message=pool.checkout();
  try {
    saveQueue.getLatest(savedRid);
    message.requestVoteRequest(memberId,currentTerm,isPrevote,savedRid);
    peers.forEach(null);
  }
  finally {
    message.release();
  }
  prevoteTs=clock.now() + (long)((Math.random() * prevotePeriod));
  if (!isPrevote) {
    prevoteTs+=electionTimeout;
  }
}

private List<String> filterTargetsFromResponse(Set<String> varrayTaggedPortWWNs,Map<String,List<String>> initiatorTargetMap,String initiatorKey){
  log.debug("START - filterTargetsFromResponse");
  List<String> filteredTargetList=new ArrayList<String>();
  List<String> targetPortListFromResponse=initiatorTargetMap.get(initiatorKey);
  for (  String portWWN : targetPortListFromResponse) {
    if (varrayTaggedPortWWNs.contains(portWWN) || varrayTaggedPortWWNs.contains(portWWN.toUpperCase())) {
      filteredTargetList.add(portWWN.toUpperCase());
    }
  }
  log.debug("END - filterTargetsFromResponse");
  return filteredTargetList;
}

public PilotingRollData checkManeuver(MoveStep step,EntityMovementType overallMoveType){
  PilotingRollData roll=getBasePilotingRoll(overallMoveType);
  if ((step == null) || (step.getType() != MoveStepType.MANEUVER)) {
    roll.addModifier(TargetRoll.CHECK_FALSE,"Check false: Entity is not attempting to get up.");
    return roll;
  }
  boolean sideSlipMod=(this instanceof ConvFighter) && isVSTOL();
  roll.append(new PilotingRollData(getId(),ManeuverType.getMod(step.getManeuverType(),sideSlipMod),ManeuverType.getTypeName(step.getManeuverType()) + " maneuver"));
  return roll;
}

public static List<String> parseProgramArgs(ILaunchConfiguration launchConfig) throws CoreException {
  return parseArgs(launchConfig.getAttribute(IJavaLaunchConfigurationConstants.ATTR_PROGRAM_ARGUMENTS,""));
}

public abstract T decodeValue(String value);

private void fitImageToView(){
  Drawable drawable=getDrawable();
  if (drawable == null || drawable.getIntrinsicWidth() == 0 || drawable.getIntrinsicHeight() == 0) {
    return;
  }
  if (matrix == null || prevMatrix == null) {
    return;
  }
  int drawableWidth=drawable.getIntrinsicWidth();
  int drawableHeight=drawable.getIntrinsicHeight();
  float scaleX=(float)viewWidth / drawableWidth;
  float scaleY=(float)viewHeight / drawableHeight;
switch (mScaleType) {
case CENTER:
    scaleX=scaleY=1;
  break;
case CENTER_CROP:
scaleX=scaleY=Math.max(scaleX,scaleY);
break;
case CENTER_INSIDE:
scaleX=scaleY=Math.min(1,Math.min(scaleX,scaleY));
case FIT_CENTER:
scaleX=scaleY=Math.min(scaleX,scaleY);
break;
case FIT_XY:
break;
default :
throw new UnsupportedOperationException("TouchImageView does not support FIT_START or FIT_END");
}
float redundantXSpace=viewWidth - (scaleX * drawableWidth);
float redundantYSpace=viewHeight - (scaleY * drawableHeight);
matchViewWidth=viewWidth - redundantXSpace;
matchViewHeight=viewHeight - redundantYSpace;
if (!isZoomed() && !imageRenderedAtLeastOnce) {
matrix.setScale(scaleX,scaleY);
matrix.postTranslate(redundantXSpace / 2,redundantYSpace / 2);
normalizedScale=1;
}
 else {
if (prevMatchViewWidth == 0 || prevMatchViewHeight == 0) {
savePreviousImageValues();
}
prevMatrix.getValues(m);
m[Matrix.MSCALE_X]=matchViewWidth / drawableWidth * normalizedScale;
m[Matrix.MSCALE_Y]=matchViewHeight / drawableHeight * normalizedScale;
float transX=m[Matrix.MTRANS_X];
float transY=m[Matrix.MTRANS_Y];
float prevActualWidth=prevMatchViewWidth * normalizedScale;
float actualWidth=getImageWidth();
translateMatrixAfterRotate(Matrix.MTRANS_X,transX,prevActualWidth,actualWidth,prevViewWidth,viewWidth,drawableWidth);
float prevActualHeight=prevMatchViewHeight * normalizedScale;
float actualHeight=getImageHeight();
translateMatrixAfterRotate(Matrix.MTRANS_Y,transY,prevActualHeight,actualHeight,prevViewHeight,viewHeight,drawableHeight);
matrix.setValues(m);
}
fixTrans();
setImageMatrix(matrix);
}

@Override public synchronized MXBeanMapping mappingForType(Type objType,MXBeanMappingFactory factory) throws OpenDataException {
  if (inProgress.containsKey(objType)) {
    throw new OpenDataException("Recursive data structure, including " + typeName(objType));
  }
  MXBeanMapping mapping;
  mapping=getMapping(objType);
  if (mapping != null)   return mapping;
  inProgress.put(objType,objType);
  try {
    mapping=makeMapping(objType,factory);
  }
 catch (  OpenDataException e) {
    throw openDataException("Cannot convert type: " + typeName(objType),e);
  }
 finally {
    inProgress.remove(objType);
  }
  putMapping(objType,mapping);
  return mapping;
}

public void testCase18(){
  byte aBytes[]={0};
  byte bBytes[]={0};
  byte rBytes[]={0};
  int aSign=1;
  int bSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.add(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",0,result.signum());
}

public static Element createElementInSignature11Space(Document doc,String elementName){
  if (doc == null) {
    throw new RuntimeException("Document is null");
  }
  if ((ds11Prefix == null) || (ds11Prefix.length() == 0)) {
    return doc.createElementNS(Constants.SignatureSpec11NS,elementName);
  }
  return doc.createElementNS(Constants.SignatureSpec11NS,ds11Prefix + ":" + elementName);
}

public void removeElementAt(final int index){
  entries.remove(index);
}

public static void c2ir(double c[],int nc,double hh[],int leng){
  hh[0]=Math.exp(c[0]);
  for (int n=1; n < leng; n++) {
    double d=0;
    int upl=(n >= nc) ? nc - 1 : n;
    for (int k=1; k <= upl; k++)     d+=k * c[k] * hh[n - k];
    hh[n]=d / n;
  }
}

public void close(){
  _ncGuards=null;
}

public void processIndication(Hashtable<String,String> cimNotification){
  String cimIndicationType=getCimIndicationType(cimNotification);
  if (_monitoringPropertiesLoader.isToLogIndications()) {
    _logger.debug("Indication with key : value pairs received --> \n" + getIndicationData(cimNotification));
  }
  if (cimIndicationType != null && cimIndicationType.equals(CimConstants.CIM_ALERT_INDICATION_TYPE)) {
    if (_monitoringPropertiesLoader.isToLogIndications()) {
      _logger.debug("CimIndication of type \"Alert\" received");
    }
    _alertProcessor.processIndication(cimNotification);
  }
 else   if (cimIndicationType != null && cimIndicationType.equals(CimConstants.CIM_INST_INDICATION_TYPE)) {
    if (_monitoringPropertiesLoader.isToLogIndications()) {
      _logger.debug("CimIndication of type \"Instance\" received");
    }
    _eventProcessor.processIndication(cimNotification);
  }
 else {
    if (_monitoringPropertiesLoader.isToLogIndications()) {
      _logger.debug("Unknown CIM Inidcation received {}",cimIndicationType);
    }
  }
}

public ReplicationJob createJobForCopyTable(long auditLogId,long auditLogEntryCreateTime,Table table) throws StateUpdateException {
  ReplicationOperation replicationOperation=HiveUtils.isPartitioned(table) ? ReplicationOperation.COPY_PARTITIONED_TABLE : ReplicationOperation.COPY_UNPARTITIONED_TABLE;
  Map<String,String> extras=new HashMap<>();
  extras.put(PersistedJobInfo.AUDIT_LOG_ID_EXTRAS_KEY,Long.toString(auditLogId));
  extras.put(PersistedJobInfo.AUDIT_LOG_ENTRY_CREATE_TIME_KEY,Long.toString(auditLogEntryCreateTime));
  PersistedJobInfo persistedJobInfo=jobInfoStore.resilientCreate(replicationOperation,ReplicationStatus.PENDING,ReplicationUtils.getLocation(table),srcCluster.getName(),new HiveObjectSpec(table),Collections.emptyList(),ReplicationUtils.getTldt(table),Optional.empty(),Optional.empty(),extras);
  HiveObjectSpec spec=new HiveObjectSpec(table);
  Optional<Path> tableLocation=ReplicationUtils.getLocation(table);
switch (replicationOperation) {
case COPY_UNPARTITIONED_TABLE:
    return new ReplicationJob(conf,new CopyUnpartitionedTableTask(conf,destinationObjectFactory,objectConflictHandler,srcCluster,destCluster,spec,tableLocation,directoryCopier,true),onStateChangeHandler,persistedJobInfo);
case COPY_PARTITIONED_TABLE:
  return new ReplicationJob(conf,new CopyPartitionedTableTask(conf,destinationObjectFactory,objectConflictHandler,srcCluster,destCluster,spec,tableLocation),onStateChangeHandler,persistedJobInfo);
default :
throw new RuntimeException("Unhandled operation " + replicationOperation);
}
}

public static String readFully(Reader reader) throws IOException {
  try {
    StringWriter writer=new StringWriter();
    char[] buffer=new char[1024];
    int count;
    while ((count=reader.read(buffer)) != -1) {
      writer.write(buffer,0,count);
    }
    return writer.toString();
  }
  finally {
    reader.close();
  }
}

synchronized public void releaseXMLReader(XMLReader reader){
  if (m_readerManager != null) {
    m_readerManager.releaseXMLReader(reader);
  }
}

public int unFinishSize(){
  return mUnFinishQueue.size();
}

public void addSample(int weight,float value){
  ensureSortedByIndex();
  Sample newSample=recycledSampleCount > 0 ? recycledSamples[--recycledSampleCount] : new Sample();
  newSample.index=nextSampleIndex++;
  newSample.weight=weight;
  newSample.value=value;
  samples.add(newSample);
  totalWeight+=weight;
  while (totalWeight > maxWeight) {
    int excessWeight=totalWeight - maxWeight;
    Sample oldestSample=samples.get(0);
    if (oldestSample.weight <= excessWeight) {
      totalWeight-=oldestSample.weight;
      samples.remove(0);
      if (recycledSampleCount < MAX_RECYCLED_SAMPLES) {
        recycledSamples[recycledSampleCount++]=oldestSample;
      }
    }
 else {
      oldestSample.weight-=excessWeight;
      totalWeight-=excessWeight;
    }
  }
}

private void specialisedPredicates(){
  DoublePredicate doublePredicate=null;
  LongPredicate longPredicate=null;
}

private static final synchronized int nextPoolId(){
  return ++poolNumberSequence;
}

public static boolean secKeyVerify(byte[] seckey){
  Preconditions.checkArgument(seckey.length == 32);
  ByteBuffer byteBuff=nativeECDSABuffer.get();
  if (byteBuff == null || byteBuff.capacity() < seckey.length) {
    byteBuff=ByteBuffer.allocateDirect(seckey.length);
    byteBuff.order(ByteOrder.nativeOrder());
    nativeECDSABuffer.set(byteBuff);
  }
  byteBuff.rewind();
  byteBuff.put(seckey);
  r.lock();
  try {
    return secp256k1_ec_seckey_verify(byteBuff,Secp256k1Context.getContext()) == 1;
  }
  finally {
    r.unlock();
  }
}

public TreeNodeIterator(Node root,boolean preorder){
  m_preorder=preorder;
  m_root=root;
  m_stack=new ArrayList();
  m_stack.add(root);
  if (!preorder) {
    for (Node n=root.getChild(0); n != null; n=n.getChild(0))     m_stack.add(n);
  }
}

public static WritableNativeArray makeNativeArray(List objects){
  WritableNativeArray nativeArray=new WritableNativeArray();
  if (objects == null) {
    return nativeArray;
  }
  for (  Object elem : objects) {
    elem=makeNativeObject(elem);
    if (elem == null) {
      nativeArray.pushNull();
    }
 else     if (elem instanceof Boolean) {
      nativeArray.pushBoolean((Boolean)elem);
    }
 else     if (elem instanceof Integer) {
      nativeArray.pushInt((Integer)elem);
    }
 else     if (elem instanceof Double) {
      nativeArray.pushDouble((Double)elem);
    }
 else     if (elem instanceof String) {
      nativeArray.pushString((String)elem);
    }
 else     if (elem instanceof WritableNativeArray) {
      nativeArray.pushArray((WritableNativeArray)elem);
    }
 else     if (elem instanceof WritableNativeMap) {
      nativeArray.pushMap((WritableNativeMap)elem);
    }
 else {
      throw new IllegalArgumentException("Could not convert " + elem.getClass());
    }
  }
  return nativeArray;
}

public static BigInteger sizeOfDirectoryAsBigInteger(File directory){
  checkDirectory(directory);
  final File[] files=directory.listFiles();
  if (files == null) {
    return BigInteger.ZERO;
  }
  BigInteger size=BigInteger.ZERO;
  for (  final File file : files) {
    try {
      if (!isSymlink(file)) {
        size=size.add(BigInteger.valueOf(sizeOf(file)));
      }
    }
 catch (    IOException ioe) {
    }
  }
  return size;
}

@Override public void nodeChanged(){
  log.info("Site info changed. Waking up the vdc manager...");
  wakeup();
}

private static NodePair splitBlock(final View view,final Function function,final CodeNode node,final Instruction instruction){
  boolean before=true;
  final List<Instruction> beforeInstructions=new ArrayList<Instruction>();
  final List<Instruction> afterInstructions=new ArrayList<Instruction>();
  for (  final Instruction nodeInstruction : node.getInstructions()) {
    if (before) {
      beforeInstructions.add(nodeInstruction);
    }
 else {
      afterInstructions.add(nodeInstruction);
    }
    if (nodeInstruction == instruction) {
      before=false;
    }
  }
  if (afterInstructions.isEmpty()) {
    return new NodePair(node,null);
  }
 else {
    final CodeNode firstNode=view.createCodeNode(function,beforeInstructions);
    final CodeNode secondNode=view.createCodeNode(function,afterInstructions);
    firstNode.setColor(node.getColor());
    secondNode.setColor(DEFAULT_BLOCK_COLOR);
    for (    final ViewEdge edge : node.getIncomingEdges()) {
      final ViewEdge newEdge=view.createEdge(edge.getSource(),firstNode,edge.getType());
      newEdge.setColor(edge.getColor());
    }
    for (    final ViewEdge edge : node.getOutgoingEdges()) {
      final ViewEdge newEdge=view.createEdge(secondNode,edge.getTarget(),edge.getType());
      newEdge.setColor(edge.getColor());
    }
    view.deleteNode(node);
    return new NodePair(firstNode,secondNode);
  }
}

public Pair<String,String> objectToString(final long shopId,final String currency,final BigDecimal regularPrice){
  return new Pair<String,String>("facet_price_" + shopId + "_"+ currency,moneyBridge.objectToString(regularPrice));
}

public String readLine() throws IOException {
  StringBuilder line=new StringBuilder();
  int i;
  char c;
  i=read();
  if (i == -1)   return null;
  while (i > -1 && i != '\n' && i != '\r') {
    c=(char)(i & 0xFF);
    line=line.append(c);
    i=read();
  }
  if (i == '\r') {
    if ((i=read()) != '\n')     throw new IOException("Unexpected character " + Integer.toHexString(i) + ". Expected 0x0d. Had read "+ line);
  }
  return line.toString();
}

static public void forceCreationOfNewIndex(){
  forceCreationOfNewIndex(false);
}

public FrameBlock zeroOutOperations(FrameBlock result,IndexRange range,boolean complementary,int iRowStartSrc,int iRowStartDest,int brlen,int iMaxRowsToCopy) throws DMLRuntimeException {
  int clen=getNumColumns();
  if (result == null)   result=new FrameBlock(getSchema());
 else {
    result.reset(0,true);
    result.setSchema(getSchema());
  }
  result.ensureAllocatedColumns(brlen);
  if (complementary) {
    for (int r=(int)range.rowStart; r <= range.rowEnd && r + iRowStartDest < brlen; r++) {
      for (int c=(int)range.colStart; c <= range.colEnd; c++)       result.set(r + iRowStartDest,c,get(r + iRowStartSrc,c));
    }
  }
 else {
    int r=iRowStartDest;
    for (; r < (int)range.rowStart && r - iRowStartDest < iMaxRowsToCopy; r++)     for (int c=0; c < clen; c++)     result.set(r,c,get(r + iRowStartSrc - iRowStartDest,c));
    for (; r <= (int)range.rowEnd && r - iRowStartDest < iMaxRowsToCopy; r++) {
      for (int c=0; c < (int)range.colStart; c++)       result.set(r,c,get(r + iRowStartSrc - iRowStartDest,c));
      for (int c=(int)range.colEnd + 1; c < clen; c++)       result.set(r,c,get(r + iRowStartSrc - iRowStartDest,c));
    }
    for (; r - iRowStartDest < iMaxRowsToCopy; r++)     for (int c=0; c < clen; c++)     result.set(r,c,get(r + iRowStartSrc - iRowStartDest,c));
  }
  return result;
}

public SignalBarrier(){
  _owner=null;
}

public void testToBigIntegerPos1(){
  String a="123809648392384754573567356745735.63567890295784902768787678287E+21";
  BigInteger bNumber=new BigInteger("123809648392384754573567356745735635678902957849027687");
  BigDecimal aNumber=new BigDecimal(a);
  BigInteger result=aNumber.toBigInteger();
  assertTrue("incorrect value",result.equals(bNumber));
}

private static float[] normalize(float[] coefficients){
  float accumulator=0;
  for (int x=0; x < coefficients.length; x++) {
    accumulator+=Math.abs(coefficients[x]);
  }
  for (int x=0; x < coefficients.length; x++) {
    coefficients[x]=coefficients[x] / accumulator;
  }
  return coefficients;
}

protected void printTrack(Track track){
  DefaultEntityViewInfo vInfo=(DefaultEntityViewInfo)track.getViewInfo();
  tmpNodeBuffer.clear();
  tmpNodeBuffer.addAll(track.getNodes());
  if (!tmpNodeBuffer.isEmpty()) {
    printLine(imageBdr,tmpNodeBuffer,vInfo,false,false,null);
    printPoint(imageBdr,tmpNodeBuffer.get(tmpNodeBuffer.size() - 1),vInfo,null);
  }
}

private PeriodFormatterBuilder appendSuffix(PeriodFieldAffix suffix){
  final Object originalPrinter;
  final Object originalParser;
  if (iElementPairs.size() > 0) {
    originalPrinter=iElementPairs.get(iElementPairs.size() - 2);
    originalParser=iElementPairs.get(iElementPairs.size() - 1);
  }
 else {
    originalPrinter=null;
    originalParser=null;
  }
  if (originalPrinter == null || originalParser == null || originalPrinter != originalParser || !(originalPrinter instanceof FieldFormatter)) {
    throw new IllegalStateException("No field to apply suffix to");
  }
  clearPrefix();
  FieldFormatter newField=new FieldFormatter((FieldFormatter)originalPrinter,suffix);
  iElementPairs.set(iElementPairs.size() - 2,newField);
  iElementPairs.set(iElementPairs.size() - 1,newField);
  iFieldFormatters[newField.getFieldType()]=newField;
  return this;
}

public Collection<Cube> all(){
  return Collections.unmodifiableCollection(cubes);
}

public static short readUByte(ByteBuffer buffer){
  byte b=buffer.get();
  return (short)(b & 0xff);
}

public static double mostToxicRow(Gate g){
  return Collections.min(g.get_toxicity());
}

public MultiServer(){
  this(NetworkConfig.DEFAULT_TCP_PORT,NetworkConfig.DEFAULT_UDP_PORT);
}

protected String urlString() throws ParseException {
  StringBuffer retval=new StringBuffer();
  lexer.selectLexer("charLexer");
  while (lexer.hasMoreChars()) {
    char la=lexer.lookAhead(0);
    if (la == ' ' || la == '\t' || la == '\n' || la == '>' || la == '<')     break;
    lexer.consume(0);
    retval.append(la);
  }
  return retval.toString();
}

public XmlElement(byte[] encodedDocument){
  if (encodedDocument == null)   throw new IllegalArgumentException("value is null");
  this.encoded=encodedDocument.clone();
}

public void add(int position,int height){
  int currHeight=mMap.get(position,-1);
  if (currHeight != height) {
    if (currHeight == -1) {
      if (mMap.size() == mMaxSize) {
        mMap.delete(mOrder.remove(0));
      }
    }
 else {
      mOrder.remove((Integer)position);
    }
    mMap.put(position,height);
    mOrder.add(position);
  }
}

public void testmodInversePos2(){
  byte aBytes[]={15,24,123,56,-11,-112,-34,-98,8,10,12,14,25,125,-15,28,-127};
  byte mBytes[]={2,122,45,36,100};
  int aSign=1;
  int mSign=1;
  byte rBytes[]={1,-93,40,127,73};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger modulus=new BigInteger(mSign,mBytes);
  BigInteger result=aNumber.modInverse(modulus);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

@GET @Path("/ostenants") @Produces({MediaType.APPLICATION_XML,MediaType.APPLICATION_JSON}) @CheckPermission(roles={Role.SECURITY_ADMIN}) public OSTenantListRestRep listCoprhdOsTenants(){
  _log.debug("Keystone Service - listCoprhdOsTenants");
  List<OSTenant> tenants=getOsTenantsFromCoprhdDb();
  return map(tenants);
}

public int read(final byte[] data){
  init();
  if (data != null) {
    rawData=ByteBuffer.wrap(data);
    rawData.rewind();
    rawData.order(ByteOrder.LITTLE_ENDIAN);
    readHeader();
    if (!err()) {
      readContents();
      if (frameCount < 0) {
        status=STATUS_FORMAT_ERROR;
      }
    }
  }
 else {
    status=STATUS_OPEN_ERROR;
  }
  return status;
}

private void calculateUniqueValue(Object[] minValue,Object[] uniqueValue){
  for (int i=0; i < measureCount; i++) {
    if (type[i] == CarbonCommonConstants.BIG_INT_MEASURE) {
      uniqueValue[i]=(long)minValue[i] - 1;
    }
 else     if (type[i] == CarbonCommonConstants.BIG_DECIMAL_MEASURE) {
      BigDecimal val=(BigDecimal)minValue[i];
      uniqueValue[i]=(val.subtract(new BigDecimal(1.0)));
    }
 else {
      uniqueValue[i]=(double)minValue[i] - 1;
    }
  }
}

@RequestMapping(value="/SAML2/SSO/{tenant:.*}") public void ssoBindingError(Locale locale,@PathVariable(value="tenant") String tenant,HttpServletResponse response) throws IOException {
  logger.info("SSO binding error! The client locale is " + locale.toString() + ", tenant is "+ tenant);
  ssoDefaultTenantBindingError(locale,response);
}

public long env_end(){
  return Long.parseLong(fields[50]);
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return STRINGS;
case 2:
  return HELLO;
default :
return null;
}
}

public X509TrustChainKeySelector(X509Certificate... trustedRoots){
  _log=LoggerFactory.getLogger(X509TrustChainKeySelector.class);
  checkCtorArgsNotNull(trustedRoots);
  _trustAnchors=new HashSet<TrustAnchor>();
  for (  X509Certificate cert : trustedRoots) {
    _trustAnchors.add(new TrustAnchor(cert,null));
  }
}

@Override public void removeAttributeNS(String namespaceURI,String localName){
  if (ownerDocument.errorChecking && isReadOnly()) {
    String msg=DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN,"NO_MODIFICATION_ALLOWED_ERR",null);
    throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR,msg);
  }
  if (needsSyncData()) {
    synchronizeData();
  }
  if (attributes == null) {
    return;
  }
  attributes.safeRemoveNamedItemNS(namespaceURI,localName);
}

public boolean drawImage(Image img,AffineTransform xform,ImageObserver obs){
  if (img == null) {
    return true;
  }
  boolean result;
  int srcWidth=img.getWidth(null);
  int srcHeight=img.getHeight(null);
  if (srcWidth < 0 || srcHeight < 0) {
    result=false;
  }
 else {
    result=drawImageToPlatform(img,xform,null,0,0,srcWidth,srcHeight,false);
  }
  return result;
}

public void handleButton1Request(RequestInvocationEvent event) throws ModelControlException {
  ServerSiteModel model=(ServerSiteModel)getModel();
  AMPropertySheet ps=(AMPropertySheet)getChild(PROPERTY_ATTRIBUTE);
  String serverName=(String)getPageSessionAttribute(PG_ATTR_SERVER_NAME);
  String name=(String)getDisplayFieldValue(TF_NAME);
  name=name.trim();
  if (name.length() > 0) {
    try {
      model.cloneServer(serverName,name);
      backTrail();
      ServerSiteViewBean vb=(ServerSiteViewBean)getViewBean(ServerSiteViewBean.class);
      passPgSessionMap(vb);
      vb.forwardTo(getRequestContext());
    }
 catch (    AMConsoleException e) {
      setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",e.getMessage());
      forwardTo();
    }
  }
 else {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error","serverconfig.clone.server.missing.atributes");
    forwardTo();
  }
}

public static <TK,FV>FeatureValueCollection<FV> combine(Derivation<TK,FV> hyp){
  Counter<FV> counter=new ClassicCounter<FV>();
  for (; hyp != null; hyp=hyp.parent) {
    if (hyp.features != null) {
      for (      FeatureValue<FV> feature : hyp.features) {
        counter.incrementCount(feature.name,feature.value);
      }
    }
  }
  Set<FV> featureNames=new TreeSet<FV>(counter.keySet());
  FeatureValueCollection<FV> combinedList=new FeatureValueList<FV>(featureNames.size());
  for (  FV feature : featureNames) {
    combinedList.add(new FeatureValue<FV>(feature,counter.getCount(feature)));
  }
  return combinedList;
}

public void sendTitles(){
  if (listeners == null) {
    return;
  }
  StringBuilder labels=new StringBuilder("PTT");
  labels.append("]\\[" + Bundle.getMessage("MenuItemTurnoutTable") + "}|{Turnout");
  labels.append("]\\[" + manager.getClosedText() + "}|{2");
  labels.append("]\\[" + manager.getThrownText() + "}|{4");
  String message=labels.toString();
  for (  ControllerInterface listener : listeners) {
    listener.sendPacketToDevice(message);
  }
}

public FilenameUtils(){
  super();
}

public static void closeSession() throws HibernateException {
  Session session=(Session)threadLocal.get();
  threadLocal.set(null);
  if (session != null) {
    session.close();
  }
}

protected Calendar(){
  zone=TimeZone.getDefault();
  fields=new int[FIELD_COUNT];
  isSet=new boolean[FIELD_COUNT];
  areFieldsSet=isTimeSet=false;
  setTimeInMillis(System.currentTimeMillis());
}

private PointPair calculateEdge(Component comp1,Component comp2){
  Rectangle r1=comp1.getBounds();
  Rectangle r2=comp2.getBounds();
  Point c1=new Point((int)(r1.x + r1.width / 2.0),(int)(r1.y + r1.height / 2.0));
  Point c2=new Point((int)(r2.x + r2.width / 2.0),(int)(r2.y + r2.height / 2.0));
  double angle=Math.atan2(c1.y - c2.y,c1.x - c2.x);
  angle+=Math.PI / 2;
  Point d=new Point((int)(offset * Math.cos(angle)),(int)(offset * Math.sin(angle)));
  c1.translate(d.x,d.y);
  c2.translate(d.x,d.y);
  Point p1=getBoundaryIntersection(comp1,c1,c2);
  Point p2=getBoundaryIntersection(comp2,c2,c1);
  if ((p1 == null) || (p2 == null)) {
    c1=new Point((int)(r1.x + r1.width / 2.0),(int)(r1.y + r1.height / 2.0));
    c2=new Point((int)(r2.x + r2.width / 2.0),(int)(r2.y + r2.height / 2.0));
    p1=getBoundaryIntersection(comp1,c1,c2);
    p2=getBoundaryIntersection(comp2,c2,c1);
  }
  if ((p1 == null) || (p2 == null)) {
    return null;
  }
  return new PointPair(p1,p2);
}

public static boolean isXML11Space(int c){
  return (c < 0x10000 && (XML11CHARS[c] & MASK_XML11_SPACE) != 0);
}

public void unregisterPlayerListener(CheerleaderPlayerListener listener){
  checkState();
  mCheerleaderPlayerListeners.remove(listener);
}

public OutputStream openOutputStream(Uri uri,boolean append) throws IOException {
  assertBackgroundThread();
switch (getUriType(uri)) {
case URI_TYPE_FILE:
{
      File localFile=new File(uri.getPath());
      File parent=localFile.getParentFile();
      if (parent != null) {
        parent.mkdirs();
      }
      return new FileOutputStream(localFile,append);
    }
case URI_TYPE_CONTENT:
case URI_TYPE_RESOURCE:
{
    AssetFileDescriptor assetFd=contentResolver.openAssetFileDescriptor(uri,append ? "wa" : "w");
    return assetFd.createOutputStream();
  }
}
throw new FileNotFoundException("URI not supported by CordovaResourceApi: " + uri);
}

protected Integer adjustIntegerValue(Integer origValue,Integer minValue,Integer maxValue){
  Integer resultValue=origValue;
  if (resultValue.compareTo(minValue) < 0) {
    resultValue=minValue;
  }
  if (resultValue.compareTo(maxValue) > 0) {
    resultValue=maxValue;
  }
  return resultValue;
}

private void initPaints(Resources res){
  final String monthTypeface=res.getString(R.string.date_picker_month_typeface);
  final String dayOfWeekTypeface=res.getString(R.string.date_picker_day_of_week_typeface);
  final String dayTypeface=res.getString(R.string.date_picker_day_typeface);
  final int monthTextSize=res.getDimensionPixelSize(R.dimen.date_picker_month_text_size);
  final int dayOfWeekTextSize=res.getDimensionPixelSize(R.dimen.date_picker_day_of_week_text_size);
  final int dayTextSize=res.getDimensionPixelSize(R.dimen.date_picker_day_text_size);
  mMonthPaint.setAntiAlias(true);
  mMonthPaint.setTextSize(monthTextSize);
  mMonthPaint.setTypeface(Typeface.create(monthTypeface,0));
  mMonthPaint.setTextAlign(Align.CENTER);
  mMonthPaint.setStyle(Style.FILL);
  mDayOfWeekPaint.setAntiAlias(true);
  mDayOfWeekPaint.setTextSize(dayOfWeekTextSize);
  mDayOfWeekPaint.setTypeface(Typeface.create(dayOfWeekTypeface,0));
  mDayOfWeekPaint.setTextAlign(Align.CENTER);
  mDayOfWeekPaint.setStyle(Style.FILL);
  mDaySelectorPaint.setAntiAlias(true);
  mDaySelectorPaint.setStyle(Style.FILL);
  mDayHighlightPaint.setAntiAlias(true);
  mDayHighlightPaint.setStyle(Style.FILL);
  mDayPaint.setAntiAlias(true);
  mDayPaint.setTextSize(dayTextSize);
  mDayPaint.setTypeface(Typeface.create(dayTypeface,0));
  mDayPaint.setTextAlign(Align.CENTER);
  mDayPaint.setStyle(Style.FILL);
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String childData;
  doc=(Document)load("hc_staff",true);
  elementList=doc.getElementsByTagName("acronym");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
  child.deleteData(30,5);
  childData=child.getData();
  assertEquals("characterdataDeleteDataEndAssert","1230 North Ave. Dallas, Texas ",childData);
}

public int size(){
  return rules.size();
}

private void copyArrays(){
  String[] oldSyms=_symbols;
  int size=oldSyms.length;
  _symbols=new String[size];
  System.arraycopy(oldSyms,0,_symbols,0,size);
  Bucket[] oldBuckets=_buckets;
  size=oldBuckets.length;
  _buckets=new Bucket[size];
  System.arraycopy(oldBuckets,0,_buckets,0,size);
}

static LabelNode[] clone(final List<LabelNode> labels,final Map<LabelNode,LabelNode> map){
  LabelNode[] clones=new LabelNode[labels.size()];
  for (int i=0; i < clones.length; ++i) {
    clones[i]=map.get(labels.get(i));
  }
  return clones;
}

@Procedure @PerformsWrites @Description("apoc.refactor.from(rel, startNode) redirect relationship to use new start-node") public Stream<RelationshipRefactorResult> from(@Name("relationship") Relationship rel,@Name("newNode") Node newNode){
  RelationshipRefactorResult result=new RelationshipRefactorResult(rel.getId());
  try {
    Relationship newRel=newNode.createRelationshipTo(rel.getEndNode(),rel.getType());
    copyProperties(rel,newRel);
    rel.delete();
    return Stream.of(result.withOther(newRel));
  }
 catch (  Exception e) {
    return Stream.of(result.withError(e));
  }
}

public static long maxFill(final long n,final float f){
  return Math.min((long)Math.ceil(n * f),n - 1);
}

public static void print(char x){
  out.print(x);
  out.flush();
}

public void clearSourceElements(){
  for (  PNode node : sourceElements) {
    SourceHandle.removeSourceHandleFrom(node);
  }
  sourceElements.clear();
  selectionModel.fireSelectionChanged();
}

public static double[][] readMatrix(int numberOfRows,int numberOfColumns,boolean ignoreFirstLine,String fileName){
  double[][] matrix=new double[numberOfRows][numberOfColumns];
  try {
    FileReader fr=new FileReader(fileName);
    BufferedReader br=new BufferedReader(fr);
    String line;
    StringTokenizer tokenizer;
    String token;
    if (ignoreFirstLine) {
      br.readLine();
    }
    line=br.readLine();
    int rowId=0;
    while (line != null) {
      tokenizer=new StringTokenizer(line);
      for (int i=0; i < numberOfColumns; i++) {
        token=tokenizer.nextToken();
        double parsedNumber=Double.parseDouble(token);
        matrix[rowId][i]=parsedNumber;
      }
      if (tokenizer.hasMoreTokens()) {
        throw new RuntimeException("the number of columns is wrong");
      }
      line=br.readLine();
      rowId++;
    }
    if (rowId != numberOfRows) {
      throw new RuntimeException("the number of rows is wrong");
    }
  }
 catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    e.printStackTrace();
    throw new RuntimeException("Error reading the matrix from the file");
  }
  return matrix;
}

@Override protected boolean readIntoBuffer(int minLength){
  if (bufferSpaceLeft() < minLength) {
    increaseBufferSize(minLength + currentlyInBuffer());
  }
 else   if (buf.length - writePos < minLength) {
    compact();
  }
  int readSum=0;
  while (readSum < minLength && !datagrams.isEmpty()) {
    Datagram next=datagrams.removeFirst();
    int length=(int)next.getDuration();
    if (buf.length < writePos + length) {
      increaseBufferSize(writePos + length);
    }
    int read=readDatagram(next,buf,writePos);
    writePos+=read;
    readSum+=read;
  }
  if (dataProcessor != null) {
    dataProcessor.applyInline(buf,writePos - readSum,readSum);
  }
  return readSum >= minLength;
}

private int heightOfPhi(int Phi){
  if (Phi == 0) {
    return -1;
  }
  int Tau=0;
  int modul=1;
  while (Phi % modul == 0) {
    modul*=2;
    Tau+=1;
  }
  return Tau - 1;
}

@NotNull public ClarifaiClient buildSync(){
  return new ClarifaiClientImpl(this);
}

public void mouseReleased(MouseEvent e){
  VisualizationViewer<?,?> vv=(VisualizationViewer<?,?>)e.getSource();
  down=null;
  vv.setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
}

@Nullable public static Class<?> classForName(@Nullable String cls,@Nullable Class<?> dflt,boolean includePrimitiveTypes){
  Class<?> clazz;
  if (cls == null)   clazz=dflt;
 else   if (!includePrimitiveTypes || cls.length() > 7 || (clazz=primitiveMap.get(cls)) == null) {
    try {
      clazz=Class.forName(cls);
    }
 catch (    ClassNotFoundException ignore) {
      clazz=dflt;
    }
  }
  return clazz;
}

public String checkWriteProtected(int resIdAction,final File... filesToBeModified){
  if (filesToBeModified != null) {
    for (    File file : filesToBeModified) {
      if ((file != null) && (file.exists()) && (!file.canWrite())) {
        String action=(resIdAction == 0) ? "" : mContext.getString(resIdAction);
        return mContext.getString(R.string.file_err_writeprotected,file.getAbsolutePath(),action);
      }
    }
  }
  return null;
}

private int clampMag(int value,int absMin,int absMax){
  final int absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

@NotNull @Contract(pure=true) public static String strip(@NotNull final String s,@NotNull final CharFilter filter){
  final StringBuilder result=new StringBuilder(s.length());
  for (int i=0; i < s.length(); i++) {
    char ch=s.charAt(i);
    if (filter.accept(ch)) {
      result.append(ch);
    }
  }
  return result.toString();
}

protected void addComponent(XMLComponent component){
  if (fComponents.contains(component)) {
    return;
  }
  fComponents.add(component);
  addRecognizedParamsAndSetDefaults(component);
}

public void testLocalInstances_distribution(){
  MatsimRandom.reset(123L);
  Random local1a=MatsimRandom.getLocalInstance();
  double value1=local1a.nextDouble();
  MatsimRandom.reset(234L);
  Random local2a=MatsimRandom.getLocalInstance();
  double value2a=local2a.nextDouble();
  Random local2b=MatsimRandom.getLocalInstance();
  double value2b=local2b.nextDouble();
  assertTrue(Math.abs(value1 - value2a) > EPSILON);
  assertTrue(Math.abs(value2a - value2b) > EPSILON);
  assertTrue(Math.abs(value1 - value2b) > EPSILON);
}

public final void test_ROUNDTRIP_GetKeySpecKey02(){
  boolean performed=false;
  for (int i=0; i < algName.length; i++) {
    try {
      TestDataGenerator g=new TestDataGenerator(algName[i][0],algName[i][1],privateKeyInfoDamaged,null);
      EncryptedPrivateKeyInfo epki;
      if (g.ap() == null) {
        epki=new EncryptedPrivateKeyInfo(algName[i][0],g.ct());
      }
 else {
        epki=new EncryptedPrivateKeyInfo(g.ap(),g.ct());
      }
      try {
        epki.getKeySpec(g.pubK() == null ? g.k() : g.pubK());
        fail(algName[i][0] + ", " + algName[i][1]);
      }
 catch (      InvalidKeyException e) {
      }
      performed=true;
    }
 catch (    TestDataGenerator.AllowedFailure allowedFailure) {
    }
catch (    NoSuchAlgorithmException allowedFailure) {
    }
  }
  assertTrue("Test not performed",performed);
}

public void clear(IValidatable bean){
  for (  Binding b : _optComponents.values()) {
    b.clear(bean);
  }
  for (  Binding b : _bindings.values()) {
    b.clear(bean);
  }
  _modified=false;
}

public boolean hasCredentials(){
  return _hasCredentials;
}

public boolean isRecursiveAttrSet(ElemAttributeSet attrSet){
  if (null == m_attrSetStack) {
    m_attrSetStack=new Stack();
  }
  if (!m_attrSetStack.empty()) {
    int loc=m_attrSetStack.search(attrSet);
    if (loc > -1) {
      return true;
    }
  }
  return false;
}

public void clear(AbsoluteTableIdentifier absoluteTableIdentifier){
  tableLockMap.remove(absoluteTableIdentifier);
  tableSegmentMap.remove(absoluteTableIdentifier);
}

public int enumerate(Thread[] threads){
  return enumerate(threads,true);
}

public static InputStream toInputStream(CharSequence input){
  return toInputStream(input.toString());
}

@Override public void process(Number tuple){
  values.add(tuple.doubleValue());
}

public void grantWritePermission(Collection attributeNames){
  Iterator it=attributeNames.iterator();
  if (it != null) {
    while (it.hasNext()) {
      String temp=(String)it.next();
      writables.add(temp.toLowerCase());
    }
  }
}

public void saveData(File file) throws IOException {
synchronized (accumulators) {
    ObjectOutputStream oos=null;
    try {
      oos=new ObjectOutputStream(new FileOutputStream(file));
      oos.writeObject(accumulators);
    }
  finally {
      if (oos != null) {
        oos.close();
      }
    }
  }
}

public static Ingredient fromCursor(Cursor cursor){
  Ingredient ingredient=new Ingredient();
  for (int c=0; c < cursor.getColumnCount(); c++) {
    String columnName=cursor.getColumnName(c);
    if (columnName.equals(RecipeIngredientTable.AMOUNT_COLUMN)) {
      ingredient.setAmount(cursor.getString(c));
    }
 else     if (columnName.equals(RecipeIngredientTable.DESCRIPTION_COLUMN)) {
      ingredient.setDescription(cursor.getString(c));
    }
  }
  return ingredient;
}

public void append(char c[],int off,int len){
  int restLength=buffer.length - pos;
  if (len < restLength) {
    System.arraycopy(c,off,buffer,pos,len);
    pos+=len;
  }
 else {
    System.arraycopy(c,off,buffer,pos,restLength);
    curr.next=new Entity(buffer);
    curr=curr.next;
    length+=buffer.length;
    buffer=new char[(buffer.length > len - restLength) ? buffer.length : len - restLength];
    System.arraycopy(c,off + restLength,buffer,0,len - restLength);
    pos=len - restLength;
  }
}

public boolean contains(String voiceName){
  return (getVoice(voiceName) != null);
}

public static boolean isEnterpriseEdition(String serverVersion){
  return serverVersion.contains("enterprise") || serverVersion.contains("commercial") || serverVersion.contains("advanced");
}

@Override public CategoryItemRendererState initialise(Graphics2D g2,Rectangle2D dataArea,CategoryPlot plot,int rendererIndex,PlotRenderingInfo info){
  CategoryItemRendererState state=super.initialise(g2,dataArea,plot,rendererIndex,info);
  CategoryAxis domainAxis=getDomainAxis(plot,rendererIndex);
  CategoryDataset dataset=plot.getDataset(rendererIndex);
  if (dataset != null) {
    int columns=dataset.getColumnCount();
    int rows=dataset.getRowCount();
    double space=0.0;
    PlotOrientation orientation=plot.getOrientation();
    if (orientation == PlotOrientation.HORIZONTAL) {
      space=dataArea.getHeight();
    }
 else     if (orientation == PlotOrientation.VERTICAL) {
      space=dataArea.getWidth();
    }
    double maxWidth=space * getMaximumBarWidth();
    double categoryMargin=0.0;
    double currentItemMargin=0.0;
    if (columns > 1) {
      categoryMargin=domainAxis.getCategoryMargin();
    }
    if (rows > 1) {
      currentItemMargin=getItemMargin();
    }
    double used=space * (1 - domainAxis.getLowerMargin() - domainAxis.getUpperMargin()- categoryMargin- currentItemMargin);
    if ((rows * columns) > 0) {
      state.setBarWidth(Math.min(used / (dataset.getColumnCount() * dataset.getRowCount()),maxWidth));
    }
 else {
      state.setBarWidth(Math.min(used,maxWidth));
    }
  }
  return state;
}

public static boolean createFolder(@SuppressWarnings("UnusedParameters") Context mContext,String path,String folderName){
  File SDCardRoot=new File(path,folderName);
  if (!SDCardRoot.exists()) {
    return SDCardRoot.mkdir();
  }
  return false;
}

private static NSObject parseObject(Node n) throws ParseException, IOException {
  String type=n.getNodeName();
  if (type.equals("dict")) {
    NSDictionary dict=new NSDictionary();
    List<Node> children=filterElementNodes(n.getChildNodes());
    for (int i=0; i < children.size(); i+=2) {
      Node key=children.get(i);
      Node val=children.get(i + 1);
      String keyString=getNodeTextContents(key);
      dict.put(keyString,parseObject(val));
    }
    return dict;
  }
 else   if (type.equals("array")) {
    List<Node> children=filterElementNodes(n.getChildNodes());
    NSArray array=new NSArray(children.size());
    for (int i=0; i < children.size(); i++) {
      array.setValue(i,parseObject(children.get(i)));
    }
    return array;
  }
 else   if (type.equals("true")) {
    return new NSNumber(true);
  }
 else   if (type.equals("false")) {
    return new NSNumber(false);
  }
 else   if (type.equals("integer")) {
    return new NSNumber(getNodeTextContents(n));
  }
 else   if (type.equals("real")) {
    return new NSNumber(getNodeTextContents(n));
  }
 else   if (type.equals("string")) {
    return new NSString(getNodeTextContents(n));
  }
 else   if (type.equals("data")) {
    return new NSData(getNodeTextContents(n));
  }
 else   if (type.equals("date")) {
    return new NSDate(getNodeTextContents(n));
  }
  return null;
}

LuaString loadString() throws IOException {
  int size=this.luacSizeofSizeT == 8 ? (int)loadInt64() : loadInt();
  if (size == 0)   return null;
  byte[] bytes=new byte[size];
  is.readFully(bytes,0,size);
  return LuaString.valueOf(bytes,0,bytes.length - 1);
}

protected AbstractPreferences(AbstractPreferences parent,String name){
  if (parent == null) {
    if (!name.equals(""))     throw new IllegalArgumentException("Root name '" + name + "' must be \"\"");
    this.absolutePath="/";
    root=this;
  }
 else {
    if (name.indexOf('/') != -1)     throw new IllegalArgumentException("Name '" + name + "' contains '/'");
    if (name.equals(""))     throw new IllegalArgumentException("Illegal name: empty string");
    root=parent.root;
    absolutePath=(parent == root ? "/" + name : parent.absolutePath() + "/" + name);
  }
  this.name=name;
  this.parent=parent;
}

static Class<?> canonicalize(Class<?> t,int how){
  Class<?> ct;
  if (t == Object.class) {
  }
 else   if (!t.isPrimitive()) {
switch (how) {
case UNWRAP:
      ct=Wrapper.asPrimitiveType(t);
    if (ct != t)     return ct;
  break;
case RAW_RETURN:
case ERASE:
return Object.class;
}
}
 else if (t == void.class) {
switch (how) {
case RAW_RETURN:
return int.class;
case WRAP:
return Void.class;
}
}
 else {
switch (how) {
case WRAP:
return Wrapper.asWrapperType(t);
case INTS:
if (t == int.class || t == long.class) return null;
if (t == double.class) return long.class;
return int.class;
case LONGS:
if (t == long.class) return null;
return long.class;
case RAW_RETURN:
if (t == int.class || t == long.class || t == float.class || t == double.class) return null;
return int.class;
}
}
return null;
}

protected String extractSubstring(String pszSrc){
  int nBracket=0;
  int i;
  String pszReturn;
  for (i=0; i < pszSrc.length() && (nBracket > 0 || pszSrc.charAt(i) != ','); i++) {
    if (pszSrc.charAt(i) == '(') {
      nBracket++;
    }
 else     if (pszSrc.charAt(i) == ')') {
      nBracket--;
    }
  }
  if (pszSrc.charAt(0) == '(') {
    pszReturn=pszSrc.substring(1,i - 2);
  }
 else {
    pszReturn=pszSrc.substring(0,i);
  }
  return pszReturn;
}

public void read(Appendable dest) throws IOException {
  if (_inputStream == null)   throw new IOException("No input stream or stream closed");
  while (true) {
    if (_start >= _end) {
      _start=0;
      _end=_inputStream.read(_bytes,0,_bytes.length);
      if (_end <= 0) {
        break;
      }
    }
    byte b=_bytes[_start];
    if (b >= 0) {
      dest.append((char)b);
      _start++;
    }
 else {
      int code=read2();
      if (code < 0x10000) {
        dest.append((char)code);
      }
 else       if (code <= 0x10ffff) {
        dest.append((char)(((code - 0x10000) >> 10) + 0xd800));
        dest.append((char)(((code - 0x10000) & 0x3ff) + 0xdc00));
      }
 else {
        throw new CharConversionException("Cannot convert U+" + Integer.toHexString(code) + " to char (code greater than U+10FFFF)");
      }
    }
  }
}

public boolean isMonitoring(){
  return m_Monitor.isMonitoring();
}

static final Color hexToColor(String value){
  String digits;
  int n=value.length();
  if (value.startsWith("#")) {
    digits=value.substring(1,Math.min(value.length(),7));
  }
 else {
    digits=value;
  }
  String hstr="0x" + digits;
  Color c;
  try {
    c=Color.decode(hstr);
  }
 catch (  NumberFormatException nfe) {
    c=null;
  }
  return c;
}

public final boolean contentEquals(java.lang.CharSequence csq){
  if (csq.length() != _length)   return false;
  for (int i=0; i < _length; ) {
    char c=_high[i >> B1][i & M1];
    if (csq.charAt(i++) != c)     return false;
  }
  return true;
}

private void populateAvailableDataStores(){
  DataAccessFactory fac;
  logger.debug("Available data store factories:");
  Iterator<DataStoreFactorySpi> iterator=DataStoreFinder.getAvailableDataStores();
  while (iterator.hasNext()) {
    fac=(DataAccessFactory)iterator.next();
    logger.debug("\t" + fac.getDisplayName());
    availableDataStoreList.add(fac.getDisplayName());
  }
}

protected void add(double value,int group){
  if ((group < 0) || (group >= numberOfGroups)) {
    throw new IllegalArgumentException("invalid group");
  }
  data.add(new Observation(value,group));
}

protected static String makeOptionString(Script script){
  StringBuffer result;
  Enumeration<Option> enm;
  Option option;
  result=new StringBuffer("");
  result.append("\nHelp requested:\n\n");
  result.append("-h or -help\n");
  result.append("\tDisplays this help screen.\n");
  result.append("-s <file>\n");
  result.append("\tThe script to execute.\n");
  enm=script.listOptions();
  while (enm.hasMoreElements()) {
    option=enm.nextElement();
    result.append(option.synopsis() + '\n');
    result.append(option.description() + "\n");
  }
  result.append("\n");
  result.append("Any additional options are passed on to the script as\n");
  result.append("command-line parameters.\n");
  result.append("\n");
  return result.toString();
}

public RegistrationBuilder addContact(URI contact){
  contacts.add(contact);
  return this;
}

public static void closeQuietly(AutoCloseable closeable){
  if (closeable != null) {
    try {
      closeable.close();
    }
 catch (    RuntimeException rethrown) {
      throw rethrown;
    }
catch (    Exception ignored) {
    }
  }
}

String formatTime(int hour,int minute){
  String s="";
  String t=Integer.toString(hour);
  if (t.length() == 2) {
    s=t + ":";
  }
 else   if (t.length() == 1) {
    s="0" + t + ":";
  }
  t=Integer.toString(minute);
  if (t.length() == 2) {
    s=s + t;
  }
 else   if (t.length() == 1) {
    s=s + "0" + t;
  }
  if (s.length() != 5) {
    s="00:00";
  }
  return s;
}

public boolean isEmpty(){
  return (sentenceType == SentenceType.UNDEFINED) && expressions.isEmpty();
}

@Override public void init(AbstractAddressbookManager aBooMgr){
  setAddressBookManager(aBooMgr);
  reloadSettings();
  try {
    connection=DriverManager.getConnection(IDENTITYDB_CONNECT_STRING);
  }
 catch (  SQLException e) {
    logger.error("IdentityManager: Failure to connect to db: " + IDENTITYDB_CONNECT_STRING,e);
  }
  Statement statement;
  try {
    statement=connection.createStatement();
    statement.setQueryTimeout(30);
    statement.executeUpdate("create table if not exists " + TABLE_IDENTITY + " (id INTEGER PRIMARY KEY AUTOINCREMENT, name string, firstname string, email string, keystorePath string)");
    statement.executeUpdate("create table if not exists " + TABLE_CLOUDPROVIDER + " (id INTEGER PRIMARY KEY AUTOINCREMENT, name string, username string, password string)");
    statement.executeUpdate("create table if not exists " + TABLE_CLOUDPROVIDER_MAP + " (identityID integer, cloudProviderID integer)");
    aBooMgr.init();
  }
 catch (  SQLException e) {
    logger.error("IdentityManager: Failure on creating tables",e);
  }
 finally {
    if (connection != null) {
      try {
        connection.close();
      }
 catch (      SQLException e) {
        logger.error("IdentityManager: Failure to close db connection while creating tables",e);
      }
    }
  }
}

private Buffer checkErrorPacket(int command) throws SQLException {
  Buffer resultPacket=null;
  this.serverStatus=0;
  try {
    resultPacket=reuseAndReadPacket(this.reusablePacket);
  }
 catch (  SQLException sqlEx) {
    throw sqlEx;
  }
catch (  Exception fallThru) {
    throw SQLError.createCommunicationsException(this.connection,this.lastPacketSentTimeMs,this.lastPacketReceivedTimeMs,fallThru,getExceptionInterceptor());
  }
  checkErrorPacket(resultPacket);
  return resultPacket;
}

public void applySettings(boolean loadCoreComponents) throws ApplySettingsException {
  List<String> errors=new ArrayList<String>(2);
  applyTorrentDataSaveFolderSettings(errors);
  applyTorrentSeedingSettings(errors);
  if (!errors.isEmpty()) {
    throw new ApplySettingsException(StringUtils.explode(errors,"\n\n"));
  }
}

public boolean shouldSelectCell(EventObject e){
  return true;
}

private int measureShort(int measureSpec){
  int result;
  int specMode=MeasureSpec.getMode(measureSpec);
  int specSize=MeasureSpec.getSize(measureSpec);
  if (specMode == MeasureSpec.EXACTLY) {
    result=specSize;
  }
 else {
    result=(int)(2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
    if (specMode == MeasureSpec.AT_MOST) {
      result=Math.min(result,specSize);
    }
  }
  return result;
}

private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
  in.defaultReadObject();
  if (resourceBundleName != null) {
    try {
      rb=ResourceBundle.getBundle(resourceBundleName);
    }
 catch (    MissingResourceException e) {
      rb=null;
    }
  }
}

method_info findMethod(String s){
  method_info m;
  int i;
  for (i=0; i < methods_count; i++) {
    m=methods[i];
    if (s.equals(m.toName(constant_pool))) {
      return m;
    }
  }
  return null;
}

private boolean matches(@Nullable Object obj,String operator,String operandStr){
  ObsValue value;
  if (obj == null) {
switch (operator) {
case "":
case "=":
case "==":
      return operandStr.isEmpty();
default :
    return false;
}
}
 else if (obj instanceof ObsPoint) {
value=((ObsPoint)obj).value;
}
 else if (obj instanceof ObsValue) {
value=(ObsValue)obj;
}
 else return false;
ObsValue operand=null;
if (value.uuid != null) {
operand=ObsValue.newCoded(Utils.expandUuid(operandStr));
}
 else if (value.number != null) {
try {
  operand=ObsValue.newNumber(Double.valueOf(operandStr));
}
 catch (NumberFormatException e) {
  operand=ObsValue.ZERO;
}
}
 else if (value.text != null) {
operand=ObsValue.newText(operandStr);
}
 else if (value.date != null) {
try {
  operand=ObsValue.newDate(LocalDate.parse(operandStr));
}
 catch (IllegalArgumentException e) {
  operand=ObsValue.MIN_DATE;
}
}
 else if (value.instant != null) {
try {
  operand=ObsValue.newTime(Long.valueOf(operandStr));
}
 catch (IllegalArgumentException e) {
  operand=ObsValue.MIN_TIME;
}
}
switch (operator) {
case "":
case "=":
case "==":
return Objects.equal(value.uuid,operand.uuid);
case "<":
return value.compareTo(operand) < 0;
case "<=":
return value.compareTo(operand) <= 0;
case ">":
return value.compareTo(operand) > 0;
case ">=":
return value.compareTo(operand) >= 0;
}
return false;
}

private void waitUntilReadable() throws IOException {
  readTimeout.enter();
  try {
    while (readBuffer.size() == 0 && !finished && !closed && errorCode == null) {
      waitForIo();
    }
  }
  finally {
    readTimeout.exitAndThrowIfTimedOut();
  }
}

public static <X extends Exception>String toString(Iteration<?,X> iter,String separator) throws X {
  StringBuilder sb=new StringBuilder();
  toString(iter,separator,sb);
  return sb.toString();
}

@SuppressWarnings("cast") @Override public boolean contains(final Object obj){
  if (null != obj) {
    Iterator<E> it=new ArrayDequeIterator<E>();
    while (it.hasNext()) {
      if (obj.equals((E)it.next())) {
        return true;
      }
    }
  }
  return false;
}

public static synchronized GridTestPrintStream acquireErr(){
  if (testErr == null)   testErr=new GridTestPrintStream(sysErr);
  if (errCnt == 0)   System.setErr(testErr);
  errCnt++;
  return testErr;
}

private void writeObject(ObjectOutputStream out) throws IOException {
  out.defaultWriteObject();
  doWriteObject(out);
}

private static boolean isPropertyName(String name){
  return ((name.length() > 0) && Character.isUpperCase(name.charAt(0))) || ((name.length() > 1) && Character.isUpperCase(name.charAt(1)));
}

public Collection<ExpressionObject<?>> analyzeExpression(GenericPK id,Expression formula,ExpressionAST expression) throws ScopeException {
  ExtractReferences visitor=new ExtractReferences();
  List<ExpressionRef> references=visitor.apply(expression);
  String internal=rewriteExpressionValue(formula.getValue(),expression,references);
  if (!internal.equals(formula.getValue())) {
    formula.setInternal(internal);
  }
 else {
    formula.setInternal(null);
  }
  int level=computeReferenceTree(expression,references);
  formula.setLevel(level);
  Collection<ExpressionObject<?>> objects=new HashSet<>();
  for (  ExpressionRef expr : references) {
    Object ref=expr.getReference();
    if (ref != null && ref instanceof Property) {
      Property property=(Property)ref;
      ExpressionObject<?> object=property.getExpressionObject();
      if (object != null) {
        objects.add(object);
      }
    }
  }
  if (!objects.isEmpty()) {
    Collection<ExpressionObject<?>> closure=null;
    Collection<ExpressionObject<?>> transitiveClosure=objects;
    do {
      closure=transitiveClosure;
      transitiveClosure=transitiveClosure(id,closure);
    }
 while (closure.size() < transitiveClosure.size());
    Collection<ReferencePK<?>> IDs=new HashSet<>();
    for (    ExpressionObject<?> object : transitiveClosure) {
      ReferencePK<?> refPk=reference(object);
      if (refPk != null) {
        IDs.add(refPk);
      }
    }
    formula.setReferences(IDs);
    return transitiveClosure;
  }
 else {
    return objects;
  }
}

public void removeRtcpListener(RtcpEventListener listener){
  if (sLogger.isActivated()) {
    sLogger.debug("Remove a RTCP event listener");
  }
  mListeners.removeElement(listener);
}

private static void collectAllTimes(Tree tree,NodeRef node,NodeRef[] excludeBelow,ArrayList times,ArrayList<Integer> childs){
  times.add(new ComparableDouble(tree.getNodeHeight(node)));
  childs.add(tree.getChildCount(node));
  for (int i=0; i < tree.getChildCount(node); i++) {
    NodeRef child=tree.getChild(node,i);
    if (excludeBelow == null) {
      collectAllTimes(tree,child,excludeBelow,times,childs);
    }
 else {
      boolean include=true;
      for (      NodeRef anExcludeBelow : excludeBelow) {
        if (anExcludeBelow.getNumber() == child.getNumber()) {
          include=false;
          break;
        }
      }
      if (include)       collectAllTimes(tree,child,excludeBelow,times,childs);
    }
  }
}

protected void paintText(final Graphics g,final JComponent c,final Rectangle localTextRect,final String text){
  final Graphics2D g2d=g instanceof Graphics2D ? (Graphics2D)g : null;
  final AbstractButton b=(AbstractButton)c;
  final ButtonModel model=b.getModel();
  final FontMetrics fm=g.getFontMetrics();
  final int mnemonicIndex=AquaMnemonicHandler.isMnemonicHidden() ? -1 : b.getDisplayedMnemonicIndex();
  if (model.isEnabled()) {
    g.setColor(b.getForeground());
  }
 else {
    g.setColor(defaultDisabledTextColor);
  }
  SwingUtilities2.drawStringUnderlineCharAt(c,g,text,mnemonicIndex,localTextRect.x,localTextRect.y + fm.getAscent());
}

public static ConstraintWidget[] inferTableList(WidgetsScene list){
  for (  ConstraintWidget widget : list.getWidgets()) {
    widget.resetAnchors();
  }
  return inferTableList(list.getRoot());
}

public String toXMLString(boolean includeNS,boolean declareNS) throws FSMsgException {
  return toXMLString(includeNS,declareNS,false);
}

public void ifPresent(LongConsumer consumer){
  if (isPresent)   consumer.accept(value);
}

public void update(String[] columns,Object[] columnValues,String[] conditions,Object[] conditionValues) throws DataAccessException {
  if (columns.length != columnValues.length || conditions.length != conditionValues.length) {
    logger.error("DatabaseWriter update columns and values mismatch");
    return;
  }
  Object[] values=Arrays.copyOf(columnValues,columnValues.length + conditionValues.length);
  System.arraycopy(conditionValues,0,values,columnValues.length,conditionValues.length);
  final String sql=PreparedStatementUtil.prepareUpdateTemplateWithColumn(tableName,columns,conditions);
  execute(sql,values);
}

public static String replicaSetUsedIn(String addresses){
  if (addresses.startsWith("[")) {
    return null;
  }
  int index=addresses.indexOf('/');
  if (index < 0)   return null;
  return addresses.substring(0,index);
}

public void onProgress(long bytesWritten,long totalSize){
  Log.v(LOG_TAG,String.format("Progress %d from %d (%2.0f%%)",bytesWritten,totalSize,(totalSize > 0) ? (bytesWritten * 1.0 / totalSize) * 100 : -1));
}

public String self(TypeDeclaration decl){
  if (decl instanceof Constructor) {
    decl=(TypeDeclaration)decl.getContainer();
  }
  String name=JsUtils.escapeStringLiteral(decl.getName());
  if (decl.isShared() || decl.isToplevel()) {
    name+=nestingSuffix(decl,true);
  }
 else {
    name="$" + Long.toString(getUID(decl),36);
  }
  return String.format("%c%s$",Character.toLowerCase(name.charAt(0)),name.substring(1));
}

public double elapsedTime(){
  long now=threadTimer.getCurrentThreadCpuTime();
  return (now - start) / NANOSECONDS_PER_SECOND;
}

public static void sortList(List list){
  if (SystemUtils.IS_JAVA_1_7 && list instanceof CopyOnWriteArrayList) {
    List tempList=new ArrayList(list);
    Collections.sort(tempList);
    list.clear();
    list.addAll(tempList);
  }
 else {
    Collections.sort(list);
  }
}

public void fireIndexedPropertyChange(String propertyName,int index,boolean oldValue,boolean newValue){
  if (oldValue != newValue) {
    fireIndexedPropertyChange(propertyName,index,Boolean.valueOf(oldValue),Boolean.valueOf(newValue));
  }
}

public static <T>T[] concat(T[] first,T[] second,Class<T> type){
  T[] result=newArray(type,first.length + second.length);
  System.arraycopy(first,0,result,0,first.length);
  System.arraycopy(second,0,result,first.length,second.length);
  return result;
}

public synchronized void writeToRemote(byte b){
  remoteBuffer.add(b);
}

@Override public void drawSeries(Canvas canvas,Paint paint,List<Float> points,List<Double> values,XYSeriesRenderer seriesRenderer,SupportSeriesRender supportSeriesRender,float yAxisValue,int seriesIndex,int startIndex){
  int seriesNr=mDataset.getSeriesCount();
  int length=points.size();
  paint.setColor(seriesRenderer.getColor());
  paint.setStyle(Style.FILL);
  float halfDiffX=getHalfDiffX(points,length,seriesNr);
  int start=0;
  if (startIndex > 0) {
    start=2;
  }
  for (int i=start; i < length; i+=4) {
    if (points.size() > i + 3) {
      float xMin=points.get(i);
      float yMin=points.get(i + 1);
      float xMax=points.get(i + 2);
      float yMax=points.get(i + 3);
      drawBar(canvas,xMin,yMin,xMax,yMax,halfDiffX,seriesNr,seriesIndex,paint);
    }
  }
  paint.setColor(seriesRenderer.getColor());
}

private void beginGesture(int scrollOffsetY,int scrollExtentY){
  mInitialTranslationY=getTranslationY();
  boolean isInitiallyVisible=mInitialTranslationY < mTotalHeight;
  int startingY=isInitiallyVisible ? scrollOffsetY : Math.min(scrollOffsetY,mTotalHeight);
  mInitialOffsetY=startingY + scrollExtentY;
}

@Override public void add(String... identifiers){
  whitelist.addAll(Arrays.asList(identifiers));
}

public static void clear(){
  shopId.set(0L);
  shopCode.set("DEFAULT");
}

@Override public boolean communicationInitiated(){
  return bugsPopulated.getCount() == 0 && communicationInitiated && networkClient.ready();
}

public static Charset toCharset(Charset charset){
  return charset == null ? Charset.defaultCharset() : charset;
}

@Override public void dump(String prefix,FileDescriptor fd,PrintWriter writer,String[] args){
  super.dump(prefix,fd,writer,args);
  writer.print(prefix);
  writer.print("rawQuery=");
  writer.println(rawQuery);
  writer.print(prefix);
  writer.print("args=");
  writer.println(Arrays.toString(args));
}

public void addContigField(ContigField field){
  addIdField(mContigLines,field);
}

boolean removeIndexEntry(String resourceName,String policyName){
  Iterator iter=topLevelEntries.iterator();
  boolean processed=false;
  while (!processed && (iter.hasNext())) {
    ResourceIndexEntry resourceIndexEntry=(ResourceIndexEntry)iter.next();
    if (resourceIndexEntry.removeIndexEntry(resourceType,resourceName,policyName)) {
      processed=true;
    }
  }
  return processed;
}

public static double pdf(double x,double mu,double shape){
  if (!(x > 0) || x == Double.POSITIVE_INFINITY) {
    return 0;
  }
  final double v=(x - mu) / mu;
  double t1=Math.sqrt(shape / (MathUtil.TWOPI * x * x* x));
  return t1 > 0 ? t1 * Math.exp(-shape * v * v* .5 / x) : 0;
}

@Override public void onStopTrackingTouch(SeekBar seekBar){
  final int pos=mItemList.indexOf(mSelectedTracker);
  final int delta=840 / mItemList.size();
  cp_mover.setProgress(pos * delta + delta / 2);
}

public static int maxProfit(int[] prices){
  if (prices == null || prices.length < 2) {
    return 0;
  }
  int max=0;
  int min=prices[0];
  for (int i=1; i < prices.length; i++) {
    min=Math.min(min,prices[i]);
    if (prices[i] > prices[i - 1]) {
      max=Math.max(max,prices[i] - min);
    }
  }
  return max;
}

public void add(String string){
  elements.add(string == null ? JsonNull.INSTANCE : new JsonPrimitive(string));
}

public void componentAdded(ContainerEvent e){
  Layer childLayer=(Layer)e.getChild();
  addProjectionListener(childLayer);
  if (!removedLayers.removeElement(childLayer)) {
    addedLayers.addElement(childLayer);
  }
  changeLayers(e);
}

public void processingInstruction(String target,String data) throws SAXException {
  charactersFlush();
  int dataIndex=m_data.size();
  m_previous=addNode(DTM.PROCESSING_INSTRUCTION_NODE,DTM.PROCESSING_INSTRUCTION_NODE,m_parents.peek(),m_previous,-dataIndex,false);
  m_data.addElement(m_valuesOrPrefixes.stringToIndex(target));
  m_values.addElement(data);
  m_data.addElement(m_valueIndex++);
}

protected void panic(String msg) throws SAXException {
  SAXParseException spe=new SAXParseException(msg,this);
  mHandErr.fatalError(spe);
  throw spe;
}

private void updateNamespacePermissions(UserNamespaceAuthorizationEntity userNamespaceAuthorizationEntity,List<NamespacePermissionEnum> namespacePermissions){
  userNamespaceAuthorizationEntity.setReadPermission(namespacePermissions.contains(NamespacePermissionEnum.READ));
  userNamespaceAuthorizationEntity.setWritePermission(namespacePermissions.contains(NamespacePermissionEnum.WRITE));
  userNamespaceAuthorizationEntity.setExecutePermission(namespacePermissions.contains(NamespacePermissionEnum.EXECUTE));
  userNamespaceAuthorizationEntity.setGrantPermission(namespacePermissions.contains(NamespacePermissionEnum.GRANT));
}

public static void report(){
  if (!booted)   return;
  ControllerThread.report();
  RuntimeMeasurements.report();
  for (Enumeration<Organizer> e=organizers.elements(); e.hasMoreElements(); ) {
    Organizer organizer=e.nextElement();
    organizer.report();
  }
  if (options.FINAL_REPORT_LEVEL >= 2) {
    EdgeCounts.dumpCounts();
    dcg.dumpGraph();
  }
  if (options.REPORT_INTERRUPT_STATS) {
    VM.sysWriteln("Timer Interrupt and Listener Stats");
    VM.sysWriteln("\tTotal number of clock ticks ",RVMThread.timerTicks);
    VM.sysWriteln("\tController clock ",controllerClock);
    VM.sysWriteln("\tNumber of method samples taken ",(int)methodSamples.getTotalNumberOfSamples());
  }
}

public static Set<?> convertArrayToSet(Object[] source){
  Set<Object> set=new HashSet<Object>();
  for (  Object element : source) {
    set.add(element);
  }
  return set;
}

public static int intersectLineRectangle(Line2D l,Rectangle2D r,Point2D[] pts){
  double a1x=l.getX1(), a1y=l.getY1();
  double a2x=l.getX2(), a2y=l.getY2();
  double mxx=r.getMaxX(), mxy=r.getMaxY();
  double mnx=r.getMinX(), mny=r.getMinY();
  if (pts[0] == null)   pts[0]=new Point2D.Double();
  if (pts[1] == null)   pts[1]=new Point2D.Double();
  int i=0;
  if (intersectLineLine(mnx,mny,mxx,mny,a1x,a1y,a2x,a2y,pts[i]) > 0)   i++;
  if (intersectLineLine(mxx,mny,mxx,mxy,a1x,a1y,a2x,a2y,pts[i]) > 0)   i++;
  if (i == 2)   return i;
  if (intersectLineLine(mxx,mxy,mnx,mxy,a1x,a1y,a2x,a2y,pts[i]) > 0)   i++;
  if (i == 2)   return i;
  if (intersectLineLine(mnx,mxy,mnx,mny,a1x,a1y,a2x,a2y,pts[i]) > 0)   i++;
  return i;
}

public static String cidrMaskToNetMask(String cidrMask){
  if (cidrMask == null) {
    return null;
  }
  int cidrMaskValue=0;
  try {
    cidrMaskValue=Integer.parseInt(cidrMask);
  }
 catch (  NumberFormatException e) {
    return null;
  }
  int cidrMaskFull=0xffffffff << (32 - cidrMaskValue);
  int cidrMaskBits1=cidrMaskFull >> 24 & 0xff;
  int cidrMaskBits2=cidrMaskFull >> 16 & 0xff;
  int cidrMaskBits3=cidrMaskFull >> 8 & 0xff;
  int cidrMaskBits4=cidrMaskFull >> 0 & 0xff;
  StringBuffer netMaskBuf=new StringBuffer();
  netMaskBuf.append(cidrMaskBits1);
  netMaskBuf.append('.');
  netMaskBuf.append(cidrMaskBits2);
  netMaskBuf.append('.');
  netMaskBuf.append(cidrMaskBits3);
  netMaskBuf.append('.');
  netMaskBuf.append(cidrMaskBits4);
  return netMaskBuf.toString();
}

public boolean inBounds(MouseEvent e){
  return e.getX() > x && e.getX() < x + width && e.getY() > y && e.getY() < y + height;
}

public ClassPath(@Nonnull Iterable<DexFile> classPath,boolean checkPackagePrivateAccess){
  Iterable<DexFile> dexFiles=Iterables.concat(classPath,Lists.newArrayList(getBasicClasses()));
  unknownClass=new UnknownClassProto(this);
  loadedClasses.put(unknownClass.getType(),unknownClass);
  this.checkPackagePrivateAccess=checkPackagePrivateAccess;
  loadPrimitiveType("Z");
  loadPrimitiveType("B");
  loadPrimitiveType("S");
  loadPrimitiveType("C");
  loadPrimitiveType("I");
  loadPrimitiveType("J");
  loadPrimitiveType("F");
  loadPrimitiveType("D");
  loadPrimitiveType("L");
  for (  DexFile dexFile : dexFiles) {
    for (    ClassDef classDef : dexFile.getClasses()) {
      ClassDef prev=availableClasses.get(classDef.getType());
      if (prev == null) {
        availableClasses.put(classDef.getType(),classDef);
      }
    }
  }
}

private boolean askToSave(){
  if (mainFrame.isProjectChanged()) {
    int response=JOptionPane.showConfirmDialog(mainFrame,L10N.getLocalString("dlg.save_current_changes","The current project has been changed, Save current changes?"),L10N.getLocalString("dlg.save_changes","Save Changes?"),JOptionPane.YES_NO_CANCEL_OPTION,JOptionPane.WARNING_MESSAGE);
    if (response == JOptionPane.YES_OPTION) {
      if (mainFrame.getSaveFile() != null) {
        save();
      }
 else {
        saveAs();
      }
    }
 else     if (response == JOptionPane.CANCEL_OPTION) {
      return true;
    }
  }
  return false;
}

public MapCursor addCursor(MapCursor cursor){
  cursors.add(cursor);
  return cursor;
}

private boolean discardUpstreamMediaChunks(int queueLength){
  if (mediaChunks.size() <= queueLength) {
    return false;
  }
  long startTimeUs=0;
  long endTimeUs=mediaChunks.getLast().endTimeUs;
  BaseMediaChunk removed=null;
  while (mediaChunks.size() > queueLength) {
    removed=mediaChunks.removeLast();
    startTimeUs=removed.startTimeUs;
  }
  sampleQueue.discardUpstreamSamples(removed.getFirstSampleIndex());
  notifyUpstreamDiscarded(startTimeUs,endTimeUs);
  return true;
}

public MetalinkFileBuilder addFile(String name){
  MetalinkFileBuilder newFile=new MetalinkFileBuilder(name);
  files.add(newFile);
  return newFile;
}

private void sendAfterConnect(Channel ch,NettyChannelContext contextFinal,Operation request,NettyChannelGroup group){
  if (request.getStatusCode() < Operation.STATUS_CODE_FAILURE_THRESHOLD) {
    request.complete();
  }
 else {
    request.fail(request.getStatusCode());
  }
}

protected String checkProduction(final Territory to,final Collection<Unit> units,final PlayerID player){
  final List<Territory> producers=getAllProducers(to,player,units);
  if (producers.isEmpty()) {
    return "No factory in or adjacent to " + to.getName();
  }
  Collections.sort(producers,getBestProducerComparator(to,units,player));
  if (!getCanAllUnitsWithRequiresUnitsBePlacedCorrectly(units,to)) {
    return "Cannot place more units which require units, than production capacity of territories with the required units";
  }
  final int maxUnitsToBePlaced=getMaxUnitsToBePlaced(units,to,player,true);
  if ((maxUnitsToBePlaced != -1) && (maxUnitsToBePlaced < units.size())) {
    return "Cannot place " + units.size() + " more units in "+ to.getName();
  }
  return null;
}

@Override public void closeWrite() throws IOException {
  if (_isWriteClosed) {
    return;
  }
  _isWriteClosed=true;
  SocketStream stream=_streamImpl;
  if (stream != null) {
    stream.closeWrite();
  }
 else   if (_s != null) {
    try {
      _s.shutdownOutput();
    }
 catch (    UnsupportedOperationException e) {
      log.log(Level.FINEST,e.toString(),e);
    }
catch (    Exception e) {
      log.finer(e.toString());
      log.log(Level.FINEST,e.toString(),e);
    }
  }
}

public boolean equals(Object that){
  return (that instanceof CharSet) && Arrays.equals(chars,((CharSet)that).chars);
}

public static Void processRecords(List<KinesisEventRecord> inputRecords,KinesisUserRecordProcessor processor){
  List<Record> rawRecords=new LinkedList<>();
  for (  KinesisEventRecord rec : inputRecords) {
    rawRecords.add(rec.getKinesis());
  }
  return processor.process(UserRecord.deaggregate(rawRecords));
}

protected Font resolveFont(SharedContext ctx,String font,float size,IdentValue weight,IdentValue style,IdentValue variant){
  if (font.startsWith("\"")) {
    font=font.substring(1);
  }
  if (font.endsWith("\"")) {
    font=font.substring(0,font.length() - 1);
  }
  if (font.equalsIgnoreCase("serif")) {
    font="Serif";
  }
  if (font.equalsIgnoreCase("sans-serif")) {
    font="SansSerif";
  }
  if (font.equalsIgnoreCase("monospace")) {
    font="Monospaced";
  }
  if (font.equals("Serif") && style == IdentValue.OBLIQUE) {
    font="SansSerif";
  }
  if (font.equals("SansSerif") && style == IdentValue.ITALIC) {
    font="Serif";
  }
  String fontInstanceName=getFontInstanceHashName(ctx,font,size,weight,style,variant);
  if (instanceHash.containsKey(fontInstanceName)) {
    return instanceHash.get(fontInstanceName);
  }
  if (availableFontsHash.containsKey(font)) {
    Font possiblyNullFont=availableFontsHash.get(font);
    Font rootFont=null;
    if (possiblyNullFont != null) {
      rootFont=possiblyNullFont;
    }
 else {
      rootFont=new Font(font,Font.PLAIN,1);
      availableFontsHash.put(font,rootFont);
    }
    Font fnt=createFont(ctx,rootFont,size,weight,style,variant);
    instanceHash.put(fontInstanceName,fnt);
    return fnt;
  }
  return null;
}

public ArrayRealVector(double[] d,int pos,int size) throws MathIllegalArgumentException, NullArgumentException {
  if (d == null) {
    throw new NullArgumentException();
  }
  if (d.length < pos + size) {
    throw new MathIllegalArgumentException(LocalizedCoreFormats.NUMBER_TOO_LARGE,pos + size,d.length);
  }
  data=new double[size];
  System.arraycopy(d,pos,data,0,size);
}

public void clearPaymentMethodsById(List<String> paymentMethodIdsToRemove){
  if (UtilValidate.isEmpty(paymentMethodIdsToRemove))   return;
  for (Iterator<CartPaymentInfo> iter=paymentInfo.iterator(); iter.hasNext(); ) {
    CartPaymentInfo info=iter.next();
    if (paymentMethodIdsToRemove.contains(info.paymentMethodId)) {
      iter.remove();
    }
  }
}

@Override public void clean(){
  setCurrentPoints(0);
  checkState();
}

public void handleButton2Request(RequestInvocationEvent event){
  setPageSessionAttribute(getTrackingTabIDName(),AMAdminConstants.FED_TAB_ID);
  setPageSessionAttribute(AMAdminConstants.PREVIOUS_TAB_ID,getTrackingTabIDName());
  FederationViewBean vb=(FederationViewBean)getViewBean(FederationViewBean.class);
  backTrail();
  passPgSessionMap(vb);
  vb.forwardTo(getRequestContext());
}

@Override public void performRequest(String request){
  if (request.compareTo("Stop") == 0) {
    stop();
  }
 else {
    throw new IllegalArgumentException(request + " not supported (Filter)");
  }
}

public byte[] toBytes(){
  byte[] returnBytes=new byte[bytesLength];
  System.arraycopy(bytes,0,returnBytes,0,bytesLength);
  return returnBytes;
}

public void startCheck(){
  checker=new Thread(new CheckForUpdate());
  checker.setPriority(Thread.MIN_PRIORITY);
  checker.start();
}

@Override public boolean eIsSet(int featureID){
switch (featureID) {
case SGraphPackage.TRANSITION__TRIGGER:
    return trigger != null;
case SGraphPackage.TRANSITION__EFFECT:
  return effect != null;
case SGraphPackage.TRANSITION__PROPERTIES:
return properties != null && !properties.isEmpty();
case SGraphPackage.TRANSITION__DOCUMENTATION:
return DOCUMENTATION_EDEFAULT == null ? documentation != null : !DOCUMENTATION_EDEFAULT.equals(documentation);
case SGraphPackage.TRANSITION__TARGET:
return target != null;
case SGraphPackage.TRANSITION__SOURCE:
return basicGetSource() != null;
}
return super.eIsSet(featureID);
}

public boolean isAckSeen(){
  return this.ackSeen;
}

protected void uninstallListeners(){
  super.uninstallListeners();
  splitPane.removePropertyChangeListener(this);
}

private static Collector<SegmentInfo,?,Map<String,SegmentInfo>> partitionsToMapCollector(){
  return Collector.of(null,null,null);
}

public boolean isCrc(){
  return isFlags(FLAG_CACHED_VALUES_CHECKED & FLAG_CRC_CALCED);
}

public int size(){
  return queue.size();
}

@Override public StringBuffer format(double number,StringBuffer result,FieldPosition fieldPosition){
  boolean tryFastPath=false;
  if (fieldPosition == DontCareFieldPosition.INSTANCE)   tryFastPath=true;
 else {
    fieldPosition.setBeginIndex(0);
    fieldPosition.setEndIndex(0);
  }
  if (tryFastPath) {
    String tempResult=fastFormat(number);
    if (tempResult != null) {
      result.append(tempResult);
      return result;
    }
  }
  return format(number,result,fieldPosition.getFieldDelegate());
}

private void buildCursorConditionally(MatrixCursor cursor,CharacterRecord cr,String selection,String[] selectionArgs){
  if (selectionArgs == null)   cursor.addRow(new Object[]{cr.getId(),cr.getName(),cr.getRace()});
 else   for (  String item : selectionArgs)   if ((selection.equals(CharacterContract.CharacterEntry.COLUMN_NAME) && item.equals(cr.getName())) || (selection.equals(CharacterContract.CharacterEntry.COLUMN_RACE) && item.equals(cr.getRace()))) {
    cursor.addRow(new Object[]{cr.getId(),cr.getName(),cr.getRace()});
  }
}

public ModpackFileSelectionPanel(WizardController controller,Map wizardData,File gameDir,BiFunction<String,Boolean,Integer> blackList){
  initComponents();
  this.controller=controller;
  this.wizardData=wizardData;
  this.blackList=blackList;
  CheckBoxTreeNode root=create(gameDir,"minecraft");
  jTree1.setModel(new DefaultTreeModel(root));
  jTree1.setCellRenderer(new CheckBoxTreeCellRenderer());
  jTree1.addMouseListener(new CheckBoxTreeNodeSelectionListener());
  wizardData.put("blackList",root);
}

public Shape paintLayer(Graphics g,int offs0,int offs1,Shape bounds,JTextComponent c,View view){
  Graphics2D g2d=(Graphics2D)g;
  Composite originalComposite=null;
  if (getAlpha() < 1.0f) {
    originalComposite=g2d.getComposite();
    g2d.setComposite(getAlphaComposite());
  }
  Paint paint=getPaint();
  if (paint == null)   g2d.setColor(c.getSelectionColor());
 else   g2d.setPaint(paint);
  if (offs0 == view.getStartOffset() && offs1 == view.getEndOffset()) {
    Rectangle alloc;
    if (bounds instanceof Rectangle)     alloc=(Rectangle)bounds;
 else     alloc=bounds.getBounds();
    g2d.fillRect(alloc.x,alloc.y,alloc.width,alloc.height);
    if (getAlpha() < 1.0f)     g2d.setComposite(originalComposite);
    return alloc;
  }
 else {
    try {
      Shape shape=view.modelToView(offs0,Position.Bias.Forward,offs1,Position.Bias.Backward,bounds);
      Rectangle r=(shape instanceof Rectangle) ? (Rectangle)shape : shape.getBounds();
      if (roundedEdges) {
        g2d.fillRoundRect(r.x,r.y,r.width,r.height,ARCWIDTH,ARCHEIGHT);
      }
 else {
        g2d.fillRect(r.x,r.y,r.width,r.height);
      }
      if (getAlpha() < 1.0f)       g2d.setComposite(originalComposite);
      return r;
    }
 catch (    BadLocationException ble) {
      ble.printStackTrace();
    }
 finally {
      if (getAlpha() < 1.0f)       g2d.setComposite(originalComposite);
    }
  }
  return null;
}

private void createContainerIfNecessary(){
  if (container.isFull()) {
    container=new TimerRawContainer();
    data.add(container);
  }
}

private void processUpdateCounts(int[] updateCounts,int commandsInBatch){
  if (updateCounts.length < commandsInBatch) {
    error.emit(tuples.get(updateCounts.length + batchStartIdx));
    errorTuples++;
    tuplesWrittenSuccessfully+=updateCounts.length;
    batchStartIdx+=updateCounts.length + 1;
    if ((tuples.size() - batchStartIdx) > 0) {
      processBatch();
    }
  }
 else {
    tuplesWrittenSuccessfully=commandsInBatch;
    for (int i=0; i < commandsInBatch; i++) {
      if (updateCounts[i] == Statement.EXECUTE_FAILED) {
        error.emit(tuples.get(i + batchStartIdx));
        errorTuples++;
        tuplesWrittenSuccessfully--;
      }
    }
  }
}

public int chooseProtocolVersion(){
  return preferredProtocolVersion;
}

public Sensor createNewSensor(String systemName,String userName){
  Sensor s;
  String sName=AcelaAddress.normalizeSystemName(systemName);
  if (sName.equals("")) {
    log.error("Invalid Acela Sensor system name: " + systemName);
    return null;
  }
  s=getBySystemName(sName);
  if (s != null) {
    log.error("Sensor with this name already exists: " + systemName);
    return null;
  }
  String altName=AcelaAddress.convertSystemNameToAlternate(sName);
  s=getBySystemName(altName);
  if (s != null) {
    log.error("Sensor with name: '" + systemName + "' already exists as: '"+ altName+ "'");
    return null;
  }
  int bit=AcelaAddress.getBitFromSystemName(sName);
  if ((bit < 0) || (bit >= 1023)) {
    log.error("Sensor bit number: " + Integer.toString(bit) + ", is outside the supported range, 1-1024");
    return null;
  }
  if (userName == null) {
    s=new AcelaSensor(sName);
  }
 else {
    s=new AcelaSensor(sName,userName);
  }
  AcelaNode node=AcelaAddress.getNodeFromSystemName(sName,_memo);
  if (node == null) {
    log.warn("Sensor: " + sName + ", refers to an undefined Acela Node.");
    return s;
  }
  if (!node.hasActiveSensors) {
    int newnodeaddress;
    newnodeaddress=node.getNodeAddress();
    log.warn("We got the wrong node: " + newnodeaddress);
    return s;
  }
  node.registerSensor(s,bit);
  return s;
}

public static InputStream needStream(String propertyName) throws NoSuchPropertyException, FileNotFoundException, MaryConfigurationException {
  MaryProperties.needProperty(propertyName);
  return getStream(propertyName);
}

public static boolean equal(Object a,Object b){
  return a == b || (a != null && a.equals(b));
}

public static String networkNameToString(byte[] data,int offset,int length){
  String ret;
  if ((data[offset] & 0x80) != 0x80 || length < 1) {
    return "";
  }
switch ((data[offset] >>> 4) & 0x7) {
case 0:
    int countSeptets;
  int unusedBits=data[offset] & 7;
countSeptets=(((length - 1) * 8) - unusedBits) / 7;
ret=GsmAlphabet.gsm7BitPackedToString(data,offset + 1,countSeptets);
break;
case 1:
try {
ret=new String(data,offset + 1,length - 1,"utf-16");
}
 catch (UnsupportedEncodingException ex) {
ret="";
Log.e(LOG_TAG,"implausible UnsupportedEncodingException",ex);
}
break;
default :
ret="";
break;
}
if ((data[offset] & 0x40) != 0) {
}
return ret;
}

public void add(Marker marker){
  mItems.add(marker);
}

public static String readAsciiLine(InputStream in) throws IOException {
  StringBuilder result=new StringBuilder(80);
  while (true) {
    int c=in.read();
    if (c == -1) {
      throw new EOFException();
    }
 else     if (c == '\n') {
      break;
    }
    result.append((char)c);
  }
  int length=result.length();
  if (length > 0 && result.charAt(length - 1) == '\r') {
    result.setLength(length - 1);
  }
  return result.toString();
}

private static Map.Entry<DateTime,TimeSeriesValue> findName(List<TimeSeriesCollection> c,GroupName name){
  ListIterator<TimeSeriesCollection> iter=c.listIterator();
  while (iter.hasNext()) {
    final int idx=iter.nextIndex();
    final TimeSeriesCollection tsdata=iter.next();
    final Optional<TimeSeriesValue> found=tsdata.get(name);
    if (found.isPresent())     return SimpleMapEntry.create(tsdata.getTimestamp(),found.get());
  }
  throw new IllegalStateException("name not present in list of time series collections");
}

public Map<String,Object> finalizeOrderEntryPayment(String checkOutPaymentId,BigDecimal amount,boolean singleUse,boolean append){
  Map<String,Object> result=ServiceUtil.returnSuccess();
  if (UtilValidate.isNotEmpty(checkOutPaymentId)) {
    if (!append) {
      cart.clearPayments();
    }
    cart.addPaymentAmount(checkOutPaymentId,amount,singleUse);
  }
  return result;
}

public void deploy(String routeId,String routeName,JsonValue routeConfig) throws RouterHandlerException {
  Reject.ifNull(routeName);
  write.lock();
  try {
    load(routeId,routeName,routeConfig.copy());
    directoryMonitor.store(routeId,routeConfig);
    logger.info("Deployed the route with id '{}' named '{}'",routeId,routeName);
  }
 catch (  IOException e) {
    throw new RouterHandlerException(format("An error occurred while storing the route '%s'",routeId),e);
  }
 finally {
    write.unlock();
  }
}

private static char[] subscriptForDigit(int digit){
  return Character.toChars(0x2080 + digit);
}

private FsPermission permission(IgfsFile file){
  String perm=file.property(IgfsUtils.PROP_PERMISSION,null);
  if (perm == null)   return FsPermission.getDefault();
  try {
    return new FsPermission((short)Integer.parseInt(perm,8));
  }
 catch (  NumberFormatException ignore) {
    return FsPermission.getDefault();
  }
}

public SimpleMailboxACL(){
  this.entries=Collections.emptyMap();
}

private void readStreamResult(InH3 hIn,HeadersAmp headers) throws IOException {
  ServiceRefAmp serviceRef=readToAddress(hIn);
  long id=hIn.readLong();
  QueryRefAmp queryRef=serviceRef.getQueryRef(id);
  if (queryRef != null) {
    ClassLoader loader=queryRef.getClassLoader();
    Thread thread=Thread.currentThread();
    thread.setContextClassLoader(loader);
  }
  int sequence=hIn.readInt();
  List<Object> values=(List)hIn.readObject();
  Throwable exn=(Throwable)hIn.readObject(Throwable.class);
  boolean isComplete=hIn.readBoolean();
  if (log.isLoggable(_logLevel)) {
    log.log(_logLevel,"stream-result-r " + values + ","+ isComplete+ " (in "+ this+ ")"+ "\n  {id:"+ id+ ", to:"+ serviceRef+ ","+ headers+ "}");
  }
  if (queryRef != null) {
    if (queryRef.accept(headers,values,sequence,isComplete)) {
      serviceRef.removeQueryRef(id);
    }
    if (exn != null) {
      serviceRef.removeQueryRef(id);
      queryRef.fail(headers,exn);
    }
  }
 else   if (log.isLoggable(Level.WARNING)) {
    log.warning("query-result qid=" + id + " for service "+ serviceRef+ " does not match any known queries.\n"+ headers);
  }
}

public static int rectCrossingsForPath(PathIterator pi,double rxmin,double rymin,double rxmax,double rymax){
  if (rxmax <= rxmin || rymax <= rymin) {
    return 0;
  }
  if (pi.isDone()) {
    return 0;
  }
  double coords[]=new double[6];
  if (pi.currentSegment(coords) != PathIterator.SEG_MOVETO) {
    throw new IllegalPathStateException("missing initial moveto " + "in path definition");
  }
  pi.next();
  double curx, cury, movx, movy, endx, endy;
  curx=movx=coords[0];
  cury=movy=coords[1];
  int crossings=0;
  while (crossings != RECT_INTERSECTS && !pi.isDone()) {
switch (pi.currentSegment(coords)) {
case PathIterator.SEG_MOVETO:
      if (curx != movx || cury != movy) {
        crossings=rectCrossingsForLine(crossings,rxmin,rymin,rxmax,rymax,curx,cury,movx,movy);
      }
    movx=curx=coords[0];
  movy=cury=coords[1];
break;
case PathIterator.SEG_LINETO:
endx=coords[0];
endy=coords[1];
crossings=rectCrossingsForLine(crossings,rxmin,rymin,rxmax,rymax,curx,cury,endx,endy);
curx=endx;
cury=endy;
break;
case PathIterator.SEG_QUADTO:
endx=coords[2];
endy=coords[3];
crossings=rectCrossingsForQuad(crossings,rxmin,rymin,rxmax,rymax,curx,cury,coords[0],coords[1],endx,endy,0);
curx=endx;
cury=endy;
break;
case PathIterator.SEG_CUBICTO:
endx=coords[4];
endy=coords[5];
crossings=rectCrossingsForCubic(crossings,rxmin,rymin,rxmax,rymax,curx,cury,coords[0],coords[1],coords[2],coords[3],endx,endy,0);
curx=endx;
cury=endy;
break;
case PathIterator.SEG_CLOSE:
if (curx != movx || cury != movy) {
crossings=rectCrossingsForLine(crossings,rxmin,rymin,rxmax,rymax,curx,cury,movx,movy);
}
curx=movx;
cury=movy;
break;
}
pi.next();
}
if (crossings != RECT_INTERSECTS && (curx != movx || cury != movy)) {
crossings=rectCrossingsForLine(crossings,rxmin,rymin,rxmax,rymax,curx,cury,movx,movy);
}
return crossings;
}

public void updateFieldVisibility(NeuronUpdateRule rule){
  boolean bounded=rule instanceof BoundedUpdateRule;
  boolean clip=false;
  setBoundsPanelVisible(bounded);
  if (bounded) {
    clip=rule instanceof ClippableUpdateRule;
    clippingDropDown.setSelected(clip);
  }
  setClippingPanelVisible(clip);
  setBoundsEnabled(bounded);
}

@Override public int hashCode(){
  int hash=0;
  if (altFormat != null) {
    hash+=altFormat.hashCode();
  }
  if (projection != null) {
    hash=hash * 37;
    hash+=projection.hashCode();
  }
  if (version != null) {
    hash=hash * 37;
    hash+=version.hashCode();
  }
  return hash;
}

public void removeOkListener(ActionListener a){
  m_okBut.removeActionListener(a);
}

void change_item_shape(BrdItem p_item,int p_shape_no,ShapeTile p_new_shape){
  AwtreeNodeLeaf[] old_entries=p_item.get_search_tree_entries(this);
  AwtreeNodeLeaf[] new_leaf_arr=new AwtreeNodeLeaf[old_entries.length];
  ShapeTile[] new_precalculated_tree_shapes=new ShapeTile[old_entries.length];
  remove_leaf(old_entries[p_shape_no]);
  for (int i=0; i < new_precalculated_tree_shapes.length; ++i) {
    if (i == p_shape_no) {
      new_precalculated_tree_shapes[i]=p_new_shape;
    }
 else {
      new_precalculated_tree_shapes[i]=p_item.get_tree_shape(this,i);
      new_leaf_arr[i]=old_entries[i];
    }
  }
  p_item.set_precalculated_tree_shapes(new_precalculated_tree_shapes,this);
  new_leaf_arr[p_shape_no]=insert(p_item,p_shape_no);
  p_item.set_search_tree_entries(this,new_leaf_arr);
}

public JQuickStartPane(KseFrame kseFrame){
  super(GRADIENT_COLOR_1,GRADIENT_COLOR_2);
  this.kseFrame=kseFrame;
  new DropTarget(this,this);
  initComponents();
}

protected String decode(String urlString){
  try {
    Class clazz=URLDecoder.class;
    Method method=clazz.getDeclaredMethod("decode",new Class[]{String.class,String.class});
    if (urlString.indexOf('+') >= 0) {
      int len=urlString.length();
      StringBuffer buf=new StringBuffer(len);
      for (int i=0; i < len; i++) {
        char c=urlString.charAt(i);
        if (c == '+')         buf.append("%2B");
 else         buf.append(c);
      }
      urlString=buf.toString();
    }
    Object result=method.invoke(null,new Object[]{urlString,"UTF-8"});
    if (result != null)     return (String)result;
  }
 catch (  Exception e) {
  }
  boolean replaced=false;
  byte[] encodedBytes=urlString.getBytes();
  int encodedLength=encodedBytes.length;
  byte[] decodedBytes=new byte[encodedLength];
  int decodedLength=0;
  for (int i=0; i < encodedLength; i++) {
    byte b=encodedBytes[i];
    if (b == '%') {
      if (i + 2 >= encodedLength)       throw new IllegalArgumentException("Malformed URL (\"" + urlString + "\"): % must be followed by 2 digits.");
      byte enc1=encodedBytes[++i];
      byte enc2=encodedBytes[++i];
      b=(byte)((hexToByte(enc1) << 4) + hexToByte(enc2));
      replaced=true;
    }
    decodedBytes[decodedLength++]=b;
  }
  if (!replaced)   return urlString;
  try {
    return new String(decodedBytes,0,decodedLength,"UTF-8");
  }
 catch (  UnsupportedEncodingException e) {
    return new String(decodedBytes,0,decodedLength);
  }
}

public static String indent(final int depth){
  if (depth < 0) {
    return "";
  }
  return ws.substring(0,Math.min(ws.length(),depth * 2));
}

public ExceptionlessOutputStream(OutputStream out){
  super(new DataOutputStream(out));
  dos=(DataOutputStream)this.out;
}

public T advanceToElement(Predicate<T> predicate){
  Node<T> start=head;
  if (head == null)   return null;
  do {
    T currElement=advance();
    if (predicate.test(currElement)) {
      return currElement;
    }
  }
 while (head != start);
  return null;
}

public void addTrace(final Trace trace){
  traceList.add(trace);
  add(trace);
  revalidate();
}

public static void pingAllDevices(String message) throws IOException {
  Sender sender=new Sender(Ids.API_KEY);
  for (  DeviceInfo deviceInfo : endpoint.listDeviceInfo()) {
    doSendViaGcm(message,sender,deviceInfo);
  }
}

public static void w(String tag,String msg,Object... args){
  if (sLevel > LEVEL_WARNING) {
    return;
  }
  if (args.length > 0) {
    msg=String.format(msg,args);
  }
  Log.w(tag,msg);
}

private void findMatchesInContexts(List<NumberContext> contexts,boolean isValid,boolean isPossible,String region,String number){
  if (isValid) {
    doTestInContext(number,region,contexts,Leniency.VALID);
  }
 else {
    for (    NumberContext context : contexts) {
      String text=context.leadingText + number + context.trailingText;
      assertTrue("Should not have found a number in " + text,hasNoMatches(phoneUtil.findNumbers(text,region)));
    }
  }
  if (isPossible) {
    doTestInContext(number,region,contexts,Leniency.POSSIBLE);
  }
 else {
    for (    NumberContext context : contexts) {
      String text=context.leadingText + number + context.trailingText;
      assertTrue("Should not have found a number in " + text,hasNoMatches(phoneUtil.findNumbers(text,region,Leniency.POSSIBLE,Long.MAX_VALUE)));
    }
  }
}

public void testGeneralPunctuationCategory(){
  String[] s={",","!","\"","#","%","&","'","(",")","-",".","/"};
  String regexp="\\p{P}";
  for (int i=0; i < s.length; i++) {
    Pattern pattern=Pattern.compile(regexp);
    Matcher matcher=pattern.matcher(s[i]);
    assertTrue(matcher.find());
  }
}

@Override public int hashCode(){
  int code=0;
  if (eSubjects != null) {
    for (    EntitlementSubject eSubject : eSubjects) {
      code+=eSubject.hashCode();
    }
  }
  if (pSubjectName != null) {
    code+=pSubjectName.hashCode();
  }
  return code;
}

private void assignRandomLowerTriangularMatrix(int n,SecureRandom sr){
  numRows=n;
  numColumns=n;
  length=(n + 31) >>> 5;
  matrix=new int[numRows][length];
  for (int i=0; i < numRows; i++) {
    int q=i >>> 5;
    int r=i & 0x1f;
    int s=31 - r;
    r=1 << r;
    for (int j=0; j < q; j++) {
      matrix[i][j]=sr.nextInt();
    }
    matrix[i][q]=(sr.nextInt() >>> s) | r;
    for (int j=q + 1; j < length; j++) {
      matrix[i][j]=0;
    }
  }
}

private boolean loadWithInspectItClassLoader(String className){
  return className.startsWith(CLASS_NAME_PREFIX);
}

public static void addCustomCommands(String commands,ContextMenu m){
  Matcher matcher=CUSTOM_COMMANDS_PATTERN.matcher(commands);
  boolean sep=false;
  while (matcher.find()) {
    String match=matcher.group();
    if (match.equals("|")) {
      sep=true;
    }
 else {
      String command=matcher.group(2);
      String submenu=null;
      if (match.startsWith("//")) {
        submenu=CUSTOM_COMMANDS_SUBMENU;
      }
      if (sep) {
        m.addSeparator(submenu);
      }
      m.addSubItem("command" + command,Helper.replaceUnderscoreWithSpace(command),submenu);
      sep=false;
    }
  }
}

public void paintBorder(Component c,Graphics g,int x,int y,int width,int height){
  Border border=getBorder();
  String title=getTitle();
  if ((title != null) && !title.isEmpty()) {
    int edge=(border instanceof TitledBorder) ? 0 : EDGE_SPACING;
    JLabel label=getLabel(c);
    Dimension size=label.getPreferredSize();
    Insets insets=getBorderInsets(border,c,new Insets(0,0,0,0));
    int borderX=x + edge;
    int borderY=y + edge;
    int borderW=width - edge - edge;
    int borderH=height - edge - edge;
    int labelY=y;
    int labelH=size.height;
    int position=getPosition();
switch (position) {
case ABOVE_TOP:
      insets.left=0;
    insets.right=0;
  borderY+=labelH - edge;
borderH-=labelH - edge;
break;
case TOP:
insets.top=edge + insets.top / 2 - labelH / 2;
if (insets.top < edge) {
borderY-=insets.top;
borderH+=insets.top;
}
 else {
labelY+=insets.top;
}
break;
case BELOW_TOP:
labelY+=insets.top + edge;
break;
case ABOVE_BOTTOM:
labelY+=height - labelH - insets.bottom- edge;
break;
case BOTTOM:
labelY+=height - labelH;
insets.bottom=edge + (insets.bottom - labelH) / 2;
if (insets.bottom < edge) {
borderH+=insets.bottom;
}
 else {
labelY-=insets.bottom;
}
break;
case BELOW_BOTTOM:
insets.left=0;
insets.right=0;
labelY+=height - labelH;
borderH-=labelH - edge;
break;
}
insets.left+=edge + TEXT_INSET_H;
insets.right+=edge + TEXT_INSET_H;
int labelX=x;
int labelW=width - insets.left - insets.right;
if (labelW > size.width) {
labelW=size.width;
}
switch (getJustification(c)) {
case LEFT:
labelX+=insets.left;
break;
case RIGHT:
labelX+=width - insets.right - labelW;
break;
case CENTER:
labelX+=(width - labelW) / 2;
break;
}
if (border != null) {
if ((position != TOP) && (position != BOTTOM)) {
border.paintBorder(c,g,borderX,borderY,borderW,borderH);
}
 else {
Graphics g2=g.create();
if (g2 instanceof Graphics2D) {
Graphics2D g2d=(Graphics2D)g2;
Path2D path=new Path2D.Float();
path.append(new Rectangle(borderX,borderY,borderW,labelY - borderY),false);
path.append(new Rectangle(borderX,labelY,labelX - borderX - TEXT_SPACING,labelH),false);
path.append(new Rectangle(labelX + labelW + TEXT_SPACING,labelY,borderX - labelX + borderW - labelW - TEXT_SPACING,labelH),false);
path.append(new Rectangle(borderX,labelY + labelH,borderW,borderY - labelY + borderH - labelH),false);
g2d.clip(path);
}
border.paintBorder(c,g2,borderX,borderY,borderW,borderH);
g2.dispose();
}
}
g.translate(labelX,labelY);
label.setSize(labelW,labelH);
label.paint(g);
g.translate(-labelX,-labelY);
}
 else if (border != null) {
border.paintBorder(c,g,x,y,width,height);
}
}

public int nextClearBit(int fromIndex){
  int i=fromIndex >> ADDRESS_BITS;
  int max=data.length;
  for (; i < max; i++) {
    if (data[i] == -1) {
      continue;
    }
    int j=Math.max(fromIndex,i << ADDRESS_BITS);
    for (int end=j + 64; j < end; j++) {
      if (!get(j)) {
        return j;
      }
    }
  }
  return max << ADDRESS_BITS;
}

private final void nextRequest(){
  pacingTimer.stop();
  pacingTimer.restart();
  replyTryCount=0;
}

@Override public boolean equals(Object o){
  if (this == o) {
    return true;
  }
  if (o == null || getClass() != o.getClass()) {
    return false;
  }
  Account account=(Account)o;
  if (username != null ? !username.equals(account.username) : account.username != null) {
    return false;
  }
  return true;
}

public static int identifyPid(final String name) throws PidUnavailableException {
  try {
    final int index=name.indexOf("@");
    if (index < 0) {
      throw new PidUnavailableException("Unable to parse pid from " + name);
    }
    return Integer.valueOf(name.substring(0,index));
  }
 catch (  NumberFormatException e) {
    throw new PidUnavailableException("Unable to parse pid from " + name,e);
  }
}

abstract protected void processCommand(String line) throws Exception ;

private void writeAttribute(java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (namespace.equals("")) {
    xmlWriter.writeAttribute(attName,attValue);
  }
 else {
    registerPrefix(xmlWriter,namespace);
    xmlWriter.writeAttribute(namespace,attName,attValue);
  }
}

protected Object next(){
  int i=0;
  char[] c;
  try {
    i=st.nextToken();
  }
 catch (  IOException e) {
    Debug.error("NetMapReader: " + e.toString() + " in toktest\n");
  }
  if ((i == StreamTokenizer.TT_EOF) || (i == 0))   return EOF;
  if (i == StreamTokenizer.TT_WORD)   return new Symbol(st.sval,1);
  if ((i == '\'') || (i == '\"'))   return st.sval;
  if (i == StreamTokenizer.TT_NUMBER)   return new Double(st.nval);
  if ((i == '(') || (i == '[') || (i == '{'))   return LP;
  if ((i == ')') || (i == ']') || (i == '}'))   return RP;
  c=new char[1];
  c[0]=(char)i;
  return new Symbol(new String(c),2);
}

public static void copy(File source,File dest) throws IOException {
  if (source.isDirectory()) {
    dest.mkdir();
    for (    File child : listFiles(source)) {
      copy(child,new File(dest,child.getName()));
    }
  }
 else {
    if (source.exists()) {
      long lm=source.lastModified();
      if (dest.isDirectory()) {
        dest=new File(dest,source.getName());
      }
      FileOutputStream fos=new FileOutputStream(dest);
      try {
        FileInputStream fis=new FileInputStream(source);
        try {
          if (USE_NIO) {
            nioCopy(fos,fis);
          }
 else {
            oioCopy(source,fos,fis);
          }
        }
  finally {
          fis.close();
        }
      }
  finally {
        fos.close();
      }
      dest.setExecutable(source.canExecute(),true);
      dest.setLastModified(lm);
    }
  }
}

public static int classIndex(int luaState,Class clazz,String searchName) throws LuaException {
synchronized (LuaStateFactory.getExistingState(luaState)) {
    int res;
    res=checkField(luaState,clazz,searchName);
    if (res != 0) {
      return 1;
    }
    res=checkMethod(luaState,clazz,searchName);
    if (res != 0) {
      return 2;
    }
    return 0;
  }
}

private void notifyResourceEventListeners(ResourceEvent event,Object resource){
  for (Iterator<ResourceEventsListener> iter=resourceListeners.iterator(); iter.hasNext(); ) {
    try {
      ResourceEventsListener listener=(ResourceEventsListener)iter.next();
      listener.handleEvent(event,resource);
    }
 catch (    CancelException e) {
    }
catch (    GemFireSecurityException|ManagementException ex) {
      if (event == ResourceEvent.CACHE_CREATE) {
        throw ex;
      }
 else {
        logger.warn(ex.getMessage(),ex);
      }
    }
catch (    Exception err) {
      logger.warn(err.getMessage(),err);
    }
catch (    VirtualMachineError e) {
      SystemFailure.initiateFailure(e);
      throw e;
    }
catch (    Throwable t) {
      SystemFailure.checkFailure();
      logger.warn(t.getMessage(),t);
    }
  }
}

public boolean isEnumConstant(){
  return (getModifiers() & Modifier.ENUM) != 0;
}

private void inferCaller(){
  needToInferCaller=false;
  Throwable throwable=new Throwable();
  boolean lookingForLogger=true;
  for (  final StackTraceElement frame : throwable.getStackTrace()) {
    String cname=frame.getClassName();
    boolean isLoggerImpl=isLoggerImplFrame(cname);
    if (lookingForLogger) {
      if (isLoggerImpl) {
        lookingForLogger=false;
      }
    }
 else {
      if (!isLoggerImpl) {
        if (!cname.startsWith("java.lang.reflect.") && !cname.startsWith("sun.reflect.")) {
          setSourceClassName(cname);
          setSourceMethodName(frame.getMethodName());
          return;
        }
      }
    }
  }
}

final int recordExceptionalCompletion(Throwable ex){
  int s;
  if ((s=status) >= 0) {
    int h=System.identityHashCode(this);
    final ReentrantLock lock=exceptionTableLock;
    lock.lock();
    try {
      expungeStaleExceptions();
      ExceptionNode[] t=exceptionTable;
      int i=h & (t.length - 1);
      for (ExceptionNode e=t[i]; ; e=e.next) {
        if (e == null) {
          t[i]=new ExceptionNode(this,ex,t[i],exceptionTableRefQueue);
          break;
        }
        if (e.get() == this)         break;
      }
    }
  finally {
      lock.unlock();
    }
    s=setCompletion(EXCEPTIONAL);
  }
  return s;
}

private void analyzeResultingTlsContextAndWriteFile(TlsContext tlsContext,String folder,String fieldName,String workflowName,long phase) throws JAXBException, IOException {
  if (TlsContextAnalyzer.containsFullWorkflowWithMissingMessage(tlsContext) || TlsContextAnalyzer.containsServerFinishedWithModifiedHandshake(tlsContext) || TlsContextAnalyzer.containsFullWorkflowWithModifiedMessage(tlsContext)) {
    String fileNameBasic=createFileName(folder,phase,tlsContext,fieldName);
    FileOutputStream fos=new FileOutputStream(fileNameBasic + workflowName + ".xml");
    WorkflowTraceSerializer.write(fos,tlsContext.getWorkflowTrace());
  }
}

private static String toVariableName(String str){
  StringBuffer rtn=new StringBuffer();
  char[] chars=str.toCharArray();
  long changes=0;
  boolean doCorrect=true;
  for (int i=0; i < chars.length; i++) {
    char c=chars[i];
    if (i == 0 && (c >= '0' && c <= '9'))     rtn.append("_" + c);
 else     if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c >= '0' && c <= '9')|| c == '_' || c == '$')     rtn.append(c);
 else {
      doCorrect=false;
      rtn.append('_');
      changes+=(c * (i + 1));
    }
  }
  if (changes > 0)   rtn.append(changes);
  if (doCorrect)   return correctReservedWord(rtn.toString());
  return rtn.toString();
}

public Year(int year){
  if ((year < Year.MINIMUM_YEAR) || (year > Year.MAXIMUM_YEAR)) {
    throw new IllegalArgumentException("Year constructor: year (" + year + ") outside valid range.");
  }
  this.year=(short)year;
  peg(Calendar.getInstance());
}

@SuppressWarnings("unused") public List<String> hostVcenterChangeDetails(URI hostId,URI clusterId,URI datacenterId,boolean isVcenter){
  List<String> result=Lists.newArrayList();
  Host host=_dbClient.queryObject(Host.class,hostId);
  VcenterDataCenter datacenter=_dbClient.queryObject(VcenterDataCenter.class,datacenterId);
  if (host != null && datacenter != null) {
    result.add(ComputeSystemDialogProperties.getMessage("ComputeSystem.hostVcenterChangeDetails",host.getLabel(),datacenter.getLabel()));
    result.addAll(hostClusterChangeDetails(hostId,clusterId,datacenterId,isVcenter));
  }
  return result;
}

public boolean deleteStatement(TestCase test,int position) throws ConstructionFailedException {
  if (!ConstraintVerifier.canDelete(test,position)) {
    return false;
  }
  logger.debug("Deleting target statement - {}",position);
  Set<Integer> toDelete=new LinkedHashSet<>();
  recursiveDeleteInclusion(test,toDelete,position);
  List<Integer> pos=new ArrayList<>(toDelete);
  Collections.sort(pos,Collections.reverseOrder());
  for (  Integer i : pos) {
    logger.debug("Deleting statement: {}",i);
    test.remove(i);
  }
  return true;
}

public boolean isCompound(){
  return splits.size() != 1;
}

@Override public Set<Statement> sum(final IGASState<Set<Statement>,Set<Statement>,Set<Statement>> state,final Set<Statement> left,final Set<Statement> right){
  final Set<Statement> tmp=new LinkedHashSet<Statement>(left);
  tmp.addAll(right);
  return tmp;
}

public void testSignumPositive(){
  String a="92948782094488478231212478987482988429808779810457634781384756794987";
  int aScale=41;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  assertEquals("incorrect value",1,aNumber.signum());
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return HOST;
case 2:
  return PORT;
case 3:
return ID;
case 4:
return V_NODES;
case 5:
return PING_FREQUENCY;
case 6:
return SERVICE_NAME;
case 7:
return STATE;
case 8:
return TIMESTAMP;
default :
return null;
}
}

private static int categorizeByYear2014Method(Context c){
  ArrayList<Integer> componentYears=new ArrayList<Integer>();
  conditionallyAdd(componentYears,getNumCoresYear());
  conditionallyAdd(componentYears,getClockSpeedYear());
  conditionallyAdd(componentYears,getRamYear(c));
  if (componentYears.isEmpty())   return CLASS_UNKNOWN;
  Collections.sort(componentYears);
  if ((componentYears.size() & 0x01) == 1) {
    return componentYears.get(componentYears.size() / 2);
  }
 else {
    int baseIndex=componentYears.size() / 2 - 1;
    return componentYears.get(baseIndex) + (componentYears.get(baseIndex + 1) - componentYears.get(baseIndex)) / 2;
  }
}

public Time(Date time){
  SimpleTimeZone tz=new SimpleTimeZone(0,"Z");
  SimpleDateFormat dateF=new SimpleDateFormat("yyyyMMddHHmmss");
  dateF.setTimeZone(tz);
  String d=dateF.format(time) + "Z";
  int year=Integer.parseInt(d.substring(0,4));
  if (year < 1950 || year > 2049) {
    this.time=new DERGeneralizedTime(d);
  }
 else {
    this.time=new DERUTCTime(d.substring(2));
  }
}

public ActionRequestHelper then(ActionRequestHelper nextAction){
  mNext.add(nextAction);
  return this;
}

protected int[] readColorTable(final int ncolors){
  final int nbytes=3 * ncolors;
  int[] tab=null;
  final byte[] c=new byte[nbytes];
  try {
    rawData.get(c);
    tab=new int[256];
    int i=0;
    int j=0;
    while (i < ncolors) {
      final int r=(c[j++]) & 0xff;
      final int g=(c[j++]) & 0xff;
      final int b=(c[j++]) & 0xff;
      tab[i++]=0xff000000 | (r << 16) | (g << 8)| b;
    }
  }
 catch (  final BufferUnderflowException e) {
    Log.w(TAG,"Format Error Reading Color Table",e);
    status=STATUS_FORMAT_ERROR;
  }
  return tab;
}

public boolean isCurrent(String str){
  if (pos + str.length() > lcText.length)   return false;
  for (int i=str.length() - 1; i >= 0; i--) {
    if (str.charAt(i) != lcText[pos + i])     return false;
  }
  return true;
}

private static String matchablePath(String path){
  if (path == null) {
    return "/";
  }
 else   if (path.endsWith("/")) {
    return path;
  }
 else {
    return path + "/";
  }
}

public void assertUsable() throws IOException {
  if (throwable.get() == null) {
    if (connection == null) {
      throw new IOException("Connection is not open");
    }
    return;
  }
  Throwable t=throwable.get();
  if (t instanceof IOException) {
    throw (IOException)t;
  }
 else {
    throw Throwables.propagate(t);
  }
}

protected static double computeH(final int i,double[] dist_i,double[] pij_i,double mbeta){
  double sumP=0.;
  for (int j=0; j < i; j++) {
    sumP+=(pij_i[j]=Math.exp(dist_i[j] * mbeta));
  }
  for (int j=i + 1; j < dist_i.length; j++) {
    sumP+=(pij_i[j]=Math.exp(dist_i[j] * mbeta));
  }
  if (!(sumP > 0)) {
    return Double.NEGATIVE_INFINITY;
  }
  final double s=1. / sumP;
  double sum=0.;
  for (int j=0; j < dist_i.length; j++) {
    sum+=dist_i[j] * (pij_i[j]*=s);
  }
  return Math.log(sumP) - mbeta * sum;
}

private Collection<Insanity> checkSubreaders(MapOfSets<Integer,CacheEntry> valIdToItems,MapOfSets<ReaderField,Integer> readerFieldToValIds){
  final List<Insanity> insanity=new ArrayList<>(23);
  Map<ReaderField,Set<ReaderField>> badChildren=new HashMap<>(17);
  MapOfSets<ReaderField,ReaderField> badKids=new MapOfSets<>(badChildren);
  Map<Integer,Set<CacheEntry>> viToItemSets=valIdToItems.getMap();
  Map<ReaderField,Set<Integer>> rfToValIdSets=readerFieldToValIds.getMap();
  Set<ReaderField> seen=new HashSet<>(17);
  Set<ReaderField> readerFields=rfToValIdSets.keySet();
  for (  final ReaderField rf : readerFields) {
    if (seen.contains(rf))     continue;
    List<Object> kids=getAllDescendantReaderKeys(rf.readerKey);
    for (    Object kidKey : kids) {
      ReaderField kid=new ReaderField(kidKey,rf.fieldName);
      if (badChildren.containsKey(kid)) {
        badKids.put(rf,kid);
        badKids.putAll(rf,badChildren.get(kid));
        badChildren.remove(kid);
      }
 else       if (rfToValIdSets.containsKey(kid)) {
        badKids.put(rf,kid);
      }
      seen.add(kid);
    }
    seen.add(rf);
  }
  for (  final ReaderField parent : badChildren.keySet()) {
    Set<ReaderField> kids=badChildren.get(parent);
    List<CacheEntry> badEntries=new ArrayList<>(kids.size() * 2);
{
      for (      final Integer value : rfToValIdSets.get(parent)) {
        badEntries.addAll(viToItemSets.get(value));
      }
    }
    for (    final ReaderField kid : kids) {
      for (      final Integer value : rfToValIdSets.get(kid)) {
        badEntries.addAll(viToItemSets.get(value));
      }
    }
    CacheEntry[] badness=new CacheEntry[badEntries.size()];
    badness=badEntries.toArray(badness);
    insanity.add(new Insanity(InsanityType.SUBREADER,"Found caches for descendants of " + parent.toString(),badness));
  }
  return insanity;
}

public static String addProtocolToUrl(String url){
  if (!url.startsWith(HTTP_PROTOCOL_PREFIX) && !url.startsWith(HTTPS_PROTOCOL_PREFIX) && !url.startsWith(FILE_PROTOCOL_PREFIX)) {
    if (url.startsWith(FILE_PREFIX)) {
      url=FILE_PROTOCOL_PREFIX + url;
    }
 else {
      url=HTTP_PROTOCOL_PREFIX + url;
    }
  }
  return url;
}

public XPath(String exprString,SourceLocator locator,PrefixResolver prefixResolver,int type) throws javax.xml.transform.TransformerException {
  this(exprString,locator,prefixResolver,type,null);
}

public static String methodNameToPropertyName(String methodName){
  if (methodName.startsWith("get"))   methodName=methodName.substring(3);
 else   if (methodName.startsWith("set"))   methodName=methodName.substring(3);
 else   if (methodName.startsWith("is"))   methodName=methodName.substring(2);
  if (methodName.length() == 0)   return null;
  char ch=methodName.charAt(0);
  if (Character.isUpperCase(ch) && (methodName.length() == 1 || !Character.isUpperCase(methodName.charAt(1)))) {
    methodName=Character.toLowerCase(ch) + methodName.substring(1);
  }
  return methodName;
}

private StringBuilder createIndent(int indent){
  StringBuilder oneIndent=createIndent();
  StringBuilder ret=new StringBuilder();
  while (indent-- > 0) {
    ret.append(oneIndent);
  }
  return ret;
}

protected ClassLoader(){
  this(getSystemClassLoader());
}

public static void matchvPoolWithStoragePools(VirtualPool vpool,List<StoragePool> pools,DbClient dbClient,CoordinatorClient coordinator,String matcherGroupName,StringBuffer errorMessage){
  List<StoragePool> filterPools=getMatchedPoolWithStoragePools(vpool,pools,VirtualPool.getProtectionSettings(vpool,dbClient),VirtualPool.getRemoteProtectionSettings(vpool,dbClient),VirtualPool.getFileRemoteProtectionSettings(vpool,dbClient),dbClient,coordinator,matcherGroupName,errorMessage);
  updateInvalidAndMatchedPoolsForVpool(vpool,filterPools,pools,dbClient);
}

private static int[] trimArray(int[] array,int size){
  if (size < 0) {
    throw new IllegalArgumentException();
  }
  if (size == 0) {
    return NO_ERRORS;
  }
  int[] a=new int[size];
  System.arraycopy(array,0,a,0,size);
  return a;
}

static <T>boolean removeIf(Iterable<T> removeFrom,Predicate<? super T> predicate){
  if (removeFrom instanceof RandomAccess && removeFrom instanceof List) {
    return removeIfFromRandomAccessList((List<T>)removeFrom,checkNotNull(predicate));
  }
  return Iterators.removeIf(removeFrom.iterator(),predicate);
}

@BeforeClass public static void createEcomConnection(){
  boolean wasException=false;
  try {
    _connection=new EcomConnection(createConnectionInfo(),createListener(),new CimFilterMap());
  }
 catch (  Exception e) {
    wasException=true;
  }
  Assert.assertFalse(wasException);
}

protected void _init(final IDatatypeURIResolver resolver,final ILexiconConfiguration<BigdataValue> config,final Collection<IExtension<? extends BigdataValue>> extensions){
}

public mxRectangle graphModelChanged(mxIGraphModel sender,List<mxUndoableChange> changes,Boolean rv){
  int thresh=getChangesRepaintThreshold();
  boolean ignoreDirty=thresh > 0 && changes.size() > thresh;
  if (!ignoreDirty) {
    Iterator<mxUndoableChange> it=changes.iterator();
    while (it.hasNext()) {
      if (it.next() instanceof mxRootChange) {
        ignoreDirty=true;
        break;
      }
    }
  }
  ArrayList<Object> changedCells=new ArrayList<Object>();
  mxRectangle dirty=processChanges(changes,true,ignoreDirty,changedCells);
  if (!rv) {
    if (changedCells != null) {
      for (      Object changedCell : changedCells) {
        mxCellState parentState=view.getState(model.getParent(changedCell),true);
        view.validate(parentState,changedCell,false);
      }
    }
  }
 else   view.validate();
  if (!ignoreDirty) {
    mxRectangle tmp=processChanges(changes,false,ignoreDirty);
    if (tmp != null) {
      if (dirty == null) {
        dirty=tmp;
      }
 else {
        dirty.add(tmp);
      }
    }
  }
  removeSelectionCells(getRemovedCellsForChanges(changes));
  return dirty;
}

public void testSetBitException(){
  byte aBytes[]={-1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int number=-7;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  try {
    aNumber.setBit(number);
    fail("ArithmeticException has not been caught");
  }
 catch (  ArithmeticException e) {
  }
}

public void guard(final Guard r) throws InterruptedException {
  incThread();
  try {
    r.run();
  }
 catch (  InterruptedException e) {
    throw e;
  }
catch (  Exception e) {
    throw new RuntimeException(e);
  }
 finally {
    decThread();
  }
}

public void log(Date time,String message){
  try {
    PrintWriter w=new PrintWriter(new FileWriter(filename,true));
    w.println("\n\u001b[32m" + format.format(time) + "\u001b[0m "+ message);
    w.close();
  }
 catch (  IOException e) {
  }
}

protected ResourceInfo newElement(int type){
  ResourceInfo result=null;
switch (type) {
case IResource.FILE:
case IResource.FOLDER:
    result=new ResourceInfo(type);
  break;
case IResource.PROJECT:
result=new ResourceInfo(type);
break;
case IResource.ROOT:
result=new ResourceInfo(type);
break;
}
return result;
}

private boolean isModelUseful(ContingencyMatrix cm){
  return true;
}

public void registerPlayerObserver(PlayerEventsObserver observer,boolean replyImmediately){
  if (this.connection == null)   return;
  playerEventsObservers.add(observer);
  if (replyImmediately)   replyWithLastResult(observer);
  if (playerEventsObservers.size() == 1) {
    if (connection.getProtocol() == HostConnection.PROTOCOL_TCP) {
      connection.registerPlayerNotificationsObserver(this,checkerHandler);
      connection.registerSystemNotificationsObserver(this,checkerHandler);
      connection.registerInputNotificationsObserver(this,checkerHandler);
      checkerHandler.post(tcpCheckerRunnable);
    }
 else {
      checkerHandler.post(httpCheckerRunnable);
    }
  }
}

@Override public int numElements() throws Exception {
  if (m_zeroR != null) {
    return 1;
  }
  return m_Tree.numNodes();
}

public boolean isHighlightable(OMGraphic omg){
  return true;
}

public void testVirtualDestinationsDinamicallyIncludedBehavior3() throws Exception {
  final String topic="global.test";
  final String vq="Consumer.foo." + topic;
  startAllBrokers();
  final int msgs1=1001;
  final int msgs2=1456;
  Destination tDest=createDestination(topic,true);
  Destination vqDest=createDestination(vq,false);
  MessageConsumer clientB1t=createConsumer("BrokerA",tDest);
  MessageConsumer clientB2t=createConsumer("BrokerB",tDest);
  MessageConsumer clientB1vq=createConsumer("BrokerA",vqDest);
  Thread.sleep(2 * 1000);
  sendMessages("BrokerA",tDest,msgs1);
  sendMessages("BrokerB",tDest,msgs2);
  Thread.sleep(5000);
  MessageIdList msgsB1t=getConsumerMessages("BrokerA",clientB1t);
  msgsB1t.waitForMessagesToArrive(msgs1 + msgs2);
  assertEquals(msgs1 + msgs2,msgsB1t.getMessageCount());
  MessageIdList msgsB2t=getConsumerMessages("BrokerB",clientB2t);
  msgsB2t.waitForMessagesToArrive(msgs1 + msgs2);
  assertEquals(msgs1 + msgs2,msgsB2t.getMessageCount());
  MessageIdList msgsB1vq=getConsumerMessages("BrokerA",clientB1vq);
  msgsB1vq.waitForMessagesToArrive(msgs1 + msgs2);
  assertEquals(msgs1 + msgs2,msgsB1vq.getMessageCount());
  assertEquals(0,getQueueSize("BrokerA",(ActiveMQDestination)vqDest));
  assertEquals(0,getQueueSize("BrokerB",(ActiveMQDestination)vqDest));
  destroyAllBrokers();
}

public RpcClient peerWith(PeerInfo serverInfo,Bootstrap bootstrap,Map<String,Object> attributes) throws IOException {
  InetSocketAddress remoteAddress=new InetSocketAddress(serverInfo.getHostName(),serverInfo.getPort());
  return peerWith(remoteAddress,bootstrap,attributes);
}

public GridReversedLinesFileReader(final File file,final int blockSize,final String encoding) throws IOException {
  this(file,blockSize,Charset.forName(encoding));
}

private void beforeName() throws IOException {
  int context=peek();
  if (context == NONEMPTY_OBJECT) {
    out.write(',');
  }
 else   if (context != EMPTY_OBJECT) {
    throw new IllegalStateException("Nesting problem.");
  }
  newline();
  replaceTop(DANGLING_NAME);
}

protected String constName(){
  return "ZZ_" + name.toUpperCase();
}

public boolean isTimestampWithinInterval(DateTime timestamp,String intervalString) throws IllegalArgumentException {
  Interval interval=Interval.parse(intervalString);
  return interval.contains(timestamp);
}

private void processAnsiOsCommand(){
  if (ansiOsCommand.charAt(0) != '0' || ansiOsCommand.charAt(1) != ';') {
    Logger.log("Ignoring unsupported ANSI OSC sequence: '" + ansiOsCommand + "'");
    return;
  }
}

private void addToRenaming(Renaming renaming,HashSet<String> prevDeclared,ExprNode expr){
  if (!(expr instanceof OpApplNode)) {
    return;
  }
  HashSet<String> newDeclared=(HashSet<String>)prevDeclared.clone();
  OpApplNode node=(OpApplNode)expr;
  if (node.getUnbdedQuantSymbols() != null) {
    for (int i=0; i < node.getUnbdedQuantSymbols().length; i++) {
      FormalParamNode id=node.getUnbdedQuantSymbols()[i];
      if (newDeclared.contains(getCurrentName(id,renaming))) {
        String newname=getNewName(id,newDeclared,renaming);
        newDeclared.add(newname);
        addCurrentName(id,newname,renaming);
      }
    }
  }
  if (node.getBdedQuantSymbolLists() != null) {
    for (int i=0; i < node.getBdedQuantSymbolLists().length; i++) {
      addToRenaming(renaming,prevDeclared,node.getBdedQuantBounds()[i]);
      FormalParamNode[] nodeList=node.getBdedQuantSymbolLists()[i];
      for (int j=0; j < nodeList.length; j++) {
        FormalParamNode id=nodeList[j];
        if (newDeclared.contains(getCurrentName(id,renaming))) {
          String newname=getNewName(id,newDeclared,renaming);
          newDeclared.add(newname);
          addCurrentName(id,newname,renaming);
        }
      }
    }
  }
  for (int i=0; i < node.getArgs().length; i++) {
    if (node.getArgs()[i] instanceof ExprNode) {
      addToRenaming(renaming,newDeclared,(ExprNode)node.getArgs()[i]);
    }
  }
}

private LinkedList<Diff> diff_lineMode(String text1,String text2,long deadline){
  LinesToCharsResult b=diff_linesToChars(text1,text2);
  text1=b.chars1;
  text2=b.chars2;
  List<String> linearray=b.lineArray;
  LinkedList<Diff> diffs=diff_main(text1,text2,false,deadline);
  diff_charsToLines(diffs,linearray);
  diff_cleanupSemantic(diffs);
  diffs.add(new Diff(Operation.EQUAL,""));
  int count_delete=0;
  int count_insert=0;
  String text_delete="";
  String text_insert="";
  ListIterator<Diff> pointer=diffs.listIterator();
  Diff thisDiff=pointer.next();
  while (thisDiff != null) {
switch (thisDiff.operation) {
case INSERT:
      count_insert++;
    text_insert+=thisDiff.text;
  break;
case DELETE:
count_delete++;
text_delete+=thisDiff.text;
break;
case EQUAL:
if (count_delete >= 1 && count_insert >= 1) {
pointer.previous();
for (int j=0; j < count_delete + count_insert; j++) {
pointer.previous();
pointer.remove();
}
for (Diff newDiff : diff_main(text_delete,text_insert,false,deadline)) {
pointer.add(newDiff);
}
}
count_insert=0;
count_delete=0;
text_delete="";
text_insert="";
break;
}
thisDiff=pointer.hasNext() ? pointer.next() : null;
}
diffs.removeLast();
return diffs;
}

public boolean removeTriggerGroupToNeverDelete(String group){
  if (group != null)   return triggerGroupsToNeverDelete.remove(group);
  return false;
}

public void remove(Rule rule){
  rules.remove(rule);
}

private boolean uploadAllTrackPoints(Fusiontables fusiontables,String tableId,Track track) throws IOException {
  int numberOfPoints=track.getNumberOfPoints();
  List<Location> locations=new ArrayList<Location>(MAX_POINTS_PER_UPLOAD);
  Location lastValidLocation=null;
  boolean sentStartMarker=false;
  int readCount=0;
  LocationIterator locationIterator=null;
  try {
    locationIterator=myTracksProviderUtils.getTrackPointLocationIterator(trackId,-1L,false,MyTracksProviderUtils.DEFAULT_LOCATION_FACTORY);
    while (locationIterator.hasNext()) {
      Location location=locationIterator.next();
      locations.add(location);
      if (LocationUtils.isValidLocation(location)) {
        lastValidLocation=location;
      }
      if (!sentStartMarker && lastValidLocation != null) {
        String name=context.getString(R.string.marker_label_start,track.getName());
        createNewPoint(fusiontables,tableId,name,"",lastValidLocation,MARKER_TYPE_START);
        sentStartMarker=true;
      }
      readCount++;
      if (readCount % MAX_POINTS_PER_UPLOAD == 0) {
        if (!prepareAndUploadPoints(fusiontables,tableId,track,locations,false)) {
          Log.d(TAG,"Unable to upload points");
          return false;
        }
        updateProgress(readCount,numberOfPoints);
        locations.clear();
      }
    }
    if (!prepareAndUploadPoints(fusiontables,tableId,track,locations,true)) {
      Log.d(TAG,"Unable to upload points");
      return false;
    }
    if (lastValidLocation != null) {
      String name=context.getString(R.string.marker_label_end,track.getName());
      DescriptionGenerator descriptionGenerator=new DescriptionGeneratorImpl(context);
      String description=descriptionGenerator.generateTrackDescription(track,null,null,true);
      createNewPoint(fusiontables,tableId,name,description,lastValidLocation,MARKER_TYPE_END);
    }
    return true;
  }
  finally {
    if (locationIterator != null) {
      locationIterator.close();
    }
  }
}

@CheckReturnValue @Deprecated @Nonnull public static String join(@Nonnull String[] s,@Nonnull String delimiter){
  StringBuilder buffer=new StringBuilder();
  for (int i=0; i < s.length; i++) {
    buffer.append(s[i]);
    if (i < s.length - 1) {
      buffer.append(delimiter);
    }
  }
  return buffer.toString();
}

private void initSelectPosition(int position){
  if (mSelectMode == ISelectable.SELECT_MODE_SINGLE) {
    if (mSelectedPosition == ISelectable.INVALID_POSITION) {
      mSelectedPosition=position;
    }
  }
 else   if (mSelectMode == ISelectable.SELECT_MODE_MULTI) {
    if (!mSelectedPositions.contains(position))     mSelectedPositions.add(position);
  }
 else {
    throw new RuntimeException();
  }
}

@Override public PathImpl schemeWalk(String userPath,Map<String,Object> attributes,String filePath,int offset){
  if (!isWindows()) {
    return super.schemeWalk(userPath,attributes,filePath,offset);
  }
  String canonicalPath;
  if (filePath.length() < offset + 2) {
    return super.schemeWalk(userPath,attributes,filePath,offset);
  }
  char ch1=filePath.charAt(offset + 1);
  char ch2=filePath.charAt(offset);
  if ((ch2 == '/' || ch2 == _separatorChar) && (ch1 == '/' || ch1 == _separatorChar))   return super.schemeWalk(userPath,attributes,convertFromWindowsPath(filePath.substring(offset)),0);
 else   return super.schemeWalk(userPath,attributes,filePath,offset);
}

void initProperties(String defaultLevel,String defaultFilter,String defaultFormatter,String defaultEncoding){
  LogManager manager=LogManager.getLogManager();
  final String filterName=manager.getProperty(prefix + ".filter");
  if (filterName != null) {
    try {
      filter=(Filter)getCustomizeInstance(filterName);
    }
 catch (    Exception e1) {
      printInvalidPropMessage("filter",filterName,e1);
      filter=(Filter)getDefaultInstance(defaultFilter);
    }
  }
 else {
    filter=(Filter)getDefaultInstance(defaultFilter);
  }
  String levelName=manager.getProperty(prefix + ".level");
  if (levelName != null) {
    try {
      level=Level.parse(levelName);
    }
 catch (    Exception e) {
      printInvalidPropMessage("level",levelName,e);
      level=Level.parse(defaultLevel);
    }
  }
 else {
    level=Level.parse(defaultLevel);
  }
  final String formatterName=manager.getProperty(prefix + ".formatter");
  if (formatterName != null) {
    try {
      formatter=(Formatter)getCustomizeInstance(formatterName);
    }
 catch (    Exception e) {
      printInvalidPropMessage("formatter",formatterName,e);
      formatter=(Formatter)getDefaultInstance(defaultFormatter);
    }
  }
 else {
    formatter=(Formatter)getDefaultInstance(defaultFormatter);
  }
  final String encodingName=manager.getProperty(prefix + ".encoding");
  try {
    internalSetEncoding(encodingName);
  }
 catch (  UnsupportedEncodingException e) {
    printInvalidPropMessage("encoding",encodingName,e);
  }
}

public static void writeUnsignedVL(long data,DataOutput out) throws IOException {
  while (true) {
    if ((data & ~0x7FL) == 0) {
      out.writeByte((int)data);
      return;
    }
 else {
      out.writeByte(((int)data & 0x7F) | 0x80);
      data>>>=7;
    }
  }
}

public JSONArray names(){
  JSONArray ja=new JSONArray();
  Iterator keys=keys();
  while (keys.hasNext()) {
    ja.put(keys.next());
  }
  return ja.length() == 0 ? null : ja;
}

public void addTableWithAlias(String table,String alias){
  QueryTableData tableData=new QueryTableData();
  tableData.setTableName(table);
  tableData.setTableAlias(alias);
  tableData.setTableIndex(_tablesData.size());
  _tablesData.add(tableData);
  if (alias == null)   tables.put(table,tableData);
 else {
    tables.put(alias,tableData);
    tables.put(table,tableData);
  }
}

private int encryptBlock(byte[] in,int inOff,byte[] out,int outOff) throws DataLengthException, IllegalStateException {
  if ((inOff + blockSize) > in.length) {
    throw new DataLengthException("input buffer too short");
  }
  for (int i=0; i < blockSize; i++) {
    cbcV[i]^=in[inOff + i];
  }
  int length=cipher.processBlock(cbcV,0,out,outOff);
  System.arraycopy(out,outOff,cbcV,0,cbcV.length);
  return length;
}

private void renderAxes(Camera camera){
  glPushMatrix();
  glLoadIdentity();
  float rotX=camera.getRotation().x;
  float rotY=camera.getRotation().y;
  float rotZ=0;
  glRotatef(rotX,1.0f,0.0f,0.0f);
  glRotatef(rotY,0.0f,1.0f,0.0f);
  glRotatef(rotZ,0.0f,0.0f,1.0f);
  glLineWidth(2.0f);
  glBegin(GL_LINES);
  glColor3f(1.0f,0.0f,0.0f);
  glVertex3f(0.0f,0.0f,0.0f);
  glVertex3f(1.0f,0.0f,0.0f);
  glColor3f(0.0f,1.0f,0.0f);
  glVertex3f(0.0f,0.0f,0.0f);
  glVertex3f(0.0f,1.0f,0.0f);
  glColor3f(1.0f,1.0f,1.0f);
  glVertex3f(0.0f,0.0f,0.0f);
  glVertex3f(0.0f,0.0f,1.0f);
  glEnd();
  glPopMatrix();
}

@Override public Object clone() throws CloneNotSupportedException {
  PeriodAxisLabelInfo clone=(PeriodAxisLabelInfo)super.clone();
  return clone;
}

public long skip(long n) throws IOException {
  if (n < 0) {
    throw new IllegalArgumentException("negative skip length");
  }
  ensureOpen();
  int max=(int)Math.min(n,Integer.MAX_VALUE);
  int total=0;
  while (total < max) {
    int len=max - total;
    if (len > tmpbuf.length) {
      len=tmpbuf.length;
    }
    len=read(tmpbuf,0,len);
    if (len == -1) {
      entryEOF=true;
      break;
    }
    total+=len;
  }
  return total;
}

private Path convertPath(Path path) throws Exception {
  if (mode != PROXY)   return path;
 else {
    URI secondaryUri=new URI(SECONDARY_URI);
    URI pathUri=path.toUri();
    return new Path(new URI(pathUri.getScheme() != null ? secondaryUri.getScheme() : null,pathUri.getAuthority() != null ? secondaryUri.getAuthority() : null,pathUri.getPath(),null,null));
  }
}

private static String joinArray(String[] array,String delimiter){
  StringBuffer buffer=new StringBuffer();
  for (int index=0; index < array.length; index++) {
    buffer.append(array[index]);
    if (index < array.length - 1) {
      buffer.append(delimiter);
    }
  }
  return buffer.toString();
}

private void outputPartners(Properties ctx,PrintWriter out,int partnerID,boolean includeAny){
  out.println("<partners>");
  if (includeAny) {
    out.println("<partner id='-1'");
    if (partnerID == 0)     out.println(" selected='selected'");
    out.println(">ANY</partner>");
  }
  for (  MBPartner partner : getAllPartners(ctx)) {
    out.print("<partner id='" + partner.get_ID() + "'");
    if (partnerID == partner.get_ID())     out.print(" selected='selected'");
    out.println(">" + Util.maskHTML(partner.getName()) + "</partner>");
  }
  out.println("</partners>");
}

public void stop(){
  mCancel=true;
  if (mRunning.compareAndSet(true,false)) {
    if (mSampleDispatcherTask != null) {
      mSampleDispatcherTask.cancel(true);
      mFilledBuffers.clear();
    }
  }
}

public ChessSquare(Composite parent,ChessBoard chessBoard,int id,boolean isLight){
  super(parent,SWT.DOUBLE_BUFFERED | SWT.NO_BACKGROUND);
  board=chessBoard;
  this.id=id;
  this.isLight=isLight;
  addPaintListener(paintListener);
  addControlListener(controlListener);
  addMouseListener(mouseListener);
  addListener(SWT.MouseWheel,mouseWheelListener);
  addListener(SWT.MouseDown,dndListener);
  addListener(SWT.MouseUp,dndListener);
}

@Override protected void stopService(){
  Thread t=keepAliveThread;
  keepAliveThread=null;
  if (t != null) {
    t.interrupt();
  }
}

public static int truncatedCompareTo(final Calendar cal1,final Calendar cal2,final int field){
  final Calendar truncatedCal1=truncate(cal1,field);
  final Calendar truncatedCal2=truncate(cal2,field);
  return truncatedCal1.compareTo(truncatedCal2);
}

public boolean isPortUsable(StoragePort storagePort){
  return isPortUsable(storagePort,true);
}

public boolean isExpired(){
  return this.ttl < System.currentTimeMillis();
}

@Override public void actionPerformed(ActionEvent event){
  String command=event.getActionCommand();
  if (command.equals("SelectFont")) {
    attemptFontSelection();
  }
 else   if (command.equals("SelectPaint")) {
    attemptPaintSelection();
  }
 else   if (command.equals("ShowTitle")) {
    attemptModifyShowTitle();
  }
}

void removeAttributeValues(String attrName,Set values) throws SMSException {
  if (attrName != null) {
    Map attrs=getAttributes();
    Set origValues=(Set)attrs.get(attrName);
    if (origValues != null && !origValues.isEmpty()) {
      Set newValues=new HashSet(origValues);
      newValues.removeAll(values);
      if (newValues.isEmpty()) {
        removeAttribute(attrName);
      }
 else {
        Map newAttrs=new HashMap();
        newAttrs.put(attrName,newValues);
        setAttributes(newAttrs);
      }
    }
  }
}

private static boolean checkContentCharacters(String chars) throws CharConversionException {
  boolean escape=false;
  for (int i=0; i < chars.length(); i++) {
    char ch=chars.charAt(i);
    if (ch <= 93) {
switch (ch) {
case 0x9:
case 0xA:
case 0xD:
        continue;
case '>':
      if (escape) {
        continue;
      }
    escape=(i > 0) && (chars.charAt(i - 1) == ']');
  continue;
case '<':
case '&':
escape=true;
continue;
default :
if (ch < 0x20) {
throw new CharConversionException("Invalid XML character &#" + ((int)ch) + ";.");
}
}
}
}
return escape == false;
}

public void testFindAppDeployments() throws Exception {
  WAR war=createWar();
  testConfigWar();
  List<Element> l=deployer.selectAppDeployments(war,domain);
  assertEquals(1,l.size());
  deployer.removeDeployableFromDomain(war,domain);
  l=deployer.selectAppDeployments(war,domain);
  assertEquals(0,l.size());
}

@Override public void drawTop(final Graphics2D g2d){
  final Rectangle r=getArea();
  if (isContained()) {
    r.setLocation(0,0);
  }
 else {
    if (!isOnScreen(g2d,r)) {
      return;
    }
  }
  final Composite oldComposite=g2d.getComposite();
  try {
    g2d.setComposite(entityComposite);
    drawTop(g2d,r.x,r.y,r.width,r.height);
  }
  finally {
    g2d.setComposite(oldComposite);
  }
}

protected void initDebug(){
  setDebug((getInitParameter("debug") == null) ? false : Boolean.valueOf(getInitParameter("debug")));
}

protected void indexNulls(InputStream is,long ptr,List<Entry> entries){
  boolean moreRecords=true;
  byte rHdr[]=new byte[SHAPE_RECORD_HEADER_LENGTH];
  int result;
  int nRecords=0;
  int recLengthWords, recLengthBytes;
  long recOffset;
  int recBufSize=20;
  byte recBuf[]=new byte[recBufSize];
  double x;
  double y;
  try {
    while (moreRecords) {
      result=is.read(rHdr,0,SHAPE_RECORD_HEADER_LENGTH);
      if (result < 0) {
        moreRecords=false;
        if (logger.isLoggable(Level.FINE)) {
          logger.fine("Found " + nRecords + " records");
          logger.fine("recBufSize = " + recBufSize);
        }
      }
 else {
        nRecords++;
        recOffset=ptr;
        readBEInt(rHdr,0);
        recLengthWords=readBEInt(rHdr,4);
        recLengthBytes=recLengthWords * 2;
        if (recLengthBytes > recBufSize) {
          if (logger.isLoggable(Level.FINE)) {
            logger.fine("Shapefile SpatialIndex increasing recBufSize to " + recLengthBytes);
          }
          recBufSize=recLengthBytes;
          recBuf=new byte[recBufSize];
        }
        result=is.read(recBuf,0,recLengthBytes);
        x=0;
        y=0;
        ptr+=recLengthBytes + 8;
        Entry entry=new Entry(x,y,x,y,(int)recOffset);
        entries.add(entry);
      }
    }
  }
 catch (  java.io.IOException e) {
    e.printStackTrace();
  }
 finally {
    try {
      is.close();
    }
 catch (    java.io.IOException e) {
    }
  }
}

protected static RpcPair resolveRpcPair(ASTNode node,PeerTypeResolver peerResolver){
  MethodDeclaration methodDecl=ASTResolving.findParentMethodDeclaration(node);
  TypeDeclaration typeDecl=(TypeDeclaration)ASTResolving.findAncestor(node,ASTNode.TYPE_DECLARATION);
  assert (typeDecl != null);
  IType dstType=peerResolver.getPeerType(typeDecl);
  if (dstType == null) {
    return null;
  }
  CompilationUnit astRoot=ASTResolving.createQuickFixAST(dstType.getCompilationUnit(),null);
  TypeDeclaration dstTypeDecl=JavaASTUtils.findTypeDeclaration(astRoot,dstType.getFullyQualifiedName('.'));
  if (dstTypeDecl == null) {
    return null;
  }
  return new RpcPair(typeDecl,methodDecl,dstTypeDecl);
}

public static void assertEquals(FieldMatrix<? extends FieldElement<?>> expected,FieldMatrix<? extends FieldElement<?>> observed){
  Assert.assertNotNull("Observed should not be null",observed);
  if (expected.getColumnDimension() != observed.getColumnDimension() || expected.getRowDimension() != observed.getRowDimension()) {
    StringBuilder messageBuffer=new StringBuilder();
    messageBuffer.append("Observed has incorrect dimensions.");
    messageBuffer.append("\nobserved is " + observed.getRowDimension() + " x "+ observed.getColumnDimension());
    messageBuffer.append("\nexpected " + expected.getRowDimension() + " x "+ expected.getColumnDimension());
    Assert.fail(messageBuffer.toString());
  }
  for (int i=0; i < expected.getRowDimension(); ++i) {
    for (int j=0; j < expected.getColumnDimension(); ++j) {
      FieldElement<?> eij=expected.getEntry(i,j);
      FieldElement<?> oij=observed.getEntry(i,j);
      Assert.assertEquals(eij,oij);
    }
  }
}

public void addAddition(String addition){
  additions.add(addition);
}

private void startNewTransition(){
  if (!hasBounds()) {
    throw new UnsupportedOperationException("Can't start transition if the " + "drawable has no bounds!");
  }
  mCurrentTrans=mTransGen.generateNextTransition(mDrawableRect,mViewportRect);
  mElapsedTime=0;
  mLastFrameTime=System.currentTimeMillis();
  fireTransitionStart(mCurrentTrans);
}

protected void rotateOrthogonal(){
  active.setRotation(active.getRotation() + 1,this);
  error.setRotation(error.getRotation() + 1,this);
  displayState();
  repaint();
}

private String convertToElementName(String attributeName){
  return attributeName.replace(' ','_');
}

private boolean hasOtherMapAndReduceParentNode(Lop tmpNode,ArrayList<Lop> nodeList,Lop node){
  if (tmpNode.getExecLocation() == ExecLocation.MapAndReduce)   return true;
  for (  Lop n : tmpNode.getOutputs()) {
    if (nodeList.contains(n) && isChild(n,node,IDMap)) {
      if (!n.equals(node) && n.getExecLocation() == ExecLocation.MapAndReduce)       return true;
 else       return hasOtherMapAndReduceParentNode(n,nodeList,node);
    }
  }
  return false;
}

public synchronized void add(double value){
  add(mCategories.size() + "",value);
}

@Nullable String findLongestNamePrefix(Node name,Set<String> namespaces){
  if (namespaces.contains(name.getQualifiedName())) {
    return name.getQualifiedName();
  }
 else   if (name.isGetProp()) {
    return findLongestNamePrefix(name.getFirstChild(),namespaces);
  }
  return null;
}

public static LogWriter createLogWriter(final Properties properties){
  Properties nonDefault=properties;
  if (nonDefault == null) {
    nonDefault=new Properties();
  }
  DistributedTestUtils.addHydraProperties(nonDefault);
  DistributionConfig dc=new DistributionConfigImpl(nonDefault);
  LogWriter logger=LogWriterFactory.createLogWriterLogger(false,false,dc,false);
  nonDefault.put(DistributionConfig.LOG_WRITER_NAME,logger);
  return logger;
}

public int session(){
  return Integer.parseInt(fields[5]);
}

public ReflectiveProperty(Class<T> propertyHolder,Class<V> valueType,String name){
  super(valueType,name);
  char firstLetter=Character.toUpperCase(name.charAt(0));
  String theRest=name.substring(1);
  String capitalizedName=firstLetter + theRest;
  String getterName=PREFIX_GET + capitalizedName;
  try {
    mGetter=propertyHolder.getMethod(getterName,(Class<?>[])null);
  }
 catch (  NoSuchMethodException e) {
    try {
      mGetter=propertyHolder.getDeclaredMethod(getterName,(Class<?>[])null);
      mGetter.setAccessible(true);
    }
 catch (    NoSuchMethodException e2) {
      getterName=PREFIX_IS + capitalizedName;
      try {
        mGetter=propertyHolder.getMethod(getterName,(Class<?>[])null);
      }
 catch (      NoSuchMethodException e3) {
        try {
          mGetter=propertyHolder.getDeclaredMethod(getterName,(Class<?>[])null);
          mGetter.setAccessible(true);
        }
 catch (        NoSuchMethodException e4) {
          try {
            mField=propertyHolder.getField(name);
            Class fieldType=mField.getType();
            if (!typesMatch(valueType,fieldType)) {
              throw new NoSuchPropertyException("Underlying type (" + fieldType + ") "+ "does not match Property type ("+ valueType+ ")");
            }
            return;
          }
 catch (          NoSuchFieldException e5) {
            throw new NoSuchPropertyException("No accessor method or field found for" + " property with name " + name);
          }
        }
      }
    }
  }
  Class getterType=mGetter.getReturnType();
  if (!typesMatch(valueType,getterType)) {
    throw new NoSuchPropertyException("Underlying type (" + getterType + ") "+ "does not match Property type ("+ valueType+ ")");
  }
  String setterName=PREFIX_SET + capitalizedName;
  try {
    mSetter=propertyHolder.getDeclaredMethod(setterName,getterType);
    mSetter.setAccessible(true);
  }
 catch (  NoSuchMethodException ignored) {
  }
}

private void writePhotoOverlay(String name,String category,String description,String styleName,Location location,String photoUrl,float heading){
  if (location != null) {
    printWriter.println("<PhotoOverlay>");
    printWriter.println("<name>" + StringUtils.formatCData(name) + "</name>");
    printWriter.println("<description>" + StringUtils.formatCData(description) + "</description>");
    printWriter.print("<Camera>");
    printWriter.print("<longitude>" + location.getLongitude() + "</longitude>");
    printWriter.print("<latitude>" + location.getLatitude() + "</latitude>");
    printWriter.print("<altitude>20</altitude>");
    printWriter.print("<heading>" + heading + "</heading>");
    printWriter.print("<tilt>90</tilt>");
    printWriter.println("</Camera>");
    printWriter.println("<TimeStamp><when>" + StringUtils.formatDateTimeIso8601(location.getTime()) + "</when></TimeStamp>");
    printWriter.println("<styleUrl>#" + styleName + "</styleUrl>");
    writeCategory(category);
    if (playTrack) {
      printWriter.println("<Icon><href>" + Uri.decode(photoUrl) + "</href></Icon>");
    }
 else {
      Uri uri=Uri.parse(photoUrl);
      printWriter.println("<Icon><href>" + KmzTrackExporter.KMZ_IMAGES_DIR + File.separatorChar+ uri.getLastPathSegment()+ "</href></Icon>");
    }
    printWriter.print("<ViewVolume>");
    printWriter.print("<near>10</near>");
    printWriter.print("<leftFov>-60</leftFov>");
    printWriter.print("<rightFov>60</rightFov>");
    printWriter.print("<bottomFov>-45</bottomFov>");
    printWriter.print("<topFov>45</topFov>");
    printWriter.println("</ViewVolume>");
    printWriter.println("<Point>");
    printWriter.println("<coordinates>" + getCoordinates(location,",") + "</coordinates>");
    printWriter.println("</Point>");
    printWriter.println("</PhotoOverlay>");
  }
}

public boolean onBackPressed(){
  if (doesDrawerExist()) {
    if (mDrawer.isDrawerVisible(Gravity.START)) {
      mDrawer.closeDrawer(Gravity.START);
      return true;
    }
  }
  if (mContentView.onBackPressed())   return true;
  if (!mStateStack.empty()) {
    mStateStack.pop();
    if (!mStateStack.empty()) {
      setState(mStateStack.pop());
      return true;
    }
  }
  return false;
}

public void simulateMethod(SootMethod method,ReferenceVariable thisVar,ReferenceVariable returnVar,ReferenceVariable params[]){
  String subSignature=method.getSubSignature();
  if (subSignature.equals("java.lang.ClassLoader latestUserDefinedLoader()")) {
    java_io_ObjectInputStream_latestUserDefinedLoader(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.Object allocateNewObject(java.lang.Class,java.lang.Class)")) {
    java_io_ObjectInputStream_allocateNewObject(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.Object allocateNewArray(java.lang.Class,int)")) {
    java_io_ObjectInputStream_allocateNewArray(method,thisVar,returnVar,params);
    return;
  }
 else {
    defaultMethod(method,thisVar,returnVar,params);
    return;
  }
}

public NodeSetDTM(NodeIterator iterator,XPathContext xctxt){
  super();
  Node node;
  m_manager=xctxt.getDTMManager();
  while (null != (node=iterator.nextNode())) {
    int handle=xctxt.getDTMHandleFromNode(node);
    addNodeInDocOrder(handle,xctxt);
  }
}

public ShardIterator onlyNodeSelectorActiveInitializingShardsIt(String nodeAttribute,DiscoveryNodes discoveryNodes){
  ArrayList<ShardRouting> ordered=new ArrayList<>(activeShards.size() + allInitializingShards.size());
  Set<String> selectedNodes=Sets.newHashSet(discoveryNodes.resolveNodesIds(nodeAttribute));
  for (  ShardRouting shardRouting : activeShards) {
    if (selectedNodes.contains(shardRouting.currentNodeId())) {
      ordered.add(shardRouting);
    }
  }
  for (  ShardRouting shardRouting : allInitializingShards) {
    if (selectedNodes.contains(shardRouting.currentNodeId())) {
      ordered.add(shardRouting);
    }
  }
  if (ordered.isEmpty()) {
    throw new IllegalArgumentException("No data node with critera [" + nodeAttribute + "] found");
  }
  return new PlainShardIterator(shardId,ordered);
}

private void checkChanges(){
  settings.clearMovieNfoFilenames();
  if (cbMovieNfoFilename1.isSelected()) {
    settings.addMovieNfoFilename(MovieNfoNaming.FILENAME_NFO);
  }
  if (cbMovieNfoFilename2.isSelected()) {
    settings.addMovieNfoFilename(MovieNfoNaming.MOVIE_NFO);
  }
  if (cbMovieNfoFilename3.isSelected()) {
    settings.addMovieNfoFilename(MovieNfoNaming.DISC_NFO);
  }
  CertificationStyleWrapper wrapper=(CertificationStyleWrapper)cbCertificationStyle.getSelectedItem();
  if (wrapper != null && settings.getMovieCertificationStyle() != wrapper.style) {
    settings.setMovieCertificationStyle(wrapper.style);
  }
}

XMenuItemPeer[] copyItems(){
synchronized (getMenuTreeLock()) {
    return (XMenuItemPeer[])items.toArray(new XMenuItemPeer[]{});
  }
}

public byte receiveOneByte(){
  Log.d(TAG,"receiveOneByte() entrance");
  try {
    acquireLock();
    mServerSocket.receive(mReceivePacket);
    Log.d(TAG,"receive: " + (0 + mReceivePacket.getData()[0]));
    return mReceivePacket.getData()[0];
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  return Byte.MIN_VALUE;
}

public static void connectionClosed(){
  numConnections.getAndDecrement();
}

public static String buildChatSDP(String ipAddress,int localPort,String protocol,String acceptTypes,String wrapperTypes,String setup,String path,String direction){
  return buildSDP(ipAddress,localPort,protocol,acceptTypes,wrapperTypes,null,null,null,setup,path,direction,null,0);
}

int[] determineDimensions(int sourceCodeWords,int errorCorrectionCodeWords) throws WriterException {
  float ratio=0.0f;
  int[] dimension=null;
  for (int cols=minCols; cols <= maxCols; cols++) {
    int rows=calculateNumberOfRows(sourceCodeWords,errorCorrectionCodeWords,cols);
    if (rows < minRows) {
      break;
    }
    if (rows > maxRows) {
      continue;
    }
    float newRatio=((17 * cols + 69) * DEFAULT_MODULE_WIDTH) / (rows * HEIGHT);
    if (dimension != null && Math.abs(newRatio - PREFERRED_RATIO) > Math.abs(ratio - PREFERRED_RATIO)) {
      continue;
    }
    ratio=newRatio;
    dimension=new int[]{cols,rows};
  }
  if (dimension == null) {
    int rows=calculateNumberOfRows(sourceCodeWords,errorCorrectionCodeWords,minCols);
    if (rows < minRows) {
      dimension=new int[]{minCols,minRows};
    }
  }
  if (dimension == null) {
    throw new WriterException("Unable to fit message in columns");
  }
  return dimension;
}

private static void s_ucumm(SparseBlock a,double[] agg,double[] c,int m,int n,int rl,int ru){
  double[] cprod=(agg != null) ? agg : new double[n];
  if (agg == null)   Arrays.fill(cprod,1);
  int[] cnt=new int[n];
  for (int i=rl, ix=rl * n; i < ru; i++, ix+=n) {
    if (!a.isEmpty(i)) {
      int apos=a.pos(i);
      int alen=a.size(i);
      int[] aix=a.indexes(i);
      double[] avals=a.values(i);
      productAgg(avals,cprod,aix,apos,0,alen);
      countAgg(avals,cnt,aix,apos,alen);
    }
    for (int j=0; j < n; j++)     if (cnt[j] < i + 1)     cprod[j]*=0;
    System.arraycopy(cprod,0,c,ix,n);
  }
}

public static DataDisplayTable listFontMetrics(Font font){
  String[] header={"Name","Value"};
  Align[] displayAlignment={Align.Left,Align.Left};
  DataDisplayTable table=new DataDisplayTable(Arrays.asList(header));
  table.setAlignment(Arrays.asList(displayAlignment));
  FontHeaderTable headTable=(FontHeaderTable)FontUtils.getTable(font,Tag.head);
  HorizontalHeaderTable hheaTable=(HorizontalHeaderTable)FontUtils.getTable(font,Tag.hhea);
  OS2Table os2Table=(OS2Table)FontUtils.getTable(font,Tag.OS_2);
  table.add(Arrays.asList(new String[]{"Units per em",String.format("%d",headTable.unitsPerEm())}));
  table.add(Arrays.asList(new String[]{"[xMin, xMax]",String.format("[%d, %d]",headTable.xMin(),headTable.xMax())}));
  table.add(Arrays.asList(new String[]{"[yMin, yMax]",String.format("[%d, %d]",headTable.yMin(),headTable.yMax())}));
  table.add(Arrays.asList(new String[]{"Smallest readable size (px per em)",String.format("%d",headTable.lowestRecPPEM())}));
  table.add(Arrays.asList(new String[]{"hhea ascender",String.format("%d",hheaTable.ascender())}));
  table.add(Arrays.asList(new String[]{"hhea descender",String.format("%d",hheaTable.descender())}));
  table.add(Arrays.asList(new String[]{"hhea typographic line gap",String.format("%d",hheaTable.lineGap())}));
  table.add(Arrays.asList(new String[]{"OS/2 Windows ascender",String.format("%d",os2Table.usWinAscent())}));
  table.add(Arrays.asList(new String[]{"OS/2 Windows descender",String.format("%d",os2Table.usWinDescent())}));
  table.add(Arrays.asList(new String[]{"OS/2 typographic ascender",String.format("%d",os2Table.sTypoAscender())}));
  table.add(Arrays.asList(new String[]{"OS/2 typographic ascender",String.format("%d",os2Table.sTypoDescender())}));
  table.add(Arrays.asList(new String[]{"OS/2 typographic line gap",String.format("%d",os2Table.sTypoLineGap())}));
  return table;
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(5);
  newVector.addElement(new Option("\tIf set, distance is interpreted as branch length\n" + "\totherwise it is node height.","B",0,"-B"));
  newVector.addElement(new Option("\tnumber of clusters","N",1,"-N <Nr Of Clusters>"));
  newVector.addElement(new Option("\tFlag to indicate the cluster should be printed in Newick format.","P",0,"-P"));
  newVector.addElement(new Option("Link type (Single, Complete, Average, Mean, Centroid, Ward, Adjusted complete, Neighbor joining)","L",1,"-L [SINGLE|COMPLETE|AVERAGE|MEAN|CENTROID|WARD|ADJCOMPLETE|NEIGHBOR_JOINING]"));
  newVector.add(new Option("\tDistance function to use.\n" + "\t(default: weka.core.EuclideanDistance)","A",1,"-A <classname and options>"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

public static ShoppingCartItem makeItem(Integer cartLocation,String itemType,String itemDescription,String productCategoryId,BigDecimal basePrice,BigDecimal selectedAmount,BigDecimal quantity,Map<String,Object> attributes,String prodCatalogId,ShoppingCart.ShoppingCartItemGroup itemGroup,LocalDispatcher dispatcher,ShoppingCart cart,Boolean triggerExternalOpsBool) throws CartItemModifyException {
  Delegator delegator=cart.getDelegator();
  ShoppingCartItem newItem=new ShoppingCartItem(delegator,itemType,itemDescription,productCategoryId,basePrice,attributes,prodCatalogId,cart.getLocale(),itemGroup);
  if (cartLocation == null) {
    cart.addItemToEnd(newItem);
  }
 else {
    cart.addItem(cartLocation.intValue(),newItem);
  }
  boolean triggerExternalOps=triggerExternalOpsBool == null ? true : triggerExternalOpsBool.booleanValue();
  try {
    newItem.setQuantity(quantity,dispatcher,cart,triggerExternalOps);
  }
 catch (  CartItemModifyException e) {
    cart.removeEmptyCartItems();
    throw e;
  }
  if (selectedAmount != null) {
    newItem.setSelectedAmount(selectedAmount);
  }
  return newItem;
}

private native synchronized static void hookMethodNative(Member method,Class<?> declaringClass,int slot,Object additionalInfo);

final void runWorker(Worker w){
  Runnable task=w.firstTask;
  w.firstTask=null;
  boolean completedAbruptly=true;
  try {
    while (task != null || (task=getTask()) != null) {
      w.lock();
      clearInterruptsForTaskRun();
      try {
        beforeExecute(w.thread,task);
        Throwable thrown=null;
        try {
          task.run();
        }
 catch (        RuntimeException x) {
          thrown=x;
          throw x;
        }
catch (        Error x) {
          thrown=x;
          throw x;
        }
catch (        Throwable x) {
          thrown=x;
          throw new Error(x);
        }
 finally {
          afterExecute(task,thrown);
        }
      }
  finally {
        task=null;
        w.completedTasks++;
        w.unlock();
      }
    }
    completedAbruptly=false;
  }
  finally {
    processWorkerExit(w,completedAbruptly);
  }
}

private static ClusterProperties fromProperties(Properties props){
  ClusterProperties prop=new ClusterProperties();
  prop.clusterName=getStringProperty(IGNITE_CLUSTER_NAME,props,DEFAULT_CLUSTER_NAME);
  prop.cpuPerNode=getDoubleProperty(IGNITE_RUN_CPU_PER_NODE,props,DEFAULT_CPU_PER_NODE);
  prop.memPerNode=getDoubleProperty(IGNITE_MEMORY_PER_NODE,props,DEFAULT_MEM_PER_NODE);
  prop.memOverHeadPerNode=getDoubleProperty(IGNITE_MEMORY_OVERHEAD_PER_NODE,props,Math.max(0.1 * prop.memPerNode,DEFAULT_MINIMUM_MEM_OVERHEAD_PER_NODE));
  prop.nodeCnt=getDoubleProperty(IGNITE_NODE_COUNT,props,DEFAULT_IGNITE_NODE_COUNT);
  prop.igniteUrl=getStringProperty(IGNITE_URL,props,null);
  prop.ignitePath=getStringProperty(IGNITE_PATH,props,null);
  prop.licencePath=getStringProperty(LICENCE_PATH,props,null);
  prop.jvmOpts=getStringProperty(IGNITE_JVM_OPTS,props,null);
  prop.igniteWorkDir=getStringProperty(IGNITE_WORKING_DIR,props,DEFAULT_IGNITE_WORK_DIR);
  prop.igniteLocalWorkDir=getStringProperty(IGNITE_LOCAL_WORK_DIR,props,DEFAULT_IGNITE_LOCAL_WORK_DIR);
  prop.igniteReleasesDir=getStringProperty(IGNITE_RELEASES_DIR,props,DEFAULT_IGNITE_RELEASES_DIR);
  prop.igniteCfg=getStringProperty(IGNITE_CONFIG_XML,props,null);
  prop.userLibs=getStringProperty(IGNITE_USERS_LIBS,props,null);
  String pattern=getStringProperty(IGNITE_HOSTNAME_CONSTRAINT,props,null);
  if (pattern != null) {
    try {
      prop.hostnameConstraint=Pattern.compile(pattern);
    }
 catch (    PatternSyntaxException e) {
      log.log(Level.WARNING,"IGNITE_HOSTNAME_CONSTRAINT has invalid pattern. It will be ignore.",e);
    }
  }
  return prop;
}

public static String generateNativeGuid(StorageSystem device){
  return String.format("%s+%s",_deviceTypeMap.get(device.getSystemType()),device.getSerialNumber());
}

public CacheMetricsSnapshot(CacheMetrics loc,Collection<CacheMetrics> metrics){
  cacheName=loc.name();
  isEmpty=loc.isEmpty();
  isWriteBehindEnabled=loc.isWriteBehindEnabled();
  writeBehindFlushSize=loc.getWriteBehindFlushSize();
  writeBehindFlushThreadCnt=loc.getWriteBehindFlushThreadCount();
  writeBehindFlushFreq=loc.getWriteBehindFlushFrequency();
  writeBehindStoreBatchSize=loc.getWriteBehindStoreBatchSize();
  writeBehindBufSize=loc.getWriteBehindBufferSize();
  size=loc.getSize();
  keySize=loc.getKeySize();
  keyType=loc.getKeyType();
  valType=loc.getValueType();
  isStoreByVal=loc.isStoreByValue();
  isStatisticsEnabled=loc.isStatisticsEnabled();
  isManagementEnabled=loc.isManagementEnabled();
  isReadThrough=loc.isReadThrough();
  isWriteThrough=loc.isWriteThrough();
  offHeapMaxSize=loc.getOffHeapMaxSize();
  for (  CacheMetrics e : metrics) {
    reads+=e.getCacheGets();
    puts+=e.getCachePuts();
    hits+=e.getCacheHits();
    misses+=e.getCacheMisses();
    txCommits+=e.getCacheTxCommits();
    txRollbacks+=e.getCacheTxRollbacks();
    evicts+=e.getCacheEvictions();
    removes+=e.getCacheRemovals();
    putAvgTimeNanos+=e.getAveragePutTime();
    getAvgTimeNanos+=e.getAverageGetTime();
    rmvAvgTimeNanos+=e.getAverageRemoveTime();
    commitAvgTimeNanos+=e.getAverageTxCommitTime();
    rollbackAvgTimeNanos+=e.getAverageTxRollbackTime();
    if (e.getOverflowSize() > -1)     overflowSize+=e.getOverflowSize();
 else     overflowSize=-1;
    offHeapGets+=e.getOffHeapGets();
    offHeapPuts+=e.getOffHeapPuts();
    offHeapRemoves+=e.getOffHeapRemovals();
    offHeapEvicts+=e.getOffHeapEvictions();
    offHeapHits+=e.getOffHeapHits();
    offHeapMisses+=e.getOffHeapMisses();
    offHeapEntriesCnt+=e.getOffHeapEntriesCount();
    offHeapPrimaryEntriesCnt+=e.getOffHeapPrimaryEntriesCount();
    offHeapBackupEntriesCnt+=e.getOffHeapBackupEntriesCount();
    offHeapAllocatedSize+=e.getOffHeapAllocatedSize();
    swapGets+=e.getSwapGets();
    swapPuts+=e.getSwapPuts();
    swapRemoves+=e.getSwapRemovals();
    swapHits+=e.getSwapHits();
    swapMisses+=e.getSwapMisses();
    swapEntriesCnt+=e.getSwapEntriesCount();
    swapSize+=e.getSwapSize();
    if (e.getDhtEvictQueueCurrentSize() > -1)     dhtEvictQueueCurrSize+=e.getDhtEvictQueueCurrentSize();
 else     dhtEvictQueueCurrSize=-1;
    txThreadMapSize+=e.getTxThreadMapSize();
    txXidMapSize+=e.getTxXidMapSize();
    txCommitQueueSize+=e.getTxCommitQueueSize();
    txPrepareQueueSize+=e.getTxPrepareQueueSize();
    txStartVerCountsSize+=e.getTxStartVersionCountsSize();
    txCommittedVersionsSize+=e.getTxCommittedVersionsSize();
    txRolledbackVersionsSize+=e.getTxRolledbackVersionsSize();
    if (e.getTxDhtThreadMapSize() > -1)     txDhtThreadMapSize+=e.getTxDhtThreadMapSize();
 else     txDhtThreadMapSize=-1;
    if (e.getTxDhtXidMapSize() > -1)     txDhtXidMapSize+=e.getTxDhtXidMapSize();
 else     txDhtXidMapSize=-1;
    if (e.getTxDhtCommitQueueSize() > -1)     txDhtCommitQueueSize+=e.getTxDhtCommitQueueSize();
 else     txDhtCommitQueueSize=-1;
    if (e.getTxDhtPrepareQueueSize() > -1)     txDhtPrepareQueueSize+=e.getTxDhtPrepareQueueSize();
 else     txDhtPrepareQueueSize=-1;
    if (e.getTxDhtStartVersionCountsSize() > -1)     txDhtStartVerCountsSize+=e.getTxDhtStartVersionCountsSize();
 else     txDhtStartVerCountsSize=-1;
    if (e.getTxDhtCommittedVersionsSize() > -1)     txDhtCommittedVersionsSize+=e.getTxDhtCommittedVersionsSize();
 else     txDhtCommittedVersionsSize=-1;
    if (e.getTxDhtRolledbackVersionsSize() > -1)     txDhtRolledbackVersionsSize+=e.getTxDhtRolledbackVersionsSize();
 else     txDhtRolledbackVersionsSize=-1;
    if (e.getWriteBehindTotalCriticalOverflowCount() > -1)     writeBehindTotalCriticalOverflowCnt+=e.getWriteBehindTotalCriticalOverflowCount();
 else     writeBehindTotalCriticalOverflowCnt=-1;
    if (e.getWriteBehindCriticalOverflowCount() > -1)     writeBehindCriticalOverflowCnt+=e.getWriteBehindCriticalOverflowCount();
 else     writeBehindCriticalOverflowCnt=-1;
    if (e.getWriteBehindErrorRetryCount() > -1)     writeBehindErrorRetryCnt+=e.getWriteBehindErrorRetryCount();
 else     writeBehindErrorRetryCnt=-1;
  }
  int size=metrics.size();
  if (size > 1) {
    putAvgTimeNanos/=size;
    getAvgTimeNanos/=size;
    rmvAvgTimeNanos/=size;
    commitAvgTimeNanos/=size;
    rollbackAvgTimeNanos/=size;
  }
}

private void addReference(final int sourcePosition,final int referencePosition){
  if (srcAndRefPositions == null) {
    srcAndRefPositions=new int[6];
  }
  if (referenceCount >= srcAndRefPositions.length) {
    int[] a=new int[srcAndRefPositions.length + 6];
    System.arraycopy(srcAndRefPositions,0,a,0,srcAndRefPositions.length);
    srcAndRefPositions=a;
  }
  srcAndRefPositions[referenceCount++]=sourcePosition;
  srcAndRefPositions[referenceCount++]=referencePosition;
}

public void step3(Map<String,String> fileNameToPackageName,Map<String,List<FunDef>> fileNameToFunctions) throws SyntaxException {
  for (  STypeDef sTypeDef : typeDefSet) {
    if (sTypeDef instanceof SClassDef) {
      List<STypeDef> circularRecorder=new ArrayList<>();
      SClassDef parent=((SClassDef)sTypeDef).parent();
      while (parent != null) {
        circularRecorder.add(parent);
        if (parent.equals(sTypeDef)) {
          err.SyntaxException("circular inheritance " + circularRecorder,LineCol.SYNTHETIC);
          return;
        }
        parent=parent.parent();
      }
      circularRecorder.clear();
    }
 else     if (sTypeDef instanceof SInterfaceDef) {
      SInterfaceDef i=(SInterfaceDef)sTypeDef;
      checkInterfaceCircularInheritance(i,i.superInterfaces(),new ArrayList<>());
    }
 else {
      throw new LtBug("wrong STypeDefType " + sTypeDef.getClass());
    }
  }
  for (  STypeDef sTypeDef : typeDefSet) {
    checkOverrideAllMethods(sTypeDef);
  }
  for (  String fileName : mapOfStatements.keySet()) {
    List<Import> imports=fileNameToImport.get(fileName);
    String pkg=fileNameToPackageName.get(fileName);
    List<FunDef> functionDefs=fileNameToFunctions.get(fileName);
    for (    FunDef fun : functionDefs) {
      STypeDef type=getTypeWithAccess(fun.superType,imports);
      if (!(type instanceof SClassDef || type instanceof SInterfaceDef)) {
        err.SyntaxException("function super type should be functional interfaces or functional abstract classes",fun.superType.line_col());
        return;
      }
      SConstructorDef[] zeroParamConstructor=new SConstructorDef[1];
      SMethodDef[] methodToOverride=new SMethodDef[1];
      if (!getMethodForLambda(type,zeroParamConstructor,methodToOverride)) {
        err.SyntaxException("function super type should be functional interfaces or functional abstract classes",fun.superType.line_col());
        return;
      }
      SClassDef sClassDef=(SClassDef)types.get(pkg + fun.name);
      parseAnnos(fun.annos,sClassDef,imports,ElementType.TYPE,Arrays.asList(ElementType.METHOD,ElementType.CONSTRUCTOR));
      if (zeroParamConstructor[0] == null) {
        sClassDef.setParent(getObject_Class());
        assert type instanceof SInterfaceDef;
        sClassDef.superInterfaces().add((SInterfaceDef)type);
      }
 else {
        sClassDef.setParent((SClassDef)zeroParamConstructor[0].declaringType());
      }
      SConstructorDef cons=new SConstructorDef(LineCol.SYNTHETIC);
      parseAnnos(fun.annos,cons,imports,ElementType.CONSTRUCTOR,Arrays.asList(ElementType.TYPE,ElementType.METHOD));
      cons.setDeclaringType(sClassDef);
      sClassDef.constructors().add(cons);
      if (zeroParamConstructor[0] == null) {
        zeroParamConstructor[0]=getObject_Class().constructors().get(0);
      }
      cons.statements().add(new Ins.InvokeSpecial(new Ins.This(sClassDef),zeroParamConstructor[0],LineCol.SYNTHETIC));
      cons.modifiers().add(SModifier.PUBLIC);
      SMethodDef method=new SMethodDef(LineCol.SYNTHETIC);
      method.setDeclaringType(sClassDef);
      method.setReturnType(getRealReturnType(methodToOverride[0].getReturnType(),true));
      method.setName(methodToOverride[0].name());
      sClassDef.methods().add(method);
      parseAnnos(fun.annos,method,imports,ElementType.METHOD,Arrays.asList(ElementType.TYPE,ElementType.CONSTRUCTOR));
      method.modifiers().add(SModifier.PUBLIC);
      parseParameters(fun.params,fun.params.size(),method,imports,false);
      methodToStatements.put(method,fun.statements);
      checkOverrideAllMethods(sClassDef);
    }
  }
  for (  STypeDef typeDef : typeDefSet) {
    for (    SAnno anno : typeDef.annos()) {
      if (anno.type().fullName().equals("java.lang.FunctionalInterface")) {
        final String msg=typeDef + " is not a functional interface";
        if (typeDef instanceof SInterfaceDef) {
          if (!getMethodForLambda(typeDef,new SConstructorDef[1],new SMethodDef[1])) {
            err.SyntaxException(msg,typeDef.line_col());
            return;
          }
        }
 else {
          err.SyntaxException(msg,typeDef.line_col());
          return;
        }
      }
 else       if (anno.type().fullName().equals("lt.lang.FunctionalAbstractClass")) {
        final String msg=typeDef + " is not a functional abstract class";
        if (typeDef instanceof SClassDef) {
          if (!getMethodForLambda(typeDef,new SConstructorDef[1],new SMethodDef[1])) {
            err.SyntaxException(msg,typeDef.line_col());
            return;
          }
        }
 else {
          err.SyntaxException(msg,typeDef.line_col());
          return;
        }
      }
    }
    List<SMethodDef> methods;
    if (typeDef instanceof SClassDef)     methods=((SClassDef)typeDef).methods();
 else     methods=((SInterfaceDef)typeDef).methods();
    for (    SMethodDef method : methods) {
      for (      SAnno anno : method.annos()) {
        if (anno.type().fullName().equals("java.lang.Override")) {
          if (method.overRide().isEmpty()) {
            err.SyntaxException(method + " doesn't override any method",method.line_col());
            return;
          }
        }
      }
    }
  }
  for (  STypeDef typeDef : typeDefSet) {
    if (typeDef instanceof SClassDef) {
      SClassDef cls=(SClassDef)typeDef;
      if (cls.isDataClass()) {
        fillMethodsIntoDataClass(cls);
      }
    }
  }
}

public void removeAllUpdateListeners(){
  if (mUpdateListeners == null) {
    return;
  }
  mUpdateListeners.clear();
  mUpdateListeners=null;
}

public Vector2 floor(){
  x=(float)Math.floor(x);
  z=(float)Math.floor(z);
  return this;
}

public static Location createLocation(final String rawJSON) throws TwitterException {
  try {
    final JSONObject json=new JSONObject(rawJSON);
    return locationConstructor.newInstance(json);
  }
 catch (  final InstantiationException e) {
    throw new TwitterException(e);
  }
catch (  final IllegalAccessException e) {
    throw new AssertionError(e);
  }
catch (  final InvocationTargetException e) {
    throw new TwitterException(e);
  }
catch (  final JSONException e) {
    throw new TwitterException(e);
  }
}

@Override protected int calcAttackValue(){
  int av=100;
  if (bDirect) {
    av=Math.min(av + (toHit.getMoS() / 3),av * 2);
  }
  if (bGlancing) {
    av=(int)Math.floor(av / 2.0);
  }
  av=(int)Math.floor(getBracketingMultiplier() * av);
  return av;
}

public void test_writeImmutable(){
  final IRawStore store=getStore();
  try {
    final int len=100;
    final byte[] expected1=new byte[len];
    r.nextBytes(expected1);
    final ByteBuffer tmp=ByteBuffer.wrap(expected1);
    final long addr1=store.write(tmp);
    assertEquals(len,tmp.position());
    assertEquals(tmp.position(),tmp.limit());
    assertEquals(expected1,store.read(addr1));
    final byte[] expected2=expected1.clone();
    r.nextBytes(expected1);
    assertEquals(expected2,store.read(addr1));
  }
  finally {
    store.destroy();
  }
}

@Override public String queryToRetrieveData(){
  String parameterizedQuery;
  if (query.contains("%s")) {
    parameterizedQuery=query.replace("%s",startRow + "");
  }
 else {
    parameterizedQuery=query;
  }
  return parameterizedQuery;
}

public String toString(){
  String classname=Util.getUnqualifiedName(getClass());
  return (ref == null) ? classname : classname + "[" + ref.remoteToString()+ "]";
}

private static void initialise(){
  Hints hints=new Hints(Hints.CRS,DefaultGeographicCRS.WGS84);
  PositionFactory positionFactory=GeometryFactoryFinder.getPositionFactory(hints);
  GeometryFactory geometryFactory=GeometryFactoryFinder.getGeometryFactory(hints);
  PrimitiveFactory primitiveFactory=GeometryFactoryFinder.getPrimitiveFactory(hints);
  AggregateFactory aggregateFactory=GeometryFactoryFinder.getAggregateFactory(hints);
  wktParser=new WKTParser(geometryFactory,primitiveFactory,positionFactory,aggregateFactory);
  wktTypeList.add(new WKTType(WKT_POINT,false,1,"Point",false));
  wktTypeList.add(new WKTType(WKT_MULTIPOINT,true,1,"Point",false));
  wktTypeList.add(new WKTType(WKT_LINESTRING,false,2,"Line",false));
  wktTypeList.add(new WKTType("LINEARRING",false,2,"Line",false));
  wktTypeList.add(new WKTType(WKT_MULTILINESTRING,true,2,"Line",false));
  wktTypeList.add(new WKTType(WKT_POLYGON,false,-1,"Polygon",true));
  wktTypeList.add(new WKTType(WKT_MULTIPOLYGON,true,-1,"Polygon",true,true));
  for (  WKTType wkyType : wktTypeList) {
    wktTypeMap.put(wkyType.getName(),wkyType);
  }
}

public Instances pruneToK(Instances neighbours,double[] distances,int k){
  if (neighbours == null || distances == null || neighbours.numInstances() == 0) {
    return null;
  }
  if (k < 1) {
    k=1;
  }
  int currentK=0;
  double currentDist;
  for (int i=0; i < neighbours.numInstances(); i++) {
    currentK++;
    currentDist=distances[i];
    if (currentK > k && currentDist != distances[i - 1]) {
      currentK--;
      neighbours=new Instances(neighbours,0,currentK);
      break;
    }
  }
  return neighbours;
}

@Override protected String doInBackground(String... f_url){
  int count;
  InputStream input=null;
  OutputStream output=null;
  try {
    URL url=new URL(f_url[0]);
    URLConnection connection=url.openConnection();
    connection.connect();
    int lengthOfFile=connection.getContentLength();
    input=new BufferedInputStream(url.openStream(),8192);
    output=new FileOutputStream(f_url[1]);
    byte data[]=new byte[1024];
    long total=0;
    while ((count=input.read(data)) != -1) {
      total+=count;
      publishProgress(Integer.toString((int)((total * 100) / lengthOfFile)));
      output.write(data,0,count);
    }
    output.flush();
  }
 catch (  Exception e) {
    Log.e("Error: ",e.getMessage());
  }
 finally {
    try {
      if (output != null)       output.close();
    }
 catch (    Exception e) {
      Log.e("Error: ",e.getMessage());
    }
    try {
      if (input != null)       input.close();
    }
 catch (    Exception e) {
      Log.e("Error: ",e.getMessage());
    }
  }
  return null;
}

public void error(String msg){
  print("[ERROR] " + msg,out.err);
}

public static void loadArmV7aLibrary(ApplicationLike applicationLike,String libName){
  if (libName == null || libName.isEmpty() || applicationLike == null) {
    throw new TinkerRuntimeException("libName or context is null!");
  }
  if (TinkerApplicationHelper.isTinkerEnableForNativeLib(applicationLike)) {
    if (TinkerApplicationHelper.loadLibraryFromTinker(applicationLike,"lib/armeabi-v7a",libName)) {
      return;
    }
  }
  System.loadLibrary(libName);
}

AtomicSequence(final long initialValue){
  UPDATER.lazySet(this,initialValue);
}

public void keyReleased(KeyEvent e){
  if (e.isShiftDown() && e.getKeyCode() == NEXT_THROTTLE_KEY) {
    requestFocusForNextFrame();
  }
 else   if (e.isShiftDown() && e.getKeyCode() == PREV_THROTTLE_KEY) {
    requestFocusForPreviousFrame();
  }
}

protected static Long convertStringToBuckectingLong(String stringToBeConverted){
  if (stringToBeConverted == null || stringToBeConverted.equals("")) {
    return null;
  }
  byte[] byteString=stringToBeConverted.getBytes();
  if (byteString.length < 8) {
    byte[] newByteString=new byte[8];
    for (int i=0; i < newByteString.length; i++) {
      if (i < byteString.length) {
        newByteString[i]=byteString[i];
      }
 else {
        newByteString[i]=0;
      }
    }
    byteString=newByteString;
  }
  ByteBuffer bb=ByteBuffer.wrap(byteString);
  long byteMethod=bb.getLong();
  byteMethod=Math.abs(byteMethod);
  return byteMethod;
}

@Override public void closeInvoked(){
}

private void pendingEvent(EventReg reg,ServiceID sid,Item item,int transition,boolean copyItem){
  if (item != null && copyItem)   item=copyItem(item);
  newNotifies.add(new EventTask(reg,sid,item,transition));
}

public static void writeln(String fileName,Object[] objects){
  if (writer == null) {
    createWriter(fileName);
    for (    Object obj : objects) {
      writeln(obj.toString());
    }
    closeWriter();
  }
}

protected double regressionPrediction(Instance transformedInstance,boolean[] selectedAttributes,double[] coefficients) throws Exception {
  double result=0;
  int column=0;
  for (int j=0; j < transformedInstance.numAttributes(); j++) {
    if ((m_ClassIndex != j) && (selectedAttributes[j])) {
      result+=coefficients[column] * transformedInstance.value(j);
      column++;
    }
  }
  result+=coefficients[column];
  return result;
}

public QLFDocument(List<F> list,String docno,Map<String,String> extraProps){
  featureList=new MemoryLocalFeatureList<F>(list);
  iterator=list.iterator();
  if (extraProps != null)   props.putAll(extraProps);
  props.put("docno",docno);
}

@Override protected TemplateModel invokeGenericGet(Map keyMap,Class clazz,String key) throws TemplateModelException {
  Map map=(Map)object;
  Object val=map.get(key);
  if (val == null) {
    if (key.length() == 1) {
      Character charKey=Character.valueOf(key.charAt(0));
      val=map.get(charKey);
      if (val == null && !(map.containsKey(key) || map.containsKey(charKey))) {
        return UNKNOWN;
      }
    }
 else     if (!map.containsKey(key)) {
      return UNKNOWN;
    }
  }
  return wrap(val);
}

public byte[] toZOrderByteArray(final BigInteger bigInt){
  final int numDimensions=datatypeConfig.getNumDimensions();
  final byte[] bigIntAsByteArr=bigInt.toByteArray();
  final int paddedArraySize=numDimensions * BASE_SIZE + 1;
  final byte[] bigIntAsByteArrPad=new byte[paddedArraySize];
  int idx=0;
  for (int i=0; i < paddedArraySize - bigIntAsByteArr.length; i++) {
    bigIntAsByteArrPad[idx++]=0;
  }
  for (int i=0; i < bigIntAsByteArr.length; i++) {
    bigIntAsByteArrPad[idx++]=bigIntAsByteArr[i];
  }
  final byte[] bigIntAsByteArrUnsigned=unpadLeadingZero(bigIntAsByteArrPad);
  return bigIntAsByteArrUnsigned;
}

public void clearLogcat(@NotNull IDevice device,@NotNull Project project){
synchronized (myLock) {
    ExecutorService executor=myExecutors.get(device);
    if (executor != null) {
      stopReceiving(device);
      executor.submit(null);
      startReceiving(device);
    }
  }
}

public void expand(int level){
  ArrayList<S2CellId> output=new ArrayList<S2CellId>();
  long levelLsb=S2CellId.lowestOnBitForLevel(level);
  int i=size() - 1;
  do {
    S2CellId id=cellId(i);
    if (id.lowestOnBit() < levelLsb) {
      id=id.parent(level);
      while (i > 0 && id.contains(cellId(i - 1))) {
        --i;
      }
    }
    output.add(id);
    id.getAllNeighbors(level,output);
  }
 while (--i >= 0);
  initSwap(output);
}

private StringSet discoverVolumeSnaps(StorageSystem system,List<Snap> snaps,String parentGUID,StringSet parentMatchedVPools,VNXeApiClient apiClient,DbClient dbClient,Map<String,List<UnManagedVolume>> hostVolumesMap,VNXeLun lun,boolean isSnapInCG,String cgName) throws Exception {
  StringSet snapsets=new StringSet();
  for (  Snap snapDetail : snaps) {
    UnManagedVolume unManagedVolume=null;
    String managedSnapNativeGuid=NativeGUIDGenerator.generateNativeGuidForVolumeOrBlockSnapShot(system.getNativeGuid(),snapDetail.getId());
    BlockSnapshot viprSnap=DiscoveryUtils.checkBlockSnapshotExistsInDB(dbClient,managedSnapNativeGuid);
    if (null != viprSnap) {
      log.info("Skipping snapshot {} as it is already managed by ViPR",managedSnapNativeGuid);
      snapsets.add(managedSnapNativeGuid);
      continue;
    }
    String unManagedVolumeNatvieGuid=NativeGUIDGenerator.generateNativeGuidForPreExistingVolume(system.getNativeGuid(),snapDetail.getId());
    unManagedVolume=DiscoveryUtils.checkUnManagedVolumeExistsInDB(dbClient,unManagedVolumeNatvieGuid);
    unManagedVolume=createUnManagedVolumeForSnap(unManagedVolume,unManagedVolumeNatvieGuid,lun,system,dbClient,hostVolumesMap,snapDetail);
    populateSnapInfo(unManagedVolume,snapDetail,parentGUID,parentMatchedVPools);
    snapsets.add(unManagedVolumeNatvieGuid);
    unManagedVolumesReturnedFromProvider.add(unManagedVolume.getId());
    if (isSnapInCG) {
      addObjectToUnManagedConsistencyGroup(apiClient,unManagedVolume,cgName,system,dbClient);
    }
  }
  return snapsets;
}

public void receive(final CallEvent event){
  if (event.isValid()) {
    if (!mEvents.contains(event)) {
      mEvents.add(0,event);
      fireTableRowsInserted(0,0);
      prune();
    }
 else {
      int row=mEvents.indexOf(event);
      fireTableRowsUpdated(row,row);
    }
  }
 else {
    if (mEvents.contains(event)) {
      int row=mEvents.indexOf(event);
      mEvents.remove(event);
      fireTableRowsDeleted(row,row);
    }
  }
}

public Pet findOne(String id){
  log.debug("Request to get Pet : {}",id);
  Pet pet=petRepository.findOne(UUID.fromString(id));
  return pet;
}

public final void clear(){
  mActiveIssues.clear();
}

public static void awaitDataReady(){
synchronized (mDbHelperLock) {
    if (mDbHelper == null) {
      try {
        mDbHelperLock.wait();
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
    }
  }
}

protected AbstractIoSession(IoService service){
  this.service=service;
  this.handler=service.getHandler();
  long currentTime=System.currentTimeMillis();
  creationTime=currentTime;
  lastThroughputCalculationTime=currentTime;
  lastReadTime=currentTime;
  lastWriteTime=currentTime;
  lastIdleTimeForBoth=currentTime;
  lastIdleTimeForRead=currentTime;
  lastIdleTimeForWrite=currentTime;
  closeFuture.addListener(SCHEDULED_COUNTER_RESETTER);
  sessionId=idGenerator.incrementAndGet();
}

private String processFloatToken(String token){
  String result=token.replaceAll(groupSeparator,"");
  if (!decimalSeparator.equals("\\."))   result=result.replaceAll(decimalSeparator,".");
  boolean isNegative=false;
  int preLen=negativePrefix.length();
  if ((preLen > 0) && result.startsWith(negativePrefix)) {
    isNegative=true;
    result=result.substring(preLen);
  }
  int sufLen=negativeSuffix.length();
  if ((sufLen > 0) && result.endsWith(negativeSuffix)) {
    isNegative=true;
    result=result.substring(result.length() - sufLen,result.length());
  }
  if (result.equals(nanString))   result="NaN";
  if (result.equals(infinityString))   result="Infinity";
  if (isNegative)   result="-" + result;
  Matcher m=NON_ASCII_DIGIT.matcher(result);
  if (m.find()) {
    StringBuilder inASCII=new StringBuilder();
    for (int i=0; i < result.length(); i++) {
      char nextChar=result.charAt(i);
      if (Character.isDigit(nextChar)) {
        int d=Character.digit(nextChar,10);
        if (d != -1)         inASCII.append(d);
 else         inASCII.append(nextChar);
      }
 else {
        inASCII.append(nextChar);
      }
    }
    result=inASCII.toString();
  }
  return result;
}

InternalWindow(String title){
  setLayout(new BorderLayout());
  titleBar=new TitleBar();
  add(titleBar,BorderLayout.NORTH);
  titleBar.setLayout(new SBoxLayout(SBoxLayout.HORIZONTAL,TITLEBAR_PADDING));
  titleLabel=new JLabel();
  setTitle(title);
  titleLabel.setMinimumSize(new Dimension(0,0));
  titleBar.add(titleLabel);
  SBoxLayout.addSpring(titleBar);
  minimizeButton=new JButton(minimizeIcon);
  minimizeButton.setMargin(new Insets(0,0,0,0));
  minimizeButton.setBorder(BorderFactory.createEmptyBorder());
  minimizeButton.setFocusable(false);
  minimizeButton.addActionListener(new MinimizeListener());
  titleBar.add(minimizeButton);
  closeButton=new JButton(closeIcon);
  closeButton.setMargin(new Insets(0,0,0,0));
  closeButton.setBorder(BorderFactory.createEmptyBorder());
  closeButton.setFocusable(false);
  closeButton.addActionListener(new CloseActionListener());
  titleBar.add(closeButton);
  cache=new ComponentPaintCache(this);
}

@SuppressWarnings("unchecked") public static Map<String,Object> loadStream(InputStream inputStream){
  LOG.fine("Reading config stream");
  Yaml yaml=new Yaml();
  Map<Object,Object> propsYaml=(Map<Object,Object>)yaml.load(inputStream);
  LOG.fine("Successfully read config");
  Map<String,Object> typedMap=new HashMap<>();
  for (  Object key : propsYaml.keySet()) {
    typedMap.put(key.toString(),propsYaml.get(key));
  }
  return typedMap;
}

String[] split(final String stringToSplit){
  if (StringUtils.isNotBlank(stringToSplit)) {
    int strLenght=stringToSplit.length();
    int splitNum=strLenght / chunkSize;
    if (strLenght % chunkSize > 0) {
      splitNum+=1;
    }
    String[] result=new String[splitNum];
    for (int i=0; i < splitNum; i++) {
      int startPos=i * chunkSize;
      int endPos=startPos + chunkSize;
      if (endPos > strLenght) {
        endPos=strLenght;
      }
      result[i]=stringToSplit.substring(startPos,endPos);
    }
    return result;
  }
  return null;
}

public void logVelocityMessage(int level,String message){
synchronized (this) {
    Object[] data=new Object[2];
    data[0]=new Integer(level);
    data[1]=message;
    pendingMessages.addElement(data);
  }
}

public void testShiftRightNegNonZeroes(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,0,0,0,0,0,0,0,0};
  int aSign=-1;
  int number=68;
  byte rBytes[]={-25,-4,121,-80,20,-70,109,42};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.shiftRight(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

public void removeAllAddresses(){
  addresses.clear();
}

public static boolean isShowTooltips(){
  return showTooltips;
}

private void addReference(final int sourcePosition,final int referencePosition){
  if (srcAndRefPositions == null) {
    srcAndRefPositions=new int[6];
  }
  if (referenceCount >= srcAndRefPositions.length) {
    int[] a=new int[srcAndRefPositions.length + 6];
    System.arraycopy(srcAndRefPositions,0,a,0,srcAndRefPositions.length);
    srcAndRefPositions=a;
  }
  srcAndRefPositions[referenceCount++]=sourcePosition;
  srcAndRefPositions[referenceCount++]=referencePosition;
}

public void dispose(){
  logDebug("Disposing.");
  mSetupDone=false;
  if (mServiceConn != null) {
    logDebug("Unbinding from service.");
    if (mContext != null)     mContext.unbindService(mServiceConn);
  }
  mDisposed=true;
  mContext=null;
  mServiceConn=null;
  mService=null;
  mPurchaseListener=null;
}

public static java.lang.String toBinaryString(int i){
  return intToBinaryString(i);
}

public static boolean isPropertyField(String fieldName){
  return !ID_FIELD_NAME.equals(fieldName) && !URI_FIELD_NAME.equals(fieldName) && !TEXT_FIELD_NAME.equals(fieldName)&& !CONTEXT_FIELD_NAME.equals(fieldName)&& fieldName.charAt(0) != '_';
}

public static void checkAccess(int modifiers){
  if (System.getSecurityManager() != null && !Modifier.isPublic(modifiers)) {
    throw new SecurityException("Resource is not accessible");
  }
}

protected void printIndent(StringBuilder ddl){
  ddl.append(getIndent());
}

public NType merge(NType a,NType b) throws MergeFailed {
  if (a != null && b == null)   return a;
  if (a == null && b != null)   return b;
  if (a == null && b == null)   return null;
  if (a.equals(b))   return a;
  try {
    return Dispatcher.dispatch(getClass(),this,"accept",a,b);
  }
 catch (  NoSuchMethodException e) {
    throw new MergeFailed("a and b are of different NType",a,b);
  }
}

public static String format(String s,String col){
  String s1=(s + padd);
  return s1.substring(0,Math.min(col.length(),s1.length()));
}

protected static void loadEnd(MLookupInfo info,HashMap lookup){
  if (info.IsValidated && lookup.size() > 0)   s_loadedLookups.put(getKey(info),lookup);
}

public static void info(final String message){
  infoLogger.accept(message);
}

private void rotateRight(Node<K,V> root){
  Node<K,V> pivot=root.left;
  Node<K,V> right=root.right;
  Node<K,V> pivotLeft=pivot.left;
  Node<K,V> pivotRight=pivot.right;
  root.left=pivotRight;
  if (pivotRight != null) {
    pivotRight.parent=root;
  }
  replaceInParent(root,pivot);
  pivot.right=root;
  root.parent=pivot;
  root.height=Math.max(right != null ? right.height : 0,pivotRight != null ? pivotRight.height : 0) + 1;
  pivot.height=Math.max(root.height,pivotLeft != null ? pivotLeft.height : 0) + 1;
}

private void checkNoCharactersMissing(int totalLength,List<Token> tokens){
  if (!tokens.isEmpty() && tokens.get(tokens.size() - 1).right != totalLength) {
    String error=String.format("Lengths don't match: %s instead of %s",tokens.get(tokens.size() - 1).right,totalLength);
    throw new RuntimeException(error);
  }
  int start=0;
  for (int i=0; i < tokens.size(); i++) {
    Token token=tokens.get(i);
    if (token.left != start) {
      throw new RuntimeException("Gap/inconsistency at: " + start);
    }
    start=token.right;
  }
}

public boolean validateServiceAttributes(String token,String validatorClass,Set values) throws SMSException, SSOException, RemoteException {
  initialize();
  if (debug.messageEnabled()) {
    debug.message("SMSJAXRPCObjectImpl::validateServiceAttributes: " + validatorClass + " Values: "+ values);
  }
  try {
    Class clazz=Class.forName(validatorClass);
    ServiceAttributeValidator v=(ServiceAttributeValidator)clazz.newInstance();
    return v.validate(values);
  }
 catch (  InstantiationException ex) {
    throw new SMSException("sms-validator_cannot_instantiate_class");
  }
catch (  IllegalAccessException ex) {
    throw new SMSException("sms-validator_cannot_instantiate_class");
  }
catch (  ClassNotFoundException ex) {
    throw new SMSException("sms-validator_cannot_instantiate_class");
  }
}

public synchronized void animatePanTo(Point2D p,long duration){
  Point2D pp=new Point2D.Double();
  m_itransform.transform(p,pp);
  animatePanToAbs(pp,duration);
}

public static void assertEqualsWithRelativeErrorOrBothNaN(String message,double expected,double actual){
  if (expected == actual) {
    return;
  }
  if (Double.isNaN(expected) && !Double.isNaN(actual)) {
    throw new AssertionFailedError(message + " expected: <" + expected+ "> but was: <"+ actual+ ">");
  }
  if (!Double.isNaN(expected) && Double.isNaN(actual)) {
    throw new AssertionFailedError(message + " expected: <" + expected+ "> but was: <"+ actual+ ">");
  }
  double relativeError;
  if (Math.abs(actual) > Math.abs(expected)) {
    relativeError=Math.abs((expected - actual) / actual);
  }
 else {
    relativeError=Math.abs((expected - actual) / expected);
  }
  if (relativeError > MAX_RELATIVE_ERROR) {
    throw new AssertionFailedError(message + " expected: <" + expected+ "> but was: <"+ actual+ ">");
  }
}

protected void assertException(final AbstractExceptionCase exceptionCase) throws Throwable {
  assertException(exceptionCase,null);
}

@Override public ServiceHost start() throws Throwable {
  super.start();
  startDefaultCoreServicesSynchronously();
  super.startService(new RootNamespaceService());
  super.startService(new SampleServiceWithSharedCustomUi());
  super.startService(new SampleFactoryServiceWithCustomUi());
  super.startFactory(new SampleSimpleEchoService());
  super.startFactory(new SamplePreviousEchoService());
  super.startFactory(new ExampleService());
  super.startFactory(new ExampleTaskService());
  super.startService(new UiService());
  startSwaggerDescriptorService();
  return this;
}

@Override public void endOfStream() throws AdeException {
  for (  MsgData data : m_msgData.values()) {
    if (data.m_totalLogCounts > 0) {
      data.m_lambda=data.m_totalLogCounts / data.m_intervalCount;
      m_minLambda=Math.min(data.m_lambda,m_minLambda);
      if (locateMismatchingDistributions(data)) {
        data.m_badFit=true;
      }
    }
  }
  m_trained=true;
}

static BinaryTree<Integer> buildComplete(int n){
  BinaryTree<Integer> bt=new BinaryTree<Integer>();
  int b=(int)Math.pow(2,n - 1);
  for (int i=0; i < n; i++) {
    bt.insert(b);
    for (int j=1; j <= Math.pow(2,i) - 1; j++) {
      bt.insert(b + 2 * b * j);
    }
    b=b / 2;
  }
  return bt;
}

public void erase(){
  byte[] bytes=null;
  for (  ByteBuffer buffer : buffers) {
    if (bytes == null || bytes.length < buffer.limit())     bytes=new byte[buffer.limit()];
    buffer.position(0);
    buffer.put(bytes,0,buffer.limit());
    buffer.position(0);
  }
}

@Override boolean resurrectSelection(){
  final int childCount=getChildCount();
  if (childCount <= 0) {
    return false;
  }
  int selectedTop=0;
  int selectedPos;
  int childrenTop=mListPadding.top;
  int childrenBottom=getBottom() - getTop() - mListPadding.bottom;
  final int firstPosition=mFirstPosition;
  final int toPosition=mResurrectToPosition;
  boolean down=true;
  if (toPosition >= firstPosition && toPosition < firstPosition + childCount) {
    selectedPos=toPosition;
    final View selected=getChildAt(selectedPos - mFirstPosition);
    selectedTop=selected.getTop();
    int selectedBottom=selected.getBottom();
    if (selectedTop < childrenTop) {
      selectedTop=childrenTop + getVerticalFadingEdgeLength();
    }
 else     if (selectedBottom > childrenBottom) {
      selectedTop=childrenBottom - selected.getMeasuredHeight() - getVerticalFadingEdgeLength();
    }
  }
 else {
    if (toPosition < firstPosition) {
      selectedPos=firstPosition;
      for (int i=0; i < childCount; i++) {
        final View v=getChildAt(i);
        final int top=v.getTop();
        if (i == 0) {
          selectedTop=top;
          if (firstPosition > 0 || top < childrenTop) {
            childrenTop+=getVerticalFadingEdgeLength();
          }
        }
        if (top >= childrenTop) {
          selectedPos=firstPosition + i;
          selectedTop=top;
          break;
        }
      }
    }
 else {
      final int itemCount=mItemCount;
      down=false;
      selectedPos=firstPosition + childCount - 1;
      for (int i=childCount - 1; i >= 0; i--) {
        final View v=getChildAt(i);
        final int top=v.getTop();
        final int bottom=v.getBottom();
        if (i == childCount - 1) {
          selectedTop=top;
          if (firstPosition + childCount < itemCount || bottom > childrenBottom) {
            childrenBottom-=getVerticalFadingEdgeLength();
          }
        }
        if (bottom <= childrenBottom) {
          selectedPos=firstPosition + i;
          selectedTop=top;
          break;
        }
      }
    }
  }
  mResurrectToPosition=INVALID_POSITION;
  removeCallbacks(mFlingRunnable);
  mTouchMode=TOUCH_MODE_REST;
  clearScrollingCache();
  mSpecificTop=selectedTop;
  selectedPos=lookForSelectablePosition(selectedPos,down);
  if (selectedPos >= firstPosition && selectedPos <= getLastVisiblePosition()) {
    mLayoutMode=LAYOUT_SPECIFIC;
    setSelectionInt(selectedPos);
    invokeOnItemScrollListener();
  }
 else {
    selectedPos=INVALID_POSITION;
  }
  reportScrollStateChange(OnScrollListener.SCROLL_STATE_IDLE);
  return selectedPos >= 0;
}

public void logPurchase(BigDecimal purchaseAmount,Currency currency,Bundle parameters){
  if (purchaseAmount == null) {
    notifyDeveloperError("purchaseAmount cannot be null");
    return;
  }
 else   if (currency == null) {
    notifyDeveloperError("currency cannot be null");
    return;
  }
  if (parameters == null) {
    parameters=new Bundle();
  }
  parameters.putString(AppEventsConstants.EVENT_PARAM_CURRENCY,currency.getCurrencyCode());
  logEvent(AppEventsConstants.EVENT_NAME_PURCHASED,purchaseAmount.doubleValue(),parameters);
  eagerFlush();
}

public static String padBetween(final String first,final int length,final String last){
  final int padlen=length - (first.length() + last.length());
  return first + (padlen > 0 ? getSpaceString(padlen) : "") + last;
}

public void applyFromResolveInfo(PackageManager pm,ResolveInfo info,WidgetPreviewLoader loader){
  mInfo=info;
  CharSequence label=info.loadLabel(pm);
  mWidgetName.setText(label);
  mWidgetDims.setText(String.format(mDimensionsFormatString,1,1));
  mWidgetPreviewLoader=loader;
}

private QueueConnectionImpl createNewPrimary(Set excludedServers){
  QueueConnectionImpl primary=null;
  while (primary == null && pool.getPoolOrCacheCancelInProgress() == null) {
    List servers=findQueueServers(excludedServers,1,false,printPrimaryNotFoundError,LocalizedStrings.QueueManagerImpl_COULD_NOT_FIND_SERVER_TO_CREATE_PRIMARY_CLIENT_QUEUE);
    printPrimaryNotFoundError=false;
    if (servers == null || servers.isEmpty()) {
      break;
    }
    Connection connection=null;
    try {
      connection=factory.createClientToServerConnection((ServerLocation)servers.get(0),true);
    }
 catch (    GemFireSecurityException e) {
      throw e;
    }
catch (    Exception e) {
      if (logger.isDebugEnabled()) {
        logger.debug("SubscriptionManagerImpl - error creating a connection to server {}",servers.get(0));
      }
    }
    if (connection != null) {
      primary=initializeQueueConnection(connection,true,queueConnections.getFailedUpdater());
    }
    excludedServers.addAll(servers);
  }
  if (primary != null && sentClientReady && primary.sendClientReady()) {
    readyForEventsAfterFailover(primary);
  }
  return primary;
}

public static int readInt(){
  return scanner.nextInt();
}

public CSVConfig guess(){
  try {
    BufferedReader bIn=new BufferedReader(new InputStreamReader(getInputStream(),StandardCharsets.UTF_8));
    String[] lines=new String[10];
    String line=null;
    int counter=0;
    while ((line=bIn.readLine()) != null && counter <= 10) {
      lines[counter]=line;
      counter++;
    }
    if (counter < 10) {
      String[] newLines=new String[counter];
      System.arraycopy(lines,0,newLines,0,counter);
      lines=newLines;
    }
    analyseLines(lines);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
 finally {
    if (in != null) {
      try {
        in.close();
      }
 catch (      Exception e) {
      }
    }
  }
  CSVConfig conf=config;
  config=null;
  return conf;
}

private void updateDesign(DataSetDesign dataSetDesign,IConnection conn,String queryText) throws OdaException {
  IQuery query=conn.newQuery(null);
  query.prepare(queryText);
  query.setProperty(Query.PROP_SETUP_QUERY_TEXT,getSetupQueryText());
  try {
    IResultSetMetaData md=query.getMetaData();
    updateResultSetDesign(md,dataSetDesign);
  }
 catch (  OdaException e) {
    dataSetDesign.setResultSets(null);
    e.printStackTrace();
  }
  try {
    IParameterMetaData paramMd=query.getParameterMetaData();
    updateParameterDesign(paramMd,dataSetDesign);
  }
 catch (  OdaException ex) {
    dataSetDesign.setParameters(null);
    ex.printStackTrace();
  }
}

@Override public OutlierResult run(Database db,Relation<V> relation){
  DBIDs ids=relation.getDBIDs();
  SimilarityQuery<V> sq=db.getSimilarityQuery(relation,kernelFunction);
  KernelMatrix kernelMatrix=new KernelMatrix(sq,relation,ids);
  WritableDoubleDataStore abodvalues=DataStoreUtil.makeDoubleStorage(ids,DataStoreFactory.HINT_STATIC);
  DoubleMinMax minmaxabod=new DoubleMinMax();
  MeanVariance s=new MeanVariance();
  KNNHeap nn=DBIDUtil.newHeap(k);
  for (DBIDIter pA=ids.iter(); pA.valid(); pA.advance()) {
    final double simAA=kernelMatrix.getSimilarity(pA,pA);
    nn.clear();
    for (DBIDIter nB=relation.iterDBIDs(); nB.valid(); nB.advance()) {
      if (DBIDUtil.equal(nB,pA)) {
        continue;
      }
      double simBB=kernelMatrix.getSimilarity(nB,nB);
      double simAB=kernelMatrix.getSimilarity(pA,nB);
      double sqdAB=simAA + simBB - simAB - simAB;
      if (!(sqdAB > 0.)) {
        continue;
      }
      nn.insert(sqdAB,nB);
    }
    KNNList nl=nn.toKNNList();
    s.reset();
    DoubleDBIDListIter iB=nl.iter(), iC=nl.iter();
    for (; iB.valid(); iB.advance()) {
      double sqdAB=iB.doubleValue();
      double simAB=kernelMatrix.getSimilarity(pA,iB);
      if (!(sqdAB > 0.)) {
        continue;
      }
      for (iC.seek(iB.getOffset() + 1); iC.valid(); iC.advance()) {
        double sqdAC=iC.doubleValue();
        double simAC=kernelMatrix.getSimilarity(pA,iC);
        if (!(sqdAC > 0.)) {
          continue;
        }
        double simBC=kernelMatrix.getSimilarity(iB,iC);
        double numerator=simBC - simAB - simAC + simAA;
        double div=1. / (sqdAB * sqdAC);
        s.put(numerator * div,Math.sqrt(div));
      }
    }
    final double abof=s.getNaiveVariance();
    minmaxabod.put(abof);
    abodvalues.putDouble(pA,abof);
  }
  DoubleRelation scoreResult=new MaterializedDoubleRelation("Angle-Based Outlier Degree","abod-outlier",abodvalues,relation.getDBIDs());
  OutlierScoreMeta scoreMeta=new InvertedOutlierScoreMeta(minmaxabod.getMin(),minmaxabod.getMax(),0.0,Double.POSITIVE_INFINITY);
  return new OutlierResult(scoreMeta,scoreResult);
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String badSubstring;
  doc=(Document)load("hc_staff",false);
  elementList=doc.getElementsByTagName("acronym");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
{
    boolean success=false;
    try {
      badSubstring=child.substringData(10,-3);
    }
 catch (    DOMException ex) {
      success=(ex.code == DOMException.INDEX_SIZE_ERR);
    }
    assertTrue("throws_INDEX_SIZE_ERR",success);
  }
}

public static String toString(JSONObject jo) throws JSONException {
  StringBuffer sb=new StringBuffer();
  sb.append(escape(jo.getString("name")));
  sb.append("=");
  sb.append(escape(jo.getString("value")));
  if (jo.has("expires")) {
    sb.append(";expires=");
    sb.append(jo.getString("expires"));
  }
  if (jo.has("domain")) {
    sb.append(";domain=");
    sb.append(escape(jo.getString("domain")));
  }
  if (jo.has("path")) {
    sb.append(";path=");
    sb.append(escape(jo.getString("path")));
  }
  if (jo.optBoolean("secure")) {
    sb.append(";secure");
  }
  return sb.toString();
}

@Override public boolean equals(Object otherRule){
  if (otherRule == this) {
    return true;
  }
  if (otherRule instanceof ZoneOffsetTransitionRule) {
    ZoneOffsetTransitionRule other=(ZoneOffsetTransitionRule)otherRule;
    return month == other.month && dom == other.dom && dow == other.dow && timeDefinition == other.timeDefinition && time.equals(other.time) && timeEndOfDay == other.timeEndOfDay && standardOffset.equals(other.standardOffset) && offsetBefore.equals(other.offsetBefore) && offsetAfter.equals(other.offsetAfter);
  }
  return false;
}

private void initializeMembershipMatrix(){
  for (int i=0; i < points.size(); i++) {
    for (int j=0; j < k; j++) {
      membershipMatrix[i][j]=random.nextDouble();
    }
    membershipMatrix[i]=MathArrays.normalizeArray(membershipMatrix[i],1.0);
  }
}

public static void writeAll(OutputStream stream,Object[] o) throws Exception {
  ObjectOutputStream oos;
  int i;
  if (!(stream instanceof BufferedOutputStream)) {
    stream=new BufferedOutputStream(stream);
  }
  oos=new ObjectOutputStream(stream);
  for (i=0; i < o.length; i++) {
    oos.writeObject(o[i]);
  }
  oos.flush();
  oos.close();
}

public synchronized void reset(){
  mBufVertices.position(0);
  mBufColors.position(0);
  if (DRAW_TEXTURE) {
    mBufTexCoords.position(0);
  }
  for (int i=0; i < 4; ++i) {
    Vertex tmp=mArrTempVertices.get(0);
    tmp.set(mRectangle[i]);
    if (mFlipTexture) {
      tmp.mTexX*=mTextureRectBack.right;
      tmp.mTexY*=mTextureRectBack.bottom;
      tmp.mColor=mTexturePage.getColor(CurlPage.SIDE_BACK);
    }
 else {
      tmp.mTexX*=mTextureRectFront.right;
      tmp.mTexY*=mTextureRectFront.bottom;
      tmp.mColor=mTexturePage.getColor(CurlPage.SIDE_FRONT);
    }
    addVertex(tmp);
  }
  mVerticesCountFront=4;
  mVerticesCountBack=0;
  mBufVertices.position(0);
  mBufColors.position(0);
  if (DRAW_TEXTURE) {
    mBufTexCoords.position(0);
  }
  mDropShadowCount=mSelfShadowCount=0;
}

public boolean deleteAttachmentPoint(DatapathId sw,OFPort port){
  AttachmentPoint ap=new AttachmentPoint(sw,port,new Date(0));
  if (this.oldAPs != null) {
    ArrayList<AttachmentPoint> apList=new ArrayList<AttachmentPoint>();
    apList.addAll(this.oldAPs);
    int index=apList.indexOf(ap);
    if (index > 0) {
      apList.remove(index);
      this.oldAPs=apList;
    }
  }
  if (this.attachmentPoints != null) {
    ArrayList<AttachmentPoint> apList=new ArrayList<AttachmentPoint>();
    apList.addAll(this.attachmentPoints);
    int index=apList.indexOf(ap);
    if (index > 0) {
      apList.remove(index);
      this.attachmentPoints=apList;
      return true;
    }
  }
  return false;
}

public B css(@NonNls String classes){
  return css(classes,null);
}

public static ArgumentException adaptPropertyException(PropertyException e,AbstractManagedObjectDefinition<?,?> d){
  return new ArgumentException(e.getMessageObject());
}

private Consumer<Operation> createNotificationTarget(){
  return null;
}

public void write(byte[] bytes) throws IOException {
  dataOutput.write(bytes);
  offset+=bytes.length;
}

static synchronized boolean isShapingSupported(){
  if (isShapingSupported == null) {
    XToolkit.awtLock();
    try {
      isShapingSupported=XlibWrapper.XShapeQueryExtension(XToolkit.getDisplay(),XlibWrapper.larg1,XlibWrapper.larg2);
    }
  finally {
      XToolkit.awtUnlock();
    }
  }
  return isShapingSupported.booleanValue();
}

private boolean isIdChar(int ch){
  return isAlpha(ch) || isDigit(ch) || ch == '.' || ch == '-' || ch == '_' || ch == ':' || Character.isLetter(ch);
}

protected String handleTimeseal(String text) throws IOException {
  String result=text;
  if (LOG.isDebugEnabled())   LOG.debug("Entering handleTimeseal " + result);
  while (result.contains("[G]\0")) {
    sendAck();
    result=result.replaceFirst("\\[G\\]\0","");
    if (LOG.isDebugEnabled())     LOG.debug("Handled ack new result " + result);
  }
  if (LOG.isDebugEnabled())   LOG.debug("Leaving handleTimeseal " + result);
  return result;
}

public BerInputStream(InputStream in,int initialSize) throws IOException {
  this.in=in;
  buffer=new byte[initialSize];
  next();
  if (length != INDEFINIT_LENGTH) {
    if (buffer.length < (length + offset)) {
      byte[] newBuffer=new byte[length + offset];
      System.arraycopy(buffer,0,newBuffer,0,offset);
      buffer=newBuffer;
    }
  }
 else {
    isIndefinedLength=true;
    throw new ASN1Exception("Decoding indefinite length encoding is not supported");
  }
}

protected LocationHandler(Location location,Option... options){
  this.location=location;
  this.options=options.length == 0 ? EnumSet.noneOf(Option.class) : EnumSet.copyOf(Arrays.asList(options));
}

private void init(){
  _logger.debug("Initializing....");
  list=new ConcurrentLinkedQueue<ArrivedIndication>();
  IntermediateProcessor intermediateProcessor=new IntermediateProcessor(list,_processor);
  indicationProcessTimer=Executors.newSingleThreadScheduledExecutor();
  indicationProcessTimer.scheduleWithFixedDelay(intermediateProcessor,CIMConstants.INDICATION_PROCESS_INTERVAL,PERIODIC_DELAY,TimeUnit.SECONDS);
}

public void testResultSetMetadate() throws Exception {
  final int rows=1;
  final int tables=10;
  final int columns=100;
  Statement st=con.createStatement();
  StringBuilder sb=new StringBuilder();
  try {
    for (int t=0; t < tables; t++) {
      sb.setLength(0);
      sb.append("create table #TABLE");
      sb.append(t);
      sb.append("(ID int primary key");
      for (int c=0; c < columns; c++) {
        sb.append(",COLUMN");
        sb.append(c);
        sb.append(" int");
      }
      sb.append(")");
      st.execute(sb.toString());
    }
    for (int t=0; t < tables; t++) {
      sb.setLength(0);
      sb.append("insert into #TABLE");
      sb.append(t);
      sb.append(" values(?");
      for (int c=0; c < columns; c++) {
        sb.append(",?");
      }
      sb.append(")");
      PreparedStatement pst=con.prepareStatement(sb.toString());
      for (int r=0; r < rows; r++) {
        for (int c=0; c <= columns; c++) {
          pst.setInt(c + 1,r);
        }
        pst.addBatch();
      }
      Assert.assertEquals(rows,pst.executeBatch().length);
    }
    sb.setLength(0);
    sb.append("select * from ");
    for (int t=0; t < tables; t++) {
      sb.append(t > 0 ? "," : "");
      sb.append("#TABLE");
      sb.append(t);
    }
    if (tables > 1) {
      sb.append(" where ");
      for (int t=1; t < tables; t++) {
        sb.append(t > 1 ? " and " : "");
        sb.append("#TABLE");
        sb.append(t);
        sb.append(".id=");
        sb.append("#TABLE");
        sb.append(t - 1);
        sb.append(".id");
      }
    }
    ResultSet rs=st.executeQuery(sb.toString());
    ResultSetMetaData rsmd=rs.getMetaData();
    int toalColumns=rsmd.getColumnCount();
    Assert.assertEquals(tables * (columns + 1),toalColumns);
    for (int r=0; r < rows; r++) {
      assertTrue(rs.next());
    }
    int index=0;
    for (int t=0; t < tables; t++) {
      for (int c=1; c <= columns + 1; c++) {
        index++;
        Assert.assertEquals(c > 1 ? ("COLUMN" + (c - 2)) : "ID",rsmd.getColumnName(index));
        Assert.assertEquals(Types.INTEGER,rsmd.getColumnType(index));
        Assert.assertEquals("#TABLE" + t,rsmd.getTableName(index));
      }
    }
  }
  finally {
    for (int t=0; t < tables; t++) {
      dropTable("#TABLE" + t);
    }
  }
}

public static final String longToHexString(long a){
  StringBuffer sb=new StringBuffer(16);
  for (int i=0; i < 16; i++)   sb.append(NIBBLE[(int)(a >>> (60 - 4 * i)) & 0xf]);
  return sb.toString();
}

private Date watchCoreStartAt(SolrServer client,final long timeout,final Date min) throws InterruptedException, IOException, SolrServerException {
  final long sleepInterval=200;
  long timeSlept=0;
  SolrParams p=params("action","status","core","collection1");
  while (timeSlept < timeout) {
    QueryRequest req=new QueryRequest(p);
    req.setPath("/admin/cores");
    try {
      NamedList data=client.request(req);
      for (      String k : new String[]{"status","collection1"}) {
        Object o=data.get(k);
        assertNotNull("core status rsp missing key: " + k,o);
        data=(NamedList)o;
      }
      Date startTime=(Date)data.get("startTime");
      assertNotNull("core has null startTime",startTime);
      if (null == min || startTime.after(min)) {
        return startTime;
      }
    }
 catch (    SolrException e) {
      if (500 != e.code()) {
        throw e;
      }
    }
    timeSlept+=sleepInterval;
    Thread.sleep(sleepInterval);
  }
  fail("timed out waiting for collection1 startAt time to exceed: " + min);
  return min;
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String childData;
  doc=(Document)load("staff",true);
  elementList=doc.getElementsByTagName("address");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
  child.deleteData(16,8);
  childData=child.getData();
  assertEquals("characterdataDeleteDataMiddleAssert","1230 North Ave. Texas 98551",childData);
}

@Override public ParamsRequestCondition combine(ParamsRequestCondition other){
  Set<ParamExpression> set=new LinkedHashSet<>(this.expressions);
  set.addAll(other.expressions);
  return new ParamsRequestCondition(set);
}

@Override public boolean equals(Object obj){
  if (obj == this) {
    return true;
  }
  if (!(obj instanceof TimeSeriesCollection)) {
    return false;
  }
  TimeSeriesCollection that=(TimeSeriesCollection)obj;
  if (this.xPosition != that.xPosition) {
    return false;
  }
  if (this.domainIsPointsInTime != that.domainIsPointsInTime) {
    return false;
  }
  if (!ObjectUtilities.equal(this.data,that.data)) {
    return false;
  }
  return true;
}

private void parseRules(Attributes attributes){
  startMode=getModeAttribute(attributes,"startMode");
  if (startMode == null) {
    startMode=lookupCreateMode(IMPLICIT_MODE_NAME);
    md.currentMode=startMode;
    startMode.noteDefined(null);
  }
  startMode.noteUsed(locator);
  if (attributesSchema) {
    Mode wrapper=lookupCreateMode(WRAPPER_MODE_NAME);
    ActionSet actions=new ActionSet();
    actions.addNoResultAction(new AllowAction(new ModeUsage(startMode,startMode)));
    wrapper.bindElement(NamespaceSpecification.ANY_NAMESPACE,NamespaceSpecification.DEFAULT_WILDCARD,actions);
    wrapper.noteDefined(null);
    startMode=wrapper;
  }
  defaultSchemaType=getSchemaType(attributes);
}

public void fill(byte value){
  value&=0xf;
  Arrays.fill(data,(byte)(value << 4 | value));
}

public void makeImmutable(){
  if (isMutable) {
    isMutable=false;
  }
}

private static void parse(InputStream in,Encoding encoding,ContentHandler contentHandler) throws IOException, SAXException {
  try {
    XMLReader reader=new ExpatReader();
    reader.setContentHandler(contentHandler);
    InputSource source=new InputSource(in);
    source.setEncoding(encoding.expatName);
    reader.parse(source);
  }
 catch (  IOException e) {
    throw new AssertionError(e);
  }
}

@Override public List<Foo> findByField2(boolean field2){
  return findByField2(field2,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
}

public void addToAssociated(Message asMessage){
  associatedMessages.add(asMessage);
}

private static void parsePropertyAssignments(Properties p,String[] assignments){
  for (  String assignment : assignments) {
    int split=assignment.indexOf('=');
    String key=assignment.substring(0,split);
    String value=assignment.substring(split + 1);
    p.put(key,value);
  }
}

protected boolean switchProfiles(IProfile newSelection){
  if (newSelection == null) {
    return false;
  }
  if (mCurrentProfile == newSelection) {
    return true;
  }
  if (mAlternativeProfileHeaderSwitching) {
    int prevSelection=-1;
    if (mProfileFirst == newSelection) {
      prevSelection=1;
    }
 else     if (mProfileSecond == newSelection) {
      prevSelection=2;
    }
 else     if (mProfileThird == newSelection) {
      prevSelection=3;
    }
    IProfile tmp=mCurrentProfile;
    mCurrentProfile=newSelection;
    if (prevSelection == 1) {
      mProfileFirst=tmp;
    }
 else     if (prevSelection == 2) {
      mProfileSecond=tmp;
    }
 else     if (prevSelection == 3) {
      mProfileThird=tmp;
    }
  }
 else {
    if (mProfiles != null) {
      ArrayList<IProfile> previousActiveProfiles=new ArrayList<>(Arrays.asList(mCurrentProfile,mProfileFirst,mProfileSecond,mProfileThird));
      if (previousActiveProfiles.contains(newSelection)) {
        int position=-1;
        for (int i=0; i < 4; i++) {
          if (previousActiveProfiles.get(i) == newSelection) {
            position=i;
            break;
          }
        }
        if (position != -1) {
          previousActiveProfiles.remove(position);
          previousActiveProfiles.add(0,newSelection);
          mCurrentProfile=previousActiveProfiles.get(0);
          mProfileFirst=previousActiveProfiles.get(1);
          mProfileSecond=previousActiveProfiles.get(2);
          mProfileThird=previousActiveProfiles.get(3);
        }
      }
 else {
        mProfileThird=mProfileSecond;
        mProfileSecond=mProfileFirst;
        mProfileFirst=mCurrentProfile;
        mCurrentProfile=newSelection;
      }
    }
  }
  if (mOnlySmallProfileImagesVisible) {
    mProfileThird=mProfileSecond;
    mProfileSecond=mProfileFirst;
    mProfileFirst=mCurrentProfile;
  }
  buildProfiles();
  return false;
}

public static SearchScope valueOf(final int intValue){
  SearchScope result=null;
  if (0 <= intValue && intValue < ELEMENTS.length) {
    result=ELEMENTS[intValue];
  }
  if (result == null) {
    result=new SearchScope(intValue,"unknown(" + intValue + ")",Enum.UNKNOWN);
  }
  return result;
}

public static IPackageFragmentRoot addClassFolder(IJavaProject jproject,String containerName,IPath sourceAttachPath,IPath sourceAttachRoot) throws CoreException {
  IProject project=jproject.getProject();
  IContainer container=null;
  if (containerName == null || containerName.length() == 0) {
    container=project;
  }
 else {
    IFolder folder=project.getFolder(containerName);
    if (!folder.exists()) {
      CoreUtility.createFolder(folder,false,true,null);
    }
    container=folder;
  }
  IClasspathEntry cpe=JavaCore.newLibraryEntry(container.getFullPath(),sourceAttachPath,sourceAttachRoot);
  addToClasspath(jproject,cpe);
  return jproject.getPackageFragmentRoot(container);
}

private void previousWindow(Calendar startTime){
  if (isDaily()) {
    startTime.add(Calendar.DAY_OF_MONTH,-1);
  }
 else   if (isWeekly()) {
    startTime.add(Calendar.WEEK_OF_MONTH,-1);
  }
 else   if (isMonthly()) {
    int month=startTime.get(Calendar.MONTH);
    adjustDayOfMonth(startTime,month + -1);
  }
}

private <T>T[] copyElements(T[] a){
  if (head < tail) {
    System.arraycopy(elements,head,a,0,size());
  }
 else   if (head > tail) {
    int headPortionLen=elements.length - head;
    System.arraycopy(elements,head,a,0,headPortionLen);
    System.arraycopy(elements,0,a,headPortionLen,tail);
  }
  return a;
}

abstract void executeOnHandlerTask(Runnable task);

public static LatLng translatePoint(LatLng point,double distance,double bearing){
  distance=distance / 1000d;
  double lat=Math.toRadians(point.latitude);
  double lng=Math.toRadians(point.longitude);
  bearing=Math.toRadians(bearing);
  double Lat2=Math.asin((Math.sin(lat) * Math.cos(distance / EARTH)) + (Math.cos(lat) * Math.sin(distance / EARTH) * Math.cos(bearing)));
  double Long2=lng + Math.atan2(Math.sin(bearing) * Math.sin(distance / EARTH) * Math.cos(lat),Math.cos(distance / EARTH) - (Math.sin(lat) * Math.sin(Lat2)));
  Lat2=Math.toDegrees(Lat2);
  Long2=Math.toDegrees(Long2);
  return new LatLng(Lat2,Long2);
}

public Instance calcPivot(MyIdxList list1,MyIdxList list2,Instances insts){
  int classIdx=m_Instances.classIndex();
  double[] attrVals=new double[insts.numAttributes()];
  Instance temp;
  for (int i=0; i < list1.length(); i++) {
    temp=insts.instance(list1.get(i).idx);
    for (int k=0; k < temp.numValues(); k++) {
      if (temp.index(k) == classIdx) {
        continue;
      }
      attrVals[k]+=temp.valueSparse(k);
    }
  }
  for (int j=0; j < list2.length(); j++) {
    temp=insts.instance(list2.get(j).idx);
    for (int k=0; k < temp.numValues(); k++) {
      if (temp.index(k) == classIdx) {
        continue;
      }
      attrVals[k]+=temp.valueSparse(k);
    }
  }
  for (int j=0, numInsts=list1.length() + list2.length(); j < attrVals.length; j++) {
    attrVals[j]/=numInsts;
  }
  temp=new DenseInstance(1.0,attrVals);
  return temp;
}

default Optional<List<T>> parseOptional(byte[] parseMessage){
  return Optional.ofNullable(parse(parseMessage));
}

public static void initializeForClientUse(){
  EmbeddedUtils.initializeForClientUse();
}

private void createUser(SSOToken token,PersistentObject parentObj,Map attributes,String profileName) throws UMSException, AMEntryExistsException, AMException {
  String orgDN=getOrganizationDN(internalToken,parentObj.getDN());
  String entryDN=getNamingAttribute(AMObject.USER) + "=" + profileName+ ","+ parentObj.getDN();
  attributes=callBackHelper.preProcess(token,entryDN,orgDN,null,attributes,CallBackHelper.CREATE,AMObject.USER,false);
  AttrSet attrSet=CommonUtils.mapToAttrSet(attributes);
  makeNamingFirst(attrSet,getNamingAttribute(AMObject.USER),profileName);
  UserPasswordValidationHelper pluginImpl=new UserPasswordValidationHelper(token,orgDN);
  try {
    pluginImpl.validate(CommonUtils.attrSetToMap(attrSet));
  }
 catch (  AMException ame) {
    debug.error("DirectoryServicesImpl.createUser(): Invalid " + "characters for user",ame);
    throw ame;
  }
  TemplateManager tempMgr=TemplateManager.getTemplateManager();
  CreationTemplate creationTemp=tempMgr.getCreationTemplate("BasicUser",new Guid(orgDN),TemplateManager.SCOPE_ANCESTORS);
  attrSet=combineOCs(creationTemp,attrSet);
  PersistentObject user=new PersistentObject(creationTemp,attrSet);
  try {
    parentObj.addChild(user);
  }
 catch (  AccessRightsException e) {
    if (debug.warningEnabled()) {
      debug.warning("DirectoryServicesImpl.createUser(): Insufficient " + "Access rights to create user",e);
    }
    throw new AMException(token,"460");
  }
catch (  EntryAlreadyExistsException ee) {
    if (ComplianceServicesImpl.isComplianceUserDeletionEnabled()) {
      complianceImpl.checkIfDeletedUser(token,user.getDN());
    }
    if (debug.warningEnabled()) {
      debug.warning("DirectoryServicesImpl.createUser() User " + "already exists: ",ee);
    }
    throw new AMEntryExistsException(token,"328",ee);
  }
catch (  UMSException ue) {
    if (debug.warningEnabled()) {
      debug.warning("DirectoryServicesImpl.createUser(): Internal " + "Error occurred. Unable to create User Entry",ue);
    }
    processInternalException(token,ue,"324");
  }
  callBackHelper.postProcess(token,user.getDN(),orgDN,null,attributes,CallBackHelper.CREATE,AMObject.USER,false);
  AMUserEntryProcessed postPlugin=getUserPostPlugin();
  if (postPlugin != null) {
    Map attrMap=CommonUtils.attrSetToMap(attrSet);
    postPlugin.processUserAdd(token,user.getDN(),attrMap);
  }
  EmailNotificationHelper mailerObj=new EmailNotificationHelper(user.getDN());
  mailerObj.setUserCreateNotificationList();
  mailerObj.sendUserCreateNotification(attributes);
}

public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(2);
  newVector.addElement(new Option("\tNumber of folds used for cross validation (default 10).","X",1,"-X <number of folds>"));
  newVector.addElement(new Option("\tClassifier parameter options.\n" + "\teg: \"N 1 5 10\" Sets an optimisation parameter for the\n" + "\tclassifier with name -N, with lower bound 1, upper bound\n"+ "\t5, and 10 optimisation steps. The upper bound may be the\n"+ "\tcharacter 'A' or 'I' to substitute the number of\n"+ "\tattributes or instances in the training data,\n"+ "\trespectively. This parameter may be supplied more than\n"+ "\tonce to optimise over several classifier options\n"+ "\tsimultaneously.","P",1,"-P <classifier parameter>"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

private static int byteCompaction(int mode,int[] codewords,int codeIndex,StringBuilder result){
  if (mode == BYTE_COMPACTION_MODE_LATCH) {
    int count=0;
    long value=0;
    char[] decodedData=new char[6];
    int[] byteCompactedCodewords=new int[6];
    boolean end=false;
    int nextCode=codewords[codeIndex++];
    while ((codeIndex < codewords[0]) && !end) {
      byteCompactedCodewords[count++]=nextCode;
      value=900 * value + nextCode;
      nextCode=codewords[codeIndex++];
      if (nextCode == TEXT_COMPACTION_MODE_LATCH || nextCode == BYTE_COMPACTION_MODE_LATCH || nextCode == NUMERIC_COMPACTION_MODE_LATCH || nextCode == BYTE_COMPACTION_MODE_LATCH_6 || nextCode == BEGIN_MACRO_PDF417_CONTROL_BLOCK || nextCode == BEGIN_MACRO_PDF417_OPTIONAL_FIELD || nextCode == MACRO_PDF417_TERMINATOR) {
        codeIndex--;
        end=true;
      }
 else {
        if ((count % 5 == 0) && (count > 0)) {
          for (int j=0; j < 6; ++j) {
            decodedData[5 - j]=(char)(value % 256);
            value>>=8;
          }
          result.append(decodedData);
          count=0;
        }
      }
    }
    if (codeIndex == codewords[0] && nextCode < TEXT_COMPACTION_MODE_LATCH) {
      byteCompactedCodewords[count++]=nextCode;
    }
    for (int i=0; i < count; i++) {
      result.append((char)byteCompactedCodewords[i]);
    }
  }
 else   if (mode == BYTE_COMPACTION_MODE_LATCH_6) {
    int count=0;
    long value=0;
    boolean end=false;
    while (codeIndex < codewords[0] && !end) {
      int code=codewords[codeIndex++];
      if (code < TEXT_COMPACTION_MODE_LATCH) {
        count++;
        value=900 * value + code;
      }
 else {
        if (code == TEXT_COMPACTION_MODE_LATCH || code == BYTE_COMPACTION_MODE_LATCH || code == NUMERIC_COMPACTION_MODE_LATCH || code == BYTE_COMPACTION_MODE_LATCH_6 || code == BEGIN_MACRO_PDF417_CONTROL_BLOCK || code == BEGIN_MACRO_PDF417_OPTIONAL_FIELD || code == MACRO_PDF417_TERMINATOR) {
          codeIndex--;
          end=true;
        }
      }
      if ((count % 5 == 0) && (count > 0)) {
        char[] decodedData=new char[6];
        for (int j=0; j < 6; ++j) {
          decodedData[5 - j]=(char)(value & 0xFF);
          value>>=8;
        }
        result.append(decodedData);
        count=0;
      }
    }
  }
  return codeIndex;
}

public void addAll(@NonNull List<T> itemList){
synchronized (lock) {
    if (items == null) {
      items=new ArrayList<>();
    }
    items.addAll(itemList);
  }
  if (notifyOnChange) {
    if (items.size() - itemList.size() != 0) {
      notifyItemRangeChanged(items.size() - itemList.size(),itemList.size());
    }
 else {
      notifyDataSetChanged();
    }
  }
}

public void write(int a) throws IOException {
  outs.write(a);
  position++;
}

public void testInsert1() throws SQLException {
  DatabaseCreator.fillParentTable(conn);
  DatabaseCreator.fillFKStrictTable(conn);
  DatabaseCreator.fillFKCascadeTable(conn);
  statement.execute("INSERT INTO " + DatabaseCreator.FKSTRICT_TABLE + " VALUES(4, 1, 'testInsert')");
  statement.execute("INSERT INTO " + DatabaseCreator.FKCASCADE_TABLE + " VALUES(4, 1, 'testInsert')");
}

public boolean isStartsWithMode(){
  return startsWithMode;
}

public Builder withThreads(int threads){
  properties.setProperty(NettyOptions.THREADS,String.valueOf(Assert.argNot(threads,threads <= 0,"threads must be positive")));
  return this;
}

public void paintTabbedPaneTabAreaBackground(SynthContext context,Graphics g,int x,int y,int w,int h,int orientation){
  if (orientation == JTabbedPane.LEFT) {
    AffineTransform transform=new AffineTransform();
    transform.scale(-1,1);
    transform.rotate(Math.toRadians(90));
    paintBackground(context,g,y,x,h,w,transform);
  }
 else   if (orientation == JTabbedPane.RIGHT) {
    AffineTransform transform=new AffineTransform();
    transform.rotate(Math.toRadians(90));
    transform.translate(0,-(x + w));
    paintBackground(context,g,y,0,h,w,transform);
  }
 else   if (orientation == JTabbedPane.BOTTOM) {
    AffineTransform transform=new AffineTransform();
    transform.translate(x,y);
    paintBackground(context,g,0,0,w,h,transform);
  }
 else {
    paintBackground(context,g,x,y,w,h,null);
  }
}

@Override public void endCDATA(Augmentations augs) throws XNIException {
  try {
    if (fLexicalHandler != null) {
      fLexicalHandler.endCDATA();
    }
  }
 catch (  SAXException e) {
    throw new XNIException(e);
  }
}

public static MediaLocator createMediaLocator(String url){
  MediaLocator ml;
  if (url.indexOf(":") > 0 && (ml=new MediaLocator(url)) != null)   return ml;
  if (url.startsWith(File.separator)) {
    if ((ml=new MediaLocator("file:" + url)) != null)     return ml;
  }
 else {
    String file="file:" + System.getProperty("user.dir") + File.separator+ url;
    if ((ml=new MediaLocator(file)) != null)     return ml;
  }
  return null;
}

private static void invokeRemoteClearAndWait(VM remoteVM,VM thisVM){
  remoteVM.invoke(null);
  try {
    clearLatch.await();
  }
 catch (  InterruptedException e) {
    fail("wait for remote clear to complete failed");
  }
}

private int measureShort(int measureSpec){
  int result;
  int specMode=MeasureSpec.getMode(measureSpec);
  int specSize=MeasureSpec.getSize(measureSpec);
  if (specMode == MeasureSpec.EXACTLY) {
    result=specSize;
  }
 else {
    result=(int)(2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
    if (specMode == MeasureSpec.AT_MOST) {
      result=Math.min(result,specSize);
    }
  }
  return result;
}

public void key(String skey) throws SQLite.Exception {
synchronized (this) {
    byte ekey[]=null;
    if (skey != null && skey.length() > 0) {
      ekey=new byte[skey.length()];
      for (int i=0; i < skey.length(); i++) {
        char c=skey.charAt(i);
        ekey[i]=(byte)((c & 0xff) ^ (c >> 8));
      }
    }
    _key(ekey);
  }
}

public void testSharedTestData() throws Exception {
  assertEquals(testSqlDate,Date.valueOf(testLocalDate));
  assertEquals(testSqlTime,Time.valueOf(testLocalTime));
  assertEquals(testSqlTimeStamp,Timestamp.valueOf(testLocalDateTime));
  assertEquals(testLocalDate,testSqlDate.toLocalDate());
  assertEquals(testLocalTime,testSqlTime.toLocalTime());
  assertEquals(testLocalDateTime,testSqlTimeStamp.toLocalDateTime());
}

public static Cache.Entry makeRandomCacheEntry(byte[] data,boolean isExpired,boolean needsRefresh){
  Random random=new Random();
  Cache.Entry entry=new Cache.Entry();
  if (data != null) {
    entry.data=data;
  }
 else {
    entry.data=new byte[random.nextInt(1024)];
  }
  entry.etag=String.valueOf(random.nextLong());
  entry.serverDate=random.nextLong();
  entry.ttl=isExpired ? 0 : Long.MAX_VALUE;
  entry.softTtl=needsRefresh ? 0 : Long.MAX_VALUE;
  return entry;
}

public static final void isCDataWF(DOMErrorHandler errorHandler,DOMErrorImpl error,DOMLocatorImpl locator,String datavalue,boolean isXML11Version){
  if (datavalue == null || (datavalue.length() == 0)) {
    return;
  }
  char[] dataarray=datavalue.toCharArray();
  int datalength=dataarray.length;
  if (isXML11Version) {
    int i=0;
    while (i < datalength) {
      char c=dataarray[i++];
      if (XML11Char.isXML11Invalid(c)) {
        if (XMLChar.isHighSurrogate(c) && i < datalength) {
          char c2=dataarray[i++];
          if (XMLChar.isLowSurrogate(c2) && XMLChar.isSupplemental(XMLChar.supplemental(c,c2))) {
            continue;
          }
        }
        String msg=DOMMessageFormatter.formatMessage(DOMMessageFormatter.XML_DOMAIN,"InvalidCharInCDSect",new Object[]{Integer.toString(c,16)});
        reportDOMError(errorHandler,error,locator,msg,DOMError.SEVERITY_ERROR,"wf-invalid-character");
      }
 else       if (c == ']') {
        int count=i;
        if (count < datalength && dataarray[count] == ']') {
          while (++count < datalength && dataarray[count] == ']') {
          }
          if (count < datalength && dataarray[count] == '>') {
            String msg=DOMMessageFormatter.formatMessage(DOMMessageFormatter.XML_DOMAIN,"CDEndInContent",null);
            reportDOMError(errorHandler,error,locator,msg,DOMError.SEVERITY_ERROR,"wf-invalid-character");
          }
        }
      }
    }
  }
 else {
    int i=0;
    while (i < datalength) {
      char c=dataarray[i++];
      if (XMLChar.isInvalid(c)) {
        if (XMLChar.isHighSurrogate(c) && i < datalength) {
          char c2=dataarray[i++];
          if (XMLChar.isLowSurrogate(c2) && XMLChar.isSupplemental(XMLChar.supplemental(c,c2))) {
            continue;
          }
        }
        String msg=DOMMessageFormatter.formatMessage(DOMMessageFormatter.XML_DOMAIN,"InvalidCharInCDSect",new Object[]{Integer.toString(c,16)});
        reportDOMError(errorHandler,error,locator,msg,DOMError.SEVERITY_ERROR,"wf-invalid-character");
      }
 else       if (c == ']') {
        int count=i;
        if (count < datalength && dataarray[count] == ']') {
          while (++count < datalength && dataarray[count] == ']') {
          }
          if (count < datalength && dataarray[count] == '>') {
            String msg=DOMMessageFormatter.formatMessage(DOMMessageFormatter.XML_DOMAIN,"CDEndInContent",null);
            reportDOMError(errorHandler,error,locator,msg,DOMError.SEVERITY_ERROR,"wf-invalid-character");
          }
        }
      }
    }
  }
}

public void characters(char ch[],int start,int length){
  if (titlePending) {
    title.append(ch,start,length);
  }
 else   if (descPending) {
    desc.append(ch,start,length);
  }
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(1);
  newVector.addElement(new Option("\tIf set, estimator is run in debug mode and\n" + "\tmay output additional info to the console","D",0,"-D"));
  return newVector.elements();
}

private void closeInjectorResource(ShardId shardId,Injector shardInjector,Class<? extends Closeable>... toClose){
  for (  Class<? extends Closeable> closeable : toClose) {
    if (closeInjectorOptionalResource(shardId,shardInjector,closeable) == false) {
      logger.warn("[{}] no instance available for [{}], ignoring... ",shardId,closeable.getSimpleName());
    }
  }
}

public final void incrementIdCounterTo(int id){
  int diff=id - mIdCounter.get();
  if (diff < 0)   return;
  mIdCounter.addAndGet(diff);
  updateSharedPreference();
}

private static int clearBrandingResourceMapCache(ContentResolver cr,long providerId){
  StringBuilder where=new StringBuilder();
  where.append(Imps.BrandingResourceMapCache.PROVIDER_ID);
  where.append('=');
  where.append(providerId);
  return cr.delete(Imps.BrandingResourceMapCache.CONTENT_URI,where.toString(),null);
}

protected int checkLastLogin(){
  DateFormat formatter=new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss");
  Date now=newDate();
  Date loginTime=null;
  String lastLoginEnc=null;
  String lastLogin=null;
  String savedUserName=null;
  int retVal=0;
  if (timeSinceLastLoginAttribute != null) {
    HttpServletRequest req=getHttpServletRequest();
    if (req != null) {
      Cookie cookie=CookieUtils.getCookieFromReq(req,timeSinceLastLoginAttribute);
      if (cookie != null) {
        if (debug.messageEnabled()) {
          debug.message("{}.checkLastLogin: Found Cookie : {}",ADAPTIVE,timeSinceLastLoginAttribute);
        }
        lastLoginEnc=CookieUtils.getCookieValue(cookie);
        lastLogin=AccessController.doPrivileged(new DecodeAction(lastLoginEnc));
      }
      if (lastLogin != null) {
        String[] tokens=lastLogin.split("\\|");
        if (tokens.length == 3) {
          lastLogin=tokens[1];
          savedUserName=tokens[2];
        }
        if (!userName.equalsIgnoreCase(savedUserName)) {
          lastLogin=null;
        }
        if (lastLogin != null) {
          try {
            loginTime=formatter.parse(lastLogin);
            if ((now.getTime() - loginTime.getTime()) < timeSinceLastLoginValue * 1000 * 60* 60* 24L) {
              retVal=timeSinceLastLoginScore;
            }
          }
 catch (          ParseException pe) {
            if (debug.messageEnabled()) {
              debug.message("{}.checkLastLogin: lastLogin '{}' can't be parsed",ADAPTIVE,lastLogin,pe);
            }
          }
        }
      }
    }
    if (timeSinceLastLoginSave) {
      postAuthNMap.put("LOGINNAME",timeSinceLastLoginAttribute);
      lastLogin=formatter.format(now);
      lastLogin=UUID.randomUUID() + "|" + lastLogin+ "|"+ userName;
      lastLoginEnc=AccessController.doPrivileged(new EncodeAction(lastLogin));
      postAuthNMap.put("LOGINVALUE",lastLoginEnc);
    }
  }
  if (!timeSinceLastLoginInvert) {
    retVal=timeSinceLastLoginScore - retVal;
  }
  return retVal;
}

public byte[] toByteArray(){
  final int outLen=nonce_.length + (Long.SIZE / Byte.SIZE);
  final ByteBuffer out=ByteBuffer.allocate(outLen);
  out.put(nonce_);
  out.putLong(contentLength_);
  return out.array();
}

public void addInterface(CP ifc){
  addCPItem(ifc);
  interfaces.addElement(ifc);
}

public Builder addConstraint(@JobConstraint int constraint){
  int[] newConstraints=new int[mConstraints == null ? 1 : mConstraints.length + 1];
  if (mConstraints != null && mConstraints.length != 0) {
    System.arraycopy(mConstraints,0,newConstraints,0,mConstraints.length);
  }
  newConstraints[newConstraints.length - 1]=constraint;
  mConstraints=newConstraints;
  return this;
}

void cleanupParameters(String relayState){
  if (debug.messageEnabled()) {
    debug.message("SingleLogoutManager.cleanupParameters:" + " new relayState=" + relayState);
  }
  relayStateMap.remove(relayState);
  userSessionMap.remove(relayState);
  userIDMap.remove(relayState);
  isSOAPInitiatedMap.remove(relayState);
  isSOAPInitiatedMap.remove(relayState);
  isIDPInitiatedMap.remove(relayState);
  origProtocolMap.remove(relayState);
  protocolListMap.remove(relayState);
  realmMap.remove(relayState);
  idpEntityIDMap.remove(relayState);
  spEntityIDMap.remove(relayState);
  sloRequestXMLMap.remove(relayState);
  sloResponseXMLMap.remove(relayState);
  currentStatusMap.remove(relayState);
}

private boolean extraEntity(String outputString,int charToMap){
  boolean extra=false;
  if (charToMap < ASCII_MAX) {
switch (charToMap) {
case '"':
      if (!outputString.equals("&quot;"))       extra=true;
    break;
case '&':
  if (!outputString.equals("&amp;"))   extra=true;
break;
case '<':
if (!outputString.equals("&lt;")) extra=true;
break;
case '>':
if (!outputString.equals("&gt;")) extra=true;
break;
default :
extra=true;
}
}
return extra;
}

protected void drawPoint(Graphics2D g,PointStyle pointStyle,double x,double y,Color color,Color borderColor){
  Shape pointShape=pointStyle.createShape(x,y);
  g.setColor(color);
  g.fill(pointShape);
  g.setColor(borderColor);
  g.draw(pointShape);
}

public void testAndNotNegNegFirstLonger(){
  byte aBytes[]={-128,9,56,100,-2,-76,89,45,91,3,-15,35,26,-117,23,87,-25,-75};
  byte bBytes[]={-2,-3,-4,-4,5,14,23,39,48,57,66,5,14,23};
  int aSign=-1;
  int bSign=-1;
  byte rBytes[]={73,-92,-48,4,12,6,4,32,48,64,0,8,2};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.andNot(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

int retryTime(){
  return retryTime.decrementAndGet();
}

public DatepickerCombo(final Composite parent,final int style){
  this(parent,style,DateFormat.getDateTimeInstance());
}

public void testPowPositiveNum(){
  byte aBytes[]={50,-26,90,69,120,32,63,-103,-14,35};
  int aSign=1;
  int exp=5;
  byte rBytes[]={20,93,41,14,126,-114,49,87,-116,34,-4,-60,91,-112,74,-104,41,-42,-35,113,-100,31,-106,58,-128,-46,-109,-75,92,-106,-34,-13,4,19,-18,20,118,126,114,-28,121,-27,66,-110,124,-17,-92,69,-109};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.pow(exp);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

protected void drawMarkHilighted(Graphics2D g2,float x,float y){
  Rectangle2D bounds=mark.getBounds2D();
  float w=(float)bounds.getWidth();
  float h=(float)bounds.getHeight();
  x=x - (w / 2);
  y=y - (h / 2);
  g2.translate(x,y);
  if (hilightedMarkFillPaint != null) {
    g2.setPaint(hilightedMarkFillPaint);
    g2.fill(mark);
  }
  g2.setPaint(hilightedMarkPaint);
  g2.setStroke(hilightedMarkStroke);
  g2.draw(mark);
  g2.translate(-x,-y);
  Rectangle2D rect=new Rectangle2D.Float(x,y,w,h);
  markBounds.add(rect);
}

public static String trimTrailingWhitespace(String str){
  if (!hasLength(str)) {
    return str;
  }
  StringBuilder sb=new StringBuilder(str);
  while (sb.length() > 0 && Character.isWhitespace(sb.charAt(sb.length() - 1))) {
    sb.deleteCharAt(sb.length() - 1);
  }
  return sb.toString();
}

private static MksTicketResponse checkGetMksTicketResponse(MksTicketResponse mksTicketResponse) throws RpcException {
  logger.info("Checking {}",mksTicketResponse);
switch (mksTicketResponse.getResult()) {
case OK:
    break;
case SYSTEM_ERROR:
  throw new SystemErrorException(mksTicketResponse.getError());
case VM_NOT_FOUND:
throw new VmNotFoundException(mksTicketResponse.getError());
case INVALID_VM_POWER_STATE:
throw new InvalidVmPowerStateException(mksTicketResponse.getError());
default :
throw new RpcException(String.format("Unknown result: %s",mksTicketResponse.getResult()));
}
return mksTicketResponse;
}

@NotNull default B append(double d,int decimalPlaces) throws BufferOverflowException {
  if (decimalPlaces < 20) {
    double d2=d * Maths.tens(decimalPlaces);
    if (d2 <= Long.MAX_VALUE && d2 >= Long.MIN_VALUE) {
      return appendDecimal(Math.round(d2),decimalPlaces);
    }
  }
  return append(d);
}

public CompletableFuture<T> completeAsync(Supplier<? extends T> supplier,Executor executor){
  if (supplier == null || executor == null)   throw new NullPointerException();
  executor.execute(new AsyncSupply<T>(this,supplier));
  return this;
}

private MovieSubtitleChooserModel(){
  name=BUNDLE.getString("chooser.nothingfound");
}

protected SuballocatedIntVector findNamespaceContext(int elementNodeIndex){
  if (null != m_namespaceDeclSetElements) {
    int wouldBeAt=findInSortedSuballocatedIntVector(m_namespaceDeclSetElements,elementNodeIndex);
    if (wouldBeAt >= 0)     return (SuballocatedIntVector)m_namespaceDeclSets.elementAt(wouldBeAt);
    if (wouldBeAt == -1)     return null;
    wouldBeAt=-1 - wouldBeAt;
    int candidate=m_namespaceDeclSetElements.elementAt(--wouldBeAt);
    int ancestor=_parent(elementNodeIndex);
    if (wouldBeAt == 0 && candidate < ancestor) {
      int rootHandle=getDocumentRoot(makeNodeHandle(elementNodeIndex));
      int rootID=makeNodeIdentity(rootHandle);
      int uppermostNSCandidateID;
      if (getNodeType(rootHandle) == DTM.DOCUMENT_NODE) {
        int ch=_firstch(rootID);
        uppermostNSCandidateID=(ch != DTM.NULL) ? ch : rootID;
      }
 else {
        uppermostNSCandidateID=rootID;
      }
      if (candidate == uppermostNSCandidateID) {
        return (SuballocatedIntVector)m_namespaceDeclSets.elementAt(wouldBeAt);
      }
    }
    while (wouldBeAt >= 0 && ancestor > 0) {
      if (candidate == ancestor) {
        return (SuballocatedIntVector)m_namespaceDeclSets.elementAt(wouldBeAt);
      }
 else       if (candidate < ancestor) {
        do {
          ancestor=_parent(ancestor);
        }
 while (candidate < ancestor);
      }
 else       if (wouldBeAt > 0) {
        candidate=m_namespaceDeclSetElements.elementAt(--wouldBeAt);
      }
 else       break;
    }
  }
  return null;
}

public static java.sql.Timestamp nowTimestamp(){
  return getTimestamp(System.currentTimeMillis());
}

public int diff_commonSuffix(String text1,String text2){
  int text1_length=text1.length();
  int text2_length=text2.length();
  int n=Math.min(text1_length,text2_length);
  for (int i=1; i <= n; i++) {
    if (text1.charAt(text1_length - i) != text2.charAt(text2_length - i)) {
      return i - 1;
    }
  }
  return n;
}

private void translateMatrixAfterRotate(int axis,float trans,float prevImageSize,float imageSize,int prevViewSize,int viewSize,int drawableSize){
  if (imageSize < viewSize) {
    m[axis]=(viewSize - (drawableSize * m[Matrix.MSCALE_X])) * 0.5f;
  }
 else   if (trans > 0) {
    m[axis]=-((imageSize - viewSize) * 0.5f);
  }
 else {
    float percentage=(Math.abs(trans) + (0.5f * prevViewSize)) / prevImageSize;
    m[axis]=-((percentage * imageSize) - (viewSize * 0.5f));
  }
}

private void revokeEncryptPolicy(org.wso2.emm.agent.beans.Operation operation){
  boolean encryptStatus=(devicePolicyManager.getStorageEncryptionStatus() != devicePolicyManager.ENCRYPTION_STATUS_UNSUPPORTED && (devicePolicyManager.getStorageEncryptionStatus() == devicePolicyManager.ENCRYPTION_STATUS_ACTIVE || devicePolicyManager.getStorageEncryptionStatus() == devicePolicyManager.ENCRYPTION_STATUS_ACTIVATING));
  if (operation.isEnabled() && encryptStatus) {
    devicePolicyManager.setStorageEncryption(deviceAdmin,false);
  }
}

public JSONBuffer closeHash(){
  if (stack.empty() || stack.peek() != Operand.HASH) {
    throw new JSONException("Not in array context when closing.");
  }
  removeSeparator();
  buffer.append("}");
  stack.pop();
  addSeparator();
  return this;
}

private static byte[] generateSeed(){
  try {
    ByteArrayOutputStream seedBuffer=new ByteArrayOutputStream();
    DataOutputStream seedBufferOut=new DataOutputStream(seedBuffer);
    seedBufferOut.writeLong(System.currentTimeMillis());
    seedBufferOut.writeLong(System.nanoTime());
    seedBufferOut.write(BUILD_FINGERPRINT_AND_DEVICE_SERIAL);
    seedBufferOut.close();
    return seedBuffer.toByteArray();
  }
 catch (  IOException e) {
    throw new SecurityException("Failed to generate seed",e);
  }
}

private void init(SnmpMib myMib){
  if (debug == null) {
    final Key<Debug> key=Key.get(Debug.class,Names.named(CoreTokenConstants.CTS_MONITOR_DEBUG));
    debug=InjectorHolder.getInstance(key);
  }
  final List<OperationEntry> operationEntries=new ArrayList<OperationEntry>();
  final List<TokenEntry> tokenEntries=new ArrayList<TokenEntry>();
  for (  Enum e : crudItems) {
    final OperationEntry entry=new OperationEntry(myMib);
    entry.OperationType=e.name();
    entry.OperationTableIndex=(long)e.ordinal() + 1;
    operationEntries.add(entry);
  }
  for (  Enum e : tokenItems) {
    final TokenEntry entry=new TokenEntry(myMib);
    entry.TokenType=e.name();
    entry.TokenTableIndex=(long)e.ordinal() + 1;
    tokenEntries.add(entry);
  }
  try {
    for (    OperationEntry ce : operationEntries) {
      OperationTable.addEntry(ce);
    }
    for (    TokenEntry te : tokenEntries) {
      TokenTable.addEntry(te);
    }
    createCRUDOperationsPerTokenTypeTable(myMib,CtsCRUDOperationsPerTokenTypeTable,operationEntries,tokenEntries);
    createCRUDOperationsTable(myMib,CtsCRUDOperationsTable,operationEntries);
    createTokenOperationsTable(myMib,CtsTokenOperationsTable,tokenEntries);
  }
 catch (  SnmpStatusException e) {
    if (debug.messageEnabled()) {
      debug.error("Unable to set up CTS Monitoring tables. CTS monitoring not available.",e);
    }
  }
}

@Override public void disconnectionNotification(String eventName,Object source){
  m_listenees.remove(source);
  if (m_listenees.size() == 0) {
    m_listeneeTypes.clear();
  }
}

public X509Name(Vector oids,Vector values){
  this(oids,values,new X509DefaultEntryConverter());
}

@Override public ToDoubleFunction<Stream<Tuple2<F,Double>>> dist(Stream<Tuple2<F,Double>> features1){
  Object2DoubleMap<F> auxMap=new Object2DoubleOpenHashMap<>();
  auxMap.defaultReturnValue(0.0);
  DoubleAdder norm1=new DoubleAdder();
  features1.forEach(null);
  if (norm1.doubleValue() == 0) {
    return null;
  }
  return null;
}

public LoadMetadataDetails[] readLoadMetadata(String tableFolderPath){
  Gson gsonObjectToRead=new Gson();
  DataInputStream dataInputStream=null;
  BufferedReader buffReader=null;
  InputStreamReader inStream=null;
  String metadataFileName=tableFolderPath + CarbonCommonConstants.FILE_SEPARATOR + CarbonCommonConstants.LOADMETADATA_FILENAME;
  LoadMetadataDetails[] listOfLoadFolderDetailsArray;
  AtomicFileOperations fileOperation=new AtomicFileOperationsImpl(metadataFileName,FileFactory.getFileType(metadataFileName));
  try {
    if (!FileFactory.isFileExist(metadataFileName,FileFactory.getFileType(metadataFileName))) {
      return new LoadMetadataDetails[0];
    }
    dataInputStream=fileOperation.openForRead();
    inStream=new InputStreamReader(dataInputStream,Charset.forName(CarbonCommonConstants.DEFAULT_CHARSET));
    buffReader=new BufferedReader(inStream);
    listOfLoadFolderDetailsArray=gsonObjectToRead.fromJson(buffReader,LoadMetadataDetails[].class);
  }
 catch (  IOException e) {
    return new LoadMetadataDetails[0];
  }
 finally {
    closeStreams(buffReader,inStream,dataInputStream);
  }
  return listOfLoadFolderDetailsArray;
}

public String toInnerHtml(Node node,Appendable appendable){
  NodeVisitor renderer=createRenderer(appendable);
  node.visitChildren(renderer);
  return appendable.toString();
}

private void updateStorageViewInfo(VPlexStorageViewInfo storageViewInfo){
  VPlexApiDiscoveryManager discoveryMgr=_vplexApiClient.getDiscoveryManager();
  discoveryMgr.updateStorageViewInfo(storageViewInfo);
}

static List<String> decodeAll(Collection<String> eventKeys){
  List<String> eventIds=Lists.newArrayList();
  for (  String eventKey : eventKeys) {
    decodeTo(eventKey,eventIds);
  }
  return eventIds;
}

public Object[] toArray(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    Object[] a=new Object[count];
    int k=0;
    for (Node<E> p=first; p != null; p=p.next)     a[k++]=p.item;
    return a;
  }
  finally {
    lock.unlock();
  }
}

private void replaceTop(Scope topOfStack){
  stack.set(stack.size() - 1,topOfStack);
}

public void testZeroOne(){
  BigInteger aNumber=BigInteger.ZERO;
  BigInteger bNumber=BigInteger.ONE;
  BigInteger result=aNumber.and(bNumber);
  assertTrue(result.equals(BigInteger.ZERO));
  assertEquals("incorrect sign",0,result.signum());
}

public byte[] toByteArray(String ascii){
  if (ascii == null) {
    return EMPTY_BYTE_ARRAY;
  }
  return fromAscii(ascii.toCharArray());
}

public static boolean[] copyOfRange(boolean[] original,int start,int end){
  if (start <= end) {
    if (original.length >= start && 0 <= start) {
      int length=end - start;
      int copyLength=Math.min(length,original.length - start);
      boolean[] copy=new boolean[length];
      System.arraycopy(original,start,copy,0,copyLength);
      return copy;
    }
    throw new ArrayIndexOutOfBoundsException();
  }
  throw new IllegalArgumentException();
}

private void onColumnSync(){
  int syncPosition=Math.min(mSyncPosition,getCount() - 1);
  SparseArray<Double> positionHeightRatios=new SparseArray<Double>(syncPosition);
  for (int pos=0; pos < syncPosition; pos++) {
    final GridItemRecord rec=mPositionData.get(pos);
    if (rec == null)     break;
    Log.d(TAG,"onColumnSync:" + pos + " ratio:"+ rec.heightRatio);
    positionHeightRatios.append(pos,rec.heightRatio);
  }
  mPositionData.clear();
  if (DBG)   Log.d(TAG,"onColumnSync column width:" + mColumnWidth);
  for (int pos=0; pos < syncPosition; pos++) {
    final GridItemRecord rec=getOrCreateRecord(pos);
    final double heightRatio=positionHeightRatios.get(pos);
    final int height=(int)(mColumnWidth * heightRatio);
    rec.heightRatio=heightRatio;
    int top;
    int bottom;
    if (isHeaderOrFooter(pos)) {
      top=getLowestPositionedBottom();
      bottom=top + height;
      for (int i=0; i < mColumnCount; i++) {
        mColumnTops[i]=top;
        mColumnBottoms[i]=bottom;
      }
    }
 else {
      final int column=getHighestPositionedBottomColumn();
      top=mColumnBottoms[column];
      bottom=top + height + getChildTopMargin(pos)+ getChildBottomMargin();
      mColumnTops[column]=top;
      mColumnBottoms[column]=bottom;
      rec.column=column;
    }
    if (DBG)     Log.d(TAG,"onColumnSync position:" + pos + " top:"+ top+ " bottom:"+ bottom+ " height:"+ height+ " heightRatio:"+ heightRatio);
  }
  final int syncColumn=getHighestPositionedBottomColumn();
  setPositionColumn(syncPosition,syncColumn);
  int syncToBottom=mColumnBottoms[syncColumn];
  int offset=-syncToBottom + mSpecificTop;
  offsetAllColumnsTopAndBottom(offset);
  mDistanceToTop=-syncToBottom;
  System.arraycopy(mColumnBottoms,0,mColumnTops,0,mColumnCount);
}

private static Map<Direction,Sprite[]> splitTiles(SpriteStore st,Sprite orig){
  int twidth=NUM_ATTACK_FRAMES * TILE_SIZE;
  int theight=4 * TILE_SIZE;
  Map<Direction,Sprite[]> map=new EnumMap<Direction,Sprite[]>(Direction.class);
  int y=0;
  map.put(Direction.UP,st.getTiles(orig,0,y,NUM_ATTACK_FRAMES,twidth,theight));
  y+=theight;
  map.put(Direction.RIGHT,st.getTiles(orig,0,y,NUM_ATTACK_FRAMES,twidth,theight));
  y+=theight;
  map.put(Direction.DOWN,st.getTiles(orig,0,y,NUM_ATTACK_FRAMES,twidth,theight));
  y+=theight;
  map.put(Direction.LEFT,st.getTiles(orig,0,y,NUM_ATTACK_FRAMES,twidth,theight));
  return map;
}

void incrementSchema(String schemaName){
  if (schemaName != null) {
    Integer count=dbMap.get(schemaName);
    if (count == null)     dbMap.put(schemaName,1);
 else     dbMap.put(schemaName,count.intValue() + 1);
  }
  lastDb=schemaName;
}

private String buildEventData() throws JAXBException {
  if (_eventParameters != null) {
    try {
      JAXBContext jaxbContext=JAXBContext.newInstance(EventParameters.class);
      Marshaller marshaller=jaxbContext.createMarshaller();
      marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT,true);
      Writer outWriter=new StringWriter();
      StreamResult result=new StreamResult(outWriter);
      marshaller.marshal(_eventParameters,result);
      return outWriter.toString();
    }
 catch (    JAXBException e) {
      _log.error("Failed to generate user message file. " + e.getMessage());
      throw e;
    }
  }
 else {
    return null;
  }
}

public boolean isProjected(){
  return projected;
}

private boolean normalizeAttrValue(XMLAttributes attributes,int index){
  boolean leadingSpace=true;
  boolean spaceStart=false;
  boolean readingNonSpace=false;
  int count=0;
  int eaten=0;
  String attrValue=attributes.getValue(index);
  char[] attValue=new char[attrValue.length()];
  fBuffer.setLength(0);
  attrValue.getChars(0,attrValue.length(),attValue,0);
  for (int i=0; i < attValue.length; i++) {
    if (attValue[i] == ' ') {
      if (readingNonSpace) {
        spaceStart=true;
        readingNonSpace=false;
      }
      if (spaceStart && !leadingSpace) {
        spaceStart=false;
        fBuffer.append(attValue[i]);
        count++;
      }
 else {
        if (leadingSpace || !spaceStart) {
          eaten++;
        }
      }
    }
 else {
      readingNonSpace=true;
      spaceStart=false;
      leadingSpace=false;
      fBuffer.append(attValue[i]);
      count++;
    }
  }
  if (count > 0 && fBuffer.charAt(count - 1) == ' ') {
    fBuffer.setLength(count - 1);
  }
  String newValue=fBuffer.toString();
  attributes.setValue(index,newValue);
  return !attrValue.equals(newValue);
}

private Shape decodeMarkInterior(int width,int height){
  double left=width / 2.0 - 4;
  double top=height / 2.0 - 4;
  path.reset();
  path.moveTo(left + 1,top + 1);
  path.lineTo(left + 8,top + 1);
  path.lineTo(left + 4,top + 6);
  path.closePath();
  return path;
}

public MonotoneSolver(final ILatticeGraph<GraphNode> graph,final Lattice lattice,final IStateVector<GraphNode,LatticeElement> startVector,final ITransformationProvider<GraphNode,LatticeElement> transformationProvider,final IGraphWalker<GraphNode,ObjectType> walker){
  if (graph == null) {
    throw new IllegalArgumentException("Error: Graph argument can not be null");
  }
  if (lattice == null) {
    throw new IllegalArgumentException("Error: Lattice argument can not be null");
  }
  if (startVector == null) {
    throw new IllegalArgumentException("Error: Start vector argument can not be null");
  }
  if (transformationProvider == null) {
    throw new IllegalArgumentException("Error: Transformation list argument can not be null");
  }
  final List<GraphNode> nodes=graph.getNodes();
  if (nodes.size() != startVector.size()) {
    throw new IllegalArgumentException(String.format("Error: Invalid start vector (%d states for %d nodes)",startVector.size(),nodes.size()));
  }
  for (  final GraphNode node : nodes) {
    if (!startVector.hasState(node)) {
      throw new IllegalArgumentException("Error: Node " + node + " does not have a state in the initial state vector");
    }
  }
  this.graph=graph;
  this.lattice=lattice;
  this.state=startVector;
  this.transformationList=transformationProvider;
  this.walker=walker;
}

private Stat preparePortStatInfo(String nativeId,URI resourceId,long iops,long timeSample){
  Stat ipPortStat=new Stat();
  ipPortStat.setServiceType(Constants._File);
  ipPortStat.setTimeCollected(timeSample);
  ipPortStat.setResourceId(resourceId);
  ipPortStat.setNativeGuid(nativeId);
  ipPortStat.setTotalIOs(iops);
  return ipPortStat;
}

public void testInsert3() throws SQLException {
  DatabaseCreator.fillParentTable(conn);
  DatabaseCreator.fillFKStrictTable(conn);
  statement.execute("INSERT INTO " + DatabaseCreator.TEST_TABLE5 + " SELECT id AS testId, value AS testValue "+ "FROM "+ DatabaseCreator.FKSTRICT_TABLE+ " WHERE name_id = 1");
  ResultSet r=statement.executeQuery("SELECT COUNT(*) FROM " + DatabaseCreator.TEST_TABLE5);
  r.next();
  assertEquals("Should be 2 rows",2,r.getInt(1));
  r.close();
}

public int compareTo(AppVersion other){
  int result=major - other.major;
  if (result == 0) {
    result=minor - other.minor;
  }
  if (result == 0) {
    result=patch - other.patch;
  }
  if (result == 0 && (milestone > -1 || other.milestone > -1)) {
    if (milestone > -1) {
      if (other.milestone == -1) {
        result=-1;
      }
 else {
        result=milestone - other.milestone;
      }
    }
 else {
      if (other.milestone > -1) {
        result=1;
      }
    }
  }
  if (result == 0 && !ObjectUtil.nullEquals(modifier,other.modifier)) {
    if (modifier == null) {
      result=1;
    }
 else     if (other.modifier == null) {
      result=-1;
    }
 else {
      result=modifier.compareToIgnoreCase(other.modifier);
    }
  }
  return result;
}

public StreamConsumer(InputStream stream,String charset){
  in=new BufferedInputStream(stream);
  this.charset=charset;
  thread.start();
}

public MediaSize(int x,int y,int units){
  super(x,y,units);
  if (x > y) {
    throw new IllegalArgumentException("X dimension > Y dimension");
  }
  sizeVector.add(this);
}

private Peer constructPeerPojo(final PeerData peerData) throws PeerException {
  Preconditions.checkNotNull(peerData,"Peer info could not be null.");
  try {
    PeerInfo peerInfo=fromJson(peerData.getInfo(),PeerInfo.class);
    if (localPeerId.equals(peerData.getId())) {
      localPeer.setPeerInfo(peerInfo);
      return localPeer;
    }
    RemotePeerImpl remotePeer=new RemotePeerImpl(localPeerId,securityManager,peerInfo,messenger,commandResponseListener,messageResponseListener,provider,this);
    RelationInfoMeta relationInfoMeta=new RelationInfoMeta();
    Map<String,String> traits=relationInfoMeta.getRelationTraits();
    traits.put("receiveHeartbeats","allow");
    traits.put("sendHeartbeats","allow");
    traits.put("hostTemplates","allow");
    User peerOwner=identityManager.getUserByKeyId(identityManager.getPeerOwnerId());
    RelationMeta relationMeta=new RelationMeta(peerOwner,localPeer,remotePeer,localPeer.getKeyId());
    Relation relation=relationManager.buildRelation(relationInfoMeta,relationMeta);
    relation.setRelationStatus(RelationStatus.VERIFIED);
    relationManager.saveRelation(relation);
    return remotePeer;
  }
 catch (  Exception e) {
    throw new PeerException("Could not create peer instance.",e);
  }
}

public void loadWorkspaceContents(String xml) throws BlocklyParserException {
  loadWorkspaceContents(new ByteArrayInputStream(xml.getBytes()));
}

private boolean compareAndDecrementWorkerCount(int expect){
  return ctl.compareAndSet(expect,expect - 1);
}

public boolean load(String fileLocation,int type){
  if (mHasLoaded) {
    return false;
  }
  String shaderCode;
  try {
    shaderCode=ShaderUtils.getStringFromFileInAssets(mContext,fileLocation,true);
  }
 catch (  IOException e) {
    e.printStackTrace();
    mIsCompiled=false;
    return false;
  }
  mHasLoaded=true;
  mShaderId=GLES20.glCreateShader(type);
  if (mShaderId == 0) {
    String msg=(type == GLES20.GL_VERTEX_SHADER ? "Vertex" : "Fragment");
    Log.e(TAG,"Error creating shader of type " + msg);
    return false;
  }
  GLES20.glShaderSource(mShaderId,shaderCode);
  GLES20.glCompileShader(mShaderId);
  int[] compileStatus=new int[1];
  GLES20.glGetShaderiv(mShaderId,GLES20.GL_COMPILE_STATUS,compileStatus,0);
  mIsCompiled=(compileStatus[0] == GLES20.GL_TRUE);
  if (!mIsCompiled) {
    String compileError=GLES20.glGetShaderInfoLog(mShaderId);
    Log.e(TAG,compileError);
    GLES20.glDeleteShader(mShaderId);
  }
  return mIsCompiled && mHasLoaded;
}

public void addChild(PdfLayer childLayer){
  if (childLayer.parent != null)   throw new IllegalArgumentException("Illegal argument: childLayer");
  childLayer.parent=this;
  if (children == null)   children=new ArrayList<>();
  children.add(childLayer);
}

protected void moveRandomly(OMPoint point,double factor,Projection proj){
  double hor=Math.random() - .5;
  double vert=Math.random() - .5;
  Point2D mapPoint=proj.forward(point.getLat(),point.getLon());
  mapPoint.setLocation(mapPoint.getX() + (hor * factor),mapPoint.getY() + (vert * factor));
  Point2D llp=proj.inverse(mapPoint);
  point.setLat(llp.getY());
  point.setLon(llp.getX());
}

private void initializeContext() throws IOException {
  String workingDir=System.getProperty("user.dir");
  File dataset=FileUtils.getFile(workingDir + "/src/main/resources/dataset/emptyFlatXmlDataSet.xml");
  File log4jFile=FileUtils.getFile(workingDir + "/src/main/resources/log4j/log4j.properties");
  File datasetFolder=new File(destinationFolder + "/src/test/resources/dataSets");
  File log4jFolder=new File(destinationFolder + "/src/test/resources");
  dataset.mkdirs();
  log4jFile.mkdirs();
  FileUtils.copyFileToDirectory(dataset,datasetFolder);
  FileUtils.copyFileToDirectory(log4jFile,log4jFolder);
}

protected boolean isTokenChar(char ch){
  if (Character.isLetterOrDigit(ch))   return true;
  if (Character.isISOControl(ch))   return false;
  if (isHttpSeparator(ch))   return false;
  return true;
}

public static int parseInt(FXGNode node,String value,String name){
  try {
    return Integer.parseInt(value);
  }
 catch (  NumberFormatException e) {
    throw new FXGException(node.getStartLine(),node.getStartColumn(),"InvalidIntegerValue",name,value);
  }
}

public static double invSqrtQuick(final double value){
  if (USE_JDK_MATH) {
    return 1 / Math.sqrt(value);
  }
  return Double.longBitsToDouble(0x5FE6EB50C7B537A9L - (Double.doubleToRawLongBits(value) >> 1));
}

public void close() throws IOException {
  articleIdxWriter.close();
  chronoIdxWriter.close();
  revisionIdxWriter.close();
}

private final byte[] zeroExtend(byte[] dataToPad){
  assert null != dataToPad;
  final int targetLength=4;
  if (targetLength <= dataToPad.length)   return dataToPad;
  byte padded[]=new byte[targetLength];
  for (int i=0; i < dataToPad.length; i++)   padded[i]=dataToPad[i];
  for (int i=dataToPad.length; i < padded.length; i++)   padded[i]=(byte)0;
  return padded;
}

public void applyFromResolveInfo(PackageManager pm,ResolveInfo info,WidgetPreviewLoader loader){
  mInfo=info;
  CharSequence label=info.loadLabel(pm);
  mWidgetName.setText(label);
  mWidgetDims.setText(String.format(mDimensionsFormatString,1,1));
  mWidgetPreviewLoader=loader;
}

private static boolean isCertificateEntry(String alias) throws KeyStoreException {
  return sKeyStore.isCertificateEntry(alias);
}

public void test_unwrap_06(){
  String host="new host";
  int port=8080;
  ByteBuffer[] bbA={ByteBuffer.allocate(100),ByteBuffer.allocate(10),ByteBuffer.allocate(100)};
  ByteBuffer bb=ByteBuffer.allocate(10);
  SSLEngine sse=getEngine(host,port);
  sse.setUseClientMode(true);
  try {
    SSLEngineResult res=sse.unwrap(bb,bbA,0,bbA.length);
    assertEquals(0,res.bytesConsumed());
    assertEquals(0,res.bytesProduced());
  }
 catch (  Exception ex) {
    fail("Unexpected exception: " + ex);
  }
}

public static Window windowForWordInPosition(int windowSize,int wordPos,List<String> sentence){
  List<String> window=new ArrayList<>();
  List<String> onlyTokens=new ArrayList<>();
  int contextSize=(int)Math.floor((windowSize - 1) / 2);
  for (int i=wordPos - contextSize; i <= wordPos + contextSize; i++) {
    if (i < 0)     window.add("<s>");
 else     if (i >= sentence.size())     window.add("</s>");
 else {
      onlyTokens.add(sentence.get(i));
      window.add(sentence.get(i));
    }
  }
  String wholeSentence=StringUtils.join(sentence);
  String window2=StringUtils.join(onlyTokens);
  int begin=wholeSentence.indexOf(window2);
  int end=begin + window2.length();
  return new Window(window,begin,end);
}

private void fillIn(ClassSymbol c){
  if (completionFailureName == c.fullname) {
    throw new CompletionFailure(c,"user-selected completion failure by class name");
  }
  currentOwner=c;
  warnedAttrs.clear();
  JavaFileObject classfile=c.classfile;
  if (classfile != null) {
    JavaFileObject previousClassFile=currentClassFile;
    try {
      if (filling) {
        Assert.error("Filling " + classfile.toUri() + " during "+ previousClassFile);
      }
      currentClassFile=classfile;
      if (verbose) {
        log.printVerbose("loading",currentClassFile.toString());
      }
      if (classfile.getKind() == JavaFileObject.Kind.CLASS) {
        filling=true;
        try {
          bp=0;
          buf=readInputStream(buf,classfile.openInputStream());
          readClassFile(c);
          if (!missingTypeVariables.isEmpty() && !foundTypeVariables.isEmpty()) {
            List<Type> missing=missingTypeVariables;
            List<Type> found=foundTypeVariables;
            missingTypeVariables=List.nil();
            foundTypeVariables=List.nil();
            filling=false;
            ClassType ct=(ClassType)currentOwner.type;
            ct.supertype_field=types.subst(ct.supertype_field,missing,found);
            ct.interfaces_field=types.subst(ct.interfaces_field,missing,found);
          }
 else           if (missingTypeVariables.isEmpty() != foundTypeVariables.isEmpty()) {
            Name name=missingTypeVariables.head.tsym.name;
            throw badClassFile("undecl.type.var",name);
          }
        }
  finally {
          missingTypeVariables=List.nil();
          foundTypeVariables=List.nil();
          filling=false;
        }
      }
 else {
        if (sourceCompleter != null) {
          sourceCompleter.complete(c);
        }
 else {
          throw new IllegalStateException("Source completer required to read " + classfile.toUri());
        }
      }
      return;
    }
 catch (    IOException ex) {
      throw badClassFile("unable.to.access.file",ex.getMessage());
    }
 finally {
      currentClassFile=previousClassFile;
    }
  }
 else {
    JCDiagnostic diag=diagFactory.fragment("class.file.not.found",c.flatname);
    throw newCompletionFailure(c,diag);
  }
}

public void enable(){
  List<Entry> entries=removeIntersectedEntries(tree.getSelectedEntries());
  boolean enable=true;
  for (  Entry entry : entries) {
    if (entry == null) {
      enable=false;
      break;
    }
    if (!requiredSelectionType.isInstance(entry)) {
      enable=false;
      break;
    }
    if (needsWriteAccess && entry.isReadOnly()) {
      enable=false;
      break;
    }
  }
  if (entries.isEmpty()) {
    enable=false;
  }
  setEnabled(enable);
}

public String toString(){
  StringBuffer buffer=new StringBuffer();
  if (getName() != null) {
    buffer.append(getName());
  }
  buffer.append("\n");
  if (getEnclosingTypeName() != null) {
    buffer.append(getEnclosingTypeName());
  }
  buffer.append("\n");
  if (getSourceName() != null) {
    buffer.append(getSourceName());
  }
  return buffer.toString();
}

protected void mark() throws CompilationFailedException {
  applyToSourceUnits(mark);
}

private boolean labelToKeepRec(Node v,Set<Integer> ids,NodeSet keep){
  boolean hasBelow=false;
  int id=(Integer)v.getInfo();
  if (ids.size() == 0 || ids.contains(id))   hasBelow=true;
  for (Edge e=v.getFirstOutEdge(); e != null; e=v.getNextOutEdge(e)) {
    Node w=e.getTarget();
    if (labelToKeepRec(w,ids,keep))     hasBelow=true;
  }
  if (hasBelow)   keep.add(v);
  return hasBelow;
}

public void putExternalProperty(SSOToken clientToken,String key,String value) throws SessionException {
  try {
    sessionUtilsWrapper.checkPermissionToSetProperty(clientToken,key,value);
  }
 catch (  SessionException se) {
    fireSessionEvent(SessionEventType.PROTECTED_PROPERTY);
    sessionLogging.logEvent(toSessionInfo(),SessionEventType.PROTECTED_PROPERTY);
    throw se;
  }
  internalPutProperty(key,value);
  debug.message("Updated protected property after validating client identity and permissions");
}

void addEdge(MethodParameter in,MethodParameter out){
  Set<MethodParameter> outs=graph.get(in);
  if (outs == null) {
    outs=new HashSet<>();
    graph.put(in,outs);
  }
  outs.add(out);
}

public static int[] randomNumber(int n){
  int[] num=new int[n];
  for (int i=0; i < num.length; i++) {
    num[i]=(int)(rGen.nextDouble() * 10);
  }
  return num;
}

public boolean isDeviceTV(Context context){
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    UiModeManager uiManager=(UiModeManager)context.getSystemService(Context.UI_MODE_SERVICE);
    return uiManager != null && uiManager.getCurrentModeType() == Configuration.UI_MODE_TYPE_TELEVISION;
  }
  return false;
}

protected void rcptToAuthors(final RecipientType rt){
  for (  final Account.Id id : authors) {
    add(rt,id);
  }
}

public Object createShapeData(Shape shape){
  return null;
}

private ProtectionSet createProtectionSet(RecoverPointVolumeIngestionContext volumeContext){
  UnManagedProtectionSet umpset=volumeContext.getUnManagedProtectionSet();
  ProtectionSet pset=VolumeIngestionUtil.findOrCreateProtectionSet(volumeContext,volumeContext.getUnmanagedVolume(),umpset,_dbClient);
  volumeContext.setManagedProtectionSet(pset);
  return pset;
}

public synchronized void dispose(){
  if (isDisposed) {
    return;
  }
  isDisposed=true;
  ArrayList<PooledConnection> list=recycledConnections;
  for (int i=0, size=list.size(); i < size; i++) {
    closeConnection(list.get(i));
  }
}

public static String appendParameter(CtClass type,String descriptor){
  int i=descriptor.indexOf(')');
  if (i < 0)   return descriptor;
 else {
    StringBuffer newdesc=new StringBuffer();
    newdesc.append(descriptor.substring(0,i));
    toDescriptor(newdesc,type);
    newdesc.append(descriptor.substring(i));
    return newdesc.toString();
  }
}

public void writeTo(byte[] bytes,int offset) throws IOException {
  flush();
  final long end=file.length;
  long pos=0;
  int buffer=0;
  int bytesUpto=offset;
  while (pos < end) {
    int length=BUFFER_SIZE;
    long nextPos=pos + length;
    if (nextPos > end) {
      length=(int)(end - pos);
    }
    System.arraycopy(file.getBuffer(buffer++),0,bytes,bytesUpto,length);
    bytesUpto+=length;
    pos=nextPos;
  }
}

protected int calcnCluster(){
  return 1;
}

public static void validateServiceName(String serviceCode,String serviceName){
  if (!serviceName.startsWith(serviceCode)) {
    throw new CodedException(X_INCONSISTENT_HEADERS,"Malformed SOAP message: " + "service code does not match in header and body");
  }
}

protected static void initCMYKColorspace(){
  if (ICCProfileForRGB == null) {
    rgbModel=new ComponentColorModel(rgbCS,new int[]{8,8,8},false,false,ColorModel.OPAQUE,DataBuffer.TYPE_BYTE);
  }
 else {
    final int compCount=rgbCS.getNumComponents();
    final int[] values=new int[compCount];
    for (int i=0; i < compCount; i++) {
      values[i]=8;
    }
    rgbModel=new ComponentColorModel(rgbCS,values,false,false,ColorModel.OPAQUE,DataBuffer.TYPE_BYTE);
  }
  final FastColorSpaceCMYK cmykCS=new FastColorSpaceCMYK();
  CSToRGB=new ColorConvertOp(cmykCS,rgbCS,ColorSpaces.hints);
}

private void addNotificationCategorySeparator(JPanel panel){
  JSeparator jsep=new JSeparator(SwingConstants.HORIZONTAL);
  jsep.setMaximumSize(new Dimension(Short.MAX_VALUE,7));
  panel.add(jsep);
}

public void clearDraggedOperators(){
  this.draggedOperators=Collections.unmodifiableList(Collections.<Operator>emptyList());
}

public FakeClock resetTime(){
  fakeNowMs.set(baseTimeMs);
  return this;
}

public void removeUpdateListener(AnimatorUpdateListener listener){
  if (mUpdateListeners == null) {
    return;
  }
  mUpdateListeners.remove(listener);
  if (mUpdateListeners.size() == 0) {
    mUpdateListeners=null;
  }
}

public GSERParser(CharSequence value){
  Reject.checkNotNull(value);
  this.gserValue=value.toString();
  this.pos=0;
  this.length=value.length();
}

public Slice(double start,double end,boolean visible){
  this.start=start;
  this.end=end;
  this.visible=visible;
}

public static void injectToTarget(Object target,Bundle data){
  if (target == null || data == null)   return;
  ParcelInjector injector;
  try {
    injector=getInjectorByClass(target.getClass());
    injector.injectDataToTarget(target,data);
  }
 catch (  Exception e) {
    throw new RuntimeException(String.format("inject failed : %s",e.getMessage()),e);
  }
}

public static boolean areBackendInitiators(List<Initiator> initiators){
  boolean backend=true;
  for (  Initiator initiator : initiators) {
    if (!NullColumnValueGetter.isNullURI(initiator.getHost()) && URIUtil.isType(initiator.getHost(),Host.class)) {
      backend=false;
      break;
    }
  }
  return backend;
}

public boolean containsValue(Object value){
  return map.containsValue(value);
}

private void writeAttribute(java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (namespace.equals("")) {
    xmlWriter.writeAttribute(attName,attValue);
  }
 else {
    registerPrefix(xmlWriter,namespace);
    xmlWriter.writeAttribute(namespace,attName,attValue);
  }
}

public boolean hasSkins(){
  return System.getProperty("skin") != null || System.getProperty("dskin") != null;
}

public String toString(){
  StringBuilder builder=new StringBuilder();
  if (type != null) {
    name(builder);
    attributes(builder);
  }
  return builder.toString();
}

public void makeImmutable(){
  if (!isImmutable) {
    overflowEntries=overflowEntries.isEmpty() ? Collections.<K,V>emptyMap() : Collections.unmodifiableMap(overflowEntries);
    isImmutable=true;
  }
}

protected void parseNames(){
  while (reader.hasNextCharacter()) {
    final char character=next();
    if (Strings.isWhitespace(character)) {
      addName();
      continue;
    }
 else     if (character == blockOpening) {
      addName();
      break;
    }
 else {
      builder.append(character);
    }
  }
  if (GdxArrays.isEmpty(tags)) {
    throwException("No tag names chosen.");
  }
}

protected void writeZip64CentralDirectory() throws IOException {
  if (zip64Mode == Zip64Mode.Never) {
    return;
  }
  if (!hasUsedZip64 && (cdOffset >= ZIP64_MAGIC || cdLength >= ZIP64_MAGIC || entries.size() >= ZIP64_MAGIC_SHORT)) {
    hasUsedZip64=true;
  }
  if (!hasUsedZip64) {
    return;
  }
  long offset=written;
  writeOut(ZIP64_EOCD_SIG);
  writeOut(ZipEightByteInteger.getBytes(SHORT + SHORT + WORD+ WORD+ DWORD+ DWORD+ DWORD+ DWORD));
  writeOut(ZipShort.getBytes(ZIP64_MIN_VERSION));
  writeOut(ZipShort.getBytes(ZIP64_MIN_VERSION));
  writeOut(LZERO);
  writeOut(LZERO);
  byte[] num=ZipEightByteInteger.getBytes(entries.size());
  writeOut(num);
  writeOut(num);
  writeOut(ZipEightByteInteger.getBytes(cdLength));
  writeOut(ZipEightByteInteger.getBytes(cdOffset));
  writeOut(ZIP64_EOCD_LOC_SIG);
  writeOut(LZERO);
  writeOut(ZipEightByteInteger.getBytes(offset));
  writeOut(ONE);
}

public boolean isCacheValid(int row){
  return m_valid.get(row);
}

public void finish() throws IOException {
  checkClosed();
  write();
}

public final void readFully(byte[] b,int off,int len) throws java.io.IOException {
  if (len < 0) {
    throw new IndexOutOfBoundsException();
  }
  int n=0;
  while (n < len) {
    int count=read(b,off + n,len - n);
    if (count < 0) {
      throw new EOFException();
    }
    n+=count;
  }
}

public SVGRasterizer(InputStream istream){
  this.input=new TranscoderInput(istream);
}

private static Future<?> directExecute(Runnable runnable,int delay){
  Future<?> future=null;
  if (delay > 0) {
    if (!(executor instanceof ScheduledExecutorService)) {
      throw new IllegalArgumentException("The executor set does not support scheduling");
    }
    ScheduledExecutorService scheduledExecutorService=(ScheduledExecutorService)executor;
    future=scheduledExecutorService.schedule(runnable,delay,TimeUnit.MILLISECONDS);
  }
 else {
    if (executor instanceof ExecutorService) {
      ExecutorService executorService=(ExecutorService)executor;
      future=executorService.submit(runnable);
    }
 else {
      executor.execute(runnable);
    }
  }
  return future;
}

@Override public void onPatchVersionCheckFail(File patchFile,SharePatchInfo oldPatchInfo,String patchFileVersion,boolean isUpgradePatch){
  TinkerLog.i(TAG,"patchReporter: patch version exist. path:%s, version:%s, isUpgrade:%b",patchFile.getAbsolutePath(),patchFileVersion,isUpgradePatch);
}

public void init(boolean forEncryption,CipherParameters params) throws IllegalArgumentException {
  if (!(params instanceof ParametersWithIV)) {
    throw new IllegalArgumentException("Grain v1 Init parameters must include an IV");
  }
  ParametersWithIV ivParams=(ParametersWithIV)params;
  byte[] iv=ivParams.getIV();
  if (iv == null || iv.length != 8) {
    throw new IllegalArgumentException("Grain v1 requires exactly 8 bytes of IV");
  }
  if (!(ivParams.getParameters() instanceof KeyParameter)) {
    throw new IllegalArgumentException("Grain v1 Init parameters must include a key");
  }
  KeyParameter key=(KeyParameter)ivParams.getParameters();
  workingIV=new byte[key.getKey().length];
  workingKey=new byte[key.getKey().length];
  lfsr=new int[STATE_SIZE];
  nfsr=new int[STATE_SIZE];
  out=new byte[2];
  System.arraycopy(iv,0,workingIV,0,iv.length);
  System.arraycopy(key.getKey(),0,workingKey,0,key.getKey().length);
  reset();
}

GridMemcachedMessage(){
}

public ExtensionForcedUser(){
  super();
  initialize();
}

private String replacePlaceholders(String query,Map<String,String> replacements){
  String resultQuery=query;
  for (  Map.Entry<String,String> entry : replacements.entrySet()) {
    resultQuery=resultQuery.replace(entry.getKey(),entry.getValue());
  }
  return resultQuery;
}

protected int readFully(InputStream in,byte buffer[]) throws java.io.IOException {
  for (int i=0; i < buffer.length; i++) {
    int q=in.read();
    if (q == -1)     return i;
    buffer[i]=(byte)q;
  }
  return buffer.length;
}

public void destroyBucket(AutoMixBucket bucket){
  SharedPreferences prefs=getPrefs();
  SharedPreferences.Editor editor=prefs.edit();
  Set<String> set=new TreeSet<>(prefs.getStringSet(PREF_BUCKETS_IDS,new TreeSet<String>()));
  set.remove(bucket.getSessionId());
  editor.putStringSet(PREF_BUCKETS_IDS,set);
  editor.apply();
  mBuckets.remove(bucket);
}

public void clearChanged(){
  changed.set(false);
}

public static Object[] convertParams(Object[] source,Class<?>[] target){
  Object[] converted=new Object[target.length];
  for (int i=0; i < target.length; i++) {
    converted[i]=convert(source[i],target[i]);
  }
  return converted;
}

private void rProbeAndAddHopsToCandidateSet(Hop hop,HashSet<Hop> probeSet,HashSet<Pair<Hop,Hop>> candSet){
  if (hop.getVisited() == VisitStatus.DONE)   return;
  if (hop.getInput() != null)   for (  Hop c : hop.getInput()) {
    if (!probeSet.contains(c))     rProbeAndAddHopsToCandidateSet(c,probeSet,candSet);
 else {
      candSet.add(new Pair<Hop,Hop>(hop,c));
    }
  }
  hop.setVisited(VisitStatus.DONE);
}

protected void parse(DataInputStream stream) throws Exception {
  value=stream.readInt();
}

List<String> asList(){
  if (more) {
    list.set(list.size() - 1,"others");
  }
  return Collections.unmodifiableList(list);
}

public void testNotNeg(){
  byte aBytes[]={-128,56,100,-2,-76,89,45,91,3,-15,35,26,-117};
  int aSign=-1;
  byte rBytes[]={0,-128,56,100,-2,-76,89,45,91,3,-15,35,26,-118};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.not();
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public CacheStatResource(String resourceIdentifier,CacheResource cacheResource){
  super(resourceIdentifier);
  this.cacheResource=cacheResource;
  relativeCacheStats=cacheResource.getCacheStats();
}

public Map<URI,List<URI>> addTargetVolumeFullCopies(){
  List<URI> fullCopies=Lists.newArrayList();
  Map<URI,List<URI>> fullCopiesMap=new HashMap<>();
  URI targetCG=null;
  for (  URI volumeId : uris(volumeIds)) {
    List<URI> targets=getTargets(volumeId);
    for (    URI target : targets) {
      if (targetCG == null) {
        targetCG=getConsistencyGroup(target);
      }
      List<URI> volumeFullCopies=getFullCopies(target);
      fullCopies.addAll(volumeFullCopies);
      fullCopiesMap.put(target,volumeFullCopies);
    }
  }
  if (!fullCopies.isEmpty() && targetCG != null) {
    BlockStorageUtils.addVolumesToConsistencyGroup(targetCG,fullCopies);
  }
  return fullCopiesMap;
}

WeatherAttribute(int max,String... desc){
  maxValue=max;
  value=Rand.rand(max + 1);
  this.desc=desc;
}

protected ClassLoader(ClassLoader parentLoader){
  SecurityManager sc=System.getSecurityManager();
  if (sc != null) {
    sc.checkCreateClassLoader();
  }
  parentClassLoader=parentLoader;
  definedPackages=new HashMap<String,Package>();
  loadedClasses=new HashMap<String,Class<?>>();
  packageCertificates=new Hashtable<String,Certificate[]>();
}

static public double log10(double inValue){
  return Math.log(inValue) / Math.log(10.0);
}

void updateFeatureCounts(int[] translationIds,List<List<RichTranslation<IString,String>>> nbestLists){
  for (int i=0; i < translationIds.length; i++) {
    Set<String> features=new HashSet<String>();
    for (    RichTranslation<IString,String> trans : nbestLists.get(i)) {
      for (      FeatureValue<String> f : trans.features) {
        features.add(f.name);
      }
    }
synchronized (clippedFeatureIndex) {
      for (      String fName : features) {
        Set<Integer> ids=clippedFeatureIndex.get(fName);
        if (ids == null) {
          ids=new TreeSet<Integer>();
          clippedFeatureIndex.put(fName,ids);
        }
        if (ids.size() < minFeatureCount) {
          ids.add(translationIds[i]);
        }
      }
    }
  }
}

public static void d(String tag,String msg,Object... args){
  if (sLevel > LEVEL_DEBUG) {
    return;
  }
  if (args.length > 0) {
    msg=String.format(msg,args);
  }
  Log.d(tag,msg);
}

private void addNativeExpressAds(){
  for (int i=0; i <= mRecyclerViewItems.size(); i+=ITEMS_PER_AD) {
    final NativeExpressAdView adView=new NativeExpressAdView(MainActivity.this);
    mRecyclerViewItems.add(i,adView);
  }
}

protected boolean accept(final IChangeRecord record){
  return true;
}

public final T allocate(){
  AtomicInteger topRef=_top;
  while (true) {
    final int top=topRef.get();
    if (top <= 0) {
      return null;
    }
 else     if (topRef.compareAndSet(top,top - 1)) {
      T value=_freeStack.getAndSet(top - 1,null);
      if (value != null) {
        return value;
      }
    }
  }
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public void putResponseGetAllResources(List<String> resources){
  logger.debug("ResourceSet from ZeppelinServer");
  ResourceSet resourceSet=new ResourceSet();
  for (  String res : resources) {
    RemoteResource resource=gson.fromJson(res,RemoteResource.class);
    resource.setResourcePoolConnector(this);
    resourceSet.add(resource);
  }
synchronized (getAllResourceResponse) {
    getAllResourceResponse.add(resourceSet);
    getAllResourceResponse.notify();
  }
}

public static Map<String,Set<String>> toAvPairMap(final Set<String> names,final String value){
  if (value == null) {
    return Collections.EMPTY_MAP;
  }
  if (names == null || names.isEmpty()) {
    return new HashMap();
  }
  final Map<String,Set<String>> map=new HashMap<String,Set<String>>(names.size());
  final Set<String> set=new HashSet<String>(1);
  set.add(value);
  for (  final String name : names) {
    map.put(name,set);
  }
  return map;
}

public PrefixTagger(MaxentTagger maxentTagger){
  super(maxentTagger);
  this.leftWindow=leftWindow();
  this.rightWindow=rightWindow();
  this.offset=leftWindow();
}

@Override public void performRequest(String request){
  if (request.compareTo("Stop") == 0) {
    stop();
  }
 else {
    throw new IllegalArgumentException(request + " not supported (Associator)");
  }
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(4);
  newVector.addElement(new Option("\tMaximum number of parents","P",1,"-P <nr of parents>"));
  newVector.addElement(new Option("\tUse arc reversal operation.\n\t(default false)","R",0,"-R"));
  newVector.addElement(new Option("\tInitial structure is empty (instead of Naive Bayes)","N",0,"-N"));
  newVector.addElement(new Option("\tInitial structure specified in XML BIF file","X",1,"-X"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

public synchronized void kill(){
  running=false;
  closed=true;
  try {
    STDIN.close();
  }
 catch (  IOException e) {
  }
  try {
    process.destroy();
  }
 catch (  Exception e) {
  }
}

private Iterable<int[]> splitArray(int[] arr){
  int len1=arr.length / 2;
  int len2=len1 + arr.length % 2;
  int[] a1=new int[len1];
  int[] a2=new int[len2];
  System.arraycopy(arr,0,a1,0,len1);
  System.arraycopy(arr,len1,a2,0,len2);
  return Arrays.asList(a1,a2);
}

public void put(E e) throws InterruptedException {
  checkNotNull(e);
  final ReentrantLock lock=this.lock;
  lock.lockInterruptibly();
  try {
    while (count == items.length)     notFull.await();
    enqueue(e);
  }
  finally {
    lock.unlock();
  }
}

@Ignore @Test public void shouldCaptureQueryEventData() throws Exception {
  startClient(null);
  counters.consumeAll(5,TimeUnit.SECONDS);
  List<QueryEventData> allQueryEvents=recordedEventData(QueryEventData.class,-1);
  allQueryEvents.forEach(null);
}

private List<ValidationError> checkForNoRatesPresent(){
  if (overheadRates != null && overheadRates.isEmpty())   return Arrays.asList(new ValidationError("overheadrate","estimate.overhead.altleastone_overheadrate_needed"));
 else   return null;
}

public void modifyExport(String id,String zoneName,IsilonExport exp) throws IsilonException {
  String uriWithZoneName=getURIWithZoneName(id,zoneName);
  modify(_baseUrl.resolve(URI_NFS_EXPORTS),uriWithZoneName,"export",exp);
}

public double measureNumIterations(){
  return m_Classifiers.size();
}

public void markPotentiallyUnknownBit(LocalVariableBinding local){
  if (this != DEAD_END) {
    this.tagBits|=NULL_FLAG_MASK;
    int position;
    long mask;
    if ((position=local.id + this.maxFieldCount) < BitCacheSize) {
      mask=1L << position;
      isTrue((this.nullBit1 & mask) == 0,"Adding 'unknown' mark in unexpected state");
      this.nullBit4|=mask;
      if (COVERAGE_TEST_FLAG) {
        if (CoverageTestId == 46) {
          this.nullBit4=~0;
        }
      }
    }
 else {
      int vectorIndex=(position / BitCacheSize) - 1;
      if (this.extra == null) {
        int length=vectorIndex + 1;
        this.extra=new long[extraLength][];
        for (int j=2; j < extraLength; j++) {
          this.extra[j]=new long[length];
        }
      }
 else {
        int oldLength;
        if (vectorIndex >= (oldLength=this.extra[2].length)) {
          for (int j=2; j < extraLength; j++) {
            System.arraycopy(this.extra[j],0,(this.extra[j]=new long[vectorIndex + 1]),0,oldLength);
          }
        }
      }
      mask=1L << (position % BitCacheSize);
      isTrue((this.extra[2][vectorIndex] & mask) == 0,"Adding 'unknown' mark in unexpected state");
      this.extra[5][vectorIndex]|=mask;
      if (COVERAGE_TEST_FLAG) {
        if (CoverageTestId == 47) {
          this.extra[5][vectorIndex]=~0;
        }
      }
    }
  }
}

public int count(){
  return dict.size();
}

public static boolean aboveOrEqual(int a,int b){
  return Integer.compareUnsigned(a,b) >= 0;
}

protected void awaitCompletionComputeValuesAndShutdown(){
{
    runExecutorAndAwaitCompletion();
  }
  if (logger.isDebugEnabled())   printStats();
  executor.shutdown();
  while (!executor.isTerminated()) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
  }
}

public Flags flagList() throws DecodingException {
  Flags flags=new Flags();
  nextWordChar();
  consumeChar('(');
  CharacterValidator validator=new NoopCharValidator();
  String nextWord=consumeWord(validator);
  while (!nextWord.endsWith(")")) {
    DecoderUtils.setFlag(nextWord,flags);
    nextWord=consumeWord(validator);
  }
  if (nextWord.length() > 1) {
    int parenIndex=nextWord.indexOf(')');
    if (parenIndex > 0) {
      final String nextFlag=nextWord.substring(0,parenIndex);
      DecoderUtils.setFlag(nextFlag,flags);
    }
  }
  return flags;
}

protected RestClientItf createNewRestClient(URI endpoint,String username,String password,String version,Client client){
  XtremIOClient xioClient=null;
  if (version != null && !version.isEmpty() && Integer.valueOf(version.split(DOT_OPERATOR)[0]) >= XIO_MIN_4X_VERSION) {
    xioClient=new XtremIOV2Client(endpoint,username,password,client);
  }
 else {
    xioClient=new XtremIOV1Client(endpoint,username,password,client);
  }
  return xioClient;
}

public String diff_text2(LinkedList<Diff> diffs){
  StringBuilder text=new StringBuilder();
  for (  Diff aDiff : diffs) {
    if (aDiff.operation != Operation.DELETE) {
      text.append(aDiff.text);
    }
  }
  return text.toString();
}

static private <E>List<E> toJavaList(List<E> values,int rows,int columns){
  List<E> result=new ArrayList<>(values.size());
  for (int i=0; i < values.size(); i++) {
    int row=i / columns;
    int column=i % columns;
    E value=values.get((column * rows) + row);
    result.add(value);
  }
  return result;
}

public void lineArrow(final int x0,final int y0,final int x1,final int y1,final int sidelength,final int padding,final long lineColor,final long arrowColor){
  final double dx=x1 - x0;
  final double dy=y1 - y0;
  final double angle=Math.atan2(dy,dx);
  final double d=Math.sqrt((dx * dx + dy * dy));
  final double arrowtip=d - padding;
  final double arrowlength=TL * sidelength;
  final double arrowbase=arrowtip - arrowlength;
  final double xn=Math.cos(angle);
  final double yn=Math.sin(angle);
  final int xt=x0 + ((int)(arrowtip * xn));
  final int yt=y0 + ((int)(arrowtip * yn));
  final double xb=x0 + arrowbase * xn;
  final double yb=y0 + arrowbase * yn;
  final double sl2=sidelength / 2.0;
  final double xk=sl2 * Math.cos(angle + PI2);
  final double yk=sl2 * Math.sin(angle + PI2);
  final int x2=(int)(xb + xk);
  final int y2=(int)(yb + yk);
  final int x3=(int)(xb - xk);
  final int y3=(int)(yb - yk);
  setColor(lineColor);
  line(x0,y0,(int)xb,(int)yb,100);
  setColor(arrowColor);
  line(x2,y2,x3,y3,100);
  line(x2,y2,xt,yt,100);
  line(x3,y3,xt,yt,100);
}

public String toHtml(Node node,Appendable appendable){
  NodeVisitor renderer=createRenderer(appendable);
  node.visit(renderer);
  return appendable.toString();
}

public static String[] toCommaSeparatedArray(String str) throws IOException {
  return str.split("\\s*,\\s*");
}

@Override public final Object put(String key,Object value){
  return set(key,value);
}

private void appendFloatType(StringBuilder sb,FieldType fieldType,int fieldWidth){
  sb.append("FLOAT");
}

private HttpEntity paramsToEntity(RequestParams params,ResponseHandlerInterface responseHandler){
  HttpEntity entity=null;
  try {
    if (params != null) {
      entity=params.getEntity(responseHandler);
    }
  }
 catch (  Throwable t) {
    if (responseHandler != null)     responseHandler.sendFailureMessage(0,null,null,t);
 else     t.printStackTrace();
  }
  return entity;
}

public static boolean isInstallableEditing(EnumSet<EmbeddingFlags> flagSet){
  return flagSet.isEmpty();
}

public void testMultiplyScalePosPos(){
  String a="1231212478987482988429808779810457634781384756794987";
  int aScale=15;
  String b="747233429293018787918347987234564568";
  int bScale=10;
  String c="92000312286217574978643009574114545567010139156902666284589309.1880727173060570190220616";
  int cScale=25;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  BigDecimal result=aNumber.multiply(bNumber);
  assertEquals("incorrect value",c,result.toString());
  assertEquals("incorrect scale",cScale,result.scale());
}

public Iterator<Resource> resourceIterator(){
  return resourceList.iterator();
}

public double nextUniform(double lower,double upper){
  if (upper <= lower) {
    throw new MathIllegalArgumentException(LocalizedCoreFormats.LOWER_BOUND_NOT_BELOW_UPPER_BOUND,lower,upper);
  }
  if (Double.isInfinite(lower) || Double.isInfinite(upper)) {
    throw new MathIllegalArgumentException(LocalizedCoreFormats.INFINITE_BOUND);
  }
  if (Double.isNaN(lower) || Double.isNaN(upper)) {
    throw new MathIllegalArgumentException(LocalizedCoreFormats.NAN_NOT_ALLOWED);
  }
  final double u=randomGenerator.nextDouble();
  return u * upper + (1 - u) * lower;
}

public ShapeTileBox bounding_box(){
  PlaPointInt lower_left=new PlaPointInt(Math.floor(v_x),Math.floor(v_y));
  PlaPointInt upper_right=new PlaPointInt(Math.ceil(v_x),Math.ceil(v_y));
  return new ShapeTileBox(lower_left,upper_right);
}

public void addInterface(String name){
  cachedInterfaces=null;
  int info=constPool.addClassInfo(name);
  if (interfaces == null) {
    interfaces=new int[1];
    interfaces[0]=info;
  }
 else {
    int n=interfaces.length;
    int[] newarray=new int[n + 1];
    System.arraycopy(interfaces,0,newarray,0,n);
    newarray[n]=info;
    interfaces=newarray;
  }
}

private void biomeFactor(final int x,final int z,final double addHeight){
  float smoothVolatility=0.0F;
  float smoothHeight=0.0F;
  float biomeWeightSum=0.0F;
  final Biome centerBiomeConfig=getCenterBiome(x,z);
  final int lookRadius=this.maxSmoothRadius;
  for (int nextX=-lookRadius; nextX <= lookRadius; nextX++) {
    for (int nextZ=-lookRadius; nextZ <= lookRadius; nextZ++) {
      final Biome biome=getOffsetBiome(x,z,nextX,nextZ);
      final float biomeHeight=biome.getBaseHeight();
      final float biomeVolatility=biome.getHeightVariation();
      double biomeWeight=calcBiomeWeight(nextX,nextZ,biomeHeight);
      biomeWeight=Math.abs(biomeWeight);
      if (biomeHeight > centerBiomeConfig.getBaseHeight()) {
        biomeWeight/=2.0F;
      }
      smoothVolatility+=biomeVolatility * biomeWeight;
      smoothHeight+=biomeHeight * biomeWeight;
      biomeWeightSum+=biomeWeight;
    }
  }
  smoothVolatility/=biomeWeightSum;
  smoothHeight/=biomeWeightSum;
  this.biomeVolatility=smoothVolatility * 0.9 + 0.1;
  this.biomeVolatility*=4.0 / 3.0;
  this.biomeHeight=0.75 / 64.0;
  this.biomeHeight+=smoothHeight * 17.0 / 64.0;
  this.biomeHeight+=0.2 * addHeight * 17.0 / 64.0;
}

@SuppressWarnings("unchecked") public static MIssue create(Properties ctx,String hexInput){
  HashMap hmIn=null;
  try {
    byte[] byteArray=Secure.convertHexString(hexInput);
    ByteArrayInputStream bIn=new ByteArrayInputStream(byteArray);
    ObjectInputStream oIn=new ObjectInputStream(bIn);
    hmIn=(HashMap)oIn.readObject();
  }
 catch (  Exception e) {
    s_log.log(Level.SEVERE,"",e);
    return null;
  }
  MIssue issue=new MIssue(ctx,(HashMap<String,String>)hmIn);
  return issue;
}

void flushBuffer() throws IOException {
  se.flushBuffer();
}

public static void showUnknownError(Context context,Throwable t,DialogInterface.OnCancelListener listener){
  showError(context,String.format(context.getString(R.string.afc_pmsg_unknown_error),t),listener);
}

private static boolean makeConcavePolygon(final PlanetModel planetModel,final GeoCompositePolygon rval,final MutableBoolean seenConcave,final EdgeBuffer edgeBuffer,final List<GeoPolygon> holes,final GeoPoint testPoint){
  if (edgeBuffer.size() == 0) {
    return true;
  }
  if (seenConcave.value) {
    throw new IllegalArgumentException("Illegal polygon; polygon edges intersect each other");
  }
  seenConcave.value=true;
  if (edgeBuffer.size() < 3) {
    throw new IllegalArgumentException("Illegal polygon; polygon edges intersect each other");
  }
  final List<GeoPoint> points=new ArrayList<GeoPoint>(edgeBuffer.size());
  final BitSet internalEdges=new BitSet(edgeBuffer.size() - 1);
  Edge edge=edgeBuffer.pickOne();
  boolean isInternal=false;
  for (int i=0; i < edgeBuffer.size(); i++) {
    points.add(edge.startPoint);
    if (i < edgeBuffer.size() - 1) {
      internalEdges.set(i,edge.isInternal);
    }
 else {
      isInternal=edge.isInternal;
    }
    edge=edgeBuffer.getNext(edge);
  }
  if (testPoint != null && holes != null && holes.size() > 0) {
    final GeoPolygon testPolygon=new GeoConcavePolygon(planetModel,points,null,internalEdges,isInternal);
    if (testPolygon.isWithin(testPoint)) {
      return false;
    }
  }
  final GeoPolygon realPolygon=new GeoConcavePolygon(planetModel,points,holes,internalEdges,isInternal);
  if (testPoint != null && (holes == null || holes.size() == 0)) {
    if (realPolygon.isWithin(testPoint)) {
      return false;
    }
  }
  rval.addShape(realPolygon);
  return true;
}

public void addButton(final JButton theButton){
  customButtonPanel.add(theButton);
}

void swapCursor(long monthMillis,@Nullable EventCursor cursor,ContentObserver contentObserver){
  for (int i=0; i < mMonths.size(); i++) {
    if (CalendarUtils.sameMonth(monthMillis,mMonths.get(i))) {
      swapCursor(i,cursor,contentObserver);
      break;
    }
  }
}

final boolean close(){
  return !closed.getAndSet(true);
}

public byte[] encryptRaw(byte[] baseKey,int usage,byte[] ivec,byte[] plaintext,int start,int len) throws GeneralSecurityException, KrbCryptoException {
  if (!KeyUsage.isValid(usage)) {
    throw new GeneralSecurityException("Invalid key usage number: " + usage);
  }
  byte[] output=encryptCTS(baseKey,usage,ivec,null,plaintext,start,len,false);
  return output;
}

private void fixbug(Document doc){
  Element element=doc.getDocumentElement();
  if (element != null) {
    fixbug(element);
  }
}

private String toHexString(byte[] block){
  StringBuffer buf=new StringBuffer();
  int len=block.length;
  for (int i=0; i < len; i++) {
    byte2hex(block[i],buf);
    if (i < len - 1) {
      buf.append(":");
    }
  }
  return buf.toString();
}

public static String removeDeployUri(String uri){
  if ((uri == null) || (uri.length() == 0)) {
    return uri;
  }
  int loc=uri.indexOf("/",1);
  if (loc == -1) {
    return null;
  }
 else {
    return uri.substring(loc);
  }
}

public static double loss(double pred,double y){
  return Math.abs(y - pred);
}

public boolean needSignatureFileBytes(){
  return sfBytes == null;
}

public void insert(T object,int index){
synchronized (mLock) {
    mObjects.add(index,object);
  }
  if (mNotifyOnChange)   notifyItemInserted(index);
}

private void loadTargetModules(){
  for (  final Module module : target.getModules()) {
    module.addListener(moduleKeeperListener);
    modules.add(module);
    if (!module.isLoaded()) {
      try {
        module.load();
      }
 catch (      final CouldntLoadDataException e) {
        errorLoadingModule(module,e);
        return;
      }
    }
  }
  step++;
}

public BloomFilter(double falsePositiveProbability,int expectedNumberOfElements){
  this(Math.ceil(-(Math.log(falsePositiveProbability) / Math.log(2))) / Math.log(2),expectedNumberOfElements,(int)Math.ceil(-(Math.log(falsePositiveProbability) / Math.log(2))));
}

public synchronized void notifyBand(final int times,final int onTime,final int offTime,final int flashColour){
  final List<BLEAction> list=new ArrayList<>();
  byte[] colors=convertRgb(flashColour);
  list.add(new WaitAction(150));
  list.add(new WriteAction(Profile.UUID_CHAR_CONTROL_POINT,Protocol.VIBRATION_WITHOUT_LED));
  list.add(new WaitAction(300));
  list.add(new WriteAction(Profile.UUID_CHAR_CONTROL_POINT,colors));
  queue(list);
}

public void test_ConstructorLjava_security_cert_CertPathParameters(){
  try {
    CertPathParameters parameters=new MyCertPathParameters();
    CertPathTrustManagerParameters p=new CertPathTrustManagerParameters(parameters);
    assertNotSame("Parameters were cloned incorrectly",parameters,p.getParameters());
  }
 catch (  Exception e) {
    fail("Unexpected exception " + e.toString());
  }
  try {
    new CertPathTrustManagerParameters(null);
    fail("Expected CertPathTrustManagerParameters was not thrown");
  }
 catch (  NullPointerException npe) {
  }
}

private static int buildRequestCode(long threadId,int action){
  action++;
  return (int)(action * 100000 + threadId);
}

public OuterJoinQualifier add(String propertyLeft,String propertyRight){
  additionalProperties.add(new PropertyValueExpressionPair(new PropertyValueExpression(propertyLeft),new PropertyValueExpression(propertyRight)));
  return this;
}

public void insertElementAt(int value,int at){
  if (null == m_map) {
    m_map=new int[m_blocksize];
    m_mapSize=m_blocksize;
  }
 else   if ((m_firstFree + 1) >= m_mapSize) {
    m_mapSize+=m_blocksize;
    int newMap[]=new int[m_mapSize];
    System.arraycopy(m_map,0,newMap,0,m_firstFree + 1);
    m_map=newMap;
  }
  if (at <= (m_firstFree - 1)) {
    System.arraycopy(m_map,at,m_map,at + 1,m_firstFree - at);
  }
  m_map[at]=value;
  m_firstFree++;
}

protected static Dfp atanInternal(final Dfp a){
  Dfp y=new Dfp(a);
  Dfp x=new Dfp(y);
  Dfp py=new Dfp(y);
  for (int i=3; i < 90; i+=2) {
    x=x.multiply(a);
    x=x.multiply(a);
    x=x.negate();
    y=y.add(x.divide(i));
    if (y.equals(py)) {
      break;
    }
    py=new Dfp(y);
  }
  return y;
}

public static String parseSegmentName(String filename){
  int idx=indexOfSegmentName(filename);
  if (idx != -1) {
    filename=filename.substring(0,idx);
  }
  return filename;
}

private static Tree generateSubTree(HashMap<Integer,Pair<IndexedWord,List<Integer>>> dependencies,int root){
  List<Integer> children=dependencies.get(root).second;
  IndexedWord tw=dependencies.get(root).first;
  Tree tree=new LabeledScoredTreeNode(tw);
  boolean addedHead=children.isEmpty();
  List<Integer> sortedChildren=CollectionUtils.sorted(children);
  for (  Integer c : sortedChildren) {
    if (c > root && !addedHead) {
      Tree child=new LabeledScoredTreeNode(tw);
      tree.addChild(child);
      addedHead=true;
    }
    Tree child=generateSubTree(dependencies,c);
    tree.addChild(child);
  }
  if (!addedHead) {
    Tree child=new LabeledScoredTreeNode(tw);
    tree.addChild(child);
  }
  return tree;
}

@HLEFunction(nid=0x267A6DD2,version=150,checkInsideInterrupt=true) public int __sceSasRevParam(int sasCore,int delay,int feedback){
  checkSasHandleGood(sasCore);
  waveformEffectDelay=delay;
  waveformEffectFeedback=feedback;
  return 0;
}

static boolean isPossibleFP(String val){
  final int length=val.length();
  for (int i=0; i < length; ++i) {
    char c=val.charAt(i);
    if (!(c >= '0' && c <= '9' || c == '.' || c == '-' || c == '+' || c == 'E' || c == 'e')) {
      return false;
    }
  }
  return true;
}

public boolean deleteTrack(Track track){
synchronized (tracks) {
    return tracks.removeElement(track);
  }
}

protected static ArrayList<GeoPoint> parseKmlCoordinates(String input){
  LinkedList<GeoPoint> tmpCoords=new LinkedList<GeoPoint>();
  int i=0;
  int tupleStart=0;
  int length=input.length();
  boolean startReadingTuple=false;
  while (i < length) {
    char c=input.charAt(i);
    if (c == ' ' || c == '\n' || c == '\t') {
      if (startReadingTuple) {
        String tuple=input.substring(tupleStart,i);
        GeoPoint p=parseKmlCoord(tuple);
        if (p != null)         tmpCoords.add(p);
        startReadingTuple=false;
      }
    }
 else {
      if (!startReadingTuple) {
        startReadingTuple=true;
        tupleStart=i;
      }
      if (i == length - 1) {
        String tuple=input.substring(tupleStart,i + 1);
        GeoPoint p=parseKmlCoord(tuple);
        if (p != null)         tmpCoords.add(p);
      }
    }
    i++;
  }
  ArrayList<GeoPoint> coordinates=new ArrayList<GeoPoint>(tmpCoords.size());
  coordinates.addAll(tmpCoords);
  return coordinates;
}

public void paint(Graphics2D g){
  for (int i=0; i < m_nodes.size(); i++) {
    WFNode node=m_nodes.get(i);
    Rectangle rect=node.getBounds();
    g.setColor(Color.BLACK);
    g.drawRect(rect.x,rect.y,rect.width,rect.height);
    Graphics2D t=(Graphics2D)g.create(rect.x,rect.y,rect.width,rect.height);
    node.paint(t);
    t.dispose();
  }
  createLines();
  for (int i=0; i < m_lines.size(); i++) {
    WFLine line=(WFLine)m_lines.get(i);
    line.paint(g);
  }
}

ServerSessionContext registerRequest(long sequence,Runnable runnable){
  commands.put(sequence,runnable);
  return this;
}

public void testConstructorSignBytesZeroNull2(){
  byte aBytes[]={};
  int aSign=0;
  byte rBytes[]={0};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=aNumber.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",0,aNumber.signum());
}

public void addPreferencesButton(){
  JButton prefsButton=new JButton("Prefs");
  prefsButton.setHideActionText(true);
  prefsButton.setAction(TimeSeriesPlotActions.getPropertiesDialogAction(this));
  buttonPanel.add(prefsButton);
}

public static void findIndexMatches(SearchPattern pattern,Index index,IndexQueryRequestor requestor,SearchParticipant participant,IJavaSearchScope scope,IProgressMonitor monitor) throws IOException {
  pattern.findIndexMatches(index,requestor,participant,scope,monitor);
}

public static void logInfo(String message,Object... args){
  message=MessageFormat.format(message,args);
  log(IStatus.INFO,IStatus.OK,message,null);
}

public static boolean occupy(int waitMs){
  if (occupiedUntil != null && occupiedUntil.after(new Date())) {
    return false;
  }
  occupiedUntil=DateUtils.addMilliseconds(new Date(),waitMs);
  return true;
}

public boolean[][] moralize(BayesNet bayesNet){
  int nNodes=bayesNet.getNrOfNodes();
  boolean[][] bAdjacencyMatrix=new boolean[nNodes][nNodes];
  for (int iNode=0; iNode < nNodes; iNode++) {
    ParentSet parents=bayesNet.getParentSets()[iNode];
    moralizeNode(parents,iNode,bAdjacencyMatrix);
  }
  return bAdjacencyMatrix;
}

public void addDivider(ImageView v){
  RelativeLayout.LayoutParams dividerParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
  if (mImageView != null) {
    dividerParams.addRule(RelativeLayout.BELOW,mImageView.getId());
  }
 else   if (mMissingImage != null) {
    dividerParams.addRule(RelativeLayout.BELOW,mMissingImage.getId());
  }
 else   if (mVideoButton != null) {
    dividerParams.addRule(RelativeLayout.BELOW,mVideoButton.getId());
  }
 else   if (mAudioButton != null) {
    dividerParams.addRule(RelativeLayout.BELOW,mAudioButton.getId());
  }
 else   if (mView_Text != null) {
    dividerParams.addRule(RelativeLayout.BELOW,mView_Text.getId());
  }
 else {
    Log.e(t,"Tried to add divider to uninitialized ATVWidget");
    return;
  }
  addView(v,dividerParams);
}

private double findLength(Point originPoint,Point targetPoint){
  int x1=originPoint.x;
  int y1=originPoint.y;
  int x2=targetPoint.x;
  int y2=targetPoint.y;
  double sideA=x2 - x1;
  double sideB=(y1 > y2 ? (y1 - y2) : (y2 - y1));
  if (sideB == 0) {
    return sideA;
  }
  return Math.sqrt(Math.pow(sideA,2) + Math.pow(sideB,2));
}

public void testCase4(){
  byte aBytes[]={1,2,3,4,5,6,7,1,2,3};
  byte bBytes[]={10,20,30,40,50,60,70,10,20,30};
  int aSign=1;
  int bSign=-1;
  byte rBytes[]={11,22,33,44,55,66,77,11,22,33};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.subtract(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals(1,result.signum());
}

public static Automaton determinizeSimple(Automaton a,Set<Integer> initialset){
  if (a.getNumStates() == 0) {
    return a;
  }
  int[] points=a.getStartPoints();
  Map<Set<Integer>,Set<Integer>> sets=new HashMap<>();
  LinkedList<Set<Integer>> worklist=new LinkedList<>();
  Map<Set<Integer>,Integer> newstate=new HashMap<>();
  sets.put(initialset,initialset);
  worklist.add(initialset);
  Automaton.Builder result=new Automaton.Builder();
  result.createState();
  newstate.put(initialset,0);
  Transition t=new Transition();
  while (worklist.size() > 0) {
    Set<Integer> s=worklist.removeFirst();
    int r=newstate.get(s);
    for (    int q : s) {
      if (a.isAccept(q)) {
        result.setAccept(r,true);
        break;
      }
    }
    for (int n=0; n < points.length; n++) {
      Set<Integer> p=new HashSet<>();
      for (      int q : s) {
        int count=a.initTransition(q,t);
        for (int i=0; i < count; i++) {
          a.getNextTransition(t);
          if (t.min <= points[n] && points[n] <= t.max) {
            p.add(t.dest);
          }
        }
      }
      if (!sets.containsKey(p)) {
        sets.put(p,p);
        worklist.add(p);
        newstate.put(p,result.createState());
      }
      int q=newstate.get(p);
      int min=points[n];
      int max;
      if (n + 1 < points.length) {
        max=points[n + 1] - 1;
      }
 else {
        max=Character.MAX_CODE_POINT;
      }
      result.addTransition(r,q,min,max);
    }
  }
  return Operations.removeDeadStates(result.finish());
}

public static void write(InputStream in,OutputStream out,boolean closeBoth) throws IOException {
  byte[] buff=new byte[1024];
  int read=0;
  while ((read=in.read(buff)) > 0) {
    out.write(buff,0,read);
  }
  out.flush();
  if (closeBoth) {
    safeCloseStreams(in,out);
  }
}

public static double distance(CoordinateDD p1,CoordinateDD p2,UNITS units){
  final double latP1=p1.northSouth;
  final double latP2=p2.northSouth;
  final double lonP1=p1.eastWest;
  final double lonP2=p2.eastWest;
  if (latP1 == latP2 && lonP1 == lonP2)   return 0;
  double distRad=Math.acos(Math.sin(toRadians(latP1)) * Math.sin(toRadians(latP2)) + Math.cos(toRadians(latP1)) * Math.cos(toRadians(latP2)) * Math.cos(toRadians(lonP1 - lonP2)));
  final double distAsDegree=toDegrees(distRad);
  return metersToUnits(distAsDegree * 60 * 1.1515* 1609.344,units);
}

public static LiquidNetwork initNetwork(){
  Random random=new Random(System.currentTimeMillis());
  int id=random.nextInt();
  while (usedIds.contains(id)) {
    id=random.nextInt();
  }
  ;
  LiquidNetwork net=new LiquidNetwork();
  usedIds.add(id);
  net.networkID=id;
  return net;
}

public String exportXml() throws IOException {
  ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
  exportXml(outputStream);
  return outputStream.toString();
}

public PatternReplaceFilter(TokenStream in,Pattern p,String replacement,boolean all){
  super(in);
  this.replacement=(null == replacement) ? "" : replacement;
  this.all=all;
  this.m=p.matcher(termAtt);
}

public boolean isMutable(){
  return mutable;
}

public static int[] stableSort(double[] array){
  int[] index=new int[array.length];
  int[] newIndex=new int[array.length];
  int[] helpIndex;
  int numEqual;
  array=(double[])array.clone();
  for (int i=0; i < index.length; i++) {
    index[i]=i;
    if (Double.isNaN(array[i])) {
      array[i]=Double.MAX_VALUE;
    }
  }
  quickSort(array,index,0,array.length - 1);
  int i=0;
  while (i < index.length) {
    numEqual=1;
    for (int j=i + 1; ((j < index.length) && Utils.eq(array[index[i]],array[index[j]])); j++)     numEqual++;
    if (numEqual > 1) {
      helpIndex=new int[numEqual];
      for (int j=0; j < numEqual; j++)       helpIndex[j]=i + j;
      quickSort(index,helpIndex,0,numEqual - 1);
      for (int j=0; j < numEqual; j++)       newIndex[i + j]=index[helpIndex[j]];
      i+=numEqual;
    }
 else {
      newIndex[i]=index[i];
      i++;
    }
  }
  return newIndex;
}

public void reopenReadWrite(){
synchronized (mLock) {
    throwIfNotOpenLocked();
    if (!isReadOnlyLocked()) {
      return;
    }
    final int oldOpenFlags=mConfigurationLocked.openFlags;
    mConfigurationLocked.openFlags=(mConfigurationLocked.openFlags & ~OPEN_READ_MASK) | OPEN_READWRITE;
    try {
      mConnectionPoolLocked.reconfigure(mConfigurationLocked);
    }
 catch (    RuntimeException ex) {
      mConfigurationLocked.openFlags=oldOpenFlags;
      throw ex;
    }
  }
}

public static int readChars(Reader r,char[] charArray) throws IOException {
  int totalCharsRead=0;
  int charsRead=r.read(charArray);
  while (charsRead >= 0) {
    totalCharsRead+=charsRead;
    if (totalCharsRead == charArray.length) {
      break;
    }
    charsRead=r.read(charArray,totalCharsRead,charArray.length - totalCharsRead);
  }
  return totalCharsRead;
}

public void removeDirection(final Direction dir,final boolean face){
  RPAction action;
  int size;
  action=new RPAction();
  action.put("type","move");
  action.put("dir",-dir.get());
  send(action);
  directions.remove(dir);
  size=directions.size();
  if (size == 0) {
    action=new RPAction();
    action.put("type","stop");
  }
 else {
    if (face) {
      action=new FaceRPAction(directions.get(size - 1));
    }
 else {
      action=new MoveRPAction(directions.get(size - 1));
    }
  }
  send(action);
}

public static double[] ndary(int n){
  double d[]=new double[n];
  for (int i=0; i < n; i++) {
    d[i]=R.nextGaussian();
  }
  return d;
}

private float applyBounce(float velocity,float distOutOfBounds,float simulationRate){
  if (isZero(distOutOfBounds)) {
    return velocity;
  }
  velocity*=-1;
  float bounce=BOUNCE_MULTIPLIER * Math.abs(distOutOfBounds / mIrisRadius);
  if (velocity > 0) {
    velocity+=bounce * simulationRate;
  }
 else {
    velocity-=bounce * simulationRate;
  }
  return velocity;
}

private double dot(final int k0,final int k1,final int[] assignment0,final int[] assignment1){
  double dot=0;
  final int N=X.size();
  int a=0, b=0;
  for (int i=0; i < N; i++) {
    if (assignment0[i] != k0)     continue;
    a++;
    for (int j=0; j < N; j++) {
      if (assignment1[j] != k1)       continue;
      dot+=kernel.eval(i,j,X,accel);
    }
  }
  for (int j=0; j < N; j++)   if (assignment1[j] == k1)   b++;
  return dot / (a * b);
}

public void removeAllTextures(){
  for (  WeakReference<CCTexture2D> texSR : textures.values()) {
    CCTexture2D tex=texSR.get();
    if (tex != null)     tex.releaseTexture(CCDirector.gl);
  }
  textures.clear();
}

public synchronized void addToQueue(final ImageResourceLoader imageResourceLoader,final String uri,final MutableFSImage mfsi,final int width,final int height){
  XRLog.general(Level.FINE,"Queueing load for image uri " + uri);
  _loadQueue.addLast(new ImageLoadItem(imageResourceLoader,uri,mfsi,width,height));
  notifyAll();
}

private JNIWriter(Context context){
  context.put(jniWriterKey,this);
  fileManager=context.get(JavaFileManager.class);
  log=Log.instance(context);
  Options options=Options.instance(context);
  verbose=options.isSet(VERBOSE);
  checkAll=options.isSet("javah:full");
  this.context=context;
  syms=Symtab.instance(context);
  lineSep=System.getProperty("line.separator");
}

public JOSMTolerantFastXMLParser(Sink sink,XMLStreamReader reader,boolean enableDateParsing){
  this.sink=sink;
  this.enableDateParsing=enableDateParsing;
  this.reader=reader;
  if (enableDateParsing) {
    timestampFormat=new XmlTimestampFormat();
  }
 else {
    Calendar calendar;
    calendar=Calendar.getInstance();
    calendar.set(Calendar.MILLISECOND,0);
    dummyTimestampContainer=new SimpleTimestampContainer(calendar.getTime());
  }
  memberTypeParser=new MemberTypeParser();
}

public Hashtable(int initialCapacity,float loadFactor){
  if (initialCapacity < 0) {
    throw new IllegalArgumentException("Illegal Capacity: " + initialCapacity);
  }
  if (loadFactor <= 0 || Float.isNaN(loadFactor)) {
    throw new IllegalArgumentException("Illegal Load: " + loadFactor);
  }
  if (initialCapacity == 0)   initialCapacity=1;
  this.loadFactor=loadFactor;
  table=new Entry[initialCapacity];
  threshold=(int)(initialCapacity * loadFactor);
}

public static String extractReminder(String publicURL,String accessURL){
  return publicURL.substring(accessURL.length());
}

public void createUnderlying(){
  if (options != null) {
    options.createUnderlying();
    if (Platform.isFxApplicationThread()) {
      line=new com.lynden.gmapsfx.shapes.Polyline(options.convert());
    }
  }
}

private void initRasterProgram(){
  IntBuffer props=BufferUtils.createIntBuffer(1);
  IntBuffer params=BufferUtils.createIntBuffer(1);
  int uniformsResourceIndex=glGetProgramResourceIndex(rasterProgram,GL_UNIFORM_BLOCK,"Uniforms");
  computeUboBinding=params.get(0);
  props.put(0,GL_BUFFER_BINDING);
  glGetProgramResourceiv(rasterProgram,GL_UNIFORM_BLOCK,uniformsResourceIndex,props,null,params);
  rasterUboBinding=params.get(0);
}

private void installVoiceData(){
  if (TextUtils.isEmpty(getEngineName()))   return;
  Intent intent=new Intent(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  intent.setPackage(getEngineName());
  try {
    Log.v(TAG,"Installing voice data: " + intent.toUri(0));
    startActivity(intent);
  }
 catch (  ActivityNotFoundException ex) {
    Log.e(TAG,"Failed to install TTS data, no acitivty found for " + intent + ")");
  }
}

@SuppressWarnings("fallthrough") Symbol selectBest(Env<AttrContext> env,Type site,List<Type> argtypes,List<Type> typeargtypes,Symbol sym,Symbol bestSoFar,boolean allowBoxing,boolean useVarargs,boolean operator){
  if (sym.kind == ERR || !sym.isInheritedIn(site.tsym,types)) {
    return bestSoFar;
  }
 else   if (useVarargs && (sym.flags() & VARARGS) == 0) {
    return bestSoFar.kind >= ERRONEOUS ? new BadVarargsMethod((ResolveError)bestSoFar.baseSymbol()) : bestSoFar;
  }
  Assert.check(sym.kind < AMBIGUOUS);
  try {
    Type mt=rawInstantiate(env,site,sym,null,argtypes,typeargtypes,allowBoxing,useVarargs,types.noWarnings);
    if (!operator || verboseResolutionMode.contains(VerboseResolutionMode.PREDEF))     currentResolutionContext.addApplicableCandidate(sym,mt);
  }
 catch (  InapplicableMethodException ex) {
    if (!operator)     currentResolutionContext.addInapplicableCandidate(sym,ex.getDiagnostic());
switch (bestSoFar.kind) {
case ABSENT_MTH:
      return new InapplicableSymbolError(currentResolutionContext);
case WRONG_MTH:
    if (operator)     return bestSoFar;
  bestSoFar=new InapplicableSymbolsError(currentResolutionContext);
default :
return bestSoFar;
}
}
if (!isAccessible(env,site,sym)) {
return (bestSoFar.kind == ABSENT_MTH) ? new AccessError(env,site,sym) : bestSoFar;
}
return (bestSoFar.kind > AMBIGUOUS) ? sym : mostSpecific(argtypes,sym,bestSoFar,env,site,allowBoxing && operator,useVarargs);
}

public Bitmap loadBitmap(String uri,int reqWidth,int reqHeight){
  Bitmap bitmap=loadBitmapFromMemCache(uri);
  if (bitmap != null) {
    Log.d(TAG,"loadBitmapFromMemCache,url:" + uri);
    return bitmap;
  }
  try {
    bitmap=loadBitmapFromDiskCache(uri,reqWidth,reqHeight);
    if (bitmap != null) {
      Log.d(TAG,"loadBitmapFromDisk,url:" + uri);
      return bitmap;
    }
    bitmap=loadBitmapFromHttp(uri,reqWidth,reqHeight);
    Log.d(TAG,"loadBitmapFromHttp,url:" + uri);
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  if (bitmap == null && !mIsDiskLruCacheCreated) {
    Log.w(TAG,"encounter error, DiskLruCache is not created.");
    bitmap=downloadBitmapFromUrl(uri);
  }
  return bitmap;
}

public boolean isSafeToExecuteSUTCode(){
  Thread current=Thread.currentThread();
  if (!privilegedThreads.contains(current)) {
    return true;
  }
 else {
    return privilegedThreadToIgnore == current;
  }
}

public void testCase17(){
  byte aBytes[]={0};
  byte bBytes[]={1,2,3,4,5,6,7};
  byte rBytes[]={1,2,3,4,5,6,7};
  int aSign=1;
  int bSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.add(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public String[] readDirectory(String dir){
  if (dir == null) {
    throw new NullPointerException("dir");
  }
  StringArrayOut listOut=new StringArrayOut();
  try {
    checkResult(LibIMobileDevice.afc_read_directory(getRef(),dir,listOut));
    StringArray list=listOut.getValue();
    ArrayList<String> result=new ArrayList<String>();
    if (list != null) {
      for (int i=0; ; i++) {
        String s=list.get(i);
        if (s == null) {
          break;
        }
        result.add(s);
      }
    }
    return result.toArray(new String[result.size()]);
  }
  finally {
    LibIMobileDevice.delete_StringArray_values_z(listOut.getValue());
    listOut.delete();
  }
}

public static String createArgsString(List<String> args){
  if (args == null) {
    return "";
  }
  StringBuilder argsSb=new StringBuilder();
  for (  String arg : args) {
    if ((arg.contains(" ") || arg.contains("${")) && !StringUtilities.isQuoted(arg)) {
      argsSb.append(StringUtilities.quote(arg));
    }
 else {
      argsSb.append(arg);
    }
    argsSb.append(' ');
  }
  if (argsSb.length() > 0) {
    argsSb.setLength(argsSb.length() - 1);
  }
  return argsSb.toString();
}

public void addElement(int value){
  int indexRelativeToCache=m_firstFree - m_buildCacheStartIndex;
  if (indexRelativeToCache >= 0 && indexRelativeToCache < m_blocksize) {
    m_buildCache[indexRelativeToCache]=value;
    ++m_firstFree;
  }
 else {
    int index=m_firstFree >>> m_SHIFT;
    int offset=m_firstFree & m_MASK;
    if (index >= m_map.length) {
      int newsize=index + m_numblocks;
      int[][] newMap=new int[newsize][];
      System.arraycopy(m_map,0,newMap,0,m_map.length);
      m_map=newMap;
    }
    int[] block=m_map[index];
    if (null == block)     block=m_map[index]=new int[m_blocksize];
    block[offset]=value;
    m_buildCache=block;
    m_buildCacheStartIndex=m_firstFree - offset;
    ++m_firstFree;
  }
}

public static <T>List<List<T>> overlap(List<List<T>> lists,int before,int after){
  if (before < 0) {
    throw new IllegalArgumentException("Value of before cannot be negative");
  }
  if (after < 0) {
    throw new IllegalArgumentException("Value of after cannot be negative");
  }
  ListIterator<List<T>> iter=lists.listIterator();
  List<List<T>> result=new ArrayList<List<T>>();
  for (; iter.hasNext(); ) {
    List<T> current=new ArrayList<T>(iter.next());
    List<T> prev=before > 0 ? findPrevious(iter) : null;
    List<T> next=after > 0 ? findNext(iter) : null;
    if (prev != null) {
      List<T> overlap=prev.subList(prev.size() - before,prev.size());
      current.addAll(0,overlap);
    }
    if (next != null) {
      List<T> overlap=next.subList(0,after);
      current.addAll(overlap);
    }
    result.add(current);
  }
  return result;
}

public double[][] extractMainSetJacobian(final ODEState state){
  final double[] p=state.getSecondaryState(index);
  final double[][] dYdY0=new double[stateDim][stateDim];
  int j=0;
  for (int i=0; i < stateDim; i++) {
    System.arraycopy(p,j,dYdY0[i],0,stateDim);
    j+=stateDim;
  }
  return dYdY0;
}

public static void init(final AsyncContext context){
  final SecurityContext security=(SecurityContext)context.getAttribute(AsyncContext.SECURITY_CTX);
  final boolean forceSetSecurity=forceSetSecurityContext(context);
  if (forceSetSecurity) {
    SecurityContextHolder.setContext(security);
  }
  ctx.set(context);
}

private void handleGetCandidateResult(PlacementTask currentState,Operation postOperation,Map<String,ServerAddress> candidates,Stopwatch placementWatch){
  ServiceUtils.logInfo(this,"elapsed-time flat-place-get-candidates %d milliseconds",placementWatch.elapsed(TimeUnit.MILLISECONDS));
  if (candidates.isEmpty()) {
    String msg=String.format("Place failure, constraints cannot be satisfied for request: %s",currentState.resource);
    PlacementTask patchState=buildPatch(TaskState.TaskStage.FAILED,currentState.taskState.isDirect,null);
    patchState.resultCode=PlaceResultCode.NO_SUCH_RESOURCE;
    patchState.error=msg;
    failTask(patchState,new Throwable(msg),postOperation);
    return;
  }
  ServiceUtils.logInfo(this,"Sending place requests to %s with timeout %d ms",candidates,currentState.timeoutMs);
  Stopwatch scoreCandidatesStopwatch=Stopwatch.createStarted();
  queryHostsForScores(currentState.resource,candidates,null);
}

public boolean contains(JsonElement element){
  return elements.contains(element);
}

private void appendPath(Path cp,final Path p){
  if (p != null && p.size() > 0) {
    cp.append(p);
  }
}

public static void doDefaultLayout(Composite parent,DialogField[] editors,boolean labelOnTop){
  doDefaultLayout(parent,editors,labelOnTop,0,0);
}

protected static final List<CView> processQueryResults(final ResultSet resultSet,final INaviProject project,final Map<Integer,Set<CTag>> tags,final ITagManager nodeTagManager,final SQLProvider provider,final List<CView> views,final ViewType viewType,final GraphType graphType) throws SQLException {
  final Map<Integer,Set<CTag>> nodeTagMap=getNodeTags(provider.getConnection(),project,nodeTagManager);
  try {
    while (resultSet.next()) {
      final int viewId=resultSet.getInt("view_id");
      final String name=PostgreSQLHelpers.readString(resultSet,"name");
      final String description=PostgreSQLHelpers.readString(resultSet,"description");
      final Timestamp creationDate=resultSet.getTimestamp("creation_date");
      final Timestamp modificationDate=resultSet.getTimestamp("modification_date");
      final boolean starState=resultSet.getBoolean("stared");
      final int nodeCount=resultSet.getInt("bbcount");
      final int edgeCount=resultSet.getInt("edgecount");
      final Set<CTag> viewTags=tags.containsKey(viewId) ? tags.get(viewId) : new HashSet<CTag>();
      final Set<CTag> nodeTags=nodeTagMap.containsKey(viewId) ? nodeTagMap.get(viewId) : new HashSet<CTag>();
      final CProjectViewGenerator generator=new CProjectViewGenerator(provider,project);
      views.add(generator.generate(viewId,name,description,viewType,graphType,creationDate,modificationDate,nodeCount,edgeCount,viewTags,nodeTags,starState));
    }
    return views;
  }
  finally {
    resultSet.close();
  }
}

private void drawString(Object nativeFont,String str,int x,int y,int textDecoration,int fontHeight){
  if (str.length() == 0) {
    return;
  }
  if (textDecoration != 0) {
    boolean raised=(textDecoration & Style.TEXT_DECORATION_3D) != 0;
    boolean lowerd=(textDecoration & Style.TEXT_DECORATION_3D_LOWERED) != 0;
    boolean north=(textDecoration & Style.TEXT_DECORATION_3D_SHADOW_NORTH) != 0;
    if (raised || lowerd || north) {
      textDecoration=textDecoration & (~Style.TEXT_DECORATION_3D) & (~Style.TEXT_DECORATION_3D_LOWERED)& (~Style.TEXT_DECORATION_3D_SHADOW_NORTH);
      int c=getColor();
      int a=getAlpha();
      int newColor=0;
      int offset=-2;
      if (lowerd) {
        offset=2;
        newColor=0xffffff;
      }
 else       if (north) {
        offset=2;
      }
      setColor(newColor);
      if (a == 0xff) {
        setAlpha(140);
      }
      drawString(nativeFont,str,x,y + offset,textDecoration,fontHeight);
      setAlpha(a);
      setColor(c);
      drawString(nativeFont,str,x,y,textDecoration,fontHeight);
      return;
    }
    canvas.drawText(str,x,y - font.getFontAscent(),font);
    if ((textDecoration & Style.TEXT_DECORATION_UNDERLINE) != 0) {
      paint.setStyle(Paint.Style.FILL);
      canvas.drawLine(x,y + fontHeight - 1,x + impl.stringWidth(nativeFont,str),y + fontHeight - 1,paint);
    }
    if ((textDecoration & Style.TEXT_DECORATION_STRIKETHRU) != 0) {
      paint.setStyle(Paint.Style.FILL);
      canvas.drawLine(x,y + fontHeight / 2,x + impl.stringWidth(nativeFont,str),y + fontHeight / 2,paint);
    }
    if ((textDecoration & Style.TEXT_DECORATION_OVERLINE) != 0) {
      paint.setStyle(Paint.Style.FILL);
      canvas.drawLine(x,y,x + impl.stringWidth(nativeFont,str),y,paint);
    }
  }
 else {
    canvas.drawText(str,x,y - font.getFontAscent(),font);
  }
}

protected void parse(DataInputStream stream) throws Exception {
  value=stream.readUTF();
}

public void removeDragEventHandlers(){
  node.removeEventHandler(TouchEvent.ANY,touchHandler);
  node.removeEventHandler(MouseEvent.ANY,mouseHandler);
}

protected void installListeners(){
  super.installListeners();
  table.addPropertyChangeListener(this);
}

public void testCompareToZeroPos(){
  byte bBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  int bSign=1;
  BigInteger aNumber=BigInteger.ZERO;
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  assertEquals(-1,aNumber.compareTo(bNumber));
}

public void shutdown() throws ConnectionManagerException {
  s_logger.info("Shutting down CIM adapter.");
  connectionLock.lock();
  try {
    closeAllConnections();
    if (_listener != null) {
      _listener.stop();
      _listener=null;
    }
    executorService.shutdown();
  }
 catch (  Exception e) {
    throw new ConnectionManagerException("An error occurred shutting down the connection manager",e);
  }
 finally {
    connectionLock.unlock();
  }
}

private void closeWriterExecutionService(ExecutorService service) throws CarbonDataWriterException {
  try {
    service.shutdown();
    service.awaitTermination(1,TimeUnit.DAYS);
  }
 catch (  InterruptedException e) {
    LOGGER.error(e,e.getMessage());
    throw new CarbonDataWriterException(e.getMessage());
  }
}

public void removeJob(String jobId){
  if (jobs.contains(jobId)) {
    jobs.remove(jobId);
  }
}

public String formatTimeMillis(long ts){
synchronized (timeFormatter) {
    return timeFormatter.format(new Date(ts));
  }
}

protected static final int positionCoordinate2D(float value){
  return (int)(value + 0.437f);
}

@Override public Object clone(){
  try {
    IdentityHashMap<K,V> cloneHashMap=(IdentityHashMap<K,V>)super.clone();
    cloneHashMap.elementData=newElementArray(elementData.length);
    System.arraycopy(elementData,0,cloneHashMap.elementData,0,elementData.length);
    return cloneHashMap;
  }
 catch (  CloneNotSupportedException e) {
    throw new AssertionError(e);
  }
}

public int trap(int[] A){
  if (A == null || A.length == 0)   return 0;
  int l=0;
  int r=A.length - 1;
  int level=0;
  int all=0;
  int block=0;
  while (l <= r) {
    int curLevel=Math.min(A[l],A[r]);
    if (curLevel > level) {
      all+=(curLevel - level) * (r - l + 1);
      level=curLevel;
    }
    if (A[l] < A[r])     block+=A[l++];
 else     block+=A[r--];
  }
  return all - block;
}

public void search(){
  performSearch();
}

public RemoteSession(HttpSession session){
  super();
  debug=Debug.getInstance("remoteSession");
  this.session=(HttpSession)session;
  creationTime=session.getCreationTime();
  id=session.getId();
  lastAccessedTime=session.getLastAccessedTime();
  maxInactiveInterval=session.getMaxInactiveInterval();
  isNew=session.isNew();
  internalAttributes=new HashMap();
  Enumeration aNames=getAttributeNames();
  while (aNames.hasMoreElements()) {
    String attributeName=(String)aNames.nextElement();
    if (isSerializable(getAttribute(attributeName)) && !attributeName.equals("LoginCallbacks") && !attributeName.equals("AuthContext")) {
      internalAttributes.put(attributeName,getAttribute(attributeName));
      internalAttributeNames.add(attributeName);
      debug.message("adding attr=" + attributeName + ", "+ getAttribute(attributeName));
    }
  }
}

@Override public SnmpMibHandler addMib(SnmpMibAgent mib) throws IllegalArgumentException {
  if (mib == null) {
    throw new IllegalArgumentException();
  }
  if (!mibs.contains(mib))   mibs.addElement(mib);
  root.register(mib);
  return this;
}

public boolean exist(){
  return productionRun != null;
}

public static String numberToString(Number number) throws JSONException {
  if (number == null) {
    throw new JSONException("Number must be non-null");
  }
  double doubleValue=number.doubleValue();
  JSON.checkDouble(doubleValue);
  if (number.equals(NEGATIVE_ZERO)) {
    return "-0";
  }
  long longValue=number.longValue();
  if (doubleValue == (double)longValue) {
    return Long.toString(longValue);
  }
  return number.toString();
}

public static SortClause create(String item,String order){
  return new SortClause(item,ORDER.valueOf(order));
}

public long endTime(){
  return getTimestamp() + calculateDuration();
}

protected void buildLeavesMiddleOut(BallNode node) throws Exception {
  if (node.m_Left != null && node.m_Right != null) {
    buildLeavesMiddleOut(node.m_Left);
    buildLeavesMiddleOut(node.m_Right);
  }
 else   if (node.m_Left != null || node.m_Right != null) {
    throw new Exception("Invalid leaf assignment. Please check code");
  }
 else {
    BallNode n2=buildTreeMiddleOut(node.m_Start,node.m_End);
    if (n2.m_Left != null && n2.m_Right != null) {
      node.m_Left=n2.m_Left;
      node.m_Right=n2.m_Right;
      buildLeavesMiddleOut(node);
    }
 else     if (n2.m_Left != null || n2.m_Right != null) {
      throw new Exception("Invalid leaf assignment. Please check code");
    }
  }
}

@Deprecated public static int[] decodeValue(String a){
  return toIntArray(a.split("\\+"));
}

public WeightVector(WeightVector wv){
  float in[]=wv.getInternalArray();
  u=new float[in.length];
  System.arraycopy(in,0,u,0,in.length);
  size=in.length;
}

public void waitUntilDone(){
  countLock.lock();
  try {
    equalCountCv.await();
  }
 catch (  InterruptedException e) {
    throw new RuntimeException("Shouldn't happen!");
  }
 finally {
    countLock.unlock();
  }
}

public java.lang.StringBuilder insert(int offset,long l){
  return insert(offset,Long.toString(l));
}

public ProjectionPreferencesDialog(Projector projector){
  this.projector=projector;
  String toleranceToolTip="Only add a new datapoint if it is at least this " + "far from an existing datapoint in the high-dim space";
  JLabel toleranceLabel=new JLabel("New datapoint tolerance");
  tolerance.setToolTipText(toleranceToolTip);
  toleranceLabel.setToolTipText(toleranceToolTip);
  mainPanel.addItemLabel(toleranceLabel,tolerance);
  if (projector.getProjectionMethod() instanceof ProjectCoordinate) {
    mainPanel.addItem("Coordinate projection auto-find mode",autoFind);
  }
  fillFieldValues();
  setContentPane(mainPanel);
}

private Element generateBranch(TreeType treeType,RootedTree tree,Node node,String nodeName,double startLatitude,double finishLatitude,double startLongitude,double finishLongitude,double startAltitude,double finishAltitude,double peakPosition,double peakAltitude,double startDate,double finishDate,double ageCutOff,LineStyle startStyle,LineStyle finishStyle,int divisionCount,List<Element> styles){
  Element element;
  Double rate=(Double)node.getAttribute("rate");
  Double support=(Double)node.getAttribute("posterior");
  double height=tree.getHeight(node);
  boolean hasDivisionStyles=startStyle != null && finishStyle != null;
  if (divisionCount > 0) {
    double latDiff=finishLatitude - startLatitude;
    double latDelta=latDiff / divisionCount;
    double longDiff=finishLongitude - startLongitude;
    double longDelta=longDiff / divisionCount;
    double altDiff=finishAltitude - startAltitude;
    double altDelta=altDiff / divisionCount;
    double dateDiff=finishDate - startDate;
    double dateDelta=dateDiff / divisionCount;
    double lastLatitude=startLatitude;
    double latitude=startLatitude + latDelta;
    double lastLongitude=startLongitude;
    double longitude=startLongitude + longDelta;
    double x=-peakPosition;
    double xDelta=1.0 / divisionCount;
    double a=peakAltitude - finishAltitude;
    if (peakPosition == 0.5) {
      a*=4;
    }
    double altitude=peakAltitude - (a * (x * x));
    double lastAltitude=altitude;
    x+=xDelta;
    double date=startDate;
    String styleName=null;
    if (!hasDivisionStyles && startStyle != null) {
      styleName=nodeName + "_style";
      styles.add(generateLineStyle(styleName,startStyle.getWidth(),startStyle.getColor()));
    }
    element=generateContainer("Folder",nodeName,null,(styleName != null ? "#" + styleName : null));
    for (int division=0; division < divisionCount; division++) {
      if (ageCutOff == 0.0 || date > ageCutOff) {
        String partName=nodeName + "_part" + (division + 1);
        styleName=null;
        if (hasDivisionStyles) {
          styleName=partName + "_style";
        }
        Element placeMark=generateContainer("Placemark",partName,null,(styleName != null ? "#" + styleName : null));
        annotateBranch(placeMark,height,startDate,finishDate,rate,support);
        if (hasDivisionStyles) {
          double width=startStyle.getWidth();
          Color color=getBlendedColor(((float)division) / (divisionCount - 1),startStyle.getColor(),finishStyle.getColor());
          styles.add(generateLineStyle(styleName,width,color));
        }
        if (dateDiff > 0.0) {
          Element timeSpan=new Element("TimeSpan");
          timeSpan.addContent(generateElement("begin",getKMLDate(date)));
          placeMark.addContent(timeSpan);
        }
        Element lineString=new Element("LineString");
        Element coordinates=new Element("coordinates");
        if (altDiff > 0.0 || peakAltitude > 0.0) {
          lineString.addContent(generateElement("altitudeMode",altitudeMode));
          altitude=peakAltitude - (a * (x * x));
          coordinates.addContent("" + lastLongitude + ","+ lastLatitude+ ","+ lastAltitude+ "\r");
          coordinates.addContent("" + longitude + ","+ latitude+ ","+ altitude+ "\r");
        }
 else {
          lineString.addContent(generateElement("altitudeMode","clampToGround"));
          lineString.addContent(generateElement("tessellate",true));
          coordinates.addContent("" + lastLongitude + ","+ lastLatitude+ "\r");
          coordinates.addContent("" + longitude + ","+ latitude+ "\r");
        }
        lastLatitude=latitude;
        latitude+=latDelta;
        lastLongitude=longitude;
        longitude+=longDelta;
        lastAltitude=altitude;
        x+=xDelta;
        date+=dateDelta;
        lineString.addContent(coordinates);
        placeMark.addContent(lineString);
        element.addContent(placeMark);
      }
    }
  }
 else {
    String styleName=null;
    if (startStyle != null) {
      styleName=nodeName + "_style";
      double width=startStyle.getWidth();
      styles.add(generateLineStyle(styleName,width,startStyle.getColor()));
    }
    element=generateContainer("Placemark",nodeName,null,(styleName != null ? "#" + styleName : null));
    annotateBranch(element,height,startDate,finishDate,rate,support);
    Element lineString=new Element("LineString");
    lineString.addContent(generateElement("altitudeMode",altitudeMode));
    Element coordinates=new Element("coordinates");
    if (treeType == TreeType.RECTANGLE_TREE) {
      coordinates.addContent("" + finishLongitude + ","+ finishLatitude+ ","+ finishAltitude+ "\r");
      coordinates.addContent("" + finishLongitude + ","+ finishLatitude+ ","+ startAltitude+ "\r");
      coordinates.addContent("" + startLongitude + ","+ startLatitude+ ","+ startAltitude+ "\r");
    }
 else {
      coordinates.addContent("" + finishLongitude + ","+ finishLatitude+ ","+ finishAltitude+ "\r");
      coordinates.addContent("" + startLongitude + ","+ startLatitude+ ","+ startAltitude+ "\r");
    }
    lineString.addContent(coordinates);
    element.addContent(lineString);
  }
  return element;
}

public void addTableValueChangeListener(TableValueChangeListener listener){
  if (listener == null) {
    return;
  }
  m_listeners.add(listener);
}

@Override public int print(Graphics g,PageFormat pageFormat,int pageIndex){
  if (pageIndex > 0) {
    return (NO_SUCH_PAGE);
  }
 else {
    Graphics2D g2d=(Graphics2D)g;
    g2d.translate(pageFormat.getImageableX(),pageFormat.getImageableY());
    double fHeight=pageFormat.getImageableHeight();
    double fWidth=pageFormat.getImageableWidth();
    int xMax=1;
    int yMax=1;
    for (int iNode=0; iNode < m_BayesNet.getNrOfNodes(); iNode++) {
      if (xMax < m_BayesNet.getPositionX(iNode)) {
        xMax=m_BayesNet.getPositionX(iNode);
      }
      if (yMax < m_BayesNet.getPositionY(iNode)) {
        yMax=m_BayesNet.getPositionY(iNode);
      }
    }
    double fCurrentScale=m_fScale;
    xMax+=m_nPaddedNodeWidth + 100;
    if (fWidth / xMax < fHeight / yMax) {
      m_fScale=fWidth / xMax;
    }
 else {
      m_fScale=fHeight / yMax;
    }
    paint(g2d);
    m_fScale=fCurrentScale;
    return (PAGE_EXISTS);
  }
}

public LinkedHashMap<Pokemon,NicknamePokemonResponse.Result> bulkRenameWithPattern(final String pattern,final BiConsumer<NicknamePokemonResponse.Result,Pokemon> perPokeCallback){
  final LinkedHashMap<Pokemon,NicknamePokemonResponse.Result> results=new LinkedHashMap<>();
  mons.forEach(null);
  return results;
}

protected static byte[][] parseDirectives(byte[] buf,String[] keyTable,List<byte[]> realmChoices,int realmIndex) throws SaslException {
  byte[][] valueTable=new byte[keyTable.length][];
  ByteArrayOutputStream key=new ByteArrayOutputStream(10);
  ByteArrayOutputStream value=new ByteArrayOutputStream(10);
  boolean gettingKey=true;
  boolean gettingQuotedValue=false;
  boolean expectSeparator=false;
  byte bch;
  int i=skipLws(buf,0);
  while (i < buf.length) {
    bch=buf[i];
    if (gettingKey) {
      if (bch == ',') {
        if (key.size() != 0) {
          throw new SaslException("Directive key contains a ',':" + key);
        }
        i=skipLws(buf,i + 1);
      }
 else       if (bch == '=') {
        if (key.size() == 0) {
          throw new SaslException("Empty directive key");
        }
        gettingKey=false;
        i=skipLws(buf,i + 1);
        if (i < buf.length) {
          if (buf[i] == '"') {
            gettingQuotedValue=true;
            ++i;
          }
        }
 else {
          throw new SaslException("Valueless directive found: " + key.toString());
        }
      }
 else       if (isLws(bch)) {
        i=skipLws(buf,i + 1);
        if (i < buf.length) {
          if (buf[i] != '=') {
            throw new SaslException("'=' expected after key: " + key.toString());
          }
        }
 else {
          throw new SaslException("'=' expected after key: " + key.toString());
        }
      }
 else {
        key.write(bch);
        ++i;
      }
    }
 else     if (gettingQuotedValue) {
      if (bch == '\\') {
        ++i;
        if (i < buf.length) {
          value.write(buf[i]);
          ++i;
        }
 else {
          throw new SaslException("Unmatched quote found for directive: " + key.toString() + " with value: "+ value.toString());
        }
      }
 else       if (bch == '"') {
        ++i;
        gettingQuotedValue=false;
        expectSeparator=true;
      }
 else {
        value.write(bch);
        ++i;
      }
    }
 else     if (isLws(bch) || bch == ',') {
      extractDirective(key.toString(),value.toByteArray(),keyTable,valueTable,realmChoices,realmIndex);
      key.reset();
      value.reset();
      gettingKey=true;
      gettingQuotedValue=expectSeparator=false;
      i=skipLws(buf,i + 1);
    }
 else     if (expectSeparator) {
      throw new SaslException("Expecting comma or linear whitespace after quoted string: \"" + value.toString() + "\"");
    }
 else {
      value.write(bch);
      ++i;
    }
  }
  if (gettingQuotedValue) {
    throw new SaslException("Unmatched quote found for directive: " + key.toString() + " with value: "+ value.toString());
  }
  if (key.size() > 0) {
    extractDirective(key.toString(),value.toByteArray(),keyTable,valueTable,realmChoices,realmIndex);
  }
  return valueTable;
}

public static Assignment createDefault(String... variables){
  return createDefault(Arrays.asList(variables));
}

private void onStopAttack(){
  attacking=null;
}

public JSONTokener(Reader reader){
  this.reader=reader.markSupported() ? reader : new BufferedReader(reader);
  this.eof=false;
  this.usePrevious=false;
  this.previous=0;
  this.index=0;
  this.character=1;
  this.line=1;
}

void calculatePressed(ActionEvent e){
  if (checkEditConditional()) {
    return;
  }
  if (numConditionals > 0) {
    String cName="";
    Conditional c=null;
    for (int i=0; i < numConditionals; i++) {
      cName=_curLogix.getConditionalByNumberOrder(i);
      if (cName != null) {
        c=_conditionalManager.getBySystemName(cName);
        if (c == null) {
          log.error("Invalid conditional system name when calculating - " + cName);
        }
 else {
          c.calculate(false,null);
        }
      }
 else {
        log.error("null conditional system name when calculating");
      }
    }
    conditionalTableModel.fireTableDataChanged();
  }
}

public static FunctionAlias newInstance(Schema schema,int id,String name,String javaClassMethod,boolean force,boolean bufferResultSetToLocalTemp){
  FunctionAlias alias=new FunctionAlias(schema,id,name);
  int paren=javaClassMethod.indexOf('(');
  int lastDot=javaClassMethod.lastIndexOf('.',paren < 0 ? javaClassMethod.length() : paren);
  if (lastDot < 0) {
    throw DbException.get(ErrorCode.SYNTAX_ERROR_1,javaClassMethod);
  }
  alias.className=javaClassMethod.substring(0,lastDot);
  alias.methodName=javaClassMethod.substring(lastDot + 1);
  alias.bufferResultSetToLocalTemp=bufferResultSetToLocalTemp;
  alias.init(force);
  return alias;
}

protected void updateMenu(){
  boolean present;
  boolean initializing;
  boolean running;
  boolean stopping;
  boolean active;
  if (m_MenuBar == null)   return;
  present=(m_Experiment != null);
  initializing=present && m_Experiment.isInitializing();
  running=present && m_Experiment.isRunning();
  stopping=present && m_Experiment.isStopping();
  active=initializing || running || stopping;
  m_MenuItemFileNew.setEnabled(!active);
  m_MenuItemFileOpen.setEnabled(!active);
  m_MenuItemFileSave.setEnabled(present && (getCurrentFile() != null));
  m_MenuItemFileSaveAs.setEnabled(present);
  m_MenuItemFileClose.setEnabled(!active);
  m_MenuItemExecutionStart.setEnabled(present && !active);
  m_MenuItemExecutionStop.setEnabled(present && running);
  for (  AbstractExperimenterMenuItem item : m_AdditionalMenuItems.keySet())   item.update(this,m_AdditionalMenuItems.get(item));
}

@NotNull @ObjectiveCName("addAutoJoinGroupWithToken:") public ConfigurationBuilder addAutoJoinGroup(String groupTokenOrShortName){
  autoJoinGroups.add(groupTokenOrShortName);
  return this;
}

public boolean hasValueInfo(){
  return !receiverValue.equals("") || methodArgumentValues != null;
}

public boolean nextIsSep(){
  if (Character.isLetterOrDigit(str.charAt(currentPosition)))   return false;
 else   return true;
}

protected static final String addEscapes(String str){
  StringBuffer retval=new StringBuffer();
  char ch;
  for (int i=0; i < str.length(); i++) {
switch (str.charAt(i)) {
case 0:
      continue;
case '\b':
    retval.append("\\b");
  continue;
case '\t':
retval.append("\\t");
continue;
case '\n':
retval.append("\\n");
continue;
case '\f':
retval.append("\\f");
continue;
case '\r':
retval.append("\\r");
continue;
case '\"':
retval.append("\\\"");
continue;
case '\'':
retval.append("\\\'");
continue;
case '\\':
retval.append("\\\\");
continue;
default :
if ((ch=str.charAt(i)) < 0x20 || ch > 0x7e) {
String s="0000" + Integer.toString(ch,16);
retval.append("\\u" + s.substring(s.length() - 4,s.length()));
}
 else {
retval.append(ch);
}
continue;
}
}
return retval.toString();
}

protected void dropCar(PrintWriter file,Car car,boolean isManifest){
  if (isManifest) {
    StringBuffer buf=new StringBuffer(padAndTruncateString(Setup.getDropCarPrefix(),Setup.getManifestPrefixLength()));
    String[] format=Setup.getDropManifestMessageFormat();
    boolean isLocal=isLocalMove(car);
    if (isLocal) {
      buf=new StringBuffer(padAndTruncateString(Setup.getLocalPrefix(),Setup.getManifestPrefixLength()));
      format=Setup.getLocalManifestMessageFormat();
    }
    dropCar(file,car,buf,format,isLocal,isManifest);
  }
 else {
    StringBuffer buf=new StringBuffer(padAndTruncateString(Setup.getSwitchListDropCarPrefix(),Setup.getSwitchListPrefixLength()));
    String[] format=Setup.getDropSwitchListMessageFormat();
    boolean isLocal=isLocalMove(car);
    if (isLocal) {
      buf=new StringBuffer(padAndTruncateString(Setup.getSwitchListLocalPrefix(),Setup.getSwitchListPrefixLength()));
      format=Setup.getLocalSwitchListMessageFormat();
    }
    dropCar(file,car,buf,format,isLocal,isManifest);
  }
}

@AfterMethod public void deleteStorage() throws BusinessException, IOException, SerializationException {
  if (null != storageData) {
    if (storageManager.getRecordingState() == RecordingState.ON) {
      storageManager.stopRecording();
    }
    if (!storageManager.isStorageClosed(storageData)) {
      storageManager.closeStorage(storageData);
    }
    storageManager.deleteStorage(storageData);
    storageData=null;
  }
  assertThat(storageManager.getExistingStorages(),is(empty()));
}

public final void removeElementAt(int i){
  if (i > m_firstFree)   System.arraycopy(m_map,i + 1,m_map,i,m_firstFree);
 else   m_map[i]=java.lang.Integer.MIN_VALUE;
  m_firstFree--;
}

protected int keyOnList(String key,List<String> list){
  int ret=-1;
  int index=0;
  if (list != null) {
    for (    String listKey : list) {
      if (listKey.equalsIgnoreCase(key)) {
        ret=index;
        break;
      }
      index++;
    }
  }
  return ret;
}

private boolean incrementSentence() throws IOException {
  if (length == 0)   return false;
  while (true) {
    int start=iterator.current();
    if (start == BreakIterator.DONE)     return false;
    int end=iterator.next();
    if (end == BreakIterator.DONE)     return false;
    setNextSentence(start,end);
    if (incrementWord()) {
      return true;
    }
  }
}

Enumeration<CryptoPermissionEntry> permissionElements(){
  return permissionEntries.elements();
}

private static char[] zzUnpackCMap(String packed){
  char[] map=new char[0x10000];
  int i=0;
  int j=0;
  while (i < 164) {
    int count=packed.charAt(i++);
    char value=packed.charAt(i++);
    do     map[j++]=value;
 while (--count > 0);
  }
  return map;
}

private static void populateAccessRequest(AccessRequest accessRequest){
  accessRequest.setAccessLicenseNumber(props.getProperty(LICENSE_NUMBER));
  accessRequest.setUserId(props.getProperty(USER_NAME));
  accessRequest.setPassword(props.getProperty(PASSWORD));
}

public BinaryTable(Header myHeader) throws FitsException {
  long heapSizeL=myHeader.getLongValue(PCOUNT);
  long heapOffsetL=myHeader.getLongValue(THEAP);
  if (heapOffsetL > MAX_INTEGER_VALUE) {
    throw new FitsException("Heap Offset > 2GB");
  }
  if (heapSizeL > MAX_INTEGER_VALUE) {
    throw new FitsException("Heap size > 2 GB");
  }
  if (heapSizeL - heapOffsetL > MAX_INTEGER_VALUE) {
    throw new FitsException("Unable to allocate heap > 2GB");
  }
  this.heapOffset=(int)heapOffsetL;
  int heapSize=(int)heapSizeL;
  int rwsz=myHeader.getIntValue(NAXIS1);
  this.nRow=myHeader.getIntValue(NAXIS2);
  if (this.heapOffset > 0) {
    this.heapOffset-=this.nRow * rwsz;
  }
  if (this.heapOffset < 0 || this.heapOffset > heapSize) {
    throw new FitsException("Inconsistent THEAP and PCOUNT");
  }
  this.heap=new FitsHeap(heapSize - this.heapOffset);
  int nCol=myHeader.getIntValue(TFIELDS);
  this.rowLen=0;
  for (int col=0; col < nCol; col++) {
    this.rowLen+=processCol(myHeader,col);
  }
  HeaderCard card=myHeader.findCard(NAXIS1);
  card.setValue(String.valueOf(this.rowLen));
  myHeader.updateLine(NAXIS1,card);
}

public static TaskContext current(){
  final Deque<TaskContext> stack=contextStacks.get();
  if (stack == null) {
    return null;
  }
  return stack.peekLast();
}

public static byte[] concat(final byte[]... arrays){
  int totalSize=0;
  for (  final byte[] array : arrays) {
    totalSize+=array.length;
  }
  int startIndex=0;
  final byte[] result=new byte[totalSize];
  for (  final byte[] array : arrays) {
    System.arraycopy(array,0,result,startIndex,array.length);
    startIndex+=array.length;
  }
  return result;
}

public JKNamespace(final String url,final String prefix){
  logger.info(String.format("create Namespace with url(%s) and Prefix(%s) ",url,prefix));
  this.url=url;
  this.prefix=prefix;
}

public boolean isLifo(){
  String cm=getCostingMethod();
  return cm != null && cm.equals(COSTINGMETHOD_Lifo) && COSTELEMENTTYPE_Material.equals(getCostElementType());
}

public static void main(String[] args) throws Exception {
  final String cfg="modules/yardstick/config/ignite-localhost-config.xml";
  final Class<? extends BenchmarkDriver> benchmark=IgniteSqlQueryBenchmark.class;
  final int threads=1;
  final boolean clientDriverNode=true;
  final int extraNodes=2;
  final int warmUp=5;
  final int duration=5;
  final int range=100_000;
  final boolean throughputLatencyProbe=false;
  for (int i=0; i < extraNodes; i++) {
    IgniteConfiguration nodeCfg=Ignition.loadSpringBean(cfg,"grid.cfg");
    nodeCfg.setGridName("node-" + i);
    nodeCfg.setMetricsLogFrequency(0);
    Ignition.start(nodeCfg);
  }
  ArrayList<String> args0=new ArrayList<>();
  addArg(args0,"-t",threads);
  addArg(args0,"-w",warmUp);
  addArg(args0,"-d",duration);
  addArg(args0,"-r",range);
  addArg(args0,"-dn",benchmark.getSimpleName());
  addArg(args0,"-sn","IgniteNode");
  addArg(args0,"-cfg",cfg);
  if (throughputLatencyProbe)   addArg(args0,"-pr","ThroughputLatencyProbe");
  if (clientDriverNode)   args0.add("-cl");
  BenchmarkDriverStartUp.main(args0.toArray(new String[args0.size()]));
}

public static boolean safeNavigationOperatorDefined(String nestedFieldName){
  if (nestedFieldName.contains(SAFE_NAVIGATION_OPERATOR))   if (!nestedFieldName.startsWith(SAFE_NAVIGATION_OPERATOR))   throw new MappingException("Safe navigation operator must be the first symbol after dot notation");
 else   return true;
  return false;
}

public static boolean isEnabled(){
  if (sEnabled == null) {
    sEnabled=detectEnabled();
  }
  return sEnabled.booleanValue();
}

public boolean intersects(GeoBounds other){
  boolean rv=false;
  for (  Rectangle2D r1 : rects) {
    for (    Rectangle2D r2 : other.rects) {
      rv=r1.intersects(r2);
      if (rv) {
        break;
      }
    }
    if (rv) {
      break;
    }
  }
  return rv;
}

public void dispose(){
  mListeners.clear();
}

public void openImageGallery(final ActionListener response){
  openGallery(response,Display.GALLERY_IMAGE);
}

private void readObject(final java.io.ObjectInputStream in) throws IOException, ClassNotFoundException {
  inequalitySymbol=(String)in.readObject();
  timeStamp=in.readLong();
}

String popBaseIndentifier(){
  return (String)m_baseIdentifiers.pop();
}

@Nullable public static File resolveDrawable(@NotNull RenderResources resources,@Nullable ResourceValue drawable,@NotNull Project project){
  if (drawable != null) {
    drawable=resources.resolveResValue(drawable);
  }
  if (drawable == null) {
    return null;
  }
  String result=drawable.getValue();
  StateList stateList=resolveStateList(resources,drawable,project);
  if (stateList != null) {
    List<StateListState> states=stateList.getStates();
    if (!states.isEmpty()) {
      StateListState state=states.get(states.size() - 1);
      result=state.getValue();
    }
  }
  if (result == null) {
    return null;
  }
  final File file=new File(result);
  return file.isFile() ? file : null;
}

public static void delete(String code,JDA jda){
  Invite invite=resolve(code);
  if (invite == null)   throw new IllegalArgumentException("The provided Invite code was invalid, thus JDA cannot attempt" + "to delete it! Provided Code: " + code);
  delete(invite,jda);
}

private void updateHeaderSeparator(){
  final String bestDateTimePattern=DateFormatUtils.getBestDateTimePattern(mCurrentLocale,(mIs24HourView) ? "Hm" : "hm");
  final String separatorText;
  final char[] hourFormats={'H','h','K','k'};
  int hIndex=lastIndexOfAny(bestDateTimePattern,hourFormats);
  if (hIndex == -1) {
    separatorText=":";
  }
 else {
    separatorText=Character.toString(bestDateTimePattern.charAt(hIndex + 1));
  }
  mSeparatorView.setText(separatorText);
}

protected void connectionFailed(Channel failedChannel,IOException cause){
  failureCause=IOExceptionSupport.create(cause);
  channel=failedChannel;
  connected.set(false);
  connectLatch.countDown();
}

public void testMissingApplication() throws Exception {
  mEnabled.add(LauncherActivityDetector.ISSUE_MORE_THAN_ONE_LAUNCHER);
  mEnabled.add(LauncherActivityDetector.ISSUE_MISSING_LAUNCHER);
  mEnabled.add(LauncherActivityDetector.ISSUE_LAUNCHER_ACTIVITY_IN_LIBRARY);
  String expected="No warnings.";
  String result=lintProject(xml(FN_ANDROID_MANIFEST_XML,"" + "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n" + "<manifest package=\"com.example.android.custom-lint-rules\"\n"+ "          >\n"+ "</manifest>"));
  assertEquals(expected,result);
}

public String toString(){
  ArrayList fields=new ArrayList(7);
  fields.add(codebase);
  fields.add(policy);
  fields.add(classpath);
  fields.add(implClassName);
  fields.add(((serverConfigArgs == null) ? null : Arrays.asList(serverConfigArgs)));
  fields.add(lifeCycle);
  fields.add(servicePreparer);
  return fields.toString();
}

public Drawable createFromPath(String pathName){
  return Drawable.createFromPath(pathName);
}

@Override public void parse(Reader reader,String baseURI) throws IOException, RDFParseException, RDFHandlerException {
  if (reader == null) {
    throw new IllegalArgumentException("Reader cannot be 'null'");
  }
  if (baseURI == null) {
    throw new IllegalArgumentException("Base URI cannot be 'null'");
  }
  InputSource inputSource=new InputSource(reader);
  inputSource.setSystemId(baseURI);
  parse(inputSource);
}

final public void print(double v){
  try {
    _out.print(v);
  }
 catch (  IOException e) {
    log.log(Level.FINE,e.toString(),e);
  }
}

public static boolean isEmpty(String string){
  return string == null || string.length() == 0;
}

public static boolean isXML11ValidName(String name){
  int length=name.length();
  if (length == 0)   return false;
  int i=1;
  char ch=name.charAt(0);
  if (!isXML11NameStart(ch)) {
    if (length > 1 && isXML11NameHighSurrogate(ch)) {
      char ch2=name.charAt(1);
      if (!XMLChar.isLowSurrogate(ch2) || !isXML11NameStart(XMLChar.supplemental(ch,ch2))) {
        return false;
      }
      i=2;
    }
 else {
      return false;
    }
  }
  while (i < length) {
    ch=name.charAt(i);
    if (!isXML11Name(ch)) {
      if (++i < length && isXML11NameHighSurrogate(ch)) {
        char ch2=name.charAt(i);
        if (!XMLChar.isLowSurrogate(ch2) || !isXML11Name(XMLChar.supplemental(ch,ch2))) {
          return false;
        }
      }
 else {
        return false;
      }
    }
    ++i;
  }
  return true;
}

public void reset(){
  mExpectedEvents.clear();
  mExpectedInterrupt=false;
  mReplaying=false;
}

String generateDigest(File fileDir,String fileName){
  final String algorithm="SHA-1";
  InputStream fileStream=null;
  DigestInputStream d=null;
  try {
    fileStream=getFileStream(fileDir,fileName);
    MessageDigest md=MessageDigest.getInstance(algorithm);
    d=new DigestInputStream(fileStream,md);
    byte[] buffer=new byte[8196];
    while (d.read(buffer) != -1) {
    }
    return toHexString(md.digest());
  }
 catch (  NoSuchAlgorithmException e) {
    return algorithm + " not found";
  }
catch (  IOException e) {
    CLog.e(e);
  }
 finally {
    StreamUtil.closeStream(d);
    StreamUtil.closeStream(fileStream);
  }
  return "failed to generate digest";
}

public AgentConfig environmentToConfiguration(Environment environment,long platformId){
  AgentConfig agentConfiguration=new AgentConfig();
  agentConfiguration.setPlatformId(platformId);
  if (CollectionUtils.isNotEmpty(environment.getPlatformSensorConfigs())) {
    Collection<PlatformSensorTypeConfig> platformSensorTypeConfigs=new ArrayList<>();
    for (    IPlatformSensorConfig platformSensorConfig : environment.getPlatformSensorConfigs()) {
      if (platformSensorConfig.isActive()) {
        platformSensorTypeConfigs.add(getPlatformSensorTypeConfig(platformId,platformSensorConfig));
      }
    }
    agentConfiguration.setPlatformSensorTypeConfigs(platformSensorTypeConfigs);
  }
 else {
    agentConfiguration.setPlatformSensorTypeConfigs(Collections.<PlatformSensorTypeConfig>emptyList());
  }
  if (CollectionUtils.isNotEmpty(environment.getMethodSensorConfigs())) {
    Collection<MethodSensorTypeConfig> methodSensorTypeConfigs=new ArrayList<>();
    for (    IMethodSensorConfig methodSensorConfig : environment.getMethodSensorConfigs()) {
      methodSensorTypeConfigs.add(getMethodSensorTypeConfig(platformId,methodSensorConfig));
    }
    agentConfiguration.setMethodSensorTypeConfigs(methodSensorTypeConfigs);
  }
 else {
    agentConfiguration.setMethodSensorTypeConfigs(Collections.<MethodSensorTypeConfig>emptyList());
  }
  IExceptionSensorConfig exceptionSensorConfig=environment.getExceptionSensorConfig();
  if (null != exceptionSensorConfig) {
    agentConfiguration.setExceptionSensorTypeConfig(getExceptionSensorTypeConfig(platformId,exceptionSensorConfig));
  }
  JmxSensorConfig jmxSensorConfig=environment.getJmxSensorConfig();
  if (null != jmxSensorConfig) {
    agentConfiguration.setJmxSensorTypeConfig(getJmxSensorTypeConfig(platformId,jmxSensorConfig));
  }
  IStrategyConfig bufferStrategyConfig=environment.getBufferStrategyConfig();
  agentConfiguration.setBufferStrategyConfig(new StrategyConfig(bufferStrategyConfig.getClassName(),bufferStrategyConfig.getSettings()));
  IStrategyConfig sendingStrategyConfig=environment.getSendingStrategyConfig();
  agentConfiguration.setSendingStrategyConfig(new StrategyConfig(sendingStrategyConfig.getClassName(),sendingStrategyConfig.getSettings()));
  Collection<ExcludeRule> excludeRules=configurationResolver.getAllExcludeRules(environment);
  if (CollectionUtils.isNotEmpty(excludeRules)) {
    Collection<IMatchPattern> excludeClassesPatterns=new ArrayList<>();
    for (    ExcludeRule excludeRule : excludeRules) {
      excludeClassesPatterns.add(PatternFactory.getPattern(excludeRule.getClassName()));
    }
    agentConfiguration.setExcludeClassesPatterns(excludeClassesPatterns);
  }
 else {
    agentConfiguration.setExcludeClassesPatterns(Collections.<IMatchPattern>emptyList());
  }
  agentConfiguration.setConfigurationInfo(configurationResolver.getConfigurationInfo(environment));
  return agentConfiguration;
}

private void initializeNameGoals(Map<TestCase,Set<TestFitnessFunction>> testToGoals){
  for (  Map.Entry<TestCase,Set<TestFitnessFunction>> entry : testToGoals.entrySet()) {
    Set<TestFitnessFunction> goals=new LinkedHashSet<>();
    List<TestFitnessFunction> topGoals=getTopGoals(entry.getValue());
    if (topGoals.isEmpty()) {
    }
 else     if (topGoals.size() <= MAX_SIMILAR_GOALS) {
      for (      TestFitnessFunction goal : topGoals) {
        goals.add(goal);
        String goalName=getTestName(entry.getKey(),goals);
        if (goalName.length() > MAX_CHARS) {
          goals.remove(goal);
          break;
        }
      }
    }
 else {
      goals.add(chooseRepresentativeGoal(entry.getKey(),topGoals));
    }
    testToGoals.put(entry.getKey(),goals);
  }
}

public static java.lang.Double valueOf(java.lang.String s) throws java.lang.NumberFormatException {
  return new Double(parseDouble(s));
}

private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException {
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    s.defaultWriteObject();
    for (Node<E> p=first; p != null; p=p.next)     s.writeObject(p.item);
    s.writeObject(null);
  }
  finally {
    lock.unlock();
  }
}

public boolean isParseRobotsTxt(){
  return parseRobotsTxt;
}

public String byteArrayToBase64(byte[] bytes){
  return Base64.encodeBase64String(bytes);
}

private void validateIndexStorage(){
  CloseableIterator<IndexStoreEntry> iterator=null;
  try {
    ArrayList structureList=new ArrayList();
    iterator=indexDataStructure.iterator(null);
    while (iterator.hasNext()) {
      IndexStoreEntry ie=iterator.next();
      if (entriesContains(ie)) {
        structureList.add(ie);
      }
 else {
        fail("IndexDataStructure returned an IndexEntry that should not be present:" + ie);
      }
    }
    assertEquals("Expected Number of entries did not match",entries.size(),structureList.size());
  }
  finally {
    if (iterator != null) {
      iterator.close();
    }
  }
}

protected void onException(final WroRuntimeException e){
  throw e;
}

private int quantize(long x){
  return 1 + (int)Math.floor(Math.log(x) / Math.log(quantizationBase));
}

public static boolean validateOutputDirectory(File directory){
  if (directory.exists()) {
    Diagnostic.error(ErrorType.DIRECTORY_EXISTS,directory.getPath());
    return false;
  }
  return true;
}

@Override public void onWebSocketClose(int statusCode,String reason){
  super.onWebSocketClose(statusCode,reason);
  log.info("Socket for peer {} closed: {}",peerID,Integer.toString(statusCode) + " " + reason);
  store.unsubscribe(handle);
}

@Override public double logDensity(double value){
  updateBoundariesAndOrWeights();
  if (m_Boundaries == null) {
    return Math.log(Double.MIN_VALUE);
  }
  int index=Arrays.binarySearch(m_Boundaries,value);
  if ((index == -1) || (index == -m_Boundaries.length - 1)) {
    double val=0;
    if (index == -1) {
      val=m_TM.firstKey() - value;
    }
 else {
      val=value - m_TM.lastKey();
    }
    return (CONST - Math.log(m_Width) - 0.5 * (val * val / (m_Width * m_Width))) - Math.log(m_SumOfWeights + 2);
  }
  if (index == m_Boundaries.length - 1) {
    index--;
  }
 else {
    if (index < 0) {
      index=-index - 2;
    }
  }
  double width=m_Boundaries[index + 1] - m_Boundaries[index];
  double densSmearedOut=1.0 / ((m_SumOfWeights + 2) * (m_Boundaries[m_Boundaries.length - 1] - m_Boundaries[0]));
  if (m_Weights[index] <= 0) {
    return Math.log(densSmearedOut);
  }
 else {
    return Math.log(densSmearedOut + m_Weights[index] / ((m_SumOfWeights + 2) * width));
  }
}

public void drawPoint(Graphics sc,IPoint p){
  double x1=p.getX();
  double y1=p.getY();
  sc.drawOval((int)x1 - 2,(int)y1 - 2,5,5);
}

private static int computeCapacity(final int expectedSize){
  if (expectedSize == 0) {
    return 1;
  }
  final int capacity=(int)FastMath.ceil(expectedSize / LOAD_FACTOR);
  final int powerOfTwo=Integer.highestOneBit(capacity);
  if (powerOfTwo == capacity) {
    return capacity;
  }
  return nextPowerOfTwo(capacity);
}

public static void appendString(final StringBuffer buf,final String s){
  buf.append('\"');
  for (int i=0; i < s.length(); ++i) {
    char c=s.charAt(i);
    if (c == '\n') {
      buf.append("\\n");
    }
 else     if (c == '\r') {
      buf.append("\\r");
    }
 else     if (c == '\\') {
      buf.append("\\\\");
    }
 else     if (c == '"') {
      buf.append("\\\"");
    }
 else     if (c < 0x20 || c > 0x7f) {
      buf.append("\\u");
      if (c < 0x10) {
        buf.append("000");
      }
 else       if (c < 0x100) {
        buf.append("00");
      }
 else       if (c < 0x1000) {
        buf.append('0');
      }
      buf.append(Integer.toString(c,16));
    }
 else {
      buf.append(c);
    }
  }
  buf.append('\"');
}

protected void a_processJunction_nns(String name,Continuation cont) throws NamingException {
  if (name.equals("")) {
    NameNotFoundException e=new NameNotFoundException();
    cont.setErrorNNS(this,name);
    throw cont.fillInException(e);
  }
  try {
    Object target=a_lookup(name,cont);
    if (cont.isContinue())     cont.appendRemainingComponent("");
 else {
      cont.setContinueNNS(target,name,this);
    }
  }
 catch (  NamingException e) {
    e.appendRemainingComponent("");
    throw e;
  }
}

public void addCallback(Callback callback){
  if (!mCallbacks.contains(callback)) {
    mCallbacks.add(callback);
  }
}

public JTidyDocumentBuilderFactory(DocumentBuilderSetting[] settings) throws DOMTestIncompatibleException {
  super(settings);
  try {
    ClassLoader classLoader=ClassLoader.getSystemClassLoader();
    Class tidyClass=classLoader.loadClass("org.w3c.tidy.Tidy");
    tidyConstructor=tidyClass.getConstructor(NO_CLASSES);
    parseDOMMethod=tidyClass.getMethod("parseDOM",new Class[]{java.io.InputStream.class,java.io.OutputStream.class});
    domImpl=new JTidyDOMImplementation();
  }
 catch (  Exception ex) {
    throw new DOMTestIncompatibleException(ex,null);
  }
  if (settings != null) {
    for (int i=0; i < settings.length; i++) {
    }
  }
}

public void dispose(){
  logDebug("Disposing.");
  mSetupDone=false;
  if (mServiceConn != null) {
    logDebug("Unbinding from service.");
    if (mContext != null)     mContext.unbindService(mServiceConn);
  }
  mDisposed=true;
  mContext=null;
  mServiceConn=null;
  mService=null;
  mPurchaseListener=null;
}

public void enqueue(TerminatingRunnable r){
synchronized (queue) {
    queue.add(r);
    queue.notifyAll();
  }
}

protected void doProcessMessage(DTLSMessage message) throws HandshakeException, GeneralSecurityException {
}

public void addCertificatesAndCRLs(CertStore certStore) throws CertStoreException, CMSException {
  certs.addAll(CMSUtils.getCertificatesFromStore(certStore));
  crls.addAll(CMSUtils.getCRLsFromStore(certStore));
}

void disconnect(){
synchronized (lock) {
    disconnected=true;
    lock.notifyAll();
  }
}

public SimpleRateLimiter(double mbPerSec){
  setMBPerSec(mbPerSec);
  lastNS=System.nanoTime();
}

private long wc(String text){
  long wc=0;
  String[] lines=text.split("\n");
  for (  String line : lines) {
    wc+=line.split("\\s+").length;
  }
  return wc;
}

public boolean unbind(){
  boolean worked=true;
  if (m_rxThread == null)   worked=false;
 else   m_stopRx=true;
  return worked;
}

public void register(Schedule schedule){
  Integer oldSize=Integer.valueOf(_scheduleHashTable.size());
  _scheduleHashTable.put(schedule.getId(),schedule);
  int id=Integer.parseInt(schedule.getId());
  if (id > _id) {
    _id=id;
  }
  setDirtyAndFirePropertyChange(LISTLENGTH_CHANGED_PROPERTY,oldSize,Integer.valueOf(_scheduleHashTable.size()));
}

public final void writeMapleAsciiString(final String s){
  writeShort((short)s.length());
  writeAsciiString(s);
}

public static boolean hasUID(String classname){
  boolean result;
  try {
    result=hasUID(Class.forName(classname));
  }
 catch (  Exception e) {
    result=false;
  }
  return result;
}

public static boolean removeDirectory(String pathToDir){
  return deleteRecursive(new File(pathToDir));
}

public static final boolean validateGroupName(String sGroupName){
  if (sGroupName.length() == 0) {
    return false;
  }
  return sGroupName.matches("^.{8}$");
}

private void _init(Configuration conf){
  try {
    if (this.id > 0) {
      DefaultListener d=new DefaultListener();
      d.upgrade(conf,this);
    }
    if (!X.isEmpty(listener)) {
      String name=listener;
      if (name != null) {
        try {
          Class<?> c=Class.forName(name,true,classLoader);
          Object o=c.newInstance();
          if (o instanceof IListener) {
            log.info("initializing: " + name);
            IListener l=(IListener)o;
            l.upgrade(conf,this);
            l.onStart(conf,this);
          }
        }
 catch (        Throwable e) {
          log.error(this.name + ", listener=" + name,e);
        }
      }
    }
  }
 catch (  Throwable e) {
    log.error(e.getMessage(),e);
  }
}

private boolean isScanRootAvailable(URL url){
  for (  ScanRoot scanRoot : _pendingScanRoots) {
    if (url.equals(scanRoot.getUrl()))     return false;
  }
  return true;
}

public SequentialListenerManager addListenerExecutor(int index,Listener listener,ListenerExecutor executor){
  if (listeners.contains(listener))   throw new IllegalArgumentException("Cannot add listener twice " + listener);
  listeners.add(index,listener);
  listenerExecutors.add(index,executor);
  return this;
}

private boolean hasAsParent(INode child,ICompositeNode directParent){
  INode parent=child;
  while (parent != null) {
    if (parent == directParent)     return true;
    parent=parent.getParent();
  }
  return false;
}

public void clearMarkers(){
  mGoogleMap.clear();
  markers.clear();
}

@Override public double cloudletSubmit(Cloudlet cl){
  return cloudletSubmit(cl,0);
}

public void verifyingToken(){
  setTokenInfo("Verifying login..");
  verifyToken.setEnabled(false);
}

public Certificate buildCertificate(String certString) throws InvalidCertificate {
  try {
    String base64Cert=formatCertificate(certString);
    InputStream inBytes=new ByteArrayInputStream(base64Cert.getBytes());
    CertificateFactory cf=CertificateFactory.getInstance("X.509");
    assert inBytes.available() > 0;
    Certificate certificate=cf.generateCertificate(inBytes);
    inBytes.close();
    return certificate;
  }
 catch (  Exception e) {
    log.debug("buildCertificate: error " + e + " converted to InvalidCertificate.");
    throw FaultUtil.InvalidCertificate("Could not build certificate");
  }
}

private PageLeafImpl compact(TableKelp table){
  long now=CurrentTime.currentTime() / 1000;
  Set<PageLeafEntry> entries=fillEntries(table);
  ArrayList<BlockLeaf> blocks=new ArrayList<>();
  BlockLeaf block=new BlockLeaf(getId());
  blocks.add(block);
  Row row=table.row();
  for (  PageLeafEntry entry : entries) {
    if (entry.getCode() != INSERT && entry.getExpires() <= now) {
      continue;
    }
    while (!block.addEntry(row,entry)) {
      block=new BlockLeaf(getId());
      blocks.add(block);
    }
  }
  PageLeafImpl newPage=new PageLeafImpl(getId(),getNextId(),getSequence(),_table,getMinKey(),getMaxKey(),blocks);
  newPage.validate(table);
  newPage.toSorted(table);
  if (isDirty()) {
    newPage.setDirty();
  }
  if (_stub != null) {
    _stub.copyToCompact(newPage);
  }
  return newPage;
}

public SabresQuery(Class<T> clazz){
  this.clazz=clazz;
  name=clazz.getSimpleName();
  innerQueries=null;
}

SNode awaitFulfill(SNode s,boolean timed,long nanos){
  final long deadline=timed ? System.nanoTime() + nanos : 0L;
  Thread w=Thread.currentThread();
  int spins=(shouldSpin(s) ? (timed ? maxTimedSpins : maxUntimedSpins) : 0);
  for (; ; ) {
    if (w.isInterrupted())     s.tryCancel();
    SNode m=s.match;
    if (m != null)     return m;
    if (timed) {
      nanos=deadline - System.nanoTime();
      if (nanos <= 0L) {
        s.tryCancel();
        continue;
      }
    }
    if (spins > 0)     spins=shouldSpin(s) ? (spins - 1) : 0;
 else     if (s.waiter == null)     s.waiter=w;
 else     if (!timed)     LockSupport.park(this);
 else     if (nanos > spinForTimeoutThreshold)     LockSupport.parkNanos(this,nanos);
  }
}

public String backupNow(String backupFilePrefix) throws McException, IOException {
  _logger.debug("Backup triggered.");
  return Backup.backup(backupFilePrefix);
}

public static void CF7(double[] x,double[] f,double[] c,int nx){
  double sum1=0.0;
  double sum2=0.0;
  double yj;
  for (int j=2; j <= nx; j++) {
    if (j % 2 == 1) {
      yj=x[j - 1] - Math.cos(6.0 * PI * x[0] + j * PI / nx);
      sum1+=2.0 * yj * yj - Math.cos(4.0 * PI * yj) + 1.0;
    }
 else {
      yj=x[j - 1] - Math.sin(6.0 * PI * x[0] + j * PI / nx);
      if (j == 2 || j == 4) {
        sum2+=yj * yj;
      }
 else {
        sum2+=2.0 * yj * yj - Math.cos(4.0 * PI * yj) + 1.0;
      }
    }
  }
  f[0]=x[0] + sum1;
  f[1]=(1.0 - x[0]) * (1.0 - x[0]) + sum2;
  c[0]=x[1] - Math.sin(6.0 * x[0] * PI + 2.0 * PI / nx) - MYSIGN((x[0] - 0.5) * (1.0 - x[0])) * Math.sqrt(Math.abs((x[0] - 0.5) * (1.0 - x[0])));
  c[1]=x[3] - Math.sin(6.0 * x[0] * PI + 4.0 * PI / nx) - MYSIGN(0.25 * Math.sqrt(1 - x[0]) - 0.5 * (1.0 - x[0])) * Math.sqrt(Math.abs(0.25 * Math.sqrt(1 - x[0]) - 0.5 * (1.0 - x[0])));
}

void fullyUnlock(){
  takeLock.unlock();
  putLock.unlock();
}

public boolean isClusteredHost(StorageSystem storage,List<Initiator> initiators){
  return isClusteredHost(storage,initiators,null);
}

public static List<SubstringReplacerMatchRule> matchRulesFromInternal(String matchReplaceDetails,Instances inputStructure,String statusMessagePrefix,Logger log,Environment env){
  List<SubstringReplacerMatchRule> matchRules=new ArrayList<SubstringReplacerMatchRule>();
  String[] mrParts=matchReplaceDetails.split("@@match-replace@@");
  for (  String p : mrParts) {
    SubstringReplacerMatchRule mr=new SubstringReplacerMatchRule(p.trim());
    mr.m_statusMessagePrefix=statusMessagePrefix;
    mr.m_logger=log;
    mr.init(env,inputStructure);
    matchRules.add(mr);
  }
  return matchRules;
}

private static void time(DateTimeFormatterBuilder bld,Collection<DateTimeFieldType> fields,boolean extended,boolean strictISO,boolean reducedPrec,boolean datePresent){
  boolean hour=fields.remove(DateTimeFieldType.hourOfDay());
  boolean minute=fields.remove(DateTimeFieldType.minuteOfHour());
  boolean second=fields.remove(DateTimeFieldType.secondOfMinute());
  boolean milli=fields.remove(DateTimeFieldType.millisOfSecond());
  if (!hour && !minute && !second&& !milli) {
    return;
  }
  if (hour || minute || second|| milli) {
    if (strictISO && reducedPrec) {
      throw new IllegalArgumentException("No valid ISO8601 format for fields because Date was reduced precision: " + fields);
    }
    if (datePresent) {
      bld.appendLiteral('T');
    }
  }
  if (hour && minute && second || (hour && !second && !milli)) {
  }
 else {
    if (strictISO && datePresent) {
      throw new IllegalArgumentException("No valid ISO8601 format for fields because Time was truncated: " + fields);
    }
    if (!hour && (minute && second || (minute && !milli) || second)) {
    }
 else {
      if (strictISO) {
        throw new IllegalArgumentException("No valid ISO8601 format for fields: " + fields);
      }
    }
  }
  if (hour) {
    bld.appendHourOfDay(2);
  }
 else   if (minute || second || milli) {
    bld.appendLiteral('-');
  }
  if (extended && hour && minute) {
    bld.appendLiteral(':');
  }
  if (minute) {
    bld.appendMinuteOfHour(2);
  }
 else   if (second || milli) {
    bld.appendLiteral('-');
  }
  if (extended && minute && second) {
    bld.appendLiteral(':');
  }
  if (second) {
    bld.appendSecondOfMinute(2);
  }
 else   if (milli) {
    bld.appendLiteral('-');
  }
  if (milli) {
    bld.appendLiteral('.');
    bld.appendMillisOfSecond(3);
  }
}

public static Object[] mergeAndExtractParams(Map<String,? extends Object> globalConfig,Map<String,? extends Object> localParams,Collection<String> ignoreParams,Map<String,ExternalResourceDescription> resources){
  Set<String> uniqueParams=new HashSet<>();
  uniqueParams.addAll(localParams.keySet());
  uniqueParams.addAll(globalConfig.keySet());
  if (ignoreParams != null) {
    uniqueParams.removeAll(ignoreParams);
  }
  Object[] params=new Object[resources.size() * 2 + uniqueParams.size() * 2];
  int i=0;
  for (  Entry<String,ExternalResourceDescription> entry : resources.entrySet()) {
    params[i++]=entry.getKey();
    params[i++]=entry.getValue();
  }
  for (  String key : uniqueParams) {
    params[i++]=key;
    if (localParams.containsKey(key)) {
      params[i++]=CpeBuilderUtils.convertToParameterValue(localParams.get(key));
    }
 else {
      params[i++]=CpeBuilderUtils.convertToParameterValue(globalConfig.get(key));
    }
  }
  return params;
}

public void storeProperties(String artifact,String version,Properties props) throws IOException {
  Path propertiesFile=getPropertiesFile(artifact,version);
  Path dir=propertiesFile.getParent();
  if (!Files.exists(dir)) {
    Files.createDirectories(dir);
  }
  try (OutputStream out=new BufferedOutputStream(newOutputStream(propertiesFile))){
    props.store(out,null);
  }
 }

public static String makeDescriptor(Class[] params,Class retType){
  StringBuffer sbuf=new StringBuffer();
  sbuf.append('(');
  for (int i=0; i < params.length; i++)   makeDesc(sbuf,params[i]);
  sbuf.append(')');
  if (retType != null)   makeDesc(sbuf,retType);
  return sbuf.toString();
}

public boolean isLoggable(Level lev){
  return logger.isLoggable(lev);
}

int parseHour(String source,char patternChar,int offset) throws ParseException {
  int min=(patternChar == HOUR_1_LETTER || patternChar == HOUR12_1_LETTER) ? 1 : 0;
  int max=((patternChar == HOUR_LETTER || patternChar == HOUR_1_LETTER) ? 23 : 11) + min;
  return parseNumber(source,offset,"hour",min,max) - min;
}

@Override public boolean supportsKnowledge(){
  return false;
}

public void or(Criteria criteria){
  oredCriteria.add(criteria);
}

@DataProvider public Object[][] invalidIdProvider(){
  return new Object[][]{new Object[]{"31455824-6676-4cd8-8fd1-85ce0013f2d7","Experiment \"31455824-6676-4cd8-8fd1-85ce0013f2d7\" not found",HttpStatus.SC_NOT_FOUND},new Object[]{"00000000-0000-0000-0000-000000000000","Experiment \"00000000-0000-0000-0000-000000000000\" not found",HttpStatus.SC_NOT_FOUND},new Object[]{"foobar","com.intuit.wasabi.experimentobjects.exceptions.InvalidIdentifierException: Invalid experiment identifier \"foobar\"",HttpStatus.SC_INTERNAL_SERVER_ERROR},new Object[]{"0","com.intuit.wasabi.experimentobjects.exceptions.InvalidIdentifierException: Invalid experiment identifier \"0\"",HttpStatus.SC_INTERNAL_SERVER_ERROR},new Object[]{"../applications","The server was unable to process the request",HttpStatus.SC_INTERNAL_SERVER_ERROR}};
}

public final static HeaderElement parseHeaderElement(final String value,HeaderValueParser parser) throws ParseException {
  if (value == null) {
    throw new IllegalArgumentException("Value to parse may not be null");
  }
  if (parser == null)   parser=BasicHeaderValueParser.DEFAULT;
  CharArrayBuffer buffer=new CharArrayBuffer(value.length());
  buffer.append(value);
  ParserCursor cursor=new ParserCursor(0,value.length());
  return parser.parseHeaderElement(buffer,cursor);
}

private static void attemptRetryOnException(String logPrefix,Request<?> request,VolleyError exception) throws VolleyError {
  RetryPolicy retryPolicy=request.getRetryPolicy();
  int oldTimeout=request.getTimeoutMs();
  try {
    retryPolicy.retry(exception);
  }
 catch (  VolleyError e) {
    request.addMarker(String.format("%s-timeout-giveup [timeout=%s]",logPrefix,oldTimeout));
    throw e;
  }
  request.addMarker(String.format("%s-retry [timeout=%s]",logPrefix,oldTimeout));
}

public static String encodeString(String s){
  return new String(encode(s.getBytes()));
}

private void clearState(){
  allocatedResources.clear();
  requestsToCountMap.clear();
  requestsQueue.clear();
}

public static double[] vectorBoxCorner(double[] center,double[] result,double distance,boolean upperRight){
  if (result == null || result.length != center.length) {
    result=new double[center.length];
  }
  if (upperRight == false) {
    distance=-distance;
  }
  distance=SIN_PI_DIV_4 * distance;
  for (int i=0; i < center.length; i++) {
    result[i]=center[i] + distance;
  }
  return result;
}

public void toArray(int[] array){
  System.arraycopy(data,0,array,0,size);
}

public FixedSecureRandom(boolean intPad,byte[][] values){
  ByteArrayOutputStream bOut=new ByteArrayOutputStream();
  for (int i=0; i != values.length; i++) {
    try {
      bOut.write(values[i]);
    }
 catch (    IOException e) {
      throw new IllegalArgumentException("can't save value array.");
    }
  }
  _data=bOut.toByteArray();
  if (intPad) {
    _intPad=_data.length % 4;
  }
}

@Override protected void ensureNumberOfColumns(int numberOfColumns){
  if (data.length >= numberOfColumns) {
    return;
  }
  long[] newData=new long[numberOfColumns];
  System.arraycopy(data,0,newData,0,data.length);
  data=newData;
}

private void writeAttribute(java.lang.String prefix,java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (xmlWriter.getPrefix(namespace) == null) {
    xmlWriter.writeNamespace(prefix,namespace);
    xmlWriter.setPrefix(prefix,namespace);
  }
  xmlWriter.writeAttribute(namespace,attName,attValue);
}

public void invokeHookSpoutAck(Object messageId,long completeLatencyNs){
  if (taskHooks.size() != 0) {
    SpoutAckInfo ackInfo=new SpoutAckInfo(messageId,getThisTaskId(),completeLatencyNs / Constants.MILLISECONDS_TO_NANOSECONDS);
    for (    ITaskHook taskHook : taskHooks) {
      taskHook.spoutAck(ackInfo);
    }
  }
}

public static float wrap(float value){
  if (value >= 0.f) {
    return value - (int)value;
  }
  float wrappedValue=value - (float)Math.floor(value);
  if (wrappedValue >= 1.f) {
    wrappedValue-=1.f;
  }
  return wrappedValue;
}

StubSkeletonWriter(BatchEnvironment env,RemoteClass remoteClass,StubVersion version){
  this.env=env;
  this.remoteClass=remoteClass;
  this.version=version;
  stubClassName=Util.binaryNameOf(remoteClass.classDoc()) + "_Stub";
  skeletonClassName=Util.binaryNameOf(remoteClass.classDoc()) + "_Skel";
  int i=stubClassName.lastIndexOf('.');
  packageName=(i != -1 ? stubClassName.substring(0,i) : "");
  stubClassSimpleName=stubClassName.substring(i + 1);
  skeletonClassSimpleName=skeletonClassName.substring(i + 1);
  remoteMethods=remoteClass.remoteMethods();
  methodFieldNames=nameMethodFields(remoteMethods);
}

private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException {
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    s.defaultWriteObject();
    for (Node<E> p=first; p != null; p=p.next)     s.writeObject(p.item);
    s.writeObject(null);
  }
  finally {
    lock.unlock();
  }
}

public void removeUpdateListener(AnimatorUpdateListener listener){
  if (mUpdateListeners == null) {
    return;
  }
  mUpdateListeners.remove(listener);
  if (mUpdateListeners.size() == 0) {
    mUpdateListeners=null;
  }
}

public void put(String key,Object value,boolean errorOnFail){
  if (value == null) {
    putNull(key);
  }
 else   if (value instanceof Boolean) {
    put(key,(Boolean)value);
  }
 else   if (value instanceof Byte) {
    put(key,(Byte)value);
  }
 else   if (value instanceof Double) {
    put(key,(Double)value);
  }
 else   if (value instanceof Float) {
    put(key,(Float)value);
  }
 else   if (value instanceof Integer) {
    put(key,(Integer)value);
  }
 else   if (value instanceof Long) {
    put(key,(Long)value);
  }
 else   if (value instanceof Short) {
    put(key,(Short)value);
  }
 else   if (value instanceof String) {
    put(key,(String)value);
  }
 else   if (value instanceof byte[]) {
    put(key,(byte[])value);
  }
 else   if (errorOnFail) {
    throw new UnsupportedOperationException("Could not handle type " + value.getClass());
  }
}

private void step(){
  casings.forEach(null);
  casings.forEach(null);
  casings.forEach(null);
  stepPipes();
  stepForwarders();
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return HOST;
case 2:
  return PORT;
case 3:
return ID;
case 4:
return STATE;
case 5:
return TIMESTAMP;
case 6:
return VERSION;
default :
return null;
}
}

public static void CF7(double[] x,double[] f,double[] c,int nx){
  double sum1=0.0;
  double sum2=0.0;
  double yj;
  for (int j=2; j <= nx; j++) {
    if (j % 2 == 1) {
      yj=x[j - 1] - Math.cos(6.0 * PI * x[0] + j * PI / nx);
      sum1+=2.0 * yj * yj - Math.cos(4.0 * PI * yj) + 1.0;
    }
 else {
      yj=x[j - 1] - Math.sin(6.0 * PI * x[0] + j * PI / nx);
      if (j == 2 || j == 4) {
        sum2+=yj * yj;
      }
 else {
        sum2+=2.0 * yj * yj - Math.cos(4.0 * PI * yj) + 1.0;
      }
    }
  }
  f[0]=x[0] + sum1;
  f[1]=(1.0 - x[0]) * (1.0 - x[0]) + sum2;
  c[0]=x[1] - Math.sin(6.0 * x[0] * PI + 2.0 * PI / nx) - MYSIGN((x[0] - 0.5) * (1.0 - x[0])) * Math.sqrt(Math.abs((x[0] - 0.5) * (1.0 - x[0])));
  c[1]=x[3] - Math.sin(6.0 * x[0] * PI + 4.0 * PI / nx) - MYSIGN(0.25 * Math.sqrt(1 - x[0]) - 0.5 * (1.0 - x[0])) * Math.sqrt(Math.abs(0.25 * Math.sqrt(1 - x[0]) - 0.5 * (1.0 - x[0])));
}

public static Number abs(Number a){
  if (isFloatingPoint(a)) {
    return Math.abs(a.doubleValue());
  }
 else {
    return Math.abs(a.longValue());
  }
}

private static DoubleMatrix2D xdistanceOld(DoubleMatrix2D matrix,int norm){
  return null;
}

public Map<String,String> map(){
  return hashMap();
}

private String discoverTagName(RSyntaxDocument doc,int dot){
  Stack stack=new Stack();
  Element root=doc.getDefaultRootElement();
  int curLine=root.getElementIndex(dot);
  for (int i=0; i <= curLine; i++) {
    Token t=doc.getTokenListForLine(i);
    while (t != null && t.isPaintable()) {
      if (t.type == Token.MARKUP_TAG_DELIMITER) {
        if (t.isSingleChar('<') || t.isSingleChar('[')) {
          t=t.getNextToken();
          while (t != null && t.isPaintable()) {
            if (t.type == Token.MARKUP_TAG_NAME || t.type == Token.MARKUP_TAG_ATTRIBUTE) {
              stack.push(t.getLexeme());
              break;
            }
            t=t.getNextToken();
          }
        }
 else         if (t.textCount == 2 && t.text[t.textOffset] == '/' && (t.text[t.textOffset + 1] == '>' || t.text[t.textOffset + 1] == ']')) {
          if (!stack.isEmpty()) {
            stack.pop();
          }
        }
 else         if (t.textCount == 2 && (t.text[t.textOffset] == '<' || t.text[t.textOffset] == '[') && t.text[t.textOffset + 1] == '/') {
          String tagName=null;
          if (!stack.isEmpty()) {
            tagName=(String)stack.pop();
          }
          if (t.offset + t.textCount >= dot) {
            return tagName;
          }
        }
      }
      t=t.getNextToken();
    }
  }
  return null;
}

private static void addQueryFields(Document doc,Node parent,Collection<PojoField> fields){
  if (!fields.isEmpty()) {
    Element prop=addProperty(doc,parent,"fields",null);
    Element map=addElement(doc,prop,"util:map","map-class","java.util.LinkedHashMap");
    for (    PojoField field : fields)     addElement(doc,map,"entry","key",field.javaName(),"value",GeneratorUtils.boxPrimitiveType(field.javaTypeName()));
  }
}

public void testSimpleValidString() throws Exception {
  JsonFactory jsonF=new JsonFactory();
  DataFormatDetector detector=new DataFormatDetector(jsonF);
  final String JSON="\"JSON!\"";
  DataFormatMatcher matcher=detector.findFormat(new ByteArrayInputStream(JSON.getBytes("UTF-8")));
  assertTrue(matcher.hasMatch());
  assertEquals("JSON",matcher.getMatchedFormatName());
  assertSame(jsonF,matcher.getMatch());
  assertEquals(MatchStrength.WEAK_MATCH,matcher.getMatchStrength());
  JsonParser jp=matcher.createParserWithMatch();
  assertToken(JsonToken.VALUE_STRING,jp.nextToken());
  assertEquals("JSON!",jp.getText());
  assertNull(jp.nextToken());
  jp.close();
}

protected boolean doStart(){
  if (!_lifecycle.isActive()) {
    return false;
  }
  if (!isEnable()) {
    return false;
  }
  int startingCount=_startingCount.getAndIncrement();
  int threadCount=_threadCount.get() + startingCount;
  if (_threadMax < threadCount) {
    _startingCount.decrementAndGet();
    onThreadMax();
    return false;
  }
 else   if (isIdleTooLow(startingCount)) {
    return true;
  }
 else {
    _startingCount.decrementAndGet();
    return false;
  }
}

@Override public String globalInfo(){
  return "Visualize incoming data/training/test sets in a scatter " + "plot matrix.";
}

public static long streamSkip(InputStream stream,long count) throws IOException {
  long skipped=stream.skip(count);
  if (skipped < 1) {
    final byte[] temp=new byte[1024];
    skipped=stream.read(temp,0,Math.min((int)count,1024));
  }
  return skipped;
}

public boolean managedObjectExists(ManagedObjectPath<?,?> path){
  DN targetDN=DNBuilder.create(path);
  try {
    return configRepository.getEntry(targetDN) != null;
  }
 catch (  ConfigException e) {
    return false;
  }
}

public Vector2 rotate(double theta){
  double cos=Math.cos(theta);
  double sin=Math.sin(theta);
  double x=this.x;
  double y=this.y;
  this.x=x * cos - y * sin;
  this.y=x * sin + y * cos;
  return this;
}

private static int[][] regroupHistogram(int[][] matrix,int[] groups){
  long oldEntries=0;
  for (int i=0; i < matrix.length; i++) {
    oldEntries+=matrix[i].length - 1;
  }
  long newEntries=0;
  for (int ni=0; ni < groups.length; ni++) {
    newEntries+=groups[ni];
  }
  if (newEntries > oldEntries) {
    int newlen=groups.length;
    long ok=oldEntries;
    for (int ni=0; ni < groups.length; ni++) {
      if (ok < groups[ni]) {
        int[] newGroups=new int[ni + 1];
        System.arraycopy(groups,0,newGroups,0,ni + 1);
        groups=newGroups;
        groups[ni]=(int)ok;
        ok=0;
        break;
      }
      ok-=groups[ni];
    }
  }
 else {
    long excess=oldEntries - newEntries;
    int[] newGroups=new int[groups.length + 1];
    System.arraycopy(groups,0,newGroups,0,groups.length);
    newGroups[groups.length]=(int)excess;
    groups=newGroups;
  }
  int[][] newMatrix=new int[groups.length][];
  int i=0;
  int jMin=1;
  int jMax=matrix[i].length;
  for (int ni=0; ni < groups.length; ni++) {
    int groupLength=groups[ni];
    int[] group=new int[1 + groupLength];
    long groupWeight=0;
    newMatrix[ni]=group;
    int njFill=1;
    while (njFill < group.length) {
      int len=group.length - njFill;
      while (jMin == jMax) {
        jMin=1;
        jMax=matrix[++i].length;
      }
      if (len > jMax - jMin)       len=jMax - jMin;
      groupWeight+=(long)matrix[i][0] * len;
      System.arraycopy(matrix[i],jMax - len,group,njFill,len);
      jMax-=len;
      njFill+=len;
    }
    Arrays.sort(group,1,group.length);
    group[0]=(int)((groupWeight + groupLength / 2) / groupLength);
  }
  assert (jMin == jMax);
  assert (i == matrix.length - 1);
  return newMatrix;
}

public void removePermission(PermissionType permission){
  removedPermissions.add(permission);
}

static void exportPrefs(Preferences prefs,OutputStream stream,boolean withSubTree) throws IOException, BackingStoreException {
  indent=-1;
  BufferedWriter out=new BufferedWriter(new OutputStreamWriter(stream,"UTF-8"));
  out.write(HEADER);
  out.newLine();
  out.newLine();
  out.write(DOCTYPE);
  out.write(" '");
  out.write(PREFS_DTD_NAME);
  out.write("'>");
  out.newLine();
  out.newLine();
  flushStartTag("preferences",new String[]{"EXTERNAL_XML_VERSION"},new String[]{String.valueOf(XML_VERSION)},out);
  flushStartTag("root",new String[]{"type"},new String[]{prefs.isUserNode() ? "user" : "system"},out);
  flushEmptyElement("map",out);
  StringTokenizer ancestors=new StringTokenizer(prefs.absolutePath(),"/");
  exportNode(ancestors,prefs,withSubTree,out);
  flushEndTag("root",out);
  flushEndTag("preferences",out);
  out.flush();
  out=null;
}

protected void storeInProfilesMap(Client client){
  Set parentSet=client.getProperties(PARENT_ID);
  String clientType=client.getClientType();
  Map m=getStylesProfileMap(clientType,parentSet);
  if (m != null) {
    m.put(clientType,client);
  }
  return;
}

public int size(){
  return data.size();
}

public void testBug4808() throws Exception {
  MysqlConnectionPoolDataSource ds=new MysqlConnectionPoolDataSource();
  ds.setURL(BaseTestCase.dbUrl);
  PooledConnection closeMeTwice=ds.getPooledConnection();
  closeMeTwice.close();
  closeMeTwice.close();
}

public void testComputeZNaN(){
  Geometry linearGeom=read("LINESTRING (0 0, 10 10 10)");
  LengthIndexedLine indexedLine=new LengthIndexedLine(linearGeom);
  double projIndex=indexedLine.project(new Coordinate(5,5));
  Coordinate projPt=indexedLine.extractPoint(projIndex);
  assertTrue(Double.isNaN(projPt.z));
}

public static int optionLength(String option){
  if (option.equals("-t"))   return 2;
  if (option.equals("-d"))   return 2;
  if (option.equals("-x"))   return 2;
  return 0;
}

public final double cos(){
  return Math.cos(this.radians);
}

public static FloatBuffer createFloatBuffer(float[] coords){
  ByteBuffer bb=ByteBuffer.allocateDirect(coords.length * SIZEOF_FLOAT);
  bb.order(ByteOrder.nativeOrder());
  FloatBuffer fb=bb.asFloatBuffer();
  fb.put(coords);
  fb.position(0);
  return fb;
}

public IntStreamEx remove(IntPredicate predicate){
  return filter(predicate.negate());
}

static void sendRawLine(PircBot bot,BufferedWriter bwriter,String line){
  if (line.length() > bot.getMaxLineLength() - 2) {
    line=line.substring(0,bot.getMaxLineLength() - 2);
  }
synchronized (bwriter) {
    try {
      bwriter.write(line + "\r\n");
      bwriter.flush();
    }
 catch (    Exception e) {
    }
  }
}

Entry kill(){
  Entry entry;
  for (int i=entries.size() - 1; i >= 0; i--) {
    entry=entries.get(i);
    if (!entry.dead) {
      entry.dead=true;
      return entry;
    }
  }
  throw new IllegalStateException("There is no entry to kill");
}

public void slotFromLocoAddress(int i,SlotListener l){
  mLocoAddrHash.put(Integer.valueOf(i),l);
  LocoNetMessage m=new LocoNetMessage(4);
  m.setOpCode(LnConstants.OPC_LOCO_ADR);
  m.setElement(1,(i / 128) & 0x7F);
  m.setElement(2,i & 0x7F);
  tc.sendLocoNetMessage(m);
}

protected void uninstallComponents(){
  if (scrollableTabLayoutEnabled()) {
    tabPane.remove(tabScroller.viewport);
    tabPane.remove(tabScroller.scrollForwardButton);
    tabPane.remove(tabScroller.scrollBackwardButton);
    tabScroller=null;
  }
}

public void reset(){
  forms=null;
}

public static Map<String,String> populateRequestProperties(Map<String,String> requestProperties,int bodyLength,MediaType contentType,MediaType acceptType){
  Map<String,String> properties;
  if (requestProperties == null || requestProperties.isEmpty()) {
    properties=new HashMap<>();
  }
 else {
    properties=new HashMap<>(requestProperties);
  }
  if (acceptType != null) {
    properties.put(HeaderNames.ACCEPT,acceptType.toString());
  }
  if (contentType != null) {
    properties.put(HeaderNames.CONTENT_TYPE,contentType.toString());
  }
  if (bodyLength > -1) {
    properties.put(HeaderNames.CONTENT_LENGTH,String.valueOf(bodyLength));
  }
  return properties;
}

public static BlockSnapshotDeleteCompleter createCompleter(DbClient dbClient,BlockSnapshot snapshot,String task){
  BlockSnapshotDeleteCompleter completer=new BlockSnapshotDeleteCompleter(snapshot,task);
  if (snapshot.getConsistencyGroup() != null) {
    List<URI> snapIds=new ArrayList<URI>();
    List<BlockSnapshot> snaps=ControllerUtils.getSnapshotsPartOfReplicationGroup(snapshot,dbClient);
    for (    BlockSnapshot snap : snaps) {
      snapIds.add(snap.getId());
    }
    completer.addIds(snapIds);
  }
  return completer;
}

private void checkProtocolAlreadyExists(Set<String> protocols,String protocolType){
  if (!protocols.contains(protocolType)) {
    protocols.add(protocolType);
  }
}

private static char CallCharMethodV(JNIEnvironment env,int objJREF,int methodID,Address argAddress) throws Exception {
  if (traceJNI)   VM.sysWrite("JNI called: CallCharMethodV  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    Object obj=env.getJNIRef(objJREF);
    Object returnObj=JNIHelpers.invokeWithVarArg(obj,methodID,argAddress,TypeReference.Char,false);
    return Reflection.unwrapChar(returnObj);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
    return 0;
  }
}

public void testConstrStringWithExponentWithPoint3(){
  String a="2380964839238475457356735674573563567890.295784902768787678287E+21";
  int aScale=0;
  BigInteger bA=new BigInteger("2380964839238475457356735674573563567890295784902768787678287");
  BigDecimal aNumber=new BigDecimal(a);
  assertEquals("incorrect value",bA,aNumber.unscaledValue());
  assertEquals("incorrect scale",aScale,aNumber.scale());
}

public static boolean isCompositionPlaylist(ResourceByteRangeProvider resourceByteRangeProvider) throws IOException {
  return IMFCompositionPlaylistType.isCompositionPlaylist(resourceByteRangeProvider);
}

public static MasterPrivateKey decrypt(String passphrase,byte[] encrypted) throws HyperLedgerException {
  try {
    byte[] key=SCrypt.generate(passphrase.getBytes("UTF-8"),BITCOIN_SEED,16384,8,8,32);
    SecretKeySpec keyspec=new SecretKeySpec(key,"AES");
    Cipher cipher=Cipher.getInstance("AES/CBC/PKCS5Padding","BC");
    byte[] iv=Arrays.copyOfRange(encrypted,0,16);
    byte[] data=Arrays.copyOfRange(encrypted,16,encrypted.length);
    cipher.init(Cipher.DECRYPT_MODE,keyspec,new IvParameterSpec(iv));
    return MasterPrivateKey.parse(new String(cipher.doFinal(data)));
  }
 catch (  UnsupportedEncodingException|InvalidAlgorithmParameterException|NoSuchPaddingException|NoSuchProviderException|NoSuchAlgorithmException|InvalidKeyException|BadPaddingException|IllegalBlockSizeException e) {
    throw new HyperLedgerException(e);
  }
}

protected boolean beforeRelease(){
  return deque.size() < maxSize;
}

final boolean transferAfterCancelledWait(Node node){
  if (compareAndSetWaitStatus(node,Node.CONDITION,0)) {
    enq(node);
    return true;
  }
  while (!isOnSyncQueue(node))   Thread.yield();
  return false;
}

public void reset(){
  System.arraycopy(initialState,0,chain,0,chain.length);
  ubiInit(PARAM_TYPE_MESSAGE);
}

public int updateWithOnConflict(String table,ContentValues values,String whereClause,String[] whereArgs,@ConflictAlgorithm int conflictAlgorithm){
  if (values == null || values.size() == 0) {
    throw new IllegalArgumentException("Empty values");
  }
  acquireReference();
  try {
    StringBuilder sql=new StringBuilder(120);
    sql.append("UPDATE ");
    sql.append(CONFLICT_VALUES[conflictAlgorithm]);
    sql.append(table);
    sql.append(" SET ");
    int setValuesSize=values.size();
    int bindArgsSize=(whereArgs == null) ? setValuesSize : (setValuesSize + whereArgs.length);
    Object[] bindArgs=new Object[bindArgsSize];
    int i=0;
    for (    Map.Entry<String,Object> entry : values.valueSet()) {
      sql.append((i > 0) ? "," : "");
      sql.append(entry.getKey());
      bindArgs[i++]=entry.getValue();
      sql.append("=?");
    }
    if (whereArgs != null) {
      for (i=setValuesSize; i < bindArgsSize; i++) {
        bindArgs[i]=whereArgs[i - setValuesSize];
      }
    }
    if (!TextUtils.isEmpty(whereClause)) {
      sql.append(" WHERE ");
      sql.append(whereClause);
    }
    SQLiteStatement statement=new SQLiteStatement(this,sql.toString(),bindArgs);
    try {
      return statement.executeUpdateDelete();
    }
  finally {
      statement.close();
    }
  }
  finally {
    releaseReference();
  }
}

public synchronized void addURLs(List<URL> urls){
  for (  URL url : urls)   super.addURL(url);
  ArrayList searchList=new ArrayList();
  searchList.addAll(searchPath);
  searchList.addAll(urls);
  searchPath=Collections.unmodifiableList(searchPath);
}

protected byte[] httpGet(final String url){
  HttpGet httpRequest=null;
  HttpResponse httpResponse=null;
  CloseableHttpClient client=null;
  try {
    final URI uri=new URI(url.trim());
    httpRequest=new HttpGet(uri);
    if (contentType != null) {
      httpRequest.setHeader(CONTENT_TYPE,contentType);
    }
    client=getHttpClient(url);
    httpResponse=getHttpResponse(client,httpRequest,url);
    final byte[] returnedBytes=readHttpResponse(url,httpResponse);
    return returnedBytes;
  }
 catch (  URISyntaxException e) {
    throw new DSSException(e);
  }
 finally {
    try {
      if (httpRequest != null) {
        httpRequest.releaseConnection();
      }
      if (httpResponse != null) {
        EntityUtils.consumeQuietly(httpResponse.getEntity());
      }
    }
  finally {
      closeClient(client);
    }
  }
}

@Override public String toString(){
  return asString;
}

public final int readChar() throws IOException {
  if (_readEncoding != null) {
    int ch=_readEncoding.read();
    return ch;
  }
  if (_readLength <= _readOffset) {
    if (!readBuffer())     return -1;
  }
  return _readBuffer[_readOffset++] & 0xff;
}

public void writeExif(String jpegFileName,String exifOutFileName) throws FileNotFoundException, IOException {
  if (jpegFileName == null || exifOutFileName == null) {
    throw new IllegalArgumentException(NULL_ARGUMENT_STRING);
  }
  InputStream is=null;
  try {
    is=new FileInputStream(jpegFileName);
    writeExif(is,exifOutFileName);
  }
 catch (  IOException e) {
    closeSilently(is);
    throw e;
  }
  is.close();
}

public void execNonQuery(String sql,String[] selectionArgs){
  for (int i=0, count=selectionArgs.length; i < count; i++)   sql=sql.replaceFirst("[?]",selectionArgs[i]);
  LogUtils.d(sql);
  database.execSQL(sql);
}

public DGeneralSubtreeChooser(JFrame parent,String title,GeneralSubtree generalSubtree){
  super(parent,title,ModalityType.DOCUMENT_MODAL);
  initComponents(generalSubtree);
}

public void insert(UndoObjectStorable p_object){
  if (p_object == null)   throw new IllegalArgumentException(classname + "insert p_object is null");
  disable_redo();
  UndoObjectNode undoable_object=new UndoObjectNode(p_object,stack_level);
  objects_map.put(p_object,undoable_object);
}

protected abstract SimpleEntry entryDataMatched(EntryHierarchyData ehd);

@Override public Enumeration<Option> listOptions(){
  Vector<Option> result=enumToVector(super.listOptions());
  result.add(new Option("\tThe noise percentage. (default " + defaultNoisePercent() + ")","N",1,"-N <num>"));
  return result.elements();
}

private void writeAttribute(java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (namespace.equals("")) {
    xmlWriter.writeAttribute(attName,attValue);
  }
 else {
    registerPrefix(xmlWriter,namespace);
    xmlWriter.writeAttribute(namespace,attName,attValue);
  }
}

@SuppressWarnings("unchecked") protected void notifyPropertyChangeListener(String property,Object oldValue,Object newValue){
  if ((oldValue != null && oldValue.equals(newValue)) || oldValue == newValue) {
    log.error("notifyPropertyChangeListener without change");
  }
  Vector<PropertyChangeListener> v;
synchronized (this) {
    v=(Vector<PropertyChangeListener>)listeners.clone();
  }
  if (log.isDebugEnabled()) {
    log.debug("notify " + v.size() + " listeners about property "+ property);
  }
  int cnt=v.size();
  for (int i=0; i < cnt; i++) {
    PropertyChangeListener client=v.elementAt(i);
    client.propertyChange(new PropertyChangeEvent(this,property,oldValue,newValue));
  }
}

protected final void refreshLoadingViewsSize(){
  final int maximumPullScroll=(int)(getMaximumPullScroll() * 1.2f);
  int pLeft=getPaddingLeft();
  int pTop=getPaddingTop();
  int pRight=getPaddingRight();
  int pBottom=getPaddingBottom();
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    if (mMode.showHeaderLoadingLayout()) {
      mHeaderLayout.setWidth(maximumPullScroll);
      pLeft=-maximumPullScroll;
    }
 else {
      pLeft=0;
    }
  if (mMode.showFooterLoadingLayout()) {
    mFooterLayout.setWidth(maximumPullScroll);
    pRight=-maximumPullScroll;
  }
 else {
    pRight=0;
  }
break;
case VERTICAL:
if (mMode.showHeaderLoadingLayout()) {
mHeaderLayout.setHeight(maximumPullScroll);
pTop=-maximumPullScroll;
}
 else {
pTop=0;
}
if (mMode.showFooterLoadingLayout()) {
mFooterLayout.setHeight(maximumPullScroll);
pBottom=-maximumPullScroll;
}
 else {
pBottom=0;
}
break;
}
if (DEBUG) {
Log.d(LOG_TAG,String.format("Setting Padding. L: %d, T: %d, R: %d, B: %d",pLeft,pTop,pRight,pBottom));
}
setPadding(pLeft,pTop,pRight,pBottom);
}

public Element writeBeanVisual(Element parent,Object o,String name) throws Exception {
  Element node;
  BeanVisual visual;
  if (DEBUG) {
    trace(new Throwable(),name);
  }
  m_CurrentNode=parent;
  visual=(BeanVisual)o;
  node=writeToXML(parent,o,name);
  invokeWriteToXML(node,visual.getIconPath(),VAL_ICONPATH);
  invokeWriteToXML(node,visual.getAnimatedIconPath(),VAL_ANIMATEDICONPATH);
  return node;
}

private String displayNametoBackCompatName(String queryName){
  final int lastBackSlash=queryName.lastIndexOf('\\');
  if (lastBackSlash > 0 && lastBackSlash < queryName.length() - 1) {
    queryName=(char)0x00ab + queryName;
    queryName=queryName.substring(0,lastBackSlash + 1) + (char)0x00bb + ' '+ queryName.substring(lastBackSlash + 2);
    queryName=queryName.replace('\\',(char)0x2044);
  }
  return queryName;
}

public SQLiteDatabaseConfiguration(String path,int openFlags){
  if (path == null) {
    throw new IllegalArgumentException("path must not be null.");
  }
  this.path=path;
  label=stripPathForLogs(path);
  this.openFlags=openFlags;
  maxSqlCacheSize=25;
  locale=Locale.getDefault();
}

@Override public void drawRangeGridline(Graphics2D g2,CategoryPlot plot,ValueAxis axis,Rectangle2D dataArea,double value){
  Range range=axis.getRange();
  if (!range.contains(value)) {
    return;
  }
  Rectangle2D adjusted=new Rectangle2D.Double(dataArea.getX(),dataArea.getY() + getYOffset(),dataArea.getWidth() - getXOffset(),dataArea.getHeight() - getYOffset());
  Line2D line1=null;
  Line2D line2=null;
  PlotOrientation orientation=plot.getOrientation();
  if (orientation == PlotOrientation.HORIZONTAL) {
    double x0=axis.valueToJava2D(value,adjusted,plot.getRangeAxisEdge());
    double x1=x0 + getXOffset();
    double y0=dataArea.getMaxY();
    double y1=y0 - getYOffset();
    double y2=dataArea.getMinY();
    line1=new Line2D.Double(x0,y0,x1,y1);
    line2=new Line2D.Double(x1,y1,x1,y2);
  }
 else   if (orientation == PlotOrientation.VERTICAL) {
    double y0=axis.valueToJava2D(value,adjusted,plot.getRangeAxisEdge());
    double y1=y0 - getYOffset();
    double x0=dataArea.getMinX();
    double x1=x0 + getXOffset();
    double x2=dataArea.getMaxX();
    line1=new Line2D.Double(x0,y0,x1,y1);
    line2=new Line2D.Double(x1,y1,x2,y1);
  }
  Paint paint=plot.getRangeGridlinePaint();
  Stroke stroke=plot.getRangeGridlineStroke();
  g2.setPaint(paint != null ? paint : Plot.DEFAULT_OUTLINE_PAINT);
  g2.setStroke(stroke != null ? stroke : Plot.DEFAULT_OUTLINE_STROKE);
  g2.draw(line1);
  g2.draw(line2);
}

public static String dump(final EndpointDescriptor descriptor){
  return String.format("Endpoint Descriptor:%n" + "  bLength %18d%n" + "  bDescriptorType %10d%n"+ "  bEndpointAddress %9s  EP %d %s%n"+ "  bmAttributes %13d%n"+ "    Transfer Type             %s%n"+ "    Synch Type                %s%n"+ "    Usage Type                %s%n"+ "  wMaxPacketSize %11d%n"+ "  bInterval %16d%n",descriptor.bLength(),descriptor.bDescriptorType(),String.format("0x%02x",descriptor.bEndpointAddress() & 0xff),descriptor.bEndpointAddress() & 0x0f,getDirectionName(descriptor.bEndpointAddress()),descriptor.bmAttributes() & 0xff,getTransferTypeName(descriptor.bmAttributes()),getSynchTypeName(descriptor.bmAttributes()),getUsageTypeName(descriptor.bmAttributes()),descriptor.wMaxPacketSize() & 0xffff,descriptor.bInterval() & 0xff);
}

public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(2);
  newVector.addElement(new Option("\tNumber of execution slots.\n" + "\t(default 1 - i.e. no parallelism)\n" + "\t(use 0 to auto-detect number of cores)","num-slots",1,"-num-slots <num>"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

public static void printPadding(PrintWriter out,int padding){
  for (int i=0; i < padding; ++i) {
    out.print(" ");
  }
}

protected void sneakyClear(){
  List<EObject> collection=new UnmodifiableEList<>(size,data);
  sneakyDoClear();
  for (Iterator<EObject> i=collection.iterator(); i.hasNext(); ) {
    inverseRemove(i.next(),null);
  }
}

@CalledByNative public static Bitmap createHomeScreenIconFromWebIcon(Context context,Bitmap webIcon){
  ActivityManager am=(ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
  int maxInnerSize=Math.round(am.getLauncherLargeIconSize() * MAX_INNER_SIZE_RATIO);
  int innerSize=Math.min(maxInnerSize,Math.max(webIcon.getWidth(),webIcon.getHeight()));
  int padding=Math.round(ICON_PADDING_RATIO * innerSize);
  int outerSize=innerSize + 2 * padding;
  Bitmap bitmap=null;
  try {
    bitmap=Bitmap.createBitmap(outerSize,outerSize,Bitmap.Config.ARGB_8888);
  }
 catch (  OutOfMemoryError e) {
    Log.w(TAG,"OutOfMemoryError while creating bitmap for home screen icon.");
    return webIcon;
  }
  Canvas canvas=new Canvas(bitmap);
  Rect innerBounds=new Rect(padding,padding,outerSize - padding,outerSize - padding);
  Paint paint=new Paint(Paint.ANTI_ALIAS_FLAG);
  paint.setFilterBitmap(true);
  canvas.drawBitmap(webIcon,null,innerBounds,paint);
  int cornerRadius=Math.round(ICON_CORNER_RADIUS_RATIO * outerSize);
  Path path=new Path();
  path.setFillType(Path.FillType.INVERSE_WINDING);
  RectF innerBoundsF=new RectF(innerBounds);
  path.addRoundRect(innerBoundsF,cornerRadius,cornerRadius,Path.Direction.CW);
  paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
  canvas.drawPath(path,paint);
  return bitmap;
}

private static boolean isInOverflow(MenuItem item){
  return !isActionButton(item);
}

private static int determineConsecutiveBinaryCount(CharSequence msg,byte[] bytes,int startpos) throws WriterException {
  int len=msg.length();
  int idx=startpos;
  while (idx < len) {
    char ch=msg.charAt(idx);
    int numericCount=0;
    while (numericCount < 13 && isDigit(ch)) {
      numericCount++;
      int i=idx + numericCount;
      if (i >= len) {
        break;
      }
      ch=msg.charAt(i);
    }
    if (numericCount >= 13) {
      return idx - startpos;
    }
    int textCount=0;
    while (textCount < 5 && isText(ch)) {
      textCount++;
      int i=idx + textCount;
      if (i >= len) {
        break;
      }
      ch=msg.charAt(i);
    }
    if (textCount >= 5) {
      return idx - startpos;
    }
    ch=msg.charAt(idx);
    if (bytes[idx] == 63 && ch != '?') {
      throw new WriterException("Non-encodable character detected: " + ch + " (Unicode: "+ (int)ch+ ')');
    }
    idx++;
  }
  return idx - startpos;
}

void pluginMessage(Throwable ex){
  log.printLines(PrefixKind.JAVAC,"msg.plugin.uncaught.exception");
  ex.printStackTrace(log.getWriter(WriterKind.NOTICE));
}

public Builder map(String fullyQualifiedColumnNames,ColumnMapper mapper){
  Predicate<ColumnId> columnMatcher=Predicates.includes(fullyQualifiedColumnNames,null);
  rules.add(new MapperRule(columnMatcher,mapper));
  return this;
}

public double theta(){
  return Math.atan2(y,x);
}

public static int hash32(final String text,int from,int length){
  return hash32(text.substring(from,from + length));
}

protected void sendClosingMessage(){
  try {
    send(ConnectionMessage.CLOSING,NetworkProtocol.TCP);
  }
 catch (  Exception e) {
    log.warning("TCP already disconnected or error: " + e.getMessage());
  }
  try {
    send(ConnectionMessage.CLOSING,NetworkProtocol.UDP);
  }
 catch (  Exception e) {
    log.warning("UDP already disconnected or error: " + e.getMessage());
  }
}

public static String parseNumberToString(int aNumber){
  boolean temp=true, negative=false;
  if (aNumber < 0) {
    aNumber*=-1;
    negative=true;
  }
  StringBuilder tStringB=new StringBuilder();
  for (int i=1000000000; i > 0; i/=10) {
    int tDigit=(aNumber / i) % 10;
    if (temp && tDigit != 0)     temp=false;
    if (!temp) {
      tStringB.append(tDigit);
      if (i != 1)       for (int j=i; j > 0; j/=1000)       if (j == 1)       tStringB.append(",");
    }
  }
  String tString=tStringB.toString();
  if (tString.equals(E))   tString="0";
  return negative ? "-" + tString : tString;
}

public void remove(T graphic){
synchronized (mLock) {
    mGraphics.remove(graphic);
    if (mFirstGraphic != null && mFirstGraphic.equals(graphic)) {
      mFirstGraphic=null;
    }
  }
  postInvalidate();
}

public boolean validSystemNameConfig(String systemName){
  return (true);
}

public int read() throws IOException {
  ensureOpen();
  if (next >= length) {
    return -1;
  }
  return str.charAt(next++);
}

void addHiddenChannelListener(HiddenChannelListener listener){
  listeners.add(listener);
}

public boolean nextTo(final Entity entity,final double step){
  final Rectangle2D thisArea=new Rectangle2D.Double(x - step,y - step,area.getWidth() + 2 * step,area.getHeight() + 2 * step);
  return thisArea.intersects(entity.getArea());
}

private long rebalance_nl(final long nParent,final long n,LongArray unlinked){
  final long nL=unsharedLeft(n,unlinked);
  final long nR=unsharedRight(n,unlinked);
  if ((nL == 0 || nR == 0) && vOptIsNull(n)) {
    if (attemptUnlink_nl(nParent,n,unlinked)) {
      return fixHeight_nl(nParent);
    }
 else {
      return n;
    }
  }
  final int hN=height(n);
  final int hL0=height(nL);
  final int hR0=height(nR);
  final int hNRepl=1 + Math.max(hL0,hR0);
  final int bal=hL0 - hR0;
  if (bal > 1) {
    return rebalanceToRight_nl(nParent,n,nL,hR0,unlinked);
  }
 else   if (bal < -1) {
    return rebalanceToLeft_nl(nParent,n,nR,hL0,unlinked);
  }
 else   if (hNRepl != hN) {
    height(n,hNRepl);
    return fixHeight_nl(nParent);
  }
 else {
    return 0;
  }
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

private void addConversations(){
  TPP_Phase myphase=AWAITING;
  mainNPC.add(ConversationStates.ATTENDING,Arrays.asList("rats","rats!"),new TPPQuestInPhaseCondition(myphase),ConversationStates.ATTENDING,"Well, we tried to clean up the city. " + "You can get a #reward for your help now, ask about #details " + "if you want to know more.",null);
  mainNPC.add(ConversationStates.ATTENDING,"details",new TPPQuestInPhaseCondition(myphase),ConversationStates.ATTENDING,null,new DetailsKillingsAction());
  mainNPC.add(ConversationStates.ATTENDING,"reward",new TPPQuestInPhaseCondition(myphase),ConversationStates.ATTENDING,null,new RewardPlayerAction());
}

public static void w(String tag,String s,Object... args){
  if (LOG.WARN >= LOGLEVEL)   Log.w(tag,String.format(s,args));
}

@edu.umd.cs.findbugs.annotations.SuppressWarnings(value="BC_UNCONFIRMED_CAST",justification="Only JMXConnectionNotification instances are used.") public void handleNotification(Notification notification,Object handback){
  if (handback instanceof AgentImpl) {
    AgentImpl agent=(AgentImpl)handback;
    JMXConnectionNotification jmxNotifn=(JMXConnectionNotification)notification;
    if (logger.isDebugEnabled()) {
      logger.debug("Connection notification for connection id : '{}'",jmxNotifn.getConnectionId());
    }
    agent.updateRmiClientsCount();
  }
}

public static boolean isBlank(String s){
  if (s == null) {
    return true;
  }
  int sLen=s.length();
  for (int i=0; i < sLen; i++) {
    if (!Character.isWhitespace(s.charAt(i))) {
      return false;
    }
  }
  return true;
}

public PlainTextDictionary(Path path) throws IOException {
  in=Files.newBufferedReader(path,StandardCharsets.UTF_8);
}

public boolean addAliasByNumber(String aliasName,String number){
  if (aliasName.contains("'"))   return false;
  String contactName=ContactsManager.getContactNameOrNull(ctx,number);
  addOrUpdate(aliasName,number,contactName);
  return true;
}

void splitData(Node node,Node newNode,int offset){
  if (ranges != null) {
    notifyRangesSplitData(node,newNode,offset);
  }
}

@NotNull @ObjectiveCName("addTrustedKey:") public ConfigurationBuilder addTrustedKey(String trustedKey){
  trustedKeys.add(new TrustedKey(trustedKey));
  return this;
}

private void checkIsCorrectClass(){
  if (checkIsSubClass(ACT_NAME)) {
    type=ElementType.ACTTIVITY;
  }
 else   if (checkIsSubClass(FRAG_NAME) || checkIsSubClass(V4_FRAG_NAME)) {
    type=ElementType.FRAGMENT;
  }
 else {
    throw new IllegalArgumentException(String.format("class %s must be extends from %s or %s or %s",element.getQualifiedName(),ACT_NAME,FRAG_NAME,V4_FRAG_NAME));
  }
}

String transformResourceIdToFileName(final String resourceName){
  return resourceName.replace('_','.');
}

public void disable(RichFormatterFeature feature){
  features.remove(feature);
}

public boolean isCritical(){
  return true;
}

public final boolean isSecure(Socket sock) throws IllegalArgumentException {
  if (sock == null) {
    throw new IllegalArgumentException("Socket may not be null.");
  }
  if (sock.getClass() != Socket.class) {
    throw new IllegalArgumentException("Socket not created by this factory.");
  }
  if (sock.isClosed()) {
    throw new IllegalArgumentException("Socket is closed.");
  }
  return false;
}

public synchronized void add(String name,long threadId){
  if (mFinished) {
    throw new IllegalStateException("Marker added to finished log");
  }
  mMarkers.add(new Marker(name,threadId,SystemClock.elapsedRealtime()));
}

private void skipWhitespace(){
  matcher.usePattern(WHITESPACE);
  if (matcher.lookingAt()) {
    matcher.region(matcher.end(),matcher.regionEnd());
  }
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return SUCCESS;
case 2:
  return MSG;
default :
return null;
}
}

public void pushStylesheet(Stylesheet s){
  if (m_stylesheets.size() == 0)   m_stylesheetRoot=(StylesheetRoot)s;
  m_stylesheets.push(s);
}

private void fillNodesInContext(SiteNode rootNode,List<SiteNode> nodesList){
  @SuppressWarnings("unchecked") Enumeration<SiteNode> en=rootNode.children();
  while (en.hasMoreElements()) {
    SiteNode sn=en.nextElement();
    if (isInContext(sn)) {
      nodesList.add(sn);
    }
    fillNodesInContext(sn,nodesList);
  }
}

@SuppressWarnings({"rawtypes","unchecked"}) public boolean matches(InventoryCrafting p_77569_1_,World p_77569_2_){
  ArrayList arraylist=new ArrayList(this.recipeItems);
  for (int i=0; i < 5; ++i) {
    for (int j=0; j < 5; ++j) {
      ItemStack itemstack=p_77569_1_.getStackInRowAndColumn(j,i);
      if (itemstack != null) {
        boolean flag=false;
        Iterator iterator=arraylist.iterator();
        while (iterator.hasNext()) {
          ItemStack itemstack1=(ItemStack)iterator.next();
          if (itemstack.getItem() == itemstack1.getItem() && (itemstack1.getItemDamage() == 32767 || itemstack.getItemDamage() == itemstack1.getItemDamage())) {
            flag=true;
            arraylist.remove(itemstack1);
            break;
          }
        }
        if (!flag) {
          return false;
        }
      }
    }
  }
  return arraylist.isEmpty();
}

public StringBuilder dumpStatements(final IAccessPath<ISPO> accessPath){
  final StringBuilder sb=new StringBuilder();
  final BigdataStatementIterator itr=asStatementIterator(accessPath.iterator());
  try {
    while (itr.hasNext()) {
      sb.append("\n" + itr.next());
    }
    return sb;
  }
  finally {
    itr.close();
  }
}

public static Element svgWaitIcon(Document document,double x,double y,double w,double h){
  Element g=SVGUtil.svgElement(document,SVGConstants.SVG_G_TAG);
  setAtt(g,SVGConstants.SVG_TRANSFORM_ATTRIBUTE,"translate(" + x + " "+ y+ ") scale("+ w+ " "+ h+ ")");
  Element thro=SVGUtil.svgElement(document,SVGConstants.SVG_PATH_TAG);
  setAtt(thro,SVGConstants.SVG_D_ATTRIBUTE,THROBBER_PATH);
  setStyle(thro,THROBBER_STYLE);
  Element anim=SVGUtil.svgElement(document,SVGConstants.SVG_ANIMATE_TRANSFORM_TAG);
  setAtt(anim,SVGConstants.SVG_ATTRIBUTE_NAME_ATTRIBUTE,SVGConstants.SVG_TRANSFORM_ATTRIBUTE);
  setAtt(anim,SVGConstants.SVG_ATTRIBUTE_TYPE_ATTRIBUTE,"XML");
  setAtt(anim,SVGConstants.SVG_TYPE_ATTRIBUTE,SVGConstants.SVG_ROTATE_ATTRIBUTE);
  setAtt(anim,SVGConstants.SVG_FROM_ATTRIBUTE,"0 .5 .5");
  setAtt(anim,SVGConstants.SVG_TO_ATTRIBUTE,"360 .5 .5");
  setAtt(anim,SVGConstants.SVG_BEGIN_ATTRIBUTE,fmt(Math.random() * 2) + "s");
  setAtt(anim,SVGConstants.SVG_DUR_ATTRIBUTE,"2s");
  setAtt(anim,SVGConstants.SVG_REPEAT_COUNT_ATTRIBUTE,"indefinite");
  setAtt(anim,SVGConstants.SVG_FILL_ATTRIBUTE,"freeze");
  thro.appendChild(anim);
  g.appendChild(thro);
  return g;
}

protected void onEnd(Pcap pcap){
  this.end=true;
}

public void cd(String dir){
  StringBuilder buf=new StringBuilder();
  String command=String.format(ImageServerDialogProperties.getString("cmd.cd"),dir);
  sendWaitFor(command,defaultTimeout,prompts,buf);
  log.debug(buf.toString());
}

public void addRequestProperty(String key,String value){
  jarFileURLConnection.addRequestProperty(key,value);
}

public static String numberToString(Number number) throws JSONException {
  if (number == null) {
    throw new JSONException("Null pointer");
  }
  testValidity(number);
  String string=number.toString();
  if (string.indexOf('.') > 0 && string.indexOf('e') < 0 && string.indexOf('E') < 0) {
    while (string.endsWith("0")) {
      string=string.substring(0,string.length() - 1);
    }
    if (string.endsWith(".")) {
      string=string.substring(0,string.length() - 1);
    }
  }
  return string;
}

public static void writeSpecInfoToFiles(SecuritySpecModel securitySpecModel,String app_ROOT_DIR){
  writeInfoFlowSummaryToFile(securitySpecModel,Config.v().APP_ROOT_DIR);
  writeInfoFlowDetailsToFile(securitySpecModel,Config.v().APP_ROOT_DIR);
  writeValueInfoToFile(securitySpecModel,Config.v().APP_ROOT_DIR);
  writePointsToInfoToFile(securitySpecModel,Config.v().APP_ROOT_DIR);
}

private int measureShort(int measureSpec){
  int result;
  int specMode=MeasureSpec.getMode(measureSpec);
  int specSize=MeasureSpec.getSize(measureSpec);
  if (specMode == MeasureSpec.EXACTLY) {
    result=specSize;
  }
 else {
    result=(int)(2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
    if (specMode == MeasureSpec.AT_MOST) {
      result=Math.min(result,specSize);
    }
  }
  return result;
}

private void handleCommand(int id,String command,String params){
  String originCommand=commandId.get(id);
  if (originCommand == null) {
    originCommand="";
  }
  handler.handleCommand(id,command,params,originCommand);
  if (command.equals("error")) {
    LOGGER.warning("[FFZ-WS] Error: " + params);
  }
}

private void closeAllDumps(){
  Object[] options={"Close all","Cancel close"};
  int selectValue=JOptionPane.showOptionDialog(null,"<html><body>Are you sure, you want to close all open dump files","Confirm closing...",JOptionPane.DEFAULT_OPTION,JOptionPane.QUESTION_MESSAGE,null,options,options[0]);
  if (selectValue == 0) {
    topNodes=new Vector();
    resetMainPanel();
  }
}

private void closeCounterDataInputStream() throws DataFallbackException {
  if (LOG.isDebugEnabled())   LOG.debug("Closing the counter file reader for the file " + counterFile.getName());
  if (dInput != null) {
    try {
      dInput.close();
    }
 catch (    IOException e) {
      throw new DataFallbackException(e.getMessage());
    }
 finally {
      dInput=null;
    }
  }
}

private static String removeFileNameExtension(String fileName){
  if (fileName.lastIndexOf(".") == -1)   return fileName;
  return fileName.substring(0,fileName.lastIndexOf("."));
}

public void clear(){
  read=write=count=0;
  Arrays.fill(buffer,null);
}

private Response<Bitmap> doParse(NetworkResponse response){
  byte[] data=response.data;
  BitmapFactory.Options decodeOptions=new BitmapFactory.Options();
  Bitmap bitmap=null;
  if (mMaxWidth == 0 && mMaxHeight == 0) {
    decodeOptions.inPreferredConfig=mDecodeConfig;
    bitmap=BitmapFactory.decodeByteArray(data,0,data.length,decodeOptions);
  }
 else {
    decodeOptions.inJustDecodeBounds=true;
    BitmapFactory.decodeByteArray(data,0,data.length,decodeOptions);
    int actualWidth=decodeOptions.outWidth;
    int actualHeight=decodeOptions.outHeight;
    int desiredWidth=getResizedDimension(mMaxWidth,mMaxHeight,actualWidth,actualHeight,mScaleType);
    int desiredHeight=getResizedDimension(mMaxHeight,mMaxWidth,actualHeight,actualWidth,mScaleType);
    decodeOptions.inJustDecodeBounds=false;
    decodeOptions.inSampleSize=findBestSampleSize(actualWidth,actualHeight,desiredWidth,desiredHeight);
    Bitmap tempBitmap=BitmapFactory.decodeByteArray(data,0,data.length,decodeOptions);
    if (tempBitmap != null && (tempBitmap.getWidth() > desiredWidth || tempBitmap.getHeight() > desiredHeight)) {
      bitmap=Bitmap.createScaledBitmap(tempBitmap,desiredWidth,desiredHeight,true);
      tempBitmap.recycle();
    }
 else {
      bitmap=tempBitmap;
    }
  }
  if (bitmap == null) {
    return Response.error(new ParseError(response));
  }
 else {
    return Response.success(bitmap,HttpHeaderParser.parseCacheHeaders(response));
  }
}

private List<Entry> reduceWithDouglasPeuker(List<Entry> entries,double epsilon){
  if (epsilon <= 0 || entries.size() < 3) {
    return entries;
  }
  keep[0]=true;
  keep[entries.size() - 1]=true;
  algorithmDouglasPeucker(entries,epsilon,0,entries.size() - 1);
  List<Entry> reducedEntries=new ArrayList<>();
  for (int i=0; i < entries.size(); i++) {
    if (keep[i]) {
      Entry curEntry=entries.get(i);
      reducedEntries.add(new Entry(curEntry.getVal(),curEntry.getXIndex()));
    }
  }
  return reducedEntries;
}

static int hiBitPos(long num){
  return 63 - Long.numberOfLeadingZeros(num);
}

public AdaptiveGridArchive(int capacity,Problem problem,int numberOfDivisions){
  this.capacity=capacity;
  this.problem=problem;
  this.numberOfDivisions=numberOfDivisions;
  minimum=new double[problem.getNumberOfObjectives()];
  maximum=new double[problem.getNumberOfObjectives()];
  density=new int[(int)Math.pow(numberOfDivisions,problem.getNumberOfObjectives())];
  adaptGrid();
}

BeginLineAction(String nm,boolean select){
  super(nm);
  this.select=select;
}

public static boolean occupy(int waitMs){
  if (occupiedUntil != null && occupiedUntil.after(new Date())) {
    return false;
  }
  occupiedUntil=DateUtils.addMilliseconds(new Date(),waitMs);
  return true;
}

private void adjustWindowSize(ContainerWrapper parent){
  BoundSize wBounds=lc.getPackWidth();
  BoundSize hBounds=lc.getPackHeight();
  if (wBounds == null && hBounds == null)   return;
  Window win=((Window)SwingUtilities.getAncestorOfClass(Window.class,(Component)parent.getComponent()));
  if (win == null)   return;
  Dimension prefSize=win.getPreferredSize();
  int targW=constrain(checkParent(win),win.getWidth(),prefSize.width,wBounds);
  int targH=constrain(checkParent(win),win.getHeight(),prefSize.height,hBounds);
  int x=Math.round(win.getX() - ((targW - win.getWidth()) * (1 - lc.getPackWidthAlign())));
  int y=Math.round(win.getY() - ((targH - win.getHeight()) * (1 - lc.getPackHeightAlign())));
  win.setBounds(x,y,targW,targH);
}

@Override public void write(List<byte[]> valueList) throws IOException {
  if (isFirstTime) {
    init();
    isFirstTime=false;
  }
  for (  byte[] value : valueList) {
    oneDictionaryChunkList.add(ByteBuffer.wrap(value));
    totalRecordCount++;
  }
}

public void proceed(){
  idle.set(true);
  subject.onNext(null);
}

private static boolean nsEquals(String nsURI_1,String nsURI_2){
  if (nsURI_1 == null) {
    return (nsURI_2 == null);
  }
 else {
    return nsURI_1.equals(nsURI_2);
  }
}

private boolean linkFirst(Node<E> node){
  if (count >= capacity)   return false;
  Node<E> f=first;
  node.next=f;
  first=node;
  if (last == null)   last=node;
 else   f.prev=node;
  ++count;
  notEmpty.signal();
  return true;
}

public static void sleep(long millis){
  if (mockSleepQueue == null) {
    sleepUninterruptibly(millis,TimeUnit.MILLISECONDS);
  }
 else {
    try {
      boolean isMultiPass=mockSleepQueue.take();
      rollMockClockMillis(millis);
      if (isMultiPass)       mockSleepQueue.offer(true);
    }
 catch (    InterruptedException e) {
    }
  }
}

public boolean isHandle(String handle){
  return clientHandle.equals(handle);
}

public static void isGTE(String argName,long i,long min){
  if (i < min) {
    throw new IllegalArgumentException(String.format("%s must be >= %d; was %d",argName,min,i));
  }
}

int adjustTextOffset(int offset){
  maxTextOffset=Math.max(maxTextOffset,offset);
  return maxTextOffset;
}

public static Object valueFromClassConstant(String key,Object defaultValue){
  Configuration conf=instance();
  String val=valueFor(key);
  if (val == null) {
    return defaultValue;
  }
  int idx=val.lastIndexOf(".");
  String klassname;
  String cnst;
  try {
    klassname=val.substring(0,idx);
    cnst=val.substring(idx + 1);
  }
 catch (  IndexOutOfBoundsException e) {
    conf.warning("Property key " + key + " for object value constant is not properly formatted; "+ "should be FQN<dot>constant, is "+ val);
    return defaultValue;
  }
  Class klass;
  try {
    klass=Class.forName(klassname);
  }
 catch (  ClassNotFoundException e) {
    conf.warning("Property for object value constant " + key + " is not a FQN: "+ klassname);
    return defaultValue;
  }
  Object cnstVal;
  try {
    Field fld=klass.getDeclaredField(cnst);
    try {
      cnstVal=fld.get(klass);
    }
 catch (    IllegalAccessException e) {
      conf.warning("Property for object value constant " + key + ", field is not public: "+ klassname+ "."+ cnst);
      return defaultValue;
    }
  }
 catch (  NoSuchFieldException e) {
    conf.warning("Property for object value constant " + key + " is not a FQN: "+ klassname);
    return defaultValue;
  }
  return cnstVal;
}

public static boolean isWifiConnected(Context context){
  ConnectivityManager connectivityManager=(ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
  NetworkInfo networkInfo=connectivityManager.getActiveNetworkInfo();
  return networkInfo != null && networkInfo.getType() == ConnectivityManager.TYPE_WIFI;
}

public StrBuilder insert(final int index,final char value){
  validateIndex(index);
  ensureCapacity(size + 1);
  System.arraycopy(buffer,index,buffer,index + 1,size - index);
  buffer[index]=value;
  size++;
  return this;
}

public List<byte[]> tryDecode(final String targetToken){
  final ByteBuffer payloadBuf=extractValidPayloadFields(targetToken);
  if (payloadBuf == null) {
    return null;
  }
  final List<byte[]> fields=new ArrayList<>();
  try {
    byte[] field=null;
    while ((field=tryReadPayloadNextField(payloadBuf)).length > 0) {
      fields.add(field);
      if (fields.size() > MAX_FIELD_SIZE) {
        return null;
      }
    }
    return fields;
  }
 catch (  final BufferUnderflowException e) {
    return null;
  }
}

@NamespacePermission(fields="#request.namespace",permissions=NamespacePermissionEnum.WRITE) @Override public BusinessObjectDefinition createBusinessObjectDefinition(BusinessObjectDefinitionCreateRequest request){
  validateBusinessObjectDefinitionCreateRequest(request);
  NamespaceEntity namespaceEntity=namespaceDaoHelper.getNamespaceEntity(request.getNamespace());
  DataProviderEntity dataProviderEntity=dataProviderDaoHelper.getDataProviderEntity(request.getDataProviderName());
  BusinessObjectDefinitionKey businessObjectDefinitionKey=new BusinessObjectDefinitionKey(request.getNamespace(),request.getBusinessObjectDefinitionName());
  BusinessObjectDefinitionEntity businessObjectDefinitionEntity=businessObjectDefinitionDao.getBusinessObjectDefinitionByKey(businessObjectDefinitionKey);
  if (businessObjectDefinitionEntity != null) {
    throw new AlreadyExistsException(String.format("Unable to create business object definition with name \"%s\" because it already exists for namespace \"%s\".",businessObjectDefinitionKey.getBusinessObjectDefinitionName(),businessObjectDefinitionKey.getNamespace()));
  }
  businessObjectDefinitionEntity=createBusinessObjectDefinitionEntity(request,namespaceEntity,dataProviderEntity);
  return createBusinessObjectDefinitionFromEntity(businessObjectDefinitionEntity);
}

public void endBlock() throws IOException {
  if (indent.length() <= 4) {
    indent="";
  }
 else   if (indent.length() >= 4) {
    indent=indent.substring(4);
  }
  print("}",null);
  printer.println();
}

private void migrateBlockVolumes(){
  log.info("Migrating BlockConsistencyGroup references on Volume objects.");
  DbClient dbClient=getDbClient();
  List<URI> volumeURIs=dbClient.queryByType(Volume.class,false);
  Iterator<Volume> volumes=dbClient.queryIterativeObjects(Volume.class,volumeURIs,true);
  List<BlockObject> blockObjects=new ArrayList<BlockObject>();
  while (volumes.hasNext()) {
    blockObjects.add(volumes.next());
  }
  migrateBlockObjects(blockObjects);
}

public static String decode(String s,String enc,boolean plusToSpace){
  boolean modified=false;
  if (enc == null || enc.length() == 0) {
    enc="UTF-8";
  }
  int numChars=s.length();
  StringBuilder sb=new StringBuilder(numChars > 500 ? numChars / 2 : numChars);
  int i=0;
  char c;
  byte[] bytes=null;
  while (i < numChars) {
    c=s.charAt(i);
switch (c) {
case '+':
      if (plusToSpace) {
        sb.append(' ');
      }
 else {
        sb.append('+');
      }
    i++;
  modified=true;
break;
case '%':
try {
if (bytes == null) {
  bytes=new byte[(numChars - i) / 3];
}
int pos=0;
while (((i + 2) < numChars) && (c == '%')) {
  bytes[pos++]=(byte)Integer.parseInt(s.substring(i + 1,i + 3),16);
  i+=3;
  if (i < numChars) {
    c=s.charAt(i);
  }
}
if ((i < numChars) && (c == '%')) {
  throw new IllegalArgumentException("Illegal URL % character: " + s);
}
try {
  sb.append(new String(bytes,0,pos,enc));
}
 catch (UnsupportedEncodingException e) {
  throw new RuntimeException(e.toString());
}
}
 catch (NumberFormatException e) {
throw new IllegalArgumentException("Illegal URL encoding: " + s);
}
modified=true;
break;
default :
sb.append(c);
i++;
break;
}
}
if (modified) {
return sb.toString();
}
return s;
}

public ServerControllerTest(String name){
  super(name);
  this.baseDir=System.getProperty("com.mysql.jdbc.test.ServerController.basedir");
}

@Override public String encode(){
  return value == intValue() ? Integer.toString(intValue()) + unit.encode() : Double.toString(value) + unit.encode();
}

public HostNameParser(LexerCore lexer){
  this.lexer=lexer;
  lexer.selectLexer("charLexer");
  stripAddressScopeZones=Boolean.getBoolean("gov2.nist.core.STRIP_ADDR_SCOPES");
}

private void loadText(InputStream is){
  BufferedReader reader;
  String line;
  if (is == null) {
    throw new Error("Can't load diphone db file.");
  }
  reader=new BufferedReader(new InputStreamReader(is));
  try {
    line=reader.readLine();
    lineCount++;
    while (line != null) {
      if (!line.startsWith("***")) {
        parseAndAdd(line,reader);
      }
      line=reader.readLine();
    }
    reader.close();
  }
 catch (  IOException e) {
    throw new Error(e.getMessage() + " at line " + lineCount);
  }
 finally {
  }
}

public void addEmailAdress(String anEmailAddress){
  if (mEmails.indexOf(anEmailAddress) < 0) {
    mEmails.add(anEmailAddress);
  }
}

public static Instances loadDataset(String options[],char T) throws Exception {
  Instances D=null;
  String filename=Utils.getOption(T,options);
  if (filename == null || filename.isEmpty())   throw new Exception("[Error] You did not specify a dataset!");
  File file=new File(filename);
  if (!file.exists())   throw new Exception("[Error] File does not exist: " + filename);
  if (file.isDirectory())   throw new Exception("[Error] " + filename + " points to a directory!");
  try {
    DataSource source=new DataSource(filename);
    D=source.getDataSet();
  }
 catch (  Exception e) {
    e.printStackTrace();
    throw new Exception("[Error] Failed to load Instances from file '" + filename + "'.");
  }
  return D;
}

private boolean isTypedTimeFullyLegal(){
  if (mIs24HourMode) {
    int[] values=getEnteredTime(null);
    return (values[0] >= 0 && values[1] >= 0 && values[1] < 60);
  }
 else {
    return (mTypedTimes.contains(getAmOrPmKeyCode(AM)) || mTypedTimes.contains(getAmOrPmKeyCode(PM)));
  }
}

public void test_groupCommit() throws Exception {
  final int writeServiceCorePoolSize=100;
  final Properties properties=getProperties();
  properties.setProperty(TestOptions.TIMEOUT,"10");
  properties.setProperty(TestOptions.NTASKS,"1000");
  properties.setProperty(Options.WRITE_SERVICE_CORE_POOL_SIZE,"" + writeServiceCorePoolSize);
  properties.setProperty(Options.WRITE_SERVICE_MAXIMUM_POOL_SIZE,"1000");
  properties.setProperty(Options.WRITE_SERVICE_PRESTART_ALL_CORE_THREADS,"true");
  properties.setProperty(Options.WRITE_SERVICE_QUEUE_CAPACITY,"100");
  doComparisonTest(properties);
}

@Override public void operate(Population pop) throws Exception {
  List<Individual> newIndividuals=new LinkedList<Individual>();
  for (int i=0; i < pop.getNumberOfIndividuals(); i++) {
    List<Individual> individuals=operate(pop.get(i));
    newIndividuals.addAll(individuals);
  }
  pop.clear();
  pop.addAllIndividuals(newIndividuals);
}

public int size(){
  return encodedNames.size();
}

public static byte[] toSeed(List<String> words,String passphrase){
  return toSeed(words,passphrase,Version.V0_6);
}

private ArrayList<Interval> findOrCreateIntervalSet(Register r){
  ArrayList<Interval> v=map.get(r);
  if (v == null) {
    v=new ArrayList<Interval>();
    map.put(r,v);
  }
  return v;
}

protected void removeColumns(Collection<String> removeColumnNames,String tableName){
  if (removeColumnNames != null && !removeColumnNames.isEmpty()) {
    execute(getRemoveColumnSQLs(removeColumnNames,tableName),mDb);
  }
}

@Override public double[][] predictIntervals(double conf){
  updateBoundariesAndOrWeights();
  double val=Statistics.normalInverse(1.0 - (1.0 - conf) / 2);
  double min=m_TM.firstKey() - val * m_Width;
  double max=m_TM.lastKey() + val * m_Width;
  double delta=(max - min) / m_NumIntervals;
  double[] probabilities=new double[m_NumIntervals];
  double leftVal=Math.exp(logDensity(min));
  for (int i=0; i < m_NumIntervals; i++) {
    double rightVal=Math.exp(logDensity(min + (i + 1) * delta));
    probabilities[i]=0.5 * (leftVal + rightVal) * delta;
    leftVal=rightVal;
  }
  int[] sortedIndices=Utils.sort(probabilities);
  double sum=0;
  boolean[] toUse=new boolean[probabilities.length];
  int k=0;
  while ((sum < conf) && (k < toUse.length)) {
    toUse[sortedIndices[toUse.length - (k + 1)]]=true;
    sum+=probabilities[sortedIndices[toUse.length - (k + 1)]];
    k++;
  }
  probabilities=null;
  ArrayList<double[]> intervals=new ArrayList<double[]>();
  double[] interval=null;
  boolean haveStartedInterval=false;
  for (int i=0; i < m_NumIntervals; i++) {
    if (toUse[i]) {
      if (haveStartedInterval == false) {
        haveStartedInterval=true;
        interval=new double[2];
        interval[0]=min + i * delta;
      }
      interval[1]=min + (i + 1) * delta;
    }
 else {
      if (haveStartedInterval) {
        haveStartedInterval=false;
        intervals.add(interval);
      }
    }
  }
  if (haveStartedInterval) {
    intervals.add(interval);
  }
  return intervals.toArray(new double[0][0]);
}

public void registerAtmosphere(IAtmosphere atmosphere){
  atmosphereRegistration.put(atmosphere.getUnlocalizedName(),atmosphere);
  atmosphereList.add(atmosphere);
}

public JXSearchField(){
  this("");
}

private static void reply_Login2_Role(body body,MobileSessionCtx wsc,String roleId){
  String form=null;
  Login login=new Login(wsc.ctx);
  KeyNamePair[] clients=login.getClients(new KeyNamePair(Integer.parseInt(roleId),roleId));
  StringBuffer script=new StringBuffer("{\"options\":[");
  for (int i=0; i < clients.length; i++) {
    if (i > 0)     script.append(",");
    KeyNamePair p=clients[i];
    script.append("{\"text\":\"");
    script.append(p.getName());
    script.append("\",\"value\":\"");
    script.append(p.getKey());
    script.append("\"}); ");
  }
  script.append("]}");
}

public void testCreateDocumentType1() throws Throwable {
  Document doc;
  DOMImplementation domImpl;
  DocumentType newDocType;
  Document ownerDocument;
  String qualifiedName="test:root";
  String publicId;
  String systemId;
  List<String> publicIds=new ArrayList<String>();
  publicIds.add("1234");
  publicIds.add("test");
  List<String> systemIds=new ArrayList<String>();
  systemIds.add("");
  systemIds.add("test");
  doc=(Document)load("staffNS",builder);
  domImpl=doc.getImplementation();
  for (int indexN1005D=0; indexN1005D < publicIds.size(); indexN1005D++) {
    publicId=(String)publicIds.get(indexN1005D);
    for (int indexN10061=0; indexN10061 < systemIds.size(); indexN10061++) {
      systemId=(String)systemIds.get(indexN10061);
      newDocType=domImpl.createDocumentType(qualifiedName,publicId,systemId);
      assertNotNull("domimplementationcreatedocumenttype01_newDocType",newDocType);
      ownerDocument=newDocType.getOwnerDocument();
      assertNull("domimplementationcreatedocumenttype01_ownerDocument",ownerDocument);
    }
  }
}

public final void run(){
  if (m_start == 0)   m_start=System.currentTimeMillis();
  m_canContinue=true;
  while (m_canContinue) {
    if (isInterrupted())     return;
    m_lastStart=System.currentTimeMillis();
    m_working=true;
    try {
      m_pollCount++;
      if (canDoWork()) {
        m_canContinue=doWork();
        m_count++;
      }
    }
 catch (    Exception e) {
      log.log(Level.SEVERE,"run",e);
    }
    m_working=false;
    long end=System.currentTimeMillis();
    m_time+=(end - m_lastStart);
    if (isInterrupted())     return;
    try {
      log.fine("sleeping ... " + m_sleepSeconds);
      sleep(m_sleepSeconds * 1000);
    }
 catch (    InterruptedException e1) {
      log.warning("run - " + e1.getLocalizedMessage());
      return;
    }
  }
}

public static SolrDocument assertSearchOneDoc(SolrParams p) throws Exception {
  SolrDocumentList docs=assertSearch(p);
  assertEquals("does not match exactly one doc: " + p.toString() + " => "+ docs.toString(),1,docs.getNumFound());
  assertEquals("does not contain exactly one doc: " + p.toString() + " => "+ docs.toString(),1,docs.size());
  return docs.get(0);
}

private static ValueSource buildSourceTree(IndexSchema schema,String expression,int sourceType){
  int expressionType=getSourceType(expression);
  if (sourceType != FIELD_TYPE && expressionType != FIELD_TYPE && expressionType != FILTER_TYPE && expressionType != sourceType) {
    return null;
  }
switch (expressionType) {
case NUMBER_TYPE:
    return buildNumericSource(schema,expression);
case DATE_TYPE:
  return buildDateSource(schema,expression);
case STRING_TYPE:
return buildStringSource(schema,expression);
case FIELD_TYPE:
return buildFieldSource(schema,expression,sourceType);
case FILTER_TYPE:
return buildFilterSource(schema,expression.substring(expression.indexOf('(') + 1,expression.lastIndexOf(')')),sourceType);
default :
throw new SolrException(ErrorCode.BAD_REQUEST,expression + " is not a valid operation.");
}
}

public Value predecessor(){
  return predecessor.get();
}

public static double logPdf(double x,double m,double sd){
  double a=1.0 / (Math.sqrt(2.0 * Math.PI) * sd);
  double b=-(x - m) * (x - m) / (2.0 * sd * sd);
  return Math.log(a) + b;
}

public int valueSparseInt(int indexOfIndex) throws Exception {
  return Integer.parseInt(actualValue(indexOfIndex));
}

public void testToEngineeringStringZeroPosExponent(){
  String a="0.0E+16";
  BigDecimal aNumber=new BigDecimal(a);
  String result="0E+15";
  assertEquals("incorrect value",result,aNumber.toEngineeringString());
}

public static int scan(long v){
  return 63 - Long.numberOfLeadingZeros(v);
}

public static boolean isAllUpperCase(String str){
  if (str == null)   return false;
  boolean hasLetters=false;
  char c;
  for (int i=str.length() - 1; i >= 0; i--) {
    c=str.charAt(i);
    if (Character.isLetter(c)) {
      if (!Character.isUpperCase(c))       return false;
      hasLetters=true;
    }
  }
  return hasLetters;
}

public static ClassPath createClassPath(String classPathString,String sysClassPathString,String extDirsString){
  Path path=new Path();
  if (sysClassPathString == null) {
    sysClassPathString=System.getProperty("sun.boot.class.path");
  }
  if (sysClassPathString != null) {
    path.addFiles(sysClassPathString);
  }
  path.expandJarClassPaths(true);
  if (extDirsString == null) {
    extDirsString=System.getProperty("java.ext.dirs");
  }
  if (extDirsString != null) {
    path.addDirectories(extDirsString);
  }
  path.emptyPathDefault(".");
  if (classPathString == null) {
    classPathString=System.getProperty("env.class.path");
    if (classPathString == null) {
      classPathString=".";
    }
  }
  path.addFiles(classPathString);
  return new ClassPath(path.toArray(new String[path.size()]));
}

protected AbstractSpinedBuffer(int initialCapacity){
  if (initialCapacity < 0)   throw new IllegalArgumentException("Illegal Capacity: " + initialCapacity);
  this.initialChunkPower=Math.max(MIN_CHUNK_POWER,Integer.SIZE - Integer.numberOfLeadingZeros(initialCapacity - 1));
}

public static void UF9(double[] x,double[] f,int nx){
  int count1=0;
  int count2=0;
  int count3=0;
  double sum1=0.0;
  double sum2=0.0;
  double sum3=0.0;
  double yj;
  double E=0.1;
  for (int j=3; j <= nx; j++) {
    yj=x[j - 1] - 2.0 * x[1] * Math.sin(2.0 * PI * x[0] + j * PI / nx);
    if (j % 3 == 1) {
      sum1+=yj * yj;
      count1++;
    }
 else     if (j % 3 == 2) {
      sum2+=yj * yj;
      count2++;
    }
 else {
      sum3+=yj * yj;
      count3++;
    }
  }
  yj=(1.0 + E) * (1.0 - 4.0 * (2.0 * x[0] - 1.0) * (2.0 * x[0] - 1.0));
  if (yj < 0.0) {
    yj=0.0;
  }
  f[0]=0.5 * (yj + 2 * x[0]) * x[1] + 2.0 * sum1 / (double)count1;
  f[1]=0.5 * (yj - 2 * x[0] + 2.0) * x[1] + 2.0 * sum2 / (double)count2;
  f[2]=1.0 - x[1] + 2.0 * sum3 / (double)count3;
}

private void cleaningText(){
  int latinCount=0, nonLatinCount=0;
  for (int i=0; i < text.length(); ++i) {
    char c=text.charAt(i);
    if (c <= 'z' && c >= 'A') {
      ++latinCount;
    }
 else     if (c >= '\u0300' && UnicodeBlock.of(c) != UnicodeBlock.LATIN_EXTENDED_ADDITIONAL) {
      ++nonLatinCount;
    }
  }
  if (latinCount * 2 < nonLatinCount) {
    StringBuffer textWithoutLatin=new StringBuffer();
    for (int i=0; i < text.length(); ++i) {
      char c=text.charAt(i);
      if (c > 'z' || c < 'A')       textWithoutLatin.append(c);
    }
    text=textWithoutLatin;
  }
}

public void beginApplyInterval(){
  intervalStartMillis=System.currentTimeMillis();
  endMillis=intervalStartMillis;
  state=TaskState.apply;
}

void handshake() throws IgniteCheckedException, SSLException {
  if (log.isDebugEnabled())   log.debug("Entered handshake(): [handshakeStatus=" + handshakeStatus + ", ses="+ ses+ ']');
  lock();
  try {
    boolean loop=true;
    while (loop) {
switch (handshakeStatus) {
case NOT_HANDSHAKING:
case FINISHED:
{
          SSLSession sslSes=sslEngine.getSession();
          if (log.isDebugEnabled())           log.debug("Finished ssl handshake [protocol=" + sslSes.getProtocol() + ", cipherSuite="+ sslSes.getCipherSuite()+ ", ses="+ ses+ ']');
          handshakeFinished=true;
          if (!initHandshakeComplete) {
            initHandshakeComplete=true;
            GridNioFutureImpl<?> fut=ses.removeMeta(HANDSHAKE_FUT_META_KEY);
            if (fut != null)             fut.onDone();
            parent.proceedSessionOpened(ses);
          }
          loop=false;
          break;
        }
case NEED_TASK:
{
        if (log.isDebugEnabled())         log.debug("Need to run ssl tasks: " + ses);
        handshakeStatus=runTasks();
        break;
      }
case NEED_UNWRAP:
{
      if (log.isDebugEnabled())       log.debug("Need to unwrap incoming data: " + ses);
      Status status=unwrapHandshake();
      if (status == BUFFER_UNDERFLOW && handshakeStatus != FINISHED || sslEngine.isInboundDone())       loop=false;
      break;
    }
case NEED_WRAP:
{
    if (outNetBuf.hasRemaining())     U.warn(log,"Output net buffer has unsent bytes during handshake (will clear): " + ses);
    outNetBuf.clear();
    SSLEngineResult res=sslEngine.wrap(handshakeBuf,outNetBuf);
    outNetBuf.flip();
    handshakeStatus=res.getHandshakeStatus();
    if (log.isDebugEnabled())     log.debug("Wrapped handshake data [status=" + res.getStatus() + ", handshakeStatus="+ handshakeStatus+ ", ses="+ ses+ ']');
    writeNetBuffer();
    break;
  }
default :
{
  throw new IllegalStateException("Invalid handshake status in handshake method [handshakeStatus=" + handshakeStatus + ", ses="+ ses+ ']');
}
}
}
}
  finally {
unlock();
}
if (log.isDebugEnabled()) log.debug("Leaved handshake(): [handshakeStatus=" + handshakeStatus + ", ses="+ ses+ ']');
}

public void sendMessages(List<ProducerRecord<String,String>> records){
  Producer<String,String> producer=new KafkaProducer<>(getProducerConfig());
  for (  ProducerRecord<String,String> rec : records)   producer.send(rec);
  producer.flush();
  producer.close();
}

private static JFreeChart createChart(){
  XYSeries series1=new XYSeries("Series 1");
  series1.add(1.0,1.0);
  series1.add(2.0,2.0);
  series1.add(3.0,3.0);
  XYDataset dataset=new XYSeriesCollection(series1);
  return ChartFactory.createXYStepChart("Step Chart","Domain","Range",dataset,PlotOrientation.VERTICAL,true,true,true);
}

public void appendToNalUnit(byte[] data,int offset,int limit){
  if (!isFilling) {
    return;
  }
  int readLength=limit - offset;
  if (nalData.length < nalLength + readLength) {
    nalData=Arrays.copyOf(nalData,(nalLength + readLength) * 2);
  }
  System.arraycopy(data,offset,nalData,nalLength,readLength);
  nalLength+=readLength;
}

public boolean isNumberGeographical(PhoneNumber phoneNumber){
  return isNumberGeographical(getNumberType(phoneNumber),phoneNumber.getCountryCode());
}

protected final void refreshLoadingViewsSize(){
  final int maximumPullScroll=(int)(getMaximumPullScroll() * 1.2f);
  int pLeft=getPaddingLeft();
  int pTop=getPaddingTop();
  int pRight=getPaddingRight();
  int pBottom=getPaddingBottom();
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    if (mMode.showHeaderLoadingLayout()) {
      mHeaderLayout.setWidth(maximumPullScroll);
      pLeft=-maximumPullScroll;
    }
 else {
      pLeft=0;
    }
  if (mMode.showFooterLoadingLayout()) {
    mFooterLayout.setWidth(maximumPullScroll);
    pRight=-maximumPullScroll;
  }
 else {
    pRight=0;
  }
break;
case VERTICAL:
if (mMode.showHeaderLoadingLayout()) {
mHeaderLayout.setHeight(maximumPullScroll);
pTop=-maximumPullScroll;
}
 else {
pTop=0;
}
if (mMode.showFooterLoadingLayout()) {
mFooterLayout.setHeight(maximumPullScroll);
pBottom=-maximumPullScroll;
}
 else {
pBottom=0;
}
break;
}
if (DEBUG) {
Log.d(LOG_TAG,String.format("Setting Padding. L: %d, T: %d, R: %d, B: %d",pLeft,pTop,pRight,pBottom));
}
setPadding(pLeft,pTop,pRight,pBottom);
}

protected int weightedDistribution(int[] weights){
  int sum=0;
  for (  int weight : weights) {
    sum+=weight;
  }
  int val=(int)Math.floor(m_random.nextDouble() * sum);
  for (int i=0; i < weights.length; i++) {
    val-=weights[i];
    if (val < 0) {
      return i;
    }
  }
  return -1;
}

protected String cleanUp(String classname){
  String result;
  result=classname;
  if (result.indexOf("/") > -1) {
    result=result.replace("/",".");
  }
  if (result.indexOf("\\") > -1) {
    result=result.replace("\\",".");
  }
  if (result.endsWith(".class")) {
    result=result.substring(0,result.length() - 6);
  }
  return result;
}

public static boolean isAssignable(Class targetType,Class valueType){
  Assert.notNull(targetType,"Target type must not be null");
  Assert.notNull(valueType,"Value type must not be null");
  return (targetType.isAssignableFrom(valueType) || targetType.equals(primitiveWrapperTypeMap.get(valueType)));
}

public DialogCheckBox addDialogCheckBox(String description,String labelText,boolean initialState){
  String[] args=new String[4];
  args[0]="checkbox";
  args[1]=description;
  args[2]=labelText;
  args[3]=Boolean.toString(initialState);
  DialogCheckBox dcb=new DialogCheckBox();
  dcb.setArgs(args);
  components.add(dcb);
  mainPanel.add(dcb);
  return dcb;
}

private void performRestore(File memberDir,File backupDir) throws Exception {
  List<File> ifFiles=FileUtil.findAll(memberDir,".*\\.if$");
  for (  File file : ifFiles) {
    file.delete();
  }
  List<File> oplogs=FileUtil.findAll(memberDir,OPLOG_REGEX);
  for (  File file : oplogs) {
    file.delete();
  }
  File restoreScript=new File(backupDir,"restore.sh");
  if (!restoreScript.exists()) {
    restoreScript=new File(backupDir,"restore.bat");
  }
  assertTrue(restoreScript.exists());
  assertEquals(0,execute(restoreScript.getAbsolutePath()));
}

public static boolean downloadUrlToStream(String urlString,OutputStream outputStream){
  disableConnectionReuseIfNecessary();
  HttpURLConnection urlConnection=null;
  BufferedOutputStream out=null;
  BufferedInputStream in=null;
  try {
    final URL url=new URL(urlString);
    urlConnection=(HttpURLConnection)url.openConnection();
    in=new BufferedInputStream(urlConnection.getInputStream(),IO_BUFFER_SIZE);
    out=new BufferedOutputStream(outputStream,IO_BUFFER_SIZE);
    int b;
    while ((b=in.read()) != -1) {
      out.write(b);
    }
    return true;
  }
 catch (  final IOException e) {
    Log.e(TAG,"Error in downloadBitmap - " + e);
  }
 finally {
    if (urlConnection != null) {
      urlConnection.disconnect();
    }
    try {
      if (out != null) {
        out.close();
      }
      if (in != null) {
        in.close();
      }
    }
 catch (    final IOException e) {
    }
  }
  return false;
}

public boolean isPaymentsAdequate(){
  return isPaymentsAdequate(this.cart);
}

@Override public void transactionCommited(final long commitTime){
  if (listeners.isEmpty()) {
    records.reset();
  }
 else {
    records.flush();
    listeners.forEach(null);
  }
}

public static MWarehousePrice[] find(MBPartner bPartner,boolean IsSOTrx,Timestamp valid,int M_Warehouse_ID,String Value,String Name,String UPC,String SKU,String trxName){
  int M_PriceList_ID=IsSOTrx ? bPartner.getM_PriceList_ID() : bPartner.getPO_PriceList_ID();
  MPriceList pl=null;
  if (M_PriceList_ID == 0)   pl=MPriceList.getDefault(bPartner.getCtx(),IsSOTrx);
 else   pl=MPriceList.get(bPartner.getCtx(),M_PriceList_ID,trxName);
  if (pl == null) {
    s_log.severe("No PriceList found");
    return null;
  }
  MPriceListVersion plv=pl.getPriceListVersion(valid);
  if (plv == null) {
    s_log.severe("No PriceListVersion found for M_PriceList_ID=" + pl.getM_PriceList_ID());
    return null;
  }
  return find(bPartner.getCtx(),plv.getM_PriceList_Version_ID(),M_Warehouse_ID,Value,Name,UPC,SKU,trxName);
}

private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
  COUNTER=new AtomicInteger();
  serializers=new HashMap<Class,SerializerWrapper>();
  serializersArray=new Serializer[0];
  deserialize(in,this);
}

public static Date translateTime(Date date,TimeZone src,TimeZone dest){
  Date newDate=new Date();
  int offset=(dest.getOffset(date.getTime()) - src.getOffset(date.getTime()));
  newDate.setTime(date.getTime() - offset);
  return newDate;
}

private void showPopupMenu(final MouseEvent event){
  final CTracesTableFilterMenu menu=new CTracesTableFilterMenu(getFilterField());
  menu.show(event.getComponent(),event.getX(),event.getY());
}

private TaskResourceRep finishDeactivateTask(BlockConsistencyGroup consistencyGroup,String task){
  URI id=consistencyGroup.getId();
  Operation op=new Operation();
  op.ready();
  op.setProgress(100);
  op.setResourceType(ResourceOperationTypeEnum.DELETE_CONSISTENCY_GROUP);
  Operation status=_dbClient.createTaskOpStatus(BlockConsistencyGroup.class,id,task,op);
  return toTask(consistencyGroup,task,status);
}

public static Severity parseSeverity(String str) throws IllegalSeverityException {
  if (str.equalsIgnoreCase(Messages.ERROR)) {
    return ERROR;
  }
 else   if (str.equalsIgnoreCase(Messages.WARNING)) {
    return WARNING;
  }
 else {
    throw new IllegalSeverityException();
  }
}

private void restoreFromKeypress(final KeyEvent keyEvent,final int keyNumber){
  if (keyEvent.isAltDown()) {
    final int arrayIndex=(keyNumber > 0 ? keyNumber : MAX_RECENT_MESSAGES) - 1;
    if (arrayIndex < recentMessages.size()) {
      displayMessage(recentMessages.get(arrayIndex));
    }
    keyEvent.consume();
  }
}

public void removeScrollingListener(OnWheelScrollListener listener){
  scrollingListeners.remove(listener);
}

public void fire(Session session,int type,boolean beforeAction){
  if (rowBased || before != beforeAction || (typeMask & type) == 0) {
    return;
  }
  load();
  Connection c2=session.createConnection(false);
  boolean old=false;
  if (type != Trigger.SELECT) {
    old=session.setCommitOrRollbackDisabled(true);
  }
  Value identity=session.getLastScopeIdentity();
  try {
    triggerCallback.fire(c2,null,null);
  }
 catch (  Throwable e) {
    throw DbException.get(ErrorCode.ERROR_EXECUTING_TRIGGER_3,e,getName(),triggerClassName != null ? triggerClassName : "..source..",e.toString());
  }
 finally {
    if (session.getLastTriggerIdentity() != null) {
      session.setLastScopeIdentity(session.getLastTriggerIdentity());
      session.setLastTriggerIdentity(null);
    }
 else {
      session.setLastScopeIdentity(identity);
    }
    if (type != Trigger.SELECT) {
      session.setCommitOrRollbackDisabled(old);
    }
  }
}

public static void closeQuietly(Closeable closeable){
  if (closeable != null) {
    try {
      closeable.close();
    }
 catch (    RuntimeException rethrown) {
      throw rethrown;
    }
catch (    Exception ignored) {
    }
  }
}

public MqttDevice mqttDevice(){
  return mqttDevice;
}

public boolean skipsLocation(String locationId){
  return _skipLocationsList.contains(locationId);
}

private List<Race> parseRaces(String json){
  List<Race> result=new ArrayList<>();
  if (json == null) {
    return null;
  }
  JSONParser parser=new JSONParser();
  try {
    JSONObject root=(JSONObject)parser.parse(json.trim());
    JSONArray races=(JSONArray)root.get("races");
    for (    Object o : races) {
      if (o instanceof JSONObject) {
        Race race=parseRace((JSONObject)o);
        if (race != null) {
          result.add(race);
        }
      }
    }
  }
 catch (  ParseException|ClassCastException|NullPointerException ex) {
    LOGGER.warning("Error parsing SRL: " + ex);
    return null;
  }
  return result;
}

public boolean isConnected(short nodeId){
  NodeConnection nc=connections.get(nodeId);
  return (nc != null && nc.state == NodeConnectionState.CONNECTED);
}

public ObjectName manageSystemMember(DistributedMember distributedMember) throws AdminException, MalformedObjectNameException {
  try {
    SystemMember member=lookupSystemMember(distributedMember);
    if (member == null)     return null;
    SystemMemberJmxImpl jmx=(SystemMemberJmxImpl)member;
    ObjectName oname=new ObjectName(jmx.getMBeanName());
    return oname;
  }
 catch (  AdminException e) {
    logger.warn(e.getMessage(),e);
    throw e;
  }
catch (  RuntimeException e) {
    logger.warn(e.getMessage(),e);
    throw e;
  }
catch (  VirtualMachineError err) {
    SystemFailure.initiateFailure(err);
    throw err;
  }
catch (  Error e) {
    SystemFailure.checkFailure();
    logger.error(e.getMessage(),e);
    throw e;
  }
}

private void connect() throws IOException {
  JMXServiceURL jmxUrl=new JMXServiceURL(String.format(fmtUrl,host,port));
  jmxc=JMXConnectorFactory.connect(jmxUrl,null);
  MBeanServerConnection mbeanServerConn=jmxc.getMBeanServerConnection();
  try {
    ObjectName name=new ObjectName(DOMAINLIST_OBJECT_NAME);
    domainListProxy=MBeanServerInvocationHandler.newProxyInstance(mbeanServerConn,name,DomainListManagementMBean.class,true);
    name=new ObjectName(VIRTUALUSERTABLE_OBJECT_NAME);
    virtualUserTableProxy=MBeanServerInvocationHandler.newProxyInstance(mbeanServerConn,name,RecipientRewriteTableManagementMBean.class,true);
    name=new ObjectName(USERSREPOSITORY_OBJECT_NAME);
    usersRepositoryProxy=MBeanServerInvocationHandler.newProxyInstance(mbeanServerConn,name,UsersRepositoryManagementMBean.class,true);
    name=new ObjectName(MAILBOXCOPIER_OBJECT_NAME);
    mailboxCopierManagement=MBeanServerInvocationHandler.newProxyInstance(mbeanServerConn,name,MailboxCopierManagementMBean.class,true);
    name=new ObjectName(MAILBOXMANAGER_OBJECT_NAME);
    mailboxManagerManagement=MBeanServerInvocationHandler.newProxyInstance(mbeanServerConn,name,MailboxManagerManagementMBean.class,true);
    name=new ObjectName(QUOTAMANAGER_OBJECT_NAME);
    quotaManagement=MBeanServerInvocationHandler.newProxyInstance(mbeanServerConn,name,QuotaManagementMBean.class,true);
    name=new ObjectName(REINDEXER_OBJECT_NAME);
    reIndexerManagement=MBeanServerInvocationHandler.newProxyInstance(mbeanServerConn,name,ReIndexerManagementMBean.class,true);
    name=new ObjectName(SIEVEMANAGER_OBJECT_NAME);
    sieveRepositoryManagement=MBeanServerInvocationHandler.newProxyInstance(mbeanServerConn,name,SieveRepositoryManagementMBean.class,true);
  }
 catch (  MalformedObjectNameException e) {
    throw new RuntimeException("Invalid ObjectName? Please report this as a bug.",e);
  }
}

public static void show(@NotNull final JComponent dataComponent,@Nullable final JComponent actionListenerComponent,@NotNull final String title,@NotNull final Project project,@Nullable final Collection<Runnable> closeListeners,@NotNull final AnAction... customActions){
  final ToolWindowApi api=new ToolWindowApi(project,title);
  final Collection<Runnable> closeListenersToAdd=new ArrayList<Runnable>(Collections.singleton(new MyToolWindowCloser(api)));
  if (closeListeners != null) {
    closeListenersToAdd.addAll(closeListeners);
  }
  api.add(PanelWithActions.wrap(dataComponent,closeListenersToAdd,actionListenerComponent,customActions));
}

public IntentBuilder addEmailCc(String address){
  if (mCcAddresses == null) {
    mCcAddresses=new ArrayList<String>();
  }
  mCcAddresses.add(address);
  return this;
}

private ArrayList<String> extractNGrams(){
  ArrayList<String> list=new ArrayList<String>();
  NGram ngram=new NGram();
  for (int i=0; i < text.length(); ++i) {
    ngram.addChar(text.charAt(i));
    for (int n=1; n <= NGram.N_GRAM; ++n) {
      String w=ngram.get(n);
      if (w != null && wordLangProbMap.containsKey(w))       list.add(w);
    }
  }
  return list;
}

protected void updateKeys(){
  ButtonInfo[] buttons=NavigationButtons.loadButtonMap(mContext);
  int visibleCount=0;
  for (int i=0; i < buttons.length; i++) {
    int id=BUTTON_IDS[i];
    ButtonInfo info=buttons[mVertical ? buttons.length - i - 1 : i];
    KeyButtonView button=(KeyButtonView)mParent.findViewById(id);
    boolean isSmallButton=NavigationButtons.IS_SLOT_SMALL[i];
    button.setInfo(info,mVertical,isSmallButton);
    if (!info.equals(NavigationButtons.EMPTY) && !isSmallButton) {
      visibleCount++;
    }
    button.setTranslationX(0);
    mButtonViews.set(i,button);
  }
  if (isDevicePhone(mContext)) {
    adjustPadding(visibleCount);
  }
  updateLowLights(visibleCount);
}

public static final String readString(byte[] bytes,String charset) throws IOException {
  return readString(bytes,0,bytes.length,Charset.forName(charset));
}

private void updateCommandCache(String group,String command,boolean needNotify){
  String oldCommand=commandCache.get(group);
  if (!command.equals(oldCommand)) {
    commandCache.put(group,command);
    if (needNotify) {
      notifyExecutor.execute(new NotifyCommand(group,command));
      LoggerUtil.info(String.format("command data change: group=%s, command=%s: ",group,command));
    }
  }
 else {
    LoggerUtil.info(String.format("command data not change: group=%s, command=%s: ",group,command));
  }
}

public void updateLanguage(){
  createLegendPanel(legendPanel);
  directoryTreeModel.changeRootText(I18n.tr("Library Folders"));
}

private synchronized void rebuildJournal() throws IOException {
  if (journalWriter != null) {
    journalWriter.close();
  }
  Writer writer=new BufferedWriter(new OutputStreamWriter(new FileOutputStream(journalFileTmp),Util.US_ASCII));
  try {
    writer.write(MAGIC);
    writer.write("\n");
    writer.write(VERSION_1);
    writer.write("\n");
    writer.write(Integer.toString(appVersion));
    writer.write("\n");
    writer.write(Integer.toString(valueCount));
    writer.write("\n");
    writer.write("\n");
    for (    Entry entry : lruEntries.values()) {
      if (entry.currentEditor != null) {
        writer.write(DIRTY + ' ' + entry.key+ '\n');
      }
 else {
        writer.write(CLEAN + ' ' + entry.key+ entry.getLengths()+ '\n');
      }
    }
  }
  finally {
    writer.close();
  }
  if (journalFile.exists()) {
    renameTo(journalFile,journalFileBackup,true);
  }
  renameTo(journalFileTmp,journalFile,false);
  journalFileBackup.delete();
  journalWriter=new BufferedWriter(new OutputStreamWriter(new FileOutputStream(journalFile,true),Util.US_ASCII));
}

public static byte[] decompressForZlib(byte[] bytesToDecompress){
  byte[] returnValues=null;
  Inflater inflater=new Inflater();
  int numberOfBytesToDecompress=bytesToDecompress.length;
  inflater.setInput(bytesToDecompress,0,numberOfBytesToDecompress);
  int bufferSizeInBytes=numberOfBytesToDecompress;
  int numberOfBytesDecompressedSoFar=0;
  List<Byte> bytesDecompressedSoFar=new ArrayList<Byte>();
  try {
    while (inflater.needsInput() == false) {
      byte[] bytesDecompressedBuffer=new byte[bufferSizeInBytes];
      int numberOfBytesDecompressedThisTime=inflater.inflate(bytesDecompressedBuffer);
      numberOfBytesDecompressedSoFar+=numberOfBytesDecompressedThisTime;
      for (int b=0; b < numberOfBytesDecompressedThisTime; b++) {
        bytesDecompressedSoFar.add(bytesDecompressedBuffer[b]);
      }
    }
    returnValues=new byte[bytesDecompressedSoFar.size()];
    for (int b=0; b < returnValues.length; b++) {
      returnValues[b]=(byte)(bytesDecompressedSoFar.get(b));
    }
  }
 catch (  DataFormatException dfe) {
    dfe.printStackTrace();
  }
  inflater.end();
  return returnValues;
}

protected boolean acceptChunk(final IChunkMessage<IBindingSet> msg){
  if (msg == null)   throw new IllegalArgumentException();
  if (!msg.isMaterialized())   throw new IllegalStateException();
  final AbstractRunningQuery q=getRunningQuery(msg.getQueryId());
  if (q == null) {
    throw new IllegalStateException();
  }
  if (!q.acceptChunk(msg)) {
    msg.release();
    return false;
  }
  if (!isRunning()) {
    msg.release();
    return false;
  }
  priorityQueue.add(q);
  return true;
}

public String format(Object obj,StringBuffer toAppendTo) throws IllegalArgumentException {
  return format((Date)obj,toAppendTo);
}

void addMember(final TypeMember member){
  Preconditions.checkNotNull(member,"Error: member argument can not be null.");
  Preconditions.checkArgument(member.getParentType() == this,"Error: the member's parent type is not this type.");
  members.add(member);
}

public synchronized void removeIncrementalClassifierListener(IncrementalClassifierListener cl){
  m_incrementalClassifierListeners.remove(cl);
}

public static boolean cancelPotentialWork(Object data,ImageView imageView){
  final BitmapWorkerTask bitmapWorkerTask=getBitmapWorkerTask(imageView);
  if (bitmapWorkerTask != null) {
    final Object bitmapData=bitmapWorkerTask.mData;
    if (bitmapData == null || !bitmapData.equals(data)) {
      bitmapWorkerTask.cancel(true);
      if (BuildConfig.DEBUG) {
        Log.d(TAG,"cancelPotentialWork - cancelled work for " + data);
      }
    }
 else {
      return false;
    }
  }
  return true;
}

public static Number asinh(Number a){
  return FastMath.asinh(a.doubleValue());
}

private String formatNames(String[] names,int startIndex){
  StringBuilder sb=new StringBuilder();
  if (names != null) {
    for (    String name : names) {
      sb.append(name.substring(startIndex));
      sb.append('\n');
    }
  }
  return sb.toString();
}

public String lookupPrefix(String uri){
  String foundPrefix=null;
  Enumeration prefixes=m_namespaces.keys();
  while (prefixes.hasMoreElements()) {
    String prefix=(String)prefixes.nextElement();
    String uri2=lookupNamespace(prefix);
    if (uri2 != null && uri2.equals(uri)) {
      foundPrefix=prefix;
      break;
    }
  }
  return foundPrefix;
}

public void removeAllTrailers(){
  trailer.clear();
  firePropertyChange(TRAILER,null,trailer);
}

public Builder clear(){
  localeBuilder.clear();
  return this;
}

private static boolean versionMatches(Integer v1,Integer v2){
  if (v1 == null || v1 == 0 || v2 == null || v2 == 0) {
    return true;
  }
  return v1.equals(v2);
}

public static Optional<String> packageName(String longName){
  if (longName.contains(DOT)) {
    return Optional.of(longName.substring(0,longName.lastIndexOf(DOT)));
  }
 else {
    return Optional.empty();
  }
}

public int[][] e2f(){
  int eDim=tgtEndExclusive - tgtStartInclusive;
  int[][] e2f=new int[eDim][];
  for (int i=tgtStartInclusive; i < tgtEndExclusive; ++i) {
    int localIdx=i - tgtStartInclusive;
    int[] e2fI=sentencePair.e2f(i);
    int srcAlignDim=e2fI.length;
    e2f[localIdx]=new int[srcAlignDim];
    if (srcAlignDim > 0) {
      System.arraycopy(e2fI,0,e2f[localIdx],0,srcAlignDim);
      for (int j=0; j < srcAlignDim; ++j) {
        e2f[localIdx][j]-=srcStartInclusive;
      }
    }
  }
  return e2f;
}

public void readExif(String inFileName) throws FileNotFoundException, IOException {
  if (inFileName == null) {
    throw new IllegalArgumentException(NULL_ARGUMENT_STRING);
  }
  InputStream is=null;
  try {
    is=(InputStream)new BufferedInputStream(new FileInputStream(inFileName));
    readExif(is);
  }
 catch (  IOException e) {
    closeSilently(is);
    throw e;
  }
  is.close();
}

private void assertWriteResult(int size) throws IOException {
  ByteBuffer buf=ByteBuffer.allocate(size + 1);
  int count=0;
  int total=0;
  long beginTime=System.currentTimeMillis();
  while ((count=clientChannel.read(buf)) != -1) {
    total=total + count;
    if (System.currentTimeMillis() - beginTime > 10000) {
      break;
    }
  }
  assertEquals(total,size);
  buf.flip();
  for (int i=0; i < count; i++) {
    assertEquals((byte)i,buf.get(i));
  }
}

public static boolean isFileUploadAvailable(final boolean needsCorrectMimeType){
  if (Build.VERSION.SDK_INT == 19) {
    final String platformVersion=(Build.VERSION.RELEASE == null) ? "" : Build.VERSION.RELEASE;
    return !needsCorrectMimeType && (platformVersion.startsWith("4.4.3") || platformVersion.startsWith("4.4.4"));
  }
 else {
    return true;
  }
}

@Override public String toString(){
  if (m_bGenerateNet) {
    return toXMLBIF03();
  }
  return m_Instances.toString();
}

private boolean menuItemAction(int screenX,int screenY,int action){
  ListView listView=mAppMenu.getPopup().getListView();
  ArrayList<View> itemViews=new ArrayList<View>();
  for (int i=0; i < listView.getChildCount(); ++i) {
    boolean hasImageButtons=false;
    if (listView.getChildAt(i) instanceof LinearLayout) {
      LinearLayout layout=(LinearLayout)listView.getChildAt(i);
      for (int j=0; j < layout.getChildCount(); ++j) {
        itemViews.add(layout.getChildAt(j));
        if (layout.getChildAt(j) instanceof ImageButton)         hasImageButtons=true;
      }
    }
    if (!hasImageButtons)     itemViews.add(listView.getChildAt(i));
  }
  boolean didPerformClick=false;
  for (int i=0; i < itemViews.size(); ++i) {
    View itemView=itemViews.get(i);
    boolean shouldPerform=itemView.isEnabled() && itemView.isShown() && getScreenVisibleRect(itemView).contains(screenX,screenY);
switch (action) {
case ITEM_ACTION_HIGHLIGHT:
      itemView.setPressed(shouldPerform);
    break;
case ITEM_ACTION_PERFORM:
  if (shouldPerform) {
    itemView.performClick();
    didPerformClick=true;
  }
break;
case ITEM_ACTION_CLEAR_HIGHLIGHT_ALL:
itemView.setPressed(false);
break;
default :
assert false;
break;
}
}
return didPerformClick;
}

public void toggle(JFXDrawer drawer){
  if (!drawers.contains(drawer))   addDrawer(drawer);
  if (drawer.isShown() || drawer.isShowing())   drawer.close();
 else {
    updateDrawerPosition(drawer);
    drawer.open();
  }
}

public static boolean isVMwareVapp(){
  if (isVMwareVapp != null) {
    log.info("Return value {} from cached result",isVMwareVapp.booleanValue());
    return isVMwareVapp.booleanValue();
  }
  final String[] cmd={GET_OVF_PROPERTY_CMD,IS_VAPP};
  Exec.Result result=Exec.sudo(CMD_TIMEOUT,cmd);
  if (!result.exitedNormally()) {
    log.error("Failed to check if it's vApp {}",result.getStdError());
    throw new IllegalStateException("Failed to check platform");
  }
  if (result.getExitValue() == 0) {
    log.info("Current platform is VMware vApp");
    isVMwareVapp=Boolean.TRUE;
    return isVMwareVapp.booleanValue();
  }
  log.info("The exit value of platform check: {}",result.getExitValue());
  isVMwareVapp=Boolean.FALSE;
  return isVMwareVapp.booleanValue();
}

protected String toBase64(byte[] data){
  return Base64.encodeToString(data,Base64.DEFAULT);
}

@Override public String toVerboseString(){
  final StringBuilder sb=new StringBuilder();
  print(sb,0,Verbosity.LOG_WITH_STACKTRACE);
  return sb.toString();
}

public static long quantile(long[] values,double quantile){
  if (values == null)   throw new IllegalArgumentException("Values cannot be null.");
  if (quantile < 0.0 || quantile > 1.0)   throw new IllegalArgumentException("Quantile must be between 0.0 and 1.0");
  long[] copy=new long[values.length];
  System.arraycopy(values,0,copy,0,copy.length);
  Arrays.sort(copy);
  int index=(int)(copy.length * quantile);
  return copy[index];
}

public void addTreeUpdate(SLDTreeUpdatedInterface sldTree){
  treeUpdateList.add(sldTree);
}

public static double distance(VisualItem vi1,VisualItem vi2){
  double dx=vi1.getX() - vi2.getX();
  double dy=vi1.getY() - vi2.getY();
  return Math.sqrt(dx * dx + dy * dy);
}

@Override public void validateRequest(GenericAttributeResolveRequest request) throws BadAttributeResolveRequestException {
  if (LOG.isDebugEnabled())   LOG.debug(" validating HDFS Resource Resolve  request ...");
  String siteId=request.getSite();
  if (null == siteId)   throw new BadAttributeResolveRequestException(HDFSResourceConstants.HDFS_RESOURCE_RESOLVE_FORMAT_HINT);
  String filePath=request.getQuery();
  if (null == filePath || !filePath.startsWith("/"))   throw new BadAttributeResolveRequestException(HDFSResourceConstants.HDFS_RESOURCE_RESOLVE_FORMAT_HINT);
  if (LOG.isDebugEnabled())   LOG.debug(" HDFS Resource Resolve request validated successfully...");
}

public void clear(){
  oredCriteria.clear();
  orderByClause=null;
  distinct=false;
}

public Trigger when(Criterion criterion){
  if (criterion != null) {
    criterions.add(criterion);
  }
  return this;
}

private static Pair<String,String> offsetROR(final long offset,final ITranslationEnvironment environment,final List<ReilInstruction> instructions,final String registerNodeValue1,final String registerNodeValue2,final String immediateNodeValue){
  final String address=environment.getNextVariableString();
  final String index=environment.getNextVariableString();
  final String tmpVar=environment.getNextVariableString();
  final String tmpVar1=environment.getNextVariableString();
  final String tmpVar2=environment.getNextVariableString();
  final String tmpVar3=environment.getNextVariableString();
  long baseOffset=offset;
  instructions.add(ReilHelpers.createBsh(baseOffset++,dw,registerNodeValue2,dw,"-" + Integer.decode(immediateNodeValue),dw,tmpVar1));
  instructions.add(ReilHelpers.createBsh(baseOffset++,dw,registerNodeValue2,dw,String.valueOf(32 - Integer.decode(immediateNodeValue)),dw,tmpVar2));
  instructions.add(ReilHelpers.createOr(baseOffset++,dw,tmpVar1,dw,tmpVar2,dw,tmpVar3));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dw,tmpVar3,dw,dWordBitMask,dw,index));
  instructions.add(ReilHelpers.createAdd(baseOffset++,dw,registerNodeValue1,dw,index,dw,tmpVar));
  instructions.add(ReilHelpers.createAnd(baseOffset++,dw,tmpVar,dw,dWordBitMask,dw,address));
  return new Pair<String,String>(address,registerNodeValue1);
}

public void clear(){
  m_ReadMethods.clear();
  m_WriteMethods.clear();
  try {
    addMethods();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}

public static String join(CharSequence delimiter,Object[] tokens){
  StringBuilder sb=new StringBuilder();
  boolean firstTime=true;
  for (  Object token : tokens) {
    if (firstTime) {
      firstTime=false;
    }
 else {
      sb.append(delimiter);
    }
    sb.append(token);
  }
  return sb.toString();
}

private void fillIn(ClassSymbol c){
  if (completionFailureName == c.fullname) {
    throw new CompletionFailure(c,"user-selected completion failure by class name");
  }
  currentOwner=c;
  warnedAttrs.clear();
  JavaFileObject classfile=c.classfile;
  if (classfile != null) {
    JavaFileObject previousClassFile=currentClassFile;
    try {
      if (filling) {
        Assert.error("Filling " + classfile.toUri() + " during "+ previousClassFile);
      }
      currentClassFile=classfile;
      if (verbose) {
        log.printVerbose("loading",currentClassFile.toString());
      }
      if (classfile.getKind() == JavaFileObject.Kind.CLASS) {
        filling=true;
        try {
          bp=0;
          buf=readInputStream(buf,classfile.openInputStream());
          readClassFile(c);
          if (!missingTypeVariables.isEmpty() && !foundTypeVariables.isEmpty()) {
            List<Type> missing=missingTypeVariables;
            List<Type> found=foundTypeVariables;
            missingTypeVariables=List.nil();
            foundTypeVariables=List.nil();
            filling=false;
            ClassType ct=(ClassType)currentOwner.type;
            ct.supertype_field=types.subst(ct.supertype_field,missing,found);
            ct.interfaces_field=types.subst(ct.interfaces_field,missing,found);
          }
 else           if (missingTypeVariables.isEmpty() != foundTypeVariables.isEmpty()) {
            Name name=missingTypeVariables.head.tsym.name;
            throw badClassFile("undecl.type.var",name);
          }
        }
  finally {
          missingTypeVariables=List.nil();
          foundTypeVariables=List.nil();
          filling=false;
        }
      }
 else {
        if (sourceCompleter != null) {
          sourceCompleter.complete(c);
        }
 else {
          throw new IllegalStateException("Source completer required to read " + classfile.toUri());
        }
      }
      return;
    }
 catch (    IOException ex) {
      throw badClassFile("unable.to.access.file",ex.getMessage());
    }
 finally {
      currentClassFile=previousClassFile;
    }
  }
 else {
    JCDiagnostic diag=diagFactory.fragment("class.file.not.found",c.flatname);
    throw newCompletionFailure(c,diag);
  }
}

public static Packet toPacket(ByteBuffer data){
  final byte code=data.get();
  final short id=(short)((data.get()) & 0xFF);
  final short datalen=data.getShort();
  final byte[] authData=new byte[16];
  data.get(authData);
  final PacketType type=PacketType.getPacketType(code);
  Packet pkt=null;
switch (type) {
case ACCESS_ACCEPT:
    pkt=new AccessAccept();
  pkt.setAuthenticator(new ResponseAuthenticator(authData));
break;
case ACCESS_CHALLENGE:
pkt=new AccessChallenge();
pkt.setAuthenticator(new ResponseAuthenticator(authData));
break;
case ACCESS_REJECT:
pkt=new AccessReject();
pkt.setAuthenticator(new ResponseAuthenticator(authData));
break;
case ACCESS_REQUEST:
pkt=new AccessRequest();
pkt.setAuthenticator(new RequestAuthenticator(authData));
break;
case UNKNOWN:
default :
LOG.log(Level.WARNING,"Unsupported packet type code '" + code + "' received. Unable to handle packet.");
return null;
}
pkt.setIdentifier(id);
Attribute a=null;
while ((a=PacketFactory.nextAttribute(data)) != null) {
pkt.addAttribute(a);
}
return pkt;
}

public void unlockReadLocks(){
  if (database.isMultiVersion()) {
    return;
  }
  for (int i=0; i < locks.size(); i++) {
    Table t=locks.get(i);
    if (!t.isLockedExclusively()) {
synchronized (database) {
        t.unlock(this);
        locks.remove(i);
      }
      i--;
    }
  }
}

protected void processAttributes(){
  for (  final String tag : tags) {
    for (    final String inherit : inherits) {
      styleSheet.addStyles(tag,styleSheet.getStyles(inherit));
    }
    styleSheet.addStyles(tag,attributes);
  }
}

private boolean isImage(String url){
  return url.matches(Regex.IMAGE_PATTERN);
}

public void addAttribute(AttributedCharacterIterator.Attribute attribute,Object value,int start,int end){
  if (attribute == null) {
    throw new NullPointerException("attribute == null");
  }
  if (start < 0 || end > text.length() || start >= end) {
    throw new IllegalArgumentException();
  }
  if (value == null) {
    return;
  }
  List<Range> ranges=attributeMap.get(attribute);
  if (ranges == null) {
    ranges=new ArrayList<Range>(1);
    ranges.add(new Range(start,end,value));
    attributeMap.put(attribute,ranges);
    return;
  }
  ListIterator<Range> it=ranges.listIterator();
  while (it.hasNext()) {
    Range range=it.next();
    if (end <= range.start) {
      it.previous();
      break;
    }
 else     if (start < range.end || (start == range.end && value.equals(range.value))) {
      Range r1=null, r3;
      it.remove();
      r1=new Range(range.start,start,range.value);
      r3=new Range(end,range.end,range.value);
      while (end > range.end && it.hasNext()) {
        range=it.next();
        if (end <= range.end) {
          if (end > range.start || (end == range.start && value.equals(range.value))) {
            it.remove();
            r3=new Range(end,range.end,range.value);
            break;
          }
        }
 else {
          it.remove();
        }
      }
      if (value.equals(r1.value)) {
        if (value.equals(r3.value)) {
          it.add(new Range(r1.start < start ? r1.start : start,r3.end > end ? r3.end : end,r1.value));
        }
 else {
          it.add(new Range(r1.start < start ? r1.start : start,end,r1.value));
          if (r3.start < r3.end) {
            it.add(r3);
          }
        }
      }
 else {
        if (value.equals(r3.value)) {
          if (r1.start < r1.end) {
            it.add(r1);
          }
          it.add(new Range(start,r3.end > end ? r3.end : end,r3.value));
        }
 else {
          if (r1.start < r1.end) {
            it.add(r1);
          }
          it.add(new Range(start,end,value));
          if (r3.start < r3.end) {
            it.add(r3);
          }
        }
      }
      return;
    }
  }
  it.add(new Range(start,end,value));
}

public static boolean pointInRotatedRect(float[] point,RectF bound,float rot){
  Matrix m=new Matrix();
  float[] p=Arrays.copyOf(point,2);
  m.setRotate(rot,bound.centerX(),bound.centerY());
  Matrix m0=new Matrix();
  if (!m.invert(m0))   return false;
  m0.mapPoints(p);
  return inclusiveContains(bound,p[0],p[1]);
}

@Override public void warning(String domain,String key,XMLParseException exception) throws XNIException {
  if (fErrorHandler != null) {
    SAXParseException saxException=createSAXParseException(exception);
    try {
      fErrorHandler.warning(saxException);
    }
 catch (    SAXParseException e) {
      throw createXMLParseException(e);
    }
catch (    SAXException e) {
      throw createXNIException(e);
    }
  }
}

public void modifyAll(Map<String,Collection<DynamicModification>> modifications,Collection<Throwable> problems) throws CannotCompileException {
  for (  String className : modifications.keySet()) {
    try {
      modify(className,modifications.get(className));
    }
 catch (    NotFoundException e) {
      log.warn("Unable to modify " + className,e);
      problems.add(e);
    }
catch (    ClassNotFoundException e) {
      log.warn("Unable to modify " + className,e);
      problems.add(e);
    }
catch (    IOException e) {
      log.warn("Unable to modify " + className,e);
      problems.add(e);
    }
  }
}

public MutableLocation toMutableLocation(World w){
  return new MutableLocation(x,y,z,w);
}

public boolean verify(GeneralNameInterface name) throws IOException {
  if (name == null) {
    throw new IOException("name is null");
  }
  if (excluded != null && excluded.size() > 0) {
    for (int i=0; i < excluded.size(); i++) {
      GeneralSubtree gs=excluded.get(i);
      if (gs == null)       continue;
      GeneralName gn=gs.getName();
      if (gn == null)       continue;
      GeneralNameInterface exName=gn.getName();
      if (exName == null)       continue;
switch (exName.constrains(name)) {
case GeneralNameInterface.NAME_DIFF_TYPE:
case GeneralNameInterface.NAME_WIDENS:
case GeneralNameInterface.NAME_SAME_TYPE:
        break;
case GeneralNameInterface.NAME_MATCH:
case GeneralNameInterface.NAME_NARROWS:
      return false;
  }
}
}
if (permitted != null && permitted.size() > 0) {
boolean sameType=false;
for (int i=0; i < permitted.size(); i++) {
  GeneralSubtree gs=permitted.get(i);
  if (gs == null)   continue;
  GeneralName gn=gs.getName();
  if (gn == null)   continue;
  GeneralNameInterface perName=gn.getName();
  if (perName == null)   continue;
switch (perName.constrains(name)) {
case GeneralNameInterface.NAME_DIFF_TYPE:
    continue;
case GeneralNameInterface.NAME_WIDENS:
case GeneralNameInterface.NAME_SAME_TYPE:
  sameType=true;
continue;
case GeneralNameInterface.NAME_MATCH:
case GeneralNameInterface.NAME_NARROWS:
return true;
}
}
if (sameType) {
return false;
}
}
return true;
}

public void readGraphics(ObjectInputStream objstream) throws IOException {
  Debug.message("omgraphics","OMGraphicList: Reading cached graphics");
  try {
    while (true) {
      try {
        OMGraphic omg=(OMGraphic)objstream.readObject();
        graphics.add(omg);
      }
 catch (      ClassNotFoundException e) {
        e.printStackTrace();
      }
catch (      OptionalDataException ode) {
        ode.printStackTrace();
      }
    }
  }
 catch (  EOFException e) {
  }
}

public void createTopics(int numPartitions,int replicationFactor,Set<String> topics){
  createTopics(numPartitions,replicationFactor,topics.toArray(new String[topics.size()]));
}

public synchronized void removeListener(Listener l){
  listeners.remove(l);
}

public CommandLine add(String... args){
  if (args != null && args.length > 0) {
    Collections.addAll(arguments,args);
  }
  return this;
}

private void restoreIcon(BackupProtos.Key key,byte[] buffer,int dataSize) throws IOException {
  if (VERBOSE)   Log.v(TAG,"unpacking icon " + key.id);
  if (DEBUG)   Log.d(TAG,"read (" + buffer.length + "): "+ Base64.encodeToString(buffer,0,dataSize,Base64.NO_WRAP));
  BackupProtos.Resource res=unpackProto(new BackupProtos.Resource(),buffer,dataSize);
  if (DEBUG) {
    Log.d(TAG,"unpacked " + res.dpi + " dpi icon");
  }
  Bitmap icon=BitmapFactory.decodeByteArray(res.data,0,res.data.length);
  if (icon == null) {
    Log.w(TAG,"failed to unpack icon for " + key.name);
  }
 else {
    if (VERBOSE)     Log.v(TAG,"saving restored icon as: " + key.name);
    mIconCache.preloadIcon(ComponentName.unflattenFromString(key.name),icon,res.dpi,"",mUserSerial,mIdp);
  }
}

public static int determineConsecutiveDigitCount(CharSequence msg,int startpos){
  int count=0;
  int len=msg.length();
  int idx=startpos;
  if (idx < len) {
    char ch=msg.charAt(idx);
    while (isDigit(ch) && idx < len) {
      count++;
      idx++;
      if (idx < len) {
        ch=msg.charAt(idx);
      }
    }
  }
  return count;
}

public EventStoreBuilder useSslConnection(String certificateCommonName){
  settingsBuilder.sslSettings(SslSettings.trustCertificateCN(certificateCommonName));
  return this;
}

ActionMap createActionMap(){
  ActionMap map=new ActionMapUIResource();
  map.put("showSystemMenu",new ShowSystemMenuAction(true));
  map.put("hideSystemMenu",new ShowSystemMenuAction(false));
  return map;
}

protected void paintContentBorderLeftEdge(Graphics g,int x,int y,int w,int h,boolean drawBroken,Rectangle selRect,boolean isContentBorderPainted){
  if (isContentBorderPainted) {
    g.setColor(selectHighlight);
    g.fillRect(x,y,1,h - 1);
  }
}

private String fieldParamComment(Field field,String paramComment){
  String commentType=fieldTypeCardinalityComment(field);
  String comment=String.format("@param %s [%s]",wrapIfKeywordOrBuiltIn(field.getSimpleName()),commentType);
  if (paramComment == null) {
    paramComment=DocumentationUtil.getScopedDescription(field);
  }
  if (!Strings.isNullOrEmpty(paramComment)) {
    paramComment=RDocCommentFixer.rdocify(paramComment);
    comment+="\n  " + paramComment.replaceAll("(\\r?\\n)","\n  ");
  }
  return comment + "\n";
}

public static long periodEnd(long now,long period){
  LocalDateTime time=LocalDateTime.ofEpochSecond(now / 1000,0,ZoneOffset.UTC);
  long endTime=periodEnd(now,period,time);
  return endTime;
}

public void testThenCombine_sourceCancelled() throws Throwable {
  for (  ExecutionMode m : ExecutionMode.values())   for (  boolean mayInterruptIfRunning : new boolean[]{true,false})   for (  boolean fFirst : new boolean[]{true,false})   for (  boolean failFirst : new boolean[]{true,false})   for (  Integer v1 : new Integer[]{1,null}) {
    final CompletableFuture<Integer> f=new CompletableFuture<>();
    final CompletableFuture<Integer> g=new CompletableFuture<>();
    final SubtractFunction r1=new SubtractFunction(m);
    final SubtractFunction r2=new SubtractFunction(m);
    final SubtractFunction r3=new SubtractFunction(m);
    final CompletableFuture<Integer> fst=fFirst ? f : g;
    final CompletableFuture<Integer> snd=!fFirst ? f : g;
    final Callable<Boolean> complete1=failFirst ? null : null;
    final Callable<Boolean> complete2=failFirst ? null : null;
    final CompletableFuture<Integer> h1=m.thenCombine(f,g,r1);
    assertTrue(complete1.call());
    final CompletableFuture<Integer> h2=m.thenCombine(f,g,r2);
    checkIncomplete(h1);
    checkIncomplete(h2);
    assertTrue(complete2.call());
    final CompletableFuture<Integer> h3=m.thenCombine(f,g,r3);
    checkCompletedWithWrappedCancellationException(h1);
    checkCompletedWithWrappedCancellationException(h2);
    checkCompletedWithWrappedCancellationException(h3);
    r1.assertNotInvoked();
    r2.assertNotInvoked();
    r3.assertNotInvoked();
    checkCompletedNormally(failFirst ? snd : fst,v1);
    checkCancelled(failFirst ? fst : snd);
  }
}

public static String generateChatId(final String receiverId,final String senderId){
  String combined=null;
  if (receiverId.compareTo(senderId) < 0) {
    combined=String.format(Locale.US,AppConstants.CHAT_ID_FORMAT,receiverId,senderId);
  }
 else {
    combined=String.format(Locale.US,AppConstants.CHAT_ID_FORMAT,senderId,receiverId);
  }
  String hashed=null;
  try {
    hashed=Utils.sha1(combined);
  }
 catch (  final NoSuchAlgorithmException e) {
    hashed=combined;
  }
  return hashed;
}

void extract(String fname,String files[]) throws IOException {
  ZipFile zf=new ZipFile(fname);
  Set<ZipEntry> dirs=newDirSet();
  Enumeration<? extends ZipEntry> zes=zf.entries();
  while (zes.hasMoreElements()) {
    ZipEntry e=zes.nextElement();
    if (files == null) {
      dirs.add(extractFile(zf.getInputStream(e),e));
    }
 else {
      String name=e.getName();
      for (      String file : files) {
        if (name.startsWith(file)) {
          dirs.add(extractFile(zf.getInputStream(e),e));
          break;
        }
      }
    }
  }
  zf.close();
  updateLastModifiedTime(dirs);
}

public void remove(MenuComponent m){
synchronized (getTreeLock()) {
    int index=menus.indexOf(m);
    if (index >= 0) {
      remove(index);
    }
  }
}

public void testIdentity(){
  assertNotNull(new IdentityStub());
}

public void keyReleased(final KeyEvent k){
}

public XMLImporter(ProgressListener listener){
  progressListener=listener;
}

private static TreeMap<Integer,Long> loadWorkspaceScreensDb(Context context){
  final ContentResolver contentResolver=context.getContentResolver();
  final Uri screensUri=LauncherSettings.WorkspaceScreens.CONTENT_URI;
  final Cursor sc=contentResolver.query(screensUri,null,null,null,null);
  TreeMap<Integer,Long> orderedScreens=new TreeMap<Integer,Long>();
  try {
    final int idIndex=sc.getColumnIndexOrThrow(LauncherSettings.WorkspaceScreens._ID);
    final int rankIndex=sc.getColumnIndexOrThrow(LauncherSettings.WorkspaceScreens.SCREEN_RANK);
    while (sc.moveToNext()) {
      try {
        long screenId=sc.getLong(idIndex);
        int rank=sc.getInt(rankIndex);
        orderedScreens.put(rank,screenId);
      }
 catch (      Exception e) {
        Launcher.addDumpLog(TAG,"Desktop items loading interrupted - invalid screens: " + e,true);
      }
    }
  }
  finally {
    sc.close();
  }
  Launcher.addDumpLog(TAG,"11683562 - loadWorkspaceScreensDb()",true);
  ArrayList<String> orderedScreensPairs=new ArrayList<String>();
  for (  Integer i : orderedScreens.keySet()) {
    orderedScreensPairs.add("{ " + i + ": "+ orderedScreens.get(i)+ " }");
  }
  Launcher.addDumpLog(TAG,"11683562 -   screens: " + TextUtils.join(", ",orderedScreensPairs),true);
  return orderedScreens;
}

public Observable<DriveId> createFile(DriveFolder folder,final File file){
  return createFile(folder,file,file.getName());
}

public static void validateContext(AccelSurface srcData,AccelSurface dstData,Region clip,Composite comp,AffineTransform xform,Paint paint,SunGraphics2D sg2d,int flags){
  BufferedContext context=dstData.getContext();
  context.validate(srcData,dstData,clip,comp,xform,paint,sg2d,flags);
}

public void addCertificatesAndCRLs(CertStore certStore) throws CertStoreException, CMSException {
  certs.addAll(CMSUtils.getCertificatesFromStore(certStore));
  crls.addAll(CMSUtils.getCRLsFromStore(certStore));
}

public void changeDefaultNames(String type){
  String[] convert=CONVERT_TYPES.split(",");
  String[] types=TYPES.split(",");
  if (convert.length != types.length) {
    log.error("Properties file doesn't have equal length conversion strings, carTypeNames {}, carTypeConvert {}",types.length,convert.length);
    return;
  }
  if (type.equals(Setup.DESCRIPTIVE)) {
    for (int i=0; i < convert.length; i++) {
      replaceName(convert[i],types[i]);
    }
    String[] aarTypes=ARR_TYPES.split(",");
    for (int i=0; i < aarTypes.length; i++) {
      list.remove(aarTypes[i]);
    }
    for (int i=0; i < types.length; i++) {
      if (!list.contains(types[i])) {
        list.add(types[i]);
      }
    }
  }
 else {
    for (int i=0; i < convert.length; i++) {
      replaceName(types[i],convert[i]);
    }
    for (int i=0; i < types.length; i++) {
      list.remove(types[i]);
    }
    types=ARR_TYPES.split(",");
    for (int i=0; i < types.length; i++) {
      if (!list.contains(types[i])) {
        list.add(types[i]);
      }
    }
  }
}

public LabelValueComparator(final Locale locale){
  c=Collator.getInstance(locale);
}

public Refresher(GLScene scene){
  Preconditions.checkNotNull(scene);
  this.scene=scene;
}

public Rect updateFastScrollerBounds(int lastTouchY){
  mInvalidateRect.set(mBgBounds);
  if (isVisible()) {
    int edgePadding=mRv.getMaxScrollbarWidth();
    int bgPadding=(mBgOriginalSize - mTextBounds.height()) / 2;
    int bgHeight=mBgOriginalSize;
    int bgWidth=Math.max(mBgOriginalSize,mTextBounds.width() + (2 * bgPadding));
    if (Utilities.isRtl(mRes)) {
      mBgBounds.left=mRv.getBackgroundPadding().left + (2 * mRv.getMaxScrollbarWidth());
      mBgBounds.right=mBgBounds.left + bgWidth;
    }
 else {
      mBgBounds.right=mRv.getWidth() - mRv.getBackgroundPadding().right - (2 * mRv.getMaxScrollbarWidth());
      mBgBounds.left=mBgBounds.right - bgWidth;
    }
    mBgBounds.top=lastTouchY - (int)(FAST_SCROLL_OVERLAY_Y_OFFSET_FACTOR * bgHeight);
    mBgBounds.top=Math.max(edgePadding,Math.min(mBgBounds.top,mRv.getHeight() - edgePadding - bgHeight));
    mBgBounds.bottom=mBgBounds.top + bgHeight;
  }
 else {
    mBgBounds.setEmpty();
  }
  mInvalidateRect.union(mBgBounds);
  return mInvalidateRect;
}

public void buildUniqueId() throws VPlexApiException {
  String name=getName();
  if (!name.contains(VPLEX_NAME_DELIM)) {
    s_logger.warn("unexpected native guid format: " + name);
    uniqueId=name;
    return;
  }
  int lastDelimIndex=name.lastIndexOf(VPLEX_NAME_DELIM);
  String suffix=name.substring(lastDelimIndex + 1);
  s_logger.info("setting unique id for {} to {}",name,suffix);
  uniqueId=suffix;
}

public static String createBase64(Bitmap mBitmap){
  ByteArrayOutputStream baos1=new ByteArrayOutputStream();
  mBitmap.compress(Bitmap.CompressFormat.JPEG,100,baos1);
  byte[] b1=baos1.toByteArray();
  return Base64.encodeToString(b1,Base64.DEFAULT);
}

public DiceServerEditor(final IRemoteDiceServer diceServer){
  m_bean=diceServer;
  final int bottomSpace=1;
  final int labelSpace=2;
  int row=0;
  if (m_bean.sendsEmail()) {
    add(m_toLabel,new GridBagConstraints(0,row,1,1,0,0,GridBagConstraints.WEST,GridBagConstraints.NONE,new Insets(0,0,bottomSpace,labelSpace),0,0));
    add(m_toAddress,new GridBagConstraints(1,row,2,1,1.0,0,GridBagConstraints.EAST,GridBagConstraints.HORIZONTAL,new Insets(0,0,bottomSpace,0),0,0));
    m_toAddress.setText(m_bean.getToAddress());
    row++;
    add(m_ccLabel,new GridBagConstraints(0,row,1,1,0,0,GridBagConstraints.WEST,GridBagConstraints.NONE,new Insets(0,0,bottomSpace,labelSpace),0,0));
    add(m_ccAddress,new GridBagConstraints(1,row,2,1,1.0,0,GridBagConstraints.EAST,GridBagConstraints.HORIZONTAL,new Insets(0,0,bottomSpace,0),0,0));
    m_ccAddress.setText(m_bean.getCcAddress());
    row++;
  }
  if (m_bean.supportsGameId()) {
    final JLabel m_gameIdLabel=new JLabel("Game ID:");
    add(m_gameIdLabel,new GridBagConstraints(0,row,1,1,0,0,GridBagConstraints.WEST,GridBagConstraints.NONE,new Insets(0,0,bottomSpace,labelSpace),0,0));
    add(m_gameId,new GridBagConstraints(1,row,2,1,1.0,0,GridBagConstraints.EAST,GridBagConstraints.HORIZONTAL,new Insets(0,0,bottomSpace,0),0,0));
    m_gameId.setText(m_bean.getGameId());
    row++;
  }
  add(m_testDiceyButton,new GridBagConstraints(2,row,1,1,0,0,GridBagConstraints.EAST,GridBagConstraints.NONE,new Insets(0,0,bottomSpace,0),0,0));
  setupListeners();
}

@Override public boolean equals(Object obj){
  if (obj == this) {
    return true;
  }
  if (!(obj instanceof CandlestickRenderer)) {
    return false;
  }
  CandlestickRenderer that=(CandlestickRenderer)obj;
  if (this.candleWidth != that.candleWidth) {
    return false;
  }
  if (!PaintUtilities.equal(this.upPaint,that.upPaint)) {
    return false;
  }
  if (!PaintUtilities.equal(this.downPaint,that.downPaint)) {
    return false;
  }
  if (this.drawVolume != that.drawVolume) {
    return false;
  }
  if (this.maxCandleWidthInMilliseconds != that.maxCandleWidthInMilliseconds) {
    return false;
  }
  if (this.autoWidthMethod != that.autoWidthMethod) {
    return false;
  }
  if (this.autoWidthFactor != that.autoWidthFactor) {
    return false;
  }
  if (this.autoWidthGap != that.autoWidthGap) {
    return false;
  }
  if (this.useOutlinePaint != that.useOutlinePaint) {
    return false;
  }
  if (!PaintUtilities.equal(this.volumePaint,that.volumePaint)) {
    return false;
  }
  return super.equals(obj);
}

public HeaderIterator iterator(){
  return new BasicListHeaderIterator(this.headers,null);
}

public static void w(String tag,String msg,Object... args){
  if (sLevel > LEVEL_WARNING) {
    return;
  }
  if (args.length > 0) {
    msg=String.format(msg,args);
  }
  Log.w(tag,msg);
}

@SuppressWarnings("deprecation") @SuppressLint("ClickableViewAccessibility") @Override public boolean onTouchEvent(MotionEvent event){
  PointF vCenterEnd;
  float vDistEnd;
  if (anim != null && !anim.interruptible) {
    return true;
  }
 else {
    anim=null;
  }
  if (vTranslate == null) {
    return true;
  }
  if (detector == null || detector.onTouchEvent(event)) {
    return true;
  }
  int touchCount=event.getPointerCount();
switch (event.getAction()) {
case MotionEvent.ACTION_DOWN:
case MotionEvent.ACTION_POINTER_1_DOWN:
case MotionEvent.ACTION_POINTER_2_DOWN:
    anim=null;
  maxTouchCount=Math.max(maxTouchCount,touchCount);
if (touchCount >= 2) {
  if (zoomEnabled) {
    float distance=distance(event.getX(0),event.getX(1),event.getY(0),event.getY(1));
    scaleStart=scale;
    vDistStart=distance;
    vTranslateStart=new PointF(vTranslate.x,vTranslate.y);
    vCenterStart=new PointF((event.getX(0) + event.getX(1)) / 2,(event.getY(0) + event.getY(1)) / 2);
  }
 else {
    maxTouchCount=0;
  }
  handler.removeMessages(MESSAGE_LONG_CLICK);
}
 else {
  vTranslateStart=new PointF(vTranslate.x,vTranslate.y);
  vCenterStart=new PointF(event.getX(),event.getY());
  handler.sendEmptyMessageDelayed(MESSAGE_LONG_CLICK,600);
}
return true;
case MotionEvent.ACTION_MOVE:
boolean consumed=false;
if (maxTouchCount > 0) {
if (touchCount >= 2) {
vDistEnd=distance(event.getX(0),event.getX(1),event.getY(0),event.getY(1));
vCenterEnd=new PointF((event.getX(0) + event.getX(1)) / 2,(event.getY(0) + event.getY(1)) / 2);
if (zoomEnabled && (distance(vCenterStart.x,vCenterEnd.x,vCenterStart.y,vCenterEnd.y) > 5 || Math.abs(vDistEnd - vDistStart) > 5 || isPanning)) {
isZooming=true;
isPanning=true;
consumed=true;
scale=Math.min(maxScale,(vDistEnd / vDistStart) * scaleStart);
if (scale <= minScale()) {
  vDistStart=vDistEnd;
  scaleStart=minScale();
  vCenterStart=vCenterEnd;
  vTranslateStart=vTranslate;
}
 else if (panEnabled) {
  float vLeftStart=vCenterStart.x - vTranslateStart.x;
  float vTopStart=vCenterStart.y - vTranslateStart.y;
  float vLeftNow=vLeftStart * (scale / scaleStart);
  float vTopNow=vTopStart * (scale / scaleStart);
  vTranslate.x=vCenterEnd.x - vLeftNow;
  vTranslate.y=vCenterEnd.y - vTopNow;
}
 else if (sRequestedCenter != null) {
  vTranslate.x=(getWidth() / 2) - (scale * sRequestedCenter.x);
  vTranslate.y=(getHeight() / 2) - (scale * sRequestedCenter.y);
}
 else {
  vTranslate.x=(getWidth() / 2) - (scale * (sWidth() / 2));
  vTranslate.y=(getHeight() / 2) - (scale * (sHeight() / 2));
}
fitToBounds(true);
refreshRequiredTiles(false);
}
}
 else if (!isZooming) {
float dx=Math.abs(event.getX() - vCenterStart.x);
float dy=Math.abs(event.getY() - vCenterStart.y);
if (dx > 5 || dy > 5 || isPanning) {
consumed=true;
vTranslate.x=vTranslateStart.x + (event.getX() - vCenterStart.x);
vTranslate.y=vTranslateStart.y + (event.getY() - vCenterStart.y);
float lastX=vTranslate.x;
float lastY=vTranslate.y;
fitToBounds(true);
if (lastX == vTranslate.x || (lastY == vTranslate.y && dy > 10) || isPanning) {
  isPanning=true;
}
 else if (dx > 5) {
  maxTouchCount=0;
  handler.removeMessages(MESSAGE_LONG_CLICK);
}
if (!panEnabled) {
  vTranslate.x=vTranslateStart.x;
  vTranslate.y=vTranslateStart.y;
}
refreshRequiredTiles(false);
}
}
}
if (consumed) {
handler.removeMessages(MESSAGE_LONG_CLICK);
invalidate();
return true;
}
break;
case MotionEvent.ACTION_UP:
case MotionEvent.ACTION_POINTER_UP:
case MotionEvent.ACTION_POINTER_2_UP:
handler.removeMessages(MESSAGE_LONG_CLICK);
if (maxTouchCount > 0 && (isZooming || isPanning)) {
if (isZooming && touchCount == 2) {
isPanning=true;
vTranslateStart=new PointF(vTranslate.x,vTranslate.y);
if (event.getActionIndex() == 1) {
vCenterStart=new PointF(event.getX(0),event.getY(0));
}
 else {
vCenterStart=new PointF(event.getX(1),event.getY(1));
}
}
if (touchCount < 3) {
isZooming=false;
}
if (touchCount < 2) {
isPanning=false;
maxTouchCount=0;
}
refreshRequiredTiles(true);
return true;
}
if (touchCount == 1) {
isZooming=false;
isPanning=false;
maxTouchCount=0;
}
return true;
}
return super.onTouchEvent(event);
}

public static <T1,T2>void transform(Collection<T1> from,Collection<T2> to,Transformer<T1,T2> transformer){
  for (  T1 instance : from) {
    to.add(transformer.transform(instance));
  }
}

public static String generateCode(){
  return generateCode(CODESIZE);
}

public static boolean isBookSearchUrl(String url){
  return url.startsWith("http://google.com/books") || url.startsWith("http://books.google.");
}

public void flush() throws java.io.IOException {
  m_os.flush();
}

private void combineEntries(ArrayList<long[]> list,int total){
  Collections.sort(list,this);
  for (int minGap=10; minGap < total; minGap+=minGap / 2) {
    for (int i=0; i < list.size() - 1; i++) {
      long[] current=list.get(i);
      long[] next=list.get(i + 1);
      if (current[1] + minGap >= next[0]) {
        current[1]=next[1];
        list.remove(i + 1);
        i--;
      }
    }
    int searched=0;
    for (    long[] range : list) {
      searched+=range[1] - range[0] + 1;
    }
    if (searched > 2 * total || list.size() < 100) {
      break;
    }
  }
}

@Override public void writeString(byte[] str,int offset,int length) throws IOException {
  if (str == null)   writeInt(0);
 else {
    if (useCompression && length >= Compressor.MIN_SIZE_FOR_DEFLATION) {
      if (byteBuffer.length < length)       byteBuffer=new byte[2 * length];
      int numberOfBytes=compressor.deflateString2ByteArray(str,offset,length,byteBuffer);
      writeInt(numberOfBytes);
      io.write(byteBuffer,0,Math.abs(numberOfBytes));
    }
 else {
      writeInt(length);
      io.write(str,offset,length);
    }
  }
}

public void testGenerateDomainLimit() throws Exception {
  ArrayList<URLCrawlDatum> list=new ArrayList<URLCrawlDatum>();
  list.add(createURLCrawlDatum("http://a.example.com/index.html",1,1));
  list.add(createURLCrawlDatum("http://b.example.com/index.html",1,1));
  list.add(createURLCrawlDatum("http://c.example.com/index.html",1,1));
  createCrawlDB(list);
  Configuration myConfiguration=new Configuration(conf);
  myConfiguration.setInt(Generator.GENERATOR_MAX_COUNT,2);
  myConfiguration.set(Generator.GENERATOR_COUNT_MODE,Generator.GENERATOR_COUNT_VALUE_DOMAIN);
  Path generatedSegment=generateFetchlist(Integer.MAX_VALUE,myConfiguration,false);
  Path fetchlistPath=new Path(new Path(generatedSegment,CrawlDatum.GENERATE_DIR_NAME),"part-00000");
  ArrayList<URLCrawlDatum> fetchList=readContents(fetchlistPath);
  assertEquals(1,fetchList.size());
  myConfiguration=new Configuration(myConfiguration);
  myConfiguration.setInt(Generator.GENERATOR_MAX_COUNT,3);
  generatedSegment=generateFetchlist(Integer.MAX_VALUE,myConfiguration,false);
  fetchlistPath=new Path(new Path(generatedSegment,CrawlDatum.GENERATE_DIR_NAME),"part-00000");
  fetchList=readContents(fetchlistPath);
  assertEquals(2,fetchList.size());
  myConfiguration=new Configuration(myConfiguration);
  myConfiguration.setInt(Generator.GENERATOR_MAX_COUNT,4);
  generatedSegment=generateFetchlist(Integer.MAX_VALUE,myConfiguration,false);
  fetchlistPath=new Path(new Path(generatedSegment,CrawlDatum.GENERATE_DIR_NAME),"part-00000");
  fetchList=readContents(fetchlistPath);
  assertEquals(3,fetchList.size());
}

protected void writeColumnNotNullableStmt(StringBuilder ddl){
  ddl.append("NOT NULL");
}

private static OutputStream wrapOutputStream(final OutputStream stream){
  String os=System.getProperty("os.name");
  if (os.startsWith("Windows")) {
    try {
      return new WindowsAnsiOutputStream(stream);
    }
 catch (    Throwable ignore) {
    }
    return new AnsiOutputStream(stream);
  }
  return stream;
}

@Override public Set<Location> unmarshal(LocationsType locationsType){
  Set<Location> locations=new LinkedHashSet<Location>();
  locations.addAll(locationsType.getRpsBlastLocations());
  locations.addAll(locationsType.getHmmer2Locations());
  locations.addAll(locationsType.getHmmer3Locations());
  locations.addAll(locationsType.getSuperFamilyHmmer3Locations());
  locations.addAll(locationsType.getFingerPrintsLocations());
  locations.addAll(locationsType.getBlastProDomLocations());
  locations.addAll(locationsType.getPatternScanLocations());
  locations.addAll(locationsType.getProfileScanLocations());
  locations.addAll(locationsType.getPhobiusLocations());
  locations.addAll(locationsType.getCoilsLocations());
  locations.addAll(locationsType.getPantherLocations());
  locations.addAll(locationsType.getSignalPLocations());
  locations.addAll(locationsType.getTMHMMLocations());
  return locations;
}

public int writeKey(OutputStream out) throws IOException {
  out.write(blockBuffer,keyOffset,klen);
  return klen;
}

boolean descendsFrom(ClassFile cf){
  return descendsFrom(cf.toString());
}

protected Object writePreProcess(Object o) throws Exception {
  return o;
}

public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(1);
  newVector.addElement(new Option("\tUse cross validation for model selection using the\n" + "\tgiven number of folds. (default 0, is to\n" + "\tuse training error)","X",1,"-X <number of folds>"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

public ExpressionParserBuilder withDynamics(Resolver resolver){
  dynamicsResolvers.add(resolver);
  return this;
}

void warnMissingNames(File file){
  String result=checkMissingNames(file);
  if (result.equals("")) {
    JOptionPane.showMessageDialog(_who,"OK, all variables in file are known");
  }
 else {
    JOptionPane.showMessageDialog(_who,result);
  }
}

public void add(int position,WishlistItem wishlistItem){
  notifyItemInserted(position);
  wishlistItems.add(position,wishlistItem);
}

protected void printBand(byte[] bgrData,int x,int y,int width,int height) throws PrinterException {
  mPSStream.println(IMAGE_SAVE);
  int psBytesPerRow=3 * width;
  while (psBytesPerRow > MAX_PSSTR) {
    psBytesPerRow/=2;
  }
  mPSStream.println(psBytesPerRow + IMAGE_STR);
  mPSStream.println("[" + width + " 0 "+ "0 "+ height+ " "+ x+ " "+ y+ "]concat");
  mPSStream.println(width + " " + height+ " "+ 8+ "["+ width+ " 0 "+ "0 "+ -height+ " 0 "+ height+ "]"+ "/imageSrc load false 3 colorimage");
  int index=0;
  byte[] rgbData=new byte[width * 3];
  try {
    for (int i=0; i < height; i++) {
      index=swapBGRtoRGB(bgrData,index,rgbData);
      byte[] encodedData=rlEncode(rgbData);
      byte[] asciiData=ascii85Encode(encodedData);
      mPSStream.write(asciiData);
      mPSStream.println("");
    }
  }
 catch (  IOException e) {
    throw new PrinterIOException(e);
  }
  mPSStream.println(IMAGE_RESTORE);
}

private void initPanel(final ITreeNode<CTag> rootTag){
  final JPanel mainPanel=new JPanel(new BorderLayout());
  mainPanel.setBorder(new TitledBorder("Edit Tag Condition"));
  createTree(rootTag);
  final JScrollPane pane=new JScrollPane(m_tagTree);
  pane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
  pane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
  final JPanel anyTagPanel=new JPanel();
  anyTagPanel.add(m_anyTagBox);
  mainPanel.add(pane,BorderLayout.CENTER);
  mainPanel.add(m_anyTagBox,BorderLayout.SOUTH);
  add(mainPanel,BorderLayout.CENTER);
}

public final void append(String value){
  if (value == null)   return;
  int strlen=value.length();
  if (0 == strlen)   return;
  int copyfrom=0;
  char[] chunk=m_array[m_lastChunk];
  int available=m_chunkSize - m_firstFree;
  while (strlen > 0) {
    if (available > strlen)     available=strlen;
    value.getChars(copyfrom,copyfrom + available,m_array[m_lastChunk],m_firstFree);
    strlen-=available;
    copyfrom+=available;
    if (strlen > 0) {
      int i=m_array.length;
      if (m_lastChunk + 1 == i) {
        char[][] newarray=new char[i + 16][];
        System.arraycopy(m_array,0,newarray,0,i);
        m_array=newarray;
      }
      chunk=m_array[++m_lastChunk];
      if (chunk == null) {
        if (m_lastChunk == 1 << m_rebundleBits && m_chunkBits < m_maxChunkBits) {
          m_innerFSB=new FastStringBuffer(this);
        }
        chunk=m_array[m_lastChunk]=new char[m_chunkSize];
      }
      available=m_chunkSize;
      m_firstFree=0;
    }
  }
  m_firstFree+=available;
}

protected void addPrefixMatch(StringBuilder sb,String surface,String analyzed,String prefixToken){
  if (prefixToken.length() >= surface.length()) {
    addWholeMatch(sb,surface,analyzed);
    return;
  }
  sb.append("<b>");
  sb.append(surface.substring(0,prefixToken.length()));
  sb.append("</b>");
  sb.append(surface.substring(prefixToken.length()));
}

public WalletData addWallet(final BitcoinController bitcoinController,Wallet wallet,String walletFilename){
  if (walletFilename == null) {
    return null;
  }
  for (  WalletData loopModelData : perWalletModelDataList) {
    if (walletFilename.equals(loopModelData.getWalletFilename())) {
      return loopModelData;
    }
  }
  WalletData newPerWalletModelData=new WalletData();
  newPerWalletModelData.setWallet(wallet);
  newPerWalletModelData.setWalletFilename(walletFilename);
  newPerWalletModelData.setWalletTableDataList(new ArrayList<WalletTableData>());
  if (thereIsNoActiveWallet()) {
    perWalletModelDataList.remove(activeWalletModelData);
    activeWalletModelData=newPerWalletModelData;
  }
  perWalletModelDataList.add(newPerWalletModelData);
  if (wallet != null) {
    wallet.addEventListener(bitcoinController);
  }
  createWalletTableData(bitcoinController,walletFilename);
  createAddressBookReceivingAddresses(walletFilename);
  return newPerWalletModelData;
}

public E push(E object){
  addElement(object);
  return object;
}

public void add(T object){
synchronized (mLock) {
    if (mOriginalValues != null) {
      mOriginalValues.add(object);
    }
 else {
      mObjects.add(object);
    }
  }
  if (mNotifyOnChange)   notifyDataSetChanged();
}

public static String toHumanSize(long bytesValue){
  if (0 == bytesValue) {
    return "0B";
  }
  boolean powerOfTwo=false;
  if ((bytesValue & (bytesValue - 1L)) == 0) {
    powerOfTwo=true;
  }
  long multiple=(long)(bytesValue / 1.5);
  if ((multiple & (multiple - 1L)) == 0) {
    powerOfTwo=true;
  }
  Unit unit=Unit.B;
  if (powerOfTwo) {
    if (bytesValue >= Unit.EiB.value) {
      unit=Unit.EiB;
    }
 else     if (bytesValue >= Unit.PiB.value) {
      unit=Unit.PiB;
    }
 else     if (bytesValue >= Unit.TiB.value) {
      unit=Unit.TiB;
    }
 else     if (bytesValue >= Unit.GiB.value) {
      unit=Unit.GiB;
    }
 else     if (bytesValue >= Unit.MiB.value) {
      unit=Unit.MiB;
    }
 else     if (bytesValue >= Unit.KiB.value) {
      unit=Unit.KiB;
    }
  }
 else {
    if (bytesValue >= Unit.EB.value) {
      unit=Unit.EB;
    }
 else     if (bytesValue >= Unit.PB.value) {
      unit=Unit.PB;
    }
 else     if (bytesValue >= Unit.TB.value) {
      unit=Unit.TB;
    }
 else     if (bytesValue >= Unit.GB.value) {
      unit=Unit.GB;
    }
 else     if (bytesValue >= Unit.MB.value) {
      unit=Unit.MB;
    }
 else     if (bytesValue >= Unit.KB.value) {
      unit=Unit.KB;
    }
  }
  double val=(bytesValue / unit.getValue());
  double roundedValue=Math.round(val * 10.0) / 10.0;
  BigDecimal myDecimal=BigDecimal.valueOf(roundedValue);
  BigDecimal updated=myDecimal.stripTrailingZeros();
  return updated.toPlainString() + unit.name();
}

public boolean equals(Object another){
  if (another instanceof Permission) {
    Permission p=(Permission)another;
    return permission.equals(p.toString());
  }
 else {
    return false;
  }
}

public static Intent buildStartInTerminalIntent(File script){
  final ComponentName componentName=Constants.SL4A_SERVICE_LAUNCHER_COMPONENT_NAME;
  Intent intent=new Intent();
  intent.setComponent(componentName);
  intent.setAction(Constants.ACTION_LAUNCH_FOREGROUND_SCRIPT);
  intent.putExtra(Constants.EXTRA_SCRIPT_PATH,script.getAbsolutePath());
  return intent;
}

public Document loadDocument(Resource file) throws SAXException, IOException {
  DOMParser parser=new DOMParser();
  InputStream in=null;
  try {
    in=file.getInputStream();
    InputSource source=new InputSource(in);
    parser.parse(source);
  }
  finally {
    IOUtil.closeEL(in);
  }
  return parser.getDocument();
}

public void resetFilters(Boolean enabled){
  if (logger.isLoggable(Level.FINE)) {
    logger.fine("enabled = " + enabled);
  }
  Set keys=filters.keySet();
  for (Iterator it=keys.iterator(); it.hasNext(); ) {
    String title=(String)it.next();
    setFilterValue(title,enabled);
  }
  updateInterface();
}

private String[] diff_halfMatchI(String longtext,String shorttext,int i){
  String seed=longtext.substring(i,i + longtext.length() / 4);
  int j=-1;
  String best_common="";
  String best_longtext_a="", best_longtext_b="";
  String best_shorttext_a="", best_shorttext_b="";
  while ((j=shorttext.indexOf(seed,j + 1)) != -1) {
    int prefixLength=diff_commonPrefix(longtext.substring(i),shorttext.substring(j));
    int suffixLength=diff_commonSuffix(longtext.substring(0,i),shorttext.substring(0,j));
    if (best_common.length() < suffixLength + prefixLength) {
      best_common=shorttext.substring(j - suffixLength,j) + shorttext.substring(j,j + prefixLength);
      best_longtext_a=longtext.substring(0,i - suffixLength);
      best_longtext_b=longtext.substring(i + prefixLength);
      best_shorttext_a=shorttext.substring(0,j - suffixLength);
      best_shorttext_b=shorttext.substring(j + prefixLength);
    }
  }
  if (best_common.length() * 2 >= longtext.length()) {
    return new String[]{best_longtext_a,best_longtext_b,best_shorttext_a,best_shorttext_b,best_common};
  }
 else {
    return null;
  }
}

@Override public boolean generateEventID(){
  return true;
}

private void updateUtility(){
  for (  Individual individual : population) {
    double oldFitness=individual.getFitness();
    double newFitness=fitness(individual.getSolution(),idealPoint);
    double relativeDecrease=oldFitness - newFitness;
    if (relativeDecrease > 0.001) {
      individual.setUtility(1.0);
    }
 else {
      double utility=Math.min(1.0,0.95 * (1.0 + delta / 0.001) * individual.getUtility());
      individual.setUtility(utility);
    }
    individual.setFitness(newFitness);
  }
}

private void writeKeysWithPrefix(String prefix){
  for (  String key : keys) {
    if (key.startsWith(prefix)) {
      ps.println(key + "=" + prop.getProperty(key));
    }
  }
  ps.println();
}

public List<Operation> sendAndWait(List<Operation> ops){
  return sendAndWait(ops,true);
}

public static void copy(byte[] in,OutputStream out) throws IOException {
  Assert.notNull(in,"No input byte array specified");
  Assert.notNull(out,"No OutputStream specified");
  try {
    out.write(in);
  }
  finally {
    try {
      out.close();
    }
 catch (    IOException ex) {
    }
  }
}

public Action mapToXACMLAction(String nativeActionName,String serviceName) throws XACMLException {
  return null;
}

private int nextInt(StringTokenizer tok,String errorMsg) throws SAXException {
  if (!tok.hasMoreTokens()) {
    throw new SAXException(errorMsg);
  }
  try {
    return Integer.parseInt(tok.nextToken());
  }
 catch (  NumberFormatException nfe) {
    throw new SAXException(errorMsg);
  }
}

public Calculable(String id,double value){
  setId(id);
  setValue(value);
  setWhen(System.currentTimeMillis());
}

public static boolean bookmarkNodeExists(Context context,long nodeId){
  Boolean result=chromeBrowserProviderCall(Boolean.class,ChromeBrowserProvider.CLIENT_API_BOOKMARK_NODE_EXISTS,context,argsToBundle(nodeId));
  return result != null ? result.booleanValue() : false;
}

private void executeTasksSimultaneouslyWithBarrier(Runnable... tasks) throws InterruptedException {
  CountDownLatch latch=new CountDownLatch(tasks.length);
  for (  Runnable task : tasks) {
    executor.execute(null);
  }
  latch.await();
}

private boolean isOperator(char tok){
  if (OPERATORS.indexOf(tok) == -1) {
    return false;
  }
  return true;
}

protected String formatIterable(JCDiagnostic d,Iterable<?> it,Locale l){
  StringBuilder sbuf=new StringBuilder();
  String sep="";
  for (  Object o : it) {
    sbuf.append(sep);
    sbuf.append(formatArgument(d,o,l));
    sep=",";
  }
  return sbuf.toString();
}

public void endRepresentation(){
  if (!representationProtectionsSet) {
    if (currentRepresentationProtections != null) {
      Collections.sort(currentRepresentationProtections,this);
    }
    representationProtections=currentRepresentationProtections;
    representationProtectionsSet=true;
  }
 else {
    if (currentRepresentationProtections == null) {
      Assertions.checkState(representationProtections == null);
    }
 else {
      Collections.sort(currentRepresentationProtections,this);
      Assertions.checkState(currentRepresentationProtections.equals(representationProtections));
    }
  }
  currentRepresentationProtections=null;
}

private static char[] zzUnpackCMap(String packed){
  char[] map=new char[0x110000];
  int i=0;
  int j=0;
  while (i < 246) {
    int count=packed.charAt(i++);
    char value=packed.charAt(i++);
    do     map[j++]=value;
 while (--count > 0);
  }
  return map;
}

public static ModuleVersion valueOf(String string){
  return parseVersion(string);
}

static void checkTypeRefAndPath(int typeRef,TypePath typePath){
  int mask=0;
switch (typeRef >>> 24) {
case TypeReference.CLASS_TYPE_PARAMETER:
case TypeReference.METHOD_TYPE_PARAMETER:
case TypeReference.METHOD_FORMAL_PARAMETER:
    mask=0xFFFF0000;
  break;
case TypeReference.FIELD:
case TypeReference.METHOD_RETURN:
case TypeReference.METHOD_RECEIVER:
case TypeReference.LOCAL_VARIABLE:
case TypeReference.RESOURCE_VARIABLE:
case TypeReference.INSTANCEOF:
case TypeReference.NEW:
case TypeReference.CONSTRUCTOR_REFERENCE:
case TypeReference.METHOD_REFERENCE:
mask=0xFF000000;
break;
case TypeReference.CLASS_EXTENDS:
case TypeReference.CLASS_TYPE_PARAMETER_BOUND:
case TypeReference.METHOD_TYPE_PARAMETER_BOUND:
case TypeReference.THROWS:
case TypeReference.EXCEPTION_PARAMETER:
mask=0xFFFFFF00;
break;
case TypeReference.CAST:
case TypeReference.CONSTRUCTOR_INVOCATION_TYPE_ARGUMENT:
case TypeReference.METHOD_INVOCATION_TYPE_ARGUMENT:
case TypeReference.CONSTRUCTOR_REFERENCE_TYPE_ARGUMENT:
case TypeReference.METHOD_REFERENCE_TYPE_ARGUMENT:
mask=0xFF0000FF;
break;
default :
throw new IllegalArgumentException("Invalid type reference sort 0x" + Integer.toHexString(typeRef >>> 24));
}
if ((typeRef & ~mask) != 0) {
throw new IllegalArgumentException("Invalid type reference 0x" + Integer.toHexString(typeRef));
}
if (typePath != null) {
for (int i=0; i < typePath.getLength(); ++i) {
int step=typePath.getStep(i);
if (step != TypePath.ARRAY_ELEMENT && step != TypePath.INNER_TYPE && step != TypePath.TYPE_ARGUMENT && step != TypePath.WILDCARD_BOUND) {
throw new IllegalArgumentException("Invalid type path step " + i + " in "+ typePath);
}
if (step != TypePath.TYPE_ARGUMENT && typePath.getStepArgument(i) != 0) {
throw new IllegalArgumentException("Invalid type path step argument for step " + i + " in "+ typePath);
}
}
}
}

@Override public boolean equals(Object otherObj){
  if (otherObj instanceof P2Model) {
    return content.equals(((P2Model)otherObj).content);
  }
 else {
    return false;
  }
}

public boolean showIcons(){
  return preferences.getBoolean(resources.getString(R.string.key_show_icons),Boolean.parseBoolean(resources.getString(R.string.default_show_icons)));
}

public static <V>boolean addListNotNullValue(List<V> sourceList,V value){
  return (sourceList != null && value != null) ? sourceList.add(value) : false;
}

private boolean checkForKey() throws Exception {
  String query=m_query;
  query=query.replaceAll(" +"," ");
  if (!query.startsWith("SELECT *")) {
    return false;
  }
  m_orderBy.clear();
  if (!m_DataBaseConnection.isConnected()) {
    m_DataBaseConnection.connectToDatabase();
  }
  DatabaseMetaData dmd=m_DataBaseConnection.getMetaData();
  String table=endOfQuery(true);
  ResultSet rs=dmd.getPrimaryKeys(null,null,table);
  while (rs.next()) {
    m_orderBy.add(rs.getString(4));
  }
  rs.close();
  if (m_orderBy.size() != 0) {
    return true;
  }
  rs=dmd.getBestRowIdentifier(null,null,table,DatabaseMetaData.bestRowSession,false);
  ResultSetMetaData rmd=rs.getMetaData();
  int help=0;
  while (rs.next()) {
    m_orderBy.add(rs.getString(2));
    help++;
  }
  rs.close();
  if (help == rmd.getColumnCount()) {
    m_orderBy.clear();
  }
  if (m_orderBy.size() != 0) {
    return true;
  }
  return false;
}

public IgniteStripedThreadPoolExecutor(int concurrentLvl,String gridName,String threadNamePrefix){
  execs=new ExecutorService[concurrentLvl];
  ThreadFactory factory=new IgniteThreadFactory(gridName,threadNamePrefix);
  for (int i=0; i < concurrentLvl; i++)   execs[i]=Executors.newSingleThreadExecutor(factory);
}

public static boolean isZip(BufferedInputStream in){
  in.mark(4);
  byte[] b=new byte[4];
  byte[] zipSig=new byte[4];
  zipSig[0]=0x50;
  zipSig[1]=0x4b;
  zipSig[2]=0x03;
  zipSig[3]=0x04;
  try {
    in.read(b,0,4);
  }
 catch (  Exception ex) {
    throw new RuntimeException("Couldn't read header from stream ",ex);
  }
  try {
    in.reset();
  }
 catch (  Exception ex) {
    throw new RuntimeException("Couldn't reset stream ",ex);
  }
  return Arrays.equals(b,zipSig);
}

public List<String> extract(Configuration config){
  List<String> features=new ArrayList<String>();
  for (  Extractor fe : extractors) {
    features.add(fe.extract(config));
  }
  return features;
}

public String toString(){
  StringBuffer path=new StringBuffer();
  if (absolute)   path.append("/");
  for (int i=0; i < elements.size(); i++) {
    if (i > 0)     path.append("/");
    path.append(elements.get(i));
  }
  return path.toString();
}

public void handleTblDataActionHrefRequest(RequestInvocationEvent event){
  AgentsModel model=(AgentsModel)getModel();
  String agentType=getDisplayIDType();
  String universalId=hexToString((String)getDisplayFieldValue(TBL_DATA_ACTION_HREF));
  setPageSessionAttribute(AgentProfileViewBean.UNIVERSAL_ID,universalId);
  SSOToken ssoToken=model.getUserSSOToken();
  String realm=(String)getPageSessionAttribute(AMAdminConstants.CURRENT_REALM);
  StringTokenizer st=new StringTokenizer(universalId,"=,");
  st.nextToken();
  String agentName=st.nextToken();
  try {
    AMIdentity amid=new AMIdentity(ssoToken,agentName,IdType.AGENTONLY,realm,null);
    if (agentType.equals(AgentsViewBean.AGENT_WEB) || (agentType.equals(AgentsViewBean.DEFAULT_ID_TYPE))) {
      if (isPropertiesLocallyStored(amid)) {
        setPageSessionAttribute(LOCAL_OR_NOT,PROP_LOCAL);
      }
 else {
        setPageSessionAttribute(LOCAL_OR_NOT,PROP_CENTRAL);
      }
    }
    Class clazz=getAgentCustomizedViewBean(model.getAgentType(amid));
    AMViewBeanBase vb=(AMViewBeanBase)getViewBean(clazz);
    setPageSessionAttribute(PG_SESSION_SUPERCEDE_AGENT_TYPE,model.getAgentType(amid));
    removePageSessionAttribute(GenericAgentProfileViewBean.PS_TABNAME);
    passPgSessionMap(vb);
    vb.forwardTo(getRequestContext());
  }
 catch (  IdRepoException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",model.getErrorString(e));
    forwardTo();
  }
catch (  SSOException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",model.getErrorString(e));
    forwardTo();
  }
catch (  AMConsoleException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",model.getErrorString(e));
    forwardTo();
  }
catch (  ClassNotFoundException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",model.getErrorString(e));
    forwardTo();
  }
}

@Override protected boolean check(File item){
  return item.exists();
}

public PropertyValueEditor(ConsoleApplication app,ManagementContext context){
  this.app=app;
  this.context=context;
}

@Override public void toData(DataOutput out) throws IOException {
  out.writeInt(maxInactiveInterval);
  out.writeLong(lastAccessedTime);
synchronized (attributes) {
    out.writeInt(attributes.size());
    for (    Map.Entry<String,Object> entry : attributes.entrySet()) {
      DeltaEvent delta=new DeltaEvent(true,entry.getKey(),entry.getValue());
      DataSerializer.writeObject(delta,out);
    }
  }
  out.writeUTF(jvmOwnerId);
}

public void createVictoryConditions(){
  victory=vf.createVictory("this string should be taken from game options");
}

public static IStatus validateQualifiedModuleName(String qualifiedName){
  String pckg=Signature.getQualifier(qualifiedName);
  if (!Util.isValidPackageName(pckg)) {
    return Util.newErrorStatus("The module package name is invalid");
  }
  return validateSimpleModuleName(Signature.getSimpleName(qualifiedName));
}

public static <T1,T2>Map<T1,T2> synchronizedMap(){
  return Collections.synchronizedMap(new HashMap<T1,T2>());
}

private final int filterStatusBytes(byte[] src,byte[] dest,int totalBytesRead,int maxPacketSize){
  final int packetsCount=totalBytesRead / maxPacketSize + (totalBytesRead % maxPacketSize == 0 ? 0 : 1);
  for (int packetIdx=0; packetIdx < packetsCount; ++packetIdx) {
    final int count=(packetIdx == (packetsCount - 1)) ? (totalBytesRead % maxPacketSize) - MODEM_STATUS_HEADER_LENGTH : maxPacketSize - MODEM_STATUS_HEADER_LENGTH;
    if (count > 0) {
      System.arraycopy(src,packetIdx * maxPacketSize + MODEM_STATUS_HEADER_LENGTH,dest,packetIdx * (maxPacketSize - MODEM_STATUS_HEADER_LENGTH),count);
    }
  }
  return totalBytesRead - (packetsCount * 2);
}

public boolean contains(String key){
  return mSharedPreferences.contains(key);
}

int registerMiss(){
  return misses.incrementAndGet();
}

private void updateBaseMatrix(Drawable d){
  ImageView imageView=getImageView();
  if (null == imageView || null == d) {
    return;
  }
  final float viewWidth=imageView.getWidth();
  final float viewHeight=imageView.getHeight();
  final int drawableWidth=d.getIntrinsicWidth();
  final int drawableHeight=d.getIntrinsicHeight();
  mBaseMatrix.reset();
  final float widthScale=viewWidth / drawableWidth;
  final float heightScale=viewHeight / drawableHeight;
  if (mScaleType == ScaleType.CENTER) {
    mBaseMatrix.postTranslate((viewWidth - drawableWidth) / 2F,(viewHeight - drawableHeight) / 2F);
  }
 else   if (mScaleType == ScaleType.CENTER_CROP) {
    float scale=Math.max(widthScale,heightScale);
    mBaseMatrix.postScale(scale,scale);
    mBaseMatrix.postTranslate((viewWidth - drawableWidth * scale) / 2F,(viewHeight - drawableHeight * scale) / 2F);
  }
 else   if (mScaleType == ScaleType.CENTER_INSIDE) {
    float scale=Math.min(1.0f,Math.min(widthScale,heightScale));
    mBaseMatrix.postScale(scale,scale);
    mBaseMatrix.postTranslate((viewWidth - drawableWidth * scale) / 2F,(viewHeight - drawableHeight * scale) / 2F);
  }
 else {
    RectF mTempSrc=new RectF(0,0,drawableWidth,drawableHeight);
    RectF mTempDst=new RectF(0,0,viewWidth,viewHeight);
switch (mScaleType) {
case FIT_CENTER:
      mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.CENTER);
    break;
case FIT_START:
  mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.START);
break;
case FIT_END:
mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.END);
break;
case FIT_XY:
mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.FILL);
break;
default :
break;
}
}
resetMatrix();
}

public static CharSequence partialEscape(CharSequence s){
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < s.length(); i++) {
    char c=s.charAt(i);
    if (c == '\\' || c == '!' || c == '(' || c == ')' || c == ':' || c == '^' || c == '[' || c == ']' || c == '/' || c == '{' || c == '}' || c == '~' || c == '*' || c == '?') {
      sb.append('\\');
    }
    sb.append(c);
  }
  return sb;
}

public void finished(long work,long latency){
  finishedUpdater.getAndIncrement(this);
  totalWorkUpdater.getAndAdd(this,work);
  totalWorkSquaredUpdater.getAndAdd(this,work * work);
  totalLatencyUpdater.getAndAdd(this,latency);
  totalLatencySquaredUpdater.getAndAdd(this,latency * latency);
}

public void close() throws IOException {
  if (mInputStream != null) {
    mInputStream.close();
  }
 else {
    throw new IOException("Can't close wave source - was not opened");
  }
  mInputStream=null;
}

private WindowsSecurityDescriptor(){
  this.sidList=null;
  this.aclBuffer=null;
  this.sdBuffer=null;
}

public void printUsage(OutputStream os){
  int count=0;
  PrintStream out=UTF8.printStream(os);
  for (  String option : optionList) {
    if (optionGroups.containsKey(count)) {
      out.println("  " + optionGroups.get(count));
    }
    count++;
    if (unlistedOptions.contains(option)) {
      continue;
    }
    out.print("    ");
    StringBuilder buf=new StringBuilder();
    buf.append(option);
    if (optionExtraPartSynopsisMap.get(option) != null) {
      String optionExtraPartSynopsis=optionExtraPartSynopsisMap.get(option);
      buf.append("[:");
      buf.append(optionExtraPartSynopsis);
      buf.append("]");
    }
    if (requiresArgumentSet.contains(option)) {
      buf.append(" <");
      buf.append(argumentDescriptionMap.get(option));
      buf.append(">");
    }
    printField(out,buf.toString(),maxWidth + 1);
    out.println(optionDescriptionMap.get(option));
  }
  out.flush();
}

public void clearSharedVariables(){
  sharedVariables.clear();
  loadBuiltInSharedVariables();
}

public void remove(Video video){
  videoList.remove(video);
  notifyDataSetChanged();
}

public final void sendPacket(LsServerPacket bp){
synchronized (guard) {
    if (isWriteDisabled()) {
      return;
    }
    log.debug("sending packet: " + bp);
    sendMsgQueue.addLast(bp);
    enableWriteInterest();
  }
}

private static Map<String,Object> processSection(String section,Collection<Map<String,Object>> hosts,Map<String,Object> dflts,Map<String,Object> props) throws IgniteCheckedException {
  if (section == null || props == null)   return null;
  if (DFLT_SECTION.equalsIgnoreCase(section)) {
    if (dflts != null)     throw new IgniteCheckedException("Only one '" + DFLT_SECTION + "' section is allowed.");
    return props;
  }
 else {
    hosts.add(props);
    return null;
  }
}

public boolean isSet(final OPTION option){
  return options == null ? false : options.contains(option);
}

public void handleButton1Request(RequestInvocationEvent event) throws ModelControlException {
  List optionData=restoreOptionsData();
  CCCheckBox cbForceResetPwd=(CCCheckBox)getChild(CB_FORCE_RESET_PWD);
  boolean forceResetPwd=cbForceResetPwd.isChecked();
  UMUserPasswordResetOptionsModel model=(UMUserPasswordResetOptionsModel)getModel();
  String userId=(String)getPageSessionAttribute(EntityEditViewBean.UNIVERSAL_ID);
  try {
    model.modifyUserOption(optionData,userId,forceResetPwd);
    setInlineAlertMessage(CCAlert.TYPE_INFO,"message.information",model.getLocalizedString("profile.updated"));
  }
 catch (  AMConsoleException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",e.getMessage());
  }
  forwardTo();
}

NumberStrategy(final int field){
  this.field=field;
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(0);
  newVector.addElement(new Option("\tInitial structure is empty (instead of Naive Bayes)","N",0,"-N"));
  newVector.addElement(new Option("\tMaximum number of parents","P",1,"-P <nr of parents>"));
  newVector.addElement(new Option("\tRandom order.\n" + "\t(default false)","R",0,"-R"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

@Override public boolean queueRequest(Operation op){
  AuthorizationContext ctx=op.getAuthorizationContext();
  if (ctx == null) {
    op.fail(new IllegalArgumentException("no authorization context"));
    return true;
  }
  Claims claims=ctx.getClaims();
  if (claims == null) {
    op.fail(new IllegalArgumentException("no claims"));
    return true;
  }
  String subject=claims.getSubject();
  if (subject == null) {
    op.fail(new IllegalArgumentException("no subject"));
    return true;
  }
  if (op.hasPragmaDirective(Operation.PRAGMA_DIRECTIVE_CLEAR_AUTH_CACHE)) {
    return handleCacheClearRequest(op,subject);
  }
  if (subject.equals(SystemUserService.SELF_LINK)) {
    op.complete();
    return true;
  }
  if (ctx.getResourceQueryFilter(op.getAction()) != null) {
    op.complete();
    return true;
  }
  return false;
}

public SpannableStringBuilder(CharSequence text){
  this(text,0,text.length());
}

public boolean hasExtraFields(PdxType other){
  for (  PdxField ft : this.fields) {
    if (!ft.isDeleted() && other.getPdxField(ft.getFieldName()) == null) {
      return true;
    }
  }
  return false;
}

public void put(String id,String str){
  tab.put(id,str);
  if (str.endsWith(".dtd")) {
    int i=str.lastIndexOf(File.separator);
    if (i >= 0) {
      tab.put(str.substring(i + 1,str.length() - 4),str);
    }
  }
}

private void assertReadVarint(byte[] data,long value) throws Exception {
  CodedInputStream input=CodedInputStream.newInstance(data);
  assertEquals((int)value,input.readRawVarint32());
  assertDataConsumed(data,input);
  input=CodedInputStream.newInstance(data);
  assertEquals(value,input.readRawVarint64());
  assertDataConsumed(data,input);
  input=CodedInputStream.newInstance(data);
  assertEquals(value,input.readRawVarint64SlowPath());
  assertDataConsumed(data,input);
  input=CodedInputStream.newInstance(data);
  assertTrue(input.skipField(WireFormat.WIRETYPE_VARINT));
  assertDataConsumed(data,input);
  for (int blockSize=1; blockSize <= 16; blockSize*=2) {
    input=CodedInputStream.newInstance(new SmallBlockInputStream(data,blockSize));
    assertEquals((int)value,input.readRawVarint32());
    assertDataConsumed(data,input);
    input=CodedInputStream.newInstance(new SmallBlockInputStream(data,blockSize));
    assertEquals(value,input.readRawVarint64());
    assertDataConsumed(data,input);
    input=CodedInputStream.newInstance(new SmallBlockInputStream(data,blockSize));
    assertEquals(value,input.readRawVarint64SlowPath());
    assertDataConsumed(data,input);
    input=CodedInputStream.newInstance(new SmallBlockInputStream(data,blockSize));
    assertTrue(input.skipField(WireFormat.WIRETYPE_VARINT));
    assertDataConsumed(data,input);
  }
  byte[] longerData=new byte[data.length + 1];
  System.arraycopy(data,0,longerData,0,data.length);
  InputStream rawInput=new ByteArrayInputStream(longerData);
  assertEquals((int)value,CodedInputStream.readRawVarint32(rawInput));
  assertEquals(1,rawInput.available());
}

public void reportOccurences(List<Map<Id<Vehicle>,Integer>> maps){
  for (int m=0; m < maps.size(); m++) {
    Map<Id<Vehicle>,Integer> theMap=maps.get(m);
    log.info(" Map " + (m + 1) + " ("+ theMap.size()+ " agents)");
    Integer min=Integer.MAX_VALUE;
    Integer max=Integer.MIN_VALUE;
    for (    Id<Vehicle> id : theMap.keySet()) {
      min=Math.min(min,theMap.get(id));
      max=Math.max(max,theMap.get(id));
    }
    log.info("    Min usage: " + min + "; Max usage: "+ max);
    List<Id<Link>> histList=new ArrayList<>();
    Map<Id<Link>,Integer> histMap=new HashMap<Id<Link>,Integer>();
    for (long h=min; h <= max; h++) {
      Id<Link> id=Id.create(h,Link.class);
      histList.add(id);
      histMap.put(id,new Integer(0));
    }
    for (    Id<Vehicle> id : theMap.keySet()) {
      int value=theMap.get(id);
      histMap.put(Id.create(value,Link.class),new Integer(histMap.get(Id.create(value,Link.class)) + 1));
    }
    String s="";
    for (    Id<Link> id : histList) {
      s+=id.toString() + " (" + histMap.get(id)+ "); ";
    }
    log.info("    Link usage histogram:");
    log.info("    " + s);
  }
}

public static List<URI> refIds(Collection<? extends RelatedResourceRep> refs){
  List<URI> ids=new ArrayList<URI>();
  if (refs != null) {
    for (    RelatedResourceRep ref : refs) {
      ids.add(ref.getId());
    }
  }
  return ids;
}

public static boolean hasTopCategory(HttpServletRequest request,String categoryId,List<String> pathElements){
  if (CategoryWorker.isCategoryTop(request,categoryId)) {
    return true;
  }
  String topCategoryId=CategoryWorker.getTopCategoryFromTrail(request,pathElements);
  if (topCategoryId != null) {
    return true;
  }
  List<String> trail=CategoryWorker.getTrail(request);
  topCategoryId=CategoryWorker.getTopCategoryFromTrail(request,trail);
  if (topCategoryId == null) {
    return true;
  }
  return false;
}

@Override public String append(String path,InputStream is) throws MalformedURLException, IOException, AuthenticationException {
  String resp=null;
  ensureValidToken();
  String redirectUrl=null;
  HttpURLConnection conn=authenticatedURL.openConnection(new URL(new URL(httpfsUrl),MessageFormat.format("/webhdfs/v1/{0}?op=APPEND",path)),token);
  conn.setRequestMethod("POST");
  conn.setInstanceFollowRedirects(false);
  conn.connect();
  logger.info("Location:" + conn.getHeaderField("Location"));
  resp=result(conn,true);
  if (conn.getResponseCode() == 307)   redirectUrl=conn.getHeaderField("Location");
  conn.disconnect();
  if (redirectUrl != null) {
    conn=authenticatedURL.openConnection(new URL(redirectUrl),token);
    conn.setRequestMethod("POST");
    conn.setDoOutput(true);
    conn.setDoInput(true);
    conn.setUseCaches(false);
    conn.setRequestProperty("Content-Type","application/octet-stream");
    final int _SIZE=is.available();
    conn.setRequestProperty("Content-Length","" + _SIZE);
    conn.setFixedLengthStreamingMode(_SIZE);
    conn.connect();
    OutputStream os=conn.getOutputStream();
    copy(is,os);
    is.close();
    os.close();
    resp=result(conn,true);
    conn.disconnect();
  }
  return resp;
}

public static void cacheImgs(String skinImgDir,Iterable<String> baseImageURLs){
  String skinDir=getSkinDir();
  for (  String img : baseImageURLs) {
    img=img.replace("[SKINIMG]",skinDir + "images/");
    img=img.replace("[SKIN]",skinDir + skinImgDir);
    Image.prefetch(img);
  }
}

public static String separatorsToUnix(String path){
  if (path == null || path.indexOf(WINDOWS_SEPARATOR) == -1) {
    return path;
  }
  return path.replace(WINDOWS_SEPARATOR,UNIX_SEPARATOR);
}

public void clearBuffer(){
  buffer.clear();
}

@Override public final void perform(IR ir){
  java.util.HashMap<Register,Register> newMap=new java.util.HashMap<Register,Register>(5);
  for (Enumeration<BasicBlock> be=ir.getBasicBlocks(); be.hasMoreElements(); ) {
    BasicBlock bb=be.nextElement();
    for (Enumeration<Instruction> ie=bb.forwardInstrEnumerator(); ie.hasMoreElements(); ) {
      Instruction s=ie.nextElement();
      ;
      newMap.clear();
      if (s.isPEI() && s.operator() != IR_PROLOGUE) {
        if (bb.hasApplicableExceptionalOut(s) || !RegisterRestrictions.SCRATCH_IN_PEI) {
          splitAllLiveRanges(s,newMap,ir,false);
        }
      }
switch (s.getOpcode()) {
case MIR_LOWTABLESWITCH_opcode:
{
          RegisterOperand rOp=MIR_LowTableSwitch.getIndex(s);
          RegisterOperand temp=findOrCreateTemp(rOp,newMap,ir);
          insertMoveBefore(temp,rOp.copyRO(),s);
          rOp.setRegister(temp.getRegister());
        }
      break;
  }
}
}
}

protected void appendString(final String text){
  final HTMLDocument doc=(HTMLDocument)textPane.getDocument();
  try {
    final Element root=doc.getParagraphElement(0);
    doc.insertBeforeEnd(root,text);
  }
 catch (  final BadLocationException e) {
    logger.error(e,e);
  }
catch (  final IOException e) {
    logger.error(e,e);
  }
}

public void scaleToSamples(int usrSamples){
  double ratio;
  ratio=(double)usrSamples / count;
  count=0;
  for (int i=0; i <= limits.length; ++i) {
    results[i]=(int)Math.round(results[i] * ratio);
    count+=results[i];
  }
}

private void refreshSelected(int offsetX){
  int offset=(int)(offsetX + mMaxOverScrollDistance);
  int tempIndex=Math.round(offset / mIntervalDis);
  tempIndex=clampSelectedIndex(tempIndex);
  if (mSelectedIndex == tempIndex) {
    return;
  }
  mSelectedIndex=tempIndex;
  if (null != onValueChangeListener) {
    onValueChangeListener.onChange(this,mSelectedIndex,Float.parseFloat(format(mSelectedIndex * mIntervalValue + mMinValue)));
  }
}

@Override @SuppressWarnings("UnnecessaryBoxing") public void resetFrame(){
synchronized (lock) {
    sysName.setText("IAB" + counter++);
  }
  userName.setText(null);
  url.setText(null);
  stream.setSelected(false);
  stream.setEnabled(false);
  loopStart.setValue(Long.valueOf(0));
  loopEnd.setValue(Long.valueOf(0));
  this.newBuffer=true;
}

public ExpectedRecords<T> repeatAll(int times){
  List<T> toAppend=new ArrayList<>();
  for (int i=0; i < times; i++) {
    toAppend.addAll(expectedRecords);
  }
  expectedRecords.addAll(toAppend);
  return this;
}

public void addAttributes(Attributes atts) throws SAXException {
  int nAtts=atts.getLength();
  for (int i=0; i < nAtts; i++) {
    String uri=atts.getURI(i);
    if (null == uri)     uri="";
    addAttributeAlways(uri,atts.getLocalName(i),atts.getQName(i),atts.getType(i),atts.getValue(i),false);
  }
}

protected static GeoPoint parseKmlCoord(String input){
  int end1=input.indexOf(',');
  int end2=input.indexOf(',',end1 + 1);
  try {
    if (end2 == -1) {
      double lon=Double.parseDouble(input.substring(0,end1));
      double lat=Double.parseDouble(input.substring(end1 + 1,input.length()));
      return new GeoPoint(lat,lon);
    }
 else {
      double lon=Double.parseDouble(input.substring(0,end1));
      double lat=Double.parseDouble(input.substring(end1 + 1,end2));
      double alt=Double.parseDouble(input.substring(end2 + 1,input.length()));
      return new GeoPoint(lat,lon,alt);
    }
  }
 catch (  NumberFormatException e) {
    return null;
  }
catch (  IndexOutOfBoundsException e) {
    return null;
  }
}

@Nullable public Calendar detectDate(String input){
  checkNotNull(input);
  Time.setTimeZone(getTimeZone());
  Options opt=new com.sk89q.jchronic.Options();
  opt.setNow(Calendar.getInstance(getTimeZone()));
  Span date=Chronic.parse(input,opt);
  if (date == null) {
    return null;
  }
 else {
    return date.getBeginCalendar();
  }
}

public synchronized void saveCommitPoint(Long indexCommitGen){
  AtomicInteger reserveCount=savedCommits.get(indexCommitGen);
  if (reserveCount == null)   reserveCount=new AtomicInteger();
  reserveCount.incrementAndGet();
  savedCommits.put(indexCommitGen,reserveCount);
}

public void removeSearchable(SearchResult searchable){
  if (searchables.contains(searchable))   searchables.remove(search);
}

public static boolean is64bit(){
  boolean is64bit=false;
  if (isWindows()) {
    is64bit=(System.getenv("ProgramFiles(x86)") != null);
  }
 else {
    is64bit=(OS_ARCH.contains("64"));
  }
  return is64bit;
}

private int resolveSizeAndStateRespectingMinSize(int minSize,int measuredSize,int measureSpec){
  if (minSize != SIZE_UNSPECIFIED) {
    final int desiredWidth=Math.max(minSize,measuredSize);
    return resolveSizeAndState(desiredWidth,measureSpec,0);
  }
 else {
    return measuredSize;
  }
}

@Override public void onSongUpdate(ProviderIdentifier provider,final Song s) throws RemoteException {
  if (s == null) {
    Log.w(TAG,"Provider " + provider.mName + " sent in a null songUpdate");
    return;
  }
  try {
    Song cached=mCache.getSong(s.getRef());
    boolean wasLoaded=false;
    boolean changed=false;
    if (cached == null) {
      mCache.putSong(provider,s);
      changed=true;
      cached=s;
    }
 else {
      wasLoaded=cached.isLoaded();
      if (s.isLoaded() && !cached.isIdentical(s)) {
        cached.setAlbum(s.getAlbum());
        cached.setArtist(s.getArtist());
        cached.setSourceLogo(s.getLogo());
        cached.setDuration(s.getDuration());
        cached.setTitle(s.getTitle());
        cached.setYear(s.getYear());
        cached.setOfflineStatus(s.getOfflineStatus());
        cached.setAvailable(s.isAvailable());
        cached.setIsLoaded(s.isLoaded());
        changed=true;
      }
    }
    if (!wasLoaded && cached.isLoaded()) {
      Artist artist=mCache.getArtist(s.getArtist());
      if (artist == null && s.getArtist() != null) {
        artist=retrieveArtist(s.getArtist(),provider);
      }
      if (artist != null) {
        Album album=mCache.getAlbum(s.getAlbum());
        if (album == null && s.getAlbum() != null) {
          album=retrieveAlbum(s.getAlbum(),provider);
        }
        if (album != null) {
          artist.addAlbum(album.getRef());
        }
      }
    }
    if (changed) {
      postSongForUpdate(cached);
    }
  }
 catch (  Exception e) {
    Log.e(TAG,"Exception while updating song data",e);
  }
}

public static boolean deleteDirectoryAndContents(File rootDirectory){
  if ((rootDirectory == null) || !rootDirectory.isDirectory()) {
    return false;
  }
  try {
    String[] directoryContents=rootDirectory.list();
    for (int i=0; i < directoryContents.length; i++) {
      boolean success=deleteDirectoryAndContents(new File(rootDirectory,directoryContents[i]));
      if (!success) {
        return false;
      }
    }
    return rootDirectory.delete();
  }
 catch (  Exception e) {
    logger.debug(e.toString() + System.lineSeparator() + StackTrace.getStringFromStackTrace(e));
    return false;
  }
}

public static void nanosleep(long nanos) throws InterruptedException {
  if (Thread.interrupted())   throw new InterruptedException();
  if (nanos <= 0) {
    return;
  }
  if (nanos >= 1000000) {
    Thread.sleep(nanos / 1000000,(int)(nanos % 1000000));
  }
 else {
    if (pureMode) {
      Thread.yield();
    }
 else {
      _nanosleep((int)nanos);
    }
  }
}

@Override public boolean connectionAllowed(EventSetDescriptor esd){
  return connectionAllowed(esd.getName());
}

int pureLength(){
  return length - delimiter.length();
}

protected void drawArrow(Graphics g,int x1,int y1,int x2,int y2){
  if (x1 == x2) {
    if (y1 < y2) {
      g.drawLine(x2,y2,x2 + 4,y2 - 8);
      g.drawLine(x2,y2,x2 - 4,y2 - 8);
    }
 else {
      g.drawLine(x2,y2,x2 + 4,y2 + 8);
      g.drawLine(x2,y2,x2 - 4,y2 + 8);
    }
  }
 else {
    double hyp=0, base=0, perp=0, theta, beta;
    int x3=0, y3=0;
    if (x2 < x1) {
      base=x1 - x2;
      hyp=Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
      theta=Math.acos(base / hyp);
    }
 else {
      base=x1 - x2;
      hyp=Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
      theta=Math.acos(base / hyp);
    }
    beta=30 * Math.PI / 180;
    hyp=8;
    base=Math.cos(theta - beta) * hyp;
    perp=Math.sin(theta - beta) * hyp;
    x3=(int)(x2 + base);
    if (y1 < y2) {
      y3=(int)(y2 - perp);
    }
 else {
      y3=(int)(y2 + perp);
    }
    g.drawLine(x2,y2,x3,y3);
    base=Math.cos(theta + beta) * hyp;
    perp=Math.sin(theta + beta) * hyp;
    x3=(int)(x2 + base);
    if (y1 < y2) {
      y3=(int)(y2 - perp);
    }
 else {
      y3=(int)(y2 + perp);
    }
    g.drawLine(x2,y2,x3,y3);
  }
}

private void addElements(int value,int numberOfElements){
  if (m_firstFree + numberOfElements < m_blocksize)   for (int i=0; i < numberOfElements; i++) {
    m_map0[m_firstFree++]=value;
  }
 else {
    int index=m_firstFree >>> m_SHIFT;
    int offset=m_firstFree & m_MASK;
    m_firstFree+=numberOfElements;
    while (numberOfElements > 0) {
      if (index >= m_map.length) {
        int newsize=index + m_numblocks;
        int[][] newMap=new int[newsize][];
        System.arraycopy(m_map,0,newMap,0,m_map.length);
        m_map=newMap;
      }
      int[] block=m_map[index];
      if (null == block)       block=m_map[index]=new int[m_blocksize];
      int copied=(m_blocksize - offset < numberOfElements) ? m_blocksize - offset : numberOfElements;
      numberOfElements-=copied;
      while (copied-- > 0)       block[offset++]=value;
      ++index;
      offset=0;
    }
  }
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public static StringBuilder formatTo(StringBuilder buf,double[] d,String sep){
  if (d == null) {
    return buf.append("null");
  }
  if (d.length == 0) {
    return buf;
  }
  buf.append(d[0]);
  for (int i=1; i < d.length; i++) {
    buf.append(sep);
    buf.append(d[i]);
  }
  return buf;
}

@SuppressWarnings("unchecked") private static void mergeSort(Object[] in,Object[] out,int start,int end,Comparator c){
  int len=end - start;
  if (len <= SIMPLE_LENGTH) {
    for (int i=start + 1; i < end; i++) {
      Object current=out[i];
      Object prev=out[i - 1];
      if (c.compare(prev,current) > 0) {
        int j=i;
        do {
          out[j--]=prev;
        }
 while (j > start && (c.compare(prev=out[j - 1],current) > 0));
        out[j]=current;
      }
    }
    return;
  }
  int med=(end + start) >>> 1;
  mergeSort(out,in,start,med,c);
  mergeSort(out,in,med,end,c);
  if (c.compare(in[med - 1],in[med]) <= 0) {
    System.arraycopy(in,start,out,start,len);
    return;
  }
  int r=med, i=start;
  do {
    Object fromVal=in[start];
    Object rVal=in[r];
    if (c.compare(fromVal,rVal) <= 0) {
      int l_1=find(in,rVal,-1,start + 1,med - 1,c);
      int toCopy=l_1 - start + 1;
      System.arraycopy(in,start,out,i,toCopy);
      i+=toCopy;
      out[i++]=rVal;
      r++;
      start=l_1 + 1;
    }
 else {
      int r_1=find(in,fromVal,0,r + 1,end - 1,c);
      int toCopy=r_1 - r + 1;
      System.arraycopy(in,r,out,i,toCopy);
      i+=toCopy;
      out[i++]=fromVal;
      start++;
      r=r_1 + 1;
    }
  }
 while ((end - r) > 0 && (med - start) > 0);
  if ((end - r) <= 0) {
    System.arraycopy(in,start,out,i,med - start);
  }
 else {
    System.arraycopy(in,r,out,i,end - r);
  }
}

private View fillFromLeft(int nextLeft){
  mFirstPosition=Math.min(mFirstPosition,mSelectedPosition);
  mFirstPosition=Math.min(mFirstPosition,mItemCount - 1);
  if (mFirstPosition < 0) {
    mFirstPosition=0;
  }
  return fillRight(mFirstPosition,nextLeft);
}

public TomcatSlf4jLogbackFactoryAccessor(ClassLoader cl) throws ClassNotFoundException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
  Class clazz=cl.loadClass("org.apache.juli.logging.org.slf4j.impl.StaticLoggerBinder");
  Method getSingleton=MethodUtils.getAccessibleMethod(clazz,"getSingleton",new Class[0]);
  Object singleton=getSingleton.invoke(null);
  Method getLoggerFactory=MethodUtils.getAccessibleMethod(clazz,"getLoggerFactory",new Class[0]);
  Object loggerFactory=getLoggerFactory.invoke(singleton);
  Class loggerFactoryClass=cl.loadClass("org.apache.juli.logging.ch.qos.logback.classic.LoggerContext");
  if (!loggerFactoryClass.isInstance(loggerFactory)) {
    throw new RuntimeException("The singleton SLF4J binding was not Logback");
  }
  setTarget(loggerFactory);
}

public QuarterDateFormat(TimeZone zone,String[] quarterSymbols,boolean quarterFirst){
  ParamChecks.nullNotPermitted(zone,"zone");
  this.calendar=new GregorianCalendar(zone);
  this.quarters=quarterSymbols;
  this.quarterFirst=quarterFirst;
  this.numberFormat=NumberFormat.getNumberInstance();
}

public long restart(){
  long start=_startTimeNanos;
  _startTimeNanos=System.nanoTime();
  return _startTimeNanos - start;
}

private static byte[] stringToByteArray(String str){
  byte[] result=new byte[str.length() + 1];
  for (int i=0; i < str.length(); i++) {
    result[i]=(byte)str.charAt(i);
  }
  result[str.length()]=0;
  return result;
}

@Override public void actionPerformed(ActionEvent e){
  Object o;
  o=e.getSource();
  if (o == menuFileOpen) {
    loadFile();
  }
 else   if (o == menuFileSave) {
    saveFile();
  }
 else   if (o == menuFileSaveAs) {
    saveFileAs();
  }
 else   if (o == menuFileClose) {
    closeFile();
  }
 else   if (o == menuFileCloseAll) {
    closeAllFiles();
  }
 else   if (o == menuFileProperties) {
    showProperties();
  }
 else   if (o == menuFileExit) {
    close();
  }
 else   if (o == menuEditUndo) {
    undo();
  }
 else   if (o == menuEditCopy) {
    copyContent();
  }
 else   if (o == menuEditSearch) {
    search();
  }
 else   if (o == menuEditClearSearch) {
    clearSearch();
  }
 else   if (o == menuEditDeleteAttribute) {
    deleteAttribute(false);
  }
 else   if (o == menuEditDeleteAttributes) {
    deleteAttribute(true);
  }
 else   if (o == menuEditRenameAttribute) {
    renameAttribute();
  }
 else   if (o == menuEditAttributeAsClass) {
    attributeAsClass();
  }
 else   if (o == menuEditDeleteInstance) {
    deleteInstance(false);
  }
 else   if (o == menuEditDeleteInstances) {
    deleteInstance(true);
  }
 else   if (o == menuEditSortInstances) {
    sortInstances();
  }
 else   if (o == menuViewAttributes) {
    showAttributes();
  }
 else   if (o == menuViewValues) {
    showValues();
  }
 else   if (o == menuViewOptimalColWidths) {
    setOptimalColWidths();
  }
  updateMenu();
}

public static boolean hasJoda(){
  try {
    Class.forName("org.joda.time.LocalDate");
    return true;
  }
 catch (  ClassNotFoundException e) {
    return false;
  }
}

public RemoteServiceDescriptor(String baseUrl,HttpJsonRequestFactory requestFactory) throws IllegalArgumentException {
  this.baseUrl=baseUrl;
  try {
    baseUrlURL=new URL(baseUrl);
    final String protocol=baseUrlURL.getProtocol();
    if (!(protocol.equals("http") || protocol.equals("https"))) {
      throw new IllegalArgumentException(String.format("Invalid URL: %s",baseUrl));
    }
  }
 catch (  MalformedURLException e) {
    throw new IllegalArgumentException(String.format("Invalid URL: %s",baseUrl));
  }
  this.requestFactory=requestFactory;
}

private int findActivityElement(int activityIndex){
  for (int elementIndex=0; elementIndex < mActivityList.size(); elementIndex++) {
    if (mActivityList.get(elementIndex).mActivityIndex == activityIndex) {
      return elementIndex;
    }
  }
  return -1;
}

void addFillComponents(Container panel,int[] cols,int[] rows){
  Dimension filler=new Dimension(10,10);
  boolean filled_cell_11=false;
  CellConstraints cc=new CellConstraints();
  if (cols.length > 0 && rows.length > 0) {
    if (cols[0] == 1 && rows[0] == 1) {
      panel.add(Box.createRigidArea(filler),cc.xy(1,1));
      filled_cell_11=true;
    }
  }
  for (int index=0; index < cols.length; index++) {
    if (cols[index] == 1 && filled_cell_11) {
      continue;
    }
    panel.add(Box.createRigidArea(filler),cc.xy(cols[index],1));
  }
  for (int index=0; index < rows.length; index++) {
    if (rows[index] == 1 && filled_cell_11) {
      continue;
    }
    panel.add(Box.createRigidArea(filler),cc.xy(1,rows[index]));
  }
}

public void mapVolumeToSDC(String volumeId,String sdcId) throws Exception {
  log.info("mapping to sdc");
  String uri=ScaleIOConstants.getMapVolumeToSDCURI(volumeId);
  ScaleIOMapVolumeToSDC mapParm=new ScaleIOMapVolumeToSDC();
  mapParm.setSdcId(sdcId);
  mapParm.setAllowMultipleMappings("TRUE");
  post(URI.create(uri),getJsonForEntity(mapParm));
}

public void addObscuredRecipient(String playerName){
  obscuredRecipients.addElement(playerName);
}

private static void replaceCollapsedByEclipseSourceRoots(Element libElement,Library.ModifiableModel modifiableModel){
  String[] srcUrlsFromClasspath=modifiableModel.getUrls(OrderRootType.SOURCES);
  LOG.assertTrue(srcUrlsFromClasspath.length <= 1);
  final String eclipseUrl=srcUrlsFromClasspath.length > 0 ? srcUrlsFromClasspath[0] : null;
  for (  Element r : libElement.getChildren(SRCROOT_ATTR)) {
    final String url=r.getAttributeValue("url");
    final String bindAttr=r.getAttributeValue(SRCROOT_BIND_ATTR);
    boolean notBind=bindAttr != null && !Boolean.parseBoolean(bindAttr);
    if (notBind) {
      modifiableModel.addRoot(url,OrderRootType.SOURCES);
    }
 else     if (eclipseUrl != null && areUrlsPointTheSame(url,eclipseUrl) && !Comparing.strEqual(url,eclipseUrl)) {
      modifiableModel.addRoot(url,OrderRootType.SOURCES);
      if (srcUrlsFromClasspath != null && srcUrlsFromClasspath.length == 1) {
        modifiableModel.removeRoot(eclipseUrl,OrderRootType.SOURCES);
        srcUrlsFromClasspath=null;
      }
    }
  }
}

public static byte[] hexToBytes(String hexString){
  byte[] result=new byte[hexString.length() / 2];
  for (int i=0; i < result.length; ++i) {
    int offset=i * 2;
    result[i]=(byte)Integer.parseInt(hexString.substring(offset,offset + 2),16);
  }
  return result;
}

public void testSetBitNegativeOutside1(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=-1;
  int number=150;
  byte rBytes[]={-2,127,-57,-101,1,75,-90,-46,-92,-4,14,-36,-26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.setBit(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,result.signum());
}

private static String replaceLast(String str,char from,char to){
  int index=str.lastIndexOf(from);
  if (index == -1)   return str;
  return str.substring(0,index) + to + str.substring(index + 1);
}

public static String valueOf(long value){
  return Long.toString(value);
}

private static void cleanStaleInitiatorReferences(ExportGroup exportGroup,DbClient dbClient){
  StringSet exportGroupInitiators=exportGroup.getInitiators();
  if (!CollectionUtils.isEmpty(exportGroupInitiators) && !CollectionUtils.isEmpty(exportGroup.getExportMasks())) {
    Set<String> allMaskInitiators=new HashSet<>();
    for (    String mask : exportGroup.getExportMasks()) {
      ExportMask maskObj=dbClient.queryObject(ExportMask.class,URI.create(mask));
      if (maskObj != null && !CollectionUtils.isEmpty(maskObj.getInitiators())) {
        allMaskInitiators.addAll(maskObj.getInitiators());
      }
    }
    Set<String> staleInitiators=Sets.difference(exportGroupInitiators,allMaskInitiators);
    if (!CollectionUtils.isEmpty(staleInitiators)) {
      Collection<URI> staleInitiatorURIS=Collections2.transform(staleInitiators,CommonTransformerFunctions.FCTN_STRING_TO_URI);
      exportGroup.removeInitiators(new ArrayList<>(staleInitiatorURIS));
      _log.info("Stale initiators {} will be removed from Export Group {}",staleInitiatorURIS,exportGroup.getId());
    }
  }
}

public static <T>T findResourceByName(Iterable<HasMetadata> entities,Class<T> clazz,String name){
  if (entities != null) {
    for (    HasMetadata entity : entities) {
      if (clazz.isInstance(entity) && Objects.equals(name,getName(entity))) {
        return clazz.cast(entity);
      }
    }
  }
  return null;
}

public static Map ordinalMap(Iterator tuples,String field,Comparator cmp){
  Object[] o=ordinalArray(tuples,field,cmp);
  HashMap map=new HashMap();
  for (int i=0; i < o.length; ++i)   map.put(o[i],new Integer(i));
  return map;
}

void addLineMonitor(LineMonitor lm){
  if (Printer.trace)   Printer.trace("> EventDispatcher.addLineMonitor(" + lm + ")");
synchronized (lineMonitors) {
    if (lineMonitors.indexOf(lm) >= 0) {
      if (Printer.trace)       Printer.trace("< EventDispatcher.addLineMonitor finished -- this monitor already exists!");
      return;
    }
    if (Printer.debug)     Printer.debug("EventDispatcher: adding line monitor " + lm);
    lineMonitors.add(lm);
  }
synchronized (this) {
    notifyAll();
  }
  if (Printer.debug)   Printer.debug("< EventDispatcher.addLineMonitor finished -- now (" + lineMonitors.size() + " monitors)");
}

public static String toChar(byte b){
  if (b >= 0x20) {
    return Character.toString((char)b);
  }
 else {
    return String.format("%02x",b);
  }
}

public void addNodes(NodeIterator iterator){
  if (!m_mutable)   throw new RuntimeException(XSLMessages.createXPATHMessage(XPATHErrorResources.ER_NODESET_NOT_MUTABLE,null));
  if (null != iterator) {
    Node obj;
    while (null != (obj=iterator.nextNode())) {
      addElement(obj);
    }
  }
}

public static double ptSegDist(double x1,double y1,double x2,double y2,double px,double py){
  return Math.sqrt(ptSegDistSq(x1,y1,x2,y2,px,py));
}

MethodType asSpreaderType(Class<?> arrayType,int arrayLength){
  assert (parameterCount() >= arrayLength);
  int spreadPos=ptypes.length - arrayLength;
  if (arrayLength == 0)   return this;
  if (arrayType == Object[].class) {
    if (isGeneric())     return this;
    if (spreadPos == 0) {
      MethodType res=genericMethodType(arrayLength);
      if (rtype != Object.class) {
        res=res.changeReturnType(rtype);
      }
      return res;
    }
  }
  Class<?> elemType=arrayType.getComponentType();
  assert (elemType != null);
  for (int i=spreadPos; i < ptypes.length; i++) {
    if (ptypes[i] != elemType) {
      Class<?>[] fixedPtypes=ptypes.clone();
      Arrays.fill(fixedPtypes,i,ptypes.length,elemType);
      return methodType(rtype,fixedPtypes);
    }
  }
  return this;
}

public void put(E e) throws InterruptedException {
  if (e == null)   throw new NullPointerException();
  int c=-1;
  Node<E> node=new Node<E>(e);
  final ReentrantLock putLock=this.putLock;
  final AtomicInteger count=this.count;
  putLock.lockInterruptibly();
  try {
    while (count.get() == capacity) {
      notFull.await();
    }
    enqueue(node);
    c=count.getAndIncrement();
    if (c + 1 < capacity)     notFull.signal();
  }
  finally {
    putLock.unlock();
  }
  if (c == 0)   signalNotEmpty();
}

public static mxICell resolve(mxICell root,String path){
  mxICell parent=root;
  String[] tokens=path.split(Pattern.quote(PATH_SEPARATOR));
  for (int i=0; i < tokens.length; i++) {
    parent=parent.getChildAt(Integer.parseInt(tokens[i]));
  }
  return parent;
}

private static int nextNonQuoteIndex(String trimmed,int i,boolean forward){
  while (trimmed.charAt(i) == '\u0022' || trimmed.charAt(i) == '\'' || trimmed.charAt(i) == '\u0060' || trimmed.charAt(i) == '\u00B4' || trimmed.charAt(i) == '\u2018' || trimmed.charAt(i) == '\u2019' || trimmed.charAt(i) == '\u201C' || trimmed.charAt(i) == '\u201D') {
    if (forward)     i++;
 else     i--;
  }
  return i;
}

public static void reset(){
  traceState.remove();
  suspendedState.clear();
}

private String inclusiveSlice(){
  if (mark >= pos) {
    return "";
  }
  return sign.substring(mark,pos + 1);
}

public byte[] toBytecode() throws IOException, CannotCompileException {
  ByteArrayOutputStream barray=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(barray);
  try {
    toBytecode(out);
  }
  finally {
    out.close();
  }
  return barray.toByteArray();
}

public static void serializePath(final ObjectOutput os,final PathIterator pi) throws IOException {
  os.writeObject(pi.getWindingRule());
  final List<java.io.Serializable> list=new ArrayList<java.io.Serializable>();
  while (!pi.isDone()) {
    final float[] array=new float[6];
    final int type=pi.currentSegment(array);
    list.add(type);
    list.add(array);
    pi.next();
  }
  os.writeObject(list);
}

public double calculateLocalSwapTotalCapacity(int hostcount,int hostlocalswapsize){
  double d=(double)(hostcount * hostlocalswapsize) / 1024;
  d*=-1;
  d=(double)Math.round(d * 100) / 100;
  return d;
}

boolean findMarker() throws IOException {
  if (markerIndex == marker.length) {
    return true;
  }
  if (log.isDebugEnabled())   log.debug("Looking for token, " + BytesUtil.toHexString(marker) + ", reads: "+ nreads);
  while (markerIndex < marker.length) {
    final int remtok=marker.length - markerIndex;
    markerBB.limit(remtok);
    markerBB.position(0);
    final int rdLen=client.read(markerBB);
    if (rdLen == -1) {
      throw new IOException("EOF: nreads=" + nreads + ", bytesRead="+ bytesRead);
    }
    nreads++;
    bytesRead+=rdLen;
    for (int i=0; i < rdLen; i++) {
      if (markerBuffer[i] != marker[markerIndex]) {
        if (foundMarkerInInitialPosition) {
          foundMarkerInInitialPosition=false;
          log.error("Marker not found: skipping");
        }
        markerIndex=0;
        if (markerBuffer[i] == marker[markerIndex]) {
          markerIndex++;
        }
      }
 else {
        markerIndex++;
        nmarkerbytematches++;
      }
    }
    if (nreads % 10000 == 0) {
      if (log.isDebugEnabled())       log.debug("...still looking: reads=" + nreads + ", bytesRead="+ bytesRead);
    }
  }
  if (markerIndex != marker.length) {
    if (log.isDebugEnabled())     log.debug("Not found token yet!");
    return false;
  }
 else {
    if (log.isDebugEnabled())     log.debug("Found token after " + nreads + " token reads and "+ nmarkerbytematches+ " byte matches");
    return true;
  }
}

public void parseLoggcFile(InputStream loggcFileStream,DefaultMutableTreeNode root){
  BufferedReader bis=new BufferedReader(new InputStreamReader(loggcFileStream));
  Vector histograms=new Vector();
  try {
    while (bis.ready()) {
      bis.mark(getMarkSize());
      String nextLine=bis.readLine();
      if (nextLine.startsWith("num   #instances    #bytes  class name")) {
        bis.reset();
        histograms.add(parseNextClassHistogram(bis));
      }
    }
    for (int i=histograms.size() - 1; i >= 0; i--) {
      DefaultMutableTreeNode dump=getNextDumpForHistogram(root);
      if (dump != null) {
        addHistogramToDump(dump,(HistogramTableModel)histograms.get(i));
      }
    }
  }
 catch (  IOException ex) {
    ex.printStackTrace();
  }
}

private void resolveTimeMacro(StringBuffer result){
  Calendar calendar=new GregorianCalendar();
  result.append(calendar.get(Calendar.YEAR) + "_");
  String month=calendar.get(Calendar.MONTH) + 1 + "";
  if (month.length() < 2) {
    month="0" + month;
  }
  result.append(month + "_");
  String day=calendar.get(Calendar.DAY_OF_MONTH) + "";
  if (day.length() < 2) {
    day="0" + day;
  }
  result.append(day + "-");
  int amPm=calendar.get(Calendar.AM_PM);
  String amPmString=amPm == Calendar.AM ? "AM" : "PM";
  result.append(amPmString + "_");
  String hour=calendar.get(Calendar.HOUR) + "";
  if (hour.length() < 2) {
    hour="0" + hour;
  }
  result.append(hour + "_");
  String minute=calendar.get(Calendar.MINUTE) + "";
  if (minute.length() < 2) {
    minute="0" + minute;
  }
  result.append(minute + "_");
  String second=calendar.get(Calendar.SECOND) + "";
  if (second.length() < 2) {
    second="0" + second;
  }
  result.append(second);
}

public boolean isEmpty(){
synchronized (lock) {
    return annotationsDrawOrder.isEmpty();
  }
}

default B append8bit(@NotNull CharSequence cs,int start,int end) throws IllegalArgumentException, BufferOverflowException, BufferUnderflowException, IndexOutOfBoundsException {
  if (cs instanceof BytesStore) {
    return write((BytesStore)cs,(long)start,end);
  }
  for (int i=start; i < end; i++) {
    char c=cs.charAt(i);
    if (c > 255)     c='?';
    writeByte((byte)c);
  }
  return (B)this;
}

static void zero(float[][] array){
  for (  float[] aFloat : array) {
    Arrays.fill(aFloat,-1);
  }
}

@Override public boolean contains(Point2D.Double p){
  RoundRectangle2D.Double r=(RoundRectangle2D.Double)roundrect.clone();
  double grow=AttributeKeys.getPerpendicularHitGrowth(this);
  r.x-=grow;
  r.y-=grow;
  r.width+=grow * 2;
  r.height+=grow * 2;
  r.arcwidth+=grow * 2;
  r.archeight+=grow * 2;
  return r.contains(p);
}

private void downloadUpdateProp(final boolean initialDownload){
  if (bootProp != null) {
    serverFolder=bootProp.getProperty("server.folder-1.20",ClientGameConfiguration.get("UPDATE_SERVER_FOLDER")) + "/";
    String updatePropertiesFile=bootProp.getProperty("server.update-prop-1.20",serverFolder + "update-1.20.properties");
    final HttpClient httpClient=new HttpClient(updatePropertiesFile,initialDownload);
    updateProp=httpClient.fetchProperties();
    if (updateProp != null && updateProp.containsKey("init.version")) {
      return;
    }
  }
  String updatePropertiesFile=ClientGameConfiguration.get("UPDATE_SERVER_FOLDER") + "/update-1.20.properties";
  HttpClient httpClient=new HttpClient(updatePropertiesFile,initialDownload);
  updateProp=httpClient.fetchProperties();
  if (updateProp != null && updateProp.containsKey("init.version")) {
    return;
  }
  updatePropertiesFile=ClientGameConfiguration.get("UPDATE_SERVER_FOLDER_FALLBACK") + "/update-1.20.properties";
  httpClient=new HttpClient(updatePropertiesFile,initialDownload);
  updateProp=httpClient.fetchProperties();
}

private void mergeMethodHandleStore(final int index,final MethodHandle methodHandle){
  localVariables.merge(index,new MethodHandle(methodHandle),null);
}

public final int read(byte ba[],int off,int len) throws IOException {
  return is.read(ba,off,len);
}

public ContextSuggestField(String name,String value,int weight,CharSequence... contexts){
  super(name,value,weight);
  validate(value);
  this.contexts=new HashSet<>((contexts != null) ? contexts.length : 0);
  if (contexts != null) {
    Collections.addAll(this.contexts,contexts);
  }
}

@Override protected byte[] decrypt(byte type,byte[] fragment,int offset,int len){
  byte[] data=decCipher.update(fragment,offset,len);
  byte[] content;
  if (block_size != 0) {
    int padding_length=data[data.length - 1] & 0xFF;
    for (int i=0; i < padding_length; i++) {
      if ((data[data.length - 2 - i] & 0xFF) != padding_length) {
        throw new AlertException(AlertProtocol.DECRYPTION_FAILED,new SSLProtocolException("Received message has bad padding"));
      }
    }
    content=new byte[data.length - hash_size - padding_length- 1];
  }
 else {
    content=new byte[data.length - hash_size];
  }
  byte[] mac_value;
  mac_material_part[0]=type;
  mac_material_part[1]=(byte)((0x00FF00 & content.length) >> 8);
  mac_material_part[2]=(byte)(0x0000FF & content.length);
  messageDigest.update(mac_read_secret);
  messageDigest.update(pad_1);
  messageDigest.update(read_seq_num);
  messageDigest.update(mac_material_part);
  messageDigest.update(data,0,content.length);
  mac_value=messageDigest.digest();
  messageDigest.update(mac_read_secret);
  messageDigest.update(pad_2);
  messageDigest.update(mac_value);
  mac_value=messageDigest.digest();
  if (logger != null) {
    logger.println("Decrypted:");
    logger.print(data);
    logger.println("Expected mac value:");
    logger.print(mac_value);
  }
  for (int i=0; i < hash_size; i++) {
    if (mac_value[i] != data[i + content.length]) {
      throw new AlertException(AlertProtocol.BAD_RECORD_MAC,new SSLProtocolException("Bad record MAC"));
    }
  }
  System.arraycopy(data,0,content,0,content.length);
  incSequenceNumber(read_seq_num);
  return content;
}

public Activity put(String key,Activity activity){
  return (Activity)m_map.put(key,activity);
}

public boolean isAbstract(){
  return Modifier.isAbstract(getAccessFlags());
}

private boolean journalRebuildRequired(){
  final int redundantOpCompactThreshold=2000;
  return redundantOpCount >= redundantOpCompactThreshold && redundantOpCount >= lruEntries.size();
}

public void clearCurrentRequestTimedOut(){
  if (currentRequestTimedOut != null)   currentRequestTimedOut.clear();
  currentRequestTimedOut=null;
}

protected void showPage(int page){
  boolean isEmpty=page == PAGE_EMPTY;
  Control control=isEmpty ? (Control)fEmptyPageLabel : getControl();
  if (isEmpty) {
    setContentDescription("");
    clearViewer();
  }
  fPagebook.showPage(control);
}

@Override public boolean equals(Object o){
  if (this == o)   return true;
  if (o == null || getClass() != o.getClass())   return false;
  Insets insets=(Insets)o;
  if (bottom != insets.bottom)   return false;
  if (left != insets.left)   return false;
  if (right != insets.right)   return false;
  if (top != insets.top)   return false;
  return true;
}

public void removeDocuments(List<Query> queries){
  IndexWriter writer=getWriter();
  for (  Query query : queries) {
    try {
      writer.deleteDocuments(query);
    }
 catch (    Exception e) {
      e.printStackTrace();
      closeWriter(writer);
      throw new RuntimeException(e);
    }
  }
  closeWriter(writer);
}

protected String toString(Object parameter){
  if (parameter == null) {
    return NULL_STR;
  }
  try {
    String result=Misc.getAsString(parameter);
    if (result.length() > DEFAULT_ARG_STRING_MAX_LENGTH) {
      result=result.substring(0,DEFAULT_ARG_STRING_MAX_LENGTH) + DEFAULT_MAX_STRING_ENDING;
    }
    return result;
  }
 catch (  Throwable e) {
    return UNKNOWN;
  }
}

public static SecretKey generateSecretKey(SecretKeyType secretKeyType,int keySize) throws CryptoException {
  try {
    KeyGenerator keyGenerator=KeyGenerator.getInstance(secretKeyType.jce(),BOUNCY_CASTLE.jce());
    keyGenerator.init(keySize,SecureRandom.getInstance("SHA1PRNG"));
    return keyGenerator.generateKey();
  }
 catch (  GeneralSecurityException ex) {
    throw new CryptoException(MessageFormat.format(res.getString("NoGenerateSecretKey.exception.message"),secretKeyType),ex);
  }
}

public CML deleteCML(ISicresAbstractDocumentVO document){
  String id=document.getId();
  Reference reference=new Reference(STORE,id,null);
  Predicate predicate=new Predicate(new Reference[]{reference},null,null);
  CMLDelete delete=new CMLDelete(predicate);
  CML cml=new CML();
  cml.setDelete(new CMLDelete[]{delete});
  return cml;
}

private synchronized void eval() throws MetadataEvaluationException {
  if (cacheStrategy == CacheStrategy.NEVER_CACHE || internalValue.get() == null) {
    try {
      Object value=lazyValue.call();
      if (value == null) {
        value=ACTUALLY_NULL;
      }
      internalValue=new SoftReference<Object>(value);
    }
 catch (    Exception e) {
      throw new MetadataEvaluationException(e);
    }
  }
}

public void addEdgeToBounds(S2Point from,S2Point to){
  if (!boundSet) {
    boundSet=true;
    xmin=xmax=from.x;
    ymin=ymax=from.y;
    zmin=zmax=from.z;
  }
  xmin=Math.min(xmin,Math.min(to.x,from.x));
  ymin=Math.min(ymin,Math.min(to.y,from.y));
  zmin=Math.min(zmin,Math.min(to.z,from.z));
  xmax=Math.max(xmax,Math.max(to.x,from.x));
  ymax=Math.max(ymax,Math.max(to.y,from.y));
  zmax=Math.max(zmax,Math.max(to.z,from.z));
  double approxArcLen=Math.abs(from.x - to.x) + Math.abs(from.y - to.y) + Math.abs(from.z - to.z);
  if (approxArcLen < 0.025) {
    maxDeformation=Math.max(maxDeformation,approxArcLen * 0.0025);
  }
 else   if (approxArcLen < 1.0) {
    maxDeformation=Math.max(maxDeformation,approxArcLen * 0.11);
  }
 else {
    maxDeformation=approxArcLen * 0.5;
  }
}

@Override public void write(byte[] buffer,int offset,int length) throws IOException {
  while ((mByteToSkip > 0 || mByteToCopy > 0 || mState != STATE_JPEG_DATA) && length > 0) {
    if (mByteToSkip > 0) {
      int byteToProcess=length > mByteToSkip ? mByteToSkip : length;
      length-=byteToProcess;
      mByteToSkip-=byteToProcess;
      offset+=byteToProcess;
    }
    if (mByteToCopy > 0) {
      int byteToProcess=length > mByteToCopy ? mByteToCopy : length;
      out.write(buffer,offset,byteToProcess);
      length-=byteToProcess;
      mByteToCopy-=byteToProcess;
      offset+=byteToProcess;
    }
    if (length == 0) {
      return;
    }
switch (mState) {
case STATE_SOI:
      int byteRead=requestByteToBuffer(2,buffer,offset,length);
    offset+=byteRead;
  length-=byteRead;
if (mBuffer.position() < 2) {
  return;
}
mBuffer.rewind();
if (mBuffer.getShort() != JpegHeader.SOI) {
throw new IOException("Not a valid jpeg image, cannot write exif");
}
out.write(mBuffer.array(),0,2);
mState=STATE_FRAME_HEADER;
mBuffer.rewind();
writeExifData();
break;
case STATE_FRAME_HEADER:
byteRead=requestByteToBuffer(4,buffer,offset,length);
offset+=byteRead;
length-=byteRead;
if (mBuffer.position() == 2) {
short tag=mBuffer.getShort();
if (tag == JpegHeader.EOI) {
out.write(mBuffer.array(),0,2);
mBuffer.rewind();
}
}
if (mBuffer.position() < 4) {
return;
}
mBuffer.rewind();
short marker=mBuffer.getShort();
if (marker == JpegHeader.APP1) {
mByteToSkip=(mBuffer.getShort() & 0x0000ffff) - 2;
mState=STATE_JPEG_DATA;
}
 else if (!JpegHeader.isSofMarker(marker)) {
out.write(mBuffer.array(),0,4);
mByteToCopy=(mBuffer.getShort() & 0x0000ffff) - 2;
}
 else {
out.write(mBuffer.array(),0,4);
mState=STATE_JPEG_DATA;
}
mBuffer.rewind();
}
}
if (length > 0) {
out.write(buffer,offset,length);
}
}

public static String hash(String string){
  try {
    MessageDigest sha1=MessageDigest.getInstance("SHA-1");
    sha1.update(string.getBytes("UTF-8"));
    return Base64.encode(sha1.digest());
  }
 catch (  Exception ex) {
    Debug debug=Debug.getInstance("amSDK");
    if (debug.warningEnabled()) {
      debug.warning("Hash.hash:",ex);
    }
    return null;
  }
}

static List<String> readExtensions(final SubstringReader reader) throws DecodeException {
  int length=0;
  List<String> values;
  reader.skipWhitespaces();
  reader.mark();
  try {
    char c=reader.read();
    if (c == '\'') {
      reader.mark();
      while (reader.read() != '\'') {
        length++;
      }
      reader.reset();
      values=Collections.singletonList(reader.read(length));
      reader.read();
    }
 else     if (c == '(') {
      reader.skipWhitespaces();
      reader.mark();
      c=reader.read();
      if (c == ')') {
        values=Collections.emptyList();
      }
 else {
        values=new ArrayList<>();
        do {
          reader.reset();
          values.add(readQuotedString(reader));
          reader.skipWhitespaces();
          reader.mark();
        }
 while (reader.read() != ')');
        values=Collections.unmodifiableList(values);
      }
    }
 else {
      do {
        length++;
      }
 while (reader.read() != ' ');
      reader.reset();
      values=Collections.singletonList(reader.read(length));
    }
    return values;
  }
 catch (  final StringIndexOutOfBoundsException e) {
    throw DecodeException.error(ERR_ATTR_SYNTAX_TRUNCATED_VALUE1.get());
  }
}

private void NV21toI420SemiPlanar(byte[] nv21bytes,byte[] i420bytes,int width,int height){
  System.arraycopy(nv21bytes,0,i420bytes,0,width * height);
  for (int i=width * height; i < nv21bytes.length; i+=2) {
    i420bytes[i]=nv21bytes[i + 1];
    i420bytes[i + 1]=nv21bytes[i];
  }
}

public int read(ByteBuffer dst) throws IOException {
  if (!dst.hasRemaining())   return 0;
  if (!isHandShakeComplete()) {
    if (isBlocking()) {
      while (!isHandShakeComplete()) {
        processHandshake();
      }
    }
 else {
      processHandshake();
      if (!isHandShakeComplete()) {
        return 0;
      }
    }
  }
  int purged=readRemaining(dst);
  if (purged != 0)   return purged;
  assert (inData.position() == 0);
  inData.clear();
  if (!inCrypt.hasRemaining())   inCrypt.clear();
 else   inCrypt.compact();
  if (isBlocking() || readEngineResult.getStatus() == Status.BUFFER_UNDERFLOW)   if (socketChannel.read(inCrypt) == -1) {
    return -1;
  }
  inCrypt.flip();
  unwrap();
  int transfered=transfereTo(inData,dst);
  if (transfered == 0 && isBlocking()) {
    return read(dst);
  }
  return transfered;
}

private List<FacetResult> search() throws IOException {
  DirectoryReader indexReader=DirectoryReader.open(indexDir);
  IndexSearcher searcher=new IndexSearcher(indexReader);
  SortedSetDocValuesReaderState state=new DefaultSortedSetDocValuesReaderState(indexReader);
  FacetsCollector fc=new FacetsCollector();
  FacetsCollector.search(searcher,new MatchAllDocsQuery(),10,fc);
  Facets facets=new SortedSetDocValuesFacetCounts(state,fc);
  List<FacetResult> results=new ArrayList<>();
  results.add(facets.getTopChildren(10,"Author"));
  results.add(facets.getTopChildren(10,"Publish Year"));
  indexReader.close();
  return results;
}

public Resource mapRelations(Resource object,JSONObject jsonObject,List<Resource> included) throws Exception {
  HashMap<String,String> relationshipNames=getRelationshipNames(object.getClass());
  for (  String relationship : relationshipNames.keySet()) {
    JSONObject relationJsonObject=null;
    try {
      relationJsonObject=jsonObject.getJSONObject(relationship);
    }
 catch (    JSONException e) {
      Logger.debug("Relationship named " + relationship + "not found in JSON");
      continue;
    }
    JSONObject relationDataObject=null;
    try {
      relationDataObject=relationJsonObject.getJSONObject("data");
      Resource relationObject=Factory.newObjectFromJSONObject(relationDataObject,null);
      relationObject=matchIncludedToRelation(relationObject,included);
      mDeserializer.setField(object,relationshipNames.get(relationship),relationObject);
    }
 catch (    JSONException e) {
      Logger.debug("JSON relationship does not contain data");
    }
    JSONArray relationDataArray=null;
    try {
      relationDataArray=relationJsonObject.getJSONArray("data");
      List<Resource> relationArray=Factory.newObjectFromJSONArray(relationDataArray,null);
      relationArray=matchIncludedToRelation(relationArray,included);
      mDeserializer.setField(object,relationshipNames.get(relationship),relationArray);
    }
 catch (    JSONException e) {
      Logger.debug("JSON relationship does not contain data");
    }
  }
  return object;
}

public int size(){
  return rdns.size();
}

@Override public void doInitialize(UimaContext aContext) throws ResourceInitializationException {
  DB db=mongoResource.getDB();
  collection=db.getCollection(collectionName);
  collection.createIndex(new BasicDBObject(FIELD_UNIQUE_ID,1));
  collection.createIndex(new BasicDBObject(FIELD_PUBLISHEDIDS,1));
  stopFeatures=new HashSet<String>();
  stopFeatures.add("uima.cas.AnnotationBase:sofa");
  stopFeatures.add("uk.gov.dstl.baleen.types.BaleenAnnotation:internalId");
  maxContentLength=ConfigUtils.stringToInteger(maxContentLengthString,0);
}

protected void drawHighFarOut(double aRadius,Graphics2D g2,double xx,double m){
  double side=aRadius * 2;
  g2.draw(new Line2D.Double(xx - side,m + side,xx + side,m + side));
  g2.draw(new Line2D.Double(xx - side,m + side,xx,m));
  g2.draw(new Line2D.Double(xx + side,m + side,xx,m));
}

private void findLargeItemSets() throws Exception {
  ArrayList<Object> kMinusOneSets, kSets;
  Hashtable<ItemSet,Integer> hashtable;
  int necSupport, i=0;
  necSupport=(int)(m_minSupport * m_instances.numInstances() + 0.5);
  kSets=AprioriItemSet.singletons(m_instances,m_treatZeroAsMissing);
  if (m_treatZeroAsMissing) {
    AprioriItemSet.upDateCountersTreatZeroAsMissing(kSets,m_instances);
  }
 else {
    AprioriItemSet.upDateCounters(kSets,m_instances);
  }
  kSets=AprioriItemSet.deleteItemSets(kSets,necSupport,m_instances.numInstances());
  if (kSets.size() == 0) {
    return;
  }
  do {
    m_Ls.add(kSets);
    kMinusOneSets=kSets;
    kSets=AprioriItemSet.mergeAllItemSets(kMinusOneSets,i,m_instances.numInstances());
    hashtable=AprioriItemSet.getHashtable(kMinusOneSets,kMinusOneSets.size());
    m_hashtables.add(hashtable);
    kSets=AprioriItemSet.pruneItemSets(kSets,hashtable);
    if (m_treatZeroAsMissing) {
      AprioriItemSet.upDateCountersTreatZeroAsMissing(kSets,m_instances);
    }
 else {
      AprioriItemSet.upDateCounters(kSets,m_instances);
    }
    kSets=AprioriItemSet.deleteItemSets(kSets,necSupport,m_instances.numInstances());
    i++;
  }
 while (kSets.size() > 0);
}

public boolean isInAllowed(int x,int y){
  for (  Shape r : arrivingBarriers) {
    if (r.contains(x,y)) {
      return false;
    }
  }
  return true;
}

public void removePluginInterface(String interfacename) throws SMSException, SSOException {
  SMSEntry.validateToken(token);
  validateServiceSchemaManagerImpl();
  Document schemaDoc=ssm.getDocumentCopy();
  Node schemaNode=XMLUtils.getRootNode(schemaDoc,SMSUtils.SCHEMA);
  Node pluginNode=XMLUtils.getNamedChildNode(schemaNode,SMSUtils.PLUGIN_INTERFACE,SMSUtils.NAME,interfacename);
  if (pluginNode != null) {
    schemaNode.removeChild(pluginNode);
    replaceSchema(schemaDoc);
  }
}

public IPAddressName(String name) throws IOException {
  if (name == null || name.length() == 0) {
    throw new IOException("IPAddress cannot be null or empty");
  }
  if (name.charAt(name.length() - 1) == '/') {
    throw new IOException("Invalid IPAddress: " + name);
  }
  if (name.indexOf(':') >= 0) {
    parseIPv6(name);
    isIPv4=false;
  }
 else   if (name.indexOf('.') >= 0) {
    parseIPv4(name);
    isIPv4=true;
  }
 else {
    throw new IOException("Invalid IPAddress: " + name);
  }
}

private boolean isSameFile(Path first,Path second) throws IOException {
  boolean sameFileSize=Files.size(first) == Files.size(second);
  if (!sameFileSize) {
    return false;
  }
  byte[] firstBytes=Files.readAllBytes(first);
  byte[] secondBytes=Files.readAllBytes(second);
  return Arrays.equals(firstBytes,secondBytes);
}

public static org.opcfoundation.ua.transport.security.KeyPair loadKeyPairFromProtectedStore(String storeLocation,String alias,String storePW,String privatePW) throws KeyStoreException, IOException, NoSuchAlgorithmException, CertificateException, UnrecoverableKeyException {
  KeyStore store=null;
  store=KeyStore.getInstance("JKS");
  File keystoreFile=new File(storeLocation);
  FileInputStream in=new FileInputStream(keystoreFile);
  store.load(in,storePW.toCharArray());
  in.close();
  X509Certificate cert=(X509Certificate)store.getCertificate(alias);
  RSAPrivateKey key=(RSAPrivateKey)store.getKey(alias,privatePW.toCharArray());
  return new org.opcfoundation.ua.transport.security.KeyPair(new Cert(cert),new PrivKey(key));
}

@Override public GraphQuery hasNot(final String key,final Object value){
  criteria.add(new HasNot(key,value));
  return this;
}

private void initComputeProgram(){
  IntBuffer workGroupSize=BufferUtils.createIntBuffer(3);
  glGetProgramiv(computeProgram,GL_COMPUTE_WORK_GROUP_SIZE,workGroupSize);
  workGroupSizeX=workGroupSize.get(0);
  workGroupSizeY=workGroupSize.get(1);
  int boxesResourceIndex=glGetProgramResourceIndex(computeProgram,GL_SHADER_STORAGE_BLOCK,"Boxes");
  IntBuffer props=BufferUtils.createIntBuffer(1);
  IntBuffer params=BufferUtils.createIntBuffer(1);
  props.put(0,GL_BUFFER_BINDING);
  glGetProgramResourceiv(computeProgram,GL_SHADER_STORAGE_BLOCK,boxesResourceIndex,props,null,params);
  boxesSsboBinding=params.get(0);
  int uniformsResourceIndex=glGetProgramResourceIndex(computeProgram,GL_UNIFORM_BLOCK,"Uniforms");
  glGetProgramResourceiv(computeProgram,GL_UNIFORM_BLOCK,uniformsResourceIndex,props,null,params);
  computeUboBinding=params.get(0);
  int loc=glGetUniformLocation(computeProgram,"framebufferImage");
  glGetUniformiv(computeProgram,loc,params);
  framebufferImageBinding=params.get(0);
  loc=glGetUniformLocation(computeProgram,"worldPositionImage");
  glGetUniformiv(computeProgram,loc,params);
  worldPositionImageBinding=params.get(0);
  loc=glGetUniformLocation(computeProgram,"worldNormalImage");
  glGetUniformiv(computeProgram,loc,params);
  worldNormalImageBinding=params.get(0);
}

TSResponse(byte[] tsReply) throws IOException {
  parse(tsReply);
}

public static void executeCommand(ProcessBuilder p) throws IOException {
  Process proc=p.start();
  try (BufferedReader stdInput=new BufferedReader(new InputStreamReader(proc.getInputStream()));BufferedReader stdError=new BufferedReader(new InputStreamReader(proc.getErrorStream()))){
    logger.info("Standard output of the command:\n");
    String s;
    while ((s=stdInput.readLine()) != null) {
      logger.info(s);
    }
    logger.info("Standard error of the command (if any):\n");
    while ((s=stdError.readLine()) != null) {
      logger.info(s);
    }
  }
 }

public boolean pageSetupDialog(PrinterJob job){
  PrintRequestAttributeSet prats=getPrintRequestAttributeSet();
  PageFormat pf=job.pageDialog(prats);
  setPrintRequestAttributeSet(prats);
  return true;
}

public static void assertNotEquals(BufferedImage image1,BufferedImage image2){
  assertNotEquals("",image1,image2);
}

public Depend(PathImpl source,long digest,boolean requireSource){
  this(source);
  long newDigest=source.getCrc64();
  _requireSource=requireSource;
  if (newDigest == digest) {
  }
 else   if (!requireSource && newDigest == 0) {
  }
 else   if (newDigest == 0) {
    if (log.isLoggable(Level.FINE))     log.fine(_source.getNativePath() + " source is deleted.");
    _isDigestModified=true;
  }
 else {
    _isDigestModified=true;
  }
}

public static boolean stringToFile(final String data,final File targetFile,final boolean doAppend){
  if (targetFile == null || !isWritable(targetFile,true)) {
    Log.e(FileUtils.class,"stringToFile(): File is null or cant make path dirs");
    return false;
  }
  boolean isSucceed=true;
  try {
    final FileWriter out=new FileWriter(targetFile,doAppend);
    out.write(data);
    out.flush();
    out.close();
  }
 catch (  IOException e) {
    isSucceed=false;
  }
  return isSucceed;
}

@Override public void cascadeRegisterNewIfRequired(Object object,UnitOfWorkImpl uow,Map visitedObjects){
  cascadeRegisterNewIfRequired(object,uow,visitedObjects,true);
}

public void initialize(Map configParams) throws PolicyException {
  if (configParams == null) {
    throw (new PolicyException(ResBundleUtils.rbName,"ldapusers_initialization_failed",null,null));
  }
  String configuredLdapServer=(String)configParams.get(PolicyConfig.LDAP_SERVER);
  if (configuredLdapServer == null) {
    debug.error("LDAPUsers.initialize(): failed to get LDAP " + "server name. If you enter more than one server name " + "in the policy config service's Primary LDAP Server "+ "field, please make sure the ldap server name is preceded "+ "with the local server name.");
    throw (new PolicyException(ResBundleUtils.rbName,"invalid_ldap_server_host",null,null));
  }
  ldapServer=configuredLdapServer.toLowerCase();
  localDS=PolicyUtils.isLocalDS(ldapServer);
  aliasEnabled=Boolean.valueOf((String)configParams.get(PolicyConfig.USER_ALIAS_ENABLED));
  String authid=(String)configParams.get(PolicyConfig.LDAP_BIND_DN);
  String authpw=(String)configParams.get(PolicyConfig.LDAP_BIND_PASSWORD);
  if (authpw != null) {
    authpw=PolicyUtils.decrypt(authpw);
  }
  baseDN=(String)configParams.get(PolicyConfig.LDAP_USERS_BASE_DN);
  userSearchFilter=(String)configParams.get(PolicyConfig.LDAP_USERS_SEARCH_FILTER);
  String scope=(String)configParams.get(PolicyConfig.LDAP_USERS_SEARCH_SCOPE);
  if (scope.equalsIgnoreCase(LDAP_SCOPE_BASE)) {
    userSearchScope=SearchScope.BASE_OBJECT;
  }
 else   if (scope.equalsIgnoreCase(LDAP_SCOPE_ONE)) {
    userSearchScope=SearchScope.SINGLE_LEVEL;
  }
 else {
    userSearchScope=SearchScope.WHOLE_SUBTREE;
  }
  userRDNAttrName=(String)configParams.get(PolicyConfig.LDAP_USER_SEARCH_ATTRIBUTE);
  int minPoolSize;
  int maxPoolSize;
  try {
    timeLimit=Integer.parseInt((String)configParams.get(PolicyConfig.LDAP_SEARCH_TIME_OUT));
    maxResults=Integer.parseInt((String)configParams.get(PolicyConfig.LDAP_SEARCH_LIMIT));
    minPoolSize=Integer.parseInt((String)configParams.get(PolicyConfig.LDAP_CONNECTION_POOL_MIN_SIZE));
    maxPoolSize=Integer.parseInt((String)configParams.get(PolicyConfig.LDAP_CONNECTION_POOL_MAX_SIZE));
  }
 catch (  NumberFormatException nfe) {
    throw (new PolicyException(nfe));
  }
  boolean sslEnabled=Boolean.valueOf((String)configParams.get(PolicyConfig.LDAP_SSL_ENABLED));
  Set orgNameSet=(Set)configParams.get(PolicyManager.ORGANIZATION_NAME);
  if ((orgNameSet != null) && (!orgNameSet.isEmpty())) {
    Iterator items=orgNameSet.iterator();
    orgName=(String)items.next();
  }
  if (debug.messageEnabled()) {
    debug.message("LDAPUsers.initialize(): getting params" + "\nldapServer: " + ldapServer + "\nauthid: "+ authid+ "\nbaseDN: "+ baseDN+ "\nuserSearchFilter: "+ userSearchFilter+ "\nuserRDNAttrName: "+ userRDNAttrName+ "\ntimeLimit: "+ timeLimit+ "\nmaxResults: "+ maxResults+ "\nminPoolSize: "+ minPoolSize+ "\nmaxPoolSize: "+ maxPoolSize+ "\nSSLEnabled: "+ sslEnabled+ "\nOrgName: "+ orgName);
  }
  LDAPConnectionPools.initConnectionPool(ldapServer,authid,authpw,sslEnabled,minPoolSize,maxPoolSize);
  connPool=LDAPConnectionPools.getConnectionPool(ldapServer);
  initialized=true;
}

public static boolean parseBool(String s){
  if (s != null) {
    if (s.startsWith("true") || s.startsWith("on") || s.startsWith("yes")) {
      return true;
    }
    if (s.startsWith("false") || s.startsWith("off") || s.equals("no")) {
      return false;
    }
  }
  throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"invalid boolean value: " + s);
}

private static void readDNA(String filename){
  try {
    LineNumberReader in=new LineNumberReader(new FileReader(filename));
    processOneLine(in,"CompilationRates",compilationRates);
    processOneLine(in,"SpeedupRates",speedupRates);
  }
 catch (  Exception e) {
    e.printStackTrace();
    VM.sysFail("Failed to open controller DNA file");
  }
}

public void test_Of_EEEE(){
  EnumSet<EnumWithInnerClass> enumSet=EnumSet.of(EnumWithInnerClass.a,EnumWithInnerClass.b,EnumWithInnerClass.c,EnumWithInnerClass.d);
  assertEquals("Size of enumSet should be 4",4,enumSet.size());
  assertTrue("enumSet should contain EnumWithSubclass.a:",enumSet.contains(EnumWithInnerClass.a));
  assertTrue("enumSet should contain EnumWithSubclass.d:",enumSet.contains(EnumWithInnerClass.d));
  try {
    EnumSet.of((EnumWithInnerClass)null,null,null,null);
    fail("Should throw NullPointerException");
  }
 catch (  NullPointerException npe) {
  }
  EnumSet<HugeEnumWithInnerClass> hugeEnumSet=EnumSet.of(HugeEnumWithInnerClass.a,HugeEnumWithInnerClass.b,HugeEnumWithInnerClass.c,HugeEnumWithInnerClass.d);
  assertEquals(4,hugeEnumSet.size());
  assertTrue(hugeEnumSet.contains(HugeEnumWithInnerClass.a));
  assertTrue(hugeEnumSet.contains(HugeEnumWithInnerClass.d));
  try {
    EnumSet.of((HugeEnumWithInnerClass)null,null,null,null);
    fail("Should throw NullPointerException");
  }
 catch (  NullPointerException npe) {
  }
}

Builder(URL swaggerUrl){
  try {
    this.swaggerLocation=swaggerUrl.toURI();
  }
 catch (  URISyntaxException e) {
    throw new IllegalArgumentException("swaggerURL is in a wrong format",e);
  }
  this.swagger=readSwagger(swaggerUrl.toString());
}

@Override public void onSaveInstanceState(@NonNull Bundle savedInstanceState){
  savedInstanceState.putParcelable(LOCATION_KEY,currentLocation);
  if (lastLocationUpdateTime != null) {
    savedInstanceState.putLong(LAST_LOCATION_UPDATE_TIME_STRING_KEY,lastLocationUpdateTime.getTime());
  }
  if (lastWifiScanTime != null) {
    savedInstanceState.putLong(LAST_WIFI_SCAN_TIME_STRING_KEY,lastWifiScanTime.getTime());
  }
  savedInstanceState.putBoolean(LOGGING_ENABLED_KEY,loggingEnabled);
  super.onSaveInstanceState(savedInstanceState);
}

public static String removeEmptyLines(String text){
  text=text.replaceAll("^[ " + ChineseLanguageConstants.SPACE[0] + "\t\u000B\u000C\u00A0\uE5F1\r\n]*\n","");
  text=text.replaceAll("[\r\n][ " + ChineseLanguageConstants.SPACE[0] + "\t\u000B\u000C\u00A0\uE5F1\r\n]*\n","\n");
  return text;
}

public void keepOnly(Set<IVarAbstraction> usefulPointers){
  Set<IVarAbstraction> reps=new HashSet<IVarAbstraction>();
  for (  IVarAbstraction pn : usefulPointers) {
    reps.add(pn.getRepresentative());
  }
  usefulPointers.addAll(reps);
  reps=null;
  for (  IVarAbstraction pn : pointers) {
    if (!usefulPointers.contains(pn))     pn.deleteAll();
  }
  System.gc();
}

public static String encryptCFB(final byte[] concatenatedHashValue,final Long turnoverCounter,final SecretKey symmetricKey,int turnOverCounterLengthInBytes) throws NoSuchAlgorithmException, NoSuchProviderException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {
  final ByteBuffer byteBufferIV=ByteBuffer.allocate(16);
  byteBufferIV.put(concatenatedHashValue);
  final byte[] IV=byteBufferIV.array();
  final ByteBuffer byteBufferData=ByteBuffer.allocate(16);
  byteBufferData.putLong(turnoverCounter);
  final byte[] data=byteBufferData.array();
  byte[] turnOverCounterByteRep=get2ComplementRepForLong(turnoverCounter,turnOverCounterLengthInBytes);
  System.arraycopy(turnOverCounterByteRep,0,data,0,turnOverCounterByteRep.length);
  final IvParameterSpec ivSpec=new IvParameterSpec(IV);
  final Cipher cipher=Cipher.getInstance("AES/CFB/NoPadding","BC");
  cipher.init(Cipher.ENCRYPT_MODE,symmetricKey,ivSpec);
  final byte[] encryptedTurnOverValueComplete=cipher.doFinal(data);
  final byte[] encryptedTurnOverValue=new byte[turnOverCounterLengthInBytes];
  System.arraycopy(encryptedTurnOverValueComplete,0,encryptedTurnOverValue,0,turnOverCounterLengthInBytes);
  final String base64EncryptedTurnOverValue=CashBoxUtils.base64Encode(encryptedTurnOverValue,false);
  return base64EncryptedTurnOverValue;
}

public void resetLockoutAttempts(String userDN,AMIdentity amIdentity,AccountLockoutInfo acInfo,boolean resetDuration){
  debug.message("entering ISAccountLockout.resetLockoutAttempts");
  if (debug.messageEnabled()) {
    debug.message("ISAccountLockout.resetLockoutAttempts:: " + "resetDuration =" + resetDuration);
  }
  int fail_count=0;
  long lastFailTime=0;
  long locked_out_at=0;
  long actualLockoutDuration=failureLockoutDuration;
  long currentLockoutDuration=acInfo.getActualLockoutDuration();
  if (acInfo != null) {
    fail_count=acInfo.getFailCount();
    lastFailTime=acInfo.getLastFailTime();
    locked_out_at=acInfo.getLockoutAt();
    long now=currentTimeMillis();
    if (!resetDuration) {
      actualLockoutDuration=currentLockoutDuration;
      if (debug.messageEnabled()) {
        debug.message("ISAccountLockout.resetLockoutAttempts::" + "Locked out At =" + locked_out_at);
      }
      if (locked_out_at > 0) {
        if (debug.messageEnabled()) {
          debug.message("ISAccountLockout.resetLockoutAttempts::" + " Using the multiplier");
        }
        actualLockoutDuration=failureLockoutMultiplier * (currentLockoutDuration);
      }
    }
  }
  if (storeInvalidAttemptsInDS) {
    try {
      if ((fail_count != 0) || (lastFailTime != 0) || (locked_out_at != 0)|| (actualLockoutDuration != currentLockoutDuration)) {
        Map attrMap=new HashMap();
        Set invalidAttempts=new HashSet();
        String invalidXML=createInvalidAttemptsXML(0,0,0,actualLockoutDuration);
        invalidAttempts.add(invalidXML);
        attrMap.put(invalidAttemptsDataAttrName,invalidAttempts);
        setLockoutObjectClass(amIdentity);
        amIdentity.setAttributes(attrMap);
        debug.message("Saving XML = " + invalidXML);
        amIdentity.store();
      }
      debug.message("ISAccountLockout::resetLockoutAttempts done");
    }
 catch (    Exception exp) {
      debug.message("error reseting Lockout Attempts");
    }
  }
  acInfo.setFailCount(0);
  acInfo.setLastFailTime(0);
  acInfo.setLockoutAt(0);
  acInfo.setLockout(false);
  acInfo.setActualLockoutDuration(actualLockoutDuration);
}

String publicNameFromDiskName(String diskName){
  if (!shouldDiskNameBeVisible(diskName)) {
    throw new IllegalArgumentException("disk file should not be visible: " + diskName);
  }
  return diskName.substring(mFilePrefix.length(),diskName.length());
}

public double[] predict(FVec feat){
  return predict(feat,false);
}

public static <A>A[] append(final A[] a,final A[] b){
  final int alen=a.length;
  final int blen=b.length;
  final A[] res=Arrays.copyOf(a,alen + blen);
  System.arraycopy(b,0,res,alen,blen);
  return res;
}

public boolean addListener(@NotNull SoftWrapAwareDocumentParsingListener listener){
  return myListeners.add(listener);
}

private void assertArrayEquals(double[] expected,double[] actual,double delta,boolean checkNaN){
  Assert.assertEquals(expected.length,actual.length);
  for (int index=0; index < actual.length; index++) {
    double d1=expected[index];
    double d2=actual[index];
    if (Double.isNaN(d1) || Double.isNaN(d2)) {
      if (checkNaN) {
        Assert.assertTrue(Double.isNaN(d1) == Double.isNaN(d2));
      }
      Assert.assertTrue(true);
    }
 else {
      Assert.assertEquals(d1,d2,delta);
    }
  }
}

protected void addToPopulation(Solution newSolution){
  List<Integer> dominates=new ArrayList<Integer>();
  boolean dominated=false;
  for (int i=0; i < population.size(); i++) {
    int flag=dominanceComparator.compare(newSolution,population.get(i));
    if (flag < 0) {
      dominates.add(i);
    }
 else     if (flag > 0) {
      dominated=true;
    }
  }
  if (!dominates.isEmpty()) {
    population.remove(dominates.get(PRNG.nextInt(dominates.size())));
    population.add(newSolution);
  }
 else   if (!dominated) {
    population.remove(PRNG.nextInt(population.size()));
    population.add(newSolution);
  }
}

public void updateMaxTextWidths(float requiredWidth,float matchContentsWidth){
  mMaxRequiredWidth=Math.max(mMaxRequiredWidth,requiredWidth);
  mMaxMatchContentsWidth=Math.max(mMaxMatchContentsWidth,matchContentsWidth);
}

private String generateBlendModeImport(BlendMode blendMode){
  if (blendMode == BlendMode.COLOR)   return "import mx.graphics.shaderClasses.ColorShader;\n\n";
 else   if (blendMode == BlendMode.COLORBURN)   return "import mx.graphics.shaderClasses.ColorBurnShader;\n\n";
 else   if (blendMode == BlendMode.COLORDODGE)   return "import mx.graphics.shaderClasses.ColorDodgeShader;\n\n";
 else   if (blendMode == BlendMode.EXCLUSION)   return "import mx.graphics.shaderClasses.ExclusionShader;\n\n";
 else   if (blendMode == BlendMode.HUE)   return "import mx.graphics.shaderClasses.HueShader;\n\n";
 else   if (blendMode == BlendMode.LUMINOSITY)   return "import mx.graphics.shaderClasses.LuminosityShader;\n\n";
 else   if (blendMode == BlendMode.SATURATION)   return "import mx.graphics.shaderClasses.SaturationShader;\n\n";
 else   if (blendMode == BlendMode.SOFTLIGHT)   return "import mx.graphics.shaderClasses.SoftLightShader;\n\n";
 else   return null;
}

public static String parseIntToMetricSuffix(int x){
  String xint=String.valueOf(x);
  if (xint.endsWith("000000")) {
    xint=xint.replaceAll("000000$","M");
  }
 else   if (xint.endsWith("000")) {
    xint=xint.replaceAll("000$","k");
  }
  return xint;
}

public SmAuthStatus query(String parameter,String secret,SmAuthQueryCode request,SmAuthQueryResponse response){
  if (null == response) {
    return SmAuthStatus.SMAUTH_FAILURE;
  }
  if (SmAuthQueryCode.SMAUTH_QUERY_DESCRIPTION == request) {
    response.setResponseBuffer(SCHEME_DESCRIPTION);
    response.setResponseCode(SCHEME_VERSION);
  }
 else   if (SmAuthQueryCode.SMAUTH_QUERY_CREDENTIALS_REQ == request) {
    response.setResponseCode(SmAuthQueryResponse.SMAUTH_CRED_BASIC);
  }
 else {
    return SmAuthStatus.SMAUTH_FAILURE;
  }
  return SmAuthStatus.SMAUTH_SUCCESS;
}

protected void addAllTransitiveJars(WarArchiveMerger wam) throws MojoExecutionException {
  DependencyCalculator dc=new DependencyCalculator(artifactFactory,resolver,localRepository,remoteRepositories,mavenProject,mavenProjectBuilder,installer,container);
  try {
    for (    File f : dc.execute()) {
      wam.addMergeItem(f);
    }
  }
 catch (  Exception ex) {
    throw new MojoExecutionException("Problem merging dependent JAR files",ex);
  }
}

private void add(int col,GraphicalNode graphicalNode){
  myGraphicalNodes.remove(graphicalNode);
  if (nbCols - 1 < col) {
    nbCols=col + 1;
  }
  int row=0;
  while (isOccupied(row,col)) {
    row++;
  }
  graphicalNode.row=row;
  graphicalNode.col=col;
  myGraphicalNodes.add(graphicalNode);
}

private int addTonalComponents(float[] spectrum,int numComponents,TonalComponent[] components){
  int lastPos=-1;
  for (int i=0; i < numComponents; i++) {
    lastPos=Math.max(components[i].pos + components[i].numCoefs,lastPos);
    for (int j=0; j < components[i].numCoefs; j++) {
      spectrum[components[i].pos + j]+=components[i].coef[j];
    }
  }
  return lastPos;
}

public static List<UserLayer> extractUserLayers(StyledLayerDescriptor sld){
  List<UserLayer> userLayerList=new ArrayList<UserLayer>();
  if (sld != null) {
    for (    StyledLayer layer : sld.layers()) {
      if (layer instanceof UserLayer) {
        UserLayer userLayer=(UserLayer)layer;
        userLayerList.add(userLayer);
      }
    }
  }
  return userLayerList;
}

public static void closeQuiet(@Nullable Selector rsrc){
  if (rsrc != null)   try {
    if (rsrc.isOpen())     rsrc.close();
  }
 catch (  IOException ignored) {
  }
}

private LinkedList<Diff> diff_main(String text1,String text2,boolean checklines,long deadline){
  if (text1 == null || text2 == null) {
    throw new IllegalArgumentException("Null inputs. (diff_main)");
  }
  LinkedList<Diff> diffs;
  if (text1.equals(text2)) {
    diffs=new LinkedList<Diff>();
    if (text1.length() != 0) {
      diffs.add(new Diff(Operation.EQUAL,text1));
    }
    return diffs;
  }
  int commonlength=diff_commonPrefix(text1,text2);
  String commonprefix=text1.substring(0,commonlength);
  text1=text1.substring(commonlength);
  text2=text2.substring(commonlength);
  commonlength=diff_commonSuffix(text1,text2);
  String commonsuffix=text1.substring(text1.length() - commonlength);
  text1=text1.substring(0,text1.length() - commonlength);
  text2=text2.substring(0,text2.length() - commonlength);
  diffs=diff_compute(text1,text2,checklines,deadline);
  if (commonprefix.length() != 0) {
    diffs.addFirst(new Diff(Operation.EQUAL,commonprefix));
  }
  if (commonsuffix.length() != 0) {
    diffs.addLast(new Diff(Operation.EQUAL,commonsuffix));
  }
  diff_cleanupMerge(diffs);
  return diffs;
}

public static boolean createCompactionRequiredFile(String metaFolderPath,CompactionType compactionType){
  String statusFile;
  if (compactionType.equals(CompactionType.MINOR_COMPACTION)) {
    statusFile=metaFolderPath + CarbonCommonConstants.FILE_SEPARATOR + CarbonCommonConstants.minorCompactionRequiredFile;
  }
 else {
    statusFile=metaFolderPath + CarbonCommonConstants.FILE_SEPARATOR + CarbonCommonConstants.majorCompactionRequiredFile;
  }
  try {
    if (!FileFactory.isFileExist(statusFile,FileFactory.getFileType(statusFile))) {
      if (FileFactory.createNewFile(statusFile,FileFactory.getFileType(statusFile))) {
        LOGGER.info("successfully created a compaction required file - " + statusFile);
        return true;
      }
 else {
        LOGGER.error("Not able to create a compaction required file - " + statusFile);
        return false;
      }
    }
 else {
      LOGGER.info("Compaction request file : " + statusFile + " already exist.");
    }
  }
 catch (  IOException e) {
    LOGGER.error("Exception in creating the compaction request file " + e.getMessage());
  }
  return false;
}

private boolean allowNotificationEmission(ObjectName name,TargetedNotification tn){
  try {
    if (checkNotificationEmission) {
      checkMBeanPermission(name,"addNotificationListener");
    }
    if (notificationAccessController != null) {
      notificationAccessController.fetchNotification(connectionId,name,tn.getNotification(),getSubject());
    }
    return true;
  }
 catch (  SecurityException e) {
    if (logger.debugOn()) {
      logger.debug("fetchNotifs","Notification " + tn.getNotification() + " not forwarded: the "+ "caller didn't have the required access rights");
    }
    return false;
  }
catch (  Exception e) {
    if (logger.debugOn()) {
      logger.debug("fetchNotifs","Notification " + tn.getNotification() + " not forwarded: "+ "got an unexpected exception: "+ e);
    }
    return false;
  }
}

public void updateThroughput(long currentTime){
  throughputCalculationLock.lock();
  try {
    int interval=(int)(currentTime - lastThroughputCalculationTime);
    long minInterval=getThroughputCalculationIntervalInMillis();
    if ((minInterval == 0) || (interval < minInterval)) {
      return;
    }
    long readBytes=this.readBytes;
    long writtenBytes=this.writtenBytes;
    long readMessages=this.readMessages;
    long writtenMessages=this.writtenMessages;
    readBytesThroughput=(readBytes - lastReadBytes) * 1000.0 / interval;
    writtenBytesThroughput=(writtenBytes - lastWrittenBytes) * 1000.0 / interval;
    readMessagesThroughput=(readMessages - lastReadMessages) * 1000.0 / interval;
    writtenMessagesThroughput=(writtenMessages - lastWrittenMessages) * 1000.0 / interval;
    if (readBytesThroughput > largestReadBytesThroughput) {
      largestReadBytesThroughput=readBytesThroughput;
    }
    if (writtenBytesThroughput > largestWrittenBytesThroughput) {
      largestWrittenBytesThroughput=writtenBytesThroughput;
    }
    if (readMessagesThroughput > largestReadMessagesThroughput) {
      largestReadMessagesThroughput=readMessagesThroughput;
    }
    if (writtenMessagesThroughput > largestWrittenMessagesThroughput) {
      largestWrittenMessagesThroughput=writtenMessagesThroughput;
    }
    lastReadBytes=readBytes;
    lastWrittenBytes=writtenBytes;
    lastReadMessages=readMessages;
    lastWrittenMessages=writtenMessages;
    lastThroughputCalculationTime=currentTime;
  }
  finally {
    throughputCalculationLock.unlock();
  }
}

public List<VerificationOK> verify(X509Certificate signCert,X509Certificate issuerCert,Date signDate) throws GeneralSecurityException, IOException {
  RootStoreVerifier rootStoreVerifier=new RootStoreVerifier(verifier);
  rootStoreVerifier.setRootStore(rootStore);
  CRLVerifier crlVerifier=new CRLVerifier(rootStoreVerifier,getCRLsFromDSS());
  crlVerifier.setRootStore(rootStore);
  crlVerifier.setOnlineCheckingAllowed(latestRevision || onlineCheckingAllowed);
  OCSPVerifier ocspVerifier=new OCSPVerifier(crlVerifier,getOCSPResponsesFromDSS());
  ocspVerifier.setRootStore(rootStore);
  ocspVerifier.setOnlineCheckingAllowed(latestRevision || onlineCheckingAllowed);
  return ocspVerifier.verify(signCert,issuerCert,signDate);
}

protected boolean[] testWRTZeroR(Classifier classifier,Evaluation evaluation,Instances train,Instances test) throws Exception {
  boolean[] result=new boolean[2];
  evaluation.evaluateModel(classifier,test);
  try {
    Classifier zeroR=new weka.classifiers.rules.ZeroR();
    zeroR.buildClassifier(train);
    Evaluation zeroREval=new Evaluation(train);
    zeroREval.evaluateModel(zeroR,test);
    result[0]=Utils.grOrEq(zeroREval.errorRate(),evaluation.errorRate());
  }
 catch (  Exception ex) {
    throw new Error("Problem determining ZeroR performance: " + ex.getMessage());
  }
  return result;
}

public void println(){
  if (addNewlines) {
    try {
      out.write("\n");
    }
 catch (    IOException ioe) {
      throw new GroovyRuntimeException(ioe);
    }
  }
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String childData;
  doc=(Document)load("hc_staff",true);
  elementList=doc.getElementsByTagName("acronym");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
  child.deleteData(4,50);
  childData=child.getData();
  assertEquals("characterdataDeleteDataExceedsLengthAssert","1230",childData);
}

public void deliveryComplete(final IMqttDeliveryToken token){
  logger.trace("Delivery complete for {}",token.getMessageId());
}

public DExportPublicKeyOpenSsl(JFrame parent,String entryAlias){
  super(parent,Dialog.ModalityType.DOCUMENT_MODAL);
  this.entryAlias=entryAlias;
  initComponents();
}

public static String escapeUnicode(String s){
  int len=s.length();
  int i=0;
  while (i < len) {
    char ch=s.charAt(i);
    if (ch > 255) {
      StringBuilder buf=new StringBuilder();
      buf.append(s.substring(0,i));
      while (i < len) {
        ch=s.charAt(i);
        if (ch > 255) {
          buf.append("\\u");
          buf.append(Character.forDigit((ch >> 12) % 16,16));
          buf.append(Character.forDigit((ch >> 8) % 16,16));
          buf.append(Character.forDigit((ch >> 4) % 16,16));
          buf.append(Character.forDigit((ch) % 16,16));
        }
 else {
          buf.append(ch);
        }
        i++;
      }
      s=buf.toString();
    }
 else {
      i++;
    }
  }
  return s;
}

public void keyPressed(final int keyCode){
  if (impl.getCurrentForm() == null) {
    return;
  }
  addSingleArgumentEvent(KEY_PRESSED,keyCode);
  lastInteractionWasKeypad=lastInteractionWasKeypad || (keyCode != MenuBar.leftSK && keyCode != MenuBar.clearSK && keyCode != MenuBar.backSK);
  keyRepeatCharged=(keyCode >= 0 || getGameAction(keyCode) > 0) || keyCode == impl.getClearKeyCode();
  longPressCharged=keyRepeatCharged;
  longKeyPressTime=System.currentTimeMillis();
  keyRepeatValue=keyCode;
  nextKeyRepeatEvent=System.currentTimeMillis() + keyRepeatInitialIntervalTime;
  previousKeyPressed=lastKeyPressed;
  lastKeyPressed=keyCode;
}

public boolean isEmpty(){
  return filter.isEmpty() && query.isEmpty() && sort.isEmpty();
}

public String[] readDirectory(String dir){
  if (dir == null) {
    throw new NullPointerException("dir");
  }
  StringArrayOut listOut=new StringArrayOut();
  try {
    checkResult(LibIMobileDevice.afc_read_directory(getRef(),dir,listOut));
    StringArray list=listOut.getValue();
    ArrayList<String> result=new ArrayList<String>();
    if (list != null) {
      for (int i=0; ; i++) {
        String s=list.get(i);
        if (s == null) {
          break;
        }
        result.add(s);
      }
    }
    return result.toArray(new String[result.size()]);
  }
  finally {
    LibIMobileDevice.delete_StringArray_values_z(listOut.getValue());
    listOut.delete();
  }
}

public void registerInput(String varName,JavaRDD<String> rddIn,String format,long rlen,long clen,FileFormatProperties props,List<ValueType> schema) throws DMLRuntimeException {
  if (!(DMLScript.rtplatform == RUNTIME_PLATFORM.SPARK || DMLScript.rtplatform == RUNTIME_PLATFORM.HYBRID_SPARK)) {
    throw new DMLRuntimeException("The registerInput functionality only supported for spark runtime. Please use MLContext(sc) instead of default constructor.");
  }
  long nnz=-1;
  if (_variables == null)   _variables=new LocalVariableMap();
  if (_inVarnames == null)   _inVarnames=new ArrayList<String>();
  JavaPairRDD<LongWritable,Text> rddText=rddIn.mapToPair(new ConvertStringToLongTextPair());
  int blksz=ConfigurationManager.getBlocksize();
  MatrixCharacteristics mc=new MatrixCharacteristics(rlen,clen,blksz,blksz,nnz);
  FrameObject fo=null;
  if (format.equals("csv")) {
    CSVFileFormatProperties csvprops=(props != null) ? (CSVFileFormatProperties)props : new CSVFileFormatProperties();
    fo=new FrameObject(OptimizerUtils.getUniqueTempFileName(),new MatrixFormatMetaData(mc,OutputInfo.CSVOutputInfo,InputInfo.CSVInputInfo));
    fo.setFileFormatProperties(csvprops);
  }
 else   if (format.equals("text")) {
    if (rlen == -1 || clen == -1) {
      throw new DMLRuntimeException("The metadata is required in registerInput for format:" + format);
    }
    fo=new FrameObject(null,new MatrixFormatMetaData(mc,OutputInfo.TextCellOutputInfo,InputInfo.TextCellInputInfo));
  }
 else {
    throw new DMLRuntimeException("Incorrect format in registerInput: " + format);
  }
  if (props != null)   fo.setFileFormatProperties(props);
  fo.setRDDHandle(new RDDObject(rddText,varName));
  fo.setSchema("String");
  _variables.put(varName,fo);
  _inVarnames.add(varName);
  checkIfRegisteringInputAllowed();
}

public void checkNumberArgs(int argNum) throws WrongNumberArgsException {
  if (argNum < 2)   reportWrongNumberArgs();
}

public static String fixLineFeeds(String sql){
  if (sql.indexOf('\r') == -1) {
    return sql;
  }
  boolean hasFixes=false;
  char[] fixed=sql.toCharArray();
  for (int i=0; i < fixed.length; i++) {
    if (fixed[i] == '\r' && (i == fixed.length - 1 || fixed[i + 1] != '\n')) {
      fixed[i]='\n';
      hasFixes=true;
    }
  }
  return hasFixes ? String.valueOf(fixed) : sql;
}

public int compareTo(Object obj){
  int diff=-1;
  if (obj instanceof ParserNotice) {
    ParserNotice p2=(ParserNotice)obj;
    diff=level - p2.getLevel();
    if (diff == 0) {
      diff=line - p2.getLine();
      if (diff == 0) {
        diff=message.compareTo(p2.getMessage());
      }
    }
  }
  return diff;
}

public static String mergePath(String current,String realPath) throws MalformedURLException {
  String currDir;
  if (current == null || current.indexOf('/') == -1)   currDir="/";
 else   if (current.endsWith("/"))   currDir=current;
 else   currDir=current.substring(0,current.lastIndexOf('/') + 1);
  String path;
  if (realPath.startsWith("./"))   path=currDir + realPath.substring(2);
 else   if (realPath.startsWith("/"))   path=realPath;
 else   if (!realPath.startsWith("../"))   path=currDir + realPath;
 else {
    while (realPath.startsWith("../") || currDir.length() == 0) {
      realPath=realPath.substring(3);
      currDir=currDir.substring(0,currDir.length() - 1);
      int index=currDir.lastIndexOf('/');
      if (index == -1)       throw new MalformedURLException("invalid realpath definition for URL");
      currDir=currDir.substring(0,index + 1);
    }
    path=currDir + realPath;
  }
  return path;
}

public void rollback() throws SQLException {
  if (useConnection == null) {
    LOG.info("Rollback operation not supported when using datasets unless using withTransaction or cacheConnection - attempt to rollback ignored");
    return;
  }
  try {
    useConnection.rollback();
  }
 catch (  SQLException e) {
    LOG.warning("Caught exception rolling back connection: " + e.getMessage());
    throw e;
  }
}

public byte[] toByteArray(){
  if (headerNonce_ == null || headerTag_ == null) {
    throw new AwsCryptoException("Header nonce and tag cannot be null.");
  }
  final byte[] serializedFields=serializeAuthenticatedFields();
  final int outLen=serializedFields.length + headerNonce_.length + headerTag_.length;
  final ByteBuffer serializedBytes=ByteBuffer.allocate(outLen);
  serializedBytes.put(serializedFields);
  serializedBytes.put(headerNonce_);
  serializedBytes.put(headerTag_);
  return serializedBytes.array();
}

public boolean containsKey(Object key){
  return context.getAttribute((String)key) != null;
}

private void updateLimit(int limit){
  currentCycle.setLimit(limit);
  updatePlanCycles();
  confirmUpdate.setTextColor(resources.getColor(R.color.light_gray));
}

@SuppressWarnings("unchecked") public Set<S> descendants(){
  Set<S> perms=new HashSet<>();
  for (  S child : children) {
    perms.add(child);
    perms.addAll(child.descendants());
  }
  return perms;
}

private String extractUrl(String sharedUrl){
  String finalUrl;
  finalUrl=sharedUrl.trim();
  String[] possible_urls=finalUrl.split(" ");
  for (  String url : possible_urls) {
    if (NetworkManager.isUrl(url)) {
      finalUrl=url;
      break;
    }
  }
  finalUrl=finalUrl.substring(finalUrl.lastIndexOf(" ") + 1);
  finalUrl=finalUrl.substring(finalUrl.lastIndexOf("\n") + 1);
  if (NetworkManager.isUrl("http://" + finalUrl) && !NetworkManager.isUrl(finalUrl)) {
    finalUrl="http://" + finalUrl;
  }
  if (finalUrl.contains("&utm_source=")) {
    finalUrl=finalUrl.substring(0,finalUrl.indexOf("&utm_source="));
  }
  if (finalUrl.contains("?utm_source=")) {
    finalUrl=finalUrl.substring(0,finalUrl.indexOf("?utm_source="));
  }
  if (finalUrl.contains("#xtor=RSS-")) {
    finalUrl=finalUrl.substring(0,finalUrl.indexOf("#xtor=RSS-"));
  }
  return finalUrl;
}

public Set entrySet(){
  return map.entrySet();
}

public static String encode(String input){
  return Base64.encodeBase64String(input.getBytes(StandardCharsets.UTF_8));
}

protected static final String addEscapes(String str){
  StringBuffer retval=new StringBuffer();
  char ch;
  for (int i=0; i < str.length(); i++) {
switch (str.charAt(i)) {
case 0:
      continue;
case '\b':
    retval.append("\\b");
  continue;
case '\t':
retval.append("\\t");
continue;
case '\n':
retval.append("\\n");
continue;
case '\f':
retval.append("\\f");
continue;
case '\r':
retval.append("\\r");
continue;
case '\"':
retval.append("\\\"");
continue;
case '\'':
retval.append("\\\'");
continue;
case '\\':
retval.append("\\\\");
continue;
default :
if ((ch=str.charAt(i)) < 0x20 || ch > 0x7e) {
String s="0000" + Integer.toString(ch,16);
retval.append("\\u" + s.substring(s.length() - 4,s.length()));
}
 else {
retval.append(ch);
}
continue;
}
}
return retval.toString();
}

public void addSplit(String splitLabel){
  if (mDisabled)   return;
  long now=SystemClock.elapsedRealtime();
  mSplits.add(now);
  mSplitLabels.add(splitLabel);
}

protected String encode(final String value){
  try {
    return URLEncoder.encode(value,"UTF-8");
  }
 catch (  Exception exp) {
    return value;
  }
}

private void checkConnectPermission() throws SecurityException {
  SecurityManager security=System.getSecurityManager();
  if (security == null)   return;
  if (security != cacheSecurityManager) {
    okContext=null;
    authcache=new WeakHashMap<AccessControlContext,Reference<AccessControlContext>>();
    cacheSecurityManager=security;
  }
  AccessControlContext ctx=AccessController.getContext();
  if (okContext == null || !(okContext.equals(ctx) || authcache.containsKey(ctx))) {
    security.checkConnect(ep.getHost(),ep.getPort());
    authcache.put(ctx,new SoftReference<AccessControlContext>(ctx));
  }
  okContext=ctx;
}

private boolean conditionL0(String value,int index){
  if (index == value.length() - 3 && contains(value,index - 1,4,"ILLO","ILLA","ALLE")) {
    return true;
  }
 else   if ((contains(value,index - 1,2,"AS","OS") || contains(value,value.length() - 1,1,"A","O")) && contains(value,index - 1,4,"ALLE")) {
    return true;
  }
 else {
    return false;
  }
}

public static PaginationContext fromContext(RoutingContext context){
  HttpServerRequest request=context.request();
  String pageStr=request.getParam(PaginationContext.CURRENT_PAGE_QUERY_PARAM);
  String perPageStr=request.getParam(PaginationContext.PER_PAGE_QUERY_PARAM);
  Integer page=null;
  Integer perPage=null;
  try {
    if (pageStr != null) {
      page=Integer.parseInt(pageStr);
    }
    if (perPageStr != null) {
      perPage=Integer.parseInt(perPageStr);
    }
  }
 catch (  NumberFormatException e) {
    DefaultErrorHandler.badRequest(context,"Invalid pagination parameters : expecting integers");
  }
  if (perPage != null && perPage > PaginationContext.MAX_PER_PAGE) {
    DefaultErrorHandler.badRequest(context,"Invalid " + PaginationContext.PER_PAGE_QUERY_PARAM + " parameter, max is "+ PaginationContext.MAX_PER_PAGE);
  }
  return new PaginationContext(page,perPage);
}

private void updateDataTypeState(){
  boolean isSyncEnabled=mSyncSwitchPreference.isChecked();
  boolean syncEverything=mSyncEverything.isChecked();
  boolean passwordSyncConfigurable=mProfileSyncService.isBackendInitialized() && mProfileSyncService.isCryptographerReady();
  for (  CheckBoxPreference pref : mAllTypes) {
    boolean canSyncType=pref != mSyncPasswords || passwordSyncConfigurable;
    if (!isSyncEnabled) {
      pref.setChecked(true);
    }
 else     if (syncEverything) {
      pref.setChecked(canSyncType);
    }
    pref.setEnabled(isSyncEnabled && !syncEverything && canSyncType);
  }
  if (isSyncEnabled && !syncEverything) {
    Set<Integer> syncTypes=mProfileSyncService.getPreferredDataTypes();
    mSyncAutofill.setChecked(syncTypes.contains(ModelType.AUTOFILL));
    mSyncBookmarks.setChecked(syncTypes.contains(ModelType.BOOKMARKS));
    mSyncOmnibox.setChecked(syncTypes.contains(ModelType.TYPED_URLS));
    mSyncPasswords.setChecked(passwordSyncConfigurable && syncTypes.contains(ModelType.PASSWORDS));
    mSyncRecentTabs.setChecked(syncTypes.contains(ModelType.PROXY_TABS));
    mSyncSettings.setChecked(syncTypes.contains(ModelType.PRIORITY_PREFERENCES));
  }
}

public static void writeProteinBestMatchesToFile(String filePath,Map<String,PIRSFHmmer2RawMatch> proteinIdBestMatchMap) throws IOException {
  BufferedWriter writer=null;
  try {
    File file=createTmpFile(filePath);
    if (!file.exists()) {
      throw new IllegalStateException("Could not create file: " + filePath);
    }
    writer=new BufferedWriter(new FileWriter(file));
    for (    String proteinId : proteinIdBestMatchMap.keySet()) {
      PIRSFHmmer2RawMatch bestMatch=proteinIdBestMatchMap.get(proteinId);
      if (bestMatch != null) {
        writer.write(proteinId);
        writer.write('-');
        writer.write(bestMatch.getModelId());
        writer.write(',');
        writer.write(bestMatch.getSignatureLibraryRelease());
        writer.write(',');
        writer.write(String.valueOf(bestMatch.getLocationStart()));
        writer.write(',');
        writer.write(String.valueOf(bestMatch.getLocationEnd()));
        writer.write(',');
        writer.write(String.valueOf(bestMatch.getEvalue()));
        writer.write(',');
        writer.write(String.valueOf(bestMatch.getScore()));
        writer.write(',');
        writer.write(String.valueOf(bestMatch.getHmmStart()));
        writer.write(',');
        writer.write(String.valueOf(bestMatch.getHmmEnd()));
        writer.write(',');
        writer.write(bestMatch.getHmmBounds());
        writer.write(',');
        writer.write(String.valueOf(bestMatch.getLocationEvalue()));
        writer.write(',');
        writer.write(String.valueOf(bestMatch.getLocationScore()));
        writer.write('\n');
      }
    }
  }
  finally {
    if (writer != null) {
      writer.close();
    }
  }
}

public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(2);
  newVector.addElement(new Option("\tNumber of iterations.\n" + "\t(default 10)","I",1,"-I <num>"));
  newVector.addAll(Collections.list(super.listOptions()));
  return newVector.elements();
}

void refreshUI(String xml,DOMTree m_tree){
  if ((xml == null) || xml.equals("")) {
    setErrorMessage("Error","No input XML  specified \n");
    return;
  }
  final Document newRoot=getRoot(xml);
  if (newRoot == null) {
    setErrorMessage("Error","Unable to get new DOM Tree \n");
    return;
  }
  m_tree.setDocument(newRoot);
}

private void cleanupProtectionSetVolumes(ProtectionSet protectionSet,List<String> volumeIDs,boolean markProtectionSetForDeletion){
  if (protectionSet != null) {
    _log.info("Removing the following volumes from protection set {}: {}",protectionSet.getLabel(),volumeIDs.toString());
    StringSet psetVolumes=protectionSet.getVolumes();
    psetVolumes.removeAll(volumeIDs);
    protectionSet.setVolumes(psetVolumes);
    if (markProtectionSetForDeletion) {
      protectionSet.setInactive(true);
    }
    _dbClient.updateObject(protectionSet);
  }
}

private static Normalization determineNormalization(Element model){
  Normalization normMethod=Normalization.NONE;
  String normName=model.getAttribute("normalizationMethod");
  if (normName.equals("simplemax")) {
    normMethod=Normalization.SIMPLEMAX;
  }
 else   if (normName.equals("softmax")) {
    normMethod=Normalization.SOFTMAX;
  }
 else   if (normName.equals("logit")) {
    normMethod=Normalization.LOGIT;
  }
 else   if (normName.equals("probit")) {
    normMethod=Normalization.PROBIT;
  }
 else   if (normName.equals("cloglog")) {
    normMethod=Normalization.CLOGLOG;
  }
 else   if (normName.equals("exp")) {
    normMethod=Normalization.EXP;
  }
 else   if (normName.equals("loglog")) {
    normMethod=Normalization.LOGLOG;
  }
 else   if (normName.equals("cauchit")) {
    normMethod=Normalization.CAUCHIT;
  }
  return normMethod;
}

Operand pop(Register s){
  Stack<Operand> stack=get(s);
  if (stack == null) {
    throw new OptimizingCompilerException("Failure in translating out of SSA form: trying to pop operand from non-existant stack");
  }
 else {
    return stack.pop();
  }
}

@Override public void startElement(String uri,String localName,String qName,Attributes attributes) throws SAXException {
  elementValue=new StringBuilder("");
  elementOn=true;
  if (localName.equals(ITEM_TITLE)) {
    episode=new Episode();
    isItem=true;
  }
  if (localName.equalsIgnoreCase(MP3_1) && isItem) {
    episode.setLength(attributes.getValue(LENGTH));
    episode.setAudeoUrl(attributes.getValue(MP3_3));
  }
}

public static void backAndForth(HGSearchResult<?> rs,int windowSize,int iteration){
  boolean advance=true;
  for (int i=0; i < iteration; i++) {
    Object x=rs.current();
    int steps=random(windowSize);
    steps=forward(rs,steps);
    if (back(rs,steps) != steps)     throw new RuntimeException("Moved " + steps + " forward, but not backward.");
    if (!x.equals(rs.current()))     throw new RuntimeException("Moving " + steps + " steps forward and backward missed current "+ x);
    if (advance) {
      forward(rs,random(windowSize));
      if (!rs.hasNext()) {
        back(rs,random(windowSize));
        advance=false;
      }
    }
 else {
      back(rs,random(windowSize));
      if (!rs.hasPrev()) {
        forward(rs,random(windowSize));
        advance=true;
      }
    }
  }
}

@Override public void close() throws IOException {
synchronized (lock) {
    if (decoder != null) {
      decoder.reset();
    }
    decoder=null;
    if (in != null) {
      in.close();
      in=null;
    }
  }
}

public List<String> provideWhiteList(){
  LinkedList<String> whiteList=new LinkedList<>();
  whiteList.add("org.chromium");
  return whiteList;
}

public boolean hasName(final String name){
  for (  final String n : names) {
    if (n.equalsIgnoreCase(name)) {
      return true;
    }
  }
  return false;
}

@Override public Double zincrby(final String key,final double score,final String member){
  checkIsInMultiOrPipeline();
  client.zincrby(key,score,member);
  String newscore=client.getBulkReply();
  return Double.valueOf(newscore);
}

private StringBuffer _toPattern(StringBuffer result,boolean escapeUnprintable){
  if (pat != null) {
    int i;
    int backslashCount=0;
    for (i=0; i < pat.length(); ) {
      int c=UTF16.charAt(pat,i);
      i+=UTF16.getCharCount(c);
      if (escapeUnprintable && Utility.isUnprintable(c)) {
        if ((backslashCount % 2) == 1) {
          result.setLength(result.length() - 1);
        }
        Utility.escapeUnprintable(result,c);
        backslashCount=0;
      }
 else {
        UTF16.append(result,c);
        if (c == '\\') {
          ++backslashCount;
        }
 else {
          backslashCount=0;
        }
      }
    }
    return result;
  }
  return _generatePattern(result,escapeUnprintable,true);
}

private static Version readWorkspaceVersion(final URL workspace){
  final File versionFile=getVersionFile(workspace,false);
  if (versionFile == null || !versionFile.exists()) {
    return null;
  }
  try {
    final Properties props=new Properties();
    final FileInputStream is=new FileInputStream(versionFile);
    try {
      props.load(is);
    }
  finally {
      is.close();
    }
    String versionString=props.getProperty(WORKSPACE_CHECK_REFERENCE_BUNDLE_NAME);
    if (versionString != null) {
      return Version.parseVersion(versionString);
    }
    versionString=props.getProperty(WORKSPACE_CHECK_REFERENCE_BUNDLE_NAME_LEGACY);
    if (versionString != null) {
      return Version.parseVersion(versionString);
    }
    return null;
  }
 catch (  final IOException e) {
    IDEWorkbenchPlugin.log("Could not read version file " + versionFile,new Status(IStatus.ERROR,IDEWorkbenchPlugin.IDE_WORKBENCH,IStatus.ERROR,e.getMessage() == null ? "" : e.getMessage(),e));
    return null;
  }
catch (  final IllegalArgumentException e) {
    IDEWorkbenchPlugin.log("Could not parse version in " + versionFile,new Status(IStatus.ERROR,IDEWorkbenchPlugin.IDE_WORKBENCH,IStatus.ERROR,e.getMessage() == null ? "" : e.getMessage(),e));
    return null;
  }
}

public VectorApproximation calculateApproximation(DBID id,V dv){
  int[] approximation=new int[dv.getDimensionality()];
  for (int d=0; d < splitPositions.length; d++) {
    final double val=dv.doubleValue(d);
    final int lastBorderIndex=splitPositions[d].length - 1;
    if (val < splitPositions[d][0]) {
      approximation[d]=0;
      if (id != null) {
        LOG.warning("Vector outside of VAFile grid!");
      }
    }
 else     if (val > splitPositions[d][lastBorderIndex]) {
      approximation[d]=lastBorderIndex - 1;
      if (id != null) {
        LOG.warning("Vector outside of VAFile grid!");
      }
    }
 else {
      int pos=Arrays.binarySearch(splitPositions[d],val);
      pos=(pos >= 0) ? pos : ((-pos) - 2);
      approximation[d]=pos;
    }
  }
  return new VectorApproximation(id,approximation);
}

private boolean checkIfVolumeSizeExceedingPoolSize(CIMArgument[] inArgs,CIMArgument[] outArgs){
  if (getVolumeSize(inArgs) > getVolumeSize(outArgs)) {
    return true;
  }
  return false;
}

@SuppressWarnings("unused") private void log(String label,ByteBuffer buffer){
  StringBuilder sb=new StringBuilder();
  sb.append(label);
  sb.append(" ");
  sb.append(buffer.get(0));
  sb.append(" | ");
  for (int x=0; x < 64; x++) {
    sb.append(String.format("%02X",(int)(buffer.get(x) & 0xFF)));
    sb.append(" ");
  }
  mLog.debug(sb.toString());
}

private void readObject(ObjectInputStream ois) throws ClassNotFoundException, IOException {
  ois.defaultReadObject();
  boolean hasFont=ois.readBoolean();
  if (hasFont) {
    String name=(String)ois.readObject();
    int size=ois.readInt();
    int style=ois.readInt();
    font=new Font(name,style,size);
  }
 else {
    font=OMText.DEFAULT_FONT;
  }
}

public void addFile(String filename){
  if (filename != null)   addFile(new File(filename));
}

public String format(TemporalAccessor temporal){
  StringBuilder buf=new StringBuilder(32);
  formatTo(temporal,buf);
  return buf.toString();
}

public void paintToggleButtonBackground(SynthContext context,Graphics g,int x,int y,int w,int h){
  paintBackground(context,g,x,y,w,h,null);
}

void saveDeviceProfile(@Nonnull String user,@Nonnull String realm,@Nonnull OathDeviceSettings deviceSettings) throws AuthLoginException {
  Reject.ifNull(user,realm,deviceSettings);
  try {
    devicesDao.saveDeviceProfiles(user,realm,jsonUtils.toJsonValues(Collections.singletonList(deviceSettings)));
  }
 catch (  IOException e) {
    debug.error("OathMaker.createDeviceProfile(): Unable to save device profile for user {} in realm {}",user,realm,e);
    throw new AuthLoginException(e);
  }
}

protected List<String> parametersToStringList(List<Parameter> parameters){
  List<String> list=new ArrayList<>();
  for (  Parameter parameter : parameters) {
    list.add(String.format("\"%s\"=\"%s\"",parameter.getName(),parameter.getValue()));
  }
  return list;
}

public static boolean isMatchingName(String nameA,String nameB){
  int a=nameA.length();
  int b=nameB.length();
  if (a == b) {
    return nameA.equals(nameB);
  }
 else   if (a < b - 1) {
    return nameB.endsWith(nameA) && nameB.charAt(b - a - 1) == '.';
  }
 else   if (b < a - 1) {
    return nameA.endsWith(nameB) && nameA.charAt(a - b - 1) == '.';
  }
 else {
    return false;
  }
}

private void validateWill(String dest,Object payload){
  if ((dest == null) || (payload == null)) {
    throw new IllegalArgumentException();
  }
  MqttAsyncClient.validateTopic(dest);
}

public static float ccpCalcRotate(final CGPoint from,final CGPoint to){
  float o=to.x - from.x;
  float a=to.y - from.y;
  float at=ccMacros.CC_RADIANS_TO_DEGREES((float)Math.atan(o / a));
  if (a < 0) {
    if (o < 0)     at=180 + Math.abs(at);
 else     at=180 - Math.abs(at);
  }
  return at;
}

public static String cleanTabs(String yaml){
  if (yaml.contains("\t")) {
    LOGGER.warn("Yaml contains a tab characters, automatically converting to {} spaces " + "(if they occur at the beginning of a sentence). This may cause parsing" + " errors, please reformat the Yaml to use spaces only.",TAB_AS_SPACES.length());
    List<String> lines=NEWLINE_SPLITTER.splitToList(yaml);
    StringBuilder sb=new StringBuilder();
    for (    String line : lines) {
      String cleanLine=replaceStartingTabsWithSpaces(line);
      sb.append(cleanLine);
      sb.append("\n");
    }
    return sb.toString();
  }
 else {
    return yaml;
  }
}

private static Paint darkerRadialGradientPaint(RadialGradientPaint paint){
  final Color[] paintColors=paint.getColors();
  for (int i=0; i < paintColors.length; i++) {
    paintColors[i]=darker(paintColors[i]);
  }
  return new RadialGradientPaint(paint.getCenterPoint(),paint.getRadius(),paint.getFocusPoint(),paint.getFractions(),paintColors,paint.getCycleMethod(),paint.getColorSpace(),paint.getTransform());
}

private void checkAndSetFastPathStatus(){
  boolean fastPathWasOn=isFastPath;
  if ((roundingMode == RoundingMode.HALF_EVEN) && (isGroupingUsed()) && (groupingSize == 3)&& (multiplier == 1)&& (!decimalSeparatorAlwaysShown)&& (!useExponentialNotation)) {
    isFastPath=((minimumIntegerDigits == 1) && (maximumIntegerDigits >= 10));
    if (isFastPath) {
      if (isCurrencyFormat) {
        if ((minimumFractionDigits != 2) || (maximumFractionDigits != 2))         isFastPath=false;
      }
 else       if ((minimumFractionDigits != 0) || (maximumFractionDigits != 3))       isFastPath=false;
    }
  }
 else   isFastPath=false;
  if (isFastPath) {
    if (fastPathData == null)     fastPathData=new FastPathData();
    fastPathData.zeroDelta=symbols.getZeroDigit() - '0';
    fastPathData.groupingChar=symbols.getGroupingSeparator();
    fastPathData.fractionalMaxIntBound=(isCurrencyFormat) ? 99 : 999;
    fastPathData.fractionalScaleFactor=(isCurrencyFormat) ? 100.0d : 1000.0d;
    fastPathData.positiveAffixesRequired=(positivePrefix.length() != 0) || (positiveSuffix.length() != 0);
    fastPathData.negativeAffixesRequired=(negativePrefix.length() != 0) || (negativeSuffix.length() != 0);
    int maxNbIntegralDigits=10;
    int maxNbGroups=3;
    int containerSize=Math.max(positivePrefix.length(),negativePrefix.length()) + maxNbIntegralDigits + maxNbGroups+ 1+ maximumFractionDigits+ Math.max(positiveSuffix.length(),negativeSuffix.length());
    fastPathData.fastPathContainer=new char[containerSize];
    fastPathData.charsPositiveSuffix=positiveSuffix.toCharArray();
    fastPathData.charsNegativeSuffix=negativeSuffix.toCharArray();
    fastPathData.charsPositivePrefix=positivePrefix.toCharArray();
    fastPathData.charsNegativePrefix=negativePrefix.toCharArray();
    int longestPrefixLength=Math.max(positivePrefix.length(),negativePrefix.length());
    int decimalPointIndex=maxNbIntegralDigits + maxNbGroups + longestPrefixLength;
    fastPathData.integralLastIndex=decimalPointIndex - 1;
    fastPathData.fractionalFirstIndex=decimalPointIndex + 1;
    fastPathData.fastPathContainer[decimalPointIndex]=isCurrencyFormat ? symbols.getMonetaryDecimalSeparator() : symbols.getDecimalSeparator();
  }
 else   if (fastPathWasOn) {
    fastPathData.fastPathContainer=null;
    fastPathData.charsPositiveSuffix=null;
    fastPathData.charsNegativeSuffix=null;
    fastPathData.charsPositivePrefix=null;
    fastPathData.charsNegativePrefix=null;
  }
  fastPathCheckNeeded=false;
}

public void test_keyBuilder_ascii_order(){
  KeyBuilder keyBuilder=(KeyBuilder)KeyBuilder.newInstance();
  KVO<String>[] a=new KVO[]{new KVO<String>(TestKeyBuilder.asSortKey("bro"),null,"bro"),new KVO<String>(TestKeyBuilder.asSortKey("brown"),null,"brown"),new KVO<String>(TestKeyBuilder.asSortKey("bre"),null,"bre"),new KVO<String>(TestKeyBuilder.asSortKey("break"),null,"break")};
  Arrays.sort(a);
  assertEquals("bre",a[0].obj);
  assertEquals("break",a[1].obj);
  assertEquals("bro",a[2].obj);
  assertEquals("brown",a[3].obj);
}

public boolean isClickTouchScreen(){
  String s=DeviceInfo.getSoftwareVersion();
  if (s.length() > 0) {
    int v=Integer.parseInt(s.substring(0,1));
    return v <= 5;
  }
  return false;
}

public DOMTestDocumentBuilderFactory newInstance(DocumentBuilderSetting[] newSettings) throws DOMTestIncompatibleException {
  if (newSettings == null) {
    return this;
  }
  DocumentBuilderSetting[] mergedSettings=mergeSettings(newSettings);
  return new LSDocumentBuilderFactory(mergedSettings);
}

public void reset(){
  index=0;
  if (file != null) {
    listIndex=0;
    if (!written) {
      writeAllRows();
      written=true;
    }
    list.clear();
    file.seek(FileStore.HEADER_LENGTH);
  }
}

public void add(GeometryFunction func){
  functions.add(func);
  sortedFunctions.put(func.getName(),func);
  categorizedFunctions.put(func.getCategory(),func.getName(),func);
  if (hasGeometryResult(func))   categorizedGeometryFunctions.put(func.getCategory(),func.getName(),func);
}

public void fireStateChanged(){
  ChangeEvent e=new ChangeEvent(this);
  for (  ChangeListener listener : listeners) {
    listener.stateChanged(e);
  }
}

public static Clusters convertToClusters(Graph clusterGraph,List<Node> measuredVariables){
  List<String> latents=new ArrayList<>();
  Clusters clusters=new Clusters();
  clusterGraph=GraphUtils.replaceNodes(clusterGraph,measuredVariables);
  for (  Node node : clusterGraph.getNodes()) {
    if (!measuredVariables.contains(node)) {
      latents.add(node.getName());
    }
  }
  Collections.sort(latents);
  for (int i=0; i < latents.size(); i++) {
    String name=latents.get(i);
    clusters.setClusterName(i,name);
    Node latent=clusterGraph.getNode(name);
    List<Node> measured=clusterGraph.getNodesOutTo(latent,Endpoint.ARROW);
    for (    Node _node : measured) {
      if (measuredVariables.contains(_node)) {
        clusters.addToCluster(i,_node.getName());
      }
    }
  }
  return clusters;
}

final short rlshort(DataInputStream dis) throws IOException {
  short s=0;
  short high, low;
  s=dis.readShort();
  high=(short)((s & 0xFF) << 8);
  low=(short)((s & 0xFF00) >>> 8);
  s=(short)(high | low);
  return s;
}

public void encodeCell(mxICell cell,Node node,boolean includeChildren){
  node.appendChild(encode(cell));
  if (includeChildren) {
    int childCount=cell.getChildCount();
    for (int i=0; i < childCount; i++) {
      encodeCell(cell.getChildAt(i),node,includeChildren);
    }
  }
}

public DateTimeFormatter withLocale(Locale locale){
  if (locale == getLocale() || (locale != null && locale.equals(getLocale()))) {
    return this;
  }
  return new DateTimeFormatter(iPrinter,iParser,locale,iOffsetParsed,iChrono,iZone,iPivotYear,iDefaultYear);
}

public void testIterate(){
  final Range range=createRange(1,5);
  int next=1;
  final Iterator iter=range.iterator();
  while (iter.hasNext()) {
    final Object value=iter.next();
    assertEquals("wrong next value",createValue(next++),value);
  }
  assertEquals("wrong number of elements in iteration",6,next);
  try {
    iter.next();
    fail("successfully got element from exhausted iterator");
  }
 catch (  NoSuchElementException ignore) {
  }
}

public String nextString(char quote) throws JSONException {
  char c;
  StringBuilder sb=new StringBuilder();
  for (; ; ) {
    c=next();
switch (c) {
case 0:
case '\n':
case '\r':
      throw syntaxError("Unterminated string");
case '\\':
    c=next();
switch (c) {
case 'b':
    sb.append('\b');
  break;
case 't':
sb.append('\t');
break;
case 'n':
sb.append('\n');
break;
case 'f':
sb.append('\f');
break;
case 'r':
sb.append('\r');
break;
case 'u':
sb.append((char)Integer.parseInt(next(4),16));
break;
case '"':
case '\'':
case '\\':
case '/':
sb.append(c);
break;
default :
throw syntaxError("Illegal escape.");
}
break;
default :
if (c == quote) {
return sb.toString();
}
sb.append(c);
}
}
}

public static Response parseXML(String xml) throws SAMLException {
  Document doc=XMLUtils.toDOMDocument(xml,SAMLUtils.debug);
  Element root=doc.getDocumentElement();
  return new Response(root);
}

public static void d(String tag,String msg,Object... args){
  if (sLevel > LEVEL_DEBUG) {
    return;
  }
  if (args.length > 0) {
    msg=String.format(msg,args);
  }
  Log.d(tag,msg);
}

public CompiledSQL registerParamType(String paramName,String dataType){
  if (paramTypes == null) {
    paramTypes=new HashMap();
  }
  paramTypes.put(paramName,dataType);
  return this;
}

public void beginStep(int step,String stepTitle,Logging logger){
  setProcessed(step - 1);
  this.stepTitle=stepTitle;
  logger.progress(this);
}

public boolean equals(Object obj){
  if (this == obj) {
    return true;
  }
 else   if (!(obj instanceof MethodDesc)) {
    return false;
  }
  MethodDesc od=(MethodDesc)obj;
  return ((name == null ? od.name == null : name.equals(od.name)) && Arrays.equals(types,od.types) && (constraints == null ? od.constraints == null : constraints.equals(od.constraints)));
}

public Set<String> addContent(DialogueState newState){
  if (!paused) {
    curState.addToState(newState);
    return update();
  }
 else {
    log.info("system is paused, ignoring content " + newState);
    return Collections.emptySet();
  }
}

public long removeIndex(int index){
  if (index >= size)   throw new IndexOutOfBoundsException(String.valueOf(index));
  long[] items=this.items;
  long value=items[index];
  size--;
  if (ordered)   System.arraycopy(items,index + 1,items,index,size - index);
 else   items[index]=items[size];
  return value;
}

public FDModel loadModel(String filename,String cwd){
  String fn=filename;
  if (fn == null)   return null;
  if (!fn.endsWith("." + fileExtension)) {
    fn+="." + fileExtension;
  }
  ModelPersistenceHandler persistenceHandler=createModelPersistenceHandler(resourceSetProvider.get());
  return (FDModel)persistenceHandler.loadModel(fn,cwd);
}

public boolean saveCurrentConfiguration(){
  if (currentConfig.toString() == null) {
    return (true);
  }
  int answer=JOptionPane.showConfirmDialog(null,"Save current configuration?","Save Configuration",JOptionPane.YES_NO_CANCEL_OPTION,JOptionPane.QUESTION_MESSAGE,Icons.getImageIcon("dert_24.png"));
  if (answer == JOptionPane.CANCEL_OPTION) {
    return (false);
  }
 else   if (answer == JOptionPane.NO_OPTION) {
    return (true);
  }
  return (saveCurrentConfigurationAs(false));
}

public static double[] normalise(double[] initProbs){
  for (int i=0; i < initProbs.length; i++) {
    if (initProbs[i] < 0) {
      initProbs[i]=0.0;
    }
  }
  double sum=0.0;
  for (  double prob : initProbs) {
    sum+=prob;
  }
  double[] result=new double[initProbs.length];
  if (sum > 0.001) {
    for (int i=0; i < initProbs.length; i++) {
      result[i]=initProbs[i] / sum;
    }
  }
 else {
    for (int i=0; i < initProbs.length; i++) {
      result[i]=1.0 / initProbs.length;
    }
  }
  return result;
}

public void track(File file,Object marker,FileDeleteStrategy deleteStrategy){
  if (file == null) {
    throw new NullPointerException("The file must not be null");
  }
  addTracker(file.getPath(),marker,deleteStrategy);
}

protected StringBuilder appendSearchStringParamIfNecessary(StringBuilder sb){
  String searchStringParam=getEncodedSearchStringParam();
  if (searchStringParam != null) {
    if (sb.indexOf("?") == -1) {
      sb.append('?');
    }
 else {
      sb.append('&');
    }
    sb.append(searchStringParam);
  }
  return sb;
}

public static ClassInfo findOrCreateClass(String fullName){
  ClassInfo u=findClass(fullName);
  if (u == null) {
    u=new ClassInfo(fullName);
    if (u.isArray()) {
      findOrCreateClass(fullName.substring(1));
    }
  }
  return u;
}

PlaPointRational(BigInteger p_x,BigInteger p_y,BigInteger p_z){
  rp_x=p_x;
  rp_y=p_y;
  rp_z=p_z;
  is_nan=p_z.signum() <= 0;
}

public boolean isNullValue(){
  return StringUtils.trimToNull(value) == null && StringUtils.trimToNull(comment) == null;
}

private Map<Long,Pair<String,Long>> recoverPendingLargeMessages() throws Exception {
  Map<Long,Pair<String,Long>> largeMessages=new HashMap<>();
  List<String> filenames=largeMessagesFactory.listFiles("msg");
  List<Long> idList=new ArrayList<>();
  for (  String filename : filenames) {
    Long id=getLargeMessageIdFromFilename(filename);
    if (!largeMessagesToDelete.contains(id)) {
      idList.add(id);
      SequentialFile seqFile=largeMessagesFactory.createSequentialFile(filename);
      long size=seqFile.size();
      largeMessages.put(id,new Pair<>(filename,size));
    }
  }
  return largeMessages;
}

private void checkForFragmentID(Attributes attributes){
  if (!m_shouldProcess) {
    if ((null != attributes) && (null != m_fragmentIDString)) {
      int n=attributes.getLength();
      for (int i=0; i < n; i++) {
        String name=attributes.getQName(i);
        if (name.equals(Constants.ATTRNAME_ID)) {
          String val=attributes.getValue(i);
          if (val.equalsIgnoreCase(m_fragmentIDString)) {
            m_shouldProcess=true;
            m_fragmentID=m_elementID;
          }
        }
      }
    }
  }
}

public void unparsedEntityDecl(String name,XMLResourceIdentifier identifier,String notation,Augmentations augs) throws XNIException {
  try {
    if (fDTDHandler != null) {
      String publicId=identifier.getPublicId();
      String systemId=fResolveDTDURIs ? identifier.getExpandedSystemId() : identifier.getLiteralSystemId();
      fDTDHandler.unparsedEntityDecl(name,publicId,systemId,notation);
    }
  }
 catch (  SAXException e) {
    throw new XNIException(e);
  }
}

public void waitForPaxosToFinish(){
  proposeLock.lock();
  canPropose.awaitUninterruptibly();
  proposeLock.unlock();
}

public static ResponseData parse(String responseData){
  int index=responseData.indexOf(':');
  String mainData, extraData;
  if (-1 == index) {
    mainData=responseData;
    extraData="";
  }
 else {
    mainData=responseData.substring(0,index);
    extraData=index >= responseData.length() ? "" : responseData.substring(index + 1);
  }
  String[] fields=TextUtils.split(mainData,Pattern.quote("|"));
  if (fields.length < 6) {
    throw new IllegalArgumentException("Wrong number of fields.");
  }
  ResponseData data=new ResponseData();
  data.extra=extraData;
  data.responseCode=Integer.parseInt(fields[0]);
  data.nonce=Integer.parseInt(fields[1]);
  data.packageName=fields[2];
  data.versionCode=fields[3];
  data.userId=fields[4];
  data.timestamp=Long.parseLong(fields[5]);
  return data;
}

public static double[] vectorBoxCorner(double[] center,double[] result,double distance,boolean upperRight){
  if (result == null || result.length != center.length) {
    result=new double[center.length];
  }
  if (upperRight == false) {
    distance=-distance;
  }
  distance=SIN_PI_DIV_4 * distance;
  for (int i=0; i < center.length; i++) {
    result[i]=center[i] + distance;
  }
  return result;
}

public void testSetLoginConfigAdding() throws Exception {
  String xml=WEBAPP_TEST_HEADER + "</web-app>";
  WebXml webXml=WebXmlIo.parseWebXml(new ByteArrayInputStream(xml.getBytes("UTF-8")),getEntityResolver());
  WebXmlUtils.setLoginConfig(webXml,"BASIC","Test Realm");
  assertTrue(WebXmlUtils.hasLoginConfig(webXml));
  assertEquals("BASIC",WebXmlUtils.getLoginConfigAuthMethod(webXml));
}

public void validate() throws AMConsoleException {
  if (isSelected()) {
    if (isPersonalQuestion()) {
      if ((question.length() == 0) || (answer.length() == 0)) {
        throw new AMConsoleException("user.password.reset.missing.personal.question.answer.message");
      }
    }
 else {
      if (answer.length() == 0) {
        throw new AMConsoleException("user.password.reset.missing.answer.message");
      }
    }
  }
}

public static void assertTrue(boolean b,Object message){
  if (!b) {
    throwError(message);
  }
}

private String[] spliterator(String phrase){
  String[] split=phrase.split(" ");
  String[] out=new String[split.length];
  for (int ix=1; ix < split.length; ix++) {
    String temp=split[ix - 1];
    temp+=" " + split[ix];
    out[ix - 1]=temp;
  }
  return out;
}

protected Signature(String algorithm){
  this.algorithm=algorithm;
}

private final void augmentTokenList(){
  Token[] temp=new Token[size + increment];
  System.arraycopy(tokenList,0,temp,0,size);
  size+=increment;
  tokenList=temp;
  for (int i=0; i < increment; i++) {
    tokenList[size - i - 1]=createInternalUseOnlyToken();
  }
}

public String calculateFromString(String data) throws Exception {
  log.trace("Calculating digest with algorithm URI '{}' for data:\n{}",algoURI,data);
  return calculateFromBytes(data.getBytes(StandardCharsets.UTF_8));
}

public void addChannels(List<Channel> channels){
  for (  Channel channel : channels) {
    addChannel(channel);
  }
}

public static String[] mergeStringArrays(String[] array1,String[] array2){
  if (ObjectUtils.isEmpty(array1)) {
    return array2;
  }
  if (ObjectUtils.isEmpty(array2)) {
    return array1;
  }
  List<String> result=new ArrayList<String>();
  result.addAll(Arrays.asList(array1));
  for (  String str : array2) {
    if (!result.contains(str)) {
      result.add(str);
    }
  }
  return toStringArray(result);
}

public void testRunAfterBoth_exceptionalCompletion() throws Throwable {
  for (  ExecutionMode m : ExecutionMode.values())   for (  boolean fFirst : new boolean[]{true,false})   for (  boolean failFirst : new boolean[]{true,false})   for (  Integer v1 : new Integer[]{1,null}) {
    final CompletableFuture<Integer> f=new CompletableFuture<>();
    final CompletableFuture<Integer> g=new CompletableFuture<>();
    final CFException ex=new CFException();
    final Noop r1=new Noop(m);
    final Noop r2=new Noop(m);
    final Noop r3=new Noop(m);
    final CompletableFuture<Integer> fst=fFirst ? f : g;
    final CompletableFuture<Integer> snd=!fFirst ? f : g;
    final Callable<Boolean> complete1=failFirst ? null : null;
    final Callable<Boolean> complete2=failFirst ? null : null;
    final CompletableFuture<Void> h1=m.runAfterBoth(f,g,r1);
    assertTrue(complete1.call());
    final CompletableFuture<Void> h2=m.runAfterBoth(f,g,r2);
    checkIncomplete(h1);
    checkIncomplete(h2);
    assertTrue(complete2.call());
    final CompletableFuture<Void> h3=m.runAfterBoth(f,g,r3);
    checkCompletedWithWrappedException(h1,ex);
    checkCompletedWithWrappedException(h2,ex);
    checkCompletedWithWrappedException(h3,ex);
    r1.assertNotInvoked();
    r2.assertNotInvoked();
    r3.assertNotInvoked();
    checkCompletedNormally(failFirst ? snd : fst,v1);
    checkCompletedExceptionally(failFirst ? fst : snd,ex);
  }
}

private double damp(double value){
  return Math.sqrt(value);
}

public void addMeasurement(double measurement){
  double keepConstant=1 - mDecayConstant;
  if (mCount > mCutover) {
    mValue=Math.exp(keepConstant * Math.log(mValue) + mDecayConstant * Math.log(measurement));
  }
 else   if (mCount > 0) {
    double retained=keepConstant * mCount / (mCount + 1.0);
    double newcomer=1.0 - retained;
    mValue=Math.exp(retained * Math.log(mValue) + newcomer * Math.log(measurement));
  }
 else {
    mValue=measurement;
  }
  mCount++;
}

@SuppressWarnings("fallthrough") private String nextUnquotedValue() throws IOException {
  StringBuilder builder=null;
  int i=0;
  findNonLiteralCharacter:   while (true) {
    for (; pos + i < limit; i++) {
switch (buffer[pos + i]) {
case '/':
case '\\':
case ';':
case '#':
case '=':
        checkLenient();
case '{':
case '}':
case '[':
case ']':
case ':':
case ',':
case ' ':
case '\t':
case '\f':
case '\r':
case '\n':
      break findNonLiteralCharacter;
  }
}
if (i < buffer.length) {
  if (fillBuffer(i + 1)) {
    continue;
  }
 else {
    break;
  }
}
if (builder == null) {
  builder=new StringBuilder();
}
builder.append(buffer,pos,i);
pos+=i;
i=0;
if (!fillBuffer(1)) {
  break;
}
}
String result;
if (builder == null) {
result=new String(buffer,pos,i);
}
 else {
builder.append(buffer,pos,i);
result=builder.toString();
}
pos+=i;
return result;
}

public long arg_end(){
  return Long.parseLong(fields[48]);
}

static List<IRuntimeClasspathEntry> computeClasspath(IJavaProject javaProject) throws CoreException {
  IRuntimeClasspathEntry[] unresolvedRuntimeClasspath=JavaRuntime.computeUnresolvedRuntimeClasspath(javaProject);
  List<IRuntimeClasspathEntry> resolvedRuntimeClasspath=new ArrayList<IRuntimeClasspathEntry>();
  for (  IRuntimeClasspathEntry unresolvedClasspathEntry : unresolvedRuntimeClasspath) {
    if (JavaRuntime.isVMInstallReference(unresolvedClasspathEntry)) {
      continue;
    }
    resolvedRuntimeClasspath.addAll(Arrays.asList(JavaRuntime.resolveRuntimeClasspathEntry(unresolvedClasspathEntry,javaProject)));
  }
  try {
    resolvedRuntimeClasspath.addAll(0,GWTProjectUtilities.getGWTSourceFolderPathsFromProjectAndDependencies(javaProject,false));
  }
 catch (  SdkException e) {
    throw new CoreException(new Status(IStatus.ERROR,GWTPlugin.PLUGIN_ID,e.getLocalizedMessage(),e));
  }
  GwtSdk gwtRuntime=GwtSdk.findSdkFor(javaProject);
  if (gwtRuntime == null) {
    GWTPluginLog.logWarning("Unable to find GWT runtime for project " + javaProject.getElementName() + ", will try to continue GWT compilation..");
    return resolvedRuntimeClasspath;
  }
  IStatus validationStatus=gwtRuntime.validate();
  if (!validationStatus.isOK()) {
    GWTPluginLog.logWarning("GWT runtime for project " + javaProject.getElementName() + " is not valid: "+ validationStatus.getMessage()+ ". Will attempt to proceed with GWT compilation anyway.");
    return resolvedRuntimeClasspath;
  }
  try {
    File gwtDevJar=gwtRuntime.getDevJar();
    resolvedRuntimeClasspath.add(JavaRuntime.newArchiveRuntimeClasspathEntry(Path.fromOSString(gwtDevJar.getAbsolutePath())));
  }
 catch (  SdkException e) {
    GWTPluginLog.logWarning(e,"Unable to add gwt-dev.jar to the compiler's classpath; will attempt GWT compilation anyway.");
  }
  return resolvedRuntimeClasspath;
}

@SuppressWarnings("unchecked") public ThrowingMockTokenFilterFactory(Map<String,String> args){
  super(args);
  String exceptionClassName=args.get("exceptionClassName");
  if (exceptionClassName == null) {
    throw new RuntimeException("Required parameter exceptionClassName is missing");
  }
  try {
    exceptionClass=(Class<? extends RuntimeException>)Class.forName(exceptionClassName);
  }
 catch (  ClassNotFoundException e) {
    throw new RuntimeException(e);
  }
}

public boolean isNavigationAtBottom(){
  return (mSmallestWidthDp >= 600 || mInPortrait);
}

public PatternGuardExpr(String namespace,String name,List<Expression> parameters,PatternExpr guardedPattern){
  super(namespace,name,parameters);
  this.guarded=new ArrayList<PatternExpr>();
  guarded.add(guardedPattern);
}

private long startNewTrack(){
  if (isRecording()) {
    Log.d(TAG,"Ignore startNewTrack. Already recording.");
    return -1L;
  }
  long now=System.currentTimeMillis();
  trackTripStatisticsUpdater=new TripStatisticsUpdater(now);
  markerTripStatisticsUpdater=new TripStatisticsUpdater(now);
  Track track=new Track();
  Uri uri=myTracksProviderUtils.insertTrack(track);
  long trackId=Long.parseLong(uri.getLastPathSegment());
  updateRecordingState(trackId,false);
  PreferencesUtils.setInt(this,R.string.auto_resume_track_current_retry_key,0);
  PreferencesUtils.setInt(this,R.string.activity_recognition_type_key,PreferencesUtils.ACTIVITY_RECOGNITION_TYPE_DEFAULT);
  track.setId(trackId);
  track.setName(TrackNameUtils.getTrackName(this,trackId,now,null));
  String category=PreferencesUtils.getString(this,R.string.default_activity_key,PreferencesUtils.DEFAULT_ACTIVITY_DEFAULT);
  track.setCategory(category);
  track.setIcon(TrackIconUtils.getIconValue(this,category));
  track.setTripStatistics(trackTripStatisticsUpdater.getTripStatistics());
  myTracksProviderUtils.updateTrack(track);
  insertWaypoint(WaypointCreationRequest.DEFAULT_START_TRACK);
  startRecording(true);
  return trackId;
}

protected AbstractMRMessage pollMessage(){
  if (disablePoll) {
    return null;
  }
  if (!pollQueue.isEmpty()) {
    PollMessage pm=pollQueue.peek();
    if (pm != null) {
      return pm.getMessage();
    }
  }
  return null;
}

public static byte[] readFully(InputStream in) throws IOException {
  try {
    return readFullyNoClose(in);
  }
  finally {
    in.close();
  }
}

private boolean isSuppressWarningsTest(String baseName){
  return baseName.equals("suppress_warnings");
}

protected static String applyLimitClause(final String query,int limit,final int queryResultSetLimit){
  Matcher matcher=SELECT_EXPR_PATTERN.matcher(query);
  if (matcher.matches()) {
    Matcher limit_matcher=SELECT_WITH_LIMIT_EXPR_PATTERN.matcher(query);
    boolean queryAlreadyHasLimitClause=limit_matcher.matches();
    if (!queryAlreadyHasLimitClause) {
      if (limit == 0) {
        limit=queryResultSetLimit;
      }
      String result=query;
      result+=" LIMIT " + limit;
      return result;
    }
  }
  return query;
}

public void unmaximiseComponent(){
  if (maximisedComponent == null) {
    return;
  }
  container.remove(maximisedComponent);
  container.add(containerChild);
  parentMaximisedComponent.add(maximisedComponent);
  container.validate();
  containerChild=null;
  parentMaximisedComponent=null;
  maximisedComponent=null;
}

default CharSeq join(CharSequence delimiter,CharSequence prefix,CharSequence suffix){
  StringBuilder stringBuilder=new StringBuilder(prefix);
  forEach(null);
  stringBuilder.append(suffix);
  return CharSeq.of(stringBuilder.toString());
}

public void removeListener(T listener){
  if (listeners != null) {
    List<T> newlisteners=new ArrayList<T>();
    newlisteners.addAll(listeners);
    newlisteners.remove(listener);
    listeners=newlisteners;
  }
}

public static void saveAsASCII(NSArray root,File out) throws IOException {
  OutputStreamWriter w=new OutputStreamWriter(new FileOutputStream(out),"ASCII");
  w.write(root.toASCIIPropertyList());
  w.close();
}

public XSWildcardDecl performIntersectionWith(XSWildcardDecl wildcard,short processContents){
  if (wildcard == null)   return null;
  XSWildcardDecl intersectWildcard=new XSWildcardDecl();
  intersectWildcard.fProcessContents=processContents;
  if (areSame(wildcard)) {
    intersectWildcard.fType=fType;
    intersectWildcard.fNamespaceList=fNamespaceList;
  }
 else   if ((fType == NSCONSTRAINT_ANY) || (wildcard.fType == NSCONSTRAINT_ANY)) {
    XSWildcardDecl other=this;
    if (fType == NSCONSTRAINT_ANY)     other=wildcard;
    intersectWildcard.fType=other.fType;
    intersectWildcard.fNamespaceList=other.fNamespaceList;
  }
 else   if (((fType == NSCONSTRAINT_NOT) && (wildcard.fType == NSCONSTRAINT_LIST)) || ((fType == NSCONSTRAINT_LIST) && (wildcard.fType == NSCONSTRAINT_NOT))) {
    String[] list=null;
    String[] other=null;
    if (fType == NSCONSTRAINT_NOT) {
      other=fNamespaceList;
      list=wildcard.fNamespaceList;
    }
 else {
      other=wildcard.fNamespaceList;
      list=fNamespaceList;
    }
    int listSize=list.length;
    String[] intersect=new String[listSize];
    int newSize=0;
    for (int i=0; i < listSize; i++) {
      if (list[i] != other[0] && list[i] != ABSENT)       intersect[newSize++]=list[i];
    }
    intersectWildcard.fType=NSCONSTRAINT_LIST;
    intersectWildcard.fNamespaceList=new String[newSize];
    System.arraycopy(intersect,0,intersectWildcard.fNamespaceList,0,newSize);
  }
 else   if ((fType == NSCONSTRAINT_LIST) && (wildcard.fType == NSCONSTRAINT_LIST)) {
    intersectWildcard.fType=NSCONSTRAINT_LIST;
    intersectWildcard.fNamespaceList=intersect2sets(fNamespaceList,wildcard.fNamespaceList);
  }
 else   if (fType == NSCONSTRAINT_NOT && wildcard.fType == NSCONSTRAINT_NOT) {
    if (fNamespaceList[0] != ABSENT && wildcard.fNamespaceList[0] != ABSENT)     return null;
    XSWildcardDecl other=this;
    if (fNamespaceList[0] == ABSENT)     other=wildcard;
    intersectWildcard.fType=other.fType;
    intersectWildcard.fNamespaceList=other.fNamespaceList;
  }
  return intersectWildcard;
}

public static void filterOutbound(StringBuilder message){
  for (int i=0; i < message.length(); i++) {
    char currentChar=message.charAt(i);
    if (LEGAL_CHARACTERS.indexOf(currentChar) == -1) {
      if (currentChar > 256) {
        int charAsInt=currentChar;
        String stringVersion=Integer.toString(charAsInt,16);
        String replacement="&#x" + stringVersion + ";";
        message.replace(i,i + 1,replacement);
        i+=replacement.length() - 1;
      }
 else {
        message.deleteCharAt(i);
        i--;
      }
    }
  }
}

private void drawDays(Canvas canvas){
  final TextPaint p=mDayPaint;
  final int headerHeight=mMonthHeight + mDayOfWeekHeight;
  final int rowHeight=mDayHeight;
  final int colWidth=mCellWidth;
  final float halfLineHeight=(p.ascent() + p.descent()) / 2f;
  int rowCenter=headerHeight + rowHeight / 2;
  for (int day=1, col=findDayOffset(); day <= mDaysInMonth; day++) {
    final int colCenter=colWidth * col + colWidth / 2;
    final int colCenterRtl;
    if (ViewCompatUtils.isLayoutRtl(this)) {
      colCenterRtl=mPaddedWidth - colCenter;
    }
 else {
      colCenterRtl=colCenter;
    }
    int state=0;
    final boolean isDayEnabled=isDayEnabled(day);
    final boolean isDayActivated=mActivatedDay == day;
    if (isDayActivated) {
      state=VIEW_STATE_SELECTED;
      canvas.drawCircle(colCenterRtl,rowCenter,mDaySelectorRadius,mDaySelectorPaint);
    }
 else     if (mTouchedItem == day) {
      state=VIEW_STATE_PRESSED;
      if (isDayEnabled) {
        canvas.drawCircle(colCenterRtl,rowCenter,mDaySelectorRadius,mDayHighlightPaint);
      }
    }
    final boolean isDayToday=mToday == day;
    final int dayTextColor;
    if (isDayToday && !isDayActivated) {
      dayTextColor=mDaySelectorPaint.getColor();
    }
 else {
      final int[] stateSet=buildState(isDayEnabled,state);
      dayTextColor=mDayTextColor.getColorForState(stateSet,0);
    }
    p.setColor(dayTextColor);
    canvas.drawText(mDayFormatter.format(day),colCenterRtl,rowCenter - halfLineHeight,p);
    col++;
    if (col == DAYS_IN_WEEK) {
      col=0;
      rowCenter+=rowHeight;
    }
  }
}

public void comment(char ch[],int start,int length) throws org.xml.sax.SAXException {
  if (ch == null || start < 0 || length >= (ch.length - start) || length < 0)   return;
  append(m_doc.createComment(new String(ch,start,length)));
}

public boolean isEmpty(){
  return arrayList.isEmpty();
}

public ArbitraryLengthPathNode(final TermNode left,final TermNode right,final VarNode tVarLeft,final VarNode tVarRight,final PathMod mod){
  this(new BOp[]{new JoinGroupNode()},NV.asMap(new NV(Annotations.LEFT_TERM,left),new NV(Annotations.RIGHT_TERM,right),new NV(Annotations.TRANSITIVITY_VAR_LEFT,tVarLeft),new NV(Annotations.TRANSITIVITY_VAR_RIGHT,tVarRight),new NV(Annotations.LOWER_BOUND,mod == PathMod.ONE_OR_MORE ? 1L : 0L),new NV(Annotations.UPPER_BOUND,mod == PathMod.ZERO_OR_ONE ? 1L : Long.MAX_VALUE)));
  final Set<VarNode> dropVars=new LinkedHashSet<>();
  dropVars.add(tVarLeft);
  dropVars.add(tVarRight);
  setProperty(Annotations.DROP_VARS,dropVars);
}

static void checkFlags(int flags){
  int allowedFlags=READ_ONLY_FLAG_MASK | EMPTY_FLAG_MASK | COMPACT_FLAG_MASK| ORDERED_FLAG_MASK;
  int flagsMask=~allowedFlags;
  if ((flags & flagsMask) > 0) {
    throw new SketchesArgumentException("Possible corruption: Invalid flags field: " + Integer.toBinaryString(flags));
  }
}

public boolean canGetInt(){
  return canGet(int.class);
}

public static ArrayList<Object> deleteItemSets(ArrayList<Object> itemSets,int minSupport,int maxSupport){
  ArrayList<Object> newVector=new ArrayList<Object>(itemSets.size());
  for (int i=0; i < itemSets.size(); i++) {
    LabeledItemSet current=(LabeledItemSet)itemSets.get(i);
    if ((current.m_ruleSupCounter >= minSupport) && (current.m_ruleSupCounter <= maxSupport)) {
      newVector.add(current);
    }
  }
  return newVector;
}

private static synchronized String makeDateString(Date date){
  return sdfDefault.format(date);
}

public static String generateNativeGuid(DbClient dbClient,FileShare fileShare) throws IOException {
  StorageSystem device=dbClient.queryObject(StorageSystem.class,fileShare.getStorageDevice());
  return String.format("%s+%s+" + FILESYSTEM + "+%s",_deviceTypeMap.get(device.getSystemType()),device.getSerialNumber(),fileShare.getNativeId());
}

public String toString(){
  StringBuffer result=new StringBuffer();
  int temp;
  temp=ipAddress & 0x000000FF;
  result.append(temp);
  result.append(".");
  temp=(ipAddress >> 8) & 0x000000FF;
  result.append(temp);
  result.append(".");
  temp=(ipAddress >> 16) & 0x000000FF;
  result.append(temp);
  result.append(".");
  temp=(ipAddress >> 24) & 0x000000FF;
  result.append(temp);
  return result.toString();
}

public void logPurchase(BigDecimal purchaseAmount,Currency currency,Bundle parameters){
  if (purchaseAmount == null) {
    notifyDeveloperError("purchaseAmount cannot be null");
    return;
  }
 else   if (currency == null) {
    notifyDeveloperError("currency cannot be null");
    return;
  }
  if (parameters == null) {
    parameters=new Bundle();
  }
  parameters.putString(AppEventsConstants.EVENT_PARAM_CURRENCY,currency.getCurrencyCode());
  logEvent(AppEventsConstants.EVENT_NAME_PURCHASED,purchaseAmount.doubleValue(),parameters);
  eagerFlush();
}

private static double distance(Point p1,Point p2){
  double x=p1.x - p2.x;
  double y=p1.y - p2.y;
  return Math.sqrt(x * x + y * y);
}

public void addHyperedgeInNode(HyperEdge hyperEdge){
  if (hyperEdge != null) {
    if (null == hyperedges)     hyperedges=new ArrayList<>();
    hyperedges.add(hyperEdge);
    semiringPlus(hyperEdge);
  }
}

public RotatedProblems(){
  super();
}

public DockerPortMapping withHostPort(int hostPort){
  DockerPortMapping newMapping=new DockerPortMapping();
  newMapping.protocol=protocol;
  newMapping.containerPort=containerPort;
  newMapping.hostIp=hostIp;
  newMapping.hostPort=String.valueOf(hostPort);
  return newMapping;
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return ID1;
case 2:
  return ID2;
default :
return null;
}
}

@Override public int length(){
  return str.length();
}

public void clearAllHaptics(){
  mHaptics.clear();
}

public void encode(final ActiveMQBuffer buffer){
  buffer.writeString(name);
  buffer.writeString(factoryClassName);
  buffer.writeInt(params == null ? 0 : params.size());
  if (params != null) {
    encodeMap(buffer,params);
  }
  if (extraProps != null) {
    encodeMap(buffer,extraProps);
  }
}

@Override public void write(byte[] b,int off,int len) throws IOException {
  flushBits();
  out.write(b,off,len);
}

public static double log2(double x){
  return Math.log(x) / LOG2;
}

boolean isNameUsed(String name){
  List<Integer> columnsWithName=columnNames.get(name);
  return columnsWithName != null && !columnsWithName.isEmpty();
}

public StateInteractive complete(){
  if (return_state != this && actlog != null) {
    actlog.start_scope(LogfileScope.COMPLETE_SCOPE);
  }
  return return_state;
}

private WorkQueue findNonEmptyStealQueue(){
  WorkQueue[] ws;
  int wl;
  int r=TLRandom.nextSecondarySeed();
  if ((ws=workQueues) != null && (wl=ws.length) > 0) {
    int m=wl - 1, origin=r & m;
    for (int k=origin, oldSum=0, checkSum=0; ; ) {
      WorkQueue q;
      int b;
      if ((q=ws[k]) != null) {
        if ((b=q.base) - q.top < 0)         return q;
        checkSum+=b;
      }
      if ((k=(k + 1) & m) == origin) {
        if (oldSum == (oldSum=checkSum))         break;
        checkSum=0;
      }
    }
  }
  return null;
}

public void testPseudoLegalMoves() throws ChessParseError {
  String fen="8/3k4/8/2n2pP1/1P6/1NB5/2QP4/R3K2R w KQ f6 0 2";
  Position pos=TextIO.readFEN(fen);
  assertEquals(fen,TextIO.toFEN(pos));
  List<String> strMoves=getMoveList(pos,false);
  assertTrue(strMoves.contains("Ra1-d1"));
  assertTrue(!strMoves.contains("Ra1-e1"));
  assertTrue(!strMoves.contains("Ra1-f1"));
  assertTrue(strMoves.contains("Ra1-a7+"));
  assertTrue(strMoves.contains("Ke1-f2"));
  assertTrue(!strMoves.contains("Ke1-g3"));
  assertTrue(strMoves.contains("Bc3-f6"));
  assertTrue(!strMoves.contains("Nb3xd2"));
  assertTrue(strMoves.contains("O-O"));
  assertTrue(strMoves.contains("O-O-O"));
  assertEquals(49,strMoves.size());
  pos.setPiece(Position.getSquare(4,3),Piece.BROOK);
  strMoves=getMoveList(pos,false);
  assertTrue(!strMoves.contains("O-O"));
  assertTrue(!strMoves.contains("O-O-O"));
  pos.setPiece(Position.getSquare(4,3),Piece.EMPTY);
  pos.setPiece(Position.getSquare(5,3),Piece.BROOK);
  strMoves=getMoveList(pos,false);
  assertTrue(!strMoves.contains("O-O"));
  assertTrue(strMoves.contains("O-O-O"));
  pos.setPiece(Position.getSquare(5,3),Piece.EMPTY);
  pos.setPiece(Position.getSquare(6,3),Piece.BBISHOP);
  strMoves=getMoveList(pos,false);
  assertTrue(strMoves.contains("O-O"));
  assertTrue(!strMoves.contains("O-O-O"));
  pos.setPiece(Position.getSquare(6,3),Piece.EMPTY);
  pos.setCastleMask(1 << Position.A1_CASTLE);
  strMoves=getMoveList(pos,false);
  assertTrue(!strMoves.contains("O-O"));
  assertTrue(strMoves.contains("O-O-O"));
}

private void doDdpOrientation(Node d,Node a,Node b,Node c,Graph graph){
  List<Node> sepset=getSepset(d,c);
  if (sepset == null) {
    return;
  }
  if (sepset.contains(b)) {
    graph.setEndpoint(c,b,Endpoint.TAIL);
    if (verbose) {
      logger.log("impliedOrientations",SearchLogUtils.edgeOrientedMsg("Definite discriminating path d = " + d,graph.getEdge(b,c)));
      out.println(SearchLogUtils.edgeOrientedMsg("Definite discriminating path d = " + d,graph.getEdge(b,c)));
    }
    changeFlag=true;
  }
 else {
    if (!isArrowpointAllowed(a,b,graph)) {
      return;
    }
    if (!isArrowpointAllowed(c,b,graph)) {
      return;
    }
    graph.setEndpoint(a,b,Endpoint.ARROW);
    graph.setEndpoint(c,b,Endpoint.ARROW);
    logger.log("colliderOrientations",SearchLogUtils.colliderOrientedMsg("Definite discriminating path.. d = " + d,a,b,c));
    changeFlag=true;
  }
}

public void handleTblBootstrapResOffHrefActionRequest(RequestInvocationEvent event) throws ModelControlException {
  try {
    Map values=getValues();
    onBeforeSaveProfile(values);
    setPageSessionAttribute(PROPERTY_ATTRIBUTE,(HashMap)values);
    SMDiscoveryBootstrapRefOffEditViewBean vb=(SMDiscoveryBootstrapRefOffEditViewBean)getViewBean(SMDiscoveryBootstrapRefOffEditViewBean.class);
    unlockPageTrail();
    passPgSessionMap(vb);
    vb.populateValues((String)getDisplayFieldValue(TBL_BOOTSTRAP_RES_OFF_HREF_ACTION));
    vb.forwardTo(getRequestContext());
  }
 catch (  AMConsoleException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",e.getMessage());
  }
}

@VisibleForTesting String postRequest(long timestamp,String xml) throws RequestFailureException {
  String response=null;
  HttpURLConnection urlConnection=null;
  try {
    urlConnection=createConnection();
    setUpPostRequest(timestamp,urlConnection,xml);
    sendRequestToServer(urlConnection,xml);
    response=readResponseFromServer(urlConnection);
  }
  finally {
    if (urlConnection != null) {
      urlConnection.disconnect();
    }
  }
  return response;
}

private void generateKey() throws Exception {
  KeyGenerator keygen=KeyGenerator.getInstance(ALGO);
  SecretKey key=keygen.generateKey();
  persistKey(key);
}

public HttpRequestEvent fireHttpRequestEvent(String request,OutputStream output) throws IOException {
  HttpRequestEvent event=new HttpRequestEvent(this,request,output);
  HttpRequestListener listener;
  Vector list=(Vector)listeners.clone();
  Enumeration e=list.elements();
  while (e.hasMoreElements()) {
    listener=(HttpRequestListener)e.nextElement();
    listener.httpRequest(event);
  }
  return event;
}

private void parseRecord(Element unitNode){
  NodeList nl=unitNode.getChildNodes();
  for (int i=0; i < nl.getLength(); i++) {
    Node currNode=nl.item(i);
    if (currNode.getParentNode() != unitNode) {
      continue;
    }
    int nodeType=currNode.getNodeType();
    if (nodeType == Node.ELEMENT_NODE) {
      String nodeName=currNode.getNodeName();
      if (nodeName.equalsIgnoreCase(UNIT)) {
        parseUnit((Element)currNode,entities);
      }
 else       if (nodeName.equalsIgnoreCase(SURVIVORS)) {
        parseUnit((Element)currNode,survivors);
      }
 else       if (nodeName.equalsIgnoreCase(ALLIES)) {
        parseUnit((Element)currNode,allies);
      }
 else       if (nodeName.equalsIgnoreCase(SALVAGE)) {
        parseUnit((Element)currNode,salvage);
      }
 else       if (nodeName.equalsIgnoreCase(DEVASTATED)) {
        parseUnit((Element)currNode,devastated);
      }
 else       if (nodeName.equalsIgnoreCase(KILLS)) {
        parseKills((Element)currNode);
      }
 else       if (nodeName.equalsIgnoreCase(ENTITY)) {
        parseUnit((Element)currNode,entities);
      }
 else       if (nodeName.equalsIgnoreCase(PILOT)) {
        parsePilot((Element)currNode);
      }
    }
 else {
      continue;
    }
  }
}

public void cancel(){
synchronized (lock) {
    if (this.latency == NO_TARGET) {
      throw new IllegalStateException("Request already" + " cancelled");
    }
    if (!requests.remove(this)) {
      throw new InternalError("Latency request " + this + " not found");
    }
    if (requests.isEmpty())     requests=null;
    this.latency=NO_TARGET;
    adjustLatencyIfNeeded();
  }
}

void mergeSuccess(MergePolicy.OneMerge merge){
}

void startEventTracker(){
  List<EventTrackingService> services=getEnabledServicesForType(EventTrackingService.class);
  if (services != null && !services.isEmpty()) {
    if (eventTracker == null) {
      eventTracker=new EventTracker(context,services,foamApiKeys.wifiOnly());
    }
    if (!eventTracker.isRunning()) {
      eventTracker.start();
    }
  }
}

@Override public int preceding(int offset){
  CharacterIterator text=getText();
  checkOffset(offset,text);
  if (cachedBreakPositions == null || offset <= cachedBreakPositions[0] || offset > cachedBreakPositions[cachedBreakPositions.length - 1]) {
    cachedBreakPositions=null;
    return super.preceding(offset);
  }
 else {
    positionInCache=0;
    while (positionInCache < cachedBreakPositions.length && offset > cachedBreakPositions[positionInCache]) {
      ++positionInCache;
    }
    --positionInCache;
    text.setIndex(cachedBreakPositions[positionInCache]);
    return text.getIndex();
  }
}

protected static boolean signedFitsInNibble(int value){
  return (value >= -8) && (value <= 7);
}

@Override public void mousePressed(MouseEvent e){
  events.clear();
  if (mapDragOperationFromModifiers(e) != DnDConstants.ACTION_NONE) {
    try {
      motionThreshold=DragSource.getDragThreshold();
    }
 catch (    Exception exc) {
      motionThreshold=5;
    }
    appendEvent(e);
  }
}

public void simpleElement(String name,String value) throws IOException {
  simpleElement(null,name,null,value);
}

public static boolean isValidIPv4(String address){
  if (address.length() == 0) {
    return false;
  }
  int octet;
  int octets=0;
  String temp=address + ".";
  int pos;
  int start=0;
  while (start < temp.length() && (pos=temp.indexOf('.',start)) > start) {
    if (octets == 4) {
      return false;
    }
    try {
      octet=Integer.parseInt(temp.substring(start,pos));
    }
 catch (    NumberFormatException ex) {
      return false;
    }
    if (octet < 0 || octet > 255) {
      return false;
    }
    start=pos + 1;
    octets++;
  }
  return octets == 4;
}

private void validateDimensionCSV(SchemaInfo schemaInfo,String factTableName,String dimTableName,CarbonFile dimFile,String partitionId,CarbonDataLoadSchema schema,String delimiter) throws DataLoadingException {
  String[] columnNames=getDimColumnNames(schemaInfo,factTableName,dimTableName,partitionId,schema);
  if (null == columnNames || columnNames.length < 1) {
    return;
  }
  if (!checkAllColumnsPresent(columnNames,dimFile.getAbsolutePath(),delimiter)) {
    LOGGER.error("CSV File provided is not proper. Column names in schema and csv header are not same. " + "CSVFile Name : " + dimFile.getName());
    throw new DataLoadingException(DataProcessorConstants.CSV_VALIDATION_ERRROR_CODE,"Dimension CSV file provided is not proper. Column names in Schema and csv header are " + "not same. CSVFile Name : " + dimFile.getName());
  }
}

private DataPoint isUnique(Node from,DataPoint point,double tolerance){
  if (logger.isDebugEnabled())   logger.debug("is unique? tolerance " + tolerance + " - "+ point);
  while (from.type == Type.branch) {
    Branch branch=(Branch)from;
    double d=point.get(branch.splitDimension);
    if (Math.abs(d - branch.midPoint) < tolerance) {
      if (logger.isDebugEnabled())       logger.debug("at branch : " + branch + " - recursing both paths");
      DataPoint leftCheck=isUnique(branch.left,point,tolerance);
      DataPoint rightCheck=isUnique(branch.right,point,tolerance);
      if ((leftCheck == null) && (rightCheck == null)) {
        return null;
      }
 else {
        if (leftCheck != null) {
          return leftCheck;
        }
 else {
          return rightCheck;
        }
      }
    }
 else     if (point.getVector()[branch.splitDimension] < branch.midPoint) {
      if (logger.isDebugEnabled())       logger.debug("at branch : " + branch + " - going left");
      from=branch.left;
    }
 else {
      if (logger.isDebugEnabled())       logger.debug("at branch : " + branch + " - going right");
      from=branch.right;
    }
  }
  Leaf leaf=(Leaf)from;
  for (  DataPoint p : leaf.points) {
    for (int i=0; i < p.getDimension(); i++) {
      if (Math.abs(p.get(i) - point.get(i)) >= tolerance) {
        break;
      }
    }
    if (getDistance(p,point) < tolerance) {
      return p;
    }
  }
  return null;
}

public boolean removeTuple(Tuple t){
  Table table=t.getTable();
  if (m_sets.contains(table)) {
    return table.removeTuple(t);
  }
 else {
    return false;
  }
}

private boolean isDarkThemeSet(){
  SharedPreferences sharedPreferences=PreferenceManager.getDefaultSharedPreferences(getActivity());
  String key=getString(R.string.theme_preference_key);
  String defaultValue=getString(R.string.theme_preference_default_value);
  return Integer.valueOf(sharedPreferences.getString(key,defaultValue)) != 0;
}

public String visit(Type t,Locale locale){
  return t.accept(this,locale);
}

public synchronized void add(String name,long threadId){
  if (mFinished) {
    throw new IllegalStateException("Marker added to finished log");
  }
  mMarkers.add(new Marker(name,threadId,SystemClock.elapsedRealtime()));
}

@Deprecated public void addPrefixNSMapping(String prefix,String nsURI){
  if (nsURI.length() == 0) {
    throw new IllegalArgumentException("Cannot map empty string URI");
  }
  if (prefix.length() == 0) {
    throw new IllegalArgumentException("Cannot map empty string prefix");
  }
  if (prefix.equals(NO_NS_PREFIX)) {
    throw new IllegalArgumentException("The prefix: " + prefix + " cannot be registered, it's reserved for special internal use.");
  }
  if (prefixToNamespaceURILookup.containsKey(prefix)) {
    throw new IllegalArgumentException("The prefix: '" + prefix + "' was repeated. This is illegal.");
  }
  if (namespaceURIToPrefixLookup.containsKey(nsURI)) {
    throw new IllegalArgumentException("The namespace URI: " + nsURI + " cannot be mapped to 2 different prefixes.");
  }
  if (prefix.equals(DEFAULT_NAMESPACE_PREFIX)) {
    this.defaultNS=nsURI;
  }
 else {
    prefixToNamespaceURILookup.put(prefix,nsURI);
    namespaceURIToPrefixLookup.put(nsURI,prefix);
  }
}

protected Message createResponseMessage(){
  return new Message(1,Version.CURRENT);
}

public static void o(double a){
  o(a,Parameters.OutputFieldWidth,Parameters.OutputFracPlaces);
}

public void writeField(String name,String value) throws IOException {
  if (name == null) {
    throw new IllegalArgumentException("Name cannot be null or empty.");
  }
  out.writeBytes(PREFIX);
  out.writeBytes(boundary);
  out.writeBytes(NEWLINE);
  out.writeBytes("Content-Disposition: form-data; name=\"" + name + "\"");
  out.writeBytes(NEWLINE);
  out.writeBytes(NEWLINE);
  if (value != null) {
    out.writeBytes(value);
  }
  out.writeBytes(NEWLINE);
  out.flush();
}

public int drainTo(Collection<? super E> c){
  int result=buffer.drainTo(c);
  if (producer != null) {
    producer.wakeUp();
  }
  return result;
}

protected void grow(){
  if (dists == EMPTY_DISTS) {
    dists=new double[INITIAL_SIZE];
    ids=new int[INITIAL_SIZE];
    return;
  }
  final int len=dists.length;
  final int newlength=len + (len >> 1);
  double[] odists=dists;
  dists=new double[newlength];
  System.arraycopy(odists,0,dists,0,odists.length);
  int[] oids=ids;
  ids=new int[newlength];
  System.arraycopy(oids,0,ids,0,oids.length);
}

IgfsInputStreamImpl(IgfsContext igfsCtx,IgfsPath path,@Nullable IgfsEntryInfo fileInfo,int prefetchBlocks,int seqReadsBeforePrefetch,@Nullable IgfsSecondaryFileSystemPositionedReadable secReader,long len,int blockSize,long blocksCnt,boolean proxy){
  assert igfsCtx != null;
  assert path != null;
  this.igfsCtx=igfsCtx;
  this.path=path;
  this.fileInfo=fileInfo;
  this.prefetchBlocks=prefetchBlocks;
  this.seqReadsBeforePrefetch=seqReadsBeforePrefetch;
  this.secReader=secReader;
  this.len=len;
  this.blockSize=blockSize;
  this.blocksCnt=blocksCnt;
  this.proxy=proxy;
  log=igfsCtx.kernalContext().log(IgfsInputStream.class);
  maxLocCacheSize=(prefetchBlocks > 0 ? prefetchBlocks : 1) * 3 / 2;
  locCache=new LinkedHashMap<>(maxLocCacheSize,1.0f);
  pendingFuts=new GridConcurrentHashSet<>(prefetchBlocks > 0 ? prefetchBlocks : 1);
  igfsCtx.metrics().incrementFilesOpenedForRead();
}

public AbstractScaleOutClientIndexView(final AbstractScaleOutFederation fed,final String name,final long timestamp,final IMetadataIndex metadataIndex){
  if (fed == null)   throw new IllegalArgumentException();
  if (name == null)   throw new IllegalArgumentException();
  if (metadataIndex == null)   throw new IllegalArgumentException();
  this.fed=fed;
  this.name=name;
  this.timestamp=timestamp;
  this.metadataIndex=metadataIndex;
  this.metadataIndexMetadata=metadataIndex.getIndexMetadata();
  final AbstractClient<?> client=fed.getClient();
  this.capacity=client.getDefaultRangeQueryCapacity();
  this.batchOnly=client.getBatchApiOnly();
  this.taskTimeout=client.getTaskTimeout();
  this.readConsistent=client.isReadConsistent();
}

public boolean canSendEvent(){
  try {
    validateSendEvent();
    return true;
  }
 catch (  Exception e) {
    return false;
  }
}

public static final String capitalize(String str,char... delimiters){
  final int delimLen=delimiters == null ? -1 : delimiters.length;
  if (TextUtils.isEmpty(str) || delimLen == 0) {
    return str;
  }
  final char[] buffer=str.toCharArray();
  boolean capitalizeNext=true;
  for (int i=0; i < buffer.length; i++) {
    char ch=buffer[i];
    if (isDelimiter(ch,delimiters)) {
      capitalizeNext=true;
    }
 else     if (capitalizeNext) {
      buffer[i]=Character.toTitleCase(ch);
      capitalizeNext=false;
    }
  }
  return new String(buffer);
}

public void testCompareToNegZero(){
  byte aBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  int aSign=-1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=BigInteger.ZERO;
  assertEquals(-1,aNumber.compareTo(bNumber));
}

public void write(OutputStream out) throws SocksException, IOException {
  if (data == null) {
    Socks5Message msg;
    if (addrType == SOCKS_ATYP_DOMAINNAME)     msg=new Socks5Message(command,host,port);
 else {
      if (ip == null) {
        try {
          ip=InetAddress.getByName(host);
        }
 catch (        UnknownHostException uh_ex) {
          throw new SocksException(SocksConstants.SOCKS_JUST_ERROR);
        }
      }
      msg=new Socks5Message(command,ip,port);
    }
    data=msg.data;
  }
  out.write(data);
}

public boolean isConnected(short nodeId){
  NodeConnection nc=connections.get(nodeId);
  return (nc != null && nc.state == NodeConnectionState.CONNECTED);
}

TemplateSubPatternAssociation(ElemTemplate template,StepPattern pattern,String pat){
  m_pattern=pat;
  m_template=template;
  m_stepPattern=pattern;
  m_targetString=m_stepPattern.getTargetString();
  m_wild=m_targetString.equals("*");
}

public static byte[] compressForZlib(byte[] bytesToCompress){
  Deflater deflater=new Deflater();
  deflater.setInput(bytesToCompress);
  deflater.finish();
  byte[] bytesCompressed=new byte[Short.MAX_VALUE];
  int numberOfBytesAfterCompression=deflater.deflate(bytesCompressed);
  byte[] returnValues=new byte[numberOfBytesAfterCompression];
  System.arraycopy(bytesCompressed,0,returnValues,0,numberOfBytesAfterCompression);
  return returnValues;
}

private static ByteBuffer generateWavData(int sampleCount,int freqHz){
  final int numDataBytes=sampleCount * NUM_CHANNELS * BITS_PER_SAMPLE / 8;
  final double freq=freqHz;
  ByteBuffer buf=ByteBuffer.allocate(numDataBytes);
  buf.order(ByteOrder.LITTLE_ENDIAN);
  if (BITS_PER_SAMPLE == 8) {
    final double peak=127.0;
    for (int i=0; i < sampleCount; i++) {
      double timeSec=i / (double)SAMPLE_RATE;
      double sinValue=Math.sin(2 * Math.PI * freq* timeSec);
      if (GameSurfaceRenderer.EXTRA_CHECK) {
        int output=(int)(peak * sinValue + 127.0);
        if (output < 0 || output >= 256) {
          throw new RuntimeException("bad byte gen");
        }
      }
      buf.put((byte)(peak * sinValue + 127.0));
    }
  }
 else   if (BITS_PER_SAMPLE == 16) {
    final double peak=32767.0;
    ShortBuffer sbuf=buf.asShortBuffer();
    for (int i=0; i < sampleCount; i++) {
      double timeSec=i / (double)SAMPLE_RATE;
      double sinValue=Math.sin(2 * Math.PI * freq* timeSec);
      sbuf.put((short)(peak * sinValue));
    }
  }
  buf.position(0);
  return buf;
}

protected static String h2c(String hyphenated,boolean studly){
  StringBuilder b=new StringBuilder(hyphenated.length());
  boolean capNext=studly;
  for (int i=0; i < hyphenated.length(); ++i) {
    char c=hyphenated.charAt(i);
    if (c == '-')     capNext=true;
 else {
      b.append(capNext ? Character.toUpperCase(c) : c);
      capNext=false;
    }
  }
  return b.toString();
}

public synchronized void onWriteEvent() throws IOException {
  LRMIInvocationTrace trace=null;
  try {
    while (!_contexts.isEmpty()) {
      Context current=_contexts.peek();
      trace=current.getTrace();
      if (trace != null)       LRMIInvocationContext.updateContext(trace,null,null,null,null,false,null,null);
      noneBlockingWrite(current);
      if (current.getPhase() != Context.Phase.FINISH) {
        setWriteInterest();
        break;
      }
 else {
        traceContextTotalWriteTime(current);
        _contexts.poll();
        pendingWrites.decrement();
      }
    }
    if (_contexts.isEmpty()) {
      removeWriteInterest(true);
    }
  }
  finally {
    if (trace != null)     LRMIInvocationContext.resetContext();
  }
}

public static void add(Object spy){
  SPIES.add(spy);
}

void initLeafCalc(byte[] seed0){
  this.i=0;
  this.j=0;
  byte[] dummy=new byte[mdsize];
  System.arraycopy(seed0,0,dummy,0,seed.length);
  this.seed=gmssRandom.nextSeed(dummy);
}

@Override public boolean downloadFile(String path,String dest){
  try {
    FileOutputStream fos=new FileOutputStream(new File(dest));
    mDBApi.getFile(path,null,fos,null);
    fos.close();
    return true;
  }
 catch (  DropboxException e) {
    e.printStackTrace();
    return false;
  }
catch (  FileNotFoundException e) {
    e.printStackTrace();
    return false;
  }
catch (  IOException e) {
    e.printStackTrace();
    return false;
  }
}

boolean doesOccur(QName refName){
  return m_refs.contains(refName);
}

public long loop(){
  final long currentTimestamp=System.currentTimeMillis();
  final long timeDiff=currentTimestamp - lastRunTimestamp;
  final int shutdownDiff=(int)(System.currentTimeMillis() - gameShutdownRequestTimestamp);
  final float shutdownProgress=shutdownDiff >= FLYING_SUPERMAN_DELAY && gameState.equals(GameState.SHUTDOWN_REQUESTED) ? (shutdownDiff - FLYING_SUPERMAN_DELAY) / (float)(GAME_SHUTDOWN_DELAY - FLYING_SUPERMAN_DELAY) : 0;
  snowflakesCollection.onTimePassed(timeDiff);
  presentsCollection.onTimePassed(timeDiff);
  if (gameState.equals(GameState.SHUTDOWN_REQUESTED)) {
    player.setyPos(getDefaultPlayerHeight() * (1 - shutdownProgress) - (player.getHeight() * shutdownProgress));
    supermanClouds.setyPos(supermanClouds.getHeight() * (1 - shutdownProgress) - ((supermanClouds.getHeight() - fieldHeight) * shutdownProgress));
    if (shutdownProgress >= 1) {
      gameState=GameState.STOPPED;
    }
  }
 else {
    if (player.isInState(PlayerState.CHEWING) && player.getChewingDuration() >= PLAYER_CHEWING_DURATION_IN_MS) {
      player.setState(PlayerState.DEFAULT);
    }
    if (player.isInState(PlayerState.HIT) && player.getHitDuration() >= PLAYER_HIT_DURATION_IN_MS) {
      player.setState(PlayerState.DEFAULT);
    }
    if (newPlayerLocation != null) {
      player.setxPos(newPlayerLocation.x);
      player.setyPos(newPlayerLocation.y);
      newPlayerLocation=null;
    }
  }
  boolean playerBelowObject=updateFallingObjects(timeDiff,shutdownProgress,snowflakesCollection,true,false) | updateFallingObjects(timeDiff,shutdownProgress,presentsCollection,false,true);
  if (player.isInState(PlayerState.DEFAULT) || player.isInState(PlayerState.LOOKING_UP)) {
    if (playerBelowObject) {
      player.setState(PlayerState.LOOKING_UP);
    }
 else {
      player.setState(PlayerState.DEFAULT);
    }
  }
  lastRunTimestamp=currentTimestamp;
  return timeDiff;
}

public static DateFormat toDateFormat(String dateFormat,TimeZone tz,Locale locale){
  DateFormat df=null;
  if (UtilValidate.isEmpty(dateFormat)) {
    df=DateFormat.getDateInstance(DateFormat.SHORT,locale);
  }
 else {
    df=new SimpleDateFormat(dateFormat,locale == null ? Locale.getDefault() : locale);
  }
  df.setTimeZone(tz);
  return df;
}

public Integer loadIdNameValues(DbOutputStatement statement,Integer idx) throws Exception {
  int index=idx.intValue();
  if (_logger.isDebugEnabled())   _logger.debug("loadIdNameValue");
  _id=statement.getLongInteger(index++);
  _name=statement.getShortText(index++);
  return new Integer(index);
}

private byte[] padPassword(byte[] password){
  if (password == null) {
    password=new byte[0];
  }
  byte[] padded=new byte[32];
  final int numContributingPasswordBytes=password.length > padded.length ? padded.length : password.length;
  System.arraycopy(password,0,padded,0,numContributingPasswordBytes);
  if (password.length < padded.length) {
    System.arraycopy(PW_PADDING,0,padded,password.length,padded.length - password.length);
  }
  return padded;
}

private double maxDistLevel(DBID id,int level){
  final NumberVector obj=relation.get(id);
  final double r=1.0 / (1 << (level - 1));
  double dist;
  if (t == 1.0) {
    dist=0.0;
    for (int dim=0; dim < d; dim++) {
      final double p_m_r=getDimForObject(obj,dim) % r;
      dist+=Math.max(p_m_r,r - p_m_r);
    }
  }
 else   if (t == 2.0) {
    dist=0.0;
    for (int dim=0; dim < d; dim++) {
      final double p_m_r=getDimForObject(obj,dim) % r;
      double a=Math.max(p_m_r,r - p_m_r);
      dist+=a * a;
    }
    dist=Math.sqrt(dist);
  }
 else   if (!Double.isInfinite(t)) {
    dist=0.0;
    for (int dim=0; dim < d; dim++) {
      final double p_m_r=getDimForObject(obj,dim) % r;
      dist+=Math.pow(Math.max(p_m_r,r - p_m_r),t);
    }
    dist=Math.pow(dist,1.0 / t);
  }
 else {
    dist=Double.NEGATIVE_INFINITY;
    for (int dim=0; dim < d; dim++) {
      final double p_m_r=getDimForObject(obj,dim) % r;
      dist=Math.max(dist,Math.max(p_m_r,r - p_m_r));
    }
  }
  return dist * diameter;
}

public final int moveMade(long now,boolean useIncrement){
  stopTimer(now);
  ArrayList<TimeControlField> tc=tcData.getTC(whiteToMove);
  Pair<Integer,Integer> tcInfo=getCurrentTC(whiteToMove);
  int tcIdx=tcInfo.first;
  int movesToTc=tcInfo.second;
  int remaining=getRemainingTime(whiteToMove,now);
  if (useIncrement) {
    remaining+=tc.get(tcIdx).increment;
    if (movesToTc == 1) {
      if (tcIdx + 1 < tc.size())       tcIdx++;
      remaining+=tc.get(tcIdx).timeControl;
    }
  }
  elapsed=0;
  return remaining;
}

public static Properties prefixProperties(Properties props,String prefix){
  Properties prefixProps=new Properties();
  for (  String key : props.stringPropertyNames()) {
    if (key.startsWith(prefix)) {
      String keyWithoutPrefix=key.substring(prefix.length());
      prefixProps.setProperty(keyWithoutPrefix,props.getProperty(key));
    }
  }
  return prefixProps;
}

public final void testSetRegex(){
  RegexConstraint regexConstraint=new RegexConstraint(Pattern.compile("."));
  regexConstraint.setRegex(REGEX);
  assertEquals(REGEX,regexConstraint.getRegex());
}

public synchronized void start(){
  if (isStarted) {
    return;
  }
  if (isStopped) {
    throw new IllegalStateException("Cannot restart a TorClient instance.  Create a new instance instead.");
  }
  logger.info("Starting Orchid (version: " + Tor.getFullVersion() + ")");
  verifyUnlimitedStrengthPolicyInstalled();
  directoryDownloader.start(directory);
  circuitManager.startBuildingCircuits();
  if (dashboard.isEnabledByProperty()) {
    dashboard.startListening();
  }
  isStarted=true;
}

public static CipherParameters makePBEParameters(PBEKeySpec keySpec,int type,int hash,int keySize,int ivSize){
  PBEParametersGenerator generator=makePBEGenerator(type,hash);
  byte[] key;
  CipherParameters param;
  key=convertPassword(type,keySpec);
  generator.init(key,keySpec.getSalt(),keySpec.getIterationCount());
  if (ivSize != 0) {
    param=generator.generateDerivedParameters(keySize,ivSize);
  }
 else {
    param=generator.generateDerivedParameters(keySize);
  }
  for (int i=0; i != key.length; i++) {
    key[i]=0;
  }
  return param;
}

@Override public double value(int attIndex){
  int index=locateIndex(attIndex);
  if ((index >= 0) && (m_Indices[index] == attIndex)) {
    return 1.0;
  }
 else {
    return 0.0;
  }
}

private void fetchFilterSeeds(){
  if (seedList == null || seedList.isEmpty()) {
    return;
  }
  for (Iterator<URI> it=seedList.iterator(); it.hasNext(); ) {
    URI seed=it.next();
    for (    FetchFilter filter : controller.getFetchFilters()) {
      FetchStatus filterReason=filter.checkFilter(seed);
      if (filterReason != FetchStatus.VALID) {
        if (log.isDebugEnabled()) {
          log.debug("Seed: " + seed + " was filtered with reason: "+ filterReason);
        }
        it.remove();
        break;
      }
    }
  }
}

public XYAreaRenderer2(XYToolTipGenerator labelGenerator,XYURLGenerator urlGenerator){
  super();
  this.showOutline=false;
  setBaseToolTipGenerator(labelGenerator);
  setURLGenerator(urlGenerator);
  GeneralPath area=new GeneralPath();
  area.moveTo(0.0f,-4.0f);
  area.lineTo(3.0f,-2.0f);
  area.lineTo(4.0f,4.0f);
  area.lineTo(-4.0f,4.0f);
  area.lineTo(-3.0f,-2.0f);
  area.closePath();
  this.legendArea=area;
}

public static boolean isPrimitiveOrWrapper(Class<?> clazz){
  Assert.notNull(clazz,"Class must not be null");
  return (clazz.isPrimitive() || isPrimitiveWrapper(clazz));
}

private void assertFileContains(List<String> expected,String filename) throws Exception {
  try (BufferedReader reader=new BufferedReader(new FileReader(filename))){
    List<String> actual=new ArrayList<>();
    for (; ; ) {
      String line=reader.readLine();
      if (line == null) {
        break;
      }
      actual.add(line);
    }
    assertEquals(expected,actual);
  }
 }

private void reportException(Kind kind,Element element,Throwable t){
  StringWriter buf=new StringWriter();
  t.printStackTrace(new PrintWriter(buf));
  buf.toString();
  message(kind,element,"Exception thrown during processing: %s",buf.toString());
}

public void add(String[] titles,double[] values){
  add(mCategories.size() + "",titles,values);
}

static String parseAuthority(String uriString,int ssi){
  int length=uriString.length();
  if (length > ssi + 2 && uriString.charAt(ssi + 1) == '/' && uriString.charAt(ssi + 2) == '/') {
    int end=ssi + 3;
    LOOP:     while (end < length) {
switch (uriString.charAt(end)) {
case '/':
case '?':
case '#':
        break LOOP;
    }
    end++;
  }
  return uriString.substring(ssi + 3,end);
}
 else {
  return null;
}
}

public static void sort(List<?> list){
  if (list.size() > 1) {
    Collections.sort(list,INSTANCE);
  }
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(5);
  newVector.addElement(new Option("\tChoose attribute to be used for selection.","C",1,"-C <num>"));
  newVector.addElement(new Option("\tNumber of values to retain for the sepcified attribute, \n" + "\ti.e. the ones with the most instances (default 2).","N",1,"-N <num>"));
  newVector.addElement(new Option("\tInstead of values with the most instances the ones with the \n" + "\tleast are retained.\n","L",0,"-L"));
  newVector.addElement(new Option("\tWhen selecting on nominal attributes, removes header\n" + "\treferences to excluded values.","H",0,"-H"));
  newVector.addElement(new Option("\tInvert matching sense.","V",0,"-V"));
  return newVector.elements();
}

public void addDatatransferProgressListener(OnDatatransferProgressListener listener,OCUpload ocUpload){
  if (ocUpload == null || listener == null)   return;
  String targetKey=buildRemoteName(ocUpload.getAccountName(),ocUpload.getRemotePath());
  mBoundListeners.put(targetKey,listener);
}

private static char[] zzUnpackCMap(String packed){
  char[] map=new char[0x10000];
  int i=0;
  int j=0;
  while (i < 194) {
    int count=packed.charAt(i++);
    char value=packed.charAt(i++);
    do     map[j++]=value;
 while (--count > 0);
  }
  return map;
}

protected String[] readNext(LineNumberReader reader) throws IOException {
  String[] rowDef=null;
  do {
    String nextLine=reader.readLine();
    if (nextLine == null) {
      hasNext=false;
      return rowDef;
    }
    String[] r=parser.parseLineMulti(nextLine);
    if (r.length > 0) {
      if (rowDef == null) {
        rowDef=r;
      }
 else {
        String[] t=new String[rowDef.length + r.length];
        System.arraycopy(rowDef,0,t,0,rowDef.length);
        System.arraycopy(r,0,t,rowDef.length,r.length);
        rowDef=t;
      }
    }
  }
 while (parser.isPending());
  return rowDef;
}

public Class<?> type(){
  if (isClass) {
    return (Class<?>)object;
  }
 else {
    return object.getClass();
  }
}

private void verifyPropertySourceValue(ReloadablePropertySource reloadablePropertySource,String expectedValue){
  logger.debug("Reading key " + TEST_KEY + " and expecting value "+ expectedValue);
  logger.debug("Properties file value is " + properties.get(TEST_KEY) + " and reloadable property source value is "+ reloadablePropertySource.getProperty(TEST_KEY));
  String value=(String)reloadablePropertySource.getProperty(TEST_KEY);
  assertEquals(expectedValue,value);
}

private void updateCenterPanel(){
  long now=System.currentTimeMillis();
  if (_nextUpdateTime > now)   return;
  _nextUpdateTime=now + 1000 * 5;
  _centerPanel.removeAll();
  _centerComponent=new JLabel();
  GridBagConstraints gbc=new GridBagConstraints();
  gbc.gridx=0;
  gbc.gridy=0;
  gbc.weightx=0;
  gbc.fill=GridBagConstraints.NONE;
  gbc.anchor=GridBagConstraints.CENTER;
  _centerPanel.add(_centerComponent,gbc);
  refresh();
}

public void serviceRequestQueue() throws CLIException {
  if (isVerbose()) {
    outputWriter.printlnMessage(rbMessages.getString("verbose-processing-request"));
  }
  try {
    while (!requestQueue.isEmpty()) {
      CLIRequest req=(CLIRequest)requestQueue.remove(0);
      try {
        req.process(this);
        if (statusOS != null) {
          String status=formatStatus(req.getOptions(),0);
          statusOS.write(status.getBytes());
        }
      }
 catch (      CLIException e) {
        if (isVerbose()) {
          e.printStackTrace(System.out);
        }
        if (statusOS != null) {
          String status=formatStatus(req.getOptions(),e.getExitCode());
          statusOS.write(status.getBytes());
        }
        if (bContinue) {
          outputWriter.printlnError(e.getMessage());
        }
 else {
          throw e;
        }
      }
    }
  }
 catch (  IOException e) {
    throw new CLIException(e,ExitCodes.REQUEST_CANNOT_BE_PROCESSED);
  }
 finally {
    if (statusOS != null) {
      try {
        statusOS.close();
      }
 catch (      IOException ex) {
      }
      statusOS=null;
    }
  }
}

AlwaysIdenticalKeyStoreState(){
  super();
}

public static byte[] packByteBufferIntoSingleByteArray(ByteBuffer[] byteBufferArr){
  if (null == byteBufferArr || byteBufferArr.length == 0) {
    return null;
  }
  int noOfCol=byteBufferArr.length;
  short offsetLen=(short)(noOfCol * 2);
  int totalBytes=calculateTotalBytes(byteBufferArr) + offsetLen;
  ByteBuffer buffer=ByteBuffer.allocate(totalBytes);
  buffer.putShort(offsetLen);
  for (int index=0; index < byteBufferArr.length - 1; index++) {
    ByteBuffer individualCol=byteBufferArr[index];
    int noOfBytes=individualCol.capacity();
    buffer.putShort((short)(offsetLen + noOfBytes));
    offsetLen+=noOfBytes;
    individualCol.rewind();
  }
  for (int index=0; index < byteBufferArr.length; index++) {
    ByteBuffer individualCol=byteBufferArr[index];
    buffer.put(individualCol.array());
  }
  buffer.rewind();
  return buffer.array();
}

public void stop(){
  mCancel=true;
  if (mRunning.compareAndSet(true,false)) {
    if (mSampleDispatcherTask != null) {
      mThreadPoolManager.cancel(mSampleDispatcherTask);
      mSampleDispatcherTask=null;
      mFilledBuffers.clear();
    }
  }
}

public void add(SimpleName ref){
  String typeName=ref.getIdentifier();
  if (fImportsAdded.contains(typeName)) {
    return;
  }
  IBinding binding=ref.resolveBinding();
  if (binding != null) {
    if (binding.getKind() != IBinding.TYPE) {
      return;
    }
    ITypeBinding typeBinding=(ITypeBinding)binding;
    if (typeBinding.isArray()) {
      typeBinding=typeBinding.getElementType();
    }
    typeBinding=typeBinding.getTypeDeclaration();
    if (!typeBinding.isRecovered()) {
      if (needsImport(typeBinding,ref)) {
        fImpStructure.addImport(typeBinding);
        fImportsAdded.add(typeName);
      }
      return;
    }
  }
 else {
    if (fDoIgnoreLowerCaseNames && typeName.length() > 0) {
      char ch=typeName.charAt(0);
      if (Strings.isLowerCase(ch) && Character.isLetter(ch)) {
        return;
      }
    }
  }
  fImportsAdded.add(typeName);
  fUnresolvedTypes.put(typeName,new UnresolvedTypeData(ref));
}

private static boolean checkFont(String fontName,String newName,String testString,boolean force){
  boolean displayable=true;
  Font f=UIManager.getFont(fontName);
  if (f != null && !newName.equalsIgnoreCase(f.getName())) {
    if (!GUIUtils.canDisplay(f,testString) || force) {
      f=new Font(newName,f.getStyle(),f.getSize());
      if (GUIUtils.canDisplay(f,testString))       UIManager.put(fontName,f);
 else       displayable=false;
    }
  }
 else   if (f != null) {
    displayable=GUIUtils.canDisplay(f,testString);
  }
 else {
    displayable=false;
  }
  return displayable;
}

public void addAllSearchables(ArrayList<? extends SearchResult> searchable){
  mSearchableList.addAll(searchable);
}

public List<ValueBox> addArgumentHotspots(String signature,int arg){
  List<ValueBox> sigSpots=StringAnalysis.getArgumentExpressions(signature,arg);
  return addArgumentHotspots(signature,arg,sigSpots);
}

public boolean isFull(){
  return counter.get() == qSize;
}

public static String JQ(String request) throws Exception {
  int queryStartPos=request.indexOf('?');
  String query;
  String path;
  if (-1 == queryStartPos) {
    query="";
    path=request;
  }
 else {
    query=request.substring(queryStartPos + 1);
    path=request.substring(0,queryStartPos);
  }
  query=setParam(query,"wt","json");
  request=path + '?' + setParam(query,"indent","on");
  String response;
  boolean failed=true;
  try {
    response=restTestHarness.query(request);
    failed=false;
  }
  finally {
    if (failed) {
      log.error("REQUEST FAILED: " + request);
    }
  }
  return response;
}

static void sort(int[] a,int left,int right,int[] work,int workBase,int workLen){
  if (right - left < QUICKSORT_THRESHOLD) {
    sort(a,left,right,true);
    return;
  }
  int[] run=new int[MAX_RUN_COUNT + 1];
  int count=0;
  run[0]=left;
  for (int k=left; k < right; run[count]=k) {
    while (k < right && a[k] == a[k + 1])     k++;
    if (k == right)     break;
    if (a[k] < a[k + 1]) {
      while (++k <= right && a[k - 1] <= a[k])       ;
    }
 else     if (a[k] > a[k + 1]) {
      while (++k <= right && a[k - 1] >= a[k])       ;
      for (int lo=run[count] - 1, hi=k; ++lo < --hi; ) {
        int t=a[lo];
        a[lo]=a[hi];
        a[hi]=t;
      }
    }
    if (run[count] > left && a[run[count]] >= a[run[count] - 1]) {
      count--;
    }
    if (++count == MAX_RUN_COUNT) {
      sort(a,left,right,true);
      return;
    }
  }
  if (count == 0) {
    return;
  }
 else   if (count == 1 && run[count] > right) {
    return;
  }
  right++;
  if (run[count] < right) {
    run[++count]=right;
  }
  byte odd=0;
  for (int n=1; (n<<=1) < count; odd^=1)   ;
  int[] b;
  int ao, bo;
  int blen=right - left;
  if (work == null || workLen < blen || workBase + blen > work.length) {
    work=new int[blen];
    workBase=0;
  }
  if (odd == 0) {
    System.arraycopy(a,left,work,workBase,blen);
    b=a;
    bo=0;
    a=work;
    ao=workBase - left;
  }
 else {
    b=work;
    ao=0;
    bo=workBase - left;
  }
  for (int last; count > 1; count=last) {
    for (int k=(last=0) + 2; k <= count; k+=2) {
      int hi=run[k], mi=run[k - 1];
      for (int i=run[k - 2], p=i, q=mi; i < hi; ++i) {
        if (q >= hi || p < mi && a[p + ao] <= a[q + ao]) {
          b[i + bo]=a[p++ + ao];
        }
 else {
          b[i + bo]=a[q++ + ao];
        }
      }
      run[++last]=hi;
    }
    if ((count & 1) != 0) {
      for (int i=right, lo=run[count - 1]; --i >= lo; b[i + bo]=a[i + ao])       ;
      run[++last]=right;
    }
    int[] t=a;
    a=b;
    b=t;
    int o=ao;
    ao=bo;
    bo=o;
  }
}

protected void shiftEnd(int newSize){
  int oldSize=getArrayLength();
  int oldGapEnd=g1;
  int upperSize=oldSize - oldGapEnd;
  int arrayLength=getNewArraySize(newSize);
  int newGapEnd=arrayLength - upperSize;
  resize(arrayLength);
  g1=newGapEnd;
  if (upperSize != 0) {
    System.arraycopy(array,oldGapEnd,array,newGapEnd,upperSize);
  }
}

protected void processStyle12ExamineAndSetupAdjustment(Game game,Style12Message message,GameService service,String entireMessage){
  if (LOG.isDebugEnabled()) {
    LOG.debug("Processing bsetup/examine/obs examine position move.");
  }
  if (game.isInState(Game.OBSERVING_EXAMINED_STATE) && message.relation == Style12Message.EXAMINING_GAME_RELATION) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Handling observer became examiner transition.");
    }
    examineGamesWaitingOnMoves.put(game.getId(),message);
    connector.sendMessage("moves " + message.gameId,true,ChatType.MOVES);
  }
 else   if (entireMessage.contains("- entering examine mode.") || entireMessage.contains(". Entering examine mode.")) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Handling bsetup to examine mode transition.");
    }
    Game examineGame=IcsUtils.createGame(message,entireMessage);
    if (message.relation == Style12Message.EXAMINING_GAME_RELATION && !examineGame.isInState(Game.SETUP_STATE)) {
      examineGamesWaitingOnMoves.put(game.getId(),message);
      connector.sendMessage("moves " + message.gameId,true,ChatType.MOVES);
    }
  }
 else   if (game.isInState(Game.EXAMINING_STATE) && (entireMessage.contains("Entering setup mode.\n") || entireMessage.contains("enters setup mode."))) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Handling examined game became setup game transition.");
    }
    processExaminedGameBecameSetup();
  }
 else   if (entireMessage.contains("entering examine mode.\n") || entireMessage.contains("Entering examine mode.\n")) {
    examineGamesWaitingOnMoves.put(game.getId(),message);
    connector.sendMessage("moves " + message.gameId,true,ChatType.MOVES);
  }
 else {
    IcsUtils.resetGame(game,message);
    service.fireGameStateChanged(message.gameId,false);
    connector.sendMessage("moves " + message.gameId,true,ChatType.MOVES);
  }
}

public SamFilterChain(Collection<SamFilter> filters){
  mFilters=filters.toArray(new SamFilter[filters.size()]);
}

PreviousWordAction(String nm,boolean select){
  super(nm);
  this.select=select;
}

static UnixStream<String> cat(final String filePath) throws IOException {
  Objects.requireNonNull(filePath,"The file path must not be null");
  return new UnixStreamImpl<>(lines(Paths.get(filePath)));
}

private static String encode_base64(byte d[],int len) throws IllegalArgumentException {
  int off=0;
  StringBuffer rs=new StringBuffer();
  int c1, c2;
  if (len <= 0 || len > d.length) {
    throw new IllegalArgumentException("Invalid len");
  }
  while (off < len) {
    c1=d[off++] & 0xff;
    rs.append(base64_code[(c1 >> 2) & 0x3f]);
    c1=(c1 & 0x03) << 4;
    if (off >= len) {
      rs.append(base64_code[c1 & 0x3f]);
      break;
    }
    c2=d[off++] & 0xff;
    c1|=(c2 >> 4) & 0x0f;
    rs.append(base64_code[c1 & 0x3f]);
    c1=(c2 & 0x0f) << 2;
    if (off >= len) {
      rs.append(base64_code[c1 & 0x3f]);
      break;
    }
    c2=d[off++] & 0xff;
    c1|=(c2 >> 6) & 0x03;
    rs.append(base64_code[c1 & 0x3f]);
    rs.append(base64_code[c2 & 0x3f]);
  }
  return rs.toString();
}

protected void eleminateRedundent(ElemTemplateElement psuedoVarRecipient,Vector paths){
  int n=paths.size();
  int numPathsEliminated=0;
  int numUniquePathsEliminated=0;
  for (int i=0; i < n; i++) {
    ExpressionOwner owner=(ExpressionOwner)paths.elementAt(i);
    if (null != owner) {
      int found=findAndEliminateRedundant(i + 1,i,owner,psuedoVarRecipient,paths);
      if (found > 0)       numUniquePathsEliminated++;
      numPathsEliminated+=found;
    }
  }
  eleminateSharedPartialPaths(psuedoVarRecipient,paths);
  if (DIAGNOSE_NUM_PATHS_REDUCED)   diagnoseNumPaths(paths,numPathsEliminated,numUniquePathsEliminated);
}

public void commercialResult(String stream,String resultText,RequestResult result){
  setCommercialResult(DateTime.currentTime() + " " + resultText);
  lastCommercialRunAttempt=System.currentTimeMillis();
  setLoadingCommercial(false);
  if (result == TwitchApi.RequestResult.RUNNING_COMMERCIAL) {
    lastCommercial.put(stream,System.currentTimeMillis());
    if (stream != null && stream.equals(currentChannel)) {
      lastCommercialRun=System.currentTimeMillis();
    }
  }
}

void addFillComponents(Container panel,int[] cols,int[] rows){
  Dimension filler=new Dimension(10,10);
  boolean filled_cell_11=false;
  CellConstraints cc=new CellConstraints();
  if (cols.length > 0 && rows.length > 0) {
    if (cols[0] == 1 && rows[0] == 1) {
      panel.add(Box.createRigidArea(filler),cc.xy(1,1));
      filled_cell_11=true;
    }
  }
  for (int index=0; index < cols.length; index++) {
    if (cols[index] == 1 && filled_cell_11) {
      continue;
    }
    panel.add(Box.createRigidArea(filler),cc.xy(cols[index],1));
  }
  for (int index=0; index < rows.length; index++) {
    if (rows[index] == 1 && filled_cell_11) {
      continue;
    }
    panel.add(Box.createRigidArea(filler),cc.xy(1,rows[index]));
  }
}

public void done() throws IOException {
  if (!initialStyles) {
    writeInitialStyles();
    initialStyles=true;
  }
  out.writeUBits(6,0);
  out.flushBits();
  if (bout != null && glyphCount > 0) {
    byte[] glyphBytes=bout.toByteArray();
    glyphByteArrays.add(glyphBytes);
  }
  if (glyphCount > 1) {
    bout=new ByteArrayOutputStream();
    out=new OutStream(bout);
    glyphCount--;
    fill1Index=1;
    lineIndex=0;
    outstandingChanges=true;
    initialStyles=false;
  }
 else {
    if (bout != null) {
      finishFont();
    }
    writer.completeTag();
  }
}

private static DetachISOResponse checkDetachISOResponse(DetachISOResponse detachISOResponse) throws RpcException {
  logger.info("Checking {}",detachISOResponse);
switch (detachISOResponse.getResult()) {
case OK:
    break;
case ISO_NOT_ATTACHED:
  logger.warn("detach_iso returned IsoNotAttachedException, response: {}",detachISOResponse);
throw new IsoNotAttachedException(detachISOResponse.getError());
case SYSTEM_ERROR:
logger.warn("detach_iso returned SYSTEM_ERROR, response: {}",detachISOResponse);
throw new SystemErrorException(detachISOResponse.getError());
case VM_NOT_FOUND:
logger.warn("detach_iso returned VmNotFoundException, response: {}",detachISOResponse);
throw new VmNotFoundException(detachISOResponse.getError());
default :
throw new RpcException(String.format("Unknown result: %s",detachISOResponse.getResult()));
}
return detachISOResponse;
}

public boolean is_terminal(MethodOrMethodContext mc){
  Stack<SootMethod> sys_stack=new Stack<SootMethod>();
  boolean result;
  if (!is_system(mc.method()))   result=false;
 else {
    if (!process_callbacks)     result=true;
 else {
      if ((stack.size() > 0) && is_system(stack.peek()))       result=!calls_app_method(mc,sys_stack);
 else {
        if (can_have_callbacks(mc.method()))         result=!calls_app_method(mc,sys_stack);
 else         result=true;
      }
    }
  }
  logger.info("  {} terminal = {}",mc.method(),result);
  return result;
}

boolean tryMatch(SNode s){
  if (match == null && UNSAFE.compareAndSwapObject(this,matchOffset,null,s)) {
    Thread w=waiter;
    if (w != null) {
      waiter=null;
      LockSupport.unpark(w);
    }
    return true;
  }
  return match == s;
}

public void addItem(int position,M model){
  mDatas.add(position,model);
  notifyItemInserted(position);
}

public final Set<String> aliases(){
  return Collections.unmodifiableSet(this.aliasesSet);
}

public void encode(OutputStream out) throws IOException {
  DerOutputStream tmp=new DerOutputStream();
  if (this.extensionValue == null) {
    this.extensionId=PKIXExtensions.IssuingDistributionPoint_Id;
    this.critical=false;
    encodeThis();
  }
  super.encode(tmp);
  out.write(tmp.toByteArray());
}

public final void readChildren(ObjectInputStream ois) throws IOException, ClassNotFoundException {
  int count=serializable;
  while (count-- > 0) {
    Object child=null;
    BeanContextSupport.BCSChild bscc=null;
    try {
      child=ois.readObject();
      bscc=(BeanContextSupport.BCSChild)ois.readObject();
    }
 catch (    IOException ioe) {
      continue;
    }
catch (    ClassNotFoundException cnfe) {
      continue;
    }
synchronized (child) {
      BeanContextChild bcc=null;
      try {
        bcc=(BeanContextChild)child;
      }
 catch (      ClassCastException cce) {
      }
      if (bcc != null) {
        try {
          bcc.setBeanContext(getBeanContextPeer());
          bcc.addPropertyChangeListener("beanContext",childPCL);
          bcc.addVetoableChangeListener("beanContext",childVCL);
        }
 catch (        PropertyVetoException pve) {
          continue;
        }
      }
      childDeserializedHook(child,bscc);
    }
  }
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 0:
    return SUCCESS;
default :
  return null;
}
}

static boolean isChristmasTime(Calendar cal){
  int month=cal.get(Calendar.MONTH);
  int day=cal.get(Calendar.DAY_OF_MONTH);
  if (month >= 1 && month < 10) {
    return false;
  }
  if (month == 0) {
    return day <= 6;
  }
  if (month == 10) {
    return day >= 23;
  }
  return false;
}

@Override public void zoomRangeAxes(double factor,PlotRenderingInfo info,Point2D source){
  zoomRangeAxes(factor,info,source,false);
}

@Override public boolean connectionAllowed(EventSetDescriptor esd){
  return connectionAllowed(esd.getName());
}

private void boardSaveImage(){
  if (curfileImage == null) {
    boardSaveAsImage();
    return;
  }
  JDialog waitD=new JDialog(frame,Messages.getString("BoardEditor.waitDialog.title"));
  waitD.add(new JLabel(Messages.getString("BoardEditor.waitDialog.message")));
  waitD.setSize(250,130);
  waitD.setLocation((frame.getSize().width / 2) - (waitD.getSize().width / 2),(frame.getSize().height / 2) - (waitD.getSize().height / 2));
  waitD.setVisible(true);
  frame.setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
  waitD.setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
  try {
    ImageIO.write(bv.getEntireBoardImage(),"png",curfileImage);
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  waitD.setVisible(false);
  frame.setCursor(Cursor.getDefaultCursor());
}

public boolean containsName(String type,String name){
  List<String> names=getNames(type);
  return names.contains(name);
}

@SuppressWarnings("unchecked") public static <C extends Result>ArrayList<C> filterResults(ResultHierarchy hier,Result r,Class<? super C> restrictionClass){
  ArrayList<C> res=new ArrayList<>();
  if (restrictionClass.isInstance(r)) {
    res.add((C)restrictionClass.cast(r));
  }
  for (Hierarchy.Iter<Result> iter=hier.iterDescendants(r); iter.valid(); iter.advance()) {
    Result result=iter.get();
    if (restrictionClass.isInstance(result)) {
      res.add((C)restrictionClass.cast(result));
    }
  }
  return res;
}

private boolean hasNextProxy(){
  return nextProxyIndex < proxies.size();
}

@Pure @CausesError({IncorrectPure4JImmutableCallException.class,PureMethodParameterNotImmutableException.class}) public String testParam1Bad(Object in1,Object in2){
  Object in3=in2;
  Pure4J.immutable(in1,in2);
  return in3.toString();
}

protected boolean[] canHandleMissing(boolean nominalPredictor,boolean numericPredictor,boolean stringPredictor,boolean datePredictor,boolean relationalPredictor,boolean multiInstance,int classType,boolean predictorMissing,boolean classMissing,int missingLevel){
  if (missingLevel == 100) {
    print("100% ");
  }
  print("missing");
  if (predictorMissing) {
    print(" predictor");
    if (classMissing) {
      print(" and");
    }
  }
  if (classMissing) {
    print(" class");
  }
  print(" values");
  printAttributeSummary(nominalPredictor,numericPredictor,stringPredictor,datePredictor,relationalPredictor,multiInstance,classType);
  print("...");
  ArrayList<String> accepts=new ArrayList<String>();
  accepts.add("missing");
  accepts.add("value");
  accepts.add("train");
  accepts.add("no attributes");
  int numTrain=getNumInstances(), numClasses=2;
  return runBasicTest(nominalPredictor,numericPredictor,stringPredictor,datePredictor,relationalPredictor,multiInstance,classType,missingLevel,predictorMissing,classMissing,numTrain,numClasses,accepts);
}

public Set<BrdItem> pick_items(PlaPoint p_location,int p_layer,ItemSelectionFilter p_filter){
  Set<BrdItem> result=new TreeSet<BrdItem>();
  ShapeTileBox point_shape=p_location.to_box();
  Collection<AwtreeObject> overlaps=overlapping_objects(point_shape,p_layer);
  for (  AwtreeObject curr_object : overlaps) {
    if (!(curr_object instanceof BrdItem))     continue;
    BrdItem curr_item=(BrdItem)curr_object;
    if (!curr_item.is_selected_by_filter(p_filter))     continue;
    result.add(curr_item);
  }
  return result;
}

public boolean isCollinearWith(Vector other){
  if (x == 0 && y == 0 && z == 0) {
    return true;
  }
  final double otherX=other.x;
  final double otherY=other.y;
  final double otherZ=other.z;
  if (otherX == 0 && otherY == 0 && otherZ == 0) {
    return true;
  }
  if ((x == 0) != (otherX == 0))   return false;
  if ((y == 0) != (otherY == 0))   return false;
  if ((z == 0) != (otherZ == 0))   return false;
  final double quotientX=otherX / x;
  if (!Double.isNaN(quotientX)) {
    return other.equals(multiply(quotientX));
  }
  final double quotientY=otherY / y;
  if (!Double.isNaN(quotientY)) {
    return other.equals(multiply(quotientY));
  }
  final double quotientZ=otherZ / z;
  if (!Double.isNaN(quotientZ)) {
    return other.equals(multiply(quotientZ));
  }
  throw new RuntimeException("This should not happen");
}

public void receive(float[] currentFFTBins){
  if (Float.isInfinite(currentFFTBins[0]) || Float.isNaN(currentFFTBins[0])) {
    currentFFTBins=new float[currentFFTBins.length];
  }
  if (mDisplayFFTBins == null || mDisplayFFTBins.length != currentFFTBins.length) {
    mDisplayFFTBins=currentFFTBins;
  }
  float[] smoothedBins=mSmoothingFilter.filter(currentFFTBins);
  if (mAveraging > 1) {
    float gain=1.0f / (float)mAveraging;
    for (int x=0; x < mDisplayFFTBins.length; x++) {
      mDisplayFFTBins[x]+=(smoothedBins[x] - mDisplayFFTBins[x]) * gain;
    }
  }
 else {
    mDisplayFFTBins=smoothedBins;
  }
  repaint();
}

@Override public void executionUnitImported(final ExecutionUnit process,final Element element){
  NodeList children=element.getChildNodes();
  children=element.getChildNodes();
  for (int i=0; i < children.getLength(); i++) {
    Node child=children.item(i);
    if (child instanceof Element) {
      Element backgroundElement=(Element)child;
      if (XML_TAG_BACKGROUND.equals(backgroundElement.getTagName())) {
        String xStr=backgroundElement.getAttribute(XML_ATTRIBUTE_X_POSITION);
        String yStr=backgroundElement.getAttribute(XML_ATTRIBUTE_Y_POSITION);
        String wStr=backgroundElement.getAttribute(XML_ATTRIBUTE_WIDTH);
        String hStr=backgroundElement.getAttribute(XML_ATTRIBUTE_HEIGHT);
        String imgLocStr=backgroundElement.getAttribute(XML_ATTRIBUTE_LOCATION);
        try {
          int xLoc=Integer.parseInt(xStr);
          int yLoc=Integer.parseInt(yStr);
          int wLoc=Integer.parseInt(wStr);
          int hLoc=Integer.parseInt(hStr);
          ProcessBackgroundImage bgImg=new ProcessBackgroundImage(xLoc,yLoc,wLoc,hLoc,imgLocStr,process);
          setBackgroundImage(bgImg);
        }
 catch (        NullPointerException|IllegalArgumentException e) {
        }
      }
    }
  }
}

private void sendMailToQueue(String to,String subject,String content,boolean isMultipart,boolean isHtml){
  EmailParams emailParams=new EmailParams(to,subject,content,isMultipart,isHtml);
  rabbitTemplate.convertAndSend(RabbitmqConfiguration.QUEUE_SEND_EMAIL,emailParams);
}

public MersenneTwisterRNG(final byte[] seed){
  if (seed == null || seed.length != SEED_SIZE_BYTES) {
    throw new IllegalArgumentException("Mersenne Twister RNG requires a 128-bit (16-byte) seed.");
  }
  this.seed=seed.clone();
  final int[] seedInts=convertBytesToInts(this.seed);
  mt[0]=BOOTSTRAP_SEED;
  for (mtIndex=1; mtIndex < N; mtIndex++) {
    mt[mtIndex]=BOOTSTRAP_FACTOR * (mt[mtIndex - 1] ^ mt[mtIndex - 1] >>> 30) + mtIndex;
  }
  int i=1;
  int j=0;
  for (int k=Math.max(N,seedInts.length); k > 0; k--) {
    mt[i]=(mt[i] ^ (mt[i - 1] ^ mt[i - 1] >>> 30) * SEED_FACTOR1) + seedInts[j] + j;
    i++;
    j++;
    if (i >= N) {
      mt[0]=mt[N - 1];
      i=1;
    }
    if (j >= seedInts.length) {
      j=0;
    }
  }
  for (int k=N - 1; k > 0; k--) {
    mt[i]=(mt[i] ^ (mt[i - 1] ^ mt[i - 1] >>> 30) * SEED_FACTOR2) - i;
    i++;
    if (i >= N) {
      mt[0]=mt[N - 1];
      i=1;
    }
  }
  mt[0]=UPPER_MASK;
}

private Set<ObjectInstance> filterListOfObjectInstances(Set<ObjectInstance> list,QueryExp query){
  if (query == null) {
    return list;
  }
 else {
    Set<ObjectInstance> result=new HashSet<ObjectInstance>();
    for (    ObjectInstance oi : list) {
      boolean res=false;
      MBeanServer oldServer=QueryEval.getMBeanServer();
      query.setMBeanServer(server);
      try {
        res=query.apply(oi.getObjectName());
      }
 catch (      Exception e) {
        res=false;
      }
 finally {
        query.setMBeanServer(oldServer);
      }
      if (res) {
        result.add(oi);
      }
    }
    return result;
  }
}

private void translateMatrixAfterRotate(int axis,float trans,float prevImageSize,float imageSize,int prevViewSize,int viewSize,int drawableSize){
  if (imageSize < viewSize) {
    m[axis]=(viewSize - (drawableSize * m[Matrix.MSCALE_X])) * 0.5f;
  }
 else   if (trans > 0) {
    m[axis]=-((imageSize - viewSize) * 0.5f);
  }
 else {
    float percentage=(Math.abs(trans) + (0.5f * prevViewSize)) / prevImageSize;
    m[axis]=-((percentage * imageSize) - (viewSize * 0.5f));
  }
}

@Path("{secretId}") @Timed @ExceptionMetered @GET public AutomationSecretResponse readSecretById(@Auth AutomationClient automationClient,@PathParam("secretId") LongParam secretId){
  Optional<Secret> secret=secretController.getSecretById(secretId.get());
  if (!secret.isPresent()) {
    throw new NotFoundException("Secret not found.");
  }
  ImmutableList<Group> groups=ImmutableList.copyOf(aclDAO.getGroupsFor(secret.get()));
  return AutomationSecretResponse.fromSecret(secret.get(),groups);
}

protected void addActionExceptionWarning(Exception e){
  String msg=e.getMessage();
  if (msg != null) {
    warnings.add(msg);
  }
}

private void generateFieldInfos(IType type,IBinaryType typeInfo,HashMap newElements,ArrayList childrenHandles){
  IBinaryField[] fields=typeInfo.getFields();
  if (fields == null) {
    return;
  }
  JavaModelManager manager=((JavaElement)type).manager;
  for (int i=0, fieldCount=fields.length; i < fieldCount; i++) {
    IBinaryField fieldInfo=fields[i];
    BinaryField field=new BinaryField((JavaElement)type,manager,manager.intern(new String(fieldInfo.getName())));
    newElements.put(field,fieldInfo);
    childrenHandles.add(field);
    generateAnnotationsInfos(field,fieldInfo.getAnnotations(),fieldInfo.getTagBits(),newElements);
  }
}

public void testFormattingYear(){
  FormatTester test=new FormatTester();
  Calendar cal=new GregorianCalendar(1999,Calendar.JUNE,2,15,3,6);
  test.test(" y",cal," 1999",DateFormat.YEAR_FIELD);
  test.test(" yy",cal," 99",DateFormat.YEAR_FIELD);
  test.test(" yy",new GregorianCalendar(2001,Calendar.JUNE,2)," 01",DateFormat.YEAR_FIELD);
  test.test(" yy",new GregorianCalendar(2000,Calendar.JUNE,2)," 00",DateFormat.YEAR_FIELD);
  test.test(" yyy",new GregorianCalendar(2000,Calendar.JUNE,2)," 2000",DateFormat.YEAR_FIELD);
  test.test(" yyy",cal," 1999",DateFormat.YEAR_FIELD);
  test.test(" yyyy",cal," 1999",DateFormat.YEAR_FIELD);
  test.test(" yyyyy",cal," 01999",DateFormat.YEAR_FIELD);
  assertFalse(test.testsFailed);
}

public List<String> generateModel(String schema,String table,String packageName,boolean annotateSchema,boolean trimStrings){
  try {
    List<String> models=New.arrayList();
    List<TableInspector> tables=getTables(schema,table);
    for (    TableInspector t : tables) {
      t.read(metaData);
      String model=t.generateModel(packageName,annotateSchema,trimStrings);
      models.add(model);
    }
    return models;
  }
 catch (  SQLException s) {
    throw new RuntimeException(s);
  }
}

public static Ed25519EncodedFieldElement toEncodedFieldElement(final BigInteger b){
  return new Ed25519EncodedFieldElement(toByteArray(b));
}

private void mergeCollapse(){
  while (stackSize > 1) {
    int n=stackSize - 2;
    if (n > 0 && runLen[n - 1] <= runLen[n] + runLen[n + 1]) {
      if (runLen[n - 1] < runLen[n + 1])       n--;
      mergeAt(n);
    }
 else     if (runLen[n] <= runLen[n + 1]) {
      mergeAt(n);
    }
 else {
      break;
    }
  }
}

protected ArrayList<KeyNamePair> loadRMAData(int C_BPartner_ID){
  ArrayList<KeyNamePair> list=new ArrayList<KeyNamePair>();
  String sqlStmt="SELECT r.M_RMA_ID, r.DocumentNo || '-' || r.Amt from M_RMA r " + "WHERE ISSOTRX='Y' AND r.DocStatus in ('CO', 'CL') " + "AND r.C_BPartner_ID=? "+ "AND r.M_RMA_ID in (SELECT rl.M_RMA_ID FROM M_RMALine rl "+ "WHERE rl.M_RMA_ID=r.M_RMA_ID AND rl.QtyDelivered < rl.Qty "+ "AND rl.M_InOutLine_ID IS NOT NULL)";
  PreparedStatement pstmt=null;
  try {
    pstmt=DB.prepareStatement(sqlStmt,null);
    pstmt.setInt(1,C_BPartner_ID);
    ResultSet rs=pstmt.executeQuery();
    while (rs.next()) {
      list.add(new KeyNamePair(rs.getInt(1),rs.getString(2)));
    }
    rs.close();
  }
 catch (  SQLException e) {
    log.log(Level.SEVERE,sqlStmt.toString(),e);
  }
 finally {
    if (pstmt != null) {
      try {
        pstmt.close();
      }
 catch (      Exception ex) {
        log.severe("Could not close prepared statement");
      }
    }
  }
  return list;
}

private void checkSendTrackToGoogle(){
  if (!sendToGoogle(activityMyTracks.getString(R.string.export_google_maps)) || !sendToGoogle(activityMyTracks.getString(R.string.export_google_fusion_tables)) || !sendToGoogle(activityMyTracks.getString(R.string.export_google_spreadsheets))) {
    return;
  }
  assertTrue(GoogleUtils.deleteMaps(activityMyTracks.getApplicationContext(),GoogleUtils.ACCOUNT_1,EndToEndTestUtils.trackName));
  assertTrue(GoogleUtils.deleteFusionTables(activityMyTracks.getApplicationContext(),GoogleUtils.ACCOUNT_1,EndToEndTestUtils.trackName));
  assertTrue(GoogleUtils.deleteSpreadsheetsRow(activityMyTracks.getApplicationContext(),GoogleUtils.ACCOUNT_1,EndToEndTestUtils.trackName));
}

private void checkBoundedTypeParameter(Method method){
  TypeVariable<Method> typeParameter=getTypeParameter(method);
  assertEquals("T",typeParameter.getName());
  assertEquals(method,typeParameter.getGenericDeclaration());
  Type[] bounds=typeParameter.getBounds();
  assertLenghtOne(bounds);
  Type bound=bounds[0];
  assertEquals(BoundedWildcardsGenericMethods.class,bound);
}

private byte[] entityToBytes(HttpEntity entity) throws IOException, ServerError {
  PoolingByteArrayOutputStream bytes=new PoolingByteArrayOutputStream(mPool,(int)entity.getContentLength());
  byte[] buffer=null;
  try {
    InputStream in=entity.getContent();
    if (in == null) {
      throw new ServerError();
    }
    buffer=mPool.getBuf(1024);
    int count;
    while ((count=in.read(buffer)) != -1) {
      bytes.write(buffer,0,count);
    }
    return bytes.toByteArray();
  }
  finally {
    try {
      entity.consumeContent();
    }
 catch (    IOException e) {
      VolleyLog.v("Error occured when calling consumingContent");
    }
    mPool.returnBuf(buffer);
    bytes.close();
  }
}

public void onDependencyChanged(Preference dependency,boolean disableDependent){
  if (mDependencyMet == disableDependent) {
    mDependencyMet=!disableDependent;
    notifyDependencyChange(shouldDisableDependents());
    notifyChanged();
  }
}

@Override public Double analyse(double[] frame){
  if (frame.length != getFrameLengthSamples())   throw new IllegalArgumentException("Expected frame of length " + getFrameLengthSamples() + ", got "+ frame.length);
  double totalEnergy=0;
  for (int i=0; i < frame.length; i++) {
    totalEnergy+=frame[i] * frame[i];
  }
  rememberFrameEnergy(totalEnergy);
  return new Double(totalEnergy);
}

public static Element firstChildElement(Element element){
  if (element == null)   return null;
  Node node=element.getFirstChild();
  if (node != null) {
    do {
      if (node.getNodeType() == Node.ELEMENT_NODE) {
        Element childElement=(Element)node;
        return childElement;
      }
    }
 while ((node=node.getNextSibling()) != null);
  }
  return null;
}

private static void partialMatch(DimensionalNode node,boolean[] relevant,double[] keys,ArrayList<IMultiPoint> results){
  IMultiPoint pt=node.point;
  boolean match=true;
  for (int i=0; i < relevant.length; i++) {
    if (!relevant[i])     continue;
    if (!FloatingPoint.same(pt.getCoordinate(i + 1),keys[i])) {
      match=false;
      break;
    }
  }
  if (match) {
    results.add(pt);
  }
  int d=node.dimension;
  if (relevant[d - 1]) {
    if (FloatingPoint.lesserEquals(keys[d - 1],pt.getCoordinate(d))) {
      DimensionalNode below=node.getBelow();
      if (below != null) {
        partialMatch(below,relevant,keys,results);
      }
    }
    if (FloatingPoint.greaterEquals(keys[d - 1],pt.getCoordinate(d))) {
      DimensionalNode above=node.getAbove();
      if (above != null) {
        partialMatch(above,relevant,keys,results);
      }
    }
  }
 else {
    DimensionalNode below=node.getBelow();
    if (below != null) {
      partialMatch(below,relevant,keys,results);
    }
    DimensionalNode above=node.getAbove();
    if (above != null) {
      partialMatch(above,relevant,keys,results);
    }
  }
}

public int decryptBlock(byte[] in,int inOff,byte[] out,int outOff) throws DataLengthException, IllegalStateException {
  if ((inOff + blockSize) > in.length) {
    throw new DataLengthException("input buffer too short");
  }
  if ((outOff + blockSize) > out.length) {
    throw new DataLengthException("output buffer too short");
  }
  cipher.processBlock(cfbV,0,cfbOutV,0);
  System.arraycopy(cfbV,blockSize,cfbV,0,cfbV.length - blockSize);
  System.arraycopy(in,inOff,cfbV,cfbV.length - blockSize,blockSize);
  for (int i=0; i < blockSize; i++) {
    out[outOff + i]=(byte)(cfbOutV[i] ^ in[inOff + i]);
  }
  return blockSize;
}

public static String encodeForRedirect(final String str){
  String classMethod="SAML2Utils.encodeForRedirect: ";
  byte[] input;
  try {
    input=str.getBytes("UTF-8");
  }
 catch (  UnsupportedEncodingException uee) {
    debug.error(classMethod + "cannot get byte array: ",uee);
    return null;
  }
  Deflater deflater=new Deflater(Deflater.DEFAULT_COMPRESSION,true);
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  DeflaterOutputStream deflaterOutputStream=new DeflaterOutputStream(out,deflater);
  try {
    deflaterOutputStream.write(input);
  }
 catch (  IOException e) {
    debug.error(classMethod + "There was a problem compressing the input",e);
    return null;
  }
 finally {
    IOUtils.closeIfNotNull(deflaterOutputStream);
  }
  String encoded=URLEncDec.encode(Base64.encode(out.toByteArray()));
  if (debug.messageEnabled()) {
    debug.message(classMethod + "out string length : " + encoded.length());
    debug.message(classMethod + "out string is ===>" + encoded+ "<===");
  }
  return encoded;
}

private void saveTouchStart(MotionEvent event){
  mSavedMatrix.set(mMatrix);
  mTouchStartPoint.set(event.getX(),event.getY());
  mClosestDataSetToTouch=mChart.getDataSetByTouchPoint(event.getX(),event.getY());
}

public static boolean isNestedMapping(String regex){
  return regex.startsWith(NESTED_MAPPING_STARTS_SYMBOL) && regex.endsWith(NESTED_MAPPING_ENDS_SYMBOL);
}

@Override public Writer append(CharSequence value){
  builder.append(value);
  return this;
}

public static boolean nullEquals(String s1,String s2){
  return (s1 == null ? s2 == null : s1.equals(s2));
}

public String toString(){
  return super.toString() + "    Invalidity Date: " + String.valueOf(date);
}

private boolean hasImages(IAction actionToCheck){
  return actionToCheck.getImageDescriptor() != null || actionToCheck.getHoverImageDescriptor() != null || actionToCheck.getDisabledImageDescriptor() != null;
}

public double calcAngleBetweenLines(Entry start1,Entry end1,Entry start2,Entry end2){
  double angle1=calcAngleWithRatios(start1,end1);
  double angle2=calcAngleWithRatios(start2,end2);
  return Math.abs(angle1 - angle2);
}

public ByteVector putByteArray(final byte[] b,final int off,final int len){
  if (length + len > data.length) {
    enlarge(len);
  }
  if (b != null) {
    System.arraycopy(b,off,data,length,len);
  }
  length+=len;
  return this;
}

public double convertToAttribX(double scx){
  double temp=m_XaxisEnd - m_XaxisStart;
  double temp2=((scx - m_XaxisStart) * (m_maxX - m_minX)) / temp;
  temp2=temp2 + m_minX;
  return temp2;
}

public void completeExecutorTask(){
  ExecutorQueueItem item=null;
synchronized (_executorLock) {
    _executorTaskCount--;
    assert (_executorTaskCount >= 0);
    if (_executorQueueHead != null) {
      item=_executorQueueHead;
      _executorQueueHead=item._next;
      if (_executorQueueHead == null)       _executorQueueTail=null;
    }
  }
  if (item != null) {
    Runnable task=item.getRunnable();
    ClassLoader loader=item.getLoader();
    boolean isPriority=false;
    boolean isQueue=true;
    boolean isWake=true;
    scheduleImpl(task,loader,MAX_EXPIRE,isPriority,isQueue,isWake);
  }
}

public static void forceMkdir(File directory) throws IOException {
  if (directory.exists()) {
    if (!directory.isDirectory()) {
      String message="File " + directory + " exists and is "+ "not a directory. Unable to create directory.";
      throw new IOException(message);
    }
  }
 else {
    if (!directory.mkdirs()) {
      if (!directory.isDirectory()) {
        String message="Unable to create directory " + directory;
        throw new IOException(message);
      }
    }
  }
}

private <T>int countClearedRefs(List<WeakReference<T>> refs){
  final Iterator<WeakReference<T>> itr=refs.iterator();
  int n=0;
  while (itr.hasNext()) {
    final WeakReference<T> ref=itr.next();
    if (ref.get() == null)     n++;
  }
  return n;
}

protected void readImage(){
  ix=readShort();
  iy=readShort();
  iw=readShort();
  ih=readShort();
  int packed=read();
  lctFlag=(packed & 0x80) != 0;
  interlace=(packed & 0x40) != 0;
  lctSize=2 << (packed & 7);
  if (lctFlag) {
    lct=readColorTable(lctSize);
    act=lct;
  }
 else {
    act=gct;
    if (bgIndex == transIndex)     bgColor=0;
  }
  int save=0;
  if (transparency) {
    save=act[transIndex];
    act[transIndex]=0;
  }
  if (act == null) {
    status=STATUS_FORMAT_ERROR;
  }
  if (err())   return;
  decodeImageData();
  skip();
  if (err())   return;
  frameCount++;
  image=new BufferedImage(width,height,BufferedImage.TYPE_INT_ARGB_PRE);
  setPixels();
  frames.add(new GifFrame(image,delay));
  if (transparency) {
    act[transIndex]=save;
  }
  resetFrame();
}

protected void addProjectedField(String s){
  try {
    Field f=inClazz.getDeclaredField(s);
    TypeInfo t=new TypeInfo(f.getName(),ClassUtils.primitiveToWrapper(f.getType()));
    t.getter=PojoUtils.createGetter(inClazz,t.name,t.type);
    t.setter=PojoUtils.createSetter(projectedClazz,t.name,t.type);
    projectedFields.add(t);
  }
 catch (  NoSuchFieldException e) {
    throw new RuntimeException("Field " + s + " not found in class "+ inClazz,e);
  }
}

protected Object evaluateLeftGreaterRight(List elements,String lvalue,String rvalue){
  List array;
  if (elements instanceof java.util.Vector) {
    array=new java.util.Vector();
  }
 else {
    array=new ArrayList();
  }
  for (Iterator e=elements.iterator(); e.hasNext(); ) {
    Object o=e.next();
    if (o instanceof StructuredContent) {
      if ((o=evaluateLeftGreaterRight((StructuredContent)o,lvalue,rvalue)) != null) {
        array.add(o);
      }
    }
  }
  if (array.size() == 1) {
    return (StructuredContent)array.get(0);
  }
  return array;
}

public Optional<Double> avg(){
  if (isEmpty())   return Optional.empty();
  return Optional.of(sum() / getEventCount());
}

public static boolean isSU(String shell){
  int pos=shell.indexOf(' ');
  if (pos >= 0) {
    shell=shell.substring(0,pos);
  }
  pos=shell.lastIndexOf('/');
  if (pos >= 0) {
    shell=shell.substring(pos + 1);
  }
  return shell.equals("su");
}

private boolean isValid(int type,String value){
  if (value == null) {
    return false;
  }
  if (ALLOWED_STRINGS[type] != null) {
    return verifyStringGroup(value,ALLOWED_STRINGS[type]);
  }
switch (type) {
case TYPE_NUMBER:
    return verify(value,DIGITS,null);
case TYPE_PIXELS_OR_PERCENTAGE:
  if (value.endsWith("%")) {
    value=value.substring(0,value.length() - 1);
  }
 else   if (value.endsWith("px")) {
    value=value.substring(0,value.length() - 2);
  }
return verify(value,DIGITS,null);
case TYPE_CHAR:
return verify(value,DIGITS | ABC,null,1,1);
case TYPE_COLOR:
if (value.length() == 0) {
return false;
}
if (value.charAt(0) != '#') {
return verifyStringGroup(value,COLOR_STRINGS);
}
 else {
return verify(value.substring(1),HEX,null,3,6);
}
default :
return true;
}
}

protected synchronized Class loadClass(String name,boolean resolve) throws ClassNotFoundException {
  Class c=findLoadedClass(name);
  if (c == null)   c=findClass(name);
  if (c == null)   throw new ClassNotFoundException(name);
  if (resolve)   resolveClass(c);
  return c;
}

private int parseStreams(String json,Set<StreamInfo> streamInfos){
  try {
    JSONParser parser=new JSONParser();
    JSONArray streamsArray;
    try {
      JSONObject root=(JSONObject)parser.parse(json);
      streamsArray=(JSONArray)root.get("streams");
    }
 catch (    ClassCastException ex) {
      LOGGER.warning("Error parsing streams: unexpected type");
      streamsRequestError(streamInfos);
      return -1;
    }
    if (streamsArray == null) {
      LOGGER.warning("Error parsing streams: streams array not found");
      streamsRequestError(streamInfos);
      return -1;
    }
    for (    Object obj : streamsArray) {
      if (obj instanceof JSONObject) {
        StreamInfo parsedInfo=parseStream((JSONObject)obj,streamInfos == null);
        if (parsedInfo == null) {
          LOGGER.warning("Error parsing stream " + (JSONObject)obj);
        }
        if (streamInfos != null) {
          streamInfos.remove(parsedInfo);
        }
      }
 else {
        LOGGER.warning("Element in array wasn't JSONObject " + obj);
      }
    }
    if (streamInfos != null) {
      for (      StreamInfo info : streamInfos) {
        info.setOffline();
      }
    }
    return streamsArray.size();
  }
 catch (  ParseException ex) {
    LOGGER.warning("Error parsing streams info: " + ex.getLocalizedMessage());
    streamsRequestError(streamInfos);
    return -1;
  }
}

public StrTokenizer reset(String input){
  reset();
  if (input != null) {
    this.chars=input.toCharArray();
  }
 else {
    this.chars=null;
  }
  return this;
}

public void runTest() throws Throwable {
  Document doc;
  EntityReference entRef;
  CharacterData entText;
  doc=(Document)load("staff",true);
  entRef=doc.createEntityReference("ent3");
  assertNotNull("createdEntRefNotNull",entRef);
  entText=(CharacterData)entRef.getFirstChild();
  assertNotNull("entTextNotNull",entText);
{
    boolean success=false;
    try {
      entText.setNodeValue("newValue");
    }
 catch (    DOMException ex) {
      success=(ex.code == DOMException.NO_MODIFICATION_ALLOWED_ERR);
    }
    assertTrue("throw_NO_MODIFICATION_ALLOWED_ERR",success);
  }
}

public void removeListener(final IVisualCoverageListener listener){
  listeners.remove(listener);
}

@ObjectiveCName("isLargeDialogMessage:") public boolean isLargeDialogMessage(ContentType contentType){
switch (contentType) {
case SERVICE:
case SERVICE_AVATAR:
case SERVICE_AVATAR_REMOVED:
case SERVICE_CREATED:
case SERVICE_TITLE:
case SERVICE_LEAVE:
case SERVICE_REGISTERED:
case SERVICE_KICK:
case SERVICE_ADD:
case SERVICE_JOINED:
case SERVICE_CALL_ENDED:
case SERVICE_CALL_MISSED:
case SERVICE_ABOUT:
case SERVICE_TOPIC:
    return true;
default :
  return false;
}
}

public static boolean isLoggingBehaviorEnabled(LoggingBehavior behavior){
synchronized (loggingBehaviors) {
    return FacebookSdk.isDebugEnabled() && loggingBehaviors.contains(behavior);
  }
}

private void onAttacked(final Entity attacker){
  attackers.remove(attacker);
  attackers.add(attacker);
}

private void handleDisallow(ParseState state,RobotToken token){
  if (state.isSkipAgents()) {
    return;
  }
  state.setFinishedAgentFields(true);
  if (!state.isAddingRules()) {
    return;
  }
  String path=token.getData();
  try {
    path=URLDecoder.decode(path,"UTF-8");
    if (path.length() == 0) {
      state.clearRules();
    }
 else {
      state.addRule(path,false);
    }
  }
 catch (  Exception e) {
    reportWarning("Error parsing robots rules - can't decode path: " + path,state.getUrl());
  }
}

public void hideColumn(Object columnName){
  if (columnName == null) {
    return;
  }
  for (int i=0; i < columnModel.getColumnCount(); i++) {
    TableColumn column=columnModel.getColumn(i);
    if (columnName.equals(column.getHeaderValue())) {
      hideColumn(column);
      break;
    }
  }
}

public static <T>Set<T> toSet(T obj1,T obj2,T obj3,T obj4,T obj5,T obj6){
  Set<T> theSet=new LinkedHashSet<T>();
  theSet.add(obj1);
  theSet.add(obj2);
  theSet.add(obj3);
  theSet.add(obj4);
  theSet.add(obj5);
  theSet.add(obj6);
  return theSet;
}

private boolean isASCIIDigit(char c){
  return (c >= '0' && c <= '9');
}

public static String separatorsToWindows(String path){
  if (path == null || path.indexOf(UNIX_SEPARATOR) == -1) {
    return path;
  }
  return path.replace(UNIX_SEPARATOR,WINDOWS_SEPARATOR);
}

public void accumulateAll(List<TaggedLogAPIEntity> entities) throws Exception {
  for (  TaggedLogAPIEntity entity : entities) {
    accumulate(entity);
  }
}

protected void printIdentifier(String identifier,StringBuilder ddl){
  ddl.append(getDelimitedIdentifier(identifier));
}

public static int darker(int c){
  return rgba(Math.max(0,(int)(scale * red(c))),Math.max(0,(int)(scale * green(c))),Math.max(0,(int)(scale * blue(c))),alpha(c));
}

private String toString(final int size){
  if (size < 1024) {
    return String.format("%d bytes",size);
  }
 else   if (size < 1024 * 1024) {
    return String.format(Locale.ENGLISH,"%.02f KB",1.0 * size / 1024);
  }
 else {
    return String.format(Locale.ENGLISH,"%.02f MB",1.0 * size / 1024 / 1024);
  }
}

@KnownFailure("Not supported : pattern with %") public void test_getColumnsArbitrary() throws SQLException {
  ResultSet setAllNull=null;
  ResultSet setMixed=null;
  ResultSet allArbitrary=null;
  String[] tablesName={DatabaseCreator.TEST_TABLE1,DatabaseCreator.TEST_TABLE3};
  Arrays.sort(tablesName);
  int setSize=0;
  try {
    allArbitrary=meta.getColumns("%","%","%","%");
    assertNotNull(allArbitrary);
    checkColumnsShape(allArbitrary);
    setSize=crossCheckGetColumnsAndResultSetMetaData(allArbitrary,false);
    assertEquals(6,setSize);
    setMixed=meta.getColumns(null,null,"%","%");
    assertNotNull(setMixed);
    checkColumnsShape(setMixed);
    setSize=crossCheckGetColumnsAndResultSetMetaData(setMixed,false);
    assertEquals(6,setSize);
  }
 catch (  SQLException e) {
    fail("Unexpected exception: " + e.getMessage());
  }
  conn.close();
  try {
    meta.getColumns(null,null,DatabaseCreator.TEST_TABLE1,"%");
    fail("SQLException not thrown");
  }
 catch (  SQLException e) {
  }
}

static public SdfMacro decodeInstruction(SdfBuffer buff){
  SdfMacro m;
  if ((m=ChannelStart.match(buff)) != null) {
    return m;
  }
 else   if ((m=SdlVersion.match(buff)) != null) {
    return m;
  }
 else   if ((m=SkemeStart.match(buff)) != null) {
    return m;
  }
 else   if ((m=GenerateTrigger.match(buff)) != null) {
    return m;
  }
 else   if ((m=EndSound.match(buff)) != null) {
    return m;
  }
 else   if ((m=DelaySound.match(buff)) != null) {
    return m;
  }
 else   if ((m=SkipOnTrigger.match(buff)) != null) {
    return m;
  }
 else   if ((m=InitiateSound.match(buff)) != null) {
    return m;
  }
 else   if ((m=MaskCompare.match(buff)) != null) {
    return m;
  }
 else   if ((m=LoadModifier.match(buff)) != null) {
    return m;
  }
 else   if ((m=BranchTo.match(buff)) != null) {
    return m;
  }
 else   if ((m=Play.match(buff)) != null) {
    return m;
  }
 else   if ((m=FourByteMacro.match(buff)) != null) {
    return m;
  }
 else   if ((m=TwoByteMacro.match(buff)) != null) {
    return m;
  }
  log.warn("dropped through");
  return null;
}

public SIPDate(long timeMillis){
  javaCal=new GregorianCalendar(TimeZone.getTimeZone("GMT:0"),Locale.getDefault());
  java.util.Date date=new java.util.Date(timeMillis);
  javaCal.setTime(date);
  wkday=javaCal.get(Calendar.DAY_OF_WEEK);
switch (wkday) {
case Calendar.MONDAY:
    sipWkDay=MON;
  break;
case Calendar.TUESDAY:
sipWkDay=TUE;
break;
case Calendar.WEDNESDAY:
sipWkDay=WED;
break;
case Calendar.THURSDAY:
sipWkDay=THU;
break;
case Calendar.FRIDAY:
sipWkDay=FRI;
break;
case Calendar.SATURDAY:
sipWkDay=SAT;
break;
case Calendar.SUNDAY:
sipWkDay=SUN;
break;
default :
InternalErrorHandler.handleException("No date map for wkday " + wkday);
}
day=javaCal.get(Calendar.DAY_OF_MONTH);
month=javaCal.get(Calendar.MONTH);
switch (month) {
case Calendar.JANUARY:
sipMonth=JAN;
break;
case Calendar.FEBRUARY:
sipMonth=FEB;
break;
case Calendar.MARCH:
sipMonth=MAR;
break;
case Calendar.APRIL:
sipMonth=APR;
break;
case Calendar.MAY:
sipMonth=MAY;
break;
case Calendar.JUNE:
sipMonth=JUN;
break;
case Calendar.JULY:
sipMonth=JUL;
break;
case Calendar.AUGUST:
sipMonth=AUG;
break;
case Calendar.SEPTEMBER:
sipMonth=SEP;
break;
case Calendar.OCTOBER:
sipMonth=OCT;
break;
case Calendar.NOVEMBER:
sipMonth=NOV;
break;
case Calendar.DECEMBER:
sipMonth=DEC;
break;
default :
InternalErrorHandler.handleException("No date map for month " + month);
}
year=javaCal.get(Calendar.YEAR);
hour=javaCal.get(Calendar.HOUR_OF_DAY);
minute=javaCal.get(Calendar.MINUTE);
second=javaCal.get(Calendar.SECOND);
}

public static TypeMirror upperBound(TypeMirror type){
  do {
    if (type instanceof TypeVariable) {
      TypeVariable tvar=(TypeVariable)type;
      if (tvar.getUpperBound() != null) {
        type=tvar.getUpperBound();
      }
 else {
        break;
      }
    }
 else     if (type instanceof WildcardType) {
      WildcardType wc=(WildcardType)type;
      if (wc.getExtendsBound() != null) {
        type=wc.getExtendsBound();
      }
 else {
        break;
      }
    }
 else {
      break;
    }
  }
 while (true);
  return type;
}

public synchronized Object remove(Object key){
  removeBlanks();
  WeakKeyReference keyRef=new WeakKeyReference(key);
  WeakReference ref=(WeakReference)table.remove(keyRef);
  if (ref == null)   return null;
  return ref.get();
}

public boolean removeElement(Node s){
  if (!m_mutable)   throw new RuntimeException(XSLMessages.createXPATHMessage(XPATHErrorResources.ER_NODESET_NOT_MUTABLE,null));
  if (null == m_map)   return false;
  for (int i=0; i < m_firstFree; i++) {
    Node node=m_map[i];
    if ((null != node) && node.equals(s)) {
      if (i < m_firstFree - 1)       System.arraycopy(m_map,i + 1,m_map,i,m_firstFree - i - 1);
      m_firstFree--;
      m_map[m_firstFree]=null;
      return true;
    }
  }
  return false;
}

@Override public InetAddress addressLocal(){
  Socket s=getSocket();
  if (s != null) {
    return s.getLocalAddress();
  }
 else {
    return null;
  }
}

public boolean startConnection(){
  State state=_state.get();
  if (state.isActive()) {
    _connectionCount.incrementAndGet();
    return true;
  }
  long now=CurrentTime.currentTime();
  long lastFailTime=_lastFailTime;
  long recoverTimeout=_dynamicRecoverTimeout.get();
  if (now < lastFailTime + recoverTimeout) {
    return false;
  }
  int count;
  do {
    count=_connectionCount.get();
    if (count > 0) {
      return false;
    }
  }
 while (!_connectionCount.compareAndSet(count,count + 1));
  return true;
}

public AbstractNaryOperator(final Expr... args){
  this(Arrays.asList(args));
}

static boolean isRegistered(ObjectName objectName){
  return mbeanServer != null && mbeanServer.isRegistered(objectName);
}

public static int findBestSampleSize(int actualWidth,int actualHeight,int desiredWidth,int desiredHeight){
  double wr=(double)actualWidth / desiredWidth;
  double hr=(double)actualHeight / desiredHeight;
  double ratio=Math.min(wr,hr);
  float n=1.0f;
  while ((n * 2) <= ratio) {
    n*=2;
  }
  return (int)n;
}

public SocketReader(final Socket socket) throws IOException {
  Preconditions.checkNotNull(socket,"IE00745: Socket can not be null");
  m_InputStream=new BufferedInputStream(socket.getInputStream());
}

private boolean moveToFinalScrollerPosition(Scroller scroller){
  scroller.forceFinished(true);
  if (isHorizontalMode()) {
    int amountToScroll=scroller.getFinalX() - scroller.getCurrX();
    int futureScrollOffset=(mCurrentScrollOffset + amountToScroll) % mSelectorElementSize;
    int overshootAdjustment=mInitialScrollOffset - futureScrollOffset;
    if (overshootAdjustment != 0) {
      if (Math.abs(overshootAdjustment) > mSelectorElementSize / 2) {
        if (overshootAdjustment > 0) {
          overshootAdjustment-=mSelectorElementSize;
        }
 else {
          overshootAdjustment+=mSelectorElementSize;
        }
      }
      amountToScroll+=overshootAdjustment;
      scrollBy(amountToScroll,0);
      return true;
    }
  }
 else {
    int amountToScroll=scroller.getFinalY() - scroller.getCurrY();
    int futureScrollOffset=(mCurrentScrollOffset + amountToScroll) % mSelectorElementSize;
    int overshootAdjustment=mInitialScrollOffset - futureScrollOffset;
    if (overshootAdjustment != 0) {
      if (Math.abs(overshootAdjustment) > mSelectorElementSize / 2) {
        if (overshootAdjustment > 0) {
          overshootAdjustment-=mSelectorElementSize;
        }
 else {
          overshootAdjustment+=mSelectorElementSize;
        }
      }
      amountToScroll+=overshootAdjustment;
      scrollBy(0,amountToScroll);
      return true;
    }
  }
  return false;
}

public void addLonLine(double minLat,double maxLat,double lon){
  String name="lonline" + nextShape;
  nextShape++;
  b.append("        var " + name + " = WE.polygon([\n");
  double lat;
  int steps=getStepCount(minLat,lon,maxLat,lon);
  for (lat=minLat; lat <= maxLat; lat+=(maxLat - minLat) / steps) {
    b.append("          [" + lat + ", "+ lon+ "],\n");
  }
  b.append("          [" + maxLat + ", "+ lon+ "],\n");
  lat-=(maxLat - minLat) / 36;
  for (; lat >= minLat; lat-=(maxLat - minLat) / steps) {
    b.append("          [" + lat + ", "+ lon+ "],\n");
  }
  b.append("        ], {color: \"#ff0000\", fillColor: \"#ffffff\", opacity: 1, fillOpacity: 0.0001});\n");
  b.append("        " + name + ".addTo(earth);\n");
}

@Override public double calculate_K(int[] x_index,double[] x_att,int[] y_index,double[] y_att){
  double result=0;
  double tmp;
  int xpos=x_index.length - 1;
  int ypos=y_index.length - 1;
  int zeros=dim;
  while ((xpos >= 0) && (ypos >= 0)) {
    if (x_index[xpos] == y_index[ypos]) {
      tmp=x_att[xpos] - y_att[ypos];
      result+=Math.exp(-sigma * tmp * tmp);
      xpos--;
      ypos--;
    }
 else     if (x_index[xpos] > y_index[ypos]) {
      tmp=x_att[xpos];
      result+=Math.exp(-sigma * tmp * tmp);
      xpos--;
    }
 else {
      tmp=y_att[ypos];
      result+=Math.exp(-sigma * tmp * tmp);
      ypos--;
    }
    zeros--;
  }
  while (xpos >= 0) {
    tmp=x_att[xpos];
    result+=Math.exp(-sigma * tmp * tmp);
    xpos--;
    zeros--;
  }
  while (ypos >= 0) {
    tmp=y_att[ypos];
    result+=Math.exp(-sigma * tmp * tmp);
    ypos--;
    zeros--;
  }
  result+=zeros;
  return Math.pow(result,degree);
}

private float sweep(float tan1X,float tan1Y,float tan2X,float tan2Y){
  final float minorSweep=(float)Math.toDegrees(2 * (Math.asin(.5 * Geometry.distance(tan1X,tan1Y,tan2X,tan2Y) / mScaledTouchSlop)));
  return 360 - minorSweep;
}

SunCertPathBuilderResult(CertPath certPath,TrustAnchor trustAnchor,PolicyNode policyTree,PublicKey subjectPublicKey,AdjacencyList adjList){
  super(certPath,trustAnchor,policyTree,subjectPublicKey);
  this.adjList=adjList;
}

public static void attach(final JFrame parent,final IDebugger debugger,final CDebugEventNotifier notifier){
  try {
    notifier.start();
    debugger.connect();
  }
 catch (  final DebugExceptionWrapper exception) {
    notifier.stop();
    CUtilityFunctions.logException(exception);
    final String innerMessage="E00082: " + "Could not attach to the debug client";
    final String innerDescription=CUtilityFunctions.createDescription("BinNavi could not attach to the debug client.",new String[]{"There was a problem with the connection to the debug client."},new String[]{"The debugger process was not started yet. You can try to debug " + "the client again once you resolved the connection problems."});
    NaviErrorDialog.show(parent,innerMessage,innerDescription,exception);
  }
}

public boolean checkAddrPattern(final String theAddrPattern){
  return theAddrPattern.equals(addrPattern());
}

@MediumTest public void testStabilityInSpace(){
  long t=System.currentTimeMillis();
  VelocityTracker vt=VelocityTracker.obtain();
  drag(vt,100,200,100,200,10,t,400);
  vt.computeCurrentVelocity(1);
  float firstX=vt.getXVelocity();
  float firstY=vt.getYVelocity();
  vt.clear();
  drag(vt,200,300,200,300,10,t,400);
  vt.computeCurrentVelocity(1);
  float secondX=vt.getXVelocity();
  float secondY=vt.getYVelocity();
  assertEqualFuzzy(firstX,secondX,0.1f);
  assertEqualFuzzy(firstY,secondY,0.1f);
  vt.recycle();
}

private View fillFromTop(int nextTop){
  if (DEBUG)   Log.i(TAG,"fillFromTop() nextLeft: " + nextTop + M_FIRST_POSITION+ mFirstPosition);
  mFirstPosition=Math.min(mFirstPosition,mSelectedPosition);
  mFirstPosition=Math.min(mFirstPosition,mItemCount - 1);
  if (mFirstPosition < 0) {
    mFirstPosition=0;
  }
  mFirstPosition-=mFirstPosition % mNumColumns;
  return fillDown(mFirstPosition,nextTop);
}

public static String SITInfo(EnumMap<SIT,EnumMap<CIT,Boolean>> shp){
  StringBuilder result=new StringBuilder();
  for (  SIT key : shp.keySet()) {
    result.append("\t" + key.toString() + ":"+ CITInfo(shp.get(key))+ "\n");
  }
  return result.toString();
}

public static Map<String,Object> updateBinaryFile(DispatchContext dctx,Map<String,? extends Object> context){
  Map<String,Object> result=null;
  try {
    result=updateBinaryFileMethod(dctx,context);
  }
 catch (  GenericServiceException e) {
    return ServiceUtil.returnError(e.getMessage());
  }
  return result;
}

public List<byte[]> write(List<InternalLog> logs) throws IOException {
  final List<Put> puts=new ArrayList<Put>(logs.size());
  final List<byte[]> result=new ArrayList<byte[]>(logs.size());
  for (  InternalLog log : logs) {
    final byte[] rowkey=RowkeyBuilder.buildRowkey(log);
    final Put p=new Put(rowkey);
    populateColumnValues(p,log);
    puts.add(p);
    final List<byte[]> indexRowkeys=log.getIndexRowkeys();
    if (indexRowkeys != null) {
      writeIndexes(rowkey,indexRowkeys,puts);
    }
    result.add(rowkey);
  }
  tbl.put(puts);
  return result;
}

public int read(long fileOffset,byte[] buffer,int offset,int length) throws IOException {
  log.info("random-read(0x" + Long.toHexString(fileOffset) + ","+ length+ ")");
  return _file.read(fileOffset,buffer,offset,length);
}

public boolean validateCurrentStep(int currentStep,int newStep){
  return true;
}

@NonNull protected static List<RaveError> mustBeTrue(boolean input,@NonNull ValidationContext validationContext){
  return input ? Collections.<RaveError>emptyList() : createNewList(new RaveError(validationContext,RaveErrorStrings.MUST_BE_TRUE_ERROR));
}

private void signalNotFull(){
  final ReentrantLock putLock=this.putLock;
  putLock.lock();
  try {
    notFull.signal();
  }
  finally {
    putLock.unlock();
  }
}

@LogMessageDoc(level="ERROR",message="Failed to queue hint for store {storeName}",explanation="There was an error synchronizing data to " + "remote nodes",recommendation=LogMessageDoc.REPORT_CONTROLLER_BUG) public void queueHint(String storeName,ByteArray key,Versioned<byte[]> value){
  try {
    HintKey hk=new HintKey(storeName,key);
    hintLock.lock();
    try {
      boolean needed=!hints.containsKey(hk);
      needed&=hints.doput(hk,value);
      if (needed) {
        hintQueue.add(hk);
        hintsAvailable.signal();
      }
    }
  finally {
      hintLock.unlock();
    }
  }
 catch (  SyncException e) {
    logger.error("Failed to queue hint for store " + storeName,e);
  }
}

public static DBIDVar randomSample(DBIDs ids,RandomFactory random){
  return randomSample(ids,random.getSingleThreadedRandom());
}

public void testAddListener(){
  SimpleListener listener1=createMockSimpleListener(1);
  SimpleListener listener2=createMockSimpleListener(1);
  assertEquals(0,adaptor.getNumListeners());
  adaptor.addListener(listener1);
  assertEquals(1,adaptor.getNumListeners());
  adaptor.addListener(listener2);
  assertEquals(2,adaptor.getNumListeners());
  adaptor.addListener(listener1);
  assertEquals(2,adaptor.getNumListeners());
  List<SimpleListener> listeners=Lists.asList(adaptor.getListeners());
  assertEquals(2,listeners.size());
  assertTrue(listeners.contains(listener1));
  assertTrue(listeners.contains(listener2));
  EasyMock.verify(listener1,listener2);
}

public void onResponse(DiscoveryNode node){
  boolean found=pendingNodes.remove(node);
  assert found : "node [" + node + "] already responded or failed";
  latch.countDown();
}

@Override public synchronized boolean add(E object){
  if (elementCount == elementData.length) {
    growByOne();
  }
  elementData[elementCount++]=object;
  modCount++;
  return true;
}

private static long copy(InputStream from,OutputStream to) throws IOException {
  byte[] buf=new byte[Settings.BUFFER_SIZE];
  long total=0;
  while (true) {
    int r=from.read(buf);
    if (r == -1) {
      break;
    }
    to.write(buf,0,r);
    total+=r;
  }
  return total;
}

public ByteVector putByteArray(final byte[] b,final int off,final int len){
  if (length + len > data.length) {
    enlarge(len);
  }
  if (b != null) {
    System.arraycopy(b,off,data,length,len);
  }
  length+=len;
  return this;
}

public void addValue(String value){
  if (_stringValues == null) {
    setupStringValues();
  }
  if (!_stringValues.contains(value)) {
    _stringValues.add(value);
  }
}

public void writeRawLittleEndian32(final int value) throws IOException {
  if (buffer.remaining() < 4) {
    throw new OutOfSpaceException(buffer.position(),buffer.limit());
  }
  buffer.putInt(value);
}

private static URL[] pathToURLs(String path) throws MalformedURLException {
  if (path == null) {
    return null;
  }
synchronized (pathToURLsCache) {
    Object[] v=(Object[])pathToURLsCache.get(path);
    if (v != null) {
      return ((URL[])v[0]);
    }
  }
  StringTokenizer st=new StringTokenizer(path);
  URL[] urls=new URL[st.countTokens()];
  for (int i=0; st.hasMoreTokens(); i++) {
    urls[i]=new URL(st.nextToken());
  }
synchronized (pathToURLsCache) {
    pathToURLsCache.put(path,new Object[]{urls,new SoftReference(path)});
  }
  return urls;
}

public static int hash4(int hash,Object x,Object y,Object z,Object w){
  return 0x40000000 | (hash + 7 * System.identityHashCode(x) + 11 * System.identityHashCode(y) + 13 * System.identityHashCode(z) + 17 * System.identityHashCode(w));
}

public long skip(long n) throws IOException {
  if (n < 0) {
    throw new IllegalArgumentException("negative skip length");
  }
  ensureOpen();
  int max=(int)Math.min(n,Integer.MAX_VALUE);
  int total=0;
  while (total < max) {
    int len=max - total;
    if (len > b.length) {
      len=b.length;
    }
    len=read(b,0,len);
    if (len == -1) {
      reachEOF=true;
      break;
    }
    total+=len;
  }
  return total;
}

private V doPut(K kkey,V value,boolean onlyIfAbsent){
  Comparable<? super K> key=comparable(kkey);
  for (; ; ) {
    Node<K,V> b=findPredecessor(key);
    Node<K,V> n=b.next;
    for (; ; ) {
      if (n != null) {
        Node<K,V> f=n.next;
        if (n != b.next)         break;
        Object v=n.value;
        if (v == null) {
          n.helpDelete(b,f);
          break;
        }
        if (v == n || b.value == null)         break;
        int c=key.compareTo(n.key);
        if (c > 0) {
          b=n;
          n=f;
          continue;
        }
        if (c == 0) {
          if (onlyIfAbsent || n.casValue(v,value))           return (V)v;
 else           break;
        }
      }
      Node<K,V> z=new Node<K,V>(kkey,value,n);
      if (!b.casNext(n,z))       break;
      int level=randomLevel();
      if (level > 0)       insertIndex(z,level);
      return null;
    }
  }
}

public void addFillOutsideLine(FillOutsideLine fill){
  mFillBelowLine.add(fill);
}

public void add(final PositionChangeListener listener){
  listeners.add(listener);
}

public void choose(boolean enable,String what);

public void testDuplicateEntries() throws Exception {
  String name1="test_file_name1";
  String name2="test_file_name2";
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream out=new ZipOutputStream(baos);
  out.putNextEntry(new ZipEntry(name2));
  out.closeEntry();
  out.putNextEntry(new ZipEntry(name1));
  out.closeEntry();
  out.close();
  byte[] buffer=baos.toByteArray();
  replaceBytes(buffer,name2.getBytes(),name1.getBytes());
  File badZip=createTemporaryZipFile();
  writeBytes(badZip,buffer);
  try {
    ZipFile bad=new ZipFile(badZip);
    fail();
  }
 catch (  ZipException expected) {
  }
}

private void rehash(){
  int size=_symbols.length;
  int newSize=size + size;
  if (newSize > MAX_TABLE_SIZE) {
    _size=0;
    Arrays.fill(_symbols,null);
    Arrays.fill(_buckets,null);
    _dirty=true;
    return;
  }
  String[] oldSyms=_symbols;
  Bucket[] oldBuckets=_buckets;
  _symbols=new String[newSize];
  _buckets=new Bucket[newSize >> 1];
  _indexMask=newSize - 1;
  _sizeThreshold=_thresholdSize(newSize);
  int count=0;
  int maxColl=0;
  for (int i=0; i < size; ++i) {
    String symbol=oldSyms[i];
    if (symbol != null) {
      ++count;
      int index=_hashToIndex(calcHash(symbol));
      if (_symbols[index] == null) {
        _symbols[index]=symbol;
      }
 else {
        int bix=(index >> 1);
        Bucket newB=new Bucket(symbol,_buckets[bix]);
        _buckets[bix]=newB;
        maxColl=Math.max(maxColl,newB.length());
      }
    }
  }
  size>>=1;
  for (int i=0; i < size; ++i) {
    Bucket b=oldBuckets[i];
    while (b != null) {
      ++count;
      String symbol=b.getSymbol();
      int index=_hashToIndex(calcHash(symbol));
      if (_symbols[index] == null) {
        _symbols[index]=symbol;
      }
 else {
        int bix=(index >> 1);
        Bucket newB=new Bucket(symbol,_buckets[bix]);
        _buckets[bix]=newB;
        maxColl=Math.max(maxColl,newB.length());
      }
      b=b.getNext();
    }
  }
  _longestCollisionList=maxColl;
  if (count != _size) {
    throw new Error("Internal error on SymbolTable.rehash(): had " + _size + " entries; now have "+ count+ ".");
  }
}

private void checkSize(final int i){
  if (i >= max_size) {
    final int old_size=max_size;
    max_size+=increment_size;
    if (max_size <= i) {
      max_size=i + increment_size + 2;
    }
    final int[] temp=items;
    items=new int[max_size];
    System.arraycopy(temp,0,items,0,old_size);
    increment_size=incrementSize(increment_size);
  }
}

public ComponentPrintService(Component c,PageFormat format){
  setPageFormat(format);
  setPrintable(this);
  setComponent(c);
  Rectangle componentBounds=c.getBounds(null);
  setSize(componentBounds.width,componentBounds.height);
  setScale(1,1);
}

@Override public void reconcileFlow(OFMatchReconcile ofmRcIn,EventPriority priority){
  if (ofmRcIn == null)   return;
  OFMatchReconcile myOfmRc=new OFMatchReconcile(ofmRcIn);
  flowQueue.offer(myOfmRc,priority);
  ctrFlowReconcileRequest.increment();
  Date currTime=new Date();
  long delay=0;
  if (currTime.after(new Date(lastReconcileTime.getTime() + 1000))) {
    delay=0;
  }
 else {
    delay=FLOW_RECONCILE_DELAY_MILLISEC;
  }
  flowReconcileTask.reschedule(delay,TimeUnit.MILLISECONDS);
  if (logger.isTraceEnabled()) {
    logger.trace("Reconciling flow: {}, total: {}",myOfmRc.toString(),flowQueue.size());
  }
}

public static Optional<String> createInputDialog(final Window owner,final String title,final String label){
  final TextInputDialog dialog=new TextInputDialog();
  dialog.setTitle(title);
  dialog.setHeaderText(null);
  dialog.setContentText(label);
  dialog.initOwner(owner);
  return dialog.showAndWait();
}

public void flush() throws IOException {
  if (writer != null) {
    writer.flush();
  }
  outstr.flush();
}

@SuppressWarnings("unchecked") protected synchronized V removeInternal(Object key,boolean countRemove){
  if (key == null) {
    if (Debug.verboseOn())     Debug.logVerbose("In UtilCache tried to remove with null key, using NullObject" + this.name,module);
  }
  Object nulledKey=fromKey(key);
  CacheLine<V> oldCacheLine;
  V oldValue;
  if (fileTable != null) {
    try {
synchronized (this) {
        try {
          oldValue=fileTable.get(nulledKey);
        }
 catch (        IOException e) {
          oldValue=null;
          throw e;
        }
        fileTable.remove(nulledKey);
        jdbmMgr.commit();
      }
    }
 catch (    IOException e) {
      oldValue=null;
      Debug.logError(e,module);
    }
    oldCacheLine=memoryTable.remove(nulledKey);
  }
 else {
    oldCacheLine=memoryTable.remove(nulledKey);
    oldValue=oldCacheLine != null ? oldCacheLine.getValue() : null;
  }
  if (oldCacheLine != null) {
    cancel(oldCacheLine);
  }
  if (oldValue != null) {
    noteRemoval((K)key,oldValue);
    if (countRemove)     removeHitCount.incrementAndGet();
    return oldValue;
  }
 else {
    if (countRemove)     removeMissCount.incrementAndGet();
    return null;
  }
}

public void remove(double value){
  if (Double.isNaN(value)) {
    return;
  }
  int index=findInsertIndex(value);
  if (index == -1) {
    throw new IllegalStateException("Value not found in collection");
  }
  Double valueAtIndex=values.get(index);
  if ((valueAtIndex != null) && (!valueAtIndex.equals(value))) {
    throw new IllegalStateException("Value not found in collection");
  }
  values.remove(index);
}

public void childrenRemoved(BeanContextMembershipEvent bcme){
  Iterator<?> it=bcme.iterator();
  while (it.hasNext()) {
    findAndUndo(it.next());
  }
}

void lightweightPaint(Graphics g){
  super.lightweightPaint(g);
  paintHeavyweightComponents(g);
}

public JSONArray names(){
  JSONArray ja=new JSONArray();
  Iterator keys=keys();
  while (keys.hasNext()) {
    ja.put(keys.next());
  }
  return ja.length() == 0 ? null : ja;
}

private final void removeChannel(String channel){
  channel=channel.toLowerCase();
synchronized (_channels) {
    _channels.remove(channel);
  }
}

public void addChangeListener(ChangeListener cl){
  if (!listeners.contains(cl))   listeners.add(cl);
}

public static void expandNumber(String numberString,WordRelation wordRelation,Item tokenItem){
  int numDigits=numberString.length();
  if (numDigits == 0) {
  }
 else   if (numDigits == 1) {
    expandDigits(numberString,wordRelation,tokenItem);
  }
 else   if (numDigits == 2) {
    expand2DigitNumber(numberString,wordRelation,tokenItem);
  }
 else   if (numDigits == 3) {
    expand3DigitNumber(numberString,wordRelation,tokenItem);
  }
 else   if (numDigits < 7) {
    expandBelow7DigitNumber(numberString,wordRelation,tokenItem);
  }
 else   if (numDigits < 10) {
    expandBelow10DigitNumber(numberString,wordRelation,tokenItem);
  }
 else   if (numDigits < 13) {
    expandBelow13DigitNumber(numberString,wordRelation,tokenItem);
  }
 else {
    expandDigits(numberString,wordRelation,tokenItem);
  }
}

private void translateMatrixAfterRotate(int axis,float trans,float prevImageSize,float imageSize,int prevViewSize,int viewSize,int drawableSize){
  if (imageSize < viewSize) {
    m[axis]=(viewSize - (drawableSize * m[Matrix.MSCALE_X])) * 0.5f;
  }
 else   if (trans > 0) {
    m[axis]=-((imageSize - viewSize) * 0.5f);
  }
 else {
    float percentage=(Math.abs(trans) + (0.5f * prevViewSize)) / prevImageSize;
    m[axis]=-((percentage * imageSize) - (viewSize * 0.5f));
  }
}

private int measureShort(int measureSpec){
  int result=0;
  int specMode=MeasureSpec.getMode(measureSpec);
  int specSize=MeasureSpec.getSize(measureSpec);
  if (specMode == MeasureSpec.EXACTLY) {
    result=specSize;
  }
 else {
    result=(int)(2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
    if (specMode == MeasureSpec.AT_MOST) {
      result=Math.min(result,specSize);
    }
  }
  return result;
}

protected boolean canTriggerWalking(){
  return false;
}

private void writeAttribute(java.lang.String prefix,java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (xmlWriter.getPrefix(namespace) == null) {
    xmlWriter.writeNamespace(prefix,namespace);
    xmlWriter.setPrefix(prefix,namespace);
  }
  xmlWriter.writeAttribute(namespace,attName,attValue);
}

public static String encryptECB(final byte[] concatenatedHashValue,final Long turnoverCounter,final SecretKey symmetricKey,int turnOverCounterLengthInBytes) throws NoSuchAlgorithmException, NoSuchProviderException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
  final ByteBuffer byteBufferIV=ByteBuffer.allocate(16);
  byteBufferIV.put(concatenatedHashValue);
  final byte[] IV=byteBufferIV.array();
  final ByteBuffer byteBufferData=ByteBuffer.allocate(16);
  byteBufferData.putLong(turnoverCounter);
  final byte[] data=byteBufferData.array();
  byte[] turnOverCounterByteRep=get2ComplementRepForLong(turnoverCounter,turnOverCounterLengthInBytes);
  System.arraycopy(turnOverCounterByteRep,0,data,0,turnOverCounterByteRep.length);
  final Cipher cipher=Cipher.getInstance("AES/ECB/NoPadding","BC");
  cipher.init(Cipher.ENCRYPT_MODE,symmetricKey);
  final byte[] intermediateResult=cipher.doFinal(IV);
  final byte[] result=new byte[data.length];
  for (int i=0; i < data.length; i++) {
    result[i]=(byte)((data[i]) ^ (intermediateResult[i]));
  }
  final byte[] encryptedTurnOverValue=new byte[turnOverCounterLengthInBytes];
  System.arraycopy(result,0,encryptedTurnOverValue,0,turnOverCounterLengthInBytes);
  return CashBoxUtils.base64Encode(encryptedTurnOverValue,false);
}

private static boolean isFrostWireOld(String messageVersion){
  if (messageVersion == null)   return false;
  String currentVersion=FrostWireUtils.getFrostWireVersion();
  if (currentVersion.equals(messageVersion)) {
    return false;
  }
  try {
    String[] fwVersionParts=currentVersion.split("\\.");
    int fw_major=Integer.parseInt(fwVersionParts[0]);
    int fw_release=Integer.parseInt(fwVersionParts[1]);
    int fw_service=Integer.parseInt(fwVersionParts[2]);
    String[] msgVersionParts=messageVersion.split("\\.");
    int msg_major=Integer.parseInt(msgVersionParts[0]);
    int msg_release=Integer.parseInt(msgVersionParts[1]);
    int msg_service=Integer.parseInt(msgVersionParts[2]);
    if (fw_major < msg_major) {
      return true;
    }
    if (fw_major == msg_major && fw_release < msg_release) {
      return true;
    }
    if (fw_major == msg_major && fw_release == msg_release && fw_service < msg_service) {
      return true;
    }
  }
 catch (  Exception e) {
    return false;
  }
  return false;
}

public synchronized void drawMap(){
  lastDrawMapReq=System.currentTimeMillis();
  SwingUtilities.invokeLater(drawMapable);
}

public void selectTable2Column(Index column){
  table2Columns.add(column);
}

public List<String> extractURLs(final String text){
  if (text == null || text.length() == 0)   return Collections.emptyList();
  final ArrayList<String> urls=new ArrayList<String>();
  for (  final Entity entity : extractURLsWithIndices(text)) {
    urls.add(entity.value);
  }
  return urls;
}

public void findAndUndo(Iterator it){
  while (it.hasNext()) {
    findAndUndo(it.next());
  }
}

public static int[] scaleDownInside(int inWidth,int inHeight,int maxWidth,int maxHeight){
  int scaledWidth;
  int scaledHeight;
  if (inWidth <= maxWidth && inHeight <= maxHeight) {
    scaledWidth=inWidth;
    scaledHeight=inHeight;
  }
 else {
    double widthRatio=(double)inWidth / (double)maxWidth;
    double heightRatio=(double)inHeight / (double)maxHeight;
    if (widthRatio > heightRatio) {
      scaledWidth=maxWidth;
      scaledHeight=(int)Math.round((double)inHeight / widthRatio);
    }
 else {
      scaledHeight=maxHeight;
      scaledWidth=(int)Math.round((double)inWidth / heightRatio);
    }
  }
  return new int[]{scaledWidth,scaledHeight};
}

public void rm(String fileOrDir){
  StringBuilder buf=new StringBuilder();
  String command=String.format(ImageServerDialogProperties.getString("cmd.rm"),fileOrDir);
  sendWaitFor(command,defaultTimeout,prompts,buf);
  log.debug(buf.toString());
}

private MGRSComponents breakMGRSString(String MGRSString){
  int num_digits;
  int num_letters;
  int i=0;
  int j=0;
  long error_code=MGRS_NO_ERROR;
  int zone=0;
  int[] letters=new int[3];
  long easting=0;
  long northing=0;
  int precision=0;
  while (i < MGRSString.length() && MGRSString.charAt(i) == ' ') {
    i++;
  }
  j=i;
  while (i < MGRSString.length() && Character.isDigit(MGRSString.charAt(i))) {
    i++;
  }
  num_digits=i - j;
  if (num_digits <= 2)   if (num_digits > 0) {
    zone=Integer.parseInt(MGRSString.substring(j,i));
    if ((zone < 1) || (zone > 60))     error_code|=MGRS_STRING_ERROR;
  }
 else   error_code|=MGRS_STRING_ERROR;
  j=i;
  while (i < MGRSString.length() && Character.isLetter(MGRSString.charAt(i))) {
    i++;
  }
  num_letters=i - j;
  if (num_letters == 3) {
    letters[0]=alphabet.indexOf(Character.toUpperCase(MGRSString.charAt(j)));
    if ((letters[0] == LETTER_I) || (letters[0] == LETTER_O))     error_code|=MGRS_STRING_ERROR;
    letters[1]=alphabet.indexOf(Character.toUpperCase(MGRSString.charAt(j + 1)));
    if ((letters[1] == LETTER_I) || (letters[1] == LETTER_O))     error_code|=MGRS_STRING_ERROR;
    letters[2]=alphabet.indexOf(Character.toUpperCase(MGRSString.charAt(j + 2)));
    if ((letters[2] == LETTER_I) || (letters[2] == LETTER_O))     error_code|=MGRS_STRING_ERROR;
  }
 else   error_code|=MGRS_STRING_ERROR;
  j=i;
  while (i < MGRSString.length() && Character.isDigit(MGRSString.charAt(i))) {
    i++;
  }
  num_digits=i - j;
  if ((num_digits <= 10) && (num_digits % 2 == 0)) {
    int n;
    double multiplier;
    n=num_digits / 2;
    precision=n;
    if (n > 0) {
      easting=Integer.parseInt(MGRSString.substring(j,j + n));
      northing=Integer.parseInt(MGRSString.substring(j + n,j + n + n));
      multiplier=Math.pow(10.0,5 - n);
      easting*=multiplier;
      northing*=multiplier;
    }
 else {
      easting=0;
      northing=0;
    }
  }
 else   error_code|=MGRS_STRING_ERROR;
  last_error=error_code;
  if (error_code == MGRS_NO_ERROR)   return new MGRSComponents(zone,letters[0],letters[1],letters[2],easting,northing,precision);
  return null;
}

public void putMap(Map<String,List<String>> m){
  for (  String key : m.keySet()) {
    SortedSet<String> vals=get(key);
    if (vals == null) {
      vals=new TreeSet<String>();
      put(key,vals);
    }
    vals.addAll(m.get(key));
  }
}

protected void throwParseException(ParseException e) throws ParseException {
  if (locator != null) {
    String elementLocation="";
    if (curHandler != null) {
      elementLocation+=", element " + curHandler.qName;
    }
    String location="[Line " + String.valueOf(locator.getLineNumber()) + ", Column "+ String.valueOf(locator.getColumnNumber())+ elementLocation+ "] ";
    LogUtils.logException(logger,Level.FINE,location,e);
    throw new ParseException(location + e.getMessage(),e);
  }
 else {
    LogUtils.logException(logger,Level.FINE,null,e);
    throw e;
  }
}

public void addAssetListener(@NotNull ActionListener listener){
  myAssetListeners.add(listener);
}

public UndoableEdit insertString(int where,String str) throws BadLocationException {
  if (where > length() || where < 0) {
    throw new BadLocationException("Invalid insert",length());
  }
  char[] chars=str.toCharArray();
  replace(where,0,chars,chars.length);
  return new InsertUndo(where,str.length());
}

public static JavaPairRDD<MatrixIndexes,MatrixBlock> toMatrixJavaPairRDD(JavaSparkContext sc,MatrixBlock src,int brlen,int bclen) throws DMLRuntimeException {
  long t0=DMLScript.STATISTICS ? System.nanoTime() : 0;
  LinkedList<Tuple2<MatrixIndexes,MatrixBlock>> list=new LinkedList<Tuple2<MatrixIndexes,MatrixBlock>>();
  if (src.getNumRows() <= brlen && src.getNumColumns() <= bclen) {
    list.addLast(new Tuple2<MatrixIndexes,MatrixBlock>(new MatrixIndexes(1,1),src));
  }
 else {
    boolean sparse=src.isInSparseFormat();
    for (int blockRow=0; blockRow < (int)Math.ceil(src.getNumRows() / (double)brlen); blockRow++)     for (int blockCol=0; blockCol < (int)Math.ceil(src.getNumColumns() / (double)bclen); blockCol++) {
      int maxRow=(blockRow * brlen + brlen < src.getNumRows()) ? brlen : src.getNumRows() - blockRow * brlen;
      int maxCol=(blockCol * bclen + bclen < src.getNumColumns()) ? bclen : src.getNumColumns() - blockCol * bclen;
      MatrixBlock block=new MatrixBlock(maxRow,maxCol,sparse);
      int row_offset=blockRow * brlen;
      int col_offset=blockCol * bclen;
      src.sliceOperations(row_offset,row_offset + maxRow - 1,col_offset,col_offset + maxCol - 1,block);
      MatrixIndexes indexes=new MatrixIndexes(blockRow + 1,blockCol + 1);
      list.addLast(new Tuple2<MatrixIndexes,MatrixBlock>(indexes,block));
    }
  }
  JavaPairRDD<MatrixIndexes,MatrixBlock> result=sc.parallelizePairs(list);
  if (DMLScript.STATISTICS) {
    Statistics.accSparkParallelizeTime(System.nanoTime() - t0);
    Statistics.incSparkParallelizeCount(1);
  }
  return result;
}

public static boolean isYouTubeUrl(String url){
  if (TextUtils.isEmpty(url)) {
    return false;
  }
  Uri uri=Uri.parse(url);
  String authority=uri.getAuthority();
  if (!TextUtils.isEmpty(authority) && authority.contains("youtube.com")) {
    return true;
  }
 else {
    return false;
  }
}

public List<NamespaceVO> findNamespaces(String appId,Env env,String clusterName){
  List<NamespaceDTO> namespaces=namespaceAPI.findNamespaceByCluster(appId,env,clusterName);
  if (namespaces == null || namespaces.size() == 0) {
    throw new BadRequestException("namespaces not exist");
  }
  List<NamespaceVO> namespaceVOs=new LinkedList<>();
  for (  NamespaceDTO namespace : namespaces) {
    NamespaceVO namespaceVO=null;
    try {
      namespaceVO=parseNamespace(appId,env,clusterName,namespace);
      namespaceVOs.add(namespaceVO);
    }
 catch (    Exception e) {
      logger.error("parse namespace error. app id:{}, env:{}, clusterName:{}, namespace:{}",appId,env,clusterName,namespace.getNamespaceName(),e);
      throw e;
    }
  }
  return namespaceVOs;
}

void unlink(Node<E> p,Node<E> trail){
  p.item=null;
  trail.next=p.next;
  if (last == p)   last=trail;
  if (count.getAndDecrement() == capacity)   notFull.signal();
}

public static void openShareDialog(Context context,String title,@SuppressWarnings("SameParameterValue") String uri,String shareText,String shareSubject){
  Intent share=new Intent(Intent.ACTION_SEND);
  share.setType("text/plain");
  share.putExtra(Intent.EXTRA_TEXT,shareText);
  share.putExtra(Intent.EXTRA_SUBJECT,shareSubject);
  if (!TextUtils.isEmpty(uri)) {
    share.setType("image/*");
    share.putExtra(Intent.EXTRA_STREAM,Uri.parse(uri));
  }
  context.startActivity(Intent.createChooser(share,title));
}

public void addMatching(final ConversationStates state,final String triggerString,final ExpressionMatcher matcher,final ChatCondition condition,boolean secondary,final ConversationStates nextState,final String reply,final ChatAction action){
  Collection<Expression> triggerExpressions=createUniqueTriggerExpressions(state,Arrays.asList(triggerString),matcher,condition,reply,action);
  add(triggerExpressions,state,condition,secondary,nextState,reply,action);
}

boolean dropItems(final Player player,int itemCount){
  boolean result=false;
  final ItemCollection itemsTodo=new ItemCollection();
  itemsTodo.addFromQuestStateString(player.getQuest(questSlot));
  if (player.drop(itemName,itemCount)) {
    if (itemsTodo.removeItem(itemName,itemCount)) {
      result=true;
    }
  }
 else {
    final List<Item> items=player.getAllEquipped(itemName);
    if (items != null) {
      for (      final Item item : items) {
        final int quantity=item.getQuantity();
        final int n=Math.min(itemCount,quantity);
        if (player.drop(itemName,n)) {
          itemCount-=n;
          if (itemsTodo.removeItem(itemName,n)) {
            result=true;
          }
        }
        if (itemCount == 0) {
          result=true;
          break;
        }
      }
    }
  }
  if (result) {
    player.setQuest(questSlot,itemsTodo.toStringForQuestState());
  }
  return result;
}

public void encodeOctetString(byte tb[],int tag,int tboffset,int length) throws EncodeException {
  encodeByte(tag);
  encodeLength(length);
  if (length > 0) {
    ensureFreeBytes(length);
    System.arraycopy(tb,tboffset,buf,offset,length);
    offset+=length;
  }
}

private void swapBlocks(int from,int second,int to){
  int len1=second - from, len2=to - second + 1;
  if (len1 == 0 || len2 == 0) {
    return;
  }
  if (len1 < temp.length) {
    System.arraycopy(data,from,temp,0,len1);
    System.arraycopy(data,second,data,from,len2);
    System.arraycopy(temp,0,data,from + len2,len1);
    return;
  }
 else   if (len2 < temp.length) {
    System.arraycopy(data,second,temp,0,len2);
    System.arraycopy(data,from,data,from + len2,len1);
    System.arraycopy(temp,0,data,from,len2);
    return;
  }
  reverseBlock(from,second - 1);
  reverseBlock(second,to);
  reverseBlock(from,to);
}

private static long totalSize(Map<String,Long> relPathToSize){
  long total=0;
  for (  Long l : relPathToSize.values()) {
    total+=l;
  }
  return total;
}

public boolean hasNext(){
  return iterator.hasNext();
}

public static boolean isValid(Timestamp validFrom,Timestamp validTo,Timestamp testDate){
  if (testDate == null)   return true;
  if (validFrom == null && validTo == null)   return true;
  if (validFrom != null && validFrom.after(testDate))   return false;
  if (validTo != null && validTo.before(testDate))   return false;
  return true;
}

public PatternTokenizer(AttributeFactory factory,Pattern pattern,int group){
  super(factory);
  this.group=group;
  matcher=pattern.matcher("");
  if (group >= 0 && group > matcher.groupCount()) {
    throw new IllegalArgumentException("invalid group specified: pattern only has: " + matcher.groupCount() + " capturing groups");
  }
}

@Override public double totalEstimatedQuantityForPreviousREs(final Long woActivityId,Long estimateId,final Long activityId,final WorkOrder workOrder){
  if (estimateId == null)   estimateId=-1l;
  Object[] params=null;
  Double estQuantity=null;
  params=new Object[]{estimateId,workOrder,workOrder,woActivityId,activityId};
  estQuantity=(Double)genericService.findByNamedQuery("totalEstimatedQuantityInRE",params);
  Double estQuantityRE=null;
  params=new Object[]{estimateId,workOrder,workOrder,activityId};
  estQuantityRE=(Double)genericService.findByNamedQuery("totalEstimatedQuantityForPreviousREs",params);
  if (estQuantity != null && estQuantityRE != null)   estQuantity=estQuantity + estQuantityRE;
  if (estQuantity == null && estQuantityRE != null)   estQuantity=estQuantityRE;
  if (estQuantity == null)   return 0.0d;
 else   return estQuantity.doubleValue();
}

protected long writeDataToFile(NodeHolder nodeHolder,FileChannel channel) throws CarbonDataWriterException {
  byte[][] compressedIndex=nodeHolder.getCompressedIndex();
  byte[][] compressedIndexMap=nodeHolder.getCompressedIndexMap();
  byte[][] compressedDataIndex=nodeHolder.getCompressedDataIndex();
  int indexBlockSize=0;
  int index=0;
  for (int i=0; i < nodeHolder.getKeyBlockIndexLength().length; i++) {
    indexBlockSize+=nodeHolder.getKeyBlockIndexLength()[index++] + CarbonCommonConstants.INT_SIZE_IN_BYTE;
  }
  for (int i=0; i < nodeHolder.getDataIndexMapLength().length; i++) {
    indexBlockSize+=nodeHolder.getDataIndexMapLength()[i];
  }
  ByteBuffer byteBuffer=ByteBuffer.allocate(nodeHolder.getKeyArray().length + nodeHolder.getDataArray().length + indexBlockSize);
  long offset=0;
  try {
    offset=channel.size();
    byteBuffer.put(nodeHolder.getKeyArray());
    byteBuffer.put(nodeHolder.getDataArray());
    ByteBuffer buffer1=null;
    for (int i=0; i < compressedIndex.length; i++) {
      buffer1=ByteBuffer.allocate(nodeHolder.getKeyBlockIndexLength()[i]);
      buffer1.putInt(compressedIndex[i].length);
      buffer1.put(compressedIndex[i]);
      if (compressedIndexMap[i].length > 0) {
        buffer1.put(compressedIndexMap[i]);
      }
      buffer1.rewind();
      byteBuffer.put(buffer1.array());
    }
    for (int i=0; i < compressedDataIndex.length; i++) {
      byteBuffer.put(compressedDataIndex[i]);
    }
    byteBuffer.flip();
    channel.write(byteBuffer);
  }
 catch (  IOException exception) {
    throw new CarbonDataWriterException("Problem in writing carbon file: ",exception);
  }
  return offset;
}

public boolean eval(){
  if (sourceFileSets.size() == 0 && sourceResources.size() == 0 && sourceFile == null) {
    throw new BuildException("At least one srcfile or a nested <srcfiles> or <srcresources> element must be set.");
  }
  if ((sourceFileSets.size() > 0 || sourceResources.size() > 0) && sourceFile != null) {
    throw new BuildException("Cannot specify both the srcfile attribute and a nested <srcfiles> or <srcresources> element.");
  }
  if (urlbase == null) {
    throw new BuildException("The urlbase attribute must be set.");
  }
  if (sourceFile != null && !sourceFile.exists()) {
    throw new BuildException(sourceFile.getAbsolutePath() + " not found.");
  }
  boolean upToDate=true;
  if (sourceFile != null) {
    Resource fileResource=new FileResource(sourceFile);
    upToDate=isUpToDate(fileResource);
  }
  if (upToDate) {
    Enumeration e=sourceFileSets.elements();
    while (upToDate && e.hasMoreElements()) {
      FileSet fs=(FileSet)e.nextElement();
      Iterator it=fs.iterator();
      while (upToDate && it.hasNext()) {
        Resource r=(Resource)it.next();
        upToDate=isUpToDate(r);
      }
    }
  }
  if (upToDate) {
    Resource[] r=sourceResources.listResources();
    for (int i=0; upToDate && i < r.length; i++) {
      upToDate=isUpToDate(r[i]);
    }
  }
  return upToDate;
}

private int handleAggregationPacket(Buffer input,Buffer output){
  byte[] bufferData=(byte[])input.getData();
  if (aggregationPositon + 1 >= bufferData.length) {
    aggregationPositon=1;
    output.setDiscard(true);
    return BUFFER_PROCESSED_OK;
  }
  int nalu_size=(((bufferData[aggregationPositon] & 0xff) << 8) | (bufferData[aggregationPositon + 1] & 0xff));
  aggregationPositon+=2;
  if (aggregationPositon + nalu_size > bufferData.length) {
    aggregationPositon=1;
    return BUFFER_PROCESSED_FAILED;
  }
  extractNalUnitHeader(aggregationPositon,input);
  if (mNalUnitHeader.isSingleNalUnitPacket()) {
    byte[] data=new byte[nalu_size];
    System.arraycopy(bufferData,aggregationPositon,data,0,nalu_size);
    aggregationPositon+=nalu_size;
    output.setData(data);
    output.setLength(data.length);
    output.setOffset(0);
    output.setTimestamp(input.getTimestamp());
    output.setSequenceNumber(input.getSequenceNumber());
    output.setVideoOrientation(input.getVideoOrientation());
    output.setFormat(input.getFormat());
    output.setFlags(input.getFlags());
    return INPUT_BUFFER_NOT_CONSUMED;
  }
  aggregationPositon=1;
  return BUFFER_PROCESSED_FAILED;
}

public double calculateCostForStringAVM(RegexGraph graph){
  final int ROWS=graph.getNumberOfRows();
  final int COLUMNS=graph.getNumberOfColumns();
  final double[][][] matrix=new double[ROWS][COLUMNS][3];
  calculateInsertionCostOnFirstRow(graph,matrix);
  for (int i=1; i < ROWS; i++) {
    for (int col=0; col < COLUMNS; col++) {
      matrix[i][col][DEL]=Double.MAX_VALUE;
      matrix[i][col][REP]=Double.MAX_VALUE;
      matrix[i][col][INS]=Double.MAX_VALUE;
      for (      GraphTransition t : graph.getIncomingTransitions(i,col)) {
        int otherCol=graph.getColumn(t.fromState);
        int otherRow=t.fromRow;
        if (t.type.equals(GraphTransition.TransitionType.INSERTION)) {
          assert otherRow == i;
          matrix[i][col][INS]=Math.min(matrix[i][col][INS],getSubPathCost(matrix[otherRow][otherCol][DEL],t.cost));
          matrix[i][col][INS]=Math.min(matrix[i][col][INS],getSubPathCost(matrix[otherRow][otherCol][REP],t.cost));
          matrix[i][col][INS]=Math.min(matrix[i][col][INS],getSubPathCost(matrix[otherRow][otherCol][INS],t.cost));
        }
 else         if (t.type.equals(GraphTransition.TransitionType.REPLACEMENT)) {
          matrix[i][col][REP]=Math.min(matrix[i][col][REP],getSubPathCost(matrix[otherRow][otherCol][DEL],t.cost));
          matrix[i][col][REP]=Math.min(matrix[i][col][REP],getSubPathCost(matrix[otherRow][otherCol][REP],t.cost));
          matrix[i][col][INS]=Math.min(matrix[i][col][INS],getSubPathCost(matrix[otherRow][otherCol][DEL],t.cost));
          matrix[i][col][INS]=Math.min(matrix[i][col][INS],getSubPathCost(matrix[otherRow][otherCol][REP],t.cost));
        }
 else         if (t.type.equals(GraphTransition.TransitionType.DELETION)) {
          matrix[i][col][DEL]=Math.min(matrix[i][col][DEL],getSubPathCost(matrix[otherRow][otherCol][DEL],t.cost));
          matrix[i][col][REP]=Math.min(matrix[i][col][REP],getSubPathCost(matrix[otherRow][otherCol][DEL],t.cost));
          matrix[i][col][INS]=Math.min(matrix[i][col][INS],getSubPathCost(matrix[otherRow][otherCol][DEL],t.cost));
        }
 else         if (t.type.equals(GraphTransition.TransitionType.PHANTOM)) {
          assert t.cost == 0;
          matrix[i][col][DEL]=Math.min(matrix[i][col][DEL],matrix[otherRow][otherCol][DEL]);
          matrix[i][col][REP]=Math.min(matrix[i][col][REP],matrix[otherRow][otherCol][REP]);
          matrix[i][col][INS]=Math.min(matrix[i][col][INS],matrix[otherRow][otherCol][INS]);
        }
      }
    }
  }
  double min=Double.MAX_VALUE;
  for (  double value : matrix[ROWS - 1][COLUMNS - 1]) {
    if (value < min) {
      min=value;
    }
  }
  return min;
}

protected int decodeLinePrefix(PushbackInputStream inStream,OutputStream outStream) throws IOException {
  int i;
  int nLen, nSeq;
  byte xtmp[];
  int c;
  crc.value=0;
  while (true) {
    c=inStream.read(tmp,0,1);
    if (c == -1) {
      throw new CEStreamExhausted();
    }
    if (tmp[0] == '*') {
      break;
    }
  }
  lineAndSeq.reset();
  decodeAtom(inStream,lineAndSeq,2);
  xtmp=lineAndSeq.toByteArray();
  nLen=xtmp[0] & 0xff;
  nSeq=xtmp[1] & 0xff;
  if (nSeq != sequence) {
    throw new CEFormatException("UCDecoder: Out of sequence line.");
  }
  sequence=(sequence + 1) & 0xff;
  return (nLen);
}

public void appendNodes(NodeSet nodes){
  int nNodes=nodes.size();
  if (null == m_map) {
    m_mapSize=nNodes + m_blocksize;
    m_map=new Node[m_mapSize];
  }
 else   if ((m_firstFree + nNodes) >= m_mapSize) {
    m_mapSize+=(nNodes + m_blocksize);
    Node newMap[]=new Node[m_mapSize];
    System.arraycopy(m_map,0,newMap,0,m_firstFree + nNodes);
    m_map=newMap;
  }
  System.arraycopy(nodes.m_map,0,m_map,m_firstFree,nNodes);
  m_firstFree+=nNodes;
}

protected void updateCachedAWTSizes(final Dimension min,final Dimension pref,final Dimension max){
  assert EventQueue.isDispatchThread();
  if (verboseSizeLayout) {
    System.err.println("AWT thread: updated component sizes: " + min + " <= "+ pref+ " <= "+ max);
  }
  lastValidatedAWTTime=++currentAWTTime;
  boolean mustNotify;
synchronized (this) {
    mustNotify=cachedSizesInitialized == 0;
    if (!mustNotify) {
      mustNotify=!(min.equals(cachedMinSize) && pref.equals(cachedPrefSize) && max.equals(cachedMaxSize));
    }
    if (cachedSizesInitialized == 0) {
      cachedSizesInitialized=1;
    }
    cachedMinSize=min;
    cachedPrefSize=pref;
    cachedMaxSize=max;
    if (INITIAL_CLIENT_AREA_WORKAROUND && initialClientArea != null) {
      initialClientArea.width=cachedPrefSize.width;
      initialClientArea.height=cachedPrefSize.height;
    }
  }
  if (mustNotify) {
    final int onBehalfAWTTime=lastValidatedAWTTime;
    ThreadingHandler.getInstance().asyncExec(display,null);
  }
}

public boolean isDecimalPoint(){
  if (m_decimalPoint == null) {
    DecimalFormatSymbols dfs=new DecimalFormatSymbols(m_locale);
    m_decimalPoint=new Boolean(dfs.getDecimalSeparator() == '.');
  }
  return m_decimalPoint.booleanValue();
}

public void removeLayer(Layer layer){
  if (layer != null && layer.isRemovable()) {
    List<Layer> currentLayers=getLayerList();
    currentLayers.remove(layer);
    setLayerList(currentLayers);
  }
 else {
    if (layer != null) {
      logger.warning("received command to remove " + layer.getName() + ", which has been designated as *NOT* removeable");
      throw new com.bbn.openmap.util.HandleError("LayerHandler commanded to delete a layer (" + layer.getName() + ") that is not removeable");
    }
  }
}

public Option[] findAllOptionTypes(final Class optionClass){
  Check.notNull(optionClass,"optionClass");
  return findAllOptionTypes(new Class[]{optionClass});
}

public int via_padstack_count(){
  return via_padstacks.size();
}

public static boolean isEarlierTransaction(MCostDetail cd,int C_AcctSchema_ID,int M_CostType_ID,int M_CostElement_ID,String costingLevel){
  MTransaction trx=new MTransaction(cd.getCtx(),cd.getM_Transaction_ID(),cd.get_TrxName());
  MCostDetail last_cd=getLastTransaction(trx,C_AcctSchema_ID,M_CostType_ID,M_CostElement_ID,costingLevel);
  if (last_cd == null)   return false;
  if (cd.getSeqNo() <= last_cd.getSeqNo() && cd.getM_Transaction_ID() != last_cd.getM_Transaction_ID()) {
    return true;
  }
  return false;
}

private void drawTranslatedRenderedImage(RenderedImage img,Rectangle region,int i2uTransX,int i2uTransY){
  int tileGridXOffset=img.getTileGridXOffset();
  int tileGridYOffset=img.getTileGridYOffset();
  int tileWidth=img.getTileWidth();
  int tileHeight=img.getTileHeight();
  int minTileX=getTileIndex(region.x,tileGridXOffset,tileWidth);
  int minTileY=getTileIndex(region.y,tileGridYOffset,tileHeight);
  int maxTileX=getTileIndex(region.x + region.width - 1,tileGridXOffset,tileWidth);
  int maxTileY=getTileIndex(region.y + region.height - 1,tileGridYOffset,tileHeight);
  ColorModel colorModel=img.getColorModel();
  Rectangle tileRect=new Rectangle();
  for (int ty=minTileY; ty <= maxTileY; ty++) {
    for (int tx=minTileX; tx <= maxTileX; tx++) {
      Raster raster=img.getTile(tx,ty);
      tileRect.x=tx * tileWidth + tileGridXOffset;
      tileRect.y=ty * tileHeight + tileGridYOffset;
      tileRect.width=tileWidth;
      tileRect.height=tileHeight;
      clipTo(tileRect,region);
      WritableRaster wRaster=null;
      if (raster instanceof WritableRaster) {
        wRaster=(WritableRaster)raster;
      }
 else {
        wRaster=Raster.createWritableRaster(raster.getSampleModel(),raster.getDataBuffer(),null);
      }
      wRaster=wRaster.createWritableChild(tileRect.x,tileRect.y,tileRect.width,tileRect.height,0,0,null);
      BufferedImage bufImg=new BufferedImage(colorModel,wRaster,colorModel.isAlphaPremultiplied(),null);
      copyImage(bufImg,tileRect.x + i2uTransX,tileRect.y + i2uTransY,0,0,tileRect.width,tileRect.height,null,null);
    }
  }
}

public void addOutOfContextMessage(ConsensusMessage m){
  outOfContextLock.lock();
  if (m.getType() == MessageFactory.PROPOSE) {
    Logger.println("(ExecutionManager.addOutOfContextMessage) adding " + m);
    outOfContextProposes.put(m.getNumber(),m);
  }
 else {
    List<ConsensusMessage> messages=outOfContext.get(m.getNumber());
    if (messages == null) {
      messages=new LinkedList<ConsensusMessage>();
      outOfContext.put(m.getNumber(),messages);
    }
    Logger.println("(ExecutionManager.addOutOfContextMessage) adding " + m);
    messages.add(m);
  }
  outOfContextLock.unlock();
}

private long calculateCapacity(long minimumCapacity){
  long newCapacity=Math.min(Math.max(capacity,2),minimumCapacity);
  while (newCapacity < Math.min(minimumCapacity,maxCapacity)) {
    newCapacity<<=1;
  }
  return Math.min(newCapacity,maxCapacity);
}

protected Object createResource() throws ResourceUnavailableException {
  Object resource=create();
  freed.add(resource);
  numCreated++;
  return (resource);
}

public void upgrade() throws Exception {
  if (!checkUpgradePreconditions()) {
    return;
  }
  backupManager.createOpenDJBackup();
  try (BufferedWriter out=new BufferedWriter(new FileWriter(upgradeMarker))){
    out.write(currentVersion.toString());
    out.write('\n');
  }
   if (currentVersion.isOlderThan(DJ_245_VERSION)) {
    backupFile("config/config.ldif");
    backupFile("config/admin-backend.ldif");
    backupFile("config/java.properties");
    unpackZipFile(true);
    callOldDJUpgrade();
  }
 else {
    unpackZipFile(false);
    if (currentVersion.equals(DJ_246_VERSION)) {
      try {
        File badSchema=new File(installRoot + File.separator + "config"+ File.separator+ "schema"+ File.separator+ "cts-add-schema.ldif");
        delete(badSchema);
      }
 catch (      RuntimeException e) {
      }
      File goodSchema=new File(servletCtx.getRealPath(File.separator + "WEB-INF" + File.separator+ "template"+ File.separator+ "ldif"+ File.separator+ "sfha"+ File.separator+ "99-cts-add-schema-backport.ldif"));
      File moveTo=new File(installRoot + File.separator + "config"+ File.separator+ "schema"+ File.separator+ "99-cts-add-schema-backport.ldif");
      copy(goodSchema.toPath(),moveTo.toPath());
    }
    int ret=callDJUpgradeMechanism();
    if (ret == 0) {
      message("Upgrade completed successfully");
      delete(upgradeMarker);
      final String lockFile=LockFileManager.getServerLockFileName();
      LockFileManager.releaseLock(lockFile,new StringBuilder());
    }
 else {
      throw new UpgradeException("OpenDJ upgrade failed with code:  " + ret);
    }
  }
}

public static final Optional<File> findSteamVRManifest(final ArrayList<File> indexedSteamFolders){
  for (  final File f : indexedSteamFolders) {
    final File currentFile=new File(f.getAbsolutePath() + SteamConstants.STEAM_VR_APPS_MANIFEST_FILE_LOCATION);
    if (currentFile.exists())     return Optional.ofNullable(currentFile);
  }
  return Optional.empty();
}

private static boolean isClose(float value,float targetValue){
  return Math.abs(value - targetValue) < 0.001f;
}

public int size(){
  return _myTcpClients.size();
}

public static MMovementCartBean addToMovementCart(Properties ctx,StockMovementBean bean,MMovementCartBean cartBean,boolean isSales,boolean ifAdd) throws OperationException, ProductNotFoundException, ProductNotOnPriceListException {
  ArrayList<ItemBean> oldItems;
  if (cartBean == null) {
    cartBean=new MMovementCartBean();
    oldItems=new ArrayList<ItemBean>();
  }
 else {
    oldItems=cartBean.getItems();
  }
  ArrayList<ItemBean> oldItemsClone=(ArrayList)oldItems.clone();
  ArrayList itemsToBeAdded=getMMovementItems(ctx,bean);
  oldItems=addToMMovementList(ctx,oldItemsClone,itemsToBeAdded,ifAdd);
  Integer priceListId=POSTerminalManager.getPriceListId(ctx,isSales);
  oldItems=setMMovementItemCosts(ctx,priceListId,oldItems,isSales);
  cartBean.setItems(oldItems);
  cartBean.setPricelistId(priceListId);
  return cartBean;
}

private static List<Field> filterFieldList(List<Field> fields,Class<?> filterClass){
  List<Field> filteredFields=new LinkedList<>();
  for (  Field f : fields) {
    if ((filterClass == null) || filterClass.isAssignableFrom(f.getType())) {
      filteredFields.add(f);
    }
  }
  return filteredFields;
}

public static void renderPairwiseOrthogonal(ComplexVector vec1,ComplexVector vec2){
  IncompatibleVectorsException.checkVectorsCompatible(vec1,vec2);
  if (vec1.getOpMode() != ComplexVector.Mode.CARTESIAN)   vec1.toCartesian();
  if (vec2.getOpMode() != ComplexVector.Mode.CARTESIAN)   vec2.toCartesian();
  float[] coordinates1=vec1.getCoordinates();
  float[] coordinates2=vec2.getCoordinates();
  for (int i=0; i < vec1.getDimension() * 2; i+=2) {
    double resultThisPair=coordinates1[i] * coordinates2[i];
    resultThisPair+=coordinates1[i + 1] * coordinates2[i + 1];
    double norm1=coordinates1[i] * coordinates1[i];
    norm1+=coordinates1[i + 1] * coordinates1[i + 1];
    double norm2=coordinates2[i] * coordinates2[i];
    norm2+=coordinates2[i + 1] * coordinates2[i + 1];
    norm1=Math.sqrt(norm1);
    norm2=Math.sqrt(norm2);
    double cosine=0;
    if (norm1 > 0 && norm2 > 0)     cosine=resultThisPair / (norm1 * norm2);
    coordinates1[i]=(float)(coordinates1[i] - cosine * coordinates2[i]);
    coordinates1[i + 1]=(float)(coordinates1[i + 1] - cosine * coordinates2[i + 1]);
  }
}

protected SimpleJavaFileObject(URI uri,Kind kind){
  uri.getClass();
  kind.getClass();
  if (uri.getPath() == null)   throw new IllegalArgumentException("URI must have a path: " + uri);
  this.uri=uri;
  this.kind=kind;
}

public int increment(int val){
  if (val < 0) {
    return decrement(-val);
  }
  lock.lock();
  int newValue=(value+=val);
  lock.unlock();
  return newValue;
}

protected void releaseInternal(){
  ContextTranslator.pts_1cfa_map=null;
  ContextTranslator.objs_1cfa_map=null;
}

public static void addConstraintViolationsRDF(List<ConstraintViolation> cvs,Model result,boolean createSource){
  for (  ConstraintViolation cv : cvs) {
    Resource r=result.createResource(SPIN.ConstraintViolation);
    String message=cv.getMessage();
    if (message != null && message.length() > 0) {
      r.addProperty(RDFS.label,message);
    }
    if (cv.getRoot() != null) {
      r.addProperty(SPIN.violationRoot,cv.getRoot());
    }
    r.addProperty(SPIN.violationLevel,cv.getLevel());
    for (    SimplePropertyPath path : cv.getPaths()) {
      if (path instanceof ObjectPropertyPath) {
        r.addProperty(SPIN.violationPath,path.getPredicate());
      }
 else {
        Resource p=result.createResource(SP.ReversePath);
        p.addProperty(SP.path,path.getPredicate());
        r.addProperty(SPIN.violationPath,p);
      }
    }
    if (createSource && cv.getSource() != null) {
      r.addProperty(SPIN.violationSource,cv.getSource());
    }
    if (cv.getValue() != null) {
      r.addProperty(SPIN.violationValue,cv.getValue());
    }
  }
}

public Page copy(long version){
  Page newPage=create(map,version,keys,values,children,totalCount,getMemory());
  removePage();
  newPage.cachedCompare=cachedCompare;
  return newPage;
}

public boolean startBusytone(final String busytoneUriType){
  if (busytoneUriType.isEmpty()) {
    return false;
  }
  try {
    Log.d(TAG,"startBusytone(): UriType=" + busytoneUriType);
    if (mBusytone != null) {
      if (mBusytone.isPlaying()) {
        Log.d(TAG,"startBusytone(): is already playing");
        return false;
      }
 else {
        stopBusytone();
      }
    }
    Uri busytoneUri;
    Map data=new HashMap<String,Object>();
    data.put("name","mBusytone");
    if (busytoneUriType.equals("_DTMF_")) {
      mBusytone=new myToneGenerator(myToneGenerator.BUSY);
      mBusytone.startPlay(data);
      return true;
    }
 else {
      busytoneUri=getBusytoneUri(busytoneUriType);
      if (busytoneUri == null) {
        Log.d(TAG,"startBusytone(): no available media");
        return false;
      }
    }
    mBusytone=new myMediaPlayer();
    data.put("sourceUri",busytoneUri);
    data.put("setLooping",false);
    data.put("audioStream",AudioManager.STREAM_VOICE_CALL);
    setMediaPlayerEvents((MediaPlayer)mBusytone,"mBusytone");
    mBusytone.startPlay(data);
    return true;
  }
 catch (  Exception e) {
    Log.d(TAG,"startBusytone() failed");
    Log.d(TAG,e.getMessage());
    return false;
  }
}

private String moveToFolder(final String file,final String folder){
  final File source=new File(file);
  final File destination=new File(folder + File.separator + source.getName());
  Log.i(TAG,file + " stored in temp folder. Moving to " + destination.getAbsolutePath());
  try {
    FileUtils.moveFile(source,destination);
  }
 catch (  final IOException e) {
    Log.e(TAG,"I/O error while moving file");
  }
  return destination.getAbsolutePath();
}

public void putAll(Map m){
  Set keys=m.keySet();
  for (Iterator iter=keys.iterator(); iter.hasNext(); ) {
    Object key=iter.next();
    put(key,m.get(key));
  }
}

public void readOldFormat(Reader reader) throws Exception {
  StreamTokenizer tokenizer;
  int currentToken;
  double firstIndex, secondIndex, weight;
  tokenizer=new StreamTokenizer(reader);
  initialize();
  tokenizer.commentChar('%');
  tokenizer.eolIsSignificant(true);
  while (StreamTokenizer.TT_EOF != (currentToken=tokenizer.nextToken())) {
    if (currentToken == StreamTokenizer.TT_EOL) {
      continue;
    }
    if (currentToken != StreamTokenizer.TT_NUMBER) {
      throw new Exception("Only numbers and comments allowed " + "in cost file!");
    }
    firstIndex=tokenizer.nval;
    if (!Utils.eq((int)firstIndex,firstIndex)) {
      throw new Exception("First number in line has to be " + "index of a class!");
    }
    if ((int)firstIndex >= size()) {
      throw new Exception("Class index out of range!");
    }
    if (StreamTokenizer.TT_EOF == (currentToken=tokenizer.nextToken())) {
      throw new Exception("Premature end of file!");
    }
    if (currentToken == StreamTokenizer.TT_EOL) {
      throw new Exception("Premature end of line!");
    }
    if (currentToken != StreamTokenizer.TT_NUMBER) {
      throw new Exception("Only numbers and comments allowed " + "in cost file!");
    }
    secondIndex=tokenizer.nval;
    if (!Utils.eq((int)secondIndex,secondIndex)) {
      throw new Exception("Second number in line has to be " + "index of a class!");
    }
    if ((int)secondIndex >= size()) {
      throw new Exception("Class index out of range!");
    }
    if ((int)secondIndex == (int)firstIndex) {
      throw new Exception("Diagonal of cost matrix non-zero!");
    }
    if (StreamTokenizer.TT_EOF == (currentToken=tokenizer.nextToken())) {
      throw new Exception("Premature end of file!");
    }
    if (currentToken == StreamTokenizer.TT_EOL) {
      throw new Exception("Premature end of line!");
    }
    if (currentToken != StreamTokenizer.TT_NUMBER) {
      throw new Exception("Only numbers and comments allowed " + "in cost file!");
    }
    weight=tokenizer.nval;
    if (!Utils.gr(weight,0)) {
      throw new Exception("Only positive weights allowed!");
    }
    setCell((int)firstIndex,(int)secondIndex,new Double(weight));
  }
}

protected String handleDate(ResultSet rs,int columnIndex,String dateFormatString) throws SQLException {
  java.sql.Date date=rs.getDate(columnIndex);
  String value=null;
  if (date != null) {
    SimpleDateFormat dateFormat=new SimpleDateFormat(dateFormatString);
    value=dateFormat.format(date);
  }
  return value;
}

@Override public RandomAccessStream openFileRandomAccess() throws IOException {
  if (_isWindows && isAux())   throw new FileNotFoundException(_file.toString());
  return new FileRandomAccessStream(new RandomAccessFile(getFile(),"rw"));
}

public QDate(TimeZone zone,long now){
  _timeZone=zone;
  if (zone == _gmtTimeZone) {
    _stdName=_gmtStdName;
    _dstName=_gmtDstName;
  }
 else   if (zone == _localTimeZone) {
    _stdName=_localStdName;
    _dstName=_localDstName;
  }
 else {
    _stdName=_timeZone.getDisplayName(false,TimeZone.SHORT);
    _dstName=_timeZone.getDisplayName(true,TimeZone.SHORT);
  }
  _calendar=new GregorianCalendar(_timeZone);
  if (zone == _gmtTimeZone)   setGMTTime(now);
 else   setLocalTime(now);
}

public static void serialize(Serializable obj,ByteArrayOutputStream bout){
  try {
    ObjectOutputStream out=new ObjectOutputStream(bout);
    out.writeObject(obj);
    out.close();
  }
 catch (  IOException e) {
    throw new IllegalStateException("Could not serialize " + obj,e);
  }
}

private static void decodeEdifactSegment(BitSource bits,StringBuilder result){
  do {
    if (bits.available() <= 16) {
      return;
    }
    for (int i=0; i < 4; i++) {
      int edifactValue=bits.readBits(6);
      if (edifactValue == 0x1F) {
        int bitsLeft=8 - bits.getBitOffset();
        if (bitsLeft != 8) {
          bits.readBits(bitsLeft);
        }
        return;
      }
      if ((edifactValue & 0x20) == 0) {
        edifactValue|=0x40;
      }
      result.append((char)edifactValue);
    }
  }
 while (bits.available() > 0);
}

public static Stream<String> wordsOf(String text){
  requireNonNull(text);
  return WORDS.splitAsStream(text);
}

public static String upper(String s){
  return s.toUpperCase(Locale.ENGLISH);
}

private void accept(Socket socket){
  log.info("Client connected from {}",socket.getInetAddress());
  try {
    InetAddress serverAddress=dns.getAddress("gamea.clashofclans.com");
    try (Connection clientConnection=new Connection(socket);Connection serverConnection=new Connection(new Socket(serverAddress,CLASH_PORT))){
      ProxySession session=ProxySession.newSession(services.getMessageFactory(),clientConnection,serverConnection,filterChain);
      log.info("Client {} disconnected",socket);
      VillageAnalyzer.logSession(session);
    }
   }
 catch (  IOException e) {
    log.info("Could not proxy connection from {}: {}",socket.getInetAddress(),e.toString());
  }
 finally {
    try {
      socket.close();
    }
 catch (    IOException e) {
    }
  }
}

public void removeProcessListener(ProcessListener l){
  listenerList.remove(l);
}

public final static boolean isValidJavaIdentifier(String s){
  if (s == null || s.length() == 0) {
    return false;
  }
  char[] c=s.toCharArray();
  if (!Character.isJavaIdentifierStart(c[0])) {
    return false;
  }
  for (int i=1; i < c.length; i++) {
    if (!Character.isJavaIdentifierPart(c[i])) {
      return false;
    }
  }
  return true;
}

final void sendHelp(){
  ArrayList<String> help=help();
  if (help.isEmpty()) {
    return;
  }
  XmppMsg msg=new XmppMsg();
  msg.addStringArray(help.toArray(new String[help.size()]));
  send(msg);
}

protected void init(){
  LOG.info("Initializing sound service.");
  long startTime=System.currentTimeMillis();
  bughouseSoundKeys=getSoundsKeys("bughouse");
  soundKeys=getSoundsKeys("");
  initSoundPlayer();
  initSpeech();
  LOG.info("Initializing sound service complete: " + (System.currentTimeMillis() - startTime) + "ms");
}

private static void runConfClient(final ProcessBuilder pb) throws Exception {
  int exitCode=-1;
  try {
    Process process=pb.start();
    exitCode=process.waitFor();
  }
 catch (  IOException e) {
    log.error("IOException: {}",e);
    exitCode=2;
    throw e;
  }
catch (  Exception e) {
    log.error("Undetermined ConfigurationClient exitCode: {}",e);
    throw e;
  }
switch (exitCode) {
case SUCCESS:
    break;
case ERROR_CODE_CANNOT_DOWNLOAD_CONF:
  throw new Exception("configuration-client error (exit code " + exitCode + "), download failed");
case ERROR_CODE_EXPIRED_CONF:
throw new Exception("configuration-client error (exit code " + exitCode + "), configuration is outdated");
case ERROR_CODE_INVALID_SIGNATURE_VALUE:
throw new Exception("configuration-client error (exit code " + exitCode + "), configuration is incorrect");
case ERROR_CODE_INTERNAL:
throw new Exception("configuration-client error (exit code " + exitCode + ")");
default :
throw new Exception("Failed to download GlobalConf " + "(configucation-client exit code " + exitCode + "), "+ "make sure configuration-client is"+ "installed correctly");
}
}

protected final void acceptAnnotations(final MethodVisitor mv){
  int n=visibleTypeAnnotations == null ? 0 : visibleTypeAnnotations.size();
  for (int i=0; i < n; ++i) {
    TypeAnnotationNode an=visibleTypeAnnotations.get(i);
    an.accept(mv.visitInsnAnnotation(an.typeRef,an.typePath,an.desc,true));
  }
  n=invisibleTypeAnnotations == null ? 0 : invisibleTypeAnnotations.size();
  for (int i=0; i < n; ++i) {
    TypeAnnotationNode an=invisibleTypeAnnotations.get(i);
    an.accept(mv.visitInsnAnnotation(an.typeRef,an.typePath,an.desc,false));
  }
}

public boolean doCheckSiteStatus(URL url){
  if (debug.messageEnabled()) {
    debug.message("SiteStatusCheckThreadImpl.doCheckSiteStatus: check " + url);
  }
  URLChecker checker=getURLChecker(url);
  if (checker != null && (checker.getStatus() == URLStatus.STATUS_UNKNOWN)) {
synchronized (checker) {
      checker.cancel();
      checker.notify();
    }
synchronized (urlCheckers) {
      urlCheckers.remove(getThreadName(url));
    }
    debug.error("SiteStatusCheckThreadImpl.doCheckSiteStatus() " + "Killing thread " + getThreadName(url));
    return false;
  }
 else   if ((checker != null) && (checker.getStatus() == URLStatus.STATUS_AVAILABLE)) {
    return true;
  }
 else {
    return false;
  }
}

protected void fill() throws IOException {
  ensureOpen();
  len=in.read(buf,0,buf.length);
  if (len == -1) {
    throw new EOFException("Unexpected end of ZLIB input stream");
  }
  inf.setInput(buf,0,len);
}

@Ignore("disabled for some reason?") @Test public void testP2PViewChangeReject() throws Exception {
  final Host host=Host.getHost(0);
  final VM peer2=host.getVM(1);
  final VM peer3=host.getVM(2);
  CredentialGenerator gen=new LdapUserCredentialGenerator();
  gen.init();
  Properties extraProps=gen.getSystemProperties();
  String authenticator=gen.getAuthenticator();
  String authInit=gen.getAuthInit();
  if (extraProps == null) {
    extraProps=new Properties();
  }
  CredentialGenerator gen2=new DummyCredentialGenerator();
  gen2.init();
  Properties extraProps2=gen2.getSystemProperties();
  String authenticator2=gen2.getAuthenticator();
  if (extraProps2 == null) {
    extraProps2=new Properties();
  }
  Properties props=new Properties();
  int port=getRandomAvailablePort(SOCKET);
  final String locators=getIPLiteral() + "[" + port+ "]";
  props.setProperty(SECURITY_PEER_AUTH_INIT,authInit);
  props.setProperty(SECURITY_PEER_AUTHENTICATOR,authenticator);
  Properties credentials=gen.getValidCredentials(1);
  Properties javaProps=gen.getJavaProperties();
  props.putAll(credentials);
  props.putAll(extraProps);
  startTheLocator(props,javaProps,port);
  try {
    props=new Properties();
    props.setProperty(MCAST_PORT,"0");
    props.setProperty(LOCATORS,locators);
    props.setProperty(SECURITY_PEER_AUTH_INIT,authInit);
    props.setProperty(SECURITY_PEER_AUTHENTICATOR,authenticator2);
    credentials=gen.getValidCredentials(3);
    Properties javaProps2=gen2.getJavaProperties();
    props.putAll(credentials);
    props.putAll(extraProps2);
    createDS(props,javaProps2);
    props=new Properties();
    props.setProperty(MCAST_PORT,"0");
    props.setProperty(LOCATORS,locators);
    props.setProperty(SECURITY_PEER_AUTH_INIT,authInit);
    props.setProperty(SECURITY_PEER_AUTHENTICATOR,authenticator);
    credentials=gen.getValidCredentials(7);
    javaProps=gen.getJavaProperties();
    props.putAll(credentials);
    props.putAll(extraProps);
    createDS(peer2,props,javaProps);
    createDS(peer3,props,javaProps);
    pause(2000);
    locatorVM.invoke(null);
    verifyMembers(2);
    peer2.invoke(null);
    peer3.invoke(null);
    disconnectFromDS();
    pause(2000);
    locatorVM.invoke(null);
    peer2.invoke(null);
    peer3.invoke(null);
    peer2.invoke(null);
    pause(2000);
    locatorVM.invoke(null);
    peer3.invoke(null);
    peer3.invoke(null);
    pause(2000);
    locatorVM.invoke(null);
  }
  finally {
    locatorVM.invoke(null);
  }
}

private boolean overrides(ExecutableElement e,Class<?> clazz,String method){
  TypeElement clazzElt=elements.getTypeElement(clazz.getCanonicalName());
  assert clazzElt != null;
  for (  ExecutableElement elt : ElementFilter.methodsIn(clazzElt.getEnclosedElements())) {
    if (elt.getSimpleName().contentEquals(method) && elements.overrides(e,elt,clazzElt)) {
      return true;
    }
  }
  return false;
}

public Element signXML(Document doc,String certAlias,String algorithm,String idAttrName,String id,boolean includeCert,String xpath) throws XMLSignatureException {
  return signXMLUsingKeyPass(doc,certAlias,null,algorithm,idAttrName,id,includeCert,xpath);
}

public int size(){
  return attrs.size();
}

protected Socket __openPassiveDataConnection(int command,String arg) throws IOException, FtpExceptionCanNotHaveDataConnection {
  Socket socket;
  if (pasv() != FTPReply.ENTERING_PASSIVE_MODE)   throw new FtpExceptionCanNotHaveDataConnection("pasv() failed. " + getReplyString());
  try {
    __parsePassiveModeReply(getReplyStrings()[0]);
  }
 catch (  MalformedServerReplyException e) {
    throw new FtpExceptionCanNotHaveDataConnection(e.getMessage());
  }
  socket=_socketFactory_.createSocket(__passiveHost,__passivePort);
  if (!FTPReply.isPositivePreliminary(sendCommand(command,arg))) {
    socket.close();
    return null;
  }
  if (__remoteVerificationEnabled && !verifyRemote(socket)) {
    InetAddress host1, host2;
    host1=socket.getInetAddress();
    host2=getRemoteAddress();
    socket.close();
    throw new FtpExceptionCanNotHaveDataConnection("Host attempting data connection " + host1.getHostAddress() + " is not same as server "+ host2.getHostAddress()+ " So we intentionally close it for security precaution.");
  }
  if (__dataTimeout >= 0)   socket.setSoTimeout(__dataTimeout);
  return socket;
}

public Object invoke(Object proxy,Method method,Object[] args) throws Throwable {
  Monitor mon=null;
  if (params.isInterfaceEnabled && params.isEnabled) {
    mon=MonitorFactory.start(labelerInt.getSummaryLabel(method));
  }
  try {
    if (method.equals(EQUALS_METHOD))     return Boolean.valueOf(equals(args[0]));
 else     return method.invoke(monitoredObj,args);
  }
 catch (  InvocationTargetException e) {
    if (params.isEnabled) {
      String sqlMessage="";
      String detailStackTrace=null;
      Throwable rootCause=e.getCause();
      if (rootCause instanceof SQLException) {
        SQLException sqlException=(SQLException)rootCause;
        sqlMessage=",ErrorCode=" + sqlException.getErrorCode() + ",SQLState="+ sqlException.getSQLState();
      }
      trackException(rootCause,method,sqlMessage);
    }
    throw e.getCause();
  }
 finally {
    if (mon != null)     mon.stop();
  }
}

public static void copyStream(final InputStream fromStream,final OutputStream toStream) throws IOException {
  byte[] buffer=new byte[4096];
  int bytesRead;
  while ((bytesRead=fromStream.read(buffer)) != -1) {
    toStream.write(buffer,0,bytesRead);
  }
}

public static int probRound(double value,Random rand){
  if (value >= 0) {
    double lower=Math.floor(value);
    double prob=value - lower;
    if (rand.nextDouble() < prob) {
      return (int)lower + 1;
    }
 else {
      return (int)lower;
    }
  }
 else {
    double lower=Math.floor(Math.abs(value));
    double prob=Math.abs(value) - lower;
    if (rand.nextDouble() < prob) {
      return -((int)lower + 1);
    }
 else {
      return -(int)lower;
    }
  }
}

private void loadStringValue(JTextField comp,final String elementName){
  String propValue=properties.getValue(elementName);
  if (propValue != null && !propValue.isEmpty()) {
    comp.setText(propValue);
  }
}

public static Ed25519GroupElement toRepresentation(final Ed25519GroupElement g,final CoordinateSystem newCoordinateSystem){
  final BigInteger x;
  final BigInteger y;
  final BigInteger gX=toBigInteger(g.getX().encode());
  final BigInteger gY=toBigInteger(g.getY().encode());
  final BigInteger gZ=toBigInteger(g.getZ().encode());
  final BigInteger gT=null == g.getT() ? null : toBigInteger(g.getT().encode());
switch (g.getCoordinateSystem()) {
case AFFINE:
    x=gX;
  y=gY;
break;
case P2:
case P3:
x=gX.multiply(gZ.modInverse(Ed25519Field.P)).mod(Ed25519Field.P);
y=gY.multiply(gZ.modInverse(Ed25519Field.P)).mod(Ed25519Field.P);
break;
case P1xP1:
x=gX.multiply(gZ.modInverse(Ed25519Field.P)).mod(Ed25519Field.P);
assert gT != null;
y=gY.multiply(gT.modInverse(Ed25519Field.P)).mod(Ed25519Field.P);
break;
case CACHED:
x=gX.subtract(gY).multiply(gZ.multiply(new BigInteger("2")).modInverse(Ed25519Field.P)).mod(Ed25519Field.P);
y=gX.add(gY).multiply(gZ.multiply(new BigInteger("2")).modInverse(Ed25519Field.P)).mod(Ed25519Field.P);
break;
case PRECOMPUTED:
x=gX.subtract(gY).multiply(new BigInteger("2").modInverse(Ed25519Field.P)).mod(Ed25519Field.P);
y=gX.add(gY).multiply(new BigInteger("2").modInverse(Ed25519Field.P)).mod(Ed25519Field.P);
break;
default :
throw new UnsupportedOperationException();
}
switch (newCoordinateSystem) {
case AFFINE:
return Ed25519GroupElement.affine(toFieldElement(x),toFieldElement(y),Ed25519Field.ONE);
case P2:
return Ed25519GroupElement.p2(toFieldElement(x),toFieldElement(y),Ed25519Field.ONE);
case P3:
return Ed25519GroupElement.p3(toFieldElement(x),toFieldElement(y),Ed25519Field.ONE,toFieldElement(x.multiply(y).mod(Ed25519Field.P)));
case P1xP1:
return Ed25519GroupElement.p1xp1(toFieldElement(x),toFieldElement(y),Ed25519Field.ONE,Ed25519Field.ONE);
case CACHED:
return Ed25519GroupElement.cached(toFieldElement(y.add(x).mod(Ed25519Field.P)),toFieldElement(y.subtract(x).mod(Ed25519Field.P)),Ed25519Field.ONE,toFieldElement(D.multiply(new BigInteger("2")).multiply(x).multiply(y).mod(Ed25519Field.P)));
case PRECOMPUTED:
return Ed25519GroupElement.precomputed(toFieldElement(y.add(x).mod(Ed25519Field.P)),toFieldElement(y.subtract(x).mod(Ed25519Field.P)),toFieldElement(D.multiply(new BigInteger("2")).multiply(x).multiply(y).mod(Ed25519Field.P)));
default :
throw new UnsupportedOperationException();
}
}

private void endFormals(){
  if (hasFormals) {
    hasFormals=false;
    buf.append('>');
  }
}

public Builder label(char label){
  this.label=Character.toUpperCase(label);
  return this;
}

public static boolean isLetterOrDigit(char c){
  return Character.isLetterOrDigit(c);
}

public static int putLong(byte[] bytes,int offset,long val){
  if (littleEndian) {
    val=Long.reverseBytes(val);
  }
  theUnsafe.putLong(bytes,offset + BYTE_ARRAY_BASE_OFFSET,val);
  return offset + Bytes.SIZEOF_LONG;
}

private Instruction scheduleScalarDefsEarly(Enumeration<Operand> e,Instruction earlyPos,Instruction inst){
  while (e.hasMoreElements()) {
    Operand op=e.nextElement();
    Instruction def=definingInstruction(op);
    scheduleEarly(def);
    if (def.isBranch())     def=dominanceSuccessor(def,inst);
    earlyPos=maxDominatorDepth(def,earlyPos);
  }
  return earlyPos;
}

public void makeUnique(String[] columns,String conflictPolicy){
  uniques.add(CONSTRAINT_UNIQUE_ + TextUtils.join("_",columns) + _UNIQUE__+ TextUtils.join(",",columns)+ __ON_CONFLICT_+ conflictPolicy+ COMMA);
}

default <T>void forEachMatchingFieldNameWithBoolean(String regex,BiConsumer<String,Boolean> function){
  forEachMatchingFieldNameWithBoolean(Pattern.compile(regex),1,function);
}

protected boolean isValidDomain(String domain){
  Matcher ipDomainMatcher=IP_DOMAIN_PATTERN.matcher(domain);
  if (ipDomainMatcher.matches()) {
    InetAddressValidator inetAddressValidator=InetAddressValidator.getInstance();
    return inetAddressValidator.isValid(ipDomainMatcher.group(1));
  }
  DomainValidator domainValidator=DomainValidator.getInstance(allowLocal);
  return domainValidator.isValid(domain) || domainValidator.isValidTld(domain);
}

public void exit(){
  cancel();
  final float radius=lerp(0,mOuterRadius,mTweenRadius);
  final float remaining;
  if (mAnimRadius != null && mAnimRadius.isRunning()) {
    remaining=mOuterRadius - radius;
  }
 else {
    remaining=mOuterRadius;
  }
  final int radiusDuration=(int)(1000 * Math.sqrt(remaining / (WAVE_TOUCH_UP_ACCELERATION + WAVE_TOUCH_DOWN_ACCELERATION) * mDensity) + 0.5);
  final int opacityDuration=(int)(1000 * mOpacity / WAVE_OPACITY_DECAY_VELOCITY + 0.5f);
  exitSoftware(radiusDuration,opacityDuration);
}

public void testSealedObject2() throws Exception {
  try {
    new SealedObject(null){
    }
;
    fail("NullPointerException should be thrown in the case " + "of null SealedObject.");
  }
 catch (  NullPointerException e) {
  }
  String secret="secret string";
  Cipher cipher=new NullCipher();
  SealedObject so1=new SealedObject(secret,cipher);
  SealedObject so2=new SealedObject(so1){
  }
;
  assertEquals("The secret content of the object should equals " + "to the secret content of initial object.",secret,so2.getObject(cipher));
  assertEquals("The algorithm which was used to seal the object " + "should be the same as the algorithm used to seal the " + "initial object",so1.getAlgorithm(),so2.getAlgorithm());
}

@Override public void handleRequestBody(SolrQueryRequest req,SolrQueryResponse rsp) throws ParseException, IOException, SyntaxError {
  String deletionQuery=getDeletionQuery();
  LOGGER.info("Handle deletion request for query {}",deletionQuery);
  if (olderDocumentsExists(deletionQuery,req,rsp)) {
    UpdateRequestProcessor processor=getProcessor(req,rsp);
    deleteOldDocuments(deletionQuery,processor,req);
    commitDeletions(processor,req);
  }
}

public <V extends Comparable<? super V>>OptionalLong maxBy(LongFunction<V> keyExtractor){
  ObjLongBox<V> result=collect(null,null,null);
  return result.a == null ? OptionalLong.empty() : OptionalLong.of(result.b);
}

public void queryAndCompareShards(SolrParams params) throws Exception {
  updateMappingsFromZk(jettys,clients);
  List<String> shards=new ArrayList<>(shardToJetty.keySet());
  for (  String shard : shards) {
    queryAndCompareReplicas(params,shard);
  }
}

public int indexOf(int ch){
  return indexOf(ch,0);
}

private Watcher initWatcher(SolrZkClient zkClient){
  wrappedWatcher=new BufferStateWatcher();
  return zkClient.wrapWatcher(wrappedWatcher);
}

public Configuration(){
  super();
}

public static <K,V>Map<K,V> of(K k1,V v1,K k2,V v2,K k3,V v3,K k4,V v4,K k5,V v5,K k6,V v6,K k7,V v7){
  Map map=of();
  map.put(k1,v1);
  map.put(k2,v2);
  map.put(k3,v3);
  map.put(k4,v4);
  map.put(k5,v5);
  map.put(k6,v6);
  map.put(k7,v7);
  return map;
}

public long longAt(int index){
  lb.position(index);
  return lb.get();
}

private String startSetToString(){
  StringBuffer FString=new StringBuffer();
  boolean didPrint;
  if (m_starting == null) {
    return getStartSet();
  }
  for (int i=0; i < m_starting.length; i++) {
    didPrint=false;
    if ((m_hasClass == false) || (m_hasClass == true && i != m_classIndex)) {
      FString.append((m_starting[i] + 1));
      didPrint=true;
    }
    if (i == (m_starting.length - 1)) {
      FString.append("");
    }
 else {
      if (didPrint) {
        FString.append(",");
      }
    }
  }
  return FString.toString();
}

public static String makeTagClassName(String componentFamily,String rendererType){
  if (componentFamily == null) {
    return null;
  }
  String tagClassName=componentFamily;
  if (rendererType != null) {
    if (!componentFamily.equals(rendererType)) {
      tagClassName=tagClassName + rendererType;
    }
  }
  return tagClassName + "Tag";
}

public void registerService(String serviceName,boolean createTemplate,boolean activate) throws AMException, SSOException {
  if (debug.messageEnabled()) {
    debug.message("AMOrganizationalUnitImpl.registerService(" + serviceName + ", "+ createTemplate+ ", "+ activate+ ")");
  }
  dsServices.registerService(super.token,super.entryDN,serviceName);
  Set serviceStatus=getAttribute(SERVICE_STATUS_ATTRIBUTE);
  if (!serviceStatus.equals(Collections.EMPTY_SET)) {
    Iterator iter=serviceStatus.iterator();
    while (iter.hasNext()) {
      String status=(String)iter.next();
      if (status.equalsIgnoreCase(serviceName)) {
        Object args[]={serviceName};
        throw new AMException(AMSDKBundle.getString("464",args,super.locale),"464",args);
      }
    }
  }
 else {
    serviceStatus=new HashSet();
  }
  serviceStatus.add(serviceName);
  setAttribute(SERVICE_STATUS_ATTRIBUTE,serviceStatus);
  try {
    store();
  }
 catch (  AMException le) {
    try {
      Set objectClass=getAttribute("objectclass");
      if (debug.messageEnabled()) {
        debug.message("object class=" + objectClass);
      }
      if (!objectClass.contains("iplanet-am-managed-org-unit")) {
        objectClass.add("iplanet-am-managed-org-unit");
        setAttribute("objectclass",objectClass);
        setAttribute(SERVICE_STATUS_ATTRIBUTE,serviceStatus);
        store();
      }
 else {
        throw le;
      }
    }
 catch (    Exception e) {
      if (debug.messageEnabled()) {
        debug.message("error adding objectclass",e);
      }
      throw le;
    }
  }
  if (createTemplate) {
    try {
      if (AMServiceUtils.serviceHasSubSchema(super.token,serviceName,SchemaType.POLICY)) {
        createTemplate(AMTemplate.POLICY_TEMPLATE,serviceName,null);
      }
      if (AMServiceUtils.serviceHasSubSchema(super.token,serviceName,SchemaType.DYNAMIC)) {
        createTemplate(AMTemplate.DYNAMIC_TEMPLATE,serviceName,null);
      }
    }
 catch (    SMSException smsex) {
      throw new AMException(AMSDKBundle.getString("451",super.locale),"451");
    }
  }
}

public static void assertAlmostEquals(double expected,double actual,int decimals){
  assertAlmostEquals(null,new Double(expected),new Double(actual),decimals);
}

private static int snapVertical(Collection<ConstraintWidget> widgets,ConstraintWidget widget,ConstraintAnchor anchor,int position,ArrayList<SnapCandidate> snapCandidates){
  SnapCandidate candidate=new SnapCandidate();
  ConstraintHandle handle=WidgetInteractionTargets.constraintHandle(anchor);
  if (handle == null) {
    return position;
  }
  handle.setDrawY(position);
  SnapPlacement.snapAnchor(widgets,widget,anchor,candidate);
  if (candidate.target != null) {
    ConstraintHandle targetHandle=WidgetInteractionTargets.constraintHandle(candidate.target);
    int ty=candidate.y;
    if (targetHandle != null) {
      ty=targetHandle.getDrawY();
    }
    position=ty + candidate.margin;
    snapCandidates.add(candidate);
  }
  return position;
}

public int send(OutputStream out) throws IOException {
  out.write(this.fileBuff,this.offset,this.length);
  return 0;
}

private double sin(double angle){
  while (angle >= 180.0d) {
    angle-=180.0d;
  }
  double value=(angle / 180.0d * Math.PI);
  return Math.sin(value);
}

public static String last(String list,String delimiter,boolean ignoreEmpty){
  if (StringUtil.isEmpty(list))   return "";
  int len=list.length();
  char[] del;
  if (StringUtil.isEmpty(delimiter)) {
    del=new char[]{','};
  }
 else   del=delimiter.toCharArray();
  int index;
  int x;
  while (true) {
    index=-1;
    for (int i=0; i < del.length; i++) {
      x=list.lastIndexOf(del[i]);
      if (x > index)       index=x;
    }
    if (index == -1) {
      return list;
    }
 else     if (index + 1 == len) {
      if (!ignoreEmpty)       return "";
      list=list.substring(0,len - 1);
      len--;
    }
 else {
      return list.substring(index + 1);
    }
  }
}

private void tryParseTypeAttribute(IDOMElement element){
  IDOMAttr typeAttr=(IDOMAttr)UiBinderXmlModelUtilities.getTypeAttribute(element);
  if (typeAttr == null) {
    return;
  }
  IRegion valueRegion=XmlUtilities.getAttributeValueRegion(typeAttr);
  if (valueRegion == null) {
    return;
  }
  String fqType=typeAttr.getNodeValue();
  if (fqType == null) {
    return;
  }
  final IType type=JavaModelSearch.findType(javaProject,fqType);
  if (!JavaModelSearch.isValidElement(type)) {
    problemMarkerManager.setTypeUndefinedError(valueRegion,fqType);
  }
 else {
    if (UiBinderXmlModelUtilities.isStyleElement(element)) {
      IType cssResourceType=ClientBundleUtilities.findCssResourceType(javaProject);
      if (cssResourceType != null) {
        try {
          if (!JavaUtilities.isSubtype(cssResourceType,type)) {
            problemMarkerManager.setNotCssResourceSubtypeError(valueRegion,fqType);
          }
        }
 catch (        JavaModelException e) {
          GWTPluginLog.logWarning(e,"Could not validate the <ui:style>'s type attribute.");
        }
      }
    }
  }
  javaTypeReferences.add(fqType);
}

private void clearDictionaryCache(){
  Map<String,Dictionary> dictionaryCaches=surrogateKeyGen.getDictionaryCaches();
  List<Dictionary> reverseDictionaries=new ArrayList<>(dictionaryCaches.values());
  for (int i=0; i < reverseDictionaries.size(); i++) {
    Dictionary dictionary=reverseDictionaries.get(i);
    dictionary.clear();
  }
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getFooterSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if (mState == State.PULL_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

public static List<MRelationType> retrieveTypes(final PO po,final int windowId){
  if (po.get_KeyColumns().length != 1) {
    logger.severe(po + " has " + po.get_KeyColumns().length+ " key column(s). Should have one.");
    PORelationException.throwWrongKeyColumnCount(po);
  }
  final String keyColumn=po.get_KeyColumns()[0];
  final int colId=MColumn.getColumn_ID(po.get_TableName(),keyColumn);
  final PreparedStatement pstmt=DB.prepareStatement(SQL,po.get_TrxName());
  ResultSet rs=null;
  try {
    pstmt.setInt(1,po.get_Table_ID());
    pstmt.setInt(2,colId);
    rs=pstmt.executeQuery();
    final List<MRelationType> result=evalResultSet(po,windowId,rs);
    logger.info("There are " + result.size() + " matching types for "+ po);
    return result;
  }
 catch (  SQLException e) {
    logger.severe(e.getMessage());
    throw new AdempiereException(e);
  }
 finally {
    DB.close(rs,pstmt);
  }
}

public JdpJmxPacket(byte[] data) throws JdpException {
  JdpPacketReader reader;
  reader=new JdpPacketReader(data);
  Map<String,String> p=reader.getDiscoveryDataAsMap();
  String sId=p.get(UUID_KEY);
  this.id=(sId == null) ? null : UUID.fromString(sId);
  this.jmxServiceUrl=p.get(JMX_SERVICE_URL_KEY);
  this.mainClass=p.get(MAIN_CLASS_KEY);
  this.instanceName=p.get(INSTANCE_NAME_KEY);
  this.processId=p.get(PROCESS_ID_KEY);
  this.rmiHostname=p.get(RMI_HOSTNAME_KEY);
  this.broadcastInterval=p.get(BROADCAST_INTERVAL_KEY);
}

private UidRange parseUidRange(String range) throws DecodingException {
  int pos=range.indexOf(':');
  try {
    if (pos == -1) {
      if (range.length() == 1 && range.charAt(0) == '*') {
        return new UidRange(MessageUid.MAX_VALUE);
      }
 else {
        long value=parseUnsignedInteger(range);
        return new UidRange(MessageUid.of(value));
      }
    }
 else {
      long val1=parseUnsignedInteger(range.substring(0,pos));
      long val2=parseUnsignedInteger(range.substring(pos + 1));
      if (val1 == Long.MAX_VALUE && val2 == Long.MAX_VALUE) {
        return new UidRange(MessageUid.MAX_VALUE);
      }
 else       if (val1 <= val2) {
        return new UidRange(MessageUid.of(val1),MessageUid.of(val2));
      }
 else       if (val1 == Long.MAX_VALUE) {
        return new UidRange(MessageUid.of(val2),MessageUid.MAX_VALUE);
      }
 else {
        return new UidRange(MessageUid.of(val2),MessageUid.of(val1));
      }
    }
  }
 catch (  NumberFormatException e) {
    throw new DecodingException(HumanReadableText.INVALID_MESSAGESET,"Invalid message set.",e);
  }
}

public void addFXGLListener(FXGLListener listener){
  systemListeners.add(listener);
}

public void addDefinition(String definition){
  if (!StringUtils.isEmpty(definition)) {
    definitions.add(definition);
  }
}

@Override public void receiveEvent(ClientStateInformation information){
  if (information.getState() != currentState) {
    logger.info("Received status update: " + information);
    if (information.getState() == ClientState.SEARCH) {
      searchStartTime=System.currentTimeMillis();
      for (      SequenceOutputVariableFactory<?> factory : sequenceOutputVariableFactories.values()) {
        factory.setStartTime(searchStartTime);
      }
    }
    OutputVariable<Long> time=new OutputVariable<Long>("Time_" + currentState.getName(),System.currentTimeMillis() - currentStateStarted);
    outputVariables.put(time.getName(),time);
    currentState=information.getState();
    currentStateStarted=System.currentTimeMillis();
  }
}

public void testCase11(){
  byte aBytes[]={1,2,3,4,5,6,7,1,2,3,4,5,6,7};
  byte bBytes[]={10,20,30,40,50,60,70,10,20,30};
  int aSign=1;
  int bSign=-1;
  byte rBytes[]={1,2,3,4,15,26,37,41,52,63,74,15,26,37};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.subtract(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals(1,result.signum());
}

public void addBugCode(BugCode bugCode){
  bugCodeList.add(bugCode);
}

@Override public final void write(int b){
  if (this.ignoreWrites)   return;
  checkIfWritable();
  ensureCapacity(1);
  buffer.put((byte)b);
}

public void testNestedAllocationContexts(){
  final IAllocationContext context=manager.newAllocationContext(true);
  final String test="Hello World";
  final long addr1=allocate(manager,context,test);
  final long addr2=allocate(manager,context,test);
  assertTrue(addr1 != addr2);
  final String res=getString(addr1);
  assertTrue(res.equals(test));
  manager.free(addr1,context);
  final long addr3=allocate(manager,context,test);
  assertTrue(addr1 != addr3);
  manager.detachContext(context);
  final IAllocationContext context2=manager.newAllocationContext(true);
  final long addr4=allocate(manager,context2,test);
  assertTrue(addr1 == addr4);
}

public static String underlinesToCamelCase(String string){
  StringBuilder sb=new StringBuilder(string.length());
  int n=string.length();
  int i=0;
  boolean upcaseNext=true;
  for (; i < n; i++) {
    char c=string.charAt(i);
    if (c == '_') {
      upcaseNext=true;
    }
 else {
      if (upcaseNext) {
        c=Character.toUpperCase(c);
      }
      upcaseNext=false;
      sb.append(c);
    }
  }
  return sb.toString();
}

protected BestMatchFinder(String pattern){
  searchPattern=pattern.toLowerCase();
}

public int indexOf(Object key){
  return key == null ? indexOfNull() : indexOf(key,key.hashCode());
}

public long nextActionMillis(long now,long nextRetryTimeMillis){
  for (  FileDownloadInfo info : downloads) {
    long individualRetryTimeMillis=getNextActionMillisFor(now,info);
    nextRetryTimeMillis=Math.min(individualRetryTimeMillis,nextRetryTimeMillis);
  }
  return nextRetryTimeMillis;
}

private void pop(final String desc){
  char c=desc.charAt(0);
  if (c == '(') {
    pop((Type.getArgumentsAndReturnSizes(desc) >> 2) - 1);
  }
 else   if (c == 'J' || c == 'D') {
    pop(2);
  }
 else {
    pop(1);
  }
}

public Integer countPagesContainingTemplateNames(List<String> templateNames) throws WikiApiException {
  return countFilteredPages(templateNames,true);
}

static URL fixPureQueryTargets(URL base,String target) throws MalformedURLException {
  if (!target.startsWith("?"))   return new URL(base,target);
  String basePath=base.getPath();
  String baseRightMost="";
  int baseRightMostIdx=basePath.lastIndexOf("/");
  if (baseRightMostIdx != -1) {
    baseRightMost=basePath.substring(baseRightMostIdx + 1);
  }
  if (target.startsWith("?"))   target=baseRightMost + target;
  return new URL(base,target);
}

synchronized void add(Object obj){
  if (objList != null) {
    objList.add(obj);
  }
}

public void sort(){
  Collections.sort(individuals,PERFORMANCE_COMPARATOR);
}

void freeInterval(SpillLocationInterval i){
  freeIntervals.add(i);
}

private void checkAndWriteDictionaryChunkToFile() throws IOException {
  if (oneDictionaryChunkList.size() >= dictionary_one_chunk_size) {
    writeDictionaryFile();
    createChunkList();
  }
}

private void ctrlSelect(D nodeData){
  int insertionIndex=getInsertionIndex(nodeData);
  insertAndSelectNode(nodeData,insertionIndex,!nodeData.equals(selectedNodes.get(insertionIndex)));
}

private void readObject(ObjectInputStream ois) throws IOException, ClassNotFoundException {
  byte[] asn1EncPrincipal=(byte[])ois.readObject();
  byte[] encRealm=(byte[])ois.readObject();
  try {
    Realm realmObject=new Realm(new DerValue(encRealm));
    PrincipalName krb5Principal=new PrincipalName(new DerValue(asn1EncPrincipal),realmObject);
    realm=realmObject.toString();
    fullName=krb5Principal.toString();
    nameType=krb5Principal.getNameType();
  }
 catch (  Exception e) {
    throw new IOException(e);
  }
}

private static int readSwappedInteger(final DataInputStream input) throws IOException {
  final int value1=input.readByte();
  final int value2=input.readByte();
  final int value3=input.readByte();
  final int value4=input.readByte();
  return ((value1 & 0xff) << 0) + ((value2 & 0xff) << 8) + ((value3 & 0xff) << 16)+ ((value4 & 0xff) << 24);
}

private void consumePreNestedScroll(int dx,int dy,int[] consumed){
  if (mOverScrollEffect == OverScrollEffect.BOUNCE && mUnconsumedOverScrollOffset != 0) {
    int destOffset=mUnconsumedOverScrollOffset - dy;
    if (!MathUtils.sameSign(destOffset,mUnconsumedOverScrollOffset)) {
      destOffset=0;
    }
 else     if (Math.abs(destOffset) > Math.abs(mUnconsumedOverScrollOffset)) {
      destOffset=mUnconsumedOverScrollOffset;
    }
    consumed[0]=0;
    consumed[1]=mUnconsumedOverScrollOffset - destOffset;
    mUnconsumedOverScrollOffset=destOffset;
    setScrollingOffset(getUnconsumedScrollingOffset());
  }
}

private static native void initIDs();

public StrBuilder replace(final int startIndex,int endIndex,final String replaceStr){
  endIndex=validateRange(startIndex,endIndex);
  final int insertLen=(replaceStr == null ? 0 : replaceStr.length());
  replaceImpl(startIndex,endIndex,endIndex - startIndex,replaceStr,insertLen);
  return this;
}

public void closeFile(){
  closeFile(true);
}

public boolean isValid(int value){
  return min <= value && value <= max;
}

public PluginsInfo info(){
  return info;
}

public void firePropertyChange(String propertyName,int oldValue,int newValue){
  firePropertyChange(propertyName,Integer.valueOf(oldValue),Integer.valueOf(newValue));
}

static ArrayList<Field> allFields(final Class<?> clazz){
  final ArrayList<Field> res=new ArrayList<>();
  Class<?> cl=clazz;
  while (cl != null) {
    final Field[] fields=cl.getDeclaredFields();
    Collections.addAll(res,fields);
    cl=cl.getSuperclass();
  }
  return res;
}

private void updateWeatherStates(){
  boolean changed=temperature.update();
  changed|=rain.update();
  changed|=fog.update();
  changed|=thunder.update();
  if (changed) {
    updateZones();
  }
}

public static RenderLoops makeRenderLoops(SurfaceType src,CompositeType comp,SurfaceType dst){
  RenderLoops loops=new RenderLoops();
  loops.drawLineLoop=DrawLine.locate(src,comp,dst);
  loops.fillRectLoop=FillRect.locate(src,comp,dst);
  loops.drawRectLoop=DrawRect.locate(src,comp,dst);
  loops.drawPolygonsLoop=DrawPolygons.locate(src,comp,dst);
  loops.drawPathLoop=DrawPath.locate(src,comp,dst);
  loops.fillPathLoop=FillPath.locate(src,comp,dst);
  loops.fillSpansLoop=FillSpans.locate(src,comp,dst);
  loops.fillParallelogramLoop=FillParallelogram.locate(src,comp,dst);
  loops.drawParallelogramLoop=DrawParallelogram.locate(src,comp,dst);
  loops.drawGlyphListLoop=DrawGlyphList.locate(src,comp,dst);
  loops.drawGlyphListAALoop=DrawGlyphListAA.locate(src,comp,dst);
  loops.drawGlyphListLCDLoop=DrawGlyphListLCD.locate(src,comp,dst);
  return loops;
}

public void edit(Object plotCanvas){
  String _label=JOptionPane.showInputDialog((PlotCanvas)plotCanvas,"Choose axis label",label);
  if (_label != null) {
    setLegend(_label);
  }
}

protected boolean excludeFile(String file){
  if (excluded == null)   return false;
  Iterator<String> iter=excluded.iterator();
  while (iter.hasNext())   if (file.endsWith(iter.next()))   return true;
  return false;
}

public Builder deleteUserType(){
  deleteFields.add("userType");
  return this;
}

public final static boolean endsWithIgnoreCase(String str,String end){
  int strLength=str == null ? 0 : str.length();
  int endLength=end == null ? 0 : end.length();
  if (endLength > strLength)   return false;
  for (int i=1; i <= endLength; i++) {
    if (ScannerHelper.toLowerCase(end.charAt(endLength - i)) != ScannerHelper.toLowerCase(str.charAt(strLength - i)))     return false;
  }
  return true;
}

private void translateMatrixAfterRotate(int axis,float trans,float prevImageSize,float imageSize,int prevViewSize,int viewSize,int drawableSize){
  if (imageSize < viewSize) {
    m[axis]=(viewSize - (drawableSize * m[Matrix.MSCALE_X])) * 0.5f;
  }
 else   if (trans > 0) {
    m[axis]=-((imageSize - viewSize) * 0.5f);
  }
 else {
    float percentage=(Math.abs(trans) + (0.5f * prevViewSize)) / prevImageSize;
    m[axis]=-((percentage * imageSize) - (viewSize * 0.5f));
  }
}

public void write(int c) throws IOException {
  internalOut.write(c);
}

private <T extends ClientRequestResult>Collection<T> executeRequest(final Collection<Long> ids,final Class<T> clazz,final ClientRequestReportListener reportListener,final String requestQueue){
  LOGGER.debug("Initiating client request.");
  ClientRequestImpl<T> clientRequest=new ClientRequestImpl<T>(clazz);
  Iterator<Long> it=ids.iterator();
  Collection<Future<Collection<T>>> results=new ArrayList<Future<Collection<T>>>();
  int counter=0;
  while (it.hasNext()) {
    while (it.hasNext() && counter < maxRequestSize) {
      clientRequest.addTagId(it.next());
      counter++;
    }
    RequestValuesTask<T> task=new RequestValuesTask<T>(clientRequest,reportListener,requestQueue);
    results.add(executor.submit(task));
    clientRequest=new ClientRequestImpl<T>(clazz);
    counter=0;
  }
  Collection<T> finalCollection=new ArrayList<T>();
  for (  Future<Collection<T>> result : results) {
    try {
      finalCollection.addAll(result.get());
    }
 catch (    InterruptedException e) {
      LOGGER.error("InterruptedException caught while executing RequestValuesTask.",e);
      throw new RuntimeException(e);
    }
catch (    ExecutionException e) {
      LOGGER.error("ExecutionException caught while executing RequestValuesTask.",e);
      throw new RuntimeException(e);
    }
  }
  LOGGER.debug("Client request completed.");
  return finalCollection;
}

public static Map<String,Integer> classNamesToMapping(List<String> labels){
  Map<String,Integer> mapping=new HashMap<String,Integer>();
  for (int i=0; i < labels.size(); i++) {
    mapping.put(labels.get(i),i);
  }
  return mapping;
}

public static String shortNumber(int number){
  if (number >= 1000) {
    int hundred=number % 1000 / 100;
    if (hundred != 0)     return String.format("%.1f",number / 1000) + "k";
 else     return (number / 1000) + "k";
  }
 else   return number + "";
}

public static void putUnsignedShort(ByteBuffer bb,int v){
  bb.putShort((short)(v & 0xffff));
}

public static String readFileToString(File f) throws IOException {
  StringWriter sw=new StringWriter();
  IO.copyAndCloseBoth(Common.asReaderUTF8Lenient(new FileInputStream(f)),sw);
  return sw.toString();
}

public void test_wrap_ByteBuffer$ByteBuffer_05(){
  String host="new host";
  int port=8080;
  ByteBuffer bb=ByteBuffer.allocate(10);
  ByteBuffer[] bbA={ByteBuffer.allocate(5),ByteBuffer.allocate(10),ByteBuffer.allocate(5)};
  SSLEngine sse=getEngine(host,port);
  sse.setUseClientMode(true);
  try {
    SSLEngineResult res=sse.wrap(bbA,bb);
    assertEquals(0,res.bytesConsumed());
    assertEquals(0,res.bytesProduced());
  }
 catch (  Exception ex) {
    fail("Unexpected exception: " + ex);
  }
}

private boolean linkLast(Node<E> node){
  if (count >= capacity)   return false;
  Node<E> l=last;
  node.prev=l;
  last=node;
  if (first == null)   first=node;
 else   l.next=node;
  ++count;
  notEmpty.signal();
  return true;
}

public void testTopicDinamicallyIncludedBehavior() throws Exception {
  startAllBrokers();
  Destination dest=createDestination("test",true);
  MessageConsumer clientA=createConsumer("BrokerA",dest);
  MessageConsumer clientB=createConsumer("BrokerB",dest);
  Thread.sleep(2 * 1000);
  sendMessages("BrokerA",dest,MESSAGE_COUNT);
  MessageIdList msgsA=getConsumerMessages("BrokerA",clientA);
  msgsA.waitForMessagesToArrive(MESSAGE_COUNT);
  assertEquals(MESSAGE_COUNT,msgsA.getMessageCount());
  MessageIdList msgsB=getConsumerMessages("BrokerB",clientB);
  msgsB.waitForMessagesToArrive(MESSAGE_COUNT);
  assertEquals(0,msgsB.getMessageCount());
}

private File createCaptureFile(int encodingType,String fileName){
  if (fileName.isEmpty()) {
    fileName=".Pic";
  }
  if (encodingType == JPEG) {
    fileName=fileName + ".jpg";
  }
 else   if (encodingType == PNG) {
    fileName=fileName + ".png";
  }
 else {
    throw new IllegalArgumentException("Invalid Encoding Type: " + encodingType);
  }
  return new File(getTempDirectoryPath(),fileName);
}

@Override public void actionPerformed(ActionEvent e){
  Object o;
  o=e.getSource();
  if (o == m_MenuFileOpen) {
    loadFile();
  }
 else   if (o == m_MenuFileSave) {
    saveFile();
  }
 else   if (o == m_MenuFileSaveAs) {
    saveFileAs();
  }
 else   if (o == m_MenuFileClose) {
    closeFile();
  }
 else   if (o == m_MenuFileCloseAll) {
    closeAllFiles();
  }
 else   if (o == m_MenuFileProperties) {
    showProperties();
  }
 else   if (o == m_MenuFileExit) {
    close();
  }
 else   if (o == m_MenuEditUndo) {
    undo();
  }
 else   if (o == m_MenuEditCopy) {
    copyContent();
  }
 else   if (o == m_MenuEditSearch) {
    search();
  }
 else   if (o == m_MenuEditClearSearch) {
    clearSearch();
  }
 else   if (o == m_MenuEditDeleteAttribute) {
    deleteAttribute(false);
  }
 else   if (o == m_MenuEditDeleteAttributes) {
    deleteAttribute(true);
  }
 else   if (o == m_MenuEditRenameAttribute) {
    renameAttribute();
  }
 else   if (o == m_MenuEditAttributeAsClass) {
    attributeAsClass();
  }
 else   if (o == m_MenuEditDeleteInstance) {
    deleteInstance(false);
  }
 else   if (o == m_MenuEditDeleteInstances) {
    deleteInstance(true);
  }
 else   if (o == m_MenuEditSortInstances) {
    sortInstances();
  }
 else   if (o == m_MenuViewAttributes) {
    showAttributes();
  }
 else   if (o == m_MenuViewValues) {
    showValues();
  }
 else   if (o == m_MenuViewOptimalColWidths) {
    setOptimalColWidths();
  }
  updateMenu();
}

public boolean validateToken(EndpointSpecification endpointSpecification,SecurityToken toBeValidatedToken) throws SoapSTSConsumerException {
  STSClient client=getSTSClient(stsInstanceWsdlUrl,endpointSpecification.serviceQName,endpointSpecification.portQName);
  client.setTokenType(STSConstants.STATUS);
  try {
    client.validateSecurityToken(toBeValidatedToken);
    return true;
  }
 catch (  TrustException e) {
    return false;
  }
catch (  Exception e) {
    throw new SoapSTSConsumerException(e.getMessage(),e);
  }
}

public static String stripFunctionTags(String label){
  if (label.indexOf("-") > 0)   return label.substring(0,label.indexOf("-"));
 else   return label;
}

@Override public void playNewVideo(MetaData currentItemMetaData,VideoPlayerView videoPlayerView,String videoUrl){
  if (SHOW_LOGS)   Logger.v(TAG,">> playNewVideo, videoPlayer " + videoPlayerView + ", mCurrentPlayer "+ mCurrentPlayer+ ", videoPlayerView "+ videoPlayerView);
  mPlayerHandler.pauseQueueProcessing(TAG);
  boolean currentPlayerIsActive=mCurrentPlayer == videoPlayerView;
  boolean isAlreadyPlayingTheFile=mCurrentPlayer != null && videoUrl.equals(mCurrentPlayer.getVideoUrlDataSource());
  if (SHOW_LOGS)   Logger.v(TAG,"playNewVideo, isAlreadyPlayingTheFile " + isAlreadyPlayingTheFile);
  if (SHOW_LOGS)   Logger.v(TAG,"playNewVideo, currentPlayerIsActive " + currentPlayerIsActive);
  if (currentPlayerIsActive) {
    if (isInPlaybackState() && isAlreadyPlayingTheFile) {
      if (SHOW_LOGS)       Logger.v(TAG,"playNewVideo, videoPlayer " + videoPlayerView + " is already in state "+ mCurrentPlayerState);
    }
 else {
      startNewPlayback(currentItemMetaData,videoPlayerView,videoUrl);
    }
  }
 else {
    startNewPlayback(currentItemMetaData,videoPlayerView,videoUrl);
  }
  mPlayerHandler.resumeQueueProcessing(TAG);
  if (SHOW_LOGS)   Logger.v(TAG,"<< playNewVideo, videoPlayer " + videoPlayerView + ", videoUrl "+ videoUrl);
}

private void addTraceAndType(String name){
  if (tracesType.get(name) == null) {
    traces.add(createTrace(name,TraceType.REAL));
    tracesType.put(name,TraceType.REAL);
  }
 else {
    traces.add(createTrace(name,tracesType.get(name)));
  }
}

public static boolean isReservedStreamName(String name){
  return name.startsWith(".");
}

public static VolumeMount[] formatOriginalContainerVolumeMount(LogDraft logDraft){
  List<VolumeMount> volumeMounts=new ArrayList<>();
  int idxSuffix=1;
  for (  LogItemDraft logItemDraft : logDraft.getLogItemDrafts()) {
    if (logItemDraft.isAutoCollect() || logItemDraft.isAutoDelete()) {
      VolumeMount volumeMount=new VolumeMount();
      volumeMount.setName("data" + idxSuffix);
      volumeMount.setMountPath(LogItemDraft.getLogParentPath(logItemDraft.getLogPath()));
      volumeMounts.add(volumeMount);
      idxSuffix++;
    }
  }
  return volumeMounts.toArray(new VolumeMount[]{});
}

public static double dnorm(double x){
  return Math.exp(-x * x / 2.) * PSI;
}

public static long checksumCRC32(File file) throws IOException {
  CRC32 crc=new CRC32();
  checksum(file,crc);
  return crc.getValue();
}

private void cmd_annotateDifference(){
  BigDecimal previousValue, actualValue, difference;
  previousValue=(BigDecimal)v_previousBalance.getValue();
  actualValue=(BigDecimal)v_ActualBalance.getValue();
  difference=actualValue.subtract(previousValue);
  MCashBook cashBook=new MCashBook(p_ctx,p_pos.getC_CashBook_ID(),null);
  Timestamp today=TimeUtil.getDay(System.currentTimeMillis());
  MCash cash=MCash.get(p_ctx,cashBook.getC_CashBook_ID(),today,null);
  if (cash != null && cash.get_ID() != 0 && difference.compareTo(cash.getStatementDifference()) != 0) {
    MCashLine cl=new MCashLine(cash);
    cl.setCashType(MCashLine.CASHTYPE_Difference);
    cl.setAmount(difference);
    cl.setDescription(Msg.translate(p_pos.getCtx(),"Cash Scrutiny -> Before: ") + previousValue + " Now: "+ actualValue);
    cl.saveEx();
  }
  cash=MCash.get(p_pos.getCtx(),p_pos.getC_CashBook_ID(),today,null);
  v_previousBalance.setValue(cash.getEndingBalance());
  v_ActualBalance.setValue(Env.ZERO);
  v_difference.setValue(Env.ZERO);
}

public void write(OutputStream out,java.util.List<Figure> figures) throws IOException {
  Rectangle2D.Double drawingRect=null;
  for (  Figure f : figures) {
    if (drawingRect == null) {
      drawingRect=f.getBounds();
    }
 else {
      drawingRect.add(f.getBounds());
    }
  }
  AffineTransform tx=new AffineTransform();
  tx.translate(-Math.min(0,drawingRect.x),-Math.min(0,drawingRect.y));
  write(out,figures,tx,new Dimension((int)(Math.abs(drawingRect.x) + drawingRect.width),(int)(Math.abs(drawingRect.y) + drawingRect.height)));
}

FixedAllocator(final RWStore store,final int size){
  m_diskAddr=0;
  m_store=store;
  m_size=size;
  m_bitSize=calcBitSize(true,size,cMinAllocation,cModAllocation);
  allocBlockRange=32 * m_bitSize;
  final int numBlocks=254 / (m_bitSize + 1);
  m_allocBlocks=new ArrayList<AllocBlock>(numBlocks);
  for (int i=0; i < numBlocks; i++) {
    m_allocBlocks.add(new AllocBlock(0,m_bitSize,this));
  }
  m_freeTransients=0;
  m_freeBits=32 * m_bitSize * numBlocks;
}

private void buildGetStorageResponse(MockCloseableHttpResponse response,URI uri) throws JAXBException {
  Pattern pattern=Pattern.compile("/herd-app/rest/storages/(.*)");
  Matcher matcher=pattern.matcher(uri.getPath());
  if (matcher.find()) {
    Storage storage=getNewStorage(matcher.group(1));
    response.setEntity(getHttpEntity(storage));
  }
}

public void assertEquals(String assertID,String expected,String actual){
  framework.assertEquals(this,assertID,expected,actual);
}

public boolean onPreferenceChange(Preference preference,Object newValue){
  if (Boolean.parseBoolean(SystemProperties.get(TelephonyProperties.PROPERTY_INECM_MODE))) {
  }
 else {
    setAirplaneModeOn((Boolean)newValue);
  }
  return true;
}

public static int estimateBandPassOrder(int sampleRate,int passBandStart,int passBandEnd,double passBandRippleDb,double stopBandRippleDb){
  double df=(double)Math.abs(passBandEnd - passBandStart) / (double)sampleRate;
  double ddp=(double)Math.log10(passBandRippleDb);
  double dds=(double)Math.log10(stopBandRippleDb);
  double a1=0.01201;
  double a2=0.09664;
  double a3=-0.51325;
  double a4=0.00203;
  double a5=-0.57054;
  double a6=-0.44314;
  double t1=a1 * ddp * ddp;
  double t2=a2 * ddp;
  double t3=a4 * ddp * ddp;
  double t4=a5 * ddp;
  double cinf=dds * (t1 + t2 + a3) + t3 + t4 + a6;
  double ginf=-14.6f * (double)Math.log10(passBandRippleDb / stopBandRippleDb) - 16.9;
  double n=cinf / df + ginf * df + 1.0;
  return (int)Math.ceil(n);
}

static public Object stringToValue(String s){
  if (s.equals("")) {
    return s;
  }
  if (s.equalsIgnoreCase("true")) {
    return Boolean.TRUE;
  }
  if (s.equalsIgnoreCase("false")) {
    return Boolean.FALSE;
  }
  if (s.equalsIgnoreCase("null")) {
    return JSONObject.NULL;
  }
  char b=s.charAt(0);
  if ((b >= '0' && b <= '9') || b == '.' || b == '-' || b == '+') {
    if (b == '0' && s.length() > 2 && (s.charAt(1) == 'x' || s.charAt(1) == 'X')) {
      try {
        return new Integer(Integer.parseInt(s.substring(2),16));
      }
 catch (      Exception ignore) {
      }
    }
    try {
      if (s.indexOf('.') > -1 || s.indexOf('e') > -1 || s.indexOf('E') > -1) {
        return Double.valueOf(s);
      }
 else {
        Long myLong=new Long(s);
        if (myLong.longValue() == myLong.intValue()) {
          return new Integer(myLong.intValue());
        }
 else {
          return myLong;
        }
      }
    }
 catch (    Exception ignore) {
    }
  }
  return s;
}

public static void writeSingleByte(OutputStream out,int b) throws IOException {
  byte[] buffer=new byte[1];
  buffer[0]=(byte)(b & 0xff);
  out.write(buffer);
}

private float[] calcBorderValues(){
  float max=Integer.MIN_VALUE;
  float min=Integer.MAX_VALUE;
  for (  ChartSet set : chartView.data) {
    for (    ChartEntry e : set.getEntries()) {
      if (e.getValue() >= max)       max=e.getValue();
      if (e.getValue() <= min)       min=e.getValue();
    }
  }
  return new float[]{min,max};
}

private void parseName(StringTokenizer st,boolean peer){
  List vals=new ArrayList(2);
  outer:   while (true) {
    String cls;
    do {
      if (!st.hasMoreTokens()) {
        break outer;
      }
      cls=st.nextToken();
    }
 while (cls.equals(" "));
    if (!peer && cls.equalsIgnoreCase("peer")) {
      parseName(st,true);
      break;
    }
    if (cls.equals("*")) {
      if (peer) {
        throw new IllegalArgumentException("peer class cannot be *");
      }
      cls=null;
      vals=null;
    }
    String nm;
    do {
      if (!st.hasMoreTokens()) {
        throw new IllegalArgumentException("missing name after class");
      }
      nm=st.nextToken();
    }
 while (nm.equals(" "));
    if (!nm.startsWith("\"")) {
      throw new IllegalArgumentException("name must be in quotes");
    }
    while (!nm.endsWith("\"")) {
      if (!st.hasMoreTokens()) {
        throw new IllegalArgumentException("name must be in quotes");
      }
      nm=nm + st.nextToken();
    }
    if (nm.equals("\"*\"")) {
      if (peer) {
        throw new IllegalArgumentException("peer name cannot be \"*\"");
      }
      if (cls == null) {
        continue;
      }
      nm=null;
    }
 else     if (cls == null) {
      throw new IllegalArgumentException("class cannot be * unless name is \"*\"");
    }
 else {
      nm=nm.substring(1,nm.length() - 1);
    }
    if (vals != null) {
      for (int i=vals.size(); i > 0; ) {
        String onm=(String)vals.get(--i);
        String ocls=(String)vals.get(--i);
        if (cls.equals(ocls)) {
          if (onm == null || (onm != null && onm.equals(nm))) {
            continue outer;
          }
 else           if (nm == null) {
            vals.remove(i);
            vals.remove(i);
          }
        }
      }
      vals.add(cls);
      vals.add(nm);
    }
  }
  String[] res=null;
  if (vals != null) {
    if (vals.isEmpty()) {
      throw new IllegalArgumentException("target name is missing elements");
    }
    res=(String[])vals.toArray(new String[vals.size()]);
  }
  if (peer) {
    this.peer=res;
  }
 else {
    this.me=res;
  }
}

public static Object applyOrCall(boolean isApply,Context cx,Scriptable scope,Scriptable thisObj,Object[] args){
  int L=args.length;
  Callable function=getCallable(thisObj);
  Scriptable callThis=null;
  if (L != 0) {
    callThis=toObjectOrNull(cx,args[0]);
  }
  if (callThis == null) {
    callThis=getTopCallScope(cx);
  }
  Object[] callArgs;
  if (isApply) {
    callArgs=L <= 1 ? ScriptRuntime.emptyArgs : getApplyArguments(cx,args[1]);
  }
 else {
    if (L <= 1) {
      callArgs=ScriptRuntime.emptyArgs;
    }
 else {
      callArgs=new Object[L - 1];
      System.arraycopy(args,1,callArgs,0,L - 1);
    }
  }
  return function.call(cx,scope,callThis,callArgs);
}

public void increment(){
  counter.getAndIncrement();
}

public static void removeAllChildren(Node node){
  NodeList children=node.getChildNodes();
  for (int i=0, length=children.getLength(); i < length; i++) {
    node.removeChild(children.item(i));
  }
}

private boolean isMineshafterPresent(){
  try {
    Class.forName("mineshafter.MineServer");
    return true;
  }
 catch (  Exception e) {
    return false;
  }
}

private boolean linkFirst(Node<E> node){
  if (count >= capacity)   return false;
  Node<E> f=first;
  node.next=f;
  first=node;
  if (last == null)   last=node;
 else   f.prev=node;
  ++count;
  notEmpty.signal();
  return true;
}

protected void deploy(HttpServletResponse response,String contextPath,String warURL) throws IOException {
  String context=contextPath;
  boolean error=false;
  if (context == null) {
    File file=new File(warURL);
    String fileName=file.getName();
    if (fileName.endsWith(".war")) {
      fileName=fileName.substring(0,fileName.lastIndexOf(".war"));
    }
    context="/" + fileName;
  }
  if (getContextHandler(context) != null) {
    sendError(response,"An application is already deployed at this context : " + context);
    error=true;
  }
 else   if (!context.startsWith("/")) {
    sendError(response,"The path does not start with a forward slash");
    error=true;
  }
  if (error) {
    return;
  }
 else {
    File webappDest=new File(webAppDirectory,context + ".war");
    URI uri=null;
    try {
      uri=new URI(warURL);
    }
 catch (    URISyntaxException e) {
      sendError(response,"Cannot parse URL " + warURL);
      Log.warn(e);
      return;
    }
    File webappSource=new File(uri);
    FileInputStream fileInputStream=new FileInputStream(webappSource);
    FileOutputStream fileOutputStream=new FileOutputStream(webappDest);
    int i=fileInputStream.read();
    while (i != -1) {
      fileOutputStream.write(i);
      i=fileInputStream.read();
    }
    fileInputStream.close();
    fileOutputStream.flush();
    fileOutputStream.close();
    WebAppContext webappcontext=new WebAppContext();
    webappcontext.setContextPath(context);
    webappcontext.setWar(webappDest.getPath());
    chc.addHandler(webappcontext);
    try {
      webappcontext.start();
    }
 catch (    Exception e) {
      sendError(response,"Unexpected error when trying to start the webapp");
      Log.warn(e);
      return;
    }
  }
  sendMessage(response,"Webapp deployed at context " + contextPath);
}

public OutlierResult run(Relation<V> relation){
  final DBIDs ids=relation.getDBIDs();
  ArrayList<ArrayDBIDs> subspaceIndex=buildOneDimIndexes(relation);
  Set<HiCSSubspace> subspaces=calculateSubspaces(relation,subspaceIndex,rnd.getSingleThreadedRandom());
  if (LOG.isVerbose()) {
    LOG.verbose("Number of high-contrast subspaces: " + subspaces.size());
  }
  List<DoubleRelation> results=new ArrayList<>();
  FiniteProgress prog=LOG.isVerbose() ? new FiniteProgress("Calculating Outlier scores for high Contrast subspaces",subspaces.size(),LOG) : null;
  for (  HiCSSubspace dimset : subspaces) {
    if (LOG.isVerbose()) {
      LOG.verbose("Performing outlier detection in subspace " + dimset);
    }
    ProxyDatabase pdb=new ProxyDatabase(ids);
    pdb.addRelation(new ProjectedView<>(relation,new NumericalFeatureSelection<V>(dimset)));
    OutlierResult result=outlierAlgorithm.run(pdb);
    results.add(result.getScores());
    LOG.incrementProcessed(prog);
  }
  LOG.ensureCompleted(prog);
  WritableDoubleDataStore scores=DataStoreUtil.makeDoubleStorage(relation.getDBIDs(),DataStoreFactory.HINT_STATIC);
  DoubleMinMax minmax=new DoubleMinMax();
  for (DBIDIter iditer=relation.iterDBIDs(); iditer.valid(); iditer.advance()) {
    double sum=0.0;
    for (    DoubleRelation r : results) {
      final double s=r.doubleValue(iditer);
      if (!Double.isNaN(s)) {
        sum+=s;
      }
    }
    scores.putDouble(iditer,sum);
    minmax.put(sum);
  }
  OutlierScoreMeta meta=new BasicOutlierScoreMeta(minmax.getMin(),minmax.getMax());
  DoubleRelation scoreres=new MaterializedDoubleRelation("HiCS","HiCS-outlier",scores,relation.getDBIDs());
  return new OutlierResult(meta,scoreres);
}

private void addUnitToExternalQualMap(final Class<? extends Annotation> annoClass){
  AnnotationMirror mirror=UnitsRelationsTools.buildAnnoMirrorWithNoPrefix(processingEnv,annoClass);
  if (!isAliasedAnnotation(mirror)) {
    String unitClassName=annoClass.getCanonicalName();
    if (!externalQualsMap.containsKey(unitClassName)) {
      externalQualsMap.put(unitClassName,annoClass);
    }
  }
 else {
    Class<? extends Annotation> baseUnitClass=getBaseUnitAnnoClass(mirror);
    if (baseUnitClass != null) {
      String baseUnitClassName=baseUnitClass.getCanonicalName();
      if (!externalQualsMap.containsKey(baseUnitClassName)) {
        loadExternalUnit(baseUnitClassName);
      }
      aliasedAnnotation(mirror);
    }
 else {
    }
  }
  addUnitsRelations(annoClass);
}

@Override protected void onProgressUpdate(Integer... values){
  if (parent != null) {
    if (values[0] == ON_CACHE_END) {
      parent.onCacheEnd();
    }
 else     if (values[0] == ON_CACHE_INTERRUPTED) {
      Log.i(TAG,"Flag ON_CACHE_INTERRUPTED has been set...");
      shouldBeStopped=true;
      parent.onCacheInterrupted();
    }
 else {
      parent.onCacheProgress(taskCount,values[0]);
    }
  }
}

public void checkNumberArgs(int argNum) throws WrongNumberArgsException {
  if (argNum < 2)   reportWrongNumberArgs();
}

public double dotProduct(DoubleVector v){
  return x * v.x + y * v.y + z * v.z;
}

public TemporalOMScalingIcon(Object id,int renderType,boolean interpolate,ImageIcon ii){
  this(id,renderType,interpolate,ii.getImage(),4000000);
  setMaxScale(4000000);
  setMinScale(4000000);
}

@Override public void characters(char[] ch,int start,int length) throws SAXException {
  mStringBuilder.append(ch,start,length);
}

public int maxLength(){
  if (mIsPaired) {
    return (int)Math.max(mLeft.maxLength(),mRight.maxLength());
  }
 else {
    return (int)mSingle.maxLength();
  }
}

public boolean equalsIgnoreCase(StrBuilder other){
  if (this == other) {
    return true;
  }
  if (this.size != other.size) {
    return false;
  }
  char thisBuf[]=this.buffer;
  char otherBuf[]=other.buffer;
  for (int i=size - 1; i >= 0; i--) {
    char c1=thisBuf[i];
    char c2=otherBuf[i];
    if (c1 != c2 && Character.toUpperCase(c1) != Character.toUpperCase(c2)) {
      return false;
    }
  }
  return true;
}

public PathParser(String pathString){
  this.pathString=pathString.toCharArray();
}

public LuaTable(Varargs varargs,int firstarg){
  int nskip=firstarg - 1;
  int n=Math.max(varargs.narg() - nskip,0);
  presize(n,1);
  set(N,valueOf(n));
  for (int i=1; i <= n; i++)   set(i,varargs.arg(i + nskip));
}

public ID3v24Frame(ByteBuffer byteBuffer,String loggingFilename) throws InvalidFrameException, InvalidDataTypeException {
  setLoggingFilename(loggingFilename);
  read(byteBuffer);
}

public void disablePan(BluetoothAdapter adapter){
  if (mPan == null)   mPan=(BluetoothPan)connectProxy(adapter,BluetoothProfile.PAN);
  assertNotNull(mPan);
  long start=System.currentTimeMillis();
  mPan.setBluetoothTethering(false);
  long stop=System.currentTimeMillis();
  assertFalse(mPan.isTetheringOn());
  writeOutput(String.format("disablePan() completed in %d ms",(stop - start)));
}

public Frame<V> init(final Frame<? extends V> src){
  returnValue=src.returnValue;
  System.arraycopy(src.values,0,values,0,values.length);
  top=src.top;
  return this;
}

public boolean ready() throws IOException {
  if (_input == null)   throw new IOException("Reader closed");
  if (_index == _input.length())   return false;
  return true;
}

private LinkedList<Diff> diff_compute(String text1,String text2,boolean checklines,long deadline){
  LinkedList<Diff> diffs=new LinkedList<Diff>();
  if (text1.length() == 0) {
    diffs.add(new Diff(Operation.INSERT,text2));
    return diffs;
  }
  if (text2.length() == 0) {
    diffs.add(new Diff(Operation.DELETE,text1));
    return diffs;
  }
  String longtext=text1.length() > text2.length() ? text1 : text2;
  String shorttext=text1.length() > text2.length() ? text2 : text1;
  int i=longtext.indexOf(shorttext);
  if (i != -1) {
    Operation op=(text1.length() > text2.length()) ? Operation.DELETE : Operation.INSERT;
    diffs.add(new Diff(op,longtext.substring(0,i)));
    diffs.add(new Diff(Operation.EQUAL,shorttext));
    diffs.add(new Diff(op,longtext.substring(i + shorttext.length())));
    return diffs;
  }
  if (shorttext.length() == 1) {
    diffs.add(new Diff(Operation.DELETE,text1));
    diffs.add(new Diff(Operation.INSERT,text2));
    return diffs;
  }
  String[] hm=diff_halfMatch(text1,text2);
  if (hm != null) {
    String text1_a=hm[0];
    String text1_b=hm[1];
    String text2_a=hm[2];
    String text2_b=hm[3];
    String mid_common=hm[4];
    LinkedList<Diff> diffs_a=diff_main(text1_a,text2_a,checklines,deadline);
    LinkedList<Diff> diffs_b=diff_main(text1_b,text2_b,checklines,deadline);
    diffs=diffs_a;
    diffs.add(new Diff(Operation.EQUAL,mid_common));
    diffs.addAll(diffs_b);
    return diffs;
  }
  if (checklines && text1.length() > 100 && text2.length() > 100) {
    return diff_lineMode(text1,text2,deadline);
  }
  return diff_bisect(text1,text2,deadline);
}

public static long sizeOfDirectory(File directory){
  checkDirectory(directory);
  final File[] files=directory.listFiles();
  if (files == null) {
    return 0L;
  }
  long size=0;
  for (  final File file : files) {
    try {
      if (!isSymlink(file)) {
        size+=sizeOf(file);
        if (size < 0) {
          break;
        }
      }
    }
 catch (    IOException ioe) {
    }
  }
  return size;
}

protected void handleMatch(T mapping,String lookupPath,ServerWebExchange exchange){
}

public boolean isUseSSL(){
  return useSSL;
}

public void start(){
  if ((mProxSensor == null) || mIsActive) {
    return;
  }
  mIsActive=true;
  mShouldDropEvents=true;
  mSensorManager.registerListener(mListener,mProxSensor,SensorManager.SENSOR_DELAY_UI);
  LogUtils.log(this,Log.VERBOSE,"Proximity sensor registered at %d.",System.currentTimeMillis());
  mHandler.postDelayed(mFilterRunnable,REGISTRATION_EVENT_FILTER_TIMEOUT);
}

public void testEntityDeclarations(){
  assertNotNull("This implementation does not parse entity declarations",sp);
}

private Vector applyCSS(HTMLElement element,HTMLComponent htmlC,CSSElement[] css,Vector nestedSelectors,Vector siblingSelectors){
  String id=element.getAttributeById(HTMLElement.ATTR_ID);
  String className=element.getAttributeById(HTMLElement.ATTR_CLASS);
  Vector nextNestedSelectors=new Vector();
  Vector nextSiblingSelectors=null;
  if (!HTMLComponent.PROCESS_HTML_MP1_ONLY) {
    nextSiblingSelectors=new Vector();
  }
  for (int e=0; e < css.length; e++) {
    CSSElement currentSelector=css[e];
    checkSelector(currentSelector,element,htmlC,className,id,nextNestedSelectors,nextSiblingSelectors);
  }
  if (nestedSelectors != null) {
    for (Enumeration e=nestedSelectors.elements(); e.hasMoreElements(); ) {
      CSSElement currentSelector=(CSSElement)e.nextElement();
      checkSelector(currentSelector,element,htmlC,className,id,nextNestedSelectors,nextSiblingSelectors);
    }
  }
  if ((!HTMLComponent.PROCESS_HTML_MP1_ONLY) && (siblingSelectors != null)) {
    for (Enumeration e=siblingSelectors.elements(); e.hasMoreElements(); ) {
      CSSElement currentSelector=(CSSElement)e.nextElement();
      checkSelector(currentSelector,element,htmlC,className,id,nextNestedSelectors,nextSiblingSelectors);
    }
  }
  if (nextNestedSelectors.size() == 0) {
    nextNestedSelectors=null;
  }
  if ((!HTMLComponent.PROCESS_HTML_MP1_ONLY) && (nextSiblingSelectors.size() == 0)) {
    nextSiblingSelectors=null;
  }
  applyStyleAttribute(element,htmlC);
  Vector curSiblingSelectors=null;
  for (int i=0; i < element.getNumChildren(); i++) {
    HTMLElement child=(HTMLElement)element.getChildAt(i);
    Vector v=applyCSS(child,htmlC,css,nextNestedSelectors,curSiblingSelectors);
    if (!child.isTextElement()) {
      curSiblingSelectors=v;
    }
  }
  return nextSiblingSelectors;
}

@Nullable private TcpDiscoveryNode resolveCoordinator(@Nullable Collection<TcpDiscoveryNode> filter){
synchronized (mux) {
    Collection<TcpDiscoveryNode> excluded=F.concat(false,failedNodes.keySet(),leavingNodes);
    if (!F.isEmpty(filter))     excluded=F.concat(false,excluded,filter);
    return ring.coordinator(excluded);
  }
}

public static String[] splitc(String src,String d){
  if ((d.length() == 0) || (src.length() == 0)) {
    return new String[]{src};
  }
  return splitc(src,d.toCharArray());
}

public int deflateString2ByteArray(byte[] input,int inputOffset,int inputLength,byte[] bytes){
  if (inputLength >= MIN_SIZE_FOR_DEFLATION) {
    deflater.setInput(input,inputOffset,inputLength);
    deflater.finish();
    int compressedDataLength=deflater.deflate(bytes);
    deflater.reset();
    return -compressedDataLength;
  }
 else {
    System.arraycopy(input,inputOffset,bytes,0,inputLength);
    return inputLength;
  }
}

private void doubleCapacity(){
  int p=head;
  int n=elements.length;
  int r=n - p;
  int newCapacity=n << 1;
  if (newCapacity < 0)   throw new IllegalStateException("Sorry, deque too big");
  Object[] a=new Object[newCapacity];
  System.arraycopy(elements,p,a,0,r);
  System.arraycopy(elements,0,a,r,p);
  elements=a;
  head=0;
  tail=n;
}

public Marker backTo(int idx) throws AMConsoleException {
  int size=trail.size();
  if (idx >= size) {
    throw new AMConsoleException("cannot be discard items in page trail");
  }
  for (int i=size - 1; i > idx; --i) {
    trail.remove(i);
  }
  return (Marker)trail.get(idx);
}

private static long copy(InputStream source,OutputStream sink) throws IOException {
  long nread=0L;
  byte[] buf=new byte[BUFFER_SIZE];
  int n;
  while ((n=source.read(buf)) > 0) {
    sink.write(buf,0,n);
    nread+=n;
  }
  return nread;
}

public byte[] pack(){
  if (entries.size() == 0)   return null;
  int entryLength=owner.getType().NODES_ENTRY_LENGTH;
  byte[] buffer=new byte[entries.size() * entryLength];
  int max_items=buffer.length / 26;
  int j=0;
  for (  KBucketEntry e : entries) {
    if (j >= max_items) {
      break;
    }
    PackUtil.PackBucketEntry(e,buffer,j * entryLength,owner.getType());
    j++;
  }
  return buffer;
}

public String toString(){
  StringBuffer sb=new StringBuffer("BasicUntrustedObjectAccessController{");
  for (int i=0; i < permissions.length; i++) {
    if (i > 0) {
      sb.append(", ");
    }
    sb.append(permissions[i]);
  }
  sb.append("}");
  return sb.toString();
}

public void testInvalidAfterClose() throws IOException {
  Path tempPath=createTempDir();
  Directory dir=getDirectory(tempPath);
  Lock l=dir.obtainLock("commit");
  l.close();
  expectThrows(AlreadyClosedException.class,null);
  dir.close();
}

public static GdsTypeRule excludes(String... excludedTypes){
  final Set<String> excludedTypesSet=new HashSet<>(Arrays.asList(excludedTypes));
  return new GdsTypeRule(not(isIn(excludedTypesSet)));
}

public final Set<String> aliases(){
  if (aliasSet != null)   return aliasSet;
  int n=aliases.length;
  HashSet<String> hs=new HashSet<String>(n);
  for (int i=0; i < n; i++)   hs.add(aliases[i]);
  aliasSet=Collections.unmodifiableSet(hs);
  return aliasSet;
}

public synchronized void unweave(ByteString id){
  if (woven.containsKey(id)) {
    removed.add(woven.remove(id));
  }
}

private static Map<String,VirtualFile> findSiblings(@Nullable VirtualFile directory,Project project,Set<VirtualFile> seen){
  if (directory == null) {
    return Collections.emptyMap();
  }
 else {
    if (seen.contains(directory)) {
      return findSiblings(null,project,seen);
    }
    seen.add(directory);
    VirtualFile settings=directory.findChild(SdkConstants.FN_SETTINGS_GRADLE);
    if (settings == null) {
      return findSiblings(directory.getParent(),project,seen);
    }
 else {
      return GradleModuleImporter.getSubProjects(settings,project);
    }
  }
}

public AuthorityKeyIdentifierStructure(X509Certificate certificate) throws CertificateParsingException {
  super(fromCertificate(certificate));
}

@Override public int hashCode(){
  return Arrays.hashCode(new ImmutablePair[]{(ImmutablePair)first,(ImmutablePair)second});
}

private static char[] zzUnpackCMap(String packed){
  char[] map=new char[0x10000];
  int i=0;
  int j=0;
  while (i < 184) {
    int count=packed.charAt(i++);
    char value=packed.charAt(i++);
    do     map[j++]=value;
 while (--count > 0);
  }
  return map;
}

@SuppressLint("Override") public static String replaceUnicodeDigits(String number){
  StringBuilder normalizedDigits=new StringBuilder(number.length());
  for (  char c : number.toCharArray()) {
    int digit=Character.digit(c,10);
    if (digit != -1) {
      normalizedDigits.append(digit);
    }
 else {
      normalizedDigits.append(c);
    }
  }
  return normalizedDigits.toString();
}

public String Frie_Name(String value){
  if (value == null || value.length() == 0)   return "";
  String retValue=value;
  String SQL="SELECT FRIE_Name(?) FROM DUAL";
  try {
    PreparedStatement pstmt=DB.prepareStatement(SQL,null);
    pstmt.setString(1,value);
    ResultSet rs=pstmt.executeQuery();
    if (rs.next())     retValue=rs.getString(1);
    rs.close();
    pstmt.close();
  }
 catch (  SQLException e) {
    log.log(Level.SEVERE,SQL,e);
  }
  return retValue;
}

public static boolean isCompressed(File file){
  InputStream fis=null;
  try {
    if (file.exists()) {
      fis=new FileInputStream(file);
      int mag1=fis.read();
      int mag2=fis.read();
      fis.close();
      return selectCompressionProvider(mag1,mag2) != null;
    }
  }
 catch (  IOException e) {
    LOG.log(Level.FINEST,"Error while checking if file " + file + " is compressed",e);
    return false;
  }
 finally {
    SafeClose.close(fis);
  }
  return false;
}

@Override public int readInt(String filePath){
  FileChannel fileChannel=updateCache(filePath);
  ByteBuffer byteBffer=read(fileChannel,CarbonCommonConstants.INT_SIZE_IN_BYTE);
  return byteBffer.getInt();
}

private synchronized void closeOutputStreamQuietly(){
  if (!mClosed) {
    try {
      mOutputStream.close();
      reportDecodedSizeIfApplicable();
    }
 catch (    IOException e) {
      CLog.writeToConsole(mNetworkPeerManager,Console.MessageLevel.ERROR,Console.MessageSource.NETWORK,"Could not close the output stream" + e);
    }
 finally {
      mClosed=true;
    }
  }
}

public void bind(String address,ServiceRefAmp linkService){
  _linkServiceMap.put(address,linkService);
  _serviceCloseList.add(linkService);
}

public boolean mightHaveMultiFontMetrics(){
  return fontConfig != null;
}

private static boolean checkOffset(String value,int offset,char expected){
  return (offset < value.length()) && (value.charAt(offset) == expected);
}

void addSplit(String splitPath){
  String[] splits=splitPath.split("\\|");
  for (  String split : splits) {
    split=split.trim();
    if (split.startsWith("//"))     throw new RuntimeException("split cannot start with '//': " + split);
    if (split.length() == 0)     continue;
    addField(split,split,false,true);
  }
}

public void toLatLon(double v0,double h0){
  final double GX=0.216507961908834992;
  final double GY=-0.134633014879368199;
  final double A=0.151646645621077297;
  final double Q=-0.294355056616412800;
  final double Q2=0.0866448993556515751;
  final double EPSILON=.0000001;
  double v=(double)v0;
  double h=(double)h0;
  double t1=(v - TRANSV) / RADIUS;
  double t2=(h - TRANSH) / RADIUS;
  double vhat=ROTC * t2 - ROTS * t1;
  double hhat=ROTS * t2 + ROTC * t1;
  double e=Math.cos(Math.sqrt(vhat * vhat + hhat * hhat));
  double w=Math.cos(Math.sqrt(vhat * vhat + (hhat - 0.4) * (hhat - 0.4)));
  double fx=EY * w - WY * e;
  double fy=EX * w - WX * e;
  double b=fx * GX + fy * GY;
  double c=fx * fx + fy * fy - Q2;
  double disc=b * b - A * c;
  double x, y, z, delta;
  if (Math.abs(disc) < EPSILON) {
    z=b / A;
    x=(GX * z - fx) / Q;
    y=(fy - GY * z) / Q;
  }
 else {
    delta=Math.sqrt(disc);
    z=(b + delta) / A;
    x=(GX * z - fx) / Q;
    y=(fy - GY * z) / Q;
    if (vhat * (PX * x + PY * y + PZ * z) < 0) {
      z=(b - delta) / A;
      x=(GX * z - fx) / Q;
      y=(fy - GY * z) / Q;
    }
  }
  double lat=Math.asin(z);
  final double[] bi={1.00567724920722457,-0.00344230425560210245,0.000713971534527667990,-0.0000777240053499279217,0.00000673180367053244284,-0.000000742595338885741395,0.0000000905058919926194134};
  double lat2=lat * lat;
  double earthlat=lat * (bi[0] + lat2 * (bi[1] + lat2 * (bi[2] + lat2 * (bi[3] + lat2 * (bi[4] + lat2 * (bi[5] + lat2 * (bi[6])))))));
  earthlat=Math.toDegrees(earthlat);
  double lon=Math.toDegrees(Math.atan2(x,y));
  double earthlon=lon + 52.0;
  this.resultLat=earthlat;
  this.resultLon=-earthlon;
}

public void sortArray(T[] d,Comparator<T> c){
  this.data=d;
  this.comp=c;
  int len=Math.max((int)(100 * Math.log(d.length)),TEMP_SIZE);
  len=Math.min(d.length,len);
  @SuppressWarnings("unchecked") T[] t=(T[])new Object[len];
  this.temp=t;
  mergeSort(0,d.length - 1);
}

public static void closeQuietly(Closeable closeable){
  if (closeable != null) {
    try {
      closeable.close();
    }
 catch (    RuntimeException rethrown) {
      throw rethrown;
    }
catch (    Exception ignored) {
    }
  }
}

public void cacheUnit(UnitInterface unit){
  allUnits.add(unit);
}

public Component findByName(String name,Component rootComponent){
  Component c=(Component)rootComponent.getClientProperty("%" + name + "%");
  if (c == null) {
    Container newRoot=getRootAncestor(rootComponent);
    if (newRoot != null && rootComponent != newRoot) {
      return findByName(name,newRoot);
    }
  }
  return c;
}

protected void fetchMetadata() throws IOException {
  remaining=period;
  int size=in.read();
  if (size < 1)   return;
  size<<=4;
  if (mbuffer.length < size) {
    mbuffer=null;
    mbuffer=new byte[size];
    Log.d(LOG,"Enlarged metadata buffer to " + size + " bytes");
  }
  size=readFully(mbuffer,0,size);
  for (int i=0; i < size; i++) {
    if (mbuffer[i] == 0) {
      size=i;
      break;
    }
  }
  String s;
  try {
    s=new String(mbuffer,0,size,characterEncoding);
  }
 catch (  Exception e) {
    Log.e(LOG,"Cannot convert bytes to String");
    return;
  }
  Log.d(LOG,"Metadata string: " + s);
  parseMetadata(s);
}

public void startElement(){
  nss.pushContext();
  inCollectingMode=true;
}

private V replaceNode(Object key,V value,Object cv){
  int hash=hash((K)key);
  for (Node<K,V>[] tab=table; ; ) {
    Node<K,V> f;
    int n, i, fh;
    if (tab == null || (n=tab.length) == 0 || (f=tabAt(tab,i=(n - 1) & hash)) == null) {
      break;
    }
 else     if ((fh=f.hash) == MOVED) {
      tab=helpTransfer(tab,f);
    }
 else {
      V oldVal=null;
      boolean validated=false;
synchronized (f) {
        if (tabAt(tab,i) == f) {
          if (fh >= 0) {
            validated=true;
            for (Node<K,V> e=f, pred=null; ; ) {
              if (e.hash == hash && isEqual((K)key,e.key)) {
                V ev=e.val;
                if (cv == null || cv == ev || (ev != null && cv.equals(ev))) {
                  oldVal=ev;
                  if (value != null) {
                    e.val=value;
                  }
 else                   if (pred != null) {
                    pred.next=e.next;
                  }
 else {
                    setTabAt(tab,i,e.next);
                  }
                }
                break;
              }
              pred=e;
              if ((e=e.next) == null) {
                break;
              }
            }
          }
 else           if (f instanceof TreeBin) {
            validated=true;
            TreeBin<K,V> t=(TreeBin<K,V>)f;
            TreeNode<K,V> r, p;
            if ((r=t.root) != null && (p=r.findTreeNode(hash,key,null)) != null) {
              V pv=p.val;
              if (cv == null || cv == pv || (pv != null && cv.equals(pv))) {
                oldVal=pv;
                if (value != null) {
                  p.val=value;
                }
 else                 if (t.removeTreeNode(p)) {
                  setTabAt(tab,i,untreeify(t.first));
                }
              }
            }
          }
        }
      }
      if (validated) {
        if (oldVal != null) {
          if (value == null) {
            addCount(-1L,-1);
          }
          return oldVal;
        }
        break;
      }
    }
  }
  return null;
}

public final void removeHelperText(@NonNull final CharSequence helperText){
  ensureNotNull(helperText,"The helper text may not be null");
  ensureNotEmpty(helperText,"The helper text may not be empty");
  helperTexts.remove(helperText);
  verifyPasswordStrength();
}

public final synchronized int maxPV(){
  if (computerPlayer == null)   return 1;
  return computerPlayer.getMaxPV();
}

private void displaySimple(PrintStream output){
  output.println("First-Order Effects");
  for (int j=0; j < P; j++) {
    double[] a0=new double[N];
    double[] a1=new double[N];
    double[] a2=new double[N];
    for (int i=0; i < N; i++) {
      a0[i]=A[i];
      a1[i]=C_A[i][j];
      a2[i]=B[i];
    }
    double value=computeFirstOrder(a0,a1,a2,N);
    output.print(value < 0 ? 0.0 : value);
    if (j < P - 1) {
      output.print('\t');
    }
  }
  output.println();
  output.println("Total-Order Effects");
  for (int j=0; j < P; j++) {
    double[] a0=new double[N];
    double[] a1=new double[N];
    double[] a2=new double[N];
    for (int i=0; i < N; i++) {
      a0[i]=A[i];
      a1[i]=C_A[i][j];
      a2[i]=B[i];
    }
    double value=computeTotalOrder(a0,a1,a2,N);
    output.print(value < 0 ? 0.0 : value);
    if (j < P - 1) {
      output.print('\t');
    }
  }
  output.println();
}

public Object remove(int index){
  RangeCheck(index);
  modCount++;
  Object oldValue=elementData[index];
  int numMoved=size - index - 1;
  if (numMoved > 0)   System.arraycopy(elementData,index + 1,elementData,index,numMoved);
  elementData[--size]=null;
  return oldValue;
}

public String readMatchingFlags(String text){
  clear();
  if (text.startsWith(PM_SEPARATOR)) {
    final StringTokenizer tok=new StringTokenizer(text,PM_SEPARATOR);
    while (tok.hasMoreTokens()) {
      final String flag=tok.nextToken();
      if (flag.equals(PM_TYPE_MATCH)) {
        typeMatching=true;
      }
 else       if (flag.equals(PM_EXACT_MATCH)) {
        exactMatching=true;
      }
 else       if (flag.equals(PM_SIMILAR_MATCH)) {
        similarMatching=true;
      }
 else       if (flag.equals(PM_ICASE_MATCH)) {
        caseInsensitive=true;
      }
 else       if (flag.equals(PM_JOKER_MATCH)) {
        jokerMatching=true;
      }
 else {
        break;
      }
      text=text.substring(flag.length() + 1);
    }
    if (isAnyFlagSet()) {
      text=text.substring(1);
    }
  }
  return text;
}

private TinyPlanetImage createFinalTinyPlanet(){
  mResultLock.lock();
  try {
    mResultBitmap.recycle();
    mResultBitmap=null;
    mSourceBitmap.recycle();
    mSourceBitmap=null;
  }
  finally {
    mResultLock.unlock();
  }
  Bitmap sourceBitmap=createPaddedSourceImage(mSourceImageUri,false);
  int width=sourceBitmap.getWidth();
  int height=sourceBitmap.getHeight();
  int outputSize=width / 2;
  Bitmap resultBitmap=Bitmap.createBitmap(outputSize,outputSize,Bitmap.Config.ARGB_8888);
  TinyPlanetNative.process(sourceBitmap,width,height,resultBitmap,outputSize,mCurrentZoom,mCurrentAngle);
  sourceBitmap.recycle();
  sourceBitmap=null;
  ByteArrayOutputStream jpeg=new ByteArrayOutputStream();
  resultBitmap.compress(CompressFormat.JPEG,100,jpeg);
  return new TinyPlanetImage(addExif(jpeg.toByteArray()),outputSize);
}

private static int NewFloatArray(JNIEnvironment env,int length){
  if (traceJNI)   VM.sysWrite("JNI called: NewFloatArray  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    float[] newArray=new float[length];
    return env.pushJNIRef(newArray);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
    return 0;
  }
}

static int createShader(String resource,int type) throws IOException {
  return createShader(resource,type,null);
}

public Model validateNodeAgainstShape(Dataset dataset,URI shapesGraphURI,Node focusNode,Node shape,Resource minSeverity,Predicate<SHConstraint> constraintFilter,Function<RDFNode,String> labelFunction,ProgressMonitor monitor){
  Model results=JenaUtil.createMemoryModel();
  Model oldResults=getCurrentResultsModel();
  setCurrentResultsModel(results);
  addResourceViolations(dataset,shapesGraphURI,focusNode,shape,SHACLUtil.getAllConstraintProperties(true),minSeverity,constraintFilter,results,labelFunction,monitor);
  setCurrentResultsModel(oldResults);
  return results;
}

@Override public VolatileImage createBackBuffer(WComponentPeer peer){
  Component target=(Component)peer.getTarget();
  return new SunVolatileImage(target,target.getWidth(),target.getHeight(),Boolean.TRUE);
}

public void test_singleResourceLocking_highConcurrency100() throws Exception {
  Properties properties=new Properties();
  properties.setProperty(TestOptions.NTHREADS,"100");
  properties.setProperty(TestOptions.NTASKS,"1000");
  properties.setProperty(TestOptions.NRESOURCES,"100");
  properties.setProperty(TestOptions.MIN_LOCKS,"1");
  properties.setProperty(TestOptions.MAX_LOCKS,"1");
  properties.setProperty(TestOptions.PREDECLARE_LOCKS,"false");
  properties.setProperty(TestOptions.SORT_LOCK_REQUESTS,"false");
  doComparisonTest(properties);
}

public void push(final double value){
  long bits=Double.doubleToLongBits(value);
  if (bits == 0L || bits == 0x3ff0000000000000L) {
    mv.visitInsn(Opcodes.DCONST_0 + (int)value);
  }
 else {
    mv.visitLdcInsn(value);
  }
}

protected abstract void assignResourceRequests();

public synchronized void add(int position,AbstractOption option){
  AbstractOption search=getByName(option.getName());
  if (search != null) {
    LOG.warn("Trying to add an option with an existing name... option not added! Please consult the plugin maintainer!");
  }
 else {
    List<AbstractOption> oldOptions=new ArrayList<AbstractOption>(options);
    options.add(position,option);
    option.setCollection(this);
    List<AbstractOption> newOptions=getOptions();
    fireIndexedPropertyChange(PROP_OPTIONS,position,oldOptions,newOptions);
  }
}

public boolean writeHeader(OutputStream os){
  try {
    writeInt(os,CACHE_MAGIC);
    writeString(os,key);
    writeString(os,etag == null ? "" : etag);
    writeLong(os,serverDate);
    writeLong(os,lastModified);
    writeLong(os,ttl);
    writeLong(os,softTtl);
    writeStringStringMap(responseHeaders,os);
    os.flush();
    return true;
  }
 catch (  IOException e) {
    VolleyLog.d("%s",e.toString());
    return false;
  }
}

public boolean visitingMethod(){
  return visitingMethod;
}

protected ByteArrayOutputStream parseBytes(ByteArrayOutputStream bos) throws IOException {
  int ch;
  for (ch=read(); ch >= 0 && ch != '<'; ch=read()) {
    int b1=ch;
    int b2=read();
    int b3=read();
    int b4=read();
    if (b4 != '=') {
      int chunk=((base64Decode[b1] << 18) + (base64Decode[b2] << 12) + (base64Decode[b3] << 6)+ (base64Decode[b4]));
      bos.write(chunk >> 16);
      bos.write(chunk >> 8);
      bos.write(chunk);
    }
 else     if (b3 != '=') {
      int chunk=((base64Decode[b1] << 12) + (base64Decode[b2] << 6) + (base64Decode[b3]));
      bos.write(chunk >> 8);
      bos.write(chunk);
    }
 else {
      int chunk=((base64Decode[b1] << 6) + (base64Decode[b2]));
      bos.write(chunk);
    }
  }
  if (ch == '<')   peek=ch;
  return bos;
}

private void writeAttribute(java.lang.String prefix,java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (xmlWriter.getPrefix(namespace) == null) {
    xmlWriter.writeNamespace(prefix,namespace);
    xmlWriter.setPrefix(prefix,namespace);
  }
  xmlWriter.writeAttribute(namespace,attName,attValue);
}

public static void startUploadActivityForResult(Activity activity,Account account,int requestCode){
  Intent action=new Intent(activity,UploadFilesActivity.class);
  action.putExtra(EXTRA_ACCOUNT,(account));
  activity.startActivityForResult(action,requestCode);
}

public void addGenericAttr(GenericAttr g){
  generic.addElement(g);
}

public void stopTraceSession(int traceSessionId) throws SQLException {
  try (FbService service=attachServiceManager()){
    service.startServiceAction(getTraceSPB(service,isc_action_svc_trace_stop,traceSessionId));
    queueService(service);
  }
 catch (  IOException ioe) {
    throw new SQLException(ioe);
  }
}

String readSubstring(String source,int ofs){
  return readSubstring(source,ofs,source.length());
}

private synchronized boolean expungeStaleEntries(){
  if (this.size == 0)   return false;
  Object r;
  boolean result=false;
  while ((r=queue.poll()) != null) {
    result=true;
    SingleEntry e=(SingleEntry)r;
    this.size-=e.cleanupPkTable(this.table);
    this.nonDatedEntryCount-=e.cleanupSemiUniqueTable(this.nonDatedTable);
  }
  return result;
}

public void removeListener(AbstractSerialTransportListener listener){
  if (listener != null) {
    listeners.remove(listener);
  }
}

private String restoreNBTTags(String str,ArrayList<String> nbttags){
  int nbtidx=1;
  for (  String capture : nbttags) {
    str=str.replace("NBT" + nbtidx++,capture);
  }
  return str;
}

private void drawOffsets(final Graphics g){
  if (isEnabled()) {
    g.setColor(m_fontColorOffsets);
  }
 else {
    g.setColor(m_disabledColor != m_bgColorOffset ? m_disabledColor : Color.WHITE);
  }
  final int x=(-m_firstColumn * m_charWidth) + 10;
  final int bytesToDraw=getMaximumVisibleBytes();
  final String formatString=m_addressMode == AddressMode.BIT32 ? "%08X" : "%016X";
  for (int i=0; i < bytesToDraw; i+=m_bytesPerRow) {
    final long address=m_baseAddress + (m_firstRow * m_bytesPerRow) + i;
    final String offsetString=String.format(formatString,address);
    final int currentRow=i / m_bytesPerRow;
    g.drawString(offsetString,x,m_paddingTop + (currentRow * m_rowHeight));
  }
}

@Override public void writeExternal(ObjectOutput out) throws IOException {
  super.writeExternal(out);
  out.writeDouble(knnDistance);
}

public void touch(Date date){
  lastSeen=(Date)date.clone();
}

public void testPolyline() throws Exception {
  EsriLayer layer=new EsriLayer("Drawable Layer",SHAPE_TYPE_POLYLINE,2);
  DbfTableModel model=layer.getModel();
  model.setDecimalCount(0,(byte)0);
  model.setLength(0,(byte)20);
  model.setColumnName(0,"Column1");
  model.setType(0,(byte)DbfTableModel.TYPE_CHARACTER);
  model.setDecimalCount(1,(byte)3);
  model.setLength(1,(byte)20);
  model.setColumnName(1,"Column2");
  model.setType(1,(byte)DbfTableModel.TYPE_NUMERIC);
  addPolylineRecord1(layer);
  addPolylineRecord2(layer);
  addPolylineRecord3(layer);
  EsriGraphicList list=layer.getEsriGraphicList();
  ShpOutputStream pos=new ShpOutputStream(new FileOutputStream("polylinetest0.shp"));
  int[][] indexData=pos.writeGeometry(list);
  ShxOutputStream xos=new ShxOutputStream(new FileOutputStream("polylinetest0.shx"));
  xos.writeIndex(indexData,list.getType(),list.getExtents());
  DbfOutputStream dos=new DbfOutputStream(new FileOutputStream("polylinetest0.dbf"));
  dos.writeModel(model);
}

public static int random(int i,int j){
  return i + (int)(Math.random() * (j - i));
}

public void remove(String name){
  featureMap.remove(name);
}

private List<ColumnModel> findColumnsToAdd(){
  List<ColumnModel> columnsToAdd=new ArrayList<ColumnModel>();
  for (  ColumnModel columnModel : mTableModel.getColumnModels()) {
    String columnName=columnModel.getColumnName();
    if (!mTableModelDB.containsColumn(columnName)) {
      columnsToAdd.add(columnModel);
    }
  }
  return columnsToAdd;
}

@Override public Loader<Cursor> onCreateLoader(int id,Bundle args){
  Uri uri=FmRadioStation.Station.CONTENT_URI;
  String select=FmRadioStation.Station.COLUMN_STATION_TYPE + " IN (?, ?)";
  String order=FmRadioStation.Station.COLUMN_STATION_TYPE + "," + FmRadioStation.Station.COLUMN_STATION_FREQ;
  CursorLoader cursorLoader=new CursorLoader(this,uri,FmRadioStation.COLUMNS,select,new String[]{String.valueOf(FmRadioStation.STATION_TYPE_FAVORITE),String.valueOf(FmRadioStation.STATION_TYPE_SEARCHED)},order);
  return cursorLoader;
}

protected Map<String,Object> convertNamedListToMap(NamedList<?> args){
  Map<String,Object> argsMap=new LinkedHashMap<>();
  if (args != null) {
    for (    Map.Entry<String,?> entry : args) {
      argsMap.put(entry.getKey(),entry.getValue());
    }
  }
  return argsMap;
}

@Override public boolean equals(final Object other){
  if (this == other) {
    return true;
  }
 else   if (other == null) {
    return false;
  }
 else   if (other instanceof ExpressionMatcher) {
    final ExpressionMatcher o=(ExpressionMatcher)other;
    if (typeMatching != o.typeMatching) {
      return false;
    }
 else     if (exactMatching != o.exactMatching) {
      return false;
    }
 else     if (similarMatching != o.similarMatching) {
      return false;
    }
 else     if (caseInsensitive != o.caseInsensitive) {
      return false;
    }
 else {
      return (jokerMatching == o.jokerMatching);
    }
  }
 else {
    return false;
  }
}

public boolean hasCapabilities(List<String> capabilities){
  String[] arr=new String[capabilities.size()];
  capabilities.toArray(arr);
  return hasCapabilities(arr);
}

private static double euclideanNorm(double vector[]){
  int n=vector.length;
  if (n < 1) {
    return 0;
  }
  if (n == 1) {
    return Math.abs(vector[0]);
  }
  double scale=0;
  double sum=1;
  for (int i=0; i < n; i++) {
    if (vector[i] != 0) {
      double abs=Math.abs(vector[i]);
      if (scale < abs) {
        double t=scale / abs;
        sum=1 + sum * (t * t);
        scale=abs;
      }
 else {
        double t=abs / scale;
        sum+=t * t;
      }
    }
  }
  return scale * Math.sqrt(sum);
}

public static void assignBucketsToPartitions(Region<?,?> region){
  PartitionedRegion pr=isPartitionedCheck(region);
  RecoveryLock lock=null;
  try {
    lock=pr.getRecoveryLock();
    lock.lock();
    for (int i=0; i < getNumberOfBuckets(pr); i++) {
      pr.createBucket(i,0,null);
    }
  }
  finally {
    if (lock != null) {
      lock.unlock();
    }
  }
}

public synchronized void addListener(Listener l){
  listeners.add(l);
}

public boolean endsWith(final String str){
  if (str == null) {
    return false;
  }
  final int len=str.length();
  if (len == 0) {
    return true;
  }
  if (len > size) {
    return false;
  }
  int pos=size - len;
  for (int i=0; i < len; i++, pos++) {
    if (buffer[pos] != str.charAt(i)) {
      return false;
    }
  }
  return true;
}

public boolean find(int start){
  if (start < 0 || start > input.length()) {
    throw new IndexOutOfBoundsException("start=" + start + "; length="+ input.length());
  }
synchronized (this) {
    matchFound=findImpl(address,input,start,matchOffsets);
  }
  return matchFound;
}

public void applyPattern(String pattern){
  this.pattern=pattern;
  if (patternTokens != null) {
    patternTokens.clear();
    patternTokens=null;
  }
}

public int numberOfReplies(final Resource comment){
  final Iterator<Resource> children=comment.listChildren();
  int size=0;
  while (children.hasNext()) {
    children.next();
    size++;
  }
  return size;
}

public static <T>String toString(TreeDef<T> treeDef,T root,Function<? super T,String> toString,String indent){
  StringBuilder builder=new StringBuilder();
  builder.append(toString.apply(root));
  builder.append("\n");
  toStringHelper(treeDef,root,toString,indent,builder,indent);
  return builder.toString();
}

public void cleanUpRemoteSessions(){
synchronized (remoteSessionSet) {
    for (Iterator iter=remoteSessionSet.iterator(); iter.hasNext(); ) {
      SessionID sessionID=(SessionID)iter.next();
      String hostServer=null;
      try {
        hostServer=getCurrentHostServer(sessionID);
      }
 catch (      Exception ex) {
      }
      if (!serverConfig.isLocalServer(hostServer)) {
        iter.remove();
      }
    }
  }
}

public boolean columnExistsCaseSensitive(DatabaseMetaData dbMetaData,String tableName,String columnName) throws SQLException {
  ResultSet rsTables=dbMetaData.getColumns(null,null,tableName,columnName);
  try {
    return rsTables.next();
  }
  finally {
    closeJDBCResultSet(rsTables);
  }
}

public void actionPerformed(ActionEvent e){
  Caret c=textArea.getCaret();
  if (c.getDot() != c.getMark()) {
    return;
  }
  RSyntaxDocument doc=(RSyntaxDocument)textArea.getDocument();
  doc.readLock();
  try {
    removeHighlights();
    int line=textArea.getCaretLineNumber();
    Token tokenList=textArea.getTokenListForLine(line);
    int dot=c.getDot();
    Token t=RSyntaxUtilities.getTokenAtOffset(tokenList,dot);
    if (t == null || !isValidType(t) || isNonWordChar(t)) {
      dot--;
      try {
        if (dot >= textArea.getLineStartOffset(line)) {
          t=RSyntaxUtilities.getTokenAtOffset(tokenList,dot);
        }
      }
 catch (      BadLocationException ble) {
        ble.printStackTrace();
      }
    }
    if (t != null && isValidType(t) && !isNonWordChar(t)) {
      RSyntaxTextAreaHighlighter h=(RSyntaxTextAreaHighlighter)textArea.getHighlighter();
      String lexeme=t.getLexeme();
      int type=t.type;
      for (int i=0; i < textArea.getLineCount(); i++) {
        Token temp=textArea.getTokenListForLine(i);
        while (temp != null && temp.isPaintable()) {
          if (temp.is(type,lexeme)) {
            try {
              int end=temp.offset + temp.textCount;
              Object tag=h.addMarkedOccurrenceHighlight(temp.offset,end,p);
              tags.add(tag);
            }
 catch (            BadLocationException ble) {
              ble.printStackTrace();
            }
          }
          temp=temp.getNextToken();
        }
      }
    }
  }
  finally {
    doc.readUnlock();
  }
  textArea.fireMarkedOccurrencesChanged();
}

public int read() throws IOException {
  if (!buf.hasRemaining()) {
    return -1;
  }
  return buf.get() & 0xFF;
}

public void charactersRaw(char ch[],int start,int length) throws org.xml.sax.SAXException {
  if (isOutsideDocElem() && XMLCharacterRecognizer.isWhiteSpace(ch,start,length))   return;
  String s=new String(ch,start,length);
  append(m_doc.createProcessingInstruction("xslt-next-is-raw","formatter-to-dom"));
  append(m_doc.createTextNode(s));
}

private void handleRelease(){
  float speed=Math.max(dragHelper.getDragSpeed(),animationSpeed);
  if (getTopMargin() > initialMargin || (dragHelper.getDragSpeed() > animationSpeed && dragHelper.getDistance() > 0) || (getDeviceType(getContext()) == DeviceType.TABLET && isMaximized() && getTopMargin() > minMargin)) {
    animateHideView(parentHeight - getTopMargin(),speed,new DecelerateInterpolator(),true);
  }
 else {
    animateShowView(-(getTopMargin() - minMargin),speed,new DecelerateInterpolator());
  }
}

private String normalizeTypeValue(String type){
  if (INSERT.equals(type))   return INSERT;
  if (REMOVE.equals(type))   return REMOVE;
  return null;
}

@Override public LogSeqNum writeToLog(){
  List<Constant> rec=buildRecord();
  return logMgr.append(rec.toArray(new Constant[rec.size()]));
}

public static double gaussian(){
  double r, x, y;
  do {
    x=uniform(-1.0,1.0);
    y=uniform(-1.0,1.0);
    r=x * x + y * y;
  }
 while (r >= 1 || r == 0);
  return x * Math.sqrt(-2 * Math.log(r) / r);
}

public void doneWithParameters(){
  if (info.parameterCount == VAR_ARGS) {
    int len=varArgs.size();
    checkParameterCount(len);
    args=new Expression[len];
    varArgs.toArray(args);
    varArgs=null;
  }
 else {
    int len=args.length;
    if (len > 0 && args[len - 1] == null) {
      throw DbException.get(ErrorCode.INVALID_PARAMETER_COUNT_2,info.name,"" + len);
    }
  }
}

public void removeAllX509Certificates(){
  x509Certificates.clear();
}

public void updateCurrentState(String whatHappened){
  UndoEvent undoEvent=createUndoEventForCurrentState(whatHappened);
  if (undoEvent != null && undoStack != null) {
    undoStack.setTheWayThingsAre(undoEvent);
  }
}

@Override protected void onSizeChanged(int w,int h,int oldw,int oldh){
  super.onSizeChanged(w,h,oldw,oldh);
  setupBounds(w,h);
  setupPaints();
  invalidate();
}

protected void extendElement(Element e){
}

public Object[] toArray(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    Object[] a=new Object[count];
    int k=0;
    for (Node<E> p=first; p != null; p=p.next)     a[k++]=p.item;
    return a;
  }
  finally {
    lock.unlock();
  }
}

public DTMAxisIterator cloneIterator(){
  _isRestartable=false;
  try {
    final PrecedingIterator clone=(PrecedingIterator)super.clone();
    final int[] stackCopy=new int[_stack.length];
    System.arraycopy(_stack,0,stackCopy,0,_stack.length);
    clone._stack=stackCopy;
    return clone;
  }
 catch (  CloneNotSupportedException e) {
    throw new DTMException(XMLMessages.createXMLMessage(XMLErrorResources.ER_ITERATOR_CLONE_NOT_SUPPORTED,null));
  }
}

private String readResponseFromServer(HttpURLConnection urlConnection) throws RequestFailureException {
  try {
    InputStreamReader reader=new InputStreamReader(urlConnection.getInputStream());
    BufferedReader in=new BufferedReader(reader);
    try {
      StringBuilder response=new StringBuilder();
      for (String line=in.readLine(); line != null; line=in.readLine()) {
        response.append(line);
      }
      checkServerResponseCode(urlConnection);
      return response.toString();
    }
  finally {
      in.close();
    }
  }
 catch (  IOException e) {
    throw new RequestFailureException("Failed when reading response from server: ",e);
  }
}

private void readObject(ObjectInputStream s) throws IOException, ClassNotFoundException {
  s.defaultReadObject();
  if (name == null) {
    throw new NullPointerException();
  }
  if (nodeType == null) {
    throw new NullPointerException();
  }
}

public int contains(ValueStoreBase vsb){
  final Vector values=vsb.fValues;
  final int size1=values.size();
  if (fFieldCount <= 1) {
    for (int i=0; i < size1; ++i) {
      short val=vsb.getValueTypeAt(i);
      if (!valueTypeContains(val) || !fValues.contains(values.elementAt(i))) {
        return i;
      }
 else       if (val == XSConstants.LIST_DT || val == XSConstants.LISTOFUNION_DT) {
        ShortList list1=vsb.getItemValueTypeAt(i);
        if (!itemValueTypeContains(list1)) {
          return i;
        }
      }
    }
  }
 else {
    final int size2=fValues.size();
    OUTER:     for (int i=0; i < size1; i+=fFieldCount) {
      INNER:       for (int j=0; j < size2; j+=fFieldCount) {
        for (int k=0; k < fFieldCount; ++k) {
          final Object value1=values.elementAt(i + k);
          final Object value2=fValues.elementAt(j + k);
          final short valueType1=vsb.getValueTypeAt(i + k);
          final short valueType2=getValueTypeAt(j + k);
          if (value1 != value2 && (valueType1 != valueType2 || value1 == null || !value1.equals(value2))) {
            continue INNER;
          }
 else           if (valueType1 == XSConstants.LIST_DT || valueType1 == XSConstants.LISTOFUNION_DT) {
            ShortList list1=vsb.getItemValueTypeAt(i + k);
            ShortList list2=getItemValueTypeAt(j + k);
            if (list1 == null || list2 == null || !list1.equals(list2)) {
              continue INNER;
            }
          }
        }
        continue OUTER;
      }
      return i;
    }
  }
  return -1;
}

public boolean isSupportedOption(String name){
  boolean isSupported=false;
  for (Iterator i=mandatoryOptions.iterator(); i.hasNext() && !isSupported; ) {
    String opt=(String)i.next();
    isSupported=opt.equals(name);
  }
  for (Iterator i=optionalOptions.iterator(); i.hasNext() && !isSupported; ) {
    String opt=(String)i.next();
    isSupported=opt.equals(name);
  }
  return isSupported;
}

private boolean areAllNodeEnded(){
  if (protocol != null && protocol.hasProtocol()) {
    final Collection<ProtocolNode> protocolNodes=protocolNodeParticipantMap.values();
    if (protocolNodes.isEmpty()) {
      return false;
    }
    for (    final ProtocolNode node : protocolNodes) {
      if (!(node != null && node.isTerminal())) {
        return false;
      }
    }
    return true;
  }
  final Collection<FIPAMessage> finalMsgs=noProtocolNodeParticipantMap.values();
  if (finalMsgs.isEmpty()) {
    return false;
  }
  for (  final FIPAMessage finalMsg : finalMsgs) {
    if (finalMsg.getPerformative() != FIPAConstants.Performatives.END_CONVERSATION) {
      return false;
    }
  }
  return true;
}

public StringBuilder encodeBody(StringBuilder retval){
  return retval.append(optionTag);
}

public void addLiteralResultAttribute(AVT avt){
  if (null == m_avts)   m_avts=new ArrayList();
  m_avts.add(avt);
}

protected void moveSelectionToFirstPosition(){
  if (selectionTable.getSelectionCount() == 0) {
    return;
  }
  int index=0;
  for (  final TableItem tableItem : selectionTable.getSelection()) {
    final DLItem item=(DLItem)tableItem.getData();
    selection.remove(item);
    selection.add(index++,item);
  }
  redrawTables();
  selectionTable.select(0,index - 1);
  selectionTable.forceFocus();
}

private void itemsArrayToCombinedBuffer(T[] itemsArray){
  final int extra=2;
  minValue_=itemsArray[0];
  maxValue_=itemsArray[1];
  System.arraycopy(itemsArray,extra,combinedBuffer_,0,baseBufferCount_);
  long bits=bitPattern_;
  if (bits > 0) {
    int index=extra + baseBufferCount_;
    for (int level=0; bits != 0L; level++, bits>>>=1) {
      if ((bits & 1L) > 0L) {
        System.arraycopy(itemsArray,index,combinedBuffer_,(2 + level) * k_,k_);
        index+=k_;
      }
    }
  }
}

public SQLQuery(Class<T> type,String sqlExpression,QueryResultType queryResultType,Object... parameters){
  this(sqlExpression,type.getName(),null,queryResultType,parameters);
}

public void bob(MowzieModelRenderer box,float speed,float degree,boolean bounce,float f,float f1){
  float bob=(float)(Math.sin(f * speed) * f1 * degree - f1 * degree);
  if (bounce)   bob=(float)-Math.abs((Math.sin(f * speed) * f1 * degree));
  box.rotationPointY+=bob;
}

private static void rejectUnsupportedOptions(Properties p) throws SQLFeatureNotSupportedException {
  if (p.containsKey(DataSourceFactory.JDBC_ROLE_NAME)) {
    throw new SQLFeatureNotSupportedException("The " + DataSourceFactory.JDBC_ROLE_NAME + " property is not supported by H2");
  }
  if (p.containsKey(DataSourceFactory.JDBC_DATASOURCE_NAME)) {
    throw new SQLFeatureNotSupportedException("The " + DataSourceFactory.JDBC_DATASOURCE_NAME + " property is not supported by H2");
  }
}

public IOUtils(){
  super();
}

private int readAnnotationValue(int v,final char[] buf,final String name,final AnnotationVisitor av){
  int i;
  if (av == null) {
switch (b[v] & 0xFF) {
case 'e':
      return v + 5;
case '@':
    return readAnnotationValues(v + 3,buf,true,null);
case '[':
  return readAnnotationValues(v + 1,buf,false,null);
default :
return v + 3;
}
}
switch (b[v++] & 0xFF) {
case 'I':
case 'J':
case 'F':
case 'D':
av.visit(name,readConst(readUnsignedShort(v),buf));
v+=2;
break;
case 'B':
av.visit(name,(byte)readInt(items[readUnsignedShort(v)]));
v+=2;
break;
case 'Z':
av.visit(name,readInt(items[readUnsignedShort(v)]) == 0 ? Boolean.FALSE : Boolean.TRUE);
v+=2;
break;
case 'S':
av.visit(name,(short)readInt(items[readUnsignedShort(v)]));
v+=2;
break;
case 'C':
av.visit(name,(char)readInt(items[readUnsignedShort(v)]));
v+=2;
break;
case 's':
av.visit(name,readUTF8(v,buf));
v+=2;
break;
case 'e':
av.visitEnum(name,readUTF8(v,buf),readUTF8(v + 2,buf));
v+=4;
break;
case 'c':
av.visit(name,Type.getType(readUTF8(v,buf)));
v+=2;
break;
case '@':
v=readAnnotationValues(v + 2,buf,true,av.visitAnnotation(name,readUTF8(v,buf)));
break;
case '[':
int size=readUnsignedShort(v);
v+=2;
if (size == 0) {
return readAnnotationValues(v - 2,buf,false,av.visitArray(name));
}
switch (this.b[v++] & 0xFF) {
case 'B':
byte[] bv=new byte[size];
for (i=0; i < size; i++) {
bv[i]=(byte)readInt(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,bv);
--v;
break;
case 'Z':
boolean[] zv=new boolean[size];
for (i=0; i < size; i++) {
zv[i]=readInt(items[readUnsignedShort(v)]) != 0;
v+=3;
}
av.visit(name,zv);
--v;
break;
case 'S':
short[] sv=new short[size];
for (i=0; i < size; i++) {
sv[i]=(short)readInt(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,sv);
--v;
break;
case 'C':
char[] cv=new char[size];
for (i=0; i < size; i++) {
cv[i]=(char)readInt(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,cv);
--v;
break;
case 'I':
int[] iv=new int[size];
for (i=0; i < size; i++) {
iv[i]=readInt(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,iv);
--v;
break;
case 'J':
long[] lv=new long[size];
for (i=0; i < size; i++) {
lv[i]=readLong(items[readUnsignedShort(v)]);
v+=3;
}
av.visit(name,lv);
--v;
break;
case 'F':
float[] fv=new float[size];
for (i=0; i < size; i++) {
fv[i]=Float.intBitsToFloat(readInt(items[readUnsignedShort(v)]));
v+=3;
}
av.visit(name,fv);
--v;
break;
case 'D':
double[] dv=new double[size];
for (i=0; i < size; i++) {
dv[i]=Double.longBitsToDouble(readLong(items[readUnsignedShort(v)]));
v+=3;
}
av.visit(name,dv);
--v;
break;
default :
v=readAnnotationValues(v - 3,buf,false,av.visitArray(name));
}
}
return v;
}

private void decrementWorkerCount(){
  do {
  }
 while (!compareAndDecrementWorkerCount(ctl.get()));
}

public static float buildFloat(int mant,int exp){
  if (exp < -125 || mant == 0) {
    return 0.0f;
  }
  if (exp >= 128) {
    return (mant > 0) ? Float.POSITIVE_INFINITY : Float.NEGATIVE_INFINITY;
  }
  if (exp == 0) {
    return mant;
  }
  if (mant >= (1 << 26)) {
    mant++;
  }
  return (float)((exp > 0) ? mant * pow10[exp] : mant / pow10[-exp]);
}

public void clearValues(){
  mDataSets.clear();
  notifyDataChanged();
}

public boolean hasModeSupport(){
  return isAvailable() && mCapabilities.intersects(mAllModes);
}

public void runTest() throws Throwable {
  Document doc;
  NodeList genderList;
  Node genderNode;
  EntityReference entRef;
  Element entElement;
  CharacterData entElementText;
  int nodeType;
  doc=(Document)load("staff",true);
  genderList=doc.getElementsByTagName("gender");
  genderNode=genderList.item(2);
  entRef=(EntityReference)genderNode.getFirstChild();
  assertNotNull("entRefNotNull",entRef);
  nodeType=(int)entRef.getNodeType();
  if (equals(1,nodeType)) {
    entRef=doc.createEntityReference("ent4");
    assertNotNull("createdEntRefNotNull",entRef);
  }
  entElement=(Element)entRef.getFirstChild();
  assertNotNull("entElementNotNull",entElement);
  entElementText=(CharacterData)entElement.getFirstChild();
  assertNotNull("entElementTextNotNull",entElementText);
{
    boolean success=false;
    try {
      entElementText.setNodeValue("newValue");
    }
 catch (    DOMException ex) {
      success=(ex.code == DOMException.NO_MODIFICATION_ALLOWED_ERR);
    }
    assertTrue("throw_NO_MODIFICATION_ALLOWED_ERR",success);
  }
}

public void testConstrStringWithExponentWithPoint2(){
  String a="238096483923847545735673567457356356789029578490276878.7678287e-214";
  int aScale=221;
  BigInteger bA=new BigInteger("2380964839238475457356735674573563567890295784902768787678287");
  BigDecimal aNumber=new BigDecimal(a);
  assertEquals("incorrect value",bA,aNumber.unscaledValue());
  assertEquals("incorrect scale",aScale,aNumber.scale());
}

public static void updateItemInDatabase(Context context,final ItemInfo item){
  final ContentValues values=new ContentValues();
  item.onAddToDatabase(context,values);
  updateItemInDatabaseHelper(context,values,item,"updateItemInDatabase");
}

@Override public String graph() throws Exception {
  StringBuffer text=new StringBuffer();
  text.append("digraph CobwebTree {\n");
  m_cobwebTree.graphTree(text);
  text.append("}\n");
  return text.toString();
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> result=enumToVector(super.listOptions());
  result.addElement(new Option("\tThe number of attributes (default " + defaultNumAttributes() + ").","a",1,"-a <num>"));
  result.addElement(new Option("\tClass Flag, if set, the cluster is listed in extra attribute.","c",0,"-c"));
  result.addElement(new Option("\tThe indices for boolean attributes.","b",1,"-b <range>"));
  result.addElement(new Option("\tThe indices for nominal attributes.","m",1,"-m <range>"));
  return result.elements();
}

public synchronized Reference<? extends T> remove(long timeoutMillis) throws InterruptedException {
  if (timeoutMillis < 0) {
    throw new IllegalArgumentException("timeout < 0: " + timeoutMillis);
  }
  if (head != null) {
    return poll();
  }
  if (timeoutMillis == 0 || (timeoutMillis > Long.MAX_VALUE / NANOS_PER_MILLI)) {
    do {
      wait(0);
    }
 while (head == null);
    return poll();
  }
  long nanosToWait=timeoutMillis * NANOS_PER_MILLI;
  int timeoutNanos=0;
  long startTime=System.nanoTime();
  while (true) {
    wait(timeoutMillis,timeoutNanos);
    if (head != null) {
      break;
    }
    long nanosElapsed=System.nanoTime() - startTime;
    long nanosRemaining=nanosToWait - nanosElapsed;
    if (nanosRemaining <= 0) {
      break;
    }
    timeoutMillis=nanosRemaining / NANOS_PER_MILLI;
    timeoutNanos=(int)(nanosRemaining - timeoutMillis * NANOS_PER_MILLI);
  }
  return poll();
}

public PathImpl lookupImpl(String userPath,Map<String,Object> newAttributes,boolean isAllowRoot){
  if (userPath == null) {
    return lookupImpl(getPath(),newAttributes,isAllowRoot);
  }
  if (!isAllowRoot) {
    return schemeWalk(userPath,newAttributes,userPath,0);
  }
  String scheme=scanScheme(userPath);
  if (scheme == null) {
    return schemeWalk(userPath,newAttributes,userPath,0);
  }
  PathImpl path;
  SchemeMap schemeMap=_schemeMap;
  if (isWindows()) {
    int length=scheme.length();
    char ch;
    if (length == 1 && ('a' <= (ch=scheme.charAt(0)) && ch <= 'z' || 'A' <= ch && ch <= 'Z')) {
      userPath=Character.toLowerCase(ch) + userPath.substring(1);
      if (_isTestWindows)       return schemeWalk(userPath,newAttributes,"/" + userPath,0);
      path=schemeMap.get("file");
      if (path != null)       return path.schemeWalk(userPath,newAttributes,"/" + userPath,0);
 else       return schemeWalk(userPath,newAttributes,"/" + userPath,0);
    }
  }
  path=schemeMap.get(scheme);
  if (path == null) {
    return schemeWalk(userPath,newAttributes,userPath,0);
  }
 else {
    return path.schemeWalk(userPath,newAttributes,userPath,scheme.length() + 1);
  }
}

public void addColor(int color){
  if (mColors == null)   mColors=new ArrayList<Integer>();
  mColors.add(color);
}

static Integer readRuleID(final SubstringReader reader) throws DecodeException {
  int length=0;
  reader.skipWhitespaces();
  reader.mark();
  try {
    while (reader.read() != ' ') {
      length++;
    }
    if (length == 0) {
      throw DecodeException.error(ERR_ATTR_SYNTAX_RULE_ID_NO_VALUE1.get(reader.pos() - 1));
    }
    reader.reset();
    final String ruleID=reader.read(length);
    try {
      return Integer.valueOf(ruleID);
    }
 catch (    final NumberFormatException e) {
      throw DecodeException.error(ERR_ATTR_SYNTAX_RULE_ID_INVALID1.get(ruleID));
    }
  }
 catch (  final StringIndexOutOfBoundsException e) {
    throw DecodeException.error(ERR_ATTR_SYNTAX_TRUNCATED_VALUE1.get());
  }
}

public void removeIndex(IIndex index){
  if (index != null) {
    indices.remove(index);
  }
}

private AttributeActionSet processAttributeSection(ModeUsage modeUsage,String ns,IntSet indexSet,Attributes attributes) throws SAXException {
  Mode mode=modeUsage.getMode(currentSection.context);
  AttributeActionSet actions=mode.getAttributeActions(ns);
  if (actions.getReject() && !attributeNamespaceRejected) {
    attributeNamespaceRejected=true;
    if (eh != null)     eh.error(new SAXParseException(localizer.message("reject_attribute",ns),locator));
  }
  Schema[] schemas=actions.getSchemas();
  for (int j=0; j < schemas.length; j++) {
    if (attributeSchemas.contains(schemas[j]))     continue;
    attributeSchemas.add(schemas[j]);
    if (filteredAttributes == null)     filteredAttributes=filterAttributes(indexSet,attributes);
    validateAttributes(schemas[j],filteredAttributes);
  }
  return actions;
}

public void initialize(Context context,HapticFeedbackController hapticFeedbackController,int initialHoursOfDay,int initialMinutes,boolean is24HourMode){
  if (mTimeInitialized) {
    Log.e(TAG,"Time has already been initialized.");
    return;
  }
  mHapticFeedbackController=hapticFeedbackController;
  mIs24HourMode=is24HourMode;
  mHideAmPm=mAccessibilityManager.isTouchExplorationEnabled() ? true : mIs24HourMode;
  mCircleView.initialize(context,mHideAmPm);
  mCircleView.invalidate();
  if (!mHideAmPm) {
    mAmPmCirclesView.initialize(context,initialHoursOfDay < 12 ? AM : PM);
    mAmPmCirclesView.invalidate();
  }
  Resources res=context.getResources();
  int[] hours={12,1,2,3,4,5,6,7,8,9,10,11};
  int[] hours_24={0,13,14,15,16,17,18,19,20,21,22,23};
  int[] minutes={0,5,10,15,20,25,30,35,40,45,50,55};
  String[] hoursTexts=new String[12];
  String[] innerHoursTexts=new String[12];
  String[] minutesTexts=new String[12];
  for (int i=0; i < 12; i++) {
    hoursTexts[i]=is24HourMode ? String.format("%02d",hours_24[i]) : String.format("%d",hours[i]);
    innerHoursTexts[i]=String.format("%d",hours[i]);
    minutesTexts[i]=String.format("%02d",minutes[i]);
  }
  mHourRadialTextsView.initialize(res,hoursTexts,(is24HourMode ? innerHoursTexts : null),mHideAmPm,true);
  mHourRadialTextsView.invalidate();
  mMinuteRadialTextsView.initialize(res,minutesTexts,null,mHideAmPm,false);
  mMinuteRadialTextsView.invalidate();
  setValueForItem(HOUR_INDEX,initialHoursOfDay);
  setValueForItem(MINUTE_INDEX,initialMinutes);
  int hourDegrees=(initialHoursOfDay % 12) * HOUR_VALUE_TO_DEGREES_STEP_SIZE;
  mHourRadialSelectorView.initialize(context,mHideAmPm,is24HourMode,true,hourDegrees,isHourInnerCircle(initialHoursOfDay));
  int minuteDegrees=initialMinutes * MINUTE_VALUE_TO_DEGREES_STEP_SIZE;
  mMinuteRadialSelectorView.initialize(context,mHideAmPm,false,false,minuteDegrees,false);
  mTimeInitialized=true;
}

@Override public double conf(double totalWeight,double delta){
  return inverseNormal(1 - delta / 2) / (2 * Math.sqrt(totalWeight));
}

@Override public final int readUnsignedByte() throws IOException {
  return dis.readUnsignedByte();
}

public synchronized static void ensureSecurityManager(@SuppressWarnings("UnusedParameters") String[] args){
  SecurityPolicyLoader.load(SystemBoot.class,"policy.all");
  System.setSecurityManager(new RMISecurityManager());
}

@Override public Object clone() throws CloneNotSupportedException {
  return super.clone();
}

public String ridgeTipText(){
  return "The value of the Ridge parameter.";
}

public void updateEnableStateSwingItems(){
  if (SwingUtilities.isEventDispatchThread())   super.updateEnableState();
}

public void reset(){
  System.arraycopy(IV,0,cbcV,0,IV.length);
  Arrays.fill(cbcNextV,(byte)0);
  cipher.reset();
}

protected final boolean _loadToHaveAtLeast(int minAvailable) throws IOException {
  if (_inputStream == null) {
    return false;
  }
  int amount=_inputEnd - _inputPtr;
  if (amount > 0 && _inputPtr > 0) {
    _currInputProcessed+=_inputPtr;
    System.arraycopy(_inputBuffer,_inputPtr,_inputBuffer,0,amount);
    _inputEnd=amount;
  }
 else {
    _inputEnd=0;
  }
  _inputPtr=0;
  while (_inputEnd < minAvailable) {
    int count=_inputStream.read(_inputBuffer,_inputEnd,_inputBuffer.length - _inputEnd);
    if (count < 1) {
      _closeInput();
      if (count == 0) {
        throw new IOException("InputStream.read() returned 0 characters when trying to read " + amount + " bytes");
      }
      return false;
    }
    _inputEnd+=count;
  }
  return true;
}

public DataTypeParser register(int jdbcType,String grammar){
  Objects.requireNonNull(grammar,"the data type grammar must be specified");
  DataTypePattern pattern=parser.parse(jdbcType,grammar);
  pattern.forEachFirstToken(null);
  return this;
}

public void close() throws GenericDataSourceException {
  if (_manualTX) {
    if (Debug.verboseOn())     Debug.logVerbose("SQLProcessor:close() calling commit : _manualTX=" + _manualTX,module);
    commit();
  }
  _sql=null;
  if (_rs != null) {
    try {
      _rs.close();
      if (Debug.verboseOn())       Debug.logVerbose("SQLProcessor:close() result close : _manualTX=" + _manualTX,module);
    }
 catch (    SQLException sqle) {
      Debug.logWarning(sqle.getMessage(),module);
    }
    _rs=null;
  }
  if (_ps != null) {
    try {
      _ps.close();
      if (Debug.verboseOn())       Debug.logVerbose("SQLProcessor:close() preparedStatement close : _manualTX=" + _manualTX,module);
    }
 catch (    SQLException sqle) {
      Debug.logWarning(sqle.getMessage(),module);
    }
    _ps=null;
  }
  if ((_connection != null) && _bDeleteConnection) {
    try {
      _connection.close();
      if (Debug.verboseOn())       Debug.logVerbose("SQLProcessor:close() connection close : _manualTX=" + _manualTX,module);
    }
 catch (    SQLException sqle) {
      Debug.logWarning(sqle.getMessage(),module);
    }
    _connection=null;
  }
}

private DefaultMutableTreeNode copy(TreeNode node){
  return new DefaultMutableTreeNode(node);
}

public static void agentmain(String args,Instrumentation inst) throws Exception {
  logger.info("Executing agentmain of JavaAgent");
  checkTransformerState();
  inst.addTransformer(transformer,true);
  instrumentation=inst;
}

public byte[] data(){
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  try {
    toData(bos);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  return bos.toByteArray();
}

@SafeVarargs public static <T>ReactiveSeq<T> of(final T... elements){
  final ReversingArraySpliterator<T> array=new ReversingArraySpliterator<T>(elements,false,0);
  return StreamUtils.reactiveSeq(StreamSupport.stream(array,false),Optional.ofNullable(array));
}

private void decodeLtp(LongTermPrediction ltp,int maxSfb){
  ltp.lag=br.read(11);
  ltp.coef=ltp_coef[br.read(3)];
  for (int sfb=0; sfb < Math.min(maxSfb,MAX_LTP_LONG_SFB); sfb++) {
    ltp.used[sfb]=br.readBool();
  }
}

public static <T>List<T> instantiateAll(String[] classes,ClassLoader classLoader){
  List<T> clazzes=new ArrayList<T>();
  for (  String clazz : classes) {
    if (StringUtils.hasLength(clazz)) {
      try {
        clazzes.add(ClassUtils.<T>instantiate(clazz,classLoader));
      }
 catch (      Exception e) {
        throw new CassandraMigrationException("Unable to instantiate class: " + clazz,e);
      }
    }
  }
  return clazzes;
}

static void clearInstanceCache(){
synchronized (INSTANCE_CACHE) {
    INSTANCE_CACHE.clear();
  }
}

public static <E extends Enum<E> & BitmapableEnum>EnumSet<E> toEnumSet(Class<E> type,int bitmap){
  if (type == null)   throw new NullPointerException("Given enum type must not be null");
  EnumSet<E> s=EnumSet.noneOf(type);
  int allSetBitmap=0;
  for (  E element : type.getEnumConstants()) {
    if (Integer.bitCount(element.getValue()) != 1) {
      String msg=String.format("The %s (%x) constant of the " + "enum %s is supposed to represent a bitmap entry but " + "has more than one bit set.",element.toString(),element.getValue(),type.getName());
      throw new IllegalArgumentException(msg);
    }
    allSetBitmap|=element.getValue();
    if ((bitmap & element.getValue()) != 0)     s.add(element);
  }
  if (((~allSetBitmap) & bitmap) != 0) {
    String msg=String.format("The bitmap %x for enum %s has " + "bits set that are presented by any enum constant",bitmap,type.getName());
    throw new IllegalArgumentException(msg);
  }
  return s;
}

public UndirectedGraphNode cloneGraphB(UndirectedGraphNode node){
  Map<Integer,UndirectedGraphNode> map=new HashMap<>();
  return dfs(node,map);
}

public synchronized void notifySessionBorrowed(){
  if (LOGGER.isTraceEnabled())   LOGGER.logTrace(this + ": notifySessionBorrowed");
  currentContext=new TransactionContext(resource,xaResource);
  allContexts.add(currentContext);
  closed=false;
}

@Override public synchronized void close() throws SQLException {
  try {
    debugCodeCall("close");
    if (session == null) {
      return;
    }
    CloseWatcher.unregister(watcher);
    session.cancel();
    if (executingStatement != null) {
      try {
        executingStatement.cancel();
      }
 catch (      NullPointerException e) {
      }
    }
synchronized (session) {
      try {
        if (!session.isClosed()) {
          try {
            if (session.hasPendingTransaction()) {
              if (!session.isReconnectNeeded(true)) {
                try {
                  rollbackInternal();
                }
 catch (                DbException e) {
                  if (e.getErrorCode() != ErrorCode.CONNECTION_BROKEN_1) {
                    throw e;
                  }
                }
              }
              session.afterWriting();
            }
            closePreparedCommands();
          }
  finally {
            session.close();
          }
        }
      }
  finally {
        session=null;
      }
    }
  }
 catch (  Exception e) {
    throw logAndConvert(e);
  }
}

public void testPlusMathContextNegative(){
  String a="-92948782094488478231212478987482988429808779810457634781384756794987";
  int aScale=49;
  int precision=46;
  RoundingMode rm=RoundingMode.CEILING;
  MathContext mc=new MathContext(precision,rm);
  String c="-9294878209448847823.121247898748298842980877981";
  int cScale=27;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal res=aNumber.plus(mc);
  assertEquals("incorrect value",c,res.toString());
  assertEquals("incorrect scale",cScale,res.scale());
}

public static WKTGeometry createEmpty(WKTType wktType){
  WKTGeometry wktGeometry=new WKTGeometry();
  wktGeometry.setGeometryType(wktType);
  return wktGeometry;
}

public PeerLookupTask createPeerLookup(byte[] info_hash){
  if (!isRunning()) {
    return null;
  }
  Key id=new Key(info_hash);
  RPCServer srv=serverManager.getRandomActiveServer(false);
  if (srv == null)   return null;
  PeerLookupTask lookupTask=new PeerLookupTask(srv,node,id);
  return lookupTask;
}

public void addChild(Node... nodes){
  for (  Node node : nodes) {
    node.detachFromParent();
    node.parentNode=this;
    initChildNodes(node);
    childNodes.add(node);
  }
  reindexChildrenOnAdd(nodes.length);
}

public static void writeStringASCII(ByteBuf stream,String str) throws UnsupportedEncodingException {
  final byte[] bytes=str.getBytes("US-ASCII");
  stream.writeInt(str.length());
  stream.writeBytes(bytes);
}

private void needNewBuffer(int newcount){
  if (currentBufferIndex < buffers.size() - 1) {
    filledBufferSum+=currentBuffer.length;
    currentBufferIndex++;
    currentBuffer=buffers.get(currentBufferIndex);
  }
 else {
    int newBufferSize;
    if (currentBuffer == null) {
      newBufferSize=newcount;
      filledBufferSum=0;
    }
 else {
      newBufferSize=Math.max(currentBuffer.length << 1,newcount - filledBufferSum);
      filledBufferSum+=currentBuffer.length;
    }
    currentBufferIndex++;
    currentBuffer=new byte[newBufferSize];
    buffers.add(currentBuffer);
  }
}

public void testWrite3() throws Exception {
  byte[] data=new byte[]{-127,-100,-50,-10,-1,0,1,10,50,127};
  TestOutputStream tos=new TestOutputStream();
  CipherOutputStream cos=new CipherOutputStream(tos,new NullCipher());
  for (int i=0; i < data.length; i++) {
    cos.write(data,i,1);
  }
  cos.flush();
  byte[] result=tos.toByteArray();
  if (!Arrays.equals(result,data)) {
    fail("CipherOutputStream wrote incorrect data.");
  }
}

public void addListener(UpdateManagerListener listener){
  listeners.add(listener);
}

@Override public void onDetach(){
synchronized (mThread) {
    mProgressBar=null;
    mReady=false;
    mThread.notify();
  }
  super.onDetach();
}

public void outputSource(int module,int line,String s){
  StringBuilder sb=new StringBuilder();
  appendSource(sb,module,line,s,true);
  out(sb.toString());
}

SortedMap<String,String> properties();

public static String suppressWhiteSpace(String str){
  int len=str.length();
  StringBuilder sb=new StringBuilder(len);
  char c;
  char buffer=0;
  for (int i=0; i < len; i++) {
    c=str.charAt(i);
    if (c == '\n' || c == '\r')     buffer='\n';
 else     if (isWhiteSpace(c)) {
      if (buffer == 0)       buffer=c;
    }
 else {
      if (buffer != 0) {
        sb.append(buffer);
        buffer=0;
      }
      sb.append(c);
    }
  }
  if (buffer != 0)   sb.append(buffer);
  return sb.toString();
}

private Node<K,V> findPredecessor(Comparable<? super K> key){
  if (key == null)   throw new NullPointerException();
  for (; ; ) {
    Index<K,V> q=head;
    Index<K,V> r=q.right;
    for (; ; ) {
      if (r != null) {
        Node<K,V> n=r.node;
        K k=n.key;
        if (n.value == null) {
          if (!q.unlink(r))           break;
          r=q.right;
          continue;
        }
        if (key.compareTo(k) > 0) {
          q=r;
          r=r.right;
          continue;
        }
      }
      Index<K,V> d=q.down;
      if (d != null) {
        q=d;
        r=d.right;
      }
 else       return q.node;
    }
  }
}

public static String readFully(Reader reader) throws IOException {
  try {
    StringWriter writer=new StringWriter();
    char[] buffer=new char[1024];
    int count;
    while ((count=reader.read(buffer)) != -1) {
      writer.write(buffer,0,count);
    }
    return writer.toString();
  }
  finally {
    reader.close();
  }
}

protected ConnectionStateSSLv3(SSLSessionImpl session){
  try {
    CipherSuite cipherSuite=session.cipherSuite;
    boolean is_exportabe=cipherSuite.isExportable();
    hash_size=cipherSuite.getMACLength();
    int key_size=(is_exportabe) ? cipherSuite.keyMaterial : cipherSuite.expandedKeyMaterial;
    int iv_size=cipherSuite.ivSize;
    block_size=cipherSuite.getBlockSize();
    String algName=cipherSuite.getBulkEncryptionAlgorithm();
    String hashName=cipherSuite.getHashName();
    if (logger != null) {
      logger.println("ConnectionStateSSLv3.create:");
      logger.println("  cipher suite name: " + session.getCipherSuite());
      logger.println("  encryption alg name: " + algName);
      logger.println("  hash alg name: " + hashName);
      logger.println("  hash size: " + hash_size);
      logger.println("  block size: " + block_size);
      logger.println("  IV size:" + iv_size);
      logger.println("  key size: " + key_size);
    }
    byte[] clientRandom=session.clientRandom;
    byte[] serverRandom=session.serverRandom;
    byte[] key_block=new byte[2 * hash_size + 2 * key_size + 2 * iv_size];
    byte[] seed=new byte[clientRandom.length + serverRandom.length];
    System.arraycopy(serverRandom,0,seed,0,serverRandom.length);
    System.arraycopy(clientRandom,0,seed,serverRandom.length,clientRandom.length);
    PRF.computePRF_SSLv3(key_block,session.master_secret,seed);
    byte[] client_mac_secret=new byte[hash_size];
    byte[] server_mac_secret=new byte[hash_size];
    byte[] client_key=new byte[key_size];
    byte[] server_key=new byte[key_size];
    boolean is_client=!session.isServer;
    System.arraycopy(key_block,0,client_mac_secret,0,hash_size);
    System.arraycopy(key_block,hash_size,server_mac_secret,0,hash_size);
    System.arraycopy(key_block,2 * hash_size,client_key,0,key_size);
    System.arraycopy(key_block,2 * hash_size + key_size,server_key,0,key_size);
    IvParameterSpec clientIV=null;
    IvParameterSpec serverIV=null;
    if (is_exportabe) {
      if (logger != null) {
        logger.println("ConnectionStateSSLv3: is_exportable");
      }
      MessageDigest md5=MessageDigest.getInstance("MD5");
      md5.update(client_key);
      md5.update(clientRandom);
      md5.update(serverRandom);
      client_key=md5.digest();
      md5.update(server_key);
      md5.update(serverRandom);
      md5.update(clientRandom);
      server_key=md5.digest();
      key_size=cipherSuite.expandedKeyMaterial;
      if (block_size != 0) {
        md5.update(clientRandom);
        md5.update(serverRandom);
        clientIV=new IvParameterSpec(md5.digest(),0,iv_size);
        md5.update(serverRandom);
        md5.update(clientRandom);
        serverIV=new IvParameterSpec(md5.digest(),0,iv_size);
      }
    }
 else     if (block_size != 0) {
      clientIV=new IvParameterSpec(key_block,2 * hash_size + 2 * key_size,iv_size);
      serverIV=new IvParameterSpec(key_block,2 * hash_size + 2 * key_size + iv_size,iv_size);
    }
    if (logger != null) {
      logger.println("is exportable: " + is_exportabe);
      logger.println("master_secret");
      logger.print(session.master_secret);
      logger.println("client_random");
      logger.print(clientRandom);
      logger.println("server_random");
      logger.print(serverRandom);
      logger.println("client_mac_secret");
      logger.print(client_mac_secret);
      logger.println("server_mac_secret");
      logger.print(server_mac_secret);
      logger.println("client_key");
      logger.print(client_key,0,key_size);
      logger.println("server_key");
      logger.print(server_key,0,key_size);
      if (clientIV != null) {
        logger.println("client_iv");
        logger.print(clientIV.getIV());
        logger.println("server_iv");
        logger.print(serverIV.getIV());
      }
 else {
        logger.println("no IV.");
      }
    }
    if (algName == null) {
      encCipher=new NullCipher();
      decCipher=new NullCipher();
    }
 else {
      encCipher=Cipher.getInstance(algName);
      decCipher=Cipher.getInstance(algName);
      if (is_client) {
        encCipher.init(Cipher.ENCRYPT_MODE,new SecretKeySpec(client_key,0,key_size,algName),clientIV);
        decCipher.init(Cipher.DECRYPT_MODE,new SecretKeySpec(server_key,0,key_size,algName),serverIV);
      }
 else {
        encCipher.init(Cipher.ENCRYPT_MODE,new SecretKeySpec(server_key,0,key_size,algName),serverIV);
        decCipher.init(Cipher.DECRYPT_MODE,new SecretKeySpec(client_key,0,key_size,algName),clientIV);
      }
    }
    messageDigest=MessageDigest.getInstance(hashName);
    if (is_client) {
      mac_write_secret=client_mac_secret;
      mac_read_secret=server_mac_secret;
    }
 else {
      mac_write_secret=server_mac_secret;
      mac_read_secret=client_mac_secret;
    }
    if (hashName.equals("MD5")) {
      pad_1=SSLv3Constants.MD5pad1;
      pad_2=SSLv3Constants.MD5pad2;
    }
 else {
      pad_1=SSLv3Constants.SHApad1;
      pad_2=SSLv3Constants.SHApad2;
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    throw new AlertException(AlertProtocol.INTERNAL_ERROR,new SSLProtocolException("Error during computation of security parameters"));
  }
}

public static void cleanDirectory(File directory) throws IOException {
  if (!directory.exists()) {
    String message=directory + " does not exist";
    throw new IllegalArgumentException(message);
  }
  if (!directory.isDirectory()) {
    String message=directory + " is not a directory";
    throw new IllegalArgumentException(message);
  }
  File[] files=directory.listFiles();
  if (files == null) {
    throw new IOException("Failed to list contents of " + directory);
  }
  IOException exception=null;
  for (  File file : files) {
    try {
      forceDelete(file);
    }
 catch (    IOException ioe) {
      exception=ioe;
    }
  }
  if (null != exception) {
    throw exception;
  }
}

public void notIdle(){
  if (idleTimeoutMsec.get() > 0)   lastActionMsec.set(System.currentTimeMillis());
}

public static byte[] gzip(final String input){
  final ByteArrayOutputStream baos=new FastByteArrayOutputStream();
  GZIPOutputStream gzos=null;
  try {
    gzos=new GZIPOutputStream(baos);
    gzos.write(input.getBytes("UTF-8"));
  }
 catch (  final IOException e) {
    MainUtil.handleError(e);
  }
 finally {
    if (gzos != null) {
      try {
        gzos.close();
      }
 catch (      final IOException ignore) {
      }
    }
  }
  return baos.toByteArray();
}

protected AbstractCompositeServiceBuilder(){
}

@Override public void endDocument() throws SAXException {
  if (resource != null) {
    resource.addAllResource(jsVector);
    for (    Object object : resource.getResourceSet()) {
      Resource r=(Resource)object;
      if (r.getResource() != null) {
        parser.setResource((Resource)r);
        parser.run();
        jsSet.add(parser.getResult());
      }
    }
  }
}

public void addMethodToDisplay(MethodIdent methodIdent){
  methods.add(methodIdent);
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> result=new Vector<Option>();
  result.addElement(new Option("\tThe Gamma parameter.\n" + "\t(default: 0.01)","G",1,"-G <num>"));
  result.addAll(Collections.list(super.listOptions()));
  return result.elements();
}

private void selectConnectingEdges(List<DisplayNode> displayNodes){
  if (!isAllowNodeEdgeSelection()) {
    return;
  }
  Component[] components=getComponents();
  for (  Component comp : components) {
    if (comp instanceof IDisplayEdge) {
      IDisplayEdge graphEdge=(IDisplayEdge)comp;
      DisplayNode node1=graphEdge.getComp1();
      DisplayNode node2=graphEdge.getComp2();
      if (node1 instanceof GraphNodeError) {
        continue;
      }
      if (node2 instanceof GraphNodeError) {
        continue;
      }
      if (node2 != null) {
        boolean selected=displayNodes.contains(node1) && displayNodes.contains(node2);
        graphEdge.setSelected(selected);
      }
    }
  }
}

public static String classNameOnly(String typeName){
  String dotted=descriptorToDot(typeName);
  int start=dotted.lastIndexOf(".");
  if (start < 0) {
    return dotted;
  }
 else {
    return dotted.substring(start + 1);
  }
}

public HyperGraph search(){
  long startTime=System.currentTimeMillis();
  Future future=new Future(chart);
  stacks=new ArrayList<>();
  stacks.add(null);
  ComputeNodeResult result=new ComputeNodeResult(this.featureFunctions,Hypothesis.BEGIN_RULE,null,-1,1,null,this.sentence);
  Stack firstStack=new Stack(sentence,config);
  firstStack.add(new Hypothesis(result.getDPStates(),future.Full()));
  stacks.add(firstStack);
  for (int source_words=2; source_words <= sentence.length(); ++source_words) {
    Stack targetStack=new Stack(sentence,config);
    stacks.add(targetStack);
    for (int phrase_length=1; phrase_length <= Math.min(source_words - 1,chart.MaxSourcePhraseLength()); phrase_length++) {
      int from_stack=source_words - phrase_length;
      Stack tailStack=stacks.get(from_stack);
      LOG.debug("WORDS {} MAX {} (STACK {} phrase_length {})",source_words,chart.MaxSourcePhraseLength(),from_stack,phrase_length);
      for (      Coverage coverage : tailStack.getCoverages()) {
        ArrayList<Hypothesis> hypotheses=tailStack.get(coverage);
        int begin=coverage.firstZero();
        int last_end=Math.min(coverage.firstZero() + config.reordering_limit,chart.SentenceLength());
        int last_begin=(last_end > phrase_length) ? (last_end - phrase_length) : 0;
        for (begin=coverage.firstZero(); begin <= last_begin; begin++) {
          if (!coverage.compatible(begin,begin + phrase_length) || !permissible(coverage,begin,begin + phrase_length)) {
            continue;
          }
          if (begin == sentence.length() - 1 && source_words != sentence.length())           continue;
          PhraseNodes phrases=chart.getRange(begin,begin + phrase_length);
          if (phrases == null)           continue;
          LOG.debug("Applying {} target phrases over [{}, {}]",phrases.size(),begin,begin + phrase_length);
          float future_delta=future.Change(coverage,begin,begin + phrase_length);
          Candidate cand=new Candidate(featureFunctions,sentence,hypotheses,phrases,future_delta,new int[]{0,0});
          targetStack.addCandidate(cand);
        }
      }
    }
    targetStack.search();
  }
  LOG.info("Input {}: Search took {} seconds",sentence.id(),(System.currentTimeMillis() - startTime) / 1000.0f);
  return createGoalNode();
}

@Override public synchronized String toString(){
  final StringBuffer sbResult=new StringBuffer();
  sbResult.append("[");
  sbResult.append(getCredentialsStringRepresentation(proxyCred));
  sbResult.append(" | ");
  sbResult.append(getCredentialsStringRepresentation(credMap));
  sbResult.append(" | ");
  sbResult.append(getCookiesStringRepresentation(cookies));
  sbResult.append("]");
  final String strResult=sbResult.toString();
  return strResult;
}

public static List<LibraryLocation> gatherAllLibraries(String[] dirPaths){
  List<LibraryLocation> libraries=new ArrayList<LibraryLocation>();
  for (int i=0; i < dirPaths.length; i++) {
    File extDir=new File(dirPaths[i]);
    if (extDir.isDirectory()) {
      String[] names=extDir.list(fgArchiveFilter);
      if (names != null) {
        for (int j=0; j < names.length; j++) {
          File jar=new File(extDir,names[j]);
          if (jar.isFile()) {
            try {
              IPath libPath=new Path(jar.getCanonicalPath());
              IPath sourcePath=Path.EMPTY;
              IPath packageRoot=Path.EMPTY;
              URL javadocLocation=null;
              URL indexLocation=null;
              LibraryLocation library=new LibraryLocation(libPath,sourcePath,packageRoot,javadocLocation,indexLocation);
              libraries.add(library);
            }
 catch (            IOException e) {
              Launching.log(e);
            }
          }
        }
      }
    }
  }
  return libraries;
}

public void requestClose(){
  mLock.lock();
  try {
    if (mIsShutdown) {
      return;
    }
    mTargetState=TargetState.CLOSED;
    update();
  }
  finally {
    mLock.unlock();
  }
}

private void reserveOneDoc(){
  if (pendingNumDocs.incrementAndGet() > IndexWriter.getActualMaxDocs()) {
    pendingNumDocs.decrementAndGet();
    throw new IllegalArgumentException("number of documents in the index cannot exceed " + IndexWriter.getActualMaxDocs());
  }
}

public static void streamContentToBrowser(HttpServletResponse response,InputStream in,int length,String contentType,String fileName) throws IOException {
  setResponseBrowserProxyNoCache(response);
  response.setContentLength(length);
  if (contentType != null) {
    response.setContentType(contentType);
  }
  if (fileName != null) {
    response.setHeader("Content-Disposition","attachment;filename=\"" + fileName + "\"");
  }
  OutputStream out=response.getOutputStream();
  try {
    streamContent(out,in,length);
  }
 catch (  IOException e) {
    out.close();
    throw e;
  }
  out.flush();
  out.close();
}

@Override public String toString(){
  return toString(true);
}

private static boolean isValidMethodName(String methodName){
  return methodName.matches("^[a-zA-Z_$][a-zA-Z0-9_$]*$");
}

public static byte[] toUTF8(String s){
  byte[] result=new byte[utfLength(s)];
  int result_index=0;
  for (int i=0, n=s.length(); i < n; ++i) {
    char c=s.charAt(i);
    if (((!WRITE_PSEUDO_UTF8) || (c >= 0x0001)) && (c <= 0x007F)) {
      result[result_index++]=(byte)c;
    }
 else     if (c > 0x07FF) {
      result[result_index++]=(byte)(0xe0 | (byte)(c >> 12));
      result[result_index++]=(byte)(0x80 | ((c & 0xfc0) >> 6));
      result[result_index++]=(byte)(0x80 | (c & 0x3f));
    }
 else {
      result[result_index++]=(byte)(0xc0 | (byte)(c >> 6));
      result[result_index++]=(byte)(0x80 | (c & 0x3f));
    }
  }
  return result;
}

public void pln(Object o) throws IOException {
  p(o.toString());
  pln();
}

public void testReduceTask() throws Exception {
  HadoopJob gridJob=getHadoopJob(igfsScheme() + PATH_INPUT,igfsScheme() + PATH_OUTPUT);
  runTaskWithInput(gridJob,HadoopTaskType.REDUCE,0,"word1","5","word2","10");
  runTaskWithInput(gridJob,HadoopTaskType.REDUCE,1,"word3","7","word4","15");
  assertEquals("word1\t5\n" + "word2\t10\n",readAndSortFile(PATH_OUTPUT + "/_temporary/0/task_00000000-0000-0000-0000-000000000000_0000_r_000000/" + getOutputFileNamePrefix()+ "00000"));
  assertEquals("word3\t7\n" + "word4\t15\n",readAndSortFile(PATH_OUTPUT + "/_temporary/0/task_00000000-0000-0000-0000-000000000000_0000_r_000001/" + getOutputFileNamePrefix()+ "00001"));
}

public static double expm1(double value){
  if (USE_JDK_MATH) {
    return STRICT_MATH ? StrictMath.expm1(value) : Math.expm1(value);
  }
  if (Math.abs(value) < EXP_LO_DISTANCE_TO_ZERO) {
    int i=(int)(value * EXP_LO_INDEXING);
    double delta=value - i * (1.0 / EXP_LO_INDEXING);
    return expLoPosTab[i + EXP_LO_TAB_MID_INDEX] * (expLoNegTab[i + EXP_LO_TAB_MID_INDEX] + delta * (1 + delta * (1.0 / 2 + delta * (1.0 / 6 + delta * (1.0 / 24 + delta * (1.0 / 120))))));
  }
 else {
    return FastMath.exp(value) - 1;
  }
}

public void deleteConditional(Conditional c){
  deregister(c);
}

public static void parseModelToContentValues(Object model,ContentValues contentValues){
  if (contentValues.size() > 0)   contentValues.clear();
  Class<?> clazz=model.getClass();
  Field[] fields=clazz.getDeclaredFields();
  Class<?> fieldType=null;
  Object fieldVal=null;
  for (  Field field : fields) {
    try {
      if (field.isAccessible() == false)       field.setAccessible(true);
      Column column=field.getAnnotation(Column.class);
      fieldType=field.getType();
      fieldVal=field.get(model);
      if (column == null || fieldVal == null)       continue;
      if (fieldType.equals(int.class)) {
        contentValues.put(column.name(),field.getInt(model));
      }
 else       if (fieldType.equals(Integer.class)) {
        contentValues.put(column.name(),(Integer)field.get(model));
      }
 else       if (fieldType.equals(short.class)) {
        contentValues.put(column.name(),field.getShort(model));
      }
 else       if (fieldType.equals(Short.class)) {
        contentValues.put(column.name(),(Short)field.get(model));
      }
 else       if (fieldType.equals(long.class)) {
        contentValues.put(column.name(),field.getLong(model));
      }
 else       if (fieldType.equals(Long.class)) {
        contentValues.put(column.name(),(Long)field.get(model));
      }
 else       if (fieldType.equals(float.class)) {
        contentValues.put(column.name(),field.getFloat(model));
      }
 else       if (fieldType.equals(Float.class)) {
        contentValues.put(column.name(),(Float)field.get(model));
      }
 else       if (fieldType.equals(double.class)) {
        contentValues.put(column.name(),field.getDouble(model));
      }
 else       if (fieldType.equals(Double.class)) {
        contentValues.put(column.name(),(Double)field.get(model));
      }
 else       if (fieldType.equals(boolean.class)) {
        if (field.getBoolean(model) == true) {
          contentValues.put(column.name(),"1");
        }
 else {
          contentValues.put(column.name(),"0");
        }
      }
 else       if (fieldType.equals(Boolean.class)) {
        if ((Boolean)field.get(model) == true) {
          contentValues.put(column.name(),"1");
        }
 else {
          contentValues.put(column.name(),"0");
        }
      }
 else       if (fieldType.equals(String.class)) {
        contentValues.put(column.name(),(String)field.get(model));
      }
 else       if (fieldType.equals(byte[].class)) {
        contentValues.put(column.name(),(byte[])field.get(model));
      }
 else       if (fieldType.equals(Date.class)) {
        Date date=(Date)field.get(model);
        contentValues.put(column.name(),DateUtils.formatDate2Str(date));
      }
    }
 catch (    IllegalArgumentException e) {
      e.printStackTrace();
    }
catch (    IllegalAccessException e) {
      e.printStackTrace();
    }
  }
}

private void addBlockToWorklist(SsaBasicBlock ssaBlock){
  if (!executableBlocks.get(ssaBlock.getIndex())) {
    cfgWorklist.add(ssaBlock);
    executableBlocks.set(ssaBlock.getIndex());
  }
 else {
    cfgPhiWorklist.add(ssaBlock);
  }
}

private static boolean is32BitJvm(){
  Integer bits=Integer.getInteger("sun.arch.data.model");
  return bits != null && bits == 32;
}

public float angle(){
  return (float)Math.atan2(y(),x());
}

public static String formatNumber(double value,int numberOfDigits,boolean groupingCharacters){
  if (Double.isNaN(value)) {
    return "?";
  }
  int numberDigits=numberOfDigits;
  if (numberDigits < 0) {
    numberDigits=numberOfFractionDigits;
  }
  NUMBER_FORMAT.setMinimumFractionDigits(numberDigits);
  NUMBER_FORMAT.setMaximumFractionDigits(numberDigits);
  NUMBER_FORMAT.setGroupingUsed(groupingCharacters);
  return NUMBER_FORMAT.format(value);
}

private JPanel createLegendPanel(JPanel basePanel){
  final JPanel panel;
  if (basePanel != null) {
    basePanel.removeAll();
    basePanel.setLayout(new GridBagLayout());
    panel=basePanel;
  }
 else {
    panel=new JPanel(new GridBagLayout());
  }
  panel.setBorder(BorderFactory.createTitledBorder(I18n.tr("Legend")));
  GridBagConstraints gbc=new GridBagConstraints();
  gbc.anchor=GridBagConstraints.WEST;
  gbc.insets=new Insets(0,4,0,6);
  JCheckBox checkBox=new JCheckBox();
  checkBox.setSelected(true);
  panel.add(createIconLabel(checkBox),gbc);
  MultiLineLabel label=new MultiLineLabel(I18n.tr("Folder and subfolders are included in the Library."),true);
  GridBagConstraints labelGbc=new GridBagConstraints();
  labelGbc.anchor=GridBagConstraints.WEST;
  labelGbc.fill=GridBagConstraints.HORIZONTAL;
  labelGbc.gridwidth=GridBagConstraints.REMAINDER;
  labelGbc.gridx=1;
  labelGbc.weightx=1;
  panel.add(label,labelGbc);
  checkBox.setSelected(false);
  gbc.gridy=1;
  panel.add(createIconLabel(checkBox),gbc);
  label=new MultiLineLabel(I18n.tr("Folder is not included and no subfolders are included in the Library."),true);
  labelGbc.gridy=1;
  panel.add(label,labelGbc);
  checkBox.setIcon(partiallyIncludedIcon);
  gbc.gridy=2;
  gbc.insets=new Insets(0,6,0,0);
  panel.add(createIconLabel(checkBox),gbc);
  label=new MultiLineLabel(I18n.tr("Folder\'s files and some subfolders are included in the Library."),true);
  labelGbc.gridy=2;
  gbc.insets=null;
  panel.add(label,labelGbc);
  return panel;
}

private static boolean isTrashId(IgniteUuid id){
  if (id == null)   return false;
  UUID gid=id.globalId();
  return id.localId() == 0 && gid.getMostSignificantBits() == 0 && gid.getLeastSignificantBits() > 0 && gid.getLeastSignificantBits() <= TRASH_CONCURRENCY;
}

private void onTimeElementEnd() throws SAXException {
  try {
    timeMs=XML_DATE_TIME_FORMAT.parseMillis(content.trim());
  }
 catch (  IllegalArgumentException e) {
    throw new SAXException(createErrorMessage("Unable to parse time: " + content),e);
  }
}

public void addChangeListener(ChangeListener l){
  m_ChangeListeners.add(l);
}

public static boolean isClassPresent(String fullyQualifiedClassName){
  try {
    Class.forName(fullyQualifiedClassName);
    return true;
  }
 catch (  ClassNotFoundException e) {
    return false;
  }
}

void unlink(Node<E> p,Node<E> trail){
  p.setValue(null);
  trail.next=p.next;
  if (last == p)   last=trail;
  if (count.getAndDecrement() == capacity)   notFull.signal();
}

@TargetApi(Build.VERSION_CODES.JELLY_BEAN) private int queueInputBuffer(MediaCodec codec,ByteBuffer[] inputBuffers,int index,SpeechRecord speechRecord){
  if (speechRecord == null || speechRecord.getRecordingState() != SpeechRecord.RECORDSTATE_RECORDING) {
    return -1;
  }
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
    ByteBuffer inputBuffer=inputBuffers[index];
    inputBuffer.clear();
    int size=inputBuffer.limit();
    byte[] buffer=new byte[size];
    int status=read(speechRecord,buffer);
    if (status < 0) {
      handleError("status = " + status);
      return -1;
    }
    inputBuffer.put(buffer);
    codec.queueInputBuffer(index,0,size,0,0);
    return size;
  }
  return -1;
}

@Override public final void sample(){
  long count=_count.getAndSet(0);
  long time=_time.getAndSet(0);
  if (count == 0)   _value=0;
 else   _value=time / (double)count;
}

protected void validateProperties(final Object entity,final EntityDataModel edm) throws ODataException {
  final Type type=edm.getType(entity.getClass());
  if (!(type instanceof StructuredType)) {
    return;
  }
  visitProperties(edm,(StructuredType)type,null);
}

public static String formatNumber(float number,int digitCount,boolean separateThousands,char separateChar){
  char[] out=new char[35];
  boolean neg=false;
  if (number == 0) {
    return "0";
  }
  boolean zero=false;
  if (number < 1 && number > -1) {
    zero=true;
  }
  if (number < 0) {
    neg=true;
    number=-number;
  }
  if (digitCount > POW_10.length) {
    digitCount=POW_10.length - 1;
  }
  number*=POW_10[digitCount];
  long lval=Math.round(number);
  int ind=out.length - 1;
  int charCount=0;
  boolean decimalPointAdded=false;
  while (lval != 0 || charCount < (digitCount + 1)) {
    int digit=(int)(lval % 10);
    lval=lval / 10;
    out[ind--]=(char)(digit + '0');
    charCount++;
    if (charCount == digitCount) {
      out[ind--]=',';
      charCount++;
      decimalPointAdded=true;
    }
 else     if (separateThousands && lval != 0 && charCount > digitCount) {
      if (decimalPointAdded) {
        if ((charCount - digitCount) % 4 == 0) {
          out[ind--]=separateChar;
          charCount++;
        }
      }
 else {
        if ((charCount - digitCount) % 4 == 3) {
          out[ind--]=separateChar;
          charCount++;
        }
      }
    }
  }
  if (zero) {
    out[ind--]='0';
    charCount+=1;
  }
  if (neg) {
    out[ind--]='-';
    charCount+=1;
  }
  int start=out.length - charCount;
  return String.valueOf(out,start,out.length - start);
}

static AdbResponse readAdbResponse(SocketChannel chan,boolean readDiagString) throws TimeoutException, IOException {
  AdbResponse resp=new AdbResponse();
  byte[] reply=new byte[4];
  read(chan,reply);
  if (isOkay(reply)) {
    resp.okay=true;
  }
 else {
    readDiagString=true;
    resp.okay=false;
  }
  try {
    while (readDiagString) {
      byte[] lenBuf=new byte[4];
      read(chan,lenBuf);
      String lenStr=replyToString(lenBuf);
      int len;
      try {
        len=Integer.parseInt(lenStr,16);
      }
 catch (      NumberFormatException nfe) {
        Log.w("ddms","Expected digits, got '" + lenStr + "': "+ lenBuf[0]+ " "+ lenBuf[1]+ " "+ lenBuf[2]+ " "+ lenBuf[3]);
        Log.w("ddms","reply was " + replyToString(reply));
        break;
      }
      byte[] msg=new byte[len];
      read(chan,msg);
      resp.message=replyToString(msg);
      Log.v("ddms","Got reply '" + replyToString(reply) + "', diag='"+ resp.message+ "'");
      break;
    }
  }
 catch (  Exception e) {
  }
  return resp;
}

public void removeMouseMode(String id){
  for (  MapMouseMode med : mouseModes) {
    if (id.equals(med.getID())) {
      removeMouseMode(med);
      break;
    }
  }
}

private Boolean filterExistingItems(List<PostItem> postItems,PostItem item){
  if (postItems.contains(item)) {
    int i=postItems.indexOf(item);
    postItems.remove(i);
    postItems.add(i,item);
    return false;
  }
  return true;
}

DateRange buildShiftedRange(DateRange rawRange,long cadence,long now){
  if (rawRange.getStart() > now) {
    throw new IllegalArgumentException("start is greater than now");
  }
  final DateRange rounded=rawRange.rounded(cadence);
  final long nowDelta=now - rounded.getEnd();
  if (nowDelta > SHIFT_TOLERANCE) {
    return rounded;
  }
  final long diff=Math.abs(Math.min(nowDelta,0)) + SHIFT_TOLERANCE;
  return rounded.shift(-toleranceShiftPeriod(diff,cadence));
}

public static void upto(Date self,Date to,Closure closure){
  if (self.compareTo(to) <= 0) {
    for (Date i=(Date)self.clone(); i.compareTo(to) <= 0; i=next(i)) {
      closure.call(i);
    }
  }
 else   throw new GroovyRuntimeException("The argument (" + to + ") to upto() cannot be earlier than the value ("+ self+ ") it's called on.");
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Element testEmployee;
  Node firstC;
  String childName;
  int nodeType;
  CharacterData employeeIDNode;
  String employeeID;
  doc=(Document)load("hc_staff",false);
  elementList=doc.getElementsByTagName("p");
  testEmployee=(Element)elementList.item(3);
  firstC=testEmployee.getFirstChild();
  nodeType=(int)firstC.getNodeType();
  while (equals(3,nodeType)) {
    firstC=firstC.getNextSibling();
    nodeType=(int)firstC.getNodeType();
  }
  childName=firstC.getNodeName();
  assertEqualsAutoCase("element","childName","em",childName);
  employeeIDNode=(CharacterData)firstC.getFirstChild();
  employeeID=employeeIDNode.getNodeValue();
  assertEquals("employeeID","EMP0004",employeeID);
}

public InferenceContext(N4JSTypeSystem ts,TypeSystemHelper tsh,CancelIndicator cancelIndicator,RuleEnvironment G,InferenceVariable... inferenceVariables){
  Objects.requireNonNull(ts);
  Objects.requireNonNull(tsh);
  Objects.requireNonNull(cancelIndicator);
  Objects.requireNonNull(G);
  this.ts=ts;
  this.tsh=tsh;
  this.cancelIndicator=cancelIndicator;
  this.G=G;
  addInferenceVariables(false,inferenceVariables);
  this.reducer=new Reducer(this,G,ts,tsh);
  this.currentBounds=new BoundSet(this,G,ts);
}

@Override public void run() throws InterruptedException, CameraAccessException, CameraCaptureSessionClosedException, ResourceAcquisitionFailedException {
  FrameServer.Session session=mFrameServer.tryCreateExclusiveSession();
  if (session == null) {
    return;
  }
  try {
    AFTriggerResult afScanResult=new AFTriggerResult();
    RequestBuilder idleBuilder=createAFIdleRequest(null);
    session.submitRequest(Arrays.asList(idleBuilder.build()),FrameServer.RequestType.REPEATING);
    RequestBuilder cancelBuilder=createAFCancelRequest(null);
    session.submitRequest(Arrays.asList(cancelBuilder.build()),FrameServer.RequestType.NON_REPEATING);
    idleBuilder=createAFIdleRequest(afScanResult);
    session.submitRequest(Arrays.asList(idleBuilder.build()),FrameServer.RequestType.REPEATING);
    RequestBuilder triggerBuilder=createAFTriggerRequest(afScanResult);
    session.submitRequest(Arrays.asList(triggerBuilder.build()),FrameServer.RequestType.NON_REPEATING);
    afScanResult.get();
  }
  finally {
    session.close();
  }
}

protected List<Node> createDiscreteVariableList(DiscreteVariableAnalysis variableAnalysis){
  List<Node> nodes=new ArrayList<>(variableAnalysis.getNumOfCols());
  DiscreteVarInfo[] variables=variableAnalysis.getDiscreteVarInfos();
  for (  DiscreteVarInfo variable : variables) {
    if (variable != null) {
      nodes.add(new DiscreteVariable(variable.getName(),variable.getCategories()));
    }
  }
  return nodes;
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getFooterSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if (mState == State.PULL_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

public synchronized void removeSeries(XYSeries series){
  mSeries.remove(series);
}

private void synchronizeTables(){
  resetDBObjects(DBObject_Table.class);
  s_logger.log(Level.CONFIG,"");
  s_logger.log(Level.CONFIG,"synchronizeTables",new Object[]{m_objectTypes,m_direction});
  m_counterDrp=new Integer(0);
  m_counterAdd=new Integer(0);
  m_counterUpd=new Integer(0);
  m_totalDrp=new Integer(0);
  m_totalAdd=new Integer(0);
  m_totalUpd=new Integer(0);
  for (Iterator<String> tableIterator=m_objectList.iterator(); tableIterator.hasNext(); ) {
    String key=tableIterator.next();
    DBObject sourceObj=m_sourceMap.get(key);
    DBObject targetObj=m_targetMap.get(key);
    if (targetObj != null && sourceObj == null) {
      if (targetObj.getCustomizationLevel() == s_parameters.CUSTOMNONE) {
        if (targetObj.drop())         m_counterDrp=new Integer(m_counterDrp.intValue() + 1);
        m_totalDrp=new Integer(m_totalDrp.intValue() + 1);
      }
 else {
        s_logger.log(Level.WARNING,"notDroppingCustomizedTable",new Object[]{m_objectType,targetObj.getName()});
      }
    }
    if (targetObj != null && sourceObj != null) {
      if (targetObj.update(sourceObj))       m_counterUpd=new Integer(m_counterUpd.intValue() + 1);
      m_totalUpd=new Integer(m_totalUpd.intValue() + 1);
    }
    if (targetObj == null && sourceObj != null) {
      if (sourceObj.create(m_target))       m_counterAdd=new Integer(m_counterAdd.intValue() + 1);
      m_totalAdd=new Integer(m_totalAdd.intValue() + 1);
    }
  }
  logResults();
}

public void remoteRestartCoordinator(String nodeId,String type) throws LocalRepositoryException {
  final String prefix=String.format("restart(): type=%s on %s",type,nodeId);
  _log.debug(prefix);
  final String[] cmd={_SYSTOOL_CMD,_SYSTOOL_REMOTE_SYSTOOL,nodeId,_SYSTOOL_RESTART_COORDINATOR,type};
  final Exec.Result result=Exec.sudo(_SYSTOOL_TIMEOUT,cmd);
  checkFailure(result,prefix);
}

private static String intToString(int value,int digit){
  StringBuilder stringBuilder=new StringBuilder(digit);
  stringBuilder.append(Integer.toString(value));
  while (stringBuilder.length() < digit) {
    stringBuilder.insert(0,"0");
  }
  return stringBuilder.toString();
}

void add(int n){
  if (v == null) {
    v=new int[INIT_SIZE];
    v[0]=n;
    len=1;
    return;
  }
  if (len == v.length) {
    int[] newv=new int[len * 2];
    System.arraycopy(v,0,newv,0,len);
    v=newv;
  }
  if (n > v[len - 1]) {
    v[len++]=n;
    return;
  }
  int i=0;
  for (; i < len; i++) {
    if (n <= v[i]) {
      if (n == v[i])       return;
      break;
    }
  }
  for (int j=len; j >= i; j--)   v[j + 1]=v[j];
  v[i]=n;
  ++len;
}

public static String replace(String source,String target,String replacement){
  StringBuffer output=new StringBuffer();
  int n=0;
  while (true) {
    int off=source.indexOf(target,n);
    if (off == -1) {
      output.append(source.substring(n));
      break;
    }
    output.append(source.substring(n,off));
    output.append(replacement);
    n=off + target.length();
  }
  return output.toString();
}

public void correctNullReceiver(){
  if (args[0] != null)   return;
  handle=handle.bindTo(NullObject.getNullObject());
  handle=MethodHandles.dropArguments(handle,0,targetType.parameterType(0));
  if (LOG_ENABLED)   LOG.info("binding null object receiver and dropping old receiver");
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

public static String numberToString(Number number) throws JSONException {
  if (number == null) {
    throw new JSONException("Null pointer");
  }
  testValidity(number);
  String string=number.toString();
  if (string.indexOf('.') > 0 && string.indexOf('e') < 0 && string.indexOf('E') < 0) {
    while (string.endsWith("0")) {
      string=string.substring(0,string.length() - 1);
    }
    if (string.endsWith(".")) {
      string=string.substring(0,string.length() - 1);
    }
  }
  return string;
}

public static boolean isPairedEndDirectory(final File dir){
  if (dir == null || !dir.exists() || !dir.isDirectory()) {
    return false;
  }
  final File lDir=new File(dir,"left");
  final File rDir=new File(dir,"right");
  return lDir.exists() && rDir.exists() && lDir.isDirectory()&& rDir.isDirectory();
}

@SuppressWarnings("unchecked") private void checkClassNotFound() throws Exception {
  initGar=false;
  try {
    Ignite ignite1=startGrid(1);
    Ignite ignite2=startGrid(2);
    Class task=extLdr.loadClass(TASK_NAME);
    try {
      ignite1.compute().execute(task,ignite2.cluster().localNode().id());
      assert false;
    }
 catch (    IgniteException e) {
      info("Received expected exception: " + e);
    }
  }
  finally {
    stopGrid(1);
    stopGrid(2);
  }
}

public String dropEngine(Engine engine){
  StringBuilder builder=new StringBuilder();
  for (  String attribute : Setup.getDropEngineMessageFormat()) {
    builder.append(getEngineAttribute(engine,attribute,!PICKUP));
  }
  return builder.toString();
}

public Iterator<JsonElement> iterator(){
  return elements.iterator();
}

protected void popWriteContext(){
  writeContext_=writeContextStack_.pop();
}

public long calculateEndTime(){
  if (endTime == 0) {
    return System.currentTimeMillis();
  }
 else   if (endTime < 0) {
    return System.currentTimeMillis() - endTime;
  }
  return endTime;
}

protected String extractAlternateOpenQuote(String token){
  return null;
}

private boolean removeIndexEntry(ServiceType resourceType,String resourceName,String policyName) throws PolicyException {
  ResourceIndex resourceIndex=(ResourceIndex)resourceIndices.get(resourceType.getName());
  if (resourceIndex == null) {
    resourceIndex=refreshResourceIndexFromDataStore(resourceType);
  }
  return resourceIndex.removeIndexEntry(resourceName,policyName);
}

public static TextBlock parseTextBlock(ParseContext parseContext){
  return TextBlockSectionParser.parseTextBlock(parseContext);
}

public final static boolean inLongRange(char[] digitChars,int offset,int len,boolean negative){
  String cmpStr=negative ? MIN_LONG_STR_NO_SIGN : MAX_LONG_STR;
  int cmpLen=cmpStr.length();
  if (len < cmpLen)   return true;
  if (len > cmpLen)   return false;
  for (int i=0; i < cmpLen; ++i) {
    if (digitChars[offset + i] > cmpStr.charAt(i)) {
      return false;
    }
  }
  return true;
}

public static Collection<DebuggerException> mergeExceptionsSettings(final DebugTargetSettings target,final Collection<DebuggerException> exceptions,final int debuggerId) throws CouldntLoadDataException {
  final Map<Long,DebuggerException> exceptionsMap=getExceptionsMap(exceptions);
  for (  final DebuggerException dbgException : exceptions) {
    final String setting=target.readSetting(DebuggerException.getSettingKey(dbgException,debuggerId));
    if (setting != null) {
      final DebuggerExceptionHandlingAction handlingAction=DebuggerExceptionHandlingAction.convertToHandlingAction(Integer.valueOf(setting));
      final DebuggerException newException=new DebuggerException(dbgException.getExceptionName(),dbgException.getExceptionCode(),handlingAction);
      exceptionsMap.put(dbgException.getExceptionCode(),newException);
    }
  }
  return exceptionsMap.values();
}

public void verifyAnnotation(String methodName,String annotationName) throws Exception {
  Class clazz=Class.forName(className);
  Method method=clazz.getDeclaredMethod(methodName);
  Class annotationClazz=Class.forName(annotationName);
  java.lang.annotation.Annotation annotation=method.getAnnotation(annotationClazz);
  Assert.assertNotNull(annotation);
}

public static <V>int addDistinctList(List<V> sourceList,List<V> entryList){
  if (sourceList == null || isEmpty(entryList)) {
    return 0;
  }
  int sourceCount=sourceList.size();
  for (  V entry : entryList) {
    if (!sourceList.contains(entry)) {
      sourceList.add(entry);
    }
  }
  return sourceList.size() - sourceCount;
}

public PublisherAmb<T> ambAdditionalSource(Publisher<? extends T> source){
  if (array != null) {
    int n=array.length;
    @SuppressWarnings("unchecked") Publisher<? extends T>[] newArray=new Publisher[n + 1];
    System.arraycopy(array,0,newArray,0,n);
    newArray[n]=source;
    return new PublisherAmb<>(newArray);
  }
  return null;
}

public void beginDisplay(DisplayEvent event) throws ModelControlException {
  super.beginDisplay(event);
  String siteName=(String)getPageSessionAttribute(PG_ATTR_SITE_NAME);
  ServerSiteModel model=(ServerSiteModel)getModel();
  ptModel.setPageTitleText(model.getEditSitePageTitle(siteName));
  try {
    setDisplayFieldValue(TF_URL,model.getSitePrimaryURL(siteName));
    getFailoverURLs(siteName,model);
    getServers(siteName,model);
  }
 catch (  AMConsoleException e) {
    setInlineAlertMessage(CCAlert.TYPE_ERROR,"message.error",e.getMessage());
  }
}

public boolean add(AccessibleState state){
  if (states == null) {
    states=new Vector();
  }
  if (!states.contains(state)) {
    states.addElement(state);
    return true;
  }
 else {
    return false;
  }
}

public static final String readFile(File file) throws IOException {
  BufferedInputStream in=null;
  try {
    in=new BufferedInputStream(new FileInputStream(file));
    SimpleByteBuffer buffer=new SimpleByteBuffer();
    byte[] buf=new byte[1024];
    int len;
    while ((len=in.read(buf)) != -1) {
      buffer.put(buf,len);
    }
    return new String(buffer.buffer,0,buffer.write);
  }
  finally {
    if (null != in) {
      in.close();
    }
  }
}

void addDecimalPoint(){
  this.displayMode=DISPLAY_MODE.INPUT;
  if (this.clearOnNextDigit) {
    setDisplayString(EMPTY_STRING);
  }
  final String inputString=getDisplayString();
  if (inputString.indexOf(DOT_CHARACTER) < 0) {
    setDisplayString(inputString + DOT_CHARACTER);
  }
}

public void close() throws java.io.IOException {
  m_os.close();
}

void show(){
  if (mIsVisible)   return;
  mIsVisible=true;
  mHeightPx=Math.round(mDefaultHeightPx);
  invalidate();
}

public void recordMirrorOperation(DbClient dbClient,OperationTypeEnum opType,Operation.Status status,Object... extParam){
  try {
    boolean opStatus=(Operation.Status.ready == status) ? true : false;
    String evType;
    evType=opType.getEvType(opStatus);
    String evDesc=opType.getDescription();
    String opStage=AuditLogManager.AUDITOP_END;
    _logger.info("opType: {} detail: {}",opType.toString(),evType.toString() + ':' + evDesc);
    recordBourneMirrorEvent(dbClient,getId(),evType,status,evDesc);
switch (opType) {
case CREATE_FILE_MIRROR:
case START_FILE_MIRROR:
case SUSPEND_FILE_MIRROR:
case DETACH_FILE_MIRROR:
case PAUSE_FILE_MIRROR:
case RESUME_FILE_MIRROR:
case FAILOVER_FILE_MIRROR:
case STOP_FILE_MIRROR:
case FAILBACK_FILE_MIRROR:
case RESYNC_FILE_MIRROR:
case REFRESH_FILE_MIRROR:
case MODIFY_FILE_MIRROR_RPO:
      auditFile(dbClient,opType,opStatus,opStage,extParam);
    break;
default :
  _logger.error("unrecognized Mirror operation type");
}
}
 catch (Exception e) {
_logger.error("Failed to record Mirror operation {}, err: {}",opType.toString(),e);
}
}

private void cancelTakeImage(){
  mShootedPicturePath=null;
  mSelectedGalleryItemsList.clear();
  VectorApp.setSavedCameraImagePreview(null);
  startCameraPreview();
  updateUiConfiguration(UI_SHOW_CAMERA_PREVIEW,IMAGE_ORIGIN_CAMERA);
}

protected int nextGridToRestart(){
  if (currRestartGridId == serverCount())   currRestartGridId=0;
  return ++currRestartGridId;
}

public void charactersRaw(char ch[],int start,int length) throws org.xml.sax.SAXException {
  if (isOutsideDocElem() && XMLCharacterRecognizer.isWhiteSpace(ch,start,length))   return;
  String s=new String(ch,start,length);
  append(m_doc.createProcessingInstruction("xslt-next-is-raw","formatter-to-dom"));
  append(m_doc.createTextNode(s));
}

private void removeStaleIteratorReferences(){
  removeStaleReferences(iteratorReferenceQueue,iterators);
}

boolean destroyIGroup(boolean force){
  NaElement elem=new NaElement("igroup-destroy");
  elem.addNewChild("initiator-group-name",name);
  elem.addNewChild("force",Boolean.toString(force));
  try {
    server.invokeElem(elem);
  }
 catch (  Exception e) {
    String msg="Failed to destroy initiator group: " + name;
    log.error(msg,e);
    throw new NetAppException(msg,e);
  }
  return true;
}

@Override public double finiteDifferenceEpsilon(){
  return 1e-6;
}

public void remove(final HttpConnection connection){
  log.debug("Removing connection " + connection.getID());
  connectionToAdded.remove(connection);
}

public void putByte(long pos,byte val){
  unsafe.putByte(pos + addr,val);
}

public void addReference(MessagePart reference){
  references.add(reference);
}

protected boolean[] datasetIntegrity(AttrTypes attrTypes,int classType,boolean attributeMissing,boolean classMissing){
  Estimator estimator=null;
  print("estimator doesn't alter original datasets");
  printAttributeSummary(attrTypes,classType);
  print("...");
  int numTrain=getNumInstances();
  getNumInstances();
  int numClasses=2, missingLevel=100;
  boolean[] result=new boolean[2];
  Instances train=null;
  boolean built=false;
  try {
    train=makeTestDataset(42,numTrain,1,attrTypes,numClasses,classType);
    int attrIndex=0;
    if (missingLevel > 0) {
      addMissing(train,missingLevel,attributeMissing,classMissing,attrIndex);
    }
    estimator=Estimator.makeCopies(getEstimator(),1)[0];
  }
 catch (  Exception ex) {
    throw new Error("Error setting up for tests: " + ex.getMessage());
  }
  try {
    Instances trainCopy=new Instances(train);
    int attrIndex=0;
    estimator.addValues(trainCopy,attrIndex);
    compareDatasets(train,trainCopy);
    built=true;
    println("yes");
    result[0]=true;
  }
 catch (  Exception ex) {
    println("no");
    result[0]=false;
    if (m_Debug) {
      println("\n=== Full Report ===");
      print("Problem during");
      if (built) {
        print(" testing");
      }
 else {
        print(" training");
      }
      println(": " + ex.getMessage() + "\n");
      println("Here are the datasets:\n");
      println("=== Train Dataset ===\n" + train.toString() + "\n");
    }
  }
  return result;
}

@Override public void addFocusables(ArrayList<View> views,int direction,int focusableMode){
  final int focusableCount=views.size();
  final int descendantFocusability=getDescendantFocusability();
  if (descendantFocusability != FOCUS_BLOCK_DESCENDANTS) {
    for (int i=0; i < getChildCount(); i++) {
      final View child=getChildAt(i);
      if (child.getVisibility() == VISIBLE) {
        ItemInfo ii=infoForChild(child);
        if (ii != null && ii.position == mCurItem) {
          child.addFocusables(views,direction,focusableMode);
        }
      }
    }
  }
  if (descendantFocusability != FOCUS_AFTER_DESCENDANTS || (focusableCount == views.size())) {
    if (!isFocusable()) {
      return;
    }
    if ((focusableMode & FOCUSABLES_TOUCH_MODE) == FOCUSABLES_TOUCH_MODE && isInTouchMode() && !isFocusableInTouchMode()) {
      return;
    }
    if (views != null) {
      views.add(this);
    }
  }
}

protected DateTimeData parse(String str) throws SchemaDateTimeException {
  DateTimeData date=new DateTimeData(str,this);
  int len=str.length();
  if (str.charAt(0) != '-' || str.charAt(1) != '-' || str.charAt(2) != '-') {
    throw new SchemaDateTimeException("Error in day parsing");
  }
  date.year=YEAR;
  date.month=MONTH;
  date.day=parseInt(str,3,5);
  if (DAY_SIZE < len) {
    if (!isNextCharUTCSign(str,DAY_SIZE,len)) {
      throw new SchemaDateTimeException("Error in day parsing");
    }
 else {
      getTimeZone(str,date,DAY_SIZE,len);
    }
  }
  validateDateTime(date);
  saveUnnormalized(date);
  if (date.utc != 0 && date.utc != 'Z') {
    normalize(date);
  }
  date.position=2;
  return date;
}

public static Map<String,Set<String>> parse(final URI uri,boolean decodeQueryParam){
  Map<String,Set<String>> result=Collections.emptyMap();
  final String query=uri.getRawQuery();
  if (query != null && query.length() > 0) {
    result=new HashMap<>();
    parse(result,new Scanner(query),null,decodeQueryParam);
  }
  return result;
}

private void updatePeriod(){
  for (int i=0; i < mConversion.size(); i++) {
    int dateType=mConversion.keyAt(i);
    TimePeriodSlider slider=mTimePeriodSliders.get(dateType);
    slider.setValue(mPeriod.get(mConversion.valueAt(i)));
  }
  mTime.setText(getFormattedPeriod());
  mDuration=mPeriod.toStandardDuration();
  doValidation();
}

public long start_brk(){
  return Long.parseLong(fields[46]);
}

public static void validateParticipantIdsEqual(String expectedParticipantId,String actualParticipantId) throws CryptoException {
  if (!expectedParticipantId.equals(actualParticipantId)) {
    throw new CryptoException("Received payload from incorrect partner (" + actualParticipantId + "). Expected to receive payload from "+ expectedParticipantId+ ".");
  }
}

protected void encodeFields(mxCodec enc,Object obj,Node node){
  Class type=obj.getClass();
  while (type != null) {
    Field[] fields=type.getDeclaredFields();
    for (int i=0; i < fields.length; i++) {
      Field f=fields[i];
      if ((f.getModifiers() & Modifier.TRANSIENT) != Modifier.TRANSIENT) {
        String fieldname=f.getName();
        Object value=getFieldValue(obj,fieldname);
        encodeValue(enc,obj,fieldname,value,node);
      }
    }
    type=type.getSuperclass();
  }
}

public void addVetoableChangeListener(String propertyName,VetoableChangeListener in_vcl){
  beanContextChildSupport.addVetoableChangeListener(propertyName,in_vcl);
}

private void logMissingResource(FacesContext ctx,String resourceId,Throwable t){
  Level level;
  if (!ctx.isProjectStage(ProjectStage.Production)) {
    level=Level.WARNING;
  }
 else {
    level=((t != null) ? Level.WARNING : Level.FINE);
  }
  if (LOGGER.isLoggable(level)) {
    LOGGER.log(level,"jsf.application.resource.unable_to_serve",new Object[]{resourceId});
    if (t != null) {
      LOGGER.log(level,"",t);
    }
  }
}

private void appendAliasedColumn(StringBuilder sb,String colName,String tAlias){
  if (tAlias != null) {
    sb.append(tAlias);
    sb.append(".");
  }
  sb.append("\"");
  sb.append(colName);
  sb.append("\"");
}

private MidiEvent createScheduledEvent(byte[] msg,int offset,int count,long timestamp){
  MidiEvent event;
  if (count > POOL_EVENT_SIZE) {
    event=new MidiEvent(msg,offset,count,timestamp);
  }
 else {
    event=(MidiEvent)removeEventfromPool();
    if (event == null) {
      event=new MidiEvent(POOL_EVENT_SIZE);
    }
    System.arraycopy(msg,offset,event.data,0,count);
    event.count=count;
    event.setTimestamp(timestamp);
  }
  return event;
}

public void startElement(String namespaceURI,String localName,String qName,Attributes atts) throws SAXException {
  try {
    elemType=(SaxHandlerBase.ElementType)elementTypes.get(localName);
    if (gatherMode) {
      if (gatheringElement.gatherElement(localName,atts)) {
        gatherBuffer.add(new Object[]{elemType,new AttributesImpl(atts)});
      }
    }
 else {
      if (elemType == null) {
        return;
      }
      elemType.startElement(atts);
    }
    elems.add(elemType);
  }
 catch (  SAXException saxex) {
    throw saxex;
  }
catch (  Exception ex) {
    throw new SAXException(ex);
  }
}

public static byte[] gzip(String input){
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  GZIPOutputStream gzos=null;
  try {
    gzos=new GZIPOutputStream(baos);
    gzos.write(input.getBytes("UTF-8"));
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
    if (gzos != null)     try {
      gzos.close();
    }
 catch (    IOException ignore) {
    }
  }
  return baos.toByteArray();
}

public static double logPdf(double x,double m,double shape){
  double a=Math.sqrt(shape / (2.0 * Math.PI * x* x* x));
  double b=((-shape) * (x - m) * (x - m)) / (2.0 * m * m* x);
  return Math.log(a) + b;
}

public void addEdgeConnector(){
  numEdgeConnectors++;
  String name="";
  boolean duplicate=true;
  while (duplicate) {
    name="EC" + numEdgeConnectors;
    if (finder.findPositionablePointByName(name) == null) {
      duplicate=false;
    }
    if (duplicate) {
      numEdgeConnectors++;
    }
  }
  PositionablePoint o=new PositionablePoint(name,PositionablePoint.EDGE_CONNECTOR,currentPoint,this);
  pointList.add(o);
  setDirty(true);
}

@RequestMapping(value={"","/"},method=RequestMethod.GET) @ResponseBody public RestWrapper list(@RequestParam(value="page",defaultValue="0") int startPage,@RequestParam(value="size",defaultValue="10") int pageSize,Principal principal){
  RestWrapper restWrapper=null;
  try {
    Integer counter=workflowTypeDAO.totalRecordCount();
    List<WorkflowType> workflowTypes=new ArrayList<WorkflowType>();
    List<com.wipro.ats.bdre.md.dao.jpa.WorkflowType> jpaWorkflowTypes=workflowTypeDAO.list(startPage,pageSize);
    for (    com.wipro.ats.bdre.md.dao.jpa.WorkflowType wfType : jpaWorkflowTypes) {
      WorkflowType workflowType=new WorkflowType();
      workflowType.setWorkflowId(wfType.getWorkflowId());
      workflowType.setWorkflowTypeName(wfType.getWorkflowTypeName());
      workflowType.setCounter(counter);
      workflowTypes.add(workflowType);
    }
    restWrapper=new RestWrapper(workflowTypes,RestWrapper.OK);
    LOGGER.info("All records listed from WorkflowType by User:" + principal.getName());
  }
 catch (  Exception e) {
    LOGGER.error(e);
    restWrapper=new RestWrapper(e.getMessage(),RestWrapper.ERROR);
  }
  return restWrapper;
}

public synchronized void writeTo(OutputStream out) throws IOException {
  int remaining=count;
  for (  byte[] buf : buffers) {
    int c=Math.min(buf.length,remaining);
    out.write(buf,0,c);
    remaining-=c;
    if (remaining == 0) {
      break;
    }
  }
}

public void parseForClass(GenericDeclaration genericDecl,String signature){
  setInput(genericDecl,signature);
  if (!eof) {
    parseClassSignature();
  }
 else {
    if (genericDecl instanceof Class) {
      Class c=(Class)genericDecl;
      this.formalTypeParameters=EmptyArray.TYPE_VARIABLE;
      this.superclassType=c.getSuperclass();
      Class<?>[] interfaces=c.getInterfaces();
      if (interfaces.length == 0) {
        this.interfaceTypes=ListOfTypes.EMPTY;
      }
 else {
        this.interfaceTypes=new ListOfTypes(interfaces);
      }
    }
 else {
      this.formalTypeParameters=EmptyArray.TYPE_VARIABLE;
      this.superclassType=Object.class;
      this.interfaceTypes=ListOfTypes.EMPTY;
    }
  }
}

static boolean tryExternalUnpush(ForkJoinTask<?> t){
  ForkJoinPool p;
  WorkQueue[] ws;
  WorkQueue q;
  Submitter z;
  ForkJoinTask<?>[] a;
  int m, s;
  if (t != null && (z=submitters.get()) != null && (p=commonPool) != null && (ws=p.workQueues) != null && (m=ws.length - 1) >= 0 && (q=ws[m & z.seed & SQMASK]) != null && (s=q.top) != q.base && (a=q.array) != null) {
    long j=(((a.length - 1) & (s - 1)) << ASHIFT) + ABASE;
    if (U.getObject(a,j) == t && U.compareAndSwapInt(q,QLOCK,0,1)) {
      if (q.array == a && q.top == s && U.compareAndSwapObject(a,j,t,null)) {
        q.top=s - 1;
        q.qlock=0;
        return true;
      }
      q.qlock=0;
    }
  }
  return false;
}

public static double[] quantiles(int n,double[] values){
  values=(double[])values.clone();
  Arrays.sort(values);
  double[] qtls=new double[n + 1];
  for (int i=0; i <= n; ++i) {
    qtls[i]=values[((values.length - 1) * i) / n];
  }
  return qtls;
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String badSubstring;
  doc=(Document)load("staff",false);
  elementList=doc.getElementsByTagName("address");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
{
    boolean success=false;
    try {
      badSubstring=child.substringData(10,-3);
    }
 catch (    DOMException ex) {
      success=(ex.code == DOMException.INDEX_SIZE_ERR);
    }
    assertTrue("throws_INDEX_SIZE_ERR",success);
  }
}

public QueryException(String message,int errorCode,SqlStates sqlState,Throwable cause){
  super(message,cause);
  this.message=message;
  this.errorCode=errorCode;
  this.sqlState=sqlState.getSqlState();
}

private void writeAttribute(java.lang.String prefix,java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (xmlWriter.getPrefix(namespace) == null) {
    xmlWriter.writeNamespace(prefix,namespace);
    xmlWriter.setPrefix(prefix,namespace);
  }
  xmlWriter.writeAttribute(namespace,attName,attValue);
}

public void testConstructorStringRadix16(){
  String value="fe2340a8b5ce790";
  int radix=16;
  byte rBytes[]={15,-30,52,10,-117,92,-25,-112};
  BigInteger aNumber=new BigInteger(value,radix);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=aNumber.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,aNumber.signum());
}

private CSVData(List<CSVRecord> records){
  this.records=Objects.requireNonNull(records);
}

private Workflow.Method untagVolumesMethod(URI systemURI,List<URI> volumeURIs){
  return new Workflow.Method("untagVolumes",systemURI,volumeURIs);
}

private byte[] SHA256hash(byte[] tobeHashed){
  SHA256Digest digester=new SHA256Digest();
  byte[] retValue=new byte[digester.getDigestSize()];
  digester.update(tobeHashed,0,tobeHashed.length);
  digester.doFinal(retValue,0);
  return retValue;
}

@DataProvider private static Object[][] okResourceResponses(){
  return new Object[][]{{new Response(OK)},{new Response(FOUND)},{new Response(MOVED_PERMANENTLY)},{new Response(CREATED)}};
}

public synchronized void connect(){
  if (!_zkConnection.isStarted()) {
    _zkConnection.start();
  }
  if (StringUtils.isEmpty(siteId)) {
    generateSiteId();
  }
}

static Object convertJavaTimeToJavaSql(Object x){
  if (x instanceof LocalDate) {
    return Date.valueOf((LocalDate)x);
  }
 else   if (x instanceof LocalDateTime) {
    return Timestamp.valueOf((LocalDateTime)x);
  }
 else   if (x instanceof LocalTime) {
    return Time.valueOf((LocalTime)x);
  }
  return x;
}

@NotNull private static DefaultMutableTreeNode updateTreeStructure(@NotNull DefaultMutableTreeNode treeNode,@NotNull ZipFile compressedApk){
  long compressedSize=0;
  ApkEntry entry=ApkEntry.fromNode(treeNode);
  assert entry != null;
  if (treeNode.getChildCount() > 0) {
    for (int i=0; i < treeNode.getChildCount(); i++) {
      DefaultMutableTreeNode childNode=updateTreeStructure((DefaultMutableTreeNode)treeNode.getChildAt(i),compressedApk);
      compressedSize+=((ApkEntry)childNode.getUserObject()).getCompressedSize();
    }
  }
 else {
    ZipEntry ze=compressedApk.getEntry(ApkFileSystem.getInstance().getRelativePath(entry.getFile()));
    if (ze == null) {
      compressedSize=-1;
    }
 else {
      compressedSize=ze.getCompressedSize();
    }
  }
  entry.setCompressedSize(compressedSize);
  return treeNode;
}

public long totalMemory(){
  return totalMemoryImpl();
}

public static void enableSync(String accountName){
}

public static void scan(){
  List<ScannerRegistration> scanners=getScannersToRun();
  if (scanners.size() > 0) {
    URL[] urls=getSearchURLs();
    if (urls == null) {
      urls=fiterLibs(ScannerURLS.getURLsForSearch());
      scan(scanners,urls);
    }
 else {
      scan(scanners,urls);
    }
  }
}

public final void turnTo(double angle){
  angle=Geometric.clampAngleDegree(angle);
  orientation=Geometric.clampAngleDegree(angle);
  Geometric.rotateTo(velocity,Math.toRadians(orientation));
}

void fullyLock(){
  putLock.lock();
  takeLock.lock();
}

protected int startBridgeServer(int port,boolean notifyBySubscription) throws IOException {
  Cache cache=getCache();
  CacheServer bridge=cache.addCacheServer();
  bridge.setPort(port);
  bridge.setNotifyBySubscription(notifyBySubscription);
  bridge.start();
  bridgeServerPort=bridge.getPort();
  return bridge.getPort();
}

public void addAction(String action){
  Object[] args=new String[1];
  SimpleDateFormat sdf=new SimpleDateFormat(context.getString(R.string.dateFormat));
  args[0]=sdf.format(new Date());
  String timestamp=context.getString(R.string.timestamp,args);
  history.add(action + timestamp);
  notifyListeners(new PropertyChangeEvent(this,ActivityConstants.historyProperty,null,null));
}

protected Object toType(Calendar value){
  return value.getTime();
}

protected F restoreLastFilter(int dialogType){
  F result;
  List<F> list;
  int i;
  result=null;
  if (dialogType == OPEN_DIALOG)   list=getOpenFileFilters();
 else   list=getSaveFileFilters();
  if (list.size() > 0) {
    result=getDefaultFileFilter(dialogType);
    setFileFilter(result);
    if (m_LastFilter != null) {
      for (i=0; i < list.size(); i++) {
        if (m_Comparator.compare(list.get(i),m_LastFilter) == 0) {
          result=(F)m_LastFilter;
          setFileFilter(m_LastFilter);
          break;
        }
      }
    }
  }
  return result;
}

public void testCharBasedCollisions(){
  CharsToNameCanonicalizer sym=CharsToNameCanonicalizer.createRoot();
  try {
    int firstHash=0;
    for (    String str : CHAR_COLLISIONS) {
      int hash=sym.calcHash(str);
      if (firstHash == 0) {
        firstHash=hash;
      }
 else {
        assertEquals(firstHash,hash);
      }
      sym.findSymbol(str.toCharArray(),0,str.length(),hash);
    }
    fail("Should have thrown exception");
  }
 catch (  IllegalStateException e) {
    verifyException(e,"exceeds maximum");
    assertEquals(CharsToNameCanonicalizer.MAX_COLL_CHAIN_LENGTH + 1,sym.maxCollisionLength());
    assertEquals(CharsToNameCanonicalizer.MAX_COLL_CHAIN_LENGTH + 1,sym.collisionCount());
    assertEquals(CharsToNameCanonicalizer.MAX_COLL_CHAIN_LENGTH + 2,sym.size());
  }
}

public void handleTblDataSiteActionHrefRequest(RequestInvocationEvent event) throws ModelControlException {
  String siteName=hexToString((String)getDisplayFieldValue(TBL_DATA_SITE_ACTION_HREF));
  setPageSessionAttribute(SiteEditViewBean.PG_ATTR_SITE_NAME,siteName);
  SiteEditViewBean vb=(SiteEditViewBean)getViewBean(SiteEditViewBean.class);
  unlockPageTrail();
  passPgSessionMap(vb);
  vb.forwardTo(getRequestContext());
}

public static void normalize(double[] doubles,double sum){
  if (Double.isNaN(sum)) {
    throw new IllegalArgumentException("Can't normalize array. Sum is NaN.");
  }
  if (sum == 0) {
    throw new IllegalArgumentException("Can't normalize array. Sum is zero.");
  }
  for (int i=0; i < doubles.length; i++) {
    doubles[i]/=sum;
  }
}

private void expandArray(int shardId){
  int newNumShards=Math.max((int)Math.ceil(numShards * SHARD_GROWTH_FACTOR),shardId + 1);
  Preconditions.checkArgument(newNumShards * shardLength < Integer.MAX_VALUE,"Exceeded the max storage capacity for ShardedBigIntArray");
  int[][] newArray=new int[newNumShards][];
  System.arraycopy(readerAccessibleInfo.array,0,newArray,0,readerAccessibleInfo.array.length);
  readerAccessibleInfo=new ReaderAccessibleInfo(newArray);
  numShards=newNumShards;
}

protected <T>T waitForPropertyValue(String documentSelfLink,Class<T> type,String propName,Object propValue,boolean shouldMatch,AtomicInteger count) throws Throwable {
  @SuppressWarnings("unchecked") List<Object> prop=propValue instanceof List ? (List<Object>)propValue : Arrays.asList(propValue);
  return waitForPropertyValue(documentSelfLink,type,propName,prop,shouldMatch,count);
}

public static String fromIPv4AddressCollection(Collection<Integer> ipAddresses){
  if (ipAddresses == null)   return "null";
  StringBuffer sb=new StringBuffer();
  sb.append("[");
  for (  Integer ip : ipAddresses) {
    sb.append(fromIPv4Address(ip));
    sb.append(",");
  }
  sb.replace(sb.length() - 1,sb.length(),"]");
  return sb.toString();
}

public static final String makeJavaIdentifier(String identifier){
  StringBuilder modifiedIdentifier=new StringBuilder(identifier.length());
  if (!Character.isJavaIdentifierStart(identifier.charAt(0))) {
    modifiedIdentifier.append('_');
  }
  for (int i=0; i < identifier.length(); i++) {
    char ch=identifier.charAt(i);
    if (Character.isJavaIdentifierPart(ch) && ch != '_') {
      modifiedIdentifier.append(ch);
    }
 else     if (ch == '.') {
      modifiedIdentifier.append('_');
    }
 else {
      modifiedIdentifier.append(mangleChar(ch));
    }
  }
  if (isJavaKeyword(modifiedIdentifier.toString())) {
    modifiedIdentifier.append('_');
  }
  return modifiedIdentifier.toString();
}

public static String encrypt(String input){
  if (encryptionService == null || input == null || input.length() == 0) {
    return input;
  }
  return ENCRYPTION_PREFIX + encryptionService.encrypt(input);
}

public static void createFederatedNamespace(URI namespace,ZooKeeperClient zkc) throws InterruptedException, ZooKeeperClient.ZooKeeperConnectionException, KeeperException {
  String zkSubNamespacesPath=namespace.getPath() + "/" + ZNODE_SUB_NAMESPACES;
  Utils.zkCreateFullPathOptimistic(zkc,zkSubNamespacesPath,new byte[0],zkc.getDefaultACL(),CreateMode.PERSISTENT);
}

public static Executor createTaskDistributor(){
  return Executors.newCachedThreadPool(createThreadFactory(Thread.NORM_PRIORITY,"uil-pool-d-"));
}

public String process(){
  while (off < count) {
    while (off < count) {
      char ch=text[off];
      if (!isSpecial(ch)) {
        break;
      }
      off++;
    }
    if (!acronym()) {
      token();
      number();
    }
  }
  return builder.toString();
}

public static String bytesToBinHex(byte[] data,int nStartPos,int nNumOfBytes){
  StringBuilder sbuf=new StringBuilder();
  sbuf.setLength(nNumOfBytes << 1);
  int nPos=0;
  for (int nI=0; nI < nNumOfBytes; nI++) {
    sbuf.setCharAt(nPos++,HEXTAB[(data[nI + nStartPos] >> 4) & 0x0f]);
    sbuf.setCharAt(nPos++,HEXTAB[data[nI + nStartPos] & 0x0f]);
  }
  return sbuf.toString();
}

private static int[] mult128(int[] a,int[] b){
  int[] result=new int[8];
  int[] a0=new int[2];
  System.arraycopy(a,0,a0,0,Math.min(2,a.length));
  int[] a1=new int[2];
  if (a.length > 2) {
    System.arraycopy(a,2,a1,0,Math.min(2,a.length - 2));
  }
  int[] b0=new int[2];
  System.arraycopy(b,0,b0,0,Math.min(2,b.length));
  int[] b1=new int[2];
  if (b.length > 2) {
    System.arraycopy(b,2,b1,0,Math.min(2,b.length - 2));
  }
  if (a1[1] == 0 && b1[1] == 0) {
    if (a1[0] != 0 || b1[0] != 0) {
      int[] c=mult32(a1[0],b1[0]);
      result[5]^=c[1];
      result[4]^=c[0];
      result[3]^=c[1];
      result[2]^=c[0];
    }
  }
 else {
    int[] c=mult64(a1,b1);
    result[7]^=c[3];
    result[6]^=c[2];
    result[5]^=c[1] ^ c[3];
    result[4]^=c[0] ^ c[2];
    result[3]^=c[1];
    result[2]^=c[0];
  }
  a1[0]^=a0[0];
  a1[1]^=a0[1];
  b1[0]^=b0[0];
  b1[1]^=b0[1];
  if (a1[1] == 0 && b1[1] == 0) {
    int[] d=mult32(a1[0],b1[0]);
    result[3]^=d[1];
    result[2]^=d[0];
  }
 else {
    int[] d=mult64(a1,b1);
    result[5]^=d[3];
    result[4]^=d[2];
    result[3]^=d[1];
    result[2]^=d[0];
  }
  if (a0[1] == 0 && b0[1] == 0) {
    int[] e=mult32(a0[0],b0[0]);
    result[3]^=e[1];
    result[2]^=e[0];
    result[1]^=e[1];
    result[0]^=e[0];
  }
 else {
    int[] e=mult64(a0,b0);
    result[5]^=e[3];
    result[4]^=e[2];
    result[3]^=e[1] ^ e[3];
    result[2]^=e[0] ^ e[2];
    result[1]^=e[1];
    result[0]^=e[0];
  }
  return result;
}

public static void updateLast(){
  ClientUtils.lastUpdate=System.currentTimeMillis();
}

public ReplicaSets(Collection<ReplicaSet> rsSpecs){
  if (rsSpecs != null) {
    rsSpecs.forEach(null);
  }
  Collections.sort(nonReplicaSets);
}

static private String BYTE_Max(){
  byte tempValue=Byte.MAX_VALUE;
  return String.valueOf(tempValue);
}

public static Executor createTaskDistributor(){
  return Executors.newCachedThreadPool(createThreadFactory(Thread.NORM_PRIORITY,"uil-pool-d-"));
}

protected PathNode pathNode(String pattern){
  final String seq[]=pattern.split("/");
  final PathElt elements[]=new PathElt[seq.length];
  PathMod mod=null;
  for (int i=0; i < seq.length; i++) {
    final String s=seq[i];
    boolean inverse=s.charAt(0) == '^';
switch (s.charAt(s.length() - 1)) {
case '*':
      mod=PathMod.ZERO_OR_MORE;
    break;
case '+':
  mod=PathMod.ONE_OR_MORE;
break;
case '?':
mod=PathMod.ZERO_OR_ONE;
break;
}
String c=s.substring(inverse ? 1 : 0,s.length() - (mod != null ? 1 : 0));
elements[i]=new PathElt(constantNode(c),inverse,mod);
}
return new PathNode(new PathAlternative(new PathSequence(elements)));
}

@Override public int startupNewWorker(int priority){
  int actualWorkersStarted=startupNewWorker(priority,null,null);
  return actualWorkersStarted;
}

public void addImplInterface(String iname){
  implInterfaces.add(iname);
}

private static synchronized boolean checkFolderPermissions(StringBuilder aStringBuilder,String aDirectory){
  File directory=new File(aDirectory);
  if (!directory.exists()) {
    directory.mkdirs();
  }
  if (!directory.canRead()) {
    aStringBuilder.append("The directory [" + directory + "] is not readable. "+ "Please check your permissions rights.\n");
    return false;
  }
  if (!directory.canWrite()) {
    aStringBuilder.append("The directory [" + directory + "] is not writable. "+ "Please check your permissions rights.\n");
    return false;
  }
  return true;
}

protected QualifiedItem[] parseQualifiedItems(final String[] arguments,final VersionSpec defaultVersion,final boolean allowVersionRange,final int startIndex){
  Check.notNull(arguments,"arguments");
  final List<QualifiedItem> items=new ArrayList<QualifiedItem>(arguments.length);
  for (int i=startIndex; i < arguments.length; i++) {
    final String arg=arguments[i];
    if (!StringUtil.isNullOrEmpty(arg)) {
      try {
        final QualifiedItem qi=new QualifiedItem(arg,VersionControlConstants.AUTHENTICATED_USER,defaultVersion,allowVersionRange);
        items.add(qi);
      }
 catch (      final VersionSpecParseException e) {
        reportWrongArgument(arg,e);
      }
catch (      final LabelSpecParseException e) {
        reportWrongArgument(arg,e);
      }
    }
  }
  return items.toArray(new QualifiedItem[items.size()]);
}

public EipEditor(){
  super();
  initializeEditingDomain();
}

public boolean deleteEntry(BasicPoolEntry entry){
  final boolean found=freeEntries.remove(entry);
  if (found)   numEntries--;
  return found;
}

@Deprecated public void requestContactCapabilities(ContactId contact) throws RcsServiceNotRegisteredException, RcsServiceNotAvailableException, RcsGenericException {
  if (mApi == null) {
    throw new RcsServiceNotAvailableException();
  }
  try {
    List<ContactId> listOfContacts=new ArrayList<>();
    listOfContacts.add(contact);
    mApi.requestContactCapabilities2(listOfContacts);
  }
 catch (  Exception e) {
    RcsIllegalArgumentException.assertException(e);
    RcsServiceNotRegisteredException.assertException(e);
    throw new RcsGenericException(e);
  }
}

public ConversationService(final String versionDate,String username,String password){
  this(versionDate);
  setUsernameAndPassword(username,password);
}

public CustomOptional<KinesisRecord> next() throws TransientKinesisException {
  readMoreIfNecessary();
  if (data.isEmpty()) {
    return CustomOptional.absent();
  }
 else {
    KinesisRecord record=data.removeFirst();
    checkpoint=checkpoint.moveAfter(record);
    return CustomOptional.of(record);
  }
}

@Override public final synchronized void addRemoveStatements(Collection<Statement> added,Collection<Statement> removed) throws IOException {
  MapOfListMaps<Resource,String,Statement> rsAdded=new MapOfListMaps<Resource,String,Statement>();
  MapOfListMaps<Resource,String,Statement> rsRemoved=new MapOfListMaps<Resource,String,Statement>();
  HashSet<Resource> resources=new HashSet<Resource>();
  for (  Statement s : added) {
    rsAdded.add(s.getSubject(),SearchFields.getContextID(s.getContext()),s);
    resources.add(s.getSubject());
  }
  for (  Statement s : removed) {
    rsRemoved.add(s.getSubject(),SearchFields.getContextID(s.getContext()),s);
    resources.add(s.getSubject());
  }
  logger.debug("Removing " + removed.size() + " statements, adding "+ added.size()+ " statements");
  BulkUpdater updater=newBulkUpdate();
  for (  Resource resource : resources) {
    Map<String,List<Statement>> stmtsToRemove=rsRemoved.get(resource);
    Map<String,List<Statement>> stmtsToAdd=rsAdded.get(resource);
    Set<String> contextsToUpdate=new HashSet<String>(stmtsToAdd.keySet());
    contextsToUpdate.addAll(stmtsToRemove.keySet());
    Map<String,SearchDocument> docsByContext=new HashMap<String,SearchDocument>();
    String resourceId=SearchFields.getResourceID(resource);
    Iterable<? extends SearchDocument> documents=getDocuments(resourceId);
    for (    SearchDocument doc : documents) {
      docsByContext.put(doc.getContext(),doc);
    }
    for (    String contextId : contextsToUpdate) {
      String id=SearchFields.formIdString(resourceId,contextId);
      SearchDocument document=docsByContext.get(contextId);
      if (document == null) {
        document=newDocument(id,resourceId,contextId);
        List<Statement> list=stmtsToAdd.get(contextId);
        if (list != null) {
          for (          Statement s : list) {
            addProperty(s,document);
          }
        }
        updater.add(document);
        if (stmtsToRemove.containsKey(contextId))         logger.info("Statements are marked to be removed that should not be in the store, for resource {} and context {}. Nothing done.",resource,contextId);
      }
 else {
        Map<String,Set<String>> removedOfResource=null;
{
          List<Statement> removedStatements=stmtsToRemove.get(contextId);
          if (removedStatements != null && !removedStatements.isEmpty()) {
            removedOfResource=new HashMap<String,Set<String>>();
            for (            Statement r : removedStatements) {
              String val=SearchFields.getLiteralPropertyValueAsString(r);
              if (val != null) {
                String field=SearchFields.getPropertyField(r.getPredicate());
                Set<String> removedValues=removedOfResource.get(field);
                if (removedValues == null) {
                  removedValues=new HashSet<String>();
                  removedOfResource.put(field,removedValues);
                }
                removedValues.add(val);
              }
            }
          }
        }
        SearchDocument newDocument=newDocument(id,resourceId,contextId);
        boolean mutated=copyDocument(newDocument,document,removedOfResource);
{
          List<Statement> addedToResource=stmtsToAdd.get(contextId);
          String val;
          if (addedToResource != null && !addedToResource.isEmpty()) {
            PropertyCache propertyCache=new PropertyCache(newDocument);
            for (            Statement s : addedToResource) {
              val=SearchFields.getLiteralPropertyValueAsString(s);
              if (val != null) {
                String field=SearchFields.getPropertyField(s.getPredicate());
                if (!propertyCache.hasProperty(field,val)) {
                  addProperty(s,newDocument);
                  mutated=true;
                }
              }
            }
          }
        }
        int nrProperties=countPropertyValues(newDocument);
        if (nrProperties > 0) {
          if (mutated) {
            updater.update(newDocument);
          }
        }
 else {
          updater.delete(document);
        }
      }
    }
  }
  updater.end();
}

Object toType(String value,String pattern,Locale locale){
  Calendar calendar=toCalendar(value,pattern,locale);
  return toType(calendar);
}

private SnmpPduPacket executeSubRequest(SnmpPduPacket req,Object userData){
  int errorStatus=SnmpDefinitions.snmpRspNoError;
  int i;
  if (req.type == pduSetRequestPdu) {
    i=0;
    for (Enumeration<SnmpSubRequestHandler> e=subs.elements(); e.hasMoreElements(); i++) {
      SnmpSubRequestHandler sub=e.nextElement();
      sub.setUserData(userData);
      sub.type=pduWalkRequest;
      sub.run();
      sub.type=pduSetRequestPdu;
      if (sub.getErrorStatus() != SnmpDefinitions.snmpRspNoError) {
        if (SNMP_ADAPTOR_LOGGER.isLoggable(Level.FINEST)) {
          SNMP_ADAPTOR_LOGGER.logp(Level.FINEST,dbgTag,"executeSubRequest","an error occurs");
        }
        return newErrorResponsePdu(req,errorStatus,sub.getErrorIndex() + 1);
      }
    }
  }
  i=0;
  for (Enumeration<SnmpSubRequestHandler> e=subs.elements(); e.hasMoreElements(); i++) {
    SnmpSubRequestHandler sub=e.nextElement();
    sub.setUserData(userData);
    sub.run();
    if (sub.getErrorStatus() != SnmpDefinitions.snmpRspNoError) {
      if (SNMP_ADAPTOR_LOGGER.isLoggable(Level.FINEST)) {
        SNMP_ADAPTOR_LOGGER.logp(Level.FINEST,dbgTag,"executeSubRequest","an error occurs");
      }
      return newErrorResponsePdu(req,errorStatus,sub.getErrorIndex() + 1);
    }
  }
  return null;
}

Method(MethodDoc methodDoc){
  this.methodDoc=methodDoc;
  exceptionTypes=methodDoc.thrownExceptions();
  Arrays.sort(exceptionTypes,new ClassDocComparator());
  operationString=computeOperationString();
  nameAndDescriptor=methodDoc.name() + Util.methodDescriptorOf(methodDoc);
  methodHash=computeMethodHash();
}

public DeterministicKey(ImmutableList<ChildNumber> childNumberPath,byte[] chainCode,LazyECPoint publicAsPoint,@Nullable BigInteger priv,@Nullable DeterministicKey parent){
  super(priv,compressPoint(checkNotNull(publicAsPoint)));
  checkArgument(chainCode.length == 32);
  this.parent=parent;
  this.childNumberPath=checkNotNull(childNumberPath);
  this.chainCode=Arrays.copyOf(chainCode,chainCode.length);
  this.depth=parent == null ? 0 : parent.depth + 1;
  this.parentFingerprint=(parent != null) ? parent.getFingerprint() : 0;
}

private static void s_uaColSumLtGe(MatrixBlock in,MatrixBlock out,double[] bv,BinaryOperator bOp) throws DMLRuntimeException {
  int agg0=sumRowSumGtLeColSumLtGe(0.0,bv,bOp);
  out.allocateDenseBlock(true);
  Arrays.fill(out.getDenseBlock(),0,out.getNumColumns(),agg0);
  if (agg0 != 0.0)   out.setNonZeros(out.getNumColumns());
  if (in.isEmptyBlock(false))   return;
  SparseBlock sblock=in.getSparseBlock();
  for (int j=0; j < sblock.numRows(); j++)   if (!sblock.isEmpty(j)) {
    int apos=sblock.pos(j);
    int alen=sblock.size(j);
    int[] aix=sblock.indexes(j);
    double[] avals=sblock.values(j);
    for (int i=apos; i < apos + alen; i++) {
      int cnt=sumRowSumGtLeColSumLtGe(avals[i],bv,bOp);
      out.quickSetValue(0,aix[i],cnt);
    }
  }
}

public HeldLocksGrant(BigInteger grantId){
  this.grantId=Preconditions.checkNotNull(grantId);
  creationDateMs=System.currentTimeMillis();
  expirationDateMs=-1;
  lockMap=LockCollections.of();
  lockTimeout=null;
  versionId=null;
}

public void testPosNegFirstShorter(){
  byte aBytes[]={-2,-3,-4,-4,5,14,23,39,48,57,66,5,14,23};
  byte bBytes[]={-128,9,56,100,-2,-76,89,45,91,3,-15,35,26,-117,23,87,-25,-75};
  int aSign=1;
  int bSign=-1;
  byte rBytes[]={73,-92,-48,4,12,6,4,32,48,64,0,8,3};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.and(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public void removeFromAllListeners(MapBean mapBean){
  if (mapBean != null) {
    removeZoomListener((ZoomListener)mapBean);
    mapBean.removeProjectionListener(this);
    scaleField.setText("----");
  }
}

public void testBug19169() throws Exception {
  MysqlDataSource toSerialize=new MysqlDataSource();
  toSerialize.setZeroDateTimeBehavior("convertToNull");
  boolean testBooleanFlag=!toSerialize.getAllowLoadLocalInfile();
  toSerialize.setAllowLoadLocalInfile(testBooleanFlag);
  int testIntFlag=toSerialize.getBlobSendChunkSize() + 1;
  toSerialize.setBlobSendChunkSize(String.valueOf(testIntFlag));
  ByteArrayOutputStream bOut=new ByteArrayOutputStream();
  ObjectOutputStream objOut=new ObjectOutputStream(bOut);
  objOut.writeObject(toSerialize);
  objOut.flush();
  ObjectInputStream objIn=new ObjectInputStream(new ByteArrayInputStream(bOut.toByteArray()));
  MysqlDataSource thawedDs=(MysqlDataSource)objIn.readObject();
  assertEquals("convertToNull",thawedDs.getZeroDateTimeBehavior());
  assertEquals(testBooleanFlag,thawedDs.getAllowLoadLocalInfile());
  assertEquals(testIntFlag,thawedDs.getBlobSendChunkSize());
}

public static <T>FutureW<T> ofSupplier(final Supplier<T> s){
  return FutureW.of(CompletableFuture.supplyAsync(s));
}

@Override public void toData(DataOutput out) throws IOException {
  super.toData(out);
  out.writeLong(refreshInterval);
  DataSerializer.writeObjectArray(alertDefs,out);
}

public static boolean isString(String str){
  return null != stringHashTable.get(str);
}

public void addChangingListener(OnWheelChangedListener listener){
  changingListeners.add(listener);
}

@Override public boolean equals(Object obj){
  if (this == obj) {
    return true;
  }
  if (obj == null) {
    return false;
  }
  if (getClass() != obj.getClass()) {
    return false;
  }
  Diff other=(Diff)obj;
  if (operation != other.operation) {
    return false;
  }
  if (text == null) {
    if (other.text != null) {
      return false;
    }
  }
 else   if (!text.equals(other.text)) {
    return false;
  }
  return true;
}

protected abstract void performDeployerActionOnSingleDeployable(org.codehaus.cargo.container.deployer.Deployer deployer,org.codehaus.cargo.container.deployable.Deployable deployable,org.codehaus.cargo.container.deployer.DeployableMonitor monitor);

@Override public Tree<String> extractBestMaxRuleParse(int start,int end,List<String> sentence){
  return extractBestMaxRuleParse1(start,end,0,sentence);
}

@Override public int hashCode(){
  if (hash == 0) {
    int result=17;
    result=37 * result + range.hashCode();
    long bitsWeight=Double.doubleToLongBits(weight);
    result=37 * result + (int)(bitsWeight ^ (bitsWeight >>> 32));
    hash=result;
  }
  return hash;
}

private Instances voteDataset(Instances dataset) throws Exception {
  for (int i=0; i < dataset.numInstances(); i++) {
    Instance inst=dataset.firstInstance();
    inst=votedReclassifyExample(inst);
    dataset.add(inst);
    dataset.delete(0);
  }
  return dataset;
}

public void testCompareToPosPos1(){
  byte aBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  byte bBytes[]={10,20,30,40,50,60,70,10,20,30};
  int aSign=1;
  int bSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  assertEquals(1,aNumber.compareTo(bNumber));
}

@Override public String chooseClientAlias(final String[] keyType,final Principal[] issuers,final Socket socket){
  if (keyManager != null) {
    return keyManager.chooseClientAlias(keyType,issuers,socket);
  }
  return null;
}

CSSElement parseCSS(InputStreamReader r,HTMLComponent htmlC) throws IOException {
  ExtInputStreamReader er=new ExtInputStreamReader(r);
  return parseCSS(er,htmlC,null,null);
}

protected PooledConnection create(boolean incrementCounter){
  if (incrementCounter)   size.incrementAndGet();
  PooledConnection con=new PooledConnection(getPoolProperties(),this);
  return con;
}

void release(){
  if (sdBuffer != null)   sdBuffer.release();
  if (aclBuffer != null)   aclBuffer.release();
  if (sidList != null) {
    for (    Long sid : sidList) {
      LocalFree(sid);
    }
  }
}

public static void write(File file,CharSequence data,Charset encoding,boolean append) throws IOException {
  String str=data == null ? null : data.toString();
  writeStringToFile(file,str,encoding,append);
}

private void parseSessionExpirationTimeInfo(Element sess){
  String sid=null;
  Long expTime=null;
  String temp=sess.getAttribute("sid");
  if (temp != null) {
    sid=temp;
  }
  temp=sess.getAttribute("expTime");
  if (temp != null) {
    expTime=new Long(temp);
  }
  sessionResponse.addSessionForGivenUUID(sid,expTime);
}

public static long generate(String value){
  int len=value.length();
  long crc=0;
  for (int i=0; i < len; i++)   crc=next(crc,value.charAt(i));
  return crc;
}

public ReplaceDialog(JTextComponent text,FindReplaceActions finderActions){
  super(ActionUtils.getFrameFor(text),false);
  initComponents();
  registerKeyAction(this);
  textComponent=text;
  finder=finderActions;
  textComponent.addCaretListener(this);
  setLocationRelativeTo(text.getRootPane());
}

public String dump(X509Certificate certificate) throws Asn1Exception, IOException {
  try {
    return dump(certificate.getEncoded());
  }
 catch (  IOException ex) {
    throw new Asn1Exception(res.getString("NoAsn1DumpObject.exception.message"),ex);
  }
catch (  CertificateEncodingException ex) {
    throw new Asn1Exception(res.getString("NoAsn1DumpObject.exception.message"),ex);
  }
}

List<String> findInPackage(Test test,String packageName){
  List<String> localClsssOrPkgs=new ArrayList<String>();
  packageName=packageName.replace('.','/');
  Enumeration<URL> urls;
  try {
    urls=classloader.getResources(packageName);
    if (!urls.hasMoreElements()) {
      log.warn("Unable to find any resources for package '" + packageName + "'");
    }
  }
 catch (  IOException ioe) {
    log.warn("Could not read package: " + packageName);
    return localClsssOrPkgs;
  }
  return findInPackageWithUrls(test,packageName,urls);
}

protected abstract Element makeTooltip(DBIDRef id,double x,double y,double dotsize);

public CloudObject(String type,int permissions){
  accessPermissions=permissions;
  values.put(CloudStorage.TYPE_FIELD,type);
}

private static DecoderResult createDecoderResultFromAmbiguousValues(int ecLevel,int[] codewords,int[] erasureArray,int[] ambiguousIndexes,int[][] ambiguousIndexValues) throws FormatException, ChecksumException {
  int[] ambiguousIndexCount=new int[ambiguousIndexes.length];
  int tries=100;
  while (tries-- > 0) {
    for (int i=0; i < ambiguousIndexCount.length; i++) {
      codewords[ambiguousIndexes[i]]=ambiguousIndexValues[i][ambiguousIndexCount[i]];
    }
    try {
      return decodeCodewords(codewords,ecLevel,erasureArray);
    }
 catch (    ChecksumException ignored) {
    }
    if (ambiguousIndexCount.length == 0) {
      throw ChecksumException.getChecksumInstance();
    }
    for (int i=0; i < ambiguousIndexCount.length; i++) {
      if (ambiguousIndexCount[i] < ambiguousIndexValues[i].length - 1) {
        ambiguousIndexCount[i]++;
        break;
      }
 else {
        ambiguousIndexCount[i]=0;
        if (i == ambiguousIndexCount.length - 1) {
          throw ChecksumException.getChecksumInstance();
        }
      }
    }
  }
  throw ChecksumException.getChecksumInstance();
}

public double distance(DoubleVector v){
  double deltaX=v.x - x, deltaY=v.y - y, deltaZ=v.z - z;
  return Math.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ);
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>();
  newVector.add(new Option("\tThe JDBC URL to connect to.\n" + "\t(default: from DatabaseUtils.props file)","url",1,"-url <JDBC URL>"));
  newVector.add(new Option("\tThe user to connect with to the database.\n" + "\t(default: none)","user",1,"-user <name>"));
  newVector.add(new Option("\tThe password to connect with to the database.\n" + "\t(default: none)","password",1,"-password <password>"));
  newVector.add(new Option("\tSQL query of the form\n" + "\t\tSELECT <list of columns>|* FROM <table> [WHERE]\n" + "\tto execute.\n"+ "\t(default: Select * From Results0)","Q",1,"-Q <query>"));
  newVector.add(new Option("\tList of column names uniquely defining a DB row\n" + "\t(separated by ', ').\n" + "\tUsed for incremental loading.\n"+ "\tIf not specified, the key will be determined automatically,\n"+ "\tif possible with the used JDBC driver.\n"+ "\tThe auto ID column created by the DatabaseSaver won't be loaded.","P",1,"-P <list of column names>"));
  newVector.add(new Option("\tSets incremental loading","I",0,"-I"));
  newVector.addElement(new Option("\tReturn sparse rather than normal instances.","S",0,"-S"));
  newVector.add(new Option("\tThe custom properties file to use instead of default ones,\n" + "\tcontaining the database parameters.\n" + "\t(default: none)","custom-props",1,"-custom-props <file>"));
  return newVector.elements();
}

@Override public void dropUser(User user,boolean ignore) throws SQLException {
  String sql=String.format("drop user %s",user.getLogin());
  try {
    execute(sql);
  }
 catch (  SQLException e) {
    if (!ignore) {
      throw e;
    }
 else     if (logger.isDebugEnabled()) {
      logger.debug("Drop user failed: " + sql,e);
    }
  }
}

@Override public boolean eIsSet(int featureID){
switch (featureID) {
case InformationModelPackage.FUNCTIONBLOCK_PROPERTY__NAME:
    return NAME_EDEFAULT == null ? name != null : !NAME_EDEFAULT.equals(name);
case InformationModelPackage.FUNCTIONBLOCK_PROPERTY__DESCRIPTION:
  return DESCRIPTION_EDEFAULT == null ? description != null : !DESCRIPTION_EDEFAULT.equals(description);
case InformationModelPackage.FUNCTIONBLOCK_PROPERTY__TYPE:
return type != null;
}
return super.eIsSet(featureID);
}

public double normalizedDistance(double[] point1,double[] point2) throws Exception {
  return Math.sqrt(distance2(point1,point2)) / point1.length;
}

public static <T>void onNextDropped(T t){
  if (t != null) {
    Consumer<Object> hook=Hooks.onNextDroppedHook;
    if (hook == null) {
      throw Exceptions.failWithCancel();
    }
    hook.accept(t);
  }
}

public static int[] randomInts(int max,int count){
  int[] vals=new int[count];
  for (int i=0; i < count; i++)   vals[i]=SEEDED_RANDOM.nextInt(max);
  return vals;
}

void loadStrings() throws IOException {
  int count=mHeaderItem.stringIdsSize;
  int stringOffsets[]=new int[count];
  seek(mHeaderItem.stringIdsOff);
  for (int i=0; i < count; i++) {
    stringOffsets[i]=readInt();
  }
  mStrings=new String[count];
  seek(stringOffsets[0]);
  for (int i=0; i < count; i++) {
    seek(stringOffsets[i]);
    mStrings[i]=readString();
  }
}

public boolean addGpsDateTimeStampTag(long timestamp){
  ExifTag t=buildTag(TAG_GPS_DATE_STAMP,mGPSDateStampFormat.format(timestamp));
  if (t == null) {
    return false;
  }
  setTag(t);
  mGPSTimeStampCalendar.setTimeInMillis(timestamp);
  t=buildTag(TAG_GPS_TIME_STAMP,new Rational[]{new Rational(mGPSTimeStampCalendar.get(Calendar.HOUR_OF_DAY),1),new Rational(mGPSTimeStampCalendar.get(Calendar.MINUTE),1),new Rational(mGPSTimeStampCalendar.get(Calendar.SECOND),1)});
  if (t == null) {
    return false;
  }
  setTag(t);
  return true;
}

public void addArea(final TimeSection AREA){
  if (null == AREA)   return;
  areas.add(AREA);
  Collections.sort(areas,new TimeSectionComparator());
  fireUpdateEvent(SECTION_EVENT);
}

public String toString(){
  return Descriptor.toClassName(Character.toString(descriptor));
}

private void raiseIOException(String host,int port,String protocol){
  IOExceptionEvent ioError=new IOExceptionEvent(this,host,port,protocol);
  sipProvider.handleEvent(ioError,null);
  setState(SIPDialog.TERMINATED_STATE);
}

public static double incompleteGammaComplement(double a,double x){
  double ans, ax, c, yc, r, t, y, z;
  double pk, pkm1, pkm2, qk, qkm1, qkm2;
  if (x <= 0 || a <= 0)   return 1.0;
  if (x < 1.0 || x < a)   return 1.0 - incompleteGamma(a,x);
  ax=a * Math.log(x) - x - lnGamma(a);
  if (ax < -MAXLOG)   return 0.0;
  ax=Math.exp(ax);
  y=1.0 - a;
  z=x + y + 1.0;
  c=0.0;
  pkm2=1.0;
  qkm2=x;
  pkm1=x + 1.0;
  qkm1=z * x;
  ans=pkm1 / qkm1;
  do {
    c+=1.0;
    y+=1.0;
    z+=2.0;
    yc=y * c;
    pk=pkm1 * z - pkm2 * yc;
    qk=qkm1 * z - qkm2 * yc;
    if (qk != 0) {
      r=pk / qk;
      t=Math.abs((ans - r) / r);
      ans=r;
    }
 else     t=1.0;
    pkm2=pkm1;
    pkm1=pk;
    qkm2=qkm1;
    qkm1=qk;
    if (Math.abs(pk) > big) {
      pkm2*=biginv;
      pkm1*=biginv;
      qkm2*=biginv;
      qkm1*=biginv;
    }
  }
 while (t > MACHEP);
  return ans * ax;
}

@Override public Object deserializeTypedFromObject(JsonParser jp,DeserializationContext ctxt) throws IOException, JsonProcessingException {
  JsonToken t=jp.getCurrentToken();
  if (t == JsonToken.START_OBJECT) {
    t=jp.nextToken();
  }
 else   if (t == JsonToken.START_ARRAY) {
    return _deserializeTypedUsingDefaultImpl(jp,ctxt,null);
  }
 else   if (t != JsonToken.FIELD_NAME) {
    return _deserializeTypedUsingDefaultImpl(jp,ctxt,null);
  }
  TokenBuffer tb=null;
  for (; t == JsonToken.FIELD_NAME; t=jp.nextToken()) {
    String name=jp.getCurrentName();
    jp.nextToken();
    if (_typePropertyName.equals(name)) {
      String typeId=jp.getText();
      JsonDeserializer<Object> deser=_findDeserializer(ctxt,typeId);
      if (tb != null) {
        jp=JsonParserSequence.createFlattened(tb.asParser(jp),jp);
      }
      jp.nextToken();
      return deser.deserialize(jp,ctxt);
    }
    if (tb == null) {
      tb=new TokenBuffer(null);
    }
    tb.writeFieldName(name);
    tb.copyCurrentStructure(jp);
  }
  return _deserializeTypedUsingDefaultImpl(jp,ctxt,tb);
}

public boolean isNavigationAtBottom(){
  return (mSmallestWidthDp >= 600 || mInPortrait);
}

protected int layoutRow(FlowView fv,int rowIndex,int p0){
  int p1=super.layoutRow(fv,rowIndex,p0);
  View row=fv.getView(rowIndex);
  Document doc=fv.getDocument();
  Object i18nFlag=doc.getProperty(AbstractDocument.I18NProperty);
  if ((i18nFlag != null) && i18nFlag.equals(Boolean.TRUE)) {
    int n=row.getViewCount();
    if (n > 1) {
      AbstractDocument d=(AbstractDocument)fv.getDocument();
      Element bidiRoot=d.getBidiRootElement();
      byte[] levels=new byte[n];
      View[] reorder=new View[n];
      for (int i=0; i < n; i++) {
        View v=row.getView(i);
        int bidiIndex=bidiRoot.getElementIndex(v.getStartOffset());
        Element bidiElem=bidiRoot.getElement(bidiIndex);
        levels[i]=(byte)StyleConstants.getBidiLevel(bidiElem.getAttributes());
        reorder[i]=v;
      }
      BidiUtils.reorderVisually(levels,reorder);
      row.replace(0,n,reorder);
    }
  }
  return p1;
}

public Generator(String propFile){
  try {
    BufferedInputStream bi=null;
    try {
      bi=new BufferedInputStream(new FileInputStream(propFile));
      props.load(bi);
    }
  finally {
      if (bi != null) {
        bi.close();
      }
    }
  }
 catch (  Exception e) {
    setDefaultProps();
  }
}

public static void clearLoggingBehaviors(){
synchronized (loggingBehaviors) {
    loggingBehaviors.clear();
  }
}

protected void auditOp(URI tenantId,URI userId,OperationTypeEnum opType,boolean operationalStatus,String operationStage,Object... descparams){
  _auditMgr.recordAuditLog(tenantId,userId,EVENT_SERVICE_TYPE,opType,System.currentTimeMillis(),operationalStatus ? AuditLogManager.AUDITLOG_SUCCESS : AuditLogManager.AUDITLOG_FAILURE,operationStage,descparams);
}

@VisibleForTesting protected Process startExecutorProcess(int container){
  return ShellUtils.runASyncProcess(getExecutorCommand(container),new File(LocalContext.workingDirectory(config)),Integer.toString(container));
}

private boolean isItemAtPositionSelectable(int position){
  return !mUnselectableItems.contains(position);
}

public Builder addEngineSettings(final String engineName,final List<String> imports,final List<String> staticImports,final List<String> scripts,final Map<String,Object> config){
  if (null == imports)   throw new IllegalArgumentException("imports cannot be null");
  if (null == staticImports)   throw new IllegalArgumentException("staticImports cannot be null");
  if (null == scripts)   throw new IllegalArgumentException("scripts cannot be null");
  final Map<String,Object> m=null == config ? Collections.emptyMap() : config;
  settings.put(engineName,new EngineSettings(imports,staticImports,scripts,m));
  return this;
}

private void displayPopupMenu(final MouseEvent event){
  final int selectedIndex=getSelectionIndex(event);
  if (selectedIndex != -1) {
    final JPopupMenu popupMenu=getPopupMenu(event.getX(),event.getY(),selectedIndex);
    if (popupMenu != null) {
      popupMenu.show(this,event.getX(),event.getY());
    }
  }
}

protected void handleSelected(StructuredSelection selection){
  IStatus status=new Status(IStatus.OK,PlatformUI.PLUGIN_ID,IStatus.OK,EMPTY_STRING,null);
  Object[] lastSelection=currentSelection;
  currentSelection=selection.toArray();
  if (selection.size() == 0) {
    status=new Status(IStatus.ERROR,PlatformUI.PLUGIN_ID,IStatus.ERROR,EMPTY_STRING,null);
    if (lastSelection != null && getListSelectionLabelDecorator() != null) {
      list.update(lastSelection,null);
    }
    currentSelection=null;
  }
 else {
    status=new Status(IStatus.ERROR,PlatformUI.PLUGIN_ID,IStatus.ERROR,EMPTY_STRING,null);
    List items=selection.toList();
    Object item=null;
    IStatus tempStatus=null;
    for (Iterator it=items.iterator(); it.hasNext(); ) {
      Object o=it.next();
      if (o instanceof ItemsListSeparator) {
        continue;
      }
      item=o;
      tempStatus=validateItem(item);
      if (tempStatus.isOK()) {
        status=new Status(IStatus.OK,PlatformUI.PLUGIN_ID,IStatus.OK,EMPTY_STRING,null);
      }
 else {
        status=tempStatus;
        break;
      }
    }
    if (lastSelection != null && getListSelectionLabelDecorator() != null) {
      list.update(lastSelection,null);
    }
    if (getListSelectionLabelDecorator() != null) {
      list.update(currentSelection,null);
    }
  }
  refreshDetails();
  updateStatus(status);
}

public LinkedList<Diff> diff_main(String text1,String text2,boolean checklines){
  long deadline;
  if (Diff_Timeout <= 0) {
    deadline=Long.MAX_VALUE;
  }
 else {
    deadline=System.currentTimeMillis() + (long)(Diff_Timeout * 1000);
  }
  return diff_main(text1,text2,checklines,deadline);
}

private void updateAltDeviceid(NetworkFCZoneInfo fabricInfo,String fabricId,String fabricWWN,String key,Map<String,NetworkLite> fabricId2Network){
  if (fabricInfo != null && fabricInfo.getAltNetworkDeviceId() == null) {
    if (fabricId2Network.get(key) == null) {
      NetworkLite network=NetworkUtil.getNetworkLiteByFabricId(fabricId,fabricWWN,_dbClient);
      if (network != null) {
        fabricId2Network.put(key,network);
        URI id=fabricInfo.getNetworkDeviceId();
        for (        String strUri : network.getNetworkSystems()) {
          if (!strUri.equals(id.toString())) {
            id=URI.create(strUri);
            break;
          }
        }
        fabricInfo.setAltNetworkDeviceId(id);
      }
    }
  }
}

public static NetworkInfo fromVersion(final byte version){
  for (  final NetworkInfo info : KNOWN_NETWORKS) {
    if (version == info.getVersion()) {
      return info;
    }
  }
  throw new IllegalArgumentException(String.format("Invalid version '%d' is not a known network version",version));
}

public static String lcfirst(String input){
  return withFirst(input,null);
}

public void write(ByteCodeWriter out) throws IOException {
  out.writeUTF8Const(getName());
  TempOutputStream ts=new TempOutputStream();
  ByteCodeWriter o2=new ByteCodeWriter(ts,out.getJavaClass());
  o2.writeShort(_exceptions.size());
  for (int i=0; i < _exceptions.size(); i++) {
    String exn=_exceptions.get(i);
    o2.writeClass(exn);
  }
  ts.close();
  out.writeInt(ts.getLength());
  TempBuffer ptr=ts.getHead();
  for (; ptr != null; ptr=ptr.next())   out.write(ptr.buffer(),0,ptr.length());
  ts.destroy();
}

public synchronized AddressbookEntry remove(String name,Set<String> categoriesToRemove){
  name=StringUtil.toLowerCase(name);
  AddressbookEntry currentEntry=entries.get(name);
  if (currentEntry != null) {
    Set<String> currentCategories=currentEntry.getCategories();
    for (    String category : categoriesToRemove) {
      currentCategories.remove(category);
    }
    AddressbookEntry changedEntry=new AddressbookEntry(name,currentCategories);
    entries.put(name,changedEntry);
    if (!currentEntry.equalsFully(changedEntry)) {
      saveOnChange();
    }
    return changedEntry;
  }
  return null;
}

public static byte[] decode(byte[] input,int offset,int len,int flags){
  Decoder decoder=new Decoder(flags,new byte[len * 3 / 4]);
  if (!decoder.process(input,offset,len,true)) {
    throw new IllegalArgumentException("bad base-64");
  }
  if (decoder.op == decoder.output.length) {
    return decoder.output;
  }
  byte[] temp=new byte[decoder.op];
  System.arraycopy(decoder.output,0,temp,0,decoder.op);
  return temp;
}

public String shortestMatch(String input){
  TrieNode node=root;
  for (int i=input.length() - 1; i >= 0; i--) {
    node=node.getChild(input.charAt(i));
    if (node == null)     return null;
    if (node.isTerminal())     return input.substring(i);
  }
  return null;
}

public static boolean isWindows95(){
  return osName.indexOf("Windows 95") > -1 && osVersion.equals("4.0");
}

public static RHExtension hasRHExtensions(ConfigImpl config,ExtensionDefintion ed) throws PageException, SAXException, IOException {
  XMLConfigAdmin admin=new XMLConfigAdmin(config,null);
  return admin._hasRHExtensions(config,ed);
}

public void addQueryToHistory(String sql){
  queryHistory.remove(sql);
  queryHistory.addFirst(sql);
  while (historySize >= 0 && queryHistory.size() > historySize) {
    queryHistory.removeLast();
  }
}

public StringBuilder encodeBody(StringBuilder retval){
  retval.append(LESS_THAN);
  errorInfo.encode(retval);
  retval.append(GREATER_THAN);
  if (!parameters.isEmpty()) {
    retval.append(SEMICOLON);
    parameters.encode(retval);
  }
  return retval;
}

public final <R>ParallelFlux<R> reduce(Supplier<R> initialSupplier,BiFunction<R,T,R> reducer){
  Objects.requireNonNull(initialSupplier,"initialSupplier");
  Objects.requireNonNull(reducer,"reducer");
  return onAssembly(new ParallelReduce<>(this,initialSupplier,reducer));
}

private void handleButtonEvent(final Event event){
switch (event.type) {
case SWT.FocusIn:
{
      handleFocusEvents(SWT.FocusIn);
      break;
    }
case SWT.Selection:
{
    changeVisibilityOfPopupWindow(!isDropped());
    break;
  }
}
}

private void performUpdateOperations(Context context,Request request,JsonValue afterValue,JsonValue beforeValue) throws ResourceException {
  final String managedId=getManagedObjectId(context);
  activityLogger.log(context,request,"update",getManagedObjectPath(context),beforeValue,afterValue,Status.SUCCESS);
  managedObjectSetService.update(context,newUpdateRequest(managedId,afterValue),managedId,null,beforeValue,afterValue,new HashSet<>(Arrays.asList(propertyPtr)),new HashSet<>(Arrays.asList(propertyPtr)));
}

private boolean hasNextInetSocketAddress(){
  return nextInetSocketAddressIndex < inetSocketAddresses.size();
}

public static Boolean canStringBeInlineEncoded(String skey){
  if (skey.length() > getMaxInlineStringKey(MAX_LONGS_USED_FOR_STRING_KEY,true)) {
    return null;
  }
  if (isByteEncodingOk(skey)) {
    return Boolean.TRUE;
  }
 else {
    if (skey.length() > getMaxInlineStringKey(MAX_LONGS_USED_FOR_STRING_KEY,false)) {
      return null;
    }
 else {
      return Boolean.FALSE;
    }
  }
}

public Builder(Date created,Date lastModified){
  this.created=created != null ? new Date(created.getTime()) : null;
  this.lastModified=lastModified != null ? new Date(lastModified.getTime()) : null;
}

@Override public void writeByteStream(InputStream is) throws IOException {
  while (true) {
    int len=SIZE - _offset - 3;
    if (len < 16) {
      flushBuffer();
      len=SIZE - _offset - 3;
    }
    len=is.read(_buffer,_offset + 3,len);
    if (len <= 0) {
      _buffer[_offset++]=BC_BINARY_DIRECT;
      return;
    }
    _buffer[_offset + 0]=(byte)BC_BINARY_CHUNK;
    _buffer[_offset + 1]=(byte)(len >> 8);
    _buffer[_offset + 2]=(byte)(len);
    _offset+=len + 3;
  }
}

public void removeSelectionChangeListener(final SelectionChangeListener listener){
  checkWidget();
  if (listener == null) {
    SWT.error(SWT.ERROR_NULL_ARGUMENT);
  }
  if (selectionChangeListeners == null) {
    return;
  }
  selectionChangeListeners.remove(listener);
}

protected final void refreshLoadingViewsSize(){
  final int maximumPullScroll=(int)(getMaximumPullScroll() * 1.2f);
  int pLeft=getPaddingLeft();
  int pTop=getPaddingTop();
  int pRight=getPaddingRight();
  int pBottom=getPaddingBottom();
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    if (mMode.showHeaderLoadingLayout()) {
      mHeaderLayout.setWidth(maximumPullScroll);
      pLeft=-maximumPullScroll;
    }
 else {
      pLeft=0;
    }
  if (mMode.showFooterLoadingLayout()) {
    mFooterLayout.setWidth(maximumPullScroll);
    pRight=-maximumPullScroll;
  }
 else {
    pRight=0;
  }
break;
case VERTICAL:
if (mMode.showHeaderLoadingLayout()) {
mHeaderLayout.setHeight(maximumPullScroll);
pTop=-maximumPullScroll;
}
 else {
pTop=0;
}
if (mMode.showFooterLoadingLayout()) {
mFooterLayout.setHeight(maximumPullScroll);
pBottom=-maximumPullScroll;
}
 else {
pBottom=0;
}
break;
}
if (DEBUG) {
Log.d(LOG_TAG,String.format("Setting Padding. L: %d, T: %d, R: %d, B: %d",pLeft,pTop,pRight,pBottom));
}
setPadding(pLeft,pTop,pRight,pBottom);
}

public Track addTrack(String name,String type){
  Track track=getTrackByName(name,type);
  if (track == null) {
    _IdNumber++;
    String id=_id + "s" + Integer.toString(_IdNumber);
    log.debug("Adding new ({}) to ({}) track name ({}) id: {}",type,getName(),name,id);
    track=new Track(id,name,type,this);
    register(track);
  }
  resetMoves();
  return track;
}

SQLiteLoaderObserver registerLoader(final SQLiteLoader loader,final String table){
  Logger.d(TAG,"Add Loader Observer: %s",table);
  final SQLiteLoaderObserver entry=new SQLiteLoaderObserver(loader,table);
  mActiveLoaders.add(entry);
  return entry;
}

public void unbindTree(Container ui){
  int componentCount=ui.getComponentCount();
  for (int iter=0; iter < componentCount; iter++) {
    Component c=ui.getComponentAt(iter);
    if (c instanceof Container) {
      unbindTree((Container)c);
      continue;
    }
    String bind=c.getCloudBoundProperty();
    if (bind != null && bind.length() > 0) {
      String attributeName=c.getCloudDestinationProperty();
      if (attributeName != null) {
        unbindProperty(c,bind);
      }
    }
  }
}

protected List<Item> toItems(List<Model> models){
  if (models == null) {
    return Collections.emptyList();
  }
  int size=models.size();
  List<Item> items=new ArrayList<>(size);
  for (int i=0; i < size; i++) {
    items.add(toItem(models.get(i)));
  }
  return items;
}

public void apply(FilterSet filterSet,FilterServiceGranularLockFactory lockFactory){
  for (  FilterSetEntry entry : filterSet.getFilters()) {
    add(entry.getFilterValueSet(),entry.getHandle(),lockFactory);
  }
}

public void addConstraintCommand(DefineCommand command){
  if (command instanceof CreateIndex) {
    constraintCommands.add(command);
  }
 else {
    AlterTableAddConstraint con=(AlterTableAddConstraint)command;
    boolean alreadySet;
    if (con.getType() == CommandInterface.ALTER_TABLE_ADD_CONSTRAINT_PRIMARY_KEY) {
      alreadySet=setPrimaryKeyColumns(con.getIndexColumns());
    }
 else {
      alreadySet=false;
    }
    if (!alreadySet) {
      constraintCommands.add(command);
    }
  }
}

public void testInviteCancel(){
  doCancelTest(true);
}

private static byte[] lmv2Response(final byte[] hash,final byte[] challenge,final byte[] clientData) throws AuthenticationException {
  final HMACMD5 hmacMD5=new HMACMD5(hash);
  hmacMD5.update(challenge);
  hmacMD5.update(clientData);
  final byte[] mac=hmacMD5.getOutput();
  final byte[] lmv2Response=new byte[mac.length + clientData.length];
  System.arraycopy(mac,0,lmv2Response,0,mac.length);
  System.arraycopy(clientData,0,lmv2Response,mac.length,clientData.length);
  return lmv2Response;
}

static <E>E checkType(E obj,Class<? extends E> type){
  if (obj != null && !type.isInstance(obj)) {
    throw new ClassCastException("Attempt to insert element of type " + obj.getClass() + " into collection of type "+ type);
  }
  return obj;
}

public void testValueOfLongPositive1(){
  long longVal=268209772258930018L;
  BigInteger aNumber=BigInteger.valueOf(longVal);
  byte rBytes[]={3,-72,-33,93,-24,-56,45,98};
  byte resBytes[]=new byte[rBytes.length];
  resBytes=aNumber.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,aNumber.signum());
}

public void destroy(){
  m_filterConfig=null;
}

@Override public Parcelable onSaveInstanceState(){
  String path=mPhotoFilePath.get();
  if (path == null)   return null;
  Bundle bundle=new Bundle();
  bundle.putString("photoFilePath",path);
  return bundle;
}

public static boolean createFolder(String folderPath){
  if (!TextUtils.isEmpty(folderPath)) {
    File folder=new File(folderPath);
    return createFolder(folder);
  }
  return false;
}

public void test_emptyJournal() throws IOException, InterruptedException, ExecutionException {
  final File out=File.createTempFile(getName(),Options.JNL);
  try {
    final Journal src=getStore(getProperties());
    try {
      final Future<Map<String,BaseIndexStats>> f=src.warmUp(null);
      final Map<String,BaseIndexStats> map=f.get();
      assertEquals(0,map.size());
    }
  finally {
      src.destroy();
    }
  }
  finally {
    out.delete();
  }
}

@Override public void keyReleased(KeyEvent e){
  char[] password1=null;
  char[] password2=null;
  if (passwordField != null) {
    password1=passwordField.getPassword();
  }
  if (repeatPasswordField != null) {
    password2=repeatPasswordField.getPassword();
  }
  boolean tickLabelVisible=false;
  if (password1 != null && password2 != null) {
    if (Arrays.equals(password1,password2)) {
      tickLabelVisible=true;
    }
  }
  tickLabel.setVisible(tickLabelVisible);
  clearMessages();
  for (int i=0; i < password1.length; i++) {
    password1[i]=0;
  }
  for (int i=0; i < password2.length; i++) {
    password2[i]=0;
  }
}

private static PeriodFormatterAndValue selectFormatter(Period daysPeriod){
  int days=daysPeriod.getDays();
  if (days > 0) {
    return pav(DAY_FORMATTER,days);
  }
  int hours=daysPeriod.getHours();
  if (hours > 0) {
    return pav(HOUR_FORMATTER,hours);
  }
  int minutes=daysPeriod.getMinutes();
  if (minutes > 0) {
    return pav(MINUTE_FORMATTER,minutes);
  }
  int seconds=daysPeriod.getSeconds();
  if (seconds > 0) {
    return pav(SECOND_FORMATTER,seconds);
  }
  return null;
}

void addArg(String arg){
  args.add(arg);
}

public java.lang.StringBuffer insert(int offset,float f){
  internal.insert(offset,f);
  return this;
}

private void updateGwt27On(IJavaProject javaProject,List<String> programArgs,int indexDisabled,int indexEnabled,boolean superDevModeEnabled){
  if (indexEnabled > -1) {
    programArgs.remove(indexEnabled);
  }
  if (indexDisabled > -1) {
    programArgs.remove(indexDisabled);
  }
  if (!superDevModeEnabled) {
    programArgs.add(0,SUPERDEVMODE_DISABLED_ARG);
  }
}

default boolean smashBlock(EntityPlayer player,World world,BlockPos pos,IBlockState state,ToolTier tier){
  ToolTier required=getRequiredTier(state);
  if (required != null && tier.isGreaterThanOrEqualTo(required)) {
    float luck=tier.ordinal() * 0.25F;
    List<ItemStack> drops=getDrops(player,world,pos,state,luck);
    if (drops.size() > 0) {
      if (!world.isRemote) {
        world.setBlockToAir(pos);
        for (        ItemStack drop : drops) {
          spawnAsEntity(world,pos,drop);
        }
      }
      return true;
    }
  }
  return false;
}

protected String fetchNativeId(String nativeGuid){
  String[] token=nativeGuid.split(VNXFileConstants.PLUS_SEPERATOR);
  return token[token.length - 1];
}

public static String toString(final double value){
  return Double.toString(value);
}

public long rss(){
  return Long.parseLong(fields[23]);
}

public static void init(Context context,boolean is_top){
  cameraManager=new CameraManager(context,is_top);
}

public static PlainText plain(float text){
  return plain(Float.toString(text));
}

public final void append(char value){
  char[] chunk;
  if (m_firstFree < m_chunkSize)   chunk=m_array[m_lastChunk];
 else {
    int i=m_array.length;
    if (m_lastChunk + 1 == i) {
      char[][] newarray=new char[i + 16][];
      System.arraycopy(m_array,0,newarray,0,i);
      m_array=newarray;
    }
    chunk=m_array[++m_lastChunk];
    if (chunk == null) {
      if (m_lastChunk == 1 << m_rebundleBits && m_chunkBits < m_maxChunkBits) {
        m_innerFSB=new FastStringBuffer(this);
      }
      chunk=m_array[m_lastChunk]=new char[m_chunkSize];
    }
    m_firstFree=0;
  }
  chunk[m_firstFree++]=value;
}

public Socket createSocket(InetAddress address,int port,InetAddress myAddress,int myPort) throws IOException {
  if (myAddress != null) {
    Socket sock=new Socket();
    sock.bind(new InetSocketAddress(myAddress,0));
    try {
      sock.connect(new InetSocketAddress(address,port),8000);
    }
 catch (    SocketTimeoutException e) {
      throw new ConnectException("Socket timeout error (8sec)" + address + ":"+ port);
    }
    return sock;
  }
 else {
    Socket sock=new Socket();
    if (myPort != 0) {
      sock.bind(new InetSocketAddress(port));
    }
    try {
      sock.connect(new InetSocketAddress(address,port),8000);
    }
 catch (    SocketTimeoutException e) {
      throw new ConnectException("Socket timeout error (8sec)" + address + ":"+ port);
    }
    return sock;
  }
}

private static void updateClusterTenant(DbClient dbClient,URI dataCenterId,URI tenantId){
  List<NamedElement> clustersUris=listChildren(dbClient,dataCenterId,Cluster.class,"label","vcenterDataCenter");
  for (  NamedElement clusterUri : clustersUris) {
    Cluster cluster=dbClient.queryObject(Cluster.class,clusterUri.getId());
    if (cluster != null) {
      cluster.setTenant(tenantId);
      dbClient.persistObject(cluster);
    }
  }
}

public static int prefixLength(char[] s1,char[] s2){
  int len=0;
  int max=Math.min(s1.length,s2.length);
  for (int i=0; i < max && s1[i] == s2[i]; ++i)   ++len;
  return len;
}

private static boolean isLessThanOneWeek(Date date){
  Calendar calendar=Calendar.getInstance();
  calendar.add(Calendar.DAY_OF_MONTH,-6);
  return date.after(calendar.getTime());
}

private int colToLoc(int col,Vector<MappingPair> vec){
  int loc=col;
  for (int i=0; (i < vec.size()) && (vec.elementAt(i).col <= col); i++) {
    loc=loc + vec.elementAt(i).inc;
  }
  return loc;
}

protected boolean[] canHandleNClasses(AttrTypes attrTypes,int numClasses){
  print("more than two class problems");
  printAttributeSummary(attrTypes,Attribute.NOMINAL);
  print("...");
  ArrayList<String> accepts=new ArrayList<String>();
  accepts.add("number");
  accepts.add("class");
  int numTrain=getNumInstances(), numTest=getNumInstances(), missingLevel=0;
  boolean attributeMissing=false, classMissing=false;
  int numAttr=1, attrIndex=0;
  return runBasicTest(attrTypes,numAttr,attrIndex,Attribute.NOMINAL,missingLevel,attributeMissing,classMissing,numTrain,numTest,numClasses,accepts);
}

public TypeVariable typeVariable(){
  int id=typeVariableList.size();
  typeVariableList.add(null);
  TypeVariable result=new TypeVariable(id,this);
  typeVariableList.set(id,result);
  return result;
}

public static char[] createTypeParameterSignature(char[] typeParameterName,char[][] boundSignatures){
  int length=boundSignatures.length;
  if (length == 0) {
    return CharOperation.append(typeParameterName,C_COLON);
  }
  int boundsSize=0;
  for (int i=0; i < length; i++) {
    boundsSize+=boundSignatures[i].length + 1;
  }
  int nameLength=typeParameterName.length;
  char[] result=new char[nameLength + boundsSize];
  System.arraycopy(typeParameterName,0,result,0,nameLength);
  int index=nameLength;
  for (int i=0; i < length; i++) {
    result[index++]=C_COLON;
    int boundLength=boundSignatures[i].length;
    System.arraycopy(boundSignatures[i],0,result,index,boundLength);
    index+=boundLength;
  }
  return result;
}

void cancelStatement(String sessionId,int statementId){
  for (  TcpServerThread c : New.arrayList(running)) {
    if (c != null) {
      c.cancelStatement(sessionId,statementId);
    }
  }
}

public static double parseDouble(String s){
  if (POSITIVE_INFINITY.equals(s)) {
    return Double.POSITIVE_INFINITY;
  }
 else   if (NEGATIVE_INFINITY.equals(s)) {
    return Double.NEGATIVE_INFINITY;
  }
 else   if (NaN.equals(s)) {
    return Double.NaN;
  }
 else {
    s=trimPlusSign(s);
    return Double.parseDouble(s);
  }
}

public void finishZombieTasksWithError(){
  List<PollableTask> zombiePollableTasks;
  do {
    logger.debug("Fetching 5 zombie pollable tasks to clean up");
    PageRequest pageable=new PageRequest(0,5);
    zombiePollableTasks=pollableTaskRepository.findZombiePollableTasks(pageable);
    for (    PollableTask zombiePollableTask : zombiePollableTasks) {
      markAsFinishedWithError(zombiePollableTask);
    }
  }
 while (!zombiePollableTasks.isEmpty());
}

public CookieEntity(URI uri,HttpCookie cookie){
  this.uri=uri == null ? null : uri.toString();
  this.name=cookie.getName();
  this.value=cookie.getValue();
  this.comment=cookie.getComment();
  this.commentURL=cookie.getCommentURL();
  this.discard=cookie.getDiscard();
  this.domain=cookie.getDomain();
  long maxAge=cookie.getMaxAge();
  if (maxAge != -1 && maxAge > 0) {
    this.expiry=(maxAge * 1000L) + System.currentTimeMillis();
    if (this.expiry < 0L)     this.expiry=HeaderUtil.getMaxExpiryMillis();
  }
 else   this.expiry=-1L;
  this.path=cookie.getPath();
  if (!TextUtils.isEmpty(path) && path.length() > 1 && path.endsWith("/")) {
    this.path=path.substring(0,path.length() - 1);
  }
  this.portList=cookie.getPortlist();
  this.secure=cookie.getSecure();
  this.version=cookie.getVersion();
}

public void addValue(T value){
  list.addFirst(value);
  total+=Double.valueOf(value.toString());
  trim();
}

private void updateTrafficMask(){
  int queueSize=trafficControllingSessions.size();
  while (queueSize > 0) {
    S session=trafficControllingSessions.poll();
    if (session == null) {
      return;
    }
    SessionState state=getState(session);
switch (state) {
case OPENED:
      updateTrafficControl(session);
    break;
case CLOSING:
  break;
case OPENING:
trafficControllingSessions.add(session);
break;
default :
throw new IllegalStateException(String.valueOf(state));
}
queueSize--;
}
}

public Object createSoftWeakRef(Object o){
  return new WeakReference(o);
}

public boolean hasEntries(){
  return !fEntries.isEmpty();
}

protected String convertToString(Object value) throws Throwable {
  String result=null;
  if (useLocaleFormat && value instanceof Number) {
    NumberFormat format=getFormat();
    format.setGroupingUsed(false);
    result=format.format(value);
  }
 else {
    result=value.toString();
  }
  return result;
}

private static void decodeC40Segment(BitSource bits,StringBuilder result) throws FormatException {
  boolean upperShift=false;
  int[] cValues=new int[3];
  int shift=0;
  do {
    if (bits.available() == 8) {
      return;
    }
    int firstByte=bits.readBits(8);
    if (firstByte == 254) {
      return;
    }
    parseTwoBytes(firstByte,bits.readBits(8),cValues);
    for (int i=0; i < 3; i++) {
      int cValue=cValues[i];
switch (shift) {
case 0:
        if (cValue < 3) {
          shift=cValue + 1;
        }
 else         if (cValue < C40_BASIC_SET_CHARS.length) {
          char c40char=C40_BASIC_SET_CHARS[cValue];
          if (upperShift) {
            result.append((char)(c40char + 128));
            upperShift=false;
          }
 else {
            result.append(c40char);
          }
        }
 else {
          throw FormatException.getFormatInstance();
        }
      break;
case 1:
    if (upperShift) {
      result.append((char)(cValue + 128));
      upperShift=false;
    }
 else {
      result.append((char)cValue);
    }
  shift=0;
break;
case 2:
if (cValue < C40_SHIFT2_SET_CHARS.length) {
char c40char=C40_SHIFT2_SET_CHARS[cValue];
if (upperShift) {
  result.append((char)(c40char + 128));
  upperShift=false;
}
 else {
  result.append(c40char);
}
}
 else if (cValue == 27) {
result.append((char)29);
}
 else if (cValue == 30) {
upperShift=true;
}
 else {
throw FormatException.getFormatInstance();
}
shift=0;
break;
case 3:
if (upperShift) {
result.append((char)(cValue + 224));
upperShift=false;
}
 else {
result.append((char)(cValue + 96));
}
shift=0;
break;
default :
throw FormatException.getFormatInstance();
}
}
}
 while (bits.available() > 0);
}

public EsriShapeExport(OMGraphicList list,Projection proj,String pathToFile){
  setGraphicList(list);
  projection=proj;
  filePath=pathToFile;
  DEBUG=logger.isLoggable(Level.FINE);
}

public void clear(){
  oredCriteria.clear();
  orderByClause=null;
  distinct=false;
}

private void checkLogFolder(){
  File folder=new File(folderPath);
  if (!folder.exists()) {
    folder.mkdirs();
  }
}

private void testCompleteOnTimeout_timesOut(Integer v){
  long timeoutMillis=timeoutMillis();
  CompletableFuture<Integer> f=new CompletableFuture<>();
  long startTime=System.nanoTime();
  assertSame(f,f.completeOnTimeout(v,timeoutMillis,MILLISECONDS));
  assertSame(v,f.join());
  assertTrue(millisElapsedSince(startTime) >= timeoutMillis);
  f.complete(99);
  checkCompletedNormally(f,v);
}

private synchronized void reschedule(long millis){
  currentFut=null;
  if (!closed) {
    SCHEDULER.schedule(null,millis,TimeUnit.MILLISECONDS);
  }
 else {
    try {
      underlying.close();
    }
 catch (    Exception ex) {
      LOG.log(Level.WARNING,"failed to close resolver " + underlying.configString(),ex);
    }
  }
}

public static ContentVerifierProvider createDefaultContentVerifier(PublicKey key) throws OperatorCreationException {
  if ("RSA" == key.getAlgorithm()) {
    return SUN_VERIFICATION_BUILDER.build(key);
  }
 else {
    return BC_VERIFICATION_BUILDER.build(key);
  }
}

public static Uri fromFile(File file){
  if (file == null) {
    throw new NullPointerException("file");
  }
  PathPart path=PathPart.fromDecoded(file.getAbsolutePath());
  return new HierarchicalUri("file",Part.EMPTY,path,Part.NULL,Part.NULL);
}

public void addRule(final Rule rule){
  rule.setId(ruleIdCounter++);
  rules.add(rule);
}

public static Object serializeClone(final Object obj) throws IOException, ClassNotFoundException {
  ByteArrayOutputStream memOut=new ByteArrayOutputStream();
  ObjectOutputStream objOut=new ObjectOutputStream(memOut);
  objOut.writeObject(obj);
  objOut.close();
  ByteArrayInputStream src=new ByteArrayInputStream(memOut.toByteArray());
  ObjectInputStream objIs=new ObjectInputStream(src);
  return objIs.readObject();
}

private static String linkForClassName(String name){
  return name.replace('.','/') + ".html";
}

protected void handleElementDeleted(IEditorInput fileEditorInput){
  fireElementDeleted(fileEditorInput);
}

public void assertTextPresent(String expected,String actual){
  if ((actual == null) || (!actual.contains(expected))) {
    throw new AssertionFailedError("expected presence of [" + expected + "], but was ["+ actual+ "]");
  }
}

public void testUsingProxySelector() throws Exception {
  MockServer server=new MockServer("server");
  MockServer proxy=new MockServer("proxy");
  URL url=new URL("http://localhost:" + server.port());
  ProxySelector defPS=ProxySelector.getDefault();
  ProxySelector.setDefault(new TestProxySelector(server.port(),proxy.port()));
  try {
    HttpURLConnection connection=(HttpURLConnection)url.openConnection();
    connection.setConnectTimeout(2000);
    connection.setReadTimeout(2000);
    server.start();
synchronized (bound) {
      if (!server.started)       bound.wait(5000);
    }
    proxy.start();
synchronized (bound) {
      if (!proxy.started)       bound.wait(5000);
    }
    connection.connect();
    server.join();
    proxy.join();
    assertTrue("Connection does not use proxy",connection.usingProxy());
    assertTrue("Proxy server was not used",proxy.accepted);
    connection.disconnect();
    assertTrue("usingProxy broken after disconnect",connection.usingProxy());
  }
  finally {
    ProxySelector.setDefault(defPS);
  }
}

public String codeCleanPipeline(String contents){
  if (contents == null) {
    return Values.EMPTYSTRING;
  }
  StringBuilder indexContents=new StringBuilder();
  char[] firstReplacements={'<','>',')','(','[',']','|','=',','};
  for (  char c : firstReplacements) {
    contents=contents.replace(c,' ');
  }
  indexContents.append(" ");
  indexContents.append(contents);
  char[] secondReplacements={';','{','}','/'};
  for (  char c : secondReplacements) {
    contents=contents.replace(c,' ');
  }
  indexContents.append(" ");
  indexContents.append(contents);
  char[] forthReplacements={'"','\''};
  for (  char c : forthReplacements) {
    contents=contents.replace(c,' ');
  }
  indexContents.append(" ");
  indexContents.append(contents);
  char[] replacements={'\'','"','.',';','=','(',')','[',']','_',';','@','#'};
  for (  char c : replacements) {
    contents=contents.replace(c,' ');
  }
  indexContents.append(" ");
  indexContents.append(contents);
  char[] thirdReplacements={'-'};
  for (  char c : thirdReplacements) {
    contents=contents.replace(c,' ');
  }
  indexContents.append(" ");
  indexContents.append(contents);
  return indexContents.toString();
}

public static String mrpa2sampa(String voicePhoneme){
  if (mrpa2sampa.containsKey(voicePhoneme))   return mrpa2sampa.get(voicePhoneme);
 else   return voicePhoneme;
}

public static XPath2FilterContainer newInstanceIntersect(Document doc,String xpath2filter){
  return new XPath2FilterContainer(doc,xpath2filter,XPath2FilterContainer._ATT_FILTER_VALUE_INTERSECT);
}

public int lineToY(int line){
  FontMetrics fm=painter.getFontMetrics();
  return (line - firstLine) * fm.getHeight() - (fm.getLeading() + fm.getMaxDescent());
}

public void removeItemChangedListener(ItemChangedListener listener){
  itemChangedListeners.remove(listener);
}

public boolean hasAmbigPrefix(){
  return (name.startsWith(ambigPrefix));
}

public OrderedThreadPoolExecutor(int maximumPoolSize){
  this(DEFAULT_INITIAL_THREAD_POOL_SIZE,maximumPoolSize,DEFAULT_KEEP_ALIVE,TimeUnit.SECONDS,Executors.defaultThreadFactory(),null);
}

private String parseMalformed(String urlString){
  if (parts != null && !parts.isEmpty()) {
    String ret;
    for (    URLPart part : parts) {
switch (part) {
case PROTOCOL:
        ret=applyPattern(REGEX_PROTOCOL,urlString);
      break;
case PORT:
    ret=applyPattern(REGEX_PORT,urlString);
  break;
case QUERY:
ret=applyPattern(REGEX_QUERY,urlString);
break;
case WHOLE:
ret=urlString;
break;
default :
ret=urlString;
}
if (!Strings.isNullOrEmpty(ret)) {
return ret;
}
}
}
return urlString;
}

private boolean relocate(){
  boolean finished=true;
  for (  Relocatable relocatable : this.relocatables) {
    finished&=relocatable.relocate();
  }
  return finished;
}

@SuppressWarnings({"ForLoopReplaceableByForEach","unchecked"}) private Map<K,EntryProcessorResult> updateWithBatch(GridCacheOperation op,Collection<? extends K> keys,@Nullable Iterable<?> vals,@Nullable Object[] invokeArgs,@Nullable ExpiryPolicy expiryPlc,GridCacheVersion ver,@Nullable CacheEntryPredicate[] filter,boolean keepBinary,UUID subjId,String taskName) throws IgniteCheckedException {
  List<GridCacheEntryEx> locked=lockEntries(keys);
  try {
    int size=locked.size();
    Map<Object,Object> putMap=null;
    Collection<Object> rmvKeys=null;
    List<CacheObject> writeVals=null;
    Map<K,EntryProcessorResult> invokeResMap=op == TRANSFORM ? U.<K,EntryProcessorResult>newHashMap(size) : null;
    List<GridCacheEntryEx> filtered=new ArrayList<>(size);
    CachePartialUpdateCheckedException err=null;
    Iterator<?> valsIter=vals != null ? vals.iterator() : null;
    boolean intercept=ctx.config().getInterceptor() != null;
    for (int i=0; i < size; i++) {
      GridCacheEntryEx entry=locked.get(i);
      Object val=valsIter != null ? valsIter.next() : null;
      if (val == null && op != DELETE)       throw new NullPointerException("Null value.");
      try {
        try {
          if (!ctx.isAllLocked(entry,filter)) {
            if (log.isDebugEnabled())             log.debug("Entry did not pass the filter (will skip write) [entry=" + entry + ", filter="+ Arrays.toString(filter)+ ']');
            continue;
          }
        }
 catch (        IgniteCheckedException e) {
          if (err == null)           err=partialUpdateException();
          err.add(F.asList(entry.key()),e);
          continue;
        }
        if (op == TRANSFORM) {
          ctx.kernalContext().resource().inject(val,GridResourceIoc.AnnotationSet.ENTRY_PROCESSOR,ctx.name());
          EntryProcessor<Object,Object,Object> entryProcessor=(EntryProcessor<Object,Object,Object>)val;
          CacheObject old=entry.innerGet(null,null,true,true,true,true,true,subjId,entryProcessor,taskName,null,keepBinary);
          Object oldVal=null;
          CacheInvokeEntry<Object,Object> invokeEntry=new CacheInvokeEntry<>(entry.key(),old,entry.version(),keepBinary,entry);
          CacheObject updated;
          Object updatedVal=null;
          CacheInvokeResult invokeRes=null;
          try {
            Object computed=entryProcessor.process(invokeEntry,invokeArgs);
            updatedVal=ctx.unwrapTemporary(invokeEntry.getValue());
            updated=ctx.toCacheObject(updatedVal);
            if (computed != null)             invokeRes=CacheInvokeResult.fromResult(ctx.unwrapTemporary(computed));
          }
 catch (          Exception e) {
            invokeRes=CacheInvokeResult.fromError(e);
            updated=old;
          }
          if (invokeRes != null)           invokeResMap.put((K)entry.key().value(ctx.cacheObjectContext(),false),invokeRes);
          if (updated == null) {
            if (intercept) {
              IgniteBiTuple<Boolean,?> interceptorRes=ctx.config().getInterceptor().onBeforeRemove(new CacheLazyEntry(ctx,entry.key(),invokeEntry.key(),old,oldVal,keepBinary));
              if (ctx.cancelRemove(interceptorRes))               continue;
            }
            if (putMap != null) {
              err=updatePartialBatch(filtered,ver,writeVals,putMap,null,expiryPlc,keepBinary,err,subjId,taskName);
              putMap=null;
              writeVals=null;
              filtered=new ArrayList<>();
            }
            if (rmvKeys == null)             rmvKeys=new ArrayList<>(size);
            rmvKeys.add(entry.key().value(ctx.cacheObjectContext(),false));
          }
 else {
            if (intercept) {
              Object interceptorVal=ctx.config().getInterceptor().onBeforePut(new CacheLazyEntry(ctx,entry.key(),invokeEntry.getKey(),old,oldVal,keepBinary),updatedVal);
              if (interceptorVal == null)               continue;
              updated=ctx.toCacheObject(ctx.unwrapTemporary(interceptorVal));
            }
            if (rmvKeys != null) {
              err=updatePartialBatch(filtered,ver,null,null,rmvKeys,expiryPlc,keepBinary,err,subjId,taskName);
              rmvKeys=null;
              filtered=new ArrayList<>();
            }
            if (putMap == null) {
              putMap=new LinkedHashMap<>(size,1.0f);
              writeVals=new ArrayList<>(size);
            }
            putMap.put(CU.value(entry.key(),ctx,false),CU.value(updated,ctx,false));
            writeVals.add(updated);
          }
        }
 else         if (op == UPDATE) {
          CacheObject cacheVal=ctx.toCacheObject(val);
          if (intercept) {
            CacheObject old=entry.innerGet(null,null,true,ctx.loadPreviousValue(),true,true,true,subjId,null,taskName,null,keepBinary);
            Object interceptorVal=ctx.config().getInterceptor().onBeforePut(new CacheLazyEntry(ctx,entry.key(),old,keepBinary),val);
            if (interceptorVal == null)             continue;
            cacheVal=ctx.toCacheObject(ctx.unwrapTemporary(interceptorVal));
          }
          if (putMap == null) {
            putMap=new LinkedHashMap<>(size,1.0f);
            writeVals=new ArrayList<>(size);
          }
          putMap.put(CU.value(entry.key(),ctx,false),CU.value(cacheVal,ctx,false));
          writeVals.add(cacheVal);
        }
 else {
          assert op == DELETE;
          if (intercept) {
            CacheObject old=entry.innerGet(null,null,true,ctx.loadPreviousValue(),true,true,true,subjId,null,taskName,null,keepBinary);
            IgniteBiTuple<Boolean,?> interceptorRes=ctx.config().getInterceptor().onBeforeRemove(new CacheLazyEntry(ctx,entry.key(),old,keepBinary));
            if (ctx.cancelRemove(interceptorRes))             continue;
          }
          if (rmvKeys == null)           rmvKeys=new ArrayList<>(size);
          rmvKeys.add(entry.key().value(ctx.cacheObjectContext(),false));
        }
        filtered.add(entry);
      }
 catch (      IgniteCheckedException e) {
        if (err == null)         err=partialUpdateException();
        err.add(F.asList(entry.key()),e);
      }
catch (      GridCacheEntryRemovedException ignore) {
        assert false : "Entry cannot become obsolete while holding lock.";
      }
    }
    if (putMap != null || rmvKeys != null) {
      err=updatePartialBatch(filtered,ver,writeVals,putMap,rmvKeys,expiryPlc,keepBinary,err,subjId,taskName);
    }
 else     assert filtered.isEmpty();
    if (err != null)     throw err;
    return invokeResMap;
  }
  finally {
    unlockEntries(locked);
  }
}

private static Set<TypeElement> findAllMembersInjectorsRecursively(Collection<TypeElement> membersInjectors){
  Set<TypeElement> result=new HashSet<>();
  for (  TypeElement element : membersInjectors) {
    result.addAll(findAllMembersInjectorsRecursively(element));
  }
  return result;
}

public Builder addSubButton(Context context,int drawable,int[] twoColors,String string){
  if (drawables == null)   drawables=new ArrayList<>();
  drawables.add(ContextCompat.getDrawable(context,drawable));
  if (colors == null)   colors=new ArrayList<>();
  colors.add(twoColors);
  if (strings == null)   strings=new ArrayList<>();
  strings.add(string);
  return this;
}

private void initComponents(){
  labelValue=new Label();
  labelValue.setValue(Util.cleanAmp(Msg.translate(Env.getCtx(),"Value")));
  labelName=new Label();
  labelName.setValue(Util.cleanAmp(Msg.translate(Env.getCtx(),"Name")));
  labelContact=new Label();
  labelContact.setValue(Msg.translate(Env.getCtx(),"Contact"));
  labelEMail=new Label();
  labelEMail.setValue(Msg.getMsg(Env.getCtx(),"EMail"));
  labelPostal=new Label();
  labelPostal.setValue(Msg.getMsg(Env.getCtx(),"Postal"));
  labelPhone=new Label();
  labelPhone.setValue(Msg.translate(Env.getCtx(),"Phone"));
  fieldID=0;
  fieldValue=new Textbox();
  fieldValue.setMaxlength(40);
  fieldValue.setAttribute("zk_component_ID","Lookup_Criteria_fieldValue");
  fieldValue.addEventListener(Events.ON_CHANGE,this);
  fieldName=new Textbox();
  fieldName.setMaxlength(40);
  fieldName.setAttribute("zk_component_ID","Lookup_Criteria_fieldName");
  fieldName.addEventListener(Events.ON_CHANGE,this);
  fieldContact=new Textbox();
  fieldContact.setMaxlength(40);
  fieldContact.setAttribute("zk_component_ID","Lookup_Criteria_fieldContact");
  fieldContact.addEventListener(Events.ON_CHANGE,this);
  fieldEMail=new Textbox();
  fieldEMail.setMaxlength(40);
  fieldEMail.setAttribute("zk_component_ID","Lookup_Criteria_fieldEMail");
  fieldEMail.addEventListener(Events.ON_CHANGE,this);
  fieldPostal=new Textbox();
  fieldPostal.setMaxlength(40);
  fieldPostal.setAttribute("zk_component_ID","Lookup_Criteria_fieldPostal");
  fieldPostal.addEventListener(Events.ON_CHANGE,this);
  fieldPhone=new Textbox();
  fieldPhone.setMaxlength(40);
  fieldPhone.setAttribute("zk_component_ID","Lookup_Criteria_fieldPhone");
  fieldPhone.addEventListener(Events.ON_CHANGE,this);
  checkAND=new Checkbox();
  checkAND.setText(Msg.getMsg(Env.getCtx(),"SearchAND"));
  checkAND.setName("SearchAND");
  checkAND.setTooltiptext(Msg.getMsg(Env.getCtx(),"SearchANDInfo"));
  checkAND.setSelected(true);
  checkAND.addActionListener(this);
  checkAND.setAttribute("zk_component_ID","Lookup_Criteria_checkAND");
  checkCustomer=new Checkbox();
  checkCustomer.addActionListener(this);
  checkCustomer.setAttribute("zk_component_ID","Lookup_Criteria_checkCustomer");
  checkCustomer.setName("checkCustomer");
  if (m_isSOTrx)   checkCustomer.setLabel(Msg.getMsg(Env.getCtx(),"OnlyCustomers"));
 else   checkCustomer.setLabel(Msg.getMsg(Env.getCtx(),"OnlyVendors"));
  checkCustomer.setSelected(m_isSOMatch);
}

public static boolean isFMInstance(){
  if (instanceType == null) {
    instanceType=(String)configTags.get("INSTANCE_TYPE");
  }
  return (instanceType != null && instanceType.equalsIgnoreCase("FM"));
}

private boolean tryRelease(long c,WorkQueue v,long inc){
  int sp=(int)c, ns=sp & ~UNSIGNALLED;
  if (v != null) {
    int vs=v.scanState;
    long nc=(v.stackPred & SP_MASK) | (UC_MASK & (c + inc));
    if (sp == vs && U.compareAndSwapLong(this,CTL,c,nc)) {
      v.scanState=ns;
      LockSupport.unpark(v.parker);
      return true;
    }
  }
  return false;
}

public boolean execute(String sqlStatements,Connection conn){
  if (conn == null)   throw new IllegalStateException("Require connection");
  String[] sql=convert(sqlStatements);
  m_exception=null;
  if (m_conversionError != null || sql == null)   return false;
  boolean ok=true;
  int i=0;
  String statement=null;
  try {
    if (m_stmt == null)     m_stmt=conn.createStatement();
    for (i=0; ok && i < sql.length; i++) {
      statement=sql[i];
      if (statement.length() == 0) {
        if (m_verbose)         log.finer("Skipping empty (" + i + ")");
      }
 else {
        if (m_verbose)         log.info("Executing (" + i + ") <<"+ statement+ ">>");
 else         log.info("Executing " + i);
        try {
          m_stmt.clearWarnings();
          int no=m_stmt.executeUpdate(statement);
          SQLWarning warn=m_stmt.getWarnings();
          if (warn != null) {
            if (m_verbose)             log.info("- " + warn);
 else {
              log.info("Executing (" + i + ") <<"+ statement+ ">>");
              log.info("- " + warn);
            }
          }
          if (m_verbose)           log.fine("- ok " + no);
        }
 catch (        SQLException ex) {
          if (!statement.startsWith("DROP ")) {
            ok=false;
            m_exception=ex;
          }
          if (!m_verbose)           log.info("Executing (" + i + ") <<"+ statement+ ">>");
          log.info("Error executing " + i + "/"+ sql.length+ " = "+ ex);
        }
      }
    }
  }
 catch (  SQLException e) {
    m_exception=e;
    if (!m_verbose)     log.info("Executing (" + i + ") <<"+ statement+ ">>");
    log.info("Error executing " + i + "/"+ sql.length+ " = "+ e);
    return false;
  }
  return ok;
}

@Override public Value sample(Assignment condition){
  double prob=getProb(condition);
  if (sampler.nextDouble() < prob) {
    return ValueFactory.create(true);
  }
 else {
    return ValueFactory.create(false);
  }
}

private void initStyle(AttributeSet attributeSet,int defStyleAttribute){
  TypedArray typedArray=mContext.obtainStyledAttributes(attributeSet,R.styleable.MaterialSearchView,defStyleAttribute,0);
  if (typedArray != null) {
    if (typedArray.hasValue(R.styleable.MaterialSearchView_searchBackground)) {
      setBackground(typedArray.getDrawable(R.styleable.MaterialSearchView_searchBackground));
    }
    if (typedArray.hasValue(R.styleable.MaterialSearchView_android_textColor)) {
      setTextColor(typedArray.getColor(R.styleable.MaterialSearchView_android_textColor,ContextCompat.getColor(mContext,R.color.black)));
    }
    if (typedArray.hasValue(R.styleable.MaterialSearchView_android_textColorHint)) {
      setHintTextColor(typedArray.getColor(R.styleable.MaterialSearchView_android_textColorHint,ContextCompat.getColor(mContext,R.color.gray_50)));
    }
    if (typedArray.hasValue(R.styleable.MaterialSearchView_android_hint)) {
      setHint(typedArray.getString(R.styleable.MaterialSearchView_android_hint));
    }
    if (typedArray.hasValue(R.styleable.MaterialSearchView_searchVoiceIcon)) {
      setVoiceIcon(typedArray.getDrawable(R.styleable.MaterialSearchView_searchVoiceIcon));
    }
    if (typedArray.hasValue(R.styleable.MaterialSearchView_searchCloseIcon)) {
      setClearIcon(typedArray.getDrawable(R.styleable.MaterialSearchView_searchCloseIcon));
    }
    if (typedArray.hasValue(R.styleable.MaterialSearchView_searchBackIcon)) {
      setBackIcon(typedArray.getDrawable(R.styleable.MaterialSearchView_searchBackIcon));
    }
    if (typedArray.hasValue(R.styleable.MaterialSearchView_searchSuggestionBackground)) {
      setSuggestionBackground(typedArray.getResourceId(R.styleable.MaterialSearchView_searchSuggestionBackground,R.color.search_layover_bg));
    }
    if (typedArray.hasValue(R.styleable.MaterialSearchView_android_inputType)) {
      setInputType(typedArray.getInteger(R.styleable.MaterialSearchView_android_inputType,InputType.TYPE_CLASS_TEXT));
    }
    if (typedArray.hasValue(R.styleable.MaterialSearchView_searchBarHeight)) {
      setSearchBarHeight(typedArray.getDimensionPixelSize(R.styleable.MaterialSearchView_searchBarHeight,getAppCompatActionBarHeight()));
    }
 else {
      setSearchBarHeight(getAppCompatActionBarHeight());
    }
    ViewCompat.setFitsSystemWindows(this,typedArray.getBoolean(R.styleable.MaterialSearchView_android_fitsSystemWindows,false));
    typedArray.recycle();
  }
}

boolean validate(Set attrVals,String i18nFileName,boolean encodePassword) throws SMSException {
  return validate(attrVals,i18nFileName,encodePassword,Collections.EMPTY_MAP);
}

protected static void appendBigDecimalNumericType(StringBuilder sb){
  sb.append("NUMERIC");
}

void removeAt(final int removeIndex){
  final Object[] items=this.items;
  if (removeIndex == takeIndex) {
    items[takeIndex]=null;
    takeIndex=inc(takeIndex);
    count--;
    if (itrs != null)     itrs.elementDequeued();
  }
 else {
    final int putIndex=this.putIndex;
    for (int i=removeIndex; ; ) {
      int next=inc(i);
      if (next != putIndex) {
        items[i]=items[next];
        i=next;
      }
 else {
        items[i]=null;
        this.putIndex=i;
        break;
      }
    }
    count--;
    if (itrs != null)     itrs.removedAt(removeIndex);
  }
  notFull.signal();
}

private AccessGrant createAccessGrant(Map<String,String> params){
  AccessGrant accessGrant=new AccessGrant();
  if (params.get("access_token") != null) {
    String accessToken=params.get("access_token");
    Integer expires=null;
    if (params.get("expires") != null) {
      expires=Integer.valueOf(params.get("expires"));
    }
    accessGrant.setKey(accessToken);
    accessGrant.setAttribute("expires",expires);
  }
  accessGrant.setProviderId(mProviderName.toString());
  return accessGrant;
}

public double distance(Vector other){
  return Math.sqrt(Math.pow(other.x - x,2) + Math.pow(other.y - y,2) + Math.pow(other.z - z,2));
}

private void parse(File tmd) throws IOException {
  RandomAccessFile f=new RandomAccessFile(tmd,"r");
  f.seek(0);
  this.signatureType=f.readInt();
  f.read(signature,0,0x100);
  f.seek(0x140);
  f.read(issuer,0,0x40);
  f.seek(0x180);
  this.version=f.readByte();
  this.CACRLVersion=f.readByte();
  this.signerCRLVersion=f.readByte();
  f.seek(0x184);
  this.systemVersion=f.readLong();
  this.titleID=f.readLong();
  this.titleType=f.readInt();
  this.groupID=f.readShort();
  f.seek(0x19A);
  f.read(reserved,0,62);
  f.seek(0x1D8);
  this.accessRights=f.readInt();
  this.titleVersion=f.readShort();
  this.contentCount=f.readShort();
  this.bootIndex=f.readShort();
  f.seek(0x1E4);
  f.read(SHA2,0,32);
  f.seek(0x204);
  short indexOffset;
  short commandCount;
  for (int i=0; i < 64; i++) {
    f.seek(0x204 + (0x24 * i));
    indexOffset=f.readShort();
    commandCount=f.readShort();
    byte[] buffer=new byte[0x20];
    f.read(buffer,0,0x20);
    this.contentInfos[i]=new ContentInfo(indexOffset,commandCount,buffer);
  }
  this.contents=new Content[contentCount];
  int ID;
  short index;
  short type;
  long size;
  for (int i=0; i < contentCount; i++) {
    f.seek(0xB04 + (0x30 * i));
    ID=f.readInt();
    index=f.readShort();
    type=f.readShort();
    size=f.readLong();
    byte[] buffer=new byte[0x20];
    f.read(buffer,0,0x20);
    this.contents[i]=new Content(ID,index,type,size,buffer,this);
  }
  if (f.read(cert2,0,0x300) != 0x300) {
    Logger.log("Error reading TMD cert2");
  }
  if (f.read(cert1,0,0x400) != 0x400) {
    Logger.log("Error reading TMD cert1");
  }
  f.close();
}

public void removeVetoableChangeListener(String propertyName,VetoableChangeListener in_vcl){
  beanContextChildSupport.removeVetoableChangeListener(propertyName,in_vcl);
}

public static void takeScreenshot(final String tag){
  if (scenario == null) {
    throw new ScreenshotException("Error taking screenshot: I'm missing a valid test scenario to attach the screenshot to");
  }
  SpoonScreenshotAction.perform(tag);
  final File screenshot=SpoonScreenshotAction.getLastScreenshot();
  if (screenshot == null) {
    throw new ScreenshotException("Screenshot was not taken correctly, check for failures in screenshot library");
  }
  FileInputStream screenshotStream=null;
  try {
    screenshotStream=new FileInputStream(screenshot);
    final byte fileContent[]=new byte[(int)screenshot.length()];
    final int readImageBytes=screenshotStream.read(fileContent);
    if (readImageBytes != -1) {
      scenario.embed(fileContent,"image/png");
    }
  }
 catch (  final IOException ioe) {
    throw new ScreenshotException("Exception while reading file " + ioe);
  }
 finally {
    try {
      if (screenshotStream != null) {
        screenshotStream.close();
      }
    }
 catch (    final IOException ioe) {
      throw new ScreenshotException("Error while closing screenshot stream: " + ioe);
    }
  }
}

private void importRunnerEnvironment(ImportProject importProject,FolderEntry baseProjectFolder) throws ForbiddenException, ServerException, ConflictException, IOException {
  importRunnerEnvironment(importProject,baseProjectFolder,null);
}

@Override public void doNotify() throws Exception {
  log.info("Received notification that related system properties are changed");
  ScheduledExecutorService svc=service;
  if (svc != null) {
    try {
      svc.schedule((Callable<Object>)this,0L,TimeUnit.MICROSECONDS);
    }
 catch (    RejectedExecutionException ex) {
      if (svc.isShutdown()) {
        log.info("Property change notification ignored because this node is no longer backup leader.");
      }
 else {
        throw ex;
      }
    }
  }
 else {
    log.info("Property change notification ignored because this node is no longer backup leader.");
  }
}

public boolean checkRootByBuildTags(){
  String buildTags=android.os.Build.TAGS;
  if (buildTags != null && buildTags.contains(SU_TAG)) {
    return true;
  }
  return false;
}

public boolean isUserActive(String realm){
  boolean active=false;
  try {
    AMIdentity user=IdUtils.getIdentity(ssoToken,userId);
    boolean isUserActive=user.isActive();
    String loginStatus=getUserAttributeValue(user,USER_SERVICE_LOGIN_STATUS,ACTIVE);
    String lockout=getUserAttributeValue(user,USER_SERVICE_NS_LOCKOUT,STRING_FALSE);
    if (!isUserActive || !loginStatus.equalsIgnoreCase(ACTIVE) || !lockout.equalsIgnoreCase(STRING_FALSE)) {
      errorMsg=getLocalizedString("userNotActive.message");
      writeLog("accountInactive.message",userId);
    }
 else     if (isAccountExpired(user)) {
      errorMsg=getLocalizedString("userAccountExpired.message");
      writeLog("accountExpired.message",userId);
    }
 else     if (isUserLockout(userId,realm)) {
      String obj[]={userId};
      informationMsg=getLocalizedString("lockoutMsg.message");
      writeLog("accountLocked.message",userId);
    }
 else {
      active=true;
    }
  }
 catch (  SSOException e) {
    debug.warning("PWResetUserValidationModelImpl.isUserActive",e);
    errorMsg=getErrorString(e);
  }
catch (  IdRepoException e) {
    debug.warning("PWResetUserValidationModelImpl.isUserActive",e);
    errorMsg=getErrorString(e);
  }
  return active;
}

@Override public <U>CompletableFuture<U> foldRight(final U seed,final BiFunction<? super T,U,U> function){
  return CompletableFuture.supplyAsync(null,exec);
}

private void algorithmDouglasPeucker(List<Entry> entries,double epsilon,int start,int end){
  if (end <= start + 1) {
    return;
  }
  int maxDistIndex=0;
  double distMax=0;
  Entry firstEntry=entries.get(start);
  Entry lastEntry=entries.get(end);
  for (int i=start + 1; i < end; i++) {
    double dist=calcAngleBetweenLines(firstEntry,lastEntry,firstEntry,entries.get(i));
    if (dist > distMax) {
      distMax=dist;
      maxDistIndex=i;
    }
  }
  if (distMax > epsilon) {
    keep[maxDistIndex]=true;
    algorithmDouglasPeucker(entries,epsilon,start,maxDistIndex);
    algorithmDouglasPeucker(entries,epsilon,maxDistIndex,end);
  }
}

private void calcIntervalDis(){
  if (mMarkTextPaint == null) {
    return;
  }
  String defaultText="888888";
  Rect temp=new Rect();
  int max=0;
  if (mItems != null && mItems.size() > 0) {
    for (    String i : mItems) {
      mMarkTextPaint.getTextBounds(i,0,i.length(),temp);
      if (temp.width() > max) {
        max=temp.width();
      }
    }
  }
 else {
    mMarkTextPaint.getTextBounds(defaultText,0,defaultText.length(),temp);
    max=temp.width();
  }
  if (!TextUtils.isEmpty(mAdditionCenterMark)) {
    mMarkTextPaint.setTextSize(mNormalTextSize);
    mMarkTextPaint.getTextBounds(mAdditionCenterMark,0,mAdditionCenterMark.length(),temp);
    mAdditionCenterMarkWidth=temp.width();
    max+=temp.width();
  }
  mIntervalDis=max * mIntervalFactor;
}

public static void sort(AbstractList array,int[] indices){
  for (int i=0; i < indices.length; i++) {
    indices[i]=i;
  }
  int temp;
  int j, n=array.size();
  for (j=n / 2; j > 0; j--) {
    adjust(array,indices,j,n);
  }
  for (j=n - 1; j > 0; j--) {
    temp=indices[0];
    indices[0]=indices[j];
    indices[j]=temp;
    adjust(array,indices,1,j);
  }
}

private float clampMag(float value,float absMin,float absMax){
  final float absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

public static boolean saveStringToFile(String dataInput,String path){
  String filename=path;
  File file=new File(filename);
  FileOutputStream fos;
  byte[] data=dataInput.getBytes();
  try {
    fos=new FileOutputStream(file);
    fos.write(data);
    fos.flush();
    fos.close();
    return true;
  }
 catch (  FileNotFoundException e) {
    e.printStackTrace();
  }
catch (  IOException e) {
    e.printStackTrace();
  }
  return false;
}

public static String quote(String input){
  if (input.contains(" ")) {
    return "\"" + input + "\"";
  }
 else {
    return input;
  }
}

public void removeSwipeListener(SwipeListener listener){
  if (mListeners == null) {
    return;
  }
  mListeners.remove(listener);
}

public static void assertThrowsCompletionException(final Consumer<Void> consumer,final Class<?> exceptionClass){
  try {
    consumer.accept(null);
  }
 catch (  final CompletionException completionEx) {
    final Throwable ex=completionEx.getCause();
    if (ex.getClass() == exceptionClass) {
      return;
    }
    Assert.fail(String.format("unexpected exception of type %s was thrown",ex.getClass()));
  }
  Assert.fail(String.format("expected exception of type %s was not thrown",exceptionClass));
}

public Object put(Object key,Object value){
  Object oldValue=null;
synchronized (map) {
    oldValue=map.put(key,value);
    if (oldValue != null) {
      removeElement(key);
    }
    addElement(key);
  }
  return oldValue;
}

public double run(){
  try {
    AudioInputStream inInput=AudioSystem.getAudioInputStream(files[0]);
    AudioFeature audioFeatureInput=(AudioFeature)featureExtractorInput.calculate(inInput);
  }
 catch (  Exception e) {
  }
  double avgDistance=0;
  for (int i=0; i < arrayFeatureExtractorTrainSet.size(); i++) {
    double distance2DB=audioThreadDistance(featureExtractorInput.getMFCC(),arrayFeatureExtractorTrainSet.get(i));
    Log.i("size","Different distance " + distance2DB);
    avgDistance+=distance2DB;
  }
  Log.i("size","average distance " + (avgDistance / arrayFeatureExtractorTrainSet.size()));
  return avgDistance / arrayFeatureExtractorTrainSet.size();
}

@Override protected void onSizeChanged(int w,int h,int oldw,int oldh){
  super.onSizeChanged(w,h,oldw,oldh);
  setupBounds(w,h);
  setupPaints();
  invalidate();
}

public Predicate(Term t){
  terms.add(t);
}

private void addOperations(Set<String> methodSignatures) throws OperationParseException {
  for (  String sig : methodSignatures) {
    TypedOperation operation=OperationParser.parse(sig);
    operations.add(operation);
  }
}

private void writeLog(String log){
  File file=new File(CrashHandlerDefault.Log_Default_Path + "/" + formatter.format(new Date())+ ".log");
  try {
    FileOutputStream fileOutputStream=new FileOutputStream(file);
    byte[] bytes=log.getBytes();
    fileOutputStream.write(bytes);
    fileOutputStream.close();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
}

public Rule(String pattern,Object tokenType,String nextState){
  this.pattern=Pattern.compile(pattern);
  this.tokenType=tokenType;
  this.nextState=nextState;
}

private void showPopup(final MouseEvent event){
  int[] rows=getSelectedRows();
  if ((rows.length == 0) || (rows.length == 1)) {
    final int row=rowAtPoint(event.getPoint());
    final int column=columnAtPoint(event.getPoint());
    if ((row == -1) || (column == -1)) {
      return;
    }
    changeSelection(row,column,false,false);
    rows=getSelectedRows();
  }
  final JPopupMenu menu=new JPopupMenu();
  menu.add(new JMenuItem(CActionProxy.proxy(new CDeleteBookmarkAction(m_bookmarkManager,rows))));
  menu.show(event.getComponent(),event.getX(),event.getY());
}

public int lineToY(int line){
  FontMetrics fm=painter.getFontMetrics();
  return (line - firstLine) * fm.getHeight() - (fm.getLeading() + fm.getMaxDescent());
}

public static boolean hasSpecialChars(final String str){
  final Matcher matcher=SPL_CHAR_PATRN.matcher(str);
  return matcher.find();
}

@Override public int read(byte b[],int off,int len) throws IOException {
  if (bb == null) {
    throw new IOException("read on a closed InputStream");
  }
  if (b == null) {
    throw new NullPointerException();
  }
 else   if (off < 0 || len < 0 || len > b.length - off) {
    throw new IndexOutOfBoundsException();
  }
 else   if (len == 0) {
    return 0;
  }
  int length=Math.min(bb.remaining(),len);
  if (length == 0) {
    return -1;
  }
  bb.get(b,off,length);
  return length;
}

public void removeEventListener(MultimediaMessagingSessionListener listener) throws RcsServiceNotAvailableException, RcsGenericException {
  if (mApi == null) {
    throw new RcsServiceNotAvailableException();
  }
  try {
    WeakReference<IMultimediaMessagingSessionListener> weakRef=mMultimediaMessagingSessionListeners.remove(listener);
    if (weakRef == null) {
      return;
    }
    IMultimediaMessagingSessionListener multimediaMessagingSessionListener=weakRef.get();
    if (multimediaMessagingSessionListener != null) {
      mApi.removeEventListener2(multimediaMessagingSessionListener);
    }
  }
 catch (  Exception e) {
    RcsIllegalArgumentException.assertException(e);
    throw new RcsGenericException(e);
  }
}

private static boolean dateByMonth(DateTimeFormatterBuilder bld,Collection<DateTimeFieldType> fields,boolean extended,boolean strictISO){
  boolean reducedPrec=false;
  if (fields.remove(DateTimeFieldType.year())) {
    bld.append(Constants.ye);
    if (fields.remove(DateTimeFieldType.monthOfYear())) {
      if (fields.remove(DateTimeFieldType.dayOfMonth())) {
        appendSeparator(bld,extended);
        bld.appendMonthOfYear(2);
        appendSeparator(bld,extended);
        bld.appendDayOfMonth(2);
      }
 else {
        bld.appendLiteral('-');
        bld.appendMonthOfYear(2);
        reducedPrec=true;
      }
    }
 else {
      if (fields.remove(DateTimeFieldType.dayOfMonth())) {
        checkNotStrictISO(fields,strictISO);
        bld.appendLiteral('-');
        bld.appendLiteral('-');
        bld.appendDayOfMonth(2);
      }
 else {
        reducedPrec=true;
      }
    }
  }
 else   if (fields.remove(DateTimeFieldType.monthOfYear())) {
    bld.appendLiteral('-');
    bld.appendLiteral('-');
    bld.appendMonthOfYear(2);
    if (fields.remove(DateTimeFieldType.dayOfMonth())) {
      appendSeparator(bld,extended);
      bld.appendDayOfMonth(2);
    }
 else {
      reducedPrec=true;
    }
  }
 else   if (fields.remove(DateTimeFieldType.dayOfMonth())) {
    bld.appendLiteral('-');
    bld.appendLiteral('-');
    bld.appendLiteral('-');
    bld.appendDayOfMonth(2);
  }
  return reducedPrec;
}

public String[] parseLine(String line,boolean withLabel,boolean trace,boolean ignoreEmpty){
  if (trace)   log.config("" + line);
  ArrayList<String> list=new ArrayList<String>();
  for (int i=0; i < m_rows.size(); i++) {
    ImpFormatRow row=(ImpFormatRow)m_rows.get(i);
    StringBuffer entry=new StringBuffer();
    if (withLabel) {
      entry.append(row.getColumnName());
      entry.append("=");
      if (row.isString())       entry.append("'");
 else       if (row.isDate())       entry.append("TO_DATE('");
    }
    String info=null;
    if (row.isConstant())     info="Constant";
 else     if (m_formatType.equals(X_AD_ImpFormat.FORMATTYPE_FixedPosition)) {
      if (row.getStartNo() > 0 && row.getEndNo() <= line.length())       info=line.substring(row.getStartNo() - 1,row.getEndNo());
    }
 else {
      info=parseFlexFormat(line,m_formatType,row.getStartNo());
    }
    if (Util.isEmpty(info,true)) {
      if (row.getDefaultValue() != null)       info=row.getDefaultValue();
 else       info="";
    }
    entry.append(row.parse(info));
    if (withLabel) {
      if (row.isString())       entry.append("'");
 else       if (row.isDate())       entry.append("','YYYY-MM-DD HH24:MI:SS')");
    }
    if (!ignoreEmpty || (ignoreEmpty && info.length() != 0))     list.add(entry.toString());
    if (trace)     log.fine(info + "=>" + entry.toString()+ " (Length="+ info.length()+ ")");
  }
  String[] retValue=new String[list.size()];
  list.toArray(retValue);
  return retValue;
}

public WidgetProposalComputer(String text,int offset,Element rootElement,Element parentElement,IJavaProject javaProject) throws JavaModelException, UiBinderException {
  super(javaProject,text,offset,text.length());
  this.rootElement=rootElement;
  this.parentElement=parentElement;
  packageManager.readFromElement(rootElement);
}

public List<Predicate<T>> parse(final List<String> queries) throws QueryParseException {
  List<Predicate<T>> predicates=new ArrayList<>(queries.size());
  for (  String query : queries) {
    predicates.add(parse(query));
  }
  return predicates;
}

public static Object deserializeStream(final String witness) throws Exception {
  FileInputStream fileIs=new FileInputStream(witness);
  ObjectInputStream objIs=new ObjectInputStream(fileIs);
  return objIs.readObject();
}

public static void rollback(boolean beganTransaction,String causeMessage,Throwable causeThrowable) throws GenericTransactionException {
  if (beganTransaction) {
    TransactionUtil.rollback(causeThrowable);
  }
 else {
    TransactionUtil.setRollbackOnly(causeMessage,causeThrowable);
  }
}

public LongArray(LongArray array){
  this.ordered=array.ordered;
  size=array.size;
  items=new long[size];
  System.arraycopy(array.items,0,items,0,size);
}

private static <T>T reportGet(Object r) throws InterruptedException, ExecutionException {
  if (r == null)   throw new InterruptedException();
  if (r instanceof AltResult) {
    Throwable x, cause;
    if ((x=((AltResult)r).ex) == null)     return null;
    if (x instanceof CancellationException)     throw (CancellationException)x;
    if ((x instanceof CompletionException) && (cause=x.getCause()) != null)     x=cause;
    throw new ExecutionException(x);
  }
  @SuppressWarnings("unchecked") T t=(T)r;
  return t;
}

protected void garbageCollect(VisualTable labels){
  Iterator iter=labels.tuples();
  while (iter.hasNext()) {
    VisualItem item=(VisualItem)iter.next();
    if (!item.isStartVisible() && !item.isEndVisible()) {
      labels.removeTuple(item);
    }
  }
}

public boolean sharesVariableWith(DefUse du){
  return varName.equals(du.varName);
}

private void populateNavDrawer(){
  mNavDrawerItems.clear();
  mNavDrawerItems.add(NAVDRAWER_ITEM_ACTIVITY1);
  mNavDrawerItems.add(NAVDRAWER_ITEM_SEPARATOR);
  mNavDrawerItems.add(NAVDRAWER_ITEM_ACTIVITY2);
  mNavDrawerItems.add(NAVDRAWER_ITEM_SEPARATOR_SPECIAL);
  mNavDrawerItems.add(NAVDRAWER_ITEM_ACTIVITY3);
  createNavDrawerItems();
}

public ArtifactCoordinates(final String groupId,final String artifactId,final String version,final String classifier){
  this.groupId=groupId;
  this.artifactId=artifactId;
  this.version=version;
  this.classifier=classifier;
}

private CarbonIterator<BatchResult> executeBlockList(List<TableBlockInfo> blockList) throws QueryExecutionException {
  queryModel.setTableBlockInfos(blockList);
  this.queryExecutor=QueryExecutorFactory.getQueryExecutor();
  CarbonIterator<BatchResult> iter=null;
  try {
    iter=queryExecutor.execute(queryModel);
  }
 catch (  QueryExecutionException e) {
    LOGGER.error(e.getMessage());
    throw e;
  }
  return iter;
}

public static boolean isJavaScriptEnabled(HttpServletRequest request){
  HttpSession session=request.getSession();
  Boolean javaScriptEnabled=(Boolean)session.getAttribute("javaScriptEnabled");
  if (javaScriptEnabled != null) {
    return javaScriptEnabled.booleanValue();
  }
  return false;
}

protected Link createLink(final String relation,final URI href){
  return new Link(relation,href);
}

public void testFlipBitPositiveInside2(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int number=45;
  byte rBytes[]={1,-128,56,100,-2,-76,89,13,91,3,-15,35,26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.flipBit(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public static Spannable createSpannableFromTextWithTemplate(String text,CharSequence innerTemplate){
  SpannableString result=new SpannableString(text);
  if (innerTemplate instanceof Spanned) {
    int index=text.indexOf(innerTemplate.toString());
    if (index >= 0) {
      copySpans(result,(Spanned)innerTemplate,index);
    }
  }
  return result;
}

@Override public String toString(){
  return xmlFile.getName();
}

public String toString(){
  return String.valueOf(stopTimeMillis - startTimeMillis) + " ms";
}

public ObjectGraph plusGraph(List<Object> activityScopeModules){
  if (activityScopeModules == null) {
    throw new IllegalArgumentException("You can't extend the application graph with a null list of modules");
  }
  return graph.plus(activityScopeModules.toArray());
}

public GroupCategorySet(GroupCategory[] categories){
  Assert.isNotNull(categories);
  fContent=new ArrayList(categories.length);
  for (int i=0; i < categories.length; i++) {
    if (!fContent.contains(categories[i]))     fContent.add(categories[i]);
  }
}

private boolean inSamePackage(Class<?> c1,Class<?> c2){
  String nameC1=c1.getName();
  String nameC2=c2.getName();
  int indexDotC1=nameC1.lastIndexOf('.');
  int indexDotC2=nameC2.lastIndexOf('.');
  if (indexDotC1 != indexDotC2) {
    return false;
  }
  if (indexDotC1 == -1) {
    return true;
  }
  return nameC1.regionMatches(0,nameC2,0,indexDotC1);
}

private void writeConstraintsToXml(XmlSerializer out,JobStatus jobStatus) throws IOException {
  out.startTag(null,XML_TAG_PARAMS_CONSTRAINTS);
  if (jobStatus.hasUnmeteredConstraint()) {
    out.attribute(null,"unmetered",Boolean.toString(true));
  }
  if (jobStatus.hasConnectivityConstraint()) {
    out.attribute(null,"connectivity",Boolean.toString(true));
  }
  if (jobStatus.hasIdleConstraint()) {
    out.attribute(null,"idle",Boolean.toString(true));
  }
  if (jobStatus.hasChargingConstraint()) {
    out.attribute(null,"charging",Boolean.toString(true));
  }
  out.endTag(null,XML_TAG_PARAMS_CONSTRAINTS);
}

public void fillConditionalHoles(){
  ValueRange possibleCondPairs=new ValueRange(table.keySet());
  if (possibleCondPairs.getNbCombinations() < 500) {
    Set<Assignment> possibleCondAssignments=possibleCondPairs.linearise();
    possibleCondAssignments.remove(new Assignment());
    for (    Assignment possibleCond : possibleCondAssignments) {
      if (!table.containsKey(possibleCond)) {
        addRow(possibleCond,ValueFactory.none(),1.0);
      }
    }
  }
}

private boolean showAppMenu(View view,boolean startDragging){
  if (!mMenuHandler.isAppMenuShowing() && mMenuHandler.showAppMenu(view,startDragging)) {
    if (!startDragging)     RecordUserAction.record("MobileUsingMenuBySwButtonTap");
    if (mOnAppMenuShownListener != null) {
      mOnAppMenuShownListener.run();
    }
    return true;
  }
  return false;
}

protected void writeNodeText(Node node) throws IOException {
  String text=node.getText();
  if ((text != null) && (text.length() > 0)) {
    if (escapeText) {
      text=escapeElementEntities(text);
    }
    lastOutputNodeType=Node.TEXT_NODE;
    writer.write(text);
  }
}

public void insertRadians(double[] latlons,int coordPairIndex,boolean replaceEndsOfInsertedAtJoin){
  int minPntsNeededForInsertion=2;
  boolean atEnd=false;
  boolean isClosed=isGeometryClosed();
  int insertionPoint=coordPairIndex * 2;
  if (insertionPoint >= rawllpts.length) {
    if (isClosed) {
      insertionPoint=rawllpts.length - 2;
    }
 else {
      insertionPoint=rawllpts.length;
      atEnd=true;
    }
  }
 else   if (insertionPoint <= 0) {
    if (isClosed) {
      insertionPoint=2;
    }
 else {
      insertionPoint=0;
      atEnd=true;
    }
  }
  int newCoordStart=0;
  int newCoordLength=latlons.length;
  if (replaceEndsOfInsertedAtJoin) {
    newCoordStart=2;
    minPntsNeededForInsertion=6;
    if (atEnd) {
      minPntsNeededForInsertion-=2;
      newCoordLength-=2;
      if (insertionPoint == 0) {
        newCoordStart=0;
      }
    }
 else {
      newCoordLength-=4;
    }
  }
  if (renderType == OMGraphic.RENDERTYPE_LATLON && latlons.length >= minPntsNeededForInsertion && latlons.length % 2 == 0) {
    double[] oldrawllpnts=rawllpts;
    int oldCoordsRemaining=oldrawllpnts.length - insertionPoint;
    rawllpts=new double[oldrawllpnts.length + newCoordLength];
    System.arraycopy(oldrawllpnts,0,rawllpts,0,insertionPoint);
    System.arraycopy(latlons,newCoordStart,rawllpts,insertionPoint,newCoordLength);
    System.arraycopy(oldrawllpnts,insertionPoint,rawllpts,insertionPoint + newCoordLength,oldCoordsRemaining);
    setNeedToRegenerate(true);
  }
}

public static boolean cancelPotentialWork(Object data,ImageView imageView){
  final BitmapWorkerTask bitmapWorkerTask=getBitmapWorkerTask(imageView);
  if (bitmapWorkerTask != null) {
    final Object bitmapData=bitmapWorkerTask.data;
    if (bitmapData == null || !bitmapData.equals(data)) {
      bitmapWorkerTask.cancel(true);
      if (BuildConfig.DEBUG) {
        Log.d(TAG,"cancelPotentialWork - cancelled work for " + data);
      }
    }
 else {
      return false;
    }
  }
  return true;
}

protected Map<String,Object> convertNamedListToMap(NamedList<?> args){
  Map<String,Object> argsMap=new LinkedHashMap<>();
  if (args != null) {
    for (    Map.Entry<String,?> entry : args) {
      argsMap.put(entry.getKey(),entry.getValue());
    }
  }
  return argsMap;
}

private T3<Integer,Integer,byte[]> randomKey(Random rnd){
  return keys[rnd.nextInt(keys.length)];
}

public String toString(){
  StringBuffer buffer=new StringBuffer();
  if (override > 0) {
    buffer.append("Override " + override + ": ");
    if (lineno > 0)     buffer.append("Line " + lineno + ": ");
  }
 else {
    if (locationName == null && lineno > 0) {
      buffer.append("Line " + lineno + ": ");
    }
 else     if (locationName != null) {
      buffer.append(locationName + ":");
      if (lineno > 0)       buffer.append(lineno + ": ");
    }
  }
  buffer.append(description);
  return buffer.toString();
}

public void testSearchablesListReal(){
  MyMockPackageManager mockPM=new MyMockPackageManager(mContext.getPackageManager());
  MyMockContext mockContext=new MyMockContext(mContext,mockPM);
  mockPM.setSearchablesMode(MyMockPackageManager.SEARCHABLES_PASSTHROUGH);
  Searchables searchables=new Searchables(mockContext,0);
  searchables.buildSearchableList();
  ArrayList<SearchableInfo> searchablesList=searchables.getSearchablesList();
  int count=searchablesList.size();
  assertTrue(count >= 1);
  checkSearchables(searchablesList);
  ArrayList<SearchableInfo> global=searchables.getSearchablesInGlobalSearchList();
  checkSearchables(global);
}

private void fillExampleTable(DataSet dataSet,ProgressListener listener,int[] attributeColumns,MemoryExampleTable exampleTable) throws DataSetException, ProcessStoppedException, ParseException {
  Attribute[] attributes=exampleTable.getAttributes();
  dataSet.reset();
  int numberOfRows=dataSet.getNumberOfRows();
  DataRowFactory factory=new DataRowFactory(dataManagementType,DataRowFactory.POINT_AS_DECIMAL_CHARACTER);
  boolean isRunningInProcess=isOperatorRunning();
  while (dataSet.hasNext()) {
    if (isRunningInProcess) {
      operator.checkForStop();
    }
    if (shouldStop) {
      throw new ProcessStoppedException();
    }
    DataSetRow currentRow=dataSet.nextRow();
    if (listener != null) {
      updateProcess(listener,dataSet.getCurrentRowIndex(),numberOfRows);
    }
    DataRow row=factory.create(attributes.length);
    exampleTable.addDataRow(row);
    int attributeIndex=0;
    for (    Attribute attribute : attributes) {
      if (currentRow.isMissing(attributeColumns[attributeIndex])) {
        row.set(attribute,Double.NaN);
      }
 else {
switch (attribute.getValueType()) {
case Ontology.INTEGER:
case Ontology.NUMERICAL:
case Ontology.REAL:
          row.set(attribute,getNumber(currentRow,attributeColumns[attributeIndex]));
        break;
case Ontology.DATE_TIME:
case Ontology.TIME:
case Ontology.DATE:
      row.set(attribute,getDate(currentRow,attributeColumns[attributeIndex]));
    break;
default :
  row.set(attribute,getStringIndex(attribute,currentRow,attributeColumns[attributeIndex]));
}
}
attributeIndex++;
}
}
}

public boolean isSpurious(int minClSize){
  return children.isEmpty() && members.size() < minClSize;
}

public AesDecryptor(byte[] key,int off,int len){
  this.key=new byte[len];
  System.arraycopy(key,off,this.key,0,len);
}

static String extractNumberFromUriWithoutFormatting(String uri){
  if (uri == null) {
    return null;
  }
  int index0=uri.indexOf(URI_START_DELIMITER);
  if (index0 != -1) {
    uri=uri.substring(index0 + URI_START_DELIMITER.length(),uri.indexOf(URI_END_DELIMITER,index0));
  }
  int index1=uri.indexOf(TEL_URI_HEADER);
  if (index1 != -1) {
    uri=uri.substring(index1 + TEL_URI_HEADER.length());
  }
  index1=uri.indexOf(SIP_URI_HEADER);
  if (index1 != -1) {
    int index2=uri.indexOf("@",index1);
    uri=uri.substring(index1 + SIP_URI_HEADER.length(),index2);
  }
  int index2=uri.indexOf(";");
  if (index2 != -1) {
    uri=uri.substring(0,index2);
  }
  index2=uri.indexOf("?");
  if (index2 != -1) {
    uri=uri.substring(0,index2);
  }
  return uri;
}

public RemoteMethodCallResults invokeAndWait(final String endPointName,final RemoteMethodCall remoteCall){
  EndPoint local;
synchronized (m_endPointMutex) {
    local=m_localEndPoints.get(endPointName);
  }
  if (local == null) {
    return invokeAndWaitRemote(remoteCall);
  }
 else {
    final long number=local.takeANumber();
    final List<RemoteMethodCallResults> results=local.invokeLocal(remoteCall,number,getLocalNode());
    if (results.size() == 0) {
      throw new RemoteNotFoundException("Not found:" + endPointName);
    }
    if (results.size() > 1) {
      throw new IllegalStateException("Too many implementors, got back:" + results);
    }
    return results.get(0);
  }
}

private void restoreFromKeypress(final KeyEvent keyEvent,final int keyNumber){
  if (keyEvent.isAltDown()) {
    final int arrayIndex=(keyNumber > 0 ? keyNumber : MAX_RECENT_MESSAGES) - 1;
    if (arrayIndex < recentMessages.size()) {
      displayMessage(recentMessages.get(arrayIndex));
    }
    keyEvent.consume();
  }
}

private void createElement(Document doc,Element parentElement,String elementName,boolean value){
  Element element=doc.createElement(elementName);
  element.appendChild(doc.createTextNode(Boolean.toString(value)));
  parentElement.appendChild(element);
}

protected void annotationValueToString(final StringBuilder sb,final BOp val,final int indent){
  sb.append(val.toString());
}

public void runTest() throws Throwable {
  Document doc;
  NodeList emList;
  Node emNode;
  CharacterData emText;
  Node nullChild;
  doc=(Document)load("hc_staff",false);
  emList=doc.getElementsByTagName("em");
  emNode=emList.item(0);
  emText=(CharacterData)emNode.getFirstChild();
  nullChild=emText.getLastChild();
  assertNull("nullChild",nullChild);
}

public Enumeration oids(){
  return ordering.elements();
}

@Override Map<String,Object> extractFields(String line){
  if (!initialized) {
    init();
    initialized=true;
  }
  String[] values=fixedWidthParser.parseLine(line);
  if (hasHeader && Arrays.deepEquals(values,header)) {
    return null;
  }
  Map<String,Object> map=Maps.newHashMap();
  int i=0;
  for (  FixedWidthField field : fields) {
    map.put(field.getName(),getValue(field,values[i++]));
  }
  return map;
}

protected double ScalingFunction(int iDistance){
  return Math.exp(-Math.pow((iDistance),2.0) / (2.0 * Math.pow(CorrelationWindow,2.0)));
}

protected void updateIdealPoint(){
  for (  Solution solution : this) {
    if (solution.getNumberOfObjectives() != numberOfObjectives) {
      throw new FrameworkException("incorrect number of objectives");
    }
    for (int i=0; i < numberOfObjectives; i++) {
      idealPoint[i]=Math.min(idealPoint[i],solution.getObjective(i));
    }
  }
}

public SearchBuilder sort(SortFieldBuilder... builders){
  sort.addAll(Arrays.asList(builders));
  return this;
}

@Override public final BufferedImage dataToRGB(byte[] data,final int width,final int height){
  BufferedImage image;
  data=dataToRGBByteArray(data,width,height);
  final DataBuffer db=new DataBufferByte(data,data.length);
  final int[] bands={0,1,2};
  image=new BufferedImage(width,height,BufferedImage.TYPE_INT_RGB);
  final Raster raster=Raster.createInterleavedRaster(db,width,height,width * 3,3,bands,null);
  image.setData(raster);
  return image;
}

protected void createFileChooser(){
  m_FileChooser=new JFileChooser(new File(System.getProperty("user.dir")));
  m_FileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
}

private boolean isNoun(String word){
  if (nouns == null)   return false;
  return nouns.contains(word.toLowerCase());
}

public static void writeDocument(Document document,String encoding,OutputStream out,Writer writer,boolean omitXMLDeclaration) throws IOException, XMLException {
  if (writer == null) {
    writer=new OutputStreamWriter(out,encoding);
  }
  transformer.setOutputProperty(OutputKeys.ENCODING,encoding);
  transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,omitXMLDeclaration ? "yes" : "no");
  Source source=new DOMSource(document);
  Result result=new StreamResult(writer);
  try {
    transformer.transform(source,result);
  }
 catch (  TransformerException e) {
    e.printStackTrace();
    throw new XMLException("writeDocument failed",e);
  }
  writer.flush();
}

public static String intToString(int value,int nChars){
  String strValue=Integer.toString(value);
  StringBuilder strBuf=new StringBuilder(nChars);
  for (int i=strValue.length(); i < nChars; i++) {
    strBuf.append('0');
  }
  strBuf.append(strValue);
  return strBuf.toString();
}

public boolean isQuestCompleted(final String name){
  return quests.isQuestCompleted(name);
}

private void updateButtonState(boolean dataChanged){
  btnApply.setEnabled(dataChanged);
  btnRevert.setEnabled(dataChanged);
}

private void buildMenu(){
  setVisible(false);
  removeAll();
  if (recentSearches.getLength() == 0) {
    JMenuItem noRecent=new JMenuItem(UIManager.getString("SearchField.noRecentsText"));
    noRecent.setEnabled(false);
    add(noRecent);
  }
 else {
    JMenuItem recent=new JMenuItem(UIManager.getString("SearchField.recentsMenuTitle"));
    recent.setEnabled(false);
    add(recent);
    for (    String searchString : recentSearches.getRecentSearches()) {
      JMenuItem mi=new JMenuItem(searchString);
      mi.addActionListener(this);
      add(mi);
    }
    addSeparator();
    clear=new JMenuItem(UIManager.getString("SearchField.clearRecentsText"));
    clear.addActionListener(this);
    add(clear);
  }
}

public static String convertU8ToHexString(char u8){
  return Integer.toHexString(u8);
}

protected void Predicate() throws javax.xml.transform.TransformerException {
  if (tokenIs('[')) {
    nextToken();
    PredicateExpr();
    consumeExpected(']');
  }
}

public static byte[] join(byte[] arrayA,byte... arrayB){
  if ((arrayB == null) || (arrayB.length == 0)) {
    return arrayA;
  }
  if ((arrayA == null) || (arrayA.length == 0)) {
    return arrayB;
  }
  byte[] array=new byte[arrayA.length + arrayB.length];
  System.arraycopy(arrayA,0,array,0,arrayA.length);
  System.arraycopy(arrayB,0,array,arrayA.length,arrayB.length);
  return array;
}

public void removeListener(Listener listener){
  mListeners.remove(listener);
}

protected double constrictionCoefficient(double c1,double c2){
  double rho=c1 + c2;
  if (rho <= 4) {
    return 1.0;
  }
 else {
    return 2.0 / (2.0 - rho - Math.sqrt(Math.pow(rho,2.0) - 4.0 * rho));
  }
}

public ReplicatorCapabilities(TungstenProperties props) throws Exception {
  Set<String> keys=props.keyNames();
  for (  String key : keys) {
    if (key.equals(ROLES)) {
      List<String> tags=props.getStringList(key);
      for (      String tag : tags) {
        if (tag.equalsIgnoreCase(ROLE_MASTER)) {
          addRole(ReplicatorCapabilities.ROLE_MASTER);
        }
 else         if (tag.equalsIgnoreCase(ROLE_SLAVE)) {
          addRole(ReplicatorCapabilities.ROLE_SLAVE);
        }
 else         if (tag.equalsIgnoreCase(ROLE_RELAY)) {
          addRole(ReplicatorCapabilities.ROLE_RELAY);
        }
 else {
          throw new Exception("Unknown capability role: " + tag);
        }
      }
    }
 else     if (key.equals(MODEL)) {
      String tag=props.getString(key);
      if (tag.equalsIgnoreCase(MODEL_PUSH)) {
        setModel(MODEL_PUSH);
      }
 else       if (tag.equalsIgnoreCase(MODEL_PULL)) {
        setModel(MODEL_PULL);
      }
 else       if (tag.equalsIgnoreCase(MODEL_PEER)) {
        setModel(MODEL_PEER);
      }
 else       if (tag.equalsIgnoreCase(UNKNOWN)) {
        setModel(UNKNOWN);
      }
 else {
        throw new Exception("Unknown value for model: " + tag);
      }
    }
 else     if (key.equals(CAP_CONSISTENCY)) {
      setConsistencyCheck(props.getBoolean(CAP_CONSISTENCY));
    }
 else     if (key.equals(CAP_HEARTBEAT)) {
      setHeartbeat(props.getBoolean(CAP_HEARTBEAT));
    }
 else     if (key.equals(CAP_FLUSH)) {
      setFlush(props.getBoolean(CAP_FLUSH));
    }
 else     if (key.equals(PROVISION)) {
      String tag=props.getString(key);
      if (tag.equalsIgnoreCase(PROVISION_DONOR)) {
        setProvisionDriver(PROVISION_DONOR);
      }
 else       if (tag.equalsIgnoreCase(PROVISION_JOINER)) {
        setProvisionDriver(PROVISION_JOINER);
      }
 else       if (tag.equalsIgnoreCase(UNKNOWN)) {
        setProvisionDriver(UNKNOWN);
      }
 else {
        throw new Exception("Unknown provision driver: " + tag);
      }
    }
 else {
      throw new Exception("Unknown capability: " + key);
    }
  }
}

private void fitImageToView(){
  Drawable drawable=getDrawable();
  if (drawable == null || drawable.getIntrinsicWidth() == 0 || drawable.getIntrinsicHeight() == 0) {
    return;
  }
  if (matrix == null || prevMatrix == null) {
    return;
  }
  int drawableWidth=drawable.getIntrinsicWidth();
  int drawableHeight=drawable.getIntrinsicHeight();
  float scaleX=(float)viewWidth / drawableWidth;
  float scaleY=(float)viewHeight / drawableHeight;
switch (mScaleType) {
case CENTER:
    scaleX=scaleY=1;
  break;
case CENTER_CROP:
scaleX=scaleY=Math.max(scaleX,scaleY);
break;
case CENTER_INSIDE:
scaleX=scaleY=Math.min(1,Math.min(scaleX,scaleY));
case FIT_CENTER:
scaleX=scaleY=Math.min(scaleX,scaleY);
break;
case FIT_XY:
break;
default :
throw new UnsupportedOperationException("TouchImageView does not support FIT_START or FIT_END");
}
float redundantXSpace=viewWidth - (scaleX * drawableWidth);
float redundantYSpace=viewHeight - (scaleY * drawableHeight);
matchViewWidth=viewWidth - redundantXSpace;
matchViewHeight=viewHeight - redundantYSpace;
if (!isZoomed()) {
matrix.setScale(scaleX,scaleY);
matrix.postTranslate(redundantXSpace / 2,redundantYSpace / 2);
normalizedScale=1;
}
 else {
prevMatrix.getValues(m);
m[Matrix.MSCALE_X]=matchViewWidth / drawableWidth * normalizedScale;
m[Matrix.MSCALE_Y]=matchViewHeight / drawableHeight * normalizedScale;
float transX=m[Matrix.MTRANS_X];
float transY=m[Matrix.MTRANS_Y];
float prevActualWidth=prevMatchViewWidth * normalizedScale;
float actualWidth=getImageWidth();
translateMatrixAfterRotate(Matrix.MTRANS_X,transX,prevActualWidth,actualWidth,prevViewWidth,viewWidth,drawableWidth);
float prevActualHeight=prevMatchViewHeight * normalizedScale;
float actualHeight=getImageHeight();
translateMatrixAfterRotate(Matrix.MTRANS_Y,transY,prevActualHeight,actualHeight,prevViewHeight,viewHeight,drawableHeight);
matrix.setValues(m);
}
fixTrans();
setImageMatrix(matrix);
}

public synchronized void close(){
  if (isAlive) {
    isAlive=false;
    taskQueue.clear();
    interrupt();
  }
}

public String removeAfter(String original,String marker){
  int index=original.indexOf(marker);
  if (index != -1) {
    return original.substring(0,index);
  }
  return original;
}

public Address __sub__(final Object rhs){
  return new Address(m_value.subtract(getBigInteger(rhs)));
}

public static TestConfiguration buildDefaultConfiguration(String testSourcePath,File testFile,String checkerName,List<String> options,boolean shouldEmitDebugInfo){
  List<File> javaFiles=Arrays.asList(testFile);
  List<String> processors=Arrays.asList(checkerName);
  return buildDefaultConfiguration(testSourcePath,javaFiles,processors,options,shouldEmitDebugInfo);
}

private static boolean eq(Object o1,Object o2){
  return (o1 == null ? o2 == null : o1.equals(o2));
}

public void roll(int field,int value){
  boolean increment=value >= 0;
  int count=increment ? value : -value;
  for (int i=0; i < count; i++) {
    roll(field,increment);
  }
}

public String clusterResultsToString(){
  return m_clusteringResults.toString();
}

private void generateGetModuleMethod(NewBindingKey key,NewDependencyInfo dependencyInfo){
  TypeElement scope=scopeCalculator.calculate(key);
  generateGetModuleMethod(scope,dependencyInfo);
}

private void addCalendarEvent(String summary,Date start,boolean allDay,Date end,String location,String description,String[] attendees){
  Intent intent=new Intent(Intent.ACTION_INSERT);
  intent.setType("vnd.android.cursor.item/event");
  long startMilliseconds=start.getTime();
  intent.putExtra("beginTime",startMilliseconds);
  if (allDay) {
    intent.putExtra("allDay",true);
  }
  long endMilliseconds;
  if (end == null) {
    if (allDay) {
      endMilliseconds=startMilliseconds + 24 * 60 * 60* 1000;
    }
 else {
      endMilliseconds=startMilliseconds;
    }
  }
 else {
    endMilliseconds=end.getTime();
  }
  intent.putExtra("endTime",endMilliseconds);
  intent.putExtra("title",summary);
  intent.putExtra("eventLocation",location);
  intent.putExtra("description",description);
  if (attendees != null) {
    intent.putExtra(Intent.EXTRA_EMAIL,attendees);
  }
  try {
    rawLaunchIntent(intent);
  }
 catch (  ActivityNotFoundException anfe) {
    Log.w(TAG,"No calendar app available that responds to " + Intent.ACTION_INSERT);
    intent.setAction(Intent.ACTION_EDIT);
    launchIntent(intent);
  }
}

private String[] separatorAndEnclosuresToArray(){
  String[] parts=m_Enclosures.split(",");
  String[] result=new String[parts.length + 1];
  result[0]=m_FieldSeparator;
  int index=1;
  for (  String e : parts) {
    if (e.length() > 1 || e.length() == 0) {
      throw new IllegalArgumentException("Enclosures can only be single characters");
    }
    result[index++]=e;
  }
  return result;
}

private static void ReleaseStringChars(JNIEnvironment env,int objJREF,Address bufAddress){
  if (traceJNI)   VM.sysWrite("JNI called: ReleaseStringChars  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    sysCall.sysFree(bufAddress);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
  }
}

private BusinessObjectDataNotificationRegistrationEntity createBusinessObjectDataNotificationEntity(NamespaceEntity namespaceEntity,NotificationEventTypeEntity notificationEventTypeEntity,BusinessObjectDefinitionEntity businessObjectDefinitionEntity,FileTypeEntity fileTypeEntity,StorageEntity storageEntity,BusinessObjectDataStatusEntity newBusinessObjectDataStatusEntity,BusinessObjectDataStatusEntity oldBusinessObjectDataStatusEntity,NotificationRegistrationKey key,BusinessObjectDataNotificationFilter businessObjectDataNotificationFilter,List<JobAction> jobActions,NotificationRegistrationStatusEntity notificationRegistrationStatusEntity){
  BusinessObjectDataNotificationRegistrationEntity businessObjectDataNotificationRegistrationEntity=new BusinessObjectDataNotificationRegistrationEntity();
  businessObjectDataNotificationRegistrationEntity.setNamespace(namespaceEntity);
  businessObjectDataNotificationRegistrationEntity.setName(key.getNotificationName());
  businessObjectDataNotificationRegistrationEntity.setNotificationEventType(notificationEventTypeEntity);
  businessObjectDataNotificationRegistrationEntity.setBusinessObjectDefinition(businessObjectDefinitionEntity);
  if (StringUtils.isNotBlank(businessObjectDataNotificationFilter.getBusinessObjectFormatUsage())) {
    businessObjectDataNotificationRegistrationEntity.setUsage(businessObjectDataNotificationFilter.getBusinessObjectFormatUsage());
  }
  businessObjectDataNotificationRegistrationEntity.setFileType(fileTypeEntity);
  businessObjectDataNotificationRegistrationEntity.setBusinessObjectFormatVersion(businessObjectDataNotificationFilter.getBusinessObjectFormatVersion());
  businessObjectDataNotificationRegistrationEntity.setStorage(storageEntity);
  businessObjectDataNotificationRegistrationEntity.setNewBusinessObjectDataStatus(newBusinessObjectDataStatusEntity);
  businessObjectDataNotificationRegistrationEntity.setOldBusinessObjectDataStatus(oldBusinessObjectDataStatusEntity);
  businessObjectDataNotificationRegistrationEntity.setNotificationRegistrationStatus(notificationRegistrationStatusEntity);
  List<NotificationActionEntity> notificationActionEntities=new ArrayList<>();
  businessObjectDataNotificationRegistrationEntity.setNotificationActions(notificationActionEntities);
  for (  JobAction jobAction : jobActions) {
    JobDefinitionEntity jobDefinitionEntity=jobDefinitionDaoHelper.getJobDefinitionEntity(jobAction.getNamespace(),jobAction.getJobName());
    NotificationJobActionEntity notificationJobActionEntity=new NotificationJobActionEntity();
    notificationActionEntities.add(notificationJobActionEntity);
    notificationJobActionEntity.setJobDefinition(jobDefinitionEntity);
    notificationJobActionEntity.setCorrelationData(jobAction.getCorrelationData());
    notificationJobActionEntity.setNotificationRegistration(businessObjectDataNotificationRegistrationEntity);
  }
  return businessObjectDataNotificationRegistrationEntity;
}

void bind(String jndiUrl,Hashtable<?,?> attributes,RMIServer rmiServer,boolean rebind) throws NamingException, MalformedURLException {
  InitialContext ctx=new InitialContext(attributes);
  if (rebind)   ctx.rebind(jndiUrl,rmiServer);
 else   ctx.bind(jndiUrl,rmiServer);
  ctx.close();
}

public String toString(){
  if (info == null || algId == null || signature == null)   return "";
  StringBuilder sb=new StringBuilder();
  sb.append("[\n");
  sb.append(info.toString() + "\n");
  sb.append("  Algorithm: [" + algId.toString() + "]\n");
  HexDumpEncoder encoder=new HexDumpEncoder();
  sb.append("  Signature:\n" + encoder.encodeBuffer(signature));
  sb.append("\n]");
  return sb.toString();
}

public void testObsoleteDstZoneName() throws Exception {
  SimpleDateFormat format=new SimpleDateFormat("yyyy-MM-dd'T'HH:mm zzzz",Locale.US);
  Date normal=format.parse("1970-01-01T00:00 EET");
  Date dst=format.parse("1970-01-01T00:00 EEST");
  assertEquals(60 * 60 * 1000,normal.getTime() - dst.getTime());
}

public final void XprintLatin1NoLf(String string) throws IOException {
  if (_source == null) {
    return;
  }
  if (string == null) {
    string="null";
  }
  byte[] writeBuffer=_writeBuffer;
  int writeLength=_writeLength;
  int length=string.length();
  int offset=0;
  int charsLength=CHARS_LENGTH;
  char[] chars=_chars;
  while (length > 0) {
    int sublen=Math.min(charsLength,writeBuffer.length - writeLength);
    if (sublen <= 0) {
      _source.write(writeBuffer,0,writeLength,false);
      _position+=writeLength;
      _isFlushRequired=true;
      writeLength=0;
      sublen=Math.min(charsLength,writeBuffer.length - writeLength);
    }
    sublen=Math.min(length,sublen);
    string.getChars(offset,sublen,chars,0);
    for (int i=0; i < sublen; i++) {
      byte value=(byte)chars[i];
      if (value == '\r' || value == '\n') {
        length=0;
        break;
      }
      writeBuffer[writeLength++]=value;
    }
    offset+=sublen;
    length-=sublen;
  }
  _writeLength=writeLength;
}

private int calculateStrokeWeight(){
  int strokeWeight=(int)(getStrokeWidth() * 2.0f);
  LOGGER.trace("Calculated Action Button stroke width: {}",strokeWidth);
  return strokeWeight;
}

private static List<MatchResult> flattenResults(List<List<MatchResult>> allResults){
  List<MatchResult> results=new ArrayList<MatchResult>();
  results.addAll(allResults.remove(0));
  for (  List<MatchResult> relResults : allResults) {
    List<MatchResult> newResults=new ArrayList<MatchResult>();
    for (    MatchResult curResult : results) {
      for (      MatchResult relResult : relResults) {
        MatchResult newResult=curResult.copy();
        newResult.addAssignment(relResult);
        newResults.add(newResult);
      }
    }
    results=newResults;
  }
  return results;
}

@Override public void visit(Mapping m,int line,int col,int nextLine,int nextCol) throws IOException {
  if (previousLine != line) {
    previousColumn=0;
  }
  if (line != nextLine || col != nextCol) {
    if (line < maxLine) {
      if (previousLine == line) {
        out.append(',');
      }
      writeEntry(m,col);
      previousLine=line;
      previousColumn=col;
    }
 else {
      Preconditions.checkState(m == null);
    }
  }
  for (int i=line; i <= nextLine && i < maxLine; i++) {
    if (i == nextLine) {
      break;
    }
    closeLine(false);
    openLine(false);
  }
}

public boolean onClick(int position){
  if (mMode == MODE_MULTIPLE_SELECT) {
    if (mSelectedItems.contains(position)) {
      mSelectedItems.remove(position);
      if (mSelectedItems.isEmpty()) {
        setMode(MODE_SINGLE_SELECT);
      }
    }
 else {
      mSelectedItems.add(position);
    }
    notifySelectionChanged(position);
    return true;
  }
  return false;
}

public void addSessionEventURL(String url,SessionID sid){
  Set<SessionID> sids=sessionEventURLs.get(url);
  if (sids == null) {
    sids=Collections.newSetFromMap(new ConcurrentHashMap<SessionID,Boolean>());
    Set<SessionID> previousValue=sessionEventURLs.putIfAbsent(url,sids);
    if (previousValue != null) {
      sids=previousValue;
    }
  }
  if (sids.add(sid)) {
    notifyPersistenceManager();
  }
}

abstract public long rangeCount();

public final void addInstWithUnknown(Instances source,int attIndex) throws Exception {
  double[] probs;
  double weight, newWeight;
  int classIndex;
  Instance instance;
  int j;
  probs=new double[m_perBag.length];
  for (j=0; j < m_perBag.length; j++) {
    if (Utils.eq(totaL,0)) {
      probs[j]=1.0 / probs.length;
    }
 else {
      probs[j]=m_perBag[j] / totaL;
    }
  }
  Enumeration<Instance> enu=source.enumerateInstances();
  while (enu.hasMoreElements()) {
    instance=enu.nextElement();
    if (instance.isMissing(attIndex)) {
      classIndex=(int)instance.classValue();
      weight=instance.weight();
      m_perClass[classIndex]=m_perClass[classIndex] + weight;
      totaL=totaL + weight;
      for (j=0; j < m_perBag.length; j++) {
        newWeight=probs[j] * weight;
        m_perClassPerBag[j][classIndex]=m_perClassPerBag[j][classIndex] + newWeight;
        m_perBag[j]=m_perBag[j] + newWeight;
      }
    }
  }
}

@Override public void onItemClick(AdapterView<?> parent,View view,int position,long id){
  setSelection(position);
}

public void traverseFragment(Node pos) throws org.xml.sax.SAXException {
  Node top=pos;
  while (null != pos) {
    startNode(pos);
    Node nextNode=pos.getFirstChild();
    while (null == nextNode) {
      endNode(pos);
      if (top.equals(pos))       break;
      nextNode=pos.getNextSibling();
      if (null == nextNode) {
        pos=pos.getParentNode();
        if ((null == pos) || (top.equals(pos))) {
          if (null != pos)           endNode(pos);
          nextNode=null;
          break;
        }
      }
    }
    pos=nextNode;
  }
}

public void updateProcessorDuration(Duration duration){
  processor_duration_=Optional.of(duration);
}

static Object invokeOrDie(Method method,Object object,Object... params){
  try {
    return method.invoke(object,params);
  }
 catch (  IllegalAccessException e) {
    throw new RuntimeException("Couldn't use Java reflection to implement protocol message " + "reflection.",e);
  }
catch (  InvocationTargetException e) {
    final Throwable cause=e.getCause();
    if (cause instanceof RuntimeException) {
      throw (RuntimeException)cause;
    }
 else     if (cause instanceof Error) {
      throw (Error)cause;
    }
 else {
      throw new RuntimeException("Unexpected exception thrown by generated accessor method.",cause);
    }
  }
}

public void startElement(String uri,String localName,String qName,Attributes atts) throws SAXException {
  elementLevel++;
  nsSupport.pushContext();
  if (forceDTD && !hasOutputDTD)   startDTD(localName == null ? qName : localName,"","");
  write('<');
  writeName(uri,localName,qName,true);
  writeAttributes(atts);
  if (elementLevel == 1) {
    forceNSDecls();
  }
  writeNSDecls();
  write('>');
  if (htmlMode && (qName.equals("script") || qName.equals("style"))) {
    cdataElement=true;
  }
  super.startElement(uri,localName,qName,atts);
}

void initProgram(){
  glUseProgram(this.program);
  viewMatrixUniform=glGetUniformLocation(this.program,"viewMatrix");
  projMatrixUniform=glGetUniformLocation(this.program,"projMatrix");
  viewportSizeUniform=glGetUniformLocation(this.program,"viewportSize");
  glUseProgram(0);
}

public static String[] sortCopy(String[] objects){
  int len=objects.length;
  String[] copy=new String[len];
  System.arraycopy(objects,0,copy,0,len);
  sort(copy);
  return copy;
}

public Iterator<SimEvent> iterator(){
  return list.iterator();
}

private static boolean accepts(String accept_header,String to_accept){
  String[] acceptValues=accept_header.split("\\s*(,|;)\\s*");
  Arrays.sort(acceptValues);
  return Arrays.binarySearch(acceptValues,to_accept) > -1 || Arrays.binarySearch(acceptValues,to_accept.replaceAll("/.*$","/*")) > -1 || Arrays.binarySearch(acceptValues,"*/*") > -1;
}

public String[] tokenize(String rawString){
  Vector<String> result=new Vector<String>();
  StringTokenizer tk=new StringTokenizer(rawString,m_Seperator);
  while (tk.hasMoreTokens()) {
    result.addElement(tk.nextToken());
  }
  String[] newStrings=new String[result.size()];
  for (int i=0; i < result.size(); i++) {
    newStrings[i]=result.elementAt(i);
  }
  return newStrings;
}

public synchronized void returnLogCursor(LogCursor logCursor){
  logCursor.setLoaned(false);
}

void unassignPolicies(String serviceName,Set policyDNs,boolean toVerify) throws AMException, SSOException {
  if ((policyDNs == null) || (policyDNs.isEmpty())) {
    return;
  }
  AMTemplate template=getTemplate(serviceName,AMTemplate.POLICY_TEMPLATE);
  unassignPolicies(template,policyDNs,toVerify);
}

public boolean releaseLock(String lockName){
  if (lockName == null || lockName.isEmpty()) {
    s_logger.info("No lock name specified.");
    return false;
  }
  try {
    InterProcessLock lock=s_acquiredLocks.get(lockName);
    if (lock != null) {
      s_acquiredLocks.remove(lockName);
      lock.release();
      s_logger.info("Released lock: " + lockName);
    }
 else {
      return false;
    }
    return true;
  }
 catch (  Exception e) {
    s_logger.error("Release of lock: {} failed with Exception: ",lockName,e);
    return false;
  }
}

@Parameterized.Parameters(name="{index}: ChannelConnectionTest({0})") public static Collection<PaymentChannelClient.VersionSelector> data(){
  return Arrays.asList(PaymentChannelClient.VersionSelector.VERSION_1,PaymentChannelClient.VersionSelector.VERSION_2_ALLOW_1);
}

private View findInterceptingView(float pos,View v){
  for (  KeyButtonView otherView : mButtonViews) {
    if (otherView == v) {
      continue;
    }
    if (ArrayUtils.contains(SMALL_BUTTON_IDS,otherView.getId())) {
      continue;
    }
    otherView.getLocationOnScreen(sLocation);
    float otherPos=sLocation[mVertical ? 1 : 0];
    float otherDimension=mVertical ? v.getHeight() : v.getWidth();
    if (pos > (otherPos + otherDimension / 4) && pos < (otherPos + otherDimension)) {
      return otherView;
    }
  }
  return null;
}

public void detachDiskAsync(final String vmId,VmDiskOperation vmDiskOperation,final FutureCallback<Task> responseCallback) throws IOException {
  String path=String.format("%s/%s/detach_disk",getBasePath(),vmId);
  createObjectAsync(path,serializeObjectAsJson(vmDiskOperation),responseCallback);
}

public static void main(String[] args){
  Log.printLine("Starting CloudSimExample5...");
  try {
    int num_user=2;
    Calendar calendar=Calendar.getInstance();
    boolean trace_flag=false;
    CloudSim.init(num_user,calendar,trace_flag);
    @SuppressWarnings("unused") Datacenter datacenter0=createDatacenter("Datacenter_0");
    @SuppressWarnings("unused") Datacenter datacenter1=createDatacenter("Datacenter_1");
    DatacenterBroker broker1=createBroker(1);
    int brokerId1=broker1.getId();
    DatacenterBroker broker2=createBroker(2);
    int brokerId2=broker2.getId();
    vmlist1=new ArrayList<Vm>();
    vmlist2=new ArrayList<Vm>();
    int vmid=0;
    int mips=250;
    long size=10000;
    int ram=512;
    long bw=1000;
    int pesNumber=1;
    String vmm="Xen";
    Vm vm1=new Vm(vmid,brokerId1,mips,pesNumber,ram,bw,size,vmm,new CloudletSchedulerTimeShared());
    Vm vm2=new Vm(vmid,brokerId2,mips,pesNumber,ram,bw,size,vmm,new CloudletSchedulerTimeShared());
    vmlist1.add(vm1);
    vmlist2.add(vm2);
    broker1.submitVmList(vmlist1);
    broker2.submitVmList(vmlist2);
    cloudletList1=new ArrayList<Cloudlet>();
    cloudletList2=new ArrayList<Cloudlet>();
    int id=0;
    long length=40000;
    long fileSize=300;
    long outputSize=300;
    UtilizationModel utilizationModel=new UtilizationModelFull();
    Cloudlet cloudlet1=new Cloudlet(id,length,pesNumber,fileSize,outputSize,utilizationModel,utilizationModel,utilizationModel);
    cloudlet1.setUserId(brokerId1);
    Cloudlet cloudlet2=new Cloudlet(id,length,pesNumber,fileSize,outputSize,utilizationModel,utilizationModel,utilizationModel);
    cloudlet2.setUserId(brokerId2);
    cloudletList1.add(cloudlet1);
    cloudletList2.add(cloudlet2);
    broker1.submitCloudletList(cloudletList1);
    broker2.submitCloudletList(cloudletList2);
    CloudSim.startSimulation();
    List<Cloudlet> newList1=broker1.getCloudletReceivedList();
    List<Cloudlet> newList2=broker2.getCloudletReceivedList();
    CloudSim.stopSimulation();
    Log.print("=============> User " + brokerId1 + "    ");
    printCloudletList(newList1);
    Log.print("=============> User " + brokerId2 + "    ");
    printCloudletList(newList2);
    Log.printLine("CloudSimExample5 finished!");
  }
 catch (  Exception e) {
    e.printStackTrace();
    Log.printLine("The simulation has been terminated due to an unexpected error");
  }
}

public static boolean isFPZero(@NotNull final String text){
  for (int i=0; i < text.length(); i++) {
    final char c=text.charAt(i);
    if (Character.isDigit(c) && c != '0')     return false;
    final char d=Character.toUpperCase(c);
    if (d == 'E' || d == 'P')     break;
  }
  return true;
}

public ConcurrentHashMapPro(Map<? extends K,? extends V> m){
  this(Math.max((int)(m.size() / DEFAULT_LOAD_FACTOR) + 1,DEFAULT_INITIAL_CAPACITY),DEFAULT_LOAD_FACTOR,DEFAULT_CONCURRENCY_LEVEL);
  putAll(m);
}

static <K>void generate(ArrayList<K> list,UniversalHash<K> hash,int level,int seed,ByteArrayOutputStream out){
  int size=list.size();
  if (size <= 1) {
    out.write(size);
    return;
  }
  if (level > 32) {
    throw new IllegalStateException("Too many recursions; " + " incorrect universal hash function?");
  }
  if (size <= MAX_SIZE) {
    int maxOffset=MAX_OFFSETS[size];
    int[] hashes=new int[size];
    for (int i=0; i < size; i++) {
      hashes[i]=hash.hashCode(list.get(i),level,seed);
    }
    int testSize=size;
    if (size >= SPEEDUP) {
      testSize++;
      maxOffset/=testSize;
    }
    nextOffset:     for (int offset=0; offset < maxOffset; offset++) {
      int bits=0;
      for (int i=0; i < size; i++) {
        int x=hashes[i];
        int h=hash(x,level,offset,testSize);
        if ((bits & (1 << h)) != 0) {
          continue nextOffset;
        }
        bits|=1 << h;
      }
      if (size >= SPEEDUP) {
        int pos=Integer.numberOfTrailingZeros(~bits);
        writeSizeOffset(out,size,offset * (size + 1) + pos);
      }
 else {
        writeSizeOffset(out,size,offset);
      }
      return;
    }
  }
  int split;
  if (size > 57 * DIVIDE) {
    split=size / (36 * DIVIDE);
  }
 else {
    split=(size - 47) / DIVIDE;
  }
  split=Math.max(2,split);
  boolean isRoot=level == 0;
  ArrayList<ArrayList<K>> lists;
  do {
    lists=new ArrayList<ArrayList<K>>(split);
    for (int i=0; i < split; i++) {
      lists.add(new ArrayList<K>(size / split));
    }
    for (int i=0; i < size; i++) {
      K x=list.get(i);
      ArrayList<K> l=lists.get(hash(x,hash,level,seed,0,split));
      l.add(x);
      if (isRoot && split >= SPLIT_MANY && l.size() > 36 * DIVIDE * 10) {
        level++;
        lists=null;
        break;
      }
    }
  }
 while (lists == null);
  if (split >= SPLIT_MANY) {
    out.write(SPLIT_MANY);
  }
  writeVarInt(out,split);
  boolean multiThreaded=isRoot && list.size() > 1000;
  list.clear();
  list.trimToSize();
  if (multiThreaded) {
    generateMultiThreaded(lists,hash,level,seed,out);
  }
 else {
    for (    ArrayList<K> s2 : lists) {
      generate(s2,hash,level + 1,seed,out);
    }
  }
  if (isRoot && split >= SPLIT_MANY) {
    out.write(level);
  }
}

private void initialiseCommands(){
  reward=new AchievementRewards(this);
  achievementDisplay=new AchievementDisplay(this);
  giveCommand=new GiveCommand(this);
  bookCommand=new BookCommand(this);
  topCommand=new TopCommand(this);
  statsCommand=new StatsCommand(this);
  infoCommand=new InfoCommand(this);
  listCommand=new ListCommand(this);
  helpCommand=new HelpCommand(this);
  checkCommand=new CheckCommand(this);
  deleteCommand=new DeleteCommand(this);
}

public CreateCustomMetric(Monitoring monitoringService,String projectResource){
  this.monitoringService=monitoringService;
  this.projectResource=projectResource;
  this.metricType=CUSTOM_METRIC_DOMAIN + "/" + DEFAULT_METRIC_TYPE;
  this.metricName=projectResource + "/metricDescriptors/" + metricType;
}

private boolean journalRebuildRequired(){
  final int REDUNDANT_OP_COMPACT_THRESHOLD=2000;
  return redundantOpCount >= REDUNDANT_OP_COMPACT_THRESHOLD && redundantOpCount >= lruEntries.size();
}

public static boolean deleteFilesInADirectory(String directoryPath){
  if ((directoryPath == null) || directoryPath.isEmpty()) {
    return false;
  }
  boolean isSuccessfulDelete=true;
  List<File> files=getListOfFilesInADirectory(directoryPath);
  if (files == null) {
    return false;
  }
  try {
    for (    File file : files) {
      boolean fileDeleteSuccess=deleteFile(directoryPath,file.getName());
      if (!fileDeleteSuccess) {
        isSuccessfulDelete=false;
      }
    }
  }
 catch (  Exception e) {
    logger.debug(e.toString() + System.lineSeparator() + StackTrace.getStringFromStackTrace(e));
    isSuccessfulDelete=false;
  }
  return isSuccessfulDelete;
}

public AnnotationFS add(AnnotationFS aOriginFs,AnnotationFS aTargetFs,JCas aJCas,int aStart,int aEnd,AnnotationFeature aFeature,Object aLabelValue) throws BratAnnotationException {
  if (crossMultipleSentence || isSameSentence(aJCas,aOriginFs.getBegin(),aTargetFs.getEnd())) {
    return interalAddToCas(aJCas,aStart,aEnd,aOriginFs,aTargetFs,aLabelValue,aFeature);
  }
 else {
    throw new ArcCrossedMultipleSentenceException("Arc Annotation shouldn't cross sentence boundary");
  }
}

public void testEqualsNull(){
  String a="92948782094488478231212478987482988429808779810457634781384756794987";
  int aScale=-24;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  assertFalse(aNumber.equals(null));
}

private String readLine(){
  StringBuffer sb=new StringBuffer();
  while (buf.remaining() > 0) {
    char c=(char)buf.get();
    if (c == '\r') {
      if (buf.remaining() > 0) {
        char n=(char)buf.get(buf.position());
        if (n == '\n') {
          buf.get();
        }
      }
      break;
    }
 else     if (c == '\n') {
      break;
    }
    sb.append(c);
  }
  return sb.toString();
}

protected void write(DataOutputStream stream) throws Exception {
  stream.writeInt(value);
}

@Override public int showOpenDialog(Component parent){
  File selFile;
  int result;
  m_DialogType=OPEN_DIALOG;
  initGUI(OPEN_DIALOG);
  result=super.showOpenDialog(parent);
  m_DialogType=UNHANDLED_DIALOG;
  removePropertyChangeListener(m_Listener);
  selFile=getSelectedFile();
  if ((result == APPROVE_OPTION) && (getFileMustExist()) && (selFile == null)) {
    result=showOpenDialog(parent);
  }
 else   if ((result == APPROVE_OPTION) && (getFileMustExist()) && (selFile != null)&& (selFile.isFile())&& (!selFile.exists())) {
    int retVal=JOptionPane.showConfirmDialog(parent,"The file '" + selFile + "' does not exist - please select again!");
    if (retVal == JOptionPane.OK_OPTION)     result=showOpenDialog(parent);
 else     result=CANCEL_OPTION;
  }
  if (result == APPROVE_OPTION) {
    if (getFileFilter() instanceof ExtensionFileFilter)     m_LastFilter=(ExtensionFileFilter)getFileFilter();
 else     m_LastFilter=null;
    if (getSelectedFile() != null)     configureCurrentHandlerHook(OPEN_DIALOG);
  }
  return result;
}

public boolean isNearlyEqualTo(DoubleVector v,double tolerance){
  return Math.abs(v.x - x) < tolerance && Math.abs(v.y - y) < tolerance && Math.abs(v.z - z) < tolerance;
}

private float colorToAngle(int color){
  float[] colors=new float[3];
  Color.colorToHSV(color,colors);
  return (float)Math.toRadians(-colors[0]);
}

void createVerticalSnapAnimation(boolean visible){
  float translationY=visible ? 0.0f : mTotalHeight;
  float yDifference=Math.abs(translationY - getTranslationY()) / mTotalHeight;
  long duration=(long)(MS_ANIMATION_DURATION * yDifference);
  createAnimation(1.0f,0,translationY,duration);
}

@Override public int update(byte[] input,int inputOffset,int inputLen,byte[] output,int outputOffset) throws ShortBufferException {
  return cipher.update(input,inputOffset,inputLen,output,outputOffset);
}

private String validateInputs(){
  if (jarRadio.getSelection()) {
    File f=new File(jarPath.getText());
    if (!f.exists()) {
      return "Jar file doesn't exists";
    }
    if (!f.canRead()) {
      return "Can't read Jar file directory";
    }
  }
 else {
    File f=new File(dirPath.getText());
    if (!f.exists()) {
      return "Base Path directory doesn't exists";
    }
    if (!f.canRead()) {
      return "Can't read Base Path directory";
    }
  }
  return null;
}

public static double parseDoubleString(String st,TExecutionContext context){
  double ret=0;
  Matcher m=DOUBLE_PATTERN.matcher(st);
  if (m.lookingAt()) {
    String truncated=st.substring(0,m.end());
    if (!truncated.equals(st)) {
      context.reportTruncate(st,truncated);
    }
    try {
      ret=Double.parseDouble(truncated);
    }
 catch (    NumberFormatException e) {
      context.reportBadValue(e.getMessage());
    }
  }
 else   context.reportBadValue(st);
  return ret;
}

public ClassPath(DexFile... classPath) throws IOException {
  this(Lists.newArrayList(classPath),15);
}

public double greatCircleAzimuth(Location location){
  if (location == null) {
    throw new IllegalArgumentException(Logger.logMessage(Logger.ERROR,"Location","greatCircleAzimuth","missingLocation"));
  }
  double lat1=Math.toRadians(this.latitude);
  double lon1=Math.toRadians(this.longitude);
  double lat2=Math.toRadians(location.latitude);
  double lon2=Math.toRadians(location.longitude);
  if (lat1 == lat2 && lon1 == lon2) {
    return 0;
  }
  if (lon1 == lon2) {
    return lat1 > lat2 ? 180 : 0;
  }
  double y=Math.cos(lat2) * Math.sin(lon2 - lon1);
  double x=Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);
  double azimuthRadians=Math.atan2(y,x);
  return Double.isNaN(azimuthRadians) ? 0 : Math.toDegrees(azimuthRadians);
}

private boolean[] defineIrrelevant(Random random){
  boolean[] irr=new boolean[getNumAttributes()];
  for (int i=0; i < irr.length; i++) {
    irr[i]=false;
  }
  int numIrr=0;
  for (int i=0; (numIrr < getNumIrrelevant()) && (i < getNumAttributes() * 5); i++) {
    int maybeNext=(int)(random.nextDouble() * irr.length);
    if (irr[maybeNext] == false) {
      irr[maybeNext]=true;
      numIrr++;
    }
  }
  return irr;
}

public void addDropItem(final String name,final double probability,final int amount){
  dropsItems.add(new DropItem(name,probability,amount));
}

protected void unparsedEntDecl(String name,String pubid,String sysid,String notation) throws SAXException {
  mHandDtd.unparsedEntityDecl(name,pubid,sysid,notation);
}

public Enumeration<Permission> elements(){
synchronized (this) {
    return Collections.enumeration(permsMap.values());
  }
}

private static String formatList(String[] stringList,String listPattern,String listCompositionPattern){
  if (listPattern == null || listCompositionPattern == null) {
    StringBuilder result=new StringBuilder();
    for (int i=0; i < stringList.length; ++i) {
      if (i > 0) {
        result.append(',');
      }
      result.append(stringList[i]);
    }
    return result.toString();
  }
  if (stringList.length > 3) {
    MessageFormat format=new MessageFormat(listCompositionPattern);
    stringList=composeList(format,stringList);
  }
  Object[] args=new Object[stringList.length + 1];
  System.arraycopy(stringList,0,args,1,stringList.length);
  args[0]=new Integer(stringList.length);
  MessageFormat format=new MessageFormat(listPattern);
  return format.format(args);
}

public JsonArray add(Object value){
  list.add(value);
  return this;
}

public String comment() throws ParseException {
  StringBuffer retval=new StringBuffer();
  if (lookAhead(0) != '(')   return null;
  consume(1);
  while (true) {
    char next=getNextChar();
    if (next == ')') {
      break;
    }
 else     if (next == '\0') {
      throw new ParseException(this.buffer + " :unexpected EOL",this.ptr);
    }
 else     if (next == '\\') {
      retval.append(next);
      next=getNextChar();
      if (next == '\0')       throw new ParseException(this.buffer + " : unexpected EOL",this.ptr);
      retval.append(next);
    }
 else {
      retval.append(next);
    }
  }
  return retval.toString();
}

public static boolean ignorableWhitespace(String value){
  Matcher m;
  m=whitespacePattern.matcher(value);
  if (m.matches())   return true;
 else   return false;
}

public DelphiWorkgroup(File xmlFile) throws IOException {
  if (xmlFile == null) {
    throw new IllegalArgumentException("No .groupproje file provided.");
  }
 else   if (!xmlFile.exists()) {
    throw new IOException(".grupproj XML not found:" + xmlFile.getAbsolutePath());
  }
  parseFile(xmlFile);
}

public BufferedBlockCipher(BlockCipher cipher){
  this.cipher=cipher;
  buf=new byte[cipher.getBlockSize()];
  bufOff=0;
  String name=cipher.getAlgorithmName();
  int idx=name.indexOf('/') + 1;
  pgpCFB=(idx > 0 && name.startsWith("PGP",idx));
  if (pgpCFB || cipher instanceof StreamCipher) {
    partialBlockOkay=true;
  }
 else {
    partialBlockOkay=(idx > 0 && (name.startsWith("OpenPGP",idx)));
  }
}

public static int readInts(final File f,final LongIndex a,final long offset,final long addend) throws IOException {
  return readInts(f,0,(int)f.length() / 4,a,offset,addend);
}

public void waitAllSitesDbStable(){
  String prefix="Waiting for DB cluster become stable on all sites ...";
  log.info(prefix);
  DbJmxClient geoInstance=getJmxClient(LOCALHOST);
  List<URI> vdcIdIter=queryByType(VirtualDataCenter.class,true);
  for (  URI vdcId : vdcIdIter) {
    log.info("loop db status check on {}",vdcId.toString());
    VirtualDataCenter vdc=queryObject(VirtualDataCenter.class,vdcId);
    if (!shouldCheckDbStatus(vdc)) {
      log.error("ignore vdc for db status check {}",vdcId);
      continue;
    }
    if (vdc.getConnectionStatus() != ConnectionStatus.DISCONNECTED) {
      Site activeSite=drUtil.getActiveSite(vdc.getShortId());
      waitDbNodesStable(geoInstance,vdc.getShortId(),activeSite.getNodeCount());
    }
  }
}

public void saveHierarchyState(Bundle container){
  dispatchSaveInstanceState(container);
}

private static void pipe(InputStream source,OutputStream dest) throws IOException {
  byte[] buf=new byte[1024];
  int read=0;
  while ((read=source.read(buf)) >= 0) {
    if (null != dest)     dest.write(buf,0,read);
  }
  if (null != dest)   dest.flush();
}

@Override public void init(FilterConfig config) throws ServletException {
  try {
    expiry=Math.min(Math.max(MIN_EXPIRY,Long.parseLong(config.getInitParameter(CACHE_CONTROL))),MAX_EXPIRY);
  }
 catch (  NumberFormatException nfe) {
    LOGGER.warn("Failed to parse " + CACHE_CONTROL + " value.",nfe);
    expiry=null;
  }
}

@Override public int hashCode(){
  int code=0;
  if (name != null) {
    code+=name.hashCode();
  }
  if (applicationName != null) {
    code+=applicationName.hashCode();
  }
  if (resourceNames != null) {
    code+=resourceNames.hashCode();
  }
  if (actionValues != null) {
    code+=actionValues.hashCode();
  }
  if (advices != null) {
    code+=advices.hashCode();
  }
  if (attributes != null) {
    code+=attributes.hashCode();
  }
  return code;
}

public static boolean substractTradingFee(Player player,int price){
  BigDecimal fee=calculateFee(player,price);
  return player.drop("money",fee.intValue());
}

public ComplexParameter(MathExpression expression){
  this.expression=expression;
}

@Override public Enumeration<String> enumerateMeasures(){
  Vector<String> newVector=new Vector<String>(1);
  newVector.addElement("measureOutOfBagError");
  return newVector.elements();
}

public SampleDriver(){
  handlers=new ArrayList<SampleHandler>();
  handlers.add(new CertificateSampleHandler());
  handlers.add(new GroupSampleHandler());
  handlers.add(new SolutionUserSampleHandler());
  handlers.add(new UserSampleHandler());
}

public long[] readLongArray(final int items,final JBBPByteOrder byteOrder) throws IOException {
  int pos=0;
  if (items < 0) {
    long[] buffer=new long[INITIAL_ARRAY_BUFFER_SIZE];
    while (hasAvailableData()) {
      final long next=readLong(byteOrder);
      if (buffer.length == pos) {
        final long[] newbuffer=new long[buffer.length << 1];
        System.arraycopy(buffer,0,newbuffer,0,buffer.length);
        buffer=newbuffer;
      }
      buffer[pos++]=next;
    }
    if (buffer.length == pos) {
      return buffer;
    }
    final long[] result=new long[pos];
    System.arraycopy(buffer,0,result,0,pos);
    return result;
  }
 else {
    final long[] buffer=new long[items];
    for (int i=0; i < items; i++) {
      buffer[i]=readLong(byteOrder);
    }
    return buffer;
  }
}

private void logGraphicalBufferOccupancy(float bufferOccupancy){
  String title="Buffer";
  int used=(int)(bufferOccupancy * WIDTH);
  StringBuilder sb=new StringBuilder();
  sb.append(START_END_CHAR);
  sb.append('-');
  sb.append(title);
  for (int i=title.length() + 1; i < WIDTH; i++) {
    sb.append('-');
  }
  sb.append(START_END_CHAR);
  log.info(sb.toString());
  sb=new StringBuilder();
  sb.append(START_END_CHAR);
  for (int i=0; i < used; i++) {
    sb.append('/');
  }
  for (int j=used; j < WIDTH; j++) {
    sb.append(' ');
  }
  sb.append(START_END_CHAR);
  log.info(sb.toString());
  sb=new StringBuilder();
  sb.append(START_END_CHAR);
  for (int i=0; i < WIDTH; i++) {
    sb.append('-');
  }
  sb.append(START_END_CHAR);
  log.info(sb.toString());
}

public boolean isTerminated(){
  return threadPool.isTerminated();
}

public boolean isMatch(String domain,List<UserMappingAttribute> attributes,List<String> groups){
  return _domain.equalsIgnoreCase(domain) && attributesMatch(attributes) && groupsMatch(groups);
}

public static void writeSpatialGridTable(SpatialGrid grid,String fileName){
  log.info("Writing spatial grid table " + fileName + " ...");
  SpatialGridTableWriter sgTableWriter=new SpatialGridTableWriter();
  try {
    sgTableWriter.write(grid,fileName);
    log.info("... done!");
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
}

@SuppressWarnings("unchecked") public OutputSocket linkedOutputSocket(String hintIdentifier){
  final OutputSocket outSocket=outputSocketFactory.create(new IdentiferOverridingSocketHintDecorator(this,hintIdentifier));
  controlledOutputSockets.add(outSocket);
  return outSocket;
}

public void cancel(){
  cancelled=true;
  Thread thread=this.thread;
  if (thread != null) {
    thread.interrupt();
  }
}

void _setText(byte[] text){
  this._text=text;
  this._props=null;
}

private String prepareURL(){
  String str="http://download.finance.yahoo.com/d/quotes.csv?";
  str+="s=";
  for (int i=0; i < symbolList.size(); i++) {
    if (i != 0) {
      str+=",";
    }
    str+=symbolList.get(i);
  }
  str+="&f=";
  for (  String format : parameterList) {
    str+=format;
  }
  str+="&e=.csv";
  return str;
}

public void initialize(){
  TextureState ts=new TextureState();
  ts.setEnabled(false);
  setRenderState(ts);
  for (int i=0; i < toolList.size(); ++i) {
    ToolState state=toolList.get(i);
    addTool(state,false);
  }
  zBufferState=new ZBufferState();
  zBufferState.setFunction(ZBufferState.TestFunction.LessThanOrEqualTo);
  zBufferState.setEnabled(true);
  setRenderState(zBufferState);
}

private static void init(){
  encoders=new HashMap();
  encoders.put("jpeg","org.jfree.chart.encoders.SunJPEGEncoderAdapter");
  encoders.put("png","org.jfree.chart.encoders.SunPNGEncoderAdapter");
}

public static boolean checkImageSize(final InputStream stream,final IConfiguration conf) throws IOException {
  BufferedImage bi=ImageIO.read(stream);
  stream.close();
  if (bi == null) {
    return false;
  }
  if (bi.getHeight() > conf.getImgHeight() || bi.getWidth() > conf.getImgWidth()) {
    return false;
  }
  return true;
}

private static boolean compareArrayCase(final String value,final int comparator,final Object[] array){
  for (int i=0; i < array.length; i++) {
    final Object obj=array[i];
    if (obj instanceof String) {
      if (compareStringCase(value,comparator,(String)obj)) {
        return true;
      }
    }
 else     if (obj instanceof Number) {
      if (compareNumber(value.trim(),comparator,(Number)obj)) {
        return true;
      }
    }
 else {
      if (compareReflective(value,comparator,obj)) {
        return true;
      }
    }
  }
  return false;
}

public double valueAt(double x){
  return constant * Math.pow(1 - x * x,outsideExp);
}

protected double generateWaitTime(){
  if (state == STATE_WALKING_ELSEWHERE) {
    if (location.equals(latestBusStop)) {
      state=STATE_WAITING_FOR_BUS;
    }
  }
  if (state == STATE_TRAVELLING_ON_BUS) {
    state=STATE_WAITING_FOR_BUS;
  }
  return 0;
}

@Override public Enumeration<URL> findResources(final String name) throws IOException {
  if (name == null) {
    return null;
  }
  ArrayList<URL> result=new ArrayList<URL>();
  int n=0;
  while (true) {
    URLHandler handler=getHandler(n++);
    if (handler == null) {
      break;
    }
    handler.findResources(name,result);
  }
  return Collections.enumeration(result);
}

protected void writeGraphicCtrlExt() throws IOException {
  out.write(0x21);
  out.write(0xf9);
  out.write(4);
  int transp, disp;
  if (transparent == null) {
    transp=0;
    disp=0;
  }
 else {
    transp=1;
    disp=2;
  }
  if (dispose >= 0) {
    disp=dispose & 7;
  }
  disp<<=2;
  out.write(0 | disp | 0| transp);
  writeShort(delay);
  out.write(transIndex);
  out.write(0);
}

public static void writeElementList(XMLOutput xmlOutput,String tagName,Iterable<String> listValues) throws IOException {
  writeElementList(xmlOutput,tagName,listValues.iterator());
}

public static Date stringToDate(String dateAsString){
  try {
    DateFormat df=new SimpleDateFormat(dateFormat);
    df.setTimeZone(utc);
    return df.parse(dateAsString);
  }
 catch (  ParseException e) {
    return null;
  }
catch (  NullPointerException e) {
    return null;
  }
}

public SimpleHttpRequestBuilder content(String chars,Charset charset){
  return content(chars.getBytes(charset));
}

private double adjustTransform(){
  double xMin=Double.POSITIVE_INFINITY;
  double xMax=Double.NEGATIVE_INFINITY;
  double yMin=Double.POSITIVE_INFINITY;
  double yMax=Double.NEGATIVE_INFINITY;
  for (  Variable var : csp.getVariables()) {
    Point2D point=getPosition(var);
    xMin=Math.min(xMin,point.getX());
    xMax=Math.max(xMax,point.getX());
    yMin=Math.min(yMin,point.getY());
    yMax=Math.max(yMax,point.getY());
  }
  double scale=Math.min(pane.getWidth() / (xMax - xMin + 300),pane.getHeight() / (yMax - yMin + 150));
  pane.setTranslateX((scale * (pane.getWidth() - xMin - xMax) / 2.0));
  pane.setTranslateY((scale * (pane.getHeight() - yMin - yMax) / 2.0));
  pane.setScaleX(scale);
  pane.setScaleY(scale);
  return scale;
}

public void addTableModelListener(WTableModelListener listener){
  if (listener == null) {
    return;
  }
  if (!m_listeners.contains(listener)) {
    m_listeners.add(listener);
  }
  return;
}

public boolean canTraverseOutsideSubtree(){
  if (null != m_parts) {
    int n=m_parts.size();
    for (int i=0; i < n; i++) {
      AVTPart part=(AVTPart)m_parts.elementAt(i);
      if (part.canTraverseOutsideSubtree())       return true;
    }
  }
  return false;
}

public static CipherParameters makePBEParameters(PBEKeySpec keySpec,int type,int hash,int keySize,int ivSize){
  PBEParametersGenerator generator=makePBEGenerator(type,hash);
  byte[] key;
  CipherParameters param;
  key=convertPassword(type,keySpec);
  generator.init(key,keySpec.getSalt(),keySpec.getIterationCount());
  if (ivSize != 0) {
    param=generator.generateDerivedParameters(keySize,ivSize);
  }
 else {
    param=generator.generateDerivedParameters(keySize);
  }
  for (int i=0; i != key.length; i++) {
    key[i]=0;
  }
  return param;
}

private int[] parseYMD(String string){
  string=string.trim();
  try {
    if (string.charAt(4) != '-' || string.charAt(7) != '-') {
      throw new IllegalArgumentException("date must be yyyy-MM-dd");
    }
    int[] ymd=new int[3];
    ymd[0]=Integer.valueOf(string.substring(0,4));
    ymd[1]=Integer.valueOf(string.substring(5,7));
    ymd[2]=Integer.valueOf(string.substring(8,10));
    return ymd;
  }
 catch (  NumberFormatException ex) {
    throw new IllegalArgumentException("date must be yyyy-MM-dd",ex);
  }
}

public AbstractPointRenderer(){
  shape=new Rectangle2D.Double(-2.5,-2.5,5.0,5.0);
  color=new SingleColor(Color.BLACK);
  valueVisible=false;
  valueColumn=1;
  valueLocation=Location.CENTER;
  valueAlignmentX=0.5;
  valueAlignmentY=0.5;
  valueRotation=0.0;
  valueDistance=1.0;
  valueColor=new SingleColor(Color.BLACK);
  valueFont=Font.decode(null);
  errorVisible=false;
  errorColumnTop=2;
  errorColumnBottom=3;
  errorColor=new SingleColor(Color.BLACK);
  errorShape=new Line2D.Double(-2.0,0.0,2.0,0.0);
  errorStroke=new BasicStroke(1f);
}

public Object put(String key,Object value){
  Object oldValue=context.getAttribute(key,ENGINE_SCOPE);
  context.setAttribute(key,value,ENGINE_SCOPE);
  return oldValue;
}

public void test_getLowestSetBitPos(){
  byte aBytes[]={-1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int iNumber=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  int result=aNumber.getLowestSetBit();
  assertTrue("incorrect value",result == iNumber);
  byte[] aBytes_={127,0,3};
  iNumber=0;
  aNumber=new BigInteger(aSign,aBytes_);
  result=aNumber.getLowestSetBit();
  assertTrue("incorrect value",result == iNumber);
  byte[] aBytes__={-128,0,0};
  iNumber=23;
  aNumber=new BigInteger(aSign,aBytes__);
  result=aNumber.getLowestSetBit();
  assertTrue("incorrect value",result == iNumber);
}

private void executeAnotherRequest() throws SQLException {
  Random random=new Random();
  int value=random.nextInt();
  PreparedStatement preparedStatement=sharedConnection.prepareStatement("SELECT " + value);
  ResultSet rs=preparedStatement.executeQuery();
  rs.next();
  assertEquals(value,rs.getInt(1));
}

private void statInit(){
  labelValue.setText(Msg.getMsg(Env.getCtx(),"Value"));
  fieldValue.setBackground(AdempierePLAF.getInfoBackground());
  fieldValue.addActionListener(this);
  labelName.setText(Msg.getMsg(Env.getCtx(),"Name"));
  fieldName.setBackground(AdempierePLAF.getInfoBackground());
  fieldName.addActionListener(this);
  fBPartner_ID=new VLookup("C_BPartner_ID",false,false,true,MLookupFactory.get(Env.getCtx(),p_WindowNo,0,MColumn.getColumn_ID(I_A_Asset.Table_Name,I_A_Asset.COLUMNNAME_C_BPartner_ID),DisplayType.Search));
  lBPartner_ID.setLabelFor(fBPartner_ID);
  fBPartner_ID.setBackground(AdempierePLAF.getInfoBackground());
  fBPartner_ID.addActionListener(this);
  fProduct_ID=new VLookup("M_Product_ID",false,false,true,MLookupFactory.get(Env.getCtx(),p_WindowNo,0,MColumn.getColumn_ID(I_A_Asset.Table_Name,I_A_Asset.COLUMNNAME_M_Product_ID),DisplayType.Search));
  lProduct_ID.setLabelFor(fProduct_ID);
  fProduct_ID.setBackground(AdempierePLAF.getInfoBackground());
  fProduct_ID.addActionListener(this);
  p_criteriaGrid.add(labelValue,new ALayoutConstraint(0,0));
  p_criteriaGrid.add(fieldValue,null);
  p_criteriaGrid.add(lBPartner_ID,null);
  p_criteriaGrid.add(fBPartner_ID,null);
  p_criteriaGrid.add(labelName,new ALayoutConstraint(1,0));
  p_criteriaGrid.add(fieldName,null);
  p_criteriaGrid.add(lProduct_ID,null);
  p_criteriaGrid.add(fProduct_ID,null);
}

public static int hash(byte[] data,int seed){
  return hash(ByteBuffer.wrap(data),seed);
}

public int parse(char c,char[] ia,int ip,int il){
  assert (ia[ip] == c);
  if (Surrogate.isHigh(c)) {
    if (il - ip < 2) {
      error=CoderResult.UNDERFLOW;
      return -1;
    }
    char d=ia[ip + 1];
    if (Surrogate.isLow(d)) {
      character=toUCS4(c,d);
      isPair=true;
      error=null;
      return character;
    }
    error=CoderResult.malformedForLength(1);
    return -1;
  }
  if (Surrogate.isLow(c)) {
    error=CoderResult.malformedForLength(1);
    return -1;
  }
  character=c;
  isPair=false;
  error=null;
  return character;
}

public void performStartOperationAsync(final String vmId,final FutureCallback<Task> responseCallback) throws IOException {
  String path=String.format("%s/%s/start",getBasePath(),vmId);
  createObjectAsync(path,null,responseCallback);
}

private RtpPacket parseRtpPacket(byte[] data){
  RtpPacket packet=new RtpPacket();
  packet.mLength=data.length;
  packet.mReceivedAt=System.currentTimeMillis();
  packet.extension=(data[0] & 0x10) > 0;
  if ((byte)((data[1] & 0xff) & 0x80) == (byte)0x80) {
    packet.marker=1;
  }
 else {
    packet.marker=0;
  }
  packet.payloadType=(byte)((data[1] & 0xff) & 0x7f);
  packet.seqnum=(char)((data[2] << 8) | (data[3] & 0xff));
  packet.timestamp=(((data[4] & 0xff) << 24) | ((data[5] & 0xff) << 16) | ((data[6] & 0xff) << 8)| (data[7] & 0xff));
  packet.ssrc=(((data[8] & 0xff) << 24) | ((data[9] & 0xff) << 16) | ((data[10] & 0xff) << 8)| (data[11] & 0xff));
  if (packet.extension) {
    int dataId=11;
    int extensionHeaderId=((data[++dataId] & 0xff) << 8) | (data[++dataId] & 0xff);
    int length=((data[++dataId] & 0xff) << 8) | (data[++dataId] & 0xff);
    if (extensionHeaderId == RtpExtensionHeader.RTP_EXTENSION_HEADER_ID) {
      extractExtensionHeader(data,length,dataId,packet);
    }
    packet.payloadoffset=16 + length * 4;
  }
 else {
    packet.payloadoffset=12;
  }
  packet.payloadlength=packet.mLength - packet.payloadoffset;
  packet.mData=new byte[packet.payloadlength];
  System.arraycopy(data,packet.payloadoffset,packet.mData,0,packet.payloadlength);
  return packet;
}

public String product(Properties ctx,int WindowNo,GridTab mTab,GridField mField,Object value){
  Integer M_Product_ID=(Integer)value;
  if (M_Product_ID == null || M_Product_ID.intValue() == 0)   return "";
  BigDecimal priceActual=null;
  Timestamp DateExpense=Env.getContextAsDate(ctx,WindowNo,"DateExpense");
  if (DateExpense == null)   DateExpense=new Timestamp(System.currentTimeMillis());
  String sql=null;
  PreparedStatement pstmt=null;
  ResultSet rs=null;
  try {
    boolean noPrice=true;
    sql="SELECT bomPriceStd(p.M_Product_ID,pv.M_PriceList_Version_ID) AS PriceStd," + "bomPriceList(p.M_Product_ID,pv.M_PriceList_Version_ID) AS PriceList," + "bomPriceLimit(p.M_Product_ID,pv.M_PriceList_Version_ID) AS PriceLimit,"+ "p.C_UOM_ID,pv.ValidFrom,pl.C_Currency_ID "+ "FROM M_Product p, M_ProductPrice pp, M_Pricelist pl, M_PriceList_Version pv "+ "WHERE p.M_Product_ID=pp.M_Product_ID"+ " AND pp.M_PriceList_Version_ID=pv.M_PriceList_Version_ID"+ " AND pv.M_PriceList_ID=pl.M_PriceList_ID"+ " AND pv.IsActive='Y'"+ " AND p.M_Product_ID=?"+ " AND pl.M_PriceList_ID=?"+ " ORDER BY pv.ValidFrom DESC";
    pstmt=DB.prepareStatement(sql,null);
    pstmt.setInt(1,M_Product_ID.intValue());
    pstmt.setInt(2,Env.getContextAsInt(ctx,WindowNo,"M_PriceList_ID"));
    rs=pstmt.executeQuery();
    while (rs.next() && noPrice) {
      java.sql.Date plDate=rs.getDate("ValidFrom");
      if (plDate == null || !DateExpense.before(plDate)) {
        noPrice=false;
        priceActual=rs.getBigDecimal("PriceStd");
        if (priceActual == null)         priceActual=rs.getBigDecimal("PriceList");
        if (priceActual == null)         priceActual=rs.getBigDecimal("PriceLimit");
        Integer ii=new Integer(rs.getInt("C_Currency_ID"));
        if (!rs.wasNull())         mTab.setValue("C_Currency_ID",ii);
      }
    }
    if (noPrice) {
      sql="SELECT bomPriceStd(p.M_Product_ID,pv.M_PriceList_Version_ID) AS PriceStd," + "bomPriceList(p.M_Product_ID,pv.M_PriceList_Version_ID) AS PriceList," + "bomPriceLimit(p.M_Product_ID,pv.M_PriceList_Version_ID) AS PriceLimit,"+ "p.C_UOM_ID,pv.ValidFrom,pl.C_Currency_ID "+ "FROM M_Product p, M_ProductPrice pp, M_Pricelist pl, M_Pricelist bpl, M_PriceList_Version pv "+ "WHERE p.M_Product_ID=pp.M_Product_ID"+ " AND pp.M_PriceList_Version_ID=pv.M_PriceList_Version_ID"+ " AND pv.M_PriceList_ID=bpl.M_PriceList_ID"+ " AND pv.IsActive='Y'"+ " AND bpl.M_PriceList_ID=pl.BasePriceList_ID"+ " AND p.M_Product_ID=?"+ " AND pl.M_PriceList_ID=?"+ " ORDER BY pv.ValidFrom DESC";
      DB.close(rs,pstmt);
      pstmt=DB.prepareStatement(sql,null);
      pstmt.setInt(1,M_Product_ID.intValue());
      pstmt.setInt(2,Env.getContextAsInt(ctx,WindowNo,"M_PriceList_ID"));
      rs=pstmt.executeQuery();
      while (rs.next() && noPrice) {
        java.sql.Date plDate=rs.getDate("ValidFrom");
        if (plDate == null || !DateExpense.before(plDate)) {
          noPrice=false;
          priceActual=rs.getBigDecimal("PriceStd");
          if (priceActual == null)           priceActual=rs.getBigDecimal("PriceList");
          if (priceActual == null)           priceActual=rs.getBigDecimal("PriceLimit");
          Integer ii=new Integer(rs.getInt("C_Currency_ID"));
          if (!rs.wasNull())           mTab.setValue("C_Currency_ID",ii);
        }
      }
    }
  }
 catch (  SQLException e) {
    log.log(Level.SEVERE,sql,e);
    return e.getLocalizedMessage();
  }
 finally {
    DB.close(rs,pstmt);
    rs=null;
    pstmt=null;
  }
  if (priceActual == null)   priceActual=Env.ZERO;
  mTab.setValue("ExpenseAmt",priceActual);
  return "";
}

public boolean thisDeviceSpeaksTo(BluetoothDevice other) throws NoSuchAlgorithmException, UnsupportedEncodingException {
  if (MurmurService.USE_BACKOFF)   return true;
  if (other == null) {
    log.info("This device not speaking to peer, peer is null");
    return false;
  }
  String otherAddr=other.getAddress();
  if (otherAddr == null) {
    log.info("This device not speaking to peer :" + other + ", peer address is null");
    return false;
  }
  String myAddr=mBluetoothSpeaker.getAddress();
  if (myAddr.equals(whichInitiates(myAddr,otherAddr))) {
    return true;
  }
 else {
    return false;
  }
}

public static <K,V>List<KeyValue<K,V>> waitUntilMinKeyValueRecordsReceived(Properties consumerConfig,String topic,int expectedNumRecords,long waitTime) throws InterruptedException {
  List<KeyValue<K,V>> accumData=new ArrayList<>();
  long startTime=System.currentTimeMillis();
  while (true) {
    List<KeyValue<K,V>> readData=readKeyValues(topic,consumerConfig);
    accumData.addAll(readData);
    if (accumData.size() >= expectedNumRecords)     return accumData;
    if (System.currentTimeMillis() > startTime + waitTime)     throw new AssertionError("Expected " + expectedNumRecords + " but received only "+ accumData.size()+ " records before timeout "+ waitTime+ " ms");
    Thread.sleep(Math.min(waitTime,100L));
  }
}

public static <T>CombinedDownloadTask<T> single(DownloadTask<T> task){
  Objects.requireNonNull(task);
  return new SingleCombinedTask<T>(task);
}

public void addHexListener(final IHexPanelListener listener){
  Preconditions.checkNotNull(listener,"Error: Listener can't be null");
  if (!m_listeners.contains(listener)) {
    m_listeners.add(listener);
  }
}

public static <T extends SerializableEntity>Deserializer roundtripSerializableEntityWithBinarySerializer(final T originalEntity,final AccountLookup accountLookup){
  final BinarySerializer binarySerializer=new BinarySerializer();
  originalEntity.serialize(binarySerializer);
  return new BinaryDeserializer(binarySerializer.getBytes(),new DeserializationContext(accountLookup));
}

@Deprecated public static String encode(final String s,final String encoding,BitSet safeOctets,boolean plusForSpace) throws UnsupportedEncodingException {
  StringBuilder out=new StringBuilder(s.length() * 2);
  boolean needsEncoding;
  try {
    needsEncoding=encode(s,encoding,safeOctets,plusForSpace,out);
  }
 catch (  UnsupportedEncodingException e) {
    throw e;
  }
catch (  IOException e) {
    throw new AssertionError(e);
  }
  if (needsEncoding) {
    return out.toString();
  }
 else {
    return s;
  }
}

public static void fireClipboardChanged(){
  for (Iterator i=listenerList.iterator(); i.hasNext(); ) {
    ClipboardListener listener=(ClipboardListener)i.next();
    listener.clipboardChanged();
  }
}

public boolean isEmpty(){
  return window.isEmpty();
}

public boolean contains(T listener){
  if (mListeners != null) {
    return mListeners.contains(listener);
  }
 else {
    return false;
  }
}

public SimpleDictionary(String... aWords){
  words=new HashSet<String>();
  for (  String word : aWords) {
    words.add(word.toLowerCase());
  }
}

public long readLongLE() throws IOException {
  inputStream.readFully(workSpace,0,8);
  return ((long)(workSpace[7] & 0xff) << 56) | ((long)(workSpace[6] & 0xff) << 48) | ((long)(workSpace[5] & 0xff) << 40)| ((long)(workSpace[4] & 0xff) << 32)| ((long)(workSpace[3] & 0xff) << 24)| ((long)(workSpace[2] & 0xff) << 16)| ((long)(workSpace[1] & 0xff) << 8)| ((long)(workSpace[0] & 0xff));
}

public void testSetPublicKey2() throws Exception {
  Identity i2=new IdentityStub("testSetPublicKey2_2",IdentityScope.getSystemScope());
  new PublicKeyStub("kkk","testSetPublicKey2",new byte[]{1,2,3,4,5});
  try {
    i2.setPublicKey(null);
  }
 catch (  KeyManagementException ok) {
  }
}

@LayoutlibDelegate static long elapsedRealtime(){
  return System.currentTimeMillis() - sBootTime;
}

@Override public void fillAssignedKeys(Set<String> keys){
  keys.add(_keyColumn.name());
}

@Override public void removeInstanceListener(InstanceListener dsl){
  m_instanceListeners.remove(dsl);
}

public double eccentricity(){
  return Math.sqrt(1 - (semiMinorAxis() * semiMinorAxis()) / (semiMajorAxis() * semiMajorAxis()));
}

private void simpleApply(IDocument document,String string,ConfigurableCompletionProposal proposal) throws BadLocationException {
  proposal.setCursorPosition(string.length());
  document.replace(proposal.getReplacementOffset(),proposal.getReplacementLength(),string);
}

public String pullDump2PC(){
  String serial=device.getSerialNumber();
  File dest=new File(FileUtils.getTempDirectory(),serial + ".xml");
  String path=dest.getPath();
  log.debug("pull dump file to pc's path {}",path);
  CommandLine commandpull=adbCommand("pull","/data/local/tmp/local/tmp/qian.xml",path);
  String out=executeCommandQuietly(commandpull);
  log.debug("pull dump file to pc's result {}",out);
  return path;
}

@After public void executeTest() throws Throwable {
  try {
    testEnv.executeTest();
  }
 catch (  AssertionError assertionError) {
    if (testEnv.hasBeenStopped()) {
      throw new AssertionError("Test terminated due timeout!" + assertionError.getMessage());
    }
    throw assertionError;
  }
}

public void init(){
  pubPanel.setLayout(new BorderLayout());
  topic=new JComboBox();
  topic.setEditable(true);
  topic.setMaximumSize(MQTTFrame.TEXT_FIELD_DIMENSION);
  topic.setMaximumRowCount(5);
  qosList=new JComboBox(qos);
  qosList.setSelectedIndex(0);
  qosList.setMaximumSize(MQTTFrame.DROP_DOWN_DIMENSION);
  pubData=new JTextArea(3,30);
  pubData.setBorder(new BevelBorder(BevelBorder.LOWERED));
  pubData.setMargin(MQTTFrame.TEXT_MARGINS);
  retained=new JCheckBox();
  retained.setSelected(false);
  pubLabel=new JLabel(PANEL_TITLE + " - text display");
  Font f=pubLabel.getFont();
  pubLabel.setFont(new Font(f.getName(),Font.BOLD,f.getSize() + 1));
  JPanel topicBox=new JPanel();
  topicBox.setLayout(new BoxLayout(topicBox,BoxLayout.X_AXIS));
  topicBox.add(new JLabel(" Topic:"));
  topicBox.add(topic);
  topicBox.add(new JLabel(" QoS:"));
  topicBox.add(qosList);
  topicBox.add(new JLabel(" Retained:"));
  topicBox.add(retained);
  JPanel titleAndTopic=new JPanel();
  titleAndTopic.setLayout(new GridLayout(2,1));
  titleAndTopic.add(pubLabel);
  titleAndTopic.add(topicBox);
  hexDisplay=false;
  hexButton=new JButton("Hex");
  hexButton.addActionListener(this);
  fileButton=new JButton("File...");
  fileButton.setEnabled(true);
  fileButton.addActionListener(this);
  pubButton=new JButton("Publish");
  pubButton.setEnabled(false);
  pubButton.addActionListener(this);
  JPanel buttons=new JPanel();
  buttons.setLayout(new GridLayout(3,1));
  buttons.add(pubButton);
  buttons.add(fileButton);
  buttons.add(hexButton);
  JPanel buttonLayout=new JPanel();
  buttonLayout.add(buttons);
  pubPanel.add(titleAndTopic,BorderLayout.NORTH);
  pubPanel.add(new JScrollPane(pubData),BorderLayout.CENTER);
  pubPanel.add(buttonLayout,BorderLayout.EAST);
}

public void validateEmrClusterDefinitionKey(EmrClusterDefinitionKey key) throws IllegalArgumentException {
  Assert.notNull(key,"An EMR cluster definition key must be specified.");
  key.setNamespace(alternateKeyHelper.validateStringParameter("namespace",key.getNamespace()));
  key.setEmrClusterDefinitionName(alternateKeyHelper.validateStringParameter("An","EMR cluster definition name",key.getEmrClusterDefinitionName()));
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

@TargetApi(VERSION_CODES.KITKAT) private void handleSmsReceived(Intent intent){
  if (BuildConfig.DEBUG)   Log.v("SMSReceiver: Intercept SMS");
  Bundle bundle=intent.getExtras();
  if (bundle != null) {
    SmsMessage[] messages=null;
    if (SmsPopupUtils.hasKitKat()) {
      messages=Intents.getMessagesFromIntent(intent);
    }
 else {
      messages=SmsPopupUtils.getMessagesFromIntent(intent);
    }
    if (messages != null) {
      notifyMessageReceived(new SmsMmsMessage(context,messages,System.currentTimeMillis()));
    }
  }
}

public static long installAge(long currentTimestamp,long installTimestamp,boolean sendInstallEvent){
  if (sendInstallEvent) {
    return INSTALL_AGE_IMMEDIATELY_AFTER_INSTALLING;
  }
 else {
    return Math.max(0L,(currentTimestamp - installTimestamp) / MS_PER_DAY);
  }
}

public boolean isDistributed(){
  return !isLocal();
}

public void testValueOfLongNegative1(){
  long longVal=-268209772258930018L;
  BigInteger aNumber=BigInteger.valueOf(longVal);
  byte rBytes[]={-4,71,32,-94,23,55,-46,-98};
  byte resBytes[]=new byte[rBytes.length];
  resBytes=aNumber.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",-1,aNumber.signum());
}

private boolean zzRefill() throws java.io.IOException {
  if (zzStartRead > 0) {
    System.arraycopy(zzBuffer,zzStartRead,zzBuffer,0,zzEndRead - zzStartRead);
    zzEndRead-=zzStartRead;
    zzCurrentPos-=zzStartRead;
    zzMarkedPos-=zzStartRead;
    zzStartRead=0;
  }
  if (zzCurrentPos >= zzBuffer.length) {
    char newBuffer[]=new char[zzCurrentPos * 2];
    System.arraycopy(zzBuffer,0,newBuffer,0,zzBuffer.length);
    zzBuffer=newBuffer;
  }
  int numRead=zzReader.read(zzBuffer,zzEndRead,zzBuffer.length - zzEndRead);
  if (numRead > 0) {
    zzEndRead+=numRead;
    return false;
  }
  if (numRead == 0) {
    int c=zzReader.read();
    if (c == -1) {
      return true;
    }
 else {
      zzBuffer[zzEndRead++]=(char)c;
      return false;
    }
  }
  return true;
}

public synchronized boolean isConsumer(ImageConsumer ic){
  return theConsumers.contains(ic);
}

public static boolean verifySignature(Signature initializedSignatureEngine,byte[] message,byte[] signature) throws SignatureException {
  initializedSignatureEngine.update(message);
  return initializedSignatureEngine.verify(signature);
}

public static void writeVarInt(OutputStream out,int x) throws IOException {
  while ((x & ~0x7f) != 0) {
    out.write((byte)(0x80 | (x & 0x7f)));
    x>>>=7;
  }
  out.write((byte)x);
}

protected static final String addEscapes(String str){
  StringBuffer retval=new StringBuffer();
  char ch;
  for (int i=0; i < str.length(); i++) {
switch (str.charAt(i)) {
case 0:
      continue;
case '\b':
    retval.append("\\b");
  continue;
case '\t':
retval.append("\\t");
continue;
case '\n':
retval.append("\\n");
continue;
case '\f':
retval.append("\\f");
continue;
case '\r':
retval.append("\\r");
continue;
case '\"':
retval.append("\\\"");
continue;
case '\'':
retval.append("\\\'");
continue;
case '\\':
retval.append("\\\\");
continue;
default :
if ((ch=str.charAt(i)) < 0x20 || ch > 0x7e) {
String s="0000" + Integer.toString(ch,16);
retval.append("\\u" + s.substring(s.length() - 4,s.length()));
}
 else {
retval.append(ch);
}
continue;
}
}
return retval.toString();
}

public SegmentPath complete(EndType etype){
  SegmentPath result;
  if (data == null || w < 6) {
    return null;
  }
  if (w == data.length) {
    result=new SegmentPath(data,etype);
    reset(0);
  }
 else {
    double[] dataToAdopt=new double[w];
    System.arraycopy(data,0,dataToAdopt,0,w);
    result=new SegmentPath(dataToAdopt,etype);
    reset(2);
  }
  return result;
}

public boolean addGpsDateTimeStampTag(long timestamp){
  ExifTag t=buildTag(TAG_GPS_DATE_STAMP,mGPSDateStampFormat.format(timestamp));
  if (t == null) {
    return false;
  }
  setTag(t);
  mGPSTimeStampCalendar.setTimeInMillis(timestamp);
  t=buildTag(TAG_GPS_TIME_STAMP,new Rational[]{new Rational(mGPSTimeStampCalendar.get(Calendar.HOUR_OF_DAY),1),new Rational(mGPSTimeStampCalendar.get(Calendar.MINUTE),1),new Rational(mGPSTimeStampCalendar.get(Calendar.SECOND),1)});
  if (t == null) {
    return false;
  }
  setTag(t);
  return true;
}

@Nullable public Bitmap cropImage(){
  Bitmap viewBitmap=getViewBitmap();
  if (viewBitmap == null || viewBitmap.isRecycled()) {
    return null;
  }
  cancelAllAnimations();
  setImageToWrapCropBounds(false);
  RectF currentImageRect=RectUtils.trapToRect(mCurrentImageCorners);
  if (currentImageRect.isEmpty()) {
    return null;
  }
  float currentScale=getCurrentScale();
  float currentAngle=getCurrentAngle();
  if (mMaxResultImageSizeX > 0 && mMaxResultImageSizeY > 0) {
    float cropWidth=mCropRect.width() / currentScale;
    float cropHeight=mCropRect.height() / currentScale;
    if (cropWidth > mMaxResultImageSizeX || cropHeight > mMaxResultImageSizeY) {
      float scaleX=mMaxResultImageSizeX / cropWidth;
      float scaleY=mMaxResultImageSizeY / cropHeight;
      float resizeScale=Math.min(scaleX,scaleY);
      Bitmap resizedBitmap=Bitmap.createScaledBitmap(viewBitmap,(int)(viewBitmap.getWidth() * resizeScale),(int)(viewBitmap.getHeight() * resizeScale),false);
      if (viewBitmap != resizedBitmap) {
        viewBitmap.recycle();
      }
      viewBitmap=resizedBitmap;
      currentScale/=resizeScale;
    }
  }
  if (currentAngle != 0) {
    mTempMatrix.reset();
    mTempMatrix.setRotate(currentAngle,viewBitmap.getWidth() / 2,viewBitmap.getHeight() / 2);
    Bitmap rotatedBitmap=Bitmap.createBitmap(viewBitmap,0,0,viewBitmap.getWidth(),viewBitmap.getHeight(),mTempMatrix,true);
    if (viewBitmap != rotatedBitmap) {
      viewBitmap.recycle();
    }
    viewBitmap=rotatedBitmap;
  }
  int top=(int)((mCropRect.top - currentImageRect.top) / currentScale);
  int left=(int)((mCropRect.left - currentImageRect.left) / currentScale);
  int width=(int)(mCropRect.width() / currentScale);
  int height=(int)(mCropRect.height() / currentScale);
  return Bitmap.createBitmap(viewBitmap,left,top,width,height);
}

@Deprecated public static Bundle parseUrl(String url){
  url=url.replace("fbconnect","http");
  try {
    URL u=new URL(url);
    Bundle b=decodeUrl(u.getQuery());
    b.putAll(decodeUrl(u.getRef()));
    return b;
  }
 catch (  MalformedURLException e) {
    return new Bundle();
  }
}

private static void createTmpFile(CompletableFuture<NewFile> fileCreation,Path destDir,List<TSData> files){
  LOG.log(Level.FINE,"starting temporary file creation...");
  try {
    Collections.sort(files,Comparator.comparing(null));
    final FileChannel fd=FileUtil.createTempFile(destDir,"monsoon-",".optimize-tmp");
    try {
      final DateTime begin;
      try (ToXdrTables output=new ToXdrTables(fd,Compression.DEFAULT_OPTIMIZED)){
        while (!files.isEmpty()) {
          TSData tsdata=files.remove(0);
          if (fileCreation.isCancelled())           throw new IOException("aborted due to canceled execution");
          output.addAll(tsdata);
        }
        begin=new DateTime(output.getHdrBegin(),DateTimeZone.UTC);
        if (fileCreation.isCancelled())         throw new IOException("aborted due to canceled execution");
      }
       if (fileCreation.isCancelled())       throw new IOException("aborted due to canceled execution");
      INSTALL_POOL.execute(null);
    }
 catch (    Error|RuntimeException|IOException ex) {
      try {
        fd.close();
      }
 catch (      Error|RuntimeException|IOException ex1) {
        ex.addSuppressed(ex1);
      }
      throw ex;
    }
  }
 catch (  Error|RuntimeException|IOException ex) {
    LOG.log(Level.WARNING,"temporary file for optimization failure",ex);
synchronized (OUTSTANDING) {
      OUTSTANDING.remove(fileCreation);
    }
    fileCreation.completeExceptionally(ex);
  }
}

public void contentTag(String tag,String name,String value,String content){
  spacing();
  m_out.print('<');
  m_out.print(tag);
  m_out.print(' ');
  m_out.print(name);
  m_out.print('=');
  m_out.print('\"');
  escapeString(value);
  m_out.print('\"');
  m_out.print('>');
  escapeString(content);
  m_out.print('<');
  m_out.print('/');
  m_out.print(tag);
  m_out.print('>');
  println();
}

public static void closeOutputStream(OutputStream stream,String tag){
  if (stream != null) {
    try {
      stream.close();
    }
 catch (    IOException e) {
      Log.e(tag,"Exception occured when closing ByteArrayOutputStream." + e);
    }
  }
}

public void addChild(Component child){
  components.add(child);
  child.setParent(this);
}

public boolean open(int maxRows){
  log.info("MaxRows=" + maxRows);
  m_maxRows=maxRows;
  if (m_open) {
    log.fine("already open");
    dataRefreshAll();
    return true;
  }
  if (m_virtual) {
    verifyVirtual();
  }
  createSelectSql();
  if (m_SQL == null || m_SQL.equals("")) {
    log.log(Level.SEVERE,"No SQL");
    return false;
  }
  m_loader=new Loader();
  m_rowCount=m_loader.open(maxRows);
  if (m_virtual) {
    m_buffer=null;
    m_virtualBuffer=new HashMap<Integer,Object[]>(210);
  }
 else {
    m_buffer=new ArrayList<Object[]>(m_rowCount + 10);
  }
  m_sort=new ArrayList<MSort>(m_rowCount + 10);
  if (m_rowCount > 0) {
    if (m_rowCount < 1000)     m_loader.run();
 else {
      m_loaderThread=new Thread(m_loader,"TLoader");
      m_loaderThread.start();
    }
  }
 else   m_loader.close();
  m_open=true;
  m_changed=false;
  m_rowChanged=-1;
  m_inserting=false;
  return true;
}

public void addMessageListener(IMessageListener listener){
  listeners.add(listener);
}

protected void syncFlushVdcConfigToLocal() throws Exception {
  if (vdcPropBarrier == null) {
    vdcPropBarrier=new VdcPropertyBarrier(targetSiteInfo,VDC_OP_BARRIER_TIMEOUT);
  }
  vdcPropBarrier.enter();
  try {
    flushVdcConfigToLocal();
  }
  finally {
    boolean allLeft=vdcPropBarrier.leave();
    if (!allLeft) {
      log.info("wait 1 minute, so all nodes be able to return from leave()");
      Thread.sleep(IPSEC_RESTART_DELAY);
    }
  }
  vdcPropBarrier=null;
}

public CorruptIndexException(String message,DataInput input,Throwable cause){
  this(message,Objects.toString(input),cause);
}

protected void removeFromQuarantineQueue(NodePortTuple npt){
  while (quarantineQueue.remove(npt))   ;
}

public boolean hasExpired(){
  if (maxAge == 0)   return true;
  if (maxAge == MAX_AGE_UNSPECIFIED)   return false;
  long deltaSecond=(System.currentTimeMillis() - whenCreated) / 1000;
  if (deltaSecond > maxAge)   return true;
 else   return false;
}

public static String repeatCharacter(char c,int repetitions){
  StringBuilder s=new StringBuilder(repetitions);
  for (int i=0; i < repetitions; i++) {
    s.append(c);
  }
  return s.toString();
}

public static String checkAndReplaceLiterals(String instStr){
  String tmp=instStr;
  if (tmp.contains(COMPONENTS_DELIM)) {
    tmp=tmp.replaceAll(COMPONENTS_DELIM,".");
    LOG.warn("Replaced special literal character sequence " + COMPONENTS_DELIM + " with '.'");
  }
  if (tmp.contains(ELEMENT_DELIM)) {
    tmp=tmp.replaceAll(ELEMENT_DELIM,".");
    LOG.warn("Replaced special literal character sequence " + ELEMENT_DELIM + " with '.'");
  }
  if (tmp.contains(LEVELIN)) {
    tmp=tmp.replaceAll(LEVELIN,"(");
    LOG.warn("Replaced special literal character sequence " + LEVELIN + " with '('");
  }
  if (tmp.contains(LEVELOUT)) {
    tmp=tmp.replaceAll(LEVELOUT,")");
    LOG.warn("Replaced special literal character sequence " + LEVELOUT + " with ')'");
  }
  if (tmp.contains(PARFOR_CDATA_END)) {
    tmp=tmp.replaceAll(PARFOR_CDATA_END,".");
    LOG.warn("Replaced special literal character sequence " + PARFOR_CDATA_END + " with '.'");
  }
  return tmp;
}

protected void notifyHistoryChangedListeners(){
  Iterator<HistoryChangedListener> iter;
  HistoryChangedListener l;
  iter=m_HistoryChangedListeners.iterator();
  while (iter.hasNext()) {
    l=iter.next();
    l.historyChanged(new HistoryChangedEvent(this,HISTORY_NAME,getHistory()));
  }
}

public final static char[][] splitTypeLevelsSignature(String typeSignature){
  char[] source=Signature.removeCapture(typeSignature.toCharArray());
  CharOperation.replace(source,'$','.');
  char[][] signatures=new char[10][];
  int signaturesCount=0;
  int paramOpening=0;
  for (int idx=0, ln=source.length; idx < ln; idx++) {
switch (source[idx]) {
case '>':
      paramOpening--;
    if (paramOpening == 0) {
      if (signaturesCount == signatures.length) {
        System.arraycopy(signatures,0,signatures=new char[signaturesCount + 10][],0,signaturesCount);
      }
    }
  break;
case '<':
paramOpening++;
break;
case '.':
if (paramOpening == 0) {
if (signaturesCount == signatures.length) {
System.arraycopy(signatures,0,signatures=new char[signaturesCount + 10][],0,signaturesCount);
}
signatures[signaturesCount]=new char[idx + 1];
System.arraycopy(source,0,signatures[signaturesCount],0,idx);
signatures[signaturesCount][idx]=Signature.C_SEMICOLON;
signaturesCount++;
}
break;
case '/':
source[idx]='.';
break;
}
}
char[][] typeSignatures=new char[signaturesCount + 1][];
typeSignatures[0]=source;
for (int i=1, j=signaturesCount - 1; i <= signaturesCount; i++, j--) {
typeSignatures[i]=signatures[j];
}
return typeSignatures;
}

public static <T>T withWriter(Writer writer,@ClosureParams(FirstParam.class) Closure<T> closure) throws IOException {
  try {
    T result=closure.call(writer);
    try {
      writer.flush();
    }
 catch (    IOException e) {
    }
    Writer temp=writer;
    writer=null;
    temp.close();
    return result;
  }
  finally {
    closeWithWarning(writer);
  }
}

public static int round(double value){
  int roundedValue=value > 0 ? (int)(value + 0.5) : -(int)(Math.abs(value) + 0.5);
  return roundedValue;
}

private ServiceRegistrar[] buildServiceRegistrar(){
  int k=0;
  ServiceRegistrar[] proxys=new ServiceRegistrar[discoveredLocators.size()];
  Iterator iter=discoveredLocators.iterator();
  while (iter.hasNext()) {
    LocatorReg reg=(LocatorReg)iter.next();
    proxys[k++]=reg.proxy;
  }
  return proxys;
}

private static char[] zzUnpackCMap(String packed){
  char[] map=new char[0x110000];
  int i=0;
  int j=0;
  while (i < 210) {
    int count=packed.charAt(i++);
    char value=packed.charAt(i++);
    do     map[j++]=value;
 while (--count > 0);
  }
  return map;
}

public void rewindToWS(){
  if (nextOffset == 0) {
    return;
  }
  nextOffset--;
  while (nextOffset > 0 && !Character.isWhitespace(s.charAt(nextOffset))) {
    nextOffset--;
  }
  this.offset=nextOffset - 1;
}

private static Permission[] flatten(Permission[] pa){
  List l=new ArrayList(pa.length);
  for (int i=0; i < pa.length; i++) {
    Permission p=pa[i];
    if (p instanceof GrantPermission) {
      l.addAll(Arrays.asList(((GrantPermission)p).grants));
    }
 else {
      l.add(p);
    }
  }
  return (Permission[])l.toArray(new Permission[l.size()]);
}

public Object[] toArray(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    Object[] a=new Object[count];
    int k=0;
    for (Node<E> p=first; p != null; p=p.next)     a[k++]=p.item;
    return a;
  }
  finally {
    lock.unlock();
  }
}

protected void startDocumentInternal() throws SAXException {
  if (m_needToCallStartDocument) {
    super.startDocumentInternal();
    m_saxHandler.startDocument();
    m_needToCallStartDocument=false;
  }
}

public static boolean isAnonymous(String className){
  int i=className.lastIndexOf('$');
  if (i >= 0 && ++i < className.length()) {
    while (i < className.length()) {
      if (!Character.isDigit(className.charAt(i))) {
        return false;
      }
      i++;
    }
    return true;
  }
  return false;
}

String descriptor(boolean includeThis){
  StringBuilder result=new StringBuilder();
  result.append("(");
  if (includeThis) {
    result.append(declaringType.name);
  }
  for (  TypeId t : parameters.types) {
    result.append(t.name);
  }
  result.append(")");
  result.append(returnType.name);
  return result.toString();
}

public void testSingleFile() throws Exception {
  JFlexMojo mojo=newMojo("single-file-test");
  mojo.execute();
  File produced=getExpectedOutputFile(mojo);
  assertTrue("produced file is a file: " + produced,produced.isFile());
  long size=produced.length();
  boolean correctSize=(size > 26624) && (size < 36696);
  assertTrue("size of produced file between 26k and 36k. Actual is " + size,correctSize);
}

public final static boolean isPotentialZipArchive(String name){
  int lastDot=name.lastIndexOf('.');
  if (lastDot == -1) {
    return false;
  }
  if (name.lastIndexOf(File.separatorChar) > lastDot) {
    return false;
  }
  int length=name.length();
  int extensionLength=length - lastDot - 1;
  if (extensionLength == EXTENSION_java.length()) {
    for (int i=extensionLength - 1; i >= 0; i--) {
      if (Character.toLowerCase(name.charAt(length - extensionLength + i)) != EXTENSION_java.charAt(i)) {
        break;
      }
      if (i == 0) {
        return false;
      }
    }
  }
  if (extensionLength == EXTENSION_class.length()) {
    for (int i=extensionLength - 1; i >= 0; i--) {
      if (Character.toLowerCase(name.charAt(length - extensionLength + i)) != EXTENSION_class.charAt(i)) {
        return true;
      }
    }
    return false;
  }
  return true;
}

void addTerm(MapBuilderTermType type,JClass jclass,String alias){
  MapBuilderTerm newTerm=new MapBuilderTerm();
  newTerm.type=type;
  newTerm.jclass=jclass;
  newTerm.alias=alias;
  terms.add(newTerm);
}

public Collection engineGenerateCertificates(InputStream inStream) throws CertificateException {
  java.security.cert.Certificate cert;
  List certs=new ArrayList();
  while ((cert=engineGenerateCertificate(inStream)) != null) {
    certs.add(cert);
  }
  return certs;
}

@SuppressWarnings("nls") protected void writePath(Shape s){
  PathIterator segments=s.getPathIterator(null);
  double[] coords=new double[6];
  for (int i=0; !segments.isDone(); i++, segments.next()) {
    if (i > 0) {
      write(" ");
    }
    int segmentType=segments.currentSegment(coords);
switch (segmentType) {
case PathIterator.SEG_MOVETO:
      write("M",coords[0],",",coords[1]);
    break;
case PathIterator.SEG_LINETO:
  write("L",coords[0],",",coords[1]);
break;
case PathIterator.SEG_CUBICTO:
write("C",coords[0],",",coords[1]," ",coords[2],",",coords[3]," ",coords[4],",",coords[5]);
break;
case PathIterator.SEG_QUADTO:
write("Q",coords[0],",",coords[1]," ",coords[2],",",coords[3]);
break;
case PathIterator.SEG_CLOSE:
write("Z");
break;
default :
throw new IllegalStateException("Unknown path operation.");
}
}
}

public static void checkArgument(boolean expression,Object errorMessage){
  if (!expression) {
    throw new IllegalArgumentException(String.valueOf(errorMessage));
  }
}

private final boolean parkAndCheckInterrupt(){
  LockSupport.park(this);
  return Thread.interrupted();
}

@Override public int portRemote(){
  if (_channel != null) {
    try {
      SocketAddress addr=_channel.getRemoteAddress();
      return 0;
    }
 catch (    Exception e) {
      e.printStackTrace();
      return 0;
    }
  }
 else   return 0;
}

public void addDropTarget(DropTarget target){
  mDropTargets.add(target);
}

@Override public void startElement(final String namespaceURI,final String localName,final String qName,final Attributes atts) throws SAXException {
  Object objectToLoad=null;
  if (openNodes.size() == 0)   objectToLoad=rootObject;
 else   objectToLoad=createChild(qName,atts);
  if (objectToLoad != null) {
    if (atts.getIndex("type") < 0)     ObjectGetSetter.set(objectToLoad,"type",qName);
    ObjectGetSetter.setAll(objectToLoad,atts);
  }
  openNodes.push(new StackedObject(objectToLoad));
}

public final int put(Object key,int value,boolean isReplace){
  int prime=_prime;
  int hash=Math.abs(System.identityHashCode(key) % prime);
  Object[] keys=_keys;
  while (true) {
    Object testKey=keys[hash];
    if (testKey == null) {
      keys[hash]=key;
      _values[hash]=value;
      _size++;
      if (keys.length <= 4 * _size)       resize(4 * keys.length);
      return value;
    }
 else     if (key != testKey) {
      hash=(hash + 1) % prime;
      continue;
    }
 else     if (isReplace) {
      int old=_values[hash];
      _values[hash]=value;
      return old;
    }
 else {
      return _values[hash];
    }
  }
}

public int addAllAbsent(Collection c){
  int numNew=c.size();
  if (numNew == 0)   return 0;
synchronized (this) {
    Object[] elements=getArray();
    int len=elements.length;
    Object[] temp=new Object[numNew];
    int added=0;
    for (Iterator itr=c.iterator(); itr.hasNext(); ) {
      Object e=itr.next();
      if (indexOf(e,elements,0,len) < 0 && indexOf(e,temp,0,added) < 0)       temp[added++]=e;
    }
    if (added != 0) {
      Object[] newElements=new Object[len + added];
      System.arraycopy(elements,0,newElements,0,len);
      System.arraycopy(temp,0,newElements,len,added);
      setArray(newElements);
    }
    return added;
  }
}

private static final synchronized int nextPoolId(){
  return ++poolNumberSequence;
}

@Override public void close() throws IOException {
  if (logger != null) {
    logger.println("SSLSocket.close " + socket_was_closed);
  }
  if (!socket_was_closed) {
    if (handshake_started) {
      alertProtocol.alert(AlertProtocol.WARNING,AlertProtocol.CLOSE_NOTIFY);
      try {
        output.write(alertProtocol.wrap());
      }
 catch (      IOException ex) {
      }
      alertProtocol.setProcessed();
    }
    shutdown();
    closeTransportLayer();
    socket_was_closed=true;
  }
}

protected static void registerLibrary(ILibraryManager externalLibraryManager,String dataverse,String libraryName) throws Exception {
  ClassLoader classLoader=getLibraryClassLoader(dataverse,libraryName);
  externalLibraryManager.registerLibraryClassLoader(dataverse,libraryName,classLoader);
}

public void autoSize(){
  if (!autoResize)   return;
}

public void testCase9(){
  byte aBytes[]={1,2,3,4,5,6,7,1,2,3,1,2,3,4,5};
  int aSign=1;
  byte rBytes[]={1,2,3,4,5,6,7,1,2,3,1,2,3,4,5};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=BigInteger.ONE;
  BigInteger result=aNumber.multiply(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public static String rawMD5(String s){
  return binl2rstr(binl2md5(rstr2binl(s),s.length() * 8));
}

public boolean isQuestCompleted(final String name){
  final String info=getQuest(name,0);
  if (info == null) {
    return false;
  }
  return info.equals("done");
}

private static char[] zzUnpackCMap(String packed){
  char[] map=new char[0x10000];
  int i=0;
  int j=0;
  while (i < 90) {
    int count=packed.charAt(i++);
    char value=packed.charAt(i++);
    do     map[j++]=value;
 while (--count > 0);
  }
  return map;
}

public void testZeroZero(){
  String numA="0";
  String numB="0";
  String res="0";
  BigInteger aNumber=new BigInteger(numA);
  BigInteger bNumber=new BigInteger(numB);
  BigInteger result=aNumber.xor(bNumber);
  assertTrue(res.equals(result.toString()));
}

@LayoutlibDelegate static float ceil(float value){
  return (float)Math.ceil(value);
}

private final User removeUser(String channel,String nick){
  channel=channel.toLowerCase();
  User user=new User("",nick);
synchronized (_channels) {
    Hashtable<User,User> users=_channels.get(channel);
    if (users != null) {
      return users.remove(user);
    }
  }
  return null;
}

public static void translatePos(Collection<GraphNode> moveNodes,Map<GraphNode,Point2D> positions,Translater intoRegion){
  for (  GraphNode node : moveNodes) {
    Point2D location=translateNode(node,positions,intoRegion);
    if (null == location) {
      continue;
    }
    positions.put(node,location);
  }
}

public void ifPresentOrElse(LongConsumer action,Runnable emptyAction){
  if (isPresent) {
    action.accept(value);
  }
 else {
    emptyAction.run();
  }
}

public void testToBigIntegerPos2(){
  String a="123809648392384754573567356745735.63567890295784902768787678287E+15";
  BigInteger bNumber=new BigInteger("123809648392384754573567356745735635678902957849");
  BigDecimal aNumber=new BigDecimal(a);
  BigInteger result=aNumber.toBigInteger();
  assertTrue("incorrect value",result.equals(bNumber));
}

private String cleanupPath(String fileName){
  if (fileName == null) {
    return null;
  }
  fileName=fileName.replace("\\","/");
  fileName=fileName.replace("/+","/");
  if (fileName.startsWith("./")) {
    return fileName;
  }
  if (fileName.startsWith("/")) {
    return "." + fileName;
  }
  return "./" + fileName;
}

public static Class<?> invocationHandlerReturnType(Class<?> type){
  if (type == byte.class)   return Byte.class;
  if (type == char.class)   return Character.class;
  if (type == double.class)   return Double.class;
  if (type == float.class)   return Float.class;
  if (type == int.class)   return Integer.class;
  if (type == long.class)   return Long.class;
  if (type == short.class)   return Short.class;
  if (type == boolean.class)   return Boolean.class;
  return type;
}

private Node<K,V> findNode(Comparable<? super K> key){
  for (; ; ) {
    Node<K,V> b=findPredecessor(key);
    Node<K,V> n=b.next;
    for (; ; ) {
      if (n == null)       return null;
      Node<K,V> f=n.next;
      if (n != b.next)       break;
      Object v=n.value;
      if (v == null) {
        n.helpDelete(b,f);
        break;
      }
      if (v == n || b.value == null)       break;
      int c=key.compareTo(n.key);
      if (c == 0)       return n;
      if (c < 0)       return null;
      b=n;
      n=f;
    }
  }
}

private static Script scriptFromString(String scriptString,ScriptType scriptType){
  return new Script(scriptString,scriptType);
}

private void finishNestedMode() throws SAXException {
  md=(ModeData)modeDataStack.pop();
}

public void addPropertyChangeListener(final PropertyChangeListener listener){
  propertyChangeSupport.addPropertyChangeListener(listener);
}

protected int skipWhitespace(int c) throws IOException {
  while (c == ' ' || c == '\t') {
    c=reader.read();
  }
  return c;
}

public Builder noCache(){
  this.noCache=true;
  return this;
}

@SuppressWarnings("PointlessArithmeticExpression") public void computeClosestPoints(){
  float centerX=contentRect.centerX();
  float closestDistance=Float.MAX_VALUE;
  for (int i=0; i < pointsCountWithinXRange * 2; i+=2) {
    float x=getDrawX(xRangePoints[i]);
    float distance=Math.abs(x - centerX);
    if (distance <= closestDistance) {
      if (distance == closestDistance) {
        closestPointsCount++;
      }
 else {
        closestPointsCount=0;
      }
      closestDistance=distance;
      if (closestPointsBuffer.length < (closestPointsCount * 2 + 2)) {
        closestPointsBuffer=new float[closestPointsBuffer.length * 2];
      }
      closestPointsBuffer[closestPointsCount * 2 + 0]=xRangePoints[i];
      closestPointsBuffer[closestPointsCount * 2 + 1]=xRangePoints[i + 1];
    }
  }
  if (pointsCountWithinXRange > 0) {
    closestPointsCount++;
  }
}

protected TransformedString stem(String words){
  StringBuilder builder=new StringBuilder();
  Map<Integer,Integer> indexMap=new HashMap<>();
  Integer index=0;
  String content=words.toLowerCase();
  while (!content.isEmpty()) {
    indexMap.put(builder.length(),index);
    if (Character.isAlphabetic(content.charAt(0))) {
      Matcher m=WORD_PATTERN.matcher(content);
      m.find();
      String match=m.group();
      CharSequence stemmedMatch=stemmer.stem(match);
      builder.append(stemmedMatch);
      index+=match.length();
      content=content.substring(match.length());
    }
 else {
      builder.append(content.substring(0,1));
      content=content.substring(1);
      index++;
    }
  }
  indexMap.put(builder.length(),index);
  return new TransformedString(words,builder.toString(),indexMap);
}

@Override public void onLayoutChildren(RecyclerView.Recycler recycler,RecyclerView.State state){
  if (state.getItemCount() == 0) {
    detachAndScrapAttachedViews(recycler);
    return;
  }
  if (state.isPreLayout()) {
    if (getChildCount() == 0)     return;
    final int childCount=getChildCount();
    for (int i=0; i < childCount; i++) {
      View child=getChildAt(i);
      RecyclerView.LayoutParams lp=(RecyclerView.LayoutParams)child.getLayoutParams();
      if (lp.isItemRemoved()) {
        removedTopAndBoundPositionCount++;
        if (firstChangedPosition == -1 || firstAttachedItemPosition + i < firstChangedPosition) {
          firstChangedPosition=firstAttachedItemPosition + i;
        }
      }
    }
    if (removedTopAndBoundPositionCount != 0) {
      layoutAttachedAndAppearingViews(recycler,state);
    }
    isBeforePreLayout=false;
    return;
  }
  if (getChildCount() == 0) {
    initializeLayoutParameters();
    fillGrid(recycler,state,true);
    return;
  }
  if (isNotifyDataSetChanged) {
    detachAndScrapAttachedViews(recycler);
    initializeLayoutParameters();
    fillGrid(recycler,state,true);
    isNotifyDataSetChanged=false;
    return;
  }
  if (firstChangedPosition == -1) {
    mCurrentPosition=firstAttachedItemPosition;
    lastAttachedItemPosition=firstAttachedItemPosition;
    topBorder=getPaddingTop();
    bottomBorder=getHeight() - getPaddingBottom();
    spanBottom=Arrays.copyOf(spanTop,mSpanCount);
    updateSpanBottomParameters();
    detachAndScrapAttachedViews(recycler);
    fillGrid(recycler,state,true);
    isBeforePreLayout=true;
    return;
  }
  for (int i=firstChangedPosition; i < state.getItemCount(); i++) {
    if (itemLayoutWidthCache.get(i,0) != 0) {
      itemLayoutWidthCache.delete(i);
      itemLayoutHeightCache.delete(i);
      itemOccupiedStartSpan.delete(i);
    }
    if (fakeItemLayoutWidthCache.get(i,0) != 0) {
      itemLayoutWidthCache.put(i,fakeItemLayoutWidthCache.get(i));
      itemLayoutHeightCache.put(i,fakeItemLayoutHeightCache.get(i));
      itemOccupiedStartSpan.put(i,fakeItemOccupiedStartSpan.get(i));
    }
  }
  fakeItemLayoutWidthCache.clear();
  fakeItemLayoutHeightCache.clear();
  fakeItemOccupiedStartSpan.clear();
  detachAndScrapAttachedViews(recycler);
  if (firstChangedPosition < firstAttachedItemPosition) {
    mCurrentPosition=firstAttachedItemPosition;
    lastAttachedItemPosition=firstAttachedItemPosition;
    topBorder=getPaddingTop();
    bottomBorder=getHeight() - getPaddingBottom();
    spanBottom=Arrays.copyOf(spanTop,mSpanCount);
    updateSpanBottomParameters();
    fillGrid(recycler,state,true);
    if (spanBottomMax < bottomBorder) {
      scrollBy(spanBottomMax - bottomBorder,recycler,state);
    }
    layoutDisappearingViews(recycler,state);
  }
 else {
    mCurrentPosition=firstAttachedItemPosition;
    lastAttachedItemPosition=firstAttachedItemPosition;
    topBorder=getPaddingTop();
    bottomBorder=getHeight() - getPaddingBottom();
    spanBottom=Arrays.copyOf(spanTop,mSpanCount);
    updateSpanBottomParameters();
    fillGrid(recycler,state,true);
    if (spanBottomMax - bottomBorder < 0) {
      scrollBy(spanBottomMax - bottomBorder,recycler,state);
    }
  }
  isBeforePreLayout=true;
  firstChangedPosition=-1;
  removedTopAndBoundPositionCount=0;
  disappearingViewCache.clear();
}

void clear(){
  valueNumbersUnconditionallyDereferenced.clear();
  derefLocationSetMap.clear();
}

private static String urlEncode(final String text) throws UnsupportedEncodingException {
  return URLEncoder.encode(text,"UTF-8");
}

public String[] list() throws RemoteException {
  String[] names;
synchronized (bindings) {
    int i=bindings.size();
    names=new String[i];
    Enumeration<String> enum_=bindings.keys();
    while ((--i) >= 0)     names[i]=enum_.nextElement();
  }
  return names;
}

public static void assertQEx(String message,SolrQueryRequest req,int code){
  try {
    ignoreException(".");
    h.query(req);
    fail(message);
  }
 catch (  SolrException sex) {
    assertEquals(code,sex.code());
  }
catch (  Exception e2) {
    throw new RuntimeException("Exception during query",e2);
  }
 finally {
    unIgnoreException(".");
  }
}

public static void copyFile(String fromFile,String toFile) throws IOException {
  copyFile(new File(fromFile),new File(toFile));
}

protected synchronized void readAndVerify() throws InvalidKeyException, IOException, FileEncryptionException, IllegalBlockSizeException, BadPaddingException, FileIntegrityException {
  if (backingRandomAccessFile.length() < headerSize()) {
    throw new FileEncryptionException("Invalid file header");
  }
  if (shareKey == null || shareKey.getEncoded().length == 0) {
    throw new FileEncryptionException("Invalid share key in encrypting random access file!");
  }
 else {
    headerAuthHMac.reset();
    KeyParameter keyParameter=new KeyParameter(shareKey.getEncoded());
    headerAuthHMac.init(keyParameter);
  }
  long oldpos=backingRandomAccessFile.getFilePointer();
  backingRandomAccessFile.seek(0);
  byte[] header_data=new byte[headerSize() - FileHeader.AUTH_TAG_SIZE];
  backingRandomAccessFile.read(header_data);
  backingRandomAccessFile.read(headerAuthTag);
  backingRandomAccessFile.seek(oldpos);
  headerAuthHMac.update(header_data,0,header_data.length);
  byte[] hmacRef=new byte[AUTH_TAG_SIZE];
  headerAuthHMac.doFinal(hmacRef,0);
  if (!Arrays.equals(hmacRef,headerAuthTag)) {
    throw new FileIntegrityException("HMac of file header is invalid!");
  }
 else {
    DataInputStream istream=new DataInputStream(new ByteArrayInputStream(header_data));
    byte[] tmpmagic=new byte[PANBOX_FILE_MAGIC.length];
    istream.read(tmpmagic);
    if (!Arrays.equals(tmpmagic,PANBOX_FILE_MAGIC)) {
      throw new FileEncryptionException("Invalid magic number in file header");
    }
    byte[] tmpversion=new byte[PANBOX_FILE_VERSION.length];
    istream.read(tmpversion);
    if (!Arrays.equals(tmpversion,PANBOX_FILE_VERSION)) {
      throw new FileEncryptionException("Invalid version in file header. Expected version is " + PANBOX_FILE_VERSION.toString());
    }
    this.shareKeyVersion=istream.readInt();
    byte[] tmpencryptedFileKey=new byte[KeyConstants.SYMMETRIC_FILE_KEY_SIZE_BYTES];
    istream.read(tmpencryptedFileKey);
    filekeyCipher.init(Cipher.DECRYPT_MODE,shareKey);
    this.decryptedFileKey=new SecretKeySpec(filekeyCipher.doFinal(tmpencryptedFileKey),getAlgorithmIdentifier());
    if (implementsAuthentication()) {
      byte[] tmpFileAuthBuf=new byte[AuthTagVerifier.AUTH_TAG_SIZE];
      istream.read(tmpFileAuthBuf);
      byte[] zeroBuf=new byte[AuthTagVerifier.AUTH_TAG_SIZE];
      Arrays.fill(zeroBuf,(byte)0x00);
      if (Arrays.equals(zeroBuf,tmpFileAuthBuf)) {
        setFileAuthTag(null);
      }
 else {
        setFileAuthTag(tmpFileAuthBuf);
      }
    }
    istream.close();
  }
}

public void mouseReleased(MouseEvent e){
  VisualizationViewer<?,?> vv=(VisualizationViewer<?,?>)e.getSource();
  down=null;
  vv.setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
}

public void clear(){
  oredCriteria.clear();
  orderByClause=null;
  distinct=false;
}

@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(value="FE_FLOATING_POINT_EQUALITY",justification="equality is specifically 'Unchanged' here") public void changeLocoSpeed(DccThrottle t,Section sec,float speed){
  if (sec == referenced && speed == desiredSpeedStep) {
    if (log.isDebugEnabled()) {
      log.debug("Already setting to desired speed step for this section");
    }
    return;
  }
  float sectionLength=sec.getActualLength();
  if (log.isDebugEnabled()) {
    log.debug("call to change speed via section " + sec.getDisplayName());
  }
  if (sec == referenced) {
    distanceRemaining=distanceRemaining - getDistanceTravelled(_throttle.getIsForward(),_throttle.getSpeedSetting(),((float)(System.nanoTime() - lastTimeTimerStarted) / 1000000000));
    sectionLength=distanceRemaining;
  }
 else {
    referenced=sec;
  }
  changeLocoSpeed(t,sectionLength,speed);
}

private void drawOffsets(final Graphics g){
  final int linesToDraw=getNumberOfVisibleRows();
  final String formatString=m_addressMode == AddressMode.BIT32 ? "%08X" : "%016X";
  final long elementSize=getElementSize();
  final long baseAddress=m_model.getStartAddress() == -1 ? 0 : m_model.getStartAddress();
  for (int i=0; i < linesToDraw; i++) {
    final int elementIndex=m_firstRow + i;
    final long elementAddress=baseAddress + (elementIndex * elementSize);
    final String offsetString=String.format(formatString,elementAddress);
    if (elementAddress == m_model.getStackPointer()) {
      highlightStackPointer(g,i);
    }
    if (isEnabled()) {
      g.setColor(m_fontColorOffsets);
    }
 else {
      g.setColor(m_disabledColor != m_bgColorOffset ? m_disabledColor : Color.WHITE);
    }
    g.drawString(offsetString,PADDING_LEFT - (m_charWidth * m_firstColumn),m_paddingTop + (i * m_rowHeight));
  }
}

public static final String crypt(String salt,String original){
  while (salt.length() < 2)   salt+="A";
  StringBuilder buffer=new StringBuilder(" ");
  char charZero=salt.charAt(0);
  char charOne=salt.charAt(1);
  buffer.setCharAt(0,charZero);
  buffer.setCharAt(1,charOne);
  int Eswap0=con_salt[charZero];
  int Eswap1=con_salt[charOne] << 4;
  byte key[]=new byte[8];
  for (int i=0; i < key.length; i++)   key[i]=(byte)0;
  for (int i=0; i < key.length && i < original.length(); i++) {
    int iChar=original.charAt(i);
    key[i]=(byte)(iChar << 1);
  }
  int schedule[]=des_set_key(key);
  int out[]=body(schedule,Eswap0,Eswap1);
  byte b[]=new byte[9];
  intToFourBytes(out[0],b,0);
  intToFourBytes(out[1],b,4);
  b[8]=0;
  for (int i=2, y=0, u=0x80; i < 13; i++) {
    for (int j=0, c=0; j < 6; j++) {
      c<<=1;
      if ((b[y] & u) != 0)       c|=1;
      u>>>=1;
      if (u == 0) {
        y++;
        u=0x80;
      }
      buffer.setCharAt(i,(char)cov_2char[c]);
    }
  }
  return (buffer.toString());
}

public static boolean prefixedWith(String a,String b){
  if (a.equals(b)) {
    return false;
  }
  return a.startsWith(b);
}

public static String readStream(InputStream inputStream) throws IOException {
  if (inputStream == null) {
    return null;
  }
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  byte[] buf=new byte[8192];
  int r;
  while ((r=inputStream.read(buf)) != -1) {
    bout.write(buf,0,r);
  }
  return bout.toString("UTF-8");
}

private Instances makeHeader(){
  ArrayList<Attribute> fv=new ArrayList<Attribute>();
  fv.add(new Attribute("Margin"));
  fv.add(new Attribute("Current"));
  fv.add(new Attribute("Cumulative"));
  return new Instances("MarginCurve",fv,100);
}

private static ICloseableIterator<IBindingSet> iterator(final IRunningQuery runningQuery){
  final ICloseableIterator<IBindingSet[]> it1=runningQuery.iterator();
  final ICloseableIterator<IBindingSet> it2=new Dechunkerator<IBindingSet>(it1);
  final ICloseableIterator<IBindingSet> it3=new RunningQueryCloseableIterator<IBindingSet>(runningQuery,it2);
  return it3;
}

public void makeImmutable(){
  if (isMutable) {
    isMutable=false;
  }
}

public final double doOperation() throws OperatorFailedException {
  final int dim=parameter.getDimension();
  final int dim1=MathUtils.nextInt(dim);
  int dim2=dim1;
  while (dim1 == dim2) {
    dim2=MathUtils.nextInt(dim);
  }
  double scalar1=parameter.getParameterValue(dim1);
  double scalar2=parameter.getParameterValue(dim2);
  final double d=MathUtils.nextDouble() * delta * scalar1;
  scalar1-=d;
  if (parameterWeights[dim1] != parameterWeights[dim2]) {
    scalar2+=d * (double)parameterWeights[dim1] / (double)parameterWeights[dim2];
  }
 else {
    scalar2+=d;
  }
  parameter.setParameterValue(dim1,scalar1);
  parameter.setParameterValue(dim2,scalar2);
  return Math.log(scalar2 / (scalar1 + d));
}

@Override public final boolean isOpen(){
  return isOpen.get();
}

private static StreamTokenizer createTokenizer(String s){
  StreamTokenizer st=new StreamTokenizer(new StringReader(s));
  st.resetSyntax();
  st.wordChars('a','z');
  st.wordChars('A','Z');
  st.wordChars('.','.');
  st.wordChars('0','9');
  st.wordChars('_','_');
  st.wordChars('$','$');
  st.wordChars(128 + 32,255);
  st.whitespaceChars(0,' ');
  st.lowerCaseMode(false);
  st.ordinaryChar('/');
  st.slashSlashComments(false);
  st.slashStarComments(false);
  return st;
}

public static String removeChars(String str,String oldchars){
  int pos=indexOfChars(str,oldchars);
  if (pos == -1) {
    return str;
  }
  StringBuilder buf=new StringBuilder();
  int start=0;
  do {
    buf.append(str.substring(start,pos));
    start=pos + 1;
    pos=indexOfChars(str,oldchars,start);
  }
 while (pos != -1);
  if (start < str.length()) {
    buf.append(str.substring(start));
  }
  return buf.toString();
}

private void sortUnitsToMove(final List<Unit> units,final Route route){
  if (units == null || units.isEmpty()) {
    return;
  }
 else   if (route == null) {
    final Exception nullRouteError=(new IllegalArgumentException("route is not supposed to be null"));
    ClientLogger.logQuietly("Programming error, route should not be null here. Aborting sort operation and returning.",nullRouteError);
  }
  final Comparator<Unit> unitComparator;
  if (route.isUnload() && Match.someMatch(units,Matches.UnitIsLand)) {
    unitComparator=UnitComparator.getUnloadableUnitsComparator(units,route,getUnitOwner(units));
  }
 else {
    unitComparator=UnitComparator.getMovableUnitsComparator(units,route);
  }
  Collections.sort(units,unitComparator);
}

public boolean implementsInterface(ReferenceBinding anInterface,boolean searchHierarchy){
  if (this == anInterface)   return true;
  ReferenceBinding[] interfacesToVisit=null;
  int nextPosition=0;
  ReferenceBinding currentType=this;
  do {
    ReferenceBinding[] itsInterfaces=currentType.superInterfaces();
    if (itsInterfaces != null && itsInterfaces != Binding.NO_SUPERINTERFACES) {
      if (interfacesToVisit == null) {
        interfacesToVisit=itsInterfaces;
        nextPosition=interfacesToVisit.length;
      }
 else {
        int itsLength=itsInterfaces.length;
        if (nextPosition + itsLength >= interfacesToVisit.length)         System.arraycopy(interfacesToVisit,0,interfacesToVisit=new ReferenceBinding[nextPosition + itsLength + 5],0,nextPosition);
        nextInterface:         for (int a=0; a < itsLength; a++) {
          ReferenceBinding next=itsInterfaces[a];
          for (int b=0; b < nextPosition; b++)           if (next == interfacesToVisit[b])           continue nextInterface;
          interfacesToVisit[nextPosition++]=next;
        }
      }
    }
  }
 while (searchHierarchy && (currentType=currentType.superclass()) != null);
  for (int i=0; i < nextPosition; i++) {
    currentType=interfacesToVisit[i];
    if (currentType.isEquivalentTo(anInterface))     return true;
    ReferenceBinding[] itsInterfaces=currentType.superInterfaces();
    if (itsInterfaces != null && itsInterfaces != Binding.NO_SUPERINTERFACES) {
      int itsLength=itsInterfaces.length;
      if (nextPosition + itsLength >= interfacesToVisit.length)       System.arraycopy(interfacesToVisit,0,interfacesToVisit=new ReferenceBinding[nextPosition + itsLength + 5],0,nextPosition);
      nextInterface:       for (int a=0; a < itsLength; a++) {
        ReferenceBinding next=itsInterfaces[a];
        for (int b=0; b < nextPosition; b++)         if (next == interfacesToVisit[b])         continue nextInterface;
        interfacesToVisit[nextPosition++]=next;
      }
    }
  }
  return false;
}

public Road(int id,String name,Intersection from,Intersection to,RoadClass roadClass,RoadLayer roadLayer){
  this.id=id;
  this.name=name;
  this.roadLayer=roadLayer;
  points=new Waypoint[2];
  setIntersections(from,to);
  this.roadClass=roadClass;
  createLines();
  modified=false;
}

@Override public void process(WatchedEvent event){
  KeeperState eventState=event.getState();
  EventType eventType=event.getType();
  log.info("Receive from Watcher, State: {}, Type: {}.",eventState,eventType);
  if (eventState == KeeperState.SyncConnected) {
    connectedSignal.countDown();
    log.info("Connect to {} sucessfully",connectionString);
  }
}

private void initProperties(String filePropertiesName){
  readFromClassPath(filePropertiesName);
  Path curDirPath=getFileInCurrentDir(filePropertiesName);
  if (Files.exists(curDirPath)) {
    try (InputStream curFolder=Files.newInputStream(curDirPath)){
      if (curFolder != null) {
        load(curFolder);
      }
    }
 catch (    Exception e) {
      throw new RuntimeException("Error getting properties file : " + filePropertiesName,e);
    }
  }
}

private void resetBounds(){
  bottomProteinId=null;
  topProteinId=null;
}

private String property(String classId,String key,String instanceId){
  return PREFIX_OVF_PROP + makePropertyKey(classId,key,instanceId);
}

public String list(String dir) throws IOException {
  passive();
  send("LIST " + dir);
  readCode(150);
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  IOUtils.copyAndClose(inData,out);
  readCode(226);
  byte[] data=out.toByteArray();
  return new String(data);
}

public static int convertPxToSp(int pxSize){
  return Math.round((float)pxSize * getDisplayDensity4Fonts());
}

private void persistConsistencyGroups(Collection<BlockConsistencyGroup> cgsToPersist){
  if (null != cgsToPersist && !cgsToPersist.isEmpty()) {
    List<BlockConsistencyGroup> cgsToCreate=new ArrayList<BlockConsistencyGroup>();
    List<BlockConsistencyGroup> cgsToUpdate=new ArrayList<BlockConsistencyGroup>();
    for (    BlockConsistencyGroup cg : cgsToPersist) {
      if (null == cg.getCreationTime()) {
        cgsToCreate.add(cg);
      }
 else {
        cgsToUpdate.add(cg);
      }
    }
    if (!cgsToCreate.isEmpty()) {
      _dbClient.createObject(cgsToCreate);
    }
    if (!cgsToUpdate.isEmpty()) {
      _dbClient.updateObject(cgsToUpdate);
    }
  }
}

public void requestPasswordChangedTime(){
  operations.add(PasswordPolicyStateOperationType.GET_PASSWORD_CHANGED_TIME);
}

public static byte[] encodeRegionName(String regionName){
  byte[] metadata;
  try {
    JSONObject jsonObject=new JSONObject();
    jsonObject.put(JSON_FIELD_TAG,regionName);
    String json=jsonObject.toString();
    metadata=json.getBytes(JSON_CHARSET);
  }
 catch (  Exception e) {
    Log.e(TAG,"Failed to encode metadata: " + e.getMessage());
    metadata=null;
  }
  return metadata;
}

public boolean isValid(){
  boolean valid=true;
  if (endtime.getTime() < System.currentTimeMillis()) {
    valid=false;
  }
 else   if (starttime != null) {
    if (starttime.getTime() > System.currentTimeMillis()) {
      valid=false;
    }
  }
 else {
    if (authtime.getTime() > System.currentTimeMillis()) {
      valid=false;
    }
  }
  return valid;
}

public void testGetElementsByTagNameNS1() throws Throwable {
  Document doc;
  Document newDoc;
  DocumentType docType=null;
  DOMImplementation domImpl;
  NodeList childList;
  String nullNS=null;
  doc=(Document)load("staffNS",builder);
  domImpl=doc.getImplementation();
  newDoc=domImpl.createDocument(nullNS,"root",docType);
  childList=newDoc.getElementsByTagNameNS("*","*");
  assertEquals("documentgetelementsbytagnameNS01",1,childList.getLength());
}

public static boolean addSeparatorIfNeeded(JPopupMenu popupMenu){
  final int menuComponentCount=popupMenu.getComponentCount();
  if (menuComponentCount == 0) {
    return false;
  }
  final Component lastMenuComponent=popupMenu.getComponent(menuComponentCount - 1);
  if (isPopupMenuSeparator(lastMenuComponent)) {
    return false;
  }
  popupMenu.addSeparator();
  return true;
}

public int groupSize(String grpName){
  int res=0;
  for (  HadoopCounter counter : cntrs.values()) {
    if (grpName.equals(counter.group()))     res++;
  }
  return res;
}

public ResourceBundleEnumeration(Set<String> set,Enumeration<String> enumeration){
  this.set=set;
  this.iterator=set.iterator();
  this.enumeration=enumeration;
}

public static int toRGB(ColorSpace colorSpace,float... components){
  float[] rgb=colorSpace.toRGB(components);
  if (rgb[0] < 0f || rgb[1] < 0f || rgb[2] < 0f || rgb[0] > 1f || rgb[1] > 1f || rgb[2] > 1f) {
    return 0;
  }
  return 0xff000000 | ((int)(rgb[0] * 255f) << 16) | ((int)(rgb[1] * 255f) << 8)| (int)(rgb[2] * 255f);
}

private static void skipNames(ByteBuffer tableBuffer,int count){
  for (int i=0; i < count; ++i) {
    ByteUtil.forward(tableBuffer,tableBuffer.getShort());
  }
}

private LogSource(){
}

public Object2IntOpenHashMap<int[]> supportMap(){
  List<ItemSet> itemSets=learn();
  Object2IntOpenHashMap<int[]> confidenceMap=new Object2IntOpenHashMap<>(itemSets.size());
  for (  ItemSet itemSet : itemSets) {
    confidenceMap.put(itemSet.items,itemSet.support);
  }
  return confidenceMap;
}

public static List<String> makeFeatureIdListFromPrefixed(Map<String,Object> parameters){
  List<String> featureIdList=FastList.newInstance();
  if (parameters == null)   return featureIdList;
  for (  Map.Entry<String,Object> entry : parameters.entrySet()) {
    String parameterName=entry.getKey();
    if (parameterName.startsWith("SEARCH_FEAT")) {
      String productFeatureId=(String)entry.getValue();
      if (UtilValidate.isNotEmpty(productFeatureId)) {
        featureIdList.add(productFeatureId);
      }
    }
  }
  return featureIdList;
}

private void updateOverscrollAnimation(final int scrolledOffset){
  if (mEdgeGlowLeft == null || mEdgeGlowRight == null)   return;
  int nextScrollPosition=mCurrentX + scrolledOffset;
  if (mFlingTracker == null || mFlingTracker.isFinished()) {
    if (nextScrollPosition < 0) {
      int overscroll=Math.abs(scrolledOffset);
      mEdgeGlowLeft.onPull((float)overscroll / getRenderWidth());
      if (!mEdgeGlowRight.isFinished()) {
        mEdgeGlowRight.onRelease();
      }
    }
 else     if (nextScrollPosition > mMaxX) {
      int overscroll=Math.abs(scrolledOffset);
      mEdgeGlowRight.onPull((float)overscroll / getRenderWidth());
      if (!mEdgeGlowLeft.isFinished()) {
        mEdgeGlowLeft.onRelease();
      }
    }
  }
}

public void addLongSelectionListener(SelectionListener listener){
  if (listener == null)   throw new IllegalArgumentException();
  if (!longSelectionListeners.contains(listener))   longSelectionListeners.add(listener);
}

public void validate(){
  final List<ValidationException> exceptionList=new ArrayList<ValidationException>();
  validate(exceptionList);
  if (!exceptionList.isEmpty())   throw exceptionList.get(0);
}

protected void installComponents(){
  if ((rendererPane=createCellRendererPane()) != null) {
    tree.add(rendererPane);
  }
}

private void runPendingRequests(){
  int maxStartId=-1;
  BillingRequest request;
  while ((request=mPendingRequests.peek()) != null) {
    if (request.runIfConnected()) {
      mPendingRequests.remove();
      if (maxStartId < request.getStartId()) {
        maxStartId=request.getStartId();
      }
    }
 else {
      bindToMarketBillingService();
      return;
    }
  }
  if (maxStartId >= 0) {
    if (Consts.DEBUG) {
      Log.i(TAG,"stopping service, startId: " + maxStartId);
    }
    stopSelf(maxStartId);
  }
}

public CActionDifferenceTraces(final JFrame parent,final ITraceListProvider traceProvider,final TraceList trace1,final TraceList trace2){
  super(String.format("%s - %s",trace1.getName(),trace2.getName()));
  m_parent=parent;
  m_traceProvider=traceProvider;
  m_trace1=trace1;
  m_trace2=trace2;
}

public static void copyFile(File fromFile,File toFile) throws IOException {
  FileInputStream fileInputStream=new FileInputStream(fromFile);
  FileOutputStream fileOutputStream=new FileOutputStream(toFile);
  int i;
  byte bytes[]=new byte[2048];
  while ((i=fileInputStream.read(bytes)) != -1) {
    fileOutputStream.write(bytes,0,i);
  }
  fileInputStream.close();
  fileOutputStream.close();
}

public final void updateTimeControlTitle(){
  int[] tmpInfo=ctrl.getTimeLimit();
  StringBuilder sb=new StringBuilder();
  int tc=tmpInfo[0];
  int mps=tmpInfo[1];
  int inc=tmpInfo[2];
  if (mps > 0) {
    sb.append(mps);
    sb.append("/");
  }
  sb.append(timeToString(tc));
  if ((inc > 0) || (mps <= 0)) {
    sb.append("+");
    sb.append(tmpInfo[2] / 1000);
  }
  summaryTitleText.setText(sb.toString());
}

public static boolean isInstalled(PackageManager packageManager,String packageName){
  List<PackageInfo> packs=packageManager.getInstalledPackages(0);
  for (int i=0; i < packs.size(); i++) {
    if (TextUtils.equals(packs.get(i).packageName,packageName))     return true;
  }
  return false;
}

@After public void after() throws SQLException {
  Connection connection=null;
  Statement statement=null;
  try {
    connection=getNewConnection(true);
    statement=connection.createStatement();
    statement.executeQuery("DROP TABLE IF EXISTS replica_host_status");
  }
  finally {
    if (statement != null) {
      statement.close();
    }
    if (connection != null) {
      connection.close();
    }
  }
}

private void attachHeader(SIPHeader h){
  if (h == null)   throw new IllegalArgumentException("null header!");
  try {
    if (h instanceof SIPHeaderList) {
      SIPHeaderList<?> hl=(SIPHeaderList<?>)h;
      if (hl.isEmpty()) {
        return;
      }
    }
    attachHeader(h,false,false);
  }
 catch (  SIPDuplicateHeaderException ex) {
  }
}

@Action(value="/receipts/collectionsWorkflow-listWorkflow") public String listWorkflow(){
  if (wfAction != null && wfAction.equals(CollectionConstants.WF_ACTION_APPROVE))   fetchReceipts(CollectionConstants.WF_ACTION_APPROVE);
 else   fetchReceipts(CollectionConstants.WF_ACTION_SUBMIT);
  return INDEX;
}

public static final List<Geo> polyNearPoly(GeoArray s,GeoArray r,double near){
  int rlen=r.getSize();
  int slen=s.getSize();
  Geo pl0=r.get(rlen - 1);
  Geo pl1=new Geo();
  Geo sl0=s.get(slen - 1);
  Geo sl1=new Geo();
  List<Geo> list=null;
  for (int j=0; j < rlen; j++) {
    pl1=r.get(j,pl1);
    for (int i=0; i < slen; i++) {
      sl1=s.get(i,sl1);
      Geo ret=segmentsIntersectOrNear(sl0,sl1,pl0,pl1,near);
      if (ret != null) {
        if (list == null) {
          list=new LinkedList<Geo>();
        }
        list.add(ret);
      }
      sl0=sl1;
    }
    pl0=pl1;
  }
  return list;
}

public void initParam(Object obj){
  paramObject=obj;
  Enumeration<AbstractParamPanel> en=tablePanel.elements();
  AbstractParamPanel panel=null;
  while (en.hasMoreElements()) {
    panel=en.nextElement();
    panel.initParam(obj);
  }
}

public void updateTopic(String topic,DbContextRule rule){
  topic=StringUtils.toLowerEnglish(topic);
  RuleHead head=ruleMap.get(topic);
  if (head == null) {
    head=new RuleHead("db",topic,rule);
    ruleMap.put(topic,head);
    statements.add(head);
  }
 else {
    head.setRule(rule);
  }
}

public static double log10(double x){
  return Math.log(x) / LOG10;
}

public static int isButtonOnScreen(final String buttonKey){
  Component onScreen;
  try {
    onScreen=BubbleWindow.findButton(buttonKey,RapidMinerGUI.getMainFrame());
  }
 catch (  NullPointerException e) {
    return OBJECT_NOT_ON_SCREEN;
  }
  if (onScreen == null) {
    return OBJECT_NOT_ON_SCREEN;
  }
  int xposition=onScreen.getLocationOnScreen().x;
  int yposition=onScreen.getLocationOnScreen().y;
  int otherXposition=xposition + onScreen.getWidth();
  int otherYposition=yposition + onScreen.getHeight();
  Window frame=RapidMinerGUI.getMainFrame();
  if (otherXposition <= frame.getWidth() && otherYposition <= frame.getHeight() && xposition > 0 && yposition > 0) {
    return OBJECT_SHOWING_ON_SCREEN;
  }
 else {
    return OBJECT_NOT_SHOWING;
  }
}

@Override public void addFocusables(ArrayList<View> views,int direction,int focusableMode){
  final int focusableCount=views.size();
  final int descendantFocusability=getDescendantFocusability();
  if (descendantFocusability != FOCUS_BLOCK_DESCENDANTS) {
    for (int i=0; i < getChildCount(); i++) {
      final View child=getChildAt(i);
      if (child.getVisibility() == VISIBLE) {
        ItemInfo ii=infoForChild(child);
        if (ii != null && ii.position == mCurItem) {
          child.addFocusables(views,direction,focusableMode);
        }
      }
    }
  }
  if (descendantFocusability != FOCUS_AFTER_DESCENDANTS || (focusableCount == views.size())) {
    if (!isFocusable()) {
      return;
    }
    if ((focusableMode & FOCUSABLES_TOUCH_MODE) == FOCUSABLES_TOUCH_MODE && isInTouchMode() && !isFocusableInTouchMode()) {
      return;
    }
    if (views != null) {
      views.add(this);
    }
  }
}

public static boolean reachable(InetAddress addr,int reachTimeout){
  try {
    return addr.isReachable(reachTimeout);
  }
 catch (  IOException ignore) {
    return false;
  }
}

protected static String timestr(long time_val,long total_time){
  boolean neg;
  long ms=0;
  long sec=0;
  long percent10;
  String pad;
  neg=time_val < 0;
  if (neg)   time_val=-time_val;
  ms=time_val % 1000;
  sec=time_val / 1000;
  if (sec < 10)   pad="   ";
 else   if (sec < 100)   pad="  ";
 else   if (sec < 1000)   pad=" ";
 else   pad="";
  percent10=(time_val * 1000) / total_time;
  return (neg ? "-" : "") + pad + sec+ "."+ ((ms % 1000) / 100)+ ((ms % 100) / 10)+ (ms % 10)+ "sec"+ " ("+ percent10 / 10 + "." + percent10 % 10 + "%)";
}

public static Tree rotateByName(Tree tree){
  return new SimpleTree(rotateNodeByName(tree,tree.getRoot()));
}

@Subscribe public void onEvent(SearchInPosition event){
  List<LatLng> list=MapHelper.getSearchArea(event.getSteps(),new LatLng(event.getPosition().latitude,event.getPosition().longitude));
  snackMe(getString(R.string.toast_searching));
  nianticManager.getGyms(event.getPosition().latitude,event.getPosition().longitude,0D);
  nianticManager.getPokeStops(event.getPosition().latitude,event.getPosition().longitude,0D);
  nianticManager.getLuredPokemon(event.getPosition().latitude,event.getPosition().longitude,0D);
  for (  LatLng p : list) {
    nianticManager.getCatchablePokemon(p.latitude,p.longitude,0D);
  }
}

public void save(OnSaveLogListener listener){
  File dir=getLogDir();
  if (dir == null) {
    listener.onError("Can't save logs. External storage is not mounted. " + "Check android.permission.WRITE_EXTERNAL_STORAGE permission");
    return;
  }
  FileWriter fileWriter=null;
  try {
    File output=new File(dir,getLogFileName());
    fileWriter=new FileWriter(output,true);
    List<LogEntry> entries=bufferedLogs();
    for (    LogEntry entry : entries) {
      fileWriter.write(entry.prettyPrint() + "\n");
    }
    listener.onSave(output);
  }
 catch (  IOException e) {
    listener.onError(e.getMessage());
    e.printStackTrace();
  }
 finally {
    if (fileWriter != null) {
      try {
        fileWriter.close();
      }
 catch (      IOException e) {
        listener.onError(e.getMessage());
        e.printStackTrace();
      }
    }
  }
}

protected StorageHADomain checkAdapterExistsInDB(String nativeGuid) throws IOException {
  StorageHADomain adapter=null;
  List<StorageHADomain> adapterInDB=CustomQueryUtility.getActiveStorageHADomainByNativeGuid(_dbClient,nativeGuid);
  if (adapterInDB != null && !adapterInDB.isEmpty()) {
    adapter=adapterInDB.get(0);
  }
  return adapter;
}

public static Executor createTaskDistributor(){
  return Executors.newCachedThreadPool(createThreadFactory(Thread.NORM_PRIORITY,"uil-pool-d-"));
}

protected Coordinate[] toCoordinateArray(Stack stack){
  Coordinate[] coordinates=new Coordinate[stack.size()];
  for (int i=0; i < stack.size(); i++) {
    Coordinate coordinate=(Coordinate)stack.get(i);
    coordinates[i]=coordinate;
  }
  return coordinates;
}

private static void onEntityOpened(KeyEvent event) throws BadLocationException {
  JEditorPane editor=(JEditorPane)event.getSource();
  Document doc=editor.getDocument();
  int pos=editor.getCaretPosition();
  String tag=getCurrentTag(doc.getText(0,pos));
  if (tag.equals("")) {
    return;
  }
  String remainder=doc.getText(pos,doc.getLength() - pos);
  for (int i=0; i < remainder.length(); i++) {
    char c=remainder.charAt(i);
    if (c == '\n') {
      break;
    }
 else     if (!Character.isWhitespace(c)) {
      return;
    }
  }
  StringBuffer buffer=new StringBuffer();
  int newPosition=pos;
  String indent=getIndent(doc,pos);
  if (tag.equals("if")) {
    buffer.append(" var=\"\" relation=\"=\" value=\"\"/>");
    newPosition+=6;
  }
 else   if (tag.equals("set")) {
    buffer.append(" var=\"\" value=\"\"/>");
    newPosition+=6;
  }
 else   if (tag.equals("value")) {
    buffer.append(" prob=\"\"></value>");
    newPosition+=7;
  }
 else   if (tag.equals("variable")) {
    buffer.append(" id=\"\">\n");
    buffer.append(indent + "\t<value prob=\"1\"></value>\n");
    buffer.append(indent + "</variable>\n");
    newPosition+=5;
  }
 else   if (tag.equals("model")) {
    buffer.append(" trigger=\"\">\n\n");
    buffer.append(indent + "</model>");
    newPosition+=10;
  }
 else   if (tag.equals("effect")) {
    buffer.append(" prob=\"1\">\n");
    buffer.append(indent + "\t<set var=\"\" value=\"\"/>\n");
    buffer.append(indent + "</effect>\n");
    newPosition+=22 + indent.length();
  }
 else {
    return;
  }
  doc.insertString(pos,buffer.toString(),null);
  editor.setCaretPosition(newPosition);
  event.consume();
}

@SuppressWarnings("unused") private String checkForWellKnownNamespacePrefix(final String prefix){
  final String namespace;
  if (prefix.equals("bd")) {
    prefixMap.put("bd",namespace=BD.NAMESPACE);
  }
 else   if (prefix.equals("bds")) {
    prefixMap.put("bds",namespace=BDS.NAMESPACE);
  }
 else   if (prefix.equals("hint")) {
    prefixMap.put("hint",namespace=QueryHints.NAMESPACE);
  }
 else   if (prefix.equals("rdf")) {
    prefixMap.put("rdf",namespace=RDF.NAMESPACE);
  }
 else   if (prefix.equals("rdfs")) {
    prefixMap.put("rdfs",namespace=RDFS.NAMESPACE);
  }
 else   if (prefix.equals("xsd")) {
    prefixMap.put("xsd",namespace=XSD.NAMESPACE);
  }
 else   if (prefix.equals("foaf")) {
    prefixMap.put("foaf",namespace=FOAFVocabularyDecl.NAMESPACE);
  }
 else   if (prefix.equals("fn")) {
    prefixMap.put("fn",namespace=FN.NAMESPACE);
  }
 else   if (prefix.equals("owl")) {
    prefixMap.put("owl",namespace=OWL.NAMESPACE);
  }
 else   if (prefix.equals("sesame")) {
    prefixMap.put("sesame",namespace=SESAME.NAMESPACE);
  }
 else   if (prefix.equals("gas")) {
    prefixMap.put("gas",namespace=GASService.Options.NAMESPACE);
  }
 else {
    namespace=null;
  }
  return namespace;
}

private void prepareUserForRanking(User user){
  User updatedUser=userRepository.findOne(user.getId(),0);
  if (updatedUser.getImported() == null || !updatedUser.getImported()) {
    updatedUser.setImported(true);
    updatedUser.setPagerank(null);
    updatedUser.setLastPageRank(null);
    updatedUser.setCurrentRank(null);
    updatedUser.setPreviousRank(null);
    userRepository.save(updatedUser,0);
  }
}

private static List<Comment> orderComments(List<Comment> comments){
  Map<String,List<Comment>> parentMap=new HashMap<>();
  List<Comment> rootComments=new ArrayList<>();
  for (  Comment c : comments) {
    String parentUuid=c.parentUuid;
    List<Comment> l=parentMap.get(parentUuid);
    if (l == null) {
      l=new ArrayList<>();
      parentMap.put(parentUuid,l);
    }
    l.add(c);
    if (parentUuid == null) {
      rootComments.add(c);
    }
  }
  List<Comment> result=new ArrayList<>();
  addChildren(parentMap,rootComments,result);
  return result;
}

protected static final void logRawDiagnostic(String msg){
  if (diagnosticsStream != null) {
    diagnosticsStream.println(msg);
    diagnosticsStream.flush();
  }
}

public void initialize(Subject subject,CallbackHandler callbackHandler,Map<String,?> sharedState,Map<String,?> options){
  unauthenticatedIdentity=(String)options.get("unauthenticatedIdentity");
  handler=callbackHandler;
  this.subject=subject;
}

public Macro(File file) throws EOFException, FileNotFoundException, IOException {
  DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
  DocumentBuilder db=null;
  Document doc=null;
  try {
    db=dbf.newDocumentBuilder();
    InputSource is=new InputSource(new UnicodeReader(new FileInputStream(file),FILE_ENCODING));
    is.setEncoding(FILE_ENCODING);
    doc=db.parse(is);
  }
 catch (  Exception e) {
    e.printStackTrace();
    String desc=e.getMessage();
    if (desc == null) {
      desc=e.toString();
    }
    throw new IOException("Error parsing XML: " + desc);
  }
  macroRecords=new ArrayList();
  boolean parsedOK=initializeFromXMLFile(doc.getDocumentElement());
  if (parsedOK == false) {
    name=null;
    macroRecords.clear();
    macroRecords=null;
    throw new IOException("Error parsing XML!");
  }
}

public boolean contains(symbol sym){
  return _all.containsKey(sym.name());
}

private PieData generateDataPie(int cnt){
  ArrayList<Entry> entries=new ArrayList<Entry>();
  for (int i=0; i < 4; i++) {
    entries.add(new Entry((int)(Math.random() * 70) + 30,i));
  }
  PieDataSet d=new PieDataSet(entries,"");
  d.setSliceSpace(2f);
  d.setColors(ColorTemplate.VORDIPLOM_COLORS);
  PieData cd=new PieData(getQuarters(),d);
  return cd;
}

public void sendUserDeleteNotification(Map attributes){
  try {
    if (deleteNotifyList != null && !deleteNotifyList.isEmpty()) {
      sendEmail(deleteNotifyList,attributes,"497","491","494");
    }
  }
 catch (  MessagingException e) {
    if (debug.warningEnabled()) {
      debug.warning("EmailNotificationHelper." + "sendUserDeleteNotification() Unable to send " + "email for user: "+ entryDN,e);
    }
  }
}

public void addMapsIdMapping(DatabaseMapping mapping){
  mapsIdMappings.add(mapping);
}

@Override public final char readChar() throws IOException {
  dis.readFully(work,0,2);
  return (char)((work[1] & 0xff) << 8 | (work[0] & 0xff));
}

public int taskSize(){
  return tasks.size();
}

public void addMutedIp(final String ip,final Date muteTill){
  if (isIpMuted(ip)) {
    removeMutedIp(ip);
  }
  Timestamp muteTillTs=null;
  if (muteTill != null) {
    muteTillTs=new Timestamp(muteTill.getTime());
  }
  s_logger.fine("Muting ip:" + ip);
  final Connection con=Database.getConnection();
  try {
    final PreparedStatement ps=con.prepareStatement("insert into muted_ips (ip, mute_till) values (?, ?)");
    ps.setString(1,ip);
    ps.setTimestamp(2,muteTillTs);
    ps.execute();
    ps.close();
    con.commit();
  }
 catch (  final SQLException sqle) {
    if (sqle.getErrorCode() == 30000) {
      s_logger.info("Tried to create duplicate muted ip:" + ip + " error:"+ sqle.getMessage());
      return;
    }
    s_logger.log(Level.SEVERE,"Error inserting muted ip:" + ip,sqle);
    throw new IllegalStateException(sqle.getMessage());
  }
 finally {
    DbUtil.closeConnection(con);
  }
}

public boolean isRslUrlSigned(String url){
  if (url == null) {
    return false;
  }
  return url.endsWith(SIGNED_RSL_URL_DOT_EXTENSION);
}

public void removeUserLockoutEntry(String userDN){
  pwResetFailHash.remove(userDN);
  userWarningCount=0;
}

public void createDatabaseEntitiesForBusinessObjectDataSearchTesting(){
  businessObjectDataDaoTestHelper.createBusinessObjectDataEntity(AbstractServiceTest.NAMESPACE,AbstractServiceTest.BDEF_NAME,AbstractServiceTest.FORMAT_USAGE_CODE,AbstractServiceTest.FORMAT_FILE_TYPE_CODE,AbstractServiceTest.FORMAT_VERSION,AbstractServiceTest.PARTITION_VALUE,AbstractServiceTest.NO_SUBPARTITION_VALUES,AbstractServiceTest.DATA_VERSION,AbstractServiceTest.LATEST_VERSION_FLAG_SET,BusinessObjectDataStatusEntity.VALID);
  businessObjectDataDaoTestHelper.createBusinessObjectDataEntity(AbstractServiceTest.NAMESPACE,AbstractServiceTest.BDEF_NAME,AbstractServiceTest.FORMAT_USAGE_CODE_2,AbstractServiceTest.FORMAT_FILE_TYPE_CODE,AbstractServiceTest.FORMAT_VERSION,AbstractServiceTest.PARTITION_VALUE,AbstractServiceTest.NO_SUBPARTITION_VALUES,AbstractServiceTest.DATA_VERSION,AbstractServiceTest.LATEST_VERSION_FLAG_SET,BusinessObjectDataStatusEntity.INVALID);
  businessObjectDataDaoTestHelper.createBusinessObjectDataEntity(AbstractServiceTest.NAMESPACE_2,AbstractServiceTest.BDEF_NAME_2,AbstractServiceTest.FORMAT_USAGE_CODE_2,AbstractServiceTest.FORMAT_FILE_TYPE_CODE,AbstractServiceTest.FORMAT_VERSION_2,AbstractServiceTest.PARTITION_VALUE,AbstractServiceTest.NO_SUBPARTITION_VALUES,AbstractServiceTest.DATA_VERSION,AbstractServiceTest.LATEST_VERSION_FLAG_SET,BusinessObjectDataStatusEntity.INVALID);
  businessObjectDataDaoTestHelper.createBusinessObjectDataEntity(AbstractServiceTest.NAMESPACE_2,AbstractServiceTest.BDEF_NAME_2,AbstractServiceTest.FORMAT_USAGE_CODE_2,AbstractServiceTest.FORMAT_FILE_TYPE_CODE_2,AbstractServiceTest.FORMAT_VERSION_2,AbstractServiceTest.PARTITION_VALUE,AbstractServiceTest.NO_SUBPARTITION_VALUES,AbstractServiceTest.DATA_VERSION,AbstractServiceTest.LATEST_VERSION_FLAG_SET,BusinessObjectDataStatusEntity.VALID);
}

@SkipValidation @Action(value="/searchNotices-reset") public String reset(){
  if (LOGGER.isDebugEnabled())   LOGGER.debug("reset : Before reset values : ownerName : " + ownerName + " zoneId : "+ zoneId+ " wardId : "+ wardId+ " propertyType : "+ propertyType+ " noticeType : "+ noticeType+ " noticeNumber : "+ noticeNumber+ " noticeFromDate : "+ noticeFromDate+ " noticeToDate : "+ noticeToDate+ " indexNumber : "+ indexNumber+ " houseNumber : "+ houseNumber);
  ownerName="";
  zoneId=-1l;
  wardId=-1l;
  propertyType="-1";
  noticeType="-1";
  noticeNumber="";
  noticeFromDate=null;
  noticeToDate=null;
  indexNumber="";
  houseNumber="";
  if (LOGGER.isDebugEnabled())   LOGGER.debug("Exit from reset method");
  return INDEX;
}

public void checkOptionsValid(){
  if (alias_ratio < 0 || alias_ratio > 1) {
    throw new RuntimeException("Alias ratio must be between 0 and 1, inclusive.");
  }
  if (null_ratio < 0 || null_ratio > 1) {
    throw new RuntimeException("Null ratio must be between 0 and 1, inclusive.");
  }
  if (maxsize <= 0) {
    throw new RuntimeException("Maximum sequence size must be greater than zero but was " + maxsize);
  }
  if (!literals_file.isEmpty() && literals_level == ClassLiteralsMode.NONE) {
    throw new RuntimeException("Invalid parameter combination: specified a class literal file but --use-class-literals=NONE");
  }
}

@Override public UUID sessionId(){
  if (sessionId == null)   sessionId=UUID.randomUUID();
  return sessionId;
}

private void readObject(final ObjectInputStream in) throws IOException, ClassNotFoundException {
  in.defaultReadObject();
  final Calendar definingCalendar=Calendar.getInstance(timeZone,locale);
  init(definingCalendar);
}

@Override public MemChunkHolder<BigDataPMemAllocator> createChunk(long size,boolean autoreclaim){
  MemChunkHolder<BigDataPMemAllocator> ret=null;
  Long addr=m_nvmasvc.allocate(m_nid,size,true);
  if ((null == addr || 0 == addr) && m_activegc) {
    forceGC();
    addr=m_nvmasvc.allocate(m_nid,size,true);
  }
  if (null != addr && 0 != addr) {
    ret=new MemChunkHolder<BigDataPMemAllocator>(this,addr,size);
    ret.setCollector(m_chunkcollector);
    if (autoreclaim) {
      m_chunkcollector.register(ret);
    }
  }
  return ret;
}

public int hashCode(){
  int result=17;
  if (tableName != null) {
    result=37 * tableName.hashCode();
  }
  if (repositoryName != null) {
    result=37 * repositoryName.hashCode();
  }
  return result;
}

public synchronized void add(String name,long threadId){
  if (mFinished) {
    throw new IllegalStateException("Marker added to finished log");
  }
  mMarkers.add(new Marker(name,threadId,SystemClock.elapsedRealtime()));
}

private void toString(StringBuilder acc,int prec,boolean expand){
  if (this.meta != null && !expand) {
    acc.append(this.meta);
    return;
  }
  boolean paren=op.getPrec() < prec;
  if (paren)   acc.append('(');
  toString(acc,expand);
  if (paren)   acc.append(')');
}

public static boolean isNotNullValue(String s){
  return ((s != null) && !s.isEmpty() && !s.equals(NullColumnValueGetter.getNullStr()));
}

private E unlinkFirst(){
  Node<E> f=first;
  if (f == null)   return null;
  Node<E> n=f.next;
  E item=f.item;
  f.item=null;
  f.next=f;
  first=n;
  if (n == null)   last=null;
 else   n.prev=null;
  --count;
  notFull.signal();
  return item;
}

public static String removeAll(String source,char toRemove){
  int toRemoveIndex=source.indexOf(toRemove);
  if (toRemoveIndex != -1) {
    StringBuilder result=new StringBuilder(source.length());
    int sourceIndex=0;
    while (toRemoveIndex != -1) {
      result.append(source.substring(sourceIndex,toRemoveIndex));
      sourceIndex=toRemoveIndex + 1;
      toRemoveIndex=source.indexOf(toRemove,sourceIndex);
      if (toRemoveIndex == -1) {
        result.append(source.substring(sourceIndex,source.length()));
      }
    }
    return result.toString();
  }
 else {
    return source;
  }
}

public List<Entry<E>> asList(){
  if (nonNullList == null) {
    if (array == null || array.length() == 0) {
      nonNullList=Collections.emptyList();
    }
 else {
      List<Entry<E>> list=new ArrayList<>(array.length());
      for (int i=0; i < array.length(); i++) {
        E e=array.get(i);
        if (e != null) {
          list.add(new Entry<>(i,e));
        }
      }
      nonNullList=list;
    }
  }
  return nonNullList;
}

public static Range findCumulativeRangeBounds(CategoryDataset dataset){
  ParamChecks.nullNotPermitted(dataset,"dataset");
  boolean allItemsNull=true;
  double minimum=0.0;
  double maximum=0.0;
  for (int row=0; row < dataset.getRowCount(); row++) {
    double runningTotal=0.0;
    for (int column=0; column <= dataset.getColumnCount() - 1; column++) {
      Number n=dataset.getValue(row,column);
      if (n != null) {
        allItemsNull=false;
        double value=n.doubleValue();
        if (!Double.isNaN(value)) {
          runningTotal=runningTotal + value;
          minimum=Math.min(minimum,runningTotal);
          maximum=Math.max(maximum,runningTotal);
        }
      }
    }
  }
  if (!allItemsNull) {
    return new Range(minimum,maximum);
  }
 else {
    return null;
  }
}

private void addHotkeys(JRootPane pane){
  for (  Hotkey hotkey : hotkeys) {
    if (doesHotkeyHaveAction(hotkey) && hotkey.type == Type.REGULAR) {
      if (pane == null) {
        addHotkey(hotkey,main.getRootPane());
        for (        JDialog popout : popouts.keySet()) {
          addHotkey(hotkey,popout.getRootPane());
        }
      }
 else {
        addHotkey(hotkey,pane);
      }
    }
  }
}

static <T>ReplayPromise<Void> allReplay(final Duration timeout,final List<Promise<T>> promises){
  return allReplay(timeout,System.currentTimeMillis(),promises.toArray(new Promise[promises.size()]));
}

public void checkAndSetupBootStrapInfo(DbClient dbClient){
  if (onStandby) {
    _log.info("Skip boot strap info initialization on standby site");
    return;
  }
  if (_vdcList != null && _vdcList.size() > 1) {
    _log.info("Skip root tenant check for more than one vdcs. Current number of vdcs: {}",_vdcList.size());
    return;
  }
  int retryIntervalSecs=DBINIT_RETRY_INTERVAL;
  boolean done=false;
  boolean wait;
  while (!done) {
    wait=false;
    InterProcessLock lock=null;
    try {
      lock=_coordinator.getLock(getBootstrapLockName());
      _log.info("bootstrap info check - waiting for bootstrap lock");
      lock.acquire();
      if (isGeoDbsvc()) {
        insertDefaultRootTenant(dbClient);
      }
 else {
        insertMyVdcInfo(dbClient);
        insertVdcVersion(dbClient);
        insertPasswordHistory(dbClient);
      }
      done=true;
    }
 catch (    Exception e) {
      if (e instanceof IllegalStateException) {
        throw (IllegalStateException)e;
      }
 else {
        _log.warn("Exception while checking for bootstrap info, will retry in {} secs",retryIntervalSecs,e);
        wait=true;
      }
    }
 finally {
      if (lock != null) {
        try {
          lock.release();
        }
 catch (        Exception e) {
          _log.error("Fail to release lock",e);
        }
      }
    }
    if (wait) {
      try {
        Thread.sleep(retryIntervalSecs * 1000);
      }
 catch (      InterruptedException ex) {
        _log.warn("Thread is interrupted during wait for retry",ex);
      }
    }
  }
}

Object processEXPR(StylesheetHandler handler,String uri,String name,String rawName,String value,ElemTemplateElement owner) throws org.xml.sax.SAXException {
  try {
    XPath expr=handler.createXPath(value,owner);
    return expr;
  }
 catch (  TransformerException te) {
    throw new org.xml.sax.SAXException(te);
  }
}

private void checkAccess(UnixPath file,boolean checkRead,boolean checkWrite){
  SecurityManager sm=System.getSecurityManager();
  if (sm != null) {
    if (checkRead)     file.checkRead();
    if (checkWrite)     file.checkWrite();
    sm.checkPermission(new RuntimePermission("accessUserInformation"));
  }
}

private static Spanned removeImageSpanObjects(Spanned spanned){
  SpannableStringBuilder builder=(SpannableStringBuilder)spanned;
  Object[] spannedObjects=builder.getSpans(0,builder.length(),Object.class);
  for (int i=0; i < spannedObjects.length; i++) {
    if (spannedObjects[i] instanceof ImageSpan) {
      ImageSpan imageSpan=(ImageSpan)spannedObjects[i];
      builder.replace(spanned.getSpanStart(imageSpan),builder.getSpanEnd(imageSpan),"");
    }
  }
  return spanned;
}

public Future<String> classify(String snippet){
  final ExecutorService service=Executors.newSingleThreadExecutor();
  return service.submit(new ClassifyingTask(snippet));
}

public abstract byte[] embedData(byte[] msg,String msgFileName,byte[] cover,String coverFileName,String stegoFileName) throws OpenStegoException ;

public void addSetter(int i){
  for (  ScatterPlotSetter setter : setterList) {
    if (setter.getIndex() == i) {
      return;
    }
  }
  setterList.add(new ScatterPlotSetter(i));
}

@Override public synchronized void initialize(){
  if (!mRootDirectory.exists()) {
    if (!mRootDirectory.mkdirs()) {
      Loger.debug(String.format("Unable to create cache dir %s",mRootDirectory.getAbsolutePath()));
    }
    return;
  }
  File[] files=mRootDirectory.listFiles();
  if (files == null) {
    return;
  }
  for (  File file : files) {
    BufferedInputStream fis=null;
    try {
      fis=new BufferedInputStream(new FileInputStream(file));
      CacheHeader entry=CacheHeader.readHeader(fis);
      entry.size=file.length();
      putEntry(entry.key,entry);
    }
 catch (    IOException e) {
      file.delete();
    }
 finally {
      FileUtils.closeIO(fis);
    }
  }
}

public Client(final ServerSocketChannel server) throws IOException {
  try {
    client=server.accept();
    client.configureBlocking(false);
    if (!client.finishConnect())     throw new IOException("Upstream client not connected");
    clientSelector=Selector.open();
    clientKey=client.register(clientSelector,SelectionKey.OP_READ);
    if (log.isInfoEnabled())     log.info("Accepted new connection");
  }
 catch (  IOException ex) {
    close();
    throw ex;
  }
}

public Transfer writeBytes(byte[] data) throws IOException {
  if (data == null) {
    writeInt(-1);
  }
 else {
    writeInt(data.length);
    out.write(data);
  }
  return this;
}

public static void stop(String[] args){
  LOG.info("Stopping Spring Application container");
  System.exit(0);
}

public boolean add(Object o){
  if (!list.contains(o)) {
    list.add(o);
    return true;
  }
  return false;
}

private XYPlot initializeLowerPlot(){
  nonHeapMemory=new YIntervalSeriesImproved("non-heap memory");
  YIntervalSeriesCollection yIntervalSeriesCollection=new YIntervalSeriesCollection();
  yIntervalSeriesCollection.addSeries(nonHeapMemory);
  DeviationRenderer renderer=new DeviationRenderer(true,false);
  renderer.setBaseShapesVisible(true);
  renderer.setSeriesStroke(0,new BasicStroke(3.0f));
  renderer.setSeriesOutlineStroke(0,new BasicStroke(2.0f));
  renderer.setSeriesShape(0,new Ellipse2D.Double(-2.5,-2.5,5.0,5.0));
  renderer.setBaseToolTipGenerator(new StandardXYToolTipGenerator(StandardXYToolTipGenerator.DEFAULT_TOOL_TIP_FORMAT,DateFormat.getDateTimeInstance(),NumberFormat.getNumberInstance()));
  final NumberAxis rangeAxis=new NumberAxis("Non-heap / kbytes");
  rangeAxis.setRangeType(RangeType.POSITIVE);
  SystemInformationData systemData=(SystemInformationData)dataAccessService.getLastDataObject(systemTemplate);
  if (systemData != null) {
    double maxNonHeapUpperRange;
    if (systemData.getMaxNonHeapMemorySize() != -1) {
      maxNonHeapUpperRange=systemData.getMaxNonHeapMemorySize() / 1024.0d;
    }
 else     if (systemData.getInitNonHeapMemorySize() != -1) {
      maxNonHeapUpperRange=(systemData.getInitNonHeapMemorySize() * 2) / 1024.0d;
    }
 else {
      maxNonHeapUpperRange=128 * 1024 * 1024;
    }
    if (maxNonHeapUpperRange > 0) {
      rangeAxis.setRange(0,maxNonHeapUpperRange);
      rangeAxis.setAutoRangeMinimumSize(maxNonHeapUpperRange);
    }
  }
  final XYPlot subplot=new XYPlot(yIntervalSeriesCollection,null,rangeAxis,renderer);
  subplot.setAxisOffset(new RectangleInsets(5.0,5.0,5.0,5.0));
  subplot.setRangeAxisLocation(AxisLocation.TOP_OR_LEFT);
  subplot.setRangeCrosshairVisible(true);
  return subplot;
}

public static void logError(Throwable exception,String message,Object... args){
  message=MessageFormat.format(message,args);
  log(IStatus.ERROR,IStatus.OK,message,exception);
}

public void add(Row r){
  list.add(r);
  memory+=r.getMemory() + Constants.MEMORY_POINTER;
  if (maxMemory > 0 && memory > maxMemory) {
    writeAllRows();
  }
  size++;
}

private MessageListView renderConversation(ConversationInfo convInfo,View parent){
  MessageListView list=new MessageListView(parent.getContext());
  convInfo.view=list;
  list.setOnItemClickListener(MessageClickListener.getInstance());
  MessageListAdapter adapter=convInfo.adapter;
  if (adapter == null) {
    adapter=new MessageListAdapter(convInfo.conv,parent.getContext());
    convInfo.adapter=adapter;
  }
  list.setAdapter(adapter);
  list.setSelection(adapter.getCount() - 1);
  return list;
}

public static int defineTag(int ifdId,short tagId){
  return (tagId & 0x0000ffff) | (ifdId << 16);
}

public ApplicationIdVerifier(Set<String> supportedApplicationIds){
  this.supportedApplicationIds=Collections.unmodifiableSet(new HashSet<String>(supportedApplicationIds));
}

public QueryResponse search(Resource resource,SolrQuery query) throws SolrServerException, IOException {
  String idQuery=termQuery(SearchFields.URI_FIELD_NAME,SearchFields.getResourceID(resource));
  query.setQuery(query.getQuery() + " AND " + idQuery);
  return search(query);
}

public static LocalDate toDate(String data,String modelo){
  return LocalDate.parse(data,formatter(modelo));
}

public boolean isMutable(){
  return mutable;
}

public static final Criterion all(){
  return AllCriterion.all();
}

public static void transform(InputStream srcStream,OutputStream destStream,InputStream stylesheetStream,String outputFormat) throws FOPException {
  StreamSource src=new StreamSource(srcStream);
  StreamSource stylesheet=stylesheetStream == null ? null : new StreamSource(stylesheetStream);
  Fop fop=createFopInstance(destStream,outputFormat);
  transform(src,stylesheet,fop);
}

public boolean InsertSym(int type,String id,String context,String cType,int line,int col){
  int i;
  if (type == PROCEDUREVAR || type == PROCESSVAR || type == PARAMETER) {
    i=FindSym(GLOBAL,id,"");
    if (i < symtab.size())     return false;
    i=FindSym(id,context);
    if (i < symtab.size())     return false;
  }
 else {
    i=FindSym(type,id,context);
    if (i < symtab.size())     return false;
  }
  SymTabEntry se=new SymTabEntry(type,id,context,cType,line,col);
  symtab.addElement(se);
  return true;
}

public static Schema schemaForStructType(StructType structType){
  List<String> fieldNames=Lists.newArrayList();
  List<String> fieldTypes=Lists.newArrayList();
  for (  StructField field : structType.fields()) {
    fieldNames.add(field.name());
    DataType fieldType=field.dataType();
    if (fieldType.equals(DataTypes.StringType)) {
      fieldTypes.add("string");
    }
 else     if (fieldType.equals(DataTypes.FloatType)) {
      fieldTypes.add("float");
    }
 else     if (fieldType.equals(DataTypes.DoubleType)) {
      fieldTypes.add("double");
    }
 else     if (fieldType.equals(DataTypes.IntegerType)) {
      fieldTypes.add("int");
    }
 else     if (fieldType.equals(DataTypes.LongType)) {
      fieldTypes.add("long");
    }
 else     if (fieldType.equals(DataTypes.BooleanType)) {
      fieldTypes.add("boolean");
    }
 else {
      throw new RuntimeException("Unsupported Spark SQL field type: " + fieldType);
    }
  }
  return RecordUtils.schemaFor(fieldNames,fieldTypes);
}

public JettySolrRunner startJettySolrRunner(JettySolrRunner jetty) throws Exception {
  jetty.start(false);
  jettys.add(jetty);
  return jetty;
}

public Map<CIMObjectPath,Set<String>> findAnySLOStorageGroupsCanBeReUsed(StorageSystem forProvider,StorageSystem storage,String policyName,boolean associatedToView) throws WBEMException {
  CloseableIterator<CIMInstance> groupInstanceItr=null;
  CloseableIterator<CIMObjectPath> volumePathItr=null;
  Map<CIMObjectPath,Set<String>> groupPaths=new ConcurrentHashMap<CIMObjectPath,Set<String>>();
  try {
    CIMObjectPath controllerConfigSvcPath=_cimPath.getControllerConfigSvcPath(storage);
    _log.info("Trying to get all Storage Groups");
    groupInstanceItr=getAssociatorInstances(forProvider,controllerConfigSvcPath,null,SE_DEVICE_MASKING_GROUP,null,null,PS_V3_STORAGE_GROUP_PROPERTIES);
    while (groupInstanceItr.hasNext()) {
      CIMInstance groupInstance=groupInstanceItr.next();
      CIMObjectPath groupPath=groupInstance.getObjectPath();
      String groupName=CIMPropertyFactory.getPropertyValue(groupInstance,CP_ELEMENT_NAME);
      String fastSetting=CIMPropertyFactory.getPropertyValue(groupInstance,CP_FAST_SETTING);
      String groupAssociatedToView=CIMPropertyFactory.getPropertyValue(groupInstance,CP_ASSOCIATED_TO_VIEW);
      Set<String> returnedNativeGuids=new HashSet<String>();
      if (fastSetting.equals(policyName) && associatedToView == Boolean.parseBoolean(groupAssociatedToView) && groupName.startsWith(Constants.STORAGE_GROUP_PREFIX)) {
        _log.debug("Looping through all volumes in storage group {}",groupName);
        volumePathItr=getAssociatorNames(forProvider,groupPath,null,CIM_STORAGE_VOLUME,null,null);
        while (volumePathItr.hasNext()) {
          returnedNativeGuids.add(getVolumeNativeGuid(volumePathItr.next()));
        }
        groupPaths.put(groupPath,returnedNativeGuids);
      }
    }
  }
  finally {
    closeCIMIterator(groupInstanceItr);
    closeCIMIterator(volumePathItr);
  }
  return groupPaths;
}

Remover add(T listener);

protected void updateDamage(DocumentEvent changes,Shape a,ViewFactory f){
  checkMetrics();
  Component host=getContainer();
  Element elem=getElement();
  DocumentEvent.ElementChange ec=changes.getChange(elem);
  Element[] added=(ec != null) ? ec.getChildrenAdded() : null;
  Element[] removed=(ec != null) ? ec.getChildrenRemoved() : null;
  if (((added != null) && (added.length > 0)) || ((removed != null) && (removed.length > 0))) {
    if (added != null && longestLine != null) {
      int currentMaxWidth=getLineWidth(longestLine);
      for (int i=0; i < added.length; i++) {
        int width=getLineWidth(added[i]);
        if (width > currentMaxWidth) {
          currentMaxWidth=width;
          longestLine=added[i];
        }
      }
    }
    if (removed != null) {
      for (int i=0; i < removed.length; i++) {
        if (removed[i] == longestLine) {
          longestLine=null;
          break;
        }
      }
    }
    preferenceChanged(null,true,true);
    host.repaint();
  }
 else {
    Element map=getElement();
    int line=map.getElementIndex(changes.getOffset());
    int endLine=map.getElementIndex(changes.getOffset() + changes.getLength());
    damageLineRange(line,endLine,a,host);
    getLongestLine();
    if (changes.getType() == DocumentEvent.EventType.INSERT) {
      int w=getLineWidth(longestLine);
      Element e=map.getElement(line);
      if (e == longestLine) {
        preferenceChanged(null,true,false);
      }
 else       if (getLineWidth(e) > w) {
        longestLine=e;
        preferenceChanged(null,true,false);
      }
    }
 else     if (changes.getType() == DocumentEvent.EventType.REMOVE) {
      if (map.getElement(line) == longestLine) {
        determineLongestLine();
        preferenceChanged(null,true,false);
      }
    }
  }
}

public JClassDependency(JClass cl,String digest){
  _className=cl.getName();
  String newDigest=getDigest();
  if (!newDigest.equals(digest)) {
    if (log.isLoggable(Level.FINE))     log.fine(_className + " digest is modified.");
    _isDigestModified=true;
  }
}

public void dump(Object data,Writer output){
  List<Object> list=new ArrayList<Object>(1);
  list.add(data);
  dumpAll(list.iterator(),output,null);
}

public void clear(){
  final ReentrantLock lock=this.lock;
  lock.lock();
  try {
    Object[] array=queue;
    int n=size;
    size=0;
    for (int i=0; i < n; i++)     array[i]=null;
  }
  finally {
    lock.unlock();
  }
}

public void reset(){
  System.arraycopy(IV,0,cbcV,0,IV.length);
  Arrays.fill(cbcNextV,(byte)0);
  cipher.reset();
}

public void addInsnToHead(Insn insn){
  SsaInsn newInsn=SsaInsn.makeFromRop(insn,this);
  insns.add(getCountPhiInsns(),newInsn);
  parent.onInsnAdded(newInsn);
}

public static String encodeForURL(String str){
  StringBuffer result=new StringBuffer();
  for (int i=0; i < str.length(); i++) {
    char ch=str.charAt(i);
    if (ch >= 'A' && ch <= 'Z' || ch >= 'a' && ch <= 'z' || ch >= '0' && ch <= '9')     result.append(ch);
 else {
switch (ch) {
case '-':
case '_':
case '.':
case '!':
case '~':
case '*':
case '\'':
case '(':
case ')':
        result.append(ch);
      break;
default :
    result.append('%');
  result.append(hexchars[(ch & 0xf0) >> 4]);
result.append(hexchars[ch & 0x0f]);
break;
}
}
}
return result.toString();
}

public void selectObject(MultiTouchObject multiTouchObject,PointInfo touchPoint){
  currTouchPoint.set(touchPoint);
  if (multiTouchObject != null) {
    mImages.remove(multiTouchObject);
    mImages.add(multiTouchObject);
    if (listener != null) {
      listener.onImageObjectSelected(multiTouchObject);
    }
  }
 else {
    if (listener != null) {
      listener.onImageObjectDropped();
    }
  }
  invalidate();
}

void verify(){
  byte[] d=digest.digest();
  if (!MessageDigest.isEqual(d,Base64.decode(hash,Base64.DEFAULT))) {
    throw invalidDigest(JarFile.MANIFEST_NAME,name,jarName);
  }
  verifiedEntries.put(name,certificates);
}

public void randomizeIncomingWeights(){
  for (  Neuron n : getNeuronList()) {
    for (    Synapse s : n.getFanIn()) {
      s.setLowerBound(0);
      s.setStrength(s.getUpperBound() * Math.random());
    }
  }
}

public void remove(QueueEvent event) throws KeeperException, InterruptedException {
  TimerContext time=stats.time(dir + "_remove_event");
  try {
    String path=event.getId();
    String responsePath=dir + "/" + response_prefix+ path.substring(path.lastIndexOf("-") + 1);
    if (zookeeper.exists(responsePath,true)) {
      zookeeper.setData(responsePath,event.getBytes(),true);
    }
 else {
      LOG.info("Response ZK path: " + responsePath + " doesn't exist."+ "  Requestor may have disconnected from ZooKeeper");
    }
    try {
      zookeeper.delete(path,-1,true);
    }
 catch (    KeeperException.NoNodeException ignored) {
    }
  }
  finally {
    time.stop();
  }
}

public List<Point> readPoints(String shapefile){
  List<Point> list=new ArrayList<Point>();
  for (  SimpleFeature feature : ShapeFileReader.getAllFeatures(shapefile)) {
    Geometry geo=(Geometry)feature.getDefaultGeometry();
    if (geo instanceof Point) {
      Point ps=(Point)geo;
      for (int i=0; i < ps.getNumGeometries(); i++) {
        Point p=(Point)ps.getGeometryN(i);
        list.add(p);
      }
    }
 else {
      throw new RuntimeException("The shapefile does not contain Point(s)!");
    }
  }
  return list;
}

public String rate(Properties ctx,int WindowNo,GridTab mTab,GridField mField,Object value){
  if (value == null)   return "";
  Integer Currency_ID=(Integer)mTab.getValue("C_Currency_ID");
  int C_Currency_ID=Currency_ID.intValue();
  Integer ConversionType_ID=(Integer)mTab.getValue("C_ConversionType_ID");
  int C_ConversionType_ID=ConversionType_ID.intValue();
  Timestamp DateAcct=(Timestamp)mTab.getValue("DateAcct");
  if (DateAcct == null)   DateAcct=new Timestamp(System.currentTimeMillis());
  int C_AcctSchema_ID=Env.getContextAsInt(ctx,WindowNo,"C_AcctSchema_ID");
  MAcctSchema as=MAcctSchema.get(ctx,C_AcctSchema_ID);
  int AD_Client_ID=Env.getContextAsInt(ctx,WindowNo,"AD_Client_ID");
  int AD_Org_ID=Env.getContextAsInt(ctx,WindowNo,"AD_Org_ID");
  BigDecimal CurrencyRate=MConversionRate.getRate(C_Currency_ID,as.getC_Currency_ID(),DateAcct,C_ConversionType_ID,AD_Client_ID,AD_Org_ID);
  log.fine("rate = " + CurrencyRate);
  if (CurrencyRate == null)   CurrencyRate=Env.ZERO;
  mTab.setValue("CurrencyRate",CurrencyRate);
  return "";
}

public boolean hasAlphaChangedFrom(float v){
  return (Float.compare(alpha,v) != 0);
}

public CompletableFuture<Void> destroy(){
  CompletableFuture<Void> ret;
  if (controllerProxy != null) {
    ret=controllerProxy.destroy();
    controllerProxy=null;
  }
 else {
    ret=new CompletableFuture<>();
    ret.complete(null);
  }
  return ret;
}

@Override public Request<String> logs(ProjectReference projectReference,long taskId){
  List<DummyRunnerStatus> statuses=availableRunnerStatuses.get(projectReference.name());
  if (statuses != null && !statuses.isEmpty()) {
    for (    DummyRunnerStatus runnerStatus : statuses) {
      if (taskId == runnerStatus.processId()) {
        return new DummyRequest<>(runnerStatus.getLog());
      }
    }
  }
  return new DummyRequest<>(null);
}

protected static ActionResultInfo performAction(GenericValue productPromoAction,ShoppingCart cart,Delegator delegator,LocalDispatcher dispatcher,Timestamp nowTimestamp) throws GenericEntityException, CartItemModifyException {
  ActionResultInfo actionResultInfo=new ActionResultInfo();
  performAction(actionResultInfo,productPromoAction,cart,delegator,dispatcher,nowTimestamp);
  return actionResultInfo;
}

private boolean containsExpression(String toSearch,String expression){
  if (toSearch == null) {
    return false;
  }
  return toSearch.equals(expression) || toSearch.indexOf(expression) >= 0;
}

public void clearListeners(){
  listeners.clear();
}

private Var addProperty(VarProperty property){
  if (property.isUnique()) {
    testUniqueProperty((UniqueVarProperty)property);
  }
  properties.add(property);
  return this;
}

public boolean isOpen(){
  return open.get();
}

public void free(long pos,int length){
  int start=getBlock(pos);
  int blocks=getBlockCount(length);
  set.clear(start,start + blocks);
}

private void onConnectionStatusChanged(int oldStatus,int status){
  if (sSettingsMgr.showStatusIcon) {
    NotificationCompat.Builder builder=new NotificationCompat.Builder(this);
    builder.setWhen(System.currentTimeMillis());
switch (status) {
case XmppManager.CONNECTED:
      builder.setContentText(getString(R.string.main_service_connected,getConnectionStatusAction()));
    builder.setSmallIcon(getImageStatus(STATUS_ICON_GREEN));
  break;
case XmppManager.CONNECTING:
builder.setContentText(getString(R.string.main_service_connecting));
builder.setSmallIcon(getImageStatus(STATUS_ICON_ORANGE));
break;
case XmppManager.DISCONNECTED:
builder.setContentText(getString(R.string.main_service_disconnected));
builder.setSmallIcon(getImageStatus(STATUS_ICON_RED));
break;
case XmppManager.DISCONNECTING:
builder.setContentText(getString(R.string.main_service_disconnecting));
builder.setSmallIcon(getImageStatus(STATUS_ICON_ORANGE));
break;
case XmppManager.WAITING_TO_CONNECT:
case XmppManager.WAITING_FOR_NETWORK:
builder.setContentText(getString(R.string.main_service_waiting_to_connect) + "\n" + getConnectionStatusAction());
builder.setSmallIcon(getImageStatus(STATUS_ICON_BLUE));
break;
default :
return;
}
builder.setContentIntent(sPendingIntentLaunchApplication);
builder.setContentTitle(Tools.APP_NAME);
startForeground(NOTIFICATION_CONNECTION,builder.getNotification());
}
}

private static File findGuacamoleHome(){
  File guacHome;
  String desiredDir=System.getProperty("guacamole.home");
  if (desiredDir == null)   desiredDir=System.getenv("GUACAMOLE_HOME");
  if (desiredDir != null)   guacHome=new File(desiredDir);
 else   guacHome=new File(System.getProperty("user.home"),".guacamole");
  return guacHome;
}

void waitForServerStart() throws InterruptedException {
  started.await(getTestTimeout(),TimeUnit.MILLISECONDS);
}

private static void drawLeftTab(int x,int y,int w,int h,Graphics2D g2,ColorUIResource color){
  double rTop=RapidLookAndFeel.CORNER_TAB_RADIUS * 0.67;
  g2.setColor(color);
  g2.fill(createLeftTabShape(x + 1,y + 1,w - 1,h,rTop,true));
  g2.setColor(Colors.TAB_BORDER);
  g2.draw(createLeftTabShape(x,y,w - 1,h,rTop,false));
}

private List<int[]> prepareExpectedData(){
  List<int[]> indexList=new ArrayList<>(2);
  int[] sortIndex={0,3,2,4,1};
  int[] sortIndexInverted={0,2,4,1,2};
  indexList.add(0,sortIndex);
  indexList.add(1,sortIndexInverted);
  return indexList;
}

public byte[] readBytes(final int count){
  int bytesToRead=count;
  if (bytesToRead < 0)   bytesToRead=byteStream.available();
  byte[] bytes=new byte[bytesToRead];
  if (currentBitIndex >= 0) {
    for (int i=0; i < bytesToRead; i++) {
      bytes[i]=(byte)read(Byte.SIZE);
    }
  }
 else {
    byteStream.read(bytes,0,bytes.length);
  }
  return bytes;
}

public SSLTestConfig(){
  this(false,false);
}

@Override public int hashCode(){
  return 0x45aaf665 + Arrays.hashCode(fields);
}

public static String formatPath(List<ChildNumber> path){
  return PATH_JOINER.join(Iterables.concat(Collections.singleton("M"),path));
}

private void writeAttribute(java.lang.String prefix,java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (xmlWriter.getPrefix(namespace) == null) {
    xmlWriter.writeNamespace(prefix,namespace);
    xmlWriter.setPrefix(prefix,namespace);
  }
  xmlWriter.writeAttribute(namespace,attName,attValue);
}

public static Object readInvocationResult(PlatformContext ctx,BinaryRawReaderEx reader) throws IgniteCheckedException {
  boolean success=reader.readBoolean();
  if (success)   return reader.readObjectDetached();
 else {
    boolean hasException=reader.readBoolean();
    if (hasException) {
      Object nativeErr=reader.readObjectDetached();
      assert nativeErr != null;
      throw ctx.createNativeException(nativeErr);
    }
 else {
      String errMsg=reader.readString();
      assert errMsg != null;
      throw new IgniteCheckedException(errMsg);
    }
  }
}

public final void testGenerateSeedint02(){
  for (int i=0; i < LENGTH; i++) {
    byte[] myBytes=sr.generateSeed(i);
    assertFalse("unexpected: myBytes.length != i  :: i==" + i + " myBytes.length="+ myBytes.length,myBytes.length != i);
  }
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return STRING_THING;
case 4:
  return BYTE_THING;
case 9:
return I32_THING;
case 11:
return I64_THING;
default :
return null;
}
}

private List<String> replaceDotInMustacheKeys(final List<String> mustacheKeys){
  final List<String> fixedMustacheKeys=new ArrayList<>();
  for (  String mustacheKey : mustacheKeys) {
    fixedMustacheKeys.add(mustacheKey.replace('.','#'));
  }
  return fixedMustacheKeys;
}

public static IFitsHeader create(String key){
  IFitsHeader result=STANDARD_KEYS.get(key);
  if (result == null) {
    result=new FitsHeaderImpl(key,SOURCE.UNKNOWN,HDU.ANY,VALUE.ANY,"");
  }
  return result;
}

protected String parsePayload(String payload){
  String json=null;
  if (payload != null) {
    try {
      json=(payload.indexOf("{") == -1) ? new String(Files.readAllBytes(Paths.get(payload))) : payload;
    }
 catch (    IOException e) {
      log.fatal("Error in parsing payload: " + payload,e);
      System.exit(1);
    }
  }
  return json;
}

boolean addEntry(PolicyEntry pe,int index){
  if (index < 0) {
    policyEntries.addElement(pe);
    parser.add(pe.getGrantEntry());
  }
 else {
    PolicyEntry origPe=policyEntries.elementAt(index);
    parser.replace(origPe.getGrantEntry(),pe.getGrantEntry());
    policyEntries.setElementAt(pe,index);
  }
  return true;
}

public WritableRaster createCompatibleWritableRaster(int w,int h){
  if (w <= 0 || h <= 0) {
    throw new RasterFormatException("negative " + ((w <= 0) ? "width" : "height"));
  }
  SampleModel sm=sampleModel.createCompatibleSampleModel(w,h);
  return new IntegerComponentRaster(sm,new Point(0,0));
}

public void testCase1(){
  byte aBytes[]={10,20,30,40,50,60,70,10,20,30};
  byte bBytes[]={1,2,3,4,5,6,7,1,2,3};
  int aSign=1;
  int bSign=1;
  byte rBytes[]={9,18,27,36,45,54,63,9,18,27};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.subtract(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals(1,result.signum());
}

public static void createOrClearDestinationFolder(String path){
  File fpath=new File(path);
  fpath.mkdirs();
  deleteDirectoryContents(path,false);
}

static synchronized JmriUserInterfaceConfigurationProvider findProvider(Profile project){
  if (providers.get(project) == null) {
    providers.put(project,new JmriUserInterfaceConfigurationProvider(project));
  }
  return providers.get(project);
}

protected static long[] insert(long[] old,int oldSize,int pos,long x){
  long[] result;
  if (old != null && old.length > oldSize) {
    result=old;
  }
 else {
    result=new long[oldSize + 1 + COPY_THRESHOLD];
    if (pos > 0) {
      System.arraycopy(old,0,result,0,pos);
    }
  }
  if (old != null && oldSize - pos > 0) {
    System.arraycopy(old,pos,result,pos + 1,oldSize - pos);
  }
  result[pos]=x;
  return result;
}

private void registerObjectRead(Object obj,int handle,boolean unshared) throws IOException {
  if (unshared) {
    obj=UNSHARED_OBJ;
  }
  int index=handle - ObjectStreamConstants.baseWireHandle;
  int size=objectsRead.size();
  while (index > size) {
    objectsRead.add(null);
    ++size;
  }
  if (index == size) {
    objectsRead.add(obj);
  }
 else {
    objectsRead.set(index,obj);
  }
}

private boolean discardUpstreamMediaChunks(int queueLength){
  if (mediaChunks.size() <= queueLength) {
    return false;
  }
  long startTimeUs=0;
  long endTimeUs=mediaChunks.getLast().endTimeUs;
  BaseMediaChunk removed=null;
  while (mediaChunks.size() > queueLength) {
    removed=mediaChunks.removeLast();
    startTimeUs=removed.startTimeUs;
    loadingFinished=false;
  }
  sampleQueue.discardUpstreamSamples(removed.getFirstSampleIndex());
  notifyUpstreamDiscarded(startTimeUs,endTimeUs);
  return true;
}

public void close(){
  animation.setRate(-1);
  animation.play();
  animation.setOnFinished(null);
}

Map<String,Set<CallLocationModel>> computeFilteredTaintSourcesMap(Set<CallLocationModel> sources){
  if (!sources.isEmpty()) {
    if (fFilteredTaintSourcesMap != null && !fFilteredTaintSourcesMap.isEmpty()) {
      Map<String,Set<CallLocationModel>> result=new TreeMap<String,Set<CallLocationModel>>();
      for (      Entry<String,Set<CallLocationModel>> entry : fFilteredTaintSourcesMap.entrySet()) {
        Set<CallLocationModel> filteredSources=new TreeSet<CallLocationModel>();
        for (        CallLocationModel source : entry.getValue()) {
          if (sources.contains(source)) {
            filteredSources.add(source);
          }
        }
        if (!filteredSources.isEmpty()) {
          String taintKind=entry.getKey();
          result.put(taintKind,filteredSources);
        }
      }
      return result;
    }
  }
  return Collections.EMPTY_MAP;
}

public static boolean contains(String s,Property expected){
  if (s == null || s.length() == 0) {
    return false;
  }
  int i=0;
  while (i < s.length()) {
    int codepoint=Character.codePointAt(s,i);
    Emoji e=map.get(codepoint);
    if (e == null) {
      return false;
    }
    if (!e.is(expected)) {
      return false;
    }
    i+=codepoint >= 0x010000 ? 2 : 1;
  }
  return true;
}

public Class toClass(String codebase) throws IOException, ClassNotFoundException {
  if (name.charAt(0) != ';') {
    return ClassLoading.loadClass(codebase,name,null,integrity,null);
  }
  StringTokenizer st=new StringTokenizer(name,";");
  String[] ifs=new String[st.countTokens()];
  for (int i=0; i < ifs.length; i++) {
    ifs[i]=st.nextToken();
  }
  return ClassLoading.loadProxyClass(codebase,ifs,null,integrity,null);
}

private synchronized IMqttToken removeMqttToken(Bundle data){
  String activityToken=data.getString(MqttServiceConstants.CALLBACK_ACTIVITY_TOKEN);
  if (activityToken != null) {
    int tokenNumber=Integer.parseInt(activityToken);
    IMqttToken token=tokenMap.get(tokenNumber);
    tokenMap.delete(tokenNumber);
    return token;
  }
  return null;
}

public static <T>Optional<T> lowestCommonAncestor(TreeDef.Parented<T> treeDef,List<T> nodes){
  if (nodes.size() == 0) {
    return Optional.empty();
  }
 else {
    Optional<T> soFar=Optional.of(nodes.get(0));
    for (int i=1; i < nodes.size() && soFar.isPresent(); ++i) {
      soFar=lowestCommonAncestor(treeDef,soFar.get(),nodes.get(i));
    }
    return soFar;
  }
}

public void copyValueNodesToMe(Entity from){
  for (  ValueNode fromChild : from.getChildren(ValueNode.class)) {
    ValueNode toChild=getChild(fromChild.getName(),ValueNode.class);
    toChild.setValue(fromChild.getValue());
  }
}

public static WorldIconImage fromPixelTransparency(BufferedImage image){
  int imageMarginTop=findFirstSolidPixelFromTop(image);
  int imageMarginBottom=findFirstSolidPixelFromBottom(image);
  int frameHeight=Math.max(0,image.getHeight() - imageMarginTop - imageMarginBottom);
  return new WorldIconImage(image,0,imageMarginTop,image.getWidth(),frameHeight);
}

private Map<String,String> checkVipDiff(PropertyInfoExt localProps,PropertyInfoRestRep rep){
  String vipAddrV4=rep.getProperty("network_vip");
  String vipAddrV6=rep.getProperty("network_vip6");
  Map<String,String> diffProps=new HashMap<String,String>();
  if (!vipAddrV4.equals(localProps.getProperty("network_vip"))) {
    diffProps.put("network_vip",vipAddrV4);
    _log.warn("Detected changed vip. remote vip: {}, local repo vip: {}",vipAddrV4,localProps.getProperty("network_vip"));
  }
  if (!vipAddrV6.equals(localProps.getProperty("network_vip6"))) {
    diffProps.put("network_vip6",vipAddrV6);
    _log.warn("Detected changed vip. remote vip: {}, local repo vip: {}",vipAddrV6,localProps.getProperty("network_vip6"));
  }
  return diffProps;
}

private static double distanceSq(Color a,Color b){
  double rMean=(a.getRed() + b.getRed()) / 256.0 / 2.0;
  double dr=(a.getRed() - b.getRed()) / 256.0;
  double dg=(a.getGreen() - b.getGreen()) / 256.0;
  double db=(a.getBlue() - b.getBlue()) / 256.0;
  double d=(2.0 + rMean) * dr * dr + 4.0 * dg * dg + (2.0 + 1.0 - rMean) * db * db;
  return d / 9.0;
}

@Override public boolean eIsSet(int featureID){
switch (featureID) {
case SGraphPackage.SPECIFICATION_ELEMENT__SPECIFICATION:
    return SPECIFICATION_EDEFAULT == null ? specification != null : !SPECIFICATION_EDEFAULT.equals(specification);
}
return super.eIsSet(featureID);
}

private static ApplicationType newType(final String name) throws IllegalAccessException, InstantiationException {
  return new ApplicationType(name,new HashMap<String,Boolean>(TYPE_ACTIONS),DumbSearchIndex.class,DumbSaveIndex.class,DumbResourceName.class);
}

private void readObject(ObjectInputStream s) throws IOException, ClassNotFoundException {
  s.defaultReadObject();
  if (bayesIm == null) {
    throw new NullPointerException();
  }
}

public int compare(SourceFile o1,SourceFile o2){
  String n1=o1.getName();
  String n2=o2.getName();
  return n1.compareTo(n2);
}

protected boolean processDynamicPropertyNodes(Node parent,DynamicProperty property,Model model){
  Collection nodes=parent.getChildren();
  String name=property.getName();
  String state=property.getStateName();
  CDATANode cdata=getTextContent(nodes,true);
  if (cdata != null) {
    return processDynamicPropertyText(name,cdata.image,TextOrigin.fromChild(cdata.inCDATA),cdata.beginLine,model,state);
  }
 else {
    if ((state == null) && model.hasProperty(name)) {
      log(parent,new MultiplePropertyInitializerError(name));
    }
    Object rvalue=processRValueNodes(property,nodes,model);
    if (rvalue != null) {
      model.setDynamicProperty(typeTable.objectType,name,rvalue,state,parent.beginLine);
      return true;
    }
 else {
      return false;
    }
  }
}

private static <T extends PsiElement>boolean processChildrenOfType(PsiElement element,Processor<T> processor,Class<T> psiClass,boolean reverseOrder){
  PsiElement child=reverseOrder ? element.getLastChild() : element.getFirstChild();
  while (child != null) {
    if (psiClass.isInstance(child)) {
      if (!processor.process((T)child)) {
        return true;
      }
    }
    if (processChildrenOfType(child,processor,psiClass,reverseOrder)) {
      return true;
    }
    child=reverseOrder ? child.getPrevSibling() : child.getNextSibling();
  }
  return false;
}

public Instances generate() throws Exception {
  return generate("");
}

protected void loadChars(AbstractMRReply msg,DataInputStream istream) throws IOException {
  int i;
  for (i=0; i < msg.maxSize(); i++) {
    byte char1=readByteProtected(istream);
    if (flushReceiveChars) {
      log.warn("timeout flushes receive buffer: {}",msg.toString());
      msg.flush();
      i=0;
      flushReceiveChars=false;
    }
    if (canReceive()) {
      msg.setElement(i,char1);
      if (endOfMessage(msg)) {
        break;
      }
    }
 else {
      i--;
      log.error("unsolicited character received: {}",Integer.toHexString(char1));
    }
  }
}

public String evaluate(Associator associator,Instances data) throws Exception {
  long startTime;
  long endTime;
  startTime=System.currentTimeMillis();
  associator.buildAssociations(data);
  endTime=System.currentTimeMillis();
  m_Result=new StringBuffer(associator.toString());
  m_Result.append("\n=== Evaluation ===\n\n");
  m_Result.append("Elapsed time: " + (((double)(endTime - startTime)) / 1000) + "s");
  m_Result.append("\n");
  return m_Result.toString();
}

public static Integer intValue(String propName,Integer dflt){
  String sysProp=getProperty(propName);
  return (sysProp != null && !sysProp.isEmpty()) ? Integer.getInteger(sysProp) : dflt;
}

public NSNumber(int i){
  doubleValue=longValue=i;
  type=INTEGER;
}

private int clampMag(int value,int absMin,int absMax){
  final int absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

private int compareVersionParts(String version1,String version2){
  int compare=0;
  Integer v1;
  Integer v2;
  try {
    v1=version1 != null ? Integer.parseInt(version1) : 0;
  }
 catch (  NumberFormatException e) {
    v1=0;
  }
  try {
    v2=version2 != null ? Integer.parseInt(version2) : 0;
  }
 catch (  NumberFormatException e) {
    v2=0;
  }
  if (v1 > v2) {
    compare=1;
  }
 else   if (v1 < v2) {
    compare=-1;
  }
 else {
    compare=0;
  }
  return compare;
}

public void preSaveInit(){
  persistentData.clear();
  for (int i=0; i < getNumPoints(); i++) {
    persistentData.add(getPoint(i));
  }
}

public void essential(final Consumer<OnComplete> fn){
  this.essential=fn;
  if (done) {
    fn.accept(buildOnComplete());
  }
}

public void addListener(IMessageListener newListener){
synchronized (listeners) {
    listeners.add(newListener);
  }
}

public void testGetType(){
  assertEquals("The type of X509CRL should be X.509",tbt_crl.getType(),"X.509");
}

public void addWords(String phrase){
  if (phrase.equals("#") || phrase.equals(""))   return;
  String[] words=spliterator(phrase);
  if (words.length < 2)   return;
  for (int i=0; i < words.length; i++) {
    if (i == 0) {
      Vector<String> startWords=chain.get("_start");
      startWords.add(words[i]);
      Vector<String> suffix=chain.get(words[i]);
      if (suffix == null) {
        suffix=new Vector<>();
        suffix.add(words[i + 1]);
        chain.put(words[i],suffix);
      }
    }
 else     if (i == words.length - 1) {
      Vector<String> endWords=chain.get("_end");
      endWords.add(words[i]);
    }
 else {
      Vector<String> suffix=chain.get(words[i]);
      if (suffix == null) {
        suffix=new Vector<>();
        suffix.add(words[i + 1]);
        chain.put(words[i],suffix);
      }
 else {
        suffix.add(words[i + 1]);
        chain.put(words[i],suffix);
      }
    }
  }
}

@HLEUnimplemented @HLEFunction(nid=0xEC19337D,version=150) public int sceNetAdhocMatchingAbortSendData(@CheckArgument("checkMatchingId") int matchingId,pspNetMacAddress macAddress){
  return 0;
}

public ShortBuffer put(short[] src,int srcOffset,int shortCount){
  Arrays.checkOffsetAndCount(src.length,srcOffset,shortCount);
  if (shortCount > remaining()) {
    throw new BufferOverflowException();
  }
  for (int i=srcOffset; i < srcOffset + shortCount; ++i) {
    put(src[i]);
  }
  return this;
}

public boolean handleDirectory(File directory){
  if (DEBUG) {
    logger.fine("skipping: " + directory.getAbsolutePath());
  }
  return true;
}

public static void choose(int n,int[] results){
  int k=results.length;
  for (int i=0; i < k; i++) {
    boolean done=false;
    while (!done) {
      results[i]=RANDOM.nextInt(n);
      done=true;
      for (int j=0; j < i; j++) {
        if (results[j] == results[i]) {
          done=false;
        }
      }
    }
  }
}

public String printLeafModelsTipText(){
  return "Print leaf models (naive bayes leaves only)";
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String childValue;
  int childLength;
  doc=(Document)load("hc_staff",false);
  elementList=doc.getElementsByTagName("strong");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
  childValue=child.getData();
  childLength=childValue.length();
  assertEquals("characterdataGetLengthAssert",15,childLength);
}

public Set registerClientInterestList(Object inputClientID,List keys,boolean updatesAsInvalidates){
  Long clientID=getClientIDForMaps(inputClientID);
  Set keysRegistered=new HashSet(keys);
synchronized (interestListLock) {
    Map<Object,Set> koi=updatesAsInvalidates ? getKeysOfInterestInv() : getKeysOfInterest();
    CopyOnWriteHashSet interestList=(CopyOnWriteHashSet)koi.get(clientID);
    if (interestList == null) {
      interestList=new CopyOnWriteHashSet();
      koi.put(clientID,interestList);
    }
 else {
      keysRegistered.removeAll(interestList.getSnapshot());
    }
    interestList.addAll(keys);
    if (this.region != null && this.isLocalProfile) {
      sendProfileOperation(clientID,operationType.REGISTER_KEYS,keys,updatesAsInvalidates);
    }
  }
  return keysRegistered;
}

public static String replace(String inString,String oldPattern,String newPattern){
  if (!hasLength(inString) || !hasLength(oldPattern) || newPattern == null) {
    return inString;
  }
  StringBuilder sb=new StringBuilder();
  int pos=0;
  int index=inString.indexOf(oldPattern);
  int patLen=oldPattern.length();
  while (index >= 0) {
    sb.append(inString.substring(pos,index));
    sb.append(newPattern);
    pos=index + patLen;
    index=inString.indexOf(oldPattern,pos);
  }
  sb.append(inString.substring(pos));
  return sb.toString();
}

public static List<String> toPathParts(String encodedPath){
  if (encodedPath == null || encodedPath.length() == 0) {
    return null;
  }
  List<String> result=new ArrayList<String>();
  int cur=0;
  boolean notDone=true;
  while (notDone) {
    int slash=encodedPath.indexOf('/',cur);
    notDone=slash != -1;
    String sub;
    if (notDone) {
      sub=encodedPath.substring(cur,slash);
    }
 else {
      sub=encodedPath.substring(cur);
    }
    result.add(CharEscapers.decodeUri(sub));
    cur=slash + 1;
  }
  return result;
}

@SuppressWarnings("unchecked") public <T extends Point2D>T inverse(double x,double y,T ret_val){
  if (ret_val == null) {
    ret_val=(T)new LatLonPoint.Double();
  }
  double px=x + ul.x;
  double py=-y + ul.y + oy;
  if (px > ProjMath.roundAdjust(world.x / 2.0)) {
    px=ProjMath.roundAdjust(world.x / 2.0);
  }
 else   if (px < ProjMath.roundAdjust(-world.x / 2.0)) {
    px=ProjMath.roundAdjust(-world.x / 2.0);
  }
  if (py > ProjMath.roundAdjust(world.y / 2.0)) {
    py=ProjMath.roundAdjust(world.y / 2.0);
  }
 else   if (py < ProjMath.roundAdjust(-world.y / 2.0)) {
    py=ProjMath.roundAdjust(-world.y / 2.0);
  }
  double lat_=normalizeLatitude(py / spps_y);
  double lon_=wrapLongitude((px / spps_x) + centerX);
  ret_val.setLocation(Math.toDegrees(lon_),Math.toDegrees(lat_));
  return ret_val;
}

public void install(JEditorPane c){
  c.addCaretListener(inputAttributeUpdater);
  c.addPropertyChangeListener(inputAttributeUpdater);
  Caret caret=c.getCaret();
  if (caret != null) {
    inputAttributeUpdater.updateInputAttributes(caret.getDot(),caret.getMark(),c);
  }
}

static public MPrintFormat createFromReportView(Properties ctx,int AD_ReportView_ID,String ReportName){
  int AD_Client_ID=Env.getAD_Client_ID(ctx);
  s_log.info("AD_ReportView_ID=" + AD_ReportView_ID + " - AD_Client_ID="+ AD_Client_ID+ " - "+ ReportName);
  MPrintFormat pf=new MPrintFormat(ctx,0,null);
  pf.setAD_ReportView_ID(AD_ReportView_ID);
  String sql="SELECT t.TableName," + " (SELECT COUNT(*) FROM AD_PrintFormat x WHERE x.AD_ReportView_ID=rv.AD_ReportView_ID AND x.AD_Client_ID=c.AD_Client_ID) AS Count," + " COALESCE (cpc.AD_PrintColor_ID, pc.AD_PrintColor_ID) AS AD_PrintColor_ID,"+ " COALESCE (cpf.AD_PrintFont_ID, pf.AD_PrintFont_ID) AS AD_PrintFont_ID,"+ " COALESCE (cpp.AD_PrintPaper_ID, pp.AD_PrintPaper_ID) AS AD_PrintPaper_ID,"+ " t.AD_Table_ID "+ "FROM AD_ReportView rv"+ " INNER JOIN AD_Table t ON (rv.AD_Table_ID=t.AD_Table_ID),"+ " AD_Client c"+ " LEFT OUTER JOIN AD_PrintColor cpc ON (cpc.AD_Client_ID=c.AD_Client_ID AND cpc.IsDefault='Y')"+ " LEFT OUTER JOIN AD_PrintFont cpf ON (cpf.AD_Client_ID=c.AD_Client_ID AND cpf.IsDefault='Y')"+ " LEFT OUTER JOIN AD_PrintPaper cpp ON (cpp.AD_Client_ID=c.AD_Client_ID AND cpp.IsDefault='Y'),"+ " AD_PrintColor pc, AD_PrintFont pf, AD_PrintPaper pp "+ "WHERE rv.AD_ReportView_ID=? AND c.AD_Client_ID=?"+ " AND pc.IsDefault='Y' AND pf.IsDefault='Y' AND pp.IsDefault='Y'";
  PreparedStatement pstmt=null;
  ResultSet rs=null;
  boolean error=true;
  try {
    pstmt=DB.prepareStatement(sql,null);
    pstmt.setInt(1,AD_ReportView_ID);
    pstmt.setInt(2,AD_Client_ID);
    rs=pstmt.executeQuery();
    if (rs.next()) {
      String name=ReportName;
      if (name == null || name.length() == 0)       name=rs.getString(1);
      int count=rs.getInt(2);
      if (count > 0)       name+="_" + count;
      pf.setName(name);
      pf.setAD_PrintColor_ID(rs.getInt(3));
      pf.setAD_PrintFont_ID(rs.getInt(4));
      pf.setAD_PrintPaper_ID(rs.getInt(5));
      pf.setAD_Table_ID(rs.getInt(6));
      error=false;
    }
 else     s_log.log(Level.SEVERE,"Not found: AD_ReportView_ID=" + AD_ReportView_ID);
  }
 catch (  SQLException e) {
    s_log.log(Level.SEVERE,sql,e);
  }
 finally {
    DB.close(rs,pstmt);
    rs=null;
    pstmt=null;
  }
  if (error)   return null;
  if (!pf.save())   return null;
  pf.setItems(createItems(ctx,pf));
  return pf;
}

private boolean compareAndIncrementWorkerCount(int expect){
  return ctl.compareAndSet(expect,expect + 1);
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> result=new Vector<Option>();
  Enumeration<Option> enm=super.listOptions();
  while (enm.hasMoreElements())   result.add(enm.nextElement());
  result.addElement(new Option("\t" + stopwordsTipText() + "\n"+ "\t(default: .)","stopwords",1,"-stopwords <file>"));
  return result.elements();
}

private void enableOperationButtons(){
  btnOr.setEnabled(true);
  btnAnd.setEnabled(true);
  btnRightParen.setEnabled(true);
}

private double computeModifierUnbounded(final double x){
  return expMultiplier * Math.exp(-x * x / expMember);
}

@Override public boolean onUnit(Graphics g,int x,int y,int w,int h){
  FontMetrics fm=g.getFontMetrics();
  int l=(int)(m_x * w) - fm.stringWidth(m_id) / 2;
  int t=(int)(m_y * h) - fm.getHeight() / 2;
  if (x < l || x > l + fm.stringWidth(m_id) + 4 || y < t || y > t + fm.getHeight() + fm.getDescent()+ 4) {
    return false;
  }
  return true;
}

public static Integer toInteger(String str){
  try {
    return Integer.valueOf(str);
  }
 catch (  Exception ex) {
    return null;
  }
}

private static void fillWithEmptyRows(DataTable data,int count){
  while (data.getRowCount() < count) {
    Double[] emptyRow=new Double[data.getColumnCount()];
    Arrays.fill(emptyRow,0.0);
    data.add(emptyRow);
  }
}

public void testDivisionKnuth1(){
  byte aBytes[]={-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7};
  byte bBytes[]={-3,-3,-3,-3};
  int aSign=1;
  int bSign=1;
  byte rBytes[]={0,-5,-12,-33,-96,-36,-105,-56,92,15,48,-109};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.divide(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public FragmentedHandshakeMessage(byte[] fragmentedBytes,HandshakeType type,int fragmentOffset,int messageLength,InetSocketAddress peerAddress){
  super(peerAddress);
  this.type=type;
  this.messageLength=messageLength;
  this.fragmentedBytes=Arrays.copyOf(fragmentedBytes,fragmentedBytes.length);
  setFragmentOffset(fragmentOffset);
  setFragmentLength(fragmentedBytes.length);
}

private static void deleteRetryCounter(WeakReference<Context> weakContext,String filename,int maxRetryAttempts){
  Context context=null;
  if (weakContext != null) {
    context=weakContext.get();
    if (context != null) {
      SharedPreferences preferences=context.getSharedPreferences(ARTISAN_SDK,Context.MODE_PRIVATE);
      SharedPreferences.Editor editor=preferences.edit();
      editor.remove("RETRY_COUNT: " + filename);
      editor.apply();
    }
  }
}

private void initializeSparseSlider(){
  connectionDensitySlider.setMajorTickSpacing(10);
  connectionDensitySlider.setMinorTickSpacing(2);
  connectionDensitySlider.setPaintTicks(true);
  Hashtable<Integer,JLabel> labelTable2=new Hashtable<Integer,JLabel>();
  labelTable2.put(new Integer(0),new JLabel("0%"));
  labelTable2.put(new Integer(100),new JLabel("100%"));
  connectionDensitySlider.setLabelTable(labelTable2);
  connectionDensitySlider.setPaintLabels(true);
}

protected void updateTree(DocumentEvent event){
  updatingSelection=true;
  try {
    TreeModel model=getTreeModel();
    Object root=model.getRoot();
    for (int counter=model.getChildCount(root) - 1; counter >= 0; counter--) {
      updateTree(event,(Element)model.getChild(root,counter));
    }
  }
  finally {
    updatingSelection=false;
  }
}

private static Shape bottomEdge(BufferedImage image,GeneralPath path,int start){
  int lastj=0;
  Point2D p1=path.getCurrentPoint();
  Point2D p2=null;
  Line2D line=new Line2D.Float();
  for (int i=start; i < image.getWidth(); i+=sample) {
    boolean aPointExistsOnThisLine=false;
    for (int j=image.getHeight() - 1; j >= 0; j-=sample) {
      if ((image.getRGB(i,j) & 0xff000000) != 0) {
        Point2D p=new Point2D.Float(i,j);
        aPointExistsOnThisLine=true;
        p2=detectLine(p1,p2,p,line,path);
        lastj=j;
        break;
      }
    }
    if (aPointExistsOnThisLine == false) {
      break;
    }
  }
  return rightEdge(image,path,lastj);
}

@Override public void close() throws IOException {
  if (logger != null) {
    logger.println("SSLSocket.close " + socket_was_closed);
  }
  if (!socket_was_closed) {
    if (handshake_started) {
      alertProtocol.alert(AlertProtocol.WARNING,AlertProtocol.CLOSE_NOTIFY);
      try {
        output.write(alertProtocol.wrap());
      }
 catch (      IOException ex) {
      }
      alertProtocol.setProcessed();
    }
    shutdown();
    closeTransportLayer();
    socket_was_closed=true;
  }
}

@FormUrlEncoded @POST("oauth2/token") Call<AuthenticationResponse> authorize(@FieldMap Map<String,String> authMap);

private boolean repeatingPreview(Object tag){
  try {
    CaptureRequest.Builder builder=mDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
    builder.addTarget(mPreviewSurface);
    builder.set(CaptureRequest.CONTROL_MODE,CameraMetadata.CONTROL_MODE_AUTO);
    addBaselineCaptureKeysToRequest(builder);
    mCaptureSession.setRepeatingRequest(builder.build(),mCaptureCallback,mCameraHandler);
    Log.v(TAG,String.format("Sent repeating Preview request, zoom = %.2f",mZoomValue));
    return true;
  }
 catch (  CameraAccessException ex) {
    Log.e(TAG,"Could not access camera setting up preview.",ex);
    return false;
  }
}

private XMLElement newElement(String name,String value,ArrayList attributes) throws Exception {
  return newElement(name,value,attributes,false);
}

public void mousePressed(MouseEvent e){
  if (log.isDebugEnabled()) {
    log.debug("pressed " + (e.getModifiers() & MouseEvent.BUTTON1_MASK) + " "+ e.isPopupTrigger()+ " "+ (e.getModifiers() & (MouseEvent.ALT_MASK + MouseEvent.META_MASK + MouseEvent.CTRL_MASK))+ (" " + MouseEvent.ALT_MASK + "/"+ MouseEvent.META_MASK+ "/"+ MouseEvent.CTRL_MASK));
  }
  if (e.isPopupTrigger() && parentFrame.isSelected()) {
    try {
      _menu.show(e.getComponent(),e.getX(),e.getY());
    }
 catch (    java.awt.IllegalComponentStateException cs) {
    }
    e.consume();
  }
}

public void defineFillStyle(Color[] colors,int[] ratios,Transform matrix,boolean radial){
  GradientFill fill=new GradientFill(colors,ratios,matrix,radial);
  elements.add(fill);
  for (int i=0; i < colors.length; i++) {
    if (colors[i] == null) {
      continue;
    }
    if (colors[i] instanceof AlphaColor) {
      hasAlpha=true;
    }
  }
}

public boolean isOrphan(Sha256Hash block){
  lock.lock();
  try {
    return orphanBlocks.containsKey(block);
  }
  finally {
    lock.unlock();
  }
}

protected BooleanVal(boolean b){
  this.b=b;
}

private void relocateFromHeaders(ByteBuffer f,SceModule module,int baseAddress,Elf32 elf,int elfOffset) throws IOException {
  int i=0;
  for (  Elf32ProgramHeader phdr : elf.getProgramHeaderList()) {
    if (phdr.getP_type() == 0x700000A0L) {
      int RelCount=phdr.getP_filesz() / Elf32Relocate.sizeof();
      if (log.isDebugEnabled()) {
        log.debug(String.format("PH#%d: relocating %d entries",i,RelCount));
      }
      f.position(elfOffset + phdr.getP_offset());
      relocateFromBuffer(f,module,baseAddress,elf,RelCount,true);
      return;
    }
 else     if (phdr.getP_type() == 0x700000A1L) {
      if (log.isDebugEnabled()) {
        log.debug(String.format("Type 0x700000A1 PH#%d: relocating A1 entries, size=0x%X",i,phdr.getP_filesz()));
      }
      f.position(elfOffset + phdr.getP_offset());
      relocateFromBufferA1(f,elf,baseAddress,i,phdr.getP_filesz());
      return;
    }
    i++;
  }
  for (  Elf32SectionHeader shdr : elf.getSectionHeaderList()) {
    if (mustRelocate(elf,shdr)) {
      int RelCount=shdr.getSh_size() / Elf32Relocate.sizeof();
      if (log.isDebugEnabled()) {
        log.debug(shdr.getSh_namez() + ": relocating " + RelCount+ " entries");
      }
      f.position(elfOffset + shdr.getSh_offset());
      relocateFromBuffer(f,module,baseAddress,elf,RelCount,shdr.getSh_type() != Elf32SectionHeader.SHT_REL);
    }
  }
}

public List<Volume> validateVolumes(StorageSystem storageSystem,List<Volume> volumes,boolean delete,boolean remediate,ValCk... checks){
  try {
    client=VPlexControllerUtils.getVPlexAPIClient(VPlexApiFactory.getInstance(),storageSystem,getDbClient());
    for (    Volume volume : volumes) {
      try {
        log.info(String.format("Validating %s (%s)(%s) checks %s",volume.getLabel(),volume.getNativeId(),volume.getId(),checks.toString()));
        validateVolume(volume,delete,remediate,checks);
      }
 catch (      Exception ex) {
        log.error("Exception validating volume: " + volume.getId(),ex);
      }
    }
  }
 catch (  Exception ex) {
    log.error("Unexpected exception validating VPLEX: " + storageSystem.getId(),ex);
  }
  return remediatedVolumes;
}

private void drawXAxisMarker(Canvas canvas,double value,NumberFormat numberFormat,int spacing){
  String marker=chartByDistance ? numberFormat.format(value) : StringUtils.formatElapsedTime((long)value);
  Rect rect=getRect(xAxisMarkerPaint,marker);
  canvas.drawText(marker,getX(value),topBorder + effectiveHeight + spacing+ rect.height(),xAxisMarkerPaint);
}

public static <E>ArrayList<E> list(E... elements){
  ArrayList<E> list=new ArrayList<E>();
  for (  E element : elements)   list.add(element);
  return list;
}

public static String encode(ArrayList<GeoPoint> polyline,int precision){
  StringBuilder encodedPoints=new StringBuilder();
  int prev_lat=0, prev_lng=0;
  for (  GeoPoint trackpoint : polyline) {
    int lat=trackpoint.getLatitudeE6() / precision;
    int lng=trackpoint.getLongitudeE6() / precision;
    encodedPoints.append(encodeSignedNumber(lat - prev_lat));
    encodedPoints.append(encodeSignedNumber(lng - prev_lng));
    prev_lat=lat;
    prev_lng=lng;
  }
  return encodedPoints.toString();
}

private static boolean isTextObscured(JComponent c,String s){
  Graphics g=c.getGraphics();
  FontMetrics fm=g.getFontMetrics(c.getFont());
  int sw=fm.stringWidth(s);
  return (sw > c.getWidth());
}

public void add(Permission permission){
  perms.put(permission,permission);
}

@Override public Set<Statement> sum(final IGASState<Set<Statement>,Set<Statement>,Set<Statement>> state,final Set<Statement> left,final Set<Statement> right){
  final Set<Statement> tmp=new LinkedHashSet<Statement>(left);
  tmp.addAll(right);
  return tmp;
}

public static int prefixLength(char[] s1,char[] s2){
  int len=0;
  int max=Math.min(s1.length,s2.length);
  for (int i=0; i < max && s1[i] == s2[i]; ++i)   ++len;
  return len;
}

public void testAllConnectedBrokerNetwork() throws Exception {
  bridgeBrokers("BrokerA","BrokerB");
  bridgeBrokers("BrokerB","BrokerA");
  bridgeBrokers("BrokerB","BrokerC");
  bridgeBrokers("BrokerC","BrokerB");
  bridgeBrokers("BrokerA","BrokerC");
  bridgeBrokers("BrokerC","BrokerA");
  startAllBrokers();
  Destination dest=createDestination("TEST.FOO",true);
  MessageConsumer clientA=createConsumer("BrokerA",dest);
  MessageConsumer clientB=createConsumer("BrokerB",dest);
  MessageConsumer clientC=createConsumer("BrokerC",dest);
  Thread.sleep(2000);
  sendMessages("BrokerA",dest,MESSAGE_COUNT);
  sendMessages("BrokerB",dest,MESSAGE_COUNT);
  sendMessages("BrokerC",dest,MESSAGE_COUNT);
  MessageIdList msgsA=getConsumerMessages("BrokerA",clientA);
  MessageIdList msgsB=getConsumerMessages("BrokerB",clientB);
  MessageIdList msgsC=getConsumerMessages("BrokerC",clientC);
  msgsA.waitForMessagesToArrive(MESSAGE_COUNT * 3);
  msgsB.waitForMessagesToArrive(MESSAGE_COUNT * 3);
  msgsC.waitForMessagesToArrive(MESSAGE_COUNT * 3);
  assertEquals(MESSAGE_COUNT * 3,msgsA.getMessageCount());
  assertEquals(MESSAGE_COUNT * 3,msgsB.getMessageCount());
  assertEquals(MESSAGE_COUNT * 3,msgsC.getMessageCount());
}

private int encryptedColumnLength(int colLength){
  String str="";
  for (int i=0; i < colLength; i++) {
    str+="1";
  }
  str=SecureEngine.encrypt(str);
  return str.length();
}

private CnATreeElement unifyLinks(CnATreeElement sourceElement,CnATreeElement destinationElement) throws CommandException {
  for (  CnALink linkDown : sourceElement.getLinksDown()) {
    createLink(destinationElement,linkDown.getDependency(),linkDown.getRelationId());
  }
  for (  CnALink linkUp : sourceElement.getLinksUp()) {
    createLink(linkUp.getDependant(),destinationElement,linkUp.getRelationId());
  }
  return destinationElement;
}

private boolean flushAccumulatedRegion(){
  boolean success=true;
  if (accumulatedX != Integer.MAX_VALUE) {
    SubRegionShowable bsSubRegion=(SubRegionShowable)bufferStrategy;
    boolean contentsLost=bufferStrategy.contentsLost();
    if (!contentsLost) {
      bsSubRegion.show(accumulatedX,accumulatedY,accumulatedMaxX,accumulatedMaxY);
      contentsLost=bufferStrategy.contentsLost();
    }
    if (contentsLost) {
      if (LOGGER.isLoggable(PlatformLogger.Level.FINER)) {
        LOGGER.finer("endPaint: contents lost");
      }
      bufferInfo.setInSync(false);
      success=false;
    }
  }
  resetAccumulated();
  return success;
}

public void testBitLengthPositive1(){
  byte aBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  int aSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  assertEquals(108,aNumber.bitLength());
}

public void clearPieSegments(){
  mPieSegmentList.clear();
}

@Override public PatchResult applyPatch(PatchData patchData){
  String typeName=patchData.getTypeName();
  String applyVersion=patchData.getApplyToVersion();
  TypesDef updatedTypeDef;
  PatchResult result;
  try {
    if (checkIfTypeExists(typeName,metadataService)) {
      TypesDef typesDef=getTypeDef(typeName);
      String currentVersion=getTypeVersion(typeName);
      if (currentVersion == null || currentVersion.equalsIgnoreCase(applyVersion) || currentVersion.startsWith(applyVersion + ".")) {
        updatedTypeDef=updateTypesDef(typesDef,patchData);
        if (updatedTypeDef != null) {
          metadataService.updateType(TypesSerialization.toJson(updatedTypeDef));
          LOG.info("updated " + patchData.getTypeName() + " type from version "+ patchData.getApplyToVersion()+ " to "+ patchData.getUpdateToVersion());
          result=new PatchResult("patch applied successfully!",PatchStatus.SUCCESS);
        }
 else {
          LOG.error("failed to create updated typedef for type=" + typeName + "; applyToVersion="+ applyVersion+ "; updateToVersion="+ patchData.getUpdateToVersion());
          result=new PatchResult("patch failed!",PatchStatus.FAILED);
        }
      }
 else {
        LOG.info("patch skipped for " + patchData.getTypeName());
        result=new PatchResult("patch skipped!",PatchStatus.SKIPPED);
      }
    }
 else {
      LOG.error("failed to apply patch (typeName=" + typeName + "; applyToVersion="+ applyVersion+ "; updateToVersion="+ patchData.getUpdateToVersion()+ "): type doesn't exist");
      result=new PatchResult("patch failed!",PatchStatus.FAILED);
    }
  }
 catch (  AtlasException e) {
    LOG.error("error in updating type for " + patchData.getTypeName());
    result=new PatchResult("unable to update type",PatchStatus.FAILED);
  }
catch (  JSONException e) {
    LOG.error("error in updating typedef for  " + patchData.getTypeName());
    result=new PatchResult("unable to update typedef",PatchStatus.FAILED);
  }
  return result;
}

public static String randomAlphanumerical(final int len){
  final StringBuilder sb=new StringBuilder(len);
  for (int i=0; i < len; i++) {
    sb.append(AB.charAt(random.nextInt(AB.length())));
  }
  return sb.toString();
}

static int svd_imax(int a,int b){
  return Math.max(a,b);
}

public void actionPerformed(ActionEvent e){
  Caret c=textArea.getCaret();
  if (c.getDot() != c.getMark()) {
    return;
  }
  RSyntaxDocument doc=(RSyntaxDocument)textArea.getDocument();
  doc.readLock();
  try {
    removeHighlights();
    int line=textArea.getCaretLineNumber();
    Token tokenList=textArea.getTokenListForLine(line);
    int dot=c.getDot();
    Token t=RSyntaxUtilities.getTokenAtOffset(tokenList,dot);
    if (t == null || !isValidType(t) || isNonWordChar(t)) {
      dot--;
      try {
        if (dot >= textArea.getLineStartOffset(line)) {
          t=RSyntaxUtilities.getTokenAtOffset(tokenList,dot);
        }
      }
 catch (      BadLocationException ble) {
        ble.printStackTrace();
      }
    }
    if (t != null && isValidType(t) && !isNonWordChar(t)) {
      RSyntaxTextAreaHighlighter h=(RSyntaxTextAreaHighlighter)textArea.getHighlighter();
      String lexeme=t.getLexeme();
      int type=t.type;
      for (int i=0; i < textArea.getLineCount(); i++) {
        Token temp=textArea.getTokenListForLine(i);
        while (temp != null && temp.isPaintable()) {
          if (temp.is(type,lexeme)) {
            try {
              int end=temp.offset + temp.textCount;
              Object tag=h.addMarkedOccurrenceHighlight(temp.offset,end,p);
              tags.add(tag);
            }
 catch (            BadLocationException ble) {
              ble.printStackTrace();
            }
          }
          temp=temp.getNextToken();
        }
      }
    }
  }
  finally {
    doc.readUnlock();
  }
  textArea.fireMarkedOccurrencesChanged();
}

public boolean restoreAccessibilityFocus(CalendarDay day){
  if ((day.year != mYear) || (day.month != mMonth) || (day.day > mNumCells)) {
    return false;
  }
  mTouchHelper.setFocusedVirtualView(day.day);
  return true;
}

private boolean isMimeFormat(long format,String primaryType){
  String nat=getNativeForFormat(format);
  if (nat == null) {
    return false;
  }
  try {
    DataFlavor df=new DataFlavor(nat);
    if (primaryType.equals(df.getPrimaryType())) {
      return true;
    }
  }
 catch (  Exception e) {
  }
  return false;
}

private static String convertRelevance(int relevance){
  StringBuilder sb=new StringBuilder();
  while (relevance > 0) {
    sb.insert(0,REVERSE_CHAR_MAP[relevance % 10]);
    relevance=relevance / 10;
  }
  return sb.toString();
}

public synchronized AlphabeticIndex addLabels(Locale locale){
  addLabels(peer,locale.toString());
  return this;
}

public void sort(){
  Collections.sort(individuals,PERFORMANCE_COMPARATOR);
}

int extractVersionFromFilename(final File file){
  final Matcher matcher=versionedPattern.matcher(file.getAbsolutePath());
  matcher.find();
  return Integer.parseInt(matcher.group(2));
}

static int measureChildForCells(View child,int cellSize,int cellsRemaining,int parentHeightMeasureSpec,int parentHeightPadding){
  final LayoutParams lp=(LayoutParams)child.getLayoutParams();
  final int childHeightSize=MeasureSpec.getSize(parentHeightMeasureSpec) - parentHeightPadding;
  final int childHeightMode=MeasureSpec.getMode(parentHeightMeasureSpec);
  final int childHeightSpec=MeasureSpec.makeMeasureSpec(childHeightSize,childHeightMode);
  int cellsUsed=0;
  if (cellsRemaining > 0) {
    final int childWidthSpec=MeasureSpec.makeMeasureSpec(cellSize * cellsRemaining,MeasureSpec.AT_MOST);
    child.measure(childWidthSpec,childHeightSpec);
    final int measuredWidth=child.getMeasuredWidth();
    cellsUsed=measuredWidth / cellSize;
    if (measuredWidth % cellSize != 0)     cellsUsed++;
  }
  final ActionMenuItemView itemView=child instanceof ActionMenuItemView ? (ActionMenuItemView)child : null;
  final boolean expandable=!lp.isOverflowButton && itemView != null && itemView.hasText();
  lp.expandable=expandable;
  lp.cellsUsed=cellsUsed;
  final int targetWidth=cellsUsed * cellSize;
  child.measure(MeasureSpec.makeMeasureSpec(targetWidth,MeasureSpec.EXACTLY),childHeightSpec);
  return cellsUsed;
}

public void runTest() throws Throwable {
  Document doc;
  NodeList elementList;
  Node nameNode;
  CharacterData child;
  String badString;
  doc=(Document)load("staff",false);
  elementList=doc.getElementsByTagName("address");
  nameNode=elementList.item(0);
  child=(CharacterData)nameNode.getFirstChild();
{
    boolean success=false;
    try {
      badString=child.substringData(-5,3);
    }
 catch (    DOMException ex) {
      success=(ex.code == DOMException.INDEX_SIZE_ERR);
    }
    assertTrue("throws_INDEX_SIZE_ERR",success);
  }
}

private boolean isSpecializedHandlerAvailable(Intent intent){
  PackageManager pm=mActivity.getPackageManager();
  List<ResolveInfo> handlers=pm.queryIntentActivities(intent,PackageManager.GET_RESOLVED_FILTER);
  if (handlers == null || handlers.size() == 0) {
    return false;
  }
  for (  ResolveInfo resolveInfo : handlers) {
    IntentFilter filter=resolveInfo.filter;
    if (filter == null) {
      continue;
    }
    if (filter.countDataAuthorities() == 0 && filter.countDataPaths() == 0) {
      continue;
    }
    return true;
  }
  return false;
}

private void convertError(CharBuffer buf,int line){
  String srcFilename=null;
  int destLine=0;
  int srcLine=0;
  int srcTailLine=Integer.MAX_VALUE;
  for (int i=0; i < _lines.size(); i++) {
    Line map=(Line)_lines.get(i);
    if (map._dstLine <= line && line <= map.getLastDestinationLine()) {
      srcFilename=map._srcFilename;
      destLine=map._dstLine;
      srcLine=map.getSourceLine(line);
      break;
    }
  }
  if (srcFilename != null) {
  }
 else   if (_lines.size() > 0)   srcFilename=((Line)_lines.get(0))._srcFilename;
 else   srcFilename="";
  buf.append(srcFilename);
  if (line >= 0) {
    buf.append(":");
    buf.append(srcLine + (line - destLine));
  }
}

public static String slurpGBURLNoExceptions(URL u){
  try {
    return slurpGBURL(u);
  }
 catch (  Exception e) {
    e.printStackTrace();
    return null;
  }
}

public void undo(){
  if (!undoStack.isEmpty()) {
    UndoableAction lastEvent=undoStack.pop();
    lastEvent.undo();
    redoStack.push(lastEvent);
  }
}

private void emitListAdd(Method method,String fieldName,StringBuilder builder){
  builder.append("    public void ");
  builder.append(getListAdderName(fieldName));
  builder.append("(");
  builder.append(getTypeArgumentImplName((ParameterizedType)method.getGenericReturnType(),0));
  builder.append(" v) {\n      ");
  builder.append(getEnsureName(fieldName));
  builder.append("();\n      ");
  builder.append(fieldName);
  builder.append(".add(v);\n");
  builder.append("    }\n\n");
}

public Pair<SolrCore,SolrCore> replicateToDestination(SolrCore bestsrcCore,SolrCore destinationCore) throws Exception {
  Pair<SolrCore,SolrCore> replicationRequestPair=null;
  try {
    SolrInteractionUtils.replicateIndex(destinationCore.host,destinationCore.name,bestsrcCore.host,bestsrcCore.name);
    String fullReplication="http://%s:%s/solr/%s/replication?command=fetchindex&masterUrl=http://%s:%s/solr/%s";
    String replicator=String.format(fullReplication,destinationCore.host,SolrInteractionUtils.DEFAULT_SOLR_PORT,destinationCore.name,bestsrcCore.host,SolrInteractionUtils.DEFAULT_SOLR_PORT,bestsrcCore.name);
    logger.info("Using Replication Command -> " + replicator);
    replicationRequestPair=new Pair<SolrCore,SolrCore>(destinationCore,bestsrcCore);
    logger.info("Adding Replication Request to the Queue: " + destinationCore.host + ":"+ destinationCore.name+ " --> "+ bestsrcCore.host+ ":"+ bestsrcCore.name);
  }
 catch (  Exception e) {
    logger.info("Encountered Exception while Trying to connect to destination host " + destinationCore.host + " or source host"+ bestsrcCore.host);
    if (!replicatorConfig.shouldSkipReplicationFailures()) {
      throw new ReplicationFailureException("Replication failures while tyring to talk to nodes " + destinationCore.host + " or source host"+ bestsrcCore.host);
    }
  }
  return replicationRequestPair;
}

public static OSType calculateOS(){
  String osName=System.getProperty("os.name");
  osName=osName.toLowerCase(Locale.ENGLISH);
  if (osName.startsWith("mac os")) {
    return OSType.APPLE;
  }
  if (osName.startsWith("windows")) {
    return OSType.WINDOWS;
  }
  if (osName.startsWith("linux")) {
    return OSType.LINUX;
  }
  if (osName.startsWith("sun")) {
    return OSType.SUN;
  }
  return OSType.UNKNOWN;
}

private static int countDuplicates(StackTraceElement[] currentStack,StackTraceElement[] parentStack){
  int duplicates=0;
  int parentIndex=parentStack.length;
  for (int i=currentStack.length; --i >= 0 && --parentIndex >= 0; ) {
    StackTraceElement parentFrame=parentStack[parentIndex];
    if (parentFrame.equals(currentStack[i])) {
      duplicates++;
    }
 else {
      break;
    }
  }
  return duplicates;
}

public void recycle(){
synchronized (sPool) {
    if (sPool.size() < MAX_POOL_SIZE) {
      sPool.add(this);
    }
  }
}

private String buildInsert(boolean disableReturning){
  sb.setLength(0);
  sb.append("insert into ");
  appendTable(sb);
  sb.append(" (\"");
  sb.append(options.keyColumnName);
  sb.append("\",\"");
  if (options.doctypeColumnName != null) {
    sb.append(options.doctypeColumnName);
    sb.append("\",\"");
  }
  sb.append(options.contentColumnName);
  sb.append("\"");
  if (options.timestampColumnName != null) {
    sb.append(",\"");
    sb.append(options.timestampColumnName);
    sb.append("\"");
  }
  if (options.creationColumnName != null) {
    sb.append(",\"");
    sb.append(options.creationColumnName);
    sb.append("\"");
  }
  if ((options.versionColumnName != null) && (options.versioningMethod) != CollectionDescriptor.VERSION_NONE) {
    sb.append(",\"");
    sb.append(options.versionColumnName);
    sb.append("\"");
  }
  sb.append(") values (");
  if ((options.keySequenceName != null) && (!disableReturning)) {
switch (options.keyDataType) {
case CollectionDescriptor.INTEGER_KEY:
      sb.append("\"");
    sb.append(options.keySequenceName);
  sb.append("\".NEXTVAL");
break;
case CollectionDescriptor.RAW_KEY:
sb.append("hextoraw(substr(to_char(\"");
sb.append(options.keySequenceName);
sb.append("\".NEXTVAL,'0XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'),3))");
break;
case CollectionDescriptor.STRING_KEY:
case CollectionDescriptor.NCHAR_KEY:
default :
sb.append("to_char(\"");
sb.append(options.keySequenceName);
sb.append("\".NEXTVAL)");
break;
}
}
 else if ((options.keyAssignmentMethod == CollectionDescriptor.KEY_ASSIGN_GUID) && (!disableReturning)) {
switch (options.keyDataType) {
case CollectionDescriptor.INTEGER_KEY:
sb.append("to_number(");
sb.append("rawtohex(SYS_GUID()),");
sb.append("'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX')");
break;
case CollectionDescriptor.RAW_KEY:
sb.append("SYS_GUID()");
break;
case CollectionDescriptor.STRING_KEY:
case CollectionDescriptor.NCHAR_KEY:
default :
sb.append("rawtohex(SYS_GUID())");
break;
}
}
 else {
addKey(sb);
}
if (options.doctypeColumnName != null) {
sb.append(",?");
}
sb.append(",?");
if (options.timestampColumnName != null) {
if (disableReturning) OracleDatabaseImpl.addToTimestamp(",",sb);
 else sb.append(",sys_extract_utc(SYSTIMESTAMP)");
}
if (options.creationColumnName != null) {
if (disableReturning) OracleDatabaseImpl.addToTimestamp(",",sb);
 else sb.append(",sys_extract_utc(SYSTIMESTAMP)");
}
if ((options.versionColumnName != null) && (options.versioningMethod) != CollectionDescriptor.VERSION_NONE) sb.append(",?");
sb.append(")");
if (insertHasReturnClause(disableReturning)) {
sb.append(" returning ");
int count=0;
if (returnInsertedKey()) {
sb.append("\"");
sb.append(options.keyColumnName);
sb.append("\"");
count++;
}
if (returnInsertedTime()) {
addComma(sb,count);
sb.append("to_char(\"");
if (options.timestampColumnName != null) sb.append(options.timestampColumnName);
 else sb.append(options.creationColumnName);
sb.append('"');
OracleDatabaseImpl.addTimestampReturningFormat(sb);
count++;
}
if (returnInsertedVersion()) {
addComma(sb,count);
sb.append("\"");
sb.append(options.versionColumnName);
sb.append("\"");
count++;
}
addInto(sb,count);
}
return (sb.toString());
}

public final boolean exists(){
  return config != null;
}

@Override public synchronized void removeTestSetListener(TestSetListener tsl){
  m_testListeners.removeElement(tsl);
}

private boolean has_colinear(ArrayList<PlaPointInt> corners_list,PlaPointInt a_point){
  int count=corners_list.size();
  if (count < 2)   return false;
  for (int index=0; index < count - 1; index++) {
    PlaPointInt start=corners_list.get(index);
    PlaPointInt end=corners_list.get(index + 1);
    if (a_point.side_of(start,end) != PlaSide.COLLINEAR)     continue;
    double d_start_p=start.distance_square(a_point);
    double d_p_end=a_point.distance_square(end);
    double d_start_end=start.distance_square(end);
    if (d_start_end >= d_start_p) {
      if (d_start_end >= d_p_end) {
        return true;
      }
 else {
        corners_list.set(index,a_point);
        return true;
      }
    }
 else {
      if (d_start_end >= d_p_end) {
        corners_list.set(index + 1,a_point);
        return true;
      }
 else {
        corners_list.set(index,a_point);
        return true;
      }
    }
  }
  return false;
}

public boolean contains(String key){
  return myProperties.containsKey(key);
}

protected SnmpCachedData updateCachedDatas(Object userData){
  final String[] path=JvmRuntimeImpl.getLibraryPath(userData);
  final long time=System.currentTimeMillis();
  final int len=path.length;
  SnmpOid indexes[]=new SnmpOid[len];
  for (int i=0; i < len; i++) {
    indexes[i]=new SnmpOid(i + 1);
  }
  return new SnmpCachedData(time,indexes,path);
}

public static byte[] decodeHex(String hexString){
  int length=hexString.length();
  if ((length & 0x01) != 0) {
    throw new IllegalArgumentException("Odd number of characters.");
  }
  boolean badHex=false;
  byte[] out=new byte[length >> 1];
  for (int i=0, j=0; j < length; i++) {
    int c1=hexString.charAt(j++);
    if (c1 > 'f') {
      badHex=true;
      break;
    }
    final byte d1=DIGITS[c1];
    if (d1 == -1) {
      badHex=true;
      break;
    }
    int c2=hexString.charAt(j++);
    if (c2 > 'f') {
      badHex=true;
      break;
    }
    final byte d2=DIGITS[c2];
    if (d2 == -1) {
      badHex=true;
      break;
    }
    out[i]=(byte)(d1 << 4 | d2);
  }
  if (badHex) {
    throw new IllegalArgumentException("Invalid hexadecimal digit: " + hexString);
  }
  return out;
}

public static void deletePlayer(PlayerAccountData accData){
  if (accData.getDeletionDate() != null) {
    return;
  }
  accData.setDeletionDate(new Timestamp(System.currentTimeMillis() + 5 * 60 * 1000));
  storeDeletionTime(accData);
}

public int eval(INode state){
  EightPuzzleNode node=(EightPuzzleNode)state;
  int Pn=0;
  for (int r=0; r <= EightPuzzleNode.MaxR; r++) {
    for (int c=0; c <= EightPuzzleNode.MaxC; c++) {
      if (node.isEmpty(r,c)) {
        continue;
      }
      int digit=node.cell(r,c);
      Pn+=Math.abs(diffs[digit][0] - r);
      Pn+=Math.abs(diffs[digit][1] - c);
    }
  }
  int Sn=0;
  if (!node.isEmpty(1,1)) {
    Sn=1;
  }
  for (int r=0; r <= EightPuzzleNode.MaxR; r++) {
    for (int c=0; c <= EightPuzzleNode.MaxC; c++) {
      int idx=r * 3 + c;
      if (r == 1 && c == 1) {
        continue;
      }
      if (node.cell(r,c) == EightPuzzleNode.EmptyMark) {
        continue;
      }
      if (succ[node.cell(r,c)] != node.cell(succs[idx][0],succs[idx][1])) {
        Sn+=2;
      }
    }
  }
  int gn=0;
  DepthTransition t=(DepthTransition)state.storedData();
  if (t != null) {
    gn=t.depth;
  }
  return gn + Pn + 3 * Sn;
}

public void testBuffered(){
  Instances icopy=new Instances(m_Instances);
  Instances result=null;
  try {
    m_Filter.setInputFormat(icopy);
  }
 catch (  Exception ex) {
    ex.printStackTrace();
    fail("Exception thrown on setInputFormat(): \n" + ex.getMessage());
  }
  try {
    result=Filter.useFilter(icopy,m_Filter);
    assertNotNull(result);
  }
 catch (  Exception ex) {
    ex.printStackTrace();
    fail("Exception thrown on useFilter(): \n" + ex.getMessage());
  }
  StringWriter sw=new StringWriter(2000);
  sw.write(result.toString());
  assertTrue(icopy.equalHeaders(m_Instances));
  assertEquals(icopy.numInstances(),m_Instances.numInstances());
  Instances result2=null;
  try {
    m_Filter.setInputFormat(icopy);
  }
 catch (  Exception ex) {
    ex.printStackTrace();
    fail("Exception thrown on setInputFormat(): \n" + ex.getMessage());
  }
  try {
    result2=Filter.useFilter(icopy,m_Filter);
    assertNotNull(result2);
  }
 catch (  Exception ex) {
    ex.printStackTrace();
    fail("Exception thrown on useFilter(): \n" + ex.getMessage());
  }
  assertTrue(icopy.equalHeaders(m_Instances));
  assertEquals(icopy.numInstances(),m_Instances.numInstances());
  assertTrue(result.equalHeaders(result2));
  assertEquals(result.numInstances(),result2.numInstances());
}

private String parseCss(final String css){
  final Map<String,String> map=new HashMap<String,String>();
  final StringBuffer sb=new StringBuffer();
  final Matcher m=PATTERN_VARIABLES_DEFINITION.matcher(css);
  while (m.find()) {
    final String variablesBody=m.group(1);
    map.putAll(extractVariables(variablesBody));
    m.appendReplacement(sb,"");
  }
  m.appendTail(sb);
  return replaceVariables(sb.toString(),map);
}

private void shutdown(){
  if (execSvc != null)   execSvc.shutdown(5000);
  if (msgExecSvc != null)   msgExecSvc.shutdownNow();
  try {
    job.dispose(true);
  }
 catch (  IgniteCheckedException e) {
    U.error(log,"Failed to dispose job.",e);
  }
}

public void startCDATA() throws org.xml.sax.SAXException {
  m_inCData=true;
  append(m_doc.createCDATASection(""));
}

public void addAll(List<Fragment> aSplits){
  splits.addAll(aSplits);
}

protected synchronized int currentchunkoffset() throws IOException {
  long fp=backingRandomAccessFile.getFilePointer();
  if (fp < fHeader.headerSize()) {
    return -1;
  }
 else {
    fp-=fHeader.headerSize();
    if (fp == 0) {
      return 0;
    }
 else {
      return (int)((fp % CHUNK_ENC_SIZE) - CHUNK_IV_SIZE);
    }
  }
}

private int parseIntValue(String input) throws NumberFormatException {
  int value=0;
  if (input.startsWith("+")) {
    String temp=input.substring(1);
    return Integer.parseInt(temp);
  }
 else   if (input.startsWith("0x")) {
    String temp=input.substring(2);
    char[] chars=temp.toCharArray();
    if (chars.length > 8) {
      throw new NumberFormatException();
    }
 else {
      for (int i=0; i < chars.length; i++) {
        int index=chars.length - i - 1;
switch (chars[i]) {
case '0':
          value+=0;
        break;
case '1':
      value+=1 * getBase(index);
    break;
case '2':
  value+=2 * getBase(index);
break;
case '3':
value+=3 * getBase(index);
break;
case '4':
value+=4 * getBase(index);
break;
case '5':
value+=5 * getBase(index);
break;
case '6':
value+=6 * getBase(index);
break;
case '7':
value+=7 * getBase(index);
break;
case '8':
value+=8 * getBase(index);
break;
case '9':
value+=9 * getBase(index);
break;
case 'a':
case 'A':
value+=10 * getBase(index);
break;
case 'b':
case 'B':
value+=11 * getBase(index);
break;
case 'c':
case 'C':
value+=12 * getBase(index);
break;
case 'd':
case 'D':
value+=13 * getBase(index);
break;
case 'e':
case 'E':
value+=14 * getBase(index);
break;
case 'f':
case 'F':
value+=15 * getBase(index);
break;
default :
throw new NumberFormatException("Invalid numerical format");
}
}
}
if (value < 0) {
throw new NumberFormatException("Data overflow.");
}
}
 else {
value=Integer.parseInt(input);
}
return value;
}

protected int decodeLinePrefix(PushbackInputStream aStream,OutputStream bStream) throws IOException {
  return (bytesPerLine());
}

private static LookupLocator[] unmarshalLocators(ObjectInputStream in) throws IOException, ClassNotFoundException {
  List l=new ArrayList();
  MarshalledInstance mi;
  while ((mi=(MarshalledInstance)in.readObject()) != null) {
    try {
      l.add((LookupLocator)mi.get(false));
    }
 catch (    Throwable e) {
      if (e instanceof Error && ThrowableConstants.retryable(e) == ThrowableConstants.BAD_OBJECT) {
        throw (Error)e;
      }
      logger.log(Level.WARNING,"failed to recover lookup locator",e);
    }
  }
  return (LookupLocator[])l.toArray(new LookupLocator[l.size()]);
}

public void accept(final AnnotationVisitor av){
  if (av != null) {
    if (values != null) {
      for (int i=0; i < values.size(); i+=2) {
        String name=(String)values.get(i);
        Object value=values.get(i + 1);
        accept(av,name,value);
      }
    }
    av.visitEnd();
  }
}

static public String numberToString(Number n) throws JSONException {
  if (n == null) {
    throw new JSONException("Null pointer");
  }
  testValidity(n);
  String s=n.toString();
  if (s.indexOf('.') > 0 && s.indexOf('e') < 0 && s.indexOf('E') < 0) {
    while (s.endsWith("0")) {
      s=s.substring(0,s.length() - 1);
    }
    if (s.endsWith(".")) {
      s=s.substring(0,s.length() - 1);
    }
  }
  return s;
}

public int children(){
  return children.size();
}

public void createVVset(String displayName) throws Exception {
  _log.info("createVVset enter");
  ClientResponse clientResp=null;
  String payload="{\"name\": \"" + displayName + "\" }";
  _log.info(" 3PARDriver: createVVset uri = {} payload {} ",URI_CREATE_CG.toString(),payload);
  try {
    clientResp=post(URI_CREATE_CG,payload);
    if (clientResp == null) {
      _log.error("3PARDriver: createVVset There is no response from 3PAR");
      throw new HP3PARException("There is no response from 3PAR");
    }
 else     if (clientResp.getStatus() != 201) {
      String errResp=getResponseDetails(clientResp);
      _log.error("3PARDriver: createVVset There is error response from 3PAR = {}",errResp);
      throw new HP3PARException(errResp);
    }
 else {
      _log.info("3PARDriver: createVVset success");
    }
  }
 catch (  Exception e) {
    throw e;
  }
 finally {
    if (clientResp != null) {
      clientResp.close();
    }
    _log.info("3PARDriver: createVVset leave");
  }
}

protected void connectionFailed(Channel failedChannel,IOException cause){
  failureCause=IOExceptionSupport.create(cause);
  channel=failedChannel;
  connected.set(false);
  handshakeFuture.setFailure(cause);
}

public static byte[] splitUint8To2bytes(char uint8){
  if (uint8 < 0 || uint8 > 0xff) {
    throw new RuntimeException("Out of Boundary");
  }
  String hexString=Integer.toHexString(uint8);
  byte low;
  byte high;
  if (hexString.length() > 1) {
    high=(byte)Integer.parseInt(hexString.substring(0,1),16);
    low=(byte)Integer.parseInt(hexString.substring(1,2),16);
  }
 else {
    high=0;
    low=(byte)Integer.parseInt(hexString.substring(0,1),16);
  }
  byte[] result=new byte[]{high,low};
  return result;
}

public void write(int c) throws IOException {
  internalOut.write(c);
}

public static void init(Context context){
  if (cameraManager == null) {
    cameraManager=new CameraManager(context);
  }
}

public void addAttribute(String uri,String localName,String rawName,String type,String value,boolean XSLAttribute) throws SAXException {
  if (m_elemContext.m_startTagOpen) {
    ensurePrefixIsDeclared(uri,rawName);
    addAttributeAlways(uri,localName,rawName,type,value,false);
  }
}

private String markdownBlockquote(String value){
  return "> " + value.replace("\n","\n> ");
}

protected String hash(String key){
  try {
    MessageDigest gen=HASH_GENERATOR.get();
    byte[] keyBytes=key.getBytes("UTF-8");
    gen.update(keyBytes,0,keyBytes.length);
    byte[] binaryhash=gen.digest();
    return ENCODER.encodeToString(binaryhash);
  }
 catch (  Exception e) {
    LOG.warn("Failed to get hash encoding for key: {}",key,e);
  }
  return null;
}

public static boolean isInputType(String typeString){
  return INPUT_TYPES.contains(typeString);
}

public static Point destination(Point point1,double distance,double bearing,String units) throws TurfException {
  double degrees2radians=Math.PI / 180;
  double radians2degrees=180 / Math.PI;
  Position coordinates1=point1.getCoordinates();
  double longitude1=degrees2radians * coordinates1.getLongitude();
  double latitude1=degrees2radians * coordinates1.getLatitude();
  double bearingRad=degrees2radians * bearing;
  double radians=TurfHelpers.distanceToRadians(distance,units);
  double latitude2=Math.asin(Math.sin(latitude1) * Math.cos(radians) + Math.cos(latitude1) * Math.sin(radians) * Math.cos(bearingRad));
  double longitude2=longitude1 + Math.atan2(Math.sin(bearingRad) * Math.sin(radians) * Math.cos(latitude1),Math.cos(radians) - Math.sin(latitude1) * Math.sin(latitude2));
  return Point.fromCoordinates(Position.fromCoordinates(radians2degrees * longitude2,radians2degrees * latitude2));
}

public void clear(){
synchronized (mLock) {
    mGraphics.clear();
    mFirstGraphic=null;
  }
  postInvalidate();
}

@SuppressWarnings("LeakingThisInConstructor") public NodePanel(ShaderNodeVariable singleOut,NodePanel.NodeType type){
  super();
  List<ShaderNodeVariable> outputs=new ArrayList<ShaderNodeVariable>();
  outputs.add(singleOut);
  this.type=type;
  init(new ArrayList<ShaderNodeVariable>(),outputs);
  addKeyListener(this);
  toolBar=new NodeToolBar(this);
}

public static String stringifyException(Throwable e){
  StringWriter stm=new StringWriter();
  PrintWriter wrt=new PrintWriter(stm);
  e.printStackTrace(wrt);
  wrt.close();
  return stm.toString();
}

private HeronReefUtils(){
}

public static boolean isSolaris(){
  return (OS.indexOf("sunos") >= 0);
}

public double SumInlinkHubScore(Page page){
  List<String> inLinks=page.getInlinks();
  double hubScore=0;
  for (int i=0; i < inLinks.size(); i++) {
    Page inLink=pTable.get(inLinks.get(i));
    if (inLink != null) {
      hubScore+=inLink.hub;
    }
 else {
      continue;
    }
  }
  return hubScore;
}

@Override public void addUndoPoint(){
  File tempFile;
  ObjectOutputStream oos;
  if (!isUndoEnabled()) {
    return;
  }
  if (getInstances() != null) {
    try {
      tempFile=File.createTempFile("arffviewer",null);
      tempFile.deleteOnExit();
      oos=new ObjectOutputStream(new BufferedOutputStream(new FileOutputStream(tempFile)));
      oos.writeObject(getInstances());
      oos.flush();
      oos.close();
      m_UndoList.add(tempFile);
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
}

private void clipViewOnTheRight(Rect curViewBound,float curViewWidth,int right){
  curViewBound.right=(int)(right - mClipPadding);
  curViewBound.left=(int)(curViewBound.right - curViewWidth);
}

private void preserveParentLink(String brokenTableName,String brokenColumnName,String brokenDefaultValue,ArrayList<String> brokenCompareColumns,String hintTableName,String hintColumnName,ArrayList<String> hintCompareColumns){
  String vendorName=m_target.getVendor();
  String catalogName=m_target.getCatalog();
  String schemaName=m_target.getSchema();
  if (m_source.isObjectExists(brokenTableName,m_source.getTables())) {
    boolean columnToPreserveLinkExists=false;
    DBObject tableToPreserveLink=m_source.getObjectByName(brokenTableName,m_source.getTables());
    HashMap<Integer,DBObjectDefinition> columns=tableToPreserveLink.getContents();
    Vector<Integer> vc=new Vector<Integer>(columns.keySet());
    for (Iterator<Integer> ic=vc.iterator(); ic.hasNext(); ) {
      int kc=ic.next();
      DBObject_Table_Column columnDetail=(DBObject_Table_Column)columns.get(kc);
      String columnName=columnDetail.getName();
      if (columnName.equalsIgnoreCase(brokenColumnName))       columnToPreserveLinkExists=true;
    }
    if (columnToPreserveLinkExists) {
      s_logger.log(Level.FINE,"preserveParentLinkDetail",new Object[]{m_objectType,brokenTableName,m_direction});
      String sqlCommand=s_dbEngine.sqlAction_preserveParentLinks(vendorName,catalogName,schemaName,brokenTableName,brokenColumnName,brokenDefaultValue,brokenCompareColumns,hintTableName,hintColumnName,hintCompareColumns);
      if (sqlCommand != null) {
        Savepoint sp=m_target.setSavepoint("preserveParentLinks");
        Statement stmt=m_target.setStatement();
        Integer sqlResult=m_target.executeUpdate(stmt,sqlCommand,false,false);
        if (sqlResult != null) {
          logUpdateDetail(sqlResult,null);
          m_counterUpd=new Integer(m_counterUpd.intValue() + 1);
        }
        m_target.releaseStatement(stmt);
        m_totalUpd=new Integer(m_totalUpd.intValue() + 1);
        m_target.releaseSavepoint(sp);
      }
    }
  }
}

public ShortBandedRaster(SampleModel sampleModel,DataBuffer dataBuffer,Point origin){
  this(sampleModel,dataBuffer,new Rectangle(origin.x,origin.y,sampleModel.getWidth(),sampleModel.getHeight()),origin,null);
}

public void remapMappedTypes(){
  clearMappedTypes();
  mapPossibleTypes(mItems);
}

public void initialize() throws ExecutionException {
}

public int numChildren(int row){
  int count=0;
  nextValidRowPositions.clear();
  for (int i=0; i < n; i++) {
    board[row][i]=true;
    if (valid(row,i)) {
      count++;
      nextValidRowPositions.add(i);
    }
    board[row][i]=false;
  }
  return count;
}

public void testNegNegSameLength(){
  String numA="-283746278342837476784564875684767";
  String numB="-293478573489347658763745839457637";
  String res="71412358434940908477702819237626";
  BigInteger aNumber=new BigInteger(numA);
  BigInteger bNumber=new BigInteger(numB);
  BigInteger result=aNumber.xor(bNumber);
  assertTrue(res.equals(result.toString()));
}

public static IJavaSearchScope createRelatedProjectsScope(IJavaProject project,int includeMask) throws CoreException {
  IJavaProject[] projects=getRelatedProjects(project);
  return SearchEngine.createJavaSearchScope(projects,includeMask);
}

public Confirmation(){
  this(null,null);
}

public VcsRevisionNumber originalRevision(int lineNumber){
  return getLineRevisionNumber(lineNumber);
}

private void checkPausedOrCanceled(State state) throws StopRequest {
  if (mService.getControl() == DownloaderService.CONTROL_PAUSED) {
    int status=mService.getStatus();
switch (status) {
case DownloaderService.STATUS_PAUSED_BY_APP:
      throw new StopRequest(mService.getStatus(),"download paused");
  }
}
}

void trace(){
  glUseProgram(computeProgram);
  invProjMatrix.transformProject(tmpVector.set(-1,-1,0));
  glUniform3f(ray00Uniform,tmpVector.x,tmpVector.y,tmpVector.z);
  invProjMatrix.transformProject(tmpVector.set(-1,1,0));
  glUniform3f(ray01Uniform,tmpVector.x,tmpVector.y,tmpVector.z);
  invProjMatrix.transformProject(tmpVector.set(1,-1,0));
  glUniform3f(ray10Uniform,tmpVector.x,tmpVector.y,tmpVector.z);
  invProjMatrix.transformProject(tmpVector.set(1,1,0));
  glUniform3f(ray11Uniform,tmpVector.x,tmpVector.y,tmpVector.z);
  glBindBufferBase(GL_SHADER_STORAGE_BUFFER,trianglesSsboBinding,ssbo);
  glBindImageTexture(framebufferImageBinding,raytraceTexture,0,false,0,GL_WRITE_ONLY,GL_RGBA8);
  int worksizeX=mathRoundPoT(width);
  int worksizeY=mathRoundPoT(height);
  glDispatchCompute(worksizeX / workGroupSizeX,worksizeY / workGroupSizeY,1);
  glMemoryBarrier(GL_SHADER_IMAGE_ACCESS_BARRIER_BIT);
  glBindImageTexture(framebufferImageBinding,0,0,false,0,GL_WRITE_ONLY,GL_RGBA8);
  glBindBufferBase(GL_SHADER_STORAGE_BUFFER,trianglesSsboBinding,0);
  glUseProgram(0);
}

public void removeAllActionFireListeners(){
  mActionFiredListeners.clear();
}

public static String millisToString(long millis){
  boolean negative=millis < 0;
  millis=Math.abs(millis);
  millis/=1000;
  int sec=(int)(millis % 60);
  millis/=60;
  int min=(int)(millis % 60);
  millis/=60;
  int hours=(int)millis;
  String time;
  DecimalFormat format=(DecimalFormat)NumberFormat.getInstance(Locale.US);
  format.applyPattern("00");
  if (millis > 0) {
    time=(negative ? "-" : "") + hours + ":"+ format.format(min)+ ":"+ format.format(sec);
  }
 else {
    time=(negative ? "-" : "") + min + ":"+ format.format(sec);
  }
  return time;
}

@Inline public static void toUTF8(String s,ByteBuffer b){
  int result_index=0;
  for (int i=0, n=s.length(); i < n; ++i) {
    char c=s.charAt(i);
    if (((!WRITE_PSEUDO_UTF8) || (c >= 0x0001)) && (c <= 0x007F)) {
      b.put((byte)c);
    }
 else     if (c > 0x07FF) {
      b.put((byte)(0xe0 | (byte)(c >> 12)));
      b.put((byte)(0x80 | ((c & 0xfc0) >> 6)));
      b.put((byte)(0x80 | (c & 0x3f)));
    }
 else {
      b.put((byte)(0xc0 | (byte)(c >> 6)));
      b.put((byte)(0x80 | (c & 0x3f)));
    }
  }
}

public CopyOnWriteArrayList(E[] toCopyIn){
  setArray(Arrays.copyOf(toCopyIn,toCopyIn.length,Object[].class));
}

@Override public StringBuffer format(long number,StringBuffer toAppendTo,FieldPosition pos){
  return toAppendTo.append(getDirectionCode(number));
}

public static void main(String[] args) throws Exception {
  digestCommandLineArguments(args);
  boolean inHeadlessMode=GraphicsEnvironment.isHeadless();
  boolean inConvertMode=isinConvertMode();
  SCXMLGraphEditor editor=startEditor(inConvertMode || inHeadlessMode);
  if (isinConvertMode()) {
    SCXMLEditorActions.convertNoGUI(editor);
  }
 else   if (!inHeadlessMode) {
    String input=getPresetInput();
    if (!StringUtils.isEmptyString(input)) {
      OpenAction open=new OpenAction(new File(input));
      open.actionPerformed(new ActionEvent(editor,0,""));
    }
  }
}

public void testEqualsUnequal2(){
  String a="92948782094488478231212478987482988429808779810457634781384756794987";
  int aScale=-24;
  String b="92948782094488478231212478987482988429808779810457634781384756794987";
  int bScale=13;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  assertFalse(aNumber.equals(bNumber));
}

protected void enableRetransmissionTimer(int tickCount){
  if (isInviteTransaction() && (this instanceof SIPClientTransaction)) {
    retransmissionTimerTicksLeft=tickCount;
  }
 else {
    retransmissionTimerTicksLeft=Math.min(tickCount,getTimerT2());
  }
  retransmissionTimerLastTickCount=retransmissionTimerTicksLeft;
}

private void scheduleMsgForAllConsumers(JetstreamMessage msg){
  if (LOGGER.isDebugEnabled())   LOGGER.debug("Spraying message - " + msg.toString());
  EventConsumerInfo info=null;
  ArrayList<LinkedList<Selection>> weightedList=m_eventTopicRegistry.get(msg.getTopic());
  if (weightedList != null) {
    Iterator<LinkedList<Selection>> weightedItr=weightedList.iterator();
    while (weightedItr.hasNext()) {
      LinkedList<Selection> consumerList=weightedItr.next();
      Iterator<Selection> itr=consumerList.iterator();
      while (itr.hasNext()) {
        info=(EventConsumerInfo)itr.next();
        if (info == null)         continue;
        dispatch(info,msg);
      }
    }
  }
 else {
    if (m_advisoryListener != null) {
      postResendAdvisory(msg);
      m_noConsumerAdvisories.increment();
    }
 else {
      m_totalMsgsDropped.increment();
      m_dropsForNoConsumer.increment();
    }
  }
}

@Override public Void visitDeclared(AnnotatedDeclaredType declaredType,Void aVoid){
  if (pause) {
    return null;
  }
  parents.push(declaredType);
  super.visitDeclared(declaredType,aVoid);
  parents.pop();
  return null;
}

public Class create(){
  setUseCache(false);
  return (Class)super.create(this);
}

public static <T>List<T> tuple(T... objects){
  return Collections.unmodifiableList(list(objects));
}

protected static Set stringArrayToSet(String[] strs){
  int count=strs.length;
  Set set=((count > 0) ? new HashSet(count) : new HashSet());
  for (int i=0; i < count; i++) {
    set.add(strs[i]);
  }
  return set;
}

public boolean authenticate(final OddCallback<AuthToken> callback){
synchronized (syncLock) {
    if (isExpired()) {
      return false;
    }
    if (!authenticating) {
      authenticating=true;
      timer=new Timer();
      TimerTask task=getPollTask(callback);
      timer.schedule(task,new Date(),interval);
      TimerTask expiredTask=getExpiredTask(callback);
      timer.schedule(expiredTask,expirationDate);
    }
    return true;
  }
}

public static void cancelNotificationsForRoomId(String accountId,String roomId){
  Log.d(LOG_TAG,"cancelNotificationsForRoomId " + accountId + " - "+ roomId);
  if (null != mActiveEventStreamService) {
    mActiveEventStreamService.cancelNotifications(accountId,roomId);
  }
}

public static Optional<PlayerProfile> lookup(UUID id){
  if (Bukkit.getPlayer(id) != null) {
    return Optional.of(fromPlayer(Bukkit.getPlayer(id)));
  }
  return lookupProperties(id);
}

static double svd_dmin(double a,double b){
  return Math.min(a,b);
}

private StoragePort selectStoragePort(List<StoragePort> spList){
  Collections.shuffle(spList);
  return spList.get(0);
}

private void assimilateContext(NestingException nestingException){
  Enumeration<ExceptionContext> enumExeptions=nestingException.getExceptionContexts();
  if (enumExeptions.hasMoreElements()) {
    while (enumExeptions.hasMoreElements()) {
      addExceptionContext(enumExeptions.nextElement());
    }
    nestingException.clearContexts();
  }
}

public boolean equals(Object o){
  if (o instanceof AMIdentitySubject) {
    AMIdentitySubject subject=(AMIdentitySubject)o;
    return (subjectValues.equals(subject.subjectValues));
  }
  return (false);
}

public void updateKeyinfo(String realm,String entityName,Map<String,Set<String>> extValues,Map<String,Set<String>> stdValues,boolean isIDP) throws AMConsoleException {
  String keysize=getResult(stdValues,TF_KEY_NAME);
  String algorithm=getResult(stdValues,TF_ALGORITHM);
  Set<String> signingCertAliases;
  Set<String> encryptionCertAliases;
  if (isIDP) {
    encryptionCertAliases=extValues.get(IDP_ENCRYPT_CERT_ALIAS);
    signingCertAliases=extValues.get(IDP_SIGN_CERT_ALIAS);
  }
 else {
    encryptionCertAliases=extValues.get(SP_ENCRYPT_CERT_ALIAS);
    signingCertAliases=extValues.get(SP_SIGN_CERT_ALIAS);
  }
  int keysi=!StringUtils.isEmpty(keysize) ? Integer.parseInt(keysize) : 128;
  String alg=StringUtils.isEmpty(algorithm) ? XMLCipher.AES_128 : algorithm;
  try {
    SAML2MetaSecurityUtils.updateProviderKeyInfo(realm,entityName,signingCertAliases,true,isIDP,alg,keysi);
    SAML2MetaSecurityUtils.updateProviderKeyInfo(realm,entityName,encryptionCertAliases,false,isIDP,alg,keysi);
  }
 catch (  SAML2MetaException e) {
    debug.warning("SAMLv2ModelImpl.updateKeyinfo:",e);
    throw new AMConsoleException(getErrorString(e));
  }
}

public void updateSlider(final double p,final boolean n){
  checkWidget();
  double percentage=p;
  if (step != null) {
    percentage=Math.round(percentage / step) * step;
  }
  this.notify=n;
  if (percentage < 0) {
    percentage=0;
  }
 else   if (percentage > 1) {
    percentage=1;
  }
  final int usefulWidth=getClientArea().width - thumbWidth;
  final int width=(int)Math.round(usefulWidth * percentage);
  moveThumbHorizontally(width);
  previousPosition=percentage;
  this.notify=true;
}

@Override public boolean contains(String identifier){
  return whitelist.contains(identifier);
}

public static final Action[] augmentList(Action[] list1,Action[] list2){
  Hashtable<String,Action> h=new Hashtable<String,Action>();
  for (  Action a : list1) {
    String value=(String)a.getValue(Action.NAME);
    h.put((value != null ? value : ""),a);
  }
  for (  Action a : list2) {
    String value=(String)a.getValue(Action.NAME);
    h.put((value != null ? value : ""),a);
  }
  Action[] actions=new Action[h.size()];
  int index=0;
  for (Enumeration e=h.elements(); e.hasMoreElements(); ) {
    actions[index++]=(Action)e.nextElement();
  }
  return actions;
}

public MVMap<K,V> openVersion(long version){
  if (readOnly) {
    throw DataUtils.newUnsupportedOperationException("This map is read-only; need to call " + "the method on the writable map");
  }
  DataUtils.checkArgument(version >= createVersion,"Unknown version {0}; this map was created in version is {1}",version,createVersion);
  Page newest=null;
  Page r=root;
  if (version >= r.getVersion() && (version == writeVersion || r.getVersion() >= 0 || version <= createVersion || store.getFileStore() == null)) {
    newest=r;
  }
 else {
    Page last=oldRoots.peekFirst();
    if (last == null || version < last.getVersion()) {
      return store.openMapVersion(version,id,this);
    }
    Iterator<Page> it=oldRoots.iterator();
    while (it.hasNext()) {
      Page p=it.next();
      if (p.getVersion() > version) {
        break;
      }
      last=p;
    }
    newest=last;
  }
  MVMap<K,V> m=openReadOnly();
  m.root=newest;
  return m;
}

public DTMDefaultBase(DTMManager mgr,Source source,int dtmIdentity,DTMWSFilter whiteSpaceFilter,XMLStringFactory xstringfactory,boolean doIndexing,int blocksize,boolean usePrevsib,boolean newNameTable){
  int numblocks;
  if (blocksize <= 64) {
    numblocks=DEFAULT_NUMBLOCKS_SMALL;
    m_dtmIdent=new SuballocatedIntVector(4,1);
  }
 else {
    numblocks=DEFAULT_NUMBLOCKS;
    m_dtmIdent=new SuballocatedIntVector(32);
  }
  m_exptype=new SuballocatedIntVector(blocksize,numblocks);
  m_firstch=new SuballocatedIntVector(blocksize,numblocks);
  m_nextsib=new SuballocatedIntVector(blocksize,numblocks);
  m_parent=new SuballocatedIntVector(blocksize,numblocks);
  if (usePrevsib)   m_prevsib=new SuballocatedIntVector(blocksize,numblocks);
  m_mgr=mgr;
  if (mgr instanceof DTMManagerDefault)   m_mgrDefault=(DTMManagerDefault)mgr;
  m_documentBaseURI=(null != source) ? source.getSystemId() : null;
  m_dtmIdent.setElementAt(dtmIdentity,0);
  m_wsfilter=whiteSpaceFilter;
  m_xstrf=xstringfactory;
  m_indexing=doIndexing;
  if (doIndexing) {
    m_expandedNameTable=new ExpandedNameTable();
  }
 else {
    m_expandedNameTable=m_mgrDefault.getExpandedNameTable(this);
  }
  if (null != whiteSpaceFilter) {
    m_shouldStripWhitespaceStack=new BoolStack();
    pushShouldStripWhitespace(false);
  }
}

private boolean lessThanOrEqual(byte[] a,byte[] b){
  int len=Math.min(a.length,b.length);
  for (int i=0; i != len; ++i) {
    if (a[i] != b[i]) {
      return (a[i] & 0xff) < (b[i] & 0xff);
    }
  }
  return len == a.length;
}

protected void clear(){
  parts_.clear();
}

public static boolean isNumber(String s){
  try {
    Integer.valueOf(s);
    return true;
  }
 catch (  Exception e) {
    return false;
  }
}

private boolean isOuterGState(){
  return mGStateStack.size() == 1;
}

public void testCase24(){
  byte rBytes[]={0};
  BigInteger aNumber=BigInteger.ONE;
  BigInteger bNumber=BigInteger.ONE;
  BigInteger result=aNumber.subtract(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals(0,result.signum());
}

void add(SuperCardToast superCardToast){
  mList.add(superCardToast);
}

static public Tasker create(){
  return new Tasker();
}

public static String concernStackString(BlockInfo blockInfo){
  String result="";
  for (  String stackEntry : blockInfo.threadStackEntries) {
    if (Character.isLetter(stackEntry.charAt(0))) {
      String[] lines=stackEntry.split(BlockInfo.SEPARATOR);
      for (      String line : lines) {
        String keyStackString=concernStackString(line);
        if (keyStackString != null) {
          return keyStackString;
        }
      }
      return classSimpleName(lines[0]);
    }
  }
  return result;
}

static String gravityToString(@EdgeGravity int gravity){
  if ((gravity & Gravity.LEFT) == Gravity.LEFT) {
    return "LEFT";
  }
  if ((gravity & Gravity.RIGHT) == Gravity.RIGHT) {
    return "RIGHT";
  }
  if ((gravity & Gravity.BOTTOM) == Gravity.BOTTOM) {
    return "BOTTOM";
  }
  return Integer.toHexString(gravity);
}

public void removeAllRenderers(){
  mRenderers.clear();
}

public static int writeSpeexHeader(byte[] buf,int offset,int sampleRate,int mode,int channels,boolean vbr,int nframes,int packetlength){
  writeString(buf,offset,"Speex   ");
  writeString(buf,offset + 8,"speex-1.2rc");
  System.arraycopy(new byte[11],0,buf,offset + 17,11);
  writeInt(buf,offset + 28,1);
  writeInt(buf,offset + 32,80);
  writeInt(buf,offset + 36,sampleRate);
  writeInt(buf,offset + 40,mode);
  writeInt(buf,offset + 44,4);
  writeInt(buf,offset + 48,channels);
  writeInt(buf,offset + 52,-1);
  writeInt(buf,offset + 56,160 << mode);
  writeInt(buf,offset + 60,vbr ? 1 : 0);
  writeInt(buf,offset + 64,nframes);
  writeInt(buf,offset + 68,0);
  writeInt(buf,offset + 72,packetlength);
  writeInt(buf,offset + 76,0);
  return 80;
}

private static File igniteHadoopConfig(String igniteHome){
  Path path=Paths.get(igniteHome,"modules","hadoop","config");
  if (!Files.exists(path))   path=Paths.get(igniteHome,"config","hadoop");
  if (Files.exists(path))   return path.toFile();
 else   return new File(igniteHome,"docs");
}

private static void attemptRetryOnException(String logPrefix,Request<?> request,VolleyError exception) throws VolleyError {
  RetryPolicy retryPolicy=request.getRetryPolicy();
  int oldTimeout=request.getTimeoutMs();
  try {
    retryPolicy.retry(exception);
  }
 catch (  VolleyError e) {
    request.addMarker(String.format("%s-timeout-giveup [timeout=%s]",logPrefix,oldTimeout));
    throw e;
  }
  request.addMarker(String.format("%s-retry [timeout=%s]",logPrefix,oldTimeout));
}

protected ApproximationLine conservativeKnnDistanceApproximation(int k_max){
  int k_0=k_max;
  double y_1=Double.NEGATIVE_INFINITY;
  double y_kmax=Double.NEGATIVE_INFINITY;
  for (int i=0; i < getNumEntries(); i++) {
    MkCoPEntry entry=getEntry(i);
    ApproximationLine approx=entry.getConservativeKnnDistanceApproximation();
    k_0=Math.min(approx.getK_0(),k_0);
  }
  for (int i=0; i < getNumEntries(); i++) {
    MkCoPEntry entry=getEntry(i);
    ApproximationLine approx=entry.getConservativeKnnDistanceApproximation();
    double entry_y_1=approx.getValueAt(k_0);
    double entry_y_kmax=approx.getValueAt(k_max);
    if (!Double.isInfinite(entry_y_1)) {
      y_1=Math.max(entry_y_1,y_1);
    }
    if (!Double.isInfinite(entry_y_kmax)) {
      y_kmax=Math.max(entry_y_kmax,y_kmax);
    }
  }
  double m=(y_kmax - y_1) / (Math.log(k_max) - Math.log(k_0));
  double t=y_1 - m * Math.log(k_0);
  return new ApproximationLine(k_0,m,t);
}

public final boolean shares_layer(BrdItem p_other){
  int max_first_layer=Math.max(first_layer(),p_other.first_layer());
  int min_last_layer=Math.min(last_layer(),p_other.last_layer());
  return max_first_layer <= min_last_layer;
}

private void updateProgress(String progressLabel,int progress){
  if (myHost != null && ((progress != previousProgress) || (!progressLabel.equals(previousProgressLabel)))) {
    myHost.updateProgress(progressLabel,progress);
  }
  previousProgress=progress;
  previousProgressLabel=progressLabel;
}

@Override public String toString(){
  return buf.toString();
}

public CoapClient(URI uri){
  this(uri.toString());
}

private void zero() throws JSONException {
  if (probe) {
    log(0);
  }
  write(0,1);
}

public static boolean beenDone(TimeUnit timeUnit,long amount,String tag,CountChecker numberOfTimes){
  long timeInMillis=timeUnit.toMillis(amount);
  return beenDone(timeInMillis,tag,numberOfTimes);
}

public static String normalize(String oid){
  return oid.startsWith("OID.") ? oid.substring(4) : oid;
}

public RtcpPacket parseRtcpPacket(Packet packet){
  RtcpCompoundPacket compoundPacket=new RtcpCompoundPacket(packet);
  Vector<RtcpPacket> subpackets=new Vector<RtcpPacket>();
  DataInputStream in=new DataInputStream(new ByteArrayInputStream(compoundPacket.data,compoundPacket.offset,compoundPacket.length));
  try {
    rtcpSession.updateavgrtcpsize(compoundPacket.length);
    int length=0;
    for (int offset=0; offset < compoundPacket.length; offset+=length) {
      int firstbyte=in.readUnsignedByte();
      if ((firstbyte & 0xc0) != 128) {
        return null;
      }
      int type=in.readUnsignedByte();
      length=in.readUnsignedShort();
      length=length + 1 << 2;
      int padlen=0;
      if (offset + length > compoundPacket.length) {
        return null;
      }
      if (offset + length == compoundPacket.length) {
        if ((firstbyte & 0x20) != 0) {
          padlen=compoundPacket.data[compoundPacket.offset + compoundPacket.length - 1] & 0xff;
          if (padlen == 0) {
            return null;
          }
        }
      }
 else       if ((firstbyte & 0x20) != 0) {
        return null;
      }
      int inlength=length - padlen;
      firstbyte&=0x1f;
      RtcpPacket subpacket;
switch (type) {
case RtcpPacket.RTCP_SR:
        stats.numSrPkts++;
      if (inlength != 28 + 24 * firstbyte) {
        stats.numMalformedRtcpPkts++;
        return null;
      }
    RtcpSenderReportPacket srp=new RtcpSenderReportPacket(compoundPacket);
  subpacket=srp;
srp.ssrc=in.readInt();
srp.ntptimestampmsw=(long)in.readInt() & 0xffffffffL;
srp.ntptimestamplsw=(long)in.readInt() & 0xffffffffL;
srp.rtptimestamp=(long)in.readInt() & 0xffffffffL;
srp.packetcount=(long)in.readInt() & 0xffffffffL;
srp.octetcount=(long)in.readInt() & 0xffffffffL;
srp.reports=new RtcpReport[firstbyte];
RtpSource sourceSR=rtcpSession.getMySource();
if (sourceSR != null) {
sourceSR.receivedSenderReport(srp);
}
for (int i=0; i < srp.reports.length; i++) {
RtcpReport report=new RtcpReport();
srp.reports[i]=report;
report.ssrc=in.readInt();
long val=in.readInt();
val&=0xffffffffL;
report.fractionlost=(int)(val >> 24);
report.packetslost=(int)(val & 0xffffffL);
report.lastseq=(long)in.readInt() & 0xffffffffL;
report.jitter=in.readInt();
report.lsr=(long)in.readInt() & 0xffffffffL;
report.dlsr=(long)in.readInt() & 0xffffffffL;
}
notifyRtcpListeners(new RtcpSenderReportEvent(srp));
break;
case RtcpPacket.RTCP_RR:
if (inlength != 8 + 24 * firstbyte) {
stats.numMalformedRtcpPkts++;
return null;
}
RtcpReceiverReportPacket rrp=new RtcpReceiverReportPacket(compoundPacket);
subpacket=rrp;
rrp.ssrc=in.readInt();
rrp.reports=new RtcpReport[firstbyte];
for (int i=0; i < rrp.reports.length; i++) {
RtcpReport report=new RtcpReport();
rrp.reports[i]=report;
report.ssrc=in.readInt();
long val=in.readInt();
val&=0xffffffffL;
report.fractionlost=(int)(val >> 24);
report.packetslost=(int)(val & 0xffffffL);
report.lastseq=(long)in.readInt() & 0xffffffffL;
report.jitter=in.readInt();
report.lsr=(long)in.readInt() & 0xffffffffL;
report.dlsr=(long)in.readInt() & 0xffffffffL;
}
notifyRtcpListeners(new RtcpReceiverReportEvent(rrp));
break;
case RtcpPacket.RTCP_SDES:
RtcpSdesPacket sdesp=new RtcpSdesPacket(compoundPacket);
subpacket=sdesp;
sdesp.sdes=new RtcpSdesBlock[firstbyte];
int sdesoff=4;
for (int i=0; i < sdesp.sdes.length; i++) {
RtcpSdesBlock chunk=new RtcpSdesBlock();
sdesp.sdes[i]=chunk;
chunk.ssrc=in.readInt();
sdesoff+=5;
Vector<RtcpSdesItem> items=new Vector<RtcpSdesItem>();
boolean gotcname=false;
int j;
while ((j=in.readUnsignedByte()) != 0) {
if (j < 1 || j > 8) {
stats.numMalformedRtcpPkts++;
return null;
}
if (j == 1) {
gotcname=true;
}
RtcpSdesItem item=new RtcpSdesItem();
items.addElement(item);
item.type=j;
int sdeslen=in.readUnsignedByte();
item.data=new byte[sdeslen];
in.readFully(item.data);
sdesoff+=2 + sdeslen;
}
if (!gotcname) {
stats.numMalformedRtcpPkts++;
return null;
}
chunk.items=new RtcpSdesItem[items.size()];
items.copyInto(chunk.items);
if ((sdesoff & 3) != 0) {
if (in.skip(4 - (sdesoff & 3)) != 4 - (sdesoff & 3)) {
return null;
}
sdesoff=sdesoff + 3 & -4;
}
}
if (inlength != sdesoff) {
stats.numMalformedRtcpPkts++;
return null;
}
notifyRtcpListeners(new RtcpSdesEvent(sdesp));
break;
case RtcpPacket.RTCP_BYE:
RtcpByePacket byep=new RtcpByePacket(compoundPacket);
subpacket=byep;
byep.ssrc=new int[firstbyte];
for (int i=0; i < byep.ssrc.length; i++) {
byep.ssrc[i]=in.readInt();
}
int reasonlen;
if (inlength > 4 + 4 * firstbyte) {
reasonlen=in.readUnsignedByte();
byep.reason=new byte[reasonlen];
reasonlen++;
}
 else {
reasonlen=0;
byep.reason=new byte[0];
}
reasonlen=reasonlen + 3 & -4;
if (inlength != 4 + 4 * firstbyte + reasonlen) {
stats.numMalformedRtcpPkts++;
return null;
}
in.readFully(byep.reason);
int skipBye=reasonlen - byep.reason.length;
if (in.skip(skipBye) != skipBye) {
return null;
}
notifyRtcpListeners(new RtcpByeEvent(byep));
break;
case RtcpPacket.RTCP_APP:
if (inlength < 12) {
return null;
}
RtcpAppPacket appp=new RtcpAppPacket(compoundPacket);
subpacket=appp;
appp.ssrc=in.readInt();
appp.name=in.readInt();
appp.subtype=firstbyte;
appp.data=new byte[inlength - 12];
in.readFully(appp.data);
int skipApp=inlength - 12 - appp.data.length;
if (in.skip(skipApp) != skipApp) {
return null;
}
notifyRtcpListeners(new RtcpApplicationEvent(appp));
break;
default :
stats.numUnknownTypes++;
return null;
}
subpacket.offset=offset;
subpacket.length=length;
subpackets.addElement(subpacket);
if (in.skipBytes(padlen) != padlen) {
return null;
}
}
}
 catch (Exception e) {
return null;
}
compoundPacket.packets=new RtcpPacket[subpackets.size()];
subpackets.copyInto(compoundPacket.packets);
return compoundPacket;
}

public void reset(){
  initialize();
}

private static void addListenersForReal(final Service service,final Set<Listener> existingListeners,final Listener listener,final Executor executor){
  if (!existingListeners.contains(listener)) {
    existingListeners.add(listener);
    service.addListener(listener,executor);
  }
}

public void prepend(CharSequence s){
  text.insert(0,s);
}

public static void sendResponseWithStatus(HttpServletRequest request,HttpServletResponse response,PrintWriter out,String idpMetaAlias,String idpEntityID,String realm,AuthnRequest authnReq,String relayState,String spEntityID,String firstlevelStatusCodeValue,String secondlevelStatusCodeValue) throws SAML2Exception {
  Response res=SAML2Utils.getErrorResponse(authnReq,firstlevelStatusCodeValue,secondlevelStatusCodeValue,null,idpEntityID);
  StringBuffer returnedBinding=new StringBuffer();
  String acsURL=IDPSSOUtil.getACSurl(spEntityID,realm,authnReq,request,returnedBinding);
  String acsBinding=returnedBinding.toString();
  sendResponse(request,response,out,acsBinding,spEntityID,idpEntityID,idpMetaAlias,realm,relayState,acsURL,res,null);
}

protected void validateDTDattribute(QName element,String attValue,XMLAttributeDecl attributeDecl) throws XNIException {
switch (attributeDecl.simpleType.type) {
case XMLSimpleType.TYPE_ENTITY:
{
      boolean isAlistAttribute=attributeDecl.simpleType.list;
      try {
        if (isAlistAttribute) {
          fValENTITIES.validate(attValue,fValidationState);
        }
 else {
          fValENTITY.validate(attValue,fValidationState);
        }
      }
 catch (      InvalidDatatypeValueException ex) {
        fErrorReporter.reportError(XMLMessageFormatter.XML_DOMAIN,ex.getKey(),ex.getArgs(),XMLErrorReporter.SEVERITY_ERROR);
      }
      break;
    }
case XMLSimpleType.TYPE_NOTATION:
case XMLSimpleType.TYPE_ENUMERATION:
{
    boolean found=false;
    String[] enumVals=attributeDecl.simpleType.enumeration;
    if (enumVals == null) {
      found=false;
    }
 else     for (int i=0; i < enumVals.length; i++) {
      if (attValue == enumVals[i] || attValue.equals(enumVals[i])) {
        found=true;
        break;
      }
    }
    if (!found) {
      StringBuffer enumValueString=new StringBuffer();
      if (enumVals != null)       for (int i=0; i < enumVals.length; i++) {
        enumValueString.append(enumVals[i] + " ");
      }
      fErrorReporter.reportError(XMLMessageFormatter.XML_DOMAIN,"MSG_ATTRIBUTE_VALUE_NOT_IN_LIST",new Object[]{attributeDecl.name.rawname,attValue,enumValueString},XMLErrorReporter.SEVERITY_ERROR);
    }
    break;
  }
case XMLSimpleType.TYPE_ID:
{
  try {
    fValID.validate(attValue,fValidationState);
  }
 catch (  InvalidDatatypeValueException ex) {
    fErrorReporter.reportError(XMLMessageFormatter.XML_DOMAIN,ex.getKey(),ex.getArgs(),XMLErrorReporter.SEVERITY_ERROR);
  }
  break;
}
case XMLSimpleType.TYPE_IDREF:
{
boolean isAlistAttribute=attributeDecl.simpleType.list;
try {
  if (isAlistAttribute) {
    fValIDRefs.validate(attValue,fValidationState);
  }
 else {
    fValIDRef.validate(attValue,fValidationState);
  }
}
 catch (InvalidDatatypeValueException ex) {
  if (isAlistAttribute) {
    fErrorReporter.reportError(XMLMessageFormatter.XML_DOMAIN,"IDREFSInvalid",new Object[]{attValue},XMLErrorReporter.SEVERITY_ERROR);
  }
 else {
    fErrorReporter.reportError(XMLMessageFormatter.XML_DOMAIN,ex.getKey(),ex.getArgs(),XMLErrorReporter.SEVERITY_ERROR);
  }
}
break;
}
case XMLSimpleType.TYPE_NMTOKEN:
{
boolean isAlistAttribute=attributeDecl.simpleType.list;
try {
if (isAlistAttribute) {
  fValNMTOKENS.validate(attValue,fValidationState);
}
 else {
  fValNMTOKEN.validate(attValue,fValidationState);
}
}
 catch (InvalidDatatypeValueException ex) {
if (isAlistAttribute) {
  fErrorReporter.reportError(XMLMessageFormatter.XML_DOMAIN,"NMTOKENSInvalid",new Object[]{attValue},XMLErrorReporter.SEVERITY_ERROR);
}
 else {
  fErrorReporter.reportError(XMLMessageFormatter.XML_DOMAIN,"NMTOKENInvalid",new Object[]{attValue},XMLErrorReporter.SEVERITY_ERROR);
}
}
break;
}
}
}

public static double mean2(Connection conn,double... values){
  conn.getClass();
  double sum=0;
  for (  double x : values) {
    sum+=x;
  }
  return sum / values.length;
}

public boolean hasLongColumnInfo(){
  return this.hasLongColumnInfo;
}

public static String domToString(Document domDoc){
  return domToString(domDoc.getDocumentElement(),false);
}

public static <T>T assertAndCast(Class<? extends T> clazz,Object o){
  assertNotNull(clazz);
  assertNotNull(o);
  assertTrue(clazz.isInstance(o));
  return clazz.cast(o);
}

private String createMismatchMessage(String mismatch,MigrationVersion version,Object applied,Object resolved){
  return String.format("Migration " + mismatch + " mismatch for migration %s\n"+ "-> Applied to database : %s\n"+ "-> Resolved locally    : %s",version,applied,resolved);
}

public static _Fields findByThriftId(int fieldId){
switch (fieldId) {
case 1:
    return IDS;
default :
  return null;
}
}

public int compareTo(Object o){
  Split split=(Split)o;
  BitSet P=getFirstPart();
  BitSet Q=split.getFirstPart();
  int a=P.nextSetBit(0);
  int b=Q.nextSetBit(0);
  while (a > -1 && b > -1) {
    if (a < b)     return -1;
 else     if (a > b)     return 1;
    a=P.nextSetBit(a + 1);
    b=Q.nextSetBit(b + 1);
  }
  if (a < b)   return -1;
 else   if (a > b)   return 1;
  P=getSecondPart();
  Q=split.getSecondPart();
  a=P.nextSetBit(0);
  b=Q.nextSetBit(0);
  while (a > -1 && b > -1) {
    if (a < b)     return -1;
 else     if (a > b)     return 1;
    a=P.nextSetBit(a + 1);
    b=Q.nextSetBit(b + 1);
  }
  if (a < b)   return -1;
 else   if (a > b)   return 1;
 else   return 0;
}

public boolean isMatchingTalkgroup(LTRNetMessage message){
  String talkgroup=message.getTalkgroupID();
  if (talkgroup != null && getToID() != null && talkgroup.contentEquals(getToID())) {
    return true;
  }
  return isMatchingTalkgroup(message.getTalkgroupID());
}

public void put(byte[] source,int index,int length){
  if (mBuffer.capacity() < (mLength + length)) {
    expandBuffer(mLength + length + ADDITIONAL_BUFFER_SIZE);
  }
  mBuffer.put(source,index,length);
  mLength+=length;
}

public void testSetBitNegativeInside4(){
  String as="-4294967295";
  int number=0;
  BigInteger aNumber=new BigInteger(as);
  BigInteger result=aNumber.setBit(number);
  assertEquals(as,result.toString());
}

public Shape modelToView(int pos,Shape a,Position.Bias b) throws BadLocationException {
  return m_view.modelToView(pos,a,b);
}

private static int applyPrecision(int decExp,char[] digits,int nDigits,int prec){
  if (prec >= nDigits || prec < 0) {
    return decExp;
  }
  if (prec == 0) {
    if (digits[0] >= '5') {
      digits[0]='1';
      Arrays.fill(digits,1,nDigits,'0');
      return decExp + 1;
    }
 else {
      Arrays.fill(digits,0,nDigits,'0');
      return decExp;
    }
  }
  int q=digits[prec];
  if (q >= '5') {
    int i=prec;
    q=digits[--i];
    if (q == '9') {
      while (q == '9' && i > 0) {
        q=digits[--i];
      }
      if (q == '9') {
        digits[0]='1';
        Arrays.fill(digits,1,nDigits,'0');
        return decExp + 1;
      }
    }
    digits[i]=(char)(q + 1);
    Arrays.fill(digits,i + 1,nDigits,'0');
  }
 else {
    Arrays.fill(digits,prec,nDigits,'0');
  }
  return decExp;
}

protected void drawCubic(Canvas c,LineDataSet dataSet,List<Entry> entries){
  Transformer trans=mChart.getTransformer(dataSet.getAxisDependency());
  Entry entryFrom=dataSet.getEntryForXIndex(mMinX);
  Entry entryTo=dataSet.getEntryForXIndex(mMaxX);
  int diff=(entryFrom == entryTo) ? 1 : 0;
  int minx=Math.max(dataSet.getEntryPosition(entryFrom) - diff,0);
  int maxx=Math.min(Math.max(minx + 2,dataSet.getEntryPosition(entryTo) + 1),entries.size());
  float phaseX=mAnimator.getPhaseX();
  float phaseY=mAnimator.getPhaseY();
  float intensity=dataSet.getCubicIntensity();
  cubicPath.reset();
  int size=(int)Math.ceil((maxx - minx) * phaseX + minx);
  if (size - minx >= 2) {
    float prevDx=0f;
    float prevDy=0f;
    float curDx=0f;
    float curDy=0f;
    Entry prevPrev=entries.get(minx);
    Entry prev=entries.get(minx);
    Entry cur=entries.get(minx);
    Entry next=entries.get(minx + 1);
    cubicPath.moveTo(cur.getXIndex(),cur.getVal() * phaseY);
    prevDx=(cur.getXIndex() - prev.getXIndex()) * intensity;
    prevDy=(cur.getVal() - prev.getVal()) * intensity;
    curDx=(next.getXIndex() - cur.getXIndex()) * intensity;
    curDy=(next.getVal() - cur.getVal()) * intensity;
    cubicPath.cubicTo(prev.getXIndex() + prevDx,(prev.getVal() + prevDy) * phaseY,cur.getXIndex() - curDx,(cur.getVal() - curDy) * phaseY,cur.getXIndex(),cur.getVal() * phaseY);
    for (int j=minx + 1, count=Math.min(size,entries.size() - 1); j < count; j++) {
      prevPrev=entries.get(j == 1 ? 0 : j - 2);
      prev=entries.get(j - 1);
      cur=entries.get(j);
      next=entries.get(j + 1);
      prevDx=(cur.getXIndex() - prevPrev.getXIndex()) * intensity;
      prevDy=(cur.getVal() - prevPrev.getVal()) * intensity;
      curDx=(next.getXIndex() - prev.getXIndex()) * intensity;
      curDy=(next.getVal() - prev.getVal()) * intensity;
      cubicPath.cubicTo(prev.getXIndex() + prevDx,(prev.getVal() + prevDy) * phaseY,cur.getXIndex() - curDx,(cur.getVal() - curDy) * phaseY,cur.getXIndex(),cur.getVal() * phaseY);
    }
    if (size > entries.size() - 1) {
      prevPrev=entries.get((entries.size() >= 3) ? entries.size() - 3 : entries.size() - 2);
      prev=entries.get(entries.size() - 2);
      cur=entries.get(entries.size() - 1);
      next=cur;
      prevDx=(cur.getXIndex() - prevPrev.getXIndex()) * intensity;
      prevDy=(cur.getVal() - prevPrev.getVal()) * intensity;
      curDx=(next.getXIndex() - prev.getXIndex()) * intensity;
      curDy=(next.getVal() - prev.getVal()) * intensity;
      cubicPath.cubicTo(prev.getXIndex() + prevDx,(prev.getVal() + prevDy) * phaseY,cur.getXIndex() - curDx,(cur.getVal() - curDy) * phaseY,cur.getXIndex(),cur.getVal() * phaseY);
    }
  }
  if (dataSet.isDrawFilledEnabled()) {
    cubicFillPath.reset();
    cubicFillPath.addPath(cubicPath);
    drawCubicFill(mBitmapCanvas,dataSet,cubicFillPath,trans,entryFrom.getXIndex(),entryFrom.getXIndex() + size);
  }
  mRenderPaint.setColor(dataSet.getColor());
  mRenderPaint.setStyle(Paint.Style.STROKE);
  trans.pathValueToPixel(cubicPath);
  mBitmapCanvas.drawPath(cubicPath,mRenderPaint);
  mRenderPaint.setPathEffect(null);
}

public void delete(@NonNull Key key){
  final ReentrantReadWriteLock.WriteLock lock=guard.writeLock();
  lock.lock();
  try {
    if (!readKeys.remove(key))     throw new IllegalArgumentException("key does not exist");
    Files.delete(key.getFile());
  }
 catch (  IOException ex) {
    LOG.log(Level.WARNING,"unable to remove file " + key.getFile(),ex);
  }
 finally {
    lock.unlock();
  }
}

protected Object toType(Calendar value){
  return value.getTime();
}

public boolean onTouchEvent(MotionEvent event){
  try {
    int pointerCount=multiTouchSupported ? (Integer)m_getPointerCount.invoke(event) : 1;
    if (DEBUG)     Log.i("MultiTouch","Got here 1 - " + multiTouchSupported + " "+ mMode+ " "+ handleSingleTouchEvents+ " "+ pointerCount);
    if (mMode == MODE_NOTHING && !handleSingleTouchEvents && pointerCount == 1)     return false;
    if (DEBUG)     Log.i("MultiTouch","Got here 2");
    int action=event.getAction();
    int histLen=event.getHistorySize() / pointerCount;
    for (int histIdx=0; histIdx <= histLen; histIdx++) {
      boolean processingHist=histIdx < histLen;
      if (!multiTouchSupported || pointerCount == 1) {
        if (DEBUG)         Log.i("MultiTouch","Got here 3");
        xVals[0]=processingHist ? event.getHistoricalX(histIdx) : event.getX();
        yVals[0]=processingHist ? event.getHistoricalY(histIdx) : event.getY();
        pressureVals[0]=processingHist ? event.getHistoricalPressure(histIdx) : event.getPressure();
      }
 else {
        if (DEBUG)         Log.i("MultiTouch","Got here 4");
        int numPointers=Math.min(pointerCount,MAX_TOUCH_POINTS);
        if (DEBUG && pointerCount > MAX_TOUCH_POINTS)         Log.i("MultiTouch","Got more pointers than MAX_TOUCH_POINTS");
        for (int ptrIdx=0; ptrIdx < numPointers; ptrIdx++) {
          int ptrId=(Integer)m_getPointerId.invoke(event,ptrIdx);
          pointerIds[ptrIdx]=ptrId;
          xVals[ptrIdx]=(Float)(processingHist ? m_getHistoricalX.invoke(event,ptrIdx,histIdx) : m_getX.invoke(event,ptrIdx));
          yVals[ptrIdx]=(Float)(processingHist ? m_getHistoricalY.invoke(event,ptrIdx,histIdx) : m_getY.invoke(event,ptrIdx));
          pressureVals[ptrIdx]=(Float)(processingHist ? m_getHistoricalPressure.invoke(event,ptrIdx,histIdx) : m_getPressure.invoke(event,ptrIdx));
        }
      }
      decodeTouchEvent(pointerCount,xVals,yVals,pressureVals,pointerIds,processingHist ? MotionEvent.ACTION_MOVE : action,processingHist ? true : action != MotionEvent.ACTION_UP && (action & ((1 << ACTION_POINTER_INDEX_SHIFT) - 1)) != ACTION_POINTER_UP && action != MotionEvent.ACTION_CANCEL,processingHist ? event.getHistoricalEventTime(histIdx) : event.getEventTime());
    }
    return true;
  }
 catch (  Exception e) {
    Log.e("MultiTouchController","onTouchEvent() failed",e);
    return false;
  }
}

public static void storeLocation(Context context,LatLng location){
  SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(context);
  SharedPreferences.Editor editor=prefs.edit();
  editor.putLong(PREFERENCES_LAT,Double.doubleToRawLongBits(location.latitude));
  editor.putLong(PREFERENCES_LNG,Double.doubleToRawLongBits(location.longitude));
  editor.apply();
}

public void writeToFile(String fileName) throws IOException {
  PrintWriter outfile=new PrintWriter(new FileOutputStream(fileName));
  outfile.println("// Output from Histogram class");
  outfile.println("// metaData: ");
  outfile.println("bins " + m_nbins);
  outfile.println("min " + m_min);
  outfile.println("max " + m_max);
  outfile.println("totalEntries " + m_entries);
  outfile.println("underflow " + m_underflow);
  outfile.println("overflow " + m_overflow);
  outfile.println("// binData:");
  for (int i=0; i < m_nbins; i++) {
    outfile.println(i + " " + m_binCenters[i]+ " "+ m_hist[i]);
  }
  outfile.println("// end.");
  outfile.close();
}

public void outdent(){
  final int length=indent.length();
  if (length == 0) {
    throw new IllegalArgumentException(" Outdent() without matching Indent().");
  }
  indent.delete(length - 2,length);
}

public static String extractFromDataMatrix(String code){
  if (code.length() < 16) {
    return null;
  }
  if (code.startsWith("01")) {
    return code.substring(2,16);
  }
  return null;
}

public void paintCurrentValue(Graphics g,Rectangle bounds,boolean hasFocus){
  XPStyle xp=XPStyle.getXP();
  if (xp != null) {
    bounds.x+=2;
    bounds.y+=2;
    bounds.width-=4;
    bounds.height-=4;
  }
 else {
    bounds.x+=1;
    bounds.y+=1;
    bounds.width-=2;
    bounds.height-=2;
  }
  if (!comboBox.isEditable() && xp != null && xp.isSkinDefined(comboBox,Part.CP_READONLY)) {
    ListCellRenderer renderer=comboBox.getRenderer();
    Component c;
    if (hasFocus && !isPopupVisible(comboBox)) {
      c=renderer.getListCellRendererComponent(listBox,comboBox.getSelectedItem(),-1,true,false);
    }
 else {
      c=renderer.getListCellRendererComponent(listBox,comboBox.getSelectedItem(),-1,false,false);
    }
    c.setFont(comboBox.getFont());
    if (comboBox.isEnabled()) {
      c.setForeground(comboBox.getForeground());
      c.setBackground(comboBox.getBackground());
    }
 else {
      c.setForeground(DefaultLookup.getColor(comboBox,this,"ComboBox.disabledForeground",null));
      c.setBackground(DefaultLookup.getColor(comboBox,this,"ComboBox.disabledBackground",null));
    }
    boolean shouldValidate=false;
    if (c instanceof JPanel) {
      shouldValidate=true;
    }
    currentValuePane.paintComponent(g,c,comboBox,bounds.x,bounds.y,bounds.width,bounds.height,shouldValidate);
  }
 else {
    super.paintCurrentValue(g,bounds,hasFocus);
  }
}

@Override public AudioInputStream synthesiseOneSection(String festivalUtt,Voice voice) throws IOException {
  writeRelationFiles(festivalUtt);
  File audioFile=new File(festivalDir.getPath() + File.separator + "mary.wav");
  String festivalVoiceCmd="(voice_" + voice.getName() + ")";
  AudioInputStream sound=festivalSynthesise(audioFile,festivalVoiceCmd);
  return sound;
}

JSONStringer close(Scope empty,Scope nonempty,String closeBracket) throws JSONException {
  Scope context=peek();
  if (context != nonempty && context != empty) {
    throw new JSONException("Nesting problem");
  }
  stack.remove(stack.size() - 1);
  if (context == nonempty) {
    newline();
  }
  out.append(closeBracket);
  return this;
}

public int read(byte[] buffer,int offset,int length) throws IOException {
  log.finest("random-read(0x" + Long.toHexString(getFilePointer()) + ","+ length+ ")");
  return _file.read(buffer,offset,length);
}

public static Pattern createPattern(String[] patterns,boolean isCaseSensitive,boolean isRegexSearch) throws PatternSyntaxException {
  StringBuffer pattern=new StringBuffer();
  for (int i=0; i < patterns.length; i++) {
    if (i > 0) {
      pattern.append('|');
    }
    if (isRegexSearch) {
      pattern.append(patterns[i]);
    }
 else {
      asRegEx(patterns[i],pattern);
    }
  }
  return createPattern(pattern.toString(),isCaseSensitive,true);
}

public void addArc(float latPoint,float lonPoint,int w,int h,float s,float e,LinkProperties properties) throws IOException {
  LinkArc.write(latPoint,lonPoint,0,0,w,h,s,e,properties,link.dos);
}

public void onUndeploy(ClassLoader ldr){
  for (  Class<?> cls : descByCls.keySet()) {
    if (ldr.equals(cls.getClassLoader()))     descByCls.remove(cls);
  }
  U.clearClassCache(ldr);
}

@Override public boolean containsClass(String className) throws IOException {
  boolean containsClass=false;
  String resourceName="WEB-INF/classes/" + className.replace('.','/') + ".class";
  if (getResource(resourceName) != null) {
    containsClass=true;
  }
  for (  String resource : getResources("WEB-INF/lib/")) {
    JarArchive jar=new DefaultJarArchive(getResource(resource));
    if (jar.containsClass(className)) {
      containsClass=true;
    }
  }
  return containsClass;
}

public Tuple[] clearInternal(){
  Tuple[] t=new Tuple[getTupleCount()];
  Iterator iter=tuples();
  for (int i=0; iter.hasNext(); ++i) {
    t[i]=(Tuple)iter.next();
  }
  m_tuples.clear();
  return t;
}

public synchronized void removeTextListener(TextListener cl){
  m_textListeners.remove(cl);
}

private void ensureCapacity(int desiredLongCount){
  if (desiredLongCount <= bits.length) {
    return;
  }
  int newLength=Math.max(desiredLongCount,bits.length * 2);
  long[] newBits=new long[newLength];
  System.arraycopy(bits,0,newBits,0,longCount);
  this.bits=newBits;
}

public boolean matches(String query,String text){
  return text.contains(query);
}

private void findCollapsesFromExistingVertices(List collapsedVertexIndexes){
  for (int i=0; i < edge.size() - 2; i++) {
    Coordinate p0=edge.getCoordinate(i);
    Coordinate p1=edge.getCoordinate(i + 1);
    Coordinate p2=edge.getCoordinate(i + 2);
    if (p0.equals2D(p2)) {
      collapsedVertexIndexes.add(new Integer(i + 1));
    }
  }
}

public void close() throws IOException {
  if (Debug.debugging("binaryfile")) {
    Debug.output("FileInputReader.close()");
  }
  try {
    if (inputFile != null)     inputFile.close();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  inputFile=null;
}

public static boolean checkPoolPropertiesChanged(Set<String> existingValue,Set<String> newValue){
  boolean propertyChanged=false;
  if (existingValue == null && (newValue != null && !newValue.isEmpty())) {
    propertyChanged=true;
  }
 else   if (newValue == null && (existingValue != null && !existingValue.isEmpty())) {
    propertyChanged=true;
  }
 else   if (existingValue != null && newValue != null) {
    if (existingValue.size() != newValue.size() || !(existingValue.containsAll(newValue))) {
      propertyChanged=true;
    }
  }
  return propertyChanged;
}

public static OutputStream leftShift(OutputStream self,InputStream in) throws IOException {
  byte[] buf=new byte[1024];
  while (true) {
    int count=in.read(buf,0,buf.length);
    if (count == -1)     break;
    if (count == 0) {
      Thread.yield();
      continue;
    }
    self.write(buf,0,count);
  }
  self.flush();
  return self;
}

public static boolean gitLocalConfig(final AtomicReference<String> path) throws IOException {
  return gitLocalConfig(Environment.getCurrentDirectory(),path);
}

public void verify(){
  super.verify();
  assertEquals("Sets should be equal",confirmed,collection);
  assertEquals("Sets should have equal hashCodes",confirmed.hashCode(),collection.hashCode());
  Collection set=makeConfirmedCollection();
  Iterator iterator=collection.iterator();
  while (iterator.hasNext()) {
    assertTrue("Set.iterator should only return unique elements",set.add(iterator.next()));
  }
}

public static CGPoint ccpRotateByAngle(CGPoint v,CGPoint pivot,float angle){
  CGPoint r=ccpSub(v,pivot);
  float t=r.x;
  float cosa=(float)Math.cos(angle);
  float sina=(float)Math.sin(angle);
  r.x=t * cosa - r.y * sina;
  r.y=t * sina + r.y * cosa;
  r=ccpAdd(r,pivot);
  return r;
}

private void openContextMenu(MouseEvent e){
  if (e.isPopupTrigger()) {
    Collection<String> streams=new HashSet<>();
    int[] selectedRows=table.getSelectedRows();
    for (    int selectedRow : selectedRows) {
      Follower selected=followers.get(selectedRow);
      streams.add(StringUtil.toLowerCase(selected.name));
    }
    if (!streams.isEmpty()) {
      StreamsContextMenu m=new StreamsContextMenu(streams,contextMenuListener);
      m.show(table,e.getX(),e.getY());
    }
  }
}

public static Workflow.Method expandVolumesMethod(URI storage,URI pool,URI volume,Long size){
  return new Workflow.Method("expandVolume",storage,pool,volume,size);
}

void closeSilently(Socket socket){
  try {
    socket.close();
  }
 catch (  Exception e) {
  }
}

public static boolean equals(byte[] array1,byte[] array2){
  if (array1 == array2)   return true;
  if (array1 == null || array2 == null || array1.length != array2.length)   return false;
  for (int i=0; i < array1.length; i++) {
    if (array1[i] != array2[i])     return false;
  }
  return true;
}

private static String createIdFromJndiLocationIfNotNull(String jndiLocation){
  String id=null;
  if (jndiLocation != null) {
    id=createIdFromJndiLocation(jndiLocation);
  }
  return id;
}

protected Set<Node> closure(DependencyKind... depKinds){
  boolean progress=true;
  Set<Node> closure=new HashSet<Node>();
  closure.add(this);
  while (progress) {
    progress=false;
    for (    Node n1 : new HashSet<Node>(closure)) {
      progress=closure.addAll(n1.getDependencies(depKinds));
    }
  }
  return closure;
}

public Vector(Collection c){
  elementCount=c.size();
  elementData=new Object[(int)Math.min((elementCount * 110L) / 100,Integer.MAX_VALUE)];
  c.toArray(elementData);
}

private void expand(int i){
  if (count + i <= buf.length) {
    return;
  }
  byte[] newbuf=mPool.getBuf((count + i) * 2);
  System.arraycopy(buf,0,newbuf,0,count);
  mPool.returnBuf(buf);
  buf=newbuf;
}

public static <A extends Annotation>A createAnnotation(Class<? extends Annotation> annotationType,AnnotationMember[] elements){
  AnnotationFactory factory=new AnnotationFactory(annotationType,elements);
  return (A)Proxy.newProxyInstance(annotationType.getClassLoader(),new Class[]{annotationType},factory);
}

public LinkingMorphemes(String... aMorphemes){
  morphemes=new ArrayList<String>();
  for (  String string : aMorphemes) {
    morphemes.add(string);
  }
}

@Override public void execute(MetricTimeSeries timeSeries,FunctionValueMap functionValueMap){
  if (timeSeries.size() <= 0) {
    functionValueMap.add(this,Double.NaN);
    return;
  }
  timeSeries.sort();
  double firstValue=timeSeries.getValue(0);
  double lastValue=timeSeries.getValue(timeSeries.size() - 1);
  functionValueMap.add(this,Math.abs(firstValue - lastValue));
}

public static URL[] findResourceBases(String baseResource,ClassLoader loader){
  ArrayList<URL> list=new ArrayList<URL>();
  try {
    Enumeration<URL> urls=loader.getResources(baseResource);
    while (urls.hasMoreElements()) {
      URL url=urls.nextElement();
      list.add(findResourceBase(url,baseResource));
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  return list.toArray(new URL[list.size()]);
}

public WritableRaster createWritableChild(int x,int y,int width,int height,int x0,int y0,int bandList[]){
  if (x < this.minX) {
    throw new RasterFormatException("x lies outside raster");
  }
  if (y < this.minY) {
    throw new RasterFormatException("y lies outside raster");
  }
  if ((x + width < x) || (x + width > this.width + this.minX)) {
    throw new RasterFormatException("(x + width) is outside raster");
  }
  if ((y + height < y) || (y + height > this.height + this.minY)) {
    throw new RasterFormatException("(y + height) is outside raster");
  }
  SampleModel sm;
  if (bandList != null)   sm=sampleModel.createSubsetSampleModel(bandList);
 else   sm=sampleModel;
  int deltaX=x0 - x;
  int deltaY=y0 - y;
  return new ByteBandedRaster(sm,dataBuffer,new Rectangle(x0,y0,width,height),new Point(sampleModelTranslateX + deltaX,sampleModelTranslateY + deltaY),this);
}

protected void moveUpItem(){
  if (selectionTable.getSelectionCount() == 0) {
    return;
  }
  for (  final int index : selectionTable.getSelectionIndices()) {
    if (index == 0) {
      selectionTable.forceFocus();
      return;
    }
  }
  final int[] newSelection=new int[selectionTable.getSelectionCount()];
  int newSelectionIndex=0;
  for (  final TableItem tableItem : selectionTable.getSelection()) {
    final int position=selection.indexOf(tableItem.getData());
    swap(position,position - 1);
    newSelection[newSelectionIndex++]=position - 1;
  }
  redrawTables();
  selectionTable.select(newSelection);
  selectionTable.forceFocus();
}

protected void maybeFireBoundsInvalidated(Rectangle invalidatedArea){
  Drawing d=getDrawing();
  Rectangle2D.Double canvasBounds=new Rectangle2D.Double(0,0,0,0);
  if (d.get(CANVAS_WIDTH) != null) {
    canvasBounds.width+=d.get(CANVAS_WIDTH);
  }
  if (d.get(CANVAS_HEIGHT) != null) {
    canvasBounds.height+=d.get(CANVAS_HEIGHT);
  }
  if (!canvasBounds.contains(invalidatedArea)) {
    fireBoundsInvalidated(invalidatedArea);
  }
}

public DatagramPacket responseReceive() throws IOException {
  byte[] buf=new byte[1024];
  DatagramPacket dp=new DatagramPacket(buf,buf.length);
  datagramSocket.receive(dp);
  return dp;
}

public void suspend(String id){
  TraceState ts=traceState.get();
  if (log.isLoggable(Level.FINEST)) {
    log.finest("Suspend trace state = " + ts + " id = "+ id);
  }
  if (ts != null) {
    setExpire(ts);
    try {
      suspendedStateLock.lock();
      if (suspendedState.containsKey(id) && log.isLoggable(Level.FINEST)) {
        log.finest("WARNING: Overwriting previous suspended trace state = " + suspendedState.get(id) + " id = "+ id);
      }
      suspendedState.put(id,ts);
      traceState.remove();
    }
  finally {
      suspendedStateLock.unlock();
    }
  }
}

public static int hashCode(final Object obj){
  return (obj == null ? 0 : obj.hashCode());
}

public static int maxLevel(){
  return LEVELS - 1;
}

public void propertyChange(PropertyChangeEvent evt){
  repaint();
}

public static boolean removeBeanOrFolder(String path){
  return removePath(path.split(PATH_SEPARATOR),s_directory,0) > 0;
}

private void updateSelection(Mode mode,Projection2D proj,SVGPoint p1,SVGPoint p2){
  DBIDSelection selContext=context.getSelection();
  HashSetModifiableDBIDs selection;
  if (selContext == null || mode == Mode.REPLACE) {
    selection=DBIDUtil.newHashSet();
  }
 else {
    selection=DBIDUtil.newHashSet(selContext.getSelectedIds());
  }
  for (DBIDIter iditer=rel.iterDBIDs(); iditer.valid(); iditer.advance()) {
    double[] vec=proj.fastProjectDataToRenderSpace(rel.get(iditer));
    if (vec[0] >= Math.min(p1.getX(),p2.getX()) && vec[0] <= Math.max(p1.getX(),p2.getX()) && vec[1] >= Math.min(p1.getY(),p2.getY()) && vec[1] <= Math.max(p1.getY(),p2.getY())) {
      if (mode == Mode.INVERT) {
        if (!selection.contains(iditer)) {
          selection.add(iditer);
        }
 else {
          selection.remove(iditer);
        }
      }
 else {
        selection.add(iditer);
      }
    }
  }
  context.setSelection(new DBIDSelection(selection));
}

public EclipseIniLauncher(File installationRoot) throws FileNotFoundException, IOException {
  FileMisc.assertMacApp(installationRoot);
  Objects.requireNonNull(installationRoot);
  eclipseIni=EclipseIni.parseFrom(new File(installationRoot,FileMisc.macContentsEclipse() + "eclipse.ini"));
}

public boolean canAddMember(String realmName,String idType,String containerIDType) throws AMConsoleException {
  boolean can=false;
  try {
    IdType type=IdUtils.getType(idType);
    Set canAdd=type.canAddMembers();
    IdType ctype=IdUtils.getType(containerIDType);
    can=canAdd.contains(ctype);
  }
 catch (  IdRepoException e) {
    debug.warning("EntitiesModelImpl.canAddMember",e);
    throw new AMConsoleException(getErrorString(e));
  }
  return can;
}

private static Node locateAttrParent(Element elem,Node attr){
  Node parent=null;
  Attr check=elem.getAttributeNode(attr.getNodeName());
  if (check == attr)   parent=elem;
  if (null == parent) {
    for (Node node=elem.getFirstChild(); null != node; node=node.getNextSibling()) {
      if (Node.ELEMENT_NODE == node.getNodeType()) {
        parent=locateAttrParent((Element)node,attr);
        if (null != parent)         break;
      }
    }
  }
  return parent;
}

private void defineInternalFrames(UIDefaults d){
  d.put("InternalFrameTitlePane.contentMargins",new InsetsUIResource(0,0,0,0));
  d.put("InternalFrameTitlePane.maxFrameIconSize",new DimensionUIResource(18,18));
  d.put("InternalFrame.contentMargins",new InsetsUIResource(1,6,6,6));
  d.put("InternalFrame:InternalFrameTitlePane.contentMargins",new InsetsUIResource(3,0,3,0));
  d.put("InternalFrame:InternalFrameTitlePane.titleAlignment","CENTER");
  d.put("InternalFrame:InternalFrameTitlePane:\"InternalFrameTitlePane.menuButton\".contentMargins",new InsetsUIResource(0,0,0,0));
  d.put("InternalFrame:InternalFrameTitlePane:\"InternalFrameTitlePane.iconifyButton\".contentMargins",new InsetsUIResource(9,9,9,9));
  d.put("InternalFrame:InternalFrameTitlePane:\"InternalFrameTitlePane.maximizeButton\".contentMargins",new InsetsUIResource(9,9,9,9));
  d.put("InternalFrame:InternalFrameTitlePane:\"InternalFrameTitlePane.closeButton\".contentMargins",new InsetsUIResource(9,9,9,9));
  if (PlatformUtils.isMac()) {
    d.put("frameBaseActive",new Color(0xa8a8a8));
  }
 else {
    d.put("frameBaseActive",new Color(0x96adc4));
  }
  d.put("frameBaseInactive",new Color(0xe0e0e0));
  d.put("frameBorderBase",new Color(0x545454));
  d.put("frameInnerHighlightInactive",new Color(0x55ffffff,true));
  d.put("frameInnerHighlightActive",new Color(0x55ffffff,true));
  d.put("seaGlassTitlePaneButtonEnabledBorder",new Color(0x99000000,true));
  d.put("seaGlassTitlePaneButtonEnabledCorner",new Color(0x26000000,true));
  d.put("seaGlassTitlePaneButtonEnabledInterior",new Color(0x99ffffff,true));
  d.put("seaGlassTitlePaneButtonHoverBorder",new Color(0xe5101010,true));
  d.put("seaGlassTitlePaneButtonHoverCorner",new Color(0x267a7a7a,true));
  d.put("seaGlassTitlePaneButtonHoverInterior",new Color(0xffffff));
  d.put("seaGlassTitlePaneButtonPressedBorder",new Color(0xe50e0e0e,true));
  d.put("seaGlassTitlePaneButtonPressedCorner",new Color(0x876e6e6e,true));
  d.put("seaGlassTitlePaneButtonPressedInterior",new Color(0xe6e6e6));
  String p="InternalFrame";
  String c=PAINTER_PREFIX + "FrameAndRootPainter";
  d.put(p + ".titleFont",new DerivedFont("defaultFont",1.0f,true,null));
  d.put(p + ".States","Enabled,WindowFocused");
  d.put(p + ":InternalFrameTitlePane.WindowFocused",new TitlePaneWindowFocusedState());
  d.put(p + ".WindowFocused",new InternalFrameWindowFocusedState());
  d.put(p + "[Enabled].backgroundPainter",new LazyPainter(c,FrameAndRootPainter.Which.BACKGROUND_ENABLED));
  d.put(p + "[Enabled+WindowFocused].backgroundPainter",new LazyPainter(c,FrameAndRootPainter.Which.BACKGROUND_ENABLED_WINDOWFOCUSED));
  p="InternalFrameTitlePane";
  d.put(p + ".buttonSpacing",0);
  p="InternalFrame:InternalFrameTitlePane";
  d.put(p + "[Enabled].textForeground",d.get("seaGlassDisabledText"));
  d.put(p + "[WindowFocused].textForeground",Color.BLACK);
}

public static double cosQuick(double angle){
  if (USE_JDK_MATH) {
    return STRICT_MATH ? StrictMath.cos(angle) : Math.cos(angle);
  }
  return cosTab[((int)(Math.abs(angle) * SIN_COS_INDEXER + 0.5)) & (SIN_COS_TABS_SIZE - 2)];
}

public static void w(String tag,String msg,Object... args){
  if (sLevel > LEVEL_WARNING) {
    return;
  }
  if (args.length > 0) {
    msg=String.format(msg,args);
  }
  Log.w(tag,msg);
}

public void readSecurityHeader(SipResponse response) throws PayloadException {
  WWWAuthenticateHeader wwwHeader=(WWWAuthenticateHeader)response.getHeader(WWWAuthenticateHeader.NAME);
  AuthenticationInfoHeader infoHeader=(AuthenticationInfoHeader)response.getHeader(AuthenticationInfoHeader.NAME);
  if (wwwHeader != null) {
    mDigest.setRealm(wwwHeader.getRealm());
    mDigest.setOpaque(wwwHeader.getOpaque());
    mDigest.setQop(wwwHeader.getQop());
    mDigest.setNextnonce(wwwHeader.getNonce());
  }
 else   if (infoHeader != null) {
    if (infoHeader.getNextNonce() != null) {
      mDigest.setNextnonce(infoHeader.getNextNonce());
    }
  }
}

private void layoutPanel(){
  setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  setLayout(new BorderLayout());
  add(new LabelledItem("Distribution: ",cbDistribution),BorderLayout.NORTH);
  add(cardPanel,BorderLayout.CENTER);
  cbItemListener.itemStateChanged(new ItemEvent(cbDistribution,ItemEvent.SELECTED,cardPanel,ItemEvent.ITEM_STATE_CHANGED));
  repaint();
  revalidate();
}

@Override public int compareTo(DoubleDoublePair other){
  int fdiff=Double.compare(this.first,other.first);
  if (fdiff != 0) {
    return fdiff;
  }
  return Double.compare(this.second,other.second);
}

private static boolean fileExists(String filePath){
  File file=new File(filePath);
  return file.exists();
}

public static String classVersionToJdk(int version){
  return "1." + Integer.toString(version - 44);
}

private BitSet createBitSet(final String binaryString){
  final BitSet bset=new BitSet(binaryString.length());
  boolean bitTrue=false;
  for (int i=0; i < binaryString.length(); i++) {
    if (binaryString.charAt(i) == '1') {
      bitTrue=true;
    }
 else {
      bitTrue=false;
    }
    bset.set(i,bitTrue);
  }
  return bset;
}

public void flush(){
  buffer.force();
}

public void remove(Product product){
  try {
    solrDao.remove(product.getId());
  }
 catch (  IOException|SolrServerException ex) {
    LOGGER.error("Cannot remove product " + product.getIdentifier() + "from index",ex);
  }
}

public void startBackgroundFetchService(){
  LocalNotification n=new LocalNotification();
  n.setId(BACKGROUND_FETCH_NOTIFICATION_ID);
  cancelLocalNotification(BACKGROUND_FETCH_NOTIFICATION_ID);
  scheduleLocalNotification(n,System.currentTimeMillis() + getPreferredBackgroundFetchInterval() * 1000,0);
}

protected void showModels(boolean show,EpoxyModel<?>... models){
  showModels(Arrays.asList(models),show);
}

static void check(PublicKey key,X509CRL crl) throws CertPathValidatorException {
  X509CRLImpl x509CRLImpl=null;
  try {
    x509CRLImpl=X509CRLImpl.toImpl(crl);
  }
 catch (  CRLException ce) {
    throw new CertPathValidatorException(ce);
  }
  AlgorithmId algorithmId=x509CRLImpl.getSigAlgId();
  check(key,algorithmId);
}

public void testUserDataHandlerNotifiedOfOnlyShallowAdoptions() throws Exception {
  domToString(document);
  RecordingHandler handler=new RecordingHandler();
  name.setUserData("a","apple",handler);
  name.setUserData("b","banana",handler);
  standard.setUserData("c","cat",handler);
  waffles.setUserData("d","dog",handler);
  Document newDocument=builder.newDocument();
  assertSame(name,newDocument.adoptNode(name));
  assertSame(newDocument,name.getOwnerDocument());
  assertSame(newDocument,standard.getOwnerDocument());
  assertSame(newDocument,waffles.getOwnerDocument());
  Set<String> expected=new HashSet<String>();
  expected.add(notification(NODE_ADOPTED,"a","apple",name,null));
  expected.add(notification(NODE_ADOPTED,"b","banana",name,null));
  assertEquals(expected,handler.calls);
}

public void reset(){
  node_list.clear();
}

public String nameList(String dir) throws IOException {
  passive();
  send("NLST " + dir);
  readCode(150);
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  IOUtils.copyAndClose(inData,out);
  readCode(226);
  byte[] data=out.toByteArray();
  return new String(data);
}

public VNXeCommandResult addLunsToLunGroup(String lunGroupId,List<String> luns){
  LunGroupModifyParam param=new LunGroupModifyParam();
  List<LunAddParam> lunAdds=new ArrayList<LunAddParam>();
  for (  String lunId : luns) {
    VNXeBase lun=new VNXeBase(lunId);
    LunAddParam lunAdd=new LunAddParam();
    lunAdd.setLun(lun);
    lunAdds.add(lunAdd);
  }
  param.setLunAdd(lunAdds);
  LunGroupRequests req=new LunGroupRequests(_khClient);
  return req.modifyLunGroupSync(lunGroupId,param);
}

public static InputStream toInputStream(CharSequence input,Charset encoding){
  return toInputStream(input.toString(),encoding);
}

public static ConstantExpression constant(Object value,Class constantType){
  return new ConstantExpression(value,constantType.getName());
}

public static final String toFEN(Position pos){
  StringBuilder ret=new StringBuilder();
  for (int r=7; r >= 0; r--) {
    int numEmpty=0;
    for (int c=0; c < 8; c++) {
      int p=pos.getPiece(Position.getSquare(c,r));
      if (p == Piece.EMPTY) {
        numEmpty++;
      }
 else {
        if (numEmpty > 0) {
          ret.append(numEmpty);
          numEmpty=0;
        }
switch (p) {
case Piece.WKING:
          ret.append('K');
        break;
case Piece.WQUEEN:
      ret.append('Q');
    break;
case Piece.WROOK:
  ret.append('R');
break;
case Piece.WBISHOP:
ret.append('B');
break;
case Piece.WKNIGHT:
ret.append('N');
break;
case Piece.WPAWN:
ret.append('P');
break;
case Piece.BKING:
ret.append('k');
break;
case Piece.BQUEEN:
ret.append('q');
break;
case Piece.BROOK:
ret.append('r');
break;
case Piece.BBISHOP:
ret.append('b');
break;
case Piece.BKNIGHT:
ret.append('n');
break;
case Piece.BPAWN:
ret.append('p');
break;
default :
throw new RuntimeException();
}
}
}
if (numEmpty > 0) {
ret.append(numEmpty);
}
if (r > 0) {
ret.append('/');
}
}
ret.append(pos.whiteMove ? " w " : " b ");
boolean anyCastle=false;
if (pos.h1Castle()) {
ret.append('K');
anyCastle=true;
}
if (pos.a1Castle()) {
ret.append('Q');
anyCastle=true;
}
if (pos.h8Castle()) {
ret.append('k');
anyCastle=true;
}
if (pos.a8Castle()) {
ret.append('q');
anyCastle=true;
}
if (!anyCastle) {
ret.append('-');
}
{
ret.append(' ');
if (pos.getEpSquare() >= 0) {
int x=Position.getX(pos.getEpSquare());
int y=Position.getY(pos.getEpSquare());
ret.append((char)(x + 'a'));
ret.append((char)(y + '1'));
}
 else {
ret.append('-');
}
}
ret.append(' ');
ret.append(pos.halfMoveClock);
ret.append(' ');
ret.append(pos.fullMoveCounter);
return ret.toString();
}

public void endElement(String uri,String localName,String qName) throws SAXException {
  if (!(htmlMode && (uri.equals("http://www.w3.org/1999/xhtml") || uri.equals("")) && (qName.equals("area") || qName.equals("base") || qName.equals("basefont")|| qName.equals("br")|| qName.equals("col")|| qName.equals("frame")|| qName.equals("hr")|| qName.equals("img")|| qName.equals("input")|| qName.equals("isindex")|| qName.equals("link")|| qName.equals("meta")|| qName.equals("param")))) {
    write("</");
    writeName(uri,localName,qName,true);
    write('>');
  }
  if (elementLevel == 1) {
    write('\n');
  }
  cdataElement=false;
  super.endElement(uri,localName,qName);
  nsSupport.popContext();
  elementLevel--;
}

static void findAllVisibleChilds(final ViewGroup viewGroup,final List<View> ordoredChilds){
  for (int childViewIndex=0; childViewIndex < viewGroup.getChildCount(); childViewIndex++) {
    final View childView=viewGroup.getChildAt(childViewIndex);
    if (childView instanceof ViewGroup) {
      findAllVisibleChilds((ViewGroup)childView,ordoredChilds);
      continue;
    }
    if (childView.getVisibility() == View.VISIBLE) {
      ordoredChilds.add(childView);
    }
  }
}

public boolean logModified(Logger log){
  if (isModified()) {
    log.info(_className + " digest is modified");
    return true;
  }
 else   return false;
}

public final void push(Node value){
  int ff=m_firstFree;
  if ((ff + 1) >= m_mapSize) {
    if (null == m_map) {
      m_map=new Node[m_blocksize];
      m_mapSize=m_blocksize;
    }
 else {
      m_mapSize+=m_blocksize;
      Node newMap[]=new Node[m_mapSize];
      System.arraycopy(m_map,0,newMap,0,ff + 1);
      m_map=newMap;
    }
  }
  m_map[ff]=value;
  ff++;
  m_firstFree=ff;
}

public String serialize(Object obj) throws ApiException {
  try {
    if (obj != null)     return mapper.writeValueAsString(obj);
 else     return null;
  }
 catch (  Exception e) {
    throw new ApiException(400,e.getMessage());
  }
}

private void initializeSparseSlider(){
  sparsitySlider.setMajorTickSpacing(10);
  sparsitySlider.setMinorTickSpacing(2);
  sparsitySlider.setPaintTicks(true);
  Hashtable<Integer,JLabel> labelTable2=new Hashtable<Integer,JLabel>();
  labelTable2.put(new Integer(0),new JLabel("0%"));
  labelTable2.put(new Integer(100),new JLabel("100%"));
  sparsitySlider.setLabelTable(labelTable2);
  sparsitySlider.setPaintLabels(true);
}

@Override protected void autoAdjustRange(){
  Plot plot=getPlot();
  if (plot == null) {
    return;
  }
  if (plot instanceof ValueAxisPlot) {
    ValueAxisPlot vap=(ValueAxisPlot)plot;
    Range r=vap.getDataRange(this);
    if (r == null) {
      r=getDefaultAutoRange();
    }
    double upper=r.getUpperBound();
    double lower=Math.max(r.getLowerBound(),this.smallestValue);
    double range=upper - lower;
    double fixedAutoRange=getFixedAutoRange();
    if (fixedAutoRange > 0.0) {
      lower=Math.max(upper - fixedAutoRange,this.smallestValue);
    }
 else {
      double minRange=getAutoRangeMinimumSize();
      if (range < minRange) {
        double expand=(minRange - range) / 2;
        upper=upper + expand;
        lower=lower - expand;
      }
      double logUpper=calculateLog(upper);
      double logLower=calculateLog(lower);
      double logRange=logUpper - logLower;
      logUpper=logUpper + getUpperMargin() * logRange;
      logLower=logLower - getLowerMargin() * logRange;
      upper=calculateValueNoINF(logUpper);
      lower=calculateValueNoINF(logLower);
    }
    setRange(new Range(lower,upper),false,false);
  }
}

public synchronized void add(long value){
  long res=get() + value;
  lb.put(0,res);
}

public void addIVCombination(int attackIV,int defenseIV,int staminaIV){
  int sumIV=attackIV + defenseIV + staminaIV;
  int percentPerfect=Math.round(sumIV / 45f * 100);
  if ((percentPerfect < lowPercent) || (percentPerfect == lowPercent) && (attackIV < lowAttack)) {
    lowPercent=percentPerfect;
    lowAttack=attackIV;
    lowDefense=defenseIV;
    lowStamina=staminaIV;
  }
  if ((percentPerfect > highPercent) || (percentPerfect == highPercent) && (attackIV > highAttack)) {
    highPercent=percentPerfect;
    highAttack=attackIV;
    highDefense=defenseIV;
    highStamina=staminaIV;
  }
  iVCombinations.add(new IVCombination(attackIV,defenseIV,staminaIV));
}

String[] qualify(String cppName){
  if (cppName == null || cppName.length() == 0) {
    return new String[0];
  }
  ArrayList<String> names=new ArrayList<String>();
  String ns=namespace != null ? namespace : "";
  while (ns != null) {
    String name=ns.length() > 0 ? ns + "::" + cppName : cppName;
    TemplateMap map=templateMap;
    while (map != null) {
      if (name.equals(map.getName())) {
        String args="<", separator="";
        for (        String s : map.values()) {
          args+=separator + s;
          separator=",";
        }
        names.add(name + args + (args.endsWith(">") ? " >" : ">"));
        break;
      }
      map=map.parent;
    }
    names.add(name);
    ns=InfoMap.normalize(ns,false,true);
    int i=ns.lastIndexOf("::");
    ns=i >= 0 ? ns.substring(0,i) : ns.length() > 0 ? "" : null;
  }
  for (  String s : usingList) {
    String prefix=InfoMap.normalize(cppName,false,true);
    int i=s.lastIndexOf("::") + 2;
    ns=s.substring(0,i);
    String suffix=s.substring(i);
    if (suffix.length() == 0 || prefix.equals(suffix)) {
      names.add(ns + cppName);
    }
  }
  return names.toArray(new String[names.size()]);
}

@Nullable public Bitmap generateIconForUrl(String url,boolean includePrivateRegistries){
  if (TextUtils.isEmpty(url))   return null;
  String text=getIconTextForUrl(url,includePrivateRegistries);
  if (TextUtils.isEmpty(text))   return null;
  return generateIconForText(text);
}

public boolean containsPrefix(final CharSequence prefix){
  return containsPrefix(prefix,0,prefix.length());
}

public int compareTo(Object p_other){
  if (p_other == null)   return 1;
  if (p_other instanceof BrdComponent) {
    return name.compareToIgnoreCase(((BrdComponent)p_other).name);
  }
  return 1;
}

public void fatal(String message) throws SAXException {
  SAXParseException spe=new SAXParseException(message,this);
  if (errorHandler != null) {
    errorHandler.fatalError(spe);
  }
  throw spe;
}

@Override public void close() throws IOException {
  closed=true;
  def.end();
  in.close();
}

protected final void firePropertyChange(String propertyName,boolean oldValue,boolean newValue){
  PropertyChangeSupport aChangeSupport=this.changeSupport;
  if (aChangeSupport == null) {
    return;
  }
  aChangeSupport.firePropertyChange(propertyName,oldValue,newValue);
}

public void removeScrollingListener(OnWheelScrollListener listener){
  scrollingListeners.remove(listener);
}

private Iterator<BindingSet> joinBindingSetEntry(Map.Entry<String,BindingSet> entry){
  List<Collection<BindingSet>> matches=new ArrayList<>();
  if (type == HashJoinType.CONSTANT_JOIN_VAR) {
    if (bindingJoinVarHash.containsKey(entry.getKey())) {
      matches.add(bindingJoinVarHash.get(entry.getKey()));
    }
  }
 else {
    List<String> valOrders=getValueOrders(entry.getKey());
    for (    String s : valOrders) {
      if (bindingJoinVarHash.containsKey(s)) {
        matches.add(bindingJoinVarHash.get(s));
      }
    }
  }
  if (matches.size() == 0) {
    return Collections.emptyIterator();
  }
 else {
    return new BindingSetCollectionsJoinIterator(entry.getValue(),matches);
  }
}

@Override public void test(Number t) throws ParameterException {
  if (t.doubleValue() >= constraintValue.doubleValue()) {
    throw new WrongParameterValueException("Parameter Constraint Error: \n" + "The parameter value specified has to be less than " + constraintValue.toString() + ". (current value: "+ t.doubleValue()+ ")\n");
  }
}

public void testFindUsersActiveDirectory() throws Exception {
  LdapManager mgr=getLdapAD();
  List ret=null;
  AndFilter filter=new AndFilter();
  filter.and(new LikeFilter(mgr.getUsersReturningAttribute(LdapUserAttributeConstants.LDAP_USER_ATTRIBUTE_GIVEN_NAME),"*a*"));
  try {
    LdapSearchManagerVO searchMgrVO=new LdapSearchManagerVO();
    searchMgrVO.setFilter(filter);
    searchMgrVO.setAddUserClasses(true);
    ret=mgr.findUsers(searchMgrVO);
  }
 catch (  Exception e) {
  }
  assertEquals(22,ret.size());
}

public boolean reserve(Object object){
  reservedIdsLock.lock();
  if (reservedObjects.contains(object)) {
    reservedIdsLock.unlock();
    return false;
  }
  reservedObjects.add(object);
  reservedIdsLock.unlock();
  return true;
}

private boolean saveStoredJPEGImage(String file_name,final BufferedImage image,final boolean file_name_is_path){
  if (!file_name_is_path) {
    file_name=temp_dir + key + file_name;
  }
  final String s=file_name.toLowerCase();
  if (!s.endsWith(".jpg") && !s.endsWith(".jpeg")) {
    file_name+=".jpg";
  }
  try {
    DefaultImageHelper.write(image,"jpg",file_name);
    tempFileNames.put(file_name,"#");
  }
 catch (  final Exception e) {
    LogWriter.writeLog("Exception " + e + " writing image "+ image+ " as "+ file_name);
  }
  return false;
}

public static ScheduledExecutorService createScheduler(){
  final ScheduledExecutorService scheduler=Executors.newScheduledThreadPool(1,new DaemonThreadFactory(DEFAULT_SCHEDULER_NAME));
  SCHEDULERS.add(scheduler);
  return scheduler;
}

public LinkedList<Patch> patch_make(String text1,String text2){
  if (text1 == null || text2 == null) {
    throw new IllegalArgumentException("Null inputs. (patch_make)");
  }
  LinkedList<Diff> diffs=diff_main(text1,text2,true);
  if (diffs.size() > 2) {
    diff_cleanupSemantic(diffs);
    diff_cleanupEfficiency(diffs);
  }
  return patch_make(text1,diffs);
}

protected static void fail(){
  System.exit(1);
}

private Rect calcBounds(int index,Paint paint){
  Rect bounds=new Rect();
  CharSequence title=getTitle(index);
  bounds.right=(int)paint.measureText(title,0,title.length());
  bounds.bottom=(int)(paint.descent() - paint.ascent());
  return bounds;
}

private void printArguments(List<Expression> args,Object arg){
  printer.print("(");
  if (args != null) {
    for (Iterator<Expression> i=args.iterator(); i.hasNext(); ) {
      Expression e=i.next();
      e.accept(this,arg);
      if (i.hasNext()) {
        printer.print(", ");
      }
    }
  }
  printer.print(")");
}

private void calculateDelta(double[] b){
  double numerator=0.0;
  double denominator=0.0;
  double sign=1.0;
  for (int k=0; k < b.length; k++) {
    if (k < mExtremalIndices.size()) {
      int extremalIndex=mExtremalIndices.get(k);
      numerator+=(b[k] * mGrid.getDesiredResponse()[extremalIndex]);
      denominator+=b[k] * sign / mGrid.getWeight()[extremalIndex];
      sign=-sign;
    }
 else {
      mLog.error("Something went wrong -- the length of b exceeds the set of extremal indices");
    }
  }
  mDelta=numerator / denominator;
}

public static float buildFloat(int mant,int exp){
  if (exp < -125 || mant == 0) {
    return 0.0f;
  }
  if (exp >= 128) {
    return (mant > 0) ? Float.POSITIVE_INFINITY : Float.NEGATIVE_INFINITY;
  }
  if (exp == 0) {
    return mant;
  }
  if (mant >= (1 << 26)) {
    mant++;
  }
  return (float)((exp > 0) ? mant * pow10[exp] : mant / pow10[-exp]);
}

private void addFallbackSelector(Properties settings,ProtocolDispatchSelector ps){
  String proxy=settings.getProperty("default");
  if (proxy != null) {
    ps.setFallbackSelector(ProxyUtil.parseProxySettings(proxy));
  }
}

private void readData() throws IOException {
  while (!isClosed) {
    int code=is.read();
switch (code) {
case ' ':
case '\t':
case '\n':
case '\r':
      break;
case 'C':
{
      int channel=(is.read() << 8) + is.read();
      inputReady[channel]=true;
      return;
    }
case 'E':
{
    int channel=(is.read() << 8) + is.read();
    int status=(is.read() << 8) + is.read();
    inputReady[channel]=true;
    return;
  }
case -1:
close();
return;
default :
close();
return;
}
}
return;
}

@Override protected boolean validateConnection(Connection conn){
  try {
    return (!conn.isClosed());
  }
 catch (  SQLException e) {
    return false;
  }
}

public static byte[] decode(String s){
  return decode(s.toCharArray());
}

public PacProxySelector(String pacUrl){
  if (pacUrl == null) {
    throw new NullPointerException();
  }
  this.pacUrl=pacUrl;
}

public void deleteAlertingDefinition(AlertingDefinition alertingDefinition) throws IOException {
  String id=alertingDefinition.getId();
  AlertingDefinition local=existingAlertingDefinitions.remove(id);
  if (local != null) {
    Files.deleteIfExists(pathResolver.getAlertingDefinitionFilePath(local));
    eventPublisher.publishEvent(new AbstractAlertingDefinitionEvent.AlertingDefinitionDeletedEvent(this,local));
  }
}

public void addFile(File file){
  fileList.addFirst(file);
}

private void pullEvent(){
  final int newScrollValue;
  final int itemDimension;
  final float initialMotionValue, lastMotionValue;
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    initialMotionValue=mInitialMotionX;
  lastMotionValue=mLastMotionX;
break;
case VERTICAL:
default :
initialMotionValue=mInitialMotionY;
lastMotionValue=mLastMotionY;
break;
}
switch (mCurrentMode) {
case PULL_FROM_END:
newScrollValue=Math.round(Math.max(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getFooterSize();
break;
case PULL_FROM_START:
default :
newScrollValue=Math.round(Math.min(initialMotionValue - lastMotionValue,0) / FRICTION);
itemDimension=getHeaderSize();
break;
}
setHeaderScroll(newScrollValue);
if (newScrollValue != 0 && !isRefreshing()) {
float scale=Math.abs(newScrollValue) / (float)itemDimension;
switch (mCurrentMode) {
case PULL_FROM_END:
mFooterLayout.onPull(scale);
break;
case PULL_FROM_START:
default :
mHeaderLayout.onPull(scale);
break;
}
if (mState != State.PULL_TO_REFRESH && itemDimension >= Math.abs(newScrollValue)) {
setState(State.PULL_TO_REFRESH);
}
 else if (mState != State.RELEASE_TO_REFRESH && itemDimension < Math.abs(newScrollValue)) {
setState(State.RELEASE_TO_REFRESH);
}
}
}

public boolean requiresConnection(){
  return true;
}

public static double tile2lat(int y,int z){
  double n=Math.PI - (2.0 * Math.PI * y) / Math.pow(2.0,z);
  return Math.toDegrees(Math.atan(Math.sinh(n)));
}

@Override public synchronized TimeSeriesCollection updateCollection(){
  return super.updateCollection();
}

public char skip(int n){
  _pos+=n;
  if (_length <= _pos) {
    _pos=_string.length();
    return DONE;
  }
 else   return _string.charAt(_pos);
}

public void writeToObject(Object object){
  try {
    Method method=BeanUtils.getWriteMethod(object.getClass(),getName(),getType());
    if (method != null) {
      method.invoke(object,new Object[]{getValue()});
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}

private boolean shouldInform(LocalClientInfo info){
  long now=System.currentTimeMillis();
  if (now < _nextAllowedTime)   return false;
  Long allowed=BUG_TIMES.get(info.getParsedBug());
  return allowed == null || now >= allowed.longValue();
}

public void post(Runnable runnable){
synchronized (mQueue) {
    mQueue.add(runnable);
    if (mQueue.size() == 1) {
      scheduleNextLocked();
    }
  }
}

public static void clear(){
  _clearCount++;
  _stateCount=0;
  _state="";
  _featureMap.clear();
}

public static String toStringPretty(JsonObject jsonObj,int level){
  StringBuffer buf=new StringBuffer();
  buf.append("{");
  buf.append(fieldsToStringPretty(jsonObj,level + 1));
  buf.append("}");
  return buf.toString();
}

public boolean isLaunchedFromJar(){
  return (lstJarFile.size() > 0);
}

protected void savePassCodeAndExit(){
  Intent resultIntent=new Intent();
  resultIntent.putExtra(KEY_PASSCODE,mPassCodeDigits[0] + mPassCodeDigits[1] + mPassCodeDigits[2]+ mPassCodeDigits[3]);
  setResult(RESULT_OK,resultIntent);
  finish();
}

public LogStream print(double d){
  if (ps != null) {
    indent();
    lineBuffer.append(d);
  }
  return this;
}

public static void deleteDirectoryRecursively(Context context,File f,Boolean onlyContent) throws IOException {
  if (f.isDirectory()) {
    for (    File c : f.listFiles()) {
      deleteDirectoryRecursively(context,c,false);
    }
  }
  if (!onlyContent) {
    if (!f.delete()) {
      throw new IOException("Failed to delete file: " + f);
    }
    context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,Uri.parse("file://" + f.getAbsolutePath())));
  }
}

public static String nodeSubTypeToString(int subType){
  String val="?";
switch (subType) {
case NodeRepresentation.AND_TYPE:
    val="AND_TYPE";
  break;
case NodeRepresentation.OR_TYPE:
val="OR_TYPE";
break;
case NodeRepresentation.IMPLIES_TYPE:
val="IMPLIES_TYPE";
break;
case NodeRepresentation.FORALL_TYPE:
val="FORALL_TYPE";
break;
case NodeRepresentation.EXISTS_TYPE:
val="EXISTS_TYPE";
break;
case NodeRepresentation.SQSUB_TYPE:
val="SQSUB_TYPE";
break;
case NodeRepresentation.OTHER_TYPE:
val="OTHER_TYPE";
break;
}
return val;
}

public static void disposeGraphicsConfig(long pConfigInfo){
  OGLRenderQueue rq=getInstance();
  rq.lock();
  try {
    OGLContext.setScratchSurface(pConfigInfo);
    RenderBuffer buf=rq.getBuffer();
    rq.ensureCapacityAndAlignment(12,4);
    buf.putInt(DISPOSE_CONFIG);
    buf.putLong(pConfigInfo);
    rq.flushNow();
  }
  finally {
    rq.unlock();
  }
}

private void addTerm(String term){
  Integer index=termToIndex.get(term);
  if (index == null) {
synchronized (this) {
      index=termToIndex.get(term);
      if (index == null) {
        index=Integer.valueOf(termIndexCounter.getAndIncrement());
        termToIndex.put(term,index);
      }
    }
  }
}

private void safeBottomView(){
  Status status=getOpenStatus();
  ViewGroup bottom=getBottomView();
  if (status == Status.Close) {
    if (bottom.getVisibility() != INVISIBLE)     bottom.setVisibility(INVISIBLE);
  }
 else {
    if (bottom.getVisibility() != VISIBLE)     bottom.setVisibility(VISIBLE);
  }
}

public static String revertNewLines(String string){
  int index;
  StringBuffer newStringBuffer=new StringBuffer();
  while ((index=string.indexOf("\\n")) != -1) {
    if (index > 0) {
      newStringBuffer.append(string.substring(0,index));
    }
    newStringBuffer.append('\n');
    if ((index + 2) < string.length()) {
      string=string.substring(index + 2);
    }
 else {
      string="";
    }
  }
  newStringBuffer.append(string);
  string=newStringBuffer.toString();
  newStringBuffer=new StringBuffer();
  while ((index=string.indexOf("\\r")) != -1) {
    if (index > 0) {
      newStringBuffer.append(string.substring(0,index));
    }
    newStringBuffer.append('\r');
    if ((index + 2) < string.length()) {
      string=string.substring(index + 2);
    }
 else {
      string="";
    }
  }
  newStringBuffer.append(string);
  return newStringBuffer.toString();
}

@Override public List<Period> generatePeriods(DateTimeUnit dateTimeUnit){
  Calendar cal=getCalendar();
  boolean past=dateTimeUnit.getMonth() >= (getBaseMonth() + 1);
  List<Period> periods=Lists.newArrayList();
  dateTimeUnit=cal.minusYears(dateTimeUnit,past ? 5 : 6);
  dateTimeUnit.setMonth(getBaseMonth() + 1);
  dateTimeUnit.setDay(1);
  Calendar calendar=getCalendar();
  for (int i=0; i < 11; i++) {
    periods.add(createPeriod(dateTimeUnit,cal));
    dateTimeUnit=calendar.plusYears(dateTimeUnit,1);
  }
  return periods;
}

public final boolean isDragging(){
  return dragging;
}

@Override public void escape(char[] buffer,int start,int length,boolean isAttributeValue,Writer outputWriter) throws IOException {
  for (int i=start; i < start + length; i++) {
    char ch=buffer[i];
    if (ch == '&') {
      outputWriter.write("&amp;");
      continue;
    }
    if (ch == '<') {
      outputWriter.write("&lt;");
      continue;
    }
    if (ch == '>') {
      outputWriter.write("&gt;");
      continue;
    }
    if (ch == '"' && isAttributeValue) {
      outputWriter.write("&quot;");
      continue;
    }
    if (ch == '\'' && isAttributeValue) {
      outputWriter.write("&apos;");
      continue;
    }
    if (isXml11RestrictedCharacter(ch)) {
      outputWriter.write("&#x");
      outputWriter.write(Integer.toHexString(ch));
      outputWriter.write(";");
      continue;
    }
    outputWriter.write(ch);
  }
}

void encrypt(ByteBuffer src) throws SSLException {
  if (!handshakeComplete) {
    throw new IllegalStateException();
  }
  if (!src.hasRemaining()) {
    if (outNetBuffer == null) {
      outNetBuffer=emptyBuffer;
    }
    return;
  }
  createOutNetBuffer(src.remaining());
  while (src.hasRemaining()) {
    SSLEngineResult result=sslEngine.wrap(src,outNetBuffer.buf());
    if (result.getStatus() == SSLEngineResult.Status.OK) {
      if (result.getHandshakeStatus() == SSLEngineResult.HandshakeStatus.NEED_TASK) {
        doTasks();
      }
    }
 else     if (result.getStatus() == SSLEngineResult.Status.BUFFER_OVERFLOW) {
      outNetBuffer.capacity(outNetBuffer.capacity() << 1);
      outNetBuffer.limit(outNetBuffer.capacity());
    }
 else {
      throw new SSLException("SSLEngine error during encrypt: " + result.getStatus() + " src: "+ src+ "outNetBuffer: "+ outNetBuffer);
    }
  }
  outNetBuffer.flip();
}

public boolean codeMatches(String queryCode){
  int length=id.length();
  if (Debug.debugging("symbology.detail")) {
    Debug.output("Checking " + queryCode + " against |"+ id+ "| starting at "+ startIndex+ " for "+ length);
  }
  return queryCode.regionMatches(true,startIndex,id,0,length);
}

private static int parseNotificationId(String id){
  try {
    return Integer.parseInt(id);
  }
 catch (  NumberFormatException nfe) {
    Log.w(TAG,"Exception while parsing download id:" + id);
    return -1;
  }
}

private <T>Property<T> prepare(String key,Property<T> property,T initialValue){
  final ChangeListener<T> change=null;
  property.setValue(initialValue);
  property.addListener(change);
  change.changed(property,null,initialValue);
  return property;
}

protected void readTillEOL() throws IOException {
  while (m_Tokenizer.nextToken() != StreamTokenizer.TT_EOL) {
  }
  m_Tokenizer.pushBack();
}

@Override public void clearAnswer(){
  DateTime ldt=new DateTime();
  mTimePicker.setCurrentHour(ldt.getHourOfDay());
  mTimePicker.setCurrentMinute(ldt.getMinuteOfHour());
}

public String readLine() throws IOException {
  return keepCarriageReturns ? readUntilNewline() : reader.readLine();
}

@Override public void doWork() throws OperatorException {
  super.doWork();
  runVectorOutput.deliver(runVector);
}

public Shape createArrowUp(final double x,final double y,final double w,final double h){
  path.reset();
  path.moveTo(x,y + h);
  path.lineTo(x + w / 2,y);
  path.lineTo(x + w,y + h);
  path.closePath();
  return path;
}

protected int generateBinomial(int n,double p){
  final double C1_3=0.33333333333333333;
  final double C5_8=0.62500000000000000;
  final double C1_6=0.16666666666666667;
  final int DMAX_KM=20;
  int bh, i, K, Km, nK;
  double f, rm, U, V, X, T, E;
  if (n != n_last || p != p_last) {
    n_last=n;
    p_last=p;
    par=Math.min(p,1.0 - p);
    q=1.0 - par;
    np=n * par;
    if (np <= 0.0)     return -1;
    rm=np + par;
    m=(int)rm;
    if (np < 10) {
      p0=Math.exp(n * Math.log(q));
      bh=(int)(np + 10.0 * Math.sqrt(np * q));
      b=Math.min(n,bh);
    }
 else {
      rc=(n + 1.0) * (pq=par / q);
      ss=np * q;
      i=(int)(2.195 * Math.sqrt(ss) - 4.6 * q);
      xm=m + 0.5;
      xl=(double)(m - i);
      xr=(double)(m + i + 1L);
      f=(rm - xl) / (rm - xl * par);
      ll=f * (1.0 + 0.5 * f);
      f=(xr - rm) / (xr * q);
      lr=f * (1.0 + 0.5 * f);
      c=0.134 + 20.5 / (15.3 + (double)m);
      p1=i + 0.5;
      p2=p1 * (1.0 + c + c);
      p3=p2 + c / ll;
      p4=p3 + c / lr;
    }
  }
  if (np < 10) {
    double pk;
    K=0;
    pk=p0;
    U=randomGenerator.raw();
    while (U > pk) {
      ++K;
      if (K > b) {
        U=randomGenerator.raw();
        K=0;
        pk=p0;
      }
 else {
        U-=pk;
        pk=(double)(((n - K + 1) * par * pk) / (K * q));
      }
    }
    return ((p > 0.5) ? (n - K) : K);
  }
  for (; ; ) {
    V=randomGenerator.raw();
    if ((U=randomGenerator.raw() * p4) <= p1) {
      K=(int)(xm - U + p1 * V);
      return (p > 0.5) ? (n - K) : K;
    }
    if (U <= p2) {
      X=xl + (U - p1) / c;
      if ((V=V * c + 1.0 - Math.abs(xm - X) / p1) >= 1.0)       continue;
      K=(int)X;
    }
 else     if (U <= p3) {
      if ((X=xl + Math.log(V) / ll) < 0.0)       continue;
      K=(int)X;
      V*=(U - p2) * ll;
    }
 else {
      if ((K=(int)(xr - Math.log(V) / lr)) > n)       continue;
      V*=(U - p3) * lr;
    }
    if ((Km=Math.abs(K - m)) <= DMAX_KM || Km + Km + 2L >= ss) {
      f=1.0;
      if (m < K) {
        for (i=m; i < K; ) {
          if ((f*=(rc / ++i - pq)) < V)           break;
        }
      }
 else {
        for (i=K; i < m; ) {
          if ((V*=(rc / ++i - pq)) > f)           break;
        }
      }
      if (V <= f)       break;
    }
 else {
      V=Math.log(V);
      T=-Km * Km / (ss + ss);
      E=(Km / ss) * ((Km * (Km * C1_3 + C5_8) + C1_6) / ss + 0.5);
      if (V <= T - E)       break;
      if (V <= T + E) {
        if (n != n_prev || par != p_prev) {
          n_prev=n;
          p_prev=par;
          nm=n - m + 1;
          ch=xm * Math.log((m + 1.0) / (pq * nm)) + Arithmetic.stirlingCorrection(m + 1) + Arithmetic.stirlingCorrection(nm);
        }
        nK=n - K + 1;
        if (V <= ch + (n + 1.0) * Math.log((double)nm / (double)nK) + (K + 0.5) * Math.log(nK * pq / (K + 1.0)) - Arithmetic.stirlingCorrection(K + 1) - Arithmetic.stirlingCorrection(nK))         break;
      }
    }
  }
  return (p > 0.5) ? (n - K) : K;
}

public SimpleUserContext(AuthenticationProvider authProvider,String username,Map<String,GuacamoleConfiguration> configs){
  Collection<String> connectionIdentifiers=new ArrayList<String>(configs.size());
  Collection<String> connectionGroupIdentifiers=Collections.singleton(ROOT_IDENTIFIER);
  Collection<Connection> connections=new ArrayList<Connection>(configs.size());
  for (  Map.Entry<String,GuacamoleConfiguration> configEntry : configs.entrySet()) {
    String identifier=configEntry.getKey();
    GuacamoleConfiguration config=configEntry.getValue();
    Connection connection=new SimpleConnection(identifier,identifier,config);
    connection.setParentIdentifier(ROOT_IDENTIFIER);
    connections.add(connection);
    connectionIdentifiers.add(identifier);
  }
  this.rootGroup=new SimpleConnectionGroup(ROOT_IDENTIFIER,ROOT_IDENTIFIER,connectionIdentifiers,Collections.<String>emptyList());
  this.self=new SimpleUser(username,connectionIdentifiers,connectionGroupIdentifiers);
  this.userDirectory=new SimpleUserDirectory(self);
  this.connectionDirectory=new SimpleConnectionDirectory(connections);
  this.connectionGroupDirectory=new SimpleConnectionGroupDirectory(Collections.singleton(this.rootGroup));
  this.authProvider=authProvider;
}

public void reset(){
  visitedGet.clear();
  visitedPost.clear();
  for (  SpiderParser parser : parsers) {
    parser.removeSpiderParserListener(this);
  }
}

private static float CallStaticFloatMethodV(JNIEnvironment env,int classJREF,int methodID,Address argAddress) throws Exception {
  if (traceJNI)   VM.sysWrite("JNI called: CallStaticFloatMethodV  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    Object returnObj=JNIHelpers.invokeWithVarArg(methodID,argAddress,TypeReference.Float);
    return Reflection.unwrapFloat(returnObj);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
    return 0f;
  }
}

public NamedList<Object> toNamedList(){
  final SimpleOrderedMap<Object> result=new SimpleOrderedMap<>();
  for (Iterator<String> it=getParameterNamesIterator(); it.hasNext(); ) {
    final String name=it.next();
    final String[] values=getParams(name);
    if (values.length == 1) {
      result.add(name,values[0]);
    }
 else {
      result.add(name,values);
    }
  }
  return result;
}

private boolean isRepresentingTab(String text){
  if (text == null)   return false;
  if (isInsertingSpacesForTab()) {
    if (text.length() == 0 || text.length() > getVisualTabLengthPreference())     return false;
    for (int i=0; i < text.length(); i++) {
      if (text.charAt(i) != ' ')       return false;
    }
    return true;
  }
 else   return text.length() == 1 && text.charAt(0) == '\t';
}

public MonitorThread(String name){
  super(name);
}

public void removeDragListener(DragListener l){
  mListeners.remove(l);
}

@Override public UnitsRelations init(ProcessingEnvironment env){
  elements=env.getElementUtils();
  m=UnitsRelationsTools.buildAnnoMirrorWithDefaultPrefix(env,m.class);
  km=UnitsRelationsTools.buildAnnoMirrorWithSpecificPrefix(env,m.class,Prefix.kilo);
  mm=UnitsRelationsTools.buildAnnoMirrorWithSpecificPrefix(env,m.class,Prefix.milli);
  m2=UnitsRelationsTools.buildAnnoMirrorWithNoPrefix(env,m2.class);
  km2=UnitsRelationsTools.buildAnnoMirrorWithNoPrefix(env,km2.class);
  mm2=UnitsRelationsTools.buildAnnoMirrorWithNoPrefix(env,mm2.class);
  s=UnitsRelationsTools.buildAnnoMirrorWithDefaultPrefix(env,s.class);
  h=UnitsRelationsTools.buildAnnoMirrorWithNoPrefix(env,h.class);
  mPERs=UnitsRelationsTools.buildAnnoMirrorWithNoPrefix(env,mPERs.class);
  kmPERh=UnitsRelationsTools.buildAnnoMirrorWithNoPrefix(env,kmPERh.class);
  mPERs2=UnitsRelationsTools.buildAnnoMirrorWithNoPrefix(env,mPERs2.class);
  return this;
}

public static String[] toStringArray(Collection<String> collection){
  if (collection == null) {
    return null;
  }
  return collection.toArray(new String[collection.size()]);
}

public void persist(RepositoryProxyCache proxyCache){
  persist(proxyCache,proxyCache.getFileName());
}

public ArrayList<ChartSet> prepareAnimation(ChartView chartView,ArrayList<float[][]> start,ArrayList<float[][]> end){
  final int nSets=start.size();
  final int nEntries=start.get(0).length;
  mChartView=chartView;
  mCurrentDuration=new long[nEntries];
  if (mOrder == null) {
    mOrder=new int[nEntries];
    for (int i=0; i < mOrder.length; i++)     mOrder[i]=i;
  }
  float noOverlapDuration=mGlobalDuration / nEntries;
  mDuration=(int)(noOverlapDuration + (mGlobalDuration - noOverlapDuration) * mOverlapingFactor);
  Path path;
  mPathMeasures=new PathMeasure[nSets][nEntries];
  for (int i=0; i < nSets; i++) {
    for (int j=0; j < nEntries; j++) {
      path=new Path();
      path.moveTo(start.get(i)[j][0],start.get(i)[j][1]);
      path.lineTo(end.get(i)[j][0],end.get(i)[j][1]);
      mPathMeasures[i][j]=new PathMeasure(path,false);
    }
  }
  mInitTime=new long[nEntries];
  mGlobalInitTime=System.currentTimeMillis();
  long noOverlapInitTime;
  for (int i=0; i < nEntries; i++) {
    noOverlapInitTime=mGlobalInitTime + (i * (mGlobalDuration / nEntries));
    mInitTime[mOrder[i]]=(noOverlapInitTime - ((long)(mOverlapingFactor * (noOverlapInitTime - mGlobalInitTime))));
  }
  mPlaying=true;
  return getUpdate(mChartView.getData());
}

public IOUtils(){
  super();
}

public String formatDeleteNfsExportCmd(String dataMover,String path){
  StringBuilder cmd=new StringBuilder();
  cmd.append(" ");
  cmd.append(dataMover);
  cmd.append(" -unexport ");
  cmd.append(" ");
  cmd.append(path);
  return cmd.toString();
}

public final String matchCategories(Set<String> categories){
  if (categories == null) {
    return null;
  }
  Iterator<String> it=categories.iterator();
  if (mCategories == null) {
    return it.hasNext() ? it.next() : null;
  }
  while (it.hasNext()) {
    final String category=it.next();
    if (!mCategories.contains(category)) {
      return category;
    }
  }
  return null;
}

@Override public void run(){
  try {
    ClassReader reader=new ClassReader(new FileInputStream(this.classFile));
    AsmClassVisitor visitor=new AsmClassVisitor(this.dataProvider,this.config);
    reader.accept(visitor,ClassReader.SKIP_DEBUG);
  }
 catch (  Exception e) {
    LOGGER.log(Level.SEVERE,e.getMessage(),e);
  }
}

private void addLocationAndTrackPropertyChange(){
  for (  Location loc : locationManager.getList()) {
    loc.addPropertyChangeListener(this);
    for (    Track track : loc.getTrackList()) {
      track.addPropertyChangeListener(this);
      Schedule schedule=track.getSchedule();
      if (schedule != null) {
        schedule.addPropertyChangeListener(this);
      }
    }
  }
}

private void handleJsonSignIn(RequestAndResponse requestAndResponse) throws IOException, ServletException {
  requestAndResponse.setResponseContentTypeJson();
  String userName;
  String password;
  String csrft;
  try {
    final JsonNodeHelper json=getJsonNode(requestAndResponse);
    userName=json.getString("username");
    password=json.getString("password");
    csrft=json.getString("csrft");
  }
 catch (  final IOException e) {
    returnJson400(requestAndResponse,servletText.errorJson());
    return;
  }
  if (userName != null) {
    userName=userName.toLowerCase();
  }
  if (isTheCsrftWrong(requestAndResponse,csrft)) {
    returnJson400(requestAndResponse,servletText.errorWrongCsrft());
    return;
  }
  if (userName == null || userName.isEmpty()) {
    returnJson400(requestAndResponse,servletText.errorUsernameMustNotBeBlank());
    return;
  }
  if (password == null || password.isEmpty()) {
    returnJson400(requestAndResponse,servletText.errorPasswordMustNotBeBlank());
    return;
  }
  if (!AccountAttributeValidator.isUserNameValid(userName)) {
    returnJson400(requestAndResponse,servletText.errorUserNameIsNotValid());
    return;
  }
  if (!AccountAttributeValidator.isPasswordValid(password)) {
    returnJson400(requestAndResponse,servletText.errorPasswordIsNotValid());
    return;
  }
  try {
    final User user=dbLogic.getUserByUserName(userName);
    if (user == null) {
      returnJson400(requestAndResponse,servletText.errorNoAccountFound());
      return;
    }
    if (user.getIsAccountClosed()) {
      returnJson400(requestAndResponse,servletText.errorAccountIsClosed());
      return;
    }
    final String realPassword=user.getPassword();
    if (realPassword == null || !realPassword.equals(DigestUtils.sha1Hex(password))) {
      returnJson400(requestAndResponse,servletText.errorPasswordIsIncorrect());
      return;
    }
    mapSessionToUser(requestAndResponse,user.getId());
    dbLogic.commit();
    returnJson200(requestAndResponse);
  }
 catch (  final PersistenceException e) {
    logger.log(Level.INFO,"Exception",e);
    returnJson500(requestAndResponse,servletText.errorInternalDatabase());
  }
}

private void _schedule(Activity a,long startTime){
  if (a.isScheduled()) {
    try {
      notifyAll();
    }
 catch (    Exception e) {
    }
    return;
  }
  a.setStartTime(startTime);
synchronized (this) {
    m_activities.add(a);
    a.setScheduled(true);
    if (startTime < m_nextTime) {
      m_nextTime=startTime;
      notify();
    }
  }
}

void unregisterCallback(BluetoothCallback callback){
synchronized (mCallbacks) {
    mCallbacks.remove(callback);
  }
}

public void testHashCodeUnequal(){
  String a="8478231212478987482988429808779810457634781384756794987";
  int aScale=41;
  String b="92948782094488478231212478987482988429808779810457634781384756794987";
  int bScale=-24;
  BigDecimal aNumber=new BigDecimal(new BigInteger(a),aScale);
  BigDecimal bNumber=new BigDecimal(new BigInteger(b),bScale);
  assertTrue("incorrect value",aNumber.hashCode() != bNumber.hashCode());
}

protected final void refreshLoadingViewsSize(){
  final int maximumPullScroll=(int)(getMaximumPullScroll() * 1.2f);
  int pLeft=getPaddingLeft();
  int pTop=getPaddingTop();
  int pRight=getPaddingRight();
  int pBottom=getPaddingBottom();
switch (getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    if (mMode.showHeaderLoadingLayout()) {
      mHeaderLayout.setWidth(maximumPullScroll);
      pLeft=-maximumPullScroll;
    }
 else {
      pLeft=0;
    }
  if (mMode.showFooterLoadingLayout()) {
    mFooterLayout.setWidth(maximumPullScroll);
    pRight=-maximumPullScroll;
  }
 else {
    pRight=0;
  }
break;
case VERTICAL:
if (mMode.showHeaderLoadingLayout()) {
mHeaderLayout.setHeight(maximumPullScroll);
pTop=-maximumPullScroll;
}
 else {
pTop=0;
}
if (mMode.showFooterLoadingLayout()) {
mFooterLayout.setHeight(maximumPullScroll);
pBottom=-maximumPullScroll;
}
 else {
pBottom=0;
}
break;
}
if (DEBUG) {
Log.d(LOG_TAG,String.format("Setting Padding. L: %d, T: %d, R: %d, B: %d",pLeft,pTop,pRight,pBottom));
}
setPadding(pLeft,pTop,pRight,pBottom);
}

@VisibleForTesting static String escapeSqlString(String string){
  return string.replaceAll("'","''");
}

public static String[] toArray(String arg){
  if (arg == null) {
    return new String[0];
  }
  StringTokenizer tok=new StringTokenizer(arg," ,");
  String[] array=new String[tok.countTokens()];
  int i=0;
  while (tok.hasMoreTokens()) {
    array[i]=tok.nextToken();
    i++;
  }
  return (array);
}

private void appendUploadedEntryToLog(String id) throws IOException {
  FileWriter writer=new FileWriter(mLogfile,true);
  StringBuilder sb=new StringBuilder();
  sb.append(System.currentTimeMillis() / 1000);
  sb.append(",");
  sb.append(id);
  sb.append('\n');
  try {
    writer.write(sb.toString());
  }
  finally {
    writer.close();
  }
}

private void renderLeafNode(final CNodeNode treeNode){
  final NaviNode graphNode=treeNode.getNode();
  if (graphNode.isSelected() && graphNode.isVisible()) {
    setForeground(SELECTED_FONT_COLOR);
  }
 else   if (!graphNode.isVisible()) {
    setForeground(INVISIBLE_FONT_COLOR);
  }
  setToolTipText(buildToolTip(graphNode));
}

public static final void writeValueXml(Object v,String name,XmlSerializer out) throws XmlPullParserException, IOException {
  String typeStr;
  if (v == null) {
    out.startTag(null,"null");
    if (name != null) {
      out.attribute(null,"name",name);
    }
    out.endTag(null,"null");
    return;
  }
 else   if (v instanceof String) {
    out.startTag(null,"string");
    if (name != null) {
      out.attribute(null,"name",name);
    }
    out.text(v.toString());
    out.endTag(null,"string");
    return;
  }
 else   if (v instanceof Integer) {
    typeStr="int";
  }
 else   if (v instanceof Long) {
    typeStr="long";
  }
 else   if (v instanceof Float) {
    typeStr="float";
  }
 else   if (v instanceof Double) {
    typeStr="double";
  }
 else   if (v instanceof Boolean) {
    typeStr="boolean";
  }
 else   if (v instanceof byte[]) {
    writeByteArrayXml((byte[])v,name,out);
    return;
  }
 else   if (v instanceof int[]) {
    writeIntArrayXml((int[])v,name,out);
    return;
  }
 else   if (v instanceof Map) {
    writeMapXml((Map)v,name,out);
    return;
  }
 else   if (v instanceof List) {
    writeListXml((List)v,name,out);
    return;
  }
 else   if (v instanceof Set) {
    writeSetXml((Set)v,name,out);
    return;
  }
 else   if (v instanceof CharSequence) {
    out.startTag(null,"string");
    if (name != null) {
      out.attribute(null,"name",name);
    }
    out.text(v.toString());
    out.endTag(null,"string");
    return;
  }
 else {
    throw new RuntimeException("writeValueXml: unable to write value " + v);
  }
  out.startTag(null,typeStr);
  if (name != null) {
    out.attribute(null,"name",name);
  }
  out.attribute(null,"value",v.toString());
  out.endTag(null,typeStr);
}

public Sector union(double latitude,double longitude){
  if (this.minLatitude < this.maxLatitude && this.minLongitude < this.maxLongitude) {
    this.maxLatitude=Math.max(this.maxLatitude,latitude);
    this.minLatitude=Math.min(this.minLatitude,latitude);
    this.maxLongitude=Math.max(this.maxLongitude,longitude);
    this.minLongitude=Math.min(this.minLongitude,longitude);
  }
 else   if (!Double.isNaN(this.minLatitude) && !Double.isNaN(this.minLongitude)) {
    this.maxLatitude=Math.max(this.minLatitude,latitude);
    this.maxLongitude=Math.max(this.minLongitude,longitude);
    this.minLatitude=Math.min(this.minLatitude,latitude);
    this.minLongitude=Math.min(this.minLongitude,longitude);
  }
 else {
    this.minLatitude=latitude;
    this.minLongitude=longitude;
    this.maxLatitude=Double.NaN;
    this.maxLongitude=Double.NaN;
  }
  return this;
}

public DAuthorityKeyIdentifier(JDialog parent,PublicKey authorityPublicKey,X500Name authorityCertName,BigInteger authorityCertSerialNumber){
  super(parent);
  setTitle(res.getString("DAuthorityKeyIdentifier.Title"));
  this.authorityPublicKey=authorityPublicKey;
  initComponents();
  prepopulateWithAuthorityCertDetails(authorityCertName,authorityCertSerialNumber);
}

static void writeUTF(OutputStream out,String str) throws IOException {
  for (int i=0, len=str.length(); i < len; i++) {
    int c=str.charAt(i);
    if ((c >= 0x0001) && (c <= 0x007F)) {
      out.write(c);
    }
 else {
      if (c > 0x07FF) {
        out.write(0xE0 | ((c >> 12) & 0x0F));
        out.write(0x80 | ((c >> 6) & 0x3F));
        out.write(0x80 | ((c >> 0) & 0x3F));
      }
 else {
        out.write(0xC0 | ((c >> 6) & 0x1F));
        out.write(0x80 | ((c >> 0) & 0x3F));
      }
    }
  }
}

public void test_getIterator(){
  String test="Test string";
  try {
    AttributedString attrString=new AttributedString(test);
    AttributedCharacterIterator it=attrString.getIterator();
    assertEquals("Incorrect iteration on AttributedString",it.first(),test.charAt(0));
  }
 catch (  Exception e) {
    fail("Unexpected exceptiption " + e.toString());
  }
}

private void handleNormalUnassociated(){
  int szSsaRegs=ssaMeth.getRegCount();
  for (int ssaReg=0; ssaReg < szSsaRegs; ssaReg++) {
    if (ssaRegsMapped.get(ssaReg)) {
      continue;
    }
    RegisterSpec ssaSpec=getDefinitionSpecForSsaReg(ssaReg);
    if (ssaSpec == null)     continue;
    int category=ssaSpec.getCategory();
    int ropReg=findNextUnreservedRopReg(paramRangeEnd,category);
    while (!canMapReg(ssaSpec,ropReg)) {
      ropReg=findNextUnreservedRopReg(ropReg + 1,category);
    }
    addMapping(ssaSpec,ropReg);
  }
}

public void addSeriesRenderer(int index,SimpleSeriesRenderer renderer){
  mRenderers.add(index,renderer);
}

private E unlinkFirst(){
  Node<E> f=first;
  if (f == null)   return null;
  Node<E> n=f.next;
  E item=f.item;
  f.item=null;
  f.next=f;
  first=n;
  if (n == null)   last=null;
 else   n.prev=null;
  --count;
  notFull.signal();
  return item;
}

public void createUnderlying(){
  if (Platform.isFxApplicationThread()) {
    options.createUnderlying();
    this.marker=new com.lynden.gmapsfx.javascript.object.Marker(options.convert());
  }
}

private void onActionUp(MotionEvent event){
  if (isDown) {
    this.startX=0F;
    this.startY=0F;
    this.isDown=false;
  }
}

private Rectangle2D createAlignedRectangle2D(Size2D dimensions,Rectangle2D frame,HorizontalAlignment hAlign,VerticalAlignment vAlign){
  double x=Double.NaN;
  double y=Double.NaN;
  if (hAlign == HorizontalAlignment.LEFT) {
    x=frame.getX();
  }
 else   if (hAlign == HorizontalAlignment.CENTER) {
    x=frame.getCenterX() - (dimensions.width / 2.0);
  }
 else   if (hAlign == HorizontalAlignment.RIGHT) {
    x=frame.getMaxX() - dimensions.width;
  }
  if (vAlign == VerticalAlignment.TOP) {
    y=frame.getY();
  }
 else   if (vAlign == VerticalAlignment.CENTER) {
    y=frame.getCenterY() - (dimensions.height / 2.0);
  }
 else   if (vAlign == VerticalAlignment.BOTTOM) {
    y=frame.getMaxY() - dimensions.height;
  }
  return new Rectangle2D.Double(x,y,dimensions.width,dimensions.height);
}

public MailAddress(InternetAddress address) throws AddressException {
  this(address.getAddress());
}

public double[][] confusionMatrix(){
  double[][] newMatrix=new double[m_ConfusionMatrix.length][0];
  for (int i=0; i < m_ConfusionMatrix.length; i++) {
    newMatrix[i]=new double[m_ConfusionMatrix[i].length];
    System.arraycopy(m_ConfusionMatrix[i],0,newMatrix[i],0,m_ConfusionMatrix[i].length);
  }
  return newMatrix;
}

public void print(int x){
  out.print(x);
  out.flush();
}

public static void beginStartingService(Context context,Intent intent){
synchronized (mStartingServiceSync) {
    if (mStartingService == null) {
      PowerManager pm=(PowerManager)context.getSystemService(Context.POWER_SERVICE);
      mStartingService=pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,"StartingAlertService");
      mStartingService.setReferenceCounted(false);
    }
    mStartingService.acquire();
    context.startService(intent);
  }
}

public ScannerException(ErrorMessages message,int line){
  this(null,ErrorMessages.get(message),message,line,-1);
}

private static void attemptRetryOnException(String logPrefix,Request<?> request,VolleyError exception) throws VolleyError {
  RetryPolicy retryPolicy=request.getRetryPolicy();
  int oldTimeout=request.getTimeoutMs();
  try {
    retryPolicy.retry(exception);
  }
 catch (  VolleyError e) {
    request.addMarker(String.format("%s-timeout-giveup [timeout=%s]",logPrefix,oldTimeout));
    throw e;
  }
  request.addMarker(String.format("%s-retry [timeout=%s]",logPrefix,oldTimeout));
}

private void informUponSimilarName(final StringBuffer messageBuffer,final String name,final String candidate){
  if (name.equals(candidate)) {
    return;
  }
  if (name.regionMatches(true,0,candidate,0,PKG_LEN + 5)) {
    messageBuffer.append(" Did you mean '");
    messageBuffer.append(candidate);
    messageBuffer.append("'?");
  }
}

public synchronized void co_exit(int thisCoroutine){
  m_activeIDs.clear(thisCoroutine);
  m_nextCoroutine=NOBODY;
  notify();
}

private int findSchemeSeparator(){
  return cachedSsi == NOT_CALCULATED ? cachedSsi=uriString.indexOf(':') : cachedSsi;
}

@Override public boolean test(Object receiver,String property,Object[] args,Object expectedValue){
  if (IS_ANGULAR_CLI_PROJECT_PROPERTY.equals(property)) {
    return testIsAngularCLIProject(receiver);
  }
  return false;
}

public void refresh(){
  label.setText(String.valueOf(MathHelper.round(val,2)));
  if (val == min)   minus.setEnabled(false);
 else   minus.setEnabled(true);
  if (val == max)   plus.setEnabled(false);
 else   plus.setEnabled(true);
  if (cb != null)   cb.callback(val);
  plus.repaint();
  minus.repaint();
  if (progress != null) {
    progress.setValue(val / max);
  }
}

public String[] readAllLines(){
  ArrayList<String> lines=new ArrayList<String>();
  while (hasNextLine()) {
    lines.add(readLine());
  }
  return lines.toArray(new String[0]);
}

public void removeCallback(Callback callback){
  mCallbacks.remove(callback);
}

public void error(SourceLocator srcLctr,String msg) throws TransformerException {
  error(srcLctr,null,null,msg,null);
}

private boolean expectVlvResponse(){
  Boolean expected=Boolean.FALSE;
  try {
    expected=(Boolean)get(EXPECT_VLV_RESPONSE);
  }
 catch (  Exception e) {
  }
  return expected == null ? false : expected.booleanValue();
}

public void layoutContainer(final Container parent){
  checkLayout(getModel());
  final Insets insets=parent.getInsets();
  final Dimension size=parent.getSize();
  final int width=size.width - (insets.left + insets.right);
  final int height=size.height - (insets.top + insets.bottom);
  final Rectangle bounds=new Rectangle(insets.left,insets.top,width,height);
  layout1(getModel(),bounds);
  layout2(getModel(),bounds);
}

private String readUntil(char[] delimiter,boolean returnText) throws IOException, XmlPullParserException {
  int start=position;
  StringBuilder result=null;
  if (returnText && text != null) {
    result=new StringBuilder();
    result.append(text);
  }
  search:   while (true) {
    if (position + delimiter.length > limit) {
      if (start < position && returnText) {
        if (result == null) {
          result=new StringBuilder();
        }
        result.append(buffer,start,position - start);
      }
      if (!fillBuffer(delimiter.length)) {
        checkRelaxed(UNEXPECTED_EOF);
        type=COMMENT;
        return null;
      }
      start=position;
    }
    for (int i=0; i < delimiter.length; i++) {
      if (buffer[position + i] != delimiter[i]) {
        position++;
        continue search;
      }
    }
    break;
  }
  int end=position;
  position+=delimiter.length;
  if (!returnText) {
    return null;
  }
 else   if (result == null) {
    return stringPool.get(buffer,start,end - start);
  }
 else {
    result.append(buffer,start,end - start);
    return result.toString();
  }
}

@Override public Invocation.Builder accept(String... mediaTypes){
  clientRequestContext.setAcceptResponseTypesStr(Arrays.asList(mediaTypes));
  return this;
}

public StreamConsumer(InputStream stream){
  in=new BufferedInputStream(stream);
  thread.start();
}

public static String subString(String string,int beginIndex,int length){
  if (string == null) {
    return null;
  }
  final int endIndex=beginIndex + length;
  if (beginIndex >= string.length()) {
    return EMPTY;
  }
  if (endIndex > string.length()) {
    return string.substring(beginIndex,string.length());
  }
  return string.substring(beginIndex,endIndex);
}

private static SocketImpl createSocketImpl(){
  try {
    return socketImplCtor.newInstance();
  }
 catch (  InstantiationException x) {
    throw new AssertionError(x);
  }
catch (  IllegalAccessException x) {
    throw new AssertionError(x);
  }
catch (  InvocationTargetException x) {
    throw new AssertionError(x);
  }
}

@Override public String encode(){
  return name.substring(0,1);
}

private void updateBaseMatrix(Drawable d){
  ImageView imageView=getImageView();
  if (null == imageView || null == d) {
    return;
  }
  final float viewWidth=getImageViewWidth(imageView);
  final float viewHeight=getImageViewHeight(imageView);
  final int drawableWidth=d.getIntrinsicWidth();
  final int drawableHeight=d.getIntrinsicHeight();
  mBaseMatrix.reset();
  final float widthScale=viewWidth / drawableWidth;
  final float heightScale=viewHeight / drawableHeight;
  if (mScaleType == ScaleType.CENTER) {
    mBaseMatrix.postTranslate((viewWidth - drawableWidth) / 2F,(viewHeight - drawableHeight) / 2F);
  }
 else   if (mScaleType == ScaleType.CENTER_CROP) {
    float scale=Math.max(widthScale,heightScale);
    mBaseMatrix.postScale(scale,scale);
    mBaseMatrix.postTranslate((viewWidth - drawableWidth * scale) / 2F,(viewHeight - drawableHeight * scale) / 2F);
  }
 else   if (mScaleType == ScaleType.CENTER_INSIDE) {
    float scale=Math.min(1.0f,Math.min(widthScale,heightScale));
    mBaseMatrix.postScale(scale,scale);
    mBaseMatrix.postTranslate((viewWidth - drawableWidth * scale) / 2F,(viewHeight - drawableHeight * scale) / 2F);
  }
 else {
    RectF mTempSrc=new RectF(0,0,drawableWidth,drawableHeight);
    RectF mTempDst=new RectF(0,0,viewWidth,viewHeight);
    if ((int)mBaseRotation % 180 != 0) {
      mTempSrc=new RectF(0,0,drawableHeight,drawableWidth);
    }
switch (mScaleType) {
case FIT_CENTER:
      mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.CENTER);
    break;
case FIT_START:
  mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.START);
break;
case FIT_END:
mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.END);
break;
case FIT_XY:
mBaseMatrix.setRectToRect(mTempSrc,mTempDst,ScaleToFit.FILL);
break;
default :
break;
}
}
resetMatrix();
}

void cancelAll(){
synchronized (currentRequests) {
    for (    DownloadRequest request : currentRequests) {
      request.cancel();
    }
  }
  currentRequests.clear();
}

protected void addDocs(String index,String type,int number) throws JsonProcessingException {
  ObjectMapper mapper=new ObjectMapper();
  for (int i=0; i < number; i++) {
    index(index,type,"doc_" + i,mapper.writeValueAsString(TestDocument.createSimpleDoc(i)));
  }
  flush();
}

public void testPowNegativeNumToZeroExp(){
  byte aBytes[]={50,-26,90,69,120,32,63,-103,-14,35};
  int aSign=-1;
  int exp=0;
  byte rBytes[]={1};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.pow(exp);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public final ParallelFlux<T> doOnError(Consumer<? super Throwable> onError){
  Objects.requireNonNull(onError,"onError");
  return doOnSignal(this,null,null,onError,null,null,null,null,null);
}

public void simulateMethod(SootMethod method,ReferenceVariable thisVar,ReferenceVariable returnVar,ReferenceVariable params[]){
  String subSignature=method.getSubSignature();
  if (subSignature.equals("void arraycopy(java.lang.Object,int,java.lang.Object,int,int)")) {
    java_lang_System_arraycopy(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("void setIn0(java.io.InputStream)")) {
    java_lang_System_setIn0(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("void setOut0(java.io.PrintStream)")) {
    java_lang_System_setOut0(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("void setErr0(java.io.PrintStream)")) {
    java_lang_System_setErr0(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.util.Properties initProperties(java.util.Properties)")) {
    java_lang_System_initProperties(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.String mapLibraryName(java.lang.String)")) {
    java_lang_System_mapLibraryName(method,thisVar,returnVar,params);
    return;
  }
 else   if (subSignature.equals("java.lang.Class getCallerClass()")) {
    java_lang_System_getCallerClass(method,thisVar,returnVar,params);
    return;
  }
 else {
    defaultMethod(method,thisVar,returnVar,params);
    return;
  }
}

protected void loadValue(String sValue){
  try {
    value=Long.parseLong(sValue.trim());
  }
 catch (  NumberFormatException nfe) {
    revertToDefault();
  }
}

public void checkBounds(){
  tfLowBound.setEnabled(tsClipping.isSelected());
  tfUpBound.setEnabled(tsClipping.isSelected());
}

public void remove(int index){
  mCategories.remove(index);
  mTitles.remove(index);
  mValues.remove(index);
}

public static boolean deleteFilesAndDirsRecursive(final File directory){
  if (directory == null || !directory.isDirectory()) {
    Log.e(FileUtils.class,"deleteFilesAndDirsRecursive(): Null parameter given or not a Directory");
    return false;
  }
  return deleteFilesAndDirs(directory);
}

void render(GraphicsContext g,Point2D viewportOrigin){
  g.setGlobalAlpha(life);
  g.setGlobalBlendMode(blendMode);
  if (image != null) {
    g.save();
    g.translate(x - viewportOrigin.getX(),y - viewportOrigin.getY());
    g.scale(radiusX * 2 / image.getWidth(),radiusY * 2 / image.getHeight());
    g.drawImage(image,0,0);
    g.restore();
  }
 else {
    g.setFill(color);
    g.fillOval(x - viewportOrigin.getX(),y - viewportOrigin.getY(),radiusX * 2,radiusY * 2);
  }
}

public int position(){
  return buff.position();
}

@Override public void write(String str,int off,int len) throws IOException {
  final int off_plus_len=off + len;
  for (int i=off; i < off_plus_len; ) {
    char c=str.charAt(i++);
    if (c < 0x80) {
      _bytes[_index]=(byte)c;
      if (++_index >= _bytes.length) {
        flushBuffer();
      }
    }
 else {
      write(c);
    }
  }
}

public void writeToNBT(final NBTTagCompound nbt){
  final NBTTagList modulesNbt=new NBTTagList();
  for (  final Module module : modules) {
    final NBTTagCompound moduleNbt=new NBTTagCompound();
    if (module != null) {
      module.writeToNBT(moduleNbt);
    }
    modulesNbt.appendTag(moduleNbt);
  }
  nbt.setTag(TAG_MODULES,modulesNbt);
  lock.ifPresent(null);
  lock.ifPresent(null);
}

void sendBufferIfNotEmpty() throws IOException {
  if (buf != null && buf.position() > 0)   sendBuffer();
}

public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,String key){
  if (key.equals(getString(R.string.pref_key_notification))) {
    setNotification(sharedPreferences.getBoolean(key,true));
  }
 else   if (key.equals(getString(R.string.pref_key_gmail_signature))) {
    setGmailSignaturePrefDescription(sharedPreferences.getBoolean(key,false));
  }
 else   if (key.equals(getString(R.string.pref_key_sms_signature))) {
    setSmsSignaturePrefDescription(sharedPreferences.getBoolean(key,false));
  }
}

public void initPortParameters(SerialPort port){
  initialized=false;
  if (port != null) {
    cbPort.setSelectedItem(port.getName());
    cbBaudrate.setSelectedItem(String.valueOf(port.getBaudRate()));
    cbParity.setSelectedIndex(port.getParity());
    cbDataBits.setSelectedIndex(port.getDataBits() - 5);
    cbStopBits.setSelectedIndex(port.getStopBits() - 1);
    int prt=port.getFlowControlMode();
    cbProtocolRx.setSelectedIndex((prt & SerialPort.FLOWCONTROL_RTSCTS_IN) != 0 ? 1 : (prt & SerialPort.FLOWCONTROL_XONXOFF_IN) != 0 ? 2 : 0);
    cbProtocolTx.setSelectedIndex((prt & SerialPort.FLOWCONTROL_RTSCTS_OUT) != 0 ? 1 : (prt & SerialPort.FLOWCONTROL_XONXOFF_OUT) != 0 ? 2 : 0);
    btnDSR.setSelected(port.isDSR());
    btnCTS.setSelected(port.isCTS());
    btnCD.setSelected(port.isCD());
    btnDTR.setSelected(port.isDTR());
    btnRTS.setSelected(port.isRTS());
  }
  initialized=true;
}

public void addPreloadEntry(GridCacheEntryInfo info){
  if (preloadEntries == null)   preloadEntries=new ArrayList<>();
  preloadEntries.add(info);
}

private void putOffUniform(final Player player){
  if (UNIFORM.isPartOf(player.getOutfit())) {
    player.returnToOriginalOutfit();
  }
}

public static void moveFile(final File srcFile,final File destFile) throws IOException {
  if (srcFile == null) {
    throw new NullPointerException("Source must not be null");
  }
  if (destFile == null) {
    throw new NullPointerException("Destination must not be null");
  }
  if (!srcFile.exists()) {
    throw new FileNotFoundException("Source '" + srcFile + "' does not exist");
  }
  if (srcFile.isDirectory()) {
    throw new IOException("Source '" + srcFile + "' is a directory");
  }
  if (destFile.exists()) {
    throw new IOException("Destination '" + destFile + "' already exists");
  }
  if (destFile.isDirectory()) {
    throw new IOException("Destination '" + destFile + "' is a directory");
  }
  final boolean rename=srcFile.renameTo(destFile);
  if (!rename) {
    copyFile(srcFile,destFile);
    if (!srcFile.delete()) {
      ParseFileUtils.deleteQuietly(destFile);
      throw new IOException("Failed to delete original file '" + srcFile + "' after copy to '"+ destFile+ "'");
    }
  }
}

public synchronized ScanManagerConfig readFromFile() throws IOException {
  final File f=new File(file);
  if (!f.exists())   throw new IOException("No such file: " + file);
  if (!f.canRead())   throw new IOException("Can't read file: " + file);
  try {
    return read(f);
  }
 catch (  JAXBException x) {
    final IOException io=new IOException("Failed to read SessionConfigBean from " + file + ": "+ x,x);
    throw io;
  }
}

public void delete(String name) throws IOException {
  if (name.equalsIgnoreCase(ISSUER)) {
    names=null;
  }
 else {
    throw new IOException("Attribute name not recognized by " + "CertAttrSet:CertificateIssuer");
  }
  encodeThis();
}

private float clampMag(float value,float absMin,float absMax){
  final float absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

public CompileClassNotFound(Exception cause){
  super(cause.getMessage());
  _cause=cause;
}

public SymGraph(Motif motif){
  this.motif=motif;
  colorsToRecheck=new HashSet<Integer>();
  topMotifnodeToColor=new int[motif.getNrMotifNodes()];
  colorToBottomMotifnode=new HashMap<Integer,List<Integer>>();
  colorToTopMotifnode=new HashMap<Integer,List<Integer>>();
  ArrayList<Integer> list1=new ArrayList<Integer>();
  ArrayList<Integer> list2=new ArrayList<Integer>();
  for (int i=0; i < topMotifnodeToColor.length; i++) {
    list1.add(i);
    list2.add(i);
  }
  colorToBottomMotifnode.put(0,list2);
  colorToTopMotifnode.put(0,list1);
}

public static boolean anyDimensionHasItems(Collection<DimensionalObject> dimensions){
  if (dimensions == null || dimensions.isEmpty()) {
    return false;
  }
  for (  DimensionalObject dim : dimensions) {
    if (dim.hasItems()) {
      return true;
    }
  }
  return false;
}

private void openCurrentAndMaybeNext(final boolean openNext){
  LOG.info("openCurrentAndMaybeNext() waiting for synchronized(this)");
synchronized (this) {
    LOG.info("openCurrentAndMaybeNext() DONE waiting for synchronized(this)\n");
    closeCursor();
    if (mPlayListLen == 0 || mPlayList == null) {
      return;
    }
    stop(false);
    mPlayPos=Math.min(mPlayPos,mPlayList.length - 1);
    updateCursor(mPlayList[mPlayPos]);
    while (true) {
      if (mCursor != null && !mCursor.isClosed() && openFile(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI + "/" + mCursor.getLong(IDCOLIDX))) {
        break;
      }
      closeCursor();
      if (mOpenFailedCounter++ < 10 && mPlayListLen > 1) {
        final int pos=getNextPosition(false);
        if (scheduleShutdownAndNotifyPlayStateChange(pos))         return;
        mPlayPos=pos;
        stop(false);
        mPlayPos=pos;
        updateCursor(mPlayList[mPlayPos]);
      }
 else {
        mOpenFailedCounter=0;
        LOG.warn("Failed to open file for playback");
        scheduleDelayedShutdown();
        if (mIsSupposedToBePlaying) {
          mIsSupposedToBePlaying=false;
          notifyChange(PLAYSTATE_CHANGED);
        }
        return;
      }
    }
    if (openNext) {
      setNextTrack();
    }
  }
}

protected OMNode createDTD() throws OMException {
  throw new OMException("SOAP message MUST NOT contain a Document Type Declaration(DTD)");
}

private IVGenerator(){
}

private void createOverviewPage(){
  RemapOverview overview=new RemapOverview(migrationTask,getContainer());
  int index=addPage(overview.getControl());
  setPageText(index,"Overview");
  taskListeners.add(overview);
}

public void warning2(final String filename,int ln,int col,Object msg,String source){
  warning(filename,ln,col,msg.toString(),source);
}

public SOAPConnection openSOAPConnection() throws SOAPException {
  return soapConnectionFactory.createConnection();
}

public static <U,V>String printMap(final Map<U,V> map,final Converter<U> keyConverter,final Converter<V> valueConverter){
  final StringBuilder sb=new StringBuilder("{ ");
  String separator="";
  for (  final Entry<U,V> entry : map.entrySet()) {
    sb.append(separator);
    sb.append(keyConverter.convert(entry.getKey()));
    sb.append("=>");
    sb.append(valueConverter.convert(entry.getValue()));
    separator=", ";
  }
  sb.append(" }");
  return sb.toString();
}

public void findAndInit(Object someObj){
  if (someObj instanceof com.bbn.openmap.MapBean) {
    Debug.message("overview","OverviewMapHandler found a MapBean object");
    setSourceMap((MapBean)someObj);
  }
}

public static double cdf(double x,double mu,double shape){
  if (!(x > 0.)) {
    return 0.;
  }
  final double v0=x / mu;
  final double v1=Math.sqrt(shape / x);
  if (v1 == 0.) {
    return v0 > 0. ? 1 : 0.;
  }
  double c1=NormalDistribution.standardNormalCDF(v1 * (v0 - 1.));
  double c2=NormalDistribution.standardNormalCDF(-v1 * (v0 + 1.));
  return (c2 > 0.) ? c1 + Math.exp(2 * shape / mu) * c2 : c1;
}

public void handleRequest(RequestContext rc) throws CLIException {
  super.handleRequest(rc);
  ldapLogin();
  SSOToken adminSSOToken=getAdminSSOToken();
  String serviceName=getStringOptionValue(IArgument.SERVICE_NAME);
  String interfaceName=getStringOptionValue(ARGUMENT_INTERFACE_NAME);
  String pluginName=getStringOptionValue(ARGUMENT_PLUGIN_NAME);
  String i18nKey=getStringOptionValue(ARGUMENT_I18N_KEY);
  String i18nName=getStringOptionValue(ARGUMENT_I18N_NAME);
  String className=getStringOptionValue(ARGUMENT_CLASS_NAME);
  ServiceManager sm=null;
  try {
    sm=new ServiceManager(adminSSOToken);
  }
 catch (  SMSException smse) {
    throw new CLIException(smse,ExitCodes.REQUEST_CANNOT_BE_PROCESSED);
  }
catch (  SSOException ssoe) {
    throw new CLIException(ssoe,ExitCodes.REQUEST_CANNOT_BE_PROCESSED);
  }
  IOutput outputWriter=getOutputWriter();
  try {
    String[] params={serviceName,interfaceName,pluginName,i18nKey,i18nName,className};
    writeLog(LogWriter.LOG_ACCESS,Level.INFO,"ATTEMPT_ADD_PLUGIN_SCHEMA",params);
    Document pluginDoc=createPluginSchemaXML(serviceName,interfaceName,pluginName,i18nKey,i18nName,className);
    if (pluginDoc != null) {
      sm.addPluginSchema(pluginDoc);
      String[] params2={serviceName,pluginName};
      writeLog(LogWriter.LOG_ACCESS,Level.INFO,"SUCCEED_ADD_PLUGIN_SCHEMA",params2);
      outputWriter.printlnMessage(MessageFormat.format(getResourceString("add-plugin-schema-succeed"),(Object[])params));
    }
 else {
      String[] args={serviceName,pluginName,"Null XML Document"};
      debugError("AddPluginSchema.handleRequest:: Null XML Document");
      writeLog(LogWriter.LOG_ERROR,Level.INFO,"FAILED_ADD_PLUGIN_SCHEMA",args);
      throw new CLIException("Null XML Document",ExitCodes.REQUEST_CANNOT_BE_PROCESSED);
    }
  }
 catch (  SSOException ssoe) {
    String[] args={serviceName,pluginName,ssoe.getMessage()};
    debugError("AddPluginSchema.handleRequest",ssoe);
    writeLog(LogWriter.LOG_ERROR,Level.INFO,"FAILED_ADD_PLUGIN_SCHEMA",args);
    outputWriter.printlnMessage(MessageFormat.format(getResourceString("add-plugin-schema-failed"),(Object[])args));
    throw new CLIException(ssoe,ExitCodes.REQUEST_CANNOT_BE_PROCESSED);
  }
catch (  SMSException smse) {
    String[] args={serviceName,pluginName,smse.getMessage()};
    debugError("AddPluginSchema.handleRequest",smse);
    writeLog(LogWriter.LOG_ERROR,Level.INFO,"FAILED_ADD_PLUGIN_SCHEMA",args);
    outputWriter.printlnMessage(MessageFormat.format(getResourceString("add-plugin-schema-failed"),(Object[])args));
    throw new CLIException(smse,ExitCodes.REQUEST_CANNOT_BE_PROCESSED);
  }
}

protected void bflash() throws SAXException {
  if (mBuffIdx >= 0) {
    mHandCont.characters(mBuff,0,(mBuffIdx + 1));
    mBuffIdx=-1;
  }
}

protected Mac(MacSpi macSpi,Provider provider,String algorithm){
  this.spi=macSpi;
  this.provider=provider;
  this.algorithm=algorithm;
  serviceIterator=null;
  lock=null;
}

public static String pathToString(String dim,String[] path){
  String[] fullPath=new String[1 + path.length];
  fullPath[0]=dim;
  System.arraycopy(path,0,fullPath,1,path.length);
  return pathToString(fullPath,fullPath.length);
}

public static boolean isValidIfd(int ifdId){
  return ifdId == IfdId.TYPE_IFD_0 || ifdId == IfdId.TYPE_IFD_1 || ifdId == IfdId.TYPE_IFD_EXIF || ifdId == IfdId.TYPE_IFD_INTEROPERABILITY || ifdId == IfdId.TYPE_IFD_GPS;
}

public static CdcSession createCdcSessionViaDomainAuth(String serverName,String userName,String userPassword){
  if (serverName == null || serverName.length() == 0) {
    throw new IllegalArgumentException("Server name is not specified");
  }
  if (userName == null || userName.length() == 0) {
    throw new IllegalArgumentException("User name is not specified");
  }
  return new CdcSession(serverName,userName,userPassword);
}

protected static Dfp expInternal(final Dfp a){
  Dfp y=a.getOne();
  Dfp x=a.getOne();
  Dfp fact=a.getOne();
  Dfp py=new Dfp(y);
  for (int i=1; i < 90; i++) {
    x=x.multiply(a);
    fact=fact.divide(i);
    y=y.add(x.multiply(fact));
    if (y.equals(py)) {
      break;
    }
    py=new Dfp(y);
  }
  return y;
}

public URLConnection openConnection() throws IOException {
  return streamHandler.openConnection(this);
}

public static ArrayList<String[]> linesToArray(ArrayList<String> inLine){
  ArrayList<String[]> framesEnTab=new ArrayList<>();
  for (int i=0; i < inLine.size(); i++) {
    framesEnTab.add(lineToArray(inLine.get(i)));
  }
  return framesEnTab;
}

@Override public int LA(int i){
  int la=super.LA(i);
  return Character.toLowerCase(la);
}

public void deselect_all(){
  Arrays.fill(sel_array,false);
}

@Override public boolean canTransferCriticals(int loc){
  return false;
}

private void calculateSizes(final Graphics g){
  m_rowHeight=getRowHeight(g);
  m_charHeight=getCharHeight(g);
  m_charWidth=getCharacterWidth(g);
}

public static Iterable<GatewayMetaState.IndexMetaWriteInfo> resolveStatesToBeWritten(ImmutableSet<String> previouslyWrittenIndices,Set<String> potentiallyUnwrittenIndices,MetaData previousMetaData,MetaData newMetaData){
  List<GatewayMetaState.IndexMetaWriteInfo> indicesToWrite=new ArrayList<>();
  for (  String index : potentiallyUnwrittenIndices) {
    IndexMetaData newIndexMetaData=newMetaData.index(index);
    IndexMetaData previousIndexMetaData=previousMetaData == null ? null : previousMetaData.index(index);
    String writeReason=null;
    if (previouslyWrittenIndices.contains(index) == false || previousIndexMetaData == null) {
      writeReason="freshly created";
    }
 else     if (previousIndexMetaData.getVersion() != newIndexMetaData.getVersion()) {
      writeReason="version changed from [" + previousIndexMetaData.getVersion() + "] to ["+ newIndexMetaData.getVersion()+ "]";
    }
    if (writeReason != null) {
      indicesToWrite.add(new GatewayMetaState.IndexMetaWriteInfo(newIndexMetaData,previousIndexMetaData,writeReason));
    }
  }
  return indicesToWrite;
}

protected double applyFunction(double value){
switch (m_operator) {
case 'l':
    return Math.log(value);
case 'b':
  return Math.abs(value);
case 'c':
return Math.cos(value);
case 'e':
return Math.exp(value);
case 's':
return Math.sqrt(value);
case 'f':
return Math.floor(value);
case 'h':
return Math.ceil(value);
case 'r':
return Math.rint(value);
case 't':
return Math.tan(value);
case 'n':
return Math.sin(value);
}
return Double.NaN;
}

private Object _deserializeStruct(Element elStruct) throws ConverterException {
  String type=elStruct.getAttribute("type");
  Struct struct=new StructImpl();
  NodeList list=elStruct.getChildNodes();
  int len=list.getLength();
  for (int i=0; i < len; i++) {
    Node node=list.item(i);
    if (node instanceof Element) {
      Element var=(Element)node;
      Element value=getChildElement((Element)node);
      if (value != null) {
        struct.setEL(var.getAttribute("name"),_deserialize(value));
      }
    }
  }
  if (struct.size() == 0 && type != null && type.length() > 0) {
    return "";
  }
  return struct;
}

public RemoteEvent dequeue(){
  Uuid uuid=_readyEvents.poll();
  if (uuid == null)   return null;
  SingleProducer producer=getProducer(uuid);
  return producer.popNextReadyEvent();
}

public TcpDiscoveryVmIpFinder(){
}

public InvalidPropertiesFormatException(String message){
  super(message);
}

public SubCommand(IDefinition definition,ResourceBundle rb,String name,List mandatoryOptions,List optionalOptions,List optionAliases,String implClassName,boolean webSupport,String deprecationWarning) throws CLIException {
  this.definition=definition;
  this.name=name;
  this.rb=rb;
  this.implClassName=implClassName;
  this.webSupport=webSupport;
  this.deprecationWarning=deprecationWarning;
  Set shortOptions=new HashSet();
  parseOptions(mandatoryOptions,this.mandatoryOptions,shortOptions);
  parseOptions(optionalOptions,this.optionalOptions,shortOptions);
  parseAliases(optionAliases);
}

public static boolean canAddClassInPackageOf(Class<?> cls){
  final Package beanPackage=cls.getPackage();
  if (beanPackage != null) {
    if (beanPackage.isSealed()) {
      return false;
    }
    String pname=beanPackage.getName();
    if (pname.startsWith("java.") || pname.startsWith("javax.security.")) {
      return false;
    }
  }
  return true;
}

public static JsonToken deserialize(final String jwt) throws Exception {
  JsonTokenParser parser=new JsonTokenParser(verifierProviders,new AbelanaTokenAudienceChecker(BackendConstants.TOKEN_ISSUER));
  return parser.deserialize(jwt);
}

public void swapSuggestions(final List<? extends SearchSuggestion> newSearchSuggestions){
  Collections.reverse(newSearchSuggestions);
  swapSuggestions(newSearchSuggestions,true);
}

boolean shouldAnimateSearchProviderIcon(SelectionType selectionType,boolean isShowing){
  if (isShowing || ContextualSearchFieldTrial.areExtraSearchBarAnimationsDisabled()) {
    return false;
  }
  if (selectionType == SelectionType.TAP) {
    long currentTimeMillis=System.currentTimeMillis();
    long lastAnimatedTimeMillis=mPreferenceManager.getContextualSearchLastAnimationTime();
    if (Math.abs(currentTimeMillis - lastAnimatedTimeMillis) > ONE_DAY_IN_MILLIS) {
      mPreferenceManager.setContextualSearchLastAnimationTime(currentTimeMillis);
      return true;
    }
 else {
      return false;
    }
  }
 else   if (selectionType == SelectionType.LONG_PRESS) {
    return getPromoOpenCount() == 0;
  }
  return false;
}

public void waitFor(){
  checkStarted();
  try {
    if (myInputProcessor != null && myProcess != null) {
      myInputProcessor.process(myProcess.getOutputStream());
    }
  }
  finally {
    waitForProcess();
  }
}

public static String extractUriFromAddress(String addr){
  String uri=addr;
  int index=addr.indexOf("<");
  if (index != -1) {
    uri=addr.substring(index + 1,addr.indexOf(">",index));
  }
  return uri;
}

PBKDF2KeyImpl(PBEKeySpec keySpec,String prfAlgo) throws InvalidKeySpecException {
  char[] passwd=keySpec.getPassword();
  if (passwd == null) {
    this.passwd=new char[0];
  }
 else {
    this.passwd=passwd.clone();
  }
  byte[] passwdBytes=getPasswordBytes(this.passwd);
  this.salt=keySpec.getSalt();
  if (salt == null) {
    throw new InvalidKeySpecException("Salt not found");
  }
  this.iterCount=keySpec.getIterationCount();
  if (iterCount == 0) {
    throw new InvalidKeySpecException("Iteration count not found");
  }
 else   if (iterCount < 0) {
    throw new InvalidKeySpecException("Iteration count is negative");
  }
  int keyLength=keySpec.getKeyLength();
  if (keyLength == 0) {
    throw new InvalidKeySpecException("Key length not found");
  }
 else   if (keyLength < 0) {
    throw new InvalidKeySpecException("Key length is negative");
  }
  try {
    this.prf=Mac.getInstance(prfAlgo,SunJCE.getInstance());
  }
 catch (  NoSuchAlgorithmException nsae) {
    InvalidKeySpecException ike=new InvalidKeySpecException();
    ike.initCause(nsae);
    throw ike;
  }
  this.key=deriveKey(prf,passwdBytes,salt,iterCount,keyLength);
}

private static void showDirectoryCreationError(final String directory){
  final String message="E00001: " + "Could not create the settings directory";
  final String description=CUtilityFunctions.createDescription(String.format("BinNavi could not create the settings directory '%s'.",directory),new String[]{"Your user account does not have sufficient rights to create this directory"},new String[]{"Changes to the global settings will not be saved","The error log file can not be stored"});
  NaviErrorDialog.show(null,message,description);
}

static byte[] pad(byte[] data){
  int len;
  if (data.length < 8)   len=data.length;
 else   len=data.length % 8;
  if (len == 0)   return data;
 else {
    byte[] padding=new byte[8 - len + data.length];
    for (int i=padding.length - 1; i > data.length - 1; i--) {
      padding[i]=0;
    }
    System.arraycopy(data,0,padding,0,data.length);
    return padding;
  }
}

public void serialize(DataOutput out) throws IOException {
  out.writeUTF(id);
  out.writeUTF(version);
  out.writeInt(sourceFiles.size());
  for (  Entry<String,List<RevisionFile>> e : sourceFiles.entrySet()) {
    out.writeUTF(e.getKey());
    List<RevisionFile> files=e.getValue();
    out.writeInt(files.size());
    for (    RevisionFile file : files) {
      out.writeUTF(file.fileName);
      out.writeLong(file.size);
    }
  }
}

public NamedColumnProjection(String[] names,boolean include){
  m_names=new HashSet();
  for (int i=0; i < names.length; ++i)   m_names.add(names[i]);
  m_include=include;
}

public static TimeSeriesData serializableInstance(){
  List<String> varNames=new ArrayList<>();
  varNames.add("X");
  varNames.add("Y");
  return new TimeSeriesData(new TetradMatrix(2,2),varNames);
}

@Override public void writeVertices(final OutputStream outputStream,final Iterator<Vertex> vertexIterator,final Direction direction) throws IOException {
  final BufferedWriter writer=new BufferedWriter(new OutputStreamWriter(outputStream));
  try (final ByteArrayOutputStream baos=new ByteArrayOutputStream()){
    if (wrapAdjacencyList)     writer.write("{\"" + GraphSONTokens.VERTICES + "\":[");
    while (vertexIterator.hasNext()) {
      writeVertex(baos,vertexIterator.next(),direction);
      writer.write(new String(baos.toByteArray()));
      if (wrapAdjacencyList) {
        if (vertexIterator.hasNext())         writer.write(",");
      }
 else {
        writer.newLine();
      }
      baos.reset();
    }
    if (wrapAdjacencyList)     writer.write("]}");
  }
   writer.flush();
}

Collection<? extends ClientRequestResult> handleRetrieveConfigurationsRequest(final ClientRequest configurationRequest,final Session session,final Destination replyDestination){
  if (configurationRequest.getRequestParameter() != null) {
    return configurationLoader.getConfigurationReports(configurationRequest.getRequestParameter());
  }
 else {
    return configurationLoader.getConfigurationReports();
  }
}

public static boolean containsClass(@NotNull File file,String className){
  String entryPath=className.replace('.','/') + ".class";
  return containsEntry(file,entryPath);
}

private double sin(double angle){
  while (angle >= 180.0f) {
    angle-=180.0;
  }
  double value=angle / 180.0f * Math.PI;
  return Math.sin(value);
}

public void remove(T graphic){
synchronized (mLock) {
    mGraphics.remove(graphic);
  }
  postInvalidate();
}

private static void launchDebugger(String dmlScriptStr,String fnameOptConfig,Map<String,String> argVals,boolean parsePyDML) throws ParseException, IOException, DMLRuntimeException, DMLDebuggerException, LanguageException, HopsException, LopsException {
  DMLDebuggerProgramInfo dbprog=new DMLDebuggerProgramInfo();
  DMLConfig conf=DMLConfig.readConfigurationFile(fnameOptConfig);
  ConfigurationManager.setGlobalConfig(conf);
  AParserWrapper parser=AParserWrapper.createParser(parsePyDML);
  DMLProgram prog=parser.parse(DML_FILE_PATH_ANTLR_PARSER,dmlScriptStr,argVals);
  DMLTranslator dmlt=new DMLTranslator(prog);
  dmlt.liveVariableAnalysis(prog);
  dmlt.validateParseTree(prog);
  dmlt.constructHops(prog);
  dmlt.rewriteHopsDAG(prog);
  dmlt.constructLops(prog);
  dbprog.rtprog=prog.getRuntimeProgram(conf);
  try {
    initHadoopExecution(conf);
    DMLDebugger SystemMLdb=new DMLDebugger(dbprog,dmlScriptStr);
    SystemMLdb.runSystemMLDebugger();
  }
  finally {
    cleanupHadoopExecution(conf);
  }
}

public static final Index createTestBankIndexApprovedOn(){
  Index lastname=new Index("approvedon");
  lastname.isUnique(false);
  ArrayList<IndexField> fields=new ArrayList<>(1);
  fields.add(new IndexField("boardapprovaldate",FieldDataType.DATE_TIME));
  lastname.setFields(fields);
  lastname.setTable(Fixtures.createTestWorldBankTable());
  return lastname;
}

public static byte[] decode(String encoded){
  if (encoded == null) {
    return null;
  }
  char[] base64Data=encoded.toCharArray();
  int len=removeWhiteSpace(base64Data);
  if (len % FOURBYTE != 0) {
    return null;
  }
  int numberQuadruple=(len / FOURBYTE);
  if (numberQuadruple == 0) {
    return new byte[0];
  }
  byte decodedData[]=null;
  byte b1=0, b2=0, b3=0, b4=0;
  char d1=0, d2=0, d3=0, d4=0;
  int i=0;
  int encodedIndex=0;
  int dataIndex=0;
  decodedData=new byte[(numberQuadruple) * 3];
  for (; i < numberQuadruple - 1; i++) {
    if (!isData((d1=base64Data[dataIndex++])) || !isData((d2=base64Data[dataIndex++])) || !isData((d3=base64Data[dataIndex++]))|| !isData((d4=base64Data[dataIndex++]))) {
      return null;
    }
    b1=base64Alphabet[d1];
    b2=base64Alphabet[d2];
    b3=base64Alphabet[d3];
    b4=base64Alphabet[d4];
    decodedData[encodedIndex++]=(byte)(b1 << 2 | b2 >> 4);
    decodedData[encodedIndex++]=(byte)(((b2 & 0xf) << 4) | ((b3 >> 2) & 0xf));
    decodedData[encodedIndex++]=(byte)(b3 << 6 | b4);
  }
  if (!isData((d1=base64Data[dataIndex++])) || !isData((d2=base64Data[dataIndex++]))) {
    return null;
  }
  b1=base64Alphabet[d1];
  b2=base64Alphabet[d2];
  d3=base64Data[dataIndex++];
  d4=base64Data[dataIndex++];
  if (!isData((d3)) || !isData((d4))) {
    if (isPad(d3) && isPad(d4)) {
      if ((b2 & 0xf) != 0) {
        return null;
      }
      byte[] tmp=new byte[i * 3 + 1];
      System.arraycopy(decodedData,0,tmp,0,i * 3);
      tmp[encodedIndex]=(byte)(b1 << 2 | b2 >> 4);
      return tmp;
    }
 else     if (!isPad(d3) && isPad(d4)) {
      b3=base64Alphabet[d3];
      if ((b3 & 0x3) != 0) {
        return null;
      }
      byte[] tmp=new byte[i * 3 + 2];
      System.arraycopy(decodedData,0,tmp,0,i * 3);
      tmp[encodedIndex++]=(byte)(b1 << 2 | b2 >> 4);
      tmp[encodedIndex]=(byte)(((b2 & 0xf) << 4) | ((b3 >> 2) & 0xf));
      return tmp;
    }
 else {
      return null;
    }
  }
 else {
    b3=base64Alphabet[d3];
    b4=base64Alphabet[d4];
    decodedData[encodedIndex++]=(byte)(b1 << 2 | b2 >> 4);
    decodedData[encodedIndex++]=(byte)(((b2 & 0xf) << 4) | ((b3 >> 2) & 0xf));
    decodedData[encodedIndex++]=(byte)(b3 << 6 | b4);
  }
  return decodedData;
}

public synchronized void accessed(Object object){
  historyList.remove(object);
  historyList.add(object);
}

public static boolean isEmpty(String string){
  return string == null || string.length() <= 0;
}

@Override @SuppressWarnings("unchecked") protected void heapifyUpComparable(int pos,Object elem){
  final Comparable<Object> cur=(Comparable<Object>)elem;
  while (pos > 0) {
    final int parent=(pos - 1) >>> 1;
    Object par=queue[parent];
    if (cur.compareTo(par) >= 0) {
      break;
    }
    queue[pos]=par;
    index.put(par,pos);
    pos=parent;
  }
  queue[pos]=cur;
  index.put(cur,pos);
}

private void updateReleaseLocks() throws CacheException {
  if (numLocks.addAndGet(-1) < 0) {
    throw new CacheException("Redundant release of GPU object");
  }
  if (evictionPolicy == EvictionPolicy.LRU) {
    timestamp.set(System.nanoTime());
  }
 else   if (evictionPolicy == EvictionPolicy.LFU) {
    timestamp.addAndGet(1);
  }
 else   if (evictionPolicy == EvictionPolicy.MIN_EVICT) {
  }
 else {
    throw new CacheException("The eviction policy is not supported:" + evictionPolicy.name());
  }
}

public static Short toShort(char c){
  return Short.valueOf(toShortValue(c));
}

protected GeoPoint[] findCrossings(final PlanetModel planetModel,final Plane q,final Membership[] bounds,final Membership[] moreBounds){
  final double lineVectorX=y * q.z - z * q.y;
  final double lineVectorY=z * q.x - x * q.z;
  final double lineVectorZ=x * q.y - y * q.x;
  if (Math.abs(lineVectorX) < MINIMUM_RESOLUTION && Math.abs(lineVectorY) < MINIMUM_RESOLUTION && Math.abs(lineVectorZ) < MINIMUM_RESOLUTION) {
    return NO_POINTS;
  }
  double x0;
  double y0;
  double z0;
  final double denomYZ=this.y * q.z - this.z * q.y;
  final double denomXZ=this.x * q.z - this.z * q.x;
  final double denomXY=this.x * q.y - this.y * q.x;
  if (Math.abs(denomYZ) >= Math.abs(denomXZ) && Math.abs(denomYZ) >= Math.abs(denomXY)) {
    if (Math.abs(denomYZ) < MINIMUM_RESOLUTION_SQUARED) {
      return NO_POINTS;
    }
    final double denom=1.0 / denomYZ;
    x0=0.0;
    y0=(-this.D * q.z - this.z * -q.D) * denom;
    z0=(this.y * -q.D + this.D * q.y) * denom;
  }
 else   if (Math.abs(denomXZ) >= Math.abs(denomXY) && Math.abs(denomXZ) >= Math.abs(denomYZ)) {
    if (Math.abs(denomXZ) < MINIMUM_RESOLUTION_SQUARED) {
      return NO_POINTS;
    }
    final double denom=1.0 / denomXZ;
    x0=(-this.D * q.z - this.z * -q.D) * denom;
    y0=0.0;
    z0=(this.x * -q.D + this.D * q.x) * denom;
  }
 else {
    if (Math.abs(denomXY) < MINIMUM_RESOLUTION_SQUARED) {
      return NO_POINTS;
    }
    final double denom=1.0 / denomXY;
    x0=(-this.D * q.y - this.y * -q.D) * denom;
    y0=(this.x * -q.D + this.D * q.x) * denom;
    z0=0.0;
  }
  final double A=lineVectorX * lineVectorX * planetModel.inverseAbSquared + lineVectorY * lineVectorY * planetModel.inverseAbSquared + lineVectorZ * lineVectorZ * planetModel.inverseCSquared;
  final double B=2.0 * (lineVectorX * x0 * planetModel.inverseAbSquared + lineVectorY * y0 * planetModel.inverseAbSquared + lineVectorZ * z0 * planetModel.inverseCSquared);
  final double C=x0 * x0 * planetModel.inverseAbSquared + y0 * y0 * planetModel.inverseAbSquared + z0 * z0 * planetModel.inverseCSquared - 1.0;
  final double BsquaredMinus=B * B - 4.0 * A * C;
  if (Math.abs(BsquaredMinus) < MINIMUM_RESOLUTION_SQUARED) {
    return NO_POINTS;
  }
 else   if (BsquaredMinus > 0.0) {
    final double inverse2A=1.0 / (2.0 * A);
    final double sqrtTerm=Math.sqrt(BsquaredMinus);
    final double t1=(-B + sqrtTerm) * inverse2A;
    final double t2=(-B - sqrtTerm) * inverse2A;
    final double point1X=lineVectorX * t1 + x0;
    final double point1Y=lineVectorY * t1 + y0;
    final double point1Z=lineVectorZ * t1 + z0;
    final double point2X=lineVectorX * t2 + x0;
    final double point2Y=lineVectorY * t2 + y0;
    final double point2Z=lineVectorZ * t2 + z0;
    boolean point1Valid=true;
    boolean point2Valid=true;
    for (    final Membership bound : bounds) {
      if (!bound.isWithin(point1X,point1Y,point1Z)) {
        point1Valid=false;
        break;
      }
    }
    if (point1Valid) {
      for (      final Membership bound : moreBounds) {
        if (!bound.isWithin(point1X,point1Y,point1Z)) {
          point1Valid=false;
          break;
        }
      }
    }
    for (    final Membership bound : bounds) {
      if (!bound.isWithin(point2X,point2Y,point2Z)) {
        point2Valid=false;
        break;
      }
    }
    if (point2Valid) {
      for (      final Membership bound : moreBounds) {
        if (!bound.isWithin(point2X,point2Y,point2Z)) {
          point2Valid=false;
          break;
        }
      }
    }
    if (point1Valid && point2Valid) {
      return new GeoPoint[]{new GeoPoint(point1X,point1Y,point1Z),new GeoPoint(point2X,point2Y,point2Z)};
    }
    if (point1Valid) {
      return new GeoPoint[]{new GeoPoint(point1X,point1Y,point1Z)};
    }
    if (point2Valid) {
      return new GeoPoint[]{new GeoPoint(point2X,point2Y,point2Z)};
    }
    return NO_POINTS;
  }
 else {
    return NO_POINTS;
  }
}

public static void encodeDimension(float value,byte dest[],int offset){
  NumericUtils.intToSortableBytes(NumericUtils.floatToSortableInt(value),dest,offset);
}

public long minflt(){
  return Long.parseLong(fields[9]);
}

public static String toString(final float value){
  return Float.toString(value);
}

public void endFilterInterval(){
  endMillis=System.currentTimeMillis();
  totalFilterMillis+=(endMillis - intervalStartMillis);
  state=TaskState.other;
}

public String process(String to_process){
  if (to_process == null || to_process.length() == 0)   return "";
  String tmp="";
  StringTokenizer st=new StringTokenizer(to_process," ",true);
  StringBuffer newValue=new StringBuffer(to_process.length() + 50);
  while (st.hasMoreTokens()) {
    tmp=st.nextToken();
    if (hasAttribute(tmp))     newValue.append((String)get(tmp));
 else     newValue.append(tmp);
  }
  return newValue.toString();
}

@Benchmark public long test2_UsingForEachAndMapEntry() throws IOException {
  long i=0;
  for (  Map.Entry<Integer,Integer> pair : map.entrySet()) {
    i+=pair.getKey() + pair.getValue();
  }
  return i;
}

public static final void writeListXml(List val,String name,XmlSerializer out) throws XmlPullParserException, java.io.IOException {
  if (val == null) {
    out.startTag(null,"null");
    out.endTag(null,"null");
    return;
  }
  out.startTag(null,"list");
  if (name != null) {
    out.attribute(null,"name",name);
  }
  int n=val.size();
  int i=0;
  while (i < n) {
    writeValueXml(val.get(i),null,out);
    i++;
  }
  out.endTag(null,"list");
}

public static String convertToRGB(int color){
  String red=Integer.toHexString(Color.red(color));
  String green=Integer.toHexString(Color.green(color));
  String blue=Integer.toHexString(Color.blue(color));
  if (red.length() == 1) {
    red="0" + red;
  }
  if (green.length() == 1) {
    green="0" + green;
  }
  if (blue.length() == 1) {
    blue="0" + blue;
  }
  return "#" + red + green+ blue;
}

public static String hashKeyForDisk(String key){
  String cacheKey;
  try {
    final MessageDigest mDigest=MessageDigest.getInstance("MD5");
    mDigest.update(key.getBytes());
    cacheKey=bytesToHexString(mDigest.digest());
  }
 catch (  NoSuchAlgorithmException e) {
    cacheKey=String.valueOf(key.hashCode());
  }
  return cacheKey;
}

private void changePassword(String userType,String oldPassword,String newPassword) throws Exception {
  String fileEncPassword=getUserPassword(userType);
  String userDN=getUserDN(userType);
  if ((fileEncPassword == null) || (fileEncPassword.length() == 0) || (userDN == null)|| (userDN.length() == 0)) {
    debug.error("Null password or user DN for user type: " + userType + " from file: "+ configFile);
    throw new XMLException(i18n.getString("dscfg-corrupted-serverconfig"));
  }
  if (!oldPassword.equals(AccessController.doPrivileged(new DecodeAction(fileEncPassword)))) {
    throw new Exception(i18n.getString("dscfg-old-passwd-donot-match"));
  }
  if (isAMSDKConfigured) {
    try {
      new AuthContext(new AuthPrincipal(userDN),newPassword.toCharArray());
      if (debug.messageEnabled()) {
        debug.message("DN: " + userDN + " new password is already updated in the directory");
      }
    }
 catch (    LoginException lee) {
      try {
        AuthContext ac=new AuthContext(new AuthPrincipal(userDN),oldPassword.toCharArray());
        PersistentObject user=UMSObject.getObject(ac.getSSOToken(),new Guid(userDN));
        if (debug.messageEnabled()) {
          debug.message("For DN: " + userDN + " changing password in directory");
        }
        user.setAttribute(new Attr("userPassword",newPassword));
        user.save();
      }
 catch (      LoginException le) {
        if (debug.warningEnabled()) {
          debug.warning("For DN: " + userDN + " new and old passwords donot match with directory");
        }
        throw new Exception(i18n.getString("dscfg-invalid-password") + "\n" + le.getMessage());
      }
    }
  }
  setUserPassword(userType,newPassword);
}

public int hashCode(Object key){
  return (key.hashCode() & 0x7FFFFFFF) % this.keyTable.length;
}

public AtomicArrayBase(E[] array){
  this.array=Arrays.copyOf(array,array.length,Object[].class);
}

public void apply(){
  setSpeedMap();
  setNXdata();
}

private E unlinkFirst(){
  Node<E> f=first;
  if (f == null)   return null;
  Node<E> n=f.next;
  E item=f.item;
  f.item=null;
  f.next=f;
  first=n;
  if (n == null)   last=null;
 else   n.prev=null;
  --count;
  notFull.signal();
  return item;
}

public void push(final String value){
  if (value == null) {
    mv.visitInsn(Opcodes.ACONST_NULL);
  }
 else {
    mv.visitLdcInsn(value);
  }
}

public void init(){
  m_projectTree.setSelectionPath(new TreePath(m_projectTree.getRootNode()));
}

public int read() throws IOException {
  return is.read();
}

private void displayCalendar(){
  KeyNamePair pp=(KeyNamePair)fieldResource.getSelectedItem();
  if (pp == null)   return;
  int S_Resource_ID=pp.getKey();
  m_mAssignment.setS_Resource_ID(S_Resource_ID);
  Timestamp date=fieldDate.getTimestamp();
  int index=timePane.getSelectedIndex();
  log.config("Index=" + index + ", ID="+ S_Resource_ID+ " - "+ date);
  m_loading=true;
  if (index == 0)   daySchedule.recreate(S_Resource_ID,date);
 else   if (index == 1)   weekSchedule.recreate(S_Resource_ID,date);
 else   monthSchedule.recreate(S_Resource_ID,date);
  m_loading=false;
  repaint();
}

public static void assertException(RuntimeException exception,Runnable expression,String errorMessage){
  if (verbose) {
    log("assertException(" + exception + ", "+ expression+ ", "+ errorMessage+ ")");
  }
  try {
    expression.run();
  }
 catch (  RuntimeException failure) {
    if (exception.getClass() != failure.getClass()) {
      TestUtils.fail(errorMessage);
    }
    return;
  }
  TestUtils.fail(errorMessage);
}

public boolean isParityCorrect(byte[][] shards,int firstByte,int byteCount){
  checkBuffersAndSizes(shards,firstByte,byteCount);
  byte[][] toCheck=new byte[parityShardCount][];
  System.arraycopy(shards,dataShardCount,toCheck,0,parityShardCount);
  return codingLoop.checkSomeShards(parityRows,shards,dataShardCount,toCheck,parityShardCount,firstByte,byteCount,null);
}

protected void onSendSuccess(RecordBuffer<R> buffer){
  sendSuccess.incrementAndGet();
  logger.trace("{}:{} Send SUCCESS",name(),buffer);
  try {
    checkpointer.saveCheckpoint(buffer);
  }
 catch (  Exception e) {
    logger.error("{}:{} Error in onSendSuccess",name(),buffer,e);
  }
}

public synchronized void writeTo(OutputStream out) throws IOException {
  int remaining=count;
  for (  byte[] buf : buffers) {
    int c=Math.min(buf.length,remaining);
    out.write(buf,0,c);
    remaining-=c;
    if (remaining == 0) {
      break;
    }
  }
}

public void test_service_004() throws Exception {
  final BigdataURI serviceURI=valueFactory.createURI("http://www.bigdata.com/myService");
  final GraphPatternGroup<IGroupMemberNode> groupNode=new JoinGroupNode();
{
    groupNode.addChild(new StatementPatternNode(new VarNode("s"),new VarNode("p"),new VarNode("o")));
  }
  final String exprImage="SERVICE <" + serviceURI + "> { ?s ?p ?o }";
  final Map<String,String> prefixDecls=new LinkedHashMap<String,String>(PrefixDeclProcessor.defaultDecls);
  final ServiceNode serviceNode=new ServiceNode(new ConstantNode(makeIV(serviceURI)),groupNode);
{
    final Set<IVariable<?>> projectedVars=new LinkedHashSet<IVariable<?>>();
{
      projectedVars.add(Var.var("s"));
      projectedVars.add(Var.var("p"));
      projectedVars.add(Var.var("o"));
    }
    serviceNode.setExprImage(exprImage);
    serviceNode.setPrefixDecls(prefixDecls);
    serviceNode.setProjectedVars(projectedVars);
  }
  final List<BindingSet> bindingSets=new LinkedList<BindingSet>();
{
    final MapBindingSet bset=new MapBindingSet();
    bset.addBinding("s",new BNodeImpl("abc"));
    bindingSets.add(bset);
  }
  final BindingSet[] a=bindingSets.toArray(new BindingSet[bindingSets.size()]);
  final IRemoteSparqlQueryBuilder fixture=newFixture(serviceNode,a);
  final String queryStr=fixture.getSparqlQuery(a);
  final QueryRoot expected=new QueryRoot(QueryType.SELECT);
{
    expected.setPrefixDecls(prefixDecls);
    final ProjectionNode projection=new ProjectionNode();
    projection.addProjectionVar(new VarNode("s"));
    projection.addProjectionVar(new VarNode("p"));
    projection.addProjectionVar(new VarNode("o"));
    expected.setProjection(projection);
    final JoinGroupNode whereClause=new JoinGroupNode();
    whereClause.addChild(new StatementPatternNode(new VarNode("s"),new VarNode("p"),new VarNode("o"),null,Scope.DEFAULT_CONTEXTS));
    expected.setWhereClause(whereClause);
{
      final LinkedHashSet<IVariable<?>> vars=new LinkedHashSet<IVariable<?>>();
      final List<IBindingSet> solutionsIn=new LinkedList<IBindingSet>();
      final BindingsClause bindingsClause=new BindingsClause(vars,solutionsIn);
      expected.setBindingsClause(bindingsClause);
{
        vars.add(Var.var("s"));
      }
{
        final ListBindingSet bset=new ListBindingSet();
        solutionsIn.add(bset);
      }
    }
  }
  final QueryRoot actual=parse(queryStr,baseURI);
  assertSameAST(queryStr,expected,actual);
}

private boolean isDirty(){
  return !Objects.equals(inputList.keySet(),cmrRepositoryManager.getCmrRepositoryDefinitions());
}

public void write(String s,int off,int len){
  if (text != null) {
    text.append(s.substring(off,off + len));
    if ((col+=len) > wrap)     println();
  }
 else {
    super.write(s,off,len);
    flush();
  }
}

public Zoneset showActiveZoneset(Integer vsanId) throws NetworkDeviceControllerException {
  List<Zoneset> zonesets=showZoneset(vsanId,true,null,false,false);
  return zonesets.isEmpty() ? null : zonesets.get(0);
}

private final short validatePermSplitFactor(String splitFactor) throws AdeFlowException {
  short permSplitFactor=Short.parseShort(splitFactor);
  if (permSplitFactor <= 0 || ((m_outerFramingFlow.getDuration() / permSplitFactor) < MILLISECONDS_IN_ONE_MINUTE)) {
    throw new AdeFlowException("Permanent Split Factor cannot be negative or 0.");
  }
  return permSplitFactor;
}

public static Calendar toCalendar(String datestring,String format){
  Date d=parse(datestring,format);
  Calendar cal=Calendar.getInstance();
  cal.setTimeInMillis(d.getTime());
  return cal;
}

public void testCompareToDiffSigns2(){
  byte aBytes[]={12,56,100,-2,-76,89,45,91,3,-15,35,26,3,91};
  byte bBytes[]={10,20,30,40,50,60,70,10,20,30};
  int aSign=-1;
  int bSign=1;
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  assertEquals(-1,aNumber.compareTo(bNumber));
}

private static void translateCompatibilityToPaths(RPAction action){
  if (action.has(EquipActionConsts.BASE_OBJECT)) {
    List<String> path=Arrays.asList(action.get(EquipActionConsts.BASE_OBJECT),action.get(EquipActionConsts.BASE_SLOT),action.get(EquipActionConsts.BASE_ITEM));
    action.put(EquipActionConsts.SOURCE_PATH,path);
  }
 else {
    List<String> path=Arrays.asList(action.get(EquipActionConsts.BASE_ITEM));
    action.put(EquipActionConsts.SOURCE_PATH,path);
  }
}

public Builder addMenuItem(@NonNull String label,@NonNull PendingIntent pendingIntent){
  if (mMenuItems == null)   mMenuItems=new ArrayList<>();
  Bundle bundle=new Bundle();
  bundle.putString(KEY_MENU_ITEM_TITLE,label);
  bundle.putParcelable(KEY_PENDING_INTENT,pendingIntent);
  mMenuItems.add(bundle);
  return this;
}

public SparseFloatVector(TIntFloatMap values,int dimensionality) throws IllegalArgumentException {
  if (values.size() > dimensionality) {
    throw new IllegalArgumentException("values.size() > dimensionality!");
  }
  this.indexes=new int[values.size()];
  this.values=new float[values.size()];
{
    TIntFloatIterator iter=values.iterator();
    for (int i=0; iter.hasNext(); i++) {
      iter.advance();
      this.indexes[i]=iter.key();
    }
    Arrays.sort(this.indexes);
  }
{
    for (int i=0; i < values.size(); i++) {
      this.values[i]=values.get(this.indexes[i]);
    }
  }
  this.dimensionality=dimensionality;
  final int maxdim=getMaxDim();
  if (maxdim > dimensionality) {
    throw new IllegalArgumentException("Given dimensionality " + dimensionality + " is too small w.r.t. the given values (occurring maximum: "+ maxdim+ ").");
  }
}

public byte[] canonSerializeToByteArray(Node node) throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  canon.setWriter(baos);
  canon.notReset();
  canon.canonicalizeSubtree(node);
  return baos.toByteArray();
}

public DefinedMethod addDescription(String description){
  this.description=Optional.of(description);
  return this;
}

public int addFlattenedColumn(Object o,int[] dims) throws FitsException {
  return addFlattenedColumn(o,dims,false);
}

public final void writeToStream(DataOutputStream dos) throws IOException {
  dos.writeUTF(event);
  dos.writeUTF(site);
  dos.writeUTF(date);
  dos.writeUTF(round);
  dos.writeUTF(white);
  dos.writeUTF(black);
  dos.writeUTF(TextIO.toFEN(startPos));
  dos.writeUTF(timeControl);
  dos.writeUTF(whiteTimeControl);
  dos.writeUTF(blackTimeControl);
  int nTags=tagPairs.size();
  dos.writeInt(nTags);
  for (int i=0; i < nTags; i++) {
    dos.writeUTF(tagPairs.get(i).tagName);
    dos.writeUTF(tagPairs.get(i).tagValue);
  }
  Node.writeToStream(dos,rootNode);
  ArrayList<Integer> pathFromRoot=currentNode.getPathFromRoot();
  int pathLen=pathFromRoot.size();
  dos.writeInt(pathLen);
  for (int i=0; i < pathLen; i++)   dos.writeInt(pathFromRoot.get(i));
}

public void registerSource(ProgressSource pi){
synchronized (progressSourceList) {
    if (progressSourceList.contains(pi))     return;
    progressSourceList.add(pi);
  }
  if (progressListenerList.size() > 0) {
    ArrayList<ProgressListener> listeners=new ArrayList<ProgressListener>();
synchronized (progressListenerList) {
      for (Iterator<ProgressListener> iter=progressListenerList.iterator(); iter.hasNext(); ) {
        listeners.add(iter.next());
      }
    }
    for (Iterator<ProgressListener> iter=listeners.iterator(); iter.hasNext(); ) {
      ProgressListener pl=iter.next();
      ProgressEvent pe=new ProgressEvent(pi,pi.getURL(),pi.getMethod(),pi.getContentType(),pi.getState(),pi.getProgress(),pi.getExpected());
      pl.progressStart(pe);
    }
  }
}

private static Map<String,String> extractKeyValuePairs(String props,ObjectName mbean){
  Map<String,String> map=new LinkedHashMap<String,String>();
  int eq=props.indexOf("=");
  while (eq != -1) {
    String key=props.substring(0,eq);
    String value=mbean.getKeyProperty(key);
    map.put(key,value);
    props=props.substring(key.length() + 1 + value.length());
    if (props.startsWith(",")) {
      props=props.substring(1);
    }
    eq=props.indexOf("=");
  }
  return map;
}

protected void paintContentBorderLeftEdge(Graphics g,int tabPlacement,int selectedIndex,int x,int y,int w,int h){
  Rectangle selRect=selectedIndex < 0 ? null : getTabBounds(selectedIndex,calcRect);
  g.setColor(selectHighlight);
  if (tabPlacement != LEFT || selectedIndex < 0 || (selRect.x + selRect.width + 1 < x) || (selRect.y < y || selRect.y > y + h)) {
    g.drawLine(x,y,x,y + h - 2);
  }
 else {
    g.drawLine(x,y,x,selRect.y + 1);
    if (selRect.y + selRect.height < y + h - 2)     g.drawLine(x,selRect.y + selRect.height + 1,x,y + h - 2);
  }
}

public final Flux<T> sample(Duration timespan){
  return sampleMillis(timespan.toMillis());
}

@Override public boolean hasValuesDescription(){
  return restrictionClass != null && restrictionClass != Object.class;
}

public SmbFile(String url) throws MalformedURLException {
  this(new URL(null,url,Handler.SMB_HANDLER));
}

public static boolean isAudio(String mimeType){
  if (mimeType != null) {
    if (mimeType.startsWith("audio/"))     return true;
 else     return false;
  }
 else   return false;
}

private void restoreWidget(Key key,byte[] buffer,int dataSize) throws IOException {
  if (VERBOSE)   Log.v(TAG,"unpacking widget " + key.id);
  if (DEBUG)   Log.d(TAG,"read (" + buffer.length + "): "+ Base64.encodeToString(buffer,0,dataSize,Base64.NO_WRAP));
  Widget widget=unpackProto(new Widget(),buffer,dataSize);
  if (DEBUG)   Log.d(TAG,"unpacked " + widget.provider);
  if (widget.icon.data != null) {
    Bitmap icon=BitmapFactory.decodeByteArray(widget.icon.data,0,widget.icon.data.length);
    if (icon == null) {
      Log.w(TAG,"failed to unpack widget icon for " + key.name);
    }
 else {
      IconCache.preloadIcon(mContext,ComponentName.unflattenFromString(widget.provider),icon,widget.icon.dpi);
    }
  }
}

protected int assertLineTerminates(int c) throws IOException, RDFParseException {
  c=reader.read();
  c=skipWhitespace(c);
  if (c != -1 && c != '\r' && c != '\n') {
    reportFatalError("Content after '.' is not allowed");
  }
  return c;
}

static private XMLEvent constructEvent(int eventType,WbXmlStreamReader stream) throws XMLStreamException {
  log.log(Level.FINE,"constructEvent()");
  XMLEvent event;
switch (eventType) {
case XMLStreamConstants.START_DOCUMENT:
    event=new WbXmlStartDocumentEvent(stream);
  break;
case XMLStreamConstants.END_DOCUMENT:
event=new WbXmlEndDocumentEvent(stream);
break;
case XMLStreamConstants.START_ELEMENT:
event=new WbXmlStartElementEvent(stream);
break;
case XMLStreamConstants.END_ELEMENT:
event=new WbXmlEndElementEvent(stream);
break;
case XMLStreamConstants.CHARACTERS:
case XMLStreamConstants.CDATA:
event=new WbXmlCharactersEvent(stream);
break;
default :
throw new UnsupportedOperationException(String.format("The %i event is not supported yet",eventType));
}
log.log(Level.FINE,"constructEvent(): {0}",event);
return event;
}

private void verifyGridState(){
  Integer rowLength=null;
  int rowPos=0;
  for (  List<Object> row : grid) {
    if (rowLength != null && rowLength != row.size()) {
      throw new IllegalStateException("Grid rows do not have the same number of cells, previous: " + rowLength + ", this: "+ row.size()+ ", at row: "+ rowPos);
    }
    rowPos++;
    rowLength=row.size();
  }
}

public static String readStringAndClose(Reader in,int length) throws IOException {
  try {
    if (length <= 0) {
      length=Integer.MAX_VALUE;
    }
    int block=Math.min(Constants.IO_BUFFER_SIZE,length);
    StringWriter out=new StringWriter(block);
    copyAndCloseInput(in,out,length);
    return out.toString();
  }
  finally {
    in.close();
  }
}

protected void beginPath(){
  prepDrawing();
  mPSStream.println(NEWPATH_STR);
  mPenX=0;
  mPenY=0;
}

private boolean inSamePackage(Class<?> c1,Class<?> c2){
  String nameC1=c1.getName();
  String nameC2=c2.getName();
  int indexDotC1=nameC1.lastIndexOf('.');
  int indexDotC2=nameC2.lastIndexOf('.');
  if (indexDotC1 != indexDotC2) {
    return false;
  }
  if (indexDotC1 == -1) {
    return true;
  }
  return nameC1.regionMatches(0,nameC2,0,indexDotC1);
}

private void sendTcpRequest(Socket socket,String request) throws ApiException {
  try {
    LogUtils.LOGD(TAG,"Sending request via TCP: " + request);
    BufferedWriter writer=new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
    writer.write(request);
    writer.flush();
  }
 catch (  Exception e) {
    LogUtils.LOGW(TAG,"Failed to send TCP request.",e);
    disconnect();
    throw new ApiException(ApiException.IO_EXCEPTION_WHILE_SENDING_REQUEST,e);
  }
}

public static String cleanString(String src){
  if (src == null) {
    return null;
  }
  boolean foundBad=false;
  final CharacterIterator it=new StringCharacterIterator(src);
  for (char c=it.first(); c != CharacterIterator.DONE; c=it.next()) {
    if (c < ASCII_PRINTABLE_LOW || c >= ASCII_PRINTABLE_HI) {
      foundBad=true;
      break;
    }
  }
  if (!foundBad) {
    return src;
  }
  final StringBuilder res=new StringBuilder();
  for (char c=it.first(); c != CharacterIterator.DONE; c=it.next()) {
    if (c < ASCII_PRINTABLE_LOW || c >= ASCII_PRINTABLE_HI) {
      res.append(ASCII_SPACE);
    }
 else {
      res.append(c);
    }
  }
  return res.toString();
}

public static ManualLagGraph serializableInstance(){
  return new ManualLagGraph(ManualLagGraphParams.serializableInstance());
}

public void updateActions(){
  String text;
  Action a=RTextArea.getAction(RTextArea.UNDO_ACTION);
  if (canUndo()) {
    a.setEnabled(true);
    text=getUndoPresentationName();
    a.putValue(Action.NAME,text);
    a.putValue(Action.SHORT_DESCRIPTION,text);
  }
 else {
    if (a.isEnabled()) {
      a.setEnabled(false);
      text=cantUndoText;
      a.putValue(Action.NAME,text);
      a.putValue(Action.SHORT_DESCRIPTION,text);
    }
  }
  a=RTextArea.getAction(RTextArea.REDO_ACTION);
  if (canRedo()) {
    a.setEnabled(true);
    text=getRedoPresentationName();
    a.putValue(Action.NAME,text);
    a.putValue(Action.SHORT_DESCRIPTION,text);
  }
 else {
    if (a.isEnabled()) {
      a.setEnabled(false);
      text=cantRedoText;
      a.putValue(Action.NAME,text);
      a.putValue(Action.SHORT_DESCRIPTION,text);
    }
  }
}

public void elementType(String name,int model,int memberOf,int flags){
  ElementType e=new ElementType(name,model,memberOf,flags,this);
  theElementTypes.put(name.toLowerCase(),e);
  if (memberOf == M_ROOT)   theRoot=e;
}

private static List<SizePair> generateValidPreviewSizeList(Camera camera){
  Camera.Parameters parameters=camera.getParameters();
  List<android.hardware.Camera.Size> supportedPreviewSizes=parameters.getSupportedPreviewSizes();
  List<android.hardware.Camera.Size> supportedPictureSizes=parameters.getSupportedPictureSizes();
  List<SizePair> validPreviewSizes=new ArrayList<>();
  for (  android.hardware.Camera.Size previewSize : supportedPreviewSizes) {
    float previewAspectRatio=(float)previewSize.width / (float)previewSize.height;
    for (    android.hardware.Camera.Size pictureSize : supportedPictureSizes) {
      float pictureAspectRatio=(float)pictureSize.width / (float)pictureSize.height;
      if (Math.abs(previewAspectRatio - pictureAspectRatio) < ASPECT_RATIO_TOLERANCE) {
        validPreviewSizes.add(new SizePair(previewSize,pictureSize));
        break;
      }
    }
  }
  if (validPreviewSizes.size() == 0) {
    Log.w(TAG,"No preview sizes have a corresponding same-aspect-ratio picture size");
    for (    android.hardware.Camera.Size previewSize : supportedPreviewSizes) {
      validPreviewSizes.add(new SizePair(previewSize,null));
    }
  }
  return validPreviewSizes;
}

public void addScrollingListener(OnWheelScrollListener listener){
  scrollingListeners.add(listener);
}

public static boolean hasDependency(MavenProject project,String groupId){
  Set<Artifact> artifacts=project.getArtifacts();
  if (artifacts != null) {
    for (    Artifact artifact : artifacts) {
      String scope=artifact.getScope();
      if (Objects.equal("test",scope)) {
        continue;
      }
      if (Objects.equal(groupId,artifact.getGroupId())) {
        return true;
      }
    }
  }
  return false;
}

public ContourGenerator(URL url,float modelMean,float modelStddev) throws IOException {
  this.modelMean=modelMean;
  this.modelStddev=modelStddev;
  List termsList=new ArrayList();
  String line;
  BufferedReader reader=new BufferedReader(new InputStreamReader(url.openStream()));
  line=reader.readLine();
  while (line != null) {
    if (!line.startsWith("***")) {
      parseAndAdd(termsList,line);
    }
    line=reader.readLine();
  }
  terms=(F0ModelTerm[])termsList.toArray(terms);
  reader.close();
}

public void addComment(String comment){
  if (frame != null) {
    chatTab.addComment(comment);
  }
  if (tabbedPane.getSelectedIndex() == 2) {
    editorTab.displayComment(comment);
  }
}

public static byte[] hexStringToBytes(String hexString){
  if (hexString == null || hexString.equals("")) {
    return null;
  }
  hexString=hexString.toUpperCase();
  int length=hexString.length() / 2;
  char[] hexChars=hexString.toCharArray();
  byte[] d=new byte[length];
  for (int i=0; i < length; i++) {
    int pos=i * 2;
    d[i]=(byte)(charToByte(hexChars[pos]) << 4 | charToByte(hexChars[pos + 1]));
  }
  return d;
}

private void decompose(List<Object> elementPairs,List<Object> printerList,List<Object> parserList){
  int size=elementPairs.size();
  for (int i=0; i < size; i+=2) {
    Object element=elementPairs.get(i);
    if (element instanceof DateTimePrinter) {
      if (element instanceof Composite) {
        addArrayToList(printerList,((Composite)element).iPrinters);
      }
 else {
        printerList.add(element);
      }
    }
    element=elementPairs.get(i + 1);
    if (element instanceof DateTimeParser) {
      if (element instanceof Composite) {
        addArrayToList(parserList,((Composite)element).iParsers);
      }
 else {
        parserList.add(element);
      }
    }
  }
}

private String processIntegerToken(String token){
  String result=token.replaceAll("" + groupSeparator,"");
  boolean isNegative=false;
  int preLen=negativePrefix.length();
  if ((preLen > 0) && result.startsWith(negativePrefix)) {
    isNegative=true;
    result=result.substring(preLen);
  }
  int sufLen=negativeSuffix.length();
  if ((sufLen > 0) && result.endsWith(negativeSuffix)) {
    isNegative=true;
    result=result.substring(result.length() - sufLen,result.length());
  }
  if (isNegative)   result="-" + result;
  return result;
}

public void writeGraphics(String graphicsSaveFile) throws IOException {
  FileOutputStream ostream=new FileOutputStream(graphicsSaveFile);
  ObjectOutputStream objectstream=new ObjectOutputStream(ostream);
  writeGraphics(objectstream);
  objectstream.close();
}

@Override public void addInputNode(BNode inputNode){
  super.addInputNode(inputNode);
}

public void removeDependency(TaskDependency dep){
  Node srcNode=myNodeMap.get(dep.getDependee());
  Node dstNode=myNodeMap.get(dep.getDependant());
  if (srcNode == null && dstNode == null) {
    return;
  }
  assert (srcNode != null && dstNode != null) : "Inconsistent dependency graph state: for dep=" + dep + " one of the ends is missing";
  DependencyEdge diedEdge=findExplicitDependency(dep,srcNode,dstNode);
  if (diedEdge == null) {
    return;
  }
  removeEdge(diedEdge);
  for (  DependencyEdge edge : Lists.newArrayList(srcNode.getOutgoing())) {
    if (edge instanceof ImplicitInheritedDependency) {
      if (((ImplicitInheritedDependency)edge).myExplicitDep == diedEdge) {
        removeEdge(edge);
      }
    }
  }
  fireGraphChanged();
}

public Criteria or(){
  Criteria criteria=createCriteriaInternal();
  oredCriteria.add(criteria);
  return criteria;
}

public static boolean isExtension(String filename,Collection<String> extensions){
  if (filename == null) {
    return false;
  }
  if (extensions == null || extensions.isEmpty()) {
    return indexOfExtension(filename) == -1;
  }
  String fileExt=getExtension(filename);
  for (  String extension : extensions) {
    if (fileExt.equals(extension)) {
      return true;
    }
  }
  return false;
}

public VNXeCommandJob modifyConsistencyGroupAsync(String id,LunGroupModifyParam param){
  StringBuilder urlBld=new StringBuilder(URL_MODIFY1);
  urlBld.append(id);
  urlBld.append(URL_MODIFY2);
  _url=urlBld.toString();
  return postRequestAsync(param);
}

public Object readRemote() throws IOException {
  String type=readType();
  String url=readString();
  return resolveRemote(type,url);
}

private static JFreeChart createChart(){
  XYSeries series1=new XYSeries("Series 1");
  series1.add(1.0,1.0);
  series1.add(2.0,2.0);
  series1.add(3.0,3.0);
  XYDataset dataset=new XYSeriesCollection(series1);
  return ChartFactory.createTimeSeriesChart("XY Line Chart","Domain","Range",dataset,true,true,true);
}

private void DTDprolog() throws SAXException, IOException {
  final java.io.Writer writer=m_writer;
  if (m_needToOutputDocTypeDecl) {
    outputDocTypeDecl(m_elemContext.m_elementName,false);
    m_needToOutputDocTypeDecl=false;
  }
  if (m_inDoctype) {
    writer.write(" [");
    writer.write(m_lineSep,0,m_lineSepLen);
    m_inDoctype=false;
  }
}

public CacheSet querySequential(Predicate... selectors){
  checkNotNull(selectors);
  Collection<Object> resultCollection=new ArrayList<>(items);
  Collection<Object> filterCollection=new LinkedList<>();
  Collection<Object> tempCollection;
  int i=0;
  while ((i < selectors.length) && (resultCollection.size() > 0)) {
    CollectionUtils.select(resultCollection,selectors[i],filterCollection);
    tempCollection=resultCollection;
    resultCollection=filterCollection;
    filterCollection=tempCollection;
    filterCollection.clear();
    i++;
  }
  return new CacheSet(resultCollection);
}

@Override public boolean isErrorEnabled(){
  return logger.isLoggable(Level.SEVERE);
}

public static <A>SetTValue<A> fromStream(final AnyMValue<Stream<A>> monads){
  return of(monads.map(null));
}

public static CCBitmapFontConfiguration FNTConfigLoadFile(String fntFile){
  CCBitmapFontConfiguration ret=null;
  if (configurations == null)   configurations=new HashMap<String,CCBitmapFontConfiguration>();
  ret=configurations.get(fntFile);
  if (ret == null) {
    ret=CCBitmapFontConfiguration.configuration(fntFile);
    configurations.put(fntFile,ret);
  }
  return ret;
}

public void addCriteria(Criteria otherCriteria){
  if (otherCriteria instanceof AdvancedCriteria || otherCriteria instanceof Criterion) {
    throw new IllegalArgumentException("Cannot add a Criterion or AdvancedCriteria to simple Criteria. " + "Use Criteria.asAdvancedCriteria() to convert to AdvancedCriteria");
  }
  Map otherMap=otherCriteria.getValues();
  Set otherKeys=otherMap.keySet();
  for (Iterator i=otherKeys.iterator(); i.hasNext(); ) {
    String field=(String)i.next();
    Object value=otherMap.get(field);
    JSOHelper.setAttribute(jsObj,field,value);
  }
}

public DNetscapeSslServerName(JDialog parent,byte[] value) throws IOException {
  super(parent);
  setTitle(res.getString("DNetscapeSslServerName.Title"));
  initComponents();
  prepopulateWithValue(value);
}

public static EventBean[] resizeArray(EventBean[] oldArray,int newSize){
  if (oldArray == null) {
    return null;
  }
  if (oldArray.length == newSize) {
    return oldArray;
  }
  EventBean[] newArray=new EventBean[newSize];
  int preserveLength=Math.min(oldArray.length,newSize);
  if (preserveLength > 0) {
    System.arraycopy(oldArray,0,newArray,0,preserveLength);
  }
  return newArray;
}

public static SpannableString spanText(CharSequence text,Object... spans){
  SpannableString spannableString=new SpannableString(text);
  for (  Object span : spans) {
    spannableString.setSpan(span,0,text.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
  }
  return spannableString;
}

@SuppressWarnings("unchecked") protected <T>List<T> query(Class<T> modelClass,String[] columns,String selection,String[] selectionArgs,String groupBy,String having,String orderBy,String limit,List<AssociationsInfo> foreignKeyAssociations){
  List<T> dataList=new ArrayList<T>();
  Cursor cursor=null;
  try {
    List<Field> supportedFields=getSupportedFields(modelClass.getName());
    String tableName=getTableName(modelClass);
    String[] customizedColumns=getCustomizedColumns(columns,foreignKeyAssociations);
    cursor=mDatabase.query(tableName,customizedColumns,selection,selectionArgs,groupBy,having,orderBy,limit);
    if (cursor.moveToFirst()) {
      SparseArray<QueryInfoCache> queryInfoCacheSparseArray=new SparseArray<QueryInfoCache>();
      do {
        T modelInstance=(T)createInstanceFromClass(modelClass);
        giveBaseObjIdValue((DataSupport)modelInstance,cursor.getLong(cursor.getColumnIndexOrThrow("id")));
        setValueToModel(modelInstance,supportedFields,foreignKeyAssociations,cursor,queryInfoCacheSparseArray);
        if (foreignKeyAssociations != null) {
          setAssociatedModel((DataSupport)modelInstance);
        }
        dataList.add(modelInstance);
      }
 while (cursor.moveToNext());
      queryInfoCacheSparseArray.clear();
    }
    return dataList;
  }
 catch (  Exception e) {
    e.printStackTrace();
    throw new DataSupportException(e.getMessage());
  }
 finally {
    if (cursor != null) {
      cursor.close();
    }
  }
}

private MLTResult buildQueryForField(String fieldName,PriorityQueue<MLTTerm> q,BooleanQuery query,boolean contentStreamQuery){
  List<MLTTerm> interestingTerms=new ArrayList<MLTTerm>();
  int qterms=0;
  int maxTerms=maxQueryTermsPerField;
  if (maxTerms <= 0) {
    maxTerms=Integer.MAX_VALUE;
  }
  BooleanQuery tmpQuery=new BooleanQuery();
  double sumQuaredBoost=0.0f;
  MLTTerm cur;
  while ((cur=q.pop()) != null) {
    Query tq=null;
    final Term term=new Term(cur.getFieldName(),cur.getWord());
    if (isPayloadField(cur.getFieldName())) {
      tq=new PayloadTermQuery(term,new AveragePayloadFunction(),true);
    }
 else {
      tq=new TermQuery(term);
    }
    if (boost) {
      float boost=cur.getScore();
      tq.setBoost(boost);
      sumQuaredBoost+=boost * boost;
    }
 else {
      sumQuaredBoost+=1.0;
    }
    try {
      tmpQuery.add(tq,BooleanClause.Occur.SHOULD);
      interestingTerms.add(cur);
      qterms++;
    }
 catch (    BooleanQuery.TooManyClauses ignore) {
      break;
    }
    if (qterms >= maxTerms) {
      break;
    }
  }
  double vectorLength=Math.sqrt(sumQuaredBoost);
  if (vectorLength <= 0.0) {
    return new MLTResult(interestingTerms,query);
  }
  buildBoostedNormalizedQuery(fieldName,tmpQuery,query,vectorLength,contentStreamQuery);
  return new MLTResult(interestingTerms,query);
}

@SuppressWarnings("unchecked") protected void sequentially(Consumer<Marker>... functions){
  if (functions == null || functions.length == 0)   return;
  Collection<ParsingException> errors=new ArrayList<>();
  Marker marker=tokens.mark();
  for (  Consumer<Marker> function : functions) {
    try {
      function.accept(marker);
      return;
    }
 catch (    ParsingException e) {
      errors.add(e);
      tokens.rewind(marker);
    }
  }
  parsingFailed(marker.position(),errors,"Unable to parse statement");
}

public PidFile(final File file) throws FileNotFoundException {
  if (!file.exists() || !file.isFile()) {
    throw new FileNotFoundException("Unable to find PID file '" + file + "'");
  }
  this.pidFile=file;
}

public void addChildNode(ExecNode childNode){
  childNodes.add(childNode);
}

static private double quickSelect(IDoubleVector x,int k,int start,int end){
  if (k < start || k > end) {
    throw new AdeCoreIllegalArgumentException("requested selection is outside of range");
  }
  final int pivotIndex=((int)Math.random() * (end - start + 1)) + start;
  final int pivotPosition=partition(x,start,end,pivotIndex);
  if (pivotPosition == k) {
    return x.get(k);
  }
 else   if (pivotPosition < k) {
    return quickSelect(x,k,pivotPosition + 1,end);
  }
 else {
    return quickSelect(x,k,start,pivotPosition - 1);
  }
}

public BayesImEditorObs(BayesImWrapperObs bayesImWrapperObs){
  this(bayesImWrapperObs,bayesImWrapperObs.getBayesIm());
}

private List<String> convertByteArrayListToStringValueList(List<byte[]> dictionaryByteArrayList){
  List<String> valueList=new ArrayList<>(dictionaryByteArrayList.size());
  for (  byte[] value : dictionaryByteArrayList) {
    valueList.add(new String(value,Charset.forName(CarbonCommonConstants.DEFAULT_CHARSET)));
  }
  return valueList;
}

public FileTreeNode(File parent,String name) throws SecurityException, FileNotFoundException {
  this(parent.toPath(),name);
}

private List<Node> possibleParents(Node x,List<Node> adjx,IKnowledge knowledge){
  List<Node> possibleParents=new LinkedList<>();
  String _x=x.getName();
  for (  Node z : adjx) {
    String _z=z.getName();
    if (possibleParentOf(_z,_x,knowledge)) {
      possibleParents.add(z);
    }
  }
  return possibleParents;
}

public synchronized void remove(AbstractOption option){
  if (options.contains(option)) {
    int position=indexOf(option);
    List<AbstractOption> oldOptions=new ArrayList<AbstractOption>(options);
    options.remove(option);
    List<AbstractOption> newOptions=getOptions();
    option.setCollection(null);
    fireIndexedPropertyChange(PROP_OPTIONS,position,oldOptions,newOptions);
  }
}

private float[] calculatePointerPosition(float angle){
  float x=(float)(mColorWheelRadius * Math.cos(angle));
  float y=(float)(mColorWheelRadius * Math.sin(angle));
  return new float[]{x,y};
}

public ResourceNode locate(String sessionID,String path,ResourceNode startNode) throws DirectoryNotFoundException {
  if (path == null) {
    return getCurrentNode(sessionID);
  }
 else   if (path.startsWith(PROTOCOL)) {
    path=path.substring(PROTOCOL.length());
  }
 else   if (path.startsWith(ROOT_ELEMENT) && path.length() > ROOT_ELEMENT.length()) {
    startNode=getRootNode();
    path=path.substring(ROOT_ELEMENT.length());
  }
  if (path.equals(CURRENT_ELEMENT))   return getCurrentNode(sessionID);
 else   if (path.equals(ROOT_ELEMENT))   return getRootNode();
  ResourceNode foundNode=null;
  ResourceNode nodeToSearch=startNode;
  String pathElements[]=path.split(PATH_SEPARATOR);
  if (pathElements.length == 0) {
    return getRootNode();
  }
  for (  String element : pathElements) {
    if (element.length() == 0)     continue;
    if (element.equals(PARENT_ELEMENT)) {
      if ((foundNode=nodeToSearch.getParent()) != null) {
        nodeToSearch=nodeToSearch.getParent();
      }
 else {
        throw new DirectoryNotFoundException(String.format("element '%s' not found",path));
      }
    }
 else {
      Map<String,ResourceNode> children=nodeToSearch.getChildren();
      if (element.equals(ANY_ELEMENT)) {
        if (nodeToSearch.getType() == ResourceType.CLUSTER) {
          foundNode=children.get(memberName);
        }
 else         if (children.size() > 0) {
          foundNode=getFirst(children);
        }
 else {
          throw new DirectoryNotFoundException(String.format("the element '%s' of path '%s' resolves to more than one element",element,path));
        }
      }
 else {
        foundNode=children.get(element);
      }
      if (foundNode == null) {
        throw new DirectoryNotFoundException(String.format("element '%s' not found in path '%s' while searching for entry '%s'",element,formatPath(getAbsolutePath(getRootNode(),nodeToSearch,true),true),path));
      }
      nodeToSearch=foundNode;
    }
  }
  return foundNode;
}

private void handleProcessError(JobDefinition job,Process process) throws IOException {
  StringBuffer sb=new StringBuffer();
  BufferedReader in=new BufferedReader(new InputStreamReader(process.getInputStream()));
  int data=0;
  while (data != -1 && !isInterrupted()) {
    data=in.read();
    if (data != -1) {
      sb.append((char)data);
    }
  }
  logger.warn("Job ended with erroneous exit code: " + job.cut + "\nProcess console output:\n"+ sb.toString());
}

private void checkClassAndSync(Class<? extends IPacket> clazz){
  if (!registeredClasses.contains(clazz)) {
    throw new RuntimeException("NetworkHelper got unknown Packet type " + clazz + " to send, critical error");
  }
  while (isCurrentlySendingSemaphor) {
    Thread.yield();
  }
  isCurrentlySendingSemaphor=true;
}

private void writeAttribute(java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (namespace.equals("")) {
    xmlWriter.writeAttribute(attName,attValue);
  }
 else {
    registerPrefix(xmlWriter,namespace);
    xmlWriter.writeAttribute(namespace,attName,attValue);
  }
}

private static int calculateDisplayedWidth(String string){
  final int tabWidth=DEFAULT_TAB_WIDTH;
  int column=0;
  for (int i=0; i < string.length(); i++) {
    if ('\t' == string.charAt(i)) {
      column+=tabWidth - (column % tabWidth);
    }
 else {
      column++;
    }
  }
  return column;
}

private static GeneralizedTime finishDecodingFraction(final String value,final int startPos,final int year,final int month,final int day,final int hour,final int minute,final int second,final int multiplier){
  final int length=value.length();
  final StringBuilder fractionBuffer=new StringBuilder((2 + length) - startPos);
  fractionBuffer.append("0.");
  TimeZone timeZone=null;
  outerLoop:   for (int i=startPos; i < length; i++) {
    final char c=value.charAt(i);
switch (c) {
case '0':
case '1':
case '2':
case '3':
case '4':
case '5':
case '6':
case '7':
case '8':
case '9':
      fractionBuffer.append(c);
    break;
case 'Z':
case 'z':
  if (i != (value.length() - 1)) {
    final LocalizableMessage message=WARN_ATTR_SYNTAX_GENERALIZED_TIME_ILLEGAL_FRACTION_CHAR.get(value,String.valueOf(c));
    throw new LocalizedIllegalArgumentException(message);
  }
timeZone=TIME_ZONE_UTC_OBJ;
break outerLoop;
case '+':
case '-':
timeZone=getTimeZoneForOffset(value,i);
break outerLoop;
default :
final LocalizableMessage message=WARN_ATTR_SYNTAX_GENERALIZED_TIME_ILLEGAL_FRACTION_CHAR.get(value,String.valueOf(c));
throw new LocalizedIllegalArgumentException(message);
}
}
if (fractionBuffer.length() == 2) {
final LocalizableMessage message=WARN_ATTR_SYNTAX_GENERALIZED_TIME_EMPTY_FRACTION.get(value);
throw new LocalizedIllegalArgumentException(message);
}
if (timeZone == null) {
final LocalizableMessage message=WARN_ATTR_SYNTAX_GENERALIZED_TIME_NO_TIME_ZONE_INFO.get(value);
throw new LocalizedIllegalArgumentException(message);
}
final Double fractionValue=Double.parseDouble(fractionBuffer.toString());
final int additionalMilliseconds=(int)Math.round(fractionValue * multiplier);
try {
final GregorianCalendar calendar=new GregorianCalendar();
calendar.setLenient(false);
calendar.setTimeZone(timeZone);
calendar.set(year,month,day,hour,minute,second);
calendar.set(Calendar.MILLISECOND,additionalMilliseconds);
return new GeneralizedTime(calendar,null,Long.MIN_VALUE,value);
}
 catch (final Exception e) {
final LocalizableMessage message=WARN_ATTR_SYNTAX_GENERALIZED_TIME_ILLEGAL_TIME.get(value,String.valueOf(e));
throw new LocalizedIllegalArgumentException(message,e);
}
}

@Override public int read(){
  if (idx >= charSequence.length()) {
    return -1;
  }
 else {
    return charSequence.charAt(idx++);
  }
}

public void test_getClientAliases(){
  init(CLIENT);
  assertNull(manager.getClientAliases(null,null));
  assertNull(manager.getClientAliases("",null));
  String[] resArray=manager.getClientAliases(TYPE_RSA,null);
  assertNotNull(resArray);
  assertEquals(3,resArray.length);
  assertKnownAliases(resArray);
}

public void removeAllUpdateListeners(){
  if (mUpdateListeners == null) {
    return;
  }
  mUpdateListeners.clear();
  mUpdateListeners=null;
}

@SuppressWarnings("unchecked") E transfer(E e,boolean timed,long nanos){
  QNode s=null;
  boolean isData=(e != null);
  for (; ; ) {
    QNode t=tail;
    QNode h=head;
    if (t == null || h == null)     continue;
    if (h == t || t.isData == isData) {
      QNode tn=t.next;
      if (t != tail)       continue;
      if (tn != null) {
        advanceTail(t,tn);
        continue;
      }
      if (timed && nanos <= 0)       return null;
      if (s == null)       s=new QNode(e,isData);
      if (!t.casNext(null,s))       continue;
      advanceTail(t,s);
      Object x=awaitFulfill(s,e,timed,nanos);
      if (x == s) {
        clean(t,s);
        return null;
      }
      if (!s.isOffList()) {
        advanceHead(t,s);
        if (x != null)         s.item=s;
        s.waiter=null;
      }
      return (x != null) ? (E)x : e;
    }
 else {
      QNode m=h.next;
      if (t != tail || m == null || h != head)       continue;
      Object x=m.item;
      if (isData == (x != null) || x == m || !m.casItem(x,e)) {
        advanceHead(h,m);
        continue;
      }
      advanceHead(h,m);
      LockSupport.unpark(m.waiter);
      return (x != null) ? (E)x : e;
    }
  }
}

public static void println(char x){
  out.println(x);
}

private boolean shouldPositionAvatarOnRight(){
  final boolean isRtl=Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1 ? getLayoutDirection() == LAYOUT_DIRECTION_RTL : false;
  final boolean assignedPosition=mAvatarPosition == AVATAR_POSITION_END;
  return isRtl ? !assignedPosition : assignedPosition;
}

public static Charset toCharset(Charset charset){
  return charset == null ? Charset.defaultCharset() : charset;
}

public static void fail(String message){
  throw new IllegalStateException(message == null ? "" : message);
}

public void memsetBuffer(ByteBuffer buffer){
  memsetBuffer(buffer,buffer.limit());
}

static double fabs(double a){
  return Math.abs(a);
}

protected List<ITEM_TYPE> selectFoldTestItems(List<ITEM_TYPE> items,int nFolds,int fold){
  List<ITEM_TYPE> testItems=new ArrayList<ITEM_TYPE>();
  for (int i=0; i < items.size(); ++i) {
    if (i % nFolds == fold) {
      testItems.add(items.get(i));
    }
  }
  return testItems;
}

private void endFormals(){
  if (hasFormals) {
    hasFormals=false;
    buf.append('>');
  }
}

public final CharSequenceTranslator with(final CharSequenceTranslator... translators){
  final CharSequenceTranslator[] newArray=new CharSequenceTranslator[translators.length + 1];
  newArray[0]=this;
  System.arraycopy(translators,0,newArray,1,translators.length);
  return new AggregateTranslator(newArray);
}

@Override public boolean equals(Object other){
  if (!(other instanceof Sha256Hash))   return false;
  return Arrays.equals(bytes,((Sha256Hash)other).bytes);
}

private void translateMatrixAfterRotate(int axis,float trans,float prevImageSize,float imageSize,int prevViewSize,int viewSize,int drawableSize){
  if (imageSize < viewSize) {
    m[axis]=(viewSize - (drawableSize * m[Matrix.MSCALE_X])) * 0.5f;
  }
 else   if (trans > 0) {
    m[axis]=-((imageSize - viewSize) * 0.5f);
  }
 else {
    float percentage=(Math.abs(trans) + (0.5f * prevViewSize)) / prevImageSize;
    m[axis]=-((percentage * imageSize) - (viewSize * 0.5f));
  }
}

public Config(SolrResourceLoader loader,String name) throws ParserConfigurationException, IOException, SAXException {
  this(loader,name,null,null);
}

private static HashMap<String,Field> buildFieldCache(Class<?> cls){
  final HashMap<String,Field> cache=new HashMap<>();
  final List<Field> fields=getAllFields(cls);
  for (  Field fld : fields) {
    String name=null;
    final Reference refAnn=fld.getAnnotation(Reference.class);
    if (refAnn != null)     name=selectColumnName(refAnn,fld);
    if (name == null) {
      final Column colAnn=fld.getAnnotation(Column.class);
      if (colAnn != null)       name=selectColumnName(colAnn,fld);
    }
    if (name == null)     continue;
    cache.put(name,fld);
  }
  return cache;
}

public static long convertDuration(final String fromUnit,final String toUnit,long value){
  TimeUnit fromTimeUnit=toTimeUnit(fromUnit);
  TimeUnit toTimeUnit=toTimeUnit(toUnit);
  if (fromTimeUnit != null && toTimeUnit != null) {
    return toTimeUnit.convert(value,fromTimeUnit);
  }
 else {
    throw new DSSException("Cannot convert duration with args (" + fromUnit + ", "+ toUnit+ ", "+ value+ ")");
  }
}

public static File searchForGroovyScriptFile(String input){
  String scriptFileName=input.trim();
  File scriptFile=new File(scriptFileName);
  String[] standardExtensions={".groovy",".gvy",".gy",".gsh"};
  int i=0;
  while (i < standardExtensions.length && !scriptFile.exists()) {
    scriptFile=new File(scriptFileName + standardExtensions[i]);
    i++;
  }
  if (!scriptFile.exists()) {
    scriptFile=new File(scriptFileName);
  }
  return scriptFile;
}

public XObject execute(XPathContext xctxt) throws javax.xml.transform.TransformerException {
  if (xctxt.isSecureProcessing())   throw new javax.xml.transform.TransformerException(XPATHMessages.createXPATHMessage(XPATHErrorResources.ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED,new Object[]{toString()}));
  XObject result;
  Vector argVec=new Vector();
  int nArgs=m_argVec.size();
  for (int i=0; i < nArgs; i++) {
    Expression arg=(Expression)m_argVec.elementAt(i);
    XObject xobj=arg.execute(xctxt);
    xobj.allowDetachToRelease(false);
    argVec.addElement(xobj);
  }
  ExtensionsProvider extProvider=(ExtensionsProvider)xctxt.getOwnerObject();
  Object val=extProvider.extFunction(this,argVec);
  if (null != val) {
    result=XObject.create(val,xctxt);
  }
 else {
    result=new XNull();
  }
  return result;
}

private Header createSecurityHeader(){
  return new BasicHeader("Authorization","Basic " + createAuth());
}

public Picture(File file){
  try {
    image=ImageIO.read(file);
  }
 catch (  IOException e) {
    e.printStackTrace();
    throw new RuntimeException("Could not open file: " + file);
  }
  if (image == null) {
    throw new RuntimeException("Invalid image file: " + file);
  }
  width=image.getWidth(null);
  height=image.getHeight(null);
  filename=file.getName();
}

static AnnotationStrategy strategyFor(Annotation annotation){
  checkNotNull(annotation,"annotation");
  Class<? extends Annotation> annotationType=annotation.annotationType();
  ensureRetainedAtRuntime(annotationType);
  ensureIsBindingAnnotation(annotationType);
  if (annotationType.getDeclaredMethods().length == 0) {
    return new AnnotationTypeStrategy(annotationType,annotation);
  }
  return new AnnotationInstanceStrategy(annotation);
}

public static String encode(byte[] input){
  if (input.length == 0) {
    return "";
  }
  int zeros=0;
  while (zeros < input.length && input[zeros] == 0) {
    ++zeros;
  }
  input=Arrays.copyOf(input,input.length);
  char[] encoded=new char[input.length * 2];
  int outputStart=encoded.length;
  for (int inputStart=zeros; inputStart < input.length; ) {
    encoded[--outputStart]=ALPHABET[divmod(input,inputStart,256,58)];
    if (input[inputStart] == 0) {
      ++inputStart;
    }
  }
  while (outputStart < encoded.length && encoded[outputStart] == ENCODED_ZERO) {
    ++outputStart;
  }
  while (--zeros >= 0) {
    encoded[--outputStart]=ENCODED_ZERO;
  }
  return new String(encoded,outputStart,encoded.length - outputStart);
}

private void addVolumeToBlockConsistencyGroup(URI cgUri,Volume volume){
  volume.addConsistencyGroup(cgUri.toString());
  _dbClient.persistObject(volume);
}

public static boolean lazyGaussianElimination(final int var2Eq[][],final long[] c,final int[] variable,final long[] solution){
  return lazyGaussianElimination(null,var2Eq,c,variable,solution);
}

private static int analyze(Compiler compiler,int stepOpCodePos,int stepIndex) throws javax.xml.transform.TransformerException {
  int stepType;
  int stepCount=0;
  int analysisResult=0x00000000;
  while (OpCodes.ENDOP != (stepType=compiler.getOp(stepOpCodePos))) {
    stepCount++;
    boolean predAnalysis=analyzePredicate(compiler,stepOpCodePos,stepType);
    if (predAnalysis)     analysisResult|=BIT_PREDICATE;
switch (stepType) {
case OpCodes.OP_VARIABLE:
case OpCodes.OP_EXTFUNCTION:
case OpCodes.OP_FUNCTION:
case OpCodes.OP_GROUP:
      analysisResult|=BIT_FILTER;
    break;
case OpCodes.FROM_ROOT:
  analysisResult|=BIT_ROOT;
break;
case OpCodes.FROM_ANCESTORS:
analysisResult|=BIT_ANCESTOR;
break;
case OpCodes.FROM_ANCESTORS_OR_SELF:
analysisResult|=BIT_ANCESTOR_OR_SELF;
break;
case OpCodes.FROM_ATTRIBUTES:
analysisResult|=BIT_ATTRIBUTE;
break;
case OpCodes.FROM_NAMESPACE:
analysisResult|=BIT_NAMESPACE;
break;
case OpCodes.FROM_CHILDREN:
analysisResult|=BIT_CHILD;
break;
case OpCodes.FROM_DESCENDANTS:
analysisResult|=BIT_DESCENDANT;
break;
case OpCodes.FROM_DESCENDANTS_OR_SELF:
if (2 == stepCount && BIT_ROOT == analysisResult) {
analysisResult|=BIT_ANY_DESCENDANT_FROM_ROOT;
}
analysisResult|=BIT_DESCENDANT_OR_SELF;
break;
case OpCodes.FROM_FOLLOWING:
analysisResult|=BIT_FOLLOWING;
break;
case OpCodes.FROM_FOLLOWING_SIBLINGS:
analysisResult|=BIT_FOLLOWING_SIBLING;
break;
case OpCodes.FROM_PRECEDING:
analysisResult|=BIT_PRECEDING;
break;
case OpCodes.FROM_PRECEDING_SIBLINGS:
analysisResult|=BIT_PRECEDING_SIBLING;
break;
case OpCodes.FROM_PARENT:
analysisResult|=BIT_PARENT;
break;
case OpCodes.FROM_SELF:
analysisResult|=BIT_SELF;
break;
case OpCodes.MATCH_ATTRIBUTE:
analysisResult|=(BIT_MATCH_PATTERN | BIT_ATTRIBUTE);
break;
case OpCodes.MATCH_ANY_ANCESTOR:
analysisResult|=(BIT_MATCH_PATTERN | BIT_ANCESTOR);
break;
case OpCodes.MATCH_IMMEDIATE_ANCESTOR:
analysisResult|=(BIT_MATCH_PATTERN | BIT_PARENT);
break;
default :
throw new RuntimeException(XSLMessages.createXPATHMessage(XPATHErrorResources.ER_NULL_ERROR_HANDLER,new Object[]{Integer.toString(stepType)}));
}
if (OpCodes.NODETYPE_NODE == compiler.getOp(stepOpCodePos + 3)) {
analysisResult|=BIT_NODETEST_ANY;
}
stepOpCodePos=compiler.getNextStepPos(stepOpCodePos);
if (stepOpCodePos < 0) break;
}
analysisResult|=(stepCount & BITS_COUNT);
return analysisResult;
}

public void compressMyOwnWay(int[] indexes){
  List<Integer> list=new ArrayList<Integer>(CarbonCommonConstants.CONSTANT_SIZE_TEN);
  List<Integer> map=new ArrayList<Integer>(CarbonCommonConstants.CONSTANT_SIZE_TEN);
  int k=0;
  int i=1;
  for (; i < indexes.length; i++) {
    if (indexes[i] - indexes[i - 1] == 1) {
      k++;
    }
 else {
      if (k > 0) {
        map.add((list.size()));
        list.add(indexes[i - k - 1]);
        list.add(indexes[i - 1]);
      }
 else {
        list.add(indexes[i - 1]);
      }
      k=0;
    }
  }
  if (k > 0) {
    map.add((list.size()));
    list.add(indexes[i - k - 1]);
    list.add(indexes[i - 1]);
  }
 else {
    list.add(indexes[i - 1]);
  }
  dataAfterComp=convertToArray(list);
  if (indexes.length == dataAfterComp.length) {
    indexMap=new int[0];
  }
 else {
    indexMap=convertToArray(map);
  }
  if (dataAfterComp.length == 2 && indexMap.length == 1) {
    alreadySorted=true;
  }
}

private void prependDecrement(BasicBlock bb,IR ir){
  if (DEBUG)   VM.sysWrite("Adding Increment to " + bb + "\n");
  RegisterOperand use=cbsReg.copyRO();
  RegisterOperand def=use.copyU2D();
  Instruction inc=Binary.create(INT_ADD,def,use,IRTools.IC(-1));
  bb.prependInstruction(inc);
}

public void addListener(ConnectableDeviceListener listener){
  if (!listeners.contains(listener)) {
    listeners.add(listener);
  }
}

private static final String toHexString(final byte[] bs){
  String hex="0123456789ABCDEF";
  StringBuilder res=new StringBuilder();
  for (  byte b : bs) {
    res.append(hex.charAt(((b >>> 4) & 0xF)));
    res.append(hex.charAt((b & 0xF)));
  }
  return res.toString();
}

public synchronized void flush() throws IOException {
  checkNotClosed();
  trimToSize();
  journalWriter.flush();
}

public double distance_to_the_left(PlaLineInt p_line){
  double result=Integer.MAX_VALUE;
  for (int index=0; index < border_line_count(); ++index) {
    PlaPointFloat curr_corner=corner_approx(index);
    PlaSide line_side=p_line.side_of(curr_corner,1);
    if (line_side == PlaSide.COLLINEAR) {
      line_side=p_line.side_of(corner(index));
    }
    if (line_side == PlaSide.ON_THE_RIGHT)     return -1;
    result=Math.min(result,p_line.distance_signed(curr_corner));
  }
  return result;
}

private static byte[] readClass(final InputStream is,boolean close) throws IOException {
  if (is == null) {
    throw new IOException("Class not found");
  }
  try {
    byte[] b=new byte[is.available()];
    int len=0;
    while (true) {
      int n=is.read(b,len,b.length - len);
      if (n == -1) {
        if (len < b.length) {
          byte[] c=new byte[len];
          System.arraycopy(b,0,c,0,len);
          b=c;
        }
        return b;
      }
      len+=n;
      if (len == b.length) {
        int last=is.read();
        if (last < 0) {
          return b;
        }
        byte[] c=new byte[b.length + 1000];
        System.arraycopy(b,0,c,0,len);
        c[len++]=(byte)last;
        b=c;
      }
    }
  }
  finally {
    if (close) {
      is.close();
    }
  }
}

public boolean displayTopicFromNames(String[] names){
  if (names.length == 0)   return displayTopic(DEFAULT);
 else {
    StringBuffer helpName=new StringBuffer();
    for (    String name : names) {
      if (helpName.length() > 0)       helpName.append("_");
      helpName.append(name);
    }
    return displayTopic(helpName.toString());
  }
}

public boolean acceptIdentical(String filePath,String fileName){
  if (fileNameGlob == null)   return false;
  if (fileName != null && fileName.equalsIgnoreCase(fileNameGlob))   return true;
  if (filePath != null) {
    int lastUnixPos=filePath.lastIndexOf('/');
    int lastWindowsPos=filePath.lastIndexOf('\\');
    int index=Math.max(lastUnixPos,lastWindowsPos);
    String filename=filePath.substring(index + 1);
    return filename != null && filename.equalsIgnoreCase(fileNameGlob);
  }
  return false;
}

private void validateNumCoresBlockSort(){
  String numCoresStr=carbonProperties.getProperty(CarbonCommonConstants.NUM_CORES_BLOCK_SORT,CarbonCommonConstants.NUM_CORES_BLOCK_SORT_DEFAULT_VAL);
  try {
    int numCores=Integer.parseInt(numCoresStr);
    if (numCores < CarbonCommonConstants.NUM_CORES_BLOCK_SORT_MIN_VAL || numCores > CarbonCommonConstants.NUM_CORES_BLOCK_SORT_MAX_VAL) {
      LOGGER.info("The num cores value \"" + numCoresStr + "\" for block sort is invalid. Using the default value \""+ CarbonCommonConstants.NUM_CORES_BLOCK_SORT_DEFAULT_VAL);
      carbonProperties.setProperty(CarbonCommonConstants.NUM_CORES_BLOCK_SORT,CarbonCommonConstants.NUM_CORES_BLOCK_SORT_DEFAULT_VAL);
    }
  }
 catch (  NumberFormatException e) {
    LOGGER.info("The num cores value \"" + numCoresStr + "\" for block sort is invalid. Using the default value \""+ CarbonCommonConstants.NUM_CORES_BLOCK_SORT_DEFAULT_VAL);
    carbonProperties.setProperty(CarbonCommonConstants.NUM_CORES_BLOCK_SORT,CarbonCommonConstants.NUM_CORES_BLOCK_SORT_DEFAULT_VAL);
  }
}

public static MemoryMatchFragment newInstance(){
  return new MemoryMatchFragment();
}

static void createFileFromResource(String resource,Resource file) throws IOException {
  createFileFromResource(resource,file,null);
}

public int endObject(){
  if (vtable == null || !nested)   throw new AssertionError("FlatBuffers: endObject called without startObject");
  addInt(0);
  int vtableloc=offset();
  for (int i=vtable_in_use - 1; i >= 0; i--) {
    short off=(short)(vtable[i] != 0 ? vtableloc - vtable[i] : 0);
    addShort(off);
  }
  final int standard_fields=2;
  addShort((short)(vtableloc - object_start));
  addShort((short)((vtable_in_use + standard_fields) * SIZEOF_SHORT));
  int existing_vtable=0;
  outer_loop:   for (int i=0; i < num_vtables; i++) {
    int vt1=bb.capacity() - vtables[i];
    int vt2=space;
    short len=bb.getShort(vt1);
    if (len == bb.getShort(vt2)) {
      for (int j=SIZEOF_SHORT; j < len; j+=SIZEOF_SHORT) {
        if (bb.getShort(vt1 + j) != bb.getShort(vt2 + j)) {
          continue outer_loop;
        }
      }
      existing_vtable=vtables[i];
      break outer_loop;
    }
  }
  if (existing_vtable != 0) {
    space=bb.capacity() - vtableloc;
    bb.putInt(space,existing_vtable - vtableloc);
  }
 else {
    if (num_vtables == vtables.length)     vtables=Arrays.copyOf(vtables,num_vtables * 2);
    vtables[num_vtables++]=offset();
    bb.putInt(bb.capacity() - vtableloc,offset() - vtableloc);
  }
  nested=false;
  return vtableloc;
}

private void endList(boolean orderedList){
  if (!mParagraphStyles.isEmpty()) {
    AccumulatedParagraphStyle style=mParagraphStyles.peek();
    ParagraphType type=style.getType();
    if ((orderedList && (type.isNumbering() || type == ParagraphType.INDENTATION_OL)) || (!orderedList && (type.isBullet() || type == ParagraphType.INDENTATION_UL))) {
      int indent=style.getRelativeIndent();
      if (indent > 1) {
        style.setRelativeIndent(indent - 1);
        style.setAbsoluteIndent(style.getAbsoluteIndent() - 1);
      }
 else {
        mParagraphStyles.pop();
      }
    }
 else {
      mParagraphStyles.pop();
      endList(orderedList);
    }
  }
}

public static void perspectiveM(double[] m,int offset,double fovy,double aspect,double zNear,double zFar){
  double f=1.0 / Math.tan(fovy * (Math.PI / 360.0));
  double rangeReciprocal=1.0 / (zNear - zFar);
  m[offset + 0]=f / aspect;
  m[offset + 1]=0.0;
  m[offset + 2]=0.0;
  m[offset + 3]=0.0;
  m[offset + 4]=0.0;
  m[offset + 5]=f;
  m[offset + 6]=0.0;
  m[offset + 7]=0.0;
  m[offset + 8]=0.0;
  m[offset + 9]=0.0;
  m[offset + 10]=(zFar + zNear) * rangeReciprocal;
  m[offset + 11]=-1.0;
  m[offset + 12]=0.0;
  m[offset + 13]=0.0;
  m[offset + 14]=2.0 * zFar * zNear* rangeReciprocal;
  m[offset + 15]=0.0;
}

protected double compute(String value){
  if (value != null) {
    try {
      return Double.parseDouble(value);
    }
 catch (    NumberFormatException e) {
      if (POSITIVE_INFINITY_STRING.equals(value)) {
        return Double.POSITIVE_INFINITY;
      }
 else       if (NEGATIVE_INFINITY_STRING.equals(value)) {
        return Double.NEGATIVE_INFINITY;
      }
      return Double.NaN;
    }
  }
  return Double.NaN;
}

protected int readBlock(){
  blockSize=read();
  int n=0;
  if (blockSize > 0) {
    try {
      int count=0;
      while (n < blockSize) {
        count=in.read(block,n,blockSize - n);
        if (count == -1)         break;
        n+=count;
      }
    }
 catch (    IOException e) {
    }
    if (n < blockSize) {
      status=STATUS_FORMAT_ERROR;
    }
  }
  return n;
}

boolean isDuplicateRoleColumn(int column){
  return duplicateRoleColumn.contains(column);
}

public TimestampSpeechletRequestVerifier(long tolerance,TimeUnit unit){
  if (tolerance < 0) {
    throw new IllegalArgumentException("A negative tolerance is not supported");
  }
  toleranceInMilliseconds=unit.toMillis(tolerance);
}

private boolean isOutsideDocElem(){
  return (null == m_docFrag) && m_elemStack.size() == 0 && (null == m_currentNode || m_currentNode.getNodeType() == Node.DOCUMENT_NODE);
}

public void shutdown(){
  CountDownLatch wait_l;
synchronized (this) {
    wait_l=waitShutdown;
  }
  Shutdown_ind=true;
  try {
    if (wait_l != null) {
      if (wait_l.await(3000,TimeUnit.MILLISECONDS))       LOG.info("echo service shutdown complete");
 else       LOG.warn("timeout waiting for echo service shutdown");
    }
 else {
      LOG.info("echo service shutdown: service does not appear to be active");
    }
  }
 catch (  InterruptedException int_exc) {
    LOG.warn("interrupted while waiting for echo service shutdown");
  }
}

void paintStrokes(Rectangle r,Graphics g,int axis,int[] lengthPattern,Color[] colorPattern){
  boolean xAxis=(axis == View.X_AXIS);
  int start=0;
  int end=(xAxis ? r.width : r.height);
  while (start < end) {
    for (int i=0; i < lengthPattern.length; i++) {
      if (start >= end) {
        break;
      }
      int length=lengthPattern[i];
      Color c=colorPattern[i];
      if (c != null) {
        int x=r.x + (xAxis ? start : 0);
        int y=r.y + (xAxis ? 0 : start);
        int width=xAxis ? length : r.width;
        int height=xAxis ? r.height : length;
        g.setColor(c);
        g.fillRect(x,y,width,height);
      }
      start+=length;
    }
  }
}

private void deleteChildren(Element container){
  while (container.hasChildNodes()) {
    container.removeChild(container.getLastChild());
  }
}

public String fillParamWithEventAttrib(String paramData,Event event){
  if (!database.isOpen()) {
    throw new IllegalStateException(TAG + " is already closed.");
  }
  StringBuilder retVal=new StringBuilder();
  int cursor=0;
  while (cursor < paramData.length()) {
    int openBracketIdx=paramData.indexOf('<',cursor);
    int closeBracketIdx=paramData.indexOf('>',cursor);
    if (openBracketIdx == -1 || closeBracketIdx == -1 || openBracketIdx + 1 >= closeBracketIdx) {
      retVal.append(paramData.substring(cursor));
      break;
    }
    String attr=paramData.substring(openBracketIdx + 1,closeBracketIdx);
    String param=paramData.substring(openBracketIdx,closeBracketIdx + 1);
    String paramAttr;
    try {
      paramAttr=event.getAttribute(attr);
    }
 catch (    IllegalArgumentException e) {
      paramAttr=param;
    }
    retVal.append(paramData.substring(cursor,openBracketIdx));
    retVal.append(paramAttr);
    cursor=closeBracketIdx + 1;
  }
  Log.d("fillParamWithEventAttrib",paramData + " -> " + retVal.toString());
  return retVal.toString();
}

public static double twoPow(int power){
  if (power <= -MAX_DOUBLE_EXPONENT) {
    if (power >= MIN_DOUBLE_EXPONENT) {
      return Double.longBitsToDouble(0x0008000000000000L >> (-(power + MAX_DOUBLE_EXPONENT)));
    }
 else {
      return 0.0;
    }
  }
 else   if (power > MAX_DOUBLE_EXPONENT) {
    return Double.POSITIVE_INFINITY;
  }
 else {
    return Double.longBitsToDouble(((long)(power + MAX_DOUBLE_EXPONENT)) << 52);
  }
}

@SuppressWarnings("raw") public static Type resolveTypeVariable(TypeVariable name,Class declaringClass,Class topClass){
  Type type=resolveTypeVariable(name,declaringClass,new HashMap<>(),topClass);
  if (type == null) {
    type=Object.class;
  }
  return type;
}

private ResourceImpl aggregate(ResourceImpl resourceA,ResourceImpl resourceB) throws NotFoundException {
  final String typeId=resourceA.getType();
  final ResourceType resourceType=getResourceType(typeId);
  return resourceType.aggregate(resourceA,resourceB);
}

public static boolean renameFile(String filePath,String oldFilename,String newFilename){
  if ((filePath == null) || filePath.isEmpty() || (oldFilename == null)|| oldFilename.isEmpty()|| (newFilename == null)|| newFilename.isEmpty()) {
    return false;
  }
  File oldFile=new File(filePath + File.separator + oldFilename);
  File newFile=new File(filePath + File.separator + newFilename);
  boolean isSuccessfulRename;
  try {
    isSuccessfulRename=oldFile.renameTo(newFile);
  }
 catch (  Exception e) {
    logger.debug(e.toString() + System.lineSeparator() + StackTrace.getStringFromStackTrace(e));
    isSuccessfulRename=false;
  }
  return isSuccessfulRename;
}

@RpcMethod public void startImageScan(String dataStore,Long scanRate,Long timeout,AsyncMethodCallback<Host.AsyncClient.start_image_scan_call> handler) throws RpcException {
  ensureClient();
  StartImageScanRequest request=new StartImageScanRequest(dataStore);
  if (null != scanRate) {
    request.setScan_rate(scanRate);
  }
  if (null != timeout) {
    request.setTimeout(timeout);
  }
  try {
    logger.info("start_image_scan target {}, request {}",getHostIp(),request);
    clientProxy.setTimeout(START_IMAGE_SCAN_TIMEOUT_MS);
    clientProxy.start_image_scan(request,handler);
  }
 catch (  TException e) {
    throw new RpcException(e.getMessage());
  }
}

public static String format(int n,String col){
  String res=padd + n;
  return res.substring(res.length() - col.length());
}

public GitConflictException(String message){
  super(message);
}

private void trace(){
  glUseProgram(photonTraceProgram);
  long thisTime=System.nanoTime();
  float elapsedSeconds=(thisTime - firstTime) / 1E9f;
  glUniform1f(timeUniform,elapsedSeconds);
  glBindBufferBase(GL_SHADER_STORAGE_BUFFER,boxesSsboBinding,ssbo);
  glBindBufferBase(GL_UNIFORM_BUFFER,imagesUboBinding,imageHandlesUbo);
  int invocationsPerDimension=photonsPerFrame;
  int worksizeX=mathRoundPoT(invocationsPerDimension);
  int worksizeY=mathRoundPoT(invocationsPerDimension);
  if (variableGroupSize) {
    ARBComputeVariableGroupSize.glDispatchComputeGroupSizeARB(worksizeX / workGroupSizeX,worksizeY / workGroupSizeY,1,workGroupSizeX,workGroupSizeY,1);
  }
 else {
    glDispatchCompute(worksizeX / workGroupSizeX,worksizeY / workGroupSizeY,1);
  }
  glMemoryBarrier(GL_SHADER_IMAGE_ACCESS_BARRIER_BIT);
  glBindBufferBase(GL_SHADER_STORAGE_BUFFER,boxesSsboBinding,0);
  glBindBufferBase(GL_UNIFORM_BUFFER,imagesUboBinding,0);
  glUseProgram(0);
}

public caption addElement(String element){
  addElementToRegistry(Integer.toString(element.hashCode()),element);
  return (this);
}

protected void doResetCurrentPosition(){
  this.currentPosition=this.position;
}

public FloatBuffer put(float[] src,int srcOffset,int floatCount){
  JTranscArrays.checkOffsetAndCount(src.length,srcOffset,floatCount);
  if (floatCount > remaining()) {
    throw new BufferOverflowException();
  }
  for (int i=srcOffset; i < srcOffset + floatCount; ++i) {
    put(src[i]);
  }
  return this;
}

public String readLine(){
  String line;
  try {
    line=scanner.nextLine();
  }
 catch (  NoSuchElementException e) {
    line=null;
  }
  return line;
}

private boolean messageChanged(String oldMessage,String newMessage){
  return ((newMessage == null) && (oldMessage != null)) || ((newMessage != null) && !newMessage.equals(oldMessage));
}

public static int copy(InputStream in,OutputStream out) throws IOException {
  Assert.notNull(in,"No InputStream specified");
  Assert.notNull(out,"No OutputStream specified");
  try {
    return StreamUtils.copy(in,out);
  }
  finally {
    try {
      in.close();
    }
 catch (    IOException ex) {
    }
    try {
      out.close();
    }
 catch (    IOException ex) {
    }
  }
}

private MultiLineString readMultiLine(OraGeom oraGeom){
  int nElem=oraGeom.numElements();
  List geoms=new ArrayList();
  for (int i=0; i < nElem; i++) {
    int etype=oraGeom.eType(i);
    if (etype != OraGeom.ETYPE.LINE)     break;
    geoms.add(readLine(oraGeom,i));
  }
  MultiLineString lines=geometryFactory.createMultiLineString(GeometryFactory.toLineStringArray(geoms));
  return lines;
}

public boolean isCalledMethod(String className,String methodName){
  if (toTestMethods.isEmpty())   computeInterestingClasses(graph);
  if (toTestMethods.contains(className + methodName)) {
    return true;
  }
  return false;
}

public Explanation idfExplain(CollectionStatistics collectionStats,TermStatistics termStats[]){
  final long docCount=collectionStats.docCount() == -1 ? collectionStats.maxDoc() : collectionStats.docCount();
  float idf=0.0f;
  List<Explanation> details=new ArrayList<>();
  for (  final TermStatistics stat : termStats) {
    final long df=stat.docFreq();
    final float termIdf=idf(df,docCount);
    details.add(Explanation.match(termIdf,"idf(docFreq=" + df + ", docCount="+ docCount+ ")"));
    idf+=termIdf;
  }
  return Explanation.match(idf,"idf(), sum of:",details);
}

public void removeArea(final Section AREA){
  if (null == AREA)   return;
  areas.remove(AREA);
  Collections.sort(areas,new SectionComparator());
  fireUpdateEvent(SECTION_EVENT);
}

public void testEmptyRunIndex(){
  String rs="runSetting";
  Settings s=new Settings("Ns");
  s.setSecondaryNamespace("DefNs");
  assertEquals(s.getInt(rs),1);
  Settings.setRunIndex(1);
  assertEquals(s.getInt(rs),1);
  Settings.setRunIndex(2);
  assertEquals(s.getInt(rs),2);
  Settings.setRunIndex(3);
  assertEquals(s.getInt(rs),1);
}

public void clear(){
synchronized (mLock) {
    mGraphics.clear();
  }
  postInvalidate();
}

@SuppressWarnings("unchecked") public void connect(final BluetoothDevice device,final ILogSession session){
  if (mManagedDevices.contains(device))   return;
  mManagedDevices.add(device);
  BleManager<BleManagerCallbacks> manager=mBleManagers.get(device);
  if (manager != null) {
    if (session != null)     manager.setLogger(session);
    manager.connect(device);
  }
 else {
    mBleManagers.put(device,manager=initializeManager());
    manager.setGattCallbacks(BleMulticonnectProfileService.this);
    manager.setLogger(session);
    manager.connect(device);
  }
}

public void testCase19(){
  byte aBytes[]={-127,100,56,7,98,-1,39,-128,127,75};
  byte bBytes[]={27,-15,65,39,100};
  int aSign=1;
  int bSign=-1;
  byte rBytes[]={12,-21,73,56,27};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger bNumber=new BigInteger(bSign,bBytes);
  BigInteger result=aNumber.remainder(bNumber);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

public ScannerException(ErrorMessages message){
  this(null,ErrorMessages.get(message),message,-1,-1);
}

public boolean isNavigationAtBottom(){
  return (mSmallestWidthDp >= 600 || mInPortrait);
}

private int clampMag(int value,int absMin,int absMax){
  final int absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

private static void formatTimeZone(Calendar cal,StringBuilder buf){
  TimeZone tz=cal.getTimeZone();
  if (tz == null)   return;
  int offset;
  if (tz.inDaylightTime(cal.getTime())) {
    offset=tz.getRawOffset() + (tz.useDaylightTime() ? 3600000 : 0);
  }
 else {
    offset=tz.getRawOffset();
  }
  if (offset == 0) {
    buf.append('Z');
    return;
  }
  if (offset >= 0)   buf.append('+');
 else {
    buf.append('-');
    offset*=-1;
  }
  offset/=60 * 1000;
  formatTwoDigits(offset / 60,buf);
  buf.append(':');
  formatTwoDigits(offset % 60,buf);
}

private E unlinkLast(){
  Node<E> l=last;
  if (l == null)   return null;
  Node<E> p=l.prev;
  E item=l.item;
  l.item=null;
  l.prev=l;
  last=p;
  if (p == null)   first=null;
 else   p.next=null;
  --count;
  notFull.signal();
  return item;
}

public MutableString(final MutableString s){
  makeCompactMutableString(s.length());
  System.arraycopy(s.array,0,array,0,array.length);
}

private void request(){
  if (isVisible() && stream != null && !stream.isEmpty()) {
    loading=true;
    if (type == Type.FOLLOWERS) {
      api.getFollowers(stream);
    }
 else     if (type == Type.SUBSCRIBERS) {
      api.getSubscribers(stream);
    }
  }
}

public List<Statement> mungedStyle(){
  List<Statement> st=built();
  if (includeBasicEntityForSubject) {
    st.remove(entityDataAboutDecl);
    st.remove(entityDataVersionDecl);
    st.remove(entityDataDateModifiedDecl);
    statement(st,uris.entity() + entity,SchemaDotOrg.VERSION,version);
    statement(st,uris.entity() + entity,SchemaDotOrg.DATE_MODIFIED,dateModified);
  }
  st.remove(statementTypeDecl);
  for (  ExtraInfo e : extraInfo) {
    e.munge(st);
  }
  return st;
}

private void writeRequest(final NextFilter nextFilter,final SocksProxyRequest request,int step){
  try {
    IoBuffer buf=null;
    if (step == SocksProxyConstants.SOCKS5_GREETING_STEP) {
      buf=encodeInitialGreetingPacket(request);
    }
 else     if (step == SocksProxyConstants.SOCKS5_AUTH_STEP) {
      buf=encodeAuthenticationPacket(request);
      if (buf == null) {
        step=SocksProxyConstants.SOCKS5_REQUEST_STEP;
      }
    }
    if (step == SocksProxyConstants.SOCKS5_REQUEST_STEP) {
      buf=encodeProxyRequestPacket(request);
    }
    buf.flip();
    writeData(nextFilter,buf);
  }
 catch (  Exception ex) {
    closeSession("Unable to send Socks request: ",ex);
  }
}

public synchronized void putAsInt(Object key,int value){
  put(key,new Integer(value));
}

public void close() throws IOException {
  if (writer != null) {
    writer.close();
  }
 else {
    cb=null;
    closed=true;
  }
}

private CertPath buildCertPath(X509Certificate endCert) throws CertificatePathBuildingException {
  CertPathBuilder cpb=null;
  try {
    cpb=CertPathBuilder.getInstance("PKIX");
  }
 catch (  NoSuchAlgorithmException e) {
    throw new CertificatePathBuildingException("Error building CertPathBuilder:" + e.getMessage(),e);
  }
  PKIXBuilderParameters params=CreatePKIXBuilderParameters(endCert);
  CertPathBuilderResult cpbResult;
  try {
    cpbResult=cpb.build(params);
  }
 catch (  CertPathBuilderException e) {
    throw new CertificatePathBuildingException(e.getMessage(),e.getCause());
  }
catch (  InvalidAlgorithmParameterException e) {
    throw new CertificatePathBuildingException(e.getMessage(),e);
  }
  CertPath cp=cpbResult.getCertPath();
  return cp;
}

public void addConfiguration(InputStream in) throws SMSException, SSOException {
  ServiceManager sm=new ServiceManager(token);
  Document doc=SMSSchema.getXMLDocument(in);
  NodeList nodes=doc.getElementsByTagName(SMSUtils.SERVICE);
  for (int i=0; (nodes != null) && (i < nodes.getLength()); i++) {
    Node serviceNode=nodes.item(i);
    String sName=XMLUtils.getNodeAttributeValue(serviceNode,SMSUtils.NAME);
    String sVersion=XMLUtils.getNodeAttributeValue(serviceNode,SMSUtils.VERSION);
    Node configNode;
    if (sName.equals(serviceName) && (sVersion.equals(version)) && ((configNode=XMLUtils.getChildNode(serviceNode,SMSUtils.CONFIGURATION)) != null)) {
      CreateServiceConfig.createService(sm,sName,sVersion,configNode,null);
    }
  }
}

public static int stringToDictId(String str){
  try {
    byte[] bytes=str.getBytes("ISO-8859-1");
    return BytesUtil.readUnsigned(bytes,0,bytes.length);
  }
 catch (  UnsupportedEncodingException e) {
    return 0;
  }
}

public void start() throws IOException, MqttException {
  final String methodName="start";
  try {
    log.fine(CLASS_NAME,methodName,"252",new Object[]{host,new Integer(port),new Long(conTimeout * 1000)});
    SocketAddress sockaddr=new InetSocketAddress(host,port);
    socket=factory.createSocket();
    socket.connect(sockaddr,conTimeout * 1000);
  }
 catch (  ConnectException ex) {
    log.fine(CLASS_NAME,methodName,"250",null,ex);
    throw new MqttException(MqttException.REASON_CODE_SERVER_CONNECT_ERROR,ex);
  }
}

public void callSeriallyAndWait(Runnable r){
  if (isEdt()) {
    throw new RuntimeException("This method MUST NOT be invoked on the EDT");
  }
  RunnableWrapper c=new RunnableWrapper(r,0);
  callSerially(c);
  flushEdt();
synchronized (lock) {
    while (!c.isDone()) {
      try {
        lock.wait(50);
      }
 catch (      InterruptedException err) {
      }
    }
  }
}

public List<Contact> find(){
  List<Long> ids=new ArrayList<>();
  if (innerQueries != null) {
    for (    Query query : innerQueries) {
      ids.addAll(query.findInner());
    }
  }
 else {
    if (mimeWhere.isEmpty()) {
      return find(null);
    }
    for (    Map.Entry<String,Where> entry : mimeWhere.entrySet()) {
      ids=findIds(ids,entry.getKey(),entry.getValue());
    }
  }
  return find(ids);
}

public void persistBeanData(Object bean,boolean printOnly){
  persistBeanTryCatch(bean);
  callPersistEmittedKeyValue(printOnly);
}

private void refill() throws IOException {
  offset+=usableLength;
  int leftover=length - usableLength;
  System.arraycopy(buffer,usableLength,buffer,0,leftover);
  int requested=buffer.length - leftover;
  int returned=read(input,buffer,leftover,requested);
  length=returned < 0 ? leftover : returned + leftover;
  if (returned < requested)   usableLength=length;
 else {
    usableLength=findSafeEnd();
    if (usableLength < 0)     usableLength=length;
  }
  wrapper.setText(buffer,0,Math.max(0,usableLength));
  iterator.setText(wrapper);
}

protected void fireInsertUpdate(DocumentEvent evt){
  if (tokenMarker != null) {
    DocumentEvent.ElementChange ch=evt.getChange(getDefaultRootElement());
    if (ch != null) {
      tokenMarker.insertLines(ch.getIndex() + 1,ch.getChildrenAdded().length - ch.getChildrenRemoved().length);
    }
  }
  super.fireInsertUpdate(evt);
}

final void push(final Object object){
  stack.add(object);
}

int pending(){
  return pending.get();
}

private boolean isIncluded(final HttpServletRequest request){
  String uri=(String)request.getAttribute("javax.servlet.include.request_uri");
  boolean includeRequest=!(uri == null);
  if (includeRequest && log.isDebugEnabled()) {
    log.debug("{} resulted in an include request. This is unusable, because" + "the response will be assembled into the overrall response. Not gzipping.",request.getRequestURL());
  }
  return includeRequest;
}

public void drawDomainMarker(Graphics2D g2,ContourPlot plot,ValueAxis domainAxis,Marker marker,Rectangle2D dataArea){
  if (marker instanceof ValueMarker) {
    ValueMarker vm=(ValueMarker)marker;
    double value=vm.getValue();
    Range range=domainAxis.getRange();
    if (!range.contains(value)) {
      return;
    }
    double x=domainAxis.valueToJava2D(value,dataArea,RectangleEdge.BOTTOM);
    Line2D line=new Line2D.Double(x,dataArea.getMinY(),x,dataArea.getMaxY());
    Paint paint=marker.getOutlinePaint();
    Stroke stroke=marker.getOutlineStroke();
    g2.setPaint(paint != null ? paint : Plot.DEFAULT_OUTLINE_PAINT);
    g2.setStroke(stroke != null ? stroke : Plot.DEFAULT_OUTLINE_STROKE);
    g2.draw(line);
  }
}

private static int encodeText(CharSequence msg,int startpos,int count,StringBuilder sb,int initialSubmode){
  StringBuilder tmp=new StringBuilder(count);
  int submode=initialSubmode;
  int idx=0;
  while (true) {
    char ch=msg.charAt(startpos + idx);
switch (submode) {
case SUBMODE_ALPHA:
      if (isAlphaUpper(ch)) {
        if (ch == ' ') {
          tmp.append((char)26);
        }
 else {
          tmp.append((char)(ch - 65));
        }
      }
 else {
        if (isAlphaLower(ch)) {
          submode=SUBMODE_LOWER;
          tmp.append((char)27);
          continue;
        }
 else         if (isMixed(ch)) {
          submode=SUBMODE_MIXED;
          tmp.append((char)28);
          continue;
        }
 else {
          tmp.append((char)29);
          tmp.append((char)PUNCTUATION[ch]);
          break;
        }
      }
    break;
case SUBMODE_LOWER:
  if (isAlphaLower(ch)) {
    if (ch == ' ') {
      tmp.append((char)26);
    }
 else {
      tmp.append((char)(ch - 97));
    }
  }
 else {
    if (isAlphaUpper(ch)) {
      tmp.append((char)27);
      tmp.append((char)(ch - 65));
      break;
    }
 else     if (isMixed(ch)) {
      submode=SUBMODE_MIXED;
      tmp.append((char)28);
      continue;
    }
 else {
      tmp.append((char)29);
      tmp.append((char)PUNCTUATION[ch]);
      break;
    }
  }
break;
case SUBMODE_MIXED:
if (isMixed(ch)) {
tmp.append((char)MIXED[ch]);
}
 else {
if (isAlphaUpper(ch)) {
  submode=SUBMODE_ALPHA;
  tmp.append((char)28);
  continue;
}
 else if (isAlphaLower(ch)) {
  submode=SUBMODE_LOWER;
  tmp.append((char)27);
  continue;
}
 else {
  if (startpos + idx + 1 < count) {
    char next=msg.charAt(startpos + idx + 1);
    if (isPunctuation(next)) {
      submode=SUBMODE_PUNCTUATION;
      tmp.append((char)25);
      continue;
    }
  }
  tmp.append((char)29);
  tmp.append((char)PUNCTUATION[ch]);
}
}
break;
default :
if (isPunctuation(ch)) {
tmp.append((char)PUNCTUATION[ch]);
}
 else {
submode=SUBMODE_ALPHA;
tmp.append((char)29);
continue;
}
}
idx++;
if (idx >= count) {
break;
}
}
char h=0;
int len=tmp.length();
for (int i=0; i < len; i++) {
boolean odd=(i % 2) != 0;
if (odd) {
h=(char)((h * 30) + tmp.charAt(i));
sb.append(h);
}
 else {
h=tmp.charAt(i);
}
}
if ((len % 2) != 0) {
sb.append((char)((h * 30) + 29));
}
return submode;
}

public void remove(String attrName,String delValue){
  int index=indexOf(attrName);
  if (index != -1) {
    Attr attr=(Attr)_attrs.get(index);
    attr.removeValue(delValue);
    if (attr.size() == 0) {
      _attrs.remove(index);
    }
  }
}

private AppliedMigration createAppliedSchemaMigration(){
  return new AppliedMigration(0,0,MigrationVersion.fromVersion(Integer.toString(0)),"<< Schema Creation >>",MigrationType.SCHEMA,"x",null,new Date(),"sa",0,true);
}

public static String makeSigAlg(String digAlg,String encAlg){
  digAlg=digAlg.replace("-","");
  if (encAlg.equalsIgnoreCase("EC"))   encAlg="ECDSA";
  return digAlg + "with" + encAlg;
}

public Table sample(double proportion){
  int tableCount=(int)Math.round(rowCount() * proportion);
  Selection table1Selection=new BitmapBackedSelection();
  int[] selectedRecords=generateUniformBitmap(tableCount,rowCount());
  for (  int selectedRecord : selectedRecords) {
    table1Selection.add(selectedRecord);
  }
  return selectWhere(table1Selection);
}

public static int indexOf(byte[] src,byte[] target,int fromIdx){
  final int to=src.length - target.length + 1;
  for (int i=fromIdx; i < to; i++) {
    if (src[i] == target[0]) {
      boolean equals=true;
      for (int j=1, k=i + 1; j < target.length && equals; j++, k++) {
        if (src[k] != target[j]) {
          equals=false;
        }
      }
      if (equals) {
        return i;
      }
    }
  }
  return -1;
}

@Override public int read(byte[] buf,int offset,int length) throws IOException {
  try {
    if (_channel == null) {
      return -1;
    }
    int remaining=_readBuffer.remaining();
    if (remaining > 0) {
      _readBuffer.get(buf,offset,remaining);
      return remaining;
    }
    _readBuffer.clear();
    int channelRead=_channel.read(_readBuffer);
    _readBuffer.flip();
    if (channelRead < 0)     return -1;
    _readBuffer.get(buf,offset,channelRead);
    return channelRead;
  }
 catch (  InterruptedIOException e) {
    if (_throwReadInterrupts)     throw e;
    log.log(Level.FINEST,e.toString(),e);
  }
catch (  IOException e) {
    if (_throwReadInterrupts)     throw e;
    log.log(Level.FINER,e.toString(),e);
  }
  return -1;
}

String readUTF(byte data[],int off,int len){
  int offset=off;
  StringBuffer buf=new StringBuffer();
  for (int end=offset + len; offset < end; ) {
    int ch=data[offset++] & 0xFF;
switch (ch >> 4) {
case 0:
case 1:
case 2:
case 3:
case 4:
case 5:
case 6:
case 7:
      break;
case 12:
case 13:
    if (offset >= len) {
      return null;
    }
  ch=((ch & 0x1F) << 6) | (data[offset++] & 0x3F);
break;
case 14:
if (offset + 2 >= len) {
return null;
}
ch=((ch & 0x0f) << 12) | ((data[offset++] & 0x3F) << 6) | (data[offset++] & 0x3F);
break;
default :
if (offset + 1 >= len) {
return null;
}
ch=((ch & 0x3F) << 4) | (data[offset++] & 0x0f);
break;
}
buf.append((char)ch);
}
return buf.toString();
}

public TurtleWriter(OutputStream out){
  this(new OutputStreamWriter(out,Charset.forName("UTF-8")));
}

private char lookahead(){
  return curCharIndex < pattern.length() - 1 ? pattern.charAt(curCharIndex + 1) : EOF;
}

public static boolean isNumber(String s){
  if (s.length() == 0) {
    return false;
  }
  for (  char c : s.toCharArray()) {
    if (!Character.isDigit(c)) {
      return false;
    }
  }
  return true;
}

private State(CircuitState circuitState,Duration timeoutDuration,EventCounter counter){
  this.circuitState=circuitState;
  this.counter=counter;
  if (timeoutDuration.isZero() || timeoutDuration.isNegative()) {
    timedOutTimeNanos=0L;
  }
 else {
    timedOutTimeNanos=ticker.read() + timeoutDuration.toNanos();
  }
}

public void cleanup(ButtonGroup bg){
  if (bg != null) {
    bg.remove(layerName);
  }
  cleanup();
}

public static Map<MetaKey,String> union(final Map<MetaKey,String> providedMetaData,final Map<MetaKey,String> extractedMetaData){
  final int size1=providedMetaData != null ? providedMetaData.size() : 0;
  final int size2=extractedMetaData != null ? extractedMetaData.size() : 0;
  if (size1 + size2 == 0) {
    return Collections.emptyMap();
  }
  final Map<MetaKey,String> result=new HashMap<>(size1 + size2);
  if (extractedMetaData != null) {
    result.putAll(extractedMetaData);
  }
  if (providedMetaData != null) {
    result.putAll(providedMetaData);
  }
  return Collections.unmodifiableMap(result);
}

public static char[] fix83600(char[] signature){
  if (signature == null || signature.length < 2)   return signature;
  return Signature.removeCapture(signature);
}

public static void formatDouble(double source,int decimals,int precision,StringBuffer target){
  int scale=(Math.abs(source) >= 1.0) ? decimals : precision;
  if (tooManyDigitsUsed(source,scale) || tooCloseToRound(source,scale)) {
    formatDoublePrecise(source,decimals,precision,target);
  }
 else {
    formatDoubleFast(source,decimals,precision,target);
  }
}

public static byte[] decode(byte[] input,int offset,int len,int flags){
  Decoder decoder=new Decoder(flags,new byte[len * 3 / 4]);
  if (!decoder.process(input,offset,len,true)) {
    throw new IllegalArgumentException("bad base-64");
  }
  if (decoder.op == decoder.output.length) {
    return decoder.output;
  }
  byte[] temp=new byte[decoder.op];
  System.arraycopy(decoder.output,0,temp,0,decoder.op);
  return temp;
}

protected View createChild(String name){
  View view=null;
  if (name.equals(TF_PARENTID) || name.equals(TF_CLIENT_TYPE)) {
    view=new CCTextField(this,name,"");
  }
 else   if (name.equals(SEC_MH_COMMON)) {
    view=new CCSecondaryMasthead(this,name);
  }
 else   if (name.equals(PGTITLE)) {
    view=new CCPageTitle(this,ptModel,name);
  }
 else   if (ptModel.isChildSupported(name)) {
    view=ptModel.createChild(this,name);
  }
 else   if (name.equals(PROPERTY_ATTRIBUTE)) {
    view=new AMPropertySheet(this,propertySheetModel,name);
  }
 else   if (propertySheetModel.isChildSupported(name)) {
    view=propertySheetModel.createChild(this,name,getModel());
  }
 else {
    view=super.createChild(name);
  }
  return view;
}

public synchronized void draw(final Graphics2D gfx,final float x,final float y){
  if (!isEmpty()) {
    m_textLayout.draw(gfx,x,y);
    for (    final CHighlighting highlighting : new ArrayList<CHighlighting>(m_highlighting)) {
      final double bpX=(x + highlighting.getStart()) - 2.;
      final double bpY=(y - m_charHeight) + 4;
      final double bpW=highlighting.getEnd() + 4;
      final double bpH=m_charHeight - 1;
      drawHighlighting(gfx,bpX,bpY,bpW,bpH,highlighting.getColor());
    }
  }
}

public void writeMapEnd() throws IOException {
  os.write('z');
}

public boolean isAbstract(){
  return Modifier.isAbstract(flags);
}

public static File relativeFile(File f){
  if (f.isAbsolute()) {
    f=relativeFile(new File("."),f);
  }
  return f;
}

public XMLParser(final String namespace,final String[] schemas) throws XMLException {
  try {
    JAXBContext jc=JAXBContext.newInstance(namespace);
    marshaller=jc.createMarshaller();
    marshaller.setSchema(XMLSchemaUtils.createSchema(schemas));
    unmarshaller=jc.createUnmarshaller();
    unmarshaller.setSchema(XMLSchemaUtils.createSchema(schemas));
  }
 catch (  JAXBException e) {
    throw new XMLException("Cannot instantiate marshaller/unmarshaller for " + namespace,e);
  }
}

private ArrayList<SpinnerLanguageElement> createSpinnerLanguages(int avoidLanguage){
  ArrayList<SpinnerLanguageElement> result=new ArrayList<SpinnerLanguageElement>();
  List<String> languages=mSessionOptions.allLanguages();
  for (int i=0; i < languages.size(); ++i) {
    if (i != avoidLanguage) {
      result.add(new SpinnerLanguageElement(languages.get(i),i));
    }
  }
  return result;
}

public String[] splitResourceName(String serviceTypeName,String resourceName) throws NameNotFoundException, SSOException, PolicyException {
  ServiceType st=getServiceType(serviceTypeName);
  Set prefixes=getManagedResourceNames(serviceTypeName);
  String[] retVal=new String[2];
  if (prefixes.isEmpty()) {
    retVal[0]="";
    retVal[1]=resourceName;
    return retVal;
  }
  Iterator iter=prefixes.iterator();
  String tmp=null;
  ResourceMatch matchResult=null;
  boolean foundSuperMatch=false;
  boolean foundExactMatch=false;
  while (iter.hasNext()) {
    tmp=(String)iter.next();
    matchResult=st.compare(resourceName,tmp);
    if (matchResult.equals(ResourceMatch.SUPER_RESOURCE_MATCH)) {
      foundSuperMatch=true;
      break;
    }
    if (matchResult.equals(ResourceMatch.EXACT_MATCH)) {
      foundExactMatch=true;
      break;
    }
  }
  if (foundSuperMatch) {
    retVal[0]=tmp;
    retVal[1]=st.getSubResource(resourceName,tmp);
    return retVal;
  }
  if (foundExactMatch) {
    retVal[0]=tmp;
    retVal[1]="";
    return retVal;
  }
  retVal[0]="";
  retVal[1]=resourceName;
  return retVal;
}

void materialize(){
  if (cachefill < 0) {
    return;
  }
  double min=Double.MAX_VALUE, max=Double.MIN_VALUE;
  for (int i=0; i < cachefill; i++) {
    min=Math.min(min,cachec[i]);
    max=Math.max(max,cachec[i]);
  }
  LinearScale scale=new LinearScale(min,max);
  min=scale.getMin();
  max=scale.getMax();
  this.base=min;
  this.max=max;
  this.binsize=(max - min) / this.destsize;
  this.data=new long[this.destsize << 1];
  size=destsize;
  final int end=cachefill;
  cachefill=-1;
  for (int i=0; i < end; i++) {
    increment(cachec[i],cachev[i]);
  }
  cachec=null;
  cachev=null;
}

public Criteria createCriteria(){
  Criteria criteria=createCriteriaInternal();
  if (oredCriteria.size() == 0) {
    oredCriteria.add(criteria);
  }
  return criteria;
}

public ArrayFieldVector(Field<T> field,T[] v1,T[] v2) throws MathIllegalArgumentException, NullArgumentException {
  MathUtils.checkNotNull(v1);
  MathUtils.checkNotNull(v2);
  if (v1.length + v2.length == 0) {
    throw new MathIllegalArgumentException(LocalizedCoreFormats.VECTOR_MUST_HAVE_AT_LEAST_ONE_ELEMENT);
  }
  data=MathArrays.buildArray(field,v1.length + v2.length);
  System.arraycopy(v1,0,data,0,v1.length);
  System.arraycopy(v2,0,data,v1.length,v2.length);
  this.field=field;
}

private void verifyTargetSessionIsLocalOrStateless(SessionRequest req,SessionID sid) throws SessionException, SessionRequestException, ForwardSessionRequestException {
  if (statelessSessionManager.containsJwt(sid)) {
    return;
  }
  String hostServerID=foreignSessionHandler.getCurrentHostServer(sid);
  if (!serverConfig.isLocalServer(hostServerID)) {
    try {
      throw new ForwardSessionRequestException(forward(SESSION_SERVICE_URL_SERVICE.getSessionServiceURL(hostServerID),req));
    }
 catch (    SessionException se) {
      if (!sessionService.checkServerUp(hostServerID)) {
        String retryHostServerID=foreignSessionHandler.getCurrentHostServer(sid);
        if (retryHostServerID.equals(hostServerID)) {
          throw se;
        }
 else {
          if (!serverConfig.isLocalServer(retryHostServerID)) {
            throw new ForwardSessionRequestException(forward(SESSION_SERVICE_URL_SERVICE.getSessionServiceURL(hostServerID),req));
          }
        }
      }
 else {
        throw se;
      }
    }
  }
  if (!sessionService.checkSessionLocal(sid)) {
    throw new SessionRequestException(sid,SessionBundle.getString("sessionNotObtained"));
  }
}

public static boolean isJavaBuiltinDataType(Class clazz){
  if (clazz == null) {
    return true;
  }
  Class clazzBoxed=getBoxedType(clazz);
  if (isNumeric(clazzBoxed)) {
    return true;
  }
  if (isBoolean(clazzBoxed)) {
    return true;
  }
  if (clazzBoxed.equals(String.class)) {
    return true;
  }
  if ((clazzBoxed.equals(char.class)) || (clazzBoxed.equals(Character.class))) {
    return true;
  }
  if (clazzBoxed.equals(void.class)) {
    return true;
  }
  return false;
}

protected boolean isControlChar(char ch){
  return Character.isISOControl(ch) && !Character.isWhitespace(ch);
}

public void encode(OutputStream out) throws IOException {
  DerOutputStream tmp=new DerOutputStream();
  if (extensionValue == null) {
    extensionId=PKIXExtensions.PolicyConstraints_Id;
    critical=false;
    encodeThis();
  }
  super.encode(tmp);
  out.write(tmp.toByteArray());
}

<T>List<T> onFindAll(Class<T> modelClass,boolean isEager,long... ids){
  List<T> dataList;
  if (isAffectAllLines(ids)) {
    dataList=query(modelClass,null,null,null,null,null,"id",null,getForeignKeyAssociations(modelClass.getName(),isEager));
  }
 else {
    dataList=query(modelClass,null,getWhereOfIdsWithOr(ids),null,null,null,"id",null,getForeignKeyAssociations(modelClass.getName(),isEager));
  }
  return dataList;
}

public boolean isCached(String requestUrl,int maxWidth,int maxHeight){
  return isCached(requestUrl,maxWidth,maxHeight,ScaleType.CENTER_INSIDE);
}

public Style addStyle(String nm,Style parent){
  StyleContext styles=(StyleContext)getAttributeContext();
  return styles.addStyle(nm,parent);
}

public static TextWithMnemonic parseText(final String textWithMnemonic){
  if (textWithMnemonic == null) {
    throw new IllegalArgumentException("textWithMnemonic cannot be null");
  }
  int index=-1;
  final StringBuffer plainText=new StringBuffer();
  for (int i=0; i < textWithMnemonic.length(); i++) {
    char ch=textWithMnemonic.charAt(i);
    if (ch == '&') {
      i++;
      if (i >= textWithMnemonic.length()) {
        break;
      }
      ch=textWithMnemonic.charAt(i);
      if (ch != '&') {
        index=plainText.length();
      }
    }
    plainText.append(ch);
  }
  return new TextWithMnemonic(plainText.toString(),index);
}

public void checkPermissions(NamespaceEntity namespaceEntity,String... requestedIamRoleNames){
  checkPermissions(namespaceEntity,Arrays.asList(requestedIamRoleNames));
}

private static AnnotatedTypeMirror asOuterSuper(Types types,AnnotatedTypeFactory atypeFactory,AnnotatedTypeMirror type,AnnotatedTypeMirror superType){
  if (type.getKind() == TypeKind.DECLARED) {
    AnnotatedDeclaredType dt=(AnnotatedDeclaredType)type;
    AnnotatedDeclaredType enclosingType=dt;
    TypeMirror superTypeMirror=types.erasure(superType.getUnderlyingType());
    while (enclosingType != null) {
      TypeMirror enclosingTypeMirror=types.erasure(enclosingType.getUnderlyingType());
      if (types.isSubtype(enclosingTypeMirror,superTypeMirror)) {
        dt=enclosingType;
        break;
      }
      enclosingType=enclosingType.getEnclosingType();
    }
    if (enclosingType == null) {
      return superType;
    }
    return asSuper(atypeFactory,dt,superType);
  }
  return asSuper(atypeFactory,type,superType);
}

public void reload(SolrCore core,SolrIndexSearcher searcher) throws IOException {
  LOG.info("reload()");
  if (dictionary == null && storeDir != null) {
    FileInputStream is=new FileInputStream(new File(storeDir,factory.storeFileName()));
    try {
      if (lookup.load(is)) {
        return;
      }
    }
  finally {
      IOUtils.closeWhileHandlingException(is);
    }
    LOG.debug("load failed, need to build Lookup again");
  }
  build(core,searcher);
}

public static String asString(String jsonPath,Map<String,Object> json){
  return pathAs(String.class,jsonPath,json);
}

@Override public ServerHeartbeat serverDyn(String address,int port,boolean isSSL,String clusterId,String displayName){
  Objects.requireNonNull(address);
  Objects.requireNonNull(clusterId);
  ClusterHeartbeat cluster=createCluster(clusterId);
  ServerHeartbeat server=cluster.createServer(address,port,isSSL);
  if (displayName != null) {
    server.setDisplayName(displayName);
  }
  cluster.addDynamicServer(server);
  return server;
}

public void paintComponentBackground(Object nativeGraphics,int x,int y,int width,int height,Style s){
  if (width <= 0 || height <= 0) {
    return;
  }
  Image bgImageOrig=s.getBgImage();
  if (bgImageOrig == null) {
    if (s.getBackgroundType() >= Style.BACKGROUND_GRADIENT_LINEAR_VERTICAL) {
      drawGradientBackground(s,nativeGraphics,x,y,width,height);
      return;
    }
    setColor(nativeGraphics,s.getBgColor());
    fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
  }
 else {
    int iW=bgImageOrig.getWidth();
    int iH=bgImageOrig.getHeight();
    Object bgImage=bgImageOrig.getImage();
switch (s.getBackgroundType()) {
case Style.BACKGROUND_NONE:
      if (s.getBgTransparency() != 0) {
        setColor(nativeGraphics,s.getBgColor());
        fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
      }
    return;
case Style.BACKGROUND_IMAGE_SCALED:
  if (isScaledImageDrawingSupported()) {
    drawImage(nativeGraphics,bgImage,x,y,width,height);
  }
 else {
    if (iW != width || iH != height) {
      bgImageOrig=bgImageOrig.scaled(width,height);
      s.setBgImage(bgImageOrig,true);
      bgImage=bgImageOrig.getImage();
    }
    drawImage(nativeGraphics,bgImage,x,y);
  }
return;
case Style.BACKGROUND_IMAGE_SCALED_FILL:
float r=Math.max(((float)width) / ((float)iW),((float)height) / ((float)iH));
int bwidth=(int)(((float)iW) * r);
int bheight=(int)(((float)iH) * r);
if (isScaledImageDrawingSupported()) {
drawImage(nativeGraphics,bgImage,x + (width - bwidth) / 2,y + (height - bheight) / 2,bwidth,bheight);
}
 else {
if (iW != bwidth || iH != bheight) {
bgImageOrig=bgImageOrig.scaled(bwidth,bheight);
s.setBgImage(bgImageOrig,true);
bgImage=bgImageOrig.getImage();
}
drawImage(nativeGraphics,bgImage,x + (width - bwidth) / 2,y + (height - bheight) / 2);
}
return;
case Style.BACKGROUND_IMAGE_SCALED_FIT:
if (s.getBgTransparency() != 0) {
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
}
float r2=Math.min(((float)width) / ((float)iW),((float)height) / ((float)iH));
int awidth=(int)(((float)iW) * r2);
int aheight=(int)(((float)iH) * r2);
if (isScaledImageDrawingSupported()) {
drawImage(nativeGraphics,bgImage,x + (width - awidth) / 2,y + (height - aheight) / 2,awidth,aheight);
}
 else {
if (iW != awidth || iH != aheight) {
bgImageOrig=bgImageOrig.scaled(awidth,aheight);
s.setBgImage(bgImageOrig,true);
bgImage=bgImageOrig.getImage();
}
drawImage(nativeGraphics,bgImage,x + (width - awidth) / 2,y + (height - aheight) / 2,awidth,aheight);
}
return;
case Style.BACKGROUND_IMAGE_TILE_BOTH:
tileImage(nativeGraphics,bgImage,x,y,width,height);
return;
case Style.BACKGROUND_IMAGE_TILE_HORIZONTAL_ALIGN_TOP:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
tileImage(nativeGraphics,bgImage,x,y,width,iH);
return;
case Style.BACKGROUND_IMAGE_TILE_HORIZONTAL_ALIGN_CENTER:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
tileImage(nativeGraphics,bgImage,x,y + (height / 2 - iH / 2),width,iH);
return;
case Style.BACKGROUND_IMAGE_TILE_HORIZONTAL_ALIGN_BOTTOM:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
tileImage(nativeGraphics,bgImage,x,y + (height - iH),width,iH);
return;
case Style.BACKGROUND_IMAGE_TILE_VERTICAL_ALIGN_LEFT:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
for (int yPos=0; yPos <= height; yPos+=iH) {
drawImage(nativeGraphics,bgImage,x,y + yPos);
}
return;
case Style.BACKGROUND_IMAGE_TILE_VERTICAL_ALIGN_CENTER:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
for (int yPos=0; yPos <= height; yPos+=iH) {
drawImage(nativeGraphics,bgImage,x + (width / 2 - iW / 2),y + yPos);
}
return;
case Style.BACKGROUND_IMAGE_TILE_VERTICAL_ALIGN_RIGHT:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
for (int yPos=0; yPos <= height; yPos+=iH) {
drawImage(nativeGraphics,bgImage,x + width - iW,y + yPos);
}
return;
case Style.BACKGROUND_IMAGE_ALIGNED_TOP:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
drawImage(nativeGraphics,bgImage,x + (width / 2 - iW / 2),y);
return;
case Style.BACKGROUND_IMAGE_ALIGNED_BOTTOM:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
drawImage(nativeGraphics,bgImage,x + (width / 2 - iW / 2),y + (height - iH));
return;
case Style.BACKGROUND_IMAGE_ALIGNED_LEFT:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
drawImage(nativeGraphics,bgImage,x,y + (height / 2 - iH / 2));
return;
case Style.BACKGROUND_IMAGE_ALIGNED_RIGHT:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
drawImage(nativeGraphics,bgImage,x + width - iW,y + (height / 2 - iH / 2));
return;
case Style.BACKGROUND_IMAGE_ALIGNED_CENTER:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
drawImage(nativeGraphics,bgImage,x + (width / 2 - iW / 2),y + (height / 2 - iH / 2));
return;
case Style.BACKGROUND_IMAGE_ALIGNED_TOP_LEFT:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
drawImage(nativeGraphics,bgImage,x,y);
return;
case Style.BACKGROUND_IMAGE_ALIGNED_TOP_RIGHT:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
drawImage(nativeGraphics,bgImage,x + width - iW,y);
return;
case Style.BACKGROUND_IMAGE_ALIGNED_BOTTOM_LEFT:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
drawImage(nativeGraphics,bgImage,x,y + (height - iH));
return;
case Style.BACKGROUND_IMAGE_ALIGNED_BOTTOM_RIGHT:
setColor(nativeGraphics,s.getBgColor());
fillRect(nativeGraphics,x,y,width,height,s.getBgTransparency());
drawImage(nativeGraphics,bgImage,x + width - iW,y + (height - iH));
return;
case Style.BACKGROUND_GRADIENT_LINEAR_HORIZONTAL:
case Style.BACKGROUND_GRADIENT_LINEAR_VERTICAL:
case Style.BACKGROUND_GRADIENT_RADIAL:
drawGradientBackground(s,nativeGraphics,x,y,width,height);
return;
}
}
}

public void runTest() throws Throwable {
  Document doc;
  NodeList genderList;
  Node genderNode;
  CharacterData entText;
  EntityReference entReference;
  Node appendedNode;
  doc=(Document)load("staff",true);
  genderList=doc.getElementsByTagName("gender");
  genderNode=genderList.item(2);
  entReference=doc.createEntityReference("ent3");
  assertNotNull("createdEntRefNotNull",entReference);
  appendedNode=genderNode.appendChild(entReference);
  entText=(CharacterData)entReference.getFirstChild();
  assertNotNull("entTextNotNull",entText);
{
    boolean success=false;
    try {
      entText.replaceData(1,3,"newArg");
    }
 catch (    DOMException ex) {
      success=(ex.code == DOMException.NO_MODIFICATION_ALLOWED_ERR);
    }
    assertTrue("throw_NO_MODIFICATION_ALLOWED_ERR",success);
  }
}

public void removeAll(){
  mParts.clear();
}

protected abstract void handleLostEntry(HttpRoute route);

private void writeAttribute(java.lang.String prefix,java.lang.String namespace,java.lang.String attName,java.lang.String attValue,javax.xml.stream.XMLStreamWriter xmlWriter) throws javax.xml.stream.XMLStreamException {
  if (xmlWriter.getPrefix(namespace) == null) {
    xmlWriter.writeNamespace(prefix,namespace);
    xmlWriter.setPrefix(prefix,namespace);
  }
  xmlWriter.writeAttribute(namespace,attName,attValue);
}

public static boolean executableExists(String executable){
  File directFile=new File(executable);
  if (directFile.exists() && directFile.canExecute()) {
    return true;
  }
  for (  String pathString : getSystemPath()) {
    Path path=Paths.get(pathString);
    if (Files.exists(path.resolve(executable)) && Files.isExecutable(path.resolve(executable))) {
      return true;
    }
  }
  return false;
}

@Override public String toString(){
  StringBuilder buf=new StringBuilder();
  int i=0;
  for (  PseudoOp op : contents) {
    buf.append(String.format("%4d : %s%n",i++,op));
  }
  return buf.toString();
}

private List<File> combine(List<File> listA,List<File> listB){
  LinkedHashSet<File> combinedProjects=Sets.newLinkedHashSet(listA);
  combinedProjects.addAll(listB);
  return new ArrayList<>(combinedProjects);
}

public long generateNewPingId(){
  PreferenceStore prefs=getPreferenceStore();
  Random rnd=new Random();
  long id=rnd.nextLong();
synchronized (DdmsPreferenceStore.class) {
    prefs.setValue(PING_ID,id);
    try {
      prefs.save();
    }
 catch (    IOException e) {
    }
  }
  return id;
}

public boolean isValid(){
  return System.currentTimeMillis() < creationTime + lifetime + (lifetime / 4);
}

public static Model readFrom(VirtualFile file) throws ServerException, ForbiddenException, IOException {
  requireNonNull(file,"Required not null virtual file");
  return fetchModel(XMLTree.from(file.getContent()));
}

public boolean isValueExistForKey(String key){
  boolean isValueExists;
  try {
    String string=getString(key,"");
    isValueExists=!string.equalsIgnoreCase("");
  }
 catch (  ClassCastException e) {
    try {
      int anInt=getInt(key,0);
      isValueExists=anInt != 0;
    }
 catch (    ClassCastException e1) {
      try {
        long aLong=getLong(key,0);
        isValueExists=aLong != 0;
      }
 catch (      ClassCastException e2) {
        try {
          float aFloat=getFloat(key,0f);
          isValueExists=aFloat != 0;
        }
 catch (        ClassCastException e3) {
          try {
            boolean aBoolean=getBoolean(key,false);
            isValueExists=!aBoolean;
          }
 catch (          Exception e4) {
            isValueExists=false;
            e.printStackTrace();
          }
        }
      }
    }
  }
catch (  Exception e) {
    isValueExists=false;
  }
  return isValueExists;
}

public void updateViewport(){
  setToOrtho(false,virtualViewport.getWidth(),virtualViewport.getHeight());
}

public String toString(){
  if (keyUsages == null)   return "";
  String usage="  ";
  boolean first=true;
  for (  ObjectIdentifier oid : keyUsages) {
    if (!first) {
      usage+="\n  ";
    }
    String result=map.get(oid);
    if (result != null) {
      usage+=result;
    }
 else {
      usage+=oid.toString();
    }
    first=false;
  }
  return super.toString() + "ExtendedKeyUsages [\n" + usage+ "\n]\n";
}

public static void writeBoxplot(TDoubleObjectHashMap<double[]> table,String file) throws IOException {
  int maxSize=0;
  TDoubleObjectIterator<double[]> it=table.iterator();
  for (int i=0; i < table.size(); i++) {
    it.advance();
    maxSize=Math.max(maxSize,it.value().length);
  }
  double keys[]=table.keys();
  Arrays.sort(keys);
  BufferedWriter writer=new BufferedWriter(new FileWriter(file));
  for (int k=0; k < keys.length; k++) {
    writer.write(String.valueOf(keys[k]));
    if (k + 1 < keys.length)     writer.write(TAB);
  }
  writer.newLine();
  for (int i=0; i < maxSize; i++) {
    for (int k=0; k < keys.length; k++) {
      double[] list=table.get(keys[k]);
      if (i < list.length) {
        writer.write(String.valueOf(list[i]));
      }
 else {
        writer.write(NA);
      }
      if (k + 1 < keys.length)       writer.write(TAB);
    }
    writer.newLine();
  }
  writer.close();
}

public void testClearBitNegativeInside3(){
  String as="-18446744073709551615";
  int number=2;
  BigInteger aNumber=new BigInteger(as);
  BigInteger result=aNumber.clearBit(number);
  assertEquals(as,result.toString());
}

@Theory public void logEntriesHaveSameOrderAsIndexes(Object[] dataPoint){
  int index1=(int)dataPoint[0];
  int index2=(int)dataPoint[1];
  LogEntry first=logEntries[index1];
  LogEntry second=logEntries[index2];
  LOG.debug("testing comparator for log entries: {} and {}",index1,index2);
  int result=tested.compare(first,second);
  int expected=Integer.compare(index1,index2);
  assertThatHaveSameSignum(expected,result);
}

public static void copyAll(File root,File dest) throws IOException {
  if (root.isDirectory()) {
    for (    File child : root.listFiles()) {
      File childDest=new File(dest,child.getName());
      if (child.isDirectory()) {
        if (!childDest.exists() && !mkdirs(childDest))         throw new IOException("Failed to create dir " + childDest.getPath());
        copyAll(child,childDest);
      }
 else {
        Files.copy(child.toPath(),childDest.toPath(),StandardCopyOption.COPY_ATTRIBUTES);
      }
    }
  }
 else {
    File childDest=new File(dest,root.getName());
    if (!dest.exists() && !mkdirs(dest))     throw new IOException("Failed to create dir " + dest.getPath());
    Files.copy(root.toPath(),childDest.toPath(),StandardCopyOption.COPY_ATTRIBUTES);
  }
}

public void paintLine(Point2D pt1,Point2D pt2){
  if (pt1 != null && pt2 != null) {
    OMLine cLine=new OMLine(pt1.getY(),pt1.getX(),pt2.getY(),pt2.getX(),OMGraphic.LINETYPE_GREATCIRCLE);
    Projection proj=theMap.getProjection();
    cLine.generate(proj);
    distanceList.add(cLine);
  }
}

public static boolean hasExportMaskForStorageAndVArray(DbClient dbClient,ExportGroup exportGroup,URI storageURI){
  Set<String> storagePortURIsAssociatedWithVArrayAndStorageArray=ExportMaskUtils.getStoragePortUrisAssociatedWithVarrayAndStorageArray(storageURI,exportGroup.getVirtualArray(),dbClient);
  StringSet maskUriSet=exportGroup.getExportMasks();
  if (maskUriSet != null) {
    for (    String maskUriString : maskUriSet) {
      ExportMask mask=dbClient.queryObject(ExportMask.class,URI.create(maskUriString));
      URI maskStorageURI=mask.getStorageDevice();
      if (maskStorageURI.equals(storageURI)) {
        for (        String storagePort : mask.getStoragePorts()) {
          if (storagePortURIsAssociatedWithVArrayAndStorageArray.contains(storagePort))           return true;
        }
      }
    }
  }
  return false;
}

private void preload(int first,boolean increasing){
  final int start;
  final int end;
  if (increasing) {
    start=Math.max(first,mLastEnd);
    end=Math.min(first + mLoadAheadItems,mItemSource.getCount());
  }
 else {
    start=Math.max(0,first - mLoadAheadItems);
    end=Math.min(first,mLastStart);
  }
  Log.v(TAG,"preload first=" + first + " increasing="+ increasing+ " start="+ start+ " end="+ end);
  mLastEnd=end;
  mLastStart=start;
  if (start == 0 && end == 0) {
    return;
  }
  final List<T> items=mItemSource.getItemsInRange(start,end);
  if (!increasing) {
    Collections.reverse(items);
  }
  registerLoadTokens(mItemLoader.preloadItems(items));
}

Builder addLenient(String line){
  int index=line.indexOf(":",1);
  if (index != -1) {
    return addLenient(line.substring(0,index),line.substring(index + 1));
  }
 else   if (line.startsWith(":")) {
    return addLenient("",line.substring(1));
  }
 else {
    return addLenient("",line);
  }
}

private void initRMIParameters() throws Exception {
  if (rmiHostMaster == null || rmiPortMaster == null) {
    File confDir=ReplicatorRuntimeConf.locateReplicatorConfDir();
    File propsFile=new File(confDir,ReplicationServiceManager.CONFIG_SERVICES);
    println(String.format("Not all RMI parameters provided, using configuration: %s",propsFile));
    TungstenProperties serviceProps=PropertiesManager.loadProperties(propsFile);
    if (rmiPortMaster == null)     rmiPortMaster=serviceProps.getString(ReplicatorConf.RMI_PORT,ReplicatorConf.RMI_DEFAULT_PORT,false);
    if (rmiHostMaster == null)     rmiHostMaster=ReplicationServiceManager.getHostName(serviceProps);
  }
}

public String encodeKey(final String key){
  if (StringUtils.isEmpty(key)) {
    throw new IllegalArgumentException("Key cannot be empty");
  }
  try {
    return Hex.encodeHexString(key.getBytes("UTF-8"));
  }
 catch (  UnsupportedEncodingException uee) {
    throw new IllegalStateException(uee);
  }
}

private static void globalUnionTest(final ISchemaVersion schemaVersion) throws IOException {
  final Writer output=openOutput(schemaVersion,"comprehensive",TestType.UNION);
  final HLL hll=newHLL(HLLType.EMPTY);
  final HLL emptyHLL=newHLL(HLLType.EMPTY);
  cumulativeUnionLine(output,hll,emptyHLL,schemaVersion);
  for (int i=0; i < 1000; i++) {
    final HLL randomHLL=generateRandomHLL();
    cumulativeUnionLine(output,hll,randomHLL,schemaVersion);
  }
  output.flush();
  output.close();
}

public static boolean restore(){
  File restoreConfig=new File(RESTORATION_PROPERTIES);
  if (restoreConfig.exists() && restoreConfig.isFile()) {
    logger.info("Performing restoration DHuS system...");
    try (FileInputStream stream=new FileInputStream(restoreConfig)){
      Properties properties=new Properties();
      properties.load(stream);
      restoreDatabase(properties);
      restoreSolrIndex(properties);
    }
 catch (    UnsupportedOperationException e) {
      logger.error("Incomplete DHuS restoration file.",e);
      System.setProperty("Archive.check","true");
    }
catch (    Exception e) {
      logger.fatal("Restoration failure.",e);
      return false;
    }
 finally {
      restoreConfig.delete();
    }
  }
  return true;
}

public void testSetBitPositiveInside4(){
  byte aBytes[]={1,-128,56,100,-2,-76,89,45,91,3,-15,35,26};
  int aSign=1;
  int number=50;
  byte rBytes[]={1,-128,56,100,-2,-76,93,45,91,3,-15,35,26};
  BigInteger aNumber=new BigInteger(aSign,aBytes);
  BigInteger result=aNumber.setBit(number);
  byte resBytes[]=new byte[rBytes.length];
  resBytes=result.toByteArray();
  for (int i=0; i < resBytes.length; i++) {
    assertTrue(resBytes[i] == rBytes[i]);
  }
  assertEquals("incorrect sign",1,result.signum());
}

@Override public void writeComment(String data) throws XMLStreamException {
  log.log(Level.FINE,"writeComment({0})",data);
}

public static File fromDataURI(String dataURI,String fileName){
  return File.createIfSupported(fromDataURI(dataURI),fileName);
}

protected List extractDiscoveryInformation(XRDS xrds,XriIdentifier identifier,Resolver xriResolver) throws DiscoveryException {
  ArrayList endpoints=new ArrayList();
  XRD xrd=xrds.getFinalXRD();
  extractDiscoveryInformationOpenID(xriResolver,endpoints,xrd,identifier,DiscoveryInformation.OPENID2_OP,false);
  extractDiscoveryInformationOpenID(xriResolver,endpoints,xrd,identifier,DiscoveryInformation.OPENID2,true);
  extractDiscoveryInformationOpenID(xriResolver,endpoints,xrd,identifier,DiscoveryInformation.OPENID11,true);
  extractDiscoveryInformationOpenID(xriResolver,endpoints,xrd,identifier,DiscoveryInformation.OPENID10,true);
  if (endpoints.size() == 0)   _log.info("No OpenID service types found in the XRDS.");
  return endpoints;
}

public static void clearRecentFiles(){
  String str=ProgramProperties.get(RECENTFILES,"");
  if (str.length() != 0) {
    ProgramProperties.put(RECENTFILES,"");
    notifyListChange(RECENTFILES);
  }
}

public static boolean areEquivalent(final TypeReference a,final TypeReference b){
  return areEquivalent(a,b,true);
}

private static char CallStaticCharMethodV(JNIEnvironment env,int classJREF,int methodID,Address argAddress) throws Exception {
  if (traceJNI)   VM.sysWrite("JNI called: CallStaticCharMethodV  \n");
  RuntimeEntrypoints.checkJNICountDownToGC();
  try {
    Object returnObj=JNIHelpers.invokeWithVarArg(methodID,argAddress,TypeReference.Char);
    return Reflection.unwrapChar(returnObj);
  }
 catch (  Throwable unexpected) {
    if (traceJNI)     unexpected.printStackTrace(System.err);
    env.recordException(unexpected);
    return 0;
  }
}

private boolean initXSettingsIfNeeded(final String propName){
  if (!loadedXSettings && (propName.startsWith("gnome.") || propName.equals(SunToolkit.DESKTOPFONTHINTS) || propName.startsWith(dndPrefix))) {
    loadedXSettings=true;
    if (!GraphicsEnvironment.isHeadless()) {
      loadXSettings();
      if (desktopProperties.get(SunToolkit.DESKTOPFONTHINTS) == null) {
        if (XWM.isKDE2()) {
          Object hint=fcManager.getFontConfigAAHint();
          if (hint != null) {
            desktopProperties.put(UNIXToolkit.FONTCONFIGAAHINT,hint);
          }
        }
        desktopProperties.put(SunToolkit.DESKTOPFONTHINTS,SunToolkit.getDesktopFontHints());
      }
      return true;
    }
  }
  return false;
}

private void updateSortingIcons(){
  for (  SortingType type : SortingType.values()) {
    SortingDirection direction=model.getSortingDirection(type);
    ImageIcon icon;
switch (direction) {
case DESCENDING:
      icon=ICON_ARROW_DOWN;
    break;
case ASCENDING:
  icon=ICON_ARROW_UP;
break;
case UNDEFINED:
icon=null;
break;
default :
icon=null;
}
switch (type) {
case NAME:
sortingLabelAttName.setIcon(icon);
break;
case TYPE:
sortingLabelAttType.setIcon(icon);
break;
case MISSING:
sortingLabelAttMissings.setIcon(icon);
break;
default :
sortingLabelAttName.setIcon(null);
sortingLabelAttType.setIcon(null);
sortingLabelAttMissings.setIcon(null);
}
}
}

@Override public synchronized void clear(){
  File[] files=mRootDirectory.listFiles();
  if (files != null) {
    for (    File file : files) {
      file.delete();
    }
  }
  mEntries.clear();
  mTotalSize=0;
  VolleyLog.d("Cache cleared.");
}

private void restoreIcon(Key key,byte[] buffer,int dataSize) throws IOException {
  if (VERBOSE)   Log.v(TAG,"unpacking icon " + key.id);
  if (DEBUG)   Log.d(TAG,"read (" + buffer.length + "): "+ Base64.encodeToString(buffer,0,dataSize,Base64.NO_WRAP));
  Resource res=unpackProto(new Resource(),buffer,dataSize);
  if (DEBUG) {
    Log.d(TAG,"unpacked " + res.dpi + " dpi icon");
  }
  Bitmap icon=BitmapFactory.decodeByteArray(res.data,0,res.data.length);
  if (icon == null) {
    Log.w(TAG,"failed to unpack icon for " + key.name);
  }
  if (VERBOSE)   Log.v(TAG,"saving restored icon as: " + key.name);
  IconCache.preloadIcon(mContext,ComponentName.unflattenFromString(key.name),icon,res.dpi);
}

public boolean isExpired(){
  return paymentDetails.hasExpires() && System.currentTimeMillis() / 1000L > paymentDetails.getExpires();
}

private void endFormals(){
  if (hasFormals) {
    hasFormals=false;
    buf.append('>');
  }
}

public static void readBytes(InputStream is,byte[] b,int offset,int len){
  if (len == 0)   return;
  try {
    int read=0;
    while (read < len) {
      int n=is.read(b,offset + read,len - read);
      if (n < 1)       throw new PngjInputException("error reading bytes, " + n + " !="+ len);
      read+=n;
    }
  }
 catch (  IOException e) {
    throw new PngjInputException("error reading",e);
  }
}

public CharacterMatch(char[] chars){
  Assert.isNotNull(chars);
  Assert.isTrue(chars.length > 0);
  fChars=chars;
  Arrays.sort(chars);
}

public void addActionListener(ActionListener newA){
  m_Listeners.add(newA);
}

public boolean removeContainerAndCancelIfNecessary(ImageContainer container){
  mContainers.remove(container);
  if (mContainers.size() == 0) {
    mRequest.cancel();
    return true;
  }
  return false;
}

public static byte[] encode(byte[] data,int off,int length){
  ByteArrayOutputStream bOut=new ByteArrayOutputStream();
  try {
    encoder.encode(data,off,length,bOut);
  }
 catch (  Exception e) {
    throw new EncoderException("exception encoding Hex string: " + e.getMessage(),e);
  }
  return bOut.toByteArray();
}

public double distanceToLineSegment(LatLong A,LatLong B){
  double Ax=(A.lng - lng) * Math.cos(0.5 * radians * (A.lat + lat));
  double Ay=(A.lat - lat);
  double Bx=(B.lng - lng) * Math.cos(0.5 * radians * (B.lat + lat));
  double By=(B.lat - lat);
  if (Ay == By) {
    if ((Ax < 0 && Bx < 0) || (Ax > 0 && Bx > 0))     return Math.sqrt(Math.min(Ax * Ax + Ay * Ay,Bx * Bx + By * By)) * EarthRadius * radians;
    if (Ax == Bx)     return Math.sqrt(Ax * Ax + Ay * Ay) * EarthRadius * radians;
  }
 else {
    double Ix=((By - Ay) * (Ax * By - Ay * Bx)) / ((Ax - Bx) * (Ax - Bx) + (Ay - By) * (Ay - By));
    if ((Ix < Ax && Ix < Bx) || (Ix > Ax && Ix > Bx)) {
      return Math.sqrt(Math.min(Ax * Ax + Ay * Ay,Bx * Bx + By * By)) * EarthRadius * radians;
    }
  }
  return Math.abs((Bx - Ax) * Ay - Ax * (By - Ay)) / Math.sqrt((Bx - Ax) * (Bx - Ax) + (By - Ay) * (By - Ay)) * EarthRadius * radians;
}

@NotNull public List<PlayerNbt> createMultiplayerPlayerNbts(){
  List<PlayerNbt> result=new ArrayList<PlayerNbt>();
  for (  File playerdataFile : getPlayerdataFiles()) {
    if (playerdataFile.isFile()) {
      result.add(createPlayerdataPlayerNbt(getPlayerUUIDFromPlayerdataFile(playerdataFile)));
    }
  }
  if (!result.isEmpty()) {
    Log.i("using players from the playerdata directory");
    return result;
  }
  for (  File playersFile : getPlayersFiles()) {
    if (playersFile.isFile()) {
      result.add(createPlayersPlayerNbt(getPlayerNameFromPlayersFile(playersFile)));
    }
  }
  if (!result.isEmpty()) {
    Log.i("using players from the players directory");
    return result;
  }
  Log.i("no multiplayer players found");
  return result;
}

public boolean removeContainerAndCancelIfNecessary(ImageContainer container){
  mContainers.remove(container);
  if (mContainers.size() == 0) {
    mRequest.cancel();
    return true;
  }
  return false;
}

private void show(SetupWindow window){
  window.handleWindowOpeningEvent();
  _setupWindowHolder.show(window.getKey());
  _currentWindow=window;
}

public java.lang.StringBuffer append(java.lang.String str){
  internal.append(str);
  return this;
}

private static String replaceStars(String init){
  StringBuilder builder=new StringBuilder();
  char[] chars=init.toCharArray();
  for (int i=0; i < chars.length; i++) {
    if (chars[i] == '*' && i == 0 && chars.length > 1 && chars[i + 1] == ' ') {
      builder.append("(?:.+ |)");
      i++;
    }
 else     if (chars[i] == '*' && i < (chars.length - 1) && i > 0 && chars[i + 1] == ' ' && chars[i - 1] == ' ') {
      builder.deleteCharAt(builder.length() - 1);
      builder.append("(?:.+|)");
    }
 else     if (chars[i] == '*' && i == (chars.length - 1) && i > 0 && chars[i - 1] == ' ') {
      builder.deleteCharAt(builder.length() - 1);
      builder.append("(?: .+|)");
    }
 else     if (chars[i] == '*') {
      builder.append("(?:.*)");
    }
 else {
      builder.append(chars[i]);
    }
  }
  return builder.toString();
}

public void startOptionGroup(String description){
  optionGroups.put(optionList.size(),description);
}

private byte[] encrypt(byte[] m,NTRUEncryptionPublicKeyParameters pubKey){
  IntegerPolynomial pub=pubKey.h;
  int N=params.N;
  int q=params.q;
  int maxLenBytes=params.maxMsgLenBytes;
  int db=params.db;
  int bufferLenBits=params.bufferLenBits;
  int dm0=params.dm0;
  int pkLen=params.pkLen;
  int minCallsMask=params.minCallsMask;
  boolean hashSeed=params.hashSeed;
  byte[] oid=params.oid;
  int l=m.length;
  if (maxLenBytes > 255) {
    throw new IllegalArgumentException("llen values bigger than 1 are not supported");
  }
  if (l > maxLenBytes) {
    throw new DataLengthException("Message too long: " + l + ">"+ maxLenBytes);
  }
  while (true) {
    byte[] b=new byte[db / 8];
    random.nextBytes(b);
    byte[] p0=new byte[maxLenBytes + 1 - l];
    byte[] M=new byte[bufferLenBits / 8];
    System.arraycopy(b,0,M,0,b.length);
    M[b.length]=(byte)l;
    System.arraycopy(m,0,M,b.length + 1,m.length);
    System.arraycopy(p0,0,M,b.length + 1 + m.length,p0.length);
    IntegerPolynomial mTrin=IntegerPolynomial.fromBinary3Sves(M,N);
    byte[] bh=pub.toBinary(q);
    byte[] hTrunc=copyOf(bh,pkLen / 8);
    byte[] sData=buildSData(oid,m,l,b,hTrunc);
    Polynomial r=generateBlindingPoly(sData,M);
    IntegerPolynomial R=r.mult(pub,q);
    IntegerPolynomial R4=(IntegerPolynomial)R.clone();
    R4.modPositive(4);
    byte[] oR4=R4.toBinary(4);
    IntegerPolynomial mask=MGF(oR4,N,minCallsMask,hashSeed);
    mTrin.add(mask);
    mTrin.mod3();
    if (mTrin.count(-1) < dm0) {
      continue;
    }
    if (mTrin.count(0) < dm0) {
      continue;
    }
    if (mTrin.count(1) < dm0) {
      continue;
    }
    R.add(mTrin,q);
    R.ensurePositive(q);
    return R.toBinary(q);
  }
}

public final void expectAtLeastOneResult(ResultSet rs) throws AdeInternalException, SQLException {
  if (!rs.next()) {
    throw new AdeInternalException("Expecting at least one row from " + m_sql);
  }
}

public Sequence(){
  this(INITIAL_VALUE);
}

public static Optional<MongoCredential> createCredentials(String username,String password,String database){
  if (!Strings.isNullOrEmpty(username) && !Strings.isNullOrEmpty(password) && !Strings.isNullOrEmpty(database)) {
    return Optional.of(MongoCredential.createMongoCRCredential(username,database,password.toCharArray()));
  }
 else {
    return Optional.absent();
  }
}

public static String readAsciiLine(InputStream in) throws IOException {
  StringBuilder result=new StringBuilder(80);
  while (true) {
    int c=in.read();
    if (c == -1) {
      throw new EOFException();
    }
 else     if (c == '\n') {
      break;
    }
    result.append((char)c);
  }
  int length=result.length();
  if (length > 0 && result.charAt(length - 1) == '\r') {
    result.setLength(length - 1);
  }
  return result.toString();
}

@Override public void stop(){
  if (executorService != null) {
    executorService.shutdown();
  }
  restTemplate=null;
}

public void writeExif(InputStream jpegStream,String exifOutFileName) throws FileNotFoundException, IOException {
  if (jpegStream == null || exifOutFileName == null) {
    throw new IllegalArgumentException(NULL_ARGUMENT_STRING);
  }
  OutputStream s=null;
  try {
    s=getExifWriterStream(exifOutFileName);
    doExifStreamIO(jpegStream,s);
    s.flush();
  }
 catch (  IOException e) {
    closeSilently(s);
    throw e;
  }
  s.close();
}

public ResultRecord(DirectoryScannerConfig scan,Action[] actions,File f){
  directoryScanner=scan.getName();
  this.actions=actions;
  date=new Date();
  filename=f.getAbsolutePath();
}

private MethodDoc findImplMethod(MethodDoc interfaceMethod){
  String name=interfaceMethod.name();
  String desc=Util.methodDescriptorOf(interfaceMethod);
  for (  MethodDoc implMethod : implClass.methods()) {
    if (name.equals(implMethod.name()) && desc.equals(Util.methodDescriptorOf(implMethod))) {
      return implMethod;
    }
  }
  return null;
}

protected static List<String> extractBootClassPath(final List<String> args){
  return extractOptWithPattern(BOOT_CLASS_PATH_REGEX,false,args);
}

public abstract Object fromOpenValue(Object openValue) throws InvalidObjectException ;

public ContourPath(ContourAttrib attr,int levelIndex,double[] x,double[] y){
  xArr=x;
  yArr=y;
  this.levelIndex=levelIndex;
  attributes=attr;
  int np=xArr.length;
  if (Math.abs(x[0] - x[np - 1]) < kSmallX && Math.abs(y[0] - y[np - 1]) < kSmallY) {
    closed=true;
    x[np - 1]=x[0];
    y[np - 1]=y[0];
  }
 else   closed=false;
}

private int clampMag(int value,int absMin,int absMax){
  final int absValue=Math.abs(value);
  if (absValue < absMin)   return 0;
  if (absValue > absMax)   return value > 0 ? absMax : -absMax;
  return value;
}

protected void print(String mnemonic,String[] args){
  printer.print(indent + "    ");
  writePaddedString(mnemonic + " ",15);
  if (args != null) {
    for (int i=0; i < args.length; i++) {
      if (i > 0) {
        printer.print(", ");
      }
      printer.print(args[i]);
    }
  }
  printer.println();
}

@Override public void removeConnectionEventListener(ConnectionEventListener listener){
  debugCode("removeConnectionEventListener(listener);");
  listeners.remove(listener);
}

public boolean isDownloadable(){
  List<String> topics=getExactTopics();
  for (  String xt : topics)   if (xt.startsWith("urn:btih"))   return true;
  if (getDefaultURLs().length > 0) {
    return true;
  }
  return false;
}

public boolean isSatisfiedBy(Date date){
  Calendar testDateCal=Calendar.getInstance(getTimeZone());
  testDateCal.setTime(date);
  testDateCal.set(Calendar.MILLISECOND,0);
  Date originalDate=testDateCal.getTime();
  testDateCal.add(Calendar.SECOND,-1);
  Date timeAfter=getTimeAfter(testDateCal.getTime());
  return ((timeAfter != null) && (timeAfter.equals(originalDate)));
}

public static Vector<String> scanForDirLogs(final String currentPath){
  if (Cfg.DEBUG) {
    Check.requires(currentPath != null,"null argument");
  }
  File fc;
  final Vector<String> vector=new Vector<String>();
  try {
    fc=new File(currentPath);
    if (fc.isDirectory()) {
      final String[] fileLogs=fc.list();
      for (      final String dir : fileLogs) {
        final File fdir=new File(currentPath + dir);
        if (fdir.isDirectory()) {
          vector.addElement(dir + "/");
          if (Cfg.DEBUG) {
            Check.log(TAG + " scanForDirLogs adding: " + dir);
          }
        }
      }
    }
  }
 catch (  final Exception e) {
    if (Cfg.EXCEPTION) {
      Check.log(e);
    }
    if (Cfg.DEBUG) {
      Check.log(TAG + " Error: scanForDirLogs: " + e);
    }
  }
  if (Cfg.DEBUG) {
    Check.log(TAG + " scanForDirLogs #: " + vector.size());
  }
  return vector;
}

private static ArrayList<String> flattenRows(Cursor cursor,int limit){
  Util.throwIfNot(limit >= 0);
  ArrayList<String> flatList=new ArrayList<>();
  final int numColumns=cursor.getColumnCount();
  for (int row=0; row < limit && cursor.moveToNext(); row++) {
    for (int column=0; column < numColumns; column++) {
switch (cursor.getType(column)) {
case Cursor.FIELD_TYPE_NULL:
        flatList.add(null);
      break;
case Cursor.FIELD_TYPE_INTEGER:
    flatList.add(String.valueOf(cursor.getLong(column)));
  break;
case Cursor.FIELD_TYPE_FLOAT:
flatList.add(String.valueOf(cursor.getDouble(column)));
break;
case Cursor.FIELD_TYPE_BLOB:
flatList.add(blobToString(cursor.getBlob(column)));
break;
case Cursor.FIELD_TYPE_STRING:
default :
flatList.add(cursor.getString(column));
break;
}
}
}
if (!cursor.isAfterLast()) {
for (int column=0; column < numColumns; column++) {
flatList.add("{truncated}");
}
}
return flatList;
}

public static void overScrollBy(final PullToRefreshBase<?> view,final int deltaX,final int scrollX,final int deltaY,final int scrollY,final int scrollRange,final int fuzzyThreshold,final float scaleFactor,final boolean isTouchEvent){
  final int deltaValue, currentScrollValue, scrollValue;
switch (view.getPullToRefreshScrollDirection()) {
case HORIZONTAL:
    deltaValue=deltaX;
  scrollValue=scrollX;
currentScrollValue=view.getScrollX();
break;
case VERTICAL:
default :
deltaValue=deltaY;
scrollValue=scrollY;
currentScrollValue=view.getScrollY();
break;
}
if (view.isPullToRefreshOverScrollEnabled() && !view.isRefreshing()) {
final Mode mode=view.getMode();
if (mode.permitsPullToRefresh() && !isTouchEvent && deltaValue != 0) {
final int newScrollValue=(deltaValue + scrollValue);
if (PullToRefreshBase.DEBUG) {
Log.d(LOG_TAG,"OverScroll. DeltaX: " + deltaX + ", ScrollX: "+ scrollX+ ", DeltaY: "+ deltaY+ ", ScrollY: "+ scrollY+ ", NewY: "+ newScrollValue+ ", ScrollRange: "+ scrollRange+ ", CurrentScroll: "+ currentScrollValue);
}
if (newScrollValue < (0 - fuzzyThreshold)) {
if (mode.showHeaderLoadingLayout()) {
if (currentScrollValue == 0) {
view.setState(State.OVERSCROLLING);
}
view.setHeaderScroll((int)(scaleFactor * (currentScrollValue + newScrollValue)));
}
}
 else if (newScrollValue > (scrollRange + fuzzyThreshold)) {
if (mode.showFooterLoadingLayout()) {
if (currentScrollValue == 0) {
view.setState(State.OVERSCROLLING);
}
view.setHeaderScroll((int)(scaleFactor * (currentScrollValue + newScrollValue - scrollRange)));
}
}
 else if (Math.abs(newScrollValue) <= fuzzyThreshold || Math.abs(newScrollValue - scrollRange) <= fuzzyThreshold) {
view.setState(State.RESET);
}
}
 else if (isTouchEvent && State.OVERSCROLLING == view.getState()) {
view.setState(State.RESET);
}
}
}

private Process executeCompiler(ArrayList<String> argList,ArrayList<String> envList,boolean chdir) throws IOException {
  String[] args;
  if (chdir) {
    CharBuffer cb=new CharBuffer();
    cb.append("cd ");
    cb.append(_compiler.getSourceDirName());
    cb.append(";");
    for (int i=0; i < argList.size(); i++) {
      cb.append(" ");
      cb.append(argList.get(i));
    }
    args=new String[3];
    args[0]="/bin/sh";
    args[1]="-c";
    args[2]=cb.toString();
  }
 else {
    args=new String[argList.size()];
    argList.toArray(args);
  }
  String[] envp=new String[envList.size()];
  envList.toArray(envp);
  if (log.isLoggable(Level.FINE)) {
    CharBuffer cb=CharBuffer.allocate();
    for (int i=0; i < args.length; i++) {
      if (i != 0)       cb.append(" ");
      cb.append(args[i]);
    }
    log.fine(cb.close());
  }
  Runtime runtime=Runtime.getRuntime();
  try {
    return runtime.exec(args);
  }
 catch (  Exception e) {
    throw new JavaCompileException(L.l("Can't execute the compiler `{0}'.  This usually means that the compiler is not in the operating system's PATH or the compiler is incorrectly specified in the configuration.  You may need to add the full path to <java compiler='{0}'/>.\n\n{1}",args[0],String.valueOf(e)));
  }
}

public void collapseAllParents(){
  if (mDataList != null && !mDataList.isEmpty()) {
    ArrayList<Object> expandableListItems=getParents(true);
    if (expandableListItems != null && !expandableListItems.isEmpty()) {
      final int expandedItemSize=expandableListItems.size();
      if (expandedItemSize > 0) {
        for (int i=0; i < expandedItemSize; i++) {
          Object o=expandableListItems.get(i);
          int indexOf=mDataList.indexOf(o);
          if (indexOf >= 0)           collapseListItem(indexOf,(BaseExpandableObservable)o,false);
        }
      }
    }
  }
}

@Deprecated protected PdfFormXObject drawPushButtonAppearance(float width,float height,String text,PdfFont font,int fontSize){
  return drawPushButtonAppearance(width,height,text,font,(float)fontSize);
}

public NBTTagCompound loadFile(File saveDirectory,String filename){
  return loadFile(new File(saveDirectory,filename + ".dat"));
}

public boolean dnsDomainIs(String host,String domain){
  return host.endsWith(domain);
}

@SuppressWarnings("unused") public SelectionBuilder reset(){
  mTable=null;
  if (mProjectionMap != null) {
    mProjectionMap.clear();
  }
  if (mSelection != null) {
    mSelection.setLength(0);
  }
  if (mSelectionArgs != null) {
    mSelectionArgs.clear();
  }
  return this;
}

private final synchronized Enumeration<PolicyEntry> elements(){
  return policyEntries.elements();
}

public String format(Calendar calendar,Calendar smscCalendar){
  if (calendar == null || smscCalendar == null) {
    return null;
  }
  long diffTimeInMillis=calendar.getTimeInMillis() - smscCalendar.getTimeInMillis();
  if (diffTimeInMillis < 0) {
    throw new IllegalArgumentException("The requested relative time has already past.");
  }
  Calendar offsetEpoch=Calendar.getInstance(utcTimeZone);
  offsetEpoch.setTimeInMillis(diffTimeInMillis);
  int years=offsetEpoch.get(Calendar.YEAR) - 1970;
  int months=offsetEpoch.get(Calendar.MONTH);
  int days=offsetEpoch.get(Calendar.DAY_OF_MONTH) - 1;
  int hours=offsetEpoch.get(Calendar.HOUR_OF_DAY);
  int minutes=offsetEpoch.get(Calendar.MINUTE);
  int seconds=offsetEpoch.get(Calendar.SECOND);
  if (years >= 100) {
    throw new IllegalArgumentException("The requested relative time is more then a century (" + years + " years).");
  }
  return format(years,months,days,hours,minutes,seconds);
}

private void calculateEntropy(double scale,KStarWrapper params){
  int i, j, k;
  double actent=0.0, randent=0.0;
  double pstar, tprob, avgprob=0.0, minprob=1.0;
  double actClassProb, randClassProb;
  double[][] pseudoClassProbs=new double[NUM_RAND_COLS + 1][m_NumClasses];
  for (j=0; j <= NUM_RAND_COLS; j++) {
    for (i=0; i < m_NumClasses; i++) {
      pseudoClassProbs[j][i]=0.0;
    }
  }
  for (i=0; i < m_NumInstances; i++) {
    if (m_Distances[i] < 0) {
      continue;
    }
 else {
      pstar=PStar(m_Distances[i],scale);
      tprob=pstar / m_ActualCount;
      avgprob+=tprob;
      if (pstar < minprob) {
        minprob=pstar;
      }
      for (k=0; k <= NUM_RAND_COLS; k++) {
        pseudoClassProbs[k][m_RandClassCols[k][i]]+=tprob;
      }
    }
  }
  for (j=m_NumClasses - 1; j >= 0; j--) {
    actClassProb=pseudoClassProbs[NUM_RAND_COLS][j] / avgprob;
    if (actClassProb > 0) {
      actent-=actClassProb * Math.log(actClassProb) / LOG2;
    }
  }
  for (k=0; k < NUM_RAND_COLS; k++) {
    for (i=m_NumClasses - 1; i >= 0; i--) {
      randClassProb=pseudoClassProbs[k][i] / avgprob;
      if (randClassProb > 0) {
        randent-=randClassProb * Math.log(randClassProb) / LOG2;
      }
    }
  }
  randent/=NUM_RAND_COLS;
  params.actEntropy=actent;
  params.randEntropy=randent;
  params.avgProb=avgprob;
  params.minProb=minprob;
}

public static void initCause(Throwable throwable,Throwable cause){
  if (INIT_CAUSE_METHOD != null) {
    try {
      INIT_CAUSE_METHOD.invoke(throwable,new Object[]{cause});
    }
 catch (    Exception e) {
    }
  }
}

public void testBug20685022() throws Exception {
  if (!isCommunityEdition()) {
    return;
  }
  final Properties props=new Properties();
  props.clear();
  props.setProperty("useSSL","true");
  props.setProperty("requireSSL","true");
  props.setProperty("verifyServerCertificate","false");
  getConnectionWithProps(props);
  props.clear();
  props.setProperty("useSSL","true");
  props.setProperty("requireSSL","true");
  props.setProperty("verifyServerCertificate","true");
  props.setProperty("trustCertificateKeyStoreUrl","file:src/testsuite/ssl-test-certs/test-cert-store");
  props.setProperty("trustCertificateKeyStoreType","JKS");
  props.setProperty("trustCertificateKeyStorePassword","password");
  getConnectionWithProps(props);
  props.clear();
  props.setProperty("useSSL","true");
  props.setProperty("requireSSL","true");
  props.setProperty("verifyServerCertificate","true");
  String trustStorePath="src/testsuite/ssl-test-certs/test-cert-store";
  System.setProperty("javax.net.ssl.keyStore",trustStorePath);
  System.setProperty("javax.net.ssl.keyStorePassword","password");
  System.setProperty("javax.net.ssl.trustStore",trustStorePath);
  System.setProperty("javax.net.ssl.trustStorePassword","password");
  getConnectionWithProps(props);
}

public static boolean canRun(final File file){
  return manager.getEngineByExtension(FileUtils.getFileExtension(file)) != null;
}

public void parseElement(String tagName,Map<String,Object> attrs){
  if (canvas == null && tagName.equalsIgnoreCase("GRAPH")) {
    scale=mxUtils.getDouble(attrs,"scale",1);
    canvas=createCanvas(attrs);
    if (canvas != null) {
      canvas.setScale(scale);
    }
  }
 else   if (canvas != null) {
    boolean drawLabel=false;
    if (tagName.equalsIgnoreCase("VERTEX") || tagName.equalsIgnoreCase("GROUP")) {
      drawVertex(attrs);
      drawLabel=true;
    }
 else     if (tagName.equalsIgnoreCase("EDGE")) {
      drawEdge(attrs);
      drawLabel=true;
    }
    if (drawLabel) {
      drawLabel(tagName.equalsIgnoreCase("EDGE"),attrs);
    }
  }
}

private void startPrecaching(){
  Log.v(TAG,"Start precaching");
  prepareNativeLibraries();
  sIsPrecaching=true;
  acquirePrecachingWakeLock();
  mPrecacheLauncher.start();
}

@Override public Enumeration<Option> listOptions(){
  Vector<Option> newVector=new Vector<Option>(1);
  newVector.addElement(new Option("\tSets the range of attribute indices (default last).","R",1,"-R <col>"));
  newVector.addElement(new Option("\tInvert the range specified by -R.","V",1,"-V <col>"));
  return newVector.elements();
}

public WordAlignmentState(final Rule rule,final int start){
  trgPoints=new LinkedList<>();
  srcLength=rule.getFrench().length;
  numNT=rule.getArity();
  srcStart=start;
  final Map<Integer,List<Integer>> alignmentMap=rule.getAlignmentMap();
  final int[] nonTerminalSourcePositions=rule.getNonTerminalSourcePositions();
  final int[] trg=rule.getEnglish();
  for (int trgIndex=0; trgIndex < trg.length; trgIndex++) {
    final AlignedSourceTokens trgPoint=new AlignedSourceTokens();
    if (trg[trgIndex] >= 0) {
      if (alignmentMap.containsKey(trgIndex)) {
        for (        int srcIdx : alignmentMap.get(trgIndex)) {
          trgPoint.add(srcStart + srcIdx);
        }
      }
 else {
        trgPoint.setNull();
      }
    }
 else {
      trgPoint.setNonTerminal();
      final int absoluteNonTerminalSourcePosition=srcStart + nonTerminalSourcePositions[Math.abs(trg[trgIndex]) - 1];
      trgPoint.add(absoluteNonTerminalSourcePosition);
    }
    trgPoints.add(trgPoint);
  }
}

protected void configureImageReaderLoaders(){
  imageReaderLoaders=new Vector<ImageReaderLoader>();
  ImageReaderLoader idl=(ImageReaderLoader)ComponentFactory.create("com.bbn.openmap.dataAccess.image.geotiff.GeoTIFFImageReaderLoader");
  if (idl != null) {
    imageReaderLoaders.add(idl);
  }
 else {
    logger.warning("ImageTileLayer needs JAI installed in order to use GeoTIFF Image Reader.");
  }
  idl=(ImageReaderLoader)ComponentFactory.create("com.bbn.openmap.dataAccess.image.WorldFileImageReaderLoader");
  if (idl != null) {
    imageReaderLoaders.add(idl);
  }
 else {
    logger.warning("ImageTileLayer needs JAI installed in order to use World File Image Reader.");
  }
}

protected void handleSpecialSubstitution(String replace,String replaceWith,int startPos,String description){
  if (replace.equals("<ignore>")) {
    if (replaceWith.charAt(0) == '(') {
      error("Ignore group can't be enclosed in (",startPos,description);
    }
    ignoreChars=CharSet.parseString(replaceWith);
  }
}

@Override public void countExample(Example example){
  double plabel;
  double label=example.getValue(labelAttribute);
  if (!predictedAttribute.isNominal()) {
    plabel=example.getValue(predictedAttribute);
  }
 else {
    String labelS=example.getValueAsString(labelAttribute);
    plabel=example.getConfidence(labelS);
    label=1.0d;
  }
  double weight=1.0d;
  if (weightAttribute != null) {
    weight=example.getValue(weightAttribute);
  }
  double diff=weight * Math.abs(label - plabel);
  deviationSum+=diff;
  double relDiff=Math.abs(weight * label - (trueLabelSum / exampleCounter));
  relativeSum+=relDiff;
}

public static void unzip(String zipFile,String location) throws IOException {
  final int BUFFER_SIZE=10240;
  int size;
  byte[] buffer=new byte[BUFFER_SIZE];
  try {
    if (!location.endsWith("/")) {
      location+="/";
    }
    File f=new File(location);
    if (!f.isDirectory()) {
      f.mkdirs();
    }
    ZipInputStream zin=new ZipInputStream(new BufferedInputStream(new FileInputStream(zipFile),BUFFER_SIZE));
    try {
      ZipEntry ze=null;
      while ((ze=zin.getNextEntry()) != null) {
        String path=location + ze.getName();
        File unzipFile=new File(path);
        if (ze.isDirectory()) {
          if (!unzipFile.isDirectory()) {
            unzipFile.mkdirs();
          }
        }
 else {
          File parentDir=unzipFile.getParentFile();
          if (null != parentDir) {
            if (!parentDir.isDirectory()) {
              parentDir.mkdirs();
            }
          }
          FileOutputStream out=new FileOutputStream(unzipFile,false);
          BufferedOutputStream fout=new BufferedOutputStream(out,BUFFER_SIZE);
          try {
            while ((size=zin.read(buffer,0,BUFFER_SIZE)) != -1) {
              fout.write(buffer,0,size);
            }
            zin.closeEntry();
          }
  finally {
            fout.flush();
            fout.close();
          }
        }
      }
    }
  finally {
      zin.close();
    }
  }
 catch (  Exception e) {
    Log.e(TAG,"Unzip exception",e);
  }
}

private void addDeclAnnotations(Map<String,Set<AnnotationMirror>> declAnnos,Element elt){
  if (fromStubFile != null) {
    Set<AnnotationMirror> annos=declAnnos.get(ElementUtils.getVerboseName(elt));
    if (annos == null) {
      annos=AnnotationUtils.createAnnotationSet();
      putOrAddToMap(declAnnos,ElementUtils.getVerboseName(elt),annos);
    }
    annos.add(fromStubFile);
  }
}

private void inspectConditionsWithBooleans(LinkedList<PsiElement> objBranchConditions){
  for (  PsiElement objExpression : objBranchConditions) {
    if (!(objExpression instanceof ConstantReference)) {
      continue;
    }
    if (ExpressionSemanticUtil.isBoolean((ConstantReference)objExpression)) {
      holder.registerProblem(objExpression,strProblemDescriptionBooleans,ProblemHighlightType.GENERIC_ERROR_OR_WARNING);
    }
  }
}

public static XContentType xContentType(CharSequence content){
  int length=content.length() < GUESS_HEADER_LENGTH ? content.length() : GUESS_HEADER_LENGTH;
  if (length == 0) {
    return null;
  }
  char first=content.charAt(0);
  if (first == '{') {
    return XContentType.JSON;
  }
  if (length > 2 && first == SmileConstants.HEADER_BYTE_1 && content.charAt(1) == SmileConstants.HEADER_BYTE_2 && content.charAt(2) == SmileConstants.HEADER_BYTE_3) {
    return XContentType.SMILE;
  }
  if (length > 2 && first == '-' && content.charAt(1) == '-' && content.charAt(2) == '-') {
    return XContentType.YAML;
  }
  for (int i=0; i < length; i++) {
    char c=content.charAt(i);
    if (c == '{') {
      return XContentType.JSON;
    }
    if (Character.isWhitespace(c) == false) {
      break;
    }
  }
  return null;
}

@RequestMapping(value="/{bookmarkId}",method=RequestMethod.DELETE) public ResponseEntity<Bookmark> deleteBookmark(@PathVariable(value="username") String username,@PathVariable(value="bookmarkId") int bookmarkId) throws BookmarkNotFoundException {
  Optional<Bookmark> optional=bookmarksRepository.findByIdAndUserUsername(bookmarkId,username);
  if (optional.isPresent()) {
    bookmarksRepository.delete(optional.get());
    return new ResponseEntity<>(optional.get(),HttpStatus.OK);
  }
 else {
    throw new BookmarkNotFoundException("Bookmark not found. id = " + bookmarkId);
  }
}

public static Object loadInstance(Class clazz,Object defaultValue){
  try {
    return clazz.newInstance();
  }
 catch (  Throwable t) {
    return defaultValue;
  }
}

public static String toJSONString(Object value){
  final StringWriter writer=new StringWriter();
  try {
    writeJSONString(value,writer);
    return writer.toString();
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}

public static final <A>CollectionX<A> toLazyCollection(final Stream<A> stream){
  return SeqUtils.toLazyCollection(stream.iterator());
}

public JSONTokener(Reader reader){
  this.reader=reader.markSupported() ? reader : new BufferedReader(reader);
  this.eof=false;
  this.usePrevious=false;
  this.previous=0;
  this.index=0;
  this.character=1;
  this.line=1;
}

static Unit valueOf(String name,boolean horizontal){
  if (name.length() == 0) {
    Unit defaultUnit=Sizes.getDefaultUnit();
    if (defaultUnit != null) {
      return defaultUnit;
    }
    return horizontal ? DIALOG_UNITS_X : DIALOG_UNITS_Y;
  }
 else   if (name.equals("px")) {
    return PIXEL;
  }
 else   if (name.equals("dlu")) {
    return horizontal ? DIALOG_UNITS_X : DIALOG_UNITS_Y;
  }
 else   if (name.equals("pt")) {
    return POINT;
  }
 else   if (name.equals("in")) {
    return INCH;
  }
 else   if (name.equals("mm")) {
    return MILLIMETER;
  }
 else   if (name.equals("cm")) {
    return CENTIMETER;
  }
 else {
    throw new IllegalArgumentException("Invalid unit name '" + name + "'. Must be one of: "+ "px, dlu, pt, mm, cm, in");
  }
}

